(self.webpackChunkFrontEndHearMe=self.webpackChunkFrontEndHearMe||[]).push([[179],{458:(bd,ss,Sa)=>{"use strict";function xr(t){return"function"==typeof t}function se(t){const n=t(E=>{Error.call(E),E.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const U=se(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((E,j)=>`${j+1}) ${E.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function r(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class I{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const te of n)te.remove(this);else n.remove(this);const{initialTeardown:E}=this;if(xr(E))try{E()}catch(te){e=te instanceof U?te.errors:[te]}const{_finalizers:j}=this;if(j){this._finalizers=null;for(const te of j)try{k(te)}catch(ve){e=e??[],ve instanceof U?e=[...e,...ve.errors]:e.push(ve)}}if(e)throw new U(e)}}add(e){var n;if(e&&e!==this)if(this.closed)k(e);else{if(e instanceof I){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&r(n,e)}remove(e){const{_finalizers:n}=this;n&&r(n,e),e instanceof I&&e._removeParent(this)}}I.EMPTY=(()=>{const t=new I;return t.closed=!0,t})();const C=I.EMPTY;function f(t){return t instanceof I||t&&"closed"in t&&xr(t.remove)&&xr(t.add)&&xr(t.unsubscribe)}function k(t){xr(t)?t():t.unsubscribe()}const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},v={setTimeout(t,e,...n){const{delegate:E}=v;return E?.setTimeout?E.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=v;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function c(t){v.setTimeout(()=>{const{onUnhandledError:e}=T;if(!e)throw t;e(t)})}function i(){}const s=l("C",void 0,void 0);function l(t,e,n){return{kind:t,value:e,error:n}}let u=null;function d(t){if(T.useDeprecatedSynchronousErrorHandling){const e=!u;if(e&&(u={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:E}=u;if(u=null,n)throw E}}else t()}class h extends I{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,f(e)&&e.add(this)):this.destination=m}static create(e,n,E){return new _(e,n,E)}next(e){this.isStopped?M(function o(t){return l("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?M(function a(t){return l("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?M(s,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const w=Function.prototype.bind;function y(t,e){return w.call(t,e)}class p{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(E){x(E)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(E){x(E)}else x(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){x(n)}}}class _ extends h{constructor(e,n,E){let j;if(super(),xr(e)||!e)j={next:e??void 0,error:n??void 0,complete:E??void 0};else{let te;this&&T.useDeprecatedNextContext?(te=Object.create(e),te.unsubscribe=()=>this.unsubscribe(),j={next:e.next&&y(e.next,te),error:e.error&&y(e.error,te),complete:e.complete&&y(e.complete,te)}):j=e}this.destination=new p(j)}}function x(t){T.useDeprecatedSynchronousErrorHandling?function g(t){T.useDeprecatedSynchronousErrorHandling&&u&&(u.errorThrown=!0,u.error=t)}(t):c(t)}function M(t,e){const{onStoppedNotification:n}=T;n&&v.setTimeout(()=>n(t,e))}const m={closed:!0,next:i,error:function b(t){throw t},complete:i},D="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(t){return t}function P(t){return 0===t.length?S:1===t.length?t[0]:function(n){return t.reduce((E,j)=>j(E),n)}}let R=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const E=new t;return E.source=this,E.operator=n,E}subscribe(n,E,j){const te=function J(t){return t&&t instanceof h||function B(t){return t&&xr(t.next)&&xr(t.error)&&xr(t.complete)}(t)&&f(t)}(n)?n:new _(n,E,j);return d(()=>{const{operator:ve,source:Be}=this;te.add(ve?ve.call(te,Be):Be?this._subscribe(te):this._trySubscribe(te))}),te}_trySubscribe(n){try{return this._subscribe(n)}catch(E){n.error(E)}}forEach(n,E){return new(E=F(E))((j,te)=>{const ve=new _({next:Be=>{try{n(Be)}catch(Qe){te(Qe),ve.unsubscribe()}},error:te,complete:j});this.subscribe(ve)})}_subscribe(n){var E;return null===(E=this.source)||void 0===E?void 0:E.subscribe(n)}[D](){return this}pipe(...n){return P(n)(this)}toPromise(n){return new(n=F(n))((E,j)=>{let te;this.subscribe(ve=>te=ve,ve=>j(ve),()=>E(te))})}}return t.create=e=>new t(e),t})();function F(t){var e;return null!==(e=t??T.Promise)&&void 0!==e?e:Promise}const z=se(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends R{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const E=new G(this,this);return E.operator=n,E}_throwIfClosed(){if(this.closed)throw new z}next(n){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const E of this.currentObservers)E.next(n)}})}error(n){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:E}=this;for(;E.length;)E.shift().error(n)}})}complete(){d(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:E,isStopped:j,observers:te}=this;return E||j?C:(this.currentObservers=null,te.push(n),new I(()=>{this.currentObservers=null,r(te,n)}))}_checkFinalizedStatuses(n){const{hasError:E,thrownError:j,isStopped:te}=this;E?n.error(j):te&&n.complete()}asObservable(){const n=new R;return n.source=this,n}}return t.create=(e,n)=>new G(e,n),t})();class G extends ${constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,E;null===(E=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===E||E.call(n,e)}error(e){var n,E;null===(E=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===E||E.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,E;return null!==(E=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==E?E:C}}class H extends ${constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:E}=this;if(e)throw n;return this._throwIfClosed(),E}next(e){super.next(this._value=e)}}function X(t){return xr(t?.lift)}function K(t){return e=>{if(X(e))return e.lift(function(n){try{return t(n,this)}catch(E){this.error(E)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,E,j){return new ae(t,e,n,E,j)}class ae extends h{constructor(e,n,E,j,te,ve){super(e),this.onFinalize=te,this.shouldUnsubscribe=ve,this._next=n?function(Be){try{n(Be)}catch(Qe){e.error(Qe)}}:super._next,this._error=j?function(Be){try{j(Be)}catch(Qe){e.error(Qe)}finally{this.unsubscribe()}}:super._error,this._complete=E?function(){try{E()}catch(Be){e.error(Be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ne(t,e){return K((n,E)=>{let j=0;n.subscribe(ue(E,te=>{E.next(t.call(e,te,j++))}))})}function De(t){return this instanceof De?(this.v=t,this):new De(t)}function be(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function ge(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],E=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&E>=t.length&&(t=void 0),{value:t&&t[E++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},E("next"),E("throw"),E("return"),n[Symbol.asyncIterator]=function(){return this},n);function E(te){n[te]=t[te]&&function(ve){return new Promise(function(Be,Qe){!function j(te,ve,Be,Qe){Promise.resolve(Qe).then(function(at){te({value:at,done:Be})},ve)}(Be,Qe,(ve=t[te](ve)).done,ve.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Dt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function vt(t){return xr(t?.then)}function mt(t){return xr(t[D])}function Lt(t){return Symbol.asyncIterator&&xr(t?.[Symbol.asyncIterator])}function Ft(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Wt=function Rt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ht(t){return xr(t?.[Wt])}function it(t){return function qe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j,E=n.apply(t,e||[]),te=[];return j={},ve("next"),ve("throw"),ve("return"),j[Symbol.asyncIterator]=function(){return this},j;function ve(vn){E[vn]&&(j[vn]=function(kn){return new Promise(function(Un,$n){te.push([vn,kn,Un,$n])>1||Be(vn,kn)})})}function Be(vn,kn){try{!function Qe(vn){vn.value instanceof De?Promise.resolve(vn.value.v).then(at,Tt):Bt(te[0][2],vn)}(E[vn](kn))}catch(Un){Bt(te[0][3],Un)}}function at(vn){Be("next",vn)}function Tt(vn){Be("throw",vn)}function Bt(vn,kn){vn(kn),te.shift(),te.length&&Be(te[0][0],te[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:E,done:j}=yield De(n.read());if(j)return yield De(void 0);yield yield De(E)}}finally{n.releaseLock()}})}function st(t){return xr(t?.getReader)}function Je(t){if(t instanceof R)return t;if(null!=t){if(mt(t))return function ot(t){return new R(e=>{const n=t[D]();if(xr(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Dt(t))return function pt(t){return new R(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(vt(t))return function xt(t){return new R(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,c)})}(t);if(Lt(t))return Ge(t);if(Ht(t))return function He(t){return new R(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(st(t))return function dt(t){return Ge(it(t))}(t)}throw Ft(t)}function Ge(t){return new R(e=>{(function ht(t,e){var n,E,j,te;return function we(t,e,n,E){return new(n||(n=Promise))(function(te,ve){function Be(Tt){try{at(E.next(Tt))}catch(Bt){ve(Bt)}}function Qe(Tt){try{at(E.throw(Tt))}catch(Bt){ve(Bt)}}function at(Tt){Tt.done?te(Tt.value):function j(te){return te instanceof n?te:new n(function(ve){ve(te)})}(Tt.value).then(Be,Qe)}at((E=E.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=be(t);!(E=yield n.next()).done;)if(e.next(E.value),e.closed)return}catch(ve){j={error:ve}}finally{try{E&&!E.done&&(te=n.return)&&(yield te.call(n))}finally{if(j)throw j.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function kt(t,e,n,E=0,j=!1){const te=e.schedule(function(){n(),j?t.add(this.schedule(null,E)):this.unsubscribe()},E);if(t.add(te),!j)return te}function Et(t,e,n=1/0){return xr(e)?Et((E,j)=>ne((te,ve)=>e(E,te,j,ve))(Je(t(E,j))),n):("number"==typeof e&&(n=e),K((E,j)=>function St(t,e,n,E,j,te,ve,Be){const Qe=[];let at=0,Tt=0,Bt=!1;const vn=()=>{Bt&&!Qe.length&&!at&&e.complete()},kn=$n=>at<E?Un($n):Qe.push($n),Un=$n=>{te&&e.next($n),at++;let Mr=!1;Je(n($n,Tt++)).subscribe(ue(e,Ir=>{j?.(Ir),te?kn(Ir):e.next(Ir)},()=>{Mr=!0},void 0,()=>{if(Mr)try{for(at--;Qe.length&&at<E;){const Ir=Qe.shift();ve?kt(e,ve,()=>Un(Ir)):Un(Ir)}vn()}catch(Ir){e.error(Ir)}}))};return t.subscribe(ue(e,kn,()=>{Bt=!0,vn()})),()=>{Be?.()}}(E,j,t,n)))}function wt(t=1/0){return Et(S,t)}const Nt=new R(t=>t.complete());function Pt(t){return t&&xr(t.schedule)}function Zt(t){return t[t.length-1]}function Xt(t){return Pt(Zt(t))?t.pop():void 0}function on(t,e=0){return K((n,E)=>{n.subscribe(ue(E,j=>kt(E,t,()=>E.next(j),e),()=>kt(E,t,()=>E.complete(),e),j=>kt(E,t,()=>E.error(j),e)))})}function cn(t,e=0){return K((n,E)=>{E.add(t.schedule(()=>n.subscribe(E),e))})}function rn(t,e){if(!t)throw new Error("Iterable cannot be null");return new R(n=>{kt(n,e,()=>{const E=t[Symbol.asyncIterator]();kt(n,e,()=>{E.next().then(j=>{j.done?n.complete():n.next(j.value)})},0,!0)})})}function bn(t,e){return e?function pn(t,e){if(null!=t){if(mt(t))return function tn(t,e){return Je(t).pipe(cn(e),on(e))}(t,e);if(Dt(t))return function Fn(t,e){return new R(n=>{let E=0;return e.schedule(function(){E===t.length?n.complete():(n.next(t[E++]),n.closed||this.schedule())})})}(t,e);if(vt(t))return function Cn(t,e){return Je(t).pipe(cn(e),on(e))}(t,e);if(Lt(t))return rn(t,e);if(Ht(t))return function En(t,e){return new R(n=>{let E;return kt(n,e,()=>{E=t[Wt](),kt(n,e,()=>{let j,te;try{({value:j,done:te}=E.next())}catch(ve){return void n.error(ve)}te?n.complete():n.next(j)},0,!0)}),()=>xr(E?.return)&&E.return()})}(t,e);if(st(t))return function yn(t,e){return rn(it(t),e)}(t,e)}throw Ft(t)}(t,e):Je(t)}function In(...t){const e=Xt(t),n=function dn(t,e){return"number"==typeof Zt(t)?t.pop():e}(t,1/0),E=t;return E.length?1===E.length?Je(E[0]):wt(n)(bn(E,e)):Nt}function _n(...t){return bn(t,Xt(t))}function qn(t={}){const{connector:e=(()=>new $),resetOnError:n=!0,resetOnComplete:E=!0,resetOnRefCountZero:j=!0}=t;return te=>{let ve,Be,Qe,at=0,Tt=!1,Bt=!1;const vn=()=>{Be?.unsubscribe(),Be=void 0},kn=()=>{vn(),ve=Qe=void 0,Tt=Bt=!1},Un=()=>{const $n=ve;kn(),$n?.unsubscribe()};return K(($n,Mr)=>{at++,!Bt&&!Tt&&vn();const Ir=Qe=Qe??e();Mr.add(()=>{at--,0===at&&!Bt&&!Tt&&(Be=Wn(Un,j))}),Ir.subscribe(Mr),!ve&&at>0&&(ve=new _({next:hr=>Ir.next(hr),error:hr=>{Bt=!0,vn(),Be=Wn(kn,n,hr),Ir.error(hr)},complete:()=>{Tt=!0,vn(),Be=Wn(kn,E),Ir.complete()}}),Je($n).subscribe(ve))})(te)}}function Wn(t,e,...n){if(!0===e)return void t();if(!1===e)return;const E=new _({next:()=>{E.unsubscribe(),t()}});return Je(e(...n)).subscribe(E)}function Nn(t,e){return K((n,E)=>{let j=null,te=0,ve=!1;const Be=()=>ve&&!j&&E.complete();n.subscribe(ue(E,Qe=>{j?.unsubscribe();let at=0;const Tt=te++;Je(t(Qe,Tt)).subscribe(j=ue(E,Bt=>E.next(e?e(Qe,Bt,Tt,at++):Bt),()=>{j=null,Be()}))},()=>{ve=!0,Be()}))})}function Xn(t,e=S){return t=t??yr,K((n,E)=>{let j,te=!0;n.subscribe(ue(E,ve=>{const Be=e(ve);(te||!t(j,Be))&&(te=!1,j=Be,E.next(ve))}))})}function yr(t,e){return t===e}function fr(t){for(let e in t)if(t[e]===fr)return e;throw Error("Could not find renamed property on target object.")}function Er(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(gr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function mr(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const zr=fr({__forward_ref__:fr});function Jt(t){return t.__forward_ref__=Jt,t.toString=function(){return gr(this())},t}function an(t){return Sn(t)?t():t}function Sn(t){return"function"==typeof t&&t.hasOwnProperty(zr)&&t.__forward_ref__===Jt}function Ln(t){return t&&!!t.\u0275providers}class xn extends Error{constructor(e,n){super(function Qn(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function er(t){return"string"==typeof t?t:null==t?"":String(t)}function hn(t,e){throw new xn(-201,!1)}function or(t,e){null==t&&function dr(t,e,n,E){throw new Error(`ASSERTION ERROR: ${t}`+(null==E?"":` [Expected=> ${n} ${E} ${e} <=Actual]`))}(e,t,null,"!=")}function rr(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ar(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nr(t){return Gi(t,lo)||Gi(t,Co)}function Gi(t,e){return t.hasOwnProperty(e)?t[e]:null}function so(t){return t&&(t.hasOwnProperty(Qi)||t.hasOwnProperty(Rs))?t[Qi]:null}const lo=fr({\u0275prov:fr}),Qi=fr({\u0275inj:fr}),Co=fr({ngInjectableDef:fr}),Rs=fr({ngInjectorDef:fr});var Qr=(()=>((Qr=Qr||{})[Qr.Default=0]="Default",Qr[Qr.Host=1]="Host",Qr[Qr.Self=2]="Self",Qr[Qr.SkipSelf=4]="SkipSelf",Qr[Qr.Optional=8]="Optional",Qr))();let _s;function Xo(t){const e=_s;return _s=t,e}function jl(t,e,n){const E=Nr(t);return E&&"root"==E.providedIn?void 0===E.value?E.value=E.factory():E.value:n&Qr.Optional?null:void 0!==e?e:void hn(gr(t))}const Bi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ja={},Ro="__NG_DI_FLAG__",cl="ngTempTokenPath",Fs=/\n/gm,Ns="__source";let Ea;function Ca(t){const e=Ea;return Ea=t,e}function Xs(t,e=Qr.Default){if(void 0===Ea)throw new xn(-203,!1);return null===Ea?jl(t,void 0,e):Ea.get(t,e&Qr.Optional?null:void 0,e)}function Br(t,e=Qr.Default){return(function Iu(){return _s}()||Xs)(an(t),e)}function Vr(t,e=Qr.Default){return Br(t,su(e))}function su(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lu(t){const e=[];for(let n=0;n<t.length;n++){const E=an(t[n]);if(Array.isArray(E)){if(0===E.length)throw new xn(900,!1);let j,te=Qr.Default;for(let ve=0;ve<E.length;ve++){const Be=E[ve],Qe=Yu(Be);"number"==typeof Qe?-1===Qe?j=Be.token:te|=Qe:j=Be}e.push(Br(j,te))}else e.push(Br(E))}return e}function Hl(t,e){return t[Ro]=e,t.prototype[Ro]=e,t}function Yu(t){return t[Ro]}function Da(t){return{toString:t}.toString()}var Ia=(()=>((Ia=Ia||{})[Ia.OnPush=0]="OnPush",Ia[Ia.Default=1]="Default",Ia))(),oa=(()=>{return(t=oa||(oa={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",oa;var t})();const Ja={},Vi=[],Gl=fr({\u0275cmp:fr}),Ua=fr({\u0275dir:fr}),Ks=fr({\u0275pipe:fr}),ws=fr({\u0275mod:fr}),ha=fr({\u0275fac:fr}),Wl=fr({__NG_ELEMENT_ID__:fr}),Js=fr({__NG_ENV_ID__:fr});function no(t,e,n){let E=t.length;for(;;){const j=t.indexOf(e,n);if(-1===j)return j;if(0===j||t.charCodeAt(j-1)<=32){const te=e.length;if(j+te===E||t.charCodeAt(j+te)<=32)return j}n=j+1}}function Qa(t,e,n){let E=0;for(;E<n.length;){const j=n[E];if("number"==typeof j){if(0!==j)break;E++;const te=n[E++],ve=n[E++],Be=n[E++];t.setAttribute(e,ve,Be,te)}else{const te=j,ve=n[++E];es(te)?t.setProperty(e,te,ve):t.setAttribute(e,te,ve),E++}}return E}function Zl(t){return 3===t||4===t||6===t}function es(t){return 64===t.charCodeAt(0)}function Ts(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let E=0;E<e.length;E++){const j=e[E];"number"==typeof j?n=j:0===n||_c(t,n,j,null,-1===n||2===n?e[++E]:null)}}return t}function _c(t,e,n,E,j){let te=0,ve=t.length;if(-1===e)ve=-1;else for(;te<t.length;){const Be=t[te++];if("number"==typeof Be){if(Be===e){ve=-1;break}if(Be>e){ve=te-1;break}}}for(;te<t.length;){const Be=t[te];if("number"==typeof Be)break;if(Be===n){if(null===E)return void(null!==j&&(t[te+1]=j));if(E===t[te+1])return void(t[te+2]=j)}te++,null!==E&&te++,null!==j&&te++}-1!==ve&&(t.splice(ve,0,e),te=ve+1),t.splice(te++,0,n),null!==E&&t.splice(te++,0,E),null!==j&&t.splice(te++,0,j)}const uu="ng-template";function wc(t,e,n){let E=0,j=!0;for(;E<t.length;){let te=t[E++];if("string"==typeof te&&j){const ve=t[E++];if(n&&"class"===te&&-1!==no(ve.toLowerCase(),e,0))return!0}else{if(1===te){for(;E<t.length&&"string"==typeof(te=t[E++]);)if(te.toLowerCase()===e)return!0;return!1}"number"==typeof te&&(j=!1)}}return!1}function $u(t){return 4===t.type&&t.value!==uu}function cu(t,e,n){return e===(4!==t.type||n?t.value:uu)}function Yl(t,e,n){let E=4;const j=t.attrs||[],te=function Qs(t){for(let e=0;e<t.length;e++)if(Zl(t[e]))return e;return t.length}(j);let ve=!1;for(let Be=0;Be<e.length;Be++){const Qe=e[Be];if("number"!=typeof Qe){if(!ve)if(4&E){if(E=2|1&E,""!==Qe&&!cu(t,Qe,n)||""===Qe&&1===e.length){if(Ra(E))return!1;ve=!0}}else{const at=8&E?Qe:e[++Be];if(8&E&&null!==t.attrs){if(!wc(t.attrs,at,n)){if(Ra(E))return!1;ve=!0}continue}const Bt=dl(8&E?"class":Qe,j,$u(t),n);if(-1===Bt){if(Ra(E))return!1;ve=!0;continue}if(""!==at){let vn;vn=Bt>te?"":j[Bt+1].toLowerCase();const kn=8&E?vn:null;if(kn&&-1!==no(kn,at,0)||2&E&&at!==vn){if(Ra(E))return!1;ve=!0}}}}else{if(!ve&&!Ra(E)&&!Ra(Qe))return!1;if(ve&&Ra(Qe))continue;ve=!1,E=Qe|1&E}}return Ra(E)||ve}function Ra(t){return 0==(1&t)}function dl(t,e,n,E){if(null===e)return-1;let j=0;if(E||!n){let te=!1;for(;j<e.length;){const ve=e[j];if(ve===t)return j;if(3===ve||6===ve)te=!0;else{if(1===ve||2===ve){let Be=e[++j];for(;"string"==typeof Be;)Be=e[++j];continue}if(4===ve)break;if(0===ve){j+=4;continue}}j+=te?1:2}return-1}return function Lu(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const E=t[n];if("number"==typeof E)return-1;if(E===e)return n;n++}return-1}(e,t)}function zs(t,e,n=!1){for(let E=0;E<e.length;E++)if(Yl(t,e[E],n))return!0;return!1}function Ms(t,e){e:for(let n=0;n<e.length;n++){const E=e[n];if(t.length===E.length){for(let j=0;j<t.length;j++)if(t[j]!==E[j])continue e;return!0}}return!1}function Xu(t,e){return t?":not("+e.trim()+")":e}function Tc(t){let e=t[0],n=1,E=2,j="",te=!1;for(;n<t.length;){let ve=t[n];if("string"==typeof ve)if(2&E){const Be=t[++n];j+="["+ve+(Be.length>0?'="'+Be+'"':"")+"]"}else 8&E?j+="."+ve:4&E&&(j+=" "+ve);else""!==j&&!Ra(ve)&&(e+=Xu(te,j),j=""),E=ve,te=te||!Ra(E);n++}return""!==j&&(e+=Xu(te,j)),e}function As(t){return Da(()=>{const e=Bs(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Ia.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||oa.Emulated,styles:t.styles||Vi,_:null,schemas:t.schemas||null,tView:null,id:""};Pu(n);const E=t.dependencies;return n.directiveDefs=ml(E,!1),n.pipeDefs=ml(E,!0),n.id=function du(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const j of n)e=Math.imul(31,e)+j.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(n),n})}function Ku(t){return Li(t)||Hi(t)}function $l(t){return null!==t}function zo(t){return Da(()=>({type:t.type,bootstrap:t.bootstrap||Vi,declarations:t.declarations||Vi,imports:t.imports||Vi,exports:t.exports||Vi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function kl(t,e){if(null==t)return Ja;const n={};for(const E in t)if(t.hasOwnProperty(E)){let j=t[E],te=j;Array.isArray(j)&&(te=j[1],j=j[0]),n[j]=E,e&&(e[j]=te)}return n}function bi(t){return Da(()=>{const e=Bs(t);return Pu(e),e})}function Li(t){return t[Gl]||null}function Hi(t){return t[Ua]||null}function vi(t){return t[Ks]||null}function Ko(t,e){const n=t[ws]||null;if(!n&&!0===e)throw new Error(`Type ${gr(t)} does not have '\u0275mod' property.`);return n}function Bs(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ja,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Vi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kl(t.inputs,e),outputs:kl(t.outputs)}}function Pu(t){t.features?.forEach(e=>e(t))}function ml(t,e){if(!t)return null;const n=e?vi:Ku;return()=>("function"==typeof t?t():t).map(E=>n(E)).filter($l)}const yo=0,Gr=1,pi=2,xi=3,pa=4,ks=5,ji=6,Bo=7,Fi=8,So=9,jo=10,mi=11,Fa=12,Jo=13,la=14,ro=15,yl=16,ma=17,ho=18,Hr=19,ua=20,ls=21,us=22,js=23,Us=24,Mi=25,ts=1,Sl=2,Va=7,La=9,po=11;function Wo(t){return Array.isArray(t)&&"object"==typeof t[ts]}function Zi(t){return Array.isArray(t)&&!0===t[ts]}function tl(t){return 0!=(4&t.flags)}function cs(t){return t.componentOffset>-1}function Uo(t){return 1==(1&t.flags)}function Ii(t){return!!t.template}function El(t){return 0!=(512&t[pi])}function qa(t,e){return t.hasOwnProperty(ha)?t[ha]:null}let Dl=Bi.WeakRef??class Ga{constructor(e){this.ref=e}deref(){return this.ref}},al=0,V=null,Y=!1;function W(t){const e=V;return V=t,e}class re{constructor(){this.id=al++,this.ref=function Kl(t){return new Dl(t)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,n]of this.producers){const E=n.producerNode.deref();if(void 0!==E&&n.atTrackingVersion===this.trackingVersion){if(E.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(e),E?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=Y;Y=!0;try{for(const[n,E]of this.consumers){const j=E.consumerNode.deref();void 0!==j&&j.trackingVersion===E.atTrackingVersion?j.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),j?.producers.delete(this.id))}}finally{Y=e}}producerAccessed(){if(Y)throw new Error("");if(null===V)return;let e=V.producers.get(this.id);void 0===e?(e={consumerNode:V.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:V.trackingVersion},V.producers.set(this.id,e),this.consumers.set(V.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=V.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==V?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Se=null;const At=()=>{};class Ut extends re{constructor(e,n,E){super(),this.watch=e,this.schedule=n,this.dirty=!1,this.cleanupFn=At,this.registerOnCleanup=j=>{this.cleanupFn=j},this.consumerAllowSignalWrites=E}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=W(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=At,this.watch(this.registerOnCleanup)}finally{W(e)}}cleanup(){this.cleanupFn()}}class qt{constructor(e,n,E){this.previousValue=e,this.currentValue=n,this.firstChange=E}isFirstChange(){return this.firstChange}}function jt(){return Kt}function Kt(t){return t.type.prototype.ngOnChanges&&(t.setInput=gn),Vt}function Vt(){const t=nn(this),e=t?.current;if(e){const n=t.previous;if(n===Ja)t.previous=e;else for(let E in e)n[E]=e[E];t.current=null,this.ngOnChanges(e)}}function gn(t,e,n,E){const j=this.declaredInputs[n],te=nn(t)||function On(t,e){return t[ln]=e}(t,{previous:Ja,current:null}),ve=te.current||(te.current={}),Be=te.previous,Qe=Be[j];ve[j]=new qt(Qe&&Qe.currentValue,e,Be===Ja),t[E]=e}jt.ngInherit=!0;const ln="__ngSimpleChanges__";function nn(t){return t[ln]||null}const Jn=function(t,e,n){};function wr(t){for(;Array.isArray(t);)t=t[yo];return t}function Or(t,e){return wr(e[t])}function Rr(t,e){return wr(e[t.index])}function ir(t,e){return t.data[e]}function Lr(t,e){const n=e[t];return Wo(n)?n:n[yo]}function Ai(t,e){return null==e?null:t[e]}function Yi(t){t[ma]=0}function xo(t){1024&t[pi]||(t[pi]|=1024,$i(t,1))}function mo(t){1024&t[pi]&&(t[pi]&=-1025,$i(t,-1))}function $i(t,e){let n=t[xi];if(null===n)return;n[ks]+=e;let E=n;for(n=n[xi];null!==n&&(1===e&&1===E[ks]||-1===e&&0===E[ks]);)n[ks]+=e,E=n,n=n[xi]}const $r={lFrame:u0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function _o(){return $r.bindingsEnabled}function na(){return null!==$r.skipHydrationRootTNode}function Tr(){return $r.lFrame.lView}function hi(){return $r.lFrame.tView}function Za(){let t=mh();for(;null!==t&&64===t.type;)t=t.parent;return t}function mh(){return $r.lFrame.currentTNode}function sl(t,e){const n=$r.lFrame;n.currentTNode=t,n.isParent=e}function Zc(){return $r.lFrame.isParent}function tc(){$r.lFrame.isParent=!1}function kf(){return $r.lFrame.bindingIndex++}function og(t,e){const n=$r.lFrame;n.bindingIndex=n.bindingRootIndex=t,Sf(e)}function Sf(t){$r.lFrame.currentDirectiveIndex=t}function wd(){return $r.lFrame.currentQueryIndex}function s0(t){$r.lFrame.currentQueryIndex=t}function ky(t){const e=t[Gr];return 2===e.type?e.declTNode:1===e.type?t[ji]:null}function l0(t,e,n){if(n&Qr.SkipSelf){let j=e,te=t;for(;!(j=j.parent,null!==j||n&Qr.Host||(j=ky(te),null===j||(te=te[la],10&j.type))););if(null===j)return!1;e=j,t=te}const E=$r.lFrame=xh();return E.currentTNode=e,E.lView=t,!0}function yh(t){const e=xh(),n=t[Gr];$r.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xh(){const t=$r.lFrame,e=null===t?null:t.child;return null===e?u0(t):e}function u0(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function bh(){const t=$r.lFrame;return $r.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Mc=bh;function hs(){const t=bh();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ll(){return $r.lFrame.selectedIndex}function $c(t){$r.lFrame.selectedIndex=t}function ba(){const t=$r.lFrame;return ir(t.tView,t.selectedIndex)}let rc=!0;function Ac(){return rc}function kc(t){rc=t}function wh(t,e){for(let n=e.directiveStart,E=e.directiveEnd;n<E;n++){const te=t.data[n].type.prototype,{ngAfterContentInit:ve,ngAfterContentChecked:Be,ngAfterViewInit:Qe,ngAfterViewChecked:at,ngOnDestroy:Tt}=te;ve&&(t.contentHooks??=[]).push(-n,ve),Be&&((t.contentHooks??=[]).push(n,Be),(t.contentCheckHooks??=[]).push(n,Be)),Qe&&(t.viewHooks??=[]).push(-n,Qe),at&&((t.viewHooks??=[]).push(n,at),(t.viewCheckHooks??=[]).push(n,at)),null!=Tt&&(t.destroyHooks??=[]).push(n,Tt)}}function Th(t,e,n){lg(t,e,3,n)}function Mh(t,e,n,E){(3&t[pi])===n&&lg(t,e,n,E)}function d0(t,e){let n=t[pi];(3&n)===e&&(n&=8191,n+=1,t[pi]=n)}function lg(t,e,n,E){const te=E??-1,ve=e.length-1;let Be=0;for(let Qe=void 0!==E?65535&t[ma]:0;Qe<ve;Qe++)if("number"==typeof e[Qe+1]){if(Be=e[Qe],null!=E&&Be>=E)break}else e[Qe]<0&&(t[ma]+=65536),(Be<te||-1==te)&&(Dy(t,n,e,Qe),t[ma]=(4294901760&t[ma])+Qe+2),Qe++}function Ah(t,e){Jn(4,t,e);const n=W(null);try{e.call(t)}finally{W(n),Jn(5,t,e)}}function Dy(t,e,n,E){const j=n[E]<0,te=n[E+1],Be=t[j?-n[E]:n[E]];j?t[pi]>>13<t[ma]>>16&&(3&t[pi])===e&&(t[pi]+=8192,Ah(Be,te)):Ah(Be,te)}const mu=-1;class Td{constructor(e,n,E){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=E}}function Ef(t){return t!==mu}function Cf(t){return 32767&t}function Eh(t,e){let n=function m0(t){return t>>16}(t),E=e;for(;n>0;)E=E[la],n--;return E}let Ch=!0;function Sc(t){const e=Ch;return Ch=t,e}const Dh=255,ug=5;let g0=0;const eu={};function Ih(t,e){const n=cg(t,e);if(-1!==n)return n;const E=e[Gr];E.firstCreatePass&&(t.injectorIndex=e.length,v0(E.data,t),v0(e,null),v0(E.blueprint,null));const j=Lh(t,e),te=t.injectorIndex;if(Ef(j)){const ve=Cf(j),Be=Eh(j,e),Qe=Be[Gr].data;for(let at=0;at<8;at++)e[te+at]=Be[ve+at]|Qe[ve+at]}return e[te+8]=j,te}function v0(t,e){t.push(0,0,0,0,0,0,0,0,e)}function cg(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Lh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,E=null,j=e;for(;null!==j;){if(E=_0(j),null===E)return mu;if(n++,j=j[la],-1!==E.injectorIndex)return E.injectorIndex|n<<16}return mu}function Oh(t,e,n){!function gu(t,e,n){let E;"string"==typeof n?E=n.charCodeAt(0)||0:n.hasOwnProperty(Wl)&&(E=n[Wl]),null==E&&(E=n[Wl]=g0++);const j=E&Dh;e.data[t+(j>>ug)]|=1<<j}(t,e,n)}function fg(t,e,n){if(n&Qr.Optional||void 0!==t)return t;hn()}function dg(t,e,n,E){if(n&Qr.Optional&&void 0===E&&(E=null),!(n&(Qr.Self|Qr.Host))){const j=t[So],te=Xo(void 0);try{return j?j.get(e,E,n&Qr.Optional):jl(e,E,n&Qr.Optional)}finally{Xo(te)}}return fg(E,0,n)}function y0(t,e,n,E=Qr.Default,j){if(null!==t){if(2048&e[pi]&&!(E&Qr.Self)){const ve=function Ad(t,e,n,E,j){let te=t,ve=e;for(;null!==te&&null!==ve&&2048&ve[pi]&&!(512&ve[pi]);){const Be=x0(te,ve,n,E|Qr.Self,eu);if(Be!==eu)return Be;let Qe=te.parent;if(!Qe){const at=ve[ua];if(at){const Tt=at.get(n,eu,E);if(Tt!==eu)return Tt}Qe=_0(ve),ve=ve[la]}te=Qe}return j}(t,e,n,E,eu);if(ve!==eu)return ve}const te=x0(t,e,n,E,eu);if(te!==eu)return te}return dg(e,n,E,j)}function x0(t,e,n,E,j){const te=function Py(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Wl)?t[Wl]:void 0;return"number"==typeof e?e>=0?e&Dh:Ry:e}(n);if("function"==typeof te){if(!l0(e,t,E))return E&Qr.Host?fg(j,0,E):dg(e,n,E,j);try{const ve=te(E);if(null!=ve||E&Qr.Optional)return ve;hn()}finally{Mc()}}else if("number"==typeof te){let ve=null,Be=cg(t,e),Qe=mu,at=E&Qr.Host?e[ro][ji]:null;for((-1===Be||E&Qr.SkipSelf)&&(Qe=-1===Be?Lh(t,e):e[Be+8],Qe!==mu&&If(E,!1)?(ve=e[Gr],Be=Cf(Qe),e=Eh(Qe,e)):Be=-1);-1!==Be;){const Tt=e[Gr];if(Rh(te,Be,Tt.data)){const Bt=Oy(Be,e,n,ve,E,at);if(Bt!==eu)return Bt}Qe=e[Be+8],Qe!==mu&&If(E,e[Gr].data[Be+8]===at)&&Rh(te,Be,e)?(ve=Tt,Be=Cf(Qe),e=Eh(Qe,e)):Be=-1}}return j}function Oy(t,e,n,E,j,te){const ve=e[Gr],Be=ve.data[t+8],Tt=Ph(Be,ve,n,null==E?cs(Be)&&Ch:E!=ve&&0!=(3&Be.type),j&Qr.Host&&te===Be);return null!==Tt?tu(e,ve,Tt,Be):eu}function Ph(t,e,n,E,j){const te=t.providerIndexes,ve=e.data,Be=1048575&te,Qe=t.directiveStart,Tt=te>>20,vn=j?Be+Tt:t.directiveEnd;for(let kn=E?Be:Be+Tt;kn<vn;kn++){const Un=ve[kn];if(kn<Qe&&n===Un||kn>=Qe&&Un.type===n)return kn}if(j){const kn=ve[Qe];if(kn&&Ii(kn)&&kn.type===n)return Qe}return null}function tu(t,e,n,E){let j=t[n];const te=e.data;if(function _a(t){return t instanceof Td}(j)){const ve=j;ve.resolving&&function zn(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new xn(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Qt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():er(t)}(te[n]));const Be=Sc(ve.canSeeViewProviders);ve.resolving=!0;const Qe=ve.injectImpl?Xo(ve.injectImpl):null;l0(t,E,Qr.Default);try{j=t[n]=ve.factory(void 0,te,t,E),e.firstCreatePass&&n>=E.directiveStart&&function Cy(t,e,n){const{ngOnChanges:E,ngOnInit:j,ngDoCheck:te}=e.type.prototype;if(E){const ve=Kt(e);(n.preOrderHooks??=[]).push(t,ve),(n.preOrderCheckHooks??=[]).push(t,ve)}j&&(n.preOrderHooks??=[]).push(0-t,j),te&&((n.preOrderHooks??=[]).push(t,te),(n.preOrderCheckHooks??=[]).push(t,te))}(n,te[n],e)}finally{null!==Qe&&Xo(Qe),Sc(Be),ve.resolving=!1,Mc()}}return j}function Rh(t,e,n){return!!(n[e+(t>>ug)]&1<<t)}function If(t,e){return!(t&Qr.Self||t&Qr.Host&&e)}class Hs{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,E){return y0(this._tNode,this._lView,e,su(E),n)}}function Ry(){return new Hs(Za(),Tr())}function b0(t){return Sn(t)?()=>{const e=b0(an(t));return e&&e()}:qa(t)}function _0(t){const e=t[Gr],n=e.type;return 2===n?e.declTNode:1===n?t[ji]:null}const Of="__parameters__";function Kc(t,e,n){return Da(()=>{const E=function w0(t){return function(...n){if(t){const E=t(...n);for(const j in E)this[j]=E[j]}}}(e);function j(...te){if(this instanceof j)return E.apply(this,te),this;const ve=new j(...te);return Be.annotation=ve,Be;function Be(Qe,at,Tt){const Bt=Qe.hasOwnProperty(Of)?Qe[Of]:Object.defineProperty(Qe,Of,{value:[]})[Of];for(;Bt.length<=Tt;)Bt.push(null);return(Bt[Tt]=Bt[Tt]||[]).push(ve),Qe}}return n&&(j.prototype=Object.create(n.prototype)),j.prototype.ngMetadataName=t,j.annotationCls=j,j})}function Jc(t,e){t.forEach(n=>Array.isArray(n)?Jc(n,e):e(n))}function T0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ed(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ll(t,e){const n=[];for(let E=0;E<t;E++)n.push(e);return n}function Ol(t,e,n){let E=Ff(t,e);return E>=0?t[1|E]=n:(E=~E,function By(t,e,n,E){let j=t.length;if(j==e)t.push(n,E);else if(1===j)t.push(E,t[0]),t[0]=n;else{for(j--,t.push(t[j-1],t[j]);j>e;)t[j]=t[j-2],j--;t[e]=n,t[e+1]=E}}(t,E,e,n)),E}function M0(t,e){const n=Ff(t,e);if(n>=0)return t[1|n]}function Ff(t,e){return function vg(t,e,n){let E=0,j=t.length>>n;for(;j!==E;){const te=E+(j-E>>1),ve=t[te<<n];if(e===ve)return te<<n;ve>e?j=te:E=te+1}return~(j<<n)}(t,e,1)}const Cd=Hl(Kc("Optional"),8),ps=Hl(Kc("SkipSelf"),4);function oc(t){return 128==(128&t.flags)}var qs=(()=>((qs=qs||{})[qs.Important=1]="Important",qs[qs.DashCase=2]="DashCase",qs))();const qh=new Map;let kg=0;const ao="__ngContext__";function Gs(t,e){Wo(e)?(t[ao]=e[Hr],function e1(t){qh.set(t[Hr],t)}(e)):t[ao]=e}let Wh;function Zh(t,e){return Wh(t,e)}function vu(t){const e=t[xi];return Zi(e)?e[xi]:e}function F0(t){return N0(t[Fa])}function ca(t){return N0(t[pa])}function N0(t){for(;null!==t&&!Zi(t);)t=t[pa];return t}function go(t,e,n,E,j){if(null!=E){let te,ve=!1;Zi(E)?te=E:Wo(E)&&(ve=!0,E=E[yo]);const Be=wr(E);0===t&&null!==n?null==j?Fg(e,n,Be):Dc(e,n,Be,j||null,!0):1===t&&null!==n?Dc(e,n,Be,j||null,!0):2===t?function Gt(t,e,n){const E=L(t,e);E&&function Ic(t,e,n,E){t.removeChild(e,n,E)}(t,E,e,n)}(e,Be,ve):3===t&&e.destroyNode(Be),null!=te&&function jn(t,e,n,E,j){const te=n[Va];te!==wr(n)&&go(e,t,E,te,j);for(let Be=po;Be<n.length;Be++){const Qe=n[Be];mn(Qe[Gr],Qe,t,e,E,te)}}(e,t,te,n,j)}}function Fd(t,e,n){return t.createElement(e,n)}function Wf(t,e){const n=t[La],E=n.indexOf(e);mo(e),n.splice(E,1)}function yu(t,e){if(t.length<=po)return;const n=po+e,E=t[n];if(E){const j=E[yl];null!==j&&j!==t&&Wf(j,E),e>0&&(t[n-1][pa]=E[pa]);const te=Ed(t,po+e);!function Pg(t,e){mn(t,e,e[mi],2,null,null),e[yo]=null,e[ji]=null}(E[Gr],E);const ve=te[ho];null!==ve&&ve.detachView(te[Gr]),E[xi]=null,E[pa]=null,E[pi]&=-129}return E}function Nd(t,e){if(!(256&e[pi])){const n=e[mi];e[js]?.destroy(),e[Us]?.destroy(),n.destroyNode&&mn(t,e,n,3,null,null),function af(t){let e=t[Fa];if(!e)return Zf(t[Gr],t);for(;e;){let n=null;if(Wo(e))n=e[Fa];else{const E=e[po];E&&(n=E)}if(!n){for(;e&&!e[pa]&&e!==t;)Wo(e)&&Zf(e[Gr],e),e=e[xi];null===e&&(e=t),Wo(e)&&Zf(e[Gr],e),n=e&&e[pa]}e=n}}(e)}}function Zf(t,e){if(!(256&e[pi])){e[pi]&=-129,e[pi]|=256,function Yf(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let E=0;E<n.length;E+=2){const j=e[n[E]];if(!(j instanceof Td)){const te=n[E+1];if(Array.isArray(te))for(let ve=0;ve<te.length;ve+=2){const Be=j[te[ve]],Qe=te[ve+1];Jn(4,Be,Qe);try{Qe.call(Be)}finally{Jn(5,Be,Qe)}}else{Jn(4,j,te);try{te.call(j)}finally{Jn(5,j,te)}}}}}(t,e),function j0(t,e){const n=t.cleanup,E=e[Bo];if(null!==n)for(let te=0;te<n.length-1;te+=2)if("string"==typeof n[te]){const ve=n[te+3];ve>=0?E[ve]():E[-ve].unsubscribe(),te+=2}else n[te].call(E[n[te+1]]);null!==E&&(e[Bo]=null);const j=e[ls];if(null!==j){e[ls]=null;for(let te=0;te<j.length;te++)(0,j[te])()}}(t,e),1===e[Gr].type&&e[mi].destroy();const n=e[yl];if(null!==n&&Zi(e[xi])){n!==e[xi]&&Wf(n,e);const E=e[ho];null!==E&&E.detachView(t)}!function Gh(t){qh.delete(t[Hr])}(e)}}function xu(t,e,n){return function U0(t,e,n){let E=e;for(;null!==E&&40&E.type;)E=(e=E).parent;if(null===E)return n[yo];{const{componentOffset:j}=E;if(j>-1){const{encapsulation:te}=t.data[E.directiveStart+j];if(te===oa.None||te===oa.Emulated)return null}return Rr(E,n)}}(t,e.parent,n)}function Dc(t,e,n,E,j){t.insertBefore(e,n,E,j)}function Fg(t,e,n){t.appendChild(e,n)}function Pa(t,e,n,E,j){null!==E?Dc(t,e,n,E,j):Fg(t,e,n)}function L(t,e){return t.parentNode(e)}function ee(t,e,n){return Fe(t,e,n)}let Ve,di,Fe=function ye(t,e,n){return 40&t.type?Rr(t,n):null};function lt(t,e,n,E){const j=xu(t,E,e),te=e[mi],Be=ee(E.parent||e[ji],E,e);if(null!=j)if(Array.isArray(n))for(let Qe=0;Qe<n.length;Qe++)Pa(te,j,n[Qe],Be,!1);else Pa(te,j,n,Be,!1);void 0!==Ve&&Ve(te,E,e,n,j)}function gt(t,e){if(null!==e){const n=e.type;if(3&n)return Rr(e,t);if(4&n)return Ot(-1,t[e.index]);if(8&n){const E=e.child;if(null!==E)return gt(t,E);{const j=t[e.index];return Zi(j)?Ot(-1,j):wr(j)}}if(32&n)return Zh(e,t)()||wr(t[e.index]);{const E=It(t,e);return null!==E?Array.isArray(E)?E[0]:gt(vu(t[ro]),E):gt(t,e.next)}}return null}function It(t,e){return null!==e?t[ro][ji].projection[e.projection]:null}function Ot(t,e){const n=po+t+1;if(n<e.length){const E=e[n],j=E[Gr].firstChild;if(null!==j)return gt(E,j)}return e[Va]}function Yt(t,e,n,E,j,te,ve){for(;null!=n;){const Be=E[n.index],Qe=n.type;if(ve&&0===e&&(Be&&Gs(wr(Be),E),n.flags|=2),32!=(32&n.flags))if(8&Qe)Yt(t,e,n.child,E,j,te,!1),go(e,t,j,Be,te);else if(32&Qe){const at=Zh(n,E);let Tt;for(;Tt=at();)go(e,t,j,Tt,te);go(e,t,j,Be,te)}else 16&Qe?Bn(t,e,E,n,j,te):go(e,t,j,Be,te);n=ve?n.projectionNext:n.next}}function mn(t,e,n,E,j,te){Yt(n,E,t.firstChild,e,j,te,!1)}function Bn(t,e,n,E,j,te){const ve=n[ro],Qe=ve[ji].projection[E.projection];if(Array.isArray(Qe))for(let at=0;at<Qe.length;at++)go(e,t,j,Qe[at],te);else{let at=Qe;const Tt=ve[xi];oc(E)&&(at.flags|=128),Yt(t,e,at,Tt,j,te,!0)}}function sr(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pr(t,e,n){const{mergedAttrs:E,classes:j,styles:te}=n;null!==E&&Qa(t,e,E),null!==j&&sr(t,e,j),null!==te&&function Kn(t,e,n){t.setAttribute(e,"style",n)}(t,e,te)}class Mo{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Jr{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=rr({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Tu=new Jr("ENVIRONMENT_INITIALIZER"),Jf=new Jr("INJECTOR",-1),Qf=new Jr("INJECTOR_DEF_TYPES");class H0{get(e,n=ja){if(n===ja){const E=new Error(`NullInjectorError: No provider for ${gr(e)}!`);throw E.name="NullInjectorError",E}return n}}function Ng(...t){return{\u0275providers:op(0,t),\u0275fromNgModule:!0}}function op(t,...e){const n=[],E=new Set;let j;return Jc(e,te=>{const ve=te;sp(ve,n,[],E)&&(j||=[],j.push(ve))}),void 0!==j&&ap(j,n),n}function ap(t,e){for(let n=0;n<t.length;n++){const{providers:j}=t[n];lp(j,te=>{e.push(te)})}}function sp(t,e,n,E){if(!(t=an(t)))return!1;let j=null,te=so(t);const ve=!te&&Li(t);if(te||ve){if(ve&&!ve.standalone)return!1;j=t}else{const Qe=t.ngModule;if(te=so(Qe),!te)return!1;j=Qe}const Be=E.has(j);if(ve){if(Be)return!1;if(E.add(j),ve.dependencies){const Qe="function"==typeof ve.dependencies?ve.dependencies():ve.dependencies;for(const at of Qe)sp(at,e,n,E)}}else{if(!te)return!1;{if(null!=te.imports&&!Be){let at;E.add(j);try{Jc(te.imports,Tt=>{sp(Tt,e,n,E)&&(at||=[],at.push(Tt))})}finally{}void 0!==at&&ap(at,e)}if(!Be){const at=qa(j)||(()=>new j);e.push({provide:j,useFactory:at,deps:Vi},{provide:Qf,useValue:j,multi:!0},{provide:Tu,useValue:()=>Br(j),multi:!0})}const Qe=te.providers;null==Qe||Be||lp(Qe,Tt=>{e.push(Tt)})}}return j!==t&&void 0!==t.providers}function lp(t,e){for(let n of t)Ln(n)&&(n=n.\u0275providers),Array.isArray(n)?lp(n,e):e(n)}const q0=fr({provide:String,useValue:fr});function G0(t){return null!==t&&"object"==typeof t&&q0 in t}function Ls(t){return"function"==typeof t}const Fu=new Jr("Set Injector scope."),td={},Bg={};let nd;function Rl(){return void 0===nd&&(nd=new H0),nd}class ru{}class cf extends ru{get destroyed(){return this._destroyed}constructor(e,n,E,j){super(),this.parent=n,this.source=E,this.scopes=j,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cp(e,ve=>this.processProvider(ve)),this.records.set(Jf,Nu(void 0,this)),j.has("environment")&&this.records.set(ru,Nu(void 0,this));const te=this.records.get(Fu);null!=te&&"string"==typeof te.value&&this.scopes.add(te.value),this.injectorDefTypes=new Set(this.get(Qf.multi,Vi,Qr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=Ca(this),E=Xo(void 0);try{return e()}finally{Ca(n),Xo(E)}}get(e,n=ja,E=Qr.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Js))return e[Js](this);E=su(E);const j=Ca(this),te=Xo(void 0);try{if(!(E&Qr.SkipSelf)){let Be=this.records.get(e);if(void 0===Be){const Qe=function Vg(t){return"function"==typeof t||"object"==typeof t&&t instanceof Jr}(e)&&Nr(e);Be=Qe&&this.injectableDefInScope(Qe)?Nu(rd(e),td):null,this.records.set(e,Be)}if(null!=Be)return this.hydrate(e,Be)}return(E&Qr.Self?Rl():this.parent).get(e,n=E&Qr.Optional&&n===ja?null:n)}catch(ve){if("NullInjectorError"===ve.name){if((ve[cl]=ve[cl]||[]).unshift(gr(e)),j)throw ve;return function bc(t,e,n,E){const j=t[cl];throw e[Ns]&&j.unshift(e[Ns]),t.message=function ql(t,e,n,E=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let j=gr(e);if(Array.isArray(e))j=e.map(gr).join(" -> ");else if("object"==typeof e){let te=[];for(let ve in e)if(e.hasOwnProperty(ve)){let Be=e[ve];te.push(ve+":"+("string"==typeof Be?JSON.stringify(Be):gr(Be)))}j=`{${te.join(", ")}}`}return`${n}${E?"("+E+")":""}[${j}]: ${t.replace(Fs,"\n  ")}`}("\n"+t.message,j,n,E),t.ngTokenPath=j,t[cl]=null,t}(ve,e,"R3InjectorError",this.source)}throw ve}finally{Xo(te),Ca(j)}}resolveInjectorInitializers(){const e=Ca(this),n=Xo(void 0);try{const E=this.get(Tu.multi,Vi,Qr.Self);for(const j of E)j()}finally{Ca(e),Xo(n)}}toString(){const e=[],n=this.records;for(const E of n.keys())e.push(gr(E));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xn(205,!1)}processProvider(e){let n=Ls(e=an(e))?e:an(e&&e.provide);const E=function W0(t){return G0(t)?Nu(void 0,t.useValue):Nu(Z0(t),td)}(e);if(Ls(e)||!0!==e.multi)this.records.get(n);else{let j=this.records.get(n);j||(j=Nu(void 0,td,!0),j.factory=()=>lu(j.multi),this.records.set(n,j)),n=e,j.multi.push(e)}this.records.set(n,E)}hydrate(e,n){return n.value===td&&(n.value=Bg,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Ug(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=an(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function rd(t){const e=Nr(t),n=null!==e?e.factory:qa(t);if(null!==n)return n;if(t instanceof Jr)throw new xn(204,!1);if(t instanceof Function)return function up(t){const e=t.length;if(e>0)throw Ll(e,"?"),new xn(204,!1);const n=function vo(t){return t&&(t[lo]||t[Co])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new xn(204,!1)}function Z0(t,e,n){let E;if(Ls(t)){const j=an(t);return qa(j)||rd(j)}if(G0(t))E=()=>an(t.useValue);else if(function ia(t){return!(!t||!t.useFactory)}(t))E=()=>t.useFactory(...lu(t.deps||[]));else if(function ed(t){return!(!t||!t.useExisting)}(t))E=()=>Br(an(t.useExisting));else{const j=an(t&&(t.useClass||t.provide));if(!function jg(t){return!!t.deps}(t))return qa(j)||rd(j);E=()=>new j(...lu(t.deps))}return E}function Nu(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cp(t,e){for(const n of t)Array.isArray(n)?cp(n,e):n&&Ln(n)?cp(n.\u0275providers,e):e(n)}const Vd=new Jr("AppId",{providedIn:"root",factory:()=>_l}),_l="ng",Hd=new Jr("Platform Initializer"),zu=new Jr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qd=new Jr("AnimationModuleType"),fp=new Jr("CSP nonce",{providedIn:"root",factory:()=>function Wr(){if(void 0!==di)return di;if(typeof document<"u")return document;throw new xn(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Y0=(t,e)=>null;function sd(t,e){return Y0(t,e)}class f1{}class Mu{}class Gg{resolveComponentFactory(e){throw function xp(t){const e=Error(`No component factory found for ${gr(t)}.`);return e.ngComponent=t,e}(e)}}let Wg=(()=>{class t{}return t.NULL=new Gg,t})();function KA(){return _p(Za(),Tr())}function _p(t,e){return new Bu(Rr(t,e))}let Bu=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=KA,t})();function JA(t){return t instanceof Bu?t.nativeElement:t}class tm{}let Zg=(()=>{class t{constructor(){this.destroyNode=null}}return t.__NG_ELEMENT_ID__=()=>function QA(){const t=Tr(),n=Lr(Za().index,t);return(Wo(n)?n:t)[mi]}(),t})(),e4=(()=>{class t{}return t.\u0275prov=rr({token:t,providedIn:"root",factory:()=>null}),t})();class wp{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const t4=new wp("16.1.2"),d1={};function nm(t){for(;t;){t[pi]|=64;const e=vu(t);if(El(t)&&!e)return t;t=e}return null}function h1(t){return t.ngOriginalError}class Kd{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&h1(e);for(;n&&h1(n);)n=h1(n);return n||null}}const M_=new Jr("",{providedIn:"root",factory:()=>!1});function A_(t){return t.ownerDocument.defaultView}function hf(t){return t instanceof Function?t():t}class D_ extends re{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){nm(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,n,E){const j=W(this);this.trackingVersion++;try{e(n,E)}finally{W(j)}}destroy(){this.trackingVersion++}}let $g=null;function I_(){return $g??=new D_,$g}function L_(t,e){return t[e]??I_()}function O_(t,e){const n=I_();n.hasReadASignal&&(t[e]=$g,n.lView=t,$g=new D_)}const zi={};function ld(t){P_(hi(),Tr(),ll()+t,!1)}function P_(t,e,n,E){if(!E)if(3==(3&e[pi])){const te=t.preOrderCheckHooks;null!==te&&Th(e,te,n)}else{const te=t.preOrderHooks;null!==te&&Mh(e,te,0,n)}$c(n)}function z_(t,e=null,n=null,E){const j=B_(t,e,n,E);return j.resolveInjectorInitializers(),j}function B_(t,e=null,n=null,E,j=new Set){const te=[n||Vi,Ng(t)];return E=E||("object"==typeof t?void 0:gr(t)),new cf(te,e||Rl(),E||null,j)}let Rc=(()=>{class t{static create(n,E){if(Array.isArray(n))return z_({name:""},E,n,"");{const j=n.name??"";return z_({name:j},n.parent,n.providers,j)}}}return t.THROW_IF_NOT_FOUND=ja,t.NULL=new H0,t.\u0275prov=rr({token:t,providedIn:"any",factory:()=>Br(Jf)}),t.__NG_ELEMENT_ID__=-1,t})();function ai(t,e=Qr.Default){const n=Tr();return null===n?Br(t,e):y0(Za(),n,an(t),e)}function p1(){throw new Error("invalid")}function Xg(t,e,n,E,j,te,ve,Be,Qe,at,Tt){const Bt=e.blueprint.slice();return Bt[yo]=j,Bt[pi]=140|E,(null!==at||t&&2048&t[pi])&&(Bt[pi]|=2048),Yi(Bt),Bt[xi]=Bt[la]=t,Bt[Fi]=n,Bt[jo]=ve||t&&t[jo],Bt[mi]=Be||t&&t[mi],Bt[So]=Qe||t&&t[So]||null,Bt[ji]=te,Bt[Hr]=function Qy(){return kg++}(),Bt[us]=Tt,Bt[ua]=at,Bt[ro]=2==e.type?t[ro]:Bt,Bt}function Mp(t,e,n,E,j){let te=t.data[e];if(null===te)te=function m1(t,e,n,E,j){const te=mh(),ve=Zc(),Qe=t.data[e]=function _4(t,e,n,E,j,te){let ve=e?e.injectorIndex:-1,Be=0;return na()&&(Be|=128),{type:n,index:E,insertBeforeIndex:null,injectorIndex:ve,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:Be,providerIndexes:0,value:j,attrs:te,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ve?te:te&&te.parent,n,e,E,j);return null===t.firstChild&&(t.firstChild=Qe),null!==te&&(ve?null==te.child&&null!==Qe.parent&&(te.child=Qe):null===te.next&&(te.next=Qe,Qe.prev=te)),Qe}(t,e,n,E,j),function xl(){return $r.lFrame.inI18n}()&&(te.flags|=32);else if(64&te.type){te.type=n,te.value=E,te.attrs=j;const ve=function ec(){const t=$r.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();te.injectorIndex=null===ve?-1:ve.injectorIndex}return sl(te,!0),te}function rm(t,e,n,E){if(0===n)return-1;const j=e.length;for(let te=0;te<n;te++)e.push(E),t.blueprint.push(E),t.data.push(null);return j}function j_(t,e,n,E,j){const te=L_(e,js),ve=ll(),Be=2&E;try{if($c(-1),Be&&e.length>Mi&&P_(t,e,Mi,!1),Jn(Be?2:0,j),Be)te.runInContext(n,E,j);else{const at=W(null);try{n(E,j)}finally{W(at)}}}finally{Be&&null===e[js]&&O_(e,js),$c(ve),Jn(Be?3:1,j)}}function g1(t,e,n){if(tl(e)){const E=W(null);try{const te=e.directiveEnd;for(let ve=e.directiveStart;ve<te;ve++){const Be=t.data[ve];Be.contentQueries&&Be.contentQueries(1,n[ve],ve)}}finally{W(E)}}}function v1(t,e,n){_o()&&(function E4(t,e,n,E){const j=n.directiveStart,te=n.directiveEnd;cs(n)&&function R4(t,e,n){const E=Rr(e,t),j=U_(n);let ve=16;n.signals?ve=4096:n.onPush&&(ve=64);const Be=Kg(t,Xg(t,j,null,ve,E,e,null,t[jo].rendererFactory.createRenderer(E,n),null,null,null));t[e.index]=Be}(e,n,t.data[j+n.componentOffset]),t.firstCreatePass||Ih(n,e),Gs(E,e);const ve=n.initialInputs;for(let Be=j;Be<te;Be++){const Qe=t.data[Be],at=tu(e,t,Be,n);Gs(at,e),null!==ve&&F4(0,Be-j,at,Qe,0,ve),Ii(Qe)&&(Lr(n.index,e)[Fi]=tu(e,t,Be,n))}}(t,e,n,Rr(n,e)),64==(64&n.flags)&&W_(t,e,n))}function y1(t,e,n=Rr){const E=e.localNames;if(null!==E){let j=e.index+1;for(let te=0;te<E.length;te+=2){const ve=E[te+1],Be=-1===ve?n(e,t):t[ve];t[j++]=Be}}}function U_(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=x1(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function x1(t,e,n,E,j,te,ve,Be,Qe,at,Tt){const Bt=Mi+E,vn=Bt+j,kn=function m4(t,e){const n=[];for(let E=0;E<e;E++)n.push(E<t?null:zi);return n}(Bt,vn),Un="function"==typeof at?at():at;return kn[Gr]={type:t,blueprint:kn,template:n,queries:null,viewQuery:Be,declTNode:e,data:kn.slice().fill(null,Bt),bindingStartIndex:Bt,expandoStartIndex:vn,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof te?te():te,pipeRegistry:"function"==typeof ve?ve():ve,firstChild:null,schemas:Qe,consts:Un,incompleteFirstPass:!1,ssrId:Tt}}let V_=t=>null;function H_(t,e,n,E){for(let j in t)if(t.hasOwnProperty(j)){n=null===n?{}:n;const te=t[j];null===E?q_(n,e,j,te):E.hasOwnProperty(j)&&q_(n,e,E[j],te)}return n}function q_(t,e,n,E){t.hasOwnProperty(n)?t[n].push(e,E):t[n]=[e,E]}function b1(t,e,n,E){if(_o()){const j=null===E?null:{"":-1},te=function D4(t,e){const n=t.directiveRegistry;let E=null,j=null;if(n)for(let te=0;te<n.length;te++){const ve=n[te];if(zs(e,ve.selectors,!1))if(E||(E=[]),Ii(ve))if(null!==ve.findHostDirectiveDefs){const Be=[];j=j||new Map,ve.findHostDirectiveDefs(ve,Be,j),E.unshift(...Be,ve),_1(t,e,Be.length)}else E.unshift(ve),_1(t,e,0);else j=j||new Map,ve.findHostDirectiveDefs?.(ve,E,j),E.push(ve)}return null===E?null:[E,j]}(t,n);let ve,Be;null===te?ve=Be=null:[ve,Be]=te,null!==ve&&G_(t,e,n,ve,j,Be),j&&function I4(t,e,n){if(e){const E=t.localNames=[];for(let j=0;j<e.length;j+=2){const te=n[e[j+1]];if(null==te)throw new xn(-301,!1);E.push(e[j],te)}}}(n,E,j)}n.mergedAttrs=Ts(n.mergedAttrs,n.attrs)}function G_(t,e,n,E,j,te){for(let at=0;at<E.length;at++)Oh(Ih(n,e),t,E[at].type);!function O4(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,E.length);for(let at=0;at<E.length;at++){const Tt=E[at];Tt.providersResolver&&Tt.providersResolver(Tt)}let ve=!1,Be=!1,Qe=rm(t,e,E.length,null);for(let at=0;at<E.length;at++){const Tt=E[at];n.mergedAttrs=Ts(n.mergedAttrs,Tt.hostAttrs),P4(t,n,e,Qe,Tt),L4(Qe,Tt,j),null!==Tt.contentQueries&&(n.flags|=4),(null!==Tt.hostBindings||null!==Tt.hostAttrs||0!==Tt.hostVars)&&(n.flags|=64);const Bt=Tt.type.prototype;!ve&&(Bt.ngOnChanges||Bt.ngOnInit||Bt.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),ve=!0),!Be&&(Bt.ngOnChanges||Bt.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),Be=!0),Qe++}!function w4(t,e,n){const j=e.directiveEnd,te=t.data,ve=e.attrs,Be=[];let Qe=null,at=null;for(let Tt=e.directiveStart;Tt<j;Tt++){const Bt=te[Tt],vn=n?n.get(Bt):null,Un=vn?vn.outputs:null;Qe=H_(Bt.inputs,Tt,Qe,vn?vn.inputs:null),at=H_(Bt.outputs,Tt,at,Un);const $n=null===Qe||null===ve||$u(e)?null:N4(Qe,Tt,ve);Be.push($n)}null!==Qe&&(Qe.hasOwnProperty("class")&&(e.flags|=8),Qe.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=Be,e.inputs=Qe,e.outputs=at}(t,n,te)}function W_(t,e,n){const E=n.directiveStart,j=n.directiveEnd,te=n.index,ve=function Ay(){return $r.lFrame.currentDirectiveIndex}();try{$c(te);for(let Be=E;Be<j;Be++){const Qe=t.data[Be],at=e[Be];Sf(Be),(null!==Qe.hostBindings||0!==Qe.hostVars||null!==Qe.hostAttrs)&&C4(Qe,at)}}finally{$c(-1),Sf(ve)}}function C4(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _1(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function L4(t,e,n){if(n){if(e.exportAs)for(let E=0;E<e.exportAs.length;E++)n[e.exportAs[E]]=t;Ii(e)&&(n[""]=t)}}function P4(t,e,n,E,j){t.data[E]=j;const te=j.factory||(j.factory=qa(j.type)),ve=new Td(te,Ii(j),ai);t.blueprint[E]=ve,n[E]=ve,function k4(t,e,n,E,j){const te=j.hostBindings;if(te){let ve=t.hostBindingOpCodes;null===ve&&(ve=t.hostBindingOpCodes=[]);const Be=~e.index;(function S4(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(ve)!=Be&&ve.push(Be),ve.push(n,E,te)}}(t,e,E,rm(t,n,j.hostVars,zi),j)}function Fc(t,e,n,E,j,te){const ve=Rr(t,e);!function w1(t,e,n,E,j,te,ve){if(null==te)t.removeAttribute(e,j,n);else{const Be=null==ve?er(te):ve(te,E||"",j);t.setAttribute(e,j,Be,n)}}(e[mi],ve,te,t.value,n,E,j)}function F4(t,e,n,E,j,te){const ve=te[e];if(null!==ve)for(let Be=0;Be<ve.length;)Z_(E,n,ve[Be++],ve[Be++],ve[Be++])}function Z_(t,e,n,E,j){const te=W(null);try{const ve=t.inputTransforms;null!==ve&&ve.hasOwnProperty(E)&&(j=ve[E].call(e,j)),null!==t.setInput?t.setInput(e,j,n,E):e[E]=j}finally{W(te)}}function N4(t,e,n){let E=null,j=0;for(;j<n.length;){const te=n[j];if(0!==te)if(5!==te){if("number"==typeof te)break;if(t.hasOwnProperty(te)){null===E&&(E=[]);const ve=t[te];for(let Be=0;Be<ve.length;Be+=2)if(ve[Be]===e){E.push(te,ve[Be+1],n[j+1]);break}}j+=2}else j+=2;else j+=4}return E}function Y_(t,e,n,E){return[t,!0,!1,e,null,0,E,n,null,null,null]}function $_(t,e){const n=t.contentQueries;if(null!==n)for(let E=0;E<n.length;E+=2){const te=n[E+1];if(-1!==te){const ve=t.data[te];s0(n[E]),ve.contentQueries(2,e[te],te)}}}function Kg(t,e){return t[Fa]?t[Jo][pa]=e:t[Fa]=e,t[Jo]=e,e}function T1(t,e,n){s0(0);const E=W(null);try{e(t,n)}finally{W(E)}}function X_(t){return t[Bo]||(t[Bo]=[])}function K_(t){return t.cleanup||(t.cleanup=[])}function Q_(t,e){const n=t[So],E=n?n.get(Kd,null):null;E&&E.handleError(e)}function M1(t,e,n,E,j){for(let te=0;te<n.length;){const ve=n[te++],Be=n[te++];Z_(t.data[ve],e[ve],E,Be,j)}}function z4(t,e){const n=Lr(e,t),E=n[Gr];!function B4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(E,n);const j=n[yo];null!==j&&null===n[us]&&(n[us]=sd(j,n[So])),A1(E,n,n[Fi])}function A1(t,e,n){yh(e);try{const E=t.viewQuery;null!==E&&T1(1,E,n);const j=t.template;null!==j&&j_(t,e,j,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$_(t,e),t.staticViewQueries&&T1(2,t.viewQuery,n);const te=t.components;null!==te&&function j4(t,e){for(let n=0;n<e.length;n++)z4(t,e[n])}(e,te)}catch(E){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),E}finally{e[pi]&=-5,hs()}}let e2=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(n,E,j){const te=typeof Zone>"u"?null:Zone.current,ve=new Ut(n,at=>{this.all.has(at)&&this.queue.set(at,te)},j);let Be;this.all.add(ve),ve.notify();const Qe=()=>{ve.cleanup(),Be?.(),this.all.delete(ve),this.queue.delete(ve)};return Be=E?.onDestroy(Qe),{destroy:Qe}}flush(){if(0!==this.queue.size)for(const[n,E]of this.queue)this.queue.delete(n),E?E.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return t.\u0275prov=rr({token:t,providedIn:"root",factory:()=>new t}),t})();function Jg(t,e,n){let E=n?t.styles:null,j=n?t.classes:null,te=0;if(null!==e)for(let ve=0;ve<e.length;ve++){const Be=e[ve];"number"==typeof Be?te=Be:1==te?j=mr(j,Be):2==te&&(E=mr(E,Be+": "+e[++ve]+";"))}n?t.styles=E:t.stylesWithoutHost=E,n?t.classes=j:t.classesWithoutHost=j}function im(t,e,n,E,j=!1){for(;null!==n;){const te=e[n.index];if(null!==te&&E.push(wr(te)),Zi(te)){for(let Be=po;Be<te.length;Be++){const Qe=te[Be],at=Qe[Gr].firstChild;null!==at&&im(Qe[Gr],Qe,at,E)}te[Va]!==te[yo]&&E.push(te[Va])}const ve=n.type;if(8&ve)im(t,e,n.child,E);else if(32&ve){const Be=Zh(n,e);let Qe;for(;Qe=Be();)E.push(Qe)}else if(16&ve){const Be=It(e,n);if(Array.isArray(Be))E.push(...Be);else{const Qe=vu(e[ro]);im(Qe[Gr],Qe,Be,E,!0)}}n=j?n.projectionNext:n.next}return E}function Qg(t,e,n,E=!0){const j=e[jo].rendererFactory;j.begin&&j.begin();try{t2(t,e,t.template,n)}catch(ve){throw E&&Q_(e,ve),ve}finally{j.end&&j.end(),e[jo].effectManager?.flush()}}function t2(t,e,n,E){const j=e[pi];if(256!=(256&j)){e[jo].effectManager?.flush(),yh(e);try{Yi(e),function _d(t){return $r.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&j_(t,e,n,2,E);const ve=3==(3&j);if(ve){const at=t.preOrderCheckHooks;null!==at&&Th(e,at,null)}else{const at=t.preOrderHooks;null!==at&&Mh(e,at,0,null),d0(e,0)}if(function G4(t){for(let e=F0(t);null!==e;e=ca(e)){if(!e[Sl])continue;const n=e[La];for(let E=0;E<n.length;E++){xo(n[E])}}}(e),n2(e,2),null!==t.contentQueries&&$_(t,e),ve){const at=t.contentCheckHooks;null!==at&&Th(e,at)}else{const at=t.contentHooks;null!==at&&Mh(e,at,1),d0(e,1)}!function p4(t,e){const n=t.hostBindingOpCodes;if(null===n)return;const E=L_(e,Us);try{for(let j=0;j<n.length;j++){const te=n[j];if(te<0)$c(~te);else{const ve=te,Be=n[++j],Qe=n[++j];og(Be,ve),E.runInContext(Qe,2,e[ve])}}}finally{null===e[Us]&&O_(e,Us),$c(-1)}}(t,e);const Be=t.components;null!==Be&&i2(e,Be,0);const Qe=t.viewQuery;if(null!==Qe&&T1(2,Qe,E),ve){const at=t.viewCheckHooks;null!==at&&Th(e,at)}else{const at=t.viewHooks;null!==at&&Mh(e,at,2),d0(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[pi]&=-73,mo(e)}finally{hs()}}}function n2(t,e){for(let n=F0(t);null!==n;n=ca(n))for(let E=po;E<n.length;E++)r2(n[E],e)}function W4(t,e,n){r2(Lr(e,t),n)}function r2(t,e){if(!function ni(t){return 128==(128&t[pi])}(t))return;const n=t[Gr];if(80&t[pi]&&0===e||1024&t[pi]||2===e)t2(n,t,n.template,t[Fi]);else if(t[ks]>0){n2(t,1);const j=t[Gr].components;null!==j&&i2(t,j,1)}}function i2(t,e,n){for(let E=0;E<e.length;E++)W4(t,e[E],n)}class om{get rootNodes(){const e=this._lView,n=e[Gr];return im(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Fi]}set context(e){this._lView[Fi]=e}get destroyed(){return 256==(256&this._lView[pi])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[xi];if(Zi(e)){const n=e[8],E=n?n.indexOf(this):-1;E>-1&&(yu(e,E),Ed(n,E))}this._attachedToViewContainer=!1}Nd(this._lView[Gr],this._lView)}onDestroy(e){!function Do(t,e){if(256==(256&t[pi]))throw new xn(911,!1);null===t[ls]&&(t[ls]=[]),t[ls].push(e)}(this._lView,e)}markForCheck(){nm(this._cdRefInjectingView||this._lView)}detach(){this._lView[pi]&=-129}reattach(){this._lView[pi]|=128}detectChanges(){Qg(this._lView[Gr],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xn(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rf(t,e){mn(t,e,e[mi],2,null,null)}(this._lView[Gr],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new xn(902,!1);this._appRef=e}}class Z4 extends om{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Qg(e[Gr],e,e[Fi],!1)}checkNoChanges(){}get context(){return null}}class o2 extends Wg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Li(e);return new am(n,this.ngModule)}}function a2(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class $4{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,E){E=su(E);const j=this.injector.get(e,d1,E);return j!==d1||n===d1?j:this.parentInjector.get(e,n,E)}}class am extends Mu{get inputs(){return a2(this.componentDef.inputs)}get outputs(){return a2(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function Ou(t){return t.map(Tc).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,E,j){let te=(j=j||this.ngModule)instanceof ru?j:j?.injector;te&&null!==this.componentDef.getStandaloneInjector&&(te=this.componentDef.getStandaloneInjector(te)||te);const ve=te?new $4(e,te):e,Be=ve.get(tm,null);if(null===Be)throw new xn(407,!1);const Tt={rendererFactory:Be,sanitizer:ve.get(e4,null),effectManager:ve.get(e2,null)},Bt=Be.createRenderer(null,this.componentDef),vn=this.componentDef.selectors[0][0]||"div",kn=E?function g4(t,e,n,E){const te=E.get(M_,!1)||n===oa.ShadowDom,ve=t.selectRootElement(e,te);return function v4(t){V_(t)}(ve),ve}(Bt,E,this.componentDef.encapsulation,ve):Fd(Bt,vn,function Y4(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(vn)),Mr=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Ir=x1(0,null,null,1,0,null,null,null,null,null,null),hr=Xg(null,Ir,null,Mr,null,null,Tt,Bt,ve,null,null);let ri,li;yh(hr);try{const Ci=this.componentDef;let sa,bs=null;Ci.findHostDirectiveDefs?(sa=[],bs=new Map,Ci.findHostDirectiveDefs(Ci,sa,bs),sa.push(Ci)):sa=[Ci];const vc=function K4(t,e){const n=t[Gr],E=Mi;return t[E]=e,Mp(n,E,2,"#host",null)}(hr,kn),yc=function J4(t,e,n,E,j,te,ve){const Be=j[Gr];!function Q4(t,e,n,E){for(const j of t)e.mergedAttrs=Ts(e.mergedAttrs,j.hostAttrs);null!==e.mergedAttrs&&(Jg(e,e.mergedAttrs,!0),null!==n&&pr(E,n,e))}(E,t,e,ve);let Qe=null;null!==e&&(Qe=sd(e,j[So]));const at=te.rendererFactory.createRenderer(e,n);let Tt=16;n.signals?Tt=4096:n.onPush&&(Tt=64);const Bt=Xg(j,U_(n),null,Tt,j[t.index],t,te,at,null,null,Qe);return Be.firstCreatePass&&_1(Be,t,E.length-1),Kg(j,Bt),j[t.index]=Bt}(vc,kn,Ci,sa,hr,Tt,Bt);li=ir(Ir,Mi),kn&&function tk(t,e,n,E){if(E)Qa(t,n,["ng-version",t4.full]);else{const{attrs:j,classes:te}=function pl(t){const e=[],n=[];let E=1,j=2;for(;E<t.length;){let te=t[E];if("string"==typeof te)2===j?""!==te&&e.push(te,t[++E]):8===j&&n.push(te);else{if(!Ra(j))break;j=te}E++}return{attrs:e,classes:n}}(e.selectors[0]);j&&Qa(t,n,j),te&&te.length>0&&sr(t,n,te.join(" "))}}(Bt,Ci,kn,E),void 0!==n&&function nk(t,e,n){const E=t.projection=[];for(let j=0;j<e.length;j++){const te=n[j];E.push(null!=te?Array.from(te):null)}}(li,this.ngContentSelectors,n),ri=function ek(t,e,n,E,j,te){const ve=Za(),Be=j[Gr],Qe=Rr(ve,j);G_(Be,j,ve,n,null,E);for(let Tt=0;Tt<n.length;Tt++)Gs(tu(j,Be,ve.directiveStart+Tt,ve),j);W_(Be,j,ve),Qe&&Gs(Qe,j);const at=tu(j,Be,ve.directiveStart+ve.componentOffset,ve);if(t[Fi]=j[Fi]=at,null!==te)for(const Tt of te)Tt(at,e);return g1(Be,ve,t),at}(yc,Ci,sa,bs,hr,[rk]),A1(Ir,hr,null)}finally{hs()}return new X4(this.componentType,ri,_p(li,hr),hr,li)}}class X4 extends f1{constructor(e,n,E,j,te){super(),this.location=E,this._rootLView=j,this._tNode=te,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Z4(j),this.componentType=e}setInput(e,n){const E=this._tNode.inputs;let j;if(null!==E&&(j=E[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const te=this._rootLView;M1(te[Gr],te,j,e,n),this.previousInputValues.set(e,n),nm(Lr(this._tNode.index,te))}}get injector(){return new Hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function rk(){const t=Za();wh(Tr()[Gr],t)}function ev(t){let e=function s2(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const E=[t];for(;e;){let j;if(Ii(t))j=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new xn(903,!1);j=e.\u0275dir}if(j){if(n){E.push(j);const ve=t;ve.inputs=tv(t.inputs),ve.inputTransforms=tv(t.inputTransforms),ve.declaredInputs=tv(t.declaredInputs),ve.outputs=tv(t.outputs);const Be=j.hostBindings;Be&&sk(t,Be);const Qe=j.viewQuery,at=j.contentQueries;if(Qe&&ok(t,Qe),at&&ak(t,at),Er(t.inputs,j.inputs),Er(t.declaredInputs,j.declaredInputs),Er(t.outputs,j.outputs),null!==j.inputTransforms&&(null===ve.inputTransforms&&(ve.inputTransforms={}),Er(ve.inputTransforms,j.inputTransforms)),Ii(j)&&j.data.animation){const Tt=t.data;Tt.animation=(Tt.animation||[]).concat(j.data.animation)}}const te=j.features;if(te)for(let ve=0;ve<te.length;ve++){const Be=te[ve];Be&&Be.ngInherit&&Be(t),Be===ev&&(n=!1)}}e=Object.getPrototypeOf(e)}!function ik(t){let e=0,n=null;for(let E=t.length-1;E>=0;E--){const j=t[E];j.hostVars=e+=j.hostVars,j.hostAttrs=Ts(j.hostAttrs,n=Ts(n,j.hostAttrs))}}(E)}function tv(t){return t===Ja?{}:t===Vi?[]:t}function ok(t,e){const n=t.viewQuery;t.viewQuery=n?(E,j)=>{e(E,j),n(E,j)}:e}function ak(t,e){const n=t.contentQueries;t.contentQueries=n?(E,j,te)=>{e(E,j,te),n(E,j,te)}:e}function sk(t,e){const n=t.hostBindings;t.hostBindings=n?(E,j)=>{e(E,j),n(E,j)}:e}function nv(t){return!!k1(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function k1(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function wl(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function lm(t,e,n,E){const j=Tr();return wl(j,kf(),e)&&(hi(),Fc(ba(),j,t,e,n,E)),lm}function L1(t,e,n,E,j,te,ve,Be){const Qe=Tr(),at=hi(),Tt=t+Mi,Bt=at.firstCreatePass?function Lk(t,e,n,E,j,te,ve,Be,Qe){const at=e.consts,Tt=Mp(e,t,4,ve||null,Ai(at,Be));b1(e,n,Tt,Ai(at,Qe)),wh(e,Tt);const Bt=Tt.tView=x1(2,Tt,E,j,te,e.directiveRegistry,e.pipeRegistry,null,e.schemas,at,null);return null!==e.queries&&(e.queries.template(e,Tt),Bt.queries=e.queries.embeddedTView(Tt)),Tt}(Tt,at,Qe,e,n,E,j,te,ve):at.data[Tt];sl(Bt,!1);const vn=M2(at,Qe,Bt,t);Ac()&&lt(at,Qe,vn,Bt),Gs(vn,Qe),Kg(Qe,Qe[Tt]=Y_(vn,Qe,vn,Bt)),Uo(Bt)&&v1(at,Qe,Bt),null!=ve&&y1(Qe,Bt,Be)}let M2=function A2(t,e,n,E){return kc(!0),e[mi].createComment("")};function zc(t,e,n){const E=Tr();return wl(E,kf(),e)&&function Au(t,e,n,E,j,te,ve,Be){const Qe=Rr(e,n);let Tt,at=e.inputs;!Be&&null!=at&&(Tt=at[E])?(M1(t,n,Tt,E,j),cs(e)&&function M4(t,e){const n=Lr(e,t);16&n[pi]||(n[pi]|=64)}(n,e.index)):3&e.type&&(E=function T4(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(E),j=null!=ve?ve(j,e.value||"",E):j,te.setProperty(Qe,E,j))}(hi(),ba(),E,t,e,E[mi],n,!1),zc}function O1(t,e,n,E,j){const ve=j?"class":"style";M1(t,n,e.inputs[ve],ve,E)}function ou(t,e,n,E){const j=Tr(),te=hi(),ve=Mi+t,Be=j[mi],Qe=te.firstCreatePass?function Nk(t,e,n,E,j,te){const ve=e.consts,Qe=Mp(e,t,2,E,Ai(ve,j));return b1(e,n,Qe,Ai(ve,te)),null!==Qe.attrs&&Jg(Qe,Qe.attrs,!1),null!==Qe.mergedAttrs&&Jg(Qe,Qe.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,Qe),Qe}(ve,te,j,e,n,E):te.data[ve],at=k2(te,j,Qe,Be,e,t);j[ve]=at;const Tt=Uo(Qe);return sl(Qe,!0),pr(Be,at,Qe),32!=(32&Qe.flags)&&Ac()&&lt(te,j,at,Qe),0===function Oi(){return $r.lFrame.elementDepthCount}()&&Gs(at,j),function bo(){$r.lFrame.elementDepthCount++}(),Tt&&(v1(te,j,Qe),g1(te,Qe,j)),null!==E&&y1(j,Qe),ou}function ku(){let t=Za();Zc()?tc():(t=t.parent,sl(t,!1));const e=t;(function Io(t){return $r.skipHydrationRootTNode===t})(e)&&function ds(){$r.skipHydrationRootTNode=null}(),function uo(){$r.lFrame.elementDepthCount--}();const n=hi();return n.firstCreatePass&&(wh(n,t),tl(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Sh(t){return 0!=(8&t.flags)}(e)&&O1(n,e,Tr(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Md(t){return 0!=(16&t.flags)}(e)&&O1(n,e,Tr(),e.stylesWithoutHost,!1),ku}function ud(t,e,n,E){return ou(t,e,n,E),ku(),ud}let k2=(t,e,n,E,j,te)=>(kc(!0),Fd(E,j,function f0(){return $r.lFrame.currentNamespace}()));function sv(t){return!!t&&"function"==typeof t.then}function C2(t){return!!t&&"function"==typeof t.subscribe}function Pp(t,e,n,E){const j=Tr(),te=hi(),ve=Za();return function I2(t,e,n,E,j,te,ve){const Be=Uo(E),at=t.firstCreatePass&&K_(t),Tt=e[Fi],Bt=X_(e);let vn=!0;if(3&E.type||ve){const $n=Rr(E,e),Mr=ve?ve($n):$n,Ir=Bt.length,hr=ve?li=>ve(wr(li[E.index])):E.index;let ri=null;if(!ve&&Be&&(ri=function qk(t,e,n,E){const j=t.cleanup;if(null!=j)for(let te=0;te<j.length-1;te+=2){const ve=j[te];if(ve===n&&j[te+1]===E){const Be=e[Bo],Qe=j[te+2];return Be.length>Qe?Be[Qe]:null}"string"==typeof ve&&(te+=2)}return null}(t,e,j,E.index)),null!==ri)(ri.__ngLastListenerFn__||ri).__ngNextListenerFn__=te,ri.__ngLastListenerFn__=te,vn=!1;else{te=O2(E,e,Tt,te,!1);const li=n.listen(Mr,j,te);Bt.push(te,li),at&&at.push(j,hr,Ir,Ir+1)}}else te=O2(E,e,Tt,te,!1);const kn=E.outputs;let Un;if(vn&&null!==kn&&(Un=kn[j])){const $n=Un.length;if($n)for(let Mr=0;Mr<$n;Mr+=2){const Ci=e[Un[Mr]][Un[Mr+1]].subscribe(te),sa=Bt.length;Bt.push(te,Ci),at&&at.push(j,E.index,sa,-(sa+1))}}}(te,j,j[mi],ve,t,e,E),Pp}function L2(t,e,n,E){try{return Jn(6,e,n),!1!==n(E)}catch(j){return Q_(t,j),!1}finally{Jn(7,e,n)}}function O2(t,e,n,E,j){return function te(ve){if(ve===Function)return E;nm(t.componentOffset>-1?Lr(t.index,e):e);let Qe=L2(e,n,E,ve),at=te.__ngNextListenerFn__;for(;at;)Qe=L2(e,n,at,ve)&&Qe,at=at.__ngNextListenerFn__;return j&&!1===Qe&&ve.preventDefault(),Qe}}function F1(t=1){return function Sy(t){return($r.lFrame.contextLView=function ag(t,e){for(;t>0;)e=e[la],t--;return e}(t,$r.lFrame.contextLView))[Fi]}(t)}function Gk(t,e){let n=null;const E=function hl(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let j=0;j<e.length;j++){const te=e[j];if("*"!==te){if(null===E?zs(t,te,!0):Ms(E,te))return j}else n=j}return n}function N1(t){const e=Tr()[ro][ji];if(!e.projection){const E=e.projection=Ll(t?t.length:1,null),j=E.slice();let te=e.child;for(;null!==te;){const ve=t?Gk(te,t):0;null!==ve&&(j[ve]?j[ve].projectionNext=te:E[ve]=te,j[ve]=te),te=te.next}}}function dm(t,e=0,n){const E=Tr(),j=hi(),te=Mp(j,Mi+t,16,null,n||null);null===te.projection&&(te.projection=e),tc(),(!E[us]||na())&&32!=(32&te.flags)&&function wn(t,e,n){Bn(e[mi],0,e,n,xu(t,n,e),ee(n.parent||e[ji],n,e))}(j,E,te)}function lv(t,e){return t<<17|e<<2}function cd(t){return t>>17&32767}function B1(t){return 2|t}function Qd(t){return(131068&t)>>2}function j1(t,e){return-131069&t|e<<2}function U1(t){return 1|t}function H2(t,e,n,E,j){const te=t[n+1],ve=null===e;let Be=E?cd(te):Qd(te),Qe=!1;for(;0!==Be&&(!1===Qe||ve);){const Tt=t[Be+1];Kk(t[Be],e)&&(Qe=!0,t[Be+1]=E?U1(Tt):B1(Tt)),Be=E?cd(Tt):Qd(Tt)}Qe&&(t[n+1]=E?B1(te):U1(te))}function Kk(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ff(t,e)>=0}function hm(t,e){return function cc(t,e,n,E){const j=Tr(),te=hi(),ve=function nc(t){const e=$r.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);te.firstUpdatePass&&function J2(t,e,n,E){const j=t.data;if(null===j[n+1]){const te=j[ll()],ve=function K2(t,e){return e>=t.expandoStartIndex}(t,n);(function nw(t,e){return 0!=(t.flags&(e?8:16))})(te,E)&&null===e&&!ve&&(e=!1),e=function a6(t,e,n,E){const j=function a0(t){const e=$r.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let te=E?e.residualClasses:e.residualStyles;if(null===j)0===(E?e.classBindings:e.styleBindings)&&(n=pm(n=V1(null,t,e,n,E),e.attrs,E),te=null);else{const ve=e.directiveStylingLast;if(-1===ve||t[ve]!==j)if(n=V1(j,t,e,n,E),null===te){let Qe=function s6(t,e,n){const E=n?e.classBindings:e.styleBindings;if(0!==Qd(E))return t[cd(E)]}(t,e,E);void 0!==Qe&&Array.isArray(Qe)&&(Qe=V1(null,t,e,Qe[1],E),Qe=pm(Qe,e.attrs,E),function l6(t,e,n,E){t[cd(n?e.classBindings:e.styleBindings)]=E}(t,e,E,Qe))}else te=function u6(t,e,n){let E;const j=e.directiveEnd;for(let te=1+e.directiveStylingLast;te<j;te++)E=pm(E,t[te].hostAttrs,n);return pm(E,e.attrs,n)}(t,e,E)}return void 0!==te&&(E?e.residualClasses=te:e.residualStyles=te),n}(j,te,e,E),function $k(t,e,n,E,j,te){let ve=te?e.classBindings:e.styleBindings,Be=cd(ve),Qe=Qd(ve);t[E]=n;let Tt,at=!1;if(Array.isArray(n)?(Tt=n[1],(null===Tt||Ff(n,Tt)>0)&&(at=!0)):Tt=n,j)if(0!==Qe){const vn=cd(t[Be+1]);t[E+1]=lv(vn,Be),0!==vn&&(t[vn+1]=j1(t[vn+1],E)),t[Be+1]=function Zk(t,e){return 131071&t|e<<17}(t[Be+1],E)}else t[E+1]=lv(Be,0),0!==Be&&(t[Be+1]=j1(t[Be+1],E)),Be=E;else t[E+1]=lv(Qe,0),0===Be?Be=E:t[Qe+1]=j1(t[Qe+1],E),Qe=E;at&&(t[E+1]=B1(t[E+1])),H2(t,Tt,E,!0),H2(t,Tt,E,!1),function Xk(t,e,n,E,j){const te=j?t.residualClasses:t.residualStyles;null!=te&&"string"==typeof e&&Ff(te,e)>=0&&(n[E+1]=U1(n[E+1]))}(e,Tt,t,E,te),ve=lv(Be,Qe),te?e.classBindings=ve:e.styleBindings=ve}(j,te,e,n,ve,E)}}(te,t,ve,E),e!==zi&&wl(j,ve,e)&&function ew(t,e,n,E,j,te,ve,Be){if(!(3&e.type))return;const Qe=t.data,at=Qe[Be+1],Tt=function Yk(t){return 1==(1&t)}(at)?tw(Qe,e,n,j,Qd(at),ve):void 0;uv(Tt)||(uv(te)||function Wk(t){return 2==(2&t)}(at)&&(te=tw(Qe,null,n,j,Be,ve)),function Yn(t,e,n,E,j){if(e)j?t.addClass(n,E):t.removeClass(n,E);else{let te=-1===E.indexOf("-")?void 0:qs.DashCase;null==j?t.removeStyle(n,E,te):("string"==typeof j&&j.endsWith("!important")&&(j=j.slice(0,-10),te|=qs.Important),t.setStyle(n,E,j,te))}}(E,ve,Or(ll(),n),j,te))}(te,te.data[ll()],j,j[mi],t,j[ve+1]=function h6(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=gr(function qo(t){return t instanceof Mo?t.changingThisBreaksApplicationSecurity:t}(t)))),t}(e,n),E,ve)}(t,e,null,!0),hm}function V1(t,e,n,E,j){let te=null;const ve=n.directiveEnd;let Be=n.directiveStylingLast;for(-1===Be?Be=n.directiveStart:Be++;Be<ve&&(te=e[Be],E=pm(E,te.hostAttrs,j),te!==t);)Be++;return null!==t&&(n.directiveStylingLast=Be),E}function pm(t,e,n){const E=n?1:2;let j=-1;if(null!==e)for(let te=0;te<e.length;te++){const ve=e[te];"number"==typeof ve?j=ve:j===E&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ol(t,ve,!!n||e[++te]))}return void 0===t?null:t}function tw(t,e,n,E,j,te){const ve=null===e;let Be;for(;j>0;){const Qe=t[j],at=Array.isArray(Qe),Tt=at?Qe[1]:Qe,Bt=null===Tt;let vn=n[j+1];vn===zi&&(vn=Bt?Vi:void 0);let kn=Bt?M0(vn,E):Tt===E?vn:void 0;if(at&&!uv(kn)&&(kn=M0(Qe,E)),uv(kn)&&(Be=kn,ve))return Be;const Un=t[j+1];j=ve?cd(Un):Qd(Un)}if(null!==e){let Qe=te?e.residualClasses:e.residualStyles;null!=Qe&&(Be=M0(Qe,E))}return Be}function uv(t){return void 0!==t}function Fp(t,e=""){const n=Tr(),E=hi(),j=t+Mi,te=E.firstCreatePass?Mp(E,j,1,e,null):E.data[j],ve=rw(E,n,te,e,t);n[j]=ve,Ac()&&lt(E,n,ve,te),sl(te,!1)}let rw=(t,e,n,E,j)=>(kc(!0),function Rd(t,e){return t.createText(e)}(e[mi],E));function cv(t){return fv("",t,""),cv}function fv(t,e,n){const E=Tr(),j=function kp(t,e,n,E){return wl(t,kf(),n)?e+er(n)+E:zi}(E,t,e,n);return j!==zi&&function pf(t,e,n){const E=Or(e,t);!function z0(t,e,n){t.setValue(e,n)}(t[mi],E,n)}(E,ll(),j),fv}const zp="en-US";let Aw=zp;function G1(t,e,n,E,j){if(t=an(t),Array.isArray(t))for(let te=0;te<t.length;te++)G1(t[te],e,n,E,j);else{const te=hi(),ve=Tr();let Be=Ls(t)?t:an(t.provide),Qe=Z0(t);const at=Za(),Tt=1048575&at.providerIndexes,Bt=at.directiveStart,vn=at.providerIndexes>>20;if(Ls(t)||!t.multi){const kn=new Td(Qe,j,ai),Un=Z1(Be,e,j?Tt:Tt+vn,Bt);-1===Un?(Oh(Ih(at,ve),te,Be),W1(te,t,e.length),e.push(Be),at.directiveStart++,at.directiveEnd++,j&&(at.providerIndexes+=1048576),n.push(kn),ve.push(kn)):(n[Un]=kn,ve[Un]=kn)}else{const kn=Z1(Be,e,Tt+vn,Bt),Un=Z1(Be,e,Tt,Tt+vn),Mr=Un>=0&&n[Un];if(j&&!Mr||!j&&!(kn>=0&&n[kn])){Oh(Ih(at,ve),te,Be);const Ir=function O8(t,e,n,E,j){const te=new Td(t,n,ai);return te.multi=[],te.index=e,te.componentProviders=0,Xw(te,j,E&&!n),te}(j?L8:I8,n.length,j,E,Qe);!j&&Mr&&(n[Un].providerFactory=Ir),W1(te,t,e.length,0),e.push(Be),at.directiveStart++,at.directiveEnd++,j&&(at.providerIndexes+=1048576),n.push(Ir),ve.push(Ir)}else W1(te,t,kn>-1?kn:Un,Xw(n[j?Un:kn],Qe,!j&&E));!j&&E&&Mr&&n[Un].componentProviders++}}}function W1(t,e,n,E){const j=Ls(e),te=function a1(t){return!!t.useClass}(e);if(j||te){const Qe=(te?an(e.useClass):e).prototype.ngOnDestroy;if(Qe){const at=t.destroyHooks||(t.destroyHooks=[]);if(!j&&e.multi){const Tt=at.indexOf(n);-1===Tt?at.push(n,[E,Qe]):at[Tt+1].push(E,Qe)}else at.push(n,Qe)}}}function Xw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Z1(t,e,n,E){for(let j=n;j<E;j++)if(e[j]===t)return j;return-1}function I8(t,e,n,E){return Y1(this.multi,[])}function L8(t,e,n,E){const j=this.multi;let te;if(this.providerFactory){const ve=this.providerFactory.componentProviders,Be=tu(n,n[Gr],this.providerFactory.index,E);te=Be.slice(0,ve),Y1(j,te);for(let Qe=ve;Qe<Be.length;Qe++)te.push(Be[Qe])}else te=[],Y1(j,te);return te}function Y1(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Kw(t,e=[]){return n=>{n.providersResolver=(E,j)=>function D8(t,e,n){const E=hi();if(E.firstCreatePass){const j=Ii(t);G1(n,E.data,E.blueprint,j,!0),G1(e,E.data,E.blueprint,j,!1)}}(E,j?j(t):t,e)}}class Bp{}class Jw{}class $1 extends Bp{constructor(e,n,E){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new o2(this);const j=Ko(e);this._bootstrapComponents=hf(j.bootstrap),this._r3Injector=B_(e,n,[{provide:Bp,useValue:this},{provide:Wg,useValue:this.componentFactoryResolver},...E],gr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class X1 extends Jw{constructor(e){super(),this.moduleType=e}create(e){return new $1(this.moduleType,e,[])}}class Qw extends Bp{constructor(e){super(),this.componentFactoryResolver=new o2(this),this.instance=null;const n=new cf([...e.providers,{provide:Bp,useValue:this},{provide:Wg,useValue:this.componentFactoryResolver}],e.parent||Rl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function K1(t,e,n=null){return new Qw({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let F8=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const E=op(0,n.type),j=E.length>0?K1([E],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,j)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=rr({token:t,providedIn:"environment",factory:()=>new t(Br(ru))}),t})();function e3(t){t.getStandaloneInjector=e=>e.get(F8).getOrCreateStandaloneInjector(t)}function l3(t,e,n,E){return function u3(t,e,n,E,j,te){const ve=e+n;return wl(t,ve,j)?function Nc(t,e,n){return t[e]=n}(t,ve+1,te?E.call(te,j):E(j)):function bm(t,e){const n=t[e];return n===zi?void 0:n}(t,ve+1)}(Tr(),function ns(){const t=$r.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,E)}function Q1(t){return e=>{setTimeout(t,void 0,e)}}const wi=class sS extends ${constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,E){let j=e,te=n||(()=>null),ve=E;if(e&&"object"==typeof e){const Qe=e;j=Qe.next?.bind(Qe),te=Qe.error?.bind(Qe),ve=Qe.complete?.bind(Qe)}this.__isAsync&&(te=Q1(te),j&&(j=Q1(j)),ve&&(ve=Q1(ve)));const Be=super.subscribe({next:j,error:te,complete:ve});return e instanceof I&&e.add(Be),Be}};function lS(){return this._results[Symbol.iterator]()}class ex{get changes(){return this._changes||(this._changes=new wi)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=ex.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=lS)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const E=this;E.dirty=!1;const j=function Ni(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Nh(t,e,n){if(t.length!==e.length)return!1;for(let E=0;E<t.length;E++){let j=t[E],te=e[E];if(n&&(j=n(j),te=n(te)),te!==j)return!1}return!0}(E._results,j,n))&&(E._results=j,E.length=j.length,E.last=j[this.length-1],E.first=j[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mf=(()=>{class t{}return t.__NG_ELEMENT_ID__=fS,t})();const uS=mf,cS=class extends uS{constructor(e,n,E){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=E}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n,null)}createEmbeddedViewImpl(e,n,E){const ve=this._declarationTContainer.tView,Be=Xg(this._declarationLView,ve,e,4096&this._declarationLView[pi]?4096:16,null,ve.declTNode,null,null,null,n||null,E||null);Be[yl]=this._declarationLView[this._declarationTContainer.index];const at=this._declarationLView[ho];return null!==at&&(Be[ho]=at.createEmbeddedView(ve)),A1(ve,Be,e),new om(Be)}};function fS(){return gv(Za(),Tr())}function gv(t,e){return 4&t.type?new cS(e,t,_p(t,e)):null}let dc=(()=>{class t{}return t.__NG_ELEMENT_ID__=yS,t})();function yS(){return x3(Za(),Tr())}const xS=dc,v3=class extends xS{constructor(e,n,E){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=E}get element(){return _p(this._hostTNode,this._hostLView)}get injector(){return new Hs(this._hostTNode,this._hostLView)}get parentInjector(){const e=Lh(this._hostTNode,this._hostLView);if(Ef(e)){const n=Eh(e,this._hostLView),E=Cf(e);return new Hs(n[Gr].data[E+8],n)}return new Hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=y3(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-po}createEmbeddedView(e,n,E){let j,te;"number"==typeof E?j=E:null!=E&&(j=E.index,te=E.injector);const Be=e.createEmbeddedViewImpl(n||{},te,null);return this.insertImpl(Be,j,false),Be}createComponent(e,n,E,j,te){const ve=e&&!function Pf(t){return"function"==typeof t}(e);let Be;if(ve)Be=n;else{const $n=n||{};Be=$n.index,E=$n.injector,j=$n.projectableNodes,te=$n.environmentInjector||$n.ngModuleRef}const Qe=ve?e:new am(Li(e)),at=E||this.parentInjector;if(!te&&null==Qe.ngModule){const Mr=(ve?at:this.parentInjector).get(ru,null);Mr&&(te=Mr)}Li(Qe.componentType??{});const kn=Qe.create(at,j,null,te);return this.insertImpl(kn.hostView,Be,false),kn}insert(e,n){return this.insertImpl(e,n,!1)}insertImpl(e,n,E){const j=e._lView,te=j[Gr];if(function gi(t){return Zi(t[xi])}(j)){const Qe=this.indexOf(e);if(-1!==Qe)this.detach(Qe);else{const at=j[xi],Tt=new v3(at,at[ji],at[xi]);Tt.detach(Tt.indexOf(e))}}const ve=this._adjustIndex(n),Be=this._lContainer;if(function Rg(t,e,n,E){const j=po+E,te=n.length;E>0&&(n[j-1][pa]=e),E<te-po?(e[pa]=n[j],T0(n,po+E,e)):(n.push(e),e[pa]=null),e[xi]=n;const ve=e[yl];null!==ve&&n!==ve&&function wa(t,e){const n=t[La];e[ro]!==e[xi][xi][ro]&&(t[Sl]=!0),null===n?t[La]=[e]:n.push(e)}(ve,e);const Be=e[ho];null!==Be&&Be.insertView(t),e[pi]|=128}(te,j,Be,ve),!E){const Qe=Ot(ve,Be),at=j[mi],Tt=L(at,Be[Va]);null!==Tt&&function B0(t,e,n,E,j,te){E[yo]=j,E[ji]=e,mn(t,E,n,1,j,te)}(te,Be[ji],at,j,Tt,Qe)}return e.attachToViewContainerRef(),T0(nx(Be),ve,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=y3(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),E=yu(this._lContainer,n);E&&(Ed(nx(this._lContainer),n),Nd(E[Gr],E))}detach(e){const n=this._adjustIndex(e,-1),E=yu(this._lContainer,n);return E&&null!=Ed(nx(this._lContainer),n)?new om(E):null}_adjustIndex(e,n=0){return e??this.length+n}};function y3(t){return t[8]}function nx(t){return t[8]||(t[8]=[])}function x3(t,e){let n;const E=e[t.index];return Zi(E)?n=E:(n=Y_(E,e,null,t),e[t.index]=n,Kg(e,n)),b3(n,e,t,E),new v3(n,t,e)}let b3=function _3(t,e,n,E){if(t[Va])return;let j;j=8&n.type?wr(E):function bS(t,e){const n=t[mi],E=n.createComment(""),j=Rr(e,t);return Dc(n,L(n,j),E,function N(t,e){return t.nextSibling(e)}(n,j),!1),E}(e,n),t[Va]=j};class rx{constructor(e){this.queryList=e,this.matches=null}clone(){return new rx(this.queryList)}setDirty(){this.queryList.setDirty()}}class ix{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const E=null!==e.contentQueries?e.contentQueries[0]:n.length,j=[];for(let te=0;te<E;te++){const ve=n.getByIndex(te);j.push(this.queries[ve.indexInDeclarationView].clone())}return new ix(j)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==E3(e,n).matches&&this.queries[n].setDirty()}}class w3{constructor(e,n,E=null){this.predicate=e,this.flags=n,this.read=E}}class ox{constructor(e=[]){this.queries=e}elementStart(e,n){for(let E=0;E<this.queries.length;E++)this.queries[E].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let E=0;E<this.length;E++){const j=null!==n?n.length:0,te=this.getByIndex(E).embeddedTView(e,j);te&&(te.indexInDeclarationView=E,null!==n?n.push(te):n=[te])}return null!==n?new ox(n):null}template(e,n){for(let E=0;E<this.queries.length;E++)this.queries[E].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ax{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new ax(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let E=e.parent;for(;null!==E&&8&E.type&&E.index!==n;)E=E.parent;return n===(null!==E?E.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const E=this.metadata.predicate;if(Array.isArray(E))for(let j=0;j<E.length;j++){const te=E[j];this.matchTNodeWithReadOption(e,n,TS(n,te)),this.matchTNodeWithReadOption(e,n,Ph(n,e,te,!1,!1))}else E===mf?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Ph(n,e,E,!1,!1))}matchTNodeWithReadOption(e,n,E){if(null!==E){const j=this.metadata.read;if(null!==j)if(j===Bu||j===dc||j===mf&&4&n.type)this.addMatch(n.index,-2);else{const te=Ph(n,e,j,!1,!1);null!==te&&this.addMatch(n.index,te)}else this.addMatch(n.index,E)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function TS(t,e){const n=t.localNames;if(null!==n)for(let E=0;E<n.length;E+=2)if(n[E]===e)return n[E+1];return null}function AS(t,e,n,E){return-1===n?function MS(t,e){return 11&t.type?_p(t,e):4&t.type?gv(t,e):null}(e,t):-2===n?function kS(t,e,n){return n===Bu?_p(e,t):n===mf?gv(e,t):n===dc?x3(e,t):void 0}(t,e,E):tu(t,t[Gr],n,e)}function T3(t,e,n,E){const j=e[ho].queries[E];if(null===j.matches){const te=t.data,ve=n.matches,Be=[];for(let Qe=0;Qe<ve.length;Qe+=2){const at=ve[Qe];Be.push(at<0?null:AS(e,te[at],ve[Qe+1],n.metadata.read))}j.matches=Be}return j.matches}function sx(t,e,n,E){const j=t.queries.getByIndex(n),te=j.matches;if(null!==te){const ve=T3(t,e,j,n);for(let Be=0;Be<te.length;Be+=2){const Qe=te[Be];if(Qe>0)E.push(ve[Be/2]);else{const at=te[Be+1],Tt=e[-Qe];for(let Bt=po;Bt<Tt.length;Bt++){const vn=Tt[Bt];vn[yl]===vn[xi]&&sx(vn[Gr],vn,at,E)}if(null!==Tt[La]){const Bt=Tt[La];for(let vn=0;vn<Bt.length;vn++){const kn=Bt[vn];sx(kn[Gr],kn,at,E)}}}}}return E}function lx(t){const e=Tr(),n=hi(),E=wd();s0(E+1);const j=E3(n,E);if(t.dirty&&function qr(t){return 4==(4&t[pi])}(e)===(2==(2&j.metadata.flags))){if(null===j.matches)t.reset([]);else{const te=j.crossesNgTemplate?sx(n,e,E,[]):T3(n,e,j,E);t.reset(te,JA),t.notifyOnChanges()}return!0}return!1}function M3(t,e,n){const E=hi();E.firstCreatePass&&(function S3(t,e,n){null===t.queries&&(t.queries=new ox),t.queries.track(new ax(e,n))}(E,new w3(t,e,n),-1),2==(2&e)&&(E.staticViewQueries=!0)),function k3(t,e,n){const E=new ex(4==(4&n));(function b4(t,e,n,E){const j=X_(e);j.push(n),t.firstCreatePass&&K_(t).push(E,j.length-1)})(t,e,E,E.destroy),null===e[ho]&&(e[ho]=new ix),e[ho].queries.push(new rx(E))}(E,Tr(),e)}function E3(t,e){return t.queries.getByIndex(e)}const yv=new Jr("Application Initializer");let mx=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,E)=>{this.resolve=n,this.reject=E}),this.appInits=Vr(yv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const j of this.appInits){const te=j();if(sv(te))n.push(te);else if(C2(te)){const ve=new Promise((Be,Qe)=>{te.subscribe({complete:Be,error:Qe})});n.push(ve)}}const E=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{E()}).catch(j=>{this.reject(j)}),0===n.length&&E(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),G3=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const Uc=new Jr("LocaleId",{providedIn:"root",factory:()=>Vr(Uc,Qr.Optional|Qr.SkipSelf)||function XS(){return typeof $localize<"u"&&$localize.locale||zp}()});let W3=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new H(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class JS{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Z3=(()=>{class t{compileModuleSync(n){return new X1(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const E=this.compileModuleSync(n),te=hf(Ko(n).declarations).reduce((ve,Be)=>{const Qe=Li(Be);return Qe&&ve.push(new am(Qe)),ve},[]);return new JS(E,te)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function X3(...t){}class Po{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:E=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wi(!1),this.onMicrotaskEmpty=new wi(!1),this.onStable=new wi(!1),this.onError=new wi(!1),typeof Zone>"u")throw new xn(908,!1);Zone.assertZonePatched();const j=this;j._nesting=0,j._outer=j._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(j._inner=j._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(j._inner=j._inner.fork(Zone.longStackTraceZoneSpec)),j.shouldCoalesceEventChangeDetection=!E&&n,j.shouldCoalesceRunChangeDetection=E,j.lastRequestAnimationFrameId=-1,j.nativeRequestAnimationFrame=function tE(){let t=Bi.requestAnimationFrame,e=Bi.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const E=e[Zone.__symbol__("OriginalDelegate")];E&&(e=E)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function iE(t){const e=()=>{!function rE(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,vx(t),t.isCheckStableRunning=!0,gx(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),vx(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,E,j,te,ve,Be)=>{try{return K3(t),n.invokeTask(j,te,ve,Be)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===te.type||t.shouldCoalesceRunChangeDetection)&&e(),J3(t)}},onInvoke:(n,E,j,te,ve,Be,Qe)=>{try{return K3(t),n.invoke(j,te,ve,Be,Qe)}finally{t.shouldCoalesceRunChangeDetection&&e(),J3(t)}},onHasTask:(n,E,j,te)=>{n.hasTask(j,te),E===j&&("microTask"==te.change?(t._hasPendingMicrotasks=te.microTask,vx(t),gx(t)):"macroTask"==te.change&&(t.hasPendingMacrotasks=te.macroTask))},onHandleError:(n,E,j,te)=>(n.handleError(j,te),t.runOutsideAngular(()=>t.onError.emit(te)),!1)})}(j)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Po.isInAngularZone())throw new xn(909,!1)}static assertNotInAngularZone(){if(Po.isInAngularZone())throw new xn(909,!1)}run(e,n,E){return this._inner.run(e,n,E)}runTask(e,n,E,j){const te=this._inner,ve=te.scheduleEventTask("NgZoneEvent: "+j,e,nE,X3,X3);try{return te.runTask(ve,n,E)}finally{te.cancelTask(ve)}}runGuarded(e,n,E){return this._inner.runGuarded(e,n,E)}runOutsideAngular(e){return this._outer.run(e)}}const nE={};function gx(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vx(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function K3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function J3(t){t._nesting--,gx(t)}class oE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wi,this.onMicrotaskEmpty=new wi,this.onStable=new wi,this.onError=new wi}run(e,n,E){return e.apply(n,E)}runGuarded(e,n,E){return e.apply(n,E)}runOutsideAngular(e){return e()}runTask(e,n,E,j){return e.apply(n,E)}}const Q3=new Jr("",{providedIn:"root",factory:e5});function e5(){const t=Vr(Po);let e=!0;return In(new R(j=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{j.next(e),j.complete()})}),new R(j=>{let te;t.runOutsideAngular(()=>{te=t.onStable.subscribe(()=>{Po.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,j.next(!0))})})});const ve=t.onUnstable.subscribe(()=>{Po.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{j.next(!1)}))});return()=>{te.unsubscribe(),ve.unsubscribe()}}).pipe(qn()))}const t5=new Jr(""),xv=new Jr("");let bx,yx=(()=>{class t{constructor(n,E,j){this._ngZone=n,this.registry=E,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bx||(function aE(t){bx=t}(j),j.addToWindow(E)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Po.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(E=>!E.updateCb||!E.updateCb(n)||(clearTimeout(E.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,E,j){let te=-1;E&&E>0&&(te=setTimeout(()=>{this._callbacks=this._callbacks.filter(ve=>ve.timeoutId!==te),n(this._didWork,this.getPendingTasks())},E)),this._callbacks.push({doneCb:n,timeoutId:te,updateCb:j})}whenStable(n,E,j){if(j&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,E,j),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,E,j){return[]}}return t.\u0275fac=function(n){return new(n||t)(Br(Po),Br(xx),Br(xv))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})(),xx=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,E){this._applications.set(n,E)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,E=!0){return bx?.findTestabilityInTree(this,n,E)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),fd=null;const n5=new Jr("AllowMultipleToken"),_x=new Jr("PlatformDestroyListeners"),wx=new Jr("appBootstrapListener");class i5{constructor(e,n){this.name=e,this.token=n}}function a5(t,e,n=[]){const E=`Platform: ${e}`,j=new Jr(E);return(te=[])=>{let ve=Tx();if(!ve||ve.injector.get(n5,!1)){const Be=[...n,...te,{provide:j,useValue:!0}];t?t(Be):function uE(t){if(fd&&!fd.get(n5,!1))throw new xn(400,!1);(function r5(){!function Ye(t){Se=t}(()=>{throw new xn(600,!1)})})(),fd=t;const e=t.get(l5);(function o5(t){t.get(Hd,null)?.forEach(n=>n())})(t)}(function s5(t=[],e){return Rc.create({name:e,providers:[{provide:Fu,useValue:"platform"},{provide:_x,useValue:new Set([()=>fd=null])},...t]})}(Be,E))}return function fE(t){const e=Tx();if(!e)throw new xn(401,!1);return e}()}}function Tx(){return fd?.get(l5)??null}let l5=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,E){const j=function dE(t="zone.js",e){return"noop"===t?new oE:"zone.js"===t?new Po(e):t}(E?.ngZone,function u5(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:E?.ngZoneEventCoalescing,runCoalescing:E?.ngZoneRunCoalescing}));return j.run(()=>{const te=function R8(t,e,n){return new $1(t,e,n)}(n.moduleType,this.injector,function p5(t){return[{provide:Po,useFactory:t},{provide:Tu,multi:!0,useFactory:()=>{const e=Vr(pE,{optional:!0});return()=>e.initialize()}},{provide:h5,useFactory:hE},{provide:Q3,useFactory:e5}]}(()=>j)),ve=te.injector.get(Kd,null);return j.runOutsideAngular(()=>{const Be=j.onError.subscribe({next:Qe=>{ve.handleError(Qe)}});te.onDestroy(()=>{bv(this._modules,te),Be.unsubscribe()})}),function c5(t,e,n){try{const E=n();return sv(E)?E.catch(j=>{throw e.runOutsideAngular(()=>t.handleError(j)),j}):E}catch(E){throw e.runOutsideAngular(()=>t.handleError(E)),E}}(ve,j,()=>{const Be=te.injector.get(mx);return Be.runInitializers(),Be.donePromise.then(()=>(function kw(t){or(t,"Expected localeId to be defined"),"string"==typeof t&&(Aw=t.toLowerCase().replace(/_/g,"-"))}(te.injector.get(Uc,zp)||zp),this._moduleDoBootstrap(te),te))})})}bootstrapModule(n,E=[]){const j=f5({},E);return function sE(t,e,n){const E=new X1(n);return Promise.resolve(E)}(0,0,n).then(te=>this.bootstrapModuleFactory(te,j))}_moduleDoBootstrap(n){const E=n.injector.get(dd);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(j=>E.bootstrap(j));else{if(!n.instance.ngDoBootstrap)throw new xn(-403,!1);n.instance.ngDoBootstrap(E)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xn(404,!1);this._modules.slice().forEach(E=>E.destroy()),this._destroyListeners.forEach(E=>E());const n=this._injector.get(_x,null);n&&(n.forEach(E=>E()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Br(Rc))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function f5(t,e){return Array.isArray(e)?e.reduce(f5,t):{...t,...e}}let dd=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Vr(h5),this.zoneIsStable=Vr(Q3),this.componentTypes=[],this.components=[],this.isStable=Vr(W3).hasPendingTasks.pipe(Nn(n=>n?_n(!1):this.zoneIsStable),Xn(),qn()),this._injector=Vr(ru)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,E){const j=n instanceof Mu;if(!this._injector.get(mx).done)throw!j&&function Pi(t){const e=Li(t)||Hi(t)||vi(t);return null!==e&&e.standalone}(n),new xn(405,!1);let ve;ve=j?n:this._injector.get(Wg).resolveComponentFactory(n),this.componentTypes.push(ve.componentType);const Be=function lE(t){return t.isBoundToModule}(ve)?void 0:this._injector.get(Bp),at=ve.create(Rc.NULL,[],E||ve.selector,Be),Tt=at.location.nativeElement,Bt=at.injector.get(t5,null);return Bt?.registerApplication(Tt),at.onDestroy(()=>{this.detachView(at.hostView),bv(this.components,at),Bt?.unregisterApplication(Tt)}),this._loadComponent(at),at}tick(){if(this._runningTick)throw new xn(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const E=n;this._views.push(E),E.attachToAppRef(this)}detachView(n){const E=n;bv(this._views,E),E.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const E=this._injector.get(wx,[]);E.push(...this._bootstrapListeners),E.forEach(j=>j(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bv(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new xn(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function bv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const h5=new Jr("",{providedIn:"root",factory:()=>Vr(Kd).handleError.bind(void 0)});function hE(){const t=Vr(Po),e=Vr(Kd);return n=>t.runOutsideAngular(()=>e.handleError(n))}let pE=(()=>{class t{constructor(){this.zone=Vr(Po),this.applicationRef=Vr(dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();let Mx=(()=>{class t{}return t.__NG_ELEMENT_ID__=vE,t})();function vE(t){return function yE(t,e,n){if(cs(t)&&!n){const E=Lr(t.index,e);return new om(E,E)}return 47&t.type?new om(e[ro],e):null}(Za(),Tr(),16==(16&t))}class y5{constructor(){}supports(e){return nv(e)}create(e){return new ME(e)}}const TE=(t,e)=>e;class ME{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||TE}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,E=this._removalsHead,j=0,te=null;for(;n||E;){const ve=!E||n&&n.currentIndex<b5(E,j,te)?n:E,Be=b5(ve,j,te),Qe=ve.currentIndex;if(ve===E)j--,E=E._nextRemoved;else if(n=n._next,null==ve.previousIndex)j++;else{te||(te=[]);const at=Be-j,Tt=Qe-j;if(at!=Tt){for(let vn=0;vn<at;vn++){const kn=vn<te.length?te[vn]:te[vn]=0,Un=kn+vn;Tt<=Un&&Un<at&&(te[vn]=kn+1)}te[ve.previousIndex]=Tt-at}}Be!==Qe&&e(ve,Be,Qe)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!nv(e))throw new xn(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let j,te,ve,n=this._itHead,E=!1;if(Array.isArray(e)){this.length=e.length;for(let Be=0;Be<this.length;Be++)te=e[Be],ve=this._trackByFn(Be,te),null!==n&&Object.is(n.trackById,ve)?(E&&(n=this._verifyReinsertion(n,te,ve,Be)),Object.is(n.item,te)||this._addIdentityChange(n,te)):(n=this._mismatch(n,te,ve,Be),E=!0),n=n._next}else j=0,function pk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let E;for(;!(E=n.next()).done;)e(E.value)}}(e,Be=>{ve=this._trackByFn(j,Be),null!==n&&Object.is(n.trackById,ve)?(E&&(n=this._verifyReinsertion(n,Be,ve,j)),Object.is(n.item,Be)||this._addIdentityChange(n,Be)):(n=this._mismatch(n,Be,ve,j),E=!0),n=n._next,j++}),this.length=j;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,E,j){let te;return null===e?te=this._itTail:(te=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(E,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,te,j)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(E,j))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,te,j)):e=this._addAfter(new AE(n,E),te,j),e}_verifyReinsertion(e,n,E,j){let te=null===this._unlinkedRecords?null:this._unlinkedRecords.get(E,null);return null!==te?e=this._reinsertAfter(te,e._prev,j):e.currentIndex!=j&&(e.currentIndex=j,this._addToMoves(e,j)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,E){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const j=e._prevRemoved,te=e._nextRemoved;return null===j?this._removalsHead=te:j._nextRemoved=te,null===te?this._removalsTail=j:te._prevRemoved=j,this._insertAfter(e,n,E),this._addToMoves(e,E),e}_moveAfter(e,n,E){return this._unlink(e),this._insertAfter(e,n,E),this._addToMoves(e,E),e}_addAfter(e,n,E){return this._insertAfter(e,n,E),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,E){const j=null===n?this._itHead:n._next;return e._next=j,e._prev=n,null===j?this._itTail=e:j._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new x5),this._linkedRecords.put(e),e.currentIndex=E,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,E=e._next;return null===n?this._itHead=E:n._next=E,null===E?this._itTail=n:E._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new x5),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class AE{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kE{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let E;for(E=this._head;null!==E;E=E._nextDup)if((null===n||n<=E.currentIndex)&&Object.is(E.trackById,e))return E;return null}remove(e){const n=e._prevDup,E=e._nextDup;return null===n?this._head=E:n._nextDup=E,null===E?this._tail=n:E._prevDup=n,null===this._head}}class x5{constructor(){this.map=new Map}put(e){const n=e.trackById;let E=this.map.get(n);E||(E=new kE,this.map.set(n,E)),E.add(e)}get(e,n){const j=this.map.get(e);return j?j.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function b5(t,e,n){const E=t.previousIndex;if(null===E)return E;let j=0;return n&&E<n.length&&(j=n[E]),E+e+j}class _5{constructor(){}supports(e){return e instanceof Map||k1(e)}create(){return new SE}}class SE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||k1(e)))throw new xn(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(E,j)=>{if(n&&n.key===j)this._maybeAddToChanges(n,E),this._appendAfter=n,n=n._next;else{const te=this._getOrCreateRecordForKey(j,E);n=this._insertBeforeOrAppend(n,te)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let E=n;null!==E;E=E._nextRemoved)E===this._mapHead&&(this._mapHead=null),this._records.delete(E.key),E._nextRemoved=E._next,E.previousValue=E.currentValue,E.currentValue=null,E._prev=null,E._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const E=e._prev;return n._next=e,n._prev=E,e._prev=n,E&&(E._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const j=this._records.get(e);this._maybeAddToChanges(j,n);const te=j._prev,ve=j._next;return te&&(te._next=ve),ve&&(ve._prev=te),j._next=null,j._prev=null,j}const E=new EE(e);return this._records.set(e,E),E.currentValue=n,this._addToAdditions(E),E}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(E=>n(e[E],E))}}class EE{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function w5(){return new Tm([new y5])}let Tm=(()=>{class t{constructor(n){this.factories=n}static create(n,E){if(null!=E){const j=E.factories.slice();n=n.concat(j)}return new t(n)}static extend(n){return{provide:t,useFactory:E=>t.create(n,E||w5()),deps:[[t,new ps,new Cd]]}}find(n){const E=this.factories.find(j=>j.supports(n));if(null!=E)return E;throw new xn(901,!1)}}return t.\u0275prov=rr({token:t,providedIn:"root",factory:w5}),t})();function T5(){return new Vp([new _5])}let Vp=(()=>{class t{constructor(n){this.factories=n}static create(n,E){if(E){const j=E.factories.slice();n=n.concat(j)}return new t(n)}static extend(n){return{provide:t,useFactory:E=>t.create(n,E||T5()),deps:[[t,new ps,new Cd]]}}find(n){const E=this.factories.find(j=>j.supports(n));if(E)return E;throw new xn(901,!1)}}return t.\u0275prov=rr({token:t,providedIn:"root",factory:T5}),t})();const IE=a5(null,"core",[]);let LE=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Br(dd))},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({}),t})(),Lx=null;function Hp(){return Lx}class qE{}const vs=new Jr("DocumentToken");let Ox=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return Vr(WE)},providedIn:"platform"}),t})();const GE=new Jr("Location Initialized");let WE=(()=>{class t extends Ox{constructor(){super(),this._doc=Vr(vs),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hp().getBaseHref(this._doc)}onPopState(n){const E=Hp().getGlobalEventTarget(this._doc,"window");return E.addEventListener("popstate",n,!1),()=>E.removeEventListener("popstate",n)}onHashChange(n){const E=Hp().getGlobalEventTarget(this._doc,"window");return E.addEventListener("hashchange",n,!1),()=>E.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,E,j){this._history.pushState(n,E,j)}replaceState(n,E,j){this._history.replaceState(n,E,j)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return new t},providedIn:"platform"}),t})();function Px(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function D5(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function gf(t){return t&&"?"!==t[0]?"?"+t:t}let nh=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return Vr(L5)},providedIn:"root"}),t})();const I5=new Jr("appBaseHref");let L5=(()=>{class t extends nh{constructor(n,E){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=E??this._platformLocation.getBaseHrefFromDOM()??Vr(vs).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Px(this._baseHref,n)}path(n=!1){const E=this._platformLocation.pathname+gf(this._platformLocation.search),j=this._platformLocation.hash;return j&&n?`${E}${j}`:E}pushState(n,E,j,te){const ve=this.prepareExternalUrl(j+gf(te));this._platformLocation.pushState(n,E,ve)}replaceState(n,E,j,te){const ve=this.prepareExternalUrl(j+gf(te));this._platformLocation.replaceState(n,E,ve)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Br(Ox),Br(I5,8))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ZE=(()=>{class t extends nh{constructor(n,E){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=E&&(this._baseHref=E)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let E=this._platformLocation.hash;return null==E&&(E="#"),E.length>0?E.substring(1):E}prepareExternalUrl(n){const E=Px(this._baseHref,n);return E.length>0?"#"+E:E}pushState(n,E,j,te){let ve=this.prepareExternalUrl(j+gf(te));0==ve.length&&(ve=this._platformLocation.pathname),this._platformLocation.pushState(n,E,ve)}replaceState(n,E,j,te){let ve=this.prepareExternalUrl(j+gf(te));0==ve.length&&(ve=this._platformLocation.pathname),this._platformLocation.replaceState(n,E,ve)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Br(Ox),Br(I5,8))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})(),Rx=(()=>{class t{constructor(n){this._subject=new wi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const E=this._locationStrategy.getBaseHref();this._basePath=function XE(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(D5(O5(E))),this._locationStrategy.onPopState(j=>{this._subject.emit({url:this.path(!0),pop:!0,state:j.state,type:j.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,E=""){return this.path()==this.normalize(n+gf(E))}normalize(n){return t.stripTrailingSlash(function $E(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,O5(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,E="",j=null){this._locationStrategy.pushState(j,"",n,E),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gf(E)),j)}replaceState(n,E="",j=null){this._locationStrategy.replaceState(j,"",n,E),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+gf(E)),j)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(E=>{this._notifyUrlChangeListeners(E.url,E.state)})),()=>{const E=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(E,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",E){this._urlChangeListeners.forEach(j=>j(n,E))}subscribe(n,E,j){return this._subject.subscribe({next:n,error:E,complete:j})}}return t.normalizeQueryParams=gf,t.joinWithSlash=Px,t.stripTrailingSlash=D5,t.\u0275fac=function(n){return new(n||t)(Br(nh))},t.\u0275prov=rr({token:t,factory:function(){return function YE(){return new Rx(Br(nh))}()},providedIn:"root"}),t})();function O5(t){return t.replace(/\/index.html$/,"")}const Gx=/\s+/,V5=[];let Wx=(()=>{class t{constructor(n,E,j,te){this._iterableDiffers=n,this._keyValueDiffers=E,this._ngEl=j,this._renderer=te,this.initialClasses=V5,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Gx):V5}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Gx):n}ngDoCheck(){for(const E of this.initialClasses)this._updateState(E,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const E of n)this._updateState(E,!0);else if(null!=n)for(const E of Object.keys(n))this._updateState(E,!!n[E]);this._applyStateDiff()}_updateState(n,E){const j=this.stateMap.get(n);void 0!==j?(j.enabled!==E&&(j.changed=!0,j.enabled=E),j.touched=!0):this.stateMap.set(n,{enabled:E,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const E=n[0],j=n[1];j.changed?(this._toggleClass(E,j.enabled),j.changed=!1):j.touched||(j.enabled&&this._toggleClass(E,!1),this.stateMap.delete(E)),j.touched=!1}}_toggleClass(n,E){(n=n.trim()).length>0&&n.split(Gx).forEach(j=>{E?this._renderer.addClass(this._ngEl.nativeElement,j):this._renderer.removeClass(this._ngEl.nativeElement,j)})}}return t.\u0275fac=function(n){return new(n||t)(ai(Tm),ai(Vp),ai(Bu),ai(Zg))},t.\u0275dir=bi({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})(),Zx=(()=>{class t{constructor(n,E){this._viewContainer=n,this._context=new NC,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=E}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){G5("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){G5("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,E){return!0}}return t.\u0275fac=function(n){return new(n||t)(ai(dc),ai(mf))},t.\u0275dir=bi({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class NC{constructor(){this.$implicit=null,this.ngIf=null}}function G5(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${gr(e)}'.`)}let Z5=(()=>{class t{constructor(n,E,j){this._ngEl=n,this._differs=E,this._renderer=j,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,E){const[j,te]=n.split("."),ve=-1===j.indexOf("-")?void 0:qs.DashCase;null!=E?this._renderer.setStyle(this._ngEl.nativeElement,j,te?`${E}${te}`:E,ve):this._renderer.removeStyle(this._ngEl.nativeElement,j,ve)}_applyChanges(n){n.forEachRemovedItem(E=>this._setStyle(E.key,null)),n.forEachAddedItem(E=>this._setStyle(E.key,E.currentValue)),n.forEachChangedItem(E=>this._setStyle(E.key,E.currentValue))}}return t.\u0275fac=function(n){return new(n||t)(ai(Bu),ai(Vp),ai(Zg))},t.\u0275dir=bi({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),km=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({}),t})();const $5="browser";function Jx(t){return t===$5}function X5(t){return"server"===t}let dD=(()=>{class t{}return t.\u0275prov=rr({token:t,providedIn:"root",factory:()=>new hD(Br(vs),window)}),t})();class hD{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function pD(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const E=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let j=E.currentNode;for(;j;){const te=j.shadowRoot;if(te){const ve=te.getElementById(e)||te.querySelector(`[name="${e}"]`);if(ve)return ve}j=E.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),E=n.left+this.window.pageXOffset,j=n.top+this.window.pageYOffset,te=this.offset();this.window.scrollTo(E-te[0],j-te[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=K5(this.window.history)||K5(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function K5(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zD extends qE{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class tb extends zD{static makeCurrent(){!function HE(t){Lx||(Lx=t)}(new tb)}onAndCancel(e,n,E){return e.addEventListener(n,E),()=>{e.removeEventListener(n,E)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function BD(){return Em=Em||document.querySelector("base"),Em?Em.getAttribute("href"):null}();return null==n?null:function jD(t){Rv=Rv||document.createElement("a"),Rv.setAttribute("href",t);const e=Rv.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Em=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function OC(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const E=n.indexOf("="),[j,te]=-1==E?[n,""]:[n.slice(0,E),n.slice(E+1)];if(j.trim()===e)return decodeURIComponent(te)}return null}(document.cookie,e)}}let Rv,Em=null,VD=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();const nb=new Jr("EventManagerPlugins");let nT=(()=>{class t{constructor(n,E){this._zone=E,this._eventNameToPlugin=new Map,n.forEach(j=>{j.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,E,j){return this._findPluginFor(E).addEventListener(n,E,j)}getZone(){return this._zone}_findPluginFor(n){let E=this._eventNameToPlugin.get(n);if(E)return E;if(E=this._plugins.find(te=>te.supports(n)),!E)throw new xn(5101,!1);return this._eventNameToPlugin.set(n,E),E}}return t.\u0275fac=function(n){return new(n||t)(Br(nb),Br(Po))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();class rT{constructor(e){this._doc=e}}const rb="ng-app-id";let iT=(()=>{class t{constructor(n,E,j,te={}){this.doc=n,this.appId=E,this.nonce=j,this.platformId=te,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=X5(te),this.resetHostNodes()}addStyles(n){for(const E of n)1===this.changeUsageCount(E,1)&&this.onStyleAdded(E)}removeStyles(n){for(const E of n)this.changeUsageCount(E,-1)<=0&&this.onStyleRemoved(E)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(E=>E.remove()),n.clear());for(const E of this.getAllStyles())this.onStyleRemoved(E);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const E of this.getAllStyles())this.addStyleToHost(n,E)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const E of this.hostNodes)this.addStyleToHost(E,n)}onStyleRemoved(n){const E=this.styleRef;E.get(n)?.elements?.forEach(j=>j.remove()),E.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${rb}="${this.appId}"]`);if(n?.length){const E=new Map;return n.forEach(j=>{null!=j.textContent&&E.set(j.textContent,j)}),E}return null}changeUsageCount(n,E){const j=this.styleRef;if(j.has(n)){const te=j.get(n);return te.usage+=E,te.usage}return j.set(n,{usage:E,elements:[]}),E}getStyleElement(n,E){const j=this.styleNodesInDOM,te=j?.get(E);if(te?.parentNode===n)return j.delete(E),te.removeAttribute(rb),te;{const ve=this.doc.createElement("style");return this.nonce&&ve.setAttribute("nonce",this.nonce),ve.textContent=E,this.platformIsServer&&ve.setAttribute(rb,this.appId),ve}}addStyleToHost(n,E){const j=this.getStyleElement(n,E);n.appendChild(j);const te=this.styleRef,ve=te.get(E)?.elements;ve?ve.push(j):te.set(E,{elements:[j],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return t.\u0275fac=function(n){return new(n||t)(Br(vs),Br(Vd),Br(fp,8),Br(zu))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();const ib={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ob=/%COMP%/g,WD=new Jr("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function aT(t,e){return e.map(n=>n.replace(ob,t))}let ab=(()=>{class t{constructor(n,E,j,te,ve,Be,Qe,at=null){this.eventManager=n,this.sharedStylesHost=E,this.appId=j,this.removeStylesOnCompDestory=te,this.doc=ve,this.platformId=Be,this.ngZone=Qe,this.nonce=at,this.rendererByCompId=new Map,this.platformIsServer=X5(Be),this.defaultRenderer=new sb(n,ve,Qe,this.platformIsServer)}createRenderer(n,E){if(!n||!E)return this.defaultRenderer;this.platformIsServer&&E.encapsulation===oa.ShadowDom&&(E={...E,encapsulation:oa.Emulated});const j=this.getOrCreateRenderer(n,E);return j instanceof lT?j.applyToHost(n):j instanceof lb&&j.applyStyles(),j}getOrCreateRenderer(n,E){const j=this.rendererByCompId;let te=j.get(E.id);if(!te){const ve=this.doc,Be=this.ngZone,Qe=this.eventManager,at=this.sharedStylesHost,Tt=this.removeStylesOnCompDestory,Bt=this.platformIsServer;switch(E.encapsulation){case oa.Emulated:te=new lT(Qe,at,E,this.appId,Tt,ve,Be,Bt);break;case oa.ShadowDom:return new XD(Qe,at,n,E,ve,Be,this.nonce,Bt);default:te=new lb(Qe,at,E,Tt,ve,Be,Bt)}te.onDestroy=()=>j.delete(E.id),j.set(E.id,te)}return te}ngOnDestroy(){this.rendererByCompId.clear()}}return t.\u0275fac=function(n){return new(n||t)(Br(nT),Br(iT),Br(Vd),Br(WD),Br(vs),Br(zu),Br(Po),Br(fp))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();class sb{constructor(e,n,E,j){this.eventManager=e,this.doc=n,this.ngZone=E,this.platformIsServer=j,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ib[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sT(e)?e.content:e).appendChild(n)}insertBefore(e,n,E){e&&(sT(e)?e.content:e).insertBefore(n,E)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let E="string"==typeof e?this.doc.querySelector(e):e;if(!E)throw new xn(5104,!1);return n||(E.textContent=""),E}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,E,j){if(j){n=j+":"+n;const te=ib[j];te?e.setAttributeNS(te,n,E):e.setAttribute(n,E)}else e.setAttribute(n,E)}removeAttribute(e,n,E){if(E){const j=ib[E];j?e.removeAttributeNS(j,n):e.removeAttribute(`${E}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,E,j){j&(qs.DashCase|qs.Important)?e.style.setProperty(n,E,j&qs.Important?"important":""):e.style[n]=E}removeStyle(e,n,E){E&qs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,E){e[n]=E}setValue(e,n){e.nodeValue=n}listen(e,n,E){if("string"==typeof e&&!(e=Hp().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(E))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function sT(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class XD extends sb{constructor(e,n,E,j,te,ve,Be,Qe){super(e,te,ve,Qe),this.sharedStylesHost=n,this.hostEl=E,this.shadowRoot=E.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const at=aT(j.id,j.styles);for(const Tt of at){const Bt=document.createElement("style");Be&&Bt.setAttribute("nonce",Be),Bt.textContent=Tt,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,E){return super.insertBefore(this.nodeOrShadowRoot(e),n,E)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lb extends sb{constructor(e,n,E,j,te,ve,Be,Qe){super(e,te,ve,Be),this.sharedStylesHost=n,this.removeStylesOnCompDestory=j,this.rendererUsageCount=0,this.styles=Qe?aT(Qe,E.styles):E.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class lT extends lb{constructor(e,n,E,j,te,ve,Be,Qe){const at=j+"-"+E.id;super(e,n,E,te,ve,Be,Qe,at),this.contentAttr=function ZD(t){return"_ngcontent-%COMP%".replace(ob,t)}(at),this.hostAttr=function YD(t){return"_nghost-%COMP%".replace(ob,t)}(at)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const E=super.createElement(e,n);return super.setAttribute(E,this.contentAttr,""),E}}let KD=(()=>{class t extends rT{constructor(n){super(n)}supports(n){return!0}addEventListener(n,E,j){return n.addEventListener(E,j,!1),()=>this.removeEventListener(n,E,j)}removeEventListener(n,E,j){return n.removeEventListener(E,j)}}return t.\u0275fac=function(n){return new(n||t)(Br(vs))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();const uT=["alt","control","meta","shift"],JD={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QD={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let e7=(()=>{class t extends rT{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,E,j){const te=t.parseEventName(E),ve=t.eventCallback(te.fullKey,j,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hp().onAndCancel(n,te.domEventName,ve))}static parseEventName(n){const E=n.toLowerCase().split("."),j=E.shift();if(0===E.length||"keydown"!==j&&"keyup"!==j)return null;const te=t._normalizeKey(E.pop());let ve="",Be=E.indexOf("code");if(Be>-1&&(E.splice(Be,1),ve="code."),uT.forEach(at=>{const Tt=E.indexOf(at);Tt>-1&&(E.splice(Tt,1),ve+=at+".")}),ve+=te,0!=E.length||0===te.length)return null;const Qe={};return Qe.domEventName=j,Qe.fullKey=ve,Qe}static matchEventFullKeyCode(n,E){let j=JD[n.key]||n.key,te="";return E.indexOf("code.")>-1&&(j=n.code,te="code."),!(null==j||!j)&&(j=j.toLowerCase()," "===j?j="space":"."===j&&(j="dot"),uT.forEach(ve=>{ve!==j&&(0,QD[ve])(n)&&(te+=ve+".")}),te+=j,te===E)}static eventCallback(n,E,j){return te=>{t.matchEventFullKeyCode(te,n)&&j.runGuarded(()=>E(te))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Br(vs))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();const i7=a5(IE,"browser",[{provide:zu,useValue:$5},{provide:Hd,useValue:function t7(){tb.makeCurrent()},multi:!0},{provide:vs,useFactory:function r7(){return function oi(t){di=t}(document),document},deps:[]}]),o7=new Jr(""),dT=[{provide:xv,useClass:class UD{addToWindow(e){Bi.getAngularTestability=(E,j=!0)=>{const te=e.findTestabilityInTree(E,j);if(null==te)throw new xn(5103,!1);return te},Bi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Bi.getAllAngularRootElements=()=>e.getAllRootElements(),Bi.frameworkStabilizers||(Bi.frameworkStabilizers=[]),Bi.frameworkStabilizers.push(E=>{const j=Bi.getAllAngularTestabilities();let te=j.length,ve=!1;const Be=function(Qe){ve=ve||Qe,te--,0==te&&E(ve)};j.forEach(function(Qe){Qe.whenStable(Be)})})}findTestabilityInTree(e,n,E){return null==n?null:e.getTestability(n)??(E?Hp().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:t5,useClass:yx,deps:[Po,xx,xv]},{provide:yx,useClass:yx,deps:[Po,xx,xv]}],hT=[{provide:Fu,useValue:"root"},{provide:Kd,useFactory:function n7(){return new Kd},deps:[]},{provide:nb,useClass:KD,multi:!0,deps:[vs,Po,zu]},{provide:nb,useClass:e7,multi:!0,deps:[vs]},ab,iT,nT,{provide:tm,useExisting:ab},{provide:class mD{},useClass:VD,deps:[]},[]];let pT=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Vd,useValue:n.appId}]}}}return t.\u0275fac=function(n){return new(n||t)(Br(o7,12))},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({providers:[...hT,...dT],imports:[km,LE]}),t})(),ub=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(Br(vs))},t.\u0275prov=rr({token:t,factory:function(n){let E=null;return E=n?new n:function s7(){return new ub(Br(vs))}(),E},providedIn:"root"}),t})();typeof window<"u"&&window;const{isArray:h7}=Array,{getPrototypeOf:p7,prototype:m7,keys:g7}=Object;const{isArray:x7}=Array;function yT(t){return ne(e=>function b7(t,e){return x7(e)?t(...e):t(e)}(t,e))}function Fv(...t){const e=Xt(t),n=function $t(t){return xr(Zt(t))?t.pop():void 0}(t),{args:E,keys:j}=function v7(t){if(1===t.length){const e=t[0];if(h7(e))return{args:e,keys:null};if(function y7(t){return t&&"object"==typeof t&&p7(t)===m7}(e)){const n=g7(e);return{args:n.map(E=>e[E]),keys:n}}}return{args:t,keys:null}}(t);if(0===E.length)return bn([],e);const te=new R(function w7(t,e,n=S){return E=>{xT(e,()=>{const{length:j}=t,te=new Array(j);let ve=j,Be=j;for(let Qe=0;Qe<j;Qe++)xT(e,()=>{const at=bn(t[Qe],e);let Tt=!1;at.subscribe(ue(E,Bt=>{te[Qe]=Bt,Tt||(Tt=!0,Be--),Be||E.next(n(te.slice()))},()=>{--ve||E.complete()}))},E)},E)}}(E,e,j?ve=>function _7(t,e){return t.reduce((n,E,j)=>(n[E]=e[j],n),{})}(j,ve):S));return n?te.pipe(yT(n)):te}function xT(t,e,n){t?kt(n,t,e):e()}const Nv=se(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function qp(...t){return function T7(){return wt(1)}()(bn(t,Xt(t)))}function zv(t){return new R(e=>{Je(t()).subscribe(e)})}function Gp(t,e){const n=xr(t)?t:()=>t,E=j=>j.error(n());return new R(e?j=>e.schedule(E,0,j):E)}function fb(){return K((t,e)=>{let n=null;t._refCount++;const E=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const j=t._connection,te=n;n=null,j&&(!te||j===te)&&j.unsubscribe(),e.unsubscribe()});t.subscribe(E),E.closed||(n=t.connect())})}class db extends R{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,X(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new I;const n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},E=>{this._teardown(),n.error(E)},()=>this._teardown()))),e.closed&&(this._connection=null,e=I.EMPTY)}return e}refCount(){return fb()(this)}}function zl(t){return t<=0?()=>Nt:K((e,n)=>{let E=0;e.subscribe(ue(n,j=>{++E<=t&&(n.next(j),t<=E&&n.complete())}))})}function bT(...t){const e=Xt(t);return K((n,E)=>{(e?qp(t,n,e):qp(t,n)).subscribe(E)})}function Bl(t,e){return K((n,E)=>{let j=0;n.subscribe(ue(E,te=>t.call(e,te,j++)&&E.next(te)))})}function Bv(t){return K((e,n)=>{let E=!1;e.subscribe(ue(n,j=>{E=!0,n.next(j)},()=>{E||n.next(t),n.complete()}))})}function _T(t=M7){return K((e,n)=>{let E=!1;e.subscribe(ue(n,j=>{E=!0,n.next(j)},()=>E?n.complete():n.error(t())))})}function M7(){return new Nv}function rh(t,e){const n=arguments.length>=2;return E=>E.pipe(t?Bl((j,te)=>t(j,te,E)):S,zl(1),n?Bv(e):_T(()=>new Nv))}function Cm(t,e){return xr(e)?Et(t,e,1):Et(t,1)}function Tl(t,e,n){const E=xr(t)||e||n?{next:t,error:e,complete:n}:t;return E?K((j,te)=>{var ve;null===(ve=E.subscribe)||void 0===ve||ve.call(E);let Be=!0;j.subscribe(ue(te,Qe=>{var at;null===(at=E.next)||void 0===at||at.call(E,Qe),te.next(Qe)},()=>{var Qe;Be=!1,null===(Qe=E.complete)||void 0===Qe||Qe.call(E),te.complete()},Qe=>{var at;Be=!1,null===(at=E.error)||void 0===at||at.call(E,Qe),te.error(Qe)},()=>{var Qe,at;Be&&(null===(Qe=E.unsubscribe)||void 0===Qe||Qe.call(E)),null===(at=E.finalize)||void 0===at||at.call(E)}))}):S}function ih(t){return K((e,n)=>{let te,E=null,j=!1;E=e.subscribe(ue(n,void 0,void 0,ve=>{te=Je(t(ve,ih(t)(e))),E?(E.unsubscribe(),E=null,te.subscribe(n)):j=!0})),j&&(E.unsubscribe(),E=null,te.subscribe(n))})}function hb(t){return t<=0?()=>Nt:K((e,n)=>{let E=[];e.subscribe(ue(n,j=>{E.push(j),t<E.length&&E.shift()},()=>{for(const j of E)n.next(j);n.complete()},void 0,()=>{E=null}))})}function wT(t){return ne(()=>t)}function pb(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const qi="primary",Dm=Symbol("RouteTitle");class E7{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Wp(t){return new E7(t)}function C7(t,e,n){const E=n.path.split("/");if(E.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||E.length<t.length))return null;const j={};for(let te=0;te<E.length;te++){const ve=E[te],Be=t[te];if(ve.startsWith(":"))j[ve.substring(1)]=Be;else if(ve!==Be.path)return null}return{consumed:t.slice(0,E.length),posParams:j}}function Vc(t,e){const n=t?Object.keys(t):void 0,E=e?Object.keys(e):void 0;if(!n||!E||n.length!=E.length)return!1;let j;for(let te=0;te<n.length;te++)if(j=n[te],!TT(t[j],e[j]))return!1;return!0}function TT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),E=[...e].sort();return n.every((j,te)=>E[te]===j)}return t===e}function MT(t){return t.length>0?t[t.length-1]:null}function pd(t){return function d7(t){return!!t&&(t instanceof R||xr(t.lift)&&xr(t.subscribe))}(t)?t:sv(t)?bn(Promise.resolve(t)):_n(t)}const I7={exact:function ST(t,e,n){if(!oh(t.segments,e.segments)||!jv(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const E in e.children)if(!t.children[E]||!ST(t.children[E],e.children[E],n))return!1;return!0},subset:ET},AT={exact:function L7(t,e){return Vc(t,e)},subset:function O7(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>TT(t[n],e[n]))},ignored:()=>!0};function kT(t,e,n){return I7[n.paths](t.root,e.root,n.matrixParams)&&AT[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ET(t,e,n){return CT(t,e,e.segments,n)}function CT(t,e,n,E){if(t.segments.length>n.length){const j=t.segments.slice(0,n.length);return!(!oh(j,n)||e.hasChildren()||!jv(j,n,E))}if(t.segments.length===n.length){if(!oh(t.segments,n)||!jv(t.segments,n,E))return!1;for(const j in e.children)if(!t.children[j]||!ET(t.children[j],e.children[j],E))return!1;return!0}{const j=n.slice(0,t.segments.length),te=n.slice(t.segments.length);return!!(oh(t.segments,j)&&jv(t.segments,j,E)&&t.children[qi])&&CT(t.children[qi],e,te,E)}}function jv(t,e,n){return e.every((E,j)=>AT[n](t[j].parameters,E.parameters))}class Zp{constructor(e=new $o([],{}),n={},E=null){this.root=e,this.queryParams=n,this.fragment=E}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wp(this.queryParams)),this._queryParamMap}toString(){return F7.serialize(this)}}class $o{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(E=>E.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uv(this)}}class Im{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Wp(this.parameters)),this._parameterMap}toString(){return LT(this)}}function oh(t,e){return t.length===e.length&&t.every((n,E)=>n.path===e[E].path)}let Lm=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return new mb},providedIn:"root"}),t})();class mb{parse(e){const n=new Z7(e);return new Zp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Om(e.root,!0)}`,E=function B7(t){const e=Object.keys(t).map(n=>{const E=t[n];return Array.isArray(E)?E.map(j=>`${Vv(n)}=${Vv(j)}`).join("&"):`${Vv(n)}=${Vv(E)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${E}${"string"==typeof e.fragment?`#${function N7(t){return encodeURI(t)}(e.fragment)}`:""}`}}const F7=new mb;function Uv(t){return t.segments.map(e=>LT(e)).join("/")}function Om(t,e){if(!t.hasChildren())return Uv(t);if(e){const n=t.children[qi]?Om(t.children[qi],!1):"",E=[];return Object.entries(t.children).forEach(([j,te])=>{j!==qi&&E.push(`${j}:${Om(te,!1)}`)}),E.length>0?`${n}(${E.join("//")})`:n}{const n=function R7(t,e){let n=[];return Object.entries(t.children).forEach(([E,j])=>{E===qi&&(n=n.concat(e(j,E)))}),Object.entries(t.children).forEach(([E,j])=>{E!==qi&&(n=n.concat(e(j,E)))}),n}(t,(E,j)=>j===qi?[Om(t.children[qi],!1)]:[`${j}:${Om(E,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[qi]?`${Uv(t)}/${n[0]}`:`${Uv(t)}/(${n.join("//")})`}}function DT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vv(t){return DT(t).replace(/%3B/gi,";")}function gb(t){return DT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hv(t){return decodeURIComponent(t)}function IT(t){return Hv(t.replace(/\+/g,"%20"))}function LT(t){return`${gb(t.path)}${function z7(t){return Object.keys(t).map(e=>`;${gb(e)}=${gb(t[e])}`).join("")}(t.parameters)}`}const j7=/^[^\/()?;#]+/;function vb(t){const e=t.match(j7);return e?e[0]:""}const U7=/^[^\/()?;=#]+/,H7=/^[^=?&#]+/,G7=/^[^&#]+/;class Z7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $o([],{}):new $o([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let E={};return this.peekStartsWith("(")&&(E=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(E[qi]=new $o(e,n)),E}parseSegment(){const e=vb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new xn(4009,!1);return this.capture(e),new Im(Hv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function V7(t){const e=t.match(U7);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let E="";if(this.consumeOptional("=")){const j=vb(this.remaining);j&&(E=j,this.capture(E))}e[Hv(n)]=Hv(E)}parseQueryParam(e){const n=function q7(t){const e=t.match(H7);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let E="";if(this.consumeOptional("=")){const ve=function W7(t){const e=t.match(G7);return e?e[0]:""}(this.remaining);ve&&(E=ve,this.capture(E))}const j=IT(n),te=IT(E);if(e.hasOwnProperty(j)){let ve=e[j];Array.isArray(ve)||(ve=[ve],e[j]=ve),ve.push(te)}else e[j]=te}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const E=vb(this.remaining),j=this.remaining[E.length];if("/"!==j&&")"!==j&&";"!==j)throw new xn(4010,!1);let te;E.indexOf(":")>-1?(te=E.slice(0,E.indexOf(":")),this.capture(te),this.capture(":")):e&&(te=qi);const ve=this.parseChildren();n[te]=1===Object.keys(ve).length?ve[qi]:new $o([],ve),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new xn(4011,!1)}}function OT(t){return t.segments.length>0?new $o([],{[qi]:t}):t}function PT(t){const e={};for(const E of Object.keys(t.children)){const te=PT(t.children[E]);if(E===qi&&0===te.segments.length&&te.hasChildren())for(const[ve,Be]of Object.entries(te.children))e[ve]=Be;else(te.segments.length>0||te.hasChildren())&&(e[E]=te)}return function Y7(t){if(1===t.numberOfChildren&&t.children[qi]){const e=t.children[qi];return new $o(t.segments.concat(e.segments),e.children)}return t}(new $o(t.segments,e))}function ah(t){return t instanceof Zp}function RT(t){let e;const j=OT(function n(te){const ve={};for(const Qe of te.children){const at=n(Qe);ve[Qe.outlet]=at}const Be=new $o(te.url,ve);return te===t&&(e=Be),Be}(t.root));return e??j}function FT(t,e,n,E){let j=t;for(;j.parent;)j=j.parent;if(0===e.length)return yb(j,j,j,n,E);const te=function X7(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zT(!0,0,t);let e=0,n=!1;const E=t.reduce((j,te,ve)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Be={};return Object.entries(te.outlets).forEach(([Qe,at])=>{Be[Qe]="string"==typeof at?at.split("/"):at}),[...j,{outlets:Be}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===ve?(te.split("/").forEach((Be,Qe)=>{0==Qe&&"."===Be||(0==Qe&&""===Be?n=!0:".."===Be?e++:""!=Be&&j.push(Be))}),j):[...j,te]},[]);return new zT(n,e,E)}(e);if(te.toRoot())return yb(j,j,new $o([],{}),n,E);const ve=function K7(t,e,n){if(t.isAbsolute)return new Gv(e,!0,0);if(!n)return new Gv(e,!1,NaN);if(null===n.parent)return new Gv(n,!0,0);const E=qv(t.commands[0])?0:1;return function J7(t,e,n){let E=t,j=e,te=n;for(;te>j;){if(te-=j,E=E.parent,!E)throw new xn(4005,!1);j=E.segments.length}return new Gv(E,!1,j-te)}(n,n.segments.length-1+E,t.numberOfDoubleDots)}(te,j,t),Be=ve.processChildren?Rm(ve.segmentGroup,ve.index,te.commands):BT(ve.segmentGroup,ve.index,te.commands);return yb(j,ve.segmentGroup,Be,n,E)}function qv(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pm(t){return"object"==typeof t&&null!=t&&t.outlets}function yb(t,e,n,E,j){let ve,te={};E&&Object.entries(E).forEach(([Qe,at])=>{te[Qe]=Array.isArray(at)?at.map(Tt=>`${Tt}`):`${at}`}),ve=t===e?n:NT(t,e,n);const Be=OT(PT(ve));return new Zp(Be,te,j)}function NT(t,e,n){const E={};return Object.entries(t.children).forEach(([j,te])=>{E[j]=te===e?n:NT(te,e,n)}),new $o(t.segments,E)}class zT{constructor(e,n,E){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=E,e&&E.length>0&&qv(E[0]))throw new xn(4003,!1);const j=E.find(Pm);if(j&&j!==MT(E))throw new xn(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gv{constructor(e,n,E){this.segmentGroup=e,this.processChildren=n,this.index=E}}function BT(t,e,n){if(t||(t=new $o([],{})),0===t.segments.length&&t.hasChildren())return Rm(t,e,n);const E=function e9(t,e,n){let E=0,j=e;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<t.segments.length;){if(E>=n.length)return te;const ve=t.segments[j],Be=n[E];if(Pm(Be))break;const Qe=`${Be}`,at=E<n.length-1?n[E+1]:null;if(j>0&&void 0===Qe)break;if(Qe&&at&&"object"==typeof at&&void 0===at.outlets){if(!UT(Qe,at,ve))return te;E+=2}else{if(!UT(Qe,{},ve))return te;E++}j++}return{match:!0,pathIndex:j,commandIndex:E}}(t,e,n),j=n.slice(E.commandIndex);if(E.match&&E.pathIndex<t.segments.length){const te=new $o(t.segments.slice(0,E.pathIndex),{});return te.children[qi]=new $o(t.segments.slice(E.pathIndex),t.children),Rm(te,0,j)}return E.match&&0===j.length?new $o(t.segments,{}):E.match&&!t.hasChildren()?xb(t,e,n):E.match?Rm(t,0,j):xb(t,e,n)}function Rm(t,e,n){if(0===n.length)return new $o(t.segments,{});{const E=function Q7(t){return Pm(t[0])?t[0].outlets:{[qi]:t}}(n),j={};if(!E[qi]&&t.children[qi]&&1===t.numberOfChildren&&0===t.children[qi].segments.length){const te=Rm(t.children[qi],e,n);return new $o(t.segments,te.children)}return Object.entries(E).forEach(([te,ve])=>{"string"==typeof ve&&(ve=[ve]),null!==ve&&(j[te]=BT(t.children[te],e,ve))}),Object.entries(t.children).forEach(([te,ve])=>{void 0===E[te]&&(j[te]=ve)}),new $o(t.segments,j)}}function xb(t,e,n){const E=t.segments.slice(0,e);let j=0;for(;j<n.length;){const te=n[j];if(Pm(te)){const Qe=t9(te.outlets);return new $o(E,Qe)}if(0===j&&qv(n[0])){E.push(new Im(t.segments[e].path,jT(n[0]))),j++;continue}const ve=Pm(te)?te.outlets[qi]:`${te}`,Be=j<n.length-1?n[j+1]:null;ve&&Be&&qv(Be)?(E.push(new Im(ve,jT(Be))),j+=2):(E.push(new Im(ve,{})),j++)}return new $o(E,{})}function t9(t){const e={};return Object.entries(t).forEach(([n,E])=>{"string"==typeof E&&(E=[E]),null!==E&&(e[n]=xb(new $o([],{}),0,E))}),e}function jT(t){const e={};return Object.entries(t).forEach(([n,E])=>e[n]=`${E}`),e}function UT(t,e,n){return t==n.path&&Vc(e,n.parameters)}const Fm="imperative";class Hc{constructor(e,n){this.id=e,this.url=n}}class bb extends Hc{constructor(e,n,E="imperative",j=null){super(e,n),this.type=0,this.navigationTrigger=E,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sh extends Hc{constructor(e,n,E){super(e,n),this.urlAfterRedirects=E,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wv extends Hc{constructor(e,n,E,j){super(e,n),this.reason=E,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nm extends Hc{constructor(e,n,E,j){super(e,n),this.reason=E,this.code=j,this.type=16}}class _b extends Hc{constructor(e,n,E,j){super(e,n),this.error=E,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class n9 extends Hc{constructor(e,n,E,j){super(e,n),this.urlAfterRedirects=E,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r9 extends Hc{constructor(e,n,E,j){super(e,n),this.urlAfterRedirects=E,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i9 extends Hc{constructor(e,n,E,j,te){super(e,n),this.urlAfterRedirects=E,this.state=j,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class o9 extends Hc{constructor(e,n,E,j){super(e,n),this.urlAfterRedirects=E,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class a9 extends Hc{constructor(e,n,E,j){super(e,n),this.urlAfterRedirects=E,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s9{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class l9{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class u9{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c9{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f9{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class d9{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VT{constructor(e,n,E){this.routerEvent=e,this.position=n,this.anchor=E,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class h9{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zm,this.attachRef=null}}let zm=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,E){const j=this.getOrCreateContext(n);j.outlet=E,this.contexts.set(n,j)}onChildOutletDestroyed(n){const E=this.getContext(n);E&&(E.outlet=null,E.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let E=this.getContext(n);return E||(E=new h9,this.contexts.set(n,E)),E}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class HT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=wb(e,this._root);return n?n.children.map(E=>E.value):[]}firstChild(e){const n=wb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Tb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(j=>j.value).filter(j=>j!==e)}pathFromRoot(e){return Tb(e,this._root).map(n=>n.value)}}function wb(t,e){if(t===e.value)return e;for(const n of e.children){const E=wb(t,n);if(E)return E}return null}function Tb(t,e){if(t===e.value)return[e];for(const n of e.children){const E=Tb(t,n);if(E.length)return E.unshift(e),E}return[]}class yf{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Yp(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class qT extends HT{constructor(e,n){super(e),this.snapshot=n,Mb(this,e)}toString(){return this.snapshot.toString()}}function GT(t,e){const n=function p9(t,e){const ve=new Zv([],{},{},"",{},qi,e,null,{});return new ZT("",new yf(ve,[]))}(0,e),E=new H([new Im("",{})]),j=new H({}),te=new H({}),ve=new H({}),Be=new H(""),Qe=new $p(E,j,ve,Be,te,qi,e,n.root);return Qe.snapshot=n.root,new qT(new yf(Qe,[]),n)}class $p{constructor(e,n,E,j,te,ve,Be,Qe){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=E,this.fragmentSubject=j,this.dataSubject=te,this.outlet=ve,this.component=Be,this._futureSnapshot=Qe,this.title=this.dataSubject?.pipe(ne(at=>at[Dm]))??_n(void 0),this.url=e,this.params=n,this.queryParams=E,this.fragment=j,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ne(e=>Wp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ne(e=>Wp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WT(t,e="emptyOnly"){const n=t.pathFromRoot;let E=0;if("always"!==e)for(E=n.length-1;E>=1;){const j=n[E],te=n[E-1];if(j.routeConfig&&""===j.routeConfig.path)E--;else{if(te.component)break;E--}}return function m9(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(E))}class Zv{get title(){return this.data?.[Dm]}constructor(e,n,E,j,te,ve,Be,Qe,at){this.url=e,this.params=n,this.queryParams=E,this.fragment=j,this.data=te,this.outlet=ve,this.component=Be,this.routeConfig=Qe,this._resolve=at}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(E=>E.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ZT extends HT{constructor(e,n){super(n),this.url=e,Mb(this,n)}toString(){return YT(this._root)}}function Mb(t,e){e.value._routerState=t,e.children.forEach(n=>Mb(t,n))}function YT(t){const e=t.children.length>0?` { ${t.children.map(YT).join(", ")} } `:"";return`${t.value}${e}`}function Ab(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Vc(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Vc(e.params,n.params)||t.paramsSubject.next(n.params),function D7(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Vc(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Vc(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function kb(t,e){const n=Vc(t.params,e.params)&&function P7(t,e){return oh(t,e)&&t.every((n,E)=>Vc(n.parameters,e[E].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||kb(t.parent,e.parent))}let $T=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=qi,this.activateEvents=new wi,this.deactivateEvents=new wi,this.attachEvents=new wi,this.detachEvents=new wi,this.parentContexts=Vr(zm),this.location=Vr(dc),this.changeDetector=Vr(Mx),this.environmentInjector=Vr(ru),this.inputBinder=Vr(Yv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:E,previousValue:j}=n.name;if(E)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xn(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xn(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xn(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,E){this.activated=n,this._activatedRoute=E,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,E){if(this.isActivated)throw new xn(4013,!1);this._activatedRoute=n;const j=this.location,ve=n.snapshot.component,Be=this.parentContexts.getOrCreateContext(this.name).children,Qe=new g9(n,Be,j.injector);this.activated=j.createComponent(ve,{index:j.length,injector:Qe,environmentInjector:E??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=bi({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[jt]}),t})();class g9{constructor(e,n,E){this.route=e,this.childContexts=n,this.parent=E}get(e,n){return e===$p?this.route:e===zm?this.childContexts:this.parent.get(e,n)}}const Yv=new Jr("");let XT=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:E}=n,j=Fv([E.queryParams,E.params,E.data]).pipe(Nn(([te,ve,Be],Qe)=>(Be={...te,...ve,...Be},0===Qe?_n(Be):Promise.resolve(Be)))).subscribe(te=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==E||null===E.component)return void this.unsubscribeFromRouteData(n);const ve=function VE(t){const e=Li(t);if(!e)return null;const n=new am(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(E.component);if(ve)for(const{templateName:Be}of ve.inputs)n.activatedComponentRef.setInput(Be,te[Be]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,j)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();function Bm(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const E=n.value;E._futureSnapshot=e.value;const j=function y9(t,e,n){return e.children.map(E=>{for(const j of n.children)if(t.shouldReuseRoute(E.value,j.value.snapshot))return Bm(t,E,j);return Bm(t,E)})}(t,e,n);return new yf(E,j)}{if(t.shouldAttach(e.value)){const te=t.retrieve(e.value);if(null!==te){const ve=te.route;return ve.value._futureSnapshot=e.value,ve.children=e.children.map(Be=>Bm(t,Be)),ve}}const E=function x9(t){return new $p(new H(t.url),new H(t.params),new H(t.queryParams),new H(t.fragment),new H(t.data),t.outlet,t.component,t)}(e.value),j=e.children.map(te=>Bm(t,te));return new yf(E,j)}}const Sb="ngNavigationCancelingError";function KT(t,e){const{redirectTo:n,navigationBehaviorOptions:E}=ah(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,j=JT(!1,0,e);return j.url=n,j.navigationBehaviorOptions=E,j}function JT(t,e,n){const E=new Error("NavigationCancelingError: "+(t||""));return E[Sb]=!0,E.cancellationCode=e,n&&(E.url=n),E}function QT(t){return eM(t)&&ah(t.url)}function eM(t){return t&&t[Sb]}let tM=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=As({type:t,selectors:[["ng-component"]],standalone:!0,features:[e3],decls:1,vars:0,template:function(n,E){1&n&&ud(0,"router-outlet")},dependencies:[$T],encapsulation:2}),t})();function Eb(t){const e=t.children&&t.children.map(Eb),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==qi&&(n.component=tM),n}function gc(t){return t.outlet||qi}function jm(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class k9{constructor(e,n,E,j,te){this.routeReuseStrategy=e,this.futureState=n,this.currState=E,this.forwardEvent=j,this.inputBindingEnabled=te}activate(e){const n=this.futureState._root,E=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,E,e),Ab(this.futureState.root),this.activateChildRoutes(n,E,e)}deactivateChildRoutes(e,n,E){const j=Yp(n);e.children.forEach(te=>{const ve=te.value.outlet;this.deactivateRoutes(te,j[ve],E),delete j[ve]}),Object.values(j).forEach(te=>{this.deactivateRouteAndItsChildren(te,E)})}deactivateRoutes(e,n,E){const j=e.value,te=n?n.value:null;if(j===te)if(j.component){const ve=E.getContext(j.outlet);ve&&this.deactivateChildRoutes(e,n,ve.children)}else this.deactivateChildRoutes(e,n,E);else te&&this.deactivateRouteAndItsChildren(n,E)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const E=n.getContext(e.value.outlet),j=E&&e.value.component?E.children:n,te=Yp(e);for(const ve of Object.keys(te))this.deactivateRouteAndItsChildren(te[ve],j);if(E&&E.outlet){const ve=E.outlet.detach(),Be=E.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:ve,route:e,contexts:Be})}}deactivateRouteAndOutlet(e,n){const E=n.getContext(e.value.outlet),j=E&&e.value.component?E.children:n,te=Yp(e);for(const ve of Object.keys(te))this.deactivateRouteAndItsChildren(te[ve],j);E&&(E.outlet&&(E.outlet.deactivate(),E.children.onOutletDeactivated()),E.attachRef=null,E.route=null)}activateChildRoutes(e,n,E){const j=Yp(n);e.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],E),this.forwardEvent(new d9(te.value.snapshot))}),e.children.length&&this.forwardEvent(new c9(e.value.snapshot))}activateRoutes(e,n,E){const j=e.value,te=n?n.value:null;if(Ab(j),j===te)if(j.component){const ve=E.getOrCreateContext(j.outlet);this.activateChildRoutes(e,n,ve.children)}else this.activateChildRoutes(e,n,E);else if(j.component){const ve=E.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const Be=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),ve.children.onOutletReAttached(Be.contexts),ve.attachRef=Be.componentRef,ve.route=Be.route.value,ve.outlet&&ve.outlet.attach(Be.componentRef,Be.route.value),Ab(Be.route.value),this.activateChildRoutes(e,null,ve.children)}else{const Be=jm(j.snapshot);ve.attachRef=null,ve.route=j,ve.injector=Be,ve.outlet&&ve.outlet.activateWith(j,ve.injector),this.activateChildRoutes(e,null,ve.children)}}else this.activateChildRoutes(e,null,E)}}class nM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $v{constructor(e,n){this.component=e,this.route=n}}function S9(t,e,n){const E=t._root;return Um(E,e?e._root:null,n,[E.value])}function Xp(t,e){const n=Symbol(),E=e.get(t,n);return E===n?"function"!=typeof t||function ii(t){return null!==Nr(t)}(t)?e.get(t):t:E}function Um(t,e,n,E,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=Yp(e);return t.children.forEach(ve=>{(function C9(t,e,n,E,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=t.value,ve=e?e.value:null,Be=n?n.getContext(t.value.outlet):null;if(ve&&te.routeConfig===ve.routeConfig){const Qe=function D9(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!oh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oh(t.url,e.url)||!Vc(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kb(t,e)||!Vc(t.queryParams,e.queryParams);default:return!kb(t,e)}}(ve,te,te.routeConfig.runGuardsAndResolvers);Qe?j.canActivateChecks.push(new nM(E)):(te.data=ve.data,te._resolvedData=ve._resolvedData),Um(t,e,te.component?Be?Be.children:null:n,E,j),Qe&&Be&&Be.outlet&&Be.outlet.isActivated&&j.canDeactivateChecks.push(new $v(Be.outlet.component,ve))}else ve&&Vm(e,Be,j),j.canActivateChecks.push(new nM(E)),Um(t,null,te.component?Be?Be.children:null:n,E,j)})(ve,te[ve.value.outlet],n,E.concat([ve.value]),j),delete te[ve.value.outlet]}),Object.entries(te).forEach(([ve,Be])=>Vm(Be,n.getContext(ve),j)),j}function Vm(t,e,n){const E=Yp(t),j=t.value;Object.entries(E).forEach(([te,ve])=>{Vm(ve,j.component?e?e.children.getContext(te):null:e,n)}),n.canDeactivateChecks.push(new $v(j.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,j))}function Hm(t){return"function"==typeof t}function rM(t){return t instanceof Nv||"EmptyError"===t?.name}const Xv=Symbol("INITIAL_VALUE");function Kp(){return Nn(t=>Fv(t.map(e=>e.pipe(zl(1),bT(Xv)))).pipe(ne(e=>{for(const n of e)if(!0!==n){if(n===Xv)return Xv;if(!1===n||n instanceof Zp)return n}return!0}),Bl(e=>e!==Xv),zl(1)))}function iM(t){return function O(...t){return P(t)}(Tl(e=>{if(ah(e))throw KT(0,e)}),ne(e=>!0===e))}class Kv{constructor(e){this.segmentGroup=e||null}}class oM{constructor(e){this.urlTree=e}}function Jp(t){return Gp(new Kv(t))}function aM(t){return Gp(new oM(t))}class X9{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new xn(4002,!1)}lineralizeSegments(e,n){let E=[],j=n.root;for(;;){if(E=E.concat(j.segments),0===j.numberOfChildren)return _n(E);if(j.numberOfChildren>1||!j.children[qi])return Gp(new xn(4e3,!1));j=j.children[qi]}}applyRedirectCommands(e,n,E){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,E)}applyRedirectCreateUrlTree(e,n,E,j){const te=this.createSegmentGroup(e,n.root,E,j);return new Zp(te,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const E={};return Object.entries(e).forEach(([j,te])=>{if("string"==typeof te&&te.startsWith(":")){const Be=te.substring(1);E[j]=n[Be]}else E[j]=te}),E}createSegmentGroup(e,n,E,j){const te=this.createSegments(e,n.segments,E,j);let ve={};return Object.entries(n.children).forEach(([Be,Qe])=>{ve[Be]=this.createSegmentGroup(e,Qe,E,j)}),new $o(te,ve)}createSegments(e,n,E,j){return n.map(te=>te.path.startsWith(":")?this.findPosParam(e,te,j):this.findOrReturn(te,E))}findPosParam(e,n,E){const j=E[n.path.substring(1)];if(!j)throw new xn(4001,!1);return j}findOrReturn(e,n){let E=0;for(const j of n){if(j.path===e.path)return n.splice(E),j;E++}return e}}const Cb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function K9(t,e,n,E,j){const te=Db(t,e,n);return te.matched?(E=function b9(t,e){return t.providers&&!t._injector&&(t._injector=K1(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,E),function Z9(t,e,n,E){const j=e.canMatch;return j&&0!==j.length?_n(j.map(ve=>{const Be=Xp(ve,t);return pd(function F9(t){return t&&Hm(t.canMatch)}(Be)?Be.canMatch(e,n):t.runInContext(()=>Be(e,n)))})).pipe(Kp(),iM()):_n(!0)}(E,e,n).pipe(ne(ve=>!0===ve?te:{...Cb}))):_n(te)}function Db(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Cb}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const j=(e.matcher||C7)(n,t,e);if(!j)return{...Cb};const te={};Object.entries(j.posParams??{}).forEach(([Be,Qe])=>{te[Be]=Qe.path});const ve=j.consumed.length>0?{...te,...j.consumed[j.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:j.consumed,remainingSegments:n.slice(j.consumed.length),parameters:ve,positionalParamSegments:j.posParams??{}}}function sM(t,e,n,E){return n.length>0&&function eI(t,e,n){return n.some(E=>Jv(t,e,E)&&gc(E)!==qi)}(t,n,E)?{segmentGroup:new $o(e,Q9(E,new $o(n,t.children))),slicedSegments:[]}:0===n.length&&function tI(t,e,n){return n.some(E=>Jv(t,e,E))}(t,n,E)?{segmentGroup:new $o(t.segments,J9(t,0,n,E,t.children)),slicedSegments:n}:{segmentGroup:new $o(t.segments,t.children),slicedSegments:n}}function J9(t,e,n,E,j){const te={};for(const ve of E)if(Jv(t,n,ve)&&!j[gc(ve)]){const Be=new $o([],{});te[gc(ve)]=Be}return{...j,...te}}function Q9(t,e){const n={};n[qi]=e;for(const E of t)if(""===E.path&&gc(E)!==qi){const j=new $o([],{});n[gc(E)]=j}return n}function Jv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class oI{constructor(e,n,E,j,te,ve,Be){this.injector=e,this.configLoader=n,this.rootComponentType=E,this.config=j,this.urlTree=te,this.paramsInheritanceStrategy=ve,this.urlSerializer=Be,this.allowRedirects=!0,this.applyRedirects=new X9(this.urlSerializer,this.urlTree)}noMatchError(e){return new xn(4002,!1)}recognize(){const e=sM(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,qi).pipe(ih(n=>{if(n instanceof oM)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Kv?this.noMatchError(n):n}),ne(n=>{const E=new Zv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},qi,this.rootComponentType,null,{}),j=new yf(E,n),te=new ZT("",j),ve=function $7(t,e,n=null,E=null){return FT(RT(t),e,n,E)}(E,[],this.urlTree.queryParams,this.urlTree.fragment);return ve.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(ve),this.inheritParamsAndData(te._root),{state:te,tree:ve}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,qi).pipe(ih(E=>{throw E instanceof Kv?this.noMatchError(E):E}))}inheritParamsAndData(e){const n=e.value,E=WT(n,this.paramsInheritanceStrategy);n.params=Object.freeze(E.params),n.data=Object.freeze(E.data),e.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(e,n,E,j){return 0===E.segments.length&&E.hasChildren()?this.processChildren(e,n,E):this.processSegment(e,n,E,E.segments,j,!0)}processChildren(e,n,E){const j=[];for(const te of Object.keys(E.children))"primary"===te?j.unshift(te):j.push(te);return bn(j).pipe(Cm(te=>{const ve=E.children[te],Be=function M9(t,e){const n=t.filter(E=>gc(E)===e);return n.push(...t.filter(E=>gc(E)!==e)),n}(n,te);return this.processSegmentGroup(e,Be,ve,te)}),function k7(t,e){return K(function A7(t,e,n,E,j){return(te,ve)=>{let Be=n,Qe=e,at=0;te.subscribe(ue(ve,Tt=>{const Bt=at++;Qe=Be?t(Qe,Tt,Bt):(Be=!0,Tt),E&&ve.next(Qe)},j&&(()=>{Be&&ve.next(Qe),ve.complete()})))}}(t,e,arguments.length>=2,!0))}((te,ve)=>(te.push(...ve),te)),Bv(null),function S7(t,e){const n=arguments.length>=2;return E=>E.pipe(t?Bl((j,te)=>t(j,te,E)):S,hb(1),n?Bv(e):_T(()=>new Nv))}(),Et(te=>{if(null===te)return Jp(E);const ve=lM(te);return function aI(t){t.sort((e,n)=>e.value.outlet===qi?-1:n.value.outlet===qi?1:e.value.outlet.localeCompare(n.value.outlet))}(ve),_n(ve)}))}processSegment(e,n,E,j,te,ve){return bn(n).pipe(Cm(Be=>this.processSegmentAgainstRoute(Be._injector??e,n,Be,E,j,te,ve).pipe(ih(Qe=>{if(Qe instanceof Kv)return _n(null);throw Qe}))),rh(Be=>!!Be),ih(Be=>{if(rM(Be))return function rI(t,e,n){return 0===e.length&&!t.children[n]}(E,j,te)?_n([]):Jp(E);throw Be}))}processSegmentAgainstRoute(e,n,E,j,te,ve,Be){return function nI(t,e,n,E){return!!(gc(t)===E||E!==qi&&Jv(e,n,t))&&("**"===t.path||Db(e,t,n).matched)}(E,j,te,ve)?void 0===E.redirectTo?this.matchSegmentAgainstRoute(e,j,E,te,ve,Be):Be&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,j,n,E,te,ve):Jp(j):Jp(j)}expandSegmentAgainstRouteUsingRedirect(e,n,E,j,te,ve){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,E,j,ve):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,E,j,te,ve)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,E,j){const te=this.applyRedirects.applyRedirectCommands([],E.redirectTo,{});return E.redirectTo.startsWith("/")?aM(te):this.applyRedirects.lineralizeSegments(E,te).pipe(Et(ve=>{const Be=new $o(ve,{});return this.processSegment(e,n,Be,ve,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,E,j,te,ve){const{matched:Be,consumedSegments:Qe,remainingSegments:at,positionalParamSegments:Tt}=Db(n,j,te);if(!Be)return Jp(n);const Bt=this.applyRedirects.applyRedirectCommands(Qe,j.redirectTo,Tt);return j.redirectTo.startsWith("/")?aM(Bt):this.applyRedirects.lineralizeSegments(j,Bt).pipe(Et(vn=>this.processSegment(e,E,n,vn.concat(at),ve,!1)))}matchSegmentAgainstRoute(e,n,E,j,te,ve){let Be;if("**"===E.path){const Qe=j.length>0?MT(j).parameters:{};Be=_n({snapshot:new Zv(j,Qe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uM(E),gc(E),E.component??E._loadedComponent??null,E,cM(E)),consumedSegments:[],remainingSegments:[]}),n.children={}}else Be=K9(n,E,j,e).pipe(ne(({matched:Qe,consumedSegments:at,remainingSegments:Tt,parameters:Bt})=>Qe?{snapshot:new Zv(at,Bt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uM(E),gc(E),E.component??E._loadedComponent??null,E,cM(E)),consumedSegments:at,remainingSegments:Tt}:null));return Be.pipe(Nn(Qe=>null===Qe?Jp(n):this.getChildConfig(e=E._injector??e,E,j).pipe(Nn(({routes:at})=>{const Tt=E._loadedInjector??e,{snapshot:Bt,consumedSegments:vn,remainingSegments:kn}=Qe,{segmentGroup:Un,slicedSegments:$n}=sM(n,vn,kn,at);if(0===$n.length&&Un.hasChildren())return this.processChildren(Tt,at,Un).pipe(ne(Ir=>null===Ir?null:[new yf(Bt,Ir)]));if(0===at.length&&0===$n.length)return _n([new yf(Bt,[])]);const Mr=gc(E)===te;return this.processSegment(Tt,at,Un,$n,Mr?qi:te,!0).pipe(ne(Ir=>[new yf(Bt,Ir)]))}))))}getChildConfig(e,n,E){return n.children?_n({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?_n({routes:n._loadedRoutes,injector:n._loadedInjector}):function W9(t,e,n,E){const j=e.canLoad;return void 0===j||0===j.length?_n(!0):_n(j.map(ve=>{const Be=Xp(ve,t);return pd(function L9(t){return t&&Hm(t.canLoad)}(Be)?Be.canLoad(e,n):t.runInContext(()=>Be(e,n)))})).pipe(Kp(),iM())}(e,n,E).pipe(Et(j=>j?this.configLoader.loadChildren(e,n).pipe(Tl(te=>{n._loadedRoutes=te.routes,n._loadedInjector=te.injector})):function $9(t){return Gp(JT(!1,3))}())):_n({routes:[],injector:e})}}function sI(t){const e=t.value.routeConfig;return e&&""===e.path}function lM(t){const e=[],n=new Set;for(const E of t){if(!sI(E)){e.push(E);continue}const j=e.find(te=>E.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...E.children),n.add(j)):e.push(E)}for(const E of n){const j=lM(E.children);e.push(new yf(E.value,j))}return e.filter(E=>!n.has(E))}function uM(t){return t.data||{}}function cM(t){return t.resolve||{}}function fM(t){return"string"==typeof t.title||null===t.title}function Ib(t){return Nn(e=>{const n=t(e);return n?bn(n).pipe(ne(()=>e)):_n(e)})}const Qp=new Jr("ROUTES");let Lb=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Vr(Z3)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return _n(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const E=pd(n.loadComponent()).pipe(ne(dM),Tl(te=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=te}),pb(()=>{this.componentLoaders.delete(n)})),j=new db(E,()=>new $).pipe(fb());return this.componentLoaders.set(n,j),j}loadChildren(n,E){if(this.childrenLoaders.get(E))return this.childrenLoaders.get(E);if(E._loadedRoutes)return _n({routes:E._loadedRoutes,injector:E._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(E);const te=this.loadModuleFactoryOrRoutes(E.loadChildren).pipe(ne(Be=>{this.onLoadEndListener&&this.onLoadEndListener(E);let Qe,at;return Array.isArray(Be)?at=Be:(Qe=Be.create(n).injector,at=Qe.get(Qp,[],Qr.Self|Qr.Optional).flat()),{routes:at.map(Eb),injector:Qe}}),pb(()=>{this.childrenLoaders.delete(E)})),ve=new db(te,()=>new $).pipe(fb());return this.childrenLoaders.set(E,ve),ve}loadModuleFactoryOrRoutes(n){return pd(n()).pipe(ne(dM),Et(E=>E instanceof Jw||Array.isArray(E)?_n(E):bn(this.compiler.compileModuleAsync(E))))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function dM(t){return function pI(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Qv=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new $,this.configLoader=Vr(Lb),this.environmentInjector=Vr(ru),this.urlSerializer=Vr(Lm),this.rootContexts=Vr(zm),this.inputBindingEnabled=null!==Vr(Yv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>_n(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new l9(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new s9(j))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const E=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:E})}setupNavigations(n){return this.transitions=new H({id:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fm,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Bl(E=>0!==E.id),ne(E=>({...E,extractedUrl:n.urlHandlingStrategy.extract(E.rawUrl)})),Nn(E=>{let j=!1,te=!1;return _n(E).pipe(Tl(ve=>{this.currentNavigation={id:ve.id,initialUrl:ve.rawUrl,extractedUrl:ve.extractedUrl,trigger:ve.source,extras:ve.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Nn(ve=>{const Be=n.browserUrlTree.toString(),Qe=!n.navigated||ve.extractedUrl.toString()!==Be||Be!==n.currentUrlTree.toString();if(!Qe&&"reload"!==(ve.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const Tt="";return this.events.next(new Nm(ve.id,n.serializeUrl(E.rawUrl),Tt,0)),n.rawUrlTree=ve.rawUrl,ve.resolve(null),Nt}if(n.urlHandlingStrategy.shouldProcessUrl(ve.rawUrl))return hM(ve.source)&&(n.browserUrlTree=ve.extractedUrl),_n(ve).pipe(Nn(Tt=>{const Bt=this.transitions?.getValue();return this.events.next(new bb(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),Tt.source,Tt.restoredState)),Bt!==this.transitions?.getValue()?Nt:Promise.resolve(Tt)}),function lI(t,e,n,E,j,te){return Et(ve=>function iI(t,e,n,E,j,te,ve="emptyOnly"){return new oI(t,e,n,E,j,ve,te).recognize()}(t,e,n,E,ve.extractedUrl,j,te).pipe(ne(({state:Be,tree:Qe})=>({...ve,targetSnapshot:Be,urlAfterRedirects:Qe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Tl(Tt=>{if(E.targetSnapshot=Tt.targetSnapshot,E.urlAfterRedirects=Tt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Tt.urlAfterRedirects},"eager"===n.urlUpdateStrategy){if(!Tt.extras.skipLocationChange){const vn=n.urlHandlingStrategy.merge(Tt.urlAfterRedirects,Tt.rawUrl);n.setBrowserUrl(vn,Tt)}n.browserUrlTree=Tt.urlAfterRedirects}const Bt=new n9(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(Bt)}));if(Qe&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:Tt,extractedUrl:Bt,source:vn,restoredState:kn,extras:Un}=ve,$n=new bb(Tt,this.urlSerializer.serialize(Bt),vn,kn);this.events.next($n);const Mr=GT(0,this.rootComponentType).snapshot;return _n(E={...ve,targetSnapshot:Mr,urlAfterRedirects:Bt,extras:{...Un,skipLocationChange:!1,replaceUrl:!1}})}{const Tt="";return this.events.next(new Nm(ve.id,n.serializeUrl(E.extractedUrl),Tt,1)),n.rawUrlTree=ve.rawUrl,ve.resolve(null),Nt}}),Tl(ve=>{const Be=new r9(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot);this.events.next(Be)}),ne(ve=>E={...ve,guards:S9(ve.targetSnapshot,ve.currentSnapshot,this.rootContexts)}),function z9(t,e){return Et(n=>{const{targetSnapshot:E,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:ve}}=n;return 0===ve.length&&0===te.length?_n({...n,guardsResult:!0}):function B9(t,e,n,E){return bn(t).pipe(Et(j=>function G9(t,e,n,E,j){const te=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return te&&0!==te.length?_n(te.map(Be=>{const Qe=jm(e)??j,at=Xp(Be,Qe);return pd(function R9(t){return t&&Hm(t.canDeactivate)}(at)?at.canDeactivate(t,e,n,E):Qe.runInContext(()=>at(t,e,n,E))).pipe(rh())})).pipe(Kp()):_n(!0)}(j.component,j.route,n,e,E)),rh(j=>!0!==j,!0))}(ve,E,j,t).pipe(Et(Be=>Be&&function I9(t){return"boolean"==typeof t}(Be)?function j9(t,e,n,E){return bn(e).pipe(Cm(j=>qp(function V9(t,e){return null!==t&&e&&e(new u9(t)),_n(!0)}(j.route.parent,E),function U9(t,e){return null!==t&&e&&e(new f9(t)),_n(!0)}(j.route,E),function q9(t,e,n){const E=e[e.length-1],te=e.slice(0,e.length-1).reverse().map(ve=>function E9(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(ve)).filter(ve=>null!==ve).map(ve=>zv(()=>_n(ve.guards.map(Qe=>{const at=jm(ve.node)??n,Tt=Xp(Qe,at);return pd(function P9(t){return t&&Hm(t.canActivateChild)}(Tt)?Tt.canActivateChild(E,t):at.runInContext(()=>Tt(E,t))).pipe(rh())})).pipe(Kp())));return _n(te).pipe(Kp())}(t,j.path,n),function H9(t,e,n){const E=e.routeConfig?e.routeConfig.canActivate:null;if(!E||0===E.length)return _n(!0);const j=E.map(te=>zv(()=>{const ve=jm(e)??n,Be=Xp(te,ve);return pd(function O9(t){return t&&Hm(t.canActivate)}(Be)?Be.canActivate(e,t):ve.runInContext(()=>Be(e,t))).pipe(rh())}));return _n(j).pipe(Kp())}(t,j.route,n))),rh(j=>!0!==j,!0))}(E,te,t,e):_n(Be)),ne(Be=>({...n,guardsResult:Be})))})}(this.environmentInjector,ve=>this.events.next(ve)),Tl(ve=>{if(E.guardsResult=ve.guardsResult,ah(ve.guardsResult))throw KT(0,ve.guardsResult);const Be=new i9(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(ve.urlAfterRedirects),ve.targetSnapshot,!!ve.guardsResult);this.events.next(Be)}),Bl(ve=>!!ve.guardsResult||(n.restoreHistory(ve),this.cancelNavigationTransition(ve,"",3),!1)),Ib(ve=>{if(ve.guards.canActivateChecks.length)return _n(ve).pipe(Tl(Be=>{const Qe=new o9(Be.id,this.urlSerializer.serialize(Be.extractedUrl),this.urlSerializer.serialize(Be.urlAfterRedirects),Be.targetSnapshot);this.events.next(Qe)}),Nn(Be=>{let Qe=!1;return _n(Be).pipe(function uI(t,e){return Et(n=>{const{targetSnapshot:E,guards:{canActivateChecks:j}}=n;if(!j.length)return _n(n);let te=0;return bn(j).pipe(Cm(ve=>function cI(t,e,n,E){const j=t.routeConfig,te=t._resolve;return void 0!==j?.title&&!fM(j)&&(te[Dm]=j.title),function fI(t,e,n,E){const j=function dI(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===j.length)return _n({});const te={};return bn(j).pipe(Et(ve=>function hI(t,e,n,E){const j=jm(e)??E,te=Xp(t,j);return pd(te.resolve?te.resolve(e,n):j.runInContext(()=>te(e,n)))}(t[ve],e,n,E).pipe(rh(),Tl(Be=>{te[ve]=Be}))),hb(1),wT(te),ih(ve=>rM(ve)?Nt:Gp(ve)))}(te,t,e,E).pipe(ne(ve=>(t._resolvedData=ve,t.data=WT(t,n).resolve,j&&fM(j)&&(t.data[Dm]=j.title),null)))}(ve.route,E,t,e)),Tl(()=>te++),hb(1),Et(ve=>te===j.length?_n(n):Nt))})}(n.paramsInheritanceStrategy,this.environmentInjector),Tl({next:()=>Qe=!0,complete:()=>{Qe||(n.restoreHistory(Be),this.cancelNavigationTransition(Be,"",2))}}))}),Tl(Be=>{const Qe=new a9(Be.id,this.urlSerializer.serialize(Be.extractedUrl),this.urlSerializer.serialize(Be.urlAfterRedirects),Be.targetSnapshot);this.events.next(Qe)}))}),Ib(ve=>{const Be=Qe=>{const at=[];Qe.routeConfig?.loadComponent&&!Qe.routeConfig._loadedComponent&&at.push(this.configLoader.loadComponent(Qe.routeConfig).pipe(Tl(Tt=>{Qe.component=Tt}),ne(()=>{})));for(const Tt of Qe.children)at.push(...Be(Tt));return at};return Fv(Be(ve.targetSnapshot.root)).pipe(Bv(),zl(1))}),Ib(()=>this.afterPreactivation()),ne(ve=>{const Be=function v9(t,e,n){const E=Bm(t,e._root,n?n._root:void 0);return new qT(E,e)}(n.routeReuseStrategy,ve.targetSnapshot,ve.currentRouterState);return E={...ve,targetRouterState:Be}}),Tl(ve=>{n.currentUrlTree=ve.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(ve.urlAfterRedirects,ve.rawUrl),n.routerState=ve.targetRouterState,"deferred"===n.urlUpdateStrategy&&(ve.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,ve),n.browserUrlTree=ve.urlAfterRedirects)}),((t,e,n,E)=>ne(j=>(new k9(e,j.targetRouterState,j.currentRouterState,n,E).activate(t),j)))(this.rootContexts,n.routeReuseStrategy,ve=>this.events.next(ve),this.inputBindingEnabled),zl(1),Tl({next:ve=>{j=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new sh(ve.id,this.urlSerializer.serialize(ve.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(ve.targetRouterState.snapshot),ve.resolve(!0)},complete:()=>{j=!0}}),pb(()=>{j||te||this.cancelNavigationTransition(E,"",1),this.currentNavigation?.id===E.id&&(this.currentNavigation=null)}),ih(ve=>{if(te=!0,eM(ve)){QT(ve)||(n.navigated=!0,n.restoreHistory(E,!0));const Be=new Wv(E.id,this.urlSerializer.serialize(E.extractedUrl),ve.message,ve.cancellationCode);if(this.events.next(Be),QT(ve)){const Qe=n.urlHandlingStrategy.merge(ve.url,n.rawUrlTree),at={skipLocationChange:E.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||hM(E.source)};n.scheduleNavigation(Qe,Fm,null,at,{resolve:E.resolve,reject:E.reject,promise:E.promise})}else E.resolve(!1)}else{n.restoreHistory(E,!0);const Be=new _b(E.id,this.urlSerializer.serialize(E.extractedUrl),ve,E.targetSnapshot??void 0);this.events.next(Be);try{E.resolve(n.errorHandler(ve))}catch(Qe){E.reject(Qe)}}return Nt}))}))}cancelNavigationTransition(n,E,j){const te=new Wv(n.id,this.urlSerializer.serialize(n.extractedUrl),E,j);this.events.next(te),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hM(t){return t!==Fm}let pM=(()=>{class t{buildTitle(n){let E,j=n.root;for(;void 0!==j;)E=this.getResolvedTitleForRoute(j)??E,j=j.children.find(te=>te.outlet===qi);return E}getResolvedTitleForRoute(n){return n.data[Dm]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return Vr(mI)},providedIn:"root"}),t})(),mI=(()=>{class t extends pM{constructor(n){super(),this.title=n}updateTitle(n){const E=this.buildTitle(n);void 0!==E&&this.title.setTitle(E)}}return t.\u0275fac=function(n){return new(n||t)(Br(ub))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return Vr(yI)},providedIn:"root"}),t})();class vI{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let yI=(()=>{class t extends vI{}return t.\u0275fac=function(){let e;return function(E){return(e||(e=function hg(t){return Da(()=>{const e=t.prototype.constructor,n=e[ha]||b0(e),E=Object.prototype;let j=Object.getPrototypeOf(t.prototype).constructor;for(;j&&j!==E;){const te=j[ha]||b0(j);if(te&&te!==n)return te;j=Object.getPrototypeOf(j)}return te=>new te})}(t)))(E||t)}}(),t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ey=new Jr("",{providedIn:"root",factory:()=>({})});let xI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:function(){return Vr(bI)},providedIn:"root"}),t})(),bI=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,E){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Su=(()=>((Su=Su||{})[Su.COMPLETE=0]="COMPLETE",Su[Su.FAILED=1]="FAILED",Su[Su.REDIRECTING=2]="REDIRECTING",Su))();function mM(t,e){t.events.pipe(Bl(n=>n instanceof sh||n instanceof Wv||n instanceof _b||n instanceof Nm),ne(n=>n instanceof sh||n instanceof Nm?Su.COMPLETE:n instanceof Wv&&(0===n.code||1===n.code)?Su.REDIRECTING:Su.FAILED),Bl(n=>n!==Su.REDIRECTING),zl(1)).subscribe(()=>{e()})}function _I(t){throw t}function wI(t,e,n){return e.parse("/")}const TI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hu=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Vr(G3),this.isNgZoneEnabled=!1,this.options=Vr(ey,{optional:!0})||{},this.pendingTasks=Vr(W3),this.errorHandler=this.options.errorHandler||_I,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||wI,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Vr(xI),this.routeReuseStrategy=Vr(gI),this.titleStrategy=Vr(pM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Vr(Qp,{optional:!0})?.flat()??[],this.navigationTransitions=Vr(Qv),this.urlSerializer=Vr(Lm),this.location=Vr(Rx),this.componentInputBindingEnabled=!!Vr(Yv,{optional:!0}),this.isNgZoneEnabled=Vr(Po)instanceof Po&&Po.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Zp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=GT(0,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId??0},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fm,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const E="popstate"===n.type?"popstate":"hashchange";"popstate"===E&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,E,n.state)},0)}))}navigateToSyncWithBrowser(n,E,j){const te={replaceUrl:!0},ve=j?.navigationId?j:null;if(j){const Qe={...j};delete Qe.navigationId,delete Qe.\u0275routerPageId,0!==Object.keys(Qe).length&&(te.state=Qe)}const Be=this.parseUrl(n);this.scheduleNavigation(Be,E,ve,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Eb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,E={}){const{relativeTo:j,queryParams:te,fragment:ve,queryParamsHandling:Be,preserveFragment:Qe}=E,at=Qe?this.currentUrlTree.fragment:ve;let Bt,Tt=null;switch(Be){case"merge":Tt={...this.currentUrlTree.queryParams,...te};break;case"preserve":Tt=this.currentUrlTree.queryParams;break;default:Tt=te||null}null!==Tt&&(Tt=this.removeEmptyProps(Tt));try{Bt=RT(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),Bt=this.currentUrlTree.root}return FT(Bt,n,Tt,at??null)}navigateByUrl(n,E={skipLocationChange:!1}){const j=ah(n)?n:this.parseUrl(n),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,Fm,null,E)}navigate(n,E={skipLocationChange:!1}){return function AI(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new xn(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,E),E)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let E;try{E=this.urlSerializer.parse(n)}catch(j){E=this.malformedUriErrorHandler(j,this.urlSerializer,n)}return E}isActive(n,E){let j;if(j=!0===E?{...TI}:!1===E?{...MI}:E,ah(n))return kT(this.currentUrlTree,n,j);const te=this.parseUrl(n);return kT(this.currentUrlTree,te,j)}removeEmptyProps(n){return Object.keys(n).reduce((E,j)=>{const te=n[j];return null!=te&&(E[j]=te),E},{})}scheduleNavigation(n,E,j,te,ve){if(this.disposed)return Promise.resolve(!1);let Be,Qe,at;ve?(Be=ve.resolve,Qe=ve.reject,at=ve.promise):at=new Promise((Bt,vn)=>{Be=Bt,Qe=vn});const Tt=this.pendingTasks.add();return mM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Tt))}),this.navigationTransitions.handleNavigationRequest({source:E,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:te,resolve:Be,reject:Qe,promise:at,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),at.catch(Bt=>Promise.reject(Bt))}setBrowserUrl(n,E){const j=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(j)||E.extras.replaceUrl){const ve={...E.extras.state,...this.generateNgRouterState(E.id,this.browserPageId)};this.location.replaceState(j,"",ve)}else{const te={...E.extras.state,...this.generateNgRouterState(E.id,(this.browserPageId??0)+1)};this.location.go(j,"",te)}}restoreHistory(n,E=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-(this.browserPageId??this.currentPageId);0!==te?this.location.historyGo(te):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===te&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(E&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,E){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:E}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class gM{}let EI=(()=>{class t{constructor(n,E,j,te,ve){this.router=n,this.injector=j,this.preloadingStrategy=te,this.loader=ve}setUpPreloading(){this.subscription=this.router.events.pipe(Bl(n=>n instanceof sh),Cm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,E){const j=[];for(const te of E){te.providers&&!te._injector&&(te._injector=K1(te.providers,n,`Route: ${te.path}`));const ve=te._injector??n,Be=te._loadedInjector??ve;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&j.push(this.preloadConfig(ve,te)),(te.children||te._loadedRoutes)&&j.push(this.processRoutes(Be,te.children??te._loadedRoutes))}return bn(j).pipe(wt())}preloadConfig(n,E){return this.preloadingStrategy.preload(E,()=>{let j;j=E.loadChildren&&void 0===E.canLoad?this.loader.loadChildren(n,E):_n(null);const te=j.pipe(Et(ve=>null===ve?_n(void 0):(E._loadedRoutes=ve.routes,E._loadedInjector=ve.injector,this.processRoutes(ve.injector??n,ve.routes))));return E.loadComponent&&!E._loadedComponent?bn([te,this.loader.loadComponent(E)]).pipe(wt()):te})}}return t.\u0275fac=function(n){return new(n||t)(Br(Hu),Br(Z3),Br(ru),Br(gM),Br(Lb))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Pb=new Jr("");let vM=(()=>{class t{constructor(n,E,j,te,ve={}){this.urlSerializer=n,this.transitions=E,this.viewportScroller=j,this.zone=te,this.options=ve,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ve.scrollPositionRestoration=ve.scrollPositionRestoration||"disabled",ve.anchorScrolling=ve.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof bb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof sh?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Nm&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof VT&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,E){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new VT(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,E))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){p1()},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();function xf(t,e){return{\u0275kind:t,\u0275providers:e}}function xM(){const t=Vr(Rc);return e=>{const n=t.get(dd);if(e!==n.components[0])return;const E=t.get(Hu),j=t.get(bM);1===t.get(Rb)&&E.initialNavigation(),t.get(_M,null,Qr.Optional)?.setUpPreloading(),t.get(Pb,null,Qr.Optional)?.init(),E.resetRootComponentType(n.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const bM=new Jr("",{factory:()=>new $}),Rb=new Jr("",{providedIn:"root",factory:()=>1}),_M=new Jr("");function LI(t){return xf(0,[{provide:_M,useExisting:EI},{provide:gM,useExisting:t}])}const wM=new Jr("ROUTER_FORROOT_GUARD"),PI=[Rx,{provide:Lm,useClass:mb},Hu,zm,{provide:$p,useFactory:function yM(t){return t.routerState.root},deps:[Hu]},Lb,[]];function RI(){return new i5("Router",Hu)}let TM=(()=>{class t{constructor(n){}static forRoot(n,E){return{ngModule:t,providers:[PI,[],{provide:Qp,multi:!0,useValue:n},{provide:wM,useFactory:BI,deps:[[Hu,new Cd,new ps]]},{provide:ey,useValue:E||{}},E?.useHash?{provide:nh,useClass:ZE}:{provide:nh,useClass:L5},{provide:Pb,useFactory:()=>{const t=Vr(dD),e=Vr(Po),n=Vr(ey),E=Vr(Qv),j=Vr(Lm);return n.scrollOffset&&t.setOffset(n.scrollOffset),new vM(j,E,t,e,n)}},E?.preloadingStrategy?LI(E.preloadingStrategy).\u0275providers:[],{provide:i5,multi:!0,useFactory:RI},E?.initialNavigation?jI(E):[],E?.bindToComponentInputs?xf(8,[XT,{provide:Yv,useExisting:XT}]).\u0275providers:[],[{provide:MM,useFactory:xM},{provide:wx,multi:!0,useExisting:MM}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Qp,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(Br(wM,8))},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({}),t})();function BI(t){return"guarded"}function jI(t){return["disabled"===t.initialNavigation?xf(3,[{provide:yv,multi:!0,useFactory:()=>{const e=Vr(Hu);return()=>{e.setUpLocationChangeListener()}}},{provide:Rb,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?xf(2,[{provide:Rb,useValue:0},{provide:yv,multi:!0,deps:[Rc],useFactory:e=>{const n=e.get(GE,Promise.resolve());return()=>n.then(()=>new Promise(E=>{const j=e.get(Hu),te=e.get(bM);mM(j,()=>{E(!0)}),e.get(Qv).afterPreactivation=()=>(E(!0),te.closed?_n(void 0):te),j.initialNavigation()}))}}]).\u0275providers:[]]}const MM=new Jr(""),VI=[];let Fb,HI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({imports:[TM.forRoot(VI),TM]}),t})();try{Fb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Fb=!1}let qm,Nb,md=(()=>{class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Jx(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Fb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(n){return new(n||t)(Br(zu))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ty(t){return function qI(){if(null==qm&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>qm=!0}))}finally{qm=qm||!1}return qm}()?t:!!t.capture}function t0(t){return t.composedPath?t.composedPath()[0]:t.target}let ry=(()=>{class t{constructor(n){this.platform=n,this.hearSubject=new H(0),this.centOff=new H(0),this.mode=null,this.currHearMode=this.hearSubject.asObservable(),this.currCent=this.centOff.asObservable(),this.mode=this.platform.ANDROID||this.platform.IOS?"mobile":"desktop",console.log("MODE: "+this.mode)}changeMode(){this.hearSubject.next(0===this.hearSubject.value?1:0)}turnOff(){this.hearSubject.next(0)}changeCent(n){this.centOff.next(n)}}return t.\u0275fac=function(n){return new(n||t)(Br(md))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),YI=(()=>{class t{constructor(){this.dark=new H(!0),this.currLightingMode=this.dark.asObservable()}changeLightMode(){this.dark.next(!this.dark.value)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kM(t){return Bl((e,n)=>t<=n)}function SM(t){return K((e,n)=>{Je(t).subscribe(ue(n,()=>n.complete(),i)),!n.closed&&e.subscribe(n)})}function EM(t){return null!=t&&"false"!=`${t}`}function CM(t){return Array.isArray(t)?t:[t]}function Gm(t){return t instanceof Bu?t.nativeElement:t}class tL extends I{constructor(e,n){super()}schedule(e,n=0){return this}}const iy={setInterval(t,e,...n){const{delegate:E}=iy;return E?.setInterval?E.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=iy;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},DM={now:()=>(DM.delegate||Date).now(),delegate:void 0};class Wm{constructor(e,n=Wm.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,E){return new this.schedulerActionCtor(this,e).schedule(E,n)}}Wm.now=DM.now;const zb=new class rL extends Wm{constructor(e,n=Wm.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let E;this._active=!0;do{if(E=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,E){for(;e=n.shift();)e.unsubscribe();throw E}}}(class nL extends tL{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var E;if(this.closed)return this;this.state=e;const j=this.id,te=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(te,j,n)),this.pending=!0,this.delay=n,this.id=null!==(E=this.id)&&void 0!==E?E:this.requestAsyncId(te,this.id,n),this}requestAsyncId(e,n,E=0){return iy.setInterval(e.flush.bind(e,this),E)}recycleAsyncId(e,n,E=0){if(null!=E&&this.delay===E&&!1===this.pending)return n;null!=n&&iy.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const E=this._execute(e,n);if(E)return E;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let j,E=!1;try{this.work(e)}catch(te){E=!0,j=te||new Error("Scheduled action threw falsy error")}if(E)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:E}=n;this.work=this.state=this.scheduler=null,this.pending=!1,r(E,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}),iL=zb,IM=new Set;let uh,aL=(()=>{class t{constructor(n,E){this._platform=n,this._nonce=E,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lL}matchMedia(n){return(this._platform.WEBKIT||this._platform.BLINK)&&function sL(t,e){if(!IM.has(t))try{uh||(uh=document.createElement("style"),e&&(uh.nonce=e),uh.setAttribute("type","text/css"),document.head.appendChild(uh)),uh.sheet&&(uh.sheet.insertRule(`@media ${t} {body{ }}`,0),IM.add(t))}catch(n){console.error(n)}}(n,this._nonce),this._matchMedia(n)}}return t.\u0275fac=function(n){return new(n||t)(Br(md),Br(fp,8))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lL(t){return{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{}}}let uL=(()=>{class t{constructor(n,E){this._mediaMatcher=n,this._zone=E,this._queries=new Map,this._destroySubject=new $}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(n){return LM(CM(n)).some(j=>this._registerQuery(j).mql.matches)}observe(n){let te=Fv(LM(CM(n)).map(ve=>this._registerQuery(ve).observable));return te=qp(te.pipe(zl(1)),te.pipe(kM(1),function oL(t,e=zb){return K((n,E)=>{let j=null,te=null,ve=null;const Be=()=>{if(j){j.unsubscribe(),j=null;const at=te;te=null,E.next(at)}};function Qe(){const at=ve+t,Tt=e.now();if(Tt<at)return j=this.schedule(void 0,at-Tt),void E.add(j);Be()}n.subscribe(ue(E,at=>{te=at,ve=e.now(),j||(j=e.schedule(Qe,t),E.add(j))},()=>{Be(),E.complete()},void 0,()=>{te=j=null}))})}(0))),te.pipe(ne(ve=>{const Be={matches:!1,breakpoints:{}};return ve.forEach(({matches:Qe,query:at})=>{Be.matches=Be.matches||Qe,Be.breakpoints[at]=Qe}),Be}))}_registerQuery(n){if(this._queries.has(n))return this._queries.get(n);const E=this._mediaMatcher.matchMedia(n),te={observable:new R(ve=>{const Be=Qe=>this._zone.run(()=>ve.next(Qe));return E.addListener(Be),()=>{E.removeListener(Be)}}).pipe(bT(E),ne(({matches:ve})=>({query:n,matches:ve})),SM(this._destroySubject)),mql:E};return this._queries.set(n,te),te}}return t.\u0275fac=function(n){return new(n||t)(Br(aL),Br(Po))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function LM(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function FM(t){return 0===t.buttons||0===t.offsetX&&0===t.offsetY}function NM(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const vL=new Jr("cdk-input-modality-detector-options"),yL={ignoreKeys:[18,17,224,91,16]},n0=ty({passive:!0,capture:!0});let xL=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(n,E,j,te){this._platform=n,this._mostRecentTarget=null,this._modality=new H(null),this._lastTouchMs=0,this._onKeydown=ve=>{this._options?.ignoreKeys?.some(Be=>Be===ve.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=t0(ve))},this._onMousedown=ve=>{Date.now()-this._lastTouchMs<650||(this._modality.next(FM(ve)?"keyboard":"mouse"),this._mostRecentTarget=t0(ve))},this._onTouchstart=ve=>{NM(ve)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=t0(ve))},this._options={...yL,...te},this.modalityDetected=this._modality.pipe(kM(1)),this.modalityChanged=this.modalityDetected.pipe(Xn()),n.isBrowser&&E.runOutsideAngular(()=>{j.addEventListener("keydown",this._onKeydown,n0),j.addEventListener("mousedown",this._onMousedown,n0),j.addEventListener("touchstart",this._onTouchstart,n0)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,n0),document.removeEventListener("mousedown",this._onMousedown,n0),document.removeEventListener("touchstart",this._onTouchstart,n0))}}return t.\u0275fac=function(n){return new(n||t)(Br(md),Br(Po),Br(vs),Br(vL,8))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const _L=new Jr("cdk-focus-monitor-default-options"),oy=ty({passive:!0,capture:!0});let wL=(()=>{class t{constructor(n,E,j,te,ve){this._ngZone=n,this._platform=E,this._inputModalityDetector=j,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new $,this._rootNodeFocusAndBlurListener=Be=>{for(let at=t0(Be);at;at=at.parentElement)"focus"===Be.type?this._onFocus(Be,at):this._onBlur(Be,at)},this._document=te,this._detectionMode=ve?.detectionMode||0}monitor(n,E=!1){const j=Gm(n);if(!this._platform.isBrowser||1!==j.nodeType)return _n();const te=function WI(t){if(function GI(){if(null==Nb){const t=typeof document<"u"?document.head:null;Nb=!(!t||!t.createShadowRoot&&!t.attachShadow)}return Nb}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(j)||this._getDocument(),ve=this._elementInfo.get(j);if(ve)return E&&(ve.checkChildren=!0),ve.subject;const Be={checkChildren:E,subject:new $,rootNode:te};return this._elementInfo.set(j,Be),this._registerGlobalListeners(Be),Be.subject}stopMonitoring(n){const E=Gm(n),j=this._elementInfo.get(E);j&&(j.subject.complete(),this._setClasses(E),this._elementInfo.delete(E),this._removeGlobalListeners(j))}focusVia(n,E,j){const te=Gm(n);te===this._getDocument().activeElement?this._getClosestElementsInfo(te).forEach(([Be,Qe])=>this._originChanged(Be,E,Qe)):(this._setOrigin(E),"function"==typeof te.focus&&te.focus(j))}ngOnDestroy(){this._elementInfo.forEach((n,E)=>this.stopMonitoring(E))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return 1===this._detectionMode||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,E){n.classList.toggle("cdk-focused",!!E),n.classList.toggle("cdk-touch-focused","touch"===E),n.classList.toggle("cdk-keyboard-focused","keyboard"===E),n.classList.toggle("cdk-mouse-focused","mouse"===E),n.classList.toggle("cdk-program-focused","program"===E)}_setOrigin(n,E=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&E,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,E){const j=this._elementInfo.get(E),te=t0(n);!j||!j.checkChildren&&E!==te||this._originChanged(E,this._getFocusOrigin(te),j)}_onBlur(n,E){const j=this._elementInfo.get(E);!j||j.checkChildren&&n.relatedTarget instanceof Node&&E.contains(n.relatedTarget)||(this._setClasses(E),this._emitOrigin(j,null))}_emitOrigin(n,E){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(E))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const E=n.rootNode,j=this._rootNodeFocusListenerCount.get(E)||0;j||this._ngZone.runOutsideAngular(()=>{E.addEventListener("focus",this._rootNodeFocusAndBlurListener,oy),E.addEventListener("blur",this._rootNodeFocusAndBlurListener,oy)}),this._rootNodeFocusListenerCount.set(E,j+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(SM(this._stopInputModalityDetector)).subscribe(te=>{this._setOrigin(te,!0)}))}_removeGlobalListeners(n){const E=n.rootNode;if(this._rootNodeFocusListenerCount.has(E)){const j=this._rootNodeFocusListenerCount.get(E);j>1?this._rootNodeFocusListenerCount.set(E,j-1):(E.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oy),E.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oy),this._rootNodeFocusListenerCount.delete(E))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,E,j){this._setClasses(n,E),this._emitOrigin(j,E),this._lastFocusOrigin=E}_getClosestElementsInfo(n){const E=[];return this._elementInfo.forEach((j,te)=>{(te===n||j.checkChildren&&te.contains(n))&&E.push([te,j])}),E}_isLastInteractionFromInputLabel(n){const{_mostRecentTarget:E,mostRecentModality:j}=this._inputModalityDetector;if("mouse"!==j||!E||E===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName||n.disabled)return!1;const te=n.labels;if(te)for(let ve=0;ve<te.length;ve++)if(te[ve].contains(E))return!0;return!1}}return t.\u0275fac=function(n){return new(n||t)(Br(Po),Br(md),Br(xL),Br(vs,8),Br(_L,8))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const BM="cdk-high-contrast-black-on-white",jM="cdk-high-contrast-white-on-black",Bb="cdk-high-contrast-active";let TL=(()=>{class t{constructor(n,E){this._platform=n,this._document=E,this._breakpointSubscription=Vr(uL).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const n=this._document.createElement("div");n.style.backgroundColor="rgb(1,2,3)",n.style.position="absolute",this._document.body.appendChild(n);const E=this._document.defaultView||window,j=E&&E.getComputedStyle?E.getComputedStyle(n):null,te=(j&&j.backgroundColor||"").replace(/ /g,"");switch(n.remove(),te){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const n=this._document.body.classList;n.remove(Bb,BM,jM),this._hasCheckedHighContrastMode=!0;const E=this.getHighContrastMode();1===E?n.add(Bb,BM):2===E&&n.add(Bb,jM)}}}return t.\u0275fac=function(n){return new(n||t)(Br(md),Br(vs))},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),UM=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({}),t})();const SL=new Jr("mat-sanity-checks",{providedIn:"root",factory:function kL(){return!0}});let ay=(()=>{class t{constructor(n,E,j){this._sanityChecks=E,this._document=j,this._hasDoneGlobalChecks=!1,n._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(n){return!function ZI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[n])}}return t.\u0275fac=function(n){return new(n||t)(Br(TL),Br(SL,8),Br(vs))},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({imports:[UM,UM]}),t})();function EL(t){return class extends t{get disabled(){return this._disabled}set disabled(e){this._disabled=EM(e)}constructor(...e){super(...e),this._disabled=!1}}}function CL(t,e){return class extends t{get color(){return this._color}set color(n){const E=n||this.defaultColor;E!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),E&&this._elementRef.nativeElement.classList.add(`mat-${E}`),this._color=E)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function DL(t){return class extends t{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=EM(e)}constructor(...e){super(...e),this._disableRipple=!1}}}class LL{constructor(e,n,E,j=!1){this._renderer=e,this.element=n,this.config=E,this._animationForciblyDisabledThroughCss=j,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const qM=ty({passive:!0,capture:!0});class OL{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=t0(e);n&&this._events.get(e.type)?.forEach((E,j)=>{(j===n||j.contains(n))&&E.forEach(te=>te.handleEvent(e))})}}addHandler(e,n,E,j){const te=this._events.get(n);if(te){const ve=te.get(E);ve?ve.add(j):te.set(E,new Set([j]))}else this._events.set(n,new Map([[E,new Set([j])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,qM)})}removeHandler(e,n,E){const j=this._events.get(e);if(!j)return;const te=j.get(n);te&&(te.delete(E),0===te.size&&j.delete(n),0===j.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,qM)))}}const GM={enterDuration:225,exitDuration:150},WM=ty({passive:!0,capture:!0}),ZM=["mousedown","touchstart"],YM=["mouseup","mouseleave","touchend","touchcancel"];class r0{constructor(e,n,E,j){this._target=e,this._ngZone=n,this._platform=j,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,j.isBrowser&&(this._containerElement=Gm(E))}fadeInRipple(e,n,E={}){const j=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),te={...GM,...E.animation};E.centered&&(e=j.left+j.width/2,n=j.top+j.height/2);const ve=E.radius||function RL(t,e,n){const E=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),j=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(E*E+j*j)}(e,n,j),Be=e-j.left,Qe=n-j.top,at=te.enterDuration,Tt=document.createElement("div");Tt.classList.add("mat-ripple-element"),Tt.style.left=Be-ve+"px",Tt.style.top=Qe-ve+"px",Tt.style.height=2*ve+"px",Tt.style.width=2*ve+"px",null!=E.color&&(Tt.style.backgroundColor=E.color),Tt.style.transitionDuration=`${at}ms`,this._containerElement.appendChild(Tt);const Bt=window.getComputedStyle(Tt),kn=Bt.transitionDuration,Un="none"===Bt.transitionProperty||"0s"===kn||"0s, 0s"===kn||0===j.width&&0===j.height,$n=new LL(this,Tt,E,Un);Tt.style.transform="scale3d(1, 1, 1)",$n.state=0,E.persistent||(this._mostRecentTransientRipple=$n);let Mr=null;return!Un&&(at||te.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ir=()=>this._finishRippleTransition($n),hr=()=>this._destroyRipple($n);Tt.addEventListener("transitionend",Ir),Tt.addEventListener("transitioncancel",hr),Mr={onTransitionEnd:Ir,onTransitionCancel:hr}}),this._activeRipples.set($n,Mr),(Un||!at)&&this._finishRippleTransition($n),$n}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,E={...GM,...e.config.animation};n.style.transitionDuration=`${E.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!E.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=Gm(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,ZM.forEach(E=>{r0._eventManager.addHandler(this._ngZone,E,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{YM.forEach(n=>{this._triggerElement.addEventListener(n,this,WM)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:E}=e.config;e.state=1,!E&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=FM(e),E=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!E&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!NM(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;for(let E=0;E<n.length;E++)this.fadeInRipple(n[E].clientX,n[E].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(ZM.forEach(n=>r0._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&YM.forEach(n=>e.removeEventListener(n,this,WM)))}}r0._eventManager=new OL;const $M=new Jr("mat-ripple-global-options");let FL=(()=>{class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,E,j,te,ve){this._elementRef=n,this._animationMode=ve,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=te||{},this._rippleRenderer=new r0(this,E,n,j)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,E=0,j){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,E,{...this.rippleConfig,...j}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...n})}}return t.\u0275fac=function(n){return new(n||t)(ai(Bu),ai(Po),ai(md),ai($M,8),ai(qd,8))},t.\u0275dir=bi({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,E){2&n&&hm("mat-ripple-unbounded",E.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),t})(),NL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({imports:[ay,ay]}),t})();const zL=["mat-button",""],BL=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],jL=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],XM={capture:!0},KM=["focus","click","mouseenter","touchstart"],Ym="mat-button-ripple-uninitialized";let UL=(()=>{class t{constructor(){this._document=Vr(vs,{optional:!0}),this._animationMode=Vr(qd,{optional:!0}),this._globalRippleOptions=Vr($M,{optional:!0}),this._platform=Vr(md),this._ngZone=Vr(Po),this._onInteraction=n=>{if(n.target===this._document)return;const j=n.target.closest(`[${Ym}]`);j&&(j.removeAttribute(Ym),this._appendRipple(j))},this._ngZone.runOutsideAngular(()=>{for(const n of KM)this._document?.addEventListener(n,this._onInteraction,XM)})}ngOnDestroy(){for(const n of KM)this._document?.removeEventListener(n,this._onInteraction,XM)}_appendRipple(n){if(!this._document)return;const E=this._document.createElement("span");E.classList.add("mat-mdc-button-ripple");const j=new VL(n,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);j.rippleConfig.centered=n.hasAttribute("mat-icon-button"),new r0(j,this._ngZone,E,this._platform).setupTriggerEvents(n),n.append(E)}_createMatRipple(n){if(!this._document)return;n.querySelector(".mat-mdc-button-ripple")?.remove(),n.removeAttribute(Ym);const E=this._document.createElement("span");E.classList.add("mat-mdc-button-ripple");const j=new FL(new Bu(E),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return j._isInitialized=!0,j.trigger=n,n.append(E),j}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class VL{constructor(e,n,E){this._button=e,this._globalRippleOptions=n,this._setRippleConfig(n,E)}_setRippleConfig(e,n){this.rippleConfig=e||{},"NoopAnimations"===n&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const HL=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],qL=CL(EL(DL(class{constructor(t){this._elementRef=t}})));let GL=(()=>{class t extends qL{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(n){this._ripple=n}constructor(n,E,j,te){super(n),this._platform=E,this._ngZone=j,this._animationMode=te,this._focusMonitor=Vr(wL),this._rippleLoader=Vr(UL),this._isFab=!1;const ve=n.nativeElement.classList;for(const Be of HL)this._hasHostAttributes(Be.selector)&&Be.mdcClasses.forEach(Qe=>{ve.add(Qe)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(n="program",E){n?this._focusMonitor.focusVia(this._elementRef.nativeElement,n,E):this._elementRef.nativeElement.focus(E)}_hasHostAttributes(...n){return n.some(E=>this._elementRef.nativeElement.hasAttribute(E))}}return t.\u0275fac=function(n){p1()},t.\u0275dir=bi({type:t,features:[ev,jt]}),t})(),JM=(()=>{class t extends GL{constructor(n,E,j,te){super(n,E,j,te)}}return t.\u0275fac=function(n){return new(n||t)(ai(Bu),ai(md),ai(Po),ai(qd,8))},t.\u0275cmp=As({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(n,E){2&n&&(lm("disabled",E.disabled||null),hm("_mat-animation-noopable","NoopAnimations"===E._animationMode)("mat-unthemed",!E.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ev],attrs:zL,ngContentSelectors:jL,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,E){1&n&&(N1(BL),ud(0,"span",0),dm(1),ou(2,"span",1),dm(3,1),ku(),dm(4,2),ud(5,"span",2)(6,"span",3)),2&n&&hm("mdc-button__ripple",!E._isFab)("mdc-fab__ripple",E._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),YL=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({imports:[ay,NL,ay]}),t})(),$L=(()=>{class t{constructor(n){this.hearModeChange=n,this.hearArr=["Click to start hearing","Click to stop hearing"],this.i=0}activateHearing(){this.hearModeChange.changeMode()}ngOnInit(){this.hearModeChange.currHearMode.subscribe(n=>{this.i=n})}}return t.\u0275fac=function(n){return new(n||t)(ai(ry))},t.\u0275cmp=As({type:t,selectors:[["app-hear-button"]],decls:4,vars:1,consts:[["mat-button","","color","primary",3,"click"]],template:function(n,E){1&n&&(ou(0,"div")(1,"button",0),Pp("click",function(){return E.activateHearing()}),ou(2,"b"),Fp(3),ku()()()),2&n&&(ld(3),cv(E.hearArr[E.i]))},dependencies:[JM]}),t})();function $m(t){return($m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function bf(t,e,n){return(e=function KL(t){var e=function XL(t,e){if("object"!==$m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var E=n.call(t,e||"default");if("object"!==$m(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===$m(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var JL=Sa(978);class Xm{static forFloat32Array(e){return new Xm(e,n=>new Float32Array(n))}static forFloat64Array(e){return new Xm(e,n=>new Float64Array(n))}static forNumberArray(e){return new Xm(e,n=>Array(n))}constructor(e,n){if(bf(this,"_inputLength",void 0),bf(this,"_fft",void 0),bf(this,"_bufferSupplier",void 0),bf(this,"_paddedInputBuffer",void 0),bf(this,"_transformBuffer",void 0),bf(this,"_inverseBuffer",void 0),e<1)throw new Error("Input length must be at least one");this._inputLength=e,this._fft=new JL(function tO(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}(2*e)),this._bufferSupplier=n,this._paddedInputBuffer=this._bufferSupplier(this._fft.size),this._transformBuffer=this._bufferSupplier(2*this._fft.size),this._inverseBuffer=this._bufferSupplier(2*this._fft.size)}get inputLength(){return this._inputLength}autocorrelate(e,n=this._bufferSupplier(e.length)){if(e.length!==this._inputLength)throw new Error(`Input must have length ${this._inputLength} but had length ${e.length}`);for(let j=0;j<e.length;j++)this._paddedInputBuffer[j]=e[j];for(let j=e.length;j<this._paddedInputBuffer.length;j++)this._paddedInputBuffer[j]=0;this._fft.realTransform(this._transformBuffer,this._paddedInputBuffer),this._fft.completeSpectrum(this._transformBuffer);const E=this._transformBuffer;for(let j=0;j<E.length;j+=2)E[j]=E[j]*E[j]+E[j+1]*E[j+1],E[j+1]=0;this._fft.inverseTransform(this._inverseBuffer,this._transformBuffer);for(let j=0;j<e.length;j++)n[j]=this._inverseBuffer[2*j];return n}}class Km{static forFloat32Array(e){return new Km(e,n=>new Float32Array(n))}static forFloat64Array(e){return new Km(e,n=>new Float64Array(n))}static forNumberArray(e){return new Km(e,n=>Array(n))}constructor(e,n){bf(this,"_autocorrelator",void 0),bf(this,"_nsdfBuffer",void 0),bf(this,"_clarityThreshold",.9),this._autocorrelator=new Xm(e,n),this._nsdfBuffer=n(e)}get inputLength(){return this._autocorrelator.inputLength}findPitch(e,n){this._nsdf(e);const E=function QL(t){const e=[];let n=!1,E=-1/0,j=-1;for(let te=1;te<t.length-1;te++)t[te-1]<=0&&t[te]>0?(n=!0,j=te,E=t[te]):t[te-1]>0&&t[te]<=0?(n=!1,-1!==j&&e.push(j)):n&&t[te]>E&&(E=t[te],j=te);return e}(this._nsdfBuffer);if(0===E.length)return[0,0];const j=Math.max(...E.map(Qe=>this._nsdfBuffer[Qe])),te=E.find(Qe=>this._nsdfBuffer[Qe]>=this._clarityThreshold*j),[ve,Be]=function eO(t,e){const[n,E,j]=[t-1,t,t+1],[te,ve,Be]=[e[n],e[E],e[j]],Qe=te/2-ve+Be/2,at=-te/2*(E+j)+ve*(n+j)-Be/2*(n+E),Bt=-at/(2*Qe);return[Bt,Qe*Bt*Bt+at*Bt+(te*E*j/2-ve*n*j+Be*n*E/2)]}(te,this._nsdfBuffer);return[n/ve,Math.min(Be,1)]}_nsdf(e){this._autocorrelator.autocorrelate(e,this._nsdfBuffer);let E,n=2*this._nsdfBuffer[0];for(E=0;E<this._nsdfBuffer.length&&n>0;E++)this._nsdfBuffer[E]=2*this._nsdfBuffer[E]/n,n-=e[E]**2+e[e.length-E-1]**2;for(;E<this._nsdfBuffer.length;E++)this._nsdfBuffer[E]=0}}function nO(t,e){if(1&t&&(ou(0,"div")(1,"h3"),Fp(2,"You are singing:"),ku(),ou(3,"h2"),Fp(4),ku()()),2&t){const n=F1();ld(4),cv(n.noteName)}}let rO=(()=>{class t{constructor(n){this.hearModeChange=n,this.playing=!1,this.prevVisibility=!1}onVisibilityChange(n){document.hidden&&this.hearModeChange.turnOff()}ngOnInit(){this.hearModeChange.currHearMode.subscribe(n=>{this.visibility=1===n})}ngDoCheck(){this.hearModeChange.changeCent(this.cents),this.visibility!==this.prevVisibility&&(this.prevVisibility=this.visibility,this.visibility?this.startAudioInput():this.stopAudioInput())}startAudioInput(){this.noteName="",this.cents=0;let n=0;this.playing=!0;const E=(at,Tt,Bt,vn)=>{at.getFloatTimeDomainData(Bt);const[kn,Un]=Tt.findPitch(Bt,vn);Un>.98?([this.pitch,this.clarity]=[kn,Un],this.noteName=j(te(kn,440)),this.cents=ve(kn),n=0):(n+=1,19===n&&(this.noteName="",this.cents=0,console.log("No singing detected, resetting"))),window.setTimeout(()=>{this.playing&&E(at,Tt,Bt,vn)},50)},j=at=>{const Tt=Math.floor(at/12)-1;return["C","C#","D","D#/E\u266d","E","F","F#","G","G#/A\u266d","A","B\u266d","B"][Math.round(at)%12]+Tt.toString()},te=(at,Tt=440)=>Math.round(12*Math.log2(at/Tt))+69,ve=at=>{const Bt=440*Math.pow(2,(te(at)-69)/12);return Math.floor(1200*Math.log(at/Bt)/Math.log(2))},Be=new AudioContext,Qe=Be.createAnalyser();Qe.fftSize=1024,navigator.mediaDevices.getUserMedia({audio:!0}).then(at=>{this.mediaStream=at,Be.createMediaStreamSource(at).connect(Qe);const Tt=Km.forFloat32Array(Qe.fftSize),Bt=new Float32Array(Tt.inputLength);E(Qe,Tt,Bt,Be.sampleRate)}).catch(at=>{console.error("Error accessing microphone:",at)}),console.log("Started!")}stopAudioInput(){typeof this.mediaStream<"u"&&(this.mediaStream.getTracks().forEach(n=>n.stop()),console.log("Stopped!"),this.playing=!1)}}return t.\u0275fac=function(n){return new(n||t)(ai(ry))},t.\u0275cmp=As({type:t,selectors:[["app-note-text"]],hostBindings:function(n,E){1&n&&Pp("visibilitychange",function(te){return E.onVisibilityChange(te)},0,A_)},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,E){1&n&&L1(0,nO,5,1,"div",0),2&n&&zc("ngIf",E.visibility)},dependencies:[Zx]}),t})();function QM(t,e,n,E,j,te,ve){try{var Be=t[te](ve),Qe=Be.value}catch(at){return void n(at)}Be.done?e(Qe):Promise.resolve(Qe).then(E,j)}function eA(t){return function(){var e=this,n=arguments;return new Promise(function(E,j){var te=t.apply(e,n);function ve(Qe){QM(te,E,j,ve,Be,"next",Qe)}function Be(Qe){QM(te,E,j,ve,Be,"throw",Qe)}ve(void 0)})}}const iO=["plot"],oO=["*"];class ko{static setModuleName(e){ko.moduleName=e}static getModuleName(){return ko.moduleName}static setPlotly(e){if("object"==typeof e&&"function"!=typeof e.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");ko.plotly=e}static insert(e){return-1===ko.instances.indexOf(e)&&ko.instances.push(e),e}static remove(e){const n=ko.instances.indexOf(e);n>=0&&(ko.instances.splice(n,1),ko.plotly.purge(e))}getInstanceByDivId(e){for(const n of ko.instances)if(n&&n.id===e)return n}getPlotly(){var e=this;return eA(function*(){return yield e.waitFor(()=>"waiting"!==e._getPlotly()),e._getPlotly()})()}_getPlotly(){if(typeof ko.plotly>"u")throw new Error("ViaCDN"===ko.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return ko.plotly}waitFor(e){return new Promise(n=>{const E=()=>{e()?n():setTimeout(E,10)};E()})}newPlot(e,n,E,j,te){var ve=this;return eA(function*(){if(yield ve.waitFor(()=>"waiting"!==ve._getPlotly()),te){const Be={data:n,layout:E,config:j,frames:te};return ve._getPlotly().newPlot(e,Be).then(()=>ko.insert(e))}return ve._getPlotly().newPlot(e,n,E,j).then(()=>ko.insert(e))})()}plot(e,n,E,j,te){if(te){const ve={data:n,layout:E,config:j,frames:te};return this._getPlotly().newPlot(e,ve)}return this._getPlotly().newPlot(e,n,E,j)}update(e,n,E,j,te){if(te){const ve={data:n,layout:E,config:j,frames:te};return this._getPlotly().react(e,ve)}return this._getPlotly().react(e,n,E,j)}resize(e){return this._getPlotly().Plots.resize(e)}}ko.instances=[],ko.plotly=void 0,ko.moduleName=void 0,ko.\u0275fac=function(e){return new(e||ko)},ko.\u0275prov=rr({token:ko,factory:ko.\u0275fac,providedIn:"root"});let aO=(()=>{class t{constructor(n,E,j){this.plotly=n,this.iterableDiffers=E,this.keyValueDiffers=j,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new wi,this.update=new wi,this.purge=new wi,this.error=new wi,this.afterExport=new wi,this.afterPlot=new wi,this.animated=new wi,this.animatingFrame=new wi,this.animationInterrupted=new wi,this.autoSize=new wi,this.beforeExport=new wi,this.beforeHover=new wi,this.buttonClicked=new wi,this.click=new wi,this.plotlyClick=new wi,this.clickAnnotation=new wi,this.deselect=new wi,this.doubleClick=new wi,this.framework=new wi,this.hover=new wi,this.legendClick=new wi,this.legendDoubleClick=new wi,this.react=new wi,this.relayout=new wi,this.relayouting=new wi,this.restyle=new wi,this.redraw=new wi,this.selected=new wi,this.selecting=new wi,this.sliderChange=new wi,this.sliderEnd=new wi,this.sliderStart=new wi,this.sunburstclick=new wi,this.transitioning=new wi,this.transitionInterrupted=new wi,this.unhover=new wi,this.treemapclick=new wi,this.webglcontextlost=new wi,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","beforeHover","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","relayouting","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","sunburstclick","transitioning","transitionInterrupted","unhover","treemapclick","webglcontextlost"]}ngOnInit(){this.createPlot().then(()=>{const n=this.createFigure();this.initialized.emit(n)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const n=this.createFigure();this.purge.emit(n),ko.remove(this.plotlyInstance)}ngOnChanges(n){let E=!1;const j=n.revision;j&&!j.isFirstChange()&&(E=!0);const te=n.debug;te&&!te.isFirstChange()&&(E=!0),E&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let n=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(n=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(n=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),n&&this.plotlyInstance&&this.updatePlot()}getData(){return this.data??[]}getWindow(){return window}getClassName(){let n=[this.defaultClassName];return Array.isArray(this.className)?n=n.concat(this.className):this.className&&n.push(this.className),n.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.getData(),this.layout,this.config,this.frames).then(n=>{this.plotlyInstance=n,this.getWindow().gd=this.debug?n:void 0,this.eventNames.forEach(E=>{const j=`plotly_${E.toLowerCase()}`,te=this[E];n.on(j,ve=>te.emit(ve))}),n.on("plotly_click",E=>{this.plotlyClick.emit(E)}),this.updateWindowResizeHandler()},n=>{console.error("Error while plotting:",n),this.error.emit(n)})}createFigure(){const n=this.plotlyInstance;return{data:n.data,layout:n.layout,frames:n._transitionData?n._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const E=new Error("Plotly component wasn't initialized");throw this.error.emit(E),E}const n={...this.layout};return this.plotly.update(this.plotlyInstance,this.getData(),n,this.config,this.frames).then(()=>{const E=this.createFigure();this.update.emit(E)},E=>{console.error("Error while updating plot:",E),this.error.emit(E)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(n,E){const j=Object.assign({},E,{uid:""});return JSON.stringify(j)}}return t.\u0275fac=function(n){return new(n||t)(ai(ko),ai(Tm),ai(Vp))},t.\u0275cmp=As({type:t,selectors:[["plotly-plot"]],viewQuery:function(n,E){if(1&n&&M3(iO,7),2&n){let j;lx(j=function ux(){return function SS(t,e){return t[ho].queries[e].queryList}(Tr(),wd())}())&&(E.plotEl=j.first)}},inputs:{data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",revision:"revision",className:"className",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",beforeHover:"beforeHover",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",relayouting:"relayouting",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",sunburstclick:"sunburstclick",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",treemapclick:"treemapclick",webglcontextlost:"webglcontextlost"},features:[Kw([ko]),jt],ngContentSelectors:oO,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(n,E){1&n&&(N1(),ou(0,"div",0,1),dm(2),ku()),2&n&&(zc("ngClass",E.getClassName())("ngStyle",E.style),lm("id",E.divId))},dependencies:[Wx,Z5],encapsulation:2}),t})(),sy=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({providers:[ko],imports:[km]}),t})(),tA=(()=>{class t{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");ko.setPlotly(t.plotlyjs)}isValid(){return void 0!==t.plotlyjs&&("function"==typeof t.plotlyjs.plot||"function"==typeof t.plotlyjs.newPlot)}}return t.plotlyjs={},t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({providers:[ko],imports:[km,sy,sy]}),t})();class Ys{constructor(e){this.plotlyService=e,ko.setModuleName("ViaCDN")}static setPlotlyVersion(e){if("latest"!==e&&!/^(strict-)?\d\.\d{1,2}\.\d{1,2}$/.test(e))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3) or strict version number (i.e.: strict-1.4.3)");Ys.loadViaCDN(),Ys.plotlyVersion=e}static setPlotlyBundle(e){if(!(null===e||Ys.plotlyBundleNames.indexOf(e)>=0)){const E=Ys.plotlyBundleNames.map(j=>`"${j}"`).join(", ");throw new Error(`Invalid plotly bundle. Please set to null for full or ${E} for a partial bundle.`)}Ys.plotlyBundle=e}static loadViaCDN(){ko.setPlotly("waiting"),setTimeout(()=>{const n=null==Ys.plotlyBundle?`https://cdn.plot.ly/plotly-${Ys.plotlyVersion}.min.js`:`https://cdn.plot.ly/plotly-${Ys.plotlyBundle}-${Ys.plotlyVersion}.min.js`,E=document.createElement("script");E.type="text/javascript",E.src=n,E.onerror=()=>console.error(`Error loading plotly.js library from ${n}`),document.getElementsByTagName("head")[0].appendChild(E);let te=200;const ve=()=>{const Be=window.Plotly;if(Be)ko.setPlotly(Be);else{if(!(te>0))throw new Error(`Error loading plotly.js library from ${n}. Timeout.`);te--,setTimeout(ve,50)}};ve()})}}function sO(t,e){if(1&t&&(ou(0,"div"),ud(1,"plotly-plot",1),ku()),2&t){const n=F1();ld(1),zc("data",n.graph.data)("layout",n.graph.layout)("config",n.graph.config)}}Ys.plotlyBundle=void 0,Ys.plotlyVersion="latest",Ys.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],Ys.\u0275fac=function(e){return new(e||Ys)(Br(ko))},Ys.\u0275mod=zo({type:Ys}),Ys.\u0275inj=ar({providers:[ko],imports:[km,sy,sy]});let lO=(()=>{class t{constructor(n){this.hearModeChange=n,this.cent=0,this.graph={data:[{type:"indicator",mode:"gauge+number",value:0,title:{text:"Cents Off",font:{size:24},color:"grey"},gauge:{axis:{range:[-50,50],tickwidth:1,tickcolor:"darkblue"},bar:{color:"green"},bgcolor:"rgba(0,0,0,0)",borderwidth:2,bordercolor:"gray",steps:[{range:[-50,-10],color:"red"},{range:[-10,10],color:"green"},{range:[10,50],color:"red"}],threshold:[{line:{color:"red",width:4},thickness:.75,value:-10},{line:{color:"red",width:4},thickness:.75,value:10}]}}],layout:{width:600,height:500,plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:"rgba(0, 0, 0, 0)",font:{color:"green",family:"Courier New"}},config:{displayModeBar:!1}},this.prevVisibility=!1,this.mode=n.mode}ngOnInit(){this.hearModeChange.currCent.subscribe(n=>{this.cent!=n&&(this.cent=n,this.graph={data:[{type:"indicator",mode:"gauge+number",value:n,title:{text:"Cents off",font:{size:"desktop"===this.mode?24:18},color:"grey"},gauge:{axis:{range:[-50,50],tickwidth:1,tickcolor:"darkblue"},bar:{color:n<-10||n>10?"red":"green"},bgcolor:"rgba(0,0,0,0)",borderwidth:2,bordercolor:"gray",steps:[{range:[-50,-10],color:"grey"},{range:[-10,10],color:"yellow"},{range:[10,50],color:"grey"}],threshold:[{line:{color:"red",width:4},thickness:.75,value:-10},{line:{color:"red",width:4},thickness:.75,value:10}]}}],layout:{width:"desktop"===this.mode?600:400,height:"desktop"===this.mode?500:300,plot_bgcolor:"rgba(0, 0, 0, 0)",paper_bgcolor:"rgba(0, 0, 0, 0)",font:{color:n<-10||n>10?"red":"green",family:"Roboto"}},config:{displayModeBar:!1}})}),this.hearModeChange.currHearMode.subscribe(n=>{this.visibility=1===n})}}return t.\u0275fac=function(n){return new(n||t)(ai(ry))},t.\u0275cmp=As({type:t,selectors:[["app-gauge"]],decls:1,vars:1,consts:[[4,"ngIf"],["id","chart",3,"data","layout","config"]],template:function(n,E){1&n&&L1(0,sO,2,3,"div",0),2&n&&zc("ngIf",E.visibility)},dependencies:[Zx,aO]}),t})();const uO=function(t){return[t]};let cO=(()=>{class t{constructor(n,E,j){this.titleService=n,this.hearMeMode=E,this.lightMode=j,this.title="FrontEndHearMe",this.mode=null,this.dark=null,this.titleService.setTitle("\u{1f3a4}Sing your heart out - in tune!"),this.mode=E.mode}ngOnInit(){this.lightMode.currLightingMode.subscribe(n=>{this.dark=n})}switchMode(){this.lightMode.changeLightMode(),console.log(`switched mode to ${this.dark}`)}}return t.\u0275fac=function(n){return new(n||t)(ai(ub),ai(ry),ai(YI))},t.\u0275cmp=As({type:t,selectors:[["app-root"]],decls:10,vars:7,consts:[[3,"ngClass"],["mat-button","","color","accent",3,"click"],[2,"text-align","center",3,"ngClass"],[1,"hear-button"],[1,"note-radar"],[1,"note-text",3,"ngClass"]],template:function(n,E){1&n&&(ou(0,"body",0)(1,"button",1),Pp("click",function(){return E.switchMode()}),Fp(2),ku(),ou(3,"h1",2),Fp(4,"Hear Me"),ku(),ou(5,"div",3),ud(6,"app-hear-button"),ku(),ou(7,"div",4),ud(8,"app-note-text",5)(9,"app-gauge",0),ku()()),2&n&&(zc("ngClass",E.dark?"dark":"light"),ld(2),fv("Toggle ",E.dark?"Light":"Dark"," Mode"),ld(1),zc("ngClass",E.dark?"dark-label":"light-label"),ld(5),zc("ngClass",E.dark?"dark-label":"light-label"),ld(1),zc("ngClass",l3(5,uO,"desktop"===E.mode?"desktop-radar":"mobile-radar")))},dependencies:[Wx,JM,$L,rO,lO],styles:[".hear-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.note-radar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.mobile-radar[_ngcontent-%COMP%]{position:absolute;bottom:2em}.desktop-radar[_ngcontent-%COMP%]{position:absolute;bottom:4em}body[_ngcontent-%COMP%]{font-family:Roboto}.dark[_ngcontent-%COMP%]{background-color:#2a2b2b}.light[_ngcontent-%COMP%]{background-color:#ddceb5}.light-label[_ngcontent-%COMP%]{color:#2a2b2b}.dark-label[_ngcontent-%COMP%]{color:#fff}"]}),t})();var fO=Sa(335);const dO=["addListener","removeListener"],hO=["addEventListener","removeEventListener"],pO=["on","off"];function ly(t,e,n,E){if(xr(n)&&(E=n,n=void 0),E)return ly(t,e,n).pipe(yT(E));const[j,te]=function vO(t){return xr(t.addEventListener)&&xr(t.removeEventListener)}(t)?hO.map(ve=>Be=>t[ve](e,Be,n)):function mO(t){return xr(t.addListener)&&xr(t.removeListener)}(t)?dO.map(nA(t,e)):function gO(t){return xr(t.on)&&xr(t.off)}(t)?pO.map(nA(t,e)):[];if(!j&&Dt(t))return Et(ve=>ly(ve,e,n))(Je(t));if(!j)throw new TypeError("Invalid event target");return new R(ve=>{const Be=(...Qe)=>ve.next(1<Qe.length?Qe:Qe[0]);return j(Be),()=>te(Be)})}function nA(t,e){return n=>E=>t[n](e,E)}const gd=new R(i),xO={connector:()=>new $};function rA(t,e=xO){const{connector:n}=e;return K((E,j)=>{const te=n();Je(t(function yO(t){return new R(e=>t.subscribe(e))}(te))).subscribe(j),j.add(E.subscribe(te))})}function iA(t,e){return e?n=>qp(e.pipe(zl(1),function wO(){return K((t,e)=>{t.subscribe(ue(e,i))})}()),n.pipe(iA(t))):Et((n,E)=>Je(t(n,E)).pipe(zl(1),wT(n)))}const Jm="Service workers are disabled or not supported by this browser";class uy{constructor(e){if(this.serviceWorker=e,e){const E=ly(e,"controllerchange").pipe(ne(()=>e.controller)),te=qp(zv(()=>_n(e.controller)),E);this.worker=te.pipe(Bl(Tt=>!!Tt)),this.registration=this.worker.pipe(Nn(()=>e.getRegistration()));const at=ly(e,"message").pipe(ne(Tt=>Tt.data)).pipe(Bl(Tt=>Tt&&Tt.type)).pipe(function _O(t){return t?e=>rA(t)(e):e=>function bO(t,e){const n=xr(t)?t:()=>t;return xr(e)?rA(e,{connector:n}):E=>new db(E,n)}(new $)(e)}());at.connect(),this.events=at}else this.worker=this.events=this.registration=function kO(t){return zv(()=>Gp(new Error(t)))}(Jm)}postMessage(e,n){return this.worker.pipe(zl(1),Tl(E=>{E.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,E){const j=this.waitForOperationCompleted(E),te=this.postMessage(e,n);return Promise.all([te,j]).then(([,ve])=>ve)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?E=>E.type===e:E=>e.includes(E.type),this.events.pipe(Bl(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(zl(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Bl(n=>n.nonce===e),zl(1),ne(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let oA=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new $,!n.isEnabled)return this.messages=gd,this.notificationClicks=gd,void(this.subscription=gd);this.messages=this.sw.eventsOfType("PUSH").pipe(ne(j=>j.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ne(j=>j.data)),this.pushManager=this.sw.registration.pipe(ne(j=>j.pushManager));const E=this.pushManager.pipe(Nn(j=>j.getSubscription()));this.subscription=In(E,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Jm));const E={userVisibleOnly:!0};let j=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),te=new Uint8Array(new ArrayBuffer(j.length));for(let ve=0;ve<j.length;ve++)te[ve]=j.charCodeAt(ve);return E.applicationServerKey=te,this.pushManager.pipe(Nn(ve=>ve.subscribe(E)),zl(1)).toPromise().then(ve=>(this.subscriptionChanges.next(ve),ve))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(zl(1),Nn(E=>{if(null===E)throw new Error("Not subscribed to push notifications.");return E.unsubscribe().then(j=>{if(!j)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Jm))}decodeBase64(n){return atob(n)}}return t.\u0275fac=function(n){return new(n||t)(Br(uy))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})(),aA=(()=>{class t{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=gd,this.available=gd,this.activated=gd,void(this.unrecoverable=gd);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Bl(E=>"VERSION_READY"===E.type),ne(E=>({type:"UPDATE_AVAILABLE",current:E.currentVersion,available:E.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jm));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Jm));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}}return t.\u0275fac=function(n){return new(n||t)(Br(uy))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();const sA=new Jr("NGSW_REGISTER_SCRIPT");function SO(t,e,n,E){return()=>{if(!Jx(E)||!("serviceWorker"in navigator)||!1===n.enabled)return;let j;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)j=n.registrationStrategy();else{const[ve,...Be]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(ve){case"registerImmediately":j=_n(null);break;case"registerWithDelay":j=lA(+Be[0]||0);break;case"registerWhenStable":j=Be[0]?In(uA(t),lA(+Be[0])):uA(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Po).runOutsideAngular(()=>j.pipe(zl(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(ve=>console.error("Service worker registration failed with:",ve))))}}function lA(t){return _n(null).pipe(function AO(t,e=zb){const n=function MO(t=0,e,n=iL){let E=-1;return null!=e&&(Pt(e)?n=e:E=e),new R(j=>{let te=function TO(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;te<0&&(te=0);let ve=0;return n.schedule(function(){j.closed||(j.next(ve++),0<=E?this.schedule(void 0,E):j.complete())},te)})}(t,e);return iA(()=>n)}(t))}function uA(t){return t.get(dd).isStable.pipe(Bl(n=>n))}function EO(t,e){return new uy(Jx(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}class jb{}function CO(t,e={}){return function Ud(t){return{\u0275providers:t}}([oA,aA,{provide:sA,useValue:t},{provide:jb,useValue:e},{provide:uy,useFactory:EO,deps:[jb,zu]},{provide:yv,useFactory:SO,deps:[Rc,sA,jb,zu],multi:!0}])}let DO=(()=>{class t{static register(n,E={}){return{ngModule:t,providers:[CO(n,E)]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({providers:[oA,aA]}),t})();class cA{}class IO{}const _f="*";function fA(t,e=null){return{type:2,steps:t,options:e}}function dA(t){return{type:6,styles:t,offset:null}}class Qm{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(E=>E()),n.length=0}}class hA{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,E=0,j=0;const te=this.players.length;0==te?queueMicrotask(()=>this._onFinish()):this.players.forEach(ve=>{ve.onDone(()=>{++n==te&&this._onFinish()}),ve.onDestroy(()=>{++E==te&&this._onDestroy()}),ve.onStart(()=>{++j==te&&this._onStart()})}),this.totalTime=this.players.reduce((ve,Be)=>Math.max(ve,Be.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(E=>{const j=E.totalTime?Math.min(1,n/E.totalTime):1;E.setPosition(j)})}getPosition(){const e=this.players.reduce((n,E)=>null===n||E.totalTime>n.totalTime?E:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(E=>E()),n.length=0}}function pA(t){return new xn(3e3,!1)}function vd(t){switch(t.length){case 0:return new Qm;case 1:return t[0];default:return new hA(t)}}function mA(t,e,n=new Map,E=new Map){const j=[],te=[];let ve=-1,Be=null;if(e.forEach(Qe=>{const at=Qe.get("offset"),Tt=at==ve,Bt=Tt&&Be||new Map;Qe.forEach((vn,kn)=>{let Un=kn,$n=vn;if("offset"!==kn)switch(Un=t.normalizePropertyName(Un,j),$n){case"!":$n=n.get(kn);break;case _f:$n=E.get(kn);break;default:$n=t.normalizeStyleValue(kn,Un,$n,j)}Bt.set(Un,$n)}),Tt||te.push(Bt),Be=Bt,ve=at}),j.length)throw function eP(t){return new xn(3502,!1)}();return te}function Vb(t,e,n,E){switch(e){case"start":t.onStart(()=>E(n&&Hb(n,"start",t)));break;case"done":t.onDone(()=>E(n&&Hb(n,"done",t)));break;case"destroy":t.onDestroy(()=>E(n&&Hb(n,"destroy",t)))}}function Hb(t,e,n){const te=qb(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,n.totalTime??t.totalTime,!!n.disabled),ve=t._data;return null!=ve&&(te._data=ve),te}function qb(t,e,n,E,j="",te=0,ve){return{element:t,triggerName:e,fromState:n,toState:E,phaseName:j,totalTime:te,disabled:!!ve}}function Eu(t,e,n){let E=t.get(e);return E||t.set(e,E=n),E}function gA(t){const e=t.indexOf(":");return[t.substring(1,e),t.slice(e+1)]}const dP=(()=>typeof document>"u"?null:document.documentElement)();function Gb(t){const e=t.parentNode||t.host||null;return e===dP?null:e}let ch=null,vA=!1;function yA(t,e){for(;e;){if(e===t)return!0;e=Gb(e)}return!1}function xA(t,e,n){if(n)return Array.from(t.querySelectorAll(e));const E=t.querySelector(e);return E?[E]:[]}let bA=(()=>{class t{validateStyleProperty(n){return function pP(t){ch||(ch=function mP(){return typeof document<"u"?document.body:null}()||{},vA=!!ch.style&&"WebkitAppearance"in ch.style);let e=!0;return ch.style&&!function hP(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in ch.style,!e&&vA&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in ch.style)),e}(n)}matchesElement(n,E){return!1}containsElement(n,E){return yA(n,E)}getParentElement(n){return Gb(n)}query(n,E,j){return xA(n,E,j)}computeStyle(n,E,j){return j||""}animate(n,E,j,te,ve,Be=[],Qe){return new Qm(j,te)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})(),Wb=(()=>{class t{}return t.NOOP=new bA,t})();const gP=1e3,Zb="ng-enter",cy="ng-leave",fy="ng-trigger",dy=".ng-trigger",wA="ng-animating",Yb=".ng-animating";function wf(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$b(parseFloat(e[1]),e[2])}function $b(t,e){return"s"===e?t*gP:t}function hy(t,e,n){return t.hasOwnProperty("duration")?t:function yP(t,e,n){let j,te=0,ve="";if("string"==typeof t){const Be=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Be)return e.push(pA()),{duration:0,delay:0,easing:""};j=$b(parseFloat(Be[1]),Be[2]);const Qe=Be[3];null!=Qe&&(te=$b(parseFloat(Qe),Be[4]));const at=Be[5];at&&(ve=at)}else j=t;if(!n){let Be=!1,Qe=e.length;j<0&&(e.push(function LO(){return new xn(3100,!1)}()),Be=!0),te<0&&(e.push(function OO(){return new xn(3101,!1)}()),Be=!0),Be&&e.splice(Qe,0,pA())}return{duration:j,delay:te,easing:ve}}(t,e,n)}function eg(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function TA(t){const e=new Map;return Object.keys(t).forEach(n=>{e.set(n,t[n])}),e}function yd(t,e=new Map,n){if(n)for(let[E,j]of n)e.set(E,j);for(let[E,j]of t)e.set(E,j);return e}function qc(t,e,n){e.forEach((E,j)=>{const te=Kb(j);n&&!n.has(j)&&n.set(j,t.style[te]),t.style[te]=E})}function fh(t,e){e.forEach((n,E)=>{const j=Kb(E);t.style[j]=""})}function tg(t){return Array.isArray(t)?1==t.length?t[0]:fA(t):t}const Xb=new RegExp("{{\\s*(.+?)\\s*}}","g");function AA(t){let e=[];if("string"==typeof t){let n;for(;n=Xb.exec(t);)e.push(n[1]);Xb.lastIndex=0}return e}function ng(t,e,n){const E=t.toString(),j=E.replace(Xb,(te,ve)=>{let Be=e[ve];return null==Be&&(n.push(function RO(t){return new xn(3003,!1)}()),Be=""),Be.toString()});return j==E?t:j}function py(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const _P=/-+([a-z0-9])/g;function Kb(t){return t.replace(_P,(...e)=>e[1].toUpperCase())}function Cu(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw function FO(t){return new xn(3004,!1)}()}}function kA(t,e){return window.getComputedStyle(t)[e]}const my="*";function MP(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(E=>function AP(t,e,n){if(":"==t[0]){const Qe=function kP(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,E)=>parseFloat(E)>parseFloat(n);case":decrement":return(n,E)=>parseFloat(E)<parseFloat(n);default:return e.push(function XO(t){return new xn(3016,!1)}()),"* => *"}}(t,n);if("function"==typeof Qe)return void e.push(Qe);t=Qe}const E=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==E||E.length<4)return n.push(function $O(t){return new xn(3015,!1)}()),e;const j=E[1],te=E[2],ve=E[3];e.push(SA(j,ve));"<"==te[0]&&!(j==my&&ve==my)&&e.push(SA(ve,j))}(E,n,e)):n.push(t),n}const gy=new Set(["true","1"]),vy=new Set(["false","0"]);function SA(t,e){const n=gy.has(t)||vy.has(t),E=gy.has(e)||vy.has(e);return(j,te)=>{let ve=t==my||t==j,Be=e==my||e==te;return!ve&&n&&"boolean"==typeof j&&(ve=j?gy.has(t):vy.has(t)),!Be&&E&&"boolean"==typeof te&&(Be=te?gy.has(e):vy.has(e)),ve&&Be}}const SP=new RegExp("s*:selfs*,?","g");function Jb(t,e,n,E){return new EP(t).build(e,n,E)}class EP{constructor(e){this._driver=e}build(e,n,E){const j=new IP(n);return this._resetContextStyleTimingState(j),Cu(this,tg(e),j)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let E=n.queryCount=0,j=n.depCount=0;const te=[],ve=[];return"@"==e.name.charAt(0)&&n.errors.push(function zO(){return new xn(3006,!1)}()),e.definitions.forEach(Be=>{if(this._resetContextStyleTimingState(n),0==Be.type){const Qe=Be,at=Qe.name;at.toString().split(/\s*,\s*/).forEach(Tt=>{Qe.name=Tt,te.push(this.visitState(Qe,n))}),Qe.name=at}else if(1==Be.type){const Qe=this.visitTransition(Be,n);E+=Qe.queryCount,j+=Qe.depCount,ve.push(Qe)}else n.errors.push(function BO(){return new xn(3007,!1)}())}),{type:7,name:e.name,states:te,transitions:ve,queryCount:E,depCount:j,options:null}}visitState(e,n){const E=this.visitStyle(e.styles,n),j=e.options&&e.options.params||null;if(E.containsDynamicStyles){const te=new Set,ve=j||{};E.styles.forEach(Be=>{Be instanceof Map&&Be.forEach(Qe=>{AA(Qe).forEach(at=>{ve.hasOwnProperty(at)||te.add(at)})})}),te.size&&(py(te.values()),n.errors.push(function jO(t,e){return new xn(3008,!1)}()))}return{type:0,name:e.name,style:E,options:j?{params:j}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const E=Cu(this,tg(e.animation),n);return{type:1,matchers:MP(e.expr,n.errors),animation:E,queryCount:n.queryCount,depCount:n.depCount,options:dh(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(E=>Cu(this,E,n)),options:dh(e.options)}}visitGroup(e,n){const E=n.currentTime;let j=0;const te=e.steps.map(ve=>{n.currentTime=E;const Be=Cu(this,ve,n);return j=Math.max(j,n.currentTime),Be});return n.currentTime=j,{type:3,steps:te,options:dh(e.options)}}visitAnimate(e,n){const E=function OP(t,e){if(t.hasOwnProperty("duration"))return t;if("number"==typeof t)return Qb(hy(t,e).duration,0,"");const n=t;if(n.split(/\s+/).some(te=>"{"==te.charAt(0)&&"{"==te.charAt(1))){const te=Qb(0,0,"");return te.dynamic=!0,te.strValue=n,te}const j=hy(n,e);return Qb(j.duration,j.delay,j.easing)}(e.timings,n.errors);n.currentAnimateTimings=E;let j,te=e.styles?e.styles:dA({});if(5==te.type)j=this.visitKeyframes(te,n);else{let ve=e.styles,Be=!1;if(!ve){Be=!0;const at={};E.easing&&(at.easing=E.easing),ve=dA(at)}n.currentTime+=E.duration+E.delay;const Qe=this.visitStyle(ve,n);Qe.isEmptyStep=Be,j=Qe}return n.currentAnimateTimings=null,{type:4,timings:E,style:j,options:null}}visitStyle(e,n){const E=this._makeStyleAst(e,n);return this._validateStyleAst(E,n),E}_makeStyleAst(e,n){const E=[],j=Array.isArray(e.styles)?e.styles:[e.styles];for(let Be of j)"string"==typeof Be?Be===_f?E.push(Be):n.errors.push(new xn(3002,!1)):E.push(TA(Be));let te=!1,ve=null;return E.forEach(Be=>{if(Be instanceof Map&&(Be.has("easing")&&(ve=Be.get("easing"),Be.delete("easing")),!te))for(let Qe of Be.values())if(Qe.toString().indexOf("{{")>=0){te=!0;break}}),{type:6,styles:E,easing:ve,offset:e.offset,containsDynamicStyles:te,options:null}}_validateStyleAst(e,n){const E=n.currentAnimateTimings;let j=n.currentTime,te=n.currentTime;E&&te>0&&(te-=E.duration+E.delay),e.styles.forEach(ve=>{"string"!=typeof ve&&ve.forEach((Be,Qe)=>{const at=n.collectedStyles.get(n.currentQuerySelector),Tt=at.get(Qe);let Bt=!0;Tt&&(te!=j&&te>=Tt.startTime&&j<=Tt.endTime&&(n.errors.push(function VO(t,e,n,E,j){return new xn(3010,!1)}()),Bt=!1),te=Tt.startTime),Bt&&at.set(Qe,{startTime:te,endTime:j}),n.options&&function bP(t,e,n){const E=e.params||{},j=AA(t);j.length&&j.forEach(te=>{E.hasOwnProperty(te)||n.push(function PO(t){return new xn(3001,!1)}())})}(Be,n.options,n.errors)})})}visitKeyframes(e,n){const E={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function HO(){return new xn(3011,!1)}()),E;let te=0;const ve=[];let Be=!1,Qe=!1,at=0;const Tt=e.steps.map(Ir=>{const hr=this._makeStyleAst(Ir,n);let ri=null!=hr.offset?hr.offset:function LP(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){const E=n;e=parseFloat(E.get("offset")),E.delete("offset")}});else if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(hr.styles),li=0;return null!=ri&&(te++,li=hr.offset=ri),Qe=Qe||li<0||li>1,Be=Be||li<at,at=li,ve.push(li),hr});Qe&&n.errors.push(function qO(){return new xn(3012,!1)}()),Be&&n.errors.push(function GO(){return new xn(3200,!1)}());const Bt=e.steps.length;let vn=0;te>0&&te<Bt?n.errors.push(function WO(){return new xn(3202,!1)}()):0==te&&(vn=1/(Bt-1));const kn=Bt-1,Un=n.currentTime,$n=n.currentAnimateTimings,Mr=$n.duration;return Tt.forEach((Ir,hr)=>{const ri=vn>0?hr==kn?1:vn*hr:ve[hr],li=ri*Mr;n.currentTime=Un+$n.delay+li,$n.duration=li,this._validateStyleAst(Ir,n),Ir.offset=ri,E.styles.push(Ir)}),E}visitReference(e,n){return{type:8,animation:Cu(this,tg(e.animation),n),options:dh(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:dh(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:dh(e.options)}}visitQuery(e,n){const E=n.currentQuerySelector,j=e.options||{};n.queryCount++,n.currentQuery=e;const[te,ve]=function CP(t){const e=!!t.split(/\s*,\s*/).find(n=>":self"==n);return e&&(t=t.replace(SP,"")),t=t.replace(/@\*/g,dy).replace(/@\w+/g,n=>dy+"-"+n.slice(1)).replace(/:animating/g,Yb),[t,e]}(e.selector);n.currentQuerySelector=E.length?E+" "+te:te,Eu(n.collectedStyles,n.currentQuerySelector,new Map);const Be=Cu(this,tg(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=E,{type:11,selector:te,limit:j.limit||0,optional:!!j.optional,includeSelf:ve,animation:Be,originalSelector:e.selector,options:dh(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function ZO(){return new xn(3013,!1)}());const E="full"===e.timings?{duration:0,delay:0,easing:"full"}:hy(e.timings,n.errors,!0);return{type:12,animation:Cu(this,tg(e.animation),n),timings:E,options:null}}}class IP{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function dh(t){return t?(t=eg(t)).params&&(t.params=function DP(t){return t?eg(t):null}(t.params)):t={},t}function Qb(t,e,n){return{duration:t,delay:e,easing:n}}function e_(t,e,n,E,j,te,ve=null,Be=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:E,duration:j,delay:te,totalTime:j+te,easing:ve,subTimeline:Be}}class yy{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let E=this._map.get(e);E||this._map.set(e,E=[]),E.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const FP=new RegExp(":enter","g"),zP=new RegExp(":leave","g");function t_(t,e,n,E,j,te=new Map,ve=new Map,Be,Qe,at=[]){return(new BP).buildKeyframes(t,e,n,E,j,te,ve,Be,Qe,at)}class BP{buildKeyframes(e,n,E,j,te,ve,Be,Qe,at,Tt=[]){at=at||new yy;const Bt=new n_(e,n,at,j,te,Tt,[]);Bt.options=Qe;const vn=Qe.delay?wf(Qe.delay):0;Bt.currentTimeline.delayNextStep(vn),Bt.currentTimeline.setStyles([ve],null,Bt.errors,Qe),Cu(this,E,Bt);const kn=Bt.timelines.filter(Un=>Un.containsAnimation());if(kn.length&&Be.size){let Un;for(let $n=kn.length-1;$n>=0;$n--){const Mr=kn[$n];if(Mr.element===n){Un=Mr;break}}Un&&!Un.allowOnlyTimelineStyles()&&Un.setStyles([Be],null,Bt.errors,Qe)}return kn.length?kn.map(Un=>Un.buildKeyframes()):[e_(n,[],[],[],0,vn,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const E=n.subInstructions.get(n.element);if(E){const j=n.createSubContext(e.options),te=n.currentTimeline.currentTime,ve=this._visitSubInstructions(E,j,j.options);te!=ve&&n.transformIntoNewTimeline(ve)}n.previousNode=e}visitAnimateRef(e,n){const E=n.createSubContext(e.options);E.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,E),this.visitReference(e.animation,E),n.transformIntoNewTimeline(E.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,E){for(const j of e){const te=j?.delay;if(te){const ve="number"==typeof te?te:wf(ng(te,j?.params??{},n.errors));E.delayNextStep(ve)}}}_visitSubInstructions(e,n,E){let te=n.currentTimeline.currentTime;const ve=null!=E.duration?wf(E.duration):null,Be=null!=E.delay?wf(E.delay):null;return 0!==ve&&e.forEach(Qe=>{const at=n.appendInstructionToTimeline(Qe,ve,Be);te=Math.max(te,at.duration+at.delay)}),te}visitReference(e,n){n.updateOptions(e.options,!0),Cu(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const E=n.subContextCount;let j=n;const te=e.options;if(te&&(te.params||te.delay)&&(j=n.createSubContext(te),j.transformIntoNewTimeline(),null!=te.delay)){6==j.previousNode.type&&(j.currentTimeline.snapshotCurrentStyles(),j.previousNode=xy);const ve=wf(te.delay);j.delayNextStep(ve)}e.steps.length&&(e.steps.forEach(ve=>Cu(this,ve,j)),j.currentTimeline.applyStylesToKeyframe(),j.subContextCount>E&&j.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const E=[];let j=n.currentTimeline.currentTime;const te=e.options&&e.options.delay?wf(e.options.delay):0;e.steps.forEach(ve=>{const Be=n.createSubContext(e.options);te&&Be.delayNextStep(te),Cu(this,ve,Be),j=Math.max(j,Be.currentTimeline.currentTime),E.push(Be.currentTimeline)}),E.forEach(ve=>n.currentTimeline.mergeTimelineCollectedStyles(ve)),n.transformIntoNewTimeline(j),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const E=e.strValue;return hy(n.params?ng(E,n.params,n.errors):E,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const E=n.currentAnimateTimings=this._visitTiming(e.timings,n),j=n.currentTimeline;E.delay&&(n.incrementTime(E.delay),j.snapshotCurrentStyles());const te=e.style;5==te.type?this.visitKeyframes(te,n):(n.incrementTime(E.duration),this.visitStyle(te,n),j.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const E=n.currentTimeline,j=n.currentAnimateTimings;!j&&E.hasCurrentStyleProperties()&&E.forwardFrame();const te=j&&j.easing||e.easing;e.isEmptyStep?E.applyEmptyStep(te):E.setStyles(e.styles,te,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const E=n.currentAnimateTimings,j=n.currentTimeline.duration,te=E.duration,Be=n.createSubContext().currentTimeline;Be.easing=E.easing,e.styles.forEach(Qe=>{Be.forwardTime((Qe.offset||0)*te),Be.setStyles(Qe.styles,Qe.easing,n.errors,n.options),Be.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(Be),n.transformIntoNewTimeline(j+te),n.previousNode=e}visitQuery(e,n){const E=n.currentTimeline.currentTime,j=e.options||{},te=j.delay?wf(j.delay):0;te&&(6===n.previousNode.type||0==E&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=xy);let ve=E;const Be=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!j.optional,n.errors);n.currentQueryTotal=Be.length;let Qe=null;Be.forEach((at,Tt)=>{n.currentQueryIndex=Tt;const Bt=n.createSubContext(e.options,at);te&&Bt.delayNextStep(te),at===n.element&&(Qe=Bt.currentTimeline),Cu(this,e.animation,Bt),Bt.currentTimeline.applyStylesToKeyframe(),ve=Math.max(ve,Bt.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(ve),Qe&&(n.currentTimeline.mergeTimelineCollectedStyles(Qe),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const E=n.parentContext,j=n.currentTimeline,te=e.timings,ve=Math.abs(te.duration),Be=ve*(n.currentQueryTotal-1);let Qe=ve*n.currentQueryIndex;switch(te.duration<0?"reverse":te.easing){case"reverse":Qe=Be-Qe;break;case"full":Qe=E.currentStaggerTime}const Tt=n.currentTimeline;Qe&&Tt.delayNextStep(Qe);const Bt=Tt.currentTime;Cu(this,e.animation,n),n.previousNode=e,E.currentStaggerTime=j.currentTime-Bt+(j.startTime-E.currentTimeline.startTime)}}const xy={};class n_{constructor(e,n,E,j,te,ve,Be,Qe){this._driver=e,this.element=n,this.subInstructions=E,this._enterClassName=j,this._leaveClassName=te,this.errors=ve,this.timelines=Be,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Qe||new by(this._driver,n,0),Be.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const E=e;let j=this.options;null!=E.duration&&(j.duration=wf(E.duration)),null!=E.delay&&(j.delay=wf(E.delay));const te=E.params;if(te){let ve=j.params;ve||(ve=this.options.params={}),Object.keys(te).forEach(Be=>{(!n||!ve.hasOwnProperty(Be))&&(ve[Be]=ng(te[Be],ve,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const E=e.params={};Object.keys(n).forEach(j=>{E[j]=n[j]})}}return e}createSubContext(e=null,n,E){const j=n||this.element,te=new n_(this._driver,j,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(j,E||0));return te.previousNode=this.previousNode,te.currentAnimateTimings=this.currentAnimateTimings,te.options=this._copyOptions(),te.updateOptions(e),te.currentQueryIndex=this.currentQueryIndex,te.currentQueryTotal=this.currentQueryTotal,te.parentContext=this,this.subContextCount++,te}transformIntoNewTimeline(e){return this.previousNode=xy,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,E){const j={duration:n??e.duration,delay:this.currentTimeline.currentTime+(E??0)+e.delay,easing:""},te=new jP(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,j,e.stretchStartingKeyframe);return this.timelines.push(te),j}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,E,j,te,ve){let Be=[];if(j&&Be.push(this.element),e.length>0){e=(e=e.replace(FP,"."+this._enterClassName)).replace(zP,"."+this._leaveClassName);let at=this._driver.query(this.element,e,1!=E);0!==E&&(at=E<0?at.slice(at.length+E,at.length):at.slice(0,E)),Be.push(...at)}return!te&&0==Be.length&&ve.push(function YO(t){return new xn(3014,!1)}()),Be}}class by{constructor(e,n,E,j){this._driver=e,this.element=n,this.startTime=E,this._elementTimelineStylesLookup=j,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new by(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,E]of this._globalTimelineStyles)this._backFill.set(n,E||_f),this._currentKeyframe.set(n,_f);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,E,j){n&&this._previousKeyframe.set("easing",n);const te=j&&j.params||{},ve=function UP(t,e){const n=new Map;let E;return t.forEach(j=>{if("*"===j){E=E||e.keys();for(let te of E)n.set(te,_f)}else yd(j,n)}),n}(e,this._globalTimelineStyles);for(let[Be,Qe]of ve){const at=ng(Qe,te,E);this._pendingStyles.set(Be,at),this._localTimelineStyles.has(Be)||this._backFill.set(Be,this._globalTimelineStyles.get(Be)??_f),this._updateStyle(Be,at)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,E)=>{const j=this._styleSummary.get(E);(!j||n.time>j.time)&&this._updateStyle(E,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,E=1===this._keyframes.size&&0===this.duration;let j=[];this._keyframes.forEach((Be,Qe)=>{const at=yd(Be,new Map,this._backFill);at.forEach((Tt,Bt)=>{"!"===Tt?e.add(Bt):Tt===_f&&n.add(Bt)}),E||at.set("offset",Qe/this.duration),j.push(at)});const te=e.size?py(e.values()):[],ve=n.size?py(n.values()):[];if(E){const Be=j[0],Qe=new Map(Be);Be.set("offset",0),Qe.set("offset",1),j=[Be,Qe]}return e_(this.element,j,te,ve,this.duration,this.startTime,this.easing,!1)}}class jP extends by{constructor(e,n,E,j,te,ve,Be=!1){super(e,n,ve.delay),this.keyframes=E,this.preStyleProps=j,this.postStyleProps=te,this._stretchStartingKeyframe=Be,this.timings={duration:ve.duration,delay:ve.delay,easing:ve.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:E,easing:j}=this.timings;if(this._stretchStartingKeyframe&&n){const te=[],ve=E+n,Be=n/ve,Qe=yd(e[0]);Qe.set("offset",0),te.push(Qe);const at=yd(e[0]);at.set("offset",DA(Be)),te.push(at);const Tt=e.length-1;for(let Bt=1;Bt<=Tt;Bt++){let vn=yd(e[Bt]);const kn=vn.get("offset");vn.set("offset",DA((n+kn*E)/ve)),te.push(vn)}E=ve,n=0,j="",e=te}return e_(this.element,e,this.preStyleProps,this.postStyleProps,E,n,j,!0)}}function DA(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class r_{}const VP=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class HP extends r_{normalizePropertyName(e,n){return Kb(e)}normalizeStyleValue(e,n,E,j){let te="";const ve=E.toString().trim();if(VP.has(n)&&0!==E&&"0"!==E)if("number"==typeof E)te="px";else{const Be=E.match(/^[+-]?[\d\.]+([a-z]*)$/);Be&&0==Be[1].length&&j.push(function NO(t,e){return new xn(3005,!1)}())}return ve+te}}function IA(t,e,n,E,j,te,ve,Be,Qe,at,Tt,Bt,vn){return{type:0,element:t,triggerName:e,isRemovalTransition:j,fromState:n,fromStyles:te,toState:E,toStyles:ve,timelines:Be,queriedElements:Qe,preStyleProps:at,postStyleProps:Tt,totalTime:Bt,errors:vn}}const i_={};class LA{constructor(e,n,E){this._triggerName=e,this.ast=n,this._stateStyles=E}match(e,n,E,j){return function qP(t,e,n,E,j){return t.some(te=>te(e,n,E,j))}(this.ast.matchers,e,n,E,j)}buildStyles(e,n,E){let j=this._stateStyles.get("*");return void 0!==e&&(j=this._stateStyles.get(e?.toString())||j),j?j.buildStyles(n,E):new Map}build(e,n,E,j,te,ve,Be,Qe,at,Tt){const Bt=[],vn=this.ast.options&&this.ast.options.params||i_,Un=this.buildStyles(E,Be&&Be.params||i_,Bt),$n=Qe&&Qe.params||i_,Mr=this.buildStyles(j,$n,Bt),Ir=new Set,hr=new Map,ri=new Map,li="void"===j,Ci={params:GP($n,vn),delay:this.ast.options?.delay},sa=Tt?[]:t_(e,n,this.ast.animation,te,ve,Un,Mr,Ci,at,Bt);let bs=0;if(sa.forEach(yc=>{bs=Math.max(yc.duration+yc.delay,bs)}),Bt.length)return IA(n,this._triggerName,E,j,li,Un,Mr,[],[],hr,ri,bs,Bt);sa.forEach(yc=>{const Tf=yc.element,ZA=Eu(hr,Tf,new Set);yc.preStyleProps.forEach(hh=>ZA.add(hh));const ig=Eu(ri,Tf,new Set);yc.postStyleProps.forEach(hh=>ig.add(hh)),Tf!==n&&Ir.add(Tf)});const vc=py(Ir.values());return IA(n,this._triggerName,E,j,li,Un,Mr,sa,vc,hr,ri,bs)}}function GP(t,e){const n=eg(e);for(const E in t)t.hasOwnProperty(E)&&null!=t[E]&&(n[E]=t[E]);return n}class WP{constructor(e,n,E){this.styles=e,this.defaultParams=n,this.normalizer=E}buildStyles(e,n){const E=new Map,j=eg(this.defaultParams);return Object.keys(e).forEach(te=>{const ve=e[te];null!==ve&&(j[te]=ve)}),this.styles.styles.forEach(te=>{"string"!=typeof te&&te.forEach((ve,Be)=>{ve&&(ve=ng(ve,j,n));const Qe=this.normalizer.normalizePropertyName(Be,n);ve=this.normalizer.normalizeStyleValue(Be,Qe,ve,n),E.set(Be,ve)})}),E}}class YP{constructor(e,n,E){this.name=e,this.ast=n,this._normalizer=E,this.transitionFactories=[],this.states=new Map,n.states.forEach(j=>{this.states.set(j.name,new WP(j.style,j.options&&j.options.params||{},E))}),OA(this.states,"true","1"),OA(this.states,"false","0"),n.transitions.forEach(j=>{this.transitionFactories.push(new LA(e,j,this.states))}),this.fallbackTransition=function $P(t,e,n){return new LA(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ve,Be)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,E,j){return this.transitionFactories.find(ve=>ve.match(e,n,E,j))||null}matchStyles(e,n,E){return this.fallbackTransition.buildStyles(e,n,E)}}function OA(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}const XP=new yy;class KP{constructor(e,n,E){this.bodyNode=e,this._driver=n,this._normalizer=E,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const E=[],te=Jb(this._driver,n,E,[]);if(E.length)throw function tP(t){return new xn(3503,!1)}();this._animations.set(e,te)}_buildPlayer(e,n,E){const j=e.element,te=mA(this._normalizer,e.keyframes,n,E);return this._driver.animate(j,te,e.duration,e.delay,e.easing,[],!0)}create(e,n,E={}){const j=[],te=this._animations.get(e);let ve;const Be=new Map;if(te?(ve=t_(this._driver,n,te,Zb,cy,new Map,new Map,E,XP,j),ve.forEach(Tt=>{const Bt=Eu(Be,Tt.element,new Map);Tt.postStyleProps.forEach(vn=>Bt.set(vn,null))})):(j.push(function nP(){return new xn(3300,!1)}()),ve=[]),j.length)throw function rP(t){return new xn(3504,!1)}();Be.forEach((Tt,Bt)=>{Tt.forEach((vn,kn)=>{Tt.set(kn,this._driver.computeStyle(Bt,kn,_f))})});const at=vd(ve.map(Tt=>{const Bt=Be.get(Tt.element);return this._buildPlayer(Tt,new Map,Bt)}));return this._playersById.set(e,at),at.onDestroy(()=>this.destroy(e)),this.players.push(at),at}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const E=this.players.indexOf(n);E>=0&&this.players.splice(E,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function iP(t){return new xn(3301,!1)}();return n}listen(e,n,E,j){const te=qb(n,"","","");return Vb(this._getPlayer(e),E,te,j),()=>{}}command(e,n,E,j){if("register"==E)return void this.register(e,j[0]);if("create"==E)return void this.create(e,n,j[0]||{});const te=this._getPlayer(e);switch(E){case"play":te.play();break;case"pause":te.pause();break;case"reset":te.reset();break;case"restart":te.restart();break;case"finish":te.finish();break;case"init":te.init();break;case"setPosition":te.setPosition(parseFloat(j[0]));break;case"destroy":this.destroy(e)}}}const PA="ng-animate-queued",o_="ng-animate-disabled",nR=[],RA={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},rR={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qu="__ng_removed";class a_{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const E=e&&e.hasOwnProperty("value");if(this.value=function sR(t){return t??null}(E?e.value:e),E){const te=eg(e);delete te.value,this.options=te}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const E=this.options.params;Object.keys(n).forEach(j=>{null==E[j]&&(E[j]=n[j])})}}}const rg="void",s_=new a_(rg);class iR{constructor(e,n,E){this.id=e,this.hostElement=n,this._engine=E,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gu(n,this._hostClassName)}listen(e,n,E,j){if(!this._triggers.has(n))throw function oP(t,e){return new xn(3302,!1)}();if(null==E||0==E.length)throw function aP(t){return new xn(3303,!1)}();if(!function lR(t){return"start"==t||"done"==t}(E))throw function sP(t,e){return new xn(3400,!1)}();const te=Eu(this._elementListeners,e,[]),ve={name:n,phase:E,callback:j};te.push(ve);const Be=Eu(this._engine.statesByElement,e,new Map);return Be.has(n)||(Gu(e,fy),Gu(e,fy+"-"+n),Be.set(n,s_)),()=>{this._engine.afterFlush(()=>{const Qe=te.indexOf(ve);Qe>=0&&te.splice(Qe,1),this._triggers.has(n)||Be.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function lP(t){return new xn(3401,!1)}();return n}trigger(e,n,E,j=!0){const te=this._getTrigger(n),ve=new l_(this.id,n,e);let Be=this._engine.statesByElement.get(e);Be||(Gu(e,fy),Gu(e,fy+"-"+n),this._engine.statesByElement.set(e,Be=new Map));let Qe=Be.get(n);const at=new a_(E,this.id);if(!(E&&E.hasOwnProperty("value"))&&Qe&&at.absorbOptions(Qe.options),Be.set(n,at),Qe||(Qe=s_),at.value!==rg&&Qe.value===at.value){if(!function fR(t,e){const n=Object.keys(t),E=Object.keys(e);if(n.length!=E.length)return!1;for(let j=0;j<n.length;j++){const te=n[j];if(!e.hasOwnProperty(te)||t[te]!==e[te])return!1}return!0}(Qe.params,at.params)){const $n=[],Mr=te.matchStyles(Qe.value,Qe.params,$n),Ir=te.matchStyles(at.value,at.params,$n);$n.length?this._engine.reportError($n):this._engine.afterFlush(()=>{fh(e,Mr),qc(e,Ir)})}return}const vn=Eu(this._engine.playersByElement,e,[]);vn.forEach($n=>{$n.namespaceId==this.id&&$n.triggerName==n&&$n.queued&&$n.destroy()});let kn=te.matchTransition(Qe.value,at.value,e,at.params),Un=!1;if(!kn){if(!j)return;kn=te.fallbackTransition,Un=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:kn,fromState:Qe,toState:at,player:ve,isFallbackTransition:Un}),Un||(Gu(e,PA),ve.onStart(()=>{o0(e,PA)})),ve.onDone(()=>{let $n=this.players.indexOf(ve);$n>=0&&this.players.splice($n,1);const Mr=this._engine.playersByElement.get(e);if(Mr){let Ir=Mr.indexOf(ve);Ir>=0&&Mr.splice(Ir,1)}}),this.players.push(ve),vn.push(ve),ve}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,E)=>{this._elementListeners.set(E,n.filter(j=>j.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(E=>E.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const E=this._engine.driver.query(e,dy,!0);E.forEach(j=>{if(j[qu])return;const te=this._engine.fetchNamespacesByElement(j);te.size?te.forEach(ve=>ve.triggerLeaveAnimation(j,n,!1,!0)):this.clearElementCache(j)}),this._engine.afterFlushAnimationsDone(()=>E.forEach(j=>this.clearElementCache(j)))}triggerLeaveAnimation(e,n,E,j){const te=this._engine.statesByElement.get(e),ve=new Map;if(te){const Be=[];if(te.forEach((Qe,at)=>{if(ve.set(at,Qe.value),this._triggers.has(at)){const Tt=this.trigger(e,at,rg,j);Tt&&Be.push(Tt)}}),Be.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,ve),E&&vd(Be).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),E=this._engine.statesByElement.get(e);if(n&&E){const j=new Set;n.forEach(te=>{const ve=te.name;if(j.has(ve))return;j.add(ve);const Qe=this._triggers.get(ve).fallbackTransition,at=E.get(ve)||s_,Tt=new a_(rg),Bt=new l_(this.id,ve,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:ve,transition:Qe,fromState:at,toState:Tt,player:Bt,isFallbackTransition:!0})})}}removeNode(e,n){const E=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let j=!1;if(E.totalAnimations){const te=E.players.length?E.playersByQueriedElement.get(e):[];if(te&&te.length)j=!0;else{let ve=e;for(;ve=ve.parentNode;)if(E.statesByElement.get(ve)){j=!0;break}}}if(this.prepareLeaveAnimationListeners(e),j)E.markElementAsRemoved(this.id,e,!1,n);else{const te=e[qu];(!te||te===RA)&&(E.afterFlush(()=>this.clearElementCache(e)),E.destroyInnerAnimations(e),E._onRemovalComplete(e,n))}}insertNode(e,n){Gu(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(E=>{const j=E.player;if(j.destroyed)return;const te=E.element,ve=this._elementListeners.get(te);ve&&ve.forEach(Be=>{if(Be.name==E.triggerName){const Qe=qb(te,E.triggerName,E.fromState.value,E.toState.value);Qe._data=e,Vb(E.player,Be.phase,Qe,Be.callback)}}),j.markedForDestroy?this._engine.afterFlush(()=>{j.destroy()}):n.push(E)}),this._queue=[],n.sort((E,j)=>{const te=E.transition.ast.depCount,ve=j.transition.ast.depCount;return 0==te||0==ve?te-ve:this._engine.driver.containsElement(E.element,j.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let n=!1;return this._elementListeners.has(e)&&(n=!0),n=!!this._queue.find(E=>E.element===e)||n,n}}class oR{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,E){this.bodyNode=e,this.driver=n,this._normalizer=E,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(j,te)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(E=>{E.queued&&e.push(E)})}),e}createNamespace(e,n){const E=new iR(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(E,n):(this.newHostElements.set(n,E),this.collectEnterElement(n)),this._namespaceLookup[e]=E}_balanceNamespaceList(e,n){const E=this._namespaceList,j=this.namespacesByHostElement;if(E.length-1>=0){let ve=!1,Be=this.driver.getParentElement(n);for(;Be;){const Qe=j.get(Be);if(Qe){const at=E.indexOf(Qe);E.splice(at+1,0,e),ve=!0;break}Be=this.driver.getParentElement(Be)}ve||E.unshift(e)}else E.push(e);return j.set(n,e),e}register(e,n){let E=this._namespaceLookup[e];return E||(E=this.createNamespace(e,n)),E}registerTrigger(e,n,E){let j=this._namespaceLookup[e];j&&j.register(n,E)&&this.totalAnimations++}destroy(e,n){if(!e)return;const E=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(E.hostElement),delete this._namespaceLookup[e];const j=this._namespaceList.indexOf(E);j>=0&&this._namespaceList.splice(j,1)}),this.afterFlushAnimationsDone(()=>E.destroy(n))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,E=this.statesByElement.get(e);if(E)for(let j of E.values())if(j.namespaceId){const te=this._fetchNamespace(j.namespaceId);te&&n.add(te)}return n}trigger(e,n,E,j){if(_y(n)){const te=this._fetchNamespace(e);if(te)return te.trigger(n,E,j),!0}return!1}insertNode(e,n,E,j){if(!_y(n))return;const te=n[qu];if(te&&te.setForRemoval){te.setForRemoval=!1,te.setForMove=!0;const ve=this.collectedLeaveElements.indexOf(n);ve>=0&&this.collectedLeaveElements.splice(ve,1)}if(e){const ve=this._fetchNamespace(e);ve&&ve.insertNode(n,E)}j&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gu(e,o_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),o0(e,o_))}removeNode(e,n,E){if(_y(n)){const j=e?this._fetchNamespace(e):null;j?j.removeNode(n,E):this.markElementAsRemoved(e,n,!1,E);const te=this.namespacesByHostElement.get(n);te&&te.id!==e&&te.removeNode(n,E)}else this._onRemovalComplete(n,E)}markElementAsRemoved(e,n,E,j,te){this.collectedLeaveElements.push(n),n[qu]={namespaceId:e,setForRemoval:j,hasAnimation:E,removedBeforeQueried:!1,previousTriggersValues:te}}listen(e,n,E,j,te){return _y(n)?this._fetchNamespace(e).listen(n,E,j,te):()=>{}}_buildInstruction(e,n,E,j,te){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,E,j,e.fromState.options,e.toState.options,n,te)}destroyInnerAnimations(e){let n=this.driver.query(e,dy,!0);n.forEach(E=>this.destroyActiveAnimationsForElement(E)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,Yb,!0),n.forEach(E=>this.finishActiveQueriedAnimationOnElement(E)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(E=>{E.queued?E.markedForDestroy=!0:E.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(E=>E.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return vd(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[qu];if(n&&n.setForRemoval){if(e[qu]=RA,n.namespaceId){this.destroyInnerAnimations(e);const E=this._fetchNamespace(n.namespaceId);E&&E.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(o_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(E=>{this.markElementAsDisabled(E,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((E,j)=>this._balanceNamespaceList(E,j)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let E=0;E<this.collectedEnterElements.length;E++)Gu(this.collectedEnterElements[E],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const E=[];try{n=this._flushAnimations(E,e)}finally{for(let j=0;j<E.length;j++)E[j]()}}else for(let E=0;E<this.collectedLeaveElements.length;E++)this.processLeaveNode(this.collectedLeaveElements[E]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(E=>E()),this._flushFns=[],this._whenQuietFns.length){const E=this._whenQuietFns;this._whenQuietFns=[],n.length?vd(n).onDone(()=>{E.forEach(j=>j())}):E.forEach(j=>j())}}reportError(e){throw function uP(t){return new xn(3402,!1)}()}_flushAnimations(e,n){const E=new yy,j=[],te=new Map,ve=[],Be=new Map,Qe=new Map,at=new Map,Tt=new Set;this.disabledNodes.forEach(fi=>{Tt.add(fi);const Ti=this.driver.query(fi,".ng-animate-queued",!0);for(let Di=0;Di<Ti.length;Di++)Tt.add(Ti[Di])});const Bt=this.bodyNode,vn=Array.from(this.statesByElement.keys()),kn=zA(vn,this.collectedEnterElements),Un=new Map;let $n=0;kn.forEach((fi,Ti)=>{const Di=Zb+$n++;Un.set(Ti,Di),fi.forEach(Eo=>Gu(Eo,Di))});const Mr=[],Ir=new Set,hr=new Set;for(let fi=0;fi<this.collectedLeaveElements.length;fi++){const Ti=this.collectedLeaveElements[fi],Di=Ti[qu];Di&&Di.setForRemoval&&(Mr.push(Ti),Ir.add(Ti),Di.hasAnimation?this.driver.query(Ti,".ng-star-inserted",!0).forEach(Eo=>Ir.add(Eo)):hr.add(Ti))}const ri=new Map,li=zA(vn,Array.from(Ir));li.forEach((fi,Ti)=>{const Di=cy+$n++;ri.set(Ti,Di),fi.forEach(Eo=>Gu(Eo,Di))}),e.push(()=>{kn.forEach((fi,Ti)=>{const Di=Un.get(Ti);fi.forEach(Eo=>o0(Eo,Di))}),li.forEach((fi,Ti)=>{const Di=ri.get(Ti);fi.forEach(Eo=>o0(Eo,Di))}),Mr.forEach(fi=>{this.processLeaveNode(fi)})});const Ci=[],sa=[];for(let fi=this._namespaceList.length-1;fi>=0;fi--)this._namespaceList[fi].drainQueuedTransitions(n).forEach(Di=>{const Eo=Di.player,$s=Di.element;if(Ci.push(Eo),this.collectedEnterElements.length){const Ml=$s[qu];if(Ml&&Ml.setForMove){if(Ml.previousTriggersValues&&Ml.previousTriggersValues.has(Di.triggerName)){const ph=Ml.previousTriggersValues.get(Di.triggerName),Wu=this.statesByElement.get(Di.element);if(Wu&&Wu.has(Di.triggerName)){const My=Wu.get(Di.triggerName);My.value=ph,Wu.set(Di.triggerName,My)}}return void Eo.destroy()}}const Gc=!Bt||!this.driver.containsElement(Bt,$s),Du=ri.get($s),xd=Un.get($s),Ba=this._buildInstruction(Di,E,xd,Du,Gc);if(Ba.errors&&Ba.errors.length)return void sa.push(Ba);if(Gc)return Eo.onStart(()=>fh($s,Ba.fromStyles)),Eo.onDestroy(()=>qc($s,Ba.toStyles)),void j.push(Eo);if(Di.isFallbackTransition)return Eo.onStart(()=>fh($s,Ba.fromStyles)),Eo.onDestroy(()=>qc($s,Ba.toStyles)),void j.push(Eo);const XA=[];Ba.timelines.forEach(Ml=>{Ml.stretchStartingKeyframe=!0,this.disabledNodes.has(Ml.element)||XA.push(Ml)}),Ba.timelines=XA,E.append($s,Ba.timelines),ve.push({instruction:Ba,player:Eo,element:$s}),Ba.queriedElements.forEach(Ml=>Eu(Be,Ml,[]).push(Eo)),Ba.preStyleProps.forEach((Ml,ph)=>{if(Ml.size){let Wu=Qe.get(ph);Wu||Qe.set(ph,Wu=new Set),Ml.forEach((My,f_)=>Wu.add(f_))}}),Ba.postStyleProps.forEach((Ml,ph)=>{let Wu=at.get(ph);Wu||at.set(ph,Wu=new Set),Ml.forEach((My,f_)=>Wu.add(f_))})});if(sa.length){const fi=[];sa.forEach(Ti=>{fi.push(function cP(t,e){return new xn(3505,!1)}())}),Ci.forEach(Ti=>Ti.destroy()),this.reportError(fi)}const bs=new Map,vc=new Map;ve.forEach(fi=>{const Ti=fi.element;E.has(Ti)&&(vc.set(Ti,Ti),this._beforeAnimationBuild(fi.player.namespaceId,fi.instruction,bs))}),j.forEach(fi=>{const Ti=fi.element;this._getPreviousPlayers(Ti,!1,fi.namespaceId,fi.triggerName,null).forEach(Eo=>{Eu(bs,Ti,[]).push(Eo),Eo.destroy()})});const yc=Mr.filter(fi=>jA(fi,Qe,at)),Tf=new Map;NA(Tf,this.driver,hr,at,_f).forEach(fi=>{jA(fi,Qe,at)&&yc.push(fi)});const ig=new Map;kn.forEach((fi,Ti)=>{NA(ig,this.driver,new Set(fi),Qe,"!")}),yc.forEach(fi=>{const Ti=Tf.get(fi),Di=ig.get(fi);Tf.set(fi,new Map([...Ti?.entries()??[],...Di?.entries()??[]]))});const hh=[],YA=[],$A={};ve.forEach(fi=>{const{element:Ti,player:Di,instruction:Eo}=fi;if(E.has(Ti)){if(Tt.has(Ti))return Di.onDestroy(()=>qc(Ti,Eo.toStyles)),Di.disabled=!0,Di.overrideTotalTime(Eo.totalTime),void j.push(Di);let $s=$A;if(vc.size>1){let Du=Ti;const xd=[];for(;Du=Du.parentNode;){const Ba=vc.get(Du);if(Ba){$s=Ba;break}xd.push(Du)}xd.forEach(Ba=>vc.set(Ba,$s))}const Gc=this._buildAnimation(Di.namespaceId,Eo,bs,te,ig,Tf);if(Di.setRealPlayer(Gc),$s===$A)hh.push(Di);else{const Du=this.playersByElement.get($s);Du&&Du.length&&(Di.parentPlayer=vd(Du)),j.push(Di)}}else fh(Ti,Eo.fromStyles),Di.onDestroy(()=>qc(Ti,Eo.toStyles)),YA.push(Di),Tt.has(Ti)&&j.push(Di)}),YA.forEach(fi=>{const Ti=te.get(fi.element);if(Ti&&Ti.length){const Di=vd(Ti);fi.setRealPlayer(Di)}}),j.forEach(fi=>{fi.parentPlayer?fi.syncPlayerEvents(fi.parentPlayer):fi.destroy()});for(let fi=0;fi<Mr.length;fi++){const Ti=Mr[fi],Di=Ti[qu];if(o0(Ti,cy),Di&&Di.hasAnimation)continue;let Eo=[];if(Be.size){let Gc=Be.get(Ti);Gc&&Gc.length&&Eo.push(...Gc);let Du=this.driver.query(Ti,Yb,!0);for(let xd=0;xd<Du.length;xd++){let Ba=Be.get(Du[xd]);Ba&&Ba.length&&Eo.push(...Ba)}}const $s=Eo.filter(Gc=>!Gc.destroyed);$s.length?uR(this,Ti,$s):this.processLeaveNode(Ti)}return Mr.length=0,hh.forEach(fi=>{this.players.push(fi),fi.onDone(()=>{fi.destroy();const Ti=this.players.indexOf(fi);this.players.splice(Ti,1)}),fi.play()}),hh}elementContainsData(e,n){let E=!1;const j=n[qu];return j&&j.setForRemoval&&(E=!0),this.playersByElement.has(n)&&(E=!0),this.playersByQueriedElement.has(n)&&(E=!0),this.statesByElement.has(n)&&(E=!0),this._fetchNamespace(e).elementContainsData(n)||E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,E,j,te){let ve=[];if(n){const Be=this.playersByQueriedElement.get(e);Be&&(ve=Be)}else{const Be=this.playersByElement.get(e);if(Be){const Qe=!te||te==rg;Be.forEach(at=>{at.queued||!Qe&&at.triggerName!=j||ve.push(at)})}}return(E||j)&&(ve=ve.filter(Be=>!(E&&E!=Be.namespaceId||j&&j!=Be.triggerName))),ve}_beforeAnimationBuild(e,n,E){const te=n.element,ve=n.isRemovalTransition?void 0:e,Be=n.isRemovalTransition?void 0:n.triggerName;for(const Qe of n.timelines){const at=Qe.element,Tt=at!==te,Bt=Eu(E,at,[]);this._getPreviousPlayers(at,Tt,ve,Be,n.toState).forEach(kn=>{const Un=kn.getRealPlayer();Un.beforeDestroy&&Un.beforeDestroy(),kn.destroy(),Bt.push(kn)})}fh(te,n.fromStyles)}_buildAnimation(e,n,E,j,te,ve){const Be=n.triggerName,Qe=n.element,at=[],Tt=new Set,Bt=new Set,vn=n.timelines.map(Un=>{const $n=Un.element;Tt.add($n);const Mr=$n[qu];if(Mr&&Mr.removedBeforeQueried)return new Qm(Un.duration,Un.delay);const Ir=$n!==Qe,hr=function cR(t){const e=[];return BA(t,e),e}((E.get($n)||nR).map(bs=>bs.getRealPlayer())).filter(bs=>!!bs.element&&bs.element===$n),ri=te.get($n),li=ve.get($n),Ci=mA(this._normalizer,Un.keyframes,ri,li),sa=this._buildPlayer(Un,Ci,hr);if(Un.subTimeline&&j&&Bt.add($n),Ir){const bs=new l_(e,Be,$n);bs.setRealPlayer(sa),at.push(bs)}return sa});at.forEach(Un=>{Eu(this.playersByQueriedElement,Un.element,[]).push(Un),Un.onDone(()=>function aR(t,e,n){let E=t.get(e);if(E){if(E.length){const j=E.indexOf(n);E.splice(j,1)}0==E.length&&t.delete(e)}return E}(this.playersByQueriedElement,Un.element,Un))}),Tt.forEach(Un=>Gu(Un,wA));const kn=vd(vn);return kn.onDestroy(()=>{Tt.forEach(Un=>o0(Un,wA)),qc(Qe,n.toStyles)}),Bt.forEach(Un=>{Eu(j,Un,[]).push(kn)}),kn}_buildPlayer(e,n,E){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,E):new Qm(e.duration,e.delay)}}class l_{constructor(e,n,E){this.namespaceId=e,this.triggerName=n,this.element=E,this._player=new Qm,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,E)=>{n.forEach(j=>Vb(e,E,void 0,j))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Eu(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function _y(t){return t&&1===t.nodeType}function FA(t,e){const n=t.style.display;return t.style.display=e??"none",n}function NA(t,e,n,E,j){const te=[];n.forEach(Qe=>te.push(FA(Qe)));const ve=[];E.forEach((Qe,at)=>{const Tt=new Map;Qe.forEach(Bt=>{const vn=e.computeStyle(at,Bt,j);Tt.set(Bt,vn),(!vn||0==vn.length)&&(at[qu]=rR,ve.push(at))}),t.set(at,Tt)});let Be=0;return n.forEach(Qe=>FA(Qe,te[Be++])),ve}function zA(t,e){const n=new Map;if(t.forEach(Be=>n.set(Be,[])),0==e.length)return n;const j=new Set(e),te=new Map;function ve(Be){if(!Be)return 1;let Qe=te.get(Be);if(Qe)return Qe;const at=Be.parentNode;return Qe=n.has(at)?at:j.has(at)?1:ve(at),te.set(Be,Qe),Qe}return e.forEach(Be=>{const Qe=ve(Be);1!==Qe&&n.get(Qe).push(Be)}),n}function Gu(t,e){t.classList?.add(e)}function o0(t,e){t.classList?.remove(e)}function uR(t,e,n){vd(n).onDone(()=>t.processLeaveNode(e))}function BA(t,e){for(let n=0;n<t.length;n++){const E=t[n];E instanceof hA?BA(E.players,e):e.push(E)}}function jA(t,e,n){const E=n.get(t);if(!E)return!1;let j=e.get(t);return j?E.forEach(te=>j.add(te)):e.set(t,E),n.delete(t),!0}class wy{constructor(e,n,E){this.bodyNode=e,this._driver=n,this._normalizer=E,this._triggerCache={},this.onRemovalComplete=(j,te)=>{},this._transitionEngine=new oR(e,n,E),this._timelineEngine=new KP(e,n,E),this._transitionEngine.onRemovalComplete=(j,te)=>this.onRemovalComplete(j,te)}registerTrigger(e,n,E,j,te){const ve=e+"-"+j;let Be=this._triggerCache[ve];if(!Be){const Qe=[],Tt=Jb(this._driver,te,Qe,[]);if(Qe.length)throw function QO(t,e){return new xn(3404,!1)}();Be=function ZP(t,e,n){return new YP(t,e,n)}(j,Tt,this._normalizer),this._triggerCache[ve]=Be}this._transitionEngine.registerTrigger(n,j,Be)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,E,j){this._transitionEngine.insertNode(e,n,E,j)}onRemove(e,n,E){this._transitionEngine.removeNode(e,n,E)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,E,j){if("@"==E.charAt(0)){const[te,ve]=gA(E);this._timelineEngine.command(te,n,ve,j)}else this._transitionEngine.trigger(e,n,E,j)}listen(e,n,E,j,te){if("@"==E.charAt(0)){const[ve,Be]=gA(E);return this._timelineEngine.listen(ve,n,Be,te)}return this._transitionEngine.listen(e,n,E,j,te)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let hR=(()=>{class t{constructor(n,E,j){this._element=n,this._startStyles=E,this._endStyles=j,this._state=0;let te=t.initialStylesByElement.get(n);te||t.initialStylesByElement.set(n,te=new Map),this._initialStyles=te}start(){this._state<1&&(this._startStyles&&qc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qc(this._element,this._initialStyles),this._endStyles&&(qc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(fh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(fh(this._element,this._endStyles),this._endStyles=null),qc(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function u_(t){let e=null;return t.forEach((n,E)=>{(function pR(t){return"display"===t||"position"===t})(E)&&(e=e||new Map,e.set(E,n))}),e}class UA{constructor(e,n,E,j){this.element=e,this.keyframes=n,this.options=E,this._specialStyles=j,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=E.duration,this._delay=E.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(E=>{n.push(Object.fromEntries(E))}),n}_triggerWebAnimation(e,n,E){return e.animate(this._convertKeyframesToObject(n),E)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((E,j)=>{"offset"!==j&&e.set(j,this._finished?E:kA(this.element,j))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(E=>E()),n.length=0}}class mR{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return yA(e,n)}getParentElement(e){return Gb(e)}query(e,n,E){return xA(e,n,E)}computeStyle(e,n,E){return window.getComputedStyle(e)[n]}animate(e,n,E,j,te,ve=[]){const Qe={duration:E,delay:j,fill:0==j?"both":"forwards"};te&&(Qe.easing=te);const at=new Map,Tt=ve.filter(kn=>kn instanceof UA);(function wP(t,e){return 0===t||0===e})(E,j)&&Tt.forEach(kn=>{kn.currentSnapshot.forEach((Un,$n)=>at.set($n,Un))});let Bt=function xP(t){return t.length?t[0]instanceof Map?t:t.map(e=>TA(e)):[]}(n).map(kn=>yd(kn));Bt=function TP(t,e,n){if(n.size&&e.length){let E=e[0],j=[];if(n.forEach((te,ve)=>{E.has(ve)||j.push(ve),E.set(ve,te)}),j.length)for(let te=1;te<e.length;te++){let ve=e[te];j.forEach(Be=>ve.set(Be,kA(t,Be)))}}return e}(e,Bt,at);const vn=function dR(t,e){let n=null,E=null;return Array.isArray(e)&&e.length?(n=u_(e[0]),e.length>1&&(E=u_(e[e.length-1]))):e instanceof Map&&(n=u_(e)),n||E?new hR(t,n,E):null}(e,Bt);return new UA(e,Bt,Qe,vn)}}let gR=(()=>{class t extends cA{constructor(n,E){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(E.body,{id:"0",encapsulation:oa.None,styles:[],data:{animation:[]}})}build(n){const E=this._nextAnimationId.toString();this._nextAnimationId++;const j=Array.isArray(n)?fA(n):n;return VA(this._renderer,null,E,"register",[j]),new vR(E,this._renderer)}}return t.\u0275fac=function(n){return new(n||t)(Br(tm),Br(vs))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();class vR extends IO{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new yR(this._id,e,n||{},this._renderer)}}class yR{constructor(e,n,E,j){this.id=e,this.element=n,this._renderer=j,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",E)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return VA(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function VA(t,e,n,E,j){return t.setProperty(e,`@@${n}:${E}`,j)}const HA="@.disabled";let xR=(()=>{class t{constructor(n,E,j){this.delegate=n,this.engine=E,this._zone=j,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,E.onRemovalComplete=(te,ve)=>{const Be=ve?.parentNode(te);Be&&ve.removeChild(Be,te)}}createRenderer(n,E){const te=this.delegate.createRenderer(n,E);if(!(n&&E&&E.data&&E.data.animation)){let Tt=this._rendererCache.get(te);return Tt||(Tt=new qA("",te,this.engine,()=>this._rendererCache.delete(te)),this._rendererCache.set(te,Tt)),Tt}const ve=E.id,Be=E.id+"-"+this._currentId;this._currentId++,this.engine.register(Be,n);const Qe=Tt=>{Array.isArray(Tt)?Tt.forEach(Qe):this.engine.registerTrigger(ve,Be,n,Tt.name,Tt)};return E.data.animation.forEach(Qe),new bR(this,Be,te,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,E,j){n>=0&&n<this._microtaskId?this._zone.run(()=>E(j)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(te=>{const[ve,Be]=te;ve(Be)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([E,j]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(n){return new(n||t)(Br(tm),Br(wy),Br(Po))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})();class qA{constructor(e,n,E,j){this.namespaceId=e,this.delegate=n,this.engine=E,this._onDestroy=j,this.destroyNode=this.delegate.destroyNode?te=>n.destroyNode(te):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,E,j=!0){this.delegate.insertBefore(e,n,E),this.engine.onInsert(this.namespaceId,n,e,j)}removeChild(e,n,E){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,E,j){this.delegate.setAttribute(e,n,E,j)}removeAttribute(e,n,E){this.delegate.removeAttribute(e,n,E)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,E,j){this.delegate.setStyle(e,n,E,j)}removeStyle(e,n,E){this.delegate.removeStyle(e,n,E)}setProperty(e,n,E){"@"==n.charAt(0)&&n==HA?this.disableAnimations(e,!!E):this.delegate.setProperty(e,n,E)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,E){return this.delegate.listen(e,n,E)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class bR extends qA{constructor(e,n,E,j,te){super(n,E,j,te),this.factory=e,this.namespaceId=n}setProperty(e,n,E){"@"==n.charAt(0)?"."==n.charAt(1)&&n==HA?this.disableAnimations(e,E=void 0===E||!!E):this.engine.process(this.namespaceId,e,n.slice(1),E):this.delegate.setProperty(e,n,E)}listen(e,n,E){if("@"==n.charAt(0)){const j=function _R(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(e);let te=n.slice(1),ve="";return"@"!=te.charAt(0)&&([te,ve]=function wR(t){const e=t.indexOf(".");return[t.substring(0,e),t.slice(e+1)]}(te)),this.engine.listen(this.namespaceId,j,te,ve,Be=>{this.factory.scheduleListenerCallback(Be._data||-1,E,Be)})}return this.delegate.listen(e,n,E)}}const GA=[{provide:cA,useClass:gR},{provide:r_,useFactory:function MR(){return new HP}},{provide:wy,useClass:(()=>{class t extends wy{constructor(n,E,j,te){super(n.body,E,j)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(n){return new(n||t)(Br(vs),Br(Wb),Br(r_),Br(dd))},t.\u0275prov=rr({token:t,factory:t.\u0275fac}),t})()},{provide:tm,useFactory:function AR(t,e,n){return new xR(t,e,n)},deps:[ab,wy,Po]}],c_=[{provide:Wb,useFactory:()=>new mR},{provide:qd,useValue:"BrowserAnimations"},...GA],WA=[{provide:Wb,useClass:bA},{provide:qd,useValue:"NoopAnimations"},...GA];let kR=(()=>{class t{static withConfig(n){return{ngModule:t,providers:n.disableAnimations?WA:c_}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t}),t.\u0275inj=ar({providers:c_,imports:[pT]}),t})();tA.plotlyjs=fO;let SR=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=zo({type:t,bootstrap:[cO]}),t.\u0275inj=ar({imports:[pT,HI,km,tA,DO.register("ngsw-worker.js",{enabled:!0,registrationStrategy:"registerWhenStable:30000"}),kR,YL]}),t})();i7().bootstrapModule(SR).catch(t=>console.error(t))},978:bd=>{"use strict";function ss(Sa){if(this.size=0|Sa,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=Sa<<1;for(var xr=new Array(2*this.size),se=0;se<xr.length;se+=2){const k=Math.PI*se/this.size;xr[se]=Math.cos(k),xr[se+1]=-Math.sin(k)}this.table=xr;for(var U=0,r=1;this.size>r;r<<=1)U++;this._width=U%2==0?U-1:U,this._bitrev=new Array(1<<this._width);for(var I=0;I<this._bitrev.length;I++){this._bitrev[I]=0;for(var C=0;C<this._width;C+=2)this._bitrev[I]|=(I>>>C&3)<<this._width-C-2}this._out=null,this._data=null,this._inv=0}bd.exports=ss,ss.prototype.fromComplexArray=function(xr,se){for(var U=se||new Array(xr.length>>>1),r=0;r<xr.length;r+=2)U[r>>>1]=xr[r];return U},ss.prototype.createComplexArray=function(){const xr=new Array(this._csize);for(var se=0;se<xr.length;se++)xr[se]=0;return xr},ss.prototype.toComplexArray=function(xr,se){for(var U=se||this.createComplexArray(),r=0;r<U.length;r+=2)U[r]=xr[r>>>1],U[r+1]=0;return U},ss.prototype.completeSpectrum=function(xr){for(var se=this._csize,U=se>>>1,r=2;r<U;r+=2)xr[se-r]=xr[r],xr[se-r+1]=-xr[r+1]},ss.prototype.transform=function(xr,se){if(xr===se)throw new Error("Input and output buffers must be different");this._out=xr,this._data=se,this._inv=0,this._transform4(),this._out=null,this._data=null},ss.prototype.realTransform=function(xr,se){if(xr===se)throw new Error("Input and output buffers must be different");this._out=xr,this._data=se,this._inv=0,this._realTransform4(),this._out=null,this._data=null},ss.prototype.inverseTransform=function(xr,se){if(xr===se)throw new Error("Input and output buffers must be different");this._out=xr,this._data=se,this._inv=1,this._transform4();for(var U=0;U<xr.length;U++)xr[U]/=this.size;this._out=null,this._data=null},ss.prototype._transform4=function(){var C,f,xr=this._out,se=this._csize,r=1<<this._width,I=se/r<<1,k=this._bitrev;if(4===I)for(C=0,f=0;C<se;C+=I,f++)this._singleTransform2(C,k[f],r);else for(C=0,f=0;C<se;C+=I,f++)this._singleTransform4(C,k[f],r);var T=this._inv?-1:1,v=this.table;for(r>>=2;r>=2;r>>=2){var c=(I=se/r<<1)>>>2;for(C=0;C<se;C+=I)for(var i=C+c,s=C,a=0;s<i;s+=2,a+=r){const o=s,l=o+c,u=l+c,d=u+c,g=xr[o],h=xr[o+1],w=xr[l],y=xr[l+1],p=xr[u],_=xr[u+1],x=xr[d],b=xr[d+1],D=v[a],S=T*v[a+1],O=w*D-y*S,P=w*S+y*D,R=v[2*a],F=T*v[2*a+1],B=p*R-_*F,J=p*F+_*R,z=v[3*a],$=T*v[3*a+1],G=x*z-b*$,H=x*$+b*z,X=g+B,K=h+J,ue=g-B,ae=h-J,ne=O+G,Q=P+H,ie=T*(O-G),le=T*(P-H),he=K+Q,pe=X-ne,xe=K-Q,Ee=ue+le,Re=ae-ie,ke=ue-le,Te=ae+ie;xr[o]=X+ne,xr[o+1]=he,xr[l]=Ee,xr[l+1]=Re,xr[u]=pe,xr[u+1]=xe,xr[d]=ke,xr[d+1]=Te}}},ss.prototype._singleTransform2=function(xr,se,U){const r=this._out,I=this._data,C=I[se],f=I[se+1],k=I[se+U],T=I[se+U+1],c=f+T,i=C-k,s=f-T;r[xr]=C+k,r[xr+1]=c,r[xr+2]=i,r[xr+3]=s},ss.prototype._singleTransform4=function(xr,se,U){const r=this._out,I=this._data,C=this._inv?-1:1,f=2*U,k=3*U,T=I[se],v=I[se+1],c=I[se+U],i=I[se+U+1],s=I[se+f],a=I[se+f+1],o=I[se+k],l=I[se+k+1],u=T+s,d=v+a,g=T-s,h=v-a,w=c+o,y=i+l,p=C*(c-o),_=C*(i-l),b=d+y,M=g+_,m=h-p,D=u-w,S=d-y,O=g-_,P=h+p;r[xr]=u+w,r[xr+1]=b,r[xr+2]=M,r[xr+3]=m,r[xr+4]=D,r[xr+5]=S,r[xr+6]=O,r[xr+7]=P},ss.prototype._realTransform4=function(){var C,f,xr=this._out,se=this._csize,r=1<<this._width,I=se/r<<1,k=this._bitrev;if(4===I)for(C=0,f=0;C<se;C+=I,f++)this._singleRealTransform2(C,k[f]>>>1,r>>>1);else for(C=0,f=0;C<se;C+=I,f++)this._singleRealTransform4(C,k[f]>>>1,r>>>1);var T=this._inv?-1:1,v=this.table;for(r>>=2;r>=2;r>>=2){var c=(I=se/r<<1)>>>1,i=c>>>1,s=i>>>1;for(C=0;C<se;C+=I)for(var a=0,o=0;a<=s;a+=2,o+=r){var l=C+a,u=l+i,d=u+i,g=d+i,h=xr[l],w=xr[l+1],y=xr[u],p=xr[u+1],_=xr[d],x=xr[d+1],b=xr[g],M=xr[g+1],S=v[o],O=T*v[o+1],P=y*S-p*O,R=y*O+p*S,F=v[2*o],B=T*v[2*o+1],J=_*F-x*B,z=_*B+x*F,$=v[3*o],G=T*v[3*o+1],H=b*$-M*G,X=b*G+M*$,K=h+J,ue=w+z,ae=h-J,ne=w-z,Q=P+H,ie=R+X,le=T*(P-H),fe=T*(R-X),pe=ue+ie,xe=ae+fe,Ee=ne-le;if(xr[l]=K+Q,xr[l+1]=pe,xr[u]=xe,xr[u+1]=Ee,0!==a){if(a!==s){var Ne=-T*le-ne,De=K+-T*Q,qe=-ue- -T*ie,Ke=C+i-a,be=C+c-a;xr[Ke]=ae+-T*fe,xr[Ke+1]=Ne,xr[be]=De,xr[be+1]=qe}}else{var ke=ue-ie;xr[d]=K-Q,xr[d+1]=ke}}}},ss.prototype._singleRealTransform2=function(xr,se,U){const r=this._out,I=this._data,C=I[se],f=I[se+U],T=C-f;r[xr]=C+f,r[xr+1]=0,r[xr+2]=T,r[xr+3]=0},ss.prototype._singleRealTransform4=function(xr,se,U){const r=this._out,I=this._data,T=I[se],v=I[se+U],c=I[se+2*U],i=I[se+3*U],s=T+c,a=T-c,o=v+i,l=(this._inv?-1:1)*(v-i),d=a,g=-l,h=s-o,w=a,y=l;r[xr]=s+o,r[xr+1]=0,r[xr+2]=d,r[xr+3]=g,r[xr+4]=h,r[xr+5]=0,r[xr+6]=w,r[xr+7]=y}},335:bd=>{self,bd.exports=function(){var ss={98847:function(se,U,r){"use strict";var I=r(71828),C={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var f in C){var k=f.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");I.addStyleRule(k,C[f])}},98222:function(se,U,r){"use strict";se.exports=r(82887)},27206:function(se,U,r){"use strict";se.exports=r(60822)},59893:function(se,U,r){"use strict";se.exports=r(23381)},5224:function(se,U,r){"use strict";se.exports=r(83832)},59509:function(se,U,r){"use strict";se.exports=r(72201)},75557:function(se,U,r){"use strict";se.exports=r(91815)},40338:function(se,U,r){"use strict";se.exports=r(21462)},35080:function(se,U,r){"use strict";se.exports=r(51319)},61396:function(se,U,r){"use strict";se.exports=r(57516)},40549:function(se,U,r){"use strict";se.exports=r(98128)},49866:function(se,U,r){"use strict";se.exports=r(99442)},36089:function(se,U,r){"use strict";se.exports=r(93740)},19548:function(se,U,r){"use strict";se.exports=r(8729)},35831:function(se,U,r){"use strict";se.exports=r(93814)},61039:function(se,U,r){"use strict";se.exports=r(14382)},97040:function(se,U,r){"use strict";se.exports=r(51759)},77986:function(se,U,r){"use strict";se.exports=r(10421)},24296:function(se,U,r){"use strict";se.exports=r(43102)},58872:function(se,U,r){"use strict";se.exports=r(92165)},29626:function(se,U,r){"use strict";se.exports=r(3325)},65591:function(se,U,r){"use strict";se.exports=r(36071)},69738:function(se,U,r){"use strict";se.exports=r(43905)},92650:function(se,U,r){"use strict";se.exports=r(35902)},35630:function(se,U,r){"use strict";se.exports=r(69816)},73434:function(se,U,r){"use strict";se.exports=r(94507)},27909:function(se,U,r){"use strict";var I=r(19548);I.register([r(27206),r(5224),r(58872),r(65591),r(69738),r(92650),r(49866),r(25743),r(6197),r(97040),r(85461),r(73434),r(54201),r(81299),r(47645),r(35630),r(77986),r(83043),r(93005),r(96881),r(4534),r(50581),r(40549),r(77900),r(47582),r(35080),r(21641),r(17280),r(5861),r(29626),r(10021),r(65317),r(96268),r(61396),r(35831),r(16122),r(46163),r(40344),r(40338),r(48131),r(36089),r(55334),r(75557),r(19440),r(99488),r(59893),r(97393),r(98222),r(61039),r(24296),r(66398),r(59509)]),se.exports=I},46163:function(se,U,r){"use strict";se.exports=r(15154)},96881:function(se,U,r){"use strict";se.exports=r(64943)},50581:function(se,U,r){"use strict";se.exports=r(21164)},55334:function(se,U,r){"use strict";se.exports=r(54186)},65317:function(se,U,r){"use strict";se.exports=r(94873)},10021:function(se,U,r){"use strict";se.exports=r(67618)},54201:function(se,U,r){"use strict";se.exports=r(58810)},5861:function(se,U,r){"use strict";se.exports=r(20593)},16122:function(se,U,r){"use strict";se.exports=r(29396)},83043:function(se,U,r){"use strict";se.exports=r(13551)},48131:function(se,U,r){"use strict";se.exports=r(46858)},47582:function(se,U,r){"use strict";se.exports=r(17988)},21641:function(se,U,r){"use strict";se.exports=r(68868)},96268:function(se,U,r){"use strict";se.exports=r(20467)},19440:function(se,U,r){"use strict";se.exports=r(91271)},99488:function(se,U,r){"use strict";se.exports=r(21461)},97393:function(se,U,r){"use strict";se.exports=r(85956)},25743:function(se,U,r){"use strict";se.exports=r(52979)},66398:function(se,U,r){"use strict";se.exports=r(32275)},17280:function(se,U,r){"use strict";se.exports=r(6419)},77900:function(se,U,r){"use strict";se.exports=r(61510)},81299:function(se,U,r){"use strict";se.exports=r(87619)},93005:function(se,U,r){"use strict";se.exports=r(93601)},40344:function(se,U,r){"use strict";se.exports=r(96595)},47645:function(se,U,r){"use strict";se.exports=r(70954)},6197:function(se,U,r){"use strict";se.exports=r(47462)},4534:function(se,U,r){"use strict";se.exports=r(17659)},85461:function(se,U,r){"use strict";se.exports=r(19990)},82884:function(se){"use strict";se.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function(se,U,r){"use strict";var I=r(82884),C=r(41940),f=r(85555),k=r(44467).templatedArray;r(24695),se.exports=k("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:C({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:I.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:I.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",f.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",f.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",f.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:C({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(92605).draw;function k(v){I.filterVisible(v._fullLayout.annotations).forEach(function(i){var s=C.getFromId(v,i.xref),a=C.getFromId(v,i.yref),o=C.getRefType(i.xref),l=C.getRefType(i.yref);i._extremes={},"range"===o&&T(i,s),"range"===l&&T(i,a)})}function T(v,c){var i,s=c._id,a=s.charAt(0),o=v[a],l=v["a"+a],g=v["_"+a+"padplus"],h=v["_"+a+"padminus"],w={x:1,y:-1}[a]*v[a+"shift"],y=3*v.arrowsize*v.arrowwidth||0,p=y+w,_=y-w,x=3*v.startarrowsize*v.arrowwidth||0,b=x+w,M=x-w;if(v["a"+a+"ref"]===v[a+"ref"]){var m=C.findExtremes(c,[c.r2c(o)],{ppadplus:p,ppadminus:_}),D=C.findExtremes(c,[c.r2c(l)],{ppadplus:Math.max(g,b),ppadminus:Math.max(h,M)});i={min:[m.min[0],D.min[0]],max:[m.max[0],D.max[0]]}}else b=l?b+l:b,M=l?M-l:M,i=C.findExtremes(c,[c.r2c(o)],{ppadplus:Math.max(g,p,b),ppadminus:Math.max(h,_,M)});v._extremes[s]=i}se.exports=function(v){if(I.filterVisible(v._fullLayout.annotations).length&&v._fullData.length)return I.syncOrAsync([f,k],v)}},44317:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(44467).arrayEditor;function k(v,c){var i,s,a,o,l,u,d,g=v._fullLayout.annotations,h=[],w=[],y=[],p=(c||[]).length;for(i=0;i<g.length;i++)if(o=(a=g[i]).clicktoshow){for(s=0;s<p;s++)if(u=(l=c[s]).xaxis,d=l.yaxis,u._id===a.xref&&d._id===a.yref&&u.d2r(l.x)===T(a._xclick,u)&&d.d2r(l.y)===T(a._yclick,d)){(a.visible?"onout"===o?w:y:h).push(i);break}s===p&&a.visible&&"onout"===o&&w.push(i)}return{on:h,off:w,explicitOff:y}}function T(v,c){return"log"===c.type?c.l2r(v):c.d2r(v)}se.exports={hasClickToShow:function(v,c){var i=k(v,c);return i.on.length>0||i.explicitOff.length>0},onClick:function(v,c){var i,s,a=k(v,c),o=a.on,l=a.off.concat(a.explicitOff),u={},d=v._fullLayout.annotations;if(o.length||l.length){for(i=0;i<o.length;i++)(s=f(v.layout,"annotations",d[o[i]])).modifyItem("visible",!0),I.extendFlat(u,s.getUpdateObj());for(i=0;i<l.length;i++)(s=f(v.layout,"annotations",d[l[i]])).modifyItem("visible",!1),I.extendFlat(u,s.getUpdateObj());return C.call("update",v,{},u)}}}},25625:function(se,U,r){"use strict";var I=r(71828),C=r(7901);se.exports=function(f,k,T,v){v("opacity");var c=v("bgcolor"),i=v("bordercolor"),s=C.opacity(i);v("borderpad");var a=v("borderwidth"),o=v("showarrow");if(v("text",o?" ":T._dfltTitle.annotation),v("textangle"),I.coerceFont(v,"font",T.font),v("width"),v("align"),v("height")&&v("valign"),o){var l,u,d=v("arrowside");-1!==d.indexOf("end")&&(l=v("arrowhead"),u=v("arrowsize")),-1!==d.indexOf("start")&&(v("startarrowhead",l),v("startarrowsize",u)),v("arrowcolor",s?k.bordercolor:C.defaultLine),v("arrowwidth",2*(s&&a||1)),v("standoff"),v("startstandoff")}var g=v("hovertext"),h=T.hoverlabel||{};if(g){var w=v("hoverlabel.bgcolor",h.bgcolor||(C.opacity(c)?C.rgb(c):C.defaultLine)),y=v("hoverlabel.bordercolor",h.bordercolor||C.contrast(w));I.coerceFont(v,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||y})}v("captureevents",!!g)}},94128:function(se,U,r){"use strict";var I=r(92770),C=r(58163);se.exports=function(f,k,T,v){k=k||{};var c="log"===T&&"linear"===k.type;if(c||"linear"===T&&"log"===k.type)for(var s,a,o=f._fullLayout.annotations,l=k._id.charAt(0),u=0;u<o.length;u++)a="annotations["+u+"].",(s=o[u])[l+"ref"]===k._id&&d(l),s["a"+l+"ref"]===k._id&&d("a"+l);function d(g){var h=s[g],w=null;w=c?C(h,k.range):Math.pow(10,h),I(w)||(w=null),v(a+g,w)}}},84046:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(85501),k=r(25625),T=r(50215);function v(c,i,s){function a(D,S){return I.coerce(c,i,T,D,S)}var o=a("visible"),l=a("clicktoshow");if(o||l){k(c,i,s,a);for(var u=i.showarrow,d=["x","y"],g=[-10,-30],h={_fullLayout:s},w=0;w<2;w++){var y=d[w],p=C.coerceRef(c,i,h,y,"","paper");if("paper"!==p&&C.getFromId(h,p)._annIndices.push(i._index),C.coercePosition(i,h,a,p,y,.5),u){var _="a"+y,x=C.coerceRef(c,i,h,_,"pixel",["pixel","paper"]);"pixel"!==x&&x!==p&&(x=i[_]="pixel"),C.coercePosition(i,h,a,x,_,"pixel"===x?g[w]:.4)}a(y+"anchor"),a(y+"shift")}if(I.noneOrAll(c,i,["x","y"]),u&&I.noneOrAll(c,i,["ax","ay"]),l){var M=a("xclick"),m=a("yclick");i._xclick=void 0===M?i.x:C.cleanPosition(M,h,i.xref),i._yclick=void 0===m?i.y:C.cleanPosition(m,h,i.yref)}}}se.exports=function(c,i){f(c,i,{name:"annotations",handleItemDefaults:v})}},92605:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(74875),k=r(71828),T=k.strTranslate,v=r(89298),c=r(7901),i=r(91424),s=r(30211),a=r(63893),o=r(6964),l=r(28569),u=r(44467).arrayEditor,d=r(13011);function g(y,p){var _=y._fullLayout.annotations[p]||{},x=v.getFromId(y,_.xref),b=v.getFromId(y,_.yref);x&&x.setScale(),b&&b.setScale(),w(y,_,p,!1,x,b)}function h(y,p,_,x,b){var M=b[_],m=b[_+"ref"],D=-1!==_.indexOf("y"),S="domain"===v.getRefType(m),O=D?x.h:x.w;return y?S?M+(D?-p:p)/y._length:y.p2r(y.r2p(M)+p):M+(D?-p:p)/O}function w(y,p,_,x,b,M){var m,D,S=y._fullLayout,O=y._fullLayout._size,P=y._context.edits;x?(m="annotation-"+x,D=x+".annotations"):(m="annotation",D="annotations");var R=u(y.layout,D,p),F=R.modifyBase,B=R.modifyItem,J=R.getUpdateObj;S._infolayer.selectAll("."+m+'[data-index="'+_+'"]').remove();var z="clip"+S._uid+"_ann"+_;if(p._input&&!1!==p.visible){var $={x:{},y:{}},G=+p.textangle||0,H=S._infolayer.append("g").classed(m,!0).attr("data-index",String(_)).style("opacity",p.opacity),X=H.append("g").classed("annotation-text-g",!0),K=P[p.showarrow?"annotationTail":"annotationPosition"],ue=p.captureevents||P.annotationText||K,ae=X.append("g").style("pointer-events",ue?"all":null).call(o,"pointer").on("click",function(){y._dragging=!1,y.emit("plotly_clickannotation",Re(I.event))});p.hovertext&&ae.on("mouseover",function(){var we=p.hoverlabel,je=we.font,Ce=this.getBoundingClientRect(),Ie=y.getBoundingClientRect();s.loneHover({x0:Ce.left-Ie.left,x1:Ce.right-Ie.left,y:(Ce.top+Ce.bottom)/2-Ie.top,text:p.hovertext,color:we.bgcolor,borderColor:we.bordercolor,fontFamily:je.family,fontSize:je.size,fontColor:je.color},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:y})}).on("mouseout",function(){s.loneUnhover(S._hoverlayer.node())});var ne=p.borderwidth,ie=ne+p.borderpad,le=ae.append("rect").attr("class","bg").style("stroke-width",ne+"px").call(c.stroke,p.bordercolor).call(c.fill,p.bgcolor),fe=p.width||p.height,he=S._topclips.selectAll("#"+z).data(fe?[0]:[]);he.enter().append("clipPath").classed("annclip",!0).attr("id",z).append("rect"),he.exit().remove();var pe=p.font,xe=S._meta?k.templateString(p.text,S._meta):p.text,Ee=ae.append("text").classed("annotation-text",!0).text(xe);P.annotationText?Ee.call(a.makeEditable,{delegate:ae,gd:y}).call(ke).on("edit",function(we){p.text=we,this.call(ke),B("text",we),b&&b.autorange&&F(b._name+".autorange",!0),M&&M.autorange&&F(M._name+".autorange",!0),C.call("_guiRelayout",y,J())}):Ee.call(ke)}else I.selectAll("#"+z).remove();function Re(we){var je={index:_,annotation:p._input,fullAnnotation:p,event:we};return x&&(je.subplotId=x),je}function ke(we){return we.call(i.font,pe).attr({"text-anchor":{left:"start",right:"end"}[p.align]||"middle"}),a.convertToTspans(we,y,Te),we}function Te(){var we=Ee.selectAll("a");1===we.size()&&we.text()===Ee.text()&&ae.insert("a",":first-child").attr({"xlink:xlink:href":we.attr("xlink:href"),"xlink:xlink:show":we.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(le.node());var je=ae.select(".annotation-text-math-group"),Ce=!je.empty(),Ie=i.bBox((Ce?je:Ee).node()),ge=Ie.width,me=Ie.height,ce=p.width||ge,Ae=p.height||me,Ne=Math.round(ce+2*ie),De=Math.round(Ae+2*ie);function qe(Et,wt){return"auto"===wt&&(wt=Et<.3333333333333333?"left":Et>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[wt]}for(var Ke=!1,be=["x","y"],Oe=0;Oe<be.length;Oe++){var Le,Ue,Ze,We,et,nt=be[Oe],ct=p[nt+"ref"]||nt,yt=p["a"+nt+"ref"],ut={x:b,y:M}[nt],Ct=(G+("x"===nt?0:-90))*Math.PI/180,Dt=Ne*Math.cos(Ct),vt=De*Math.sin(Ct),mt=Math.abs(Dt)+Math.abs(vt),Lt=p[nt+"anchor"],Ft=p[nt+"shift"]*("x"===nt?1:-1),Rt=$[nt],Wt=v.getRefType(ct);if(ut&&"domain"!==Wt){var Ht=ut.r2fraction(p[nt]);(Ht<0||Ht>1)&&(yt===ct?((Ht=ut.r2fraction(p["a"+nt]))<0||Ht>1)&&(Ke=!0):Ke=!0),Le=ut._offset+ut.r2p(p[nt]),We=.5}else{var it="domain"===Wt;"x"===nt?(Ze=p[nt],Le=it?ut._offset+ut._length*Ze:Le=O.l+O.w*Ze):(Ze=1-p[nt],Le=it?ut._offset+ut._length*Ze:Le=O.t+O.h*Ze),We=p.showarrow?.5:Ze}if(p.showarrow){Rt.head=Le;var st=p["a"+nt];if(et=Dt*qe(.5,p.xanchor)-vt*qe(.5,p.yanchor),yt===ct){var Je=v.getRefType(yt);"domain"===Je?("y"===nt&&(st=1-st),Rt.tail=ut._offset+ut._length*st):Rt.tail="paper"===Je?"y"===nt?O.t+O.h*(st=1-st):O.l+O.w*st:ut._offset+ut.r2p(st),Ue=et}else Rt.tail=Le+st,Ue=et+st;Rt.text=Rt.tail+et;var ot=S["x"===nt?"width":"height"];if("paper"===ct&&(Rt.head=k.constrain(Rt.head,1,ot-1)),"pixel"===yt){var pt=-Math.max(Rt.tail-3,Rt.text),xt=Math.min(Rt.tail+3,Rt.text)-ot;pt>0?(Rt.tail+=pt,Rt.text+=pt):xt>0&&(Rt.tail-=xt,Rt.text-=xt)}Rt.tail+=Ft,Rt.head+=Ft}else Ue=et=mt*qe(We,Lt),Rt.text=Le+et;Rt.text+=Ft,et+=Ft,p["_"+nt+"padplus"]=mt/2+(Ue+=Ft),p["_"+nt+"padminus"]=mt/2-Ue,p["_"+nt+"size"]=mt,p["_"+nt+"shift"]=et}if(Ke)ae.remove();else{var He=0,Ge=0;"left"!==p.align&&(He=(ce-ge)*("center"===p.align?.5:1)),"top"!==p.valign&&(Ge=(Ae-me)*("middle"===p.valign?.5:1)),Ce?je.select("svg").attr({x:ie+He-1,y:ie+Ge}).call(i.setClipUrl,fe?z:null,y):Ee.call(a.positionText,ie+He-Ie.left,ie+Ge-Ie.top).call(i.setClipUrl,fe?z:null,y),he.select("rect").call(i.setRect,ie,ie,ce,Ae),le.call(i.setRect,ne/2,ne/2,Ne-ne,De-ne),ae.call(i.setTranslate,Math.round($.x.text-Ne/2),Math.round($.y.text-De/2)),X.attr({transform:"rotate("+G+","+$.x.text+","+$.y.text+")"});var kt,St=function(Et,wt){H.selectAll(".annotation-arrow-g").remove();var Nt=$.x.head,_t=$.y.head,Mt=$.x.tail+Et,Pt=$.y.tail+wt,Zt=$.x.text+Et,$t=$.y.text+wt,Xt=k.rotationXYMatrix(G,Zt,$t),dn=k.apply2DTransform(Xt),on=k.apply2DTransform2(Xt),cn=+le.attr("width"),tn=+le.attr("height"),Cn=Zt-.5*cn,Fn=Cn+cn,En=$t-.5*tn,rn=En+tn,yn=[[Cn,En,Cn,rn],[Cn,rn,Fn,rn],[Fn,rn,Fn,En],[Fn,En,Cn,En]].map(on);if(!yn.reduce(function(gr,mr){return gr^!!k.segmentsIntersect(Nt,_t,Nt+1e6,_t+1e6,mr[0],mr[1],mr[2],mr[3])},!1)){yn.forEach(function(gr){var mr=k.segmentsIntersect(Mt,Pt,Nt,_t,gr[0],gr[1],gr[2],gr[3]);mr&&(Mt=mr.x,Pt=mr.y)});var pn=p.arrowwidth,bn=p.arrowcolor,In=p.arrowside,_n=H.append("g").style({opacity:c.opacity(bn)}).classed("annotation-arrow-g",!0),qn=_n.append("path").attr("d","M"+Mt+","+Pt+"L"+Nt+","+_t).style("stroke-width",pn+"px").call(c.stroke,c.rgb(bn));if(d(qn,In,p),P.annotationPosition&&qn.node().parentNode&&!x){var Wn=Nt,Nn=_t;if(p.standoff){var Xn=Math.sqrt(Math.pow(Nt-Mt,2)+Math.pow(_t-Pt,2));Wn+=p.standoff*(Mt-Nt)/Xn,Nn+=p.standoff*(Pt-_t)/Xn}var yr,fr,Er=_n.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Mt-Wn)+","+(Pt-Nn),transform:T(Wn,Nn)}).style("stroke-width",pn+6+"px").call(c.stroke,"rgba(0,0,0,0)").call(c.fill,"rgba(0,0,0,0)");l.init({element:Er.node(),gd:y,prepFn:function(){var gr=i.getTranslate(ae);yr=gr.x,fr=gr.y,b&&b.autorange&&F(b._name+".autorange",!0),M&&M.autorange&&F(M._name+".autorange",!0)},moveFn:function(gr,mr){var zr=dn(yr,fr),Jt=zr[0]+gr,an=zr[1]+mr;ae.call(i.setTranslate,Jt,an),B("x",h(b,gr,"x",O,p)),B("y",h(M,mr,"y",O,p)),p.axref===p.xref&&B("ax",h(b,gr,"ax",O,p)),p.ayref===p.yref&&B("ay",h(M,mr,"ay",O,p)),_n.attr("transform",T(gr,mr)),X.attr({transform:"rotate("+G+","+Jt+","+an+")"})},doneFn:function(){C.call("_guiRelayout",y,J());var gr=document.querySelector(".js-notes-box-panel");gr&&gr.redraw(gr.selectedObj)}})}}};p.showarrow&&St(0,0),K&&l.init({element:ae.node(),gd:y,prepFn:function(){kt=X.attr("transform")},moveFn:function(Et,wt){var Nt="pointer";if(p.showarrow)B("ax",p.axref===p.xref?h(b,Et,"ax",O,p):p.ax+Et),B("ay",p.ayref===p.yref?h(M,wt,"ay",O.w,p):p.ay+wt),St(Et,wt);else{if(x)return;var _t,Mt;if(b)_t=h(b,Et,"x",O,p);else{var Pt=p._xsize/O.w;_t=l.align(p.x+(p._xshift-p.xshift)/O.w-Pt/2+Et/O.w,Pt,0,1,p.xanchor)}if(M)Mt=h(M,wt,"y",O,p);else{var $t=p._ysize/O.h;Mt=l.align(p.y-(p._yshift+p.yshift)/O.h-$t/2-wt/O.h,$t,0,1,p.yanchor)}B("x",_t),B("y",Mt),b&&M||(Nt=l.getCursor(b?.5:_t,M?.5:Mt,p.xanchor,p.yanchor))}X.attr({transform:T(Et,wt)+kt}),o(ae,Nt)},clickFn:function(Et,wt){p.captureevents&&y.emit("plotly_clickannotation",Re(wt))},doneFn:function(){o(ae),C.call("_guiRelayout",y,J());var Et=document.querySelector(".js-notes-box-panel");Et&&Et.redraw(Et.selectedObj)}})}}}se.exports={draw:function(y){var p=y._fullLayout;p._infolayer.selectAll(".annotation").remove();for(var _=0;_<p.annotations.length;_++)p.annotations[_].visible&&g(y,_);return f.previousPromises(y)},drawOne:g,drawRaw:w}},13011:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(82884),k=r(71828),T=k.strScale,v=k.strRotate,c=k.strTranslate;se.exports=function(i,s,a){var o,l,u,d,g=i.node(),h=f[a.arrowhead||0],w=f[a.startarrowhead||0],y=(a.arrowwidth||1)*(a.arrowsize||1),p=(a.arrowwidth||1)*(a.startarrowsize||1),_=s.indexOf("start")>=0,x=s.indexOf("end")>=0,b=h.backoff*y+a.standoff,M=w.backoff*p+a.startstandoff;if("line"===g.nodeName){o={x:+i.attr("x1"),y:+i.attr("y1")},l={x:+i.attr("x2"),y:+i.attr("y2")};var m=o.x-l.x,D=o.y-l.y;if(d=(u=Math.atan2(D,m))+Math.PI,b&&M&&b+M>Math.sqrt(m*m+D*D))return void H();if(b){if(b*b>m*m+D*D)return void H();var S=b*Math.cos(u),O=b*Math.sin(u);l.x+=S,l.y+=O,i.attr({x2:l.x,y2:l.y})}if(M){if(M*M>m*m+D*D)return void H();var P=M*Math.cos(u),R=M*Math.sin(u);o.x-=P,o.y-=R,i.attr({x1:o.x,y1:o.y})}}else if("path"===g.nodeName){var F=g.getTotalLength(),B="";if(F<b+M)return void H();var J=g.getPointAtLength(0),z=g.getPointAtLength(.1);u=Math.atan2(J.y-z.y,J.x-z.x),o=g.getPointAtLength(Math.min(M,F)),B="0px,"+M+"px,";var $=g.getPointAtLength(F),G=g.getPointAtLength(F-.1);d=Math.atan2($.y-G.y,$.x-G.x),l=g.getPointAtLength(Math.max(0,F-b)),i.style("stroke-dasharray",B+=F-(B?M+b:b)+"px,"+F+"px")}function H(){i.style("stroke-dasharray","0px,100px")}function X(K,ue,ae,ne){K.path&&(K.noRotate&&(ae=0),I.select(g.parentNode).append("path").attr({class:i.attr("class"),d:K.path,transform:c(ue.x,ue.y)+v(180*ae/Math.PI)+T(ne)}).style({fill:C.rgb(a.arrowcolor),"stroke-width":0}))}_&&X(w,o,u,p),x&&X(h,l,d,y)}},32745:function(se,U,r){"use strict";var I=r(92605),C=r(44317);se.exports={moduleType:"component",name:"annotations",layoutAttributes:r(50215),supplyLayoutDefaults:r(84046),includeBasePlot:r(76325)("annotations"),calcAutorange:r(3749),draw:I.draw,drawOne:I.drawOne,drawRaw:I.drawRaw,hasClickToShow:C.hasClickToShow,onClick:C.onClick,convertCoords:r(94128)}},26997:function(se,U,r){"use strict";var I=r(50215),C=r(30962).overrideAll,f=r(44467).templatedArray;se.exports=C(f("annotation",{visible:I.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:I.xanchor,xshift:I.xshift,yanchor:I.yanchor,yshift:I.yshift,text:I.text,textangle:I.textangle,font:I.font,width:I.width,height:I.height,opacity:I.opacity,align:I.align,valign:I.valign,bgcolor:I.bgcolor,bordercolor:I.bordercolor,borderpad:I.borderpad,borderwidth:I.borderwidth,showarrow:I.showarrow,arrowcolor:I.arrowcolor,arrowhead:I.arrowhead,startarrowhead:I.startarrowhead,arrowside:I.arrowside,arrowsize:I.arrowsize,startarrowsize:I.startarrowsize,arrowwidth:I.arrowwidth,standoff:I.standoff,startstandoff:I.startstandoff,hovertext:I.hovertext,hoverlabel:I.hoverlabel,captureevents:I.captureevents}),"calc","from-root")},5485:function(se,U,r){"use strict";var I=r(71828),C=r(89298);function f(k,T){var v=T.fullSceneLayout.domain,c=T.fullLayout._size,i={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};k._xa={},I.extendFlat(k._xa,i),C.setConvert(k._xa),k._xa._offset=c.l+v.x[0]*c.w,k._xa.l2p=function(){return.5*(1+k._pdata[0]/k._pdata[3])*c.w*(v.x[1]-v.x[0])},k._ya={},I.extendFlat(k._ya,i),C.setConvert(k._ya),k._ya._offset=c.t+(1-v.y[1])*c.h,k._ya.l2p=function(){return.5*(1-k._pdata[1]/k._pdata[3])*c.h*(v.y[1]-v.y[0])}}se.exports=function(k){for(var T=k.fullSceneLayout.annotations,v=0;v<T.length;v++)f(T[v],k);k.fullLayout._infolayer.selectAll(".annotation-"+k.id).remove()}},20226:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(85501),k=r(25625),T=r(26997);function v(c,i,s,a){function o(u,d){return I.coerce(c,i,T,u,d)}function l(u){var d=u+"axis",g={_fullLayout:{}};return g._fullLayout[d]=s[d],C.coercePosition(i,g,o,u,u,.5)}o("visible")&&(k(c,i,a.fullLayout,o),l("x"),l("y"),l("z"),I.noneOrAll(c,i,["x","y","z"]),i.xref="x",i.yref="y",i.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),i.showarrow&&(i.axref="pixel",i.ayref="pixel",o("ax",-10),o("ay",-30),I.noneOrAll(c,i,["ax","ay"])))}se.exports=function(c,i,s){f(c,i,{name:"annotations",handleItemDefaults:v,fullLayout:s.fullLayout})}},82188:function(se,U,r){"use strict";var I=r(92605).drawRaw,C=r(63538),f=["x","y","z"];se.exports=function(k){for(var T=k.fullSceneLayout,v=k.dataScale,c=T.annotations,i=0;i<c.length;i++){for(var s=c[i],a=!1,o=0;o<3;o++){var l=f[o],d=T[l+"axis"].r2fraction(s[l]);if(d<0||d>1){a=!0;break}}a?k.fullLayout._infolayer.select(".annotation-"+k.id+'[data-index="'+i+'"]').remove():(s._pdata=C(k.glplot.cameraParams,[T.xaxis.r2l(s.x)*v[0],T.yaxis.r2l(s.y)*v[1],T.zaxis.r2l(s.z)*v[2]]),I(k.graphDiv,s,i,k.id,s._xa,s._ya))}}},2468:function(se,U,r){"use strict";var I=r(73972),C=r(71828);se.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:r(26997)}}},layoutAttributes:r(26997),handleDefaults:r(20226),includeBasePlot:function(f,k){var T=I.subplotsRegistry.gl3d;if(T)for(var v=T.attrRegex,c=Object.keys(f),i=0;i<c.length;i++){var s=c[i];v.test(s)&&(f[s].annotations||[]).length&&(C.pushUnique(k._basePlotModules,T),C.pushUnique(k._subplots.gl3d,s))}},convert:r(5485),draw:r(82188)}},7561:function(se,U,r){"use strict";se.exports=r(63489),r(94338),r(3961),r(38751),r(86825),r(37715),r(99384),r(43805),r(88874),r(83290),r(29108),r(55422),r(94320),r(31320),r(51367),r(21457)},72201:function(se,U,r){"use strict";var I=r(7561),C=r(71828),f=r(50606),k=f.EPOCHJD,T=f.ONEDAY,v={valType:"enumerated",values:C.sortObjectKeys(I.calendars),editType:"calc",dflt:"gregorian"},c=function(y,p,_,x){var b={};return b[_]=v,C.coerce(y,p,b,_,x)},i="##",s={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:i,w:i,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},a={};function o(y){return a[y]||(a[y]=I.instance(y))}function l(y){return C.extendFlat({},v,{description:y})}function u(y){return"Sets the calendar system to use with `"+y+"` date data."}var d={xcalendar:l(u("x"))},g=C.extendFlat({},d,{ycalendar:l(u("y"))}),h=C.extendFlat({},g,{zcalendar:l(u("z"))}),w=l(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));se.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:g,bar:g,box:g,heatmap:g,contour:g,histogram:g,histogram2d:g,histogram2dcontour:g,scatter3d:h,surface:h,mesh3d:h,scattergl:g,ohlc:d,candlestick:d},layout:{calendar:l(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:l(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:v,handleDefaults:c,handleTraceDefaults:function(y,p,_,x){for(var b=0;b<_.length;b++)c(y,p,_[b]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:o,worldCalFmt:function(y,p,_){for(var x,b,M,m,D,S=Math.floor((p+.05)/T)+k,O=o(_).fromJD(S),P=0;-1!==(P=y.indexOf("%",P));)"0"===(x=y.charAt(P+1))||"-"===x||"_"===x?(M=3,b=y.charAt(P+2),"_"===x&&(x="-")):(b=x,x="0",M=2),(m=s[b])?(D=m===i?i:O.formatDate(m[x]),y=y.substr(0,P)+D+y.substr(P+M),P+=D.length):P+=M;return y}}},22399:function(se,U){"use strict";U.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],U.defaultLine="#444",U.lightLine="#eee",U.background="#fff",U.borderLine="#BEC8D9",U.lightFraction=90.9090909090909},7901:function(se,U,r){"use strict";var I=r(84267),C=r(92770),f=r(73627).isTypedArray,k=se.exports={},T=r(22399);k.defaults=T.defaults;var v=k.defaultLine=T.defaultLine;k.lightLine=T.lightLine;var c=k.background=T.background;function i(s){if(C(s)||"string"!=typeof s)return s;var a=s.trim();if("rgb"!==a.substr(0,3))return s;var o=a.match(/^rgba?\s*\(([^()]*)\)$/);if(!o)return s;var l=o[1].trim().split(/\s*[\s,]\s*/),u="a"===a.charAt(3)&&4===l.length;if(!u&&3!==l.length)return s;for(var d=0;d<l.length;d++){if(!(l[d].length&&(l[d]=Number(l[d]),l[d]>=0)))return s;if(3===d)l[d]>1&&(l[d]=1);else if(l[d]>=1)return s}var g=Math.round(255*l[0])+", "+Math.round(255*l[1])+", "+Math.round(255*l[2]);return u?"rgba("+g+", "+l[3]+")":"rgb("+g+")"}k.tinyRGB=function(s){var a=s.toRgb();return"rgb("+Math.round(a.r)+", "+Math.round(a.g)+", "+Math.round(a.b)+")"},k.rgb=function(s){return k.tinyRGB(I(s))},k.opacity=function(s){return s?I(s).getAlpha():0},k.addOpacity=function(s,a){var o=I(s).toRgb();return"rgba("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+", "+a+")"},k.combine=function(s,a){var o=I(s).toRgb();if(1===o.a)return I(s).toRgbString();var l=I(a||c).toRgb(),u=1===l.a?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a};return I({r:u.r*(1-o.a)+o.r*o.a,g:u.g*(1-o.a)+o.g*o.a,b:u.b*(1-o.a)+o.b*o.a}).toRgbString()},k.contrast=function(s,a,o){var l=I(s);return 1!==l.getAlpha()&&(l=I(k.combine(s,c))),(l.isDark()?a?l.lighten(a):c:o?l.darken(o):v).toString()},k.stroke=function(s,a){var o=I(a);s.style({stroke:k.tinyRGB(o),"stroke-opacity":o.getAlpha()})},k.fill=function(s,a){var o=I(a);s.style({fill:k.tinyRGB(o),"fill-opacity":o.getAlpha()})},k.clean=function(s){if(s&&"object"==typeof s){var a,o,l,u,d=Object.keys(s);for(a=0;a<d.length;a++)if(u=s[l=d[a]],"color"===l.substr(l.length-5))if(Array.isArray(u))for(o=0;o<u.length;o++)u[o]=i(u[o]);else s[l]=i(u);else if("colorscale"===l.substr(l.length-10)&&Array.isArray(u))for(o=0;o<u.length;o++)Array.isArray(u[o])&&(u[o][1]=i(u[o][1]));else if(Array.isArray(u)){var g=u[0];if(!Array.isArray(g)&&g&&"object"==typeof g)for(o=0;o<u.length;o++)k.clean(u[o])}else u&&"object"==typeof u&&!f(u)&&k.clean(u)}}},63583:function(se,U,r){"use strict";var I=r(13838),C=r(41940),f=r(1426).extendFlat,k=r(30962).overrideAll;se.exports=k({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:I.linecolor,outlinewidth:I.linewidth,bordercolor:I.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:I.minor.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:f({},I.ticks,{dflt:""}),ticklabeloverflow:f({},I.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,ticklabelstep:I.ticklabelstep,showticklabels:I.showticklabels,labelalias:I.labelalias,tickfont:C({}),tickangle:I.tickangle,tickformat:I.tickformat,tickformatstops:I.tickformatstops,tickprefix:I.tickprefix,showtickprefix:I.showtickprefix,ticksuffix:I.ticksuffix,showticksuffix:I.showticksuffix,separatethousands:I.separatethousands,exponentformat:I.exponentformat,minexponent:I.minexponent,showexponent:I.showexponent,title:{text:{valType:"string"},font:C({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:C({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function(se){"use strict";se.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function(se,U,r){"use strict";var I=r(71828),C=r(44467),f=r(26218),k=r(38701),T=r(96115),v=r(89426),c=r(63583);se.exports=function(i,s,a){var o=C.newContainer(s,"colorbar"),l=i.colorbar||{};function u(B,J){return I.coerce(l,o,c,B,J)}var d=a.margin||{t:0,b:0,l:0,r:0},g=a.width-d.l-d.r,h=a.height-d.t-d.b,w="v"===u("orientation"),y=u("thicknessmode");u("thickness","fraction"===y?30/(w?g:h):30);var p=u("lenmode");u("len","fraction"===p?1:w?h:g);var _,x,b,M="paper"===u("yref"),m="paper"===u("xref"),D="left";w?(b="middle",D=m?"left":"right",_=m?1.02:1,x=.5):(b=M?"bottom":"top",D="center",_=.5,x=M?1.02:1),I.coerce(l,o,{x:{valType:"number",min:m?-2:0,max:m?3:1,dflt:_}},"x"),I.coerce(l,o,{y:{valType:"number",min:M?-2:0,max:M?3:1,dflt:x}},"y"),u("xanchor",D),u("xpad"),u("yanchor",b),u("ypad"),I.noneOrAll(l,o,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var S=I.coerce(l,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:w?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",-1!==S.indexOf("inside")?"hide past domain":"hide past div"),f(l,o,u,"linear");var O=a.font,P={outerTicks:!1,font:O};-1!==S.indexOf("inside")&&(P.bgColor="black"),v(l,o,u,"linear",P),T(l,o,u,"linear",P),k(l,o,u,"linear",P),u("title.text",a._dfltTitle.colorbar);var R=o.showticklabels?o.tickfont:O,F=I.extendFlat({},R,{color:O.color,size:I.bigFont(R.size)});I.coerceFont(u,"title.font",F),u("title.side",w?"top":"right")}},98981:function(se,U,r){"use strict";var I=r(39898),C=r(84267),f=r(74875),k=r(73972),T=r(89298),v=r(28569),c=r(71828),i=c.strTranslate,s=r(1426).extendFlat,a=r(6964),o=r(91424),l=r(7901),u=r(92998),d=r(63893),g=r(52075).flipScale,h=r(71453),w=r(52830),y=r(13838),p=r(18783),_=p.LINE_SPACING,x=p.FROM_TL,b=p.FROM_BR,M=r(30939).cn;se.exports={draw:function(m){var D=m._fullLayout._infolayer.selectAll("g."+M.colorbar).data(function(S){var O,P,R,F,B=S._fullLayout,J=S.calcdata,z=[];function $(fe){return s(fe,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function G(){"function"==typeof F.calc?F.calc(S,R,O):(O._fillgradient=P.reversescale?g(P.colorscale):P.colorscale,O._zrange=[P[F.min],P[F.max]])}for(var H=0;H<J.length;H++){var K=(R=J[H][0].trace)._module.colorbar;if(!0===R.visible&&K)for(var ue=Array.isArray(K),ae=ue?K:[K],ne=0;ne<ae.length;ne++){var Q=(F=ae[ne]).container;(P=Q?R[Q]:R)&&P.showscale&&((O=$(P.colorbar))._id="cb"+R.uid+(ue&&Q?"-"+Q:""),O._traceIndex=R.index,O._propPrefix=(Q?Q+".":"")+"colorbar.",O._meta=R._meta,G(),z.push(O))}}for(var ie in B._colorAxes)if((P=B[ie]).showscale){var le=B._colorAxes[ie];(O=$(P.colorbar))._id="cb"+ie,O._propPrefix=ie+".colorbar.",O._meta=B._meta,F={min:"cmin",max:"cmax"},"heatmap"!==le[0]&&(F.calc=(R=le[1])._module.colorbar.calc),G(),z.push(O)}return z}(m),function(S){return S._id});D.enter().append("g").attr("class",function(S){return S._id}).classed(M.colorbar,!0),D.each(function(S){var O=I.select(this);c.ensureSingle(O,"rect",M.cbbg),c.ensureSingle(O,"g",M.cbfills),c.ensureSingle(O,"g",M.cblines),c.ensureSingle(O,"g",M.cbaxis,function(R){R.classed(M.crisp,!0)}),c.ensureSingle(O,"g",M.cbtitleunshift,function(R){R.append("g").classed(M.cbtitle,!0)}),c.ensureSingle(O,"rect",M.cboutline);var R,F,B,J,z,$,G,H,P=function(R,F,B){var J="v"===F.orientation,z=F.len,$=F.lenmode,G=F.thickness,H=F.thicknessmode,X=F.outlinewidth,K=F.borderwidth,ue=F.bgcolor,ae=F.xanchor,ne=F.yanchor,Q=F.xpad,ie=F.ypad,le=F.x,fe=J?F.y:1-F.y,he="paper"===F.yref,pe="paper"===F.xref,xe=B._fullLayout,Ee=xe._size,Re=F._fillcolor,ke=F._line,Te=F.title,we=Te.side,je=F._zrange||I.extent(("function"==typeof Re?Re:ke.color).domain()),Ce="function"==typeof ke.color?ke.color:function(){return ke.color},Ie="function"==typeof Re?Re:function(){return Re},ge=F._levels,me=function(Je,ot,pt){var xt,He,Ge=ot._levels,dt=[],ht=[],kt=Ge.end+Ge.size/100,St=Ge.size,Et=1.001*pt[0]-.001*pt[1],wt=1.001*pt[1]-.001*pt[0];for(He=0;He<1e5&&(xt=Ge.start+He*St,!(St>0?xt>=kt:xt<=kt));He++)xt>Et&&xt<wt&&dt.push(xt);if(ot._fillgradient)ht=[0];else if("function"==typeof ot._fillcolor){var Nt=ot._filllevels;if(Nt)for(kt=Nt.end+Nt.size/100,St=Nt.size,He=0;He<1e5&&(xt=Nt.start+He*St,!(St>0?xt>=kt:xt<=kt));He++)xt>pt[0]&&xt<pt[1]&&ht.push(xt);else(ht=dt.map(function(_t){return _t-Ge.size/2})).push(ht[ht.length-1]+Ge.size)}else ot._fillcolor&&"string"==typeof ot._fillcolor&&(ht=[0]);return Ge.size<0&&(dt.reverse(),ht.reverse()),{line:dt,fill:ht}}(0,F,je),ce=me.fill,Ae=me.line,Ne=Math.round(G*("fraction"===H?J?Ee.w:Ee.h:1)),De=Ne/(J?Ee.w:Ee.h),qe=Math.round(z*("fraction"===$?J?Ee.h:Ee.w:1)),Ke=qe/(J?Ee.h:Ee.w),be=pe?Ee.w:B._fullLayout.width,Oe=he?Ee.h:B._fullLayout.height,Le=Math.round(J?le*be+Q:fe*Oe+ie),Ue={center:.5,right:1}[ae]||0,Ze={top:1,middle:.5}[ne]||0,We=J?le-Ue*De:fe-Ze*De,et=J?fe-Ze*Ke:le-Ue*Ke,nt=Math.round(J?Oe*(1-et):be*et);F._lenFrac=Ke,F._thickFrac=De,F._uFrac=We,F._vFrac=et;var ct=F._axis=function(Je,ot,pt){var xt=Je._fullLayout,He="v"===ot.orientation,Ge={type:"linear",range:pt,tickmode:ot.tickmode,nticks:ot.nticks,tick0:ot.tick0,dtick:ot.dtick,tickvals:ot.tickvals,ticktext:ot.ticktext,ticks:ot.ticks,ticklen:ot.ticklen,tickwidth:ot.tickwidth,tickcolor:ot.tickcolor,showticklabels:ot.showticklabels,labelalias:ot.labelalias,ticklabelposition:ot.ticklabelposition,ticklabeloverflow:ot.ticklabeloverflow,ticklabelstep:ot.ticklabelstep,tickfont:ot.tickfont,tickangle:ot.tickangle,tickformat:ot.tickformat,exponentformat:ot.exponentformat,minexponent:ot.minexponent,separatethousands:ot.separatethousands,showexponent:ot.showexponent,showtickprefix:ot.showtickprefix,tickprefix:ot.tickprefix,showticksuffix:ot.showticksuffix,ticksuffix:ot.ticksuffix,title:ot.title,showline:!0,anchor:"free",side:He?"right":"bottom",position:1},dt=He?"y":"x",ht={type:"linear",_id:dt+ot._id},kt={letter:dt,font:xt.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:xt.calendar};function St(Et,wt){return c.coerce(Ge,ht,y,Et,wt)}return h(Ge,ht,St,kt,xt),w(Ge,ht,St,kt),ht}(B,F,je);ct.position=De+(J?le+Q/Ee.w:fe+ie/Ee.h);var yt=-1!==["top","bottom"].indexOf(we);if(J&&yt&&(ct.title.side=we,ct.titlex=le+Q/Ee.w,ct.titley=et+("top"===Te.side?Ke-ie/Ee.h:ie/Ee.h)),J||yt||(ct.title.side=we,ct.titley=fe+ie/Ee.h,ct.titlex=et+Q/Ee.w),ke.color&&"auto"===F.tickmode){ct.tickmode="linear",ct.tick0=ge.start;var ut=ge.size,Ct=c.constrain(qe/50,4,15)+1,Dt=(je[1]-je[0])/((F.nticks||Ct)*ut);if(Dt>1){var vt=Math.pow(10,Math.floor(Math.log(Dt)/Math.LN10));ut*=vt*c.roundUp(Dt/vt,[2,5,10]),(Math.abs(ge.start)/ge.size+1e-6)%1<2e-6&&(ct.tick0=0)}ct.dtick=ut}ct.domain=J?[et+ie/Ee.h,et+Ke-ie/Ee.h]:[et+Q/Ee.w,et+Ke-Q/Ee.w],ct.setScale(),R.attr("transform",i(Math.round(Ee.l),Math.round(Ee.t)));var mt,Lt=R.select("."+M.cbtitleunshift).attr("transform",i(-Math.round(Ee.l),-Math.round(Ee.t))),Ft=ct.ticklabelposition,Rt=ct.title.font.size,Wt=R.select("."+M.cbaxis),Ht=0,it=0;function st(Je,ot){var pt={propContainer:ct,propName:F._propPrefix+"title",traceIndex:F._traceIndex,_meta:F._meta,placeholder:xe._dfltTitle.colorbar,containerGroup:R.select("."+M.cbtitle)},xt="h"===Je.charAt(0)?Je.substr(1):"h"+Je;R.selectAll("."+xt+",."+xt+"-math-group").remove(),u.draw(B,Je,s(pt,ot||{}))}return c.syncOrAsync([f.previousPromises,function(){var Je,ot;(J&&yt||!J&&!yt)&&("top"===we&&(Je=Q+Ee.l+be*le,ot=ie+Ee.t+Oe*(1-et-Ke)+3+.75*Rt),"bottom"===we&&(Je=Q+Ee.l+be*le,ot=ie+Ee.t+Oe*(1-et)-3-.25*Rt),"right"===we&&(ot=ie+Ee.t+Oe*fe+3+.75*Rt,Je=Q+Ee.l+be*et),st(ct._id+"title",{attributes:{x:Je,y:ot,"text-anchor":J?"start":"middle"}}))},function(){if(!J&&!yt||J&&yt){var Je,ot=R.select("."+M.cbtitle),pt=ot.select("text"),xt=[-X/2,X/2],He=ot.select(".h"+ct._id+"title-math-group").node(),Ge=15.6;if(pt.node()&&(Ge=parseInt(pt.node().style.fontSize,10)*_),He?(Je=o.bBox(He),it=Je.width,(Ht=Je.height)>Ge&&(xt[1]-=(Ht-Ge)/2)):pt.node()&&!pt.classed(M.jsPlaceholder)&&(Je=o.bBox(pt.node()),it=Je.width,Ht=Je.height),J){if(Ht){if(Ht+=5,"top"===we)ct.domain[1]-=Ht/Ee.h,xt[1]*=-1;else{ct.domain[0]+=Ht/Ee.h;var dt=d.lineCount(pt);xt[1]+=(1-dt)*Ge}ot.attr("transform",i(xt[0],xt[1])),ct.setScale()}}else it&&("right"===we&&(ct.domain[0]+=(it+Rt/2)/Ee.w),ot.attr("transform",i(xt[0],xt[1])),ct.setScale())}R.selectAll("."+M.cbfills+",."+M.cblines).attr("transform",J?i(0,Math.round(Ee.h*(1-ct.domain[1]))):i(Math.round(Ee.w*ct.domain[0]),0)),Wt.attr("transform",J?i(0,Math.round(-Ee.t)):i(Math.round(-Ee.l),0));var ht=R.select("."+M.cbfills).selectAll("rect."+M.cbfill).attr("style","").data(ce);ht.enter().append("rect").classed(M.cbfill,!0).style("stroke","none"),ht.exit().remove();var kt=je.map(ct.c2p).map(Math.round).sort(function(_t,Mt){return _t-Mt});ht.each(function(_t,Mt){var Pt=[0===Mt?je[0]:(ce[Mt]+ce[Mt-1])/2,Mt===ce.length-1?je[1]:(ce[Mt]+ce[Mt+1])/2].map(ct.c2p).map(Math.round);J&&(Pt[1]=c.constrain(Pt[1]+(Pt[1]>Pt[0])?1:-1,kt[0],kt[1]));var Zt=I.select(this).attr(J?"x":"y",Le).attr(J?"y":"x",I.min(Pt)).attr(J?"width":"height",Math.max(Ne,2)).attr(J?"height":"width",Math.max(I.max(Pt)-I.min(Pt),2));if(F._fillgradient)o.gradient(Zt,B,F._id,J?"vertical":"horizontalreversed",F._fillgradient,"fill");else{var $t=Ie(_t).replace("e-","");Zt.attr("fill",C($t).toHexString())}});var St=R.select("."+M.cblines).selectAll("path."+M.cbline).data(ke.color&&ke.width?Ae:[]);St.enter().append("path").classed(M.cbline,!0),St.exit().remove(),St.each(function(_t){var Mt=Le,Pt=Math.round(ct.c2p(_t))+ke.width/2%1;I.select(this).attr("d","M"+(J?Mt+","+Pt:Pt+","+Mt)+(J?"h":"v")+Ne).call(o.lineGroupStyle,ke.width,Ce(_t),ke.dash)}),Wt.selectAll("g."+ct._id+"tick,path").remove();var Et=Le+Ne+(X||0)/2-("outside"===F.ticks?1:0),wt=T.calcTicks(ct),Nt=T.getTickSigns(ct)[2];return T.drawTicks(B,ct,{vals:"inside"===ct.ticks?T.clipEnds(ct,wt):wt,layer:Wt,path:T.makeTickPath(ct,Et,Nt),transFn:T.makeTransTickFn(ct)}),T.drawLabels(B,ct,{vals:wt,layer:Wt,transFn:T.makeTransTickLabelFn(ct),labelFns:T.makeLabelFns(ct,Et)})},function(){if(J&&!yt||!J&&yt){var Je,ot,pt=ct.position||0,xt=ct._offset+ct._length/2;if("right"===we)ot=xt,Je=Ee.l+be*pt+10+Rt*(ct.showticklabels?1:.5);else if(Je=xt,"bottom"===we&&(ot=Ee.t+Oe*pt+10+(-1===Ft.indexOf("inside")?ct.tickfont.size:0)+("intside"!==ct.ticks&&F.ticklen||0)),"top"===we){var He=Te.text.split("<br>").length;ot=Ee.t+Oe*pt+10-Ne-_*Rt*He}st((J?"h":"v")+ct._id+"title",{avoid:{selection:I.select(B).selectAll("g."+ct._id+"tick"),side:we,offsetTop:J?0:Ee.t,offsetLeft:J?Ee.l:0,maxShift:J?xe.width:xe.height},attributes:{x:Je,y:ot,"text-anchor":"middle"},transform:{rotate:J?-90:0,offset:0}})}},f.previousPromises,function(){var Je,ot=Ne+X/2;-1===Ft.indexOf("inside")&&(Je=o.bBox(Wt.node()),ot+=J?Je.width:Je.height),mt=Lt.select("text");var pt=0,xt=J&&"top"===we,He=!J&&"right"===we,Ge=0;if(mt.node()&&!mt.classed(M.jsPlaceholder)){var dt,ht=Lt.select(".h"+ct._id+"title-math-group").node();ht&&(J&&yt||!J&&!yt)?(pt=(Je=o.bBox(ht)).width,dt=Je.height):(pt=(Je=o.bBox(Lt.node())).right-Ee.l-(J?Le:nt),dt=Je.bottom-Ee.t-(J?nt:Le),J||"top"!==we||(ot+=Je.height,Ge=Je.height)),He&&(mt.attr("transform",i(pt/2+Rt/2,0)),pt*=2),ot=Math.max(ot,J?pt:dt)}var kt=2*(J?Q:ie)+ot+K+X/2,St=0;!J&&Te.text&&"bottom"===ne&&fe<=0&&(kt+=St=kt/2,Ge+=St),xe._hColorbarMoveTitle=St,xe._hColorbarMoveCBTitle=Ge;var Et=K+X,wt=(J?Le:nt)-Et/2-(J?Q:0),Nt=(J?nt:Le)-(J?qe:ie+Ge-St);R.select("."+M.cbbg).attr("x",wt).attr("y",Nt).attr(J?"width":"height",Math.max(kt-St,2)).attr(J?"height":"width",Math.max(qe+Et,2)).call(l.fill,ue).call(l.stroke,F.bordercolor).style("stroke-width",K);var _t=He?Math.max(pt-10,0):0;R.selectAll("."+M.cboutline).attr("x",(J?Le:nt+Q)+_t).attr("y",(J?nt+ie-qe:Le)+(xt?Ht:0)).attr(J?"width":"height",Math.max(Ne,2)).attr(J?"height":"width",Math.max(qe-(J?2*ie+Ht:2*Q+_t),2)).call(l.stroke,F.outlinecolor).style({fill:"none","stroke-width":X});var Mt=J?Ue*kt:0,Pt=J?0:(1-Ze)*kt-Ge;if(R.attr("transform",i(Mt=pe?Ee.l-Mt:-Mt,Pt=he?Ee.t-Pt:-Pt)),!J&&(K||C(ue).getAlpha()&&!C.equals(xe.paper_bgcolor,ue))){var Zt=Wt.selectAll("text"),$t=Zt[0].length,Xt=R.select("."+M.cbbg).node(),dn=o.bBox(Xt),on=o.getTranslate(R);Zt.each(function(In,_n){var qn=$t-1;if(0===_n||_n===qn){var Wn,Nn=o.bBox(this),Xn=o.getTranslate(this);_n===qn?(Wn=dn.right+on.x+nt-K-2+le-(Nn.right+Xn.x))>0&&(Wn=0):0===_n&&(Wn=dn.left+on.x+nt+K+2-(Nn.left+Xn.x))<0&&(Wn=0),Wn&&($t<3?this.setAttribute("transform","translate("+Wn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var cn={},tn=x[ae],Cn=b[ae],Fn=x[ne],En=b[ne],rn=kt-Ne;J?("pixels"===$?(cn.y=fe,cn.t=qe*Fn,cn.b=qe*En):(cn.t=cn.b=0,cn.yt=fe+z*Fn,cn.yb=fe-z*En),"pixels"===H?(cn.x=le,cn.l=kt*tn,cn.r=kt*Cn):(cn.l=rn*tn,cn.r=rn*Cn,cn.xl=le-G*tn,cn.xr=le+G*Cn)):("pixels"===$?(cn.x=le,cn.l=qe*tn,cn.r=qe*Cn):(cn.l=cn.r=0,cn.xl=le+z*tn,cn.xr=le-z*Cn),"pixels"===H?(cn.y=1-fe,cn.t=kt*Fn,cn.b=kt*En):(cn.t=rn*Fn,cn.b=rn*En,cn.yt=fe-G*Fn,cn.yb=fe+G*En));var yn=F.y<.5?"b":"t",pn=F.x<.5?"l":"r";B._fullLayout._reservedMargin[F._id]={};var bn={r:xe.width-wt-Mt,l:wt+cn.r,b:xe.height-Nt-Pt,t:Nt+cn.b};pe&&he?f.autoMargin(B,F._id,cn):pe?B._fullLayout._reservedMargin[F._id][yn]=bn[yn]:he||J?B._fullLayout._reservedMargin[F._id][pn]=bn[pn]:B._fullLayout._reservedMargin[F._id][yn]=bn[yn]}],B)}(O,S,m);P&&P.then&&(m._promises||[]).push(P),m._context.edits.colorbarPosition&&(G="v"===(F=S).orientation,H=(B=m)._fullLayout._size,v.init({element:(R=O).node(),gd:B,prepFn:function(){J=R.attr("transform"),a(R)},moveFn:function(X,K){R.attr("transform",J+i(X,K)),z=v.align((G?F._uFrac:F._vFrac)+X/H.w,G?F._thickFrac:F._lenFrac,0,1,F.xanchor),$=v.align((G?F._vFrac:1-F._uFrac)-K/H.h,G?F._lenFrac:F._thickFrac,0,1,F.yanchor);var ue=v.getCursor(z,$,F.xanchor,F.yanchor);a(R,ue)},doneFn:function(){if(a(R),void 0!==z&&void 0!==$){var X={};X[F._propPrefix+"x"]=z,X[F._propPrefix+"y"]=$,void 0!==F._traceIndex?k.call("_guiRestyle",B,X,F._traceIndex):k.call("_guiRelayout",B,X)}}}))}),D.exit().each(function(S){f.autoMargin(m,S._id)}).remove(),D.order()}}},76228:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C){return I.isPlainObject(C.colorbar)}},12311:function(se,U,r){"use strict";se.exports={moduleType:"component",name:"colorbar",attributes:r(63583),supplyDefaults:r(62499),draw:r(98981).draw,hasColorbar:r(76228)}},50693:function(se,U,r){"use strict";var I=r(63583),C=r(30587).counter,f=r(78607),k=r(63282).scales;function T(v){return"`"+v+"`"}f(k),se.exports=function(v,c){v=v||"";var i,s=(c=c||{}).cLetter||"c",a="noScale"in c?c.noScale:"marker.line"===v,o="showScaleDflt"in c?c.showScaleDflt:"z"===s,l="string"==typeof c.colorscaleDflt?k[c.colorscaleDflt]:null,u=c.editTypeOverride||"",d=v?v+".":"";"colorAttr"in c?i=c.colorAttr:T(d+(i={z:"z",c:"color"}[s]));var g=s+"auto",h=s+"min",w=s+"max",y=s+"mid",p=(T(d+g),T(d+h),T(d+w),{});p[h]=p[w]=void 0;var _={};_[g]=!1;var x={};return"color"===i&&(x.color={valType:"color",arrayOk:!0,editType:u||"style"},c.anim&&(x.color.anim=!0)),x[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},x[h]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:_},x[w]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:_},x[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},x.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:!1!==c.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},a||(x.showscale={valType:"boolean",dflt:o,editType:"calc"},x.colorbar=I),c.noColorAxis||(x.coloraxis={valType:"subplotid",regex:C("coloraxis"),dflt:null,editType:"calc"}),x}},78803:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(52075).extractOpts;se.exports=function(k,T,v){var i=k._fullLayout,s=v.vals,a=v.containerStr,o=a?C.nestedProperty(T,a).get():T,l=f(o),u=!1!==l.auto,d=l.min,g=l.max,h=l.mid,w=function(){return C.aggNums(Math.min,null,s)},y=function(){return C.aggNums(Math.max,null,s)};void 0===d?d=w():u&&(d=o._colorAx&&I(d)?Math.min(d,w()):w()),void 0===g?g=y():u&&(g=o._colorAx&&I(g)?Math.max(g,y()):y()),u&&void 0!==h&&(g-h>h-d?d=h-(g-h):g-h<h-d&&(g=h+(h-d))),d===g&&(d-=.5,g+=.5),l._sync("min",d),l._sync("max",g),l.autocolorscale&&l._sync("colorscale",d*g<0?i.colorscale.diverging:d>=0?i.colorscale.sequential:i.colorscale.sequentialminus)}},33046:function(se,U,r){"use strict";var I=r(71828),C=r(52075).hasColorscale,f=r(52075).extractOpts;se.exports=function(k,T){function v(u,d){var g=u["_"+d];void 0!==g&&(u[d]=g)}function c(u,d){var g=d.container?I.nestedProperty(u,d.container).get():u;if(g)if(g.coloraxis)g._colorAx=T[g.coloraxis];else{var h=f(g),w=h.auto;(w||void 0===h.min)&&v(g,d.min),(w||void 0===h.max)&&v(g,d.max),h.autocolorscale&&v(g,"colorscale")}}for(var i=0;i<k.length;i++){var s=k[i],a=s._module.colorbar;if(a)if(Array.isArray(a))for(var o=0;o<a.length;o++)c(s,a[o]);else c(s,a);C(s,"marker.line")&&c(s,{container:"marker.line",min:"cmin",max:"cmax"})}for(var l in T._colorAxes)c(T[l],{min:"cmin",max:"cmax"})}},1586:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(76228),k=r(62499),T=r(63282).isValid,v=r(73972).traceIs;function c(i,s){var a=s.slice(0,s.length-1);return s?C.nestedProperty(i,a).get()||{}:i}se.exports=function i(s,a,o,l,u){var d=u.prefix,g=u.cLetter,h="_module"in a,w=c(s,d),y=c(a,d),p=c(a._template||{},d)||{},_=function(){return delete s.coloraxis,delete a.coloraxis,i(s,a,o,l,u)};if(h){var x=o._colorAxes||{},b=l(d+"coloraxis");if(b){var M=v(a,"contour")&&C.nestedProperty(a,"contours.coloring").get()||"heatmap",m=x[b];return void(m?(m[2].push(_),m[0]!==M&&(m[0]=!1,C.warn(["Ignoring coloraxis:",b,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[b]=[M,a,[_]])}}var D=w[g+"min"],S=w[g+"max"],O=I(D)&&I(S)&&D<S;l(d+g+"auto",!O)?l(d+g+"mid"):(l(d+g+"min"),l(d+g+"max"));var P,R,F=w.colorscale,B=p.colorscale;void 0!==F&&(P=!T(F)),void 0!==B&&(P=!T(B)),l(d+"autocolorscale",P),l(d+"colorscale"),l(d+"reversescale"),"marker.line."!==d&&(d&&h&&(R=f(w)),l(d+"showscale",R)&&(d&&p&&(y._template=p),k(w,y,o)))}},52075:function(se,U,r){"use strict";var I=r(39898),C=r(84267),f=r(92770),k=r(71828),T=r(7901),v=r(63282).isValid,c=["showscale","autocolorscale","colorscale","reversescale","colorbar"],i=["min","max","mid","auto"];function s(d){var g,h,w,y=d._colorAx,p=y||d,_={};for(h=0;h<c.length;h++)_[w=c[h]]=p[w];if(y)for(g="c",h=0;h<i.length;h++)_[w=i[h]]=p["c"+w];else{var x;for(h=0;h<i.length;h++)((x="c"+(w=i[h]))in p||(x="z"+w)in p)&&(_[w]=p[x]);g=x.charAt(0)}return _._sync=function(b,M){var m=-1!==i.indexOf(b)?g+b:b;p[m]=p["_"+m]=M},_}function a(d){for(var g=s(d),h=g.min,w=g.max,y=g.reversescale?o(g.colorscale):g.colorscale,p=y.length,_=new Array(p),x=new Array(p),b=0;b<p;b++){var M=y[b];_[b]=h+M[0]*(w-h),x[b]=M[1]}return{domain:_,range:x}}function o(d){for(var g=d.length,h=new Array(g),w=g-1,y=0;w>=0;w--,y++){var p=d[w];h[y]=[1-p[0],p[1]]}return h}function l(d,g){g=g||{};for(var h=d.domain,w=d.range,y=w.length,p=new Array(y),_=0;_<y;_++){var x=C(w[_]).toRgb();p[_]=[x.r,x.g,x.b,x.a]}var b,M=I.scale.linear().domain(h).range(p).clamp(!0),m=g.noNumericCheck,D=g.returnArray;return(b=m&&D?M:m?function(S){return u(M(S))}:D?function(S){return f(S)?M(S):C(S).isValid()?S:T.defaultLine}:function(S){return f(S)?u(M(S)):C(S).isValid()?S:T.defaultLine}).domain=M.domain,b.range=function(){return w},b}function u(d){return C({r:d[0],g:d[1],b:d[2],a:d[3]}).toRgbString()}se.exports={hasColorscale:function(d,g,h){var w=g?k.nestedProperty(d,g).get()||{}:d,y=w[h||"color"],p=!1;if(k.isArrayOrTypedArray(y))for(var _=0;_<y.length;_++)if(f(y[_])){p=!0;break}return k.isPlainObject(w)&&(p||!0===w.showscale||f(w.cmin)&&f(w.cmax)||v(w.colorscale)||k.isPlainObject(w.colorbar))},extractOpts:s,extractScale:a,flipScale:o,makeColorScaleFunc:l,makeColorScaleFuncFromTrace:function(d,g){return l(a(d),g)}}},21081:function(se,U,r){"use strict";var I=r(63282),C=r(52075);se.exports={moduleType:"component",name:"colorscale",attributes:r(50693),layoutAttributes:r(72673),supplyLayoutDefaults:r(30959),handleDefaults:r(1586),crossTraceDefaults:r(33046),calc:r(78803),scales:I.scales,defaultScale:I.defaultScale,getScale:I.get,isValidScale:I.isValid,hasColorscale:C.hasColorscale,extractOpts:C.extractOpts,extractScale:C.extractScale,flipScale:C.flipScale,makeColorScaleFunc:C.makeColorScaleFunc,makeColorScaleFuncFromTrace:C.makeColorScaleFuncFromTrace}},72673:function(se,U,r){"use strict";var I=r(1426).extendFlat,C=r(50693),f=r(63282).scales;se.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:f.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:f.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:f.RdBu,editType:"calc"}},coloraxis:I({_isSubplotObj:!0,editType:"calc"},C("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function(se,U,r){"use strict";var I=r(71828),C=r(44467),f=r(72673),k=r(1586);se.exports=function(T,v){function c(g,h){return I.coerce(T,v,f,g,h)}c("colorscale.sequential"),c("colorscale.sequentialminus"),c("colorscale.diverging");var i,s,a=v._colorAxes;function o(g,h){return I.coerce(i,s,f.coloraxis,g,h)}for(var l in a){var u=a[l];if(u[0])i=T[l]||{},(s=C.newContainer(v,l,"coloraxis"))._name=l,k(i,s,v,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<u[2].length;d++)u[2][d]();delete v._colorAxes[l]}}}},63282:function(se,U,r){"use strict";var I=r(84267),C={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},f=C.RdBu;function k(T){var v=0;if(!Array.isArray(T)||T.length<2||!T[0]||!T[T.length-1]||0!=+T[0][0]||1!=+T[T.length-1][0])return!1;for(var c=0;c<T.length;c++){var i=T[c];if(2!==i.length||+i[0]<v||!I(i[1]).isValid())return!1;v=+i[0]}return!0}se.exports={scales:C,defaultScale:f,get:function(T,v){if(v||(v=f),!T)return v;function c(){try{T=C[T]||JSON.parse(T)}catch{T=v}}return"string"==typeof T&&(c(),"string"==typeof T&&c()),k(T)?T:v},isValid:function(T){return void 0!==C[T]||k(T)}}},92807:function(se){"use strict";se.exports=function(U,r,I,C,f){var k=(U-I)/(C-I),T=k+r/(C-I),v=(k+T)/2;return"left"===f||"bottom"===f?k:"center"===f||"middle"===f?v:"right"===f||"top"===f?T:k<.6666666666666666-v?k:T>1.3333333333333333-v?T:v}},70461:function(se,U,r){"use strict";var I=r(71828),C=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];se.exports=function(f,k,T,v){return f="left"===T?0:"center"===T?1:"right"===T?2:I.constrain(Math.floor(3*f),0,2),k="bottom"===v?0:"middle"===v?1:"top"===v?2:I.constrain(Math.floor(3*k),0,2),C[k][f]}},64505:function(se,U){"use strict";U.selectMode=function(r){return"lasso"===r||"select"===r},U.drawMode=function(r){return"drawclosedpath"===r||"drawopenpath"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},U.openMode=function(r){return"drawline"===r||"drawopenpath"===r},U.rectMode=function(r){return"select"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r},U.freeMode=function(r){return"lasso"===r||"drawclosedpath"===r||"drawopenpath"===r},U.selectingOrDrawing=function(r){return U.freeMode(r)||U.rectMode(r)}},28569:function(se,U,r){"use strict";var I=r(48956),C=r(57035),f=r(38520),k=r(71828).removeElement,T=r(85555),v=se.exports={};v.align=r(92807),v.getCursor=r(70461);var c=r(26041);function i(){var a=document.createElement("div");a.className="dragcover";var o=a.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(a),a}function s(a){return I(a.changedTouches?a.changedTouches[0]:a,document.body)}v.unhover=c.wrapped,v.unhoverRaw=c.raw,v.init=function(a){var o,l,u,d,g,h,w,y,p=a.gd,_=1,x=p._context.doubleClickDelay,b=a.element;p._mouseDownTime||(p._mouseDownTime=0),b.style.pointerEvents="all",b.onmousedown=m,f?(b._ontouchstart&&b.removeEventListener("touchstart",b._ontouchstart),b._ontouchstart=m,b.addEventListener("touchstart",m,{passive:!1})):b.ontouchstart=m;var M=a.clampFn||function(O,P,R){return Math.abs(O)<R&&(O=0),Math.abs(P)<R&&(P=0),[O,P]};function m(O){p._dragged=!1,p._dragging=!0;var P=s(O);o=P[0],l=P[1],w=O.target,h=O,y=2===O.buttons||O.ctrlKey,void 0===O.clientX&&void 0===O.clientY&&(O.clientX=o,O.clientY=l),(u=(new Date).getTime())-p._mouseDownTime<x?_+=1:(_=1,p._mouseDownTime=u),a.prepFn&&a.prepFn(O,o,l),C&&!y?(g=i()).style.cursor=window.getComputedStyle(b).cursor:C||(g=document,d=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(b).cursor),document.addEventListener("mouseup",S),document.addEventListener("touchend",S),!1!==a.dragmode&&(O.preventDefault(),document.addEventListener("mousemove",D),document.addEventListener("touchmove",D,{passive:!1}))}function D(O){O.preventDefault();var P=s(O),F=M(P[0]-o,P[1]-l,a.minDrag||T.MINDRAG),B=F[0],J=F[1];(B||J)&&(p._dragged=!0,v.unhover(p,O)),p._dragged&&a.moveFn&&!y&&(p._dragdata={element:b,dx:B,dy:J},a.moveFn(B,J))}function S(O){if(delete p._dragdata,!1!==a.dragmode&&(O.preventDefault(),document.removeEventListener("mousemove",D),document.removeEventListener("touchmove",D)),document.removeEventListener("mouseup",S),document.removeEventListener("touchend",S),C?k(g):d&&(g.documentElement.style.cursor=d,d=null),p._dragging){if(p._dragging=!1,(new Date).getTime()-p._mouseDownTime>x&&(_=Math.max(_-1,1)),p._dragged)a.doneFn&&a.doneFn();else if(a.clickFn&&a.clickFn(_,h),!y){var P;try{P=new MouseEvent("click",O)}catch{var R=s(O);(P=document.createEvent("MouseEvents")).initMouseEvent("click",O.bubbles,O.cancelable,O.view,O.detail,O.screenX,O.screenY,R[0],R[1],O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,O.button,O.relatedTarget)}w.dispatchEvent(P)}p._dragging=!1,p._dragged=!1}else p._dragged=!1}},v.coverSlip=i},26041:function(se,U,r){"use strict";var I=r(11086),C=r(79990),f=r(24401).getGraphDiv,k=r(26675),T=se.exports={};T.wrapped=function(v,c,i){(v=f(v))._fullLayout&&C.clear(v._fullLayout._uid+k.HOVERID),T.raw(v,c,i)},T.raw=function(v,c){var i=v._fullLayout,s=v._hoverdata;c||(c={}),c.target&&!v._dragged&&!1===I.triggerHandler(v,"plotly_beforehover",c)||(i._hoverlayer.selectAll("g").remove(),i._hoverlayer.selectAll("line").remove(),i._hoverlayer.selectAll("circle").remove(),v._hoverdata=void 0,c.target&&s&&v.emit("plotly_unhover",{event:c,points:s}))}},79952:function(se,U){"use strict";U.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},U.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.numberFormat,k=r(92770),T=r(84267),v=r(73972),c=r(7901),i=r(21081),s=C.strTranslate,a=r(63893),o=r(77922),l=r(18783).LINE_SPACING,u=r(37822).DESELECTDIM,d=r(34098),g=r(39984),h=r(23469).appendArrayPointValue,w=se.exports={};function y(Ce,Ie,ge){var me=Ie.fillpattern,ce=me&&w.getPatternAttr(me.shape,0,"");if(ce){var Ae=w.getPatternAttr(me.bgcolor,0,null),Ne=w.getPatternAttr(me.fgcolor,0,null),De=me.fgopacity,qe=w.getPatternAttr(me.size,0,8),Ke=w.getPatternAttr(me.solidity,0,.3);w.pattern(Ce,"point",ge,Ie.uid,ce,qe,Ke,void 0,me.fillmode,Ae,Ne,De)}else Ie.fillcolor&&Ce.call(c.fill,Ie.fillcolor)}w.font=function(Ce,Ie,ge,me){C.isPlainObject(Ie)&&(me=Ie.color,ge=Ie.size,Ie=Ie.family),Ie&&Ce.style("font-family",Ie),ge+1&&Ce.style("font-size",ge+"px"),me&&Ce.call(c.fill,me)},w.setPosition=function(Ce,Ie,ge){Ce.attr("x",Ie).attr("y",ge)},w.setSize=function(Ce,Ie,ge){Ce.attr("width",Ie).attr("height",ge)},w.setRect=function(Ce,Ie,ge,me,ce){Ce.call(w.setPosition,Ie,ge).call(w.setSize,me,ce)},w.translatePoint=function(Ce,Ie,ge,me){var ce=ge.c2p(Ce.x),Ae=me.c2p(Ce.y);return!!(k(ce)&&k(Ae)&&Ie.node())&&("text"===Ie.node().nodeName?Ie.attr("x",ce).attr("y",Ae):Ie.attr("transform",s(ce,Ae)),!0)},w.translatePoints=function(Ce,Ie,ge){Ce.each(function(me){var ce=I.select(this);w.translatePoint(me,ce,Ie,ge)})},w.hideOutsideRangePoint=function(Ce,Ie,ge,me,ce,Ae){Ie.attr("display",ge.isPtWithinRange(Ce,ce)&&me.isPtWithinRange(Ce,Ae)?null:"none")},w.hideOutsideRangePoints=function(Ce,Ie){if(Ie._hasClipOnAxisFalse){var ge=Ie.xaxis,me=Ie.yaxis;Ce.each(function(ce){var Ae=ce[0].trace,Ne=Ae.xcalendar,De=Ae.ycalendar,qe=v.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";Ce.selectAll(qe).each(function(Ke){w.hideOutsideRangePoint(Ke,I.select(this),ge,me,Ne,De)})})}},w.crispRound=function(Ce,Ie,ge){return Ie&&k(Ie)?Ce._context.staticPlot?Ie:Ie<1?1:Math.round(Ie):ge||0},w.singleLineStyle=function(Ce,Ie,ge,me,ce){Ie.style("fill","none");var Ae=(((Ce||[])[0]||{}).trace||{}).line||{},Ne=ge||Ae.width||0,De=ce||Ae.dash||"";c.stroke(Ie,me||Ae.color),w.dashLine(Ie,De,Ne)},w.lineGroupStyle=function(Ce,Ie,ge,me){Ce.style("fill","none").each(function(ce){var Ae=(((ce||[])[0]||{}).trace||{}).line||{},Ne=Ie||Ae.width||0,De=me||Ae.dash||"";I.select(this).call(c.stroke,ge||Ae.color).call(w.dashLine,De,Ne)})},w.dashLine=function(Ce,Ie,ge){Ie=w.dashStyle(Ie,ge=+ge||0),Ce.style({"stroke-dasharray":Ie,"stroke-width":ge+"px"})},w.dashStyle=function(Ce,Ie){Ie=+Ie||1;var ge=Math.max(Ie,3);return"solid"===Ce?Ce="":"dot"===Ce?Ce=ge+"px,"+ge+"px":"dash"===Ce?Ce=3*ge+"px,"+3*ge+"px":"longdash"===Ce?Ce=5*ge+"px,"+5*ge+"px":"dashdot"===Ce?Ce=3*ge+"px,"+ge+"px,"+ge+"px,"+ge+"px":"longdashdot"===Ce&&(Ce=5*ge+"px,"+2*ge+"px,"+ge+"px,"+2*ge+"px"),Ce},w.singleFillStyle=function(Ce,Ie){var ge=I.select(Ce.node());y(Ce,((ge.data()[0]||[])[0]||{}).trace||{},Ie)},w.fillGroupStyle=function(Ce,Ie){Ce.style("stroke-width",0).each(function(ge){var me=I.select(this);ge[0].trace&&y(me,ge[0].trace,Ie)})};var p=r(90998);w.symbolNames=[],w.symbolFuncs=[],w.symbolBackOffs=[],w.symbolNeedLines={},w.symbolNoDot={},w.symbolNoFill={},w.symbolList=[],Object.keys(p).forEach(function(Ce){var Ie=p[Ce],ge=Ie.n;w.symbolList.push(ge,String(ge),Ce,ge+100,String(ge+100),Ce+"-open"),w.symbolNames[ge]=Ce,w.symbolFuncs[ge]=Ie.f,w.symbolBackOffs[ge]=Ie.backoff||0,Ie.needLine&&(w.symbolNeedLines[ge]=!0),Ie.noDot?w.symbolNoDot[ge]=!0:w.symbolList.push(ge+200,String(ge+200),Ce+"-dot",ge+300,String(ge+300),Ce+"-open-dot"),Ie.noFill&&(w.symbolNoFill[ge]=!0)});var _=w.symbolNames.length;function x(Ce,Ie,ge,me){return w.symbolFuncs[Ce%100](Ie,ge,me)+(Ce>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}w.symbolNumber=function(Ce){if(k(Ce))Ce=+Ce;else if("string"==typeof Ce){var Ie=0;Ce.indexOf("-open")>0&&(Ie=100,Ce=Ce.replace("-open","")),Ce.indexOf("-dot")>0&&(Ie+=200,Ce=Ce.replace("-dot","")),(Ce=w.symbolNames.indexOf(Ce))>=0&&(Ce+=Ie)}return Ce%100>=_||Ce>=400?0:Math.floor(Math.max(Ce,0))};var b={x1:1,x2:0,y1:0,y2:0},M={x1:0,x2:0,y1:1,y2:0},m=f("~f"),D={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:M},verticalreversed:{node:"linearGradient",attrs:M,reversed:!0}};w.gradient=function(Ce,Ie,ge,me,ce,Ae){for(var Ne=ce.length,De=D[me],qe=new Array(Ne),Ke=0;Ke<Ne;Ke++)De.reversed?qe[Ne-1-Ke]=[m(100*(1-ce[Ke][0])),ce[Ke][1]]:qe[Ke]=[m(100*ce[Ke][0]),ce[Ke][1]];var be=Ie._fullLayout,Oe="g"+be._uid+"-"+ge,Le=be._defs.select(".gradients").selectAll("#"+Oe).data([me+qe.join(";")],C.identity);Le.exit().remove(),Le.enter().append(De.node).each(function(){var Ue=I.select(this);De.attrs&&Ue.attr(De.attrs),Ue.attr("id",Oe);var Ze=Ue.selectAll("stop").data(qe);Ze.exit().remove(),Ze.enter().append("stop"),Ze.each(function(We){var et=T(We[1]);I.select(this).attr({offset:We[0]+"%","stop-color":c.tinyRGB(et),"stop-opacity":et.getAlpha()})})}),Ce.style(Ae,ae(Oe,Ie)).style(Ae+"-opacity",null),Ce.classed("gradient_filled",!0)},w.pattern=function(Ce,Ie,ge,me,ce,Ae,Ne,De,qe,Ke,be,Oe){var Le="legend"===Ie;De&&("overlay"===qe?be=c.contrast(Ke=De):(Ke=void 0,be=De));var Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt=ge._fullLayout,vt="p"+Dt._uid+"-"+me,mt={},Lt=T(be),Ft=c.tinyRGB(Lt),Rt=Oe*Lt.getAlpha();switch(ce){case"/":Ue=Ae*Math.sqrt(2),Ze=Ae*Math.sqrt(2),ct="path",mt={d:We="M-"+Ue/4+","+Ze/4+"l"+Ue/2+",-"+Ze/2+"M0,"+Ze+"L"+Ue+",0M"+Ue/4*3+","+Ze/4*5+"l"+Ue/2+",-"+Ze/2,opacity:Rt,stroke:Ft,"stroke-width":(et=Ne*Ae)+"px"};break;case"\\":Ue=Ae*Math.sqrt(2),Ze=Ae*Math.sqrt(2),ct="path",mt={d:We="M"+Ue/4*3+",-"+Ze/4+"l"+Ue/2+","+Ze/2+"M0,0L"+Ue+","+Ze+"M-"+Ue/4+","+Ze/4*3+"l"+Ue/2+","+Ze/2,opacity:Rt,stroke:Ft,"stroke-width":(et=Ne*Ae)+"px"};break;case"x":Ue=Ae*Math.sqrt(2),Ze=Ae*Math.sqrt(2),We="M-"+Ue/4+","+Ze/4+"l"+Ue/2+",-"+Ze/2+"M0,"+Ze+"L"+Ue+",0M"+Ue/4*3+","+Ze/4*5+"l"+Ue/2+",-"+Ze/2+"M"+Ue/4*3+",-"+Ze/4+"l"+Ue/2+","+Ze/2+"M0,0L"+Ue+","+Ze+"M-"+Ue/4+","+Ze/4*3+"l"+Ue/2+","+Ze/2,et=Ae-Ae*Math.sqrt(1-Ne),ct="path",mt={d:We,opacity:Rt,stroke:Ft,"stroke-width":et+"px"};break;case"|":ct="path",ct="path",mt={d:We="M"+(Ue=Ae)/2+",0L"+Ue/2+","+(Ze=Ae),opacity:Rt,stroke:Ft,"stroke-width":(et=Ne*Ae)+"px"};break;case"-":ct="path",ct="path",mt={d:We="M0,"+(Ze=Ae)/2+"L"+(Ue=Ae)+","+Ze/2,opacity:Rt,stroke:Ft,"stroke-width":(et=Ne*Ae)+"px"};break;case"+":ct="path",We="M"+(Ue=Ae)/2+",0L"+Ue/2+","+(Ze=Ae)+"M0,"+Ze/2+"L"+Ue+","+Ze/2,et=Ae-Ae*Math.sqrt(1-Ne),ct="path",mt={d:We,opacity:Rt,stroke:Ft,"stroke-width":et+"px"};break;case".":Ue=Ae,Ze=Ae,Ne<Math.PI/4?nt=Math.sqrt(Ne*Ae*Ae/Math.PI):(yt=Ne,ut=Math.PI/4,nt=(Ct=Ae/2)+(Ae/Math.sqrt(2)-Ct)*(yt-ut)/(1-ut)),ct="circle",mt={cx:Ue/2,cy:Ze/2,r:nt,opacity:Rt,fill:Ft}}var Wt=[ce||"noSh",Ke||"noBg",be||"noFg",Ae,Ne].join(";"),Ht=Dt._defs.select(".patterns").selectAll("#"+vt).data([Wt],C.identity);Ht.exit().remove(),Ht.enter().append("pattern").each(function(){var it=I.select(this);if(it.attr({id:vt,width:Ue+"px",height:Ze+"px",patternUnits:"userSpaceOnUse",patternTransform:Le?"scale(0.8)":""}),Ke){var st=T(Ke),Je=c.tinyRGB(st),ot=st.getAlpha(),pt=it.selectAll("rect").data([0]);pt.exit().remove(),pt.enter().append("rect").attr({width:Ue+"px",height:Ze+"px",fill:Je,"fill-opacity":ot})}var xt=it.selectAll(ct).data([0]);xt.exit().remove(),xt.enter().append(ct).attr(mt)}),Ce.style("fill",ae(vt,ge)).style("fill-opacity",null),Ce.classed("pattern_filled",!0)},w.initGradients=function(Ce){C.ensureSingle(Ce._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),I.select(Ce).selectAll(".gradient_filled").classed("gradient_filled",!1)},w.initPatterns=function(Ce){C.ensureSingle(Ce._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),I.select(Ce).selectAll(".pattern_filled").classed("pattern_filled",!1)},w.getPatternAttr=function(Ce,Ie,ge){return Ce&&C.isArrayOrTypedArray(Ce)?Ie<Ce.length?Ce[Ie]:ge:Ce},w.pointStyle=function(Ce,Ie,ge,me){if(Ce.size()){var ce=w.makePointStyleFns(Ie);Ce.each(function(Ae){w.singlePointStyle(Ae,I.select(this),Ie,ce,ge,me)})}},w.singlePointStyle=function(Ce,Ie,ge,me,ce,Ae){var Ne=ge.marker,De=Ne.line;if(Ae&&Ae.i>=0&&void 0===Ce.i&&(Ce.i=Ae.i),Ie.style("opacity",me.selectedOpacityFn?me.selectedOpacityFn(Ce):void 0===Ce.mo?Ne.opacity:Ce.mo),me.ms2mrc){var qe;qe="various"===Ce.ms||"various"===Ne.size?3:me.ms2mrc(Ce.ms),Ce.mrc=qe,me.selectedSizeFn&&(qe=Ce.mrc=me.selectedSizeFn(Ce));var Ke=w.symbolNumber(Ce.mx||Ne.symbol)||0;Ce.om=Ke%200>=100;var be=je(Ce,ge),Oe=ie(Ce,ge);Ie.attr("d",x(Ke,qe,be,Oe))}var Le,Ue,Ze,We=!1;if(Ce.so?(Ze=De.outlierwidth,Ue=De.outliercolor,Le=Ne.outliercolor):(Ze=(Ce.mlw+1||(De||{}).width+1||(Ce.trace?(Ce.trace.marker.line||{}).width:0)+1)-1||0,Ue="mlc"in Ce?Ce.mlcc=me.lineScale(Ce.mlc):C.isArrayOrTypedArray(De.color)?c.defaultLine:De.color,C.isArrayOrTypedArray(Ne.color)&&(Le=c.defaultLine,We=!0),Le="mc"in Ce?Ce.mcc=me.markerScale(Ce.mc):Ne.color||Ne.colors||"rgba(0,0,0,0)",me.selectedColorFn&&(Le=me.selectedColorFn(Ce))),Ce.om)Ie.call(c.stroke,Le).style({"stroke-width":(Ze||1)+"px",fill:"none"});else{Ie.style("stroke-width",(Ce.isBlank?0:Ze)+"px");var nt=Ne.gradient,ct=Ce.mgt;ct?We=!0:ct=nt&&nt.type,C.isArrayOrTypedArray(ct)&&(D[ct=ct[0]]||(ct=0));var yt=Ne.pattern,ut=yt&&w.getPatternAttr(yt.shape,Ce.i,"");if(ct&&"none"!==ct){var Ct=Ce.mgc;Ct?We=!0:Ct=nt.color;var Dt=ge.uid;We&&(Dt+="-"+Ce.i),w.gradient(Ie,ce,Dt,ct,[[0,Ct],[1,Le]],"fill")}else if(ut){var vt=!1,mt=yt.fgcolor;!mt&&Ae&&Ae.color&&(mt=Ae.color,vt=!0);var Lt=w.getPatternAttr(mt,Ce.i,Ae&&Ae.color||null),Ft=w.getPatternAttr(yt.bgcolor,Ce.i,null),Rt=yt.fgopacity,Wt=w.getPatternAttr(yt.size,Ce.i,8),Ht=w.getPatternAttr(yt.solidity,Ce.i,.3);vt=vt||Ce.mcc||C.isArrayOrTypedArray(yt.shape)||C.isArrayOrTypedArray(yt.bgcolor)||C.isArrayOrTypedArray(yt.fgcolor)||C.isArrayOrTypedArray(yt.size)||C.isArrayOrTypedArray(yt.solidity);var it=ge.uid;vt&&(it+="-"+Ce.i),w.pattern(Ie,"point",ce,it,ut,Wt,Ht,Ce.mcc,yt.fillmode,Ft,Lt,Rt)}else C.isArrayOrTypedArray(Le)?c.fill(Ie,Le[Ce.i]):c.fill(Ie,Le);Ze&&c.stroke(Ie,Ue)}},w.makePointStyleFns=function(Ce){var Ie={},ge=Ce.marker;return Ie.markerScale=w.tryColorscale(ge,""),Ie.lineScale=w.tryColorscale(ge,"line"),v.traceIs(Ce,"symbols")&&(Ie.ms2mrc=d.isBubble(Ce)?g(Ce):function(){return(ge.size||6)/2}),Ce.selectedpoints&&C.extendFlat(Ie,w.makeSelectedPointStyleFns(Ce)),Ie},w.makeSelectedPointStyleFns=function(Ce){var Ie={},ce=Ce.marker||{},Ae=(Ce.selected||{}).marker||{},Ne=(Ce.unselected||{}).marker||{},qe=Ae.opacity,Ke=Ne.opacity,be=void 0!==qe,Oe=void 0!==Ke;(C.isArrayOrTypedArray(ce.opacity)||be||Oe)&&(Ie.selectedOpacityFn=function(ut){var Ct=void 0===ut.mo?ce.opacity:ut.mo;return ut.selected?be?qe:Ct:Oe?Ke:u*Ct});var Le=ce.color,Ue=Ae.color,Ze=Ne.color;(Ue||Ze)&&(Ie.selectedColorFn=function(ut){var Ct=ut.mcc||Le;return ut.selected?Ue||Ct:Ze||Ct});var We=ce.size,et=Ae.size,nt=Ne.size,ct=void 0!==et,yt=void 0!==nt;return v.traceIs(Ce,"symbols")&&(ct||yt)&&(Ie.selectedSizeFn=function(ut){var Ct=ut.mrc||We/2;return ut.selected?ct?et/2:Ct:yt?nt/2:Ct}),Ie},w.makeSelectedTextStyleFns=function(Ce){var Ie={},De=(Ce.textfont||{}).color,qe=((Ce.selected||{}).textfont||{}).color,Ke=((Ce.unselected||{}).textfont||{}).color;return Ie.selectedTextColorFn=function(be){var Oe=be.tc||De;return be.selected?qe||Oe:Ke||(qe?Oe:c.addOpacity(Oe,u))},Ie},w.selectedPointStyle=function(Ce,Ie){if(Ce.size()&&Ie.selectedpoints){var ge=w.makeSelectedPointStyleFns(Ie),me=Ie.marker||{},ce=[];ge.selectedOpacityFn&&ce.push(function(Ae,Ne){Ae.style("opacity",ge.selectedOpacityFn(Ne))}),ge.selectedColorFn&&ce.push(function(Ae,Ne){c.fill(Ae,ge.selectedColorFn(Ne))}),ge.selectedSizeFn&&ce.push(function(Ae,Ne){var De=Ne.mx||me.symbol||0,qe=ge.selectedSizeFn(Ne);Ae.attr("d",x(w.symbolNumber(De),qe,je(Ne,Ie),ie(Ne,Ie))),Ne.mrc2=qe}),ce.length&&Ce.each(function(Ae){for(var Ne=I.select(this),De=0;De<ce.length;De++)ce[De](Ne,Ae)})}},w.tryColorscale=function(Ce,Ie){var ge=Ie?C.nestedProperty(Ce,Ie).get():Ce;return ge&&(ge.colorscale||ge._colorAx)&&C.isArrayOrTypedArray(ge.color)?i.makeColorScaleFuncFromTrace(ge):C.identity};var S,O,P={start:1,end:-1,middle:0,bottom:1,top:-1};function R(Ce,Ie,ge,me,ce){var Ae=I.select(Ce.node().parentNode),Ne=-1!==Ie.indexOf("top")?"top":-1!==Ie.indexOf("bottom")?"bottom":"middle",De=-1!==Ie.indexOf("left")?"end":-1!==Ie.indexOf("right")?"start":"middle",qe=me?me/.8+1:0,Ke=(a.lineCount(Ce)-1)*l+1,be=P[De]*qe,Oe=.75*ge+P[Ne]*qe+(P[Ne]-1)*Ke*ge/2;Ce.attr("text-anchor",De),ce||Ae.attr("transform",s(be,Oe))}function F(Ce,Ie){var ge=Ce.ts||Ie.textfont.size;return k(ge)&&ge>0?ge:0}function B(Ce,Ie,ge){return ge&&(Ce=X(Ce)),Ie?z(Ce[1]):J(Ce[0])}function J(Ce){var Ie=I.round(Ce,2);return S=Ie,Ie}function z(Ce){var Ie=I.round(Ce,2);return O=Ie,Ie}function $(Ce,Ie,ge,me){var ce=Ce[0]-Ie[0],Ae=Ce[1]-Ie[1],Ne=ge[0]-Ie[0],De=ge[1]-Ie[1],qe=Math.pow(ce*ce+Ae*Ae,.25),Ke=Math.pow(Ne*Ne+De*De,.25),be=(Ke*Ke*ce-qe*qe*Ne)*me,Oe=(Ke*Ke*Ae-qe*qe*De)*me,Le=3*Ke*(qe+Ke),Ue=3*qe*(qe+Ke);return[[J(Ie[0]+(Le&&be/Le)),z(Ie[1]+(Le&&Oe/Le))],[J(Ie[0]-(Ue&&be/Ue)),z(Ie[1]-(Ue&&Oe/Ue))]]}w.textPointStyle=function(Ce,Ie,ge){if(Ce.size()){var me;if(Ie.selectedpoints){var ce=w.makeSelectedTextStyleFns(Ie);me=ce.selectedTextColorFn}var Ae=Ie.texttemplate,Ne=ge._fullLayout;Ce.each(function(De){var qe=I.select(this),Ke=Ae?C.extractOption(De,Ie,"txt","texttemplate"):C.extractOption(De,Ie,"tx","text");if(Ke||0===Ke){if(Ae){var be=Ie._module.formatLabels,Oe=be?be(De,Ie,Ne):{},Le={};h(Le,Ie,De.i),Ke=C.texttemplateString(Ke,Oe,Ne._d3locale,Le,De,Ie._meta||{})}var Ze=De.tp||Ie.textposition,We=F(De,Ie),et=me?me(De):De.tc||Ie.textfont.color;qe.call(w.font,De.tf||Ie.textfont.family,We,et).text(Ke).call(a.convertToTspans,ge).call(R,Ze,We,De.mrc)}else qe.remove()})}},w.selectedTextStyle=function(Ce,Ie){if(Ce.size()&&Ie.selectedpoints){var ge=w.makeSelectedTextStyleFns(Ie);Ce.each(function(me){var ce=I.select(this),Ae=ge.selectedTextColorFn(me),Ne=me.tp||Ie.textposition,De=F(me,Ie);c.fill(ce,Ae);var qe=v.traceIs(Ie,"bar-like");R(ce,Ne,De,me.mrc2||me.mrc,qe)})}},w.smoothopen=function(Ce,Ie){if(Ce.length<3)return"M"+Ce.join("L");var ge,me="M"+Ce[0],ce=[];for(ge=1;ge<Ce.length-1;ge++)ce.push($(Ce[ge-1],Ce[ge],Ce[ge+1],Ie));for(me+="Q"+ce[0][0]+" "+Ce[1],ge=2;ge<Ce.length-1;ge++)me+="C"+ce[ge-2][1]+" "+ce[ge-1][0]+" "+Ce[ge];return me+"Q"+ce[Ce.length-3][1]+" "+Ce[Ce.length-1]},w.smoothclosed=function(Ce,Ie){if(Ce.length<3)return"M"+Ce.join("L")+"Z";var ge,me="M"+Ce[0],ce=Ce.length-1,Ae=[$(Ce[ce],Ce[0],Ce[1],Ie)];for(ge=1;ge<ce;ge++)Ae.push($(Ce[ge-1],Ce[ge],Ce[ge+1],Ie));for(Ae.push($(Ce[ce-1],Ce[ce],Ce[0],Ie)),ge=1;ge<=ce;ge++)me+="C"+Ae[ge-1][1]+" "+Ae[ge][0]+" "+Ce[ge];return me+"C"+Ae[ce][1]+" "+Ae[0][0]+" "+Ce[0]+"Z"};var G={hv:function(Ce,Ie,ge){return"H"+J(Ie[0])+"V"+B(Ie,1,ge)},vh:function(Ce,Ie,ge){return"V"+z(Ie[1])+"H"+B(Ie,0,ge)},hvh:function(Ce,Ie,ge){return"H"+J((Ce[0]+Ie[0])/2)+"V"+z(Ie[1])+"H"+B(Ie,0,ge)},vhv:function(Ce,Ie,ge){return"V"+z((Ce[1]+Ie[1])/2)+"H"+J(Ie[0])+"V"+B(Ie,1,ge)}},H=function(Ce,Ie,ge){return"L"+B(Ie,0,ge)+","+B(Ie,1,ge)};function X(Ce,Ie){var ge=Ce.backoff,me=Ce.trace,ce=Ce.d,Ae=Ce.i;if(ge&&me&&me.marker&&me.marker.angle%360==0&&me.line&&"spline"!==me.line.shape){var Ne=C.isArrayOrTypedArray(ge),De=Ce,qe=Ie?Ie[0]:S||0,Ke=Ie?Ie[1]:O||0,be=De[0],Oe=De[1],Ze=Math.atan2(Oe-Ke,be-qe),We=Ne?ge[Ae]:ge;if("auto"===We){var et=De.i;"scatter"===me.type&&et--;var nt=De.marker,ct=nt.symbol;C.isArrayOrTypedArray(ct)&&(ct=ct[et]);var yt=nt.size;C.isArrayOrTypedArray(yt)&&(yt=yt[et]),We=nt?w.symbolBackOffs[w.symbolNumber(ct)]*yt:0,We+=w.getMarkerStandoff(ce[et],me)||0}var ut=be-We*Math.cos(Ze),Ct=Oe-We*Math.sin(Ze);(ut<=be&&ut>=qe||ut>=be&&ut<=qe)&&(Ct<=Oe&&Ct>=Ke||Ct>=Oe&&Ct<=Ke)&&(Ce=[ut,Ct])}return Ce}w.steps=function(Ce){var Ie=G[Ce]||H;return function(ge){for(var me="M"+J(ge[0][0])+","+z(ge[0][1]),ce=ge.length,Ae=1;Ae<ce;Ae++)me+=Ie(ge[Ae-1],ge[Ae],Ae===ce-1);return me}},w.applyBackoff=X,w.makeTester=function(){var Ce=C.ensureSingleById(I.select("body"),"svg","js-plotly-tester",function(ge){ge.attr(o.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Ie=C.ensureSingle(Ce,"path","js-reference-point",function(ge){ge.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});w.tester=Ce,w.testref=Ie},w.savedBBoxes={};var K=0;function ue(Ce){var Ie=Ce.getAttribute("data-unformatted");if(null!==Ie)return Ie+Ce.getAttribute("data-math")+Ce.getAttribute("text-anchor")+Ce.getAttribute("style")}function ae(Ce,Ie){if(!Ce)return null;var ge=Ie._context,me=ge._exportedPlot?"":ge._baseUrl||"";return me?"url('"+me+"#"+Ce+"')":"url(#"+Ce+")"}w.bBox=function(Ce,Ie,ge){var me,ce,Ae;if(ge||(ge=ue(Ce)),ge){if(me=w.savedBBoxes[ge])return C.extendFlat({},me)}else if(1===Ce.childNodes.length){var Ne=Ce.childNodes[0];if(ge=ue(Ne)){var De=+Ne.getAttribute("x")||0,qe=+Ne.getAttribute("y")||0,Ke=Ne.getAttribute("transform");if(!Ke){var be=w.bBox(Ne,!1,ge);return De&&(be.left+=De,be.right+=De),qe&&(be.top+=qe,be.bottom+=qe),be}if(me=w.savedBBoxes[ge+="~"+De+"~"+qe+"~"+Ke])return C.extendFlat({},me)}}Ie?ce=Ce:(Ae=w.tester.node(),ce=Ce.cloneNode(!0),Ae.appendChild(ce)),I.select(ce).attr("transform",null).call(a.positionText,0,0);var Oe=ce.getBoundingClientRect(),Le=w.testref.node().getBoundingClientRect();Ie||Ae.removeChild(ce);var Ue={height:Oe.height,width:Oe.width,left:Oe.left-Le.left,top:Oe.top-Le.top,right:Oe.right-Le.left,bottom:Oe.bottom-Le.top};return K>=1e4&&(w.savedBBoxes={},K=0),ge&&(w.savedBBoxes[ge]=Ue),K++,C.extendFlat({},Ue)},w.setClipUrl=function(Ce,Ie,ge){Ce.attr("clip-path",ae(Ie,ge))},w.getTranslate=function(Ce){var Ie=(Ce[Ce.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ge,me,ce){return[me,ce].join(" ")}).split(" ");return{x:+Ie[0]||0,y:+Ie[1]||0}},w.setTranslate=function(Ce,Ie,ge){var ce=Ce.attr?"attr":"setAttribute",Ae=Ce[Ce.attr?"attr":"getAttribute"]("transform")||"";return Ie=Ie||0,ge=ge||0,Ae=Ae.replace(/(\btranslate\(.*?\);?)/,"").trim(),Ae=(Ae+=s(Ie,ge)).trim(),Ce[ce]("transform",Ae),Ae},w.getScale=function(Ce){var Ie=(Ce[Ce.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ge,me,ce){return[me,ce].join(" ")}).split(" ");return{x:+Ie[0]||1,y:+Ie[1]||1}},w.setScale=function(Ce,Ie,ge){var ce=Ce.attr?"attr":"setAttribute",Ae=Ce[Ce.attr?"attr":"getAttribute"]("transform")||"";return Ie=Ie||1,ge=ge||1,Ae=Ae.replace(/(\bscale\(.*?\);?)/,"").trim(),Ae=(Ae+="scale("+Ie+","+ge+")").trim(),Ce[ce]("transform",Ae),Ae};var ne=/\s*sc.*/;w.setPointGroupScale=function(Ce,Ie,ge){if(Ie=Ie||1,ge=ge||1,Ce){var me=1===Ie&&1===ge?"":"scale("+Ie+","+ge+")";Ce.each(function(){var ce=(this.getAttribute("transform")||"").replace(ne,"");ce=(ce+=me).trim(),this.setAttribute("transform",ce)})}};var Q=/translate\([^)]*\)\s*$/;function ie(Ce,Ie){var ge;return Ce&&(ge=Ce.mf),void 0===ge&&(ge=Ie.marker&&Ie.marker.standoff||0),Ie._geo||Ie._xA?ge:-ge}w.setTextPointsScale=function(Ce,Ie,ge){Ce&&Ce.each(function(){var me,ce=I.select(this),Ae=ce.select("text");if(Ae.node()){var Ne=parseFloat(Ae.attr("x")||0),De=parseFloat(Ae.attr("y")||0),qe=(ce.attr("transform")||"").match(Q);me=1===Ie&&1===ge?[]:[s(Ne,De),"scale("+Ie+","+ge+")",s(-Ne,-De)],qe&&me.push(qe),ce.attr("transform",me.join(""))}})},w.getMarkerStandoff=ie;var le,fe,he,pe,xe,Ee,Re=Math.atan2,ke=Math.cos,Te=Math.sin;function we(Ce,Ie){var ge=Ie[0],me=Ie[1];return[ge*ke(Ce)-me*Te(Ce),ge*Te(Ce)+me*ke(Ce)]}function je(Ce,Ie){var ge,me,ce=Ce.ma;void 0===ce&&(ce=Ie.marker.angle||0);var Ae=Ie.marker.angleref;if("previous"===Ae||"north"===Ae){if(Ie._geo){var Ne=Ie._geo.project(Ce.lonlat);ge=Ne[0],me=Ne[1]}else{var De=Ie._xA,qe=Ie._yA;if(!De||!qe)return 90;ge=De.c2p(Ce.x),me=qe.c2p(Ce.y)}if(Ie._geo){var Ke,be=Ce.lonlat[0],Oe=Ce.lonlat[1],Le=Ie._geo.project([be,Oe+1e-5]),Ue=Ie._geo.project([be+1e-5,Oe]),Ze=Re(Ue[1]-me,Ue[0]-ge),We=Re(Le[1]-me,Le[0]-ge);if("north"===Ae)Ke=ce/180*Math.PI;else if("previous"===Ae){var et=be/180*Math.PI,nt=Oe/180*Math.PI,ct=le/180*Math.PI,yt=fe/180*Math.PI,ut=ct-et,Ct=ke(yt)*Te(ut),Dt=Te(yt)*ke(nt)-ke(yt)*Te(nt)*ke(ut);Ke=-Re(Ct,Dt)-Math.PI,le=be,fe=Oe}var vt=we(Ze,[ke(Ke),0]),mt=we(We,[Te(Ke),0]);ce=Re(vt[1]+mt[1],vt[0]+mt[0])/Math.PI*180,"previous"!==Ae||Ee===Ie.uid&&Ce.i===xe+1||(ce=null)}if("previous"===Ae&&!Ie._geo)if(Ee===Ie.uid&&Ce.i===xe+1&&k(ge)&&k(me)){var Lt=ge-he,Ft=me-pe,Rt=Ie.line&&Ie.line.shape||"",Wt=Rt.slice(Rt.length-1);"h"===Wt&&(Ft=0),"v"===Wt&&(Lt=0),ce+=Re(Ft,Lt)/Math.PI*180+90}else ce=null}return he=ge,pe=me,xe=Ce.i,Ee=Ie.uid,ce}w.getMarkerAngle=je},90998:function(se,U,r){"use strict";var I,C,f,k,T=r(95616),v=r(39898).round,c="M0,0Z",i=Math.sqrt(2),s=Math.sqrt(3),a=Math.PI,o=Math.cos,l=Math.sin;function u(g){return null===g}function d(g,h,w){if(!(g&&g%360!=0||h))return w;if(f===g&&k===h&&I===w)return C;function y(B,J){var z=o(B),$=l(B),G=J[0],H=J[1]+(h||0);return[G*z-H*$,G*$+H*z]}f=g,k=h,I=w;for(var p=g/180*a,_=0,x=0,b=T(w),M="",m=0;m<b.length;m++){var D=b[m],S=D[0],O=_,P=x;if("M"===S||"L"===S)_=+D[1],x=+D[2];else if("m"===S||"l"===S)_+=+D[1],x+=+D[2];else if("H"===S)_=+D[1];else if("h"===S)_+=+D[1];else if("V"===S)x=+D[1];else if("v"===S)x+=+D[1];else if("A"===S){_=+D[1],x=+D[2];var R=y(p,[+D[6],+D[7]]);D[6]=R[0],D[7]=R[1],D[3]=+D[3]+g}"H"!==S&&"V"!==S||(S="L"),"h"!==S&&"v"!==S||(S="l"),"m"!==S&&"l"!==S||(_-=O,x-=P);var F=y(p,[_,x]);"H"!==S&&"V"!==S||(S="L"),"M"!==S&&"L"!==S&&"m"!==S&&"l"!==S||(D[1]=F[0],D[2]=F[1]),D[0]=S,M+=D[0]+D.slice(1).join(",")}return C=M,M}se.exports={circle:{n:0,f:function(g,h,w){if(u(h))return c;var y=v(g,2),p="M"+y+",0A"+y+","+y+" 0 1,1 0,-"+y+"A"+y+","+y+" 0 0,1 "+y+",0Z";return w?d(h,w,p):p}},square:{n:1,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"H-"+y+"V-"+y+"H"+y+"Z")}},diamond:{n:2,f:function(g,h,w){if(u(h))return c;var y=v(1.3*g,2);return d(h,w,"M"+y+",0L0,"+y+"L-"+y+",0L0,-"+y+"Z")}},cross:{n:3,f:function(g,h,w){if(u(h))return c;var y=v(.4*g,2),p=v(1.2*g,2);return d(h,w,"M"+p+","+y+"H"+y+"V"+p+"H-"+y+"V"+y+"H-"+p+"V-"+y+"H-"+y+"V-"+p+"H"+y+"V-"+y+"H"+p+"Z")}},x:{n:4,f:function(g,h,w){if(u(h))return c;var y=v(.8*g/i,2),p="l"+y+","+y,_="l"+y+",-"+y,x="l-"+y+",-"+y,b="l-"+y+","+y;return d(h,w,"M0,"+y+p+_+x+_+x+b+x+b+p+b+p+"Z")}},"triangle-up":{n:5,f:function(g,h,w){if(u(h))return c;var y=v(2*g/s,2);return d(h,w,"M-"+y+","+v(g/2,2)+"H"+y+"L0,-"+v(g,2)+"Z")}},"triangle-down":{n:6,f:function(g,h,w){if(u(h))return c;var y=v(2*g/s,2);return d(h,w,"M-"+y+",-"+v(g/2,2)+"H"+y+"L0,"+v(g,2)+"Z")}},"triangle-left":{n:7,f:function(g,h,w){if(u(h))return c;var y=v(2*g/s,2);return d(h,w,"M"+v(g/2,2)+",-"+y+"V"+y+"L-"+v(g,2)+",0Z")}},"triangle-right":{n:8,f:function(g,h,w){if(u(h))return c;var y=v(2*g/s,2);return d(h,w,"M-"+v(g/2,2)+",-"+y+"V"+y+"L"+v(g,2)+",0Z")}},"triangle-ne":{n:9,f:function(g,h,w){if(u(h))return c;var y=v(.6*g,2),p=v(1.2*g,2);return d(h,w,"M-"+p+",-"+y+"H"+y+"V"+p+"Z")}},"triangle-se":{n:10,f:function(g,h,w){if(u(h))return c;var y=v(.6*g,2),p=v(1.2*g,2);return d(h,w,"M"+y+",-"+p+"V"+y+"H-"+p+"Z")}},"triangle-sw":{n:11,f:function(g,h,w){if(u(h))return c;var y=v(.6*g,2),p=v(1.2*g,2);return d(h,w,"M"+p+","+y+"H-"+y+"V-"+p+"Z")}},"triangle-nw":{n:12,f:function(g,h,w){if(u(h))return c;var y=v(.6*g,2),p=v(1.2*g,2);return d(h,w,"M-"+y+","+p+"V-"+y+"H"+p+"Z")}},pentagon:{n:13,f:function(g,h,w){if(u(h))return c;var y=v(.951*g,2),p=v(.588*g,2),_=v(-g,2),x=v(-.309*g,2);return d(h,w,"M"+y+","+x+"L"+p+","+v(.809*g,2)+"H-"+p+"L-"+y+","+x+"L0,"+_+"Z")}},hexagon:{n:14,f:function(g,h,w){if(u(h))return c;var y=v(g,2),p=v(g/2,2),_=v(g*s/2,2);return d(h,w,"M"+_+",-"+p+"V"+p+"L0,"+y+"L-"+_+","+p+"V-"+p+"L0,-"+y+"Z")}},hexagon2:{n:15,f:function(g,h,w){if(u(h))return c;var y=v(g,2),p=v(g/2,2),_=v(g*s/2,2);return d(h,w,"M-"+p+","+_+"H"+p+"L"+y+",0L"+p+",-"+_+"H-"+p+"L-"+y+",0Z")}},octagon:{n:16,f:function(g,h,w){if(u(h))return c;var y=v(.924*g,2),p=v(.383*g,2);return d(h,w,"M-"+p+",-"+y+"H"+p+"L"+y+",-"+p+"V"+p+"L"+p+","+y+"H-"+p+"L-"+y+","+p+"V-"+p+"Z")}},star:{n:17,f:function(g,h,w){if(u(h))return c;var y=1.4*g,p=v(.225*y,2),_=v(.951*y,2),x=v(.363*y,2),b=v(.588*y,2),M=v(-y,2),m=v(-.309*y,2),D=v(.118*y,2),S=v(.809*y,2);return d(h,w,"M"+p+","+m+"H"+_+"L"+x+","+D+"L"+b+","+S+"L0,"+v(.382*y,2)+"L-"+b+","+S+"L-"+x+","+D+"L-"+_+","+m+"H-"+p+"L0,"+M+"Z")}},hexagram:{n:18,f:function(g,h,w){if(u(h))return c;var y=v(.66*g,2),p=v(.38*g,2),_=v(.76*g,2);return d(h,w,"M-"+_+",0l-"+p+",-"+y+"h"+_+"l"+p+",-"+y+"l"+p+","+y+"h"+_+"l-"+p+","+y+"l"+p+","+y+"h-"+_+"l-"+p+","+y+"l-"+p+",-"+y+"h-"+_+"Z")}},"star-triangle-up":{n:19,f:function(g,h,w){if(u(h))return c;var y=v(g*s*.8,2),p=v(.8*g,2),_=v(1.6*g,2),x=v(4*g,2),b="A "+x+","+x+" 0 0 1 ";return d(h,w,"M-"+y+","+p+b+y+","+p+b+"0,-"+_+b+"-"+y+","+p+"Z")}},"star-triangle-down":{n:20,f:function(g,h,w){if(u(h))return c;var y=v(g*s*.8,2),p=v(.8*g,2),_=v(1.6*g,2),x=v(4*g,2),b="A "+x+","+x+" 0 0 1 ";return d(h,w,"M"+y+",-"+p+b+"-"+y+",-"+p+b+"0,"+_+b+y+",-"+p+"Z")}},"star-square":{n:21,f:function(g,h,w){if(u(h))return c;var y=v(1.1*g,2),p=v(2*g,2),_="A "+p+","+p+" 0 0 1 ";return d(h,w,"M-"+y+",-"+y+_+"-"+y+","+y+_+y+","+y+_+y+",-"+y+_+"-"+y+",-"+y+"Z")}},"star-diamond":{n:22,f:function(g,h,w){if(u(h))return c;var y=v(1.4*g,2),p=v(1.9*g,2),_="A "+p+","+p+" 0 0 1 ";return d(h,w,"M-"+y+",0"+_+"0,"+y+_+y+",0"+_+"0,-"+y+_+"-"+y+",0Z")}},"diamond-tall":{n:23,f:function(g,h,w){if(u(h))return c;var y=v(.7*g,2),p=v(1.4*g,2);return d(h,w,"M0,"+p+"L"+y+",0L0,-"+p+"L-"+y+",0Z")}},"diamond-wide":{n:24,f:function(g,h,w){if(u(h))return c;var y=v(1.4*g,2),p=v(.7*g,2);return d(h,w,"M0,"+p+"L"+y+",0L0,-"+p+"L-"+y+",0Z")}},hourglass:{n:25,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"H-"+y+"L"+y+",-"+y+"H-"+y+"Z")},noDot:!0},bowtie:{n:26,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"V-"+y+"L-"+y+","+y+"V-"+y+"Z")},noDot:!0},"circle-cross":{n:27,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M0,"+y+"V-"+y+"M"+y+",0H-"+y+"M"+y+",0A"+y+","+y+" 0 1,1 0,-"+y+"A"+y+","+y+" 0 0,1 "+y+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g,h,w){if(u(h))return c;var y=v(g,2),p=v(g/i,2);return d(h,w,"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+y+",0A"+y+","+y+" 0 1,1 0,-"+y+"A"+y+","+y+" 0 0,1 "+y+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M0,"+y+"V-"+y+"M"+y+",0H-"+y+"M"+y+","+y+"H-"+y+"V-"+y+"H"+y+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y+"M"+y+","+y+"H-"+y+"V-"+y+"H"+y+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g,h,w){if(u(h))return c;var y=v(1.3*g,2);return d(h,w,"M"+y+",0L0,"+y+"L-"+y+",0L0,-"+y+"ZM0,-"+y+"V"+y+"M-"+y+",0H"+y)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g,h,w){if(u(h))return c;var y=v(1.3*g,2),p=v(.65*g,2);return d(h,w,"M"+y+",0L0,"+y+"L-"+y+",0L0,-"+y+"ZM-"+p+",-"+p+"L"+p+","+p+"M-"+p+","+p+"L"+p+",-"+p)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g,h,w){if(u(h))return c;var y=v(1.4*g,2);return d(h,w,"M0,"+y+"V-"+y+"M"+y+",0H-"+y)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"L-"+y+",-"+y+"M"+y+",-"+y+"L-"+y+","+y)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g,h,w){if(u(h))return c;var y=v(1.2*g,2),p=v(.85*g,2);return d(h,w,"M0,"+y+"V-"+y+"M"+y+",0H-"+y+"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g,h,w){if(u(h))return c;var y=v(g/2,2),p=v(g,2);return d(h,w,"M"+y+","+p+"V-"+p+"M"+(y-p)+",-"+p+"V"+p+"M"+p+","+y+"H-"+p+"M-"+p+","+(y-p)+"H"+p)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g,h,w){if(u(h))return c;var y=v(1.2*g,2),p=v(1.6*g,2),_=v(.8*g,2);return d(h,w,"M-"+y+","+_+"L0,0M"+y+","+_+"L0,0M0,-"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g,h,w){if(u(h))return c;var y=v(1.2*g,2),p=v(1.6*g,2),_=v(.8*g,2);return d(h,w,"M-"+y+",-"+_+"L0,0M"+y+",-"+_+"L0,0M0,"+p+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g,h,w){if(u(h))return c;var y=v(1.2*g,2),p=v(1.6*g,2),_=v(.8*g,2);return d(h,w,"M"+_+","+y+"L0,0M"+_+",-"+y+"L0,0M-"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g,h,w){if(u(h))return c;var y=v(1.2*g,2),p=v(1.6*g,2),_=v(.8*g,2);return d(h,w,"M-"+_+","+y+"L0,0M-"+_+",-"+y+"L0,0M"+p+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g,h,w){if(u(h))return c;var y=v(1.4*g,2);return d(h,w,"M"+y+",0H-"+y)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g,h,w){if(u(h))return c;var y=v(1.4*g,2);return d(h,w,"M0,"+y+"V-"+y)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+",-"+y+"L-"+y+","+y)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M"+y+","+y+"L-"+y+",-"+y)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M0,0L-"+y+","+v(2*g,2)+"H"+y+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M0,0L-"+y+",-"+v(2*g,2)+"H"+y+"Z")},noDot:!0},"arrow-left":{n:47,f:function(g,h,w){if(u(h))return c;var y=v(2*g,2),p=v(g,2);return d(h,w,"M0,0L"+y+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-right":{n:48,f:function(g,h,w){if(u(h))return c;var y=v(2*g,2),p=v(g,2);return d(h,w,"M0,0L-"+y+",-"+p+"V"+p+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M-"+y+",0H"+y+"M0,0L-"+y+","+v(2*g,2)+"H"+y+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g,h,w){if(u(h))return c;var y=v(g,2);return d(h,w,"M-"+y+",0H"+y+"M0,0L-"+y+",-"+v(2*g,2)+"H"+y+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g,h,w){if(u(h))return c;var y=v(2*g,2),p=v(g,2);return d(h,w,"M0,-"+p+"V"+p+"M0,0L"+y+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g,h,w){if(u(h))return c;var y=v(2*g,2),p=v(g,2);return d(h,w,"M0,-"+p+"V"+p+"M0,0L-"+y+",-"+p+"V"+p+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(g,h,w){if(u(h))return c;var y=a/2.5,p=2*g*o(y),_=2*g*l(y);return d(h,w,"M0,0L"+-p+","+_+"L"+p+","+_+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(g,h,w){if(u(h))return c;var y=a/4,p=2*g*o(y),_=2*g*l(y);return d(h,w,"M0,0L"+-p+","+_+"A "+2*g+","+2*g+" 0 0 1 "+p+","+_+"Z")},backoff:.4,noDot:!0}}},25673:function(se){"use strict";se.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function(se,U,r){"use strict";var I=r(92770),C=r(73972),f=r(89298),k=r(71828),T=r(45827);function v(c,i,s,a){var o=i["error_"+a]||{},l=[];if(o.visible&&-1!==["linear","log"].indexOf(s.type)){for(var u=T(o),d=0;d<c.length;d++){var g=c[d],h=g.i;if(void 0===h)h=d;else if(null===h)continue;var w=g[a];if(I(s.c2l(w))){var y=u(w,h);if(I(y[0])&&I(y[1])){var p=g[a+"s"]=w-y[0],_=g[a+"h"]=w+y[1];l.push(p,_)}}}var b=i._extremes[s._id],M=f.findExtremes(s,l,k.extendFlat({tozero:b.opts.tozero},{padded:!0}));b.min=b.min.concat(M.min),b.max=b.max.concat(M.max)}}se.exports=function(c){for(var i=c.calcdata,s=0;s<i.length;s++){var a=i[s],o=a[0].trace;if(!0===o.visible&&C.traceIs(o,"errorBarsOK")){var l=f.getFromId(c,o.xaxis),u=f.getFromId(c,o.yaxis);v(a,o,l,"x"),v(a,o,u,"y")}}}},45827:function(se){"use strict";function U(r,I){return"percent"===r?function(C){return Math.abs(C*I/100)}:"constant"===r?function(){return Math.abs(I)}:"sqrt"===r?function(C){return Math.sqrt(Math.abs(C))}:void 0}se.exports=function(r){var I=r.type,C=r.symmetric;if("data"===I){var f=r.array||[];if(C)return function(c,i){var s=+f[i];return[s,s]};var k=r.arrayminus||[];return function(c,i){var s=+f[i],a=+k[i];return isNaN(s)&&isNaN(a)?[NaN,NaN]:[a||0,s||0]}}var T=U(I,r.value),v=U(I,r.valueminus);return C||void 0===r.valueminus?function(c){var i=T(c);return[i,i]}:function(c){return[v(c),T(c)]}}},97587:function(se,U,r){"use strict";var I=r(92770),C=r(73972),f=r(71828),k=r(44467),T=r(25673);se.exports=function(v,c,i,s){var a="error_"+s.axis,o=k.newContainer(c,a),l=v[a]||{};function u(w,y){return f.coerce(l,o,T,w,y)}if(!1!==u("visible",void 0!==l.array||void 0!==l.value||"sqrt"===l.type)){var d=u("type","array"in l?"data":"percent"),g=!0;"sqrt"!==d&&(g=u("symmetric",!(("data"===d?"arrayminus":"valueminus")in l))),"data"===d?(u("array"),u("traceref"),g||(u("arrayminus"),u("tracerefminus"))):"percent"!==d&&"constant"!==d||(u("value"),g||u("valueminus"));var h="copy_"+s.inherit+"style";s.inherit&&(c["error_"+s.inherit]||{}).visible&&u(h,!(l.color||I(l.thickness)||I(l.width))),s.inherit&&o[h]||(u("color",i),u("thickness"),u("width",C.traceIs(c,"gl3d")?0:4))}}},37369:function(se,U,r){"use strict";var I=r(71828),C=r(30962).overrideAll,f=r(25673),k={error_x:I.extendFlat({},f),error_y:I.extendFlat({},f)};delete k.error_x.copy_zstyle,delete k.error_y.copy_zstyle,delete k.error_y.copy_ystyle;var T={error_x:I.extendFlat({},f),error_y:I.extendFlat({},f),error_z:I.extendFlat({},f)};delete T.error_x.copy_ystyle,delete T.error_y.copy_ystyle,delete T.error_z.copy_ystyle,delete T.error_z.copy_zstyle,se.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:k,bar:k,histogram:k,scatter3d:C(T,"calc","nested"),scattergl:C(k,"calc","nested")}},supplyDefaults:r(97587),calc:r(84532),makeComputeError:r(45827),plot:r(19398),style:r(62662),hoverInfo:function(v,c,i){(c.error_y||{}).visible&&(i.yerr=v.yh-v.y,c.error_y.symmetric||(i.yerrneg=v.y-v.ys)),(c.error_x||{}).visible&&(i.xerr=v.xh-v.x,c.error_x.symmetric||(i.xerrneg=v.x-v.xs))}}},19398:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(91424),k=r(34098);se.exports=function(T,v,c,i){var s=c.xaxis,a=c.yaxis,o=i&&i.duration>0,l=T._context.staticPlot;v.each(function(u){var d,g=u[0].trace,h=g.error_x||{},w=g.error_y||{};g.ids&&(d=function(x){return x.id});var y=k.hasMarkers(g)&&g.marker.maxdisplayed>0;w.visible||h.visible||(u=[]);var p=I.select(this).selectAll("g.errorbar").data(u,d);if(p.exit().remove(),u.length){h.visible||p.selectAll("path.xerror").remove(),w.visible||p.selectAll("path.yerror").remove(),p.style("opacity",1);var _=p.enter().append("g").classed("errorbar",!0);o&&_.style("opacity",0).transition().duration(i.duration).style("opacity",1),f.setClipUrl(p,c.layerClipId,T),p.each(function(x){var R,F,B,J,b=I.select(this),M=(B=a,J={x:(F=s).c2p((R=x).x),y:B.c2p(R.y)},void 0!==R.yh&&(J.yh=B.c2p(R.yh),J.ys=B.c2p(R.ys),C(J.ys)||(J.noYS=!0,J.ys=B.c2p(R.ys,!0))),void 0!==R.xh&&(J.xh=F.c2p(R.xh),J.xs=F.c2p(R.xs),C(J.xs)||(J.noXS=!0,J.xs=F.c2p(R.xs,!0))),J);if(!y||x.vis){var m,D=b.select("path.yerror");if(w.visible&&C(M.x)&&C(M.yh)&&C(M.ys)){var S=w.width;m="M"+(M.x-S)+","+M.yh+"h"+2*S+"m-"+S+",0V"+M.ys,M.noYS||(m+="m-"+S+",0h"+2*S),D.size()?o&&(D=D.transition().duration(i.duration).ease(i.easing)):D=b.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("yerror",!0),D.attr("d",m)}else D.remove();var O=b.select("path.xerror");if(h.visible&&C(M.y)&&C(M.xh)&&C(M.xs)){var P=(h.copy_ystyle?w:h).width;m="M"+M.xh+","+(M.y-P)+"v"+2*P+"m0,-"+P+"H"+M.xs,M.noXS||(m+="m0,-"+P+"v"+2*P),O.size()?o&&(O=O.transition().duration(i.duration).ease(i.easing)):O=b.append("path").style("vector-effect",l?"none":"non-scaling-stroke").classed("xerror",!0),O.attr("d",m)}else O.remove()}})}})}},62662:function(se,U,r){"use strict";var I=r(39898),C=r(7901);se.exports=function(f){f.each(function(k){var T=k[0].trace,v=T.error_y||{},c=T.error_x||{},i=I.select(this);i.selectAll("path.yerror").style("stroke-width",v.thickness+"px").call(C.stroke,v.color),c.copy_ystyle&&(c=v),i.selectAll("path.xerror").style("stroke-width",c.thickness+"px").call(C.stroke,c.color)})}},77914:function(se,U,r){"use strict";var I=r(41940),C=r(528).hoverlabel,f=r(1426).extendFlat;se.exports={hoverlabel:{bgcolor:f({},C.bgcolor,{arrayOk:!0}),bordercolor:f({},C.bordercolor,{arrayOk:!0}),font:I({arrayOk:!0,editType:"none"}),align:f({},C.align,{arrayOk:!0}),namelength:f({},C.namelength,{arrayOk:!0}),editType:"none"}}},30732:function(se,U,r){"use strict";var I=r(71828),C=r(73972);function f(k,T,v,c){c=c||I.identity,Array.isArray(k)&&(T[0][v]=c(k))}se.exports=function(k){var T=k.calcdata,v=k._fullLayout;function c(l){return function(u){return I.coerceHoverinfo({hoverinfo:u},{_module:l._module},v)}}for(var i=0;i<T.length;i++){var s=T[i],a=s[0].trace;if(!C.traceIs(a,"pie-like")){var o=C.traceIs(a,"2dMap")?f:I.fillArray;o(a.hoverinfo,s,"hi",c(a)),a.hovertemplate&&o(a.hovertemplate,s,"ht"),a.hoverlabel&&(o(a.hoverlabel.bgcolor,s,"hbg"),o(a.hoverlabel.bordercolor,s,"hbc"),o(a.hoverlabel.font.size,s,"hts"),o(a.hoverlabel.font.color,s,"htc"),o(a.hoverlabel.font.family,s,"htf"),o(a.hoverlabel.namelength,s,"hnl"),o(a.hoverlabel.align,s,"hta"))}}}},75914:function(se,U,r){"use strict";var I=r(73972),C=r(88335).hover;se.exports=function(f,k,T){var v=I.getComponentMethod("annotations","onClick")(f,f._hoverdata);function c(){f.emit("plotly_click",{points:f._hoverdata,event:k})}void 0!==T&&C(f,k,T,!0),f._hoverdata&&k&&k.target&&(v&&v.then?v.then(c):c(),k.stopImmediatePropagation&&k.stopImmediatePropagation())}},26675:function(se){"use strict";se.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function(se,U,r){"use strict";var I=r(71828),C=r(77914),f=r(38048);se.exports=function(k,T,v,c){var i=I.extendFlat({},c.hoverlabel);T.hovertemplate&&(i.namelength=-1),f(k,T,function(s,a){return I.coerce(k,T,C,s,a)},i)}},23469:function(se,U,r){"use strict";var I=r(71828);U.getSubplot=function(c){return c.subplot||c.xaxis+c.yaxis||c.geo},U.isTraceInSubplots=function(c,i){if("splom"===c.type){for(var s=c.xaxes||[],a=c.yaxes||[],o=0;o<s.length;o++)for(var l=0;l<a.length;l++)if(-1!==i.indexOf(s[o]+a[l]))return!0;return!1}return-1!==i.indexOf(U.getSubplot(c))},U.flat=function(c,i){for(var s=new Array(c.length),a=0;a<c.length;a++)s[a]=i;return s},U.p2c=function(c,i){for(var s=new Array(c.length),a=0;a<c.length;a++)s[a]=c[a].p2c(i);return s},U.getDistanceFunction=function(c,i,s,a){return"closest"===c?a||U.quadrature(i,s):"x"===c.charAt(0)?i:s},U.getClosest=function(c,i,s){if(!1!==s.index)s.index>=0&&s.index<c.length?s.distance=0:s.index=!1;else for(var a=0;a<c.length;a++){var o=i(c[a]);o<=s.distance&&(s.index=a,s.distance=o)}return s},U.inbox=function(c,i,s){return c*i<0||0===c?s:1/0},U.quadrature=function(c,i){return function(s){var a=c(s),o=i(s);return Math.sqrt(a*a+o*o)}},U.makeEventData=function(c,i,s){var a="index"in c?c.index:c.pointNumber,o={data:i._input,fullData:i,curveNumber:i.index,pointNumber:a};if(i._indexToPoints){var l=i._indexToPoints[a];1===l.length?o.pointIndex=l[0]:o.pointIndices=l}else o.pointIndex=a;return i._module.eventData?o=i._module.eventData(o,c,i,s,a):("xVal"in c?o.x=c.xVal:"x"in c&&(o.x=c.x),"yVal"in c?o.y=c.yVal:"y"in c&&(o.y=c.y),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),void 0!==c.zLabelVal&&(o.z=c.zLabelVal)),U.appendArrayPointValue(o,i,a),o},U.appendArrayPointValue=function(c,i,s){var a=i._arrayAttrs;if(a)for(var o=0;o<a.length;o++){var l=a[o],u=f(l);if(void 0===c[u]){var d=k(I.nestedProperty(i,l).get(),s);void 0!==d&&(c[u]=d)}}},U.appendArrayMultiPointValues=function(c,i,s){var a=i._arrayAttrs;if(a)for(var o=0;o<a.length;o++){var l=a[o],u=f(l);if(void 0===c[u]){for(var d=I.nestedProperty(i,l).get(),g=new Array(s.length),h=0;h<s.length;h++)g[h]=k(d,s[h]);c[u]=g}}};var C={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function f(c){return C[c]||c}function k(c,i){return Array.isArray(i)?Array.isArray(c)&&Array.isArray(c[i[0]])?c[i[0]][i[1]]:void 0:c[i]}var T={x:!0,y:!0},v={"x unified":!0,"y unified":!0};U.isUnifiedHover=function(c){return"string"==typeof c&&!!v[c]},U.isXYhover=function(c){return"string"==typeof c&&!!T[c]}},88335:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(84267),k=r(71828),T=k.strTranslate,v=k.strRotate,c=r(11086),i=r(63893),s=r(39918),a=r(91424),o=r(7901),l=r(28569),u=r(89298),d=r(73972),g=r(23469),h=r(26675),w=r(99017),y=r(43969),p=h.YANGLE,_=Math.PI*p/180,x=1/Math.sin(_),b=Math.cos(_),M=Math.sin(_),m=h.HOVERARROWSIZE,D=h.HOVERTEXTPAD,S={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(Q){return[Q.trace.index,Q.index,Q.x0,Q.y0,Q.name,Q.attr,Q.xa?Q.xa._id:"",Q.ya?Q.ya._id:""].join(",")}U.hover=function(Q,ie,le,fe){Q=k.getGraphDiv(Q);var he=ie.target;k.throttle(Q._fullLayout._uid+h.HOVERID,h.HOVERMINTIME,function(){!function(pe,xe,Ee,Re,ke){Ee||(Ee="xy");var Te=Array.isArray(Ee)?Ee:[Ee],we=pe._fullLayout,je=we._plots||[],Ce=je[Ee],Ie=we._has("cartesian");if(Ce){var ge=Ce.overlays.map(function(Jt){return Jt.id});Te=Te.concat(ge)}for(var me=Te.length,ce=new Array(me),Ae=new Array(me),Ne=!1,De=0;De<me;De++){var qe=Te[De];if(je[qe])Ne=!0,ce[De]=je[qe].xaxis,Ae[De]=je[qe].yaxis;else{if(!we[qe]||!we[qe]._subplot)return void k.warn("Unrecognized subplot: "+qe);var Ke=we[qe]._subplot;ce[De]=Ke.xaxis,Ae[De]=Ke.yaxis}}var be=xe.hovermode||we.hovermode;if(be&&!Ne&&(be="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(be)||!pe.calcdata||pe.querySelector(".zoombox")||pe._dragging)return l.unhoverRaw(pe,xe);var Oe=we.hoverdistance;-1===Oe&&(Oe=1/0);var Le=we.spikedistance;-1===Le&&(Le=1/0);var Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt,vt,mt,Lt,Ft=[],Rt=[],Wt={hLinePoint:null,vLinePoint:null},Ht=!1;if(Array.isArray(xe))for(be="array",We=0;We<xe.length;We++)(nt=pe.calcdata[xe[We].curveNumber||0])&&(ct=nt[0].trace,"skip"!==nt[0].trace.hoverinfo&&(Rt.push(nt),"h"===ct.orientation&&(Ht=!0)));else{for(et=0;et<pe.calcdata.length;et++)"skip"!==(ct=(nt=pe.calcdata[et])[0].trace).hoverinfo&&g.isTraceInSubplots(ct,Te)&&(Rt.push(nt),"h"===ct.orientation&&(Ht=!0));var it,st;if(ke){if(!1===c.triggerHandler(pe,"plotly_beforehover",xe))return;var Je=ke.getBoundingClientRect();it=xe.clientX-Je.left,st=xe.clientY-Je.top,we._calcInverseTransform(pe);var ot=k.apply3DTransform(we._invTransform)(it,st);if(st=ot[1],(it=ot[0])<0||it>ce[0]._length||st<0||st>Ae[0]._length)return l.unhoverRaw(pe,xe)}else it="xpx"in xe?xe.xpx:ce[0]._length/2,st="ypx"in xe?xe.ypx:Ae[0]._length/2;if(xe.pointerX=it+ce[0]._offset,xe.pointerY=st+Ae[0]._offset,Ue="xval"in xe?g.flat(Te,xe.xval):g.p2c(ce,it),Ze="yval"in xe?g.flat(Te,xe.yval):g.p2c(Ae,st),!C(Ue[0])||!C(Ze[0]))return k.warn("Fx.hover failed",xe,pe),l.unhoverRaw(pe,xe)}var pt=1/0;function xt(Jt,an){for(et=0;et<Rt.length;et++)if((nt=Rt[et])&&nt[0]&&nt[0].trace&&!0===(ct=nt[0].trace).visible&&0!==ct._length&&-1===["carpet","contourcarpet"].indexOf(ct._module.name)){if("splom"===ct.type?yt=Te[ut=0]:(yt=g.getSubplot(ct),ut=Te.indexOf(yt)),g.isUnifiedHover(Ct=be)&&(Ct=Ct.charAt(0)),mt={cd:nt,trace:ct,xa:ce[ut],ya:Ae[ut],maxHoverDistance:Oe,maxSpikeDistance:Le,index:!1,distance:Math.min(pt,Oe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:o.defaultLine,name:ct.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},we[yt]&&(mt.subplot=we[yt]._subplot),we._splomScenes&&we._splomScenes[ct.uid]&&(mt.scene=we._splomScenes[ct.uid]),Lt=Ft.length,"array"===Ct){var Sn=xe[et];"pointNumber"in Sn?(mt.index=Sn.pointNumber,Ct="closest"):(Ct="","xval"in Sn&&(Dt=Sn.xval,Ct="x"),"yval"in Sn&&(vt=Sn.yval,Ct=Ct?"closest":"y"))}else void 0!==Jt&&void 0!==an?(Dt=Jt,vt=an):(Dt=Ue[ut],vt=Ze[ut]);if(0!==Oe)if(ct._module&&ct._module.hoverPoints){var Ln=ct._module.hoverPoints(mt,Dt,vt,Ct,{finiteRange:!0,hoverLayer:we._hoverlayer});if(Ln)for(var Vn,cr=0;cr<Ln.length;cr++)C((Vn=Ln[cr]).x0)&&C(Vn.y0)&&Ft.push($(Vn,be))}else k.log("Unrecognized trace type in hover:",ct);if("closest"===be&&Ft.length>Lt&&(Ft.splice(0,Lt),pt=Ft[0].distance),Ie&&0!==Le&&0===Ft.length){mt.distance=Le,mt.index=!1;var xn=ct._module.hoverPoints(mt,Dt,vt,"closest",{hoverLayer:we._hoverlayer});if(xn&&(xn=xn.filter(function(sn){return sn.spikeDistance<=Le})),xn&&xn.length){var Qn,er=xn.filter(function(sn){return sn.xa.showspikes&&"hovered data"!==sn.xa.spikesnap});if(er.length){var Qt=er[0];C(Qt.x0)&&C(Qt.y0)&&(Qn=Ge(Qt),(!Wt.vLinePoint||Wt.vLinePoint.spikeDistance>Qn.spikeDistance)&&(Wt.vLinePoint=Qn))}var zn=xn.filter(function(sn){return sn.ya.showspikes&&"hovered data"!==sn.ya.spikesnap});if(zn.length){var zt=zn[0];C(zt.x0)&&C(zt.y0)&&(Qn=Ge(zt),(!Wt.hLinePoint||Wt.hLinePoint.spikeDistance>Qn.spikeDistance)&&(Wt.hLinePoint=Qn))}}}}}function He(Jt,an,Sn){for(var Ln,Vn=null,cr=1/0,xn=0;xn<Jt.length;xn++)Ln=Jt[xn].spikeDistance,Sn&&0===xn&&(Ln=-1/0),Ln<=cr&&Ln<=an&&(Vn=Jt[xn],cr=Ln);return Vn}function Ge(Jt){return Jt?{xa:Jt.xa,ya:Jt.ya,x:void 0!==Jt.xSpike?Jt.xSpike:(Jt.x0+Jt.x1)/2,y:void 0!==Jt.ySpike?Jt.ySpike:(Jt.y0+Jt.y1)/2,distance:Jt.distance,spikeDistance:Jt.spikeDistance,curveNumber:Jt.trace.index,color:Jt.color,pointNumber:Jt.index}:null}xt();var dt={fullLayout:we,container:we._hoverlayer,event:xe},ht=pe._spikepoints;pe._spikepoints={vLinePoint:Wt.vLinePoint,hLinePoint:Wt.hLinePoint};var St=function(){Ft.sort(function(Jt,an){return Jt.distance-an.distance}),Ft=function(Jt,an){for(var Sn=an.charAt(0),Ln=[],Vn=[],cr=[],xn=0;xn<Jt.length;xn++){var Qn=Jt[xn];d.traceIs(Qn.trace,"bar-like")||d.traceIs(Qn.trace,"box-violin")?cr.push(Qn):Qn.trace[Sn+"period"]?Vn.push(Qn):Ln.push(Qn)}return Ln.concat(Vn).concat(cr)}(Ft,be)};St();var Et=be.charAt(0),wt=("x"===Et||"y"===Et)&&Ft[0]&&O[Ft[0].trace.type];if(Ie&&0!==Le&&0!==Ft.length){var Nt=He(Ft.filter(function(Jt){return Jt.ya.showspikes}),Le,wt);Wt.hLinePoint=Ge(Nt);var _t=He(Ft.filter(function(Jt){return Jt.xa.showspikes}),Le,wt);Wt.vLinePoint=Ge(_t)}if(0===Ft.length){var Mt=l.unhoverRaw(pe,xe);return!Ie||null===Wt.hLinePoint&&null===Wt.vLinePoint||H(ht)&&G(pe,Wt,dt),Mt}if(Ie&&H(ht)&&G(pe,Wt,dt),g.isXYhover(Ct)&&0!==Ft[0].length&&"splom"!==Ft[0].trace.type){var Pt=Ft[0],Zt=(Ft=S[Pt.trace.type]?Ft.filter(function(Jt){return Jt.trace.index===Pt.trace.index}):[Pt]).length;xt(K("x",Pt,we),K("y",Pt,we));var $t,Xt=[],dn={},on=0,cn=function(Jt){var an=S[Jt.trace.type]?P(Jt):Jt.trace.index;if(dn[an]){var Sn=dn[an]-1,Ln=Xt[Sn];Sn>0&&Math.abs(Jt.distance)<Math.abs(Ln.distance)&&(Xt[Sn]=Jt)}else on++,dn[an]=on,Xt.push(Jt)};for($t=0;$t<Zt;$t++)cn(Ft[$t]);for($t=Ft.length-1;$t>Zt-1;$t--)cn(Ft[$t]);Ft=Xt,St()}var tn=pe._hoverdata,Cn=[],Fn=ue(pe),En=ae(pe);for(We=0;We<Ft.length;We++){var rn=Ft[We],yn=g.makeEventData(rn,rn.trace,rn.cd);if(!1!==rn.hovertemplate){var pn=!1;rn.cd[rn.index]&&rn.cd[rn.index].ht&&(pn=rn.cd[rn.index].ht),rn.hovertemplate=pn||rn.trace.hovertemplate||!1}if(rn.xa&&rn.ya){var bn=rn.x0+rn.xa._offset,In=rn.x1+rn.xa._offset,_n=rn.y0+rn.ya._offset,qn=rn.y1+rn.ya._offset,Wn=Math.min(bn,In),Nn=Math.max(bn,In),Xn=Math.min(_n,qn),yr=Math.max(_n,qn);yn.bbox={x0:Wn+En,x1:Nn+En,y0:Xn+Fn,y1:yr+Fn}}rn.eventData=[yn],Cn.push(yn)}pe._hoverdata=Cn;var fr="y"===be&&(Rt.length>1||Ft.length>1)||"closest"===be&&Ht&&Ft.length>1,Er=o.combine(we.plot_bgcolor||o.background,we.paper_bgcolor),gr=F(Ft,{gd:pe,hovermode:be,rotateLabels:fr,bgColor:Er,container:we._hoverlayer,outerContainer:we._paper.node(),commonLabelOpts:we.hoverlabel,hoverdistance:we.hoverdistance}),mr=gr.hoverLabels;if(g.isUnifiedHover(be)||(function(Jt,an,Sn,Ln){var Vn,cr,xn,Qn,er,Qt,zn,zt=an?"xa":"ya",sn=an?"ya":"xa",hn=0,Dn=1,Rn=Jt.size(),Hn=new Array(Rn),Mn=0,un=Ln.minX,fn=Ln.maxX,Tn=Ln.minY,An=Ln.maxY,Gn=function(rr){return rr*Sn._invScaleX},Zn=function(rr){return rr*Sn._invScaleY};function lr(rr){var Zr=rr[0],ar=rr[rr.length-1];if(xn=ar.pos+ar.dp+ar.size-Zr.pmax,(cr=Zr.pmin-Zr.pos-Zr.dp+Zr.size)>.01){for(er=rr.length-1;er>=0;er--)rr[er].dp+=cr;Vn=!1}if(!(xn<.01)){if(cr<-.01){for(er=rr.length-1;er>=0;er--)rr[er].dp-=xn;Vn=!1}if(Vn){var Nr=0;for(Qn=0;Qn<rr.length;Qn++)(Qt=rr[Qn]).pos+Qt.dp+Qt.size>Zr.pmax&&Nr++;for(Qn=rr.length-1;Qn>=0&&!(Nr<=0);Qn--)(Qt=rr[Qn]).pos>Zr.pmax-1&&(Qt.del=!0,Nr--);for(Qn=0;Qn<rr.length&&!(Nr<=0);Qn++)if((Qt=rr[Qn]).pos<Zr.pmin+1)for(Qt.del=!0,Nr--,xn=2*Qt.size,er=rr.length-1;er>=0;er--)rr[er].dp-=xn;for(Qn=rr.length-1;Qn>=0&&!(Nr<=0);Qn--)(Qt=rr[Qn]).pos+Qt.dp+Qt.size>Zr.pmax&&(Qt.del=!0,Nr--)}}}for(Jt.each(function(rr){var Zr=rr[zt],ar=rr[sn],Nr="x"===Zr._id.charAt(0),ii=Zr.range;0===Mn&&ii&&ii[0]>ii[1]!==Nr&&(Dn=-1);var Gi=0,vo=Nr?Sn.width:Sn.height;if("x"===Sn.hovermode||"y"===Sn.hovermode){var so,lo,Qi=J(rr,an),Co=rr.anchor,Rs="end"===Co?-1:1;if("middle"===Co)lo=(so=rr.crossPos+(Nr?Zn(Qi.y-rr.by/2):Gn(rr.bx/2+rr.tx2width/2)))+(Nr?Zn(rr.by):Gn(rr.bx));else if(Nr)lo=(so=rr.crossPos+Zn(m+Qi.y)-Zn(rr.by/2-m))+Zn(rr.by);else{var Qr=Gn(Rs*m+Qi.x),_s=Qr+Gn(Rs*rr.bx);so=rr.crossPos+Math.min(Qr,_s),lo=rr.crossPos+Math.max(Qr,_s)}Nr?void 0!==Tn&&void 0!==An&&Math.min(lo,An)-Math.max(so,Tn)>1&&("left"===ar.side?(Gi=ar._mainLinePosition,vo=Sn.width):vo=ar._mainLinePosition):void 0!==un&&void 0!==fn&&Math.min(lo,fn)-Math.max(so,un)>1&&("top"===ar.side?(Gi=ar._mainLinePosition,vo=Sn.height):vo=ar._mainLinePosition)}Hn[Mn++]=[{datum:rr,traceIndex:rr.trace.index,dp:0,pos:rr.pos,posref:rr.posref,size:rr.by*(Nr?x:1)/2,pmin:Gi,pmax:vo}]}),Hn.sort(function(rr,Zr){return rr[0].posref-Zr[0].posref||Dn*(Zr[0].traceIndex-rr[0].traceIndex)});!Vn&&hn<=Rn;){for(hn++,Vn=!0,Qn=0;Qn<Hn.length-1;){var nr=Hn[Qn],br=Hn[Qn+1],or=nr[nr.length-1],dr=br[0];if((cr=or.pos+or.dp+or.size-dr.pos-dr.dp+dr.size)>.01&&or.pmin===dr.pmin&&or.pmax===dr.pmax){for(er=br.length-1;er>=0;er--)br[er].dp+=cr;for(nr.push.apply(nr,br),Hn.splice(Qn+1,1),zn=0,er=nr.length-1;er>=0;er--)zn+=nr[er].dp;for(xn=zn/nr.length,er=nr.length-1;er>=0;er--)nr[er].dp-=xn;Vn=!1}else Qn++}Hn.forEach(lr)}for(Qn=Hn.length-1;Qn>=0;Qn--){var kr=Hn[Qn];for(er=kr.length-1;er>=0;er--){var Sr=kr[er],Pr=Sr.datum;Pr.offset=Sr.dp,Pr.del=Sr.del}}}(mr,fr,we,gr.commonLabelBoundingBox),z(mr,fr,we._invScaleX,we._invScaleY)),ke&&ke.tagName){var zr=d.getComponentMethod("annotations","hasClickToShow")(pe,Cn);s(I.select(ke),zr?"pointer":"")}ke&&!Re&&function(Jt,an,Sn){if(!Sn||Sn.length!==Jt._hoverdata.length)return!0;for(var Ln=Sn.length-1;Ln>=0;Ln--){var Vn=Sn[Ln],cr=Jt._hoverdata[Ln];if(Vn.curveNumber!==cr.curveNumber||String(Vn.pointNumber)!==String(cr.pointNumber)||String(Vn.pointNumbers)!==String(cr.pointNumbers))return!0}return!1}(pe,0,tn)&&(tn&&pe.emit("plotly_unhover",{event:xe,points:tn}),pe.emit("plotly_hover",{event:xe,points:pe._hoverdata,xaxes:ce,yaxes:Ae,xvals:Ue,yvals:Ze}))}(Q,ie,le,fe,he)})},U.loneHover=function(Q,ie){var le=!0;Array.isArray(Q)||(le=!1,Q=[Q]);var fe=ie.gd,he=ue(fe),pe=ae(fe),xe=F(Q.map(function(ke){var Te=ke._x0||ke.x0||ke.x||0,we=ke._x1||ke.x1||ke.x||0,je=ke._y0||ke.y0||ke.y||0,Ce=ke._y1||ke.y1||ke.y||0,Ie=ke.eventData;if(Ie){var ge=Math.min(Te,we),me=Math.max(Te,we),ce=Math.min(je,Ce),Ae=Math.max(je,Ce),Ne=ke.trace;if(d.traceIs(Ne,"gl3d")){var De=fe._fullLayout[Ne.scene]._scene.container,qe=De.offsetLeft,Ke=De.offsetTop;ge+=qe,me+=qe,ce+=Ke,Ae+=Ke}Ie.bbox={x0:ge+pe,x1:me+pe,y0:ce+he,y1:Ae+he},ie.inOut_bbox&&ie.inOut_bbox.push(Ie.bbox)}else Ie=!1;return{color:ke.color||o.defaultLine,x0:ke.x0||ke.x||0,x1:ke.x1||ke.x||0,y0:ke.y0||ke.y||0,y1:ke.y1||ke.y||0,xLabel:ke.xLabel,yLabel:ke.yLabel,zLabel:ke.zLabel,text:ke.text,name:ke.name,idealAlign:ke.idealAlign,borderColor:ke.borderColor,fontFamily:ke.fontFamily,fontSize:ke.fontSize,fontColor:ke.fontColor,nameLength:ke.nameLength,textAlign:ke.textAlign,trace:ke.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ke.hovertemplate||!1,hovertemplateLabels:ke.hovertemplateLabels||!1,eventData:Ie}}),{gd:fe,hovermode:"closest",rotateLabels:!1,bgColor:ie.bgColor||o.background,container:I.select(ie.container),outerContainer:ie.outerContainer||ie.container}).hoverLabels,Ee=0,Re=0;return xe.sort(function(ke,Te){return ke.y0-Te.y0}).each(function(ke,Te){var we=ke.y0-ke.by/2;ke.offset=we-5<Ee?Ee-we+5:0,Ee=we+ke.by+ke.offset,Te===ie.anchorIndex&&(Re=ke.offset)}).each(function(ke){ke.offset-=Re}),z(xe,!1,fe._fullLayout._invScaleX,fe._fullLayout._invScaleY),le?xe:xe.node()};var R=/<extra>([\s\S]*)<\/extra>/;function F(Q,ie){var le=ie.gd,fe=le._fullLayout,he=ie.hovermode,pe=ie.rotateLabels,xe=ie.bgColor,Ee=ie.container,Re=ie.outerContainer,ke=ie.commonLabelOpts||{};if(0===Q.length)return[[]];var Te=ie.fontFamily||h.HOVERFONT,we=ie.fontSize||h.HOVERFONTSIZE,je=Q[0],Ce=je.xa,Ie=je.ya,ge=he.charAt(0),me=ge+"Label",ce=je[me];if(void 0===ce&&"multicategory"===Ce.type)for(var Ae=0;Ae<Q.length&&void 0===(ce=Q[Ae][me]);Ae++);var Ne=ne(le,Re),De=Ne.top,qe=Ne.width,Ke=Ne.height,be=void 0!==ce&&je.distance<=ie.hoverdistance&&("x"===he||"y"===he);if(be){var Oe,Le,Ue=!0;for(Oe=0;Oe<Q.length;Oe++)if(Ue&&void 0===Q[Oe].zLabel&&(Ue=!1),Le=Q[Oe].hoverinfo||Q[Oe].trace.hoverinfo){var Ze=Array.isArray(Le)?Le:Le.split("+");if(-1===Ze.indexOf("all")&&-1===Ze.indexOf(he)){be=!1;break}}Ue&&(be=!1)}var We=Ee.selectAll("g.axistext").data(be?[0]:[]);We.enter().append("g").classed("axistext",!0),We.exit().remove();var et={minX:0,maxX:0,minY:0,maxY:0};if(We.each(function(){var Mt=I.select(this),Pt=k.ensureSingle(Mt,"path","",function(Xn){Xn.style({"stroke-width":"1px"})}),Zt=k.ensureSingle(Mt,"text","",function(Xn){Xn.attr("data-notex",1)}),$t=ke.bgcolor||o.defaultLine,Xt=ke.bordercolor||o.contrast($t),dn=o.contrast($t),on={family:ke.font.family||Te,size:ke.font.size||we,color:ke.font.color||dn};Pt.style({fill:$t,stroke:Xt}),Zt.text(ce).call(a.font,on).call(i.positionText,0,0).call(i.convertToTspans,le),Mt.attr("transform","");var cn,tn,Cn=ne(le,Zt.node());if("x"===he){var Fn="top"===Ce.side?"-":"";Zt.attr("text-anchor","middle").call(i.positionText,0,"top"===Ce.side?De-Cn.bottom-m-D:De-Cn.top+m+D),tn=Ie._offset+("top"===Ce.side?0:Ie._length);var En=Cn.width/2+D;(cn=Ce._offset+(je.x0+je.x1)/2)<En?(cn=En,Pt.attr("d","M-"+(En-m)+",0L-"+(En-2*m)+","+Fn+m+"H"+En+"v"+Fn+(2*D+Cn.height)+"H-"+En+"V"+Fn+m+"Z")):cn>fe.width-En?(cn=fe.width-En,Pt.attr("d","M"+(En-m)+",0L"+En+","+Fn+m+"v"+Fn+(2*D+Cn.height)+"H-"+En+"V"+Fn+m+"H"+(En-2*m)+"Z")):Pt.attr("d","M0,0L"+m+","+Fn+m+"H"+En+"v"+Fn+(2*D+Cn.height)+"H-"+En+"V"+Fn+m+"H-"+m+"Z"),et.minX=cn-En,et.maxX=cn+En,"top"===Ce.side?(et.minY=tn-(2*D+Cn.height),et.maxY=tn-D):(et.minY=tn+D,et.maxY=tn+(2*D+Cn.height))}else{var rn,yn,pn;"right"===Ie.side?(rn="start",yn=1,pn="",cn=Ce._offset+Ce._length):(rn="end",yn=-1,pn="-",cn=Ce._offset),tn=Ie._offset+(je.y0+je.y1)/2,Zt.attr("text-anchor",rn),Pt.attr("d","M0,0L"+pn+m+","+m+"V"+(D+Cn.height/2)+"h"+pn+(2*D+Cn.width)+"V-"+(D+Cn.height/2)+"H"+pn+m+"V-"+m+"Z"),et.minY=tn-(D+Cn.height/2),et.maxY=tn+(D+Cn.height/2),"right"===Ie.side?(et.minX=cn+m,et.maxX=cn+m+(2*D+Cn.width)):(et.minX=cn-m-(2*D+Cn.width),et.maxX=cn-m);var bn,In=Cn.height/2,_n=De-Cn.top-In,qn="clip"+fe._uid+"commonlabel"+Ie._id;if(cn<Cn.width+2*D+m){bn="M-"+(m+D)+"-"+In+"h-"+(Cn.width-D)+"V"+In+"h"+(Cn.width-D)+"Z";var Wn=Cn.width-cn+D;i.positionText(Zt,Wn,_n),"end"===rn&&Zt.selectAll("tspan").each(function(){var Xn=I.select(this),yr=a.tester.append("text").text(Xn.text()).call(a.font,on),fr=ne(le,yr.node());Math.round(fr.width)<Math.round(Cn.width)&&Xn.attr("x",Wn-fr.width),yr.remove()})}else i.positionText(Zt,yn*(D+m),_n),bn=null;var Nn=fe._topclips.selectAll("#"+qn).data(bn?[0]:[]);Nn.enter().append("clipPath").attr("id",qn).append("path"),Nn.exit().remove(),Nn.select("path").attr("d",bn),a.setClipUrl(Zt,bn?qn:null,le)}Mt.attr("transform",T(cn,tn))}),g.isUnifiedHover(he)){Ee.selectAll("g.hovertext").remove();var nt=Q.filter(function(Mt){return"none"!==Mt.hoverinfo});if(0===nt.length)return[];var ct=fe.hoverlabel,yt=ct.font,Ct={font:yt};w({showlegend:!0,legend:{title:{text:ce,font:yt},font:yt,bgcolor:ct.bgcolor,bordercolor:ct.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:fe.legend?fe.legend.traceorder:void 0,orientation:"v"}},Ct,le._fullData);var Dt=Ct.legend;Dt.entries=[];for(var vt=0;vt<nt.length;vt++){var mt=nt[vt];if("none"!==mt.hoverinfo){var Lt=B(mt,!0,he,fe,ce),Ft=Lt[0],Rt=Lt[1];mt.name=Rt,mt.text=""!==Rt?Rt+" : "+Ft:Ft;var Wt=mt.cd[mt.index];Wt&&(Wt.mc&&(mt.mc=Wt.mc),Wt.mcc&&(mt.mc=Wt.mcc),Wt.mlc&&(mt.mlc=Wt.mlc),Wt.mlcc&&(mt.mlc=Wt.mlcc),Wt.mlw&&(mt.mlw=Wt.mlw),Wt.mrc&&(mt.mrc=Wt.mrc),Wt.dir&&(mt.dir=Wt.dir)),mt._distinct=!0,Dt.entries.push([mt])}}Dt.entries.sort(function(Mt,Pt){return Mt[0].trace.index-Pt[0].trace.index}),Dt.layer=Ee,Dt._inHover=!0,Dt._groupTitleFont=ct.grouptitlefont,y(le,Dt);var Ht,it,st,Je,ot=Ee.select("g.legend"),pt=ne(le,ot.node()),xt=pt.width+2*D,He=pt.height+2*D,Ge=nt[0],dt=(Ge.x0+Ge.x1)/2,ht=(Ge.y0+Ge.y1)/2,kt=!(d.traceIs(Ge.trace,"bar-like")||d.traceIs(Ge.trace,"box-violin"));"y"===ge?kt?(it=ht-D,Ht=ht+D):(it=Math.min.apply(null,nt.map(function(Mt){return Math.min(Mt.y0,Mt.y1)})),Ht=Math.max.apply(null,nt.map(function(Mt){return Math.max(Mt.y0,Mt.y1)}))):it=Ht=k.mean(nt.map(function(Mt){return(Mt.y0+Mt.y1)/2}))-He/2,"x"===ge?kt?(st=dt+D,Je=dt-D):(st=Math.max.apply(null,nt.map(function(Mt){return Math.max(Mt.x0,Mt.x1)})),Je=Math.min.apply(null,nt.map(function(Mt){return Math.min(Mt.x0,Mt.x1)}))):st=Je=k.mean(nt.map(function(Mt){return(Mt.x0+Mt.x1)/2}))-xt/2;var St,Et,wt=Ce._offset,Nt=Ie._offset;return Je+=wt-xt,it+=Nt-He,St=(st+=wt)+xt<qe&&st>=0?st:Je+xt<qe&&Je>=0?Je:wt+xt<qe?wt:st-dt<dt-Je+xt?qe-xt:0,Et=(Ht+=Nt)+He<Ke&&Ht>=0?Ht:it+He<Ke&&it>=0?it:Nt+He<Ke?Nt:Ht-ht<ht-it+He?Ke-He:0,ot.attr("transform",T((St+=D)-1,(Et+=D)-1)),ot}var _t=Ee.selectAll("g.hovertext").data(Q,function(Mt){return P(Mt)});return _t.enter().append("g").classed("hovertext",!0).each(function(){var Mt=I.select(this);Mt.append("rect").call(o.fill,o.addOpacity(xe,.8)),Mt.append("text").classed("name",!0),Mt.append("path").style("stroke-width","1px"),Mt.append("text").classed("nums",!0).call(a.font,Te,we)}),_t.exit().remove(),_t.each(function(Mt){var Pt=I.select(this).attr("transform",""),Zt=Mt.color;Array.isArray(Zt)&&(Zt=Zt[Mt.eventData[0].pointNumber]);var $t=Mt.bgcolor||Zt,Xt=o.combine(o.opacity($t)?$t:o.defaultLine,xe),dn=o.combine(o.opacity(Zt)?Zt:o.defaultLine,xe),on=Mt.borderColor||o.contrast(Xt),cn=B(Mt,be,he,fe,ce,Pt),tn=cn[0],Cn=cn[1],Fn=Pt.select("text.nums").call(a.font,Mt.fontFamily||Te,Mt.fontSize||we,Mt.fontColor||on).text(tn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,le),En=Pt.select("text.name"),rn=0,yn=0;if(Cn&&Cn!==tn){En.call(a.font,Mt.fontFamily||Te,Mt.fontSize||we,dn).text(Cn).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,le);var pn=ne(le,En.node());rn=pn.width+2*D,yn=pn.height+2*D}else En.remove(),Pt.select("rect").remove();Pt.select("path").style({fill:Xt,stroke:on});var bn=Mt.xa._offset+(Mt.x0+Mt.x1)/2,In=Mt.ya._offset+(Mt.y0+Mt.y1)/2,_n=Math.abs(Mt.x1-Mt.x0),qn=Math.abs(Mt.y1-Mt.y0),Wn=ne(le,Fn.node()),Nn=Wn.width/fe._invScaleX,Xn=Wn.height/fe._invScaleY;Mt.ty0=(De-Wn.top)/fe._invScaleY,Mt.bx=Nn+2*D,Mt.by=Math.max(Xn+2*D,yn),Mt.anchor="start",Mt.txwidth=Nn,Mt.tx2width=rn,Mt.offset=0;var yr,fr,Er=(Nn+m+D+rn)*fe._invScaleX;if(pe)Mt.pos=bn,yr=In+qn/2+Er<=Ke,fr=In-qn/2-Er>=0,"top"!==Mt.idealAlign&&yr||!fr?yr?(In+=qn/2,Mt.anchor="start"):Mt.anchor="middle":(In-=qn/2,Mt.anchor="end"),Mt.crossPos=In;else{if(Mt.pos=In,yr=bn+_n/2+Er<=qe,fr=bn-_n/2-Er>=0,"left"!==Mt.idealAlign&&yr||!fr)if(yr)bn+=_n/2,Mt.anchor="start";else{Mt.anchor="middle";var gr=Er/2,mr=bn+gr-qe,zr=bn-gr;mr>0&&(bn-=mr),zr<0&&(bn+=-zr)}else bn-=_n/2,Mt.anchor="end";Mt.crossPos=bn}Fn.attr("text-anchor",Mt.anchor),rn&&En.attr("text-anchor",Mt.anchor),Pt.attr("transform",T(bn,In)+(pe?v(p):""))}),{hoverLabels:_t,commonLabelBoundingBox:et}}function B(Q,ie,le,fe,he,pe){var xe="",Ee="";void 0!==Q.nameOverride&&(Q.name=Q.nameOverride),Q.name&&(Q.trace._meta&&(Q.name=k.templateString(Q.name,Q.trace._meta)),xe=X(Q.name,Q.nameLength));var Re=le.charAt(0);void 0!==Q.zLabel?(void 0!==Q.xLabel&&(Ee+="x: "+Q.xLabel+"<br>"),void 0!==Q.yLabel&&(Ee+="y: "+Q.yLabel+"<br>"),"choropleth"!==Q.trace.type&&"choroplethmapbox"!==Q.trace.type&&(Ee+=(Ee?"z: ":"")+Q.zLabel)):ie&&Q[Re+"Label"]===he?Ee=Q[("x"===Re?"y":"x")+"Label"]||"":void 0===Q.xLabel?void 0!==Q.yLabel&&"scattercarpet"!==Q.trace.type&&(Ee=Q.yLabel):Ee=void 0===Q.yLabel?Q.xLabel:"("+Q.xLabel+", "+Q.yLabel+")",!Q.text&&0!==Q.text||Array.isArray(Q.text)||(Ee+=(Ee?"<br>":"")+Q.text),void 0!==Q.extraText&&(Ee+=(Ee?"<br>":"")+Q.extraText),pe&&""===Ee&&!Q.hovertemplate&&(""===xe&&pe.remove(),Ee=xe);var Te=Q.hovertemplate||!1;if(Te){var we=Q.hovertemplateLabels||Q;Q[Re+"Label"]!==he&&(we[Re+"other"]=we[Re+"Val"],we[Re+"otherLabel"]=we[Re+"Label"]),Ee=(Ee=k.hovertemplateString(Te,we,fe._d3locale,Q.eventData[0]||{},Q.trace._meta)).replace(R,function(je,Ce){return xe=X(Ce,Q.nameLength),""})}return[Ee,xe]}function J(Q,ie){var le=0,fe=Q.offset;return ie&&(fe*=-M,le=Q.offset*b),{x:le,y:fe}}function z(Q,ie,le,fe){var he=function(xe){return xe*le},pe=function(xe){return xe*fe};Q.each(function(xe){var Ee=I.select(this);if(xe.del)return Ee.remove();var Re,ke,Te,we,je=Ee.select("text.nums"),Ce=xe.anchor,Ie="end"===Ce?-1:1,ge=(we=(Te=(ke={start:1,end:-1,middle:0}[(Re=xe).anchor])*(m+D))+ke*(Re.txwidth+D),"middle"===Re.anchor&&(Te-=Re.tx2width/2,we+=Re.txwidth/2+D),{alignShift:ke,textShiftX:Te,text2ShiftX:we}),me=J(xe,ie),ce=me.x,Ae=me.y,Ne="middle"===Ce;Ee.select("path").attr("d",Ne?"M-"+he(xe.bx/2+xe.tx2width/2)+","+pe(Ae-xe.by/2)+"h"+he(xe.bx)+"v"+pe(xe.by)+"h-"+he(xe.bx)+"Z":"M0,0L"+he(Ie*m+ce)+","+pe(m+Ae)+"v"+pe(xe.by/2-m)+"h"+he(Ie*xe.bx)+"v-"+pe(xe.by)+"H"+he(Ie*m+ce)+"V"+pe(Ae-m)+"Z");var De=ce+ge.textShiftX,qe=Ae+xe.ty0-xe.by/2+D,Ke=xe.textAlign||"auto";"auto"!==Ke&&("left"===Ke&&"start"!==Ce?(je.attr("text-anchor","start"),De=Ne?-xe.bx/2-xe.tx2width/2+D:-xe.bx-D):"right"===Ke&&"end"!==Ce&&(je.attr("text-anchor","end"),De=Ne?xe.bx/2-xe.tx2width/2-D:xe.bx+D)),je.call(i.positionText,he(De),pe(qe)),xe.tx2width&&(Ee.select("text.name").call(i.positionText,he(ge.text2ShiftX+ge.alignShift*D+ce),pe(Ae+xe.ty0-xe.by/2+D)),Ee.select("rect").call(a.setRect,he(ge.text2ShiftX+(ge.alignShift-1)*xe.tx2width/2+ce),pe(Ae-xe.by/2-1),he(xe.tx2width),pe(xe.by+2)))})}function $(Q,ie){var le=Q.index,fe=Q.trace||{},he=Q.cd[0],pe=Q.cd[le]||{};function xe(je){return je||C(je)&&0===je}var Ee=Array.isArray(le)?function(je,Ce){var Ie=k.castOption(he,le,je);return xe(Ie)?Ie:k.extractOption({},fe,"",Ce)}:function(je,Ce){return k.extractOption(pe,fe,je,Ce)};function Re(je,Ce,Ie){var ge=Ee(Ce,Ie);xe(ge)&&(Q[je]=ge)}if(Re("hoverinfo","hi","hoverinfo"),Re("bgcolor","hbg","hoverlabel.bgcolor"),Re("borderColor","hbc","hoverlabel.bordercolor"),Re("fontFamily","htf","hoverlabel.font.family"),Re("fontSize","hts","hoverlabel.font.size"),Re("fontColor","htc","hoverlabel.font.color"),Re("nameLength","hnl","hoverlabel.namelength"),Re("textAlign","hta","hoverlabel.align"),Q.posref="y"===ie||"closest"===ie&&"h"===fe.orientation?Q.xa._offset+(Q.x0+Q.x1)/2:Q.ya._offset+(Q.y0+Q.y1)/2,Q.x0=k.constrain(Q.x0,0,Q.xa._length),Q.x1=k.constrain(Q.x1,0,Q.xa._length),Q.y0=k.constrain(Q.y0,0,Q.ya._length),Q.y1=k.constrain(Q.y1,0,Q.ya._length),void 0!==Q.xLabelVal&&(Q.xLabel="xLabel"in Q?Q.xLabel:u.hoverLabelText(Q.xa,Q.xLabelVal,fe.xhoverformat),Q.xVal=Q.xa.c2d(Q.xLabelVal)),void 0!==Q.yLabelVal&&(Q.yLabel="yLabel"in Q?Q.yLabel:u.hoverLabelText(Q.ya,Q.yLabelVal,fe.yhoverformat),Q.yVal=Q.ya.c2d(Q.yLabelVal)),void 0!==Q.zLabelVal&&void 0===Q.zLabel&&(Q.zLabel=String(Q.zLabelVal)),!(isNaN(Q.xerr)||"log"===Q.xa.type&&Q.xerr<=0)){var ke=u.tickText(Q.xa,Q.xa.c2l(Q.xerr),"hover").text;Q.xLabel+=void 0!==Q.xerrneg?" +"+ke+" / -"+u.tickText(Q.xa,Q.xa.c2l(Q.xerrneg),"hover").text:" \xb1 "+ke,"x"===ie&&(Q.distance+=1)}if(!(isNaN(Q.yerr)||"log"===Q.ya.type&&Q.yerr<=0)){var Te=u.tickText(Q.ya,Q.ya.c2l(Q.yerr),"hover").text;Q.yLabel+=void 0!==Q.yerrneg?" +"+Te+" / -"+u.tickText(Q.ya,Q.ya.c2l(Q.yerrneg),"hover").text:" \xb1 "+Te,"y"===ie&&(Q.distance+=1)}var we=Q.hoverinfo||Q.trace.hoverinfo;return we&&"all"!==we&&(-1===(we=Array.isArray(we)?we:we.split("+")).indexOf("x")&&(Q.xLabel=void 0),-1===we.indexOf("y")&&(Q.yLabel=void 0),-1===we.indexOf("z")&&(Q.zLabel=void 0),-1===we.indexOf("text")&&(Q.text=void 0),-1===we.indexOf("name")&&(Q.name=void 0)),Q}function G(Q,ie,le){var fe,he,pe=le.container,xe=le.fullLayout,Ee=xe._size,Re=le.event,ke=!!ie.hLinePoint,Te=!!ie.vLinePoint;if(pe.selectAll(".spikeline").remove(),Te||ke){var we=o.combine(xe.plot_bgcolor,xe.paper_bgcolor);if(ke){var je,Ce,Ie=ie.hLinePoint;fe=Ie&&Ie.xa,"cursor"===(he=Ie&&Ie.ya).spikesnap?(je=Re.pointerX,Ce=Re.pointerY):(je=fe._offset+Ie.x,Ce=he._offset+Ie.y);var ge,me,ce=f.readability(Ie.color,we)<1.5?o.contrast(we):Ie.color,Ae=he.spikemode,Ne=he.spikethickness,De=he.spikecolor||ce,qe=u.getPxPosition(Q,he);if(-1!==Ae.indexOf("toaxis")||-1!==Ae.indexOf("across")){if(-1!==Ae.indexOf("toaxis")&&(ge=qe,me=je),-1!==Ae.indexOf("across")){var Ke=he._counterDomainMin,be=he._counterDomainMax;"free"===he.anchor&&(Ke=Math.min(Ke,he.position),be=Math.max(be,he.position)),ge=Ee.l+Ke*Ee.w,me=Ee.l+be*Ee.w}pe.insert("line",":first-child").attr({x1:ge,x2:me,y1:Ce,y2:Ce,"stroke-width":Ne,stroke:De,"stroke-dasharray":a.dashStyle(he.spikedash,Ne)}).classed("spikeline",!0).classed("crisp",!0),pe.insert("line",":first-child").attr({x1:ge,x2:me,y1:Ce,y2:Ce,"stroke-width":Ne+2,stroke:we}).classed("spikeline",!0).classed("crisp",!0)}-1!==Ae.indexOf("marker")&&pe.insert("circle",":first-child").attr({cx:qe+("right"!==he.side?Ne:-Ne),cy:Ce,r:Ne,fill:De}).classed("spikeline",!0)}if(Te){var Oe,Le,Ue=ie.vLinePoint;he=Ue&&Ue.ya,"cursor"===(fe=Ue&&Ue.xa).spikesnap?(Oe=Re.pointerX,Le=Re.pointerY):(Oe=fe._offset+Ue.x,Le=he._offset+Ue.y);var Ze,We,et=f.readability(Ue.color,we)<1.5?o.contrast(we):Ue.color,nt=fe.spikemode,ct=fe.spikethickness,yt=fe.spikecolor||et,ut=u.getPxPosition(Q,fe);if(-1!==nt.indexOf("toaxis")||-1!==nt.indexOf("across")){if(-1!==nt.indexOf("toaxis")&&(Ze=ut,We=Le),-1!==nt.indexOf("across")){var Ct=fe._counterDomainMin,Dt=fe._counterDomainMax;"free"===fe.anchor&&(Ct=Math.min(Ct,fe.position),Dt=Math.max(Dt,fe.position)),Ze=Ee.t+(1-Dt)*Ee.h,We=Ee.t+(1-Ct)*Ee.h}pe.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Ze,y2:We,"stroke-width":ct,stroke:yt,"stroke-dasharray":a.dashStyle(fe.spikedash,ct)}).classed("spikeline",!0).classed("crisp",!0),pe.insert("line",":first-child").attr({x1:Oe,x2:Oe,y1:Ze,y2:We,"stroke-width":ct+2,stroke:we}).classed("spikeline",!0).classed("crisp",!0)}-1!==nt.indexOf("marker")&&pe.insert("circle",":first-child").attr({cx:Oe,cy:ut-("top"!==fe.side?ct:-ct),r:ct,fill:yt}).classed("spikeline",!0)}}}function H(Q,ie){return!ie||ie.vLinePoint!==Q._spikepoints.vLinePoint||ie.hLinePoint!==Q._spikepoints.hLinePoint}function X(Q,ie){return i.plainText(Q||"",{len:ie,allowedTags:["br","sub","sup","b","i","em"]})}function K(Q,ie,le){var fe=ie[Q+"a"],he=ie[Q+"Val"],pe=ie.cd[0];if("category"===fe.type||"multicategory"===fe.type)he=fe._categoriesMap[he];else if("date"===fe.type){var xe=ie.trace[Q+"periodalignment"];if(xe){var Ee=ie.cd[ie.index],Re=Ee[Q+"Start"];void 0===Re&&(Re=Ee[Q]);var ke=Ee[Q+"End"];void 0===ke&&(ke=Ee[Q]);var Te=ke-Re;"end"===xe?he+=Te:"middle"===xe&&(he+=Te/2)}he=fe.d2c(he)}return pe&&pe.t&&pe.t.posLetter===fe._id&&("group"!==le.boxmode&&"group"!==le.violinmode||(he+=pe.t.dPos)),he}function ue(Q){return Q.offsetTop+Q.clientTop}function ae(Q){return Q.offsetLeft+Q.clientLeft}function ne(Q,ie){var le=Q._fullLayout,fe=ie.getBoundingClientRect(),he=fe.left,pe=fe.top,xe=he+fe.width,Ee=pe+fe.height,Re=k.apply3DTransform(le._invTransform)(he,pe),ke=k.apply3DTransform(le._invTransform)(xe,Ee),Te=Re[0],we=Re[1],je=ke[0],Ce=ke[1];return{x:Te,y:we,width:je-Te,height:Ce-we,top:Math.min(we,Ce),left:Math.min(Te,je),right:Math.max(Te,je),bottom:Math.max(we,Ce)}}},38048:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(23469).isUnifiedHover;se.exports=function(k,T,v,c){c=c||{};var i=T.legend;function s(a){c.font[a]||(c.font[a]=i?T.legend.font[a]:T.font[a])}T&&f(T.hovermode)&&(c.font||(c.font={}),s("size"),s("family"),s("color"),i?(c.bgcolor||(c.bgcolor=C.combine(T.legend.bgcolor,T.paper_bgcolor)),c.bordercolor||(c.bordercolor=T.legend.bordercolor)):c.bgcolor||(c.bgcolor=T.paper_bgcolor)),v("hoverlabel.bgcolor",c.bgcolor),v("hoverlabel.bordercolor",c.bordercolor),v("hoverlabel.namelength",c.namelength),I.coerceFont(v,"hoverlabel.font",c.font),v("hoverlabel.align",c.align)}},98212:function(se,U,r){"use strict";var I=r(71828),C=r(528);se.exports=function(f,k){function T(v,c){return void 0!==k[v]?k[v]:I.coerce(f,k,C,v,c)}return T("clickmode"),T("hovermode")}},30211:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(28569),k=r(23469),T=r(528),v=r(88335);se.exports={moduleType:"component",name:"fx",constants:r(26675),schema:{layout:T},attributes:r(77914),layoutAttributes:T,supplyLayoutGlobalDefaults:r(22774),supplyDefaults:r(54268),supplyLayoutDefaults:r(34938),calc:r(30732),getDistanceFunction:k.getDistanceFunction,getClosest:k.getClosest,inbox:k.inbox,quadrature:k.quadrature,appendArrayPointValue:k.appendArrayPointValue,castHoverOption:function(c,i,s){return C.castOption(c,i,"hoverlabel."+s)},castHoverinfo:function(c,i,s){return C.castOption(c,s,"hoverinfo",function(a){return C.coerceHoverinfo({hoverinfo:a},{_module:c._module},i)})},hover:v.hover,unhover:f.unhover,loneHover:v.loneHover,loneUnhover:function(c){var i=C.isD3Selection(c)?c:I.select(c);i.selectAll("g.hovertext").remove(),i.selectAll(".spikeline").remove()},click:r(75914)}},528:function(se,U,r){"use strict";var I=r(26675),C=r(41940),f=C({editType:"none"});f.family.dflt=I.HOVERFONT,f.size.dflt=I.HOVERFONTSIZE,se.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:f,grouptitlefont:C({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function(se,U,r){"use strict";var I=r(71828),C=r(528),f=r(98212),k=r(38048);se.exports=function(T,v){function c(o,l){return I.coerce(T,v,C,o,l)}f(T,v)&&(c("hoverdistance"),c("spikedistance")),"select"===c("dragmode")&&c("selectdirection");var i=v._has("mapbox"),s=v._has("geo"),a=v._basePlotModules.length;"zoom"===v.dragmode&&((i||s)&&1===a||i&&s&&2===a)&&(v.dragmode="pan"),k(T,v,c),I.coerceFont(c,"hoverlabel.grouptitlefont",v.hoverlabel.font)}},22774:function(se,U,r){"use strict";var I=r(71828),C=r(38048),f=r(528);se.exports=function(k,T){C(k,T,function(v,c){return I.coerce(k,T,f,v,c)})}},83312:function(se,U,r){"use strict";var I=r(71828),C=r(30587).counter,f=r(27670).Y,k=r(85555).idRegex,T=r(44467),v={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[C("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[k.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[k.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:f({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function c(a,o,l){var u=o[l+"axes"],d=Object.keys((a._splomAxes||{})[l]||{});return Array.isArray(u)?u:d.length?d:void 0}function i(a,o,l,u,d,g){var h=o(a+"gap",l),w=o("domain."+a);o(a+"side",u);for(var y=new Array(d),p=w[0],_=(w[1]-p)/(d-h),x=_*(1-h),b=0;b<d;b++){var M=p+_*b;y[g?d-1-b:b]=[M,M+x]}return y}function s(a,o,l,u,d){var g,h=new Array(l);function w(y,p){-1!==o.indexOf(p)&&void 0===u[p]?(h[y]=p,u[p]=y):h[y]=""}if(Array.isArray(a))for(g=0;g<l;g++)w(g,a[g]);else for(w(0,d),g=1;g<l;g++)w(g,d+(g+1));return h}se.exports={moduleType:"component",name:"grid",schema:{layout:{grid:v}},layoutAttributes:v,sizeDefaults:function(a,o){var l=a.grid||{},u=c(o,l,"x"),d=c(o,l,"y");if(a.grid||u||d){var g,h,w=Array.isArray(l.subplots)&&Array.isArray(l.subplots[0]),y=Array.isArray(u),p=Array.isArray(d),_=y&&u!==l.xaxes&&p&&d!==l.yaxes;w?(g=l.subplots.length,h=l.subplots[0].length):(p&&(g=d.length),y&&(h=u.length));var x=T.newContainer(o,"grid"),b=R("rows",g),M=R("columns",h);if(b*M>1){w||y||p||"independent"===R("pattern")&&(w=!0),x._hasSubplotGrid=w;var m,D,S="top to bottom"===R("roworder"),P=w?.3:.1;_&&o._splomGridDflt&&(m=o._splomGridDflt.xside,D=o._splomGridDflt.yside),x._domains={x:i("x",R,w?.2:.1,m,M),y:i("y",R,P,D,b,S)}}else delete o.grid}function R(F,B){return I.coerce(l,x,v,F,B)}},contentDefaults:function(a,o){var l=o.grid;if(l&&l._domains){var u,d,g,h,w,y,p,_=a.grid||{},x=o._subplots,b=l._hasSubplotGrid,M=l.rows,m=l.columns,D="independent"===l.pattern,S=l._axisMap={};if(b){var O=_.subplots||[];y=l.subplots=new Array(M);var P=1;for(u=0;u<M;u++){var R=y[u]=new Array(m),F=O[u]||[];for(d=0;d<m;d++)if(D?(w=1===P?"xy":"x"+P+"y"+P,P++):w=F[d],R[d]="",-1!==x.cartesian.indexOf(w)){if(p=w.indexOf("y"),g=w.slice(0,p),h=w.slice(p),void 0!==S[g]&&S[g]!==d||void 0!==S[h]&&S[h]!==u)continue;R[d]=w,S[g]=d,S[h]=u}}}else{var B=c(o,_,"x"),J=c(o,_,"y");l.xaxes=s(B,x.xaxis,m,S,"x"),l.yaxes=s(J,x.yaxis,M,S,"y")}var z=l._anchors={},$="top to bottom"===l.roworder;for(var G in S){var H,X,K,ue=G.charAt(0),ae=l[ue+"side"];if(ae.length<8)z[G]="free";else if("x"===ue){if("t"===ae.charAt(0)===$?(H=0,X=1,K=M):(H=M-1,X=-1,K=-1),b){var ne=S[G];for(u=H;u!==K;u+=X)if((w=y[u][ne])&&(p=w.indexOf("y"),w.slice(0,p)===G)){z[G]=w.slice(p);break}}else for(u=H;u!==K;u+=X)if(-1!==x.cartesian.indexOf(G+(h=l.yaxes[u]))){z[G]=h;break}}else if("l"===ae.charAt(0)?(H=0,X=1,K=m):(H=m-1,X=-1,K=-1),b){var Q=S[G];for(u=H;u!==K;u+=X)if((w=y[Q][u])&&(p=w.indexOf("y"),w.slice(p)===G)){z[G]=w.slice(0,p);break}}else for(u=H;u!==K;u+=X)if(-1!==x.cartesian.indexOf((g=l.xaxes[u])+G)){z[G]=g;break}}}}}},69819:function(se,U,r){"use strict";var I=r(85555),C=r(44467).templatedArray;r(24695),se.exports=C("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",I.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",I.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function(se,U,r){"use strict";var I=r(92770),C=r(58163);se.exports=function(f,k,T,v){k=k||{};var c="log"===T&&"linear"===k.type;if(c||"linear"===T&&"log"===k.type)for(var s,a,o=f._fullLayout.images,l=k._id.charAt(0),u=0;u<o.length;u++)if(a="images["+u+"].",(s=o[u])[l+"ref"]===k._id){var d=s[l],g=s["size"+l],h=null,w=null;if(c){h=C(d,k.range);var y=g/Math.pow(10,h)/2;w=2*Math.log(y+Math.sqrt(1+y*y))/Math.LN10}else w=(h=Math.pow(10,d))*(Math.pow(10,g/2)-Math.pow(10,-g/2));I(h)?I(w)||(w=null):(h=null,w=null),v(a+l,h),v(a+"size"+l,w)}}},81603:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(85501),k=r(69819);function T(v,c,i){function s(h,w){return I.coerce(v,c,k,h,w)}var a=s("source");if(!s("visible",!!a))return c;s("layer"),s("xanchor"),s("yanchor"),s("sizex"),s("sizey"),s("sizing"),s("opacity");for(var o={_fullLayout:i},l=["x","y"],u=0;u<2;u++){var d=l[u],g=C.coerceRef(v,c,o,d,"paper",void 0);"paper"!==g&&C.getFromId(o,g)._imgIndices.push(c._index),C.coercePosition(c,o,s,g,d,0)}return c}se.exports=function(v,c){f(v,c,{name:"images",handleItemDefaults:T})}},80750:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(89298),k=r(41675),T=r(77922);se.exports=function(v){var c,i,s=v._fullLayout,a=[],o={},l=[];for(i=0;i<s.images.length;i++){var u=s.images[i];if(u.visible)if("below"===u.layer&&"paper"!==u.xref&&"paper"!==u.yref){c=k.ref2id(u.xref)+k.ref2id(u.yref);var d=s._plots[c];if(!d){l.push(u);continue}d.mainplot&&(c=d.mainplot.id),o[c]||(o[c]=[]),o[c].push(u)}else"above"===u.layer?a.push(u):l.push(u)}var g={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},h={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function w(m){var D=I.select(this);if(this._imgSrc!==m.source)if(D.attr("xmlns",T.svg),m.source&&"data:"===m.source.slice(0,5))D.attr("xlink:href",m.source),this._imgSrc=m.source;else{var S=new Promise(function(O){var P=new Image;function R(){D.remove(),O()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=R,P.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height,F.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var B=F.toDataURL("image/png");D.attr("xlink:href",B),O()},D.on("error",R),P.src=m.source,this._imgSrc=m.source}.bind(this));v._promises.push(S)}}function y(m){var D,S,O=I.select(this),P=f.getFromId(v,m.xref),R=f.getFromId(v,m.yref),F="domain"===f.getRefType(m.xref),B="domain"===f.getRefType(m.yref),J=s._size;D=void 0!==P?"string"==typeof m.xref&&F?P._length*m.sizex:Math.abs(P.l2p(m.sizex)-P.l2p(0)):m.sizex*J.w,S=void 0!==R?"string"==typeof m.yref&&B?R._length*m.sizey:Math.abs(R.l2p(m.sizey)-R.l2p(0)):m.sizey*J.h;var z,$,G=D*g[m.xanchor].offset,H=S*h[m.yanchor].offset,X=g[m.xanchor].sizing+h[m.yanchor].sizing;switch(z=void 0!==P?"string"==typeof m.xref&&F?P._length*m.x+P._offset:P.r2p(m.x)+P._offset:m.x*J.w+J.l,z+=G,$=void 0!==R?"string"==typeof m.yref&&B?R._length*(1-m.y)+R._offset:R.r2p(m.y)+R._offset:J.h-m.y*J.h+J.t,$+=H,m.sizing){case"fill":X+=" slice";break;case"stretch":X="none"}O.attr({x:z,y:$,width:D,height:S,preserveAspectRatio:X,opacity:m.opacity});var K=(P&&"domain"!==f.getRefType(m.xref)?P._id:"")+(R&&"domain"!==f.getRefType(m.yref)?R._id:"");C.setClipUrl(O,K?"clip"+s._uid+K:null,v)}var p=s._imageLowerLayer.selectAll("image").data(l),_=s._imageUpperLayer.selectAll("image").data(a);p.enter().append("image"),_.enter().append("image"),p.exit().remove(),_.exit().remove(),p.each(function(m){w.bind(this)(m),y.bind(this)(m)}),_.each(function(m){w.bind(this)(m),y.bind(this)(m)});var x=Object.keys(s._plots);for(i=0;i<x.length;i++){var b=s._plots[c=x[i]];if(b.imagelayer){var M=b.imagelayer.selectAll("image").data(o[c]||[]);M.enter().append("image"),M.exit().remove(),M.each(function(m){w.bind(this)(m),y.bind(this)(m)})}}}},68804:function(se,U,r){"use strict";se.exports={moduleType:"component",name:"images",layoutAttributes:r(69819),supplyLayoutDefaults:r(81603),includeBasePlot:r(76325)("images"),draw:r(80750),convertCoords:r(75378)}},33030:function(se,U,r){"use strict";var I=r(41940),C=r(22399);se.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:I({editType:"legend"}),grouptitlefont:I({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:I({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function(se){"use strict";se.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(44467),k=r(9012),T=r(33030),v=r(10820),c=r(10130);function i(s,a,o,l){var u=a[s]||{},d=f.newContainer(o,s);function g($,G){return C.coerce(u,d,T,$,G)}var h=C.coerceFont(g,"font",o.font);if(g("bgcolor",o.paper_bgcolor),g("bordercolor"),g("visible")){for(var w,y=function($,G){return C.coerce(w._input,w,k,$,G)},p=o.font||{},_=C.coerceFont(g,"grouptitlefont",C.extendFlat({},p,{size:Math.round(1.1*p.size)})),x=0,b=!1,M="normal",m=0;m<l.length;m++)(w=l[m]).visible&&((w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&!1===w._module.attributes.showlegend.dflt))&&(x++,w.showlegend&&(b=!0,(I.traceIs(w,"pie-like")||!0===w._input.showlegend)&&x++),C.coerceFont(y,"legendgrouptitle.font",_)),(I.traceIs(w,"bar")&&"stack"===o.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))&&(M=c.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),void 0!==w.legendgroup&&""!==w.legendgroup&&(M=c.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var D=C.coerce(a,o,v,"showlegend",b&&x>1);if(!1===D&&(o.legend=void 0),(!1!==D||u.uirevision)&&(g("uirevision",o.uirevision),!1!==D)){g("borderwidth");var S,O,P,R="h"===g("orientation"),F="paper"===g("yref"),B="paper"===g("xref"),J="left";if(R?(S=0,I.getComponentMethod("rangeslider","isVisible")(a.xaxis)?F?(O=1.1,P="bottom"):(O=1,P="top"):F?(O=-.1,P="top"):(O=0,P="bottom")):(O=1,P="auto",B?S=1.02:(S=1,J="right")),C.coerce(u,d,{x:{valType:"number",editType:"legend",min:B?-2:0,max:B?3:1,dflt:S}},"x"),C.coerce(u,d,{y:{valType:"number",editType:"legend",min:F?-2:0,max:F?3:1,dflt:O}},"y"),g("traceorder",M),c.isGrouped(o.legend)&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("xanchor",J),g("yanchor",P),g("valign"),C.noneOrAll(u,d,["x","y"]),g("title.text")){g("title.side",R?"left":"top");var z=C.extendFlat({},h,{size:C.bigFont(h.size)});C.coerceFont(g,"title.font",z)}}}}se.exports=function(s,a,o){var l,u=["legend"];for(l=0;l<o.length;l++)C.pushUnique(u,o[l].legend);for(a._legends=[],l=0;l<u.length;l++){var d=u[l];i(d,s,a,o),a[d]&&a[d].visible&&(a[d]._id=d),a._legends.push(d)}}},43969:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(74875),k=r(73972),T=r(11086),v=r(28569),c=r(91424),i=r(7901),s=r(63893),a=r(85167),o=r(14928),l=r(18783),u=l.LINE_SPACING,d=l.FROM_TL,g=l.FROM_BR,h=r(82424),w=r(53630),y=r(10130),p=1,_=/^legend[0-9]*$/;function x(B,J){var z,$,G=J||{},H=B._fullLayout,X=F(G),K=G._inHover;if(K?($=G.layer,z="hover"):($=H._infolayer,z=X),$){var ue;if(z+=H._uid,B._legendMouseDownTime||(B._legendMouseDownTime=0),K){if(!G.entries)return;ue=h(G.entries,G)}else{if(!B.calcdata)return;ue=H.showlegend&&h(B.calcdata,G,H._legends.length>1)}var ae=H.hiddenlabels||[];if(!(K||H.showlegend&&ue.length))return $.selectAll("."+X).remove(),H._topdefs.select("#"+z).remove(),f.autoMargin(B,X);var ne=C.ensureSingle($,"g",X,function(Re){K||Re.attr("pointer-events","all")}),Q=C.ensureSingleById(H._topdefs,"clipPath",z,function(Re){Re.append("rect")}),ie=C.ensureSingle(ne,"rect","bg",function(Re){Re.attr("shape-rendering","crispEdges")});ie.call(i.stroke,G.bordercolor).call(i.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var le=C.ensureSingle(ne,"g","scrollbox"),fe=G.title;if(G._titleWidth=0,G._titleHeight=0,fe.text){var he=C.ensureSingle(le,"text",X+"titletext");he.attr("text-anchor","start").call(c.font,fe.font).text(fe.text),O(he,le,B,G,p)}else le.selectAll("."+X+"titletext").remove();var pe=C.ensureSingle(ne,"rect","scrollbar",function(Re){Re.attr(o.scrollBarEnterAttrs).call(i.fill,o.scrollBarColor)}),xe=le.selectAll("g.groups").data(ue);xe.enter().append("g").attr("class","groups"),xe.exit().remove();var Ee=xe.selectAll("g.traces").data(C.identity);Ee.enter().append("g").attr("class","traces"),Ee.exit().remove(),Ee.style("opacity",function(Re){var ke=Re[0].trace;return k.traceIs(ke,"pie-like")?-1!==ae.indexOf(Re[0].label)?.5:1:"legendonly"===ke.visible?.5:1}).each(function(){I.select(this).call(m,B,G)}).call(w,B,G).each(function(){K||I.select(this).call(S,B,X)}),C.syncOrAsync([f.previousPromises,function(){return function(Re,ke,Te,we){var je=Re._fullLayout,Ce=F(we);we||(we=je[Ce]);var Ie=je._size,ge=y.isVertical(we),me=y.isGrouped(we),ce="fraction"===we.entrywidthmode,Ae=we.borderwidth,Ne=2*Ae,De=o.itemGap,qe=we.itemwidth+2*De,Ke=2*(Ae+De),be=R(we),Oe=we.y<0||0===we.y&&"top"===be,Le=we.y>1||1===we.y&&"bottom"===be,Ue=we.tracegroupgap,Ze={};we._maxHeight=Math.max(Oe||Le?je.height/2:Ie.h,30);var We=0;we._width=0,we._height=0;var He,Ge,dt,ht,et=(Ge=0,dt=0,(ht=(He=we).title.side)&&(-1!==ht.indexOf("left")&&(Ge=He._titleWidth),-1!==ht.indexOf("top")&&(dt=He._titleHeight)),[Ge,dt]);if(ge)Te.each(function(He){var Ge=He[0].height;c.setTranslate(this,Ae+et[0],Ae+et[1]+we._height+Ge/2+De),we._height+=Ge,we._width=Math.max(we._width,He[0].width)}),We=qe+we._width,we._width+=De+qe+Ne,we._height+=Ke,me&&(ke.each(function(He,Ge){c.setTranslate(this,0,Ge*we.tracegroupgap)}),we._height+=(we._lgroupsLength-1)*we.tracegroupgap);else{var nt=P(we),ut=Le||Oe,Ct=je.width/2;we._maxWidth=Math.max(we.x<0||0===we.x&&"right"===nt?ut&&"left"===nt?Ie.l+Ie.w:Ct:we.x>1||1===we.x&&"left"===nt?ut&&"right"===nt?Ie.r+Ie.w:Ct:Ie.w,2*qe);var Dt=0,vt=0;Te.each(function(He){var Ge=b(He,we,qe);Dt=Math.max(Dt,Ge),vt+=Ge}),We=null;var mt=0;if(me){var Lt=0,Ft=0,Rt=0;ke.each(function(){var He=0,Ge=0;I.select(this).selectAll("g.traces").each(function(ht){var kt=b(ht,we,qe),St=ht[0].height;c.setTranslate(this,et[0],et[1]+Ae+De+St/2+Ge),Ge+=St,He=Math.max(He,kt),Ze[ht[0].trace.legendgroup]=He});var dt=He+De;Ft>0&&dt+Ae+Ft>we._maxWidth?(mt=Math.max(mt,Ft),Ft=0,Rt+=Lt+Ue,Lt=Ge):Lt=Math.max(Lt,Ge),c.setTranslate(this,Ft,Rt),Ft+=dt}),we._width=Math.max(mt,Ft)+Ae,we._height=Rt+Lt+Ke}else{var Wt=Te.size(),Ht=vt+Ne+(Wt-1)*De<we._maxWidth,it=0,st=0,Je=0,ot=0;Te.each(function(He){var Ge=He[0].height,dt=b(He,we,qe),ht=Ht?dt:Dt;ce||(ht+=De),ht+Ae+st-De>=we._maxWidth&&(mt=Math.max(mt,ot),st=0,Je+=it,we._height+=it,it=0),c.setTranslate(this,et[0]+Ae+st,et[1]+Ae+Je+Ge/2+De),ot=st+dt+De,st+=ht,it=Math.max(it,Ge)}),Ht?(we._width=st+Ne,we._height=it+Ke):(we._width=Math.max(mt,ot)+Ne,we._height+=it+Ke)}}we._width=Math.ceil(Math.max(we._width+et[0],we._titleWidth+2*(Ae+o.titlePad))),we._height=Math.ceil(Math.max(we._height+et[1],we._titleHeight+2*(Ae+o.itemGap))),we._effHeight=Math.min(we._height,we._maxHeight);var pt=Re._context.edits,xt=pt.legendText||pt.legendPosition;Te.each(function(He){var Ge=I.select(this).select("."+Ce+"toggle"),dt=He[0].height,ht=He[0].trace.legendgroup,kt=b(He,we,qe);me&&""!==ht&&(kt=Ze[ht]);var St=xt?qe:We||kt;ge||ce||(St+=De/2),c.setRect(Ge,0,-dt/2,St,dt)})}(B,xe,Ee,G)},function(){var Re,ke,Te,we,je=H._size,Ce=G.borderwidth,Ie="paper"===G.xref,ge="paper"===G.yref;if(!K){var me,ce;if(me=Ie?je.l+je.w*G.x-d[P(G)]*G._width:H.width*G.x-d[P(G)]*G._width,ce=ge?je.t+je.h*(1-G.y)-d[R(G)]*G._effHeight:H.height*(1-G.y)-d[R(G)]*G._effHeight,function(ut,Ct,Dt,vt){var mt=ut._fullLayout,Lt=mt[Ct],Ft=P(Lt),Rt=R(Lt),Wt="paper"===Lt.xref,Ht="paper"===Lt.yref;ut._fullLayout._reservedMargin[Ct]={};var it=Lt.y<.5?"b":"t",st=Lt.x<.5?"l":"r",Je={r:mt.width-Dt,l:Dt+Lt._width,b:mt.height-vt,t:vt+Lt._effHeight};if(Wt&&Ht)return f.autoMargin(ut,Ct,{x:Lt.x,y:Lt.y,l:Lt._width*d[Ft],r:Lt._width*g[Ft],b:Lt._effHeight*g[Rt],t:Lt._effHeight*d[Rt]});Wt?ut._fullLayout._reservedMargin[Ct][it]=Je[it]:Ht||"v"===Lt.orientation?ut._fullLayout._reservedMargin[Ct][st]=Je[st]:ut._fullLayout._reservedMargin[Ct][it]=Je[it]}(B,X,me,ce))return;if(H.margin.autoexpand){var Ne=me,De=ce;me=Ie?C.constrain(me,0,H.width-G._width):Ne,ce=ge?C.constrain(ce,0,H.height-G._effHeight):De,me!==Ne&&C.log("Constrain "+X+".x to make legend fit inside graph"),ce!==De&&C.log("Constrain "+X+".y to make legend fit inside graph")}c.setTranslate(ne,me,ce)}if(pe.on(".drag",null),ne.on("wheel",null),K||G._height<=G._maxHeight||B._context.staticPlot){var qe=G._effHeight;K&&(qe=G._height),ie.attr({width:G._width-Ce,height:qe-Ce,x:Ce/2,y:Ce/2}),c.setTranslate(le,0,0),Q.select("rect").attr({width:G._width-2*Ce,height:qe-2*Ce,x:Ce,y:Ce}),c.setClipUrl(le,z,B),c.setRect(pe,0,0,0,0),delete G._scrollY}else{var Ke,Oe,Le=Math.max(o.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),Ue=G._effHeight-Le-2*o.scrollBarMargin,Ze=G._height-G._effHeight,We=Ue/Ze,et=Math.min(G._scrollY||0,Ze);ie.attr({width:G._width-2*Ce+o.scrollBarWidth+o.scrollBarMargin,height:G._effHeight-Ce,x:Ce/2,y:Ce/2}),Q.select("rect").attr({width:G._width-2*Ce+o.scrollBarWidth+o.scrollBarMargin,height:G._effHeight-2*Ce,x:Ce,y:Ce+et}),c.setClipUrl(le,z,B),yt(et,Le,We),ne.on("wheel",function(){yt(et=C.constrain(G._scrollY+I.event.deltaY/Ue*Ze,0,Ze),Le,We),0!==et&&et!==Ze&&I.event.preventDefault()});var nt=I.behavior.drag().on("dragstart",function(){var ut=I.event.sourceEvent;Ke="touchstart"===ut.type?ut.changedTouches[0].clientY:ut.clientY,Oe=et}).on("drag",function(){var ut=I.event.sourceEvent;2===ut.buttons||ut.ctrlKey||yt(et=C.constrain((("touchmove"===ut.type?ut.changedTouches[0].clientY:ut.clientY)-Ke)/We+Oe,0,Ze),Le,We)});pe.call(nt);var ct=I.behavior.drag().on("dragstart",function(){var ut=I.event.sourceEvent;"touchstart"===ut.type&&(Ke=ut.changedTouches[0].clientY,Oe=et)}).on("drag",function(){var ut=I.event.sourceEvent;"touchmove"===ut.type&&yt(et=C.constrain((Ke-ut.changedTouches[0].clientY)/We+Oe,0,Ze),Le,We)});le.call(ct)}function yt(ut,Ct,Dt){G._scrollY=B._fullLayout[X]._scrollY=ut,c.setTranslate(le,0,-ut),c.setRect(pe,G._width,o.scrollBarMargin+ut*Dt,o.scrollBarWidth,Ct),Q.select("rect").attr("y",Ce+ut)}B._context.edits.legendPosition&&(ne.classed("cursor-move",!0),v.init({element:ne.node(),gd:B,prepFn:function(){var ut=c.getTranslate(ne);Te=ut.x,we=ut.y},moveFn:function(ut,Ct){var Dt=Te+ut,vt=we+Ct;c.setTranslate(ne,Dt,vt),Re=v.align(Dt,G._width,je.l,je.l+je.w,G.xanchor),ke=v.align(vt+G._height,-G._height,je.t+je.h,je.t,G.yanchor)},doneFn:function(){if(void 0!==Re&&void 0!==ke){var ut={};ut[X+".x"]=Re,ut[X+".y"]=ke,k.call("_guiRelayout",B,ut)}},clickFn:function(ut,Ct){var Dt=$.selectAll("g.traces").filter(function(){var vt=this.getBoundingClientRect();return Ct.clientX>=vt.left&&Ct.clientX<=vt.right&&Ct.clientY>=vt.top&&Ct.clientY<=vt.bottom});Dt.size()>0&&M(B,ne,Dt,ut,Ct)}}))}],B)}}function b(B,J,z){var $=B[0],X=$.trace.legendwidth||J.entrywidth;return"fraction"===J.entrywidthmode?J._maxWidth*X:z+(X||$.width)}function M(B,J,z,$,G){var H=z.data()[0][0].trace,X={event:G,node:z.node(),curveNumber:H.index,expandedIndex:H._expandedIndex,data:B.data,layout:B.layout,frames:B._transitionData._frames,config:B._context,fullData:B._fullData,fullLayout:B._fullLayout};H._group&&(X.group=H._group),k.traceIs(H,"pie-like")&&(X.label=z.datum()[0].label),!1!==T.triggerHandler(B,"plotly_legendclick",X)&&(1===$?J._clickTimeout=setTimeout(function(){B._fullLayout&&a(z,B,$)},B._context.doubleClickDelay):2===$&&(J._clickTimeout&&clearTimeout(J._clickTimeout),B._legendMouseDownTime=0,!1!==T.triggerHandler(B,"plotly_legenddoubleclick",X)&&a(z,B,$)))}function m(B,J,z){var $,G,H=F(z),X=B.data()[0][0],K=X.trace,ue=k.traceIs(K,"pie-like"),ae=!z._inHover&&J._context.edits.legendText&&!ue,ne=z._maxNameLength;X.groupTitle?($=X.groupTitle.text,G=X.groupTitle.font):(G=z.font,z.entries?$=X.text:($=ue?X.label:K.name,K._meta&&($=C.templateString($,K._meta))));var Q=C.ensureSingle(B,"text",H+"text");Q.attr("text-anchor","start").call(c.font,G).text(ae?D($,ne):$),s.positionText(Q,z.itemwidth+2*o.itemGap,0),ae?Q.call(s.makeEditable,{gd:J,text:$}).call(O,B,J,z).on("edit",function(le){this.text(D(le,ne)).call(O,B,J,z);var fe=X.trace._fullInput||{},he={};if(k.hasTransform(fe,"groupby")){var pe=k.getTransformIndices(fe,"groupby"),Ee=C.keyedContainer(fe,"transforms["+pe[pe.length-1]+"].styles","target","value.name");Ee.set(X.trace._group,le),he=Ee.constructUpdate()}else he.name=le;return k.call("_guiRestyle",J,he,K.index)}):O(Q,B,J,z)}function D(B,J){var z=Math.max(4,J);if(B&&B.trim().length>=z/2)return B;for(var $=z-(B=B||"").length;$>0;$--)B+=" ";return B}function S(B,J,z){var $,G=J._context.doubleClickDelay,H=1,X=C.ensureSingle(B,"rect",z+"toggle",function(K){J._context.staticPlot||K.style("cursor","pointer").attr("pointer-events","all"),K.call(i.fill,"rgba(0,0,0,0)")});J._context.staticPlot||(X.on("mousedown",function(){($=(new Date).getTime())-J._legendMouseDownTime<G?H+=1:(H=1,J._legendMouseDownTime=$)}),X.on("mouseup",function(){if(!J._dragged&&!J._editing){var K=J._fullLayout[z];(new Date).getTime()-J._legendMouseDownTime>G&&(H=Math.max(H-1,1)),M(J,K,B,H,I.event)}}))}function O(B,J,z,$,G){$._inHover&&B.attr("data-notex",!0),s.convertToTspans(B,z,function(){!function(H,X,K,ue){var ae=H.data()[0][0];if(K._inHover||!ae||ae.trace.showlegend){var ne=H.select("g[class*=math-group]"),Q=ne.node(),ie=F(K);K||(K=X._fullLayout[ie]);var le,fe,he=K.borderwidth,pe=(ue===p?K.title.font:ae.groupTitle?ae.groupTitle.font:K.font).size*u;if(Q){var xe=c.bBox(Q);le=xe.height,fe=xe.width,ue===p?c.setTranslate(ne,he,he+.75*le):c.setTranslate(ne,0,.25*le)}else{var Re=H.select("."+ie+(ue===p?"title":"")+"text"),ke=s.lineCount(Re),Te=Re.node();if(le=pe*ke,fe=Te?c.bBox(Te).width:0,ue===p)"left"===K.title.side&&(fe+=2*o.itemGap),s.positionText(Re,he+o.titlePad,he+pe);else{var we=2*o.itemGap+K.itemwidth;ae.groupTitle&&(we=o.itemGap,fe-=K.itemwidth),s.positionText(Re,we,-pe*((ke-1)/2-.3))}}ue===p?(K._titleWidth=fe,K._titleHeight=le):(ae.lineHeight=pe,ae.height=Math.max(le,16)+3,ae.width=fe)}else H.remove()}(J,z,$,G)})}function P(B){return C.isRightAnchor(B)?"right":C.isCenterAnchor(B)?"center":"left"}function R(B){return C.isBottomAnchor(B)?"bottom":C.isMiddleAnchor(B)?"middle":"top"}function F(B){return B._id||"legend"}se.exports=function(B,J){if(J)x(B,J);else{var z=B._fullLayout,$=z._legends;z._infolayer.selectAll('[class^="legend"]').each(function(){var X=I.select(this),K=X.attr("class").split(" ")[0];K.match(_)&&-1===$.indexOf(K)&&X.remove()});for(var G=0;G<$.length;G++)x(B,B._fullLayout[$[G]])}}},82424:function(se,U,r){"use strict";var I=r(73972),C=r(10130);se.exports=function(f,k,T){var v,c,i=k._inHover,s=C.isGrouped(k),a=C.isReversed(k),o={},l=[],u=!1,d={},g=0,h=0;function w($,G,H){if(!1!==k.visible&&(!T||$===k._id))if(""!==G&&C.isGrouped(k))-1===l.indexOf(G)?(l.push(G),u=!0,o[G]=[H]):o[G].push(H);else{var X="~~i"+g;l.push(X),o[X]=[H],g++}}for(v=0;v<f.length;v++){var y=f[v],p=y[0],_=p.trace,x=_.legend,b=_.legendgroup;if(i||_.visible&&_.showlegend)if(I.traceIs(_,"pie-like"))for(d[b]||(d[b]={}),c=0;c<y.length;c++){var M=y[c].label;d[b][M]||(w(x,b,{label:M,color:y[c].color,i:y[c].i,trace:_,pts:y[c].pts}),d[b][M]=!0,h=Math.max(h,(M||"").length))}else w(x,b,p),h=Math.max(h,(_.name||"").length)}if(!l.length)return[];var m=!u||!s,D=[];for(v=0;v<l.length;v++){var S=o[l[v]];D.push(m?S[0]:S)}for(m&&(D=[D]),v=0;v<D.length;v++){var O=1/0;for(c=0;c<D[v].length;c++){var P=D[v][c].trace.legendrank;O>P&&(O=P)}D[v][0]._groupMinRank=O,D[v][0]._preGroupSort=v}var R=function($,G){return $.trace.legendrank-G.trace.legendrank||$._preSort-G._preSort};for(D.forEach(function($,G){$[0]._preGroupSort=G}),D.sort(function($,G){return $[0]._groupMinRank-G[0]._groupMinRank||$[0]._preGroupSort-G[0]._preGroupSort}),v=0;v<D.length;v++){D[v].forEach(function($,G){$._preSort=G}),D[v].sort(R);var F=D[v][0].trace,B=null;for(c=0;c<D[v].length;c++){var J=D[v][c].trace.legendgrouptitle;if(J&&J.text){B=J,i&&(J.font=k._groupTitleFont);break}}if(a&&D[v].reverse(),B){var z=!1;for(c=0;c<D[v].length;c++)if(I.traceIs(D[v][c].trace,"pie-like")){z=!0;break}D[v].unshift({i:-1,groupTitle:B,noClick:z,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:"toggleitem"===k.groupclick||F.visible}})}for(c=0;c<D[v].length;c++)D[v][c]=[D[v][c]]}return k._lgroupsLength=D.length,k._maxNameLength=h,D}},85167:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=!0;se.exports=function(k,T,v){var c=T._fullLayout;if(!T._dragged&&!T._editing){var i,s=c.legend.itemclick,a=c.legend.itemdoubleclick,o=c.legend.groupclick;if(1===v&&"toggle"===s&&"toggleothers"===a&&f&&T.data&&T._context.showTips&&I.notifier(I._(T,"Double-click on legend to isolate one trace"),"long"),f=!1,1===v?i=s:2===v&&(i=a),i){var l="togglegroup"===o,u=c.hiddenlabels?c.hiddenlabels.slice():[],d=k.data()[0][0];if(!d.groupTitle||!d.noClick){var g,h,w,y,p,_=T._fullData,x=d.trace,b=x.legendgroup,M={},m=[],D=[],S=[];if(C.traceIs(x,"pie-like")){var O=d.label,P=u.indexOf(O);"toggle"===i?-1===P?u.push(O):u.splice(P,1):"toggleothers"===i&&(u=[],T.calcdata[0].forEach(function(Q){O!==Q.label&&u.push(Q.label)}),T._fullLayout.hiddenlabels&&T._fullLayout.hiddenlabels.length===u.length&&-1===P&&(u=[])),C.call("_guiRelayout",T,"hiddenlabels",u)}else{var R,F=b&&b.length,B=[];if(F)for(g=0;g<_.length;g++)(R=_[g]).visible&&R.legendgroup===b&&B.push(g);if("toggle"===i){var J;switch(x.visible){case!0:J="legendonly";break;case!1:J=!1;break;case"legendonly":J=!0}if(F)if(l)for(g=0;g<_.length;g++)!1!==_[g].visible&&_[g].legendgroup===b&&ne(_[g],J);else ne(x,J);else ne(x,J)}else if("toggleothers"===i){var G,X=!0;for(g=0;g<_.length;g++)if(G=!0!==_[g].showlegend,!(_[g]===x||G||F&&_[g].legendgroup===b||!0!==_[g].visible||C.traceIs(_[g],"notLegendIsolatable"))){X=!1;break}for(g=0;g<_.length;g++)if(!1!==_[g].visible&&!C.traceIs(_[g],"notLegendIsolatable"))switch(x.visible){case"legendonly":ne(_[g],!0);break;case!0:G=!0!==_[g].showlegend&&!_[g].legendgroup,ne(_[g],!!(_[g]===x||F&&_[g].legendgroup===b||G)||!!X||"legendonly")}}for(g=0;g<D.length;g++)if(w=D[g]){var K=w.constructUpdate(),ue=Object.keys(K);for(h=0;h<ue.length;h++)(M[y=ue[h]]=M[y]||[])[S[g]]=K[y]}for(p=Object.keys(M),g=0;g<p.length;g++)for(y=p[g],h=0;h<m.length;h++)M[y].hasOwnProperty(h)||(M[y][h]=void 0);C.call("_guiRestyle",T,M,m)}}}}function ae(Q,ie,le){var fe=m.indexOf(Q),he=M[ie];return he||(he=M[ie]=[]),-1===m.indexOf(Q)&&(m.push(Q),fe=m.length-1),he[fe]=le,fe}function ne(Q,ie){if(!d.groupTitle||l){var le=Q._fullInput;if(C.hasTransform(le,"groupby")){var fe=D[le.index];if(!fe){var he=C.getTransformIndices(le,"groupby");fe=I.keyedContainer(le,"transforms["+he[he.length-1]+"].styles","target","value.visible"),D[le.index]=fe}var xe=fe.get(Q._group);void 0===xe&&(xe=!0),!1!==xe&&fe.set(Q._group,ie),S[le.index]=ae(le.index,"visible",!1!==le.visible)}else ae(le.index,"visible",!1!==le.visible&&ie)}}}},10130:function(se,U){"use strict";U.isGrouped=function(r){return-1!==(r.traceorder||"").indexOf("grouped")},U.isVertical=function(r){return"h"!==r.orientation},U.isReversed=function(r){return-1!==(r.traceorder||"").indexOf("reversed")}},2199:function(se,U,r){"use strict";se.exports={moduleType:"component",name:"legend",layoutAttributes:r(33030),supplyLayoutDefaults:r(99017),draw:r(43969),style:r(53630)}},53630:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(71828),k=f.strTranslate,T=r(91424),v=r(7901),c=r(52075).extractOpts,i=r(34098),s=r(63463),a=r(53581).castOption,o=r(14928);function l(g,h){return(h?"radial":"horizontal")+(g?"":"reversed")}function u(g){var h=g[0].trace,w=h.contours,y=i.hasLines(h),p=i.hasMarkers(h),_=h.visible&&h.fill&&"none"!==h.fill,x=!1,b=!1;if(w){var M=w.coloring;"lines"===M?x=!0:y="none"===M||"heatmap"===M||w.showlines,"constraint"===w.type?_="="!==w._operation:"fill"!==M&&"heatmap"!==M||(b=!0)}return{showMarker:p,showLine:y,showFill:_,showGradientLine:x,showGradientFill:b,anyLine:y||x,anyFill:_||b}}function d(g,h,w){return g&&f.isArrayOrTypedArray(g)?h:g>w?w:g}se.exports=function(g,h,w){w||(w=h._fullLayout.legend);var p="constant"===w.itemsizing,_=w.itemwidth,b=k((_+2*o.itemGap)/2,0),M=function(S,O,P,R){var F;if(S+1)F=S;else{if(!(O&&O.width>0))return 0;F=O.width}return p?R:Math.min(F,P)};function m(S,O,P){var R=S[0].trace,F=R.marker||{},B=F.line||{},J=P?R.visible&&R.type===P:C.traceIs(R,"bar"),z=I.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(J?[S]:[]);z.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),z.exit().remove(),z.each(function($){var G=I.select(this),H=$[0],X=M(H.mlw,F.line,5,2);G.style("stroke-width",X+"px");var K=H.mcc;if(!w._inHover&&"mc"in H){var ue=c(F),ae=ue.mid;void 0===ae&&(ae=(ue.max+ue.min)/2),K=T.tryColorscale(F,"")(ae)}var ne=K||H.mc||F.color,Q=F.pattern,ie=Q&&T.getPatternAttr(Q.shape,0,"");if(ie){var le=T.getPatternAttr(Q.bgcolor,0,null),fe=T.getPatternAttr(Q.fgcolor,0,null),he=Q.fgopacity,pe=d(Q.size,8,10),xe=d(Q.solidity,.5,1);G.call(T.pattern,"legend",h,"legend-"+R.uid,ie,pe,xe,K,Q.fillmode,le,fe,he)}else G.call(v.fill,ne);X&&v.stroke(G,H.mlc||B.color)})}function D(S,O,P){var R=S[0],F=R.trace,B=P?F.visible&&F.type===P:C.traceIs(F,P),J=I.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(B?[S]:[]);if(J.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),J.exit().remove(),J.size()){var z=F.marker||{},$=M(a(z.line.width,R.pts),z.line,5,2),G="pieLike",H=f.minExtend(F,{marker:{line:{width:$}}},G),X=f.minExtend(R,{trace:H},G);s(J,X,H,h)}}g.each(function(S){var O=I.select(this),P=f.ensureSingle(O,"g","layers");P.style("opacity",S[0].trace.opacity);var R=w.valign,F=S[0].lineHeight,B=S[0].height;P.attr("transform","middle"!==R&&F&&B?k(0,{top:1,bottom:-1}[R]*(.5*(F-B+3))):null),P.selectAll("g.legendfill").data([S]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([S]).enter().append("g").classed("legendlines",!0);var z=P.selectAll("g.legendsymbols").data([S]);z.enter().append("g").classed("legendsymbols",!0),z.selectAll("g.legendpoints").data([S]).enter().append("g").classed("legendpoints",!0)}).each(function(S){var O,P=S[0].trace,R=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":R=[["M-15,-2V4H15V-2Z"]],O=!0;break;case"choropleth":case"choroplethmapbox":R=[["M-6,-6V6H6V-6Z"]],O=!0;break;case"densitymapbox":R=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],O="radial";break;case"cone":R=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],O=!1;break;case"streamtube":R=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],O=!1;break;case"surface":R=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],O=!0;break;case"mesh3d":R=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!1;break;case"volume":R=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!0;break;case"isosurface":R=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],O=!1}var F=I.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(R);F.enter().append("path").classed("legend3dandfriends",!0).attr("transform",b).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(B,J){var z,$=I.select(this),G=c(P),H=G.colorscale,X=G.reversescale;if(H){if(!O){var K=H.length;z=0===J?H[X?K-1:0][1]:1===J?H[X?0:K-1][1]:H[Math.floor((K-1)/2)][1]}}else{var ue=P.vertexcolor||P.facecolor||P.color;z=f.isArrayOrTypedArray(ue)?ue[J]||ue[0]:ue}$.attr("d",B[0]),z?$.call(v.fill,z):$.call(function(ae){ae.size()&&T.gradient(ae,h,"legendfill-"+P.uid,l(X,"radial"===O),H,"fill")})})}).each(function(S){var O=S[0].trace,P="waterfall"===O.type;if(S[0]._distinct&&P){var R=S[0].trace[S[0].dir].marker;return S[0].mc=R.color,S[0].mlw=R.line.width,S[0].mlc=R.line.color,m(S,this,"waterfall")}var F=[];O.visible&&P&&(F=S[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=I.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(F);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",b).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(J){var z=I.select(this),$=O[J[0]].marker,G=M(void 0,$.line,5,2);z.attr("d",J[1]).style("stroke-width",G+"px").call(v.fill,$.color),G&&z.call(v.stroke,$.line.color)})}).each(function(S){m(S,this,"funnel")}).each(function(S){m(S,this)}).each(function(S){var O=S[0].trace,P=I.select(this).select("g.legendpoints").selectAll("path.legendbox").data(O.visible&&C.traceIs(O,"box-violin")?[S]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",b),P.exit().remove(),P.each(function(){var R=I.select(this);if("all"!==O.boxpoints&&"all"!==O.points||0!==v.opacity(O.fillcolor)||0!==v.opacity((O.line||{}).color)){var F=M(void 0,O.line,5,2);R.style("stroke-width",F+"px").call(v.fill,O.fillcolor),F&&v.stroke(R,O.line.color)}else{var B=f.minExtend(O,{marker:{size:p?12:f.constrain(O.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(T.pointStyle,B,h)}})}).each(function(S){D(S,this,"funnelarea")}).each(function(S){D(S,this,"pie")}).each(function(S){var O,P,R=u(S),F=R.showFill,B=R.showLine,J=R.showGradientLine,z=R.showGradientFill,$=R.anyFill,G=R.anyLine,H=S[0],X=H.trace,K=c(X),ue=K.colorscale,ae=K.reversescale,ne=i.hasMarkers(X)||!$?"M5,0":G?"M5,-2":"M5,-3",Q=I.select(this),ie=Q.select(".legendfill").selectAll("path").data(F||z?[S]:[]);if(ie.enter().append("path").classed("js-fill",!0),ie.exit().remove(),ie.attr("d",ne+"h"+_+"v6h-"+_+"z").call(function(he){he.size()&&(F?T.fillGroupStyle(he,h):T.gradient(he,h,"legendfill-"+X.uid,l(ae),ue,"fill"))}),B||J){var le=M(void 0,X.line,10,5);P=f.minExtend(X,{line:{width:le}}),O=[f.minExtend(H,{trace:P})]}var fe=Q.select(".legendlines").selectAll("path").data(B||J?[O]:[]);fe.enter().append("path").classed("js-line",!0),fe.exit().remove(),fe.attr("d",ne+(J?"l"+_+",0.0001":"h"+_)).call(B?T.lineGroupStyle:function(he){if(he.size()){var pe="legendline-"+X.uid;T.lineGroupStyle(he),T.gradient(he,h,pe,l(ae),ue,"stroke")}})}).each(function(S){var O,P,R=u(S),J=R.showLine,z=R.showMarker,$=S[0],G=$.trace,H=!z&&!R.anyLine&&!R.anyFill&&i.hasText(G);function X(fe,he,pe,xe){var Ee=f.nestedProperty(G,fe).get(),Re=f.isArrayOrTypedArray(Ee)&&he?he(Ee):Ee;if(p&&Re&&void 0!==xe&&(Re=xe),pe){if(Re<pe[0])return pe[0];if(Re>pe[1])return pe[1]}return Re}function K(fe){return $._distinct&&$.index&&fe[$.index]?fe[$.index]:fe[0]}if(z||H||J){var ue={},ae={};if(z){ue.mc=X("marker.color",K),ue.mx=X("marker.symbol",K),ue.mo=X("marker.opacity",f.mean,[.2,1]),ue.mlc=X("marker.line.color",K),ue.mlw=X("marker.line.width",f.mean,[0,5],2),ae.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ne=X("marker.size",f.mean,[2,16],12);ue.ms=ne,ae.marker.size=ne}J&&(ae.line={width:X("line.width",K,[0,10],5)}),H&&(ue.tx="Aa",ue.tp=X("textposition",K),ue.ts=10,ue.tc=X("textfont.color",K),ue.tf=X("textfont.family",K)),O=[f.minExtend($,ue)],(P=f.minExtend(G,ae)).selectedpoints=null,P.texttemplate=null}var Q=I.select(this).select("g.legendpoints"),ie=Q.selectAll("path.scatterpts").data(z?O:[]);ie.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",b),ie.exit().remove(),ie.call(T.pointStyle,P,h),z&&(O[0].mrc=3);var le=Q.selectAll("g.pointtext").data(H?O:[]);le.enter().append("g").classed("pointtext",!0).append("text").attr("transform",b),le.exit().remove(),le.selectAll("text").call(T.textPointStyle,P,h)}).each(function(S){var O=S[0].trace,P=I.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(O.visible&&"candlestick"===O.type?[S,S]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(R,F){return F?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(R,F){var B=I.select(this),J=O[F?"increasing":"decreasing"],z=M(void 0,J.line,5,2);B.style("stroke-width",z+"px").call(v.fill,J.fillcolor),z&&v.stroke(B,J.line.color)})}).each(function(S){var O=S[0].trace,P=I.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(O.visible&&"ohlc"===O.type?[S,S]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(R,F){return F?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",b).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(R,F){var B=I.select(this),J=O[F?"increasing":"decreasing"],z=M(void 0,J.line,5,2);B.style("fill","none").call(T.dashLine,J.line.dash,z),z&&v.stroke(B,J.line.color)})})}},42068:function(se,U,r){"use strict";r(93348),se.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function(se,U,r){"use strict";var I=r(73972),C=r(74875),f=r(41675),k=r(24255),T=r(34031).eraseActiveShape,v=r(71828),c=v._,i=se.exports={};function s(y,p){var _,x,b=p.currentTarget,M=b.getAttribute("data-attr"),m=b.getAttribute("data-val")||!0,D=y._fullLayout,S={},O=f.list(y,null,!0),P=D._cartesianSpikesEnabled;if("zoom"===M){var R,F="in"===m?.5:2,B=(1+F)/2,J=(1-F)/2;for(x=0;x<O.length;x++)if(!(_=O[x]).fixedrange)if(R=_._name,"auto"===m)S[R+".autorange"]=!0;else if("reset"===m){if(void 0===_._rangeInitial)S[R+".autorange"]=!0;else{var z=_._rangeInitial.slice();S[R+".range[0]"]=z[0],S[R+".range[1]"]=z[1]}void 0!==_._showSpikeInitial&&(S[R+".showspikes"]=_._showSpikeInitial,"on"!==P||_._showSpikeInitial||(P="off"))}else{var $=[_.r2l(_.range[0]),_.r2l(_.range[1])],G=[B*$[0]+J*$[1],B*$[1]+J*$[0]];S[R+".range[0]"]=_.l2r(G[0]),S[R+".range[1]"]=_.l2r(G[1])}}else"hovermode"!==M||"x"!==m&&"y"!==m||b.setAttribute("data-val",m=D._isHoriz?"y":"x"),S[M]=m;D._cartesianSpikesEnabled=P,I.call("_guiRelayout",y,S)}function a(y,p){for(var _=p.currentTarget,x=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,M=y._fullLayout._subplots.gl3d||[],m={},D=x.split("."),S=0;S<M.length;S++)m[M[S]+"."+D[1]]=b;m.dragmode="pan"===b?b:"zoom",I.call("_guiRelayout",y,m)}function o(y,p){for(var _=p.currentTarget.getAttribute("data-attr"),x="resetLastSave"===_,b="resetDefault"===_,M=y._fullLayout,m=M._subplots.gl3d||[],D={},S=0;S<m.length;S++){var O,P=m[S],R=P+".camera",F=P+".aspectratio",B=P+".aspectmode",J=M[P]._scene;x?(D[R+".up"]=J.viewInitial.up,D[R+".eye"]=J.viewInitial.eye,D[R+".center"]=J.viewInitial.center,O=!0):b&&(D[R+".up"]=null,D[R+".eye"]=null,D[R+".center"]=null,O=!0),O&&(D[F+".x"]=J.viewInitial.aspectratio.x,D[F+".y"]=J.viewInitial.aspectratio.y,D[F+".z"]=J.viewInitial.aspectratio.z,D[B]=J.viewInitial.aspectmode)}I.call("_guiRelayout",y,D)}function l(y,p){var _=p.currentTarget,x=_._previousVal,b=y._fullLayout,M=b._subplots.gl3d||[],m=["xaxis","yaxis","zaxis"],D={},S={};if(x)S=x,_._previousVal=null;else{for(var O=0;O<M.length;O++){var P=M[O],R=b[P],F=P+".hovermode";D[F]=R.hovermode,S[F]=!1;for(var B=0;B<3;B++){var J=m[B],z=P+"."+J+".showspikes";S[z]=!1,D[z]=R[J].showspikes}}_._previousVal=D}return S}function u(y,p){for(var _=p.currentTarget,x=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,M=y._fullLayout,m=M._subplots.geo||[],D=0;D<m.length;D++){var S=m[D];if("zoom"===x){var P=M[S].projection.scale;I.call("_guiRelayout",y,S+".projection.scale","in"===b?2*P:.5*P)}}"reset"===x&&w(y,"geo")}function d(y){var p=y._fullLayout;return!p.hovermode&&(p._has("cartesian")?p._isHoriz?"y":"x":"closest")}function g(y){var p=d(y);I.call("_guiRelayout",y,"hovermode",p)}function h(y,p){for(var _=p.currentTarget.getAttribute("data-val"),x=y._fullLayout,b=x._subplots.mapbox||[],M={},m=0;m<b.length;m++){var D=b[m],S=x[D].zoom;M[D+".zoom"]="in"===_?1.05*S:S/1.05}I.call("_guiRelayout",y,M)}function w(y,p){for(var _=y._fullLayout,x=_._subplots[p]||[],b={},M=0;M<x.length;M++)for(var m=x[M],D=_[m]._subplot.viewInitial,S=Object.keys(D),O=0;O<S.length;O++){var P=S[O];b[m+"."+P]=D[P]}I.call("_guiRelayout",y,b)}i.toImage={name:"toImage",title:function(y){return c(y,"png"===((y._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:k.camera,click:function(y){var p=y._context.toImageButtonOptions,_={format:p.format||"png"};v.notifier(c(y,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==_.format&&v.isIE()&&(v.notifier(c(y,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(x){x in p&&(_[x]=p[x])}),I.call("downloadImage",y,_).then(function(x){v.notifier(c(y,"Snapshot succeeded")+" - "+x,"long")}).catch(function(){v.notifier(c(y,"Sorry, there was a problem downloading your snapshot!"),"long")})}},i.sendDataToCloud={name:"sendDataToCloud",title:function(y){return c(y,"Edit in Chart Studio")},icon:k.disk,click:function(y){C.sendDataToCloud(y)}},i.editInChartStudio={name:"editInChartStudio",title:function(y){return c(y,"Edit in Chart Studio")},icon:k.pencil,click:function(y){C.sendDataToCloud(y)}},i.zoom2d={name:"zoom2d",_cat:"zoom",title:function(y){return c(y,"Zoom")},attr:"dragmode",val:"zoom",icon:k.zoombox,click:s},i.pan2d={name:"pan2d",_cat:"pan",title:function(y){return c(y,"Pan")},attr:"dragmode",val:"pan",icon:k.pan,click:s},i.select2d={name:"select2d",_cat:"select",title:function(y){return c(y,"Box Select")},attr:"dragmode",val:"select",icon:k.selectbox,click:s},i.lasso2d={name:"lasso2d",_cat:"lasso",title:function(y){return c(y,"Lasso Select")},attr:"dragmode",val:"lasso",icon:k.lasso,click:s},i.drawclosedpath={name:"drawclosedpath",title:function(y){return c(y,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:k.drawclosedpath,click:s},i.drawopenpath={name:"drawopenpath",title:function(y){return c(y,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:k.drawopenpath,click:s},i.drawline={name:"drawline",title:function(y){return c(y,"Draw line")},attr:"dragmode",val:"drawline",icon:k.drawline,click:s},i.drawrect={name:"drawrect",title:function(y){return c(y,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:k.drawrect,click:s},i.drawcircle={name:"drawcircle",title:function(y){return c(y,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:k.drawcircle,click:s},i.eraseshape={name:"eraseshape",title:function(y){return c(y,"Erase active shape")},icon:k.eraseshape,click:T},i.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(y){return c(y,"Zoom in")},attr:"zoom",val:"in",icon:k.zoom_plus,click:s},i.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(y){return c(y,"Zoom out")},attr:"zoom",val:"out",icon:k.zoom_minus,click:s},i.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(y){return c(y,"Autoscale")},attr:"zoom",val:"auto",icon:k.autoscale,click:s},i.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(y){return c(y,"Reset axes")},attr:"zoom",val:"reset",icon:k.home,click:s},i.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(y){return c(y,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:k.tooltip_basic,gravity:"ne",click:s},i.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(y){return c(y,"Compare data on hover")},attr:"hovermode",val:function(y){return y._fullLayout._isHoriz?"y":"x"},icon:k.tooltip_compare,gravity:"ne",click:s},i.zoom3d={name:"zoom3d",_cat:"zoom",title:function(y){return c(y,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:k.zoombox,click:a},i.pan3d={name:"pan3d",_cat:"pan",title:function(y){return c(y,"Pan")},attr:"scene.dragmode",val:"pan",icon:k.pan,click:a},i.orbitRotation={name:"orbitRotation",title:function(y){return c(y,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:k["3d_rotate"],click:a},i.tableRotation={name:"tableRotation",title:function(y){return c(y,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:k["z-axis"],click:a},i.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(y){return c(y,"Reset camera to default")},attr:"resetDefault",icon:k.home,click:o},i.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(y){return c(y,"Reset camera to last save")},attr:"resetLastSave",icon:k.movie,click:o},i.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(y){return c(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:k.tooltip_basic,gravity:"ne",click:function(y,p){var _=l(y,p);I.call("_guiRelayout",y,_)}},i.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(y){return c(y,"Zoom in")},attr:"zoom",val:"in",icon:k.zoom_plus,click:u},i.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(y){return c(y,"Zoom out")},attr:"zoom",val:"out",icon:k.zoom_minus,click:u},i.resetGeo={name:"resetGeo",_cat:"reset",title:function(y){return c(y,"Reset")},attr:"reset",val:null,icon:k.autoscale,click:u},i.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(y){return c(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:k.tooltip_basic,gravity:"ne",click:g},i.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(y){return c(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:k.tooltip_basic,gravity:"ne",click:g},i.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(y){return c(y,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:k.tooltip_basic,gravity:"ne",click:g},i.resetViewSankey={name:"resetSankeyGroup",title:function(y){return c(y,"Reset view")},icon:k.home,click:function(y){for(var p={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<y._fullData.length;_++){var x=y._fullData[_]._viewInitial;p["node.groups"].push(x.node.groups.slice()),p["node.x"].push(x.node.x.slice()),p["node.y"].push(x.node.y.slice())}I.call("restyle",y,p)}},i.toggleHover={name:"toggleHover",title:function(y){return c(y,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:k.tooltip_basic,gravity:"ne",click:function(y,p){var _=l(y,p);_.hovermode=d(y),I.call("_guiRelayout",y,_)}},i.resetViews={name:"resetViews",title:function(y){return c(y,"Reset views")},icon:k.home,click:function(y,p){var _=p.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),s(y,p),_.setAttribute("data-attr","resetLastSave"),o(y,p),w(y,"geo"),w(y,"mapbox")}},i.toggleSpikelines={name:"toggleSpikelines",title:function(y){return c(y,"Toggle Spike Lines")},icon:k.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(y){var p=y._fullLayout;p._cartesianSpikesEnabled="on"===p._cartesianSpikesEnabled?"off":"on",I.call("_guiRelayout",y,function(x){for(var b="on"===x._fullLayout._cartesianSpikesEnabled,M=f.list(x,null,!0),m={},D=0;D<M.length;D++){var S=M[D];m[S._name+".showspikes"]=!!b||S._showSpikeInitial}return m}(y))}},i.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(y){return c(y,"Reset view")},attr:"reset",icon:k.home,click:function(y){w(y,"mapbox")}},i.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(y){return c(y,"Zoom in")},attr:"zoom",val:"in",icon:k.zoom_plus,click:h},i.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(y){return c(y,"Zoom out")},attr:"zoom",val:"out",icon:k.zoom_minus,click:h}},93348:function(se,U,r){"use strict";var I=r(26023),C=Object.keys(I),f=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],k=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(f),T=[];C.forEach(function(v){!function(c){if(-1===k.indexOf(c._cat||c.name)){var i=c.name,s=(c._cat||c.name).toLowerCase();-1===T.indexOf(i)&&T.push(i),-1===T.indexOf(s)&&T.push(s)}}(I[v])}),T.sort(),se.exports={DRAW_MODES:f,backButtons:k,foreButtons:T}},35750:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(44467),k=r(42068);se.exports=function(T,v){var c=T.modebar||{},i=f.newContainer(v,"modebar");function s(o,l){return I.coerce(c,i,k,o,l)}s("orientation"),s("bgcolor",C.addOpacity(v.paper_bgcolor,.5));var a=C.contrast(C.rgb(v.modebar.bgcolor));s("color",C.addOpacity(a,.3)),s("activecolor",C.addOpacity(a,.7)),s("uirevision",v.uirevision),s("add"),s("remove")}},64168:function(se,U,r){"use strict";se.exports={moduleType:"component",name:"modebar",layoutAttributes:r(42068),supplyLayoutDefaults:r(35750),manage:r(14192)}},14192:function(se,U,r){"use strict";var I=r(41675),C=r(34098),f=r(73972),k=r(23469).isUnifiedHover,T=r(37676),v=r(26023),c=r(93348).DRAW_MODES,i=r(71828).extendDeep;se.exports=function(s){var a=s._fullLayout,o=s._context,l=a._modeBar;if(o.displayModeBar||o.watermark){if(!Array.isArray(o.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(o.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u,d=o.modeBarButtons;u=Array.isArray(d)&&d.length?function(g){for(var h=i([],g),w=0;w<h.length;w++)for(var y=h[w],p=0;p<y.length;p++){var _=y[p];if("string"==typeof _){if(void 0===v[_])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));h[w][p]=v[_]}}return h}(d):!o.displayModeBar&&o.watermark?[]:function(g){var h=g._fullLayout,w=g._fullData,y=g._context;function p(Ee,Re){if("string"==typeof Re){if(Re.toLowerCase()===Ee.toLowerCase())return!0}else if(Re.name===Ee||(Re._cat||Re.name)===Ee.toLowerCase())return!0;return!1}var _=h.modebar.add;"string"==typeof _&&(_=[_]);var x=h.modebar.remove;"string"==typeof x&&(x=[x]);var b=y.modeBarButtonsToAdd.concat(_.filter(function(Ee){for(var Re=0;Re<y.modeBarButtonsToRemove.length;Re++)if(p(Ee,y.modeBarButtonsToRemove[Re]))return!1;return!0})),M=y.modeBarButtonsToRemove.concat(x.filter(function(Ee){for(var Re=0;Re<y.modeBarButtonsToAdd.length;Re++)if(p(Ee,y.modeBarButtonsToAdd[Re]))return!1;return!0})),m=h._has("cartesian"),D=h._has("gl3d"),S=h._has("geo"),O=h._has("pie"),P=h._has("funnelarea"),R=h._has("gl2d"),F=h._has("ternary"),B=h._has("mapbox"),J=h._has("polar"),z=h._has("smith"),$=h._has("sankey"),G=function(Ee){for(var Re=I.list({_fullLayout:Ee},null,!0),ke=0;ke<Re.length;ke++)if(!Re[ke].fixedrange)return!1;return!0}(h),H=k(h.hovermode),X=[];function K(Ee){if(Ee.length){for(var Re=[],ke=0;ke<Ee.length;ke++){for(var Te=Ee[ke],we=v[Te],je=we.name.toLowerCase(),Ce=(we._cat||we.name).toLowerCase(),Ie=!1,ge=0;ge<M.length;ge++){var me=M[ge].toLowerCase();if(me===je||me===Ce){Ie=!0;break}}Ie||Re.push(v[Te])}X.push(Re)}}var ue=["toImage"];y.showEditInChartStudio?ue.push("editInChartStudio"):y.showSendToCloud&&ue.push("sendDataToCloud"),K(ue);var ae=[],ne=[],Q=[],ie=[];(m||R||O||P||F)+S+D+B+J+z>1?(ne=["toggleHover"],Q=["resetViews"]):S?(ae=["zoomInGeo","zoomOutGeo"],ne=["hoverClosestGeo"],Q=["resetGeo"]):D?(ne=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):B?(ae=["zoomInMapbox","zoomOutMapbox"],ne=["toggleHover"],Q=["resetViewMapbox"]):R?ne=["hoverClosestGl2d"]:O?ne=["hoverClosestPie"]:$?(ne=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):ne=["toggleHover"],m&&(ne=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(Ee){for(var Re=0;Re<Ee.length;Re++)if(!f.traceIs(Ee[Re],"noHover"))return!1;return!0}(w)||H)&&(ne=[]),!m&&!R||G||(ae=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Q[0]&&(Q=["resetScale2d"])),D?ie=["zoom3d","pan3d","orbitRotation","tableRotation"]:(m||R)&&!G||F?ie=["zoom2d","pan2d"]:B||S?ie=["pan2d"]:J&&(ie=["zoom2d"]),function(Ee){for(var Re=!1,ke=0;ke<Ee.length&&!Re;ke++){var Te=Ee[ke];Te._module&&Te._module.selectPoints&&(f.traceIs(Te,"scatter-like")?(C.hasMarkers(Te)||C.hasText(Te))&&(Re=!0):f.traceIs(Te,"box-violin")&&"all"!==Te.boxpoints&&"all"!==Te.points||(Re=!0))}return Re}(w)&&ie.push("select2d","lasso2d");var le=[],fe=function(Ee){-1===le.indexOf(Ee)&&-1!==ne.indexOf(Ee)&&le.push(Ee)};if(Array.isArray(b)){for(var he=[],pe=0;pe<b.length;pe++){var xe=b[pe];"string"==typeof xe?(xe=xe.toLowerCase(),-1!==c.indexOf(xe)?(h._has("mapbox")||h._has("cartesian"))&&ie.push(xe):"togglespikelines"===xe?fe("toggleSpikelines"):"togglehover"===xe?fe("toggleHover"):"hovercompare"===xe?fe("hoverCompareCartesian"):"hoverclosest"===xe?(fe("hoverClosestCartesian"),fe("hoverClosestGeo"),fe("hoverClosest3d"),fe("hoverClosestGl2d"),fe("hoverClosestPie")):"v1hovermode"===xe&&(fe("toggleHover"),fe("hoverClosestCartesian"),fe("hoverCompareCartesian"),fe("hoverClosestGeo"),fe("hoverClosest3d"),fe("hoverClosestGl2d"),fe("hoverClosestPie"))):he.push(xe)}b=he}return K(ie),K(ae.concat(Q)),K(le),function(Ee,Re){if(Re.length)if(Array.isArray(Re[0]))for(var ke=0;ke<Re.length;ke++)Ee.push(Re[ke]);else Ee.push(Re);return Ee}(X,b)}(s),l?l.update(s,u):a._modeBar=T(s,u)}else l&&(l.destroy(),delete a._modeBar)}},37676:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(71828),k=r(24255),T=r(11506).version,v=new DOMParser;function c(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var i=c.prototype;i.update=function(s,a){this.graphInfo=s;var o=this.graphInfo._context,l=this.graphInfo._fullLayout,u="modebar-"+l._uid;this.element.setAttribute("id",u),this._uid=u,this.element.className="modebar","hover"===o.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===l.modebar.orientation&&(this.element.className+=" vertical",a=a.reverse());var d=l.modebar,g="hover"===o.displayModeBar?".js-plotly-plot .plotly:hover ":"";f.deleteRelatedStyleRule(u),f.addRelatedStyleRule(u,g+"#"+u+" .modebar-group","background-color: "+d.bgcolor),f.addRelatedStyleRule(u,"#"+u+" .modebar-btn .icon path","fill: "+d.color),f.addRelatedStyleRule(u,"#"+u+" .modebar-btn:hover .icon path","fill: "+d.activecolor),f.addRelatedStyleRule(u,"#"+u+" .modebar-btn.active .icon path","fill: "+d.activecolor);var h=!this.hasButtons(a),w=this.hasLogo!==o.displaylogo,y=this.locale!==o.locale;if(this.locale=o.locale,(h||w||y)&&(this.removeAllButtons(),this.updateButtons(a),o.watermark||o.displaylogo)){var p=this.getLogo();o.watermark&&(p.className=p.className+" watermark"),"v"===l.modebar.orientation?this.element.insertBefore(p,this.element.childNodes[0]):this.element.appendChild(p),this.hasLogo=!0}this.updateActiveButton()},i.updateButtons=function(s){var a=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(o){var l=a.createGroup();o.forEach(function(u){var d=u.name;if(!d)throw new Error("must provide button 'name' in button config");if(-1!==a.buttonsNames.indexOf(d))throw new Error("button name '"+d+"' is taken");a.buttonsNames.push(d);var g=a.createButton(u);a.buttonElements.push(g),l.appendChild(g)}),a.element.appendChild(l)})},i.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},i.createButton=function(s){var a=this,o=document.createElement("a");o.setAttribute("rel","tooltip"),o.className="modebar-btn";var l=s.title;void 0===l?l=s.name:"function"==typeof l&&(l=l(this.graphInfo)),(l||0===l)&&o.setAttribute("data-title",l),void 0!==s.attr&&o.setAttribute("data-attr",s.attr);var u=s.val;if(void 0!==u&&("function"==typeof u&&(u=u(this.graphInfo)),o.setAttribute("data-val",u)),"function"!=typeof s.click)throw new Error("must provide button 'click' function in button config");o.addEventListener("click",function(g){s.click(a.graphInfo,g),a.updateActiveButton(g.currentTarget)}),o.setAttribute("data-toggle",s.toggle||!1),s.toggle&&I.select(o).classed("active",!0);var d=s.icon;return o.appendChild("function"==typeof d?d():this.createIcon(d||k.question)),o.setAttribute("data-gravity",s.gravity||"n"),o},i.createIcon=function(s){var a,o=C(s.height)?Number(s.height):s.ascent-s.descent,l="http://www.w3.org/2000/svg";if(s.path){(a=document.createElementNS(l,"svg")).setAttribute("viewBox",[0,0,s.width,o].join(" ")),a.setAttribute("class","icon");var u=document.createElementNS(l,"path");u.setAttribute("d",s.path),s.transform?u.setAttribute("transform",s.transform):void 0!==s.ascent&&u.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),a.appendChild(u)}return s.svg&&(a=v.parseFromString(s.svg,"application/xml").childNodes[0]),a.setAttribute("height","1em"),a.setAttribute("width","1em"),a},i.updateActiveButton=function(s){var a=this.graphInfo._fullLayout,o=void 0!==s?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(l){var u=l.getAttribute("data-val")||!0,d=l.getAttribute("data-attr"),g="true"===l.getAttribute("data-toggle"),h=I.select(l);if(g)d===o&&h.classed("active",!h.classed("active"));else{var w=null===d?d:f.nestedProperty(a,d).get();h.classed("active",w===u)}})},i.hasButtons=function(s){var a=this.buttons;if(!a||s.length!==a.length)return!1;for(var o=0;o<s.length;++o){if(s[o].length!==a[o].length)return!1;for(var l=0;l<s[o].length;l++)if(s[o][l].name!==a[o][l].name)return!1}return!0},i.getLogo=function(){var s=this.createGroup(),a=document.createElement("a");return a.href="https://plotly.com/",a.target="_blank",a.setAttribute("data-title",f._(this.graphInfo,"Produced with Plotly.js")+" (v"+T+")"),a.className="modebar-btn plotlyjsicon modebar-btn--logo",a.appendChild(this.createIcon(k.newplotlylogo)),s.appendChild(a),s},i.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},i.destroy=function(){f.removeElement(this.container.querySelector(".modebar")),f.deleteRelatedStyleRule(this._uid)},se.exports=function(s,a){var o=s._fullLayout,l=new c({graphInfo:s,container:o._modebardiv.node(),buttons:a});return o._privateplot&&I.select(l.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),l}},37113:function(se,U,r){"use strict";var I=r(41940),C=r(22399),f=(0,r(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});se.exports={visible:{valType:"boolean",editType:"plot"},buttons:f,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:I({editType:"plot"}),bgcolor:{valType:"color",dflt:C.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:C.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function(se){"use strict";se.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(44467),k=r(85501),T=r(37113),v=r(89573);function c(i,s,a,o){var l=o.calendar;function u(g,h){return I.coerce(i,s,T.buttons,g,h)}if(u("visible")){var d=u("step");"all"!==d&&(!l||"gregorian"===l||"month"!==d&&"year"!==d?u("stepmode"):s.stepmode="backward",u("count")),u("label")}}se.exports=function(i,s,a,o,l){var u=i.rangeselector||{},d=f.newContainer(s,"rangeselector");function g(y,p){return I.coerce(u,d,T,y,p)}if(g("visible",k(u,d,{name:"buttons",handleItemDefaults:c,calendar:l}).length>0)){var h=function(y,p,_){for(var x=_.filter(function(D){return p[D].anchor===y._id}),b=0,M=0;M<x.length;M++){var m=p[x[M]].domain;m&&(b=Math.max(m[1],b))}return[y.domain[0],b+v.yPad]}(s,a,o);g("x",h[0]),g("y",h[1]),I.noneOrAll(i,s,["x","y"]),g("xanchor"),g("yanchor"),I.coerceFont(g,"font",a.font);var w=g("bgcolor");g("activecolor",C.contrast(w,v.lightAmount,v.darkAmount)),g("bordercolor"),g("borderwidth")}}},21598:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(74875),k=r(7901),T=r(91424),v=r(71828),c=v.strTranslate,i=r(63893),s=r(41675),a=r(18783),o=a.LINE_SPACING,l=a.FROM_TL,u=a.FROM_BR,d=r(89573),g=r(70565);function h(p){return p._id}function w(p,_,x){var M,m,b=v.ensureSingle(p,"rect","selector-rect",function(M){M.attr("shape-rendering","crispEdges")});b.attr({rx:d.rx,ry:d.ry}),b.call(k.stroke,_.bordercolor).call(k.fill,(M=_,m=x,m._isActive||m._isHovered?M.activecolor:M.bgcolor)).style("stroke-width",_.borderwidth+"px")}function y(p,_,x,b){var M,m;v.ensureSingle(p,"text","selector-text",function(D){D.attr("text-anchor","middle")}).call(T.font,_.font).text((M=x,m=b._fullLayout._meta,M.label?m?v.templateString(M.label,m):M.label:"all"===M.step?"all":M.count+M.step.charAt(0))).call(function(D){i.convertToTspans(D,b)})}se.exports=function(p){var _=p._fullLayout._infolayer.selectAll(".rangeselector").data(function(x){for(var b=s.list(x,"x",!0),M=[],m=0;m<b.length;m++){var D=b[m];D.rangeselector&&D.rangeselector.visible&&M.push(D)}return M}(p),h);_.enter().append("g").classed("rangeselector",!0),_.exit().remove(),_.style({cursor:"pointer","pointer-events":"all"}),_.each(function(x){var b=I.select(this),M=x,m=M.rangeselector,D=b.selectAll("g.button").data(v.filterVisible(m.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(S){var O=I.select(this),P=g(M,S);S._isActive=function(R,F,B){if("all"===F.step)return!0===R.autorange;var J=Object.keys(B);return R.range[0]===B[J[0]]&&R.range[1]===B[J[1]]}(M,S,P),O.call(w,m,S),O.call(y,m,S,p),O.on("click",function(){p._dragged||C.call("_guiRelayout",p,P)}),O.on("mouseover",function(){S._isHovered=!0,O.call(w,m,S)}),O.on("mouseout",function(){S._isHovered=!1,O.call(w,m,S)})}),function(S,O,P,R,F){var B=0,J=0,z=P.borderwidth;O.each(function(){var ue=I.select(this).select(".selector-text"),ne=Math.max(P.font.size*o*i.lineCount(ue),16)+3;J=Math.max(J,ne)}),O.each(function(){var ue=I.select(this),ae=ue.select(".selector-rect"),ne=ue.select(".selector-text"),Q=ne.node()&&T.bBox(ne.node()).width,ie=P.font.size*o,le=i.lineCount(ne),fe=Math.max(Q+10,d.minButtonWidth);ue.attr("transform",c(z+B,z)),ae.attr({x:0,y:0,width:fe,height:J}),i.positionText(ne,fe/2,J/2-(le-1)*ie/2+3),B+=fe+5});var $=S._fullLayout._size,G=$.l+$.w*P.x,H=$.t+$.h*(1-P.y),X="left";v.isRightAnchor(P)&&(G-=B,X="right"),v.isCenterAnchor(P)&&(G-=B/2,X="center");var K="top";v.isBottomAnchor(P)&&(H-=J,K="bottom"),v.isMiddleAnchor(P)&&(H-=J/2,K="middle"),B=Math.ceil(B),J=Math.ceil(J),G=Math.round(G),H=Math.round(H),f.autoMargin(S,R+"-range-selector",{x:P.x,y:P.y,l:B*l[X],r:B*u[X],b:J*u[K],t:J*l[K]}),F.attr("transform",c(G,H))}(p,D,m,M._name,b)})}},70565:function(se,U,r){"use strict";var I=r(81041),C=r(71828).titleCase;se.exports=function(f,k){var T=f._name,v={};if("all"===k.step)v[T+".autorange"]=!0;else{var c=function(i,s){var a,o=i.range,l=new Date(i.r2l(o[1])),d=I["utc"+C(s.step)],g=s.count;switch(s.stepmode){case"backward":a=i.l2r(+d.offset(l,-g));break;case"todate":var h=d.offset(l,-g);a=i.l2r(+d.ceil(h))}return[a,o[1]]}(f,k);v[T+".range[0]"]=c[0],v[T+".range[1]"]=c[1]}return v}},97218:function(se,U,r){"use strict";se.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:r(37113)}}},layoutAttributes:r(37113),handleDefaults:r(28674),draw:r(21598)}},75148:function(se,U,r){"use strict";var I=r(22399);se.exports={bgcolor:{valType:"color",dflt:I.background,editType:"plot"},bordercolor:{valType:"color",dflt:I.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function(se,U,r){"use strict";var I=r(41675).list,C=r(71739).getAutoRange,f=r(73251);se.exports=function(k){for(var T=I(k,"x",!0),v=0;v<T.length;v++){var c=T[v],i=c[f.name];i&&i.visible&&i.autorange&&(i._input.autorange=!0,i._input.range=i.range=C(k,c))}}},73251:function(se){"use strict";se.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function(se,U,r){"use strict";var I=r(71828),C=r(44467),f=r(41675),k=r(75148),T=r(47850);se.exports=function(v,c,i){var s=v[i],a=c[i];if(s.rangeslider||c._requestRangeslider[a._id]){I.isPlainObject(s.rangeslider)||(s.rangeslider={});var o,l,u=s.rangeslider,d=C.newContainer(a,"rangeslider");if(b("visible")){b("bgcolor",c.plot_bgcolor),b("bordercolor"),b("borderwidth"),b("thickness"),b("autorange",!a.isValidRange(u.range)),b("range");var g=c._subplots;if(g)for(var h=g.cartesian.filter(function(m){return m.substr(0,m.indexOf("y"))===f.name2id(i)}).map(function(m){return m.substr(m.indexOf("y"),m.length)}),w=I.simpleMap(h,f.id2name),y=0;y<w.length;y++){var p=w[y];o=u[p]||{},l=C.newContainer(d,p,"yaxis");var _,x=c[p];o.range&&x.isValidRange(o.range)&&(_="fixed"),"match"!==M("rangemode",_)&&M("range",x.range.slice())}d._input=u}}function b(m,D){return I.coerce(u,d,k,m,D)}function M(m,D){return I.coerce(o,l,T,m,D)}}},72413:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(74875),k=r(71828),T=k.strTranslate,v=r(91424),c=r(7901),i=r(92998),s=r(93612),a=r(41675),o=r(28569),l=r(6964),u=r(73251);function d(_,x,b,M){var m=k.ensureSingle(_,"rect",u.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),D=M.borderwidth%2==0?M.borderwidth:M.borderwidth-1,S=-M._offsetShift,O=v.crispRound(x,M.borderwidth);m.attr({width:M._width+D,height:M._height+D,transform:T(S,S),"stroke-width":O}).call(c.stroke,M.bordercolor).call(c.fill,M.bgcolor)}function g(_,x,b,M){k.ensureSingleById(x._fullLayout._topdefs,"clipPath",M._clipId,function(D){D.append("rect").attr({x:0,y:0})}).select("rect").attr({width:M._width,height:M._height})}function h(_,x,b,M){var m,D=x.calcdata,S=_.selectAll("g."+u.rangePlotClassName).data(b._subplotsWith,k.identity);S.enter().append("g").attr("class",function(O){return u.rangePlotClassName+" "+O}).call(v.setClipUrl,M._clipId,x),S.order(),S.exit().remove(),S.each(function(O,P){var R=I.select(this),F=0===P,B=a.getFromId(x,O,"y"),J=B._name,z=M[J],$={data:[],layout:{xaxis:{type:b.type,domain:[0,1],range:M.range.slice(),calendar:b.calendar},width:M._width,height:M._height,margin:{t:0,b:0,l:0,r:0}},_context:x._context};b.rangebreaks&&($.layout.xaxis.rangebreaks=b.rangebreaks),$.layout[J]={type:B.type,domain:[0,1],range:"match"!==z.rangemode?z.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&($.layout[J].rangebreaks=B.rangebreaks),f.supplyDefaults($);var G=$._fullLayout.xaxis,H=$._fullLayout[J];G.clearCalc(),G.setScale(),H.clearCalc(),H.setScale();var X={id:O,plotgroup:R,xaxis:G,yaxis:H,isRangePlot:!0};F?m=X:(X.mainplot="xy",X.mainplotinfo=m),s.rangePlot(x,X,function(K,ue){for(var ae=[],ne=0;ne<K.length;ne++){var Q=K[ne],ie=Q[0].trace;ie.xaxis+ie.yaxis===ue&&ae.push(Q)}return ae}(D,O))})}function w(_,x,b,M,m){k.ensureSingle(_,"rect",u.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",M._height).call(c.fill,u.maskColor),k.ensureSingle(_,"rect",u.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",M._height).call(c.fill,u.maskColor),"match"!==m.rangemode&&(k.ensureSingle(_,"rect",u.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",M._width).call(c.fill,u.maskOppAxisColor),k.ensureSingle(_,"rect",u.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",M._width).style("border-top",u.maskOppBorder).call(c.fill,u.maskOppAxisColor))}function y(_,x,b,M){x._context.staticPlot||k.ensureSingle(_,"rect",u.slideBoxClassName,function(m){m.attr({y:0,cursor:u.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:M._height,fill:u.slideBoxFill})}function p(_,x,b,M){var m=k.ensureSingle(_,"g",u.grabberMinClassName),D=k.ensureSingle(_,"g",u.grabberMaxClassName),S={x:0,width:u.handleWidth,rx:u.handleRadius,fill:c.background,stroke:c.defaultLine,"stroke-width":u.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(M._height/4),height:Math.round(M._height/2)};k.ensureSingle(m,"rect",u.handleMinClassName,function(R){R.attr(S)}).attr(O),k.ensureSingle(D,"rect",u.handleMaxClassName,function(R){R.attr(S)}).attr(O);var P={width:u.grabAreaWidth,x:0,y:0,fill:u.grabAreaFill,cursor:x._context.staticPlot?void 0:u.grabAreaCursor};k.ensureSingle(m,"rect",u.grabAreaMinClassName,function(R){R.attr(P)}).attr("height",M._height),k.ensureSingle(D,"rect",u.grabAreaMaxClassName,function(R){R.attr(P)}).attr("height",M._height)}se.exports=function(_){for(var x=_._fullLayout,b=x._rangeSliderData,M=0;M<b.length;M++){var m=b[M][u.name];m._clipId=m._id+"-"+x._uid}var D=x._infolayer.selectAll("g."+u.containerClassName).data(b,function(S){return S._name});D.exit().each(function(S){x._topdefs.select("#"+S[u.name]._clipId).remove()}).remove(),0!==b.length&&(D.enter().append("g").classed(u.containerClassName,!0).attr("pointer-events","all"),D.each(function(S){var O=I.select(this),P=S[u.name],R=x[a.id2name(S.anchor)],F=P[a.id2name(S.anchor)];if(P.range){var B,J=k.simpleMap(P.range,S.r2l),z=k.simpleMap(S.range,S.r2l);B=z[0]<z[1]?[Math.min(J[0],z[0]),Math.max(J[1],z[1])]:[Math.max(J[0],z[0]),Math.min(J[1],z[1])],P.range=P._input.range=k.simpleMap(B,S.l2r)}S.cleanRange("rangeslider.range");var $=x._size,G=S.domain;P._width=$.w*(G[1]-G[0]);var H=Math.round($.l+$.w*G[0]),X=Math.round($.t+$.h*(1-S._counterDomainMin)+("bottom"===S.side?S._depth:0)+P._offsetShift+u.extraPad);O.attr("transform",T(H,X)),P._rl=k.simpleMap(P.range,S.r2l);var K=P._rl[0],ue=P._rl[1],ae=ue-K;if(P.p2d=function(Ee){return Ee/P._width*ae+K},P.d2p=function(Ee){return(Ee-K)/ae*P._width},S.rangebreaks){var ne=S.locateBreaks(K,ue);if(ne.length){var Q,ie,le=0;for(Q=0;Q<ne.length;Q++)le+=(ie=ne[Q]).max-ie.min;var fe=P._width/(ue-K-le),he=[-fe*K];for(Q=0;Q<ne.length;Q++)he.push(he[he.length-1]-fe*((ie=ne[Q]).max-ie.min));for(P.d2p=function(Ee){for(var Re=he[0],ke=0;ke<ne.length;ke++){var Te=ne[ke];if(Ee>=Te.max)Re=he[ke+1];else if(Ee<Te.min)break}return Re+fe*Ee},Q=0;Q<ne.length;Q++)(ie=ne[Q]).pmin=P.d2p(ie.min),ie.pmax=P.d2p(ie.max);P.p2d=function(Ee){for(var Re=he[0],ke=0;ke<ne.length;ke++){var Te=ne[ke];if(Ee>=Te.pmax)Re=he[ke+1];else if(Ee<Te.pmin)break}return(Ee-Re)/fe}}}if("match"!==F.rangemode){var pe=R.r2l(F.range[0]),xe=R.r2l(F.range[1])-pe;P.d2pOppAxis=function(Ee){return(Ee-pe)/xe*P._height}}O.call(d,_,S,P).call(g,_,S,P).call(h,_,S,P).call(w,_,S,P,F).call(y,_,S,P).call(p,_,S,P),function(Ee,Re,ke,Te){if(!Re._context.staticPlot){var we=Ee.select("rect."+u.slideBoxClassName).node(),je=Ee.select("rect."+u.grabAreaMinClassName).node(),Ce=Ee.select("rect."+u.grabAreaMaxClassName).node();Ee.on("mousedown",Ie),Ee.on("touchstart",Ie)}function Ie(){var ge=I.event,me=ge.target,ce=ge.clientX||ge.touches[0].clientX,Ae=ce-Ee.node().getBoundingClientRect().left,Ne=Te.d2p(ke._rl[0]),De=Te.d2p(ke._rl[1]),qe=o.coverSlip();function Ke(Oe){var Le,Ue,Ze,We=+(Oe.clientX||Oe.touches[0].clientX)-ce;switch(me){case we:if(Ze="ew-resize",Ne+We>ke._length||De+We<0)return;Le=Ne+We,Ue=De+We;break;case je:if(Ze="col-resize",Ne+We>ke._length)return;Le=Ne+We,Ue=De;break;case Ce:if(Ze="col-resize",De+We<0)return;Le=Ne,Ue=De+We;break;default:Ze="ew-resize",Le=Ae,Ue=Ae+We}if(Ue<Le){var et=Ue;Ue=Le,Le=et}Te._pixelMin=Le,Te._pixelMax=Ue,l(I.select(qe),Ze),function(nt,ct,yt,ut){function Ct(mt){return yt.l2r(k.constrain(mt,ut._rl[0],ut._rl[1]))}var Dt=Ct(ut.p2d(ut._pixelMin)),vt=Ct(ut.p2d(ut._pixelMax));window.requestAnimationFrame(function(){C.call("_guiRelayout",ct,yt._name+".range",[Dt,vt])})}(0,Re,ke,Te)}function be(){qe.removeEventListener("mousemove",Ke),qe.removeEventListener("mouseup",be),this.removeEventListener("touchmove",Ke),this.removeEventListener("touchend",be),k.removeElement(qe)}this.addEventListener("touchmove",Ke),this.addEventListener("touchend",be),qe.addEventListener("mousemove",Ke),qe.addEventListener("mouseup",be)}}(O,_,S,P),function(Ee,Re,ke,Te,we,je){var Ce=u.handleWidth/2;function Ie(Oe){return k.constrain(Oe,0,Te._width)}function ge(Oe){return k.constrain(Oe,0,Te._height)}function me(Oe){return k.constrain(Oe,-Ce,Te._width+Ce)}var ce=Ie(Te.d2p(ke._rl[0])),Ae=Ie(Te.d2p(ke._rl[1]));if(Ee.select("rect."+u.slideBoxClassName).attr("x",ce).attr("width",Ae-ce),Ee.select("rect."+u.maskMinClassName).attr("width",ce),Ee.select("rect."+u.maskMaxClassName).attr("x",Ae).attr("width",Te._width-Ae),"match"!==je.rangemode){var Ne=Te._height-ge(Te.d2pOppAxis(we._rl[1])),De=Te._height-ge(Te.d2pOppAxis(we._rl[0]));Ee.select("rect."+u.maskMinOppAxisClassName).attr("x",ce).attr("height",Ne).attr("width",Ae-ce),Ee.select("rect."+u.maskMaxOppAxisClassName).attr("x",ce).attr("y",De).attr("height",Te._height-De).attr("width",Ae-ce),Ee.select("rect."+u.slideBoxClassName).attr("y",Ne).attr("height",De-Ne)}var Ke=Math.round(me(ce-Ce))-.5,be=Math.round(me(Ae-Ce))+.5;Ee.select("g."+u.grabberMinClassName).attr("transform",T(Ke,.5)),Ee.select("g."+u.grabberMaxClassName).attr("transform",T(be,.5))}(O,0,S,P,R,F),"bottom"===S.side&&i.draw(_,S._id+"title",{propContainer:S,propName:S._name+".title",placeholder:x._dfltTitle.x,attributes:{x:S._offset+S._length/2,y:X+P._height+P._offsetShift+10+1.5*S.title.font.size,"text-anchor":"middle"}})}))}},549:function(se,U,r){"use strict";var I=r(41675),C=r(63893),f=r(73251),k=r(18783).LINE_SPACING,T=f.name;function v(c){var i=c&&c[T];return i&&i.visible}U.isVisible=v,U.makeData=function(c){var i=I.list({_fullLayout:c},"x",!0),s=c.margin,a=[];if(!c._has("gl2d"))for(var o=0;o<i.length;o++){var l=i[o];if(v(l)){a.push(l);var u=l[T];u._id=T+l._id,u._height=(c.height-s.b-s.t)*u.thickness,u._offsetShift=Math.floor(u.borderwidth/2)}}c._rangeSliderData=a},U.autoMarginOpts=function(c,i){var s=c._fullLayout,a=i[T],o=i._id.charAt(0),l=0,u=0;return"bottom"===i.side&&(l=i._depth,i.title.text!==s._dfltTitle[o]&&(u=1.5*i.title.font.size+10+a._offsetShift,u+=(i.title.text.match(C.BR_TAG_ALL)||[]).length*i.title.font.size*k)),{x:0,y:i._counterDomainMin,l:0,r:0,t:0,b:a._height+l+Math.max(s.margin.b,u),pad:f.extraPad+2*a._offsetShift}}},13137:function(se,U,r){"use strict";var I=r(71828),C=r(75148),f=r(47850),k=r(549);se.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:I.extendFlat({},C,{yaxis:f})}}},layoutAttributes:r(75148),handleDefaults:r(26377),calcAutorange:r(88443),draw:r(72413),isVisible:k.isVisible,makeData:k.makeData,autoMarginOpts:k.autoMarginOpts}},47850:function(se){"use strict";se.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function(se,U,r){"use strict";var I=r(50215),C=r(82196).line,f=r(79952).P,k=r(1426).extendFlat,T=r(30962).overrideAll,v=r(44467).templatedArray;r(24695),se.exports=T(v("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:k({},I.xref,{}),yref:k({},I.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:C.color,width:k({},C.width,{min:1,dflt:1}),dash:k({},f,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function(se){"use strict";se.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(85501),k=r(8389),T=r(30477);function v(c,i,s){function a(O,P){return I.coerce(c,i,k,O,P)}var o=a("path"),l="path"!==a("type",o?"path":"rect");l&&delete i.path,a("opacity"),a("line.color"),a("line.width"),a("line.dash");for(var u=["x","y"],d=0;d<2;d++){var g,h,w,y=u[d],p={_fullLayout:s},_=C.coerceRef(c,i,p,y);if((g=C.getFromId(p,_))._selectionIndices.push(i._index),w=T.rangeToShapePosition(g),h=T.shapePositionToRange(g),l){var x=y+"0",b=y+"1",M=c[x],m=c[b];c[x]=h(c[x],!0),c[b]=h(c[b],!0),C.coercePosition(i,p,a,_,x),C.coercePosition(i,p,a,_,b);var D=i[x],S=i[b];void 0!==D&&void 0!==S&&(i[x]=w(D),i[b]=w(S),c[x]=M,c[b]=m)}}l&&I.noneOrAll(c,i,["x0","x1","y0","y1"])}se.exports=function(c,i){f(c,i,{name:"selections",handleItemDefaults:v});for(var s=i.selections,a=0;a<s.length;a++){var o=s[a];o&&void 0===o.path&&(void 0!==o.x0&&void 0!==o.x1&&void 0!==o.y0&&void 0!==o.y1||(i.selections[a]=null))}}},32485:function(se,U,r){"use strict";var I=r(60165).readPaths,C=r(42359),f=r(51873).clearOutlineControllers,k=r(7901),T=r(91424),v=r(44467).arrayEditor,c=r(30477),i=c.getPathString;function s(d){var g=d._fullLayout;for(var h in f(d),g._selectionLayer.selectAll("path").remove(),g._plots){var w=g._plots[h].selectionLayer;w&&w.selectAll("path").remove()}for(var y=0;y<g.selections.length;y++)o(d,y)}function a(d){return d._context.editSelection}function o(d,g){d._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+g+'"]').remove();var h=c.makeSelectionsOptionsAndPlotinfo(d,g),w=h.options,y=h.plotinfo;w._input&&function(p){var _=i(d,w),x={"data-index":g,"fill-rule":"evenodd",d:_},b=w.opacity,M="rgba(0,0,0,0)",m=w.line.color||k.contrast(d._fullLayout.plot_bgcolor),D=w.line.width,S=w.line.dash;D||(D=5,S="solid");var O=a(d)&&d._fullLayout._activeSelectionIndex===g;O&&(M=d._fullLayout.activeselection.fillcolor,b=d._fullLayout.activeselection.opacity);for(var P=[],R=1;R>=0;R--){var F=p.append("path").attr(x).style("opacity",R?.1:b).call(k.stroke,m).call(k.fill,M).call(T.dashLine,R?"solid":S,R?4+D:D);if(l(F,d,w),O){var B=v(d.layout,"selections",w);F.style({cursor:"move"});var J={element:F.node(),plotinfo:y,gd:d,editHelpers:B,isActiveSelection:!0},z=I(_,d);C(z,F,J)}else F.style("pointer-events",R?"all":"none");P[R]=F}var $=P[0];P[1].node().addEventListener("click",function(){return function(G,H){if(a(G)){var X=+H.node().getAttribute("data-index");if(X>=0){if(X===G._fullLayout._activeSelectionIndex)return void u(G);G._fullLayout._activeSelectionIndex=X,G._fullLayout._deactivateSelection=u,s(G)}}}(d,$)})}(d._fullLayout._selectionLayer)}function l(d,g,h){T.setClipUrl(d,"clip"+g._fullLayout._uid+(h.xref+h.yref),g)}function u(d){a(d)&&d._fullLayout._activeSelectionIndex>=0&&(f(d),delete d._fullLayout._activeSelectionIndex,s(d))}se.exports={draw:s,drawOne:o,activateLastSelection:function(d){a(d)&&(d._fullLayout._activeSelectionIndex=d._fullLayout.selections.length-1,d._fullLayout._deactivateSelection=u,s(d))}}},53777:function(se,U,r){"use strict";var I=r(79952).P,C=r(1426).extendFlat;se.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:C({},I,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function(se){"use strict";se.exports=function(U,r,I){I("newselection.mode"),I("newselection.line.width")&&(I("newselection.line.color"),I("newselection.line.dash")),I("activeselection.fillcolor"),I("activeselection.opacity")}},35855:function(se,U,r){"use strict";var I=r(64505).selectMode,C=r(51873).clearOutline,f=r(60165),k=f.readPaths,T=f.writePaths,v=f.fixDatesForPaths;se.exports=function(c,i){if(c.length){var s=c[0][0];if(s){var a=s.getAttribute("d"),o=i.gd,l=o._fullLayout.newselection,u=i.plotinfo,d=u.xaxis,g=u.yaxis,h=i.isActiveSelection,w=i.dragmode,y=(o.layout||{}).selections||[];if(!I(w)&&void 0!==h){var p=o._fullLayout._activeSelectionIndex;if(p<y.length)switch(o._fullLayout.selections[p].type){case"rect":w="select";break;case"path":w="lasso"}}var _,x=k(a,o,u,h),b={xref:d._id,yref:g._id,opacity:l.opacity,line:{color:l.line.color,width:l.line.width,dash:l.line.dash}};1===x.length&&(_=x[0]),_&&5===_.length&&"select"===w?(b.type="rect",b.x0=_[0][1],b.y0=_[0][2],b.x1=_[2][1],b.y1=_[2][2]):(b.type="path",d&&g&&v(x,d,g),b.path=T(x),_=null),C(o);for(var M=i.editHelpers,m=(M||{}).modifyItem,D=[],S=0;S<y.length;S++){var O=o._fullLayout.selections[S];if(O){if(D[S]=O._input,void 0!==h&&S===o._fullLayout._activeSelectionIndex){var P=b;switch(O.type){case"rect":m("x0",P.x0),m("x1",P.x1),m("y0",P.y0),m("y1",P.y1);break;case"path":m("path",P.path)}}}else D[S]=O}return void 0===h?(D.push(b),D):M?M.getUpdateObj():{}}}}},75549:function(se,U,r){"use strict";var I=r(71828).strTranslate;function C(f,k){switch(f.type){case"log":return f.p2d(k);case"date":return f.p2r(k,0,f.calendar);default:return f.p2r(k)}}se.exports={p2r:C,r2p:function(f,k){switch(f.type){case"log":return f.d2p(k);case"date":return f.r2p(k,0,f.calendar);default:return f.r2p(k)}},axValue:function(f){var k="y"===f._id.charAt(0)?1:0;return function(T){return C(f,T[k])}},getTransform:function(f){return I(f.xaxis._offset,f.yaxis._offset)}}},47322:function(se,U,r){"use strict";var I=r(32485),C=r(3937);se.exports={moduleType:"component",name:"selections",layoutAttributes:r(8389),supplyLayoutDefaults:r(59402),supplyDrawNewSelectionDefaults:r(90849),includeBasePlot:r(76325)("selections"),draw:I.draw,drawOne:I.drawOne,reselect:C.reselect,prepSelect:C.prepSelect,clearOutline:C.clearOutline,clearSelectionsCache:C.clearSelectionsCache,selectOnClick:C.selectOnClick}},3937:function(se,U,r){"use strict";var I=r(52142),C=r(38258),f=r(73972),k=r(91424).dashStyle,T=r(7901),v=r(30211),c=r(23469).makeEventData,i=r(64505),s=i.freeMode,a=i.rectMode,o=i.drawMode,l=i.openMode,u=i.selectMode,d=r(30477),g=r(21459),h=r(42359),w=r(51873).clearOutline,y=r(60165),p=y.handleEllipse,_=y.readPaths,x=r(90551).newShapes,b=r(35855),M=r(32485).activateLastSelection,m=r(71828),D=m.sorterAsc,S=r(61082),O=r(79990),P=r(41675).getFromId,R=r(33306),F=r(61549).redrawReglTraces,B=r(34122),J=B.MINSELECT,z=S.filter,$=S.tester,G=r(75549),H=G.p2r,X=G.axValue,K=G.getTransform;function ue(be){return void 0!==be.subplot}function ae(be,Oe,Le,Ue,Ze,We,et){var nt,ct,yt,ut,Ct,Dt,vt,mt,Lt,ot,Ft=Oe._hoverdata,Rt=Oe._fullLayout.clickmode.indexOf("event")>-1,Wt=[];if((ot=Ft)&&Array.isArray(ot)&&!0!==ot[0].hoverOnBox){le(be,Oe,We);var Ht=function(ot,pt){var xt,He,Ge=ot[0],dt=-1,ht=[];for(He=0;He<pt.length;He++)if(Ge.fullData._expandedIndex===(xt=pt[He]).cd[0].trace._expandedIndex){if(!0===Ge.hoverOnBox)break;void 0!==Ge.pointNumber?dt=Ge.pointNumber:void 0!==Ge.binNumber&&(dt=Ge.binNumber,ht=Ge.pointNumbers);break}return{pointNumber:dt,pointNumbers:ht,searchInfo:xt}}(Ft,nt=pe(Oe,Le,Ue,Ze));if(Ht.pointNumbers.length>0?function(ot,pt){var xt,He,Ge,dt=[];for(Ge=0;Ge<ot.length;Ge++)(xt=ot[Ge]).cd[0].trace.selectedpoints&&xt.cd[0].trace.selectedpoints.length>0&&dt.push(xt);if(1===dt.length&&dt[0]===pt.searchInfo&&(He=pt.searchInfo.cd[0].trace).selectedpoints.length===pt.pointNumbers.length){for(Ge=0;Ge<pt.pointNumbers.length;Ge++)if(He.selectedpoints.indexOf(pt.pointNumbers[Ge])<0)return!1;return!0}return!1}(nt,Ht):function(ot){var pt,xt,He=0;for(xt=0;xt<ot.length;xt++)if((pt=ot[xt].cd[0].trace).selectedpoints&&(pt.selectedpoints.length>1||(He+=pt.selectedpoints.length)>1))return!1;return 1===He}(nt)&&(Dt=Ee(Ht))){for(et&&et.remove(),Lt=0;Lt<nt.length;Lt++)(ct=nt[Lt])._module.selectPoints(ct,!1);Re(Oe,nt),fe(We),Rt&&Ke(Oe)}else{for(vt=be.shiftKey&&(void 0!==Dt?Dt:Ee(Ht)),yt=function(ot,pt,xt){return{pointNumber:ot,searchInfo:pt,subtract:!!xt}}(Ht.pointNumber,Ht.searchInfo,vt),ut=ie(We.selectionDefs.concat([yt])),Lt=0;Lt<nt.length;Lt++)if(Ct=Te(nt[Lt]._module.selectPoints(nt[Lt],ut),nt[Lt]),Wt.length)for(var it=0;it<Ct.length;it++)Wt.push(Ct[it]);else Wt=Ct;if(Re(Oe,nt,mt={points:Wt}),yt&&We&&We.selectionDefs.push(yt),et){var st=We.mergedPolygons,Je=l(We.dragmode);h(we(st,Je),et,We)}Rt&&qe(Oe,mt)}}}function ne(be){return"pointNumber"in be&&"searchInfo"in be}function Q(be){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Oe,Le,Ue,Ze){return Ze.cd[0].trace._expandedIndex===be.searchInfo.cd[0].trace._expandedIndex&&Ue===be.pointNumber},isRect:!1,degenerate:!1,subtract:!!be.subtract}}function ie(be){if(be.length){for(var Oe=[],Le=ne(be[0])?0:be[0][0][0],Ue=Le,Ze=ne(be[0])?0:be[0][0][1],We=Ze,et=0;et<be.length;et++)if(ne(be[et]))Oe.push(Q(be[et]));else{var nt=$(be[et]);nt.subtract=!!be[et].subtract,Oe.push(nt),Le=Math.min(Le,nt.xmin),Ue=Math.max(Ue,nt.xmax),Ze=Math.min(Ze,nt.ymin),We=Math.max(We,nt.ymax)}return{xmin:Le,xmax:Ue,ymin:Ze,ymax:We,pts:[],contains:function(ct,yt,ut,Ct){for(var Dt=!1,vt=0;vt<Oe.length;vt++)Oe[vt].contains(ct,yt,ut,Ct)&&(Dt=!Oe[vt].subtract);return Dt},isRect:!1,degenerate:!1}}}function le(be,Oe,Le){var Ue=Oe._fullLayout,Ze=Le.plotinfo,We=Le.dragmode,et=Ue._lastSelectedSubplot&&Ue._lastSelectedSubplot===Ze.id,nt=(be.shiftKey||be.altKey)&&!(o(We)&&l(We));et&&nt&&Ze.selection&&Ze.selection.selectionDefs&&!Le.selectionDefs?(Le.selectionDefs=Ze.selection.selectionDefs,Le.mergedPolygons=Ze.selection.mergedPolygons):nt&&Ze.selection||fe(Le),et||(w(Oe),Ue._lastSelectedSubplot=Ze.id)}function fe(be,Oe){var Le=be.dragmode,Ue=be.plotinfo,Ze=be.gd;Ze._fullLayout._activeShapeIndex>=0&&Ze._fullLayout._deactivateShape(Ze),Ze._fullLayout._activeSelectionIndex>=0&&Ze._fullLayout._deactivateSelection(Ze);var We=Ze._fullLayout._zoomlayer,et=o(Le),nt=u(Le);if(et||nt){var ct,yt,ut=We.selectAll(".select-outline-"+Ue.id);ut&&Ze._fullLayout._outlining&&(et&&(ct=x(ut,be)),ct&&f.call("_guiRelayout",Ze,{shapes:ct}),nt&&!ue(be)&&(yt=b(ut,be)),yt&&(Ze._fullLayout._noEmitSelectedAtStart=!0,f.call("_guiRelayout",Ze,{selections:yt}).then(function(){Oe&&M(Ze)})),Ze._fullLayout._outlining=!1)}Ue.selection={},Ue.selection.selectionDefs=be.selectionDefs=[],Ue.selection.mergedPolygons=be.mergedPolygons=[]}function he(be){return be._id}function pe(be,Oe,Le,Ue){if(!be.calcdata)return[];var Ze,We,et,nt=[],ct=Oe.map(he),yt=Le.map(he);for(et=0;et<be.calcdata.length;et++)if(!0===(We=(Ze=be.calcdata[et])[0].trace).visible&&We._module&&We._module.selectPoints)if(!ue({subplot:Ue})||We.subplot!==Ue&&We.geo!==Ue)if("splom"===We.type){if(We._xaxes[ct[0]]&&We._yaxes[yt[0]]){var ut=xe(We._module,Ze,Oe[0],Le[0]);ut.scene=be._fullLayout._splomScenes[We.uid],nt.push(ut)}}else if("sankey"===We.type){var Ct=xe(We._module,Ze,Oe[0],Le[0]);nt.push(Ct)}else{if(-1===ct.indexOf(We.xaxis)||-1===yt.indexOf(We.yaxis))continue;nt.push(xe(We._module,Ze,P(be,We.xaxis),P(be,We.yaxis)))}else nt.push(xe(We._module,Ze,Oe[0],Le[0]));return nt}function xe(be,Oe,Le,Ue){return{_module:be,cd:Oe,xaxis:Le,yaxis:Ue}}function Ee(be){var Oe=be.searchInfo.cd[0].trace,Ue=be.pointNumbers;return!!Oe.selectedpoints&&Oe.selectedpoints.indexOf(Ue.length>0?Ue[0]:be.pointNumber)>-1}function Re(be,Oe,Le){var Ue,Ze;for(Ue=0;Ue<Oe.length;Ue++){var We=Oe[Ue].cd[0].trace._fullInput,et=be._fullLayout._tracePreGUI[We.uid]||{};void 0===et.selectedpoints&&(et.selectedpoints=We._input.selectedpoints||null)}if(Le){var nt=Le.points||[];for(Ue=0;Ue<Oe.length;Ue++)(Ze=Oe[Ue].cd[0].trace)._input.selectedpoints=Ze._fullInput.selectedpoints=[],Ze._fullInput!==Ze&&(Ze.selectedpoints=[]);for(var ct=0;ct<nt.length;ct++){var yt=nt[ct],ut=yt.data,Ct=yt.fullData,Dt=yt.pointIndex,vt=yt.pointIndices;vt?([].push.apply(ut.selectedpoints,vt),Ze._fullInput!==Ze&&[].push.apply(Ct.selectedpoints,vt)):(ut.selectedpoints.push(Dt),Ze._fullInput!==Ze&&Ct.selectedpoints.push(Dt))}}else for(Ue=0;Ue<Oe.length;Ue++)delete(Ze=Oe[Ue].cd[0].trace).selectedpoints,delete Ze._input.selectedpoints,Ze._fullInput!==Ze&&delete Ze._fullInput.selectedpoints;!function(mt,Lt){for(var Ft=!1,Rt=0;Rt<Lt.length;Rt++){var Wt=Lt[Rt],Ht=Wt.cd;f.traceIs(Ht[0].trace,"regl")&&(Ft=!0);var it=Wt._module,st=it.styleOnSelect||it.style;st&&(st(mt,Ht,Ht[0].node3),Ht[0].nodeRangePlot3&&st(mt,Ht,Ht[0].nodeRangePlot3))}Ft&&(R(mt),F(mt))}(be,Oe)}function ke(be,Oe,Le){for(var Ue=(Le?I.difference:I.union)({regions:be},{regions:[Oe]}).regions.reverse(),Ze=0;Ze<Ue.length;Ze++){var We=Ue[Ze];We.subtract=ce(We,Ue.slice(0,Ze))}return Ue}function Te(be,Oe){if(Array.isArray(be))for(var Le=Oe.cd,Ue=Oe.cd[0].trace,Ze=0;Ze<be.length;Ze++)be[Ze]=c(be[Ze],Ue,Le);return be}function we(be,Oe){for(var Le=[],Ue=0;Ue<be.length;Ue++){Le[Ue]=[];for(var Ze=0;Ze<be[Ue].length;Ze++){Le[Ue][Ze]=[],Le[Ue][Ze][0]=Ze?"L":"M";for(var We=0;We<be[Ue][Ze].length;We++)Le[Ue][Ze].push(be[Ue][Ze][We])}Oe||Le[Ue].push(["Z",Le[Ue][0][1],Le[Ue][0][2]])}return Le}function je(be,Oe){for(var Le,Ue,Ze=[],We=[],et=0;et<Oe.length;et++){var nt=Oe[et];Ue=nt._module.selectPoints(nt,be),We.push(Ue),Le=Te(Ue,nt),Ze=Ze.concat(Le)}return Ze}function Ce(be,Oe,Le,Ue,Ze){var We,et,nt,ct=!!Ue;Ze&&(We=Ze.plotinfo,et=Ze.xaxes[0]._id,nt=Ze.yaxes[0]._id);var yt=[],ut=[],Ct=me(be),Dt=be._fullLayout;if(We){var vt=Dt._zoomlayer,mt=Dt.dragmode,Lt=o(mt),Ft=u(mt);if(Lt||Ft){var Rt=P(be,et,"x"),Wt=P(be,nt,"y");if(Rt&&Wt){var Ht=vt.selectAll(".select-outline-"+We.id);if(Ht&&be._fullLayout._outlining&&Ht.length){for(var it=Ht[0][0].getAttribute("d"),st=_(it,be,We),Je=[],ot=0;ot<st.length;ot++){for(var pt=st[ot],xt=[],He=0;He<pt.length;He++)xt.push([Ae(Rt,pt[He][1]),Ae(Wt,pt[He][2])]);xt.xref=et,xt.yref=nt,xt.subtract=ce(xt,Je),Je.push(xt)}Ct=Ct.concat(Je)}}}}var Ge=et&&nt?[et+nt]:Dt._subplots.cartesian;!function(qn){var Wn=qn.calcdata;if(Wn)for(var Nn=0;Nn<Wn.length;Nn++){var yr=qn._fullLayout._splomScenes;if(yr){var fr=yr[Wn[Nn][0].trace.uid];fr&&(fr.selectBatch=[])}}}(be);for(var dt={},ht=0;ht<Ge.length;ht++){var kt=Ge[ht],St=kt.indexOf("y"),Et=kt.slice(0,St),wt=kt.slice(St),Nt=et&&nt?Le:void 0;if(Nt=ge(Ct,Et,wt,Nt)){var _t=Ue;if(!ct){var Mt=P(be,Et,"x"),Pt=P(be,wt,"y");_t=pe(be,[Mt],[Pt],kt);for(var Zt=0;Zt<_t.length;Zt++){var $t=_t[Zt],Xt=$t.cd[0],dn=Xt.trace;if("scattergl"===$t._module.name&&!Xt.t.xpx){var on=dn.x,cn=dn.y,tn=dn._length;Xt.t.xpx=[],Xt.t.ypx=[];for(var Cn=0;Cn<tn;Cn++)Xt.t.xpx[Cn]=Mt.c2p(on[Cn]),Xt.t.ypx[Cn]=Pt.c2p(cn[Cn])}"splom"===$t._module.name&&(dt[dn.uid]||(dt[dn.uid]=!0))}}var Fn=je(Nt,_t);yt=yt.concat(Fn),ut=ut.concat(_t)}}var En={points:yt};Re(be,ut,En);var rn=Dt.clickmode.indexOf("event")>-1&&Oe;if(!We&&Oe){var yn=me(be,!0);if(yn.length){var pn=yn[0].xref,bn=yn[0].yref;if(pn&&bn){var In=Ne(yn);De([P(be,pn,"x"),P(be,bn,"y")])(En,In)}}be._fullLayout._noEmitSelectedAtStart?be._fullLayout._noEmitSelectedAtStart=!1:rn&&qe(be,En),Dt._reselect=!1}if(!We&&Dt._deselect){var _n=Dt._deselect;(function(qn,Wn,Nn){for(var Xn=0;Xn<Nn.length;Xn++){var yr=Nn[Xn];if(yr.xaxis&&yr.xaxis._id===qn&&yr.yaxis&&yr.yaxis._id===Wn)return!0}return!1})(et=_n.xref,nt=_n.yref,ut)||Ie(be,et,nt,Ue),rn&&(En.points.length?qe(be,En):Ke(be)),Dt._deselect=!1}return{eventData:En,selectionTesters:Le}}function Ie(be,Oe,Le,Ue){Ue=pe(be,[P(be,Oe,"x")],[P(be,Le,"y")],Oe+Le);for(var Ze=0;Ze<Ue.length;Ze++){var We=Ue[Ze];We._module.selectPoints(We,!1)}Re(be,Ue)}function ge(be,Oe,Le,Ue){for(var Ze,We=0;We<be.length;We++){var et=be[We];Oe===et.xref&&Le===et.yref&&(Ze?Ue=ie(Ze=ke(Ze,et,!!et.subtract)):(Ze=[et],Ue=$(et)))}return Ue}function me(be,Oe){for(var Le=[],Ue=be._fullLayout,Ze=Ue.selections,We=Ze.length,et=0;et<We;et++)if(!Oe||et===Ue._activeSelectionIndex){var nt=Ze[et];if(nt){var ct,yt,ut,Ct,Dt,vt=nt.xref,mt=nt.yref,Lt=P(be,vt,"x"),Ft=P(be,mt,"y");if("rect"===nt.type){Dt=[];var Rt=Ae(Lt,nt.x0),Wt=Ae(Lt,nt.x1),Ht=Ae(Ft,nt.y0),it=Ae(Ft,nt.y1);Dt=[[Rt,Ht],[Rt,it],[Wt,it],[Wt,Ht]],ct=Math.min(Rt,Wt),yt=Math.max(Rt,Wt),ut=Math.min(Ht,it),Ct=Math.max(Ht,it),Dt.xmin=ct,Dt.xmax=yt,Dt.ymin=ut,Dt.ymax=Ct,Dt.xref=vt,Dt.yref=mt,Dt.subtract=!1,Dt.isRect=!0,Le.push(Dt)}else if("path"===nt.type)for(var st=nt.path.split("Z"),Je=[],ot=0;ot<st.length;ot++){var pt=st[ot];if(pt){var xt=d.extractPathCoords(pt+="Z",g.paramIsX,"raw"),He=d.extractPathCoords(pt,g.paramIsY,"raw");ct=1/0,yt=-1/0,ut=1/0,Ct=-1/0,Dt=[];for(var Ge=0;Ge<xt.length;Ge++){var dt=Ae(Lt,xt[Ge]),ht=Ae(Ft,He[Ge]);Dt.push([dt,ht]),ct=Math.min(dt,ct),yt=Math.max(dt,yt),ut=Math.min(ht,ut),Ct=Math.max(ht,Ct)}Dt.xmin=ct,Dt.xmax=yt,Dt.ymin=ut,Dt.ymax=Ct,Dt.xref=vt,Dt.yref=mt,Dt.subtract=ce(Dt,Je),Je.push(Dt),Le.push(Dt)}}}}return Le}function ce(be,Oe){for(var Le=!1,Ue=0;Ue<Oe.length;Ue++)for(var Ze=Oe[Ue],We=0;We<be.length;We++)if(C(be[We],Ze)){Le=!Le;break}return Le}function Ae(be,Oe){return"date"===be.type&&(Oe=Oe.replace("_"," ")),"log"===be.type?be.c2p(Oe):be.r2p(Oe,null,be.calendar)}function Ne(be){for(var Oe=be.length,Le=[],Ue=0;Ue<Oe;Ue++){var Ze=be[Ue];Le=(Le=Le.concat(Ze)).concat([Ze[0]])}return(We=Le).isRect=5===We.length&&We[0][0]===We[4][0]&&We[0][1]===We[4][1]&&We[0][0]===We[1][0]&&We[2][0]===We[3][0]&&We[0][1]===We[3][1]&&We[1][1]===We[2][1]||We[0][1]===We[1][1]&&We[2][1]===We[3][1]&&We[0][0]===We[3][0]&&We[1][0]===We[2][0],We.isRect&&(We.xmin=Math.min(We[0][0],We[2][0]),We.xmax=Math.max(We[0][0],We[2][0]),We.ymin=Math.min(We[0][1],We[2][1]),We.ymax=Math.max(We[0][1],We[2][1])),We;var We}function De(be){return function(Oe,Le){for(var Ue,Ze,We=0;We<be.length;We++){var et=be[We],nt=et._id,ct=nt.charAt(0);if(Le.isRect){Ue||(Ue={});var yt=Le[ct+"min"],ut=Le[ct+"max"];void 0!==yt&&void 0!==ut&&(Ue[nt]=[H(et,yt),H(et,ut)].sort(D))}else Ze||(Ze={}),Ze[nt]=Le.map(X(et))}Ue&&(Oe.range=Ue),Ze&&(Oe.lassoPoints=Ze)}}function qe(be,Oe){Oe&&(Oe.selections=(be.layout||{}).selections||[]),be.emit("plotly_selected",Oe)}function Ke(be){be.emit("plotly_deselect",null)}se.exports={reselect:Ce,prepSelect:function(be,Oe,Le,Ue,Ze){var We=!ue(Ue),et=s(Ze),nt=a(Ze),ct=l(Ze),yt=o(Ze),ut=u(Ze),Ct="drawcircle"===Ze,Dt="drawline"===Ze||Ct,vt=Ue.gd,mt=vt._fullLayout,Lt=ut&&"immediate"===mt.newselection.mode&&We,Ft=mt._zoomlayer,Rt=Ue.element.getBoundingClientRect(),Wt=Ue.plotinfo,Ht=K(Wt),it=Oe-Rt.left,st=Le-Rt.top;mt._calcInverseTransform(vt);var ot,pt,xt,He,Ge,dt,ht,Je=m.apply3DTransform(mt._invTransform)(it,st),kt=mt._invScaleX,St=mt._invScaleY,Et=it=Je[0],wt=st=Je[1],Nt="M"+it+","+st,_t=Ue.xaxes[0],Mt=Ue.yaxes[0],Pt=_t._length,Zt=Mt._length,$t=be.altKey&&!(o(Ze)&&ct);le(be,vt,Ue),et&&(ot=z([[it,st]],B.BENDPX));var Xt=Ft.selectAll("path.select-outline-"+Wt.id).data([1]),dn=yt?mt.newshape:mt.newselection;yt&&(Ue.hasText=dn.label.text||dn.label.texttemplate);var on=yt&&!ct?dn.fillcolor:"rgba(0,0,0,0)",cn=dn.line.color||(We?T.contrast(vt._fullLayout.plot_bgcolor):"#7f7f7f");Xt.enter().append("path").attr("class","select-outline select-outline-"+Wt.id).style({opacity:yt?dn.opacity/2:1,"stroke-dasharray":k(dn.line.dash,dn.line.width),"stroke-width":dn.line.width+"px","shape-rendering":"crispEdges"}).call(T.stroke,cn).call(T.fill,on).attr("fill-rule","evenodd").classed("cursor-move",!!yt).attr("transform",Ht).attr("d",Nt+"Z");var tn=Ft.append("path").attr("class","zoombox-corners").style({fill:T.background,stroke:T.defaultLine,"stroke-width":1}).attr("transform",Ht).attr("d","M0,0Z");if(yt&&Ue.hasText){var Cn=Ft.select(".label-temp");Cn.empty()&&(Cn=Ft.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Fn=mt._uid+B.SELECTID,En=[],rn=pe(vt,Ue.xaxes,Ue.yaxes,Ue.subplot);Lt&&!be.shiftKey&&(Ue._clearSubplotSelections=function(){if(We){var pn=_t._id,bn=Mt._id;Ie(vt,pn,bn,rn);for(var In=(vt.layout||{}).selections||[],_n=[],qn=!1,Wn=0;Wn<In.length;Wn++){var Nn=mt.selections[Wn];Nn.xref!==pn||Nn.yref!==bn?_n.push(In[Wn]):qn=!0}qn&&(vt._fullLayout._noEmitSelectedAtStart=!0,f.call("_guiRelayout",vt,{selections:_n}))}});var pn,yn=(pn=Ue).plotinfo.fillRangeItems||De(pn.xaxes.concat(pn.yaxes));Ue.moveFn=function(pn,bn){Ue._clearSubplotSelections&&(Ue._clearSubplotSelections(),Ue._clearSubplotSelections=void 0),Et=Math.max(0,Math.min(Pt,kt*pn+it)),wt=Math.max(0,Math.min(Zt,St*bn+st));var In=Math.abs(Et-it),_n=Math.abs(wt-st);if(nt){var qn,Wn,Nn;if(ut){var Xn=mt.selectdirection;switch(qn="any"===Xn?_n<Math.min(.6*In,J)?"h":In<Math.min(.6*_n,J)?"v":"d":Xn){case"h":Wn=Ct?Zt/2:0,Nn=Zt;break;case"v":Wn=Ct?Pt/2:0,Nn=Pt}}if(yt)switch(mt.newshape.drawdirection){case"vertical":qn="h",Wn=Ct?Zt/2:0,Nn=Zt;break;case"horizontal":qn="v",Wn=Ct?Pt/2:0,Nn=Pt;break;case"ortho":In<_n?(qn="h",Wn=st,Nn=wt):(qn="v",Wn=it,Nn=Et);break;default:qn="d"}"h"===qn?((He=Dt?p(Ct,[Et,Wn],[Et,Nn]):[[it,Wn],[it,Nn],[Et,Nn],[Et,Wn]]).xmin=Dt?Et:Math.min(it,Et),He.xmax=Dt?Et:Math.max(it,Et),He.ymin=Math.min(Wn,Nn),He.ymax=Math.max(Wn,Nn),tn.attr("d","M"+He.xmin+","+(st-J)+"h-4v"+2*J+"h4ZM"+(He.xmax-1)+","+(st-J)+"h4v"+2*J+"h-4Z")):"v"===qn?((He=Dt?p(Ct,[Wn,wt],[Nn,wt]):[[Wn,st],[Wn,wt],[Nn,wt],[Nn,st]]).xmin=Math.min(Wn,Nn),He.xmax=Math.max(Wn,Nn),He.ymin=Dt?wt:Math.min(st,wt),He.ymax=Dt?wt:Math.max(st,wt),tn.attr("d","M"+(it-J)+","+He.ymin+"v-4h"+2*J+"v4ZM"+(it-J)+","+(He.ymax-1)+"v4h"+2*J+"v-4Z")):"d"===qn&&((He=Dt?p(Ct,[it,st],[Et,wt]):[[it,st],[it,wt],[Et,wt],[Et,st]]).xmin=Math.min(it,Et),He.xmax=Math.max(it,Et),He.ymin=Math.min(st,wt),He.ymax=Math.max(st,wt),tn.attr("d","M0,0Z"))}else et&&(ot.addPt([Et,wt]),He=ot.filtered);if(Ue.selectionDefs&&Ue.selectionDefs.length?(xt=ke(Ue.mergedPolygons,He,$t),He.subtract=$t,pt=ie(Ue.selectionDefs.concat([He]))):(xt=[He],pt=$(He)),h(we(xt,ct),Xt,Ue),ut){var yr,fr=Ce(vt,!1),Er=fr.eventData?fr.eventData.points.slice():[];fr=Ce(vt,!1,pt,rn,Ue),pt=fr.selectionTesters,ht=fr.eventData,yr=ot?ot.filtered:Ne(xt),O.throttle(Fn,B.SELECTDELAY,function(){for(var gr=(En=je(pt,rn)).slice(),mr=0;mr<Er.length;mr++){for(var zr=Er[mr],Jt=!1,an=0;an<gr.length;an++)if(gr[an].curveNumber===zr.curveNumber&&gr[an].pointNumber===zr.pointNumber){Jt=!0;break}Jt||gr.push(zr)}gr.length&&(ht||(ht={}),ht.points=gr),yn(ht,yr),vt.emit("plotly_selecting",ht)})}},Ue.clickFn=function(pn,bn){if(tn.remove(),vt._fullLayout._activeShapeIndex>=0)vt._fullLayout._deactivateShape(vt);else if(!yt){var In=mt.clickmode;O.done(Fn).then(function(){if(O.clear(Fn),2===pn){for(Xt.remove(),Ge=0;Ge<rn.length;Ge++)(dt=rn[Ge])._module.selectPoints(dt,!1);if(Re(vt,rn),fe(Ue),Ke(vt),rn.length){var _n=rn[0].xaxis,qn=rn[0].yaxis;if(_n&&qn){for(var Wn=[],Nn=vt._fullLayout.selections,Xn=0;Xn<Nn.length;Xn++){var yr=Nn[Xn];yr&&(yr.xref===_n._id&&yr.yref===qn._id||Wn.push(yr))}Wn.length<Nn.length&&(vt._fullLayout._noEmitSelectedAtStart=!0,f.call("_guiRelayout",vt,{selections:Wn}))}}}else In.indexOf("select")>-1&&ae(bn,vt,Ue.xaxes,Ue.yaxes,Ue.subplot,Ue,Xt),"event"===In&&qe(vt,void 0);v.click(vt,bn)}).catch(m.error)}},Ue.doneFn=function(){tn.remove(),O.done(Fn).then(function(){O.clear(Fn),!Lt&&He&&Ue.selectionDefs&&(He.subtract=$t,Ue.selectionDefs.push(He),Ue.mergedPolygons.length=0,[].push.apply(Ue.mergedPolygons,xt)),(Lt||yt)&&fe(Ue,Lt),Ue.doneFnCompleted&&Ue.doneFnCompleted(En),ut&&qe(vt,ht)}).catch(m.error)}},clearOutline:w,clearSelectionsCache:fe,selectOnClick:ae}},89827:function(se,U,r){"use strict";var I=r(50215),C=r(41940),f=r(82196).line,k=r(79952).P,T=r(1426).extendFlat,v=r(44467).templatedArray,c=(r(24695),r(5386).R),i=r(37281);se.exports=v("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},I.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},I.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},f.color,{editType:"arraydraw"}),width:T({},f.width,{editType:"calc+arraydraw"}),dash:T({},k,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:c({},{keys:Object.keys(i)}),font:C({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(21459),k=r(30477);function T(s){return c(s.line.width,s.xsizemode,s.x0,s.x1,s.path,!1)}function v(s){return c(s.line.width,s.ysizemode,s.y0,s.y1,s.path,!0)}function c(s,a,o,l,u,d){var g=s/2,h=d;if("pixel"===a){var w=u?k.extractPathCoords(u,d?f.paramIsY:f.paramIsX):[o,l],y=I.aggNums(Math.max,null,w),p=I.aggNums(Math.min,null,w),_=p<0?Math.abs(p)+g:g,x=y>0?y+g:g;return{ppad:g,ppadplus:h?_:x,ppadminus:h?x:_}}return{ppad:g}}function i(s,a,o,l,u){var d="category"===s.type||"multicategory"===s.type?s.r2c:s.d2c;if(void 0!==a)return[d(a),d(o)];if(l){var g,h,w,y,p=1/0,_=-1/0,x=l.match(f.segmentRE);for("date"===s.type&&(d=k.decodeDate(d)),g=0;g<x.length;g++)void 0!==(h=u[x[g].charAt(0)].drawn)&&(!(w=x[g].substr(1).match(f.paramRE))||w.length<h||((y=d(w[h]))<p&&(p=y),y>_&&(_=y)));return _>=p?[p,_]:void 0}}se.exports=function(s){var o=I.filterVisible(s._fullLayout.shapes);if(o.length&&s._fullData.length)for(var l=0;l<o.length;l++){var u,d,g=o[l];g._extremes={};var h=C.getRefType(g.xref),w=C.getRefType(g.yref);if("paper"!==g.xref&&"domain"!==h){var y="pixel"===g.xsizemode?g.xanchor:g.x0,p="pixel"===g.xsizemode?g.xanchor:g.x1;(d=i(u=C.getFromId(s,g.xref),y,p,g.path,f.paramIsX))&&(g._extremes[u._id]=C.findExtremes(u,d,T(g)))}if("paper"!==g.yref&&"domain"!==w){var _="pixel"===g.ysizemode?g.yanchor:g.y0,x="pixel"===g.ysizemode?g.yanchor:g.y1;(d=i(u=C.getFromId(s,g.yref),_,x,g.path,f.paramIsY))&&(g._extremes[u._id]=C.findExtremes(u,d,v(g)))}}}},21459:function(se){"use strict";se.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(85501),k=r(89827),T=r(30477);function v(c,i,s){function a(G,H){return I.coerce(c,i,k,G,H)}if(a("visible")){var o=a("path"),l=a("type",o?"path":"rect"),u="path"!==l;u&&delete i.path,a("editable"),a("layer"),a("opacity"),a("fillcolor"),a("fillrule"),a("line.width")&&(a("line.color"),a("line.dash"));for(var d=a("xsizemode"),g=a("ysizemode"),h=["x","y"],w=0;w<2;w++){var y,p,_,x=h[w],b=x+"anchor",M="x"===x?d:g,m={_fullLayout:s},D=C.coerceRef(c,i,m,x,void 0,"paper");if("range"===C.getRefType(D)?((y=C.getFromId(m,D))._shapeIndices.push(i._index),_=T.rangeToShapePosition(y),p=T.shapePositionToRange(y)):p=_=I.identity,u){var S=x+"0",O=x+"1",P=c[S],R=c[O];c[S]=p(c[S],!0),c[O]=p(c[O],!0),"pixel"===M?(a(S,0),a(O,10)):(C.coercePosition(i,m,a,D,S,.25),C.coercePosition(i,m,a,D,O,.75)),i[S]=_(i[S]),i[O]=_(i[O]),c[S]=P,c[O]=R}if("pixel"===M){var F=c[b];c[b]=p(c[b],!0),C.coercePosition(i,m,a,D,b,.25),i[b]=_(i[b]),c[b]=F}}u&&I.noneOrAll(c,i,["x0","x1","y0","y1"]);var B,J,z="line"===l;if(u&&(B=a("label.texttemplate")),B||(J=a("label.text")),J||B){a("label.textangle");var $=a("label.textposition",z?"middle":"middle center");a("label.xanchor"),a("label.yanchor",(H=$,z?"bottom":-1!==H.indexOf("top")?"top":-1!==H.indexOf("bottom")?"bottom":"middle")),a("label.padding"),I.coerceFont(a,"label.font",s.font)}}var H}se.exports=function(c,i){f(c,i,{name:"shapes",handleItemDefaults:v})}},48100:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(63893),k=r(91424),T=r(60165).readPaths,v=r(30477),c=v.getPathString,i=r(37281),s=r(18783).FROM_TL;se.exports=function(a,o,l,u){if(u.selectAll(".shape-label").remove(),l.label.text||l.label.texttemplate){var d;if(l.label.texttemplate){var g={};if("path"!==l.type){var h=C.getFromId(a,l.xref),w=C.getFromId(a,l.yref);for(var y in i){var p=i[y](l,h,w);void 0!==p&&(g[y]=p)}}d=I.texttemplateStringForShapes(l.label.texttemplate,{},a._fullLayout._d3locale,g)}else d=l.label.text;var _,x,b,M,m={"data-index":o},D=l.label.font,S=u.append("g").attr(m).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(d);if(l.path){var O=c(a,l),P=T(O,a);_=1/0,b=1/0,x=-1/0,M=-1/0;for(var R=0;R<P.length;R++)for(var F=0;F<P[R].length;F++)for(var B=P[R][F],J=1;J<B.length;J+=2){var z=B[J],$=B[J+1];_=Math.min(_,z),x=Math.max(x,z),b=Math.min(b,$),M=Math.max(M,$)}}else{var G=C.getFromId(a,l.xref),H=C.getRefType(l.xref),X=C.getFromId(a,l.yref),K=C.getRefType(l.yref),ue=v.getDataToPixel(a,G,!1,H),ae=v.getDataToPixel(a,X,!0,K);_=ue(l.x0),x=ue(l.x1),b=ae(l.y0),M=ae(l.y1)}var ne=l.label.textangle;"auto"===ne&&(ne="line"===l.type?(he=_,pe=b,xe=x,Ee=M,ke=Math.abs(xe-he),-180/Math.PI*Math.atan2(xe>=he?pe-Ee:Ee-pe,ke)):0),S.call(function(he){return he.call(k.font,D).attr({}),f.convertToTspans(he,a),he});var Q=function(he,pe,xe,Ee,Re,ke,Te){var we,je,Ce,Ie,ge=Re.label.textposition,me=Re.label.textangle,ce=Re.label.padding,Ae=Re.type,Ne=Math.PI/180*ke,De=Math.sin(Ne),qe=Math.cos(Ne),Ke=Re.label.xanchor,be=Re.label.yanchor;if("line"===Ae){"start"===ge?(we=he,je=pe):"end"===ge?(we=xe,je=Ee):(we=(he+xe)/2,je=(pe+Ee)/2),"auto"===Ke&&(Ke="start"===ge?"auto"===me?xe>he?"left":xe<he?"right":"center":xe>he?"right":xe<he?"left":"center":"end"===ge?"auto"===me?xe>he?"right":xe<he?"left":"center":xe>he?"left":xe<he?"right":"center":"center");var Oe={bottom:-1,middle:0,top:1};if("auto"===me){var Le=Oe[be];Ce=-ce*De*Le,Ie=ce*qe*Le}else Ce=ce*{left:1,center:0,right:-1}[Ke],Ie=ce*Oe[be];we+=Ce,je+=Ie}else Ce=ce+3,-1!==ge.indexOf("right")?(we=Math.max(he,xe)-Ce,"auto"===Ke&&(Ke="right")):-1!==ge.indexOf("left")?(we=Math.min(he,xe)+Ce,"auto"===Ke&&(Ke="left")):(we=(he+xe)/2,"auto"===Ke&&(Ke="center")),je=-1!==ge.indexOf("top")?Math.min(pe,Ee):-1!==ge.indexOf("bottom")?Math.max(pe,Ee):(pe+Ee)/2,Ie=ce,"bottom"===be?je-=Ie:"top"===be&&(je+=Ie);var Ue=s[be],Ze=Re.label.font.size,We=Te.height;return{textx:we+(We*Ue-Ze)*De,texty:je+-(We*Ue-Ze)*qe,xanchor:Ke}}(_,b,x,M,l,ne,k.bBox(S.node())),ie=Q.textx,le=Q.texty;S.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Q.xanchor],y:le,x:ie,transform:"rotate("+ne+","+ie+","+le+")"}).call(f.positionText,ie,le)}var he,pe,xe,Ee,ke}},42359:function(se,U,r){"use strict";var I=r(71828).strTranslate,C=r(28569),f=r(64505),k=f.drawMode,T=f.selectMode,v=r(73972),c=r(7901),i=r(89995),s=i.i000,a=i.i090,o=i.i180,l=i.i270,u=r(51873).clearOutlineControllers,d=r(60165),g=d.pointsOnRectangle,h=d.pointsOnEllipse,w=d.writePaths,y=r(90551).newShapes,p=r(90551).createShapeObj,_=r(35855),x=r(48100);function b(M,m){var D,S,O,F=M.length;return S=M[D=(m+1)%F][1],O=M[D][2],S===M[m][1]&&O===M[m][2]&&(S=M[D=(m+2)%F][1],O=M[D][2]),[D,S,O]}se.exports=function M(m,D,S,O){O||(O=0);var P=S.gd;function R(){M(m,D,S,O++),(h(m[0])||S.hasText)&&F({redrawing:!0})}function F(Re){var ke={};void 0!==S.isActiveShape&&(S.isActiveShape=!1,ke=y(D,S)),void 0!==S.isActiveSelection&&(S.isActiveSelection=!1,ke=_(D,S),P._fullLayout._reselect=!0),Object.keys(ke).length&&v.call((Re||{}).redrawing?"relayout":"_guiRelayout",P,ke)}var B,J,z,$,G,H=P._fullLayout._zoomlayer,X=S.dragmode,K=k(X),ue=T(X);if((K||ue)&&(P._fullLayout._outlining=!0),u(P),D.attr("d",w(m)),O||!S.isActiveShape&&!S.isActiveSelection||(G=function(Re,ke){for(var Te=0;Te<ke.length;Te++){var we=ke[Te];Re[Te]=[];for(var je=0;je<we.length;je++){Re[Te][je]=[];for(var Ce=0;Ce<we[je].length;Ce++)Re[Te][je][Ce]=we[je][Ce]}}return Re}([],m),function(Re){B=[];for(var ke=0;ke<m.length;ke++){var Te=m[ke],we=g(Te),je=!we&&h(Te);B[ke]=[];for(var Ce=Te.length,Ie=0;Ie<Ce;Ie++)if("Z"!==Te[Ie][0]&&(!je||Ie===s||Ie===a||Ie===o||Ie===l)){var ge,me=we&&S.isActiveSelection;me&&(ge=b(Te,Ie));var ce=Te[Ie][1],Ae=Te[Ie][2],Ne=Re.append(me?"rect":"circle").attr("data-i",ke).attr("data-j",Ie).style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(me){var De=ge[1]-ce,qe=ge[2]-Ae,Ke=qe?5:Math.max(Math.min(25,Math.abs(De)-5),5),be=De?5:Math.max(Math.min(25,Math.abs(qe)-5),5);Ne.classed(qe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Ke).attr("height",be).attr("x",ce-Ke/2).attr("y",Ae-be/2).attr("transform",I(De/2,qe/2))}else Ne.classed("cursor-grab",!0).attr("r",5).attr("cx",ce).attr("cy",Ae);B[ke][Ie]={element:Ne.node(),gd:P,prepFn:Q,doneFn:le,clickFn:fe},C.init(B[ke][Ie])}}}(H.append("g").attr("class","outline-controllers")),J=[],m.length&&(J[0]={element:D[0][0],gd:P,prepFn:function pe(Re){(z=+Re.srcElement.getAttribute("data-i"))||(z=0),J[z].moveFn=he},doneFn:function xe(){F()},clickFn:function Ee(Re){2===Re&&function(ke){if(T(ke._fullLayout.dragmode)){u(ke);var Te=ke._fullLayout._activeSelectionIndex,we=(ke.layout||{}).selections||[];if(Te<we.length){for(var je=[],Ce=0;Ce<we.length;Ce++)Ce!==Te&&je.push(we[Ce]);delete ke._fullLayout._activeSelectionIndex;var Ie=ke._fullLayout.selections[Te];ke._fullLayout._deselect={xref:Ie.xref,yref:Ie.yref},v.call("_guiRelayout",ke,{selections:je})}}}(P)}},C.init(J[0]))),K&&S.hasText){var ae=H.select(".label-temp"),ne=p(D,S,S.dragmode);x(P,"label-temp",ne,ae)}function Q(Re){z=+Re.srcElement.getAttribute("data-i"),$=+Re.srcElement.getAttribute("data-j"),B[z][$].moveFn=ie}function ie(Re,ke){if(m.length){var Te=G[z][$][1],we=G[z][$][2],je=m[z],Ce=je.length;if(g(je)){var Ie=Re,ge=ke;S.isActiveSelection&&(b(je,$)[1]===je[$][1]?ge=0:Ie=0);for(var me=0;me<Ce;me++)if(me!==$){var ce=je[me];ce[1]===je[$][1]&&(ce[1]=Te+Ie),ce[2]===je[$][2]&&(ce[2]=we+ge)}if(je[$][1]=Te+Ie,je[$][2]=we+ge,!g(je))for(var Ae=0;Ae<Ce;Ae++)for(var Ne=0;Ne<je[Ae].length;Ne++)je[Ae][Ne]=G[z][Ae][Ne]}else je[$][1]=Te+Re,je[$][2]=we+ke;R()}}function le(){F()}function fe(Re,ke){if(2===Re){z=+ke.srcElement.getAttribute("data-i"),$=+ke.srcElement.getAttribute("data-j");var Te=m[z];g(Te)||h(Te)||function(){if(m.length&&m[z]&&m[z].length){for(var we=[],je=0;je<m[z].length;je++)je!==$&&we.push(m[z][je]);we.length>1&&(2!==we.length||"Z"!==we[1][0])&&(0===$&&(we[0][0]="M"),m[z]=we,R(),F())}}()}}function he(Re,ke){(function(Te,we){if(m.length)for(var je=0;je<m.length;je++)for(var Ce=0;Ce<m[je].length;Ce++)for(var Ie=0;Ie+2<m[je][Ce].length;Ie+=2)m[je][Ce][Ie+1]=G[je][Ce][Ie+1]+Te,m[je][Ce][Ie+2]=G[je][Ce][Ie+2]+we})(Re,ke),R()}}},34031:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(71828),k=r(89298),T=r(60165).readPaths,v=r(42359),c=r(48100),i=r(51873).clearOutlineControllers,s=r(7901),a=r(91424),o=r(44467).arrayEditor,l=r(28569),u=r(6964),d=r(21459),g=r(30477),h=g.getPathString;function w(m){var D=m._fullLayout;for(var S in D._shapeUpperLayer.selectAll("path").remove(),D._shapeLowerLayer.selectAll("path").remove(),D._shapeUpperLayer.selectAll("text").remove(),D._shapeLowerLayer.selectAll("text").remove(),D._plots){var O=D._plots[S].shapelayer;O&&(O.selectAll("path").remove(),O.selectAll("text").remove())}for(var P=0;P<D.shapes.length;P++)D.shapes[P].visible&&_(m,P)}function y(m){return!!m._fullLayout._outlining}function p(m){return!m._context.edits.shapePosition}function _(m,D){m._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+D+'"]').remove();var S=g.makeShapesOptionsAndPlotinfo(m,D),O=S.options,P=S.plotinfo;O._input&&!1!==O.visible&&function R(F){var B=h(m,O),J={"data-index":D,"fill-rule":O.fillrule,d:B},z=O.opacity,$=O.fillcolor,G=O.line.width?O.line.color:"rgba(0,0,0,0)",H=O.line.width,X=O.line.dash;H||!0!==O.editable||(H=5,X="solid");var K="Z"!==B[B.length-1],ue=p(m)&&O.editable&&m._fullLayout._activeShapeIndex===D;ue&&($=K?"rgba(0,0,0,0)":m._fullLayout.activeshape.fillcolor,z=m._fullLayout.activeshape.opacity);var ae,ne=F.append("g").classed("shape-group",!0).attr({"data-index":D}),Q=ne.append("path").attr(J).style("opacity",z).call(s.stroke,G).call(s.fill,$).call(a.dashLine,X,H);if(x(ne,m,O),c(m,D,O,ne),(ue||m._context.edits.shapePosition)&&(ae=o(m.layout,"shapes",O)),ue){Q.style({cursor:"move"});var ie={element:Q.node(),plotinfo:P,gd:m,editHelpers:ae,hasText:O.label.text||O.label.texttemplate,isActiveShape:!0},le=T(B,m);v(le,Q,ie)}else m._context.edits.shapePosition?function(fe,he,pe,xe,Ee,Re){var ke,Te,we,je,Ce,Ie,ge,me,ce,Ae,Ne,De,qe,Ke,be,Oe,Ze="pixel"===pe.xsizemode,We="pixel"===pe.ysizemode,et="line"===pe.type,nt="path"===pe.type,ct=Re.modifyItem,yt=I.select(he.node().parentNode),ut=k.getFromId(fe,pe.xref),Ct=k.getRefType(pe.xref),Dt=k.getFromId(fe,pe.yref),vt=k.getRefType(pe.yref),mt=g.getDataToPixel(fe,ut,!1,Ct),Lt=g.getDataToPixel(fe,Dt,!0,vt),Ft=g.getPixelToData(fe,ut,!1,Ct),Rt=g.getPixelToData(fe,Dt,!0,vt),Wt=et?function(){var He=Math.max(pe.line.width,10),Ge=Ee.append("g").attr("data-index",xe).attr("drag-helper",!0);Ge.append("path").attr("d",he.attr("d")).style({cursor:"move","stroke-width":He,"stroke-opacity":"0"});var dt={"fill-opacity":"0"},ht=Math.max(He/2,10);return Ge.append("circle").attr({"data-line-point":"start-point",cx:Ze?mt(pe.xanchor)+pe.x0:mt(pe.x0),cy:We?Lt(pe.yanchor)-pe.y0:Lt(pe.y0),r:ht}).style(dt).classed("cursor-grab",!0),Ge.append("circle").attr({"data-line-point":"end-point",cx:Ze?mt(pe.xanchor)+pe.x1:mt(pe.x1),cy:We?Lt(pe.yanchor)-pe.y1:Lt(pe.y1),r:ht}).style(dt).classed("cursor-grab",!0),Ge}():he,Ht={element:Wt.node(),gd:fe,prepFn:function(xt){var He,Ge,dt,ht,kt,St,Et,wt;y(fe)||(Ze&&(Ce=mt(pe.xanchor)),We&&(Ie=Lt(pe.yanchor)),"path"===pe.type?be=pe.path:(ke=Ze?pe.x0:mt(pe.x0),Te=We?pe.y0:Lt(pe.y0),we=Ze?pe.x1:mt(pe.x1),je=We?pe.y1:Lt(pe.y1)),ke<we?(ce=ke,qe="x0",Ae=we,Ke="x1"):(ce=we,qe="x1",Ae=ke,Ke="x0"),!We&&Te<je||We&&Te>je?(ge=Te,Ne="y0",me=je,De="y1"):(ge=je,Ne="y1",me=Te,De="y0"),it(xt),ot(Ee,pe),He=he,kt=(Ge=pe).yref,St=k.getFromId(dt=fe,ht=Ge.xref),Et=k.getFromId(dt,kt),wt="","paper"===ht||St.autorange||(wt+=ht),"paper"===kt||Et.autorange||(wt+=kt),a.setClipUrl(He,wt?"clip"+dt._fullLayout._uid+wt:null,dt),Ht.moveFn="move"===Oe?st:Je,Ht.altKey=xt.altKey)},doneFn:function(){y(fe)||(u(he),pt(Ee),x(he,fe,pe),C.call("_guiRelayout",fe,Re.getUpdateObj()))},clickFn:function(){y(fe)||pt(Ee)}};function it(xt){if(y(fe))Oe=null;else if(et)Oe="path"===xt.target.tagName?"move":"start-point"===xt.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var He=Ht.element.getBoundingClientRect(),Ge=He.right-He.left,dt=He.bottom-He.top,St=!nt&&Ge>10&&dt>10&&!xt.shiftKey?l.getCursor((xt.clientX-He.left)/Ge,1-(xt.clientY-He.top)/dt):"move";u(he,St),Oe=St.split("-")[0]}}function st(xt,He){if("path"===pe.type){var Ge=function(kt){return kt},dt=Ge,ht=Ge;Ze?ct("xanchor",pe.xanchor=Ft(Ce+xt)):(dt=function(kt){return Ft(mt(kt)+xt)},ut&&"date"===ut.type&&(dt=g.encodeDate(dt))),We?ct("yanchor",pe.yanchor=Rt(Ie+He)):(ht=function(kt){return Rt(Lt(kt)+He)},Dt&&"date"===Dt.type&&(ht=g.encodeDate(ht))),ct("path",pe.path=b(be,dt,ht))}else Ze?ct("xanchor",pe.xanchor=Ft(Ce+xt)):(ct("x0",pe.x0=Ft(ke+xt)),ct("x1",pe.x1=Ft(we+xt))),We?ct("yanchor",pe.yanchor=Rt(Ie+He)):(ct("y0",pe.y0=Rt(Te+He)),ct("y1",pe.y1=Rt(je+He)));he.attr("d",h(fe,pe)),ot(Ee,pe),c(fe,xe,pe,yt)}function Je(xt,He){if(nt){var Ge=function(cn){return cn},dt=Ge,ht=Ge;Ze?ct("xanchor",pe.xanchor=Ft(Ce+xt)):(dt=function(cn){return Ft(mt(cn)+xt)},ut&&"date"===ut.type&&(dt=g.encodeDate(dt))),We?ct("yanchor",pe.yanchor=Rt(Ie+He)):(ht=function(cn){return Rt(Lt(cn)+He)},Dt&&"date"===Dt.type&&(ht=g.encodeDate(ht))),ct("path",pe.path=b(be,dt,ht))}else if(et){if("resize-over-start-point"===Oe){var kt=ke+xt,St=We?Te-He:Te+He;ct("x0",pe.x0=Ze?kt:Ft(kt)),ct("y0",pe.y0=We?St:Rt(St))}else if("resize-over-end-point"===Oe){var Et=we+xt,wt=We?je-He:je+He;ct("x1",pe.x1=Ze?Et:Ft(Et)),ct("y1",pe.y1=We?wt:Rt(wt))}}else{var Nt=function(cn){return-1!==Oe.indexOf(cn)},_t=Nt("n"),Mt=Nt("s"),Pt=Nt("w"),Zt=Nt("e"),$t=_t?ge+He:ge,Xt=Mt?me+He:me,dn=Pt?ce+xt:ce,on=Zt?Ae+xt:Ae;We&&(_t&&($t=ge-He),Mt&&(Xt=me-He)),(!We&&Xt-$t>10||We&&$t-Xt>10)&&(ct(Ne,pe[Ne]=We?$t:Rt($t)),ct(De,pe[De]=We?Xt:Rt(Xt))),on-dn>10&&(ct(qe,pe[qe]=Ze?dn:Ft(dn)),ct(Ke,pe[Ke]=Ze?on:Ft(on)))}he.attr("d",h(fe,pe)),ot(Ee,pe),c(fe,xe,pe,yt)}function ot(xt,He){(Ze||We)&&function(){var Ge="path"!==He.type,dt=xt.selectAll(".visual-cue").data([0]);dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var ht=mt(Ze?He.xanchor:f.midRange(Ge?[He.x0,He.x1]:g.extractPathCoords(He.path,d.paramIsX))),kt=Lt(We?He.yanchor:f.midRange(Ge?[He.y0,He.y1]:g.extractPathCoords(He.path,d.paramIsY)));ht=g.roundPositionForSharpStrokeRendering(ht,1),kt=g.roundPositionForSharpStrokeRendering(kt,1),dt.attr("d",Ze&&We?"M"+(ht-1-1)+","+(kt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ze?"M"+(ht-1-1)+","+(kt-9-1)+"v18 h2 v-18 Z":"M"+(ht-9-1)+","+(kt-1-1)+"h18 v2 h-18 Z")}()}function pt(xt){xt.selectAll(".visual-cue").remove()}l.init(Ht),Wt.node().onmousemove=it}(m,Q,O,D,F,ae):!0===O.editable&&Q.style("pointer-events",K||s.opacity($)*z<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return function(fe,he){if(p(fe)){var pe=+he.node().getAttribute("data-index");if(pe>=0){if(pe===fe._fullLayout._activeShapeIndex)return void M(fe);fe._fullLayout._activeShapeIndex=pe,fe._fullLayout._deactivateShape=M,w(fe)}}}(m,Q)})}("below"!==O.layer?m._fullLayout._shapeUpperLayer:"paper"===O.xref||"paper"===O.yref?m._fullLayout._shapeLowerLayer:P._hadPlotinfo?(P.mainplotinfo||P).shapelayer:m._fullLayout._shapeLowerLayer)}function x(m,D,S){var O=(S.xref+S.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(m,O?"clip"+D._fullLayout._uid+O:null,D)}function b(m,D,S){return m.replace(d.segmentRE,function(O){var P=0,R=O.charAt(0),F=d.paramIsX[R],B=d.paramIsY[R],J=d.numParams[R];return R+O.substr(1).replace(d.paramRE,function(z){return P>=J||(F[P]?z=D(z):B[P]&&(z=S(z)),P++),z})})}function M(m){p(m)&&m._fullLayout._activeShapeIndex>=0&&(i(m),delete m._fullLayout._activeShapeIndex,w(m))}se.exports={draw:w,drawOne:_,eraseActiveShape:function(m){if(p(m)){i(m);var D=m._fullLayout._activeShapeIndex,S=(m.layout||{}).shapes||[];if(D<S.length){for(var O=[],P=0;P<S.length;P++)P!==D&&O.push(S[P]);delete m._fullLayout._activeShapeIndex,C.call("_guiRelayout",m,{shapes:O})}}},drawLabel:c}},29241:function(se,U,r){"use strict";var I=r(41940),C=r(79952).P,f=r(1426).extendFlat,k=r(5386).R,T=r(37281);se.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:f({},C,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},label:{text:{valType:"string",dflt:"",editType:"none"},texttemplate:k({newshape:!0,editType:"none"},{keys:Object.keys(T)}),font:I({editType:"none"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"none"},textangle:{valType:"angle",dflt:"auto",editType:"none"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"none"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"none"},padding:{valType:"number",dflt:3,min:0,editType:"none"},editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},89995:function(se){"use strict";se.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function(se,U,r){"use strict";var I=r(7901),C=r(71828);se.exports=function(f,k,T){T("newshape.drawdirection"),T("newshape.layer"),T("newshape.fillcolor"),T("newshape.fillrule"),T("newshape.opacity"),T("newshape.line.width")&&(T("newshape.line.color",I.contrast((f||{}).plot_bgcolor||"#FFF")),T("newshape.line.dash"));var l,c="drawline"===f.dragmode,i=T("newshape.label.text"),s=T("newshape.label.texttemplate");if(i||s){T("newshape.label.textangle");var a=T("newshape.label.textposition",c?"middle":"middle center");T("newshape.label.xanchor"),T("newshape.label.yanchor",(l=a,c?"bottom":-1!==l.indexOf("top")?"top":-1!==l.indexOf("bottom")?"bottom":"middle")),T("newshape.label.padding"),C.coerceFont(T,"newshape.label.font",k.font)}T("activeshape.fillcolor"),T("activeshape.opacity")}},60165:function(se,U,r){"use strict";var I=r(95616),C=r(89995),f=C.CIRCLE_SIDES,k=C.SQRT2,T=r(75549),v=T.p2r,c=T.r2p,i=[0,3,4,5,6,1,2],s=[0,3,4,1,2];function a(l,u){return Math.abs(l-u)<=1e-6}function o(l,u){var d=u[1]-l[1],g=u[2]-l[2];return Math.sqrt(d*d+g*g)}U.writePaths=function(l){var u=l.length;if(!u)return"M0,0Z";for(var d="",g=0;g<u;g++)for(var h=l[g].length,w=0;w<h;w++){var y=l[g][w][0];if("Z"===y)d+="Z";else for(var p=l[g][w].length,_=0;_<p;_++){var x=_;"Q"===y||"S"===y?x=s[_]:"C"===y&&(x=i[_]),d+=l[g][w][x],_>0&&_<p-1&&(d+=",")}}return d},U.readPaths=function(l,u,d,g){var h,w,y,p=I(l),_=[],x=-1,b=0,M=0,m=function(){w=b,y=M};m();for(var D=0;D<p.length;D++){var F=[],B=p[D][0],J=B;switch(B){case"M":_[++x]=[],F.push([J,b=+p[D][1],M=+p[D][2]]),m();break;case"Q":case"S":F.push([J,b=+p[D][3],M=+p[D][4],+p[D][1],+p[D][2]]);break;case"C":F.push([J,b=+p[D][5],M=+p[D][6],+p[D][1],+p[D][2],+p[D][3],+p[D][4]]);break;case"T":case"L":F.push([J,b=+p[D][1],M=+p[D][2]]);break;case"H":F.push([J="L",b=+p[D][1],M]);break;case"V":F.push([J="L",b,M=+p[D][1]]);break;case"A":J="L";var z=+p[D][1],$=+p[D][2];+p[D][4]||(z=-z,$=-$);var G=b-z,H=M;for(h=1;h<=f/2;h++){var X=2*Math.PI*h/f;F.push([J,G+z*Math.cos(X),H+$*Math.sin(X)])}break;case"Z":b===w&&M===y||F.push([J,b=w,M=y])}for(var K=(d||{}).domain,ue=u._fullLayout._size,ae=d&&"pixel"===d.xsizemode,ne=d&&"pixel"===d.ysizemode,Q=!1===g,ie=0;ie<F.length;ie++){for(h=0;h+2<7;h+=2){var le=F[ie][h+1],fe=F[ie][h+2];void 0!==le&&void 0!==fe&&(b=le,M=fe,d&&(d.xaxis&&d.xaxis.p2r?(Q&&(le-=d.xaxis._offset),le=ae?c(d.xaxis,d.xanchor)+le:v(d.xaxis,le)):(Q&&(le-=ue.l),K?le=K.x[0]+le/ue.w:le/=ue.w),d.yaxis&&d.yaxis.p2r?(Q&&(fe-=d.yaxis._offset),fe=ne?c(d.yaxis,d.yanchor)-fe:v(d.yaxis,fe)):(Q&&(fe-=ue.t),fe=K?K.y[1]-fe/ue.h:1-fe/ue.h)),F[ie][h+1]=le,F[ie][h+2]=fe)}_[x].push(F[ie].slice())}}return _},U.pointsOnRectangle=function(l){if(5!==l.length)return!1;for(var u=1;u<3;u++)if(!a(l[0][u]-l[1][u],l[3][u]-l[2][u])||!a(l[0][u]-l[3][u],l[1][u]-l[2][u]))return!1;return!(!a(l[0][1],l[1][1])&&!a(l[0][1],l[3][1])||!(o(l[0],l[1])*o(l[0],l[3])))},U.pointsOnEllipse=function(l){var u=l.length;if(u!==f+1)return!1;u=f;for(var d=0;d<u;d++){var g=(2*u-d)%u,h=(u/2+g)%u;if(!a(o(l[d],l[(u/2+d)%u]),o(l[g],l[h])))return!1}return!0},U.handleEllipse=function(l,u,d){if(!l)return[u,d];var g=U.ellipseOver({x0:u[0],y0:u[1],x1:d[0],y1:d[1]}),h=(g.x1+g.x0)/2,w=(g.y1+g.y0)/2,y=(g.x1-g.x0)/2,p=(g.y1-g.y0)/2;y||(y=p/=k),p||(p=y/=k);for(var _=[],x=0;x<f;x++){var b=2*x*Math.PI/f;_.push([h+y*Math.cos(b),w+p*Math.sin(b)])}return _},U.ellipseOver=function(l){var u=l.x0,d=l.y0,g=l.x1,h=l.y1,w=g-u,y=h-d,p=((u-=w)+g)/2,_=((d-=y)+h)/2;return{x0:p-(w*=k),y0:_-(y*=k),x1:p+w,y1:_+y}},U.fixDatesForPaths=function(l,u,d){var g="date"===u.type,h="date"===d.type;if(!g&&!h)return l;for(var w=0;w<l.length;w++)for(var y=0;y<l[w].length;y++)for(var p=0;p+2<l[w][y].length;p+=2)g&&(l[w][y][p+1]=l[w][y][p+1].replace(" ","_")),h&&(l[w][y][p+2]=l[w][y][p+2].replace(" ","_"));return l}},90551:function(se,U,r){"use strict";var I=r(64505),C=I.drawMode,f=I.openMode,k=r(89995),T=k.i000,v=k.i090,c=k.i180,i=k.i270,s=k.cos45,a=k.sin45,o=r(75549),l=o.p2r,u=o.r2p,d=r(51873).clearOutline,g=r(60165),h=g.readPaths,w=g.writePaths,y=g.ellipseOver,p=g.fixDatesForPaths;function _(x,b,M){var m,S=b.gd,O=x[0][0].getAttribute("d"),P=S._fullLayout.newshape,R=b.plotinfo,F=b.isActiveShape,B=R.xaxis,J=R.yaxis,z=!!R.domain||!R.xaxis,$=!!R.domain||!R.yaxis,G=f(M),H=h(O,S,R,F),X={editable:!0,label:P.label,xref:z?"paper":B._id,yref:$?"paper":J._id,layer:P.layer,opacity:P.opacity,line:{color:P.line.color,width:P.line.width,dash:P.line.dash}};if(G||(X.fillcolor=P.fillcolor,X.fillrule=P.fillrule),1===H.length&&(m=H[0]),m&&5===m.length&&"drawrect"===M)X.type="rect",X.x0=m[0][1],X.y0=m[0][2],X.x1=m[2][1],X.y1=m[2][2];else if(m&&"drawline"===M)X.type="line",X.x0=m[0][1],X.y0=m[0][2],X.x1=m[1][1],X.y1=m[1][2];else if(m&&"drawcircle"===M){X.type="circle";var K=m[T][1],ue=m[v][1],ae=m[c][1],ne=m[i][1],Q=m[T][2],ie=m[v][2],le=m[c][2],fe=m[i][2],he=R.xaxis&&("date"===R.xaxis.type||"log"===R.xaxis.type),pe=R.yaxis&&("date"===R.yaxis.type||"log"===R.yaxis.type);he&&(K=u(R.xaxis,K),ue=u(R.xaxis,ue),ae=u(R.xaxis,ae),ne=u(R.xaxis,ne)),pe&&(Q=u(R.yaxis,Q),ie=u(R.yaxis,ie),le=u(R.yaxis,le),fe=u(R.yaxis,fe));var xe=(ue+ne)/2,Ee=(Q+le)/2,Re=y({x0:xe,y0:Ee,x1:xe+(ne-ue+ae-K)/2*s,y1:Ee+(fe-ie+le-Q)/2*a});he&&(Re.x0=l(R.xaxis,Re.x0),Re.x1=l(R.xaxis,Re.x1)),pe&&(Re.y0=l(R.yaxis,Re.y0),Re.y1=l(R.yaxis,Re.y1)),X.x0=Re.x0,X.y0=Re.y0,X.x1=Re.x1,X.y1=Re.y1}else X.type="path",B&&J&&p(H,B,J),X.path=w(H),m=null;return X}se.exports={newShapes:function(x,b){if(x.length&&x[0][0]){var M=b.gd,m=b.isActiveShape,D=b.dragmode,S=(M.layout||{}).shapes||[];if(!C(D)&&void 0!==m){var O=M._fullLayout._activeShapeIndex;if(O<S.length)switch(M._fullLayout.shapes[O].type){case"rect":D="drawrect";break;case"circle":D="drawcircle";break;case"line":D="drawline";break;case"path":var P=S[O].path||"";D="Z"===P[P.length-1]?"drawclosedpath":"drawopenpath"}}var R=_(x,b,D);d(M);for(var F=b.editHelpers,B=(F||{}).modifyItem,J=[],z=0;z<S.length;z++){var $=M._fullLayout.shapes[z];if(J[z]=$._input,void 0!==m&&z===M._fullLayout._activeShapeIndex){var G=R;switch($.type){case"line":case"rect":case"circle":B("x0",G.x0),B("x1",G.x1),B("y0",G.y0),B("y1",G.y1);break;case"path":B("path",G.path)}}}return void 0===m?(J.push(R),J):F?F.getUpdateObj():{}}},createShapeObj:_}},51873:function(se){"use strict";se.exports={clearOutlineControllers:function(U){var r=U._fullLayout._zoomlayer;r&&r.selectAll(".outline-controllers").remove()},clearOutline:function(U){var r=U._fullLayout._zoomlayer;r&&r.selectAll(".select-outline").remove(),U._fullLayout._outlining=!1}}},30477:function(se,U,r){"use strict";var I=r(21459),C=r(71828),f=r(89298);U.rangeToShapePosition=function(k){return"log"===k.type?k.r2d:function(T){return T}},U.shapePositionToRange=function(k){return"log"===k.type?k.d2r:function(T){return T}},U.decodeDate=function(k){return function(T){return T.replace&&(T=T.replace("_"," ")),k(T)}},U.encodeDate=function(k){return function(T){return k(T).replace(" ","_")}},U.extractPathCoords=function(k,T,v){var c=[];return k.match(I.segmentRE).forEach(function(i){var s=T[i.charAt(0)].drawn;if(void 0!==s){var a=i.substr(1).match(I.paramRE);if(a&&!(a.length<s)){var o=a[s],l=v?o:C.cleanNumber(o);c.push(l)}}}),c},U.getDataToPixel=function(k,T,v,c){var i,s=k._fullLayout._size;if(T)if("domain"===c)i=function(o){return T._length*(v?1-o:o)+T._offset};else{var a=U.shapePositionToRange(T);i=function(o){return T._offset+T.r2p(a(o,!0))},"date"===T.type&&(i=U.decodeDate(i))}else i=v?function(o){return s.t+s.h*(1-o)}:function(o){return s.l+s.w*o};return i},U.getPixelToData=function(k,T,v,c){var i,s=k._fullLayout._size;if(T)if("domain"===c)i=function(o){var l=(o-T._offset)/T._length;return v?1-l:l};else{var a=U.rangeToShapePosition(T);i=function(o){return a(T.p2r(o-T._offset))}}else i=v?function(o){return 1-(o-s.t)/s.h}:function(o){return(o-s.l)/s.w};return i},U.roundPositionForSharpStrokeRendering=function(k,T){var v=1===Math.round(T%2),c=Math.round(k);return v?c+.5:c},U.makeShapesOptionsAndPlotinfo=function(k,T){var v=k._fullLayout.shapes[T]||{},c=k._fullLayout._plots[v.xref+v.yref];return c?c._hadPlotinfo=!0:(c={},v.xref&&"paper"!==v.xref&&(c.xaxis=k._fullLayout[v.xref+"axis"]),v.yref&&"paper"!==v.yref&&(c.yaxis=k._fullLayout[v.yref+"axis"])),c.xsizemode=v.xsizemode,c.ysizemode=v.ysizemode,c.xanchor=v.xanchor,c.yanchor=v.yanchor,{options:v,plotinfo:c}},U.makeSelectionsOptionsAndPlotinfo=function(k,T){var v=k._fullLayout.selections[T]||{},c=k._fullLayout._plots[v.xref+v.yref];return c?c._hadPlotinfo=!0:(c={},v.xref&&(c.xaxis=k._fullLayout[v.xref+"axis"]),v.yref&&(c.yaxis=k._fullLayout[v.yref+"axis"])),{options:v,plotinfo:c}},U.getPathString=function(k,T){var v,c,i,s,a,o,l,u,P,R,F,J,z,$,G,d=T.type,g=f.getRefType(T.xref),h=f.getRefType(T.yref),w=f.getFromId(k,T.xref),y=f.getFromId(k,T.yref),p=k._fullLayout._size;if(w?"domain"===g?c=function(P){return w._offset+w._length*P}:(v=U.shapePositionToRange(w),c=function(P){return w._offset+w.r2p(v(P,!0))}):c=function(P){return p.l+p.w*P},y?"domain"===h?s=function(P){return y._offset+y._length*(1-P)}:(i=U.shapePositionToRange(y),s=function(P){return y._offset+y.r2p(i(P,!0))}):s=function(P){return p.t+p.h*(1-P)},"path"===d)return w&&"date"===w.type&&(c=U.decodeDate(c)),y&&"date"===y.type&&(s=U.decodeDate(s)),R=c,F=s,J=(P=T).xsizemode,z=P.ysizemode,$=P.xanchor,G=P.yanchor,P.path.replace(I.segmentRE,function(H){var X=0,K=H.charAt(0),ue=I.paramIsX[K],ae=I.paramIsY[K],ne=I.numParams[K],Q=H.substr(1).replace(I.paramRE,function(ie){return ue[X]?ie="pixel"===J?R($)+Number(ie):R(ie):ae[X]&&(ie="pixel"===z?F(G)-Number(ie):F(ie)),++X>ne&&(ie="X"),ie});return X>ne&&(Q=Q.replace(/[\s,]*X.*/,""),C.log("Ignoring extra params in segment "+H)),K+Q});if("pixel"===T.xsizemode){var _=c(T.xanchor);a=_+T.x0,o=_+T.x1}else a=c(T.x0),o=c(T.x1);if("pixel"===T.ysizemode){var x=s(T.yanchor);l=x-T.y0,u=x-T.y1}else l=s(T.y0),u=s(T.y1);if("line"===d)return"M"+a+","+l+"L"+o+","+u;if("rect"===d)return"M"+a+","+l+"H"+o+"V"+u+"H"+a+"Z";var b=(a+o)/2,M=(l+u)/2,m=Math.abs(b-a),D=Math.abs(M-l),S="A"+m+","+D,O=b+m+","+M;return"M"+O+S+" 0 1,1 "+b+","+(M-D)+S+" 0 0,1 "+O+"Z"}},89853:function(se,U,r){"use strict";var I=r(34031);se.exports={moduleType:"component",name:"shapes",layoutAttributes:r(89827),supplyLayoutDefaults:r(84726),supplyDrawNewShapeDefaults:r(45547),includeBasePlot:r(76325)("shapes"),calcAutorange:r(5627),draw:I.draw,drawOne:I.drawOne}},37281:function(se){"use strict";function U(f,k){return k?k.d2l(f):f}function r(f,k){return k?k.l2d(f):f}function I(f,k){return U(f.x1,k)-U(f.x0,k)}function C(f,k,T){return U(f.y1,T)-U(f.y0,T)}se.exports={x0:function(f){return f.x0},x1:function(f){return f.x1},y0:function(f){return f.y0},y1:function(f){return f.y1},slope:function(f,k,T){return"line"!==f.type?void 0:C(f,0,T)/I(f,k)},dx:I,dy:C,width:function(f,k){return Math.abs(I(f,k))},height:function(f,k,T){return Math.abs(C(f,0,T))},length:function(f,k,T){return"line"!==f.type?void 0:Math.sqrt(Math.pow(I(f,k),2)+Math.pow(C(f,0,T),2))},xcenter:function(f,k){return r((U(f.x1,k)+U(f.x0,k))/2,k)},ycenter:function(f,k,T){return r((U(f.y1,T)+U(f.y0,T))/2,T)}}},75067:function(se,U,r){"use strict";var I=r(41940),C=r(35025),f=r(1426).extendDeepAll,k=r(30962).overrideAll,T=r(85594),v=r(44467).templatedArray,c=r(98292),i=v("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});se.exports=k(v("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:i,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:f(C({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:T.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:I({})},font:I({}),activebgcolor:{valType:"color",dflt:c.gripBgActiveColor},bgcolor:{valType:"color",dflt:c.railBgColor},bordercolor:{valType:"color",dflt:c.railBorderColor},borderwidth:{valType:"number",min:0,dflt:c.railBorderWidth},ticklen:{valType:"number",min:0,dflt:c.tickLength},tickcolor:{valType:"color",dflt:c.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:c.minorTickLength}}),"arraydraw","from-root")},98292:function(se){"use strict";se.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function(se,U,r){"use strict";var I=r(71828),C=r(85501),f=r(75067),k=r(98292).name,T=f.steps;function v(i,s,a){function o(h,w){return I.coerce(i,s,f,h,w)}for(var l=C(i,s,{name:"steps",handleItemDefaults:c}),u=0,d=0;d<l.length;d++)l[d].visible&&u++;if(u<2?s.visible=!1:o("visible")){s._stepCount=u;var g=s._visibleSteps=I.filterVisible(l);(l[o("active")]||{}).visible||(s.active=g[0]._index),o("x"),o("y"),I.noneOrAll(i,s,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),I.coerceFont(o,"font",a.font),o("currentvalue.visible")&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),I.coerceFont(o,"currentvalue.font",s.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function c(i,s){function a(l,u){return I.coerce(i,s,T,l,u)}if("skip"===i.method||Array.isArray(i.args)?a("visible"):s.visible=!1){a("method"),a("args");var o=a("label","step-"+s._index);a("value",o),a("execute")}}se.exports=function(i,s){C(i,s,{name:k,handleItemDefaults:v})}},44504:function(se,U,r){"use strict";var I=r(39898),C=r(74875),f=r(7901),k=r(91424),T=r(71828),v=T.strTranslate,c=r(63893),i=r(44467).arrayEditor,s=r(98292),a=r(18783),o=a.LINE_SPACING,l=a.FROM_TL,u=a.FROM_BR;function d(F){return s.autoMarginIdRoot+F._index}function g(F){return F._index}function h(F,B){var J=k.tester.selectAll("g."+s.labelGroupClass).data(B._visibleSteps);J.enter().append("g").classed(s.labelGroupClass,!0);var z=0,$=0;J.each(function(ie){var le=p(I.select(this),{step:ie},B).node();if(le){var fe=k.bBox(le);$=Math.max($,fe.height),z=Math.max(z,fe.width)}}),J.remove();var G=B._dims={};G.inputAreaWidth=Math.max(s.railWidth,s.gripHeight);var H=F._fullLayout._size;if(G.lx=H.l+H.w*B.x,G.ly=H.t+H.h*(1-B.y),G.outerLength="fraction"===B.lenmode?Math.round(H.w*B.len):B.len,G.inputAreaStart=0,G.inputAreaLength=Math.round(G.outerLength-B.pad.l-B.pad.r),G.labelStride=Math.max(1,Math.ceil((z+s.labelPadding)/((G.inputAreaLength-2*s.stepInset)/(B._stepCount-1)))),G.labelHeight=$,G.currentValueMaxWidth=0,G.currentValueHeight=0,G.currentValueTotalHeight=0,G.currentValueMaxLines=1,B.currentvalue.visible){var ue=k.tester.append("g");J.each(function(ie){var le=w(ue,B,ie.label),fe=le.node()&&k.bBox(le.node())||{width:0,height:0},he=c.lineCount(le);G.currentValueMaxWidth=Math.max(G.currentValueMaxWidth,Math.ceil(fe.width)),G.currentValueHeight=Math.max(G.currentValueHeight,Math.ceil(fe.height)),G.currentValueMaxLines=Math.max(G.currentValueMaxLines,he)}),G.currentValueTotalHeight=G.currentValueHeight+B.currentvalue.offset,ue.remove()}G.height=G.currentValueTotalHeight+s.tickOffset+B.ticklen+s.labelOffset+G.labelHeight+B.pad.t+B.pad.b;var ae="left";T.isRightAnchor(B)&&(G.lx-=G.outerLength,ae="right"),T.isCenterAnchor(B)&&(G.lx-=G.outerLength/2,ae="center");var ne="top";T.isBottomAnchor(B)&&(G.ly-=G.height,ne="bottom"),T.isMiddleAnchor(B)&&(G.ly-=G.height/2,ne="middle"),G.outerLength=Math.ceil(G.outerLength),G.height=Math.ceil(G.height),G.lx=Math.round(G.lx),G.ly=Math.round(G.ly);var Q={y:B.y,b:G.height*u[ne],t:G.height*l[ne]};"fraction"===B.lenmode?(Q.l=0,Q.xl=B.x-B.len*l[ae],Q.r=0,Q.xr=B.x+B.len*u[ae]):(Q.x=B.x,Q.l=G.outerLength*l[ae],Q.r=G.outerLength*u[ae]),C.autoMargin(F,d(B),Q)}function w(F,B,J){if(B.currentvalue.visible){var z,$,G=B._dims;switch(B.currentvalue.xanchor){case"right":z=G.inputAreaLength-s.currentValueInset-G.currentValueMaxWidth,$="left";break;case"center":z=.5*G.inputAreaLength,$="middle";break;default:z=s.currentValueInset,$="left"}var H=T.ensureSingle(F,"text",s.labelClass,function(Q){Q.attr({"text-anchor":$,"data-notex":1})}),X=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof J)X+=J;else{var K=B.steps[B.active].label,ue=B._gd._fullLayout._meta;ue&&(K=T.templateString(K,ue)),X+=K}B.currentvalue.suffix&&(X+=B.currentvalue.suffix),H.call(k.font,B.currentvalue.font).text(X).call(c.convertToTspans,B._gd);var ae=c.lineCount(H);return c.positionText(H,z,(G.currentValueMaxLines+1-ae)*B.currentvalue.font.size*o),H}}function y(F,B,J){T.ensureSingle(F,"rect",s.gripRectClass,function(z){z.call(M,B,F,J).style("pointer-events","all")}).attr({width:s.gripWidth,height:s.gripHeight,rx:s.gripRadius,ry:s.gripRadius}).call(f.stroke,J.bordercolor).call(f.fill,J.bgcolor).style("stroke-width",J.borderwidth+"px")}function p(F,B,J){var z=T.ensureSingle(F,"text",s.labelClass,function(H){H.attr({"text-anchor":"middle","data-notex":1})}),$=B.step.label,G=J._gd._fullLayout._meta;return G&&($=T.templateString($,G)),z.call(k.font,J.font).text($).call(c.convertToTspans,J._gd),z}function _(F,B){var J=T.ensureSingle(F,"g",s.labelsClass),z=B._dims,$=J.selectAll("g."+s.labelGroupClass).data(z.labelSteps);$.enter().append("g").classed(s.labelGroupClass,!0),$.exit().remove(),$.each(function(G){var H=I.select(this);H.call(p,G,B),k.setTranslate(H,S(B,G.fraction),s.tickOffset+B.ticklen+B.font.size*o+s.labelOffset+z.currentValueTotalHeight)})}function x(F,B,J,z,$){var G=Math.round(z*(J._stepCount-1)),H=J._visibleSteps[G]._index;H!==J.active&&b(F,B,J,H,!0,$)}function b(F,B,J,z,$,G){var H=J.active;J.active=z,i(F.layout,s.name,J).applyUpdate("active",z);var X=J.steps[J.active];B.call(D,J,G),B.call(w,J),F.emit("plotly_sliderchange",{slider:J,step:J.steps[J.active],interaction:$,previousActive:H}),X&&X.method&&$&&(B._nextMethod?(B._nextMethod.step=X,B._nextMethod.doCallback=$,B._nextMethod.doTransition=G):(B._nextMethod={step:X,doCallback:$,doTransition:G},B._nextMethodRaf=window.requestAnimationFrame(function(){var K=B._nextMethod.step;K.method&&(K.execute&&C.executeAPICommand(F,K.method,K.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function M(F,B,J){if(!B._context.staticPlot){var z=J.node(),$=I.select(B);F.on("mousedown",H),F.on("touchstart",H)}function G(){return J.data()[0]}function H(){var X=G();B.emit("plotly_sliderstart",{slider:X});var K=J.select("."+s.gripRectClass);I.event.stopPropagation(),I.event.preventDefault(),K.call(f.fill,X.activebgcolor);var ue=O(X,I.mouse(z)[0]);function ae(){var Q=G(),ie=O(Q,I.mouse(z)[0]);x(B,J,Q,ie,!1)}function ne(){var Q=G();Q._dragging=!1,K.call(f.fill,Q.bgcolor),$.on("mouseup",null),$.on("mousemove",null),$.on("touchend",null),$.on("touchmove",null),B.emit("plotly_sliderend",{slider:Q,step:Q.steps[Q.active]})}x(B,J,X,ue,!0),X._dragging=!0,$.on("mousemove",ae),$.on("touchmove",ae),$.on("mouseup",ne),$.on("touchend",ne)}}function m(F,B){var J=F.selectAll("rect."+s.tickRectClass).data(B._visibleSteps),z=B._dims;J.enter().append("rect").classed(s.tickRectClass,!0),J.exit().remove(),J.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),J.each(function($,G){var H=G%z.labelStride==0,X=I.select(this);X.attr({height:H?B.ticklen:B.minorticklen}).call(f.fill,B.tickcolor),k.setTranslate(X,S(B,G/(B._stepCount-1))-.5*B.tickwidth,(H?s.tickOffset:s.minorTickOffset)+z.currentValueTotalHeight)})}function D(F,B,J){for(var z=F.select("rect."+s.gripRectClass),$=0,G=0;G<B._stepCount;G++)if(B._visibleSteps[G]._index===B.active){$=G;break}var H=S(B,$/(B._stepCount-1));if(!B._invokingCommand){var X=z;J&&B.transition.duration>0&&(X=X.transition().duration(B.transition.duration).ease(B.transition.easing)),X.attr("transform",v(H-.5*s.gripWidth,B._dims.currentValueTotalHeight))}}function S(F,B){var J=F._dims;return J.inputAreaStart+s.stepInset+(J.inputAreaLength-2*s.stepInset)*Math.min(1,Math.max(0,B))}function O(F,B){var J=F._dims;return Math.min(1,Math.max(0,(B-s.stepInset-J.inputAreaStart)/(J.inputAreaLength-2*s.stepInset-2*J.inputAreaStart)))}function P(F,B,J){var z=J._dims,$=T.ensureSingle(F,"rect",s.railTouchRectClass,function(G){G.call(M,B,F,J).style("pointer-events","all")});$.attr({width:z.inputAreaLength,height:Math.max(z.inputAreaWidth,s.tickOffset+J.ticklen+z.labelHeight)}).call(f.fill,J.bgcolor).attr("opacity",0),k.setTranslate($,0,z.currentValueTotalHeight)}function R(F,B){var J=B._dims,z=J.inputAreaLength-2*s.railInset,$=T.ensureSingle(F,"rect",s.railRectClass);$.attr({width:z,height:s.railWidth,rx:s.railRadius,ry:s.railRadius,"shape-rendering":"crispEdges"}).call(f.stroke,B.bordercolor).call(f.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),k.setTranslate($,s.railInset,.5*(J.inputAreaWidth-s.railWidth)+J.currentValueTotalHeight)}se.exports=function(F){var B=F._context.staticPlot,J=F._fullLayout,z=function(ue,ae){for(var ne=ue[s.name],Q=[],ie=0;ie<ne.length;ie++){var le=ne[ie];le.visible&&(le._gd=ae,Q.push(le))}return Q}(J,F),$=J._infolayer.selectAll("g."+s.containerClassName).data(z.length>0?[0]:[]);function G(ue){ue._commandObserver&&(ue._commandObserver.remove(),delete ue._commandObserver),C.autoMargin(F,d(ue))}if($.enter().append("g").classed(s.containerClassName,!0).style("cursor",B?null:"ew-resize"),$.exit().each(function(){I.select(this).selectAll("g."+s.groupClassName).each(G)}).remove(),0!==z.length){var H=$.selectAll("g."+s.groupClassName).data(z,g);H.enter().append("g").classed(s.groupClassName,!0),H.exit().each(G).remove();for(var X=0;X<z.length;X++)h(F,z[X]);H.each(function(ue){var ae=I.select(this);(function(ne){var Q=ne._dims;Q.labelSteps=[];for(var ie=ne._stepCount,le=0;le<ie;le+=Q.labelStride)Q.labelSteps.push({fraction:le/(ie-1),step:ne._visibleSteps[le]})})(ue),C.manageCommandObserver(F,ue,ue._visibleSteps,function(ne){var Q=ae.data()[0];Q.active!==ne.index&&(Q._dragging||b(F,ae,Q,ne.index,!1,!0))}),function(ne,Q,ie){(ie.steps[ie.active]||{}).visible||(ie.active=ie._visibleSteps[0]._index),Q.call(w,ie).call(R,ie).call(_,ie).call(m,ie).call(P,ne,ie).call(y,ne,ie);var le=ie._dims;k.setTranslate(Q,le.lx+ie.pad.l,le.ly+ie.pad.t),Q.call(D,ie,!1),Q.call(w,ie)}(F,I.select(this),ue)})}}},23243:function(se,U,r){"use strict";var I=r(98292);se.exports={moduleType:"component",name:I.name,layoutAttributes:r(75067),supplyLayoutDefaults:r(12343),draw:r(44504)}},92998:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(74875),k=r(73972),T=r(71828),v=T.strTranslate,c=r(91424),i=r(7901),s=r(63893),a=r(37822),o=r(18783).OPPOSITE_SIDE,l=/ [XY][0-9]* /;se.exports={draw:function(u,d,g){var h,w=g.propContainer,y=g.propName,p=g.placeholder,_=g.traceIndex,x=g.avoid||{},b=g.attributes,M=g.transform,m=g.containerGroup,D=u._fullLayout,S=1,O=!1,P=w.title,R=(P&&P.text?P.text:"").trim(),F=P&&P.font?P.font:{},B=F.family,J=F.size,z=F.color;"title.text"===y?h="titleText":-1!==y.indexOf("axis")?h="axisTitleText":y.indexOf(!0)&&(h="colorbarTitleText");var $=u._context.edits[h];""===R?S=0:R.replace(l," % ")===p.replace(l," % ")&&(S=.2,O=!0,$||(R="")),g._meta?R=T.templateString(R,g._meta):D._meta&&(R=T.templateString(R,D._meta));var G,H=R||$;m||(m=T.ensureSingle(D._infolayer,"g","g-"+d),G=D._hColorbarMoveTitle);var X=m.selectAll("text").data(H?[0]:[]);if(X.enter().append("text"),X.text(R).attr("class",d),X.exit().remove(),!H)return m;function K(ne){T.syncOrAsync([ue,ae],ne)}function ue(ne){var Q;return!M&&G&&(M={}),M?(Q="",M.rotate&&(Q+="rotate("+[M.rotate,b.x,b.y]+")"),(M.offset||G)&&(Q+=v(0,(M.offset||0)-(G||0)))):Q=null,ne.attr("transform",Q),ne.style({"font-family":B,"font-size":I.round(J,2)+"px",fill:i.rgb(z),opacity:S*i.opacity(z),"font-weight":f.fontWeight}).attr(b).call(s.convertToTspans,u),f.previousPromises(u)}function ae(ne){var Q=I.select(ne.node().parentNode);if(x&&x.selection&&x.side&&R){Q.attr("transform",null);var ie=o[x.side],le="left"===x.side||"top"===x.side?-1:1,fe=C(x.pad)?x.pad:2,he=c.bBox(Q.node()),pe={t:0,b:0,l:0,r:0},xe=u._fullLayout._reservedMargin;for(var Ee in xe)for(var Re in xe[Ee])pe[Re]=Math.max(pe[Re],xe[Ee][Re]);var we=x.maxShift||le*({left:pe.l,top:pe.t,right:D.width-pe.r,bottom:D.height-pe.b}[x.side]-he[x.side]),je=0;if(we<0)je=we;else{var Ce=x.offsetLeft||0,Ie=x.offsetTop||0;he.left-=Ce,he.right-=Ce,he.top-=Ie,he.bottom-=Ie,x.selection.each(function(){var me=c.bBox(this);T.bBoxIntersect(he,me,fe)&&(je=Math.max(je,le*(me[x.side]-he[ie])+fe))}),je=Math.min(we,je),w._titleScoot=Math.abs(je)}if(je>0||we<0){var ge={left:[-je,0],right:[je,0],top:[0,-je],bottom:[0,je]}[x.side];Q.attr("transform",v(ge[0],ge[1]))}}}return X.call(K),$&&(R?X.on(".opacity",null):(S=0,O=!0,X.text(p).on("mouseover.opacity",function(){I.select(this).transition().duration(a.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){I.select(this).transition().duration(a.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(s.makeEditable,{gd:u}).on("edit",function(ne){void 0!==_?k.call("_guiRestyle",u,y,ne,_):k.call("_guiRelayout",u,y,ne)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(ne){this.text(ne||" ").call(s.positionText,b.x,b.y)})),X.classed("js-placeholder",O),m}}},7163:function(se,U,r){"use strict";var I=r(41940),C=r(22399),f=r(1426).extendFlat,k=r(30962).overrideAll,T=r(35025),v=r(44467).templatedArray,c=v("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});se.exports=k(v("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:c,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:f(T({editType:"arraydraw"}),{}),font:I({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:C.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function(se){"use strict";se.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},64897:function(se,U,r){"use strict";var I=r(71828),C=r(85501),f=r(7163),k=r(75909).name,T=f.buttons;function v(i,s,a){function o(l,u){return I.coerce(i,s,f,l,u)}o("visible",C(i,s,{name:"buttons",handleItemDefaults:c}).length>0)&&(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),I.noneOrAll(i,s,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),I.coerceFont(o,"font",a.font),o("bgcolor",a.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function c(i,s){function a(o,l){return I.coerce(i,s,T,o,l)}a("visible","skip"===i.method||Array.isArray(i.args))&&(a("method"),a("args"),a("args2"),a("label"),a("execute"))}se.exports=function(i,s){C(i,s,{name:k,handleItemDefaults:v})}},13689:function(se,U,r){"use strict";var I=r(39898),C=r(74875),f=r(7901),k=r(91424),T=r(71828),v=r(63893),c=r(44467).arrayEditor,i=r(18783).LINE_SPACING,s=r(75909),a=r(25849);function o(S){return S._index}function l(S,O){return+S.attr(s.menuIndexAttrName)===O._index}function u(S,O,P,R,F,B,J,z){O.active=J,c(S.layout,s.name,O).applyUpdate("active",J),"buttons"===O.type?g(S,R,null,null,O):"dropdown"===O.type&&(F.attr(s.menuIndexAttrName,"-1"),d(S,R,F,B,O),z||g(S,R,F,B,O))}function d(S,O,P,R,F){var B=T.ensureSingle(O,"g",s.headerClassName,function(X){X.style("pointer-events","all")}),J=F._dims,G={y:F.pad.t,yPad:0,x:F.pad.l,xPad:0,index:0},H={width:J.headerWidth,height:J.headerHeight};B.call(h,F,F.buttons[F.active]||s.blankHeaderOpts,S).call(m,F,G,H),T.ensureSingle(O,"text",s.headerArrowClassName,function(X){X.attr("text-anchor","end").call(k.font,F.font).text(s.arrowSymbol[F.direction])}).attr({x:J.headerWidth-s.arrowOffsetX+F.pad.l,y:J.headerHeight/2+s.textOffsetY+F.pad.t}),B.on("click",function(){P.call(D,String(l(P,F)?-1:F._index)),g(S,O,P,R,F)}),B.on("mouseover",function(){B.call(_)}),B.on("mouseout",function(){B.call(x,F)}),k.setTranslate(O,J.lx,J.ly)}function g(S,O,P,R,F){P||(P=O).attr("pointer-events","all");var B=-1==+P.attr(s.menuIndexAttrName)&&"buttons"!==F.type?[]:F.buttons,J="dropdown"===F.type?s.dropdownButtonClassName:s.buttonClassName,z=P.selectAll("g."+J).data(T.filterVisible(B)),$=z.enter().append("g").classed(J,!0),G=z.exit();"dropdown"===F.type?($.attr("opacity","0").transition().attr("opacity","1"),G.transition().attr("opacity","0").remove()):G.remove();var H=0,X=0,K=F._dims,ue=-1!==["up","down"].indexOf(F.direction);"dropdown"===F.type&&(ue?X=K.headerHeight+s.gapButtonHeader:H=K.headerWidth+s.gapButtonHeader),"dropdown"===F.type&&"up"===F.direction&&(X=-s.gapButtonHeader+s.gapButton-K.openHeight),"dropdown"===F.type&&"left"===F.direction&&(H=-s.gapButtonHeader+s.gapButton-K.openWidth);var Q,ie,le,ae={x:K.lx+H+F.pad.l,y:K.ly+X+F.pad.t,yPad:s.gapButton,xPad:s.gapButton,index:0},ne={l:ae.x+F.borderwidth,t:ae.y+F.borderwidth};z.each(function(Q,ie){var le=I.select(this);le.call(h,F,Q,S).call(m,F,ae),le.on("click",function(){I.event.defaultPrevented||(Q.execute&&(Q.args2&&F.active===ie?(u(S,F,0,O,P,R,-1),C.executeAPICommand(S,Q.method,Q.args2)):(u(S,F,0,O,P,R,ie),C.executeAPICommand(S,Q.method,Q.args))),S.emit("plotly_buttonclicked",{menu:F,button:Q,active:F.active}))}),le.on("mouseover",function(){le.call(_)}),le.on("mouseout",function(){le.call(x,F),z.call(p,F)})}),z.call(p,F),ue?(ne.w=Math.max(K.openWidth,K.headerWidth),ne.h=ae.y-ne.t):(ne.w=ae.x-ne.l,ne.h=Math.max(K.openHeight,K.headerHeight)),ne.direction=F.direction,R&&(z.size()?function(Q,ie,le,fe,he,pe){var xe,Ee,Re,ke=he.direction,we=he._dims,je=he.active;if("up"===ke||"down"===ke)for(Ee=0,Re=0;Re<je;Re++)Ee+=we.heights[Re]+s.gapButton;else for(xe=0,Re=0;Re<je;Re++)xe+=we.widths[Re]+s.gapButton;fe.enable(pe,xe,Ee),fe.hbar&&fe.hbar.attr("opacity","0").transition().attr("opacity","1"),fe.vbar&&fe.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,R,F,ne):(le=!!(Q=R).vbar,(ie=!!Q.hbar)&&Q.hbar.transition().attr("opacity","0").each("end",function(){ie=!1,le||Q.disable()}),le&&Q.vbar.transition().attr("opacity","0").each("end",function(){le=!1,ie||Q.disable()})))}function h(S,O,P,R){S.call(w,O).call(y,O,P,R)}function w(S,O){T.ensureSingle(S,"rect",s.itemRectClassName,function(P){P.attr({rx:s.rx,ry:s.ry,"shape-rendering":"crispEdges"})}).call(f.stroke,O.bordercolor).call(f.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function y(S,O,P,R){var F=T.ensureSingle(S,"text",s.itemTextClassName,function(z){z.attr({"text-anchor":"start","data-notex":1})}),B=P.label,J=R._fullLayout._meta;J&&(B=T.templateString(B,J)),F.call(k.font,O.font).text(B).call(v.convertToTspans,R)}function p(S,O){var P=O.active;S.each(function(R,F){var B=I.select(this);F===P&&O.showactive&&B.select("rect."+s.itemRectClassName).call(f.fill,s.activeColor)})}function _(S){S.select("rect."+s.itemRectClassName).call(f.fill,s.hoverColor)}function x(S,O){S.select("rect."+s.itemRectClassName).call(f.fill,O.bgcolor)}function b(S,O){var P=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},R=k.tester.selectAll("g."+s.dropdownButtonClassName).data(T.filterVisible(O.buttons));R.enter().append("g").classed(s.dropdownButtonClassName,!0);var F=-1!==["up","down"].indexOf(O.direction);R.each(function(H,X){var K=I.select(this);K.call(h,O,H,S);var ue=K.select("."+s.itemTextClassName),ae=ue.node()&&k.bBox(ue.node()).width,ne=Math.max(ae+s.textPadX,s.minWidth),Q=O.font.size*i,ie=v.lineCount(ue),le=Math.max(Q*ie,s.minHeight)+s.textOffsetY;le=Math.ceil(le),ne=Math.ceil(ne),P.widths[X]=ne,P.heights[X]=le,P.height1=Math.max(P.height1,le),P.width1=Math.max(P.width1,ne),F?(P.totalWidth=Math.max(P.totalWidth,ne),P.openWidth=P.totalWidth,P.totalHeight+=le+s.gapButton,P.openHeight+=le+s.gapButton):(P.totalWidth+=ne+s.gapButton,P.openWidth+=ne+s.gapButton,P.totalHeight=Math.max(P.totalHeight,le),P.openHeight=P.totalHeight)}),F?P.totalHeight-=s.gapButton:P.totalWidth-=s.gapButton,P.headerWidth=P.width1+s.arrowPadX,P.headerHeight=P.height1,"dropdown"===O.type&&(F?(P.width1+=s.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=s.arrowPadX),R.remove();var B=P.totalWidth+O.pad.l+O.pad.r,J=P.totalHeight+O.pad.t+O.pad.b,z=S._fullLayout._size;P.lx=z.l+z.w*O.x,P.ly=z.t+z.h*(1-O.y);var $="left";T.isRightAnchor(O)&&(P.lx-=B,$="right"),T.isCenterAnchor(O)&&(P.lx-=B/2,$="center");var G="top";T.isBottomAnchor(O)&&(P.ly-=J,G="bottom"),T.isMiddleAnchor(O)&&(P.ly-=J/2,G="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),C.autoMargin(S,M(O),{x:O.x,y:O.y,l:B*({right:1,center:.5}[$]||0),r:B*({left:1,center:.5}[$]||0),b:J*({top:1,middle:.5}[G]||0),t:J*({bottom:1,middle:.5}[G]||0)})}function M(S){return s.autoMarginIdRoot+S._index}function m(S,O,P,R){R=R||{};var F=S.select("."+s.itemRectClassName),B=S.select("."+s.itemTextClassName),J=O.borderwidth,z=P.index,$=O._dims;k.setTranslate(S,J+P.x,J+P.y);var G=-1!==["up","down"].indexOf(O.direction),H=R.height||(G?$.heights[z]:$.height1);F.attr({x:0,y:0,width:R.width||(G?$.width1:$.widths[z]),height:H});var X=O.font.size*i,K=(v.lineCount(B)-1)*X/2;v.positionText(B,s.textOffsetX,H/2-K+s.textOffsetY),G?P.y+=$.heights[z]+P.yPad:P.x+=$.widths[z]+P.xPad,P.index++}function D(S,O){S.attr(s.menuIndexAttrName,O||"-1").selectAll("g."+s.dropdownButtonClassName).remove()}se.exports=function(S){var O=S._fullLayout,P=T.filterVisible(O[s.name]);function R(X){C.autoMargin(S,M(X))}var F=O._menulayer.selectAll("g."+s.containerClassName).data(P.length>0?[0]:[]);if(F.enter().append("g").classed(s.containerClassName,!0).style("cursor","pointer"),F.exit().each(function(){I.select(this).selectAll("g."+s.headerGroupClassName).each(R)}).remove(),0!==P.length){var B=F.selectAll("g."+s.headerGroupClassName).data(P,o);B.enter().append("g").classed(s.headerGroupClassName,!0);for(var J=T.ensureSingle(F,"g",s.dropdownButtonGroupClassName,function(X){X.style("pointer-events","all")}),z=0;z<P.length;z++)b(S,P[z]);var H=new a(S,J,"updatemenus"+O._uid);B.enter().size()&&(J.node().parentNode.appendChild(J.node()),J.call(D)),B.exit().each(function(X){J.call(D),R(X)}).remove(),B.each(function(X){var K=I.select(this),ue="dropdown"===X.type?J:null;C.manageCommandObserver(S,X,X.buttons,function(ae){u(S,X,0,K,ue,H,ae.index,!0)}),"dropdown"===X.type?(d(S,K,J,H,X),l(J,X)&&g(S,K,J,H,X)):g(S,K,null,null,X)})}}},20763:function(se,U,r){"use strict";var I=r(75909);se.exports={moduleType:"component",name:I.name,layoutAttributes:r(7163),supplyLayoutDefaults:r(64897),draw:r(13689)}},25849:function(se,U,r){"use strict";se.exports=T;var I=r(39898),C=r(7901),f=r(91424),k=r(71828);function T(v,c,i){this.gd=v,this.container=c,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(v,c,i){var s=this.gd._fullLayout,a=s.width,o=s.height;this.position=v;var l,u,d,g,h=this.position.l,w=this.position.w,y=this.position.t,p=this.position.h,_=this.position.direction,x="down"===_,b="left"===_,M="up"===_,m=w,D=p;x||b||"right"===_||M||(this.position.direction="down",x=!0),x||M?(u=(l=h)+m,x?(d=y,D=(g=Math.min(d+D,o))-d):D=(g=y+D)-(d=Math.max(g-D,0))):(g=(d=y)+D,b?m=(u=h+m)-(l=Math.max(u-m,0)):(l=h,m=(u=Math.min(l+m,a))-l)),this._box={l,t:d,w:m,h:D};var S=w>m,O=T.barLength+2*T.barPad,P=T.barWidth+2*T.barPad,R=h,F=y+p;F+P>o&&(F=o-P);var B=this.container.selectAll("rect.scrollbar-horizontal").data(S?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(C.fill,T.barColor),S?(this.hbar=B.attr({rx:T.barRadius,ry:T.barRadius,x:R,y:F,width:O,height:P}),this._hbarXMin=R+O/2,this._hbarTranslateMax=m-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var J=p>D,z=T.barWidth+2*T.barPad,$=T.barLength+2*T.barPad,G=h+w,H=y;G+z>a&&(G=a-z);var X=this.container.selectAll("rect.scrollbar-vertical").data(J?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(C.fill,T.barColor),J?(this.vbar=X.attr({rx:T.barRadius,ry:T.barRadius,x:G,y:H,width:z,height:$}),this._vbarYMin=H+$/2,this._vbarTranslateMax=D-$):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,ue=l-.5,ae=J?u+z+.5:u+.5,ne=d-.5,Q=S?g+P+.5:g+.5,ie=s._topdefs.selectAll("#"+K).data(S||J?[0]:[]);if(ie.exit().remove(),ie.enter().append("clipPath").attr("id",K).append("rect"),S||J?(this._clipRect=ie.select("rect").attr({x:Math.floor(ue),y:Math.floor(ne),width:Math.ceil(ae)-Math.floor(ue),height:Math.ceil(Q)-Math.floor(ne)}),this.container.call(f.setClipUrl,K,this.gd),this.bg.attr({x:h,y,width:w,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(f.setClipUrl,null),delete this._clipRect),S||J){var le=I.behavior.drag().on("dragstart",function(){I.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(le);var fe=I.behavior.drag().on("dragstart",function(){I.event.sourceEvent.preventDefault(),I.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));S&&this.hbar.on(".drag",null).call(fe),J&&this.vbar.on(".drag",null).call(fe)}this.setTranslate(c,i)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(f.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var v=this.translateX,c=this.translateY;this.hbar&&(v-=I.event.dx),this.vbar&&(c-=I.event.dy),this.setTranslate(v,c)},T.prototype._onBoxWheel=function(){var v=this.translateX,c=this.translateY;this.hbar&&(v+=I.event.deltaY),this.vbar&&(c+=I.event.deltaY),this.setTranslate(v,c)},T.prototype._onBarDrag=function(){var v=this.translateX,c=this.translateY;if(this.hbar){var i=v+this._hbarXMin,s=i+this._hbarTranslateMax;v=(k.constrain(I.event.x,i,s)-i)/(s-i)*(this.position.w-this._box.w)}if(this.vbar){var a=c+this._vbarYMin,o=a+this._vbarTranslateMax;c=(k.constrain(I.event.y,a,o)-a)/(o-a)*(this.position.h-this._box.h)}this.setTranslate(v,c)},T.prototype.setTranslate=function(v,c){var i=this.position.w-this._box.w,s=this.position.h-this._box.h;v=k.constrain(v||0,0,i),c=k.constrain(c||0,0,s),this.translateX=v,this.translateY=c,this.container.call(f.setTranslate,this._box.l-this.position.l-v,this._box.t-this.position.t-c),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+v-.5),y:Math.floor(this.position.t+c-.5)}),this.hbar&&this.hbar.call(f.setTranslate,v+v/i*this._hbarTranslateMax,c),this.vbar&&this.vbar.call(f.setTranslate,v,c+c/s*this._vbarTranslateMax)}},18783:function(se){"use strict";se.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function(se){"use strict";se.exports={axisRefDescription:function(U,r,I){return["If set to a",U,"axis id (e.g. *"+U+"* or","*"+U+"2*), the `"+U+"` position refers to a",U,"coordinate. If set to *paper*, the `"+U+"`","position refers to the distance from the",r,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",r,"("+I+"). If set to a",U,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",r,"of the domain of that axis: e.g.,","*"+U+"2 domain* refers to the domain of the second",U," axis and a",U,"position of 0.5 refers to the","point between the",r,"and the",I,"of the domain of the","second",U,"axis."].join(" ")}}},22372:function(se){"use strict";se.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},31562:function(se){"use strict";se.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function(se){"use strict";se.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function(se){"use strict";se.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function(se){"use strict";se.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},37822:function(se){"use strict";se.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function(se){"use strict";se.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},32396:function(se,U){"use strict";U.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],U.STYLE=U.CSS_DECLARATIONS.map(function(r){return r.join(": ")+"; "}).join("")},77922:function(se,U){"use strict";U.xmlns="http://www.w3.org/2000/xmlns/",U.svg="http://www.w3.org/2000/svg",U.xlink="http://www.w3.org/1999/xlink",U.svgAttrs={xmlns:U.svg,"xmlns:xlink":U.xlink}},8729:function(se,U,r){"use strict";U.version=r(11506).version,r(7417),r(98847);for(var I=r(73972),C=U.register=I.register,f=r(10641),k=Object.keys(f),T=0;T<k.length;T++){var v=k[T];"_"!==v.charAt(0)&&(U[v]=f[v]),C({moduleType:"apiMethod",name:v,fn:f[v]})}C(r(67368)),C([r(2199),r(30211),r(32745),r(2468),r(47322),r(89853),r(68804),r(20763),r(23243),r(13137),r(97218),r(83312),r(37369),r(21081),r(12311),r(64168)]),C([r(92177),r(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(C(window.PlotlyLocales),delete window.PlotlyLocales),U.Icons=r(24255);var c=r(30211),i=r(74875);U.Plots={resize:i.resize,graphJson:i.graphJson,sendDataToCloud:i.sendDataToCloud},U.Fx={hover:c.hover,unhover:c.unhover,loneHover:c.loneHover,loneUnhover:c.loneUnhover},U.Snapshot=r(44511),U.PlotSchema=r(86281)},24255:function(se){"use strict";se.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function(se,U){"use strict";U.isLeftAnchor=function(r){return"left"===r.xanchor||"auto"===r.xanchor&&r.x<=.3333333333333333},U.isCenterAnchor=function(r){return"center"===r.xanchor||"auto"===r.xanchor&&r.x>.3333333333333333&&r.x<.6666666666666666},U.isRightAnchor=function(r){return"right"===r.xanchor||"auto"===r.xanchor&&r.x>=.6666666666666666},U.isTopAnchor=function(r){return"top"===r.yanchor||"auto"===r.yanchor&&r.y>=.6666666666666666},U.isMiddleAnchor=function(r){return"middle"===r.yanchor||"auto"===r.yanchor&&r.y>.3333333333333333&&r.y<.6666666666666666},U.isBottomAnchor=function(r){return"bottom"===r.yanchor||"auto"===r.yanchor&&r.y<=.3333333333333333}},26348:function(se,U,r){"use strict";var I=r(64872),C=I.mod,f=I.modHalf,k=Math.PI,T=2*k;function v(a){return Math.abs(a[1]-a[0])>T-1e-14}function c(a,o){return f(o-a,T)}function i(a,o){if(v(o))return!0;var l,u;o[0]<o[1]?(l=o[0],u=o[1]):(l=o[1],u=o[0]),(l=C(l,T))>(u=C(u,T))&&(u+=T);var d=C(a,T),g=d+T;return d>=l&&d<=u||g>=l&&g<=u}function s(a,o,l,u,d,g,h){d=d||0,g=g||0;var w,y,p,_,x,b=v([l,u]);function M(O,P){return[O*Math.cos(P)+d,g-O*Math.sin(P)]}b?(w=0,y=k,p=T):l<u?(w=l,p=u):(w=u,p=l),a<o?(_=a,x=o):(_=o,x=a);var m,D=Math.abs(p-w)<=k?0:1;function S(O,P,R){return"A"+[O,O]+" "+[0,D,R]+" "+M(O,P)}return b?m=null===_?"M"+M(x,w)+S(x,y,0)+S(x,p,0)+"Z":"M"+M(_,w)+S(_,y,0)+S(_,p,0)+"ZM"+M(x,w)+S(x,y,1)+S(x,p,1)+"Z":null===_?(m="M"+M(x,w)+S(x,p,0),h&&(m+="L0,0Z")):m="M"+M(_,w)+"L"+M(x,w)+S(x,p,0)+"L"+M(_,p)+S(_,w,1)+"Z",m}se.exports={deg2rad:function(a){return a/180*k},rad2deg:function(a){return a/k*180},angleDelta:c,angleDist:function(a,o){return Math.abs(c(a,o))},isFullCircle:v,isAngleInsideSector:i,isPtInsideSector:function(a,o,l,u){return!!i(o,u)&&(l[0]<l[1]?(d=l[0],g=l[1]):(d=l[1],g=l[0]),a>=d&&a<=g);var d,g},pathArc:function(a,o,l,u,d){return s(null,a,o,l,u,d,0)},pathSector:function(a,o,l,u,d){return s(null,a,o,l,u,d,1)},pathAnnulus:function(a,o,l,u,d,g){return s(a,o,l,u,d,g,1)}}},73627:function(se,U){"use strict";var r=Array.isArray,I=ArrayBuffer,C=DataView;function f(v){return I.isView(v)&&!(v instanceof C)}function k(v){return r(v)||f(v)}function T(v,c,i){if(k(v)){if(k(v[0])){for(var s=i,a=0;a<v.length;a++)s=c(s,v[a].length);return s}return v.length}return 0}U.isTypedArray=f,U.isArrayOrTypedArray=k,U.isArray1D=function(v){return!k(v[0])},U.ensureArray=function(v,c){return r(v)||(v=[]),v.length=c,v},U.concat=function(){var v,c,i,s,a,o,l,u,d=[],g=!0,h=0;for(i=0;i<arguments.length;i++)(o=(s=arguments[i]).length)&&(c?d.push(s):(c=s,a=o),r(s)?v=!1:(g=!1,h?v!==s.constructor&&(v=!1):v=s.constructor),h+=o);if(!h)return[];if(!d.length)return c;if(g)return c.concat.apply(c,d);if(v){for((l=new v(h)).set(c),i=0;i<d.length;i++)l.set(s=d[i],a),a+=s.length;return l}for(l=new Array(h),u=0;u<c.length;u++)l[u]=c[u];for(i=0;i<d.length;i++){for(s=d[i],u=0;u<s.length;u++)l[a+u]=s[u];a+=u}return l},U.maxRowLength=function(v){return T(v,Math.max,0)},U.minRowLength=function(v){return T(v,Math.min,1/0)}},95218:function(se,U,r){"use strict";var I=r(92770),C=r(50606).BADNUM,f=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;se.exports=function(k){return"string"==typeof k&&(k=k.replace(f,"")),I(k)?Number(k):C}},33306:function(se){"use strict";se.exports=function(U){var r=U._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(I){I.regl&&I.regl.clear({color:!0,depth:!0})})}},86367:function(se){"use strict";se.exports=function(U){U._responsiveChartHandler&&(window.removeEventListener("resize",U._responsiveChartHandler),delete U._responsiveChartHandler)}},96554:function(se,U,r){"use strict";var I=r(92770),C=r(84267),f=r(9012),k=r(63282),T=r(7901),v=r(37822).DESELECTDIM,c=r(65487),i=r(30587).counter,s=r(64872).modHalf,a=r(73627).isArrayOrTypedArray;function o(l,u){var d=U.valObjectMeta[u.valType];if(u.arrayOk&&a(l))return!0;if(d.validateFunction)return d.validateFunction(l,u);var g={},h=g;return d.coerceFunction(l,{set:function(y){h=y}},g,u),h!==g}U.valObjectMeta={data_array:{coerceFunction:function(l,u,d){a(l)?u.set(l):void 0!==d&&u.set(d)}},enumerated:{coerceFunction:function(l,u,d,g){g.coerceNumber&&(l=+l),-1===g.values.indexOf(l)?u.set(d):u.set(l)},validateFunction:function(l,u){u.coerceNumber&&(l=+l);for(var d=u.values,g=0;g<d.length;g++){var h=String(d[g]);if("/"===h.charAt(0)&&"/"===h.charAt(h.length-1)){if(new RegExp(h.substr(1,h.length-2)).test(l))return!0}else if(l===d[g])return!0}return!1}},boolean:{coerceFunction:function(l,u,d){u.set(!0===l||!1===l?l:d)}},number:{coerceFunction:function(l,u,d,g){!I(l)||void 0!==g.min&&l<g.min||void 0!==g.max&&l>g.max?u.set(d):u.set(+l)}},integer:{coerceFunction:function(l,u,d,g){l%1||!I(l)||void 0!==g.min&&l<g.min||void 0!==g.max&&l>g.max?u.set(d):u.set(+l)}},string:{coerceFunction:function(l,u,d,g){u.set("string"!=typeof l?!0!==g.strict&&"number"==typeof l?String(l):d:g.noBlank&&!l?d:l)}},color:{coerceFunction:function(l,u,d){C(l).isValid()?u.set(l):u.set(d)}},colorlist:{coerceFunction:function(l,u,d){Array.isArray(l)&&l.length&&l.every(function(g){return C(g).isValid()})?u.set(l):u.set(d)}},colorscale:{coerceFunction:function(l,u,d){u.set(k.get(l,d))}},angle:{coerceFunction:function(l,u,d){"auto"===l?u.set("auto"):I(l)?u.set(s(+l,360)):u.set(d)}},subplotid:{coerceFunction:function(l,u,d,g){var h=g.regex||i(d);"string"==typeof l&&h.test(l)?u.set(l):u.set(d)},validateFunction:function(l,u){var d=u.dflt;return l===d||"string"==typeof l&&!!i(d).test(l)}},flaglist:{coerceFunction:function(l,u,d,g){if(-1===(g.extras||[]).indexOf(l))if("string"==typeof l){for(var h=l.split("+"),w=0;w<h.length;){var y=h[w];-1===g.flags.indexOf(y)||h.indexOf(y)<w?h.splice(w,1):w++}u.set(h.length?h.join("+"):d)}else u.set(d);else u.set(l)}},any:{coerceFunction:function(l,u,d){u.set(void 0===l?d:l)}},info_array:{coerceFunction:function(l,u,d,g){function h(F,B,J){var z;return void 0===J&&(J=B.dflt),U.valObjectMeta[B.valType].coerceFunction(F,{set:function(G){z=G}},J,B),z}var w=2===g.dimensions||"1-2"===g.dimensions&&Array.isArray(l)&&Array.isArray(l[0]);if(Array.isArray(l)){var y,p,_,b,M,m=g.items,D=[],S=Array.isArray(m),O=S&&w&&Array.isArray(m[0]),P=w&&S&&!O,R=S&&!P?m.length:l.length;if(d=Array.isArray(d)?d:[],w)for(y=0;y<R;y++)for(D[y]=[],_=Array.isArray(l[y])?l[y]:[],b=P?m.length:S?m[y].length:_.length,p=0;p<b;p++)void 0!==(M=h(_[p],P?m[p]:S?m[y][p]:m,(d[y]||[])[p]))&&(D[y][p]=M);else for(y=0;y<R;y++)void 0!==(M=h(l[y],S?m[y]:m,d[y]))&&(D[y]=M);u.set(D)}else u.set(d)},validateFunction:function(l,u){if(!Array.isArray(l))return!1;var d=u.items,g=Array.isArray(d),h=2===u.dimensions;if(!u.freeLength&&l.length!==d.length)return!1;for(var w=0;w<l.length;w++)if(h){if(!Array.isArray(l[w])||!u.freeLength&&l[w].length!==d[w].length)return!1;for(var y=0;y<l[w].length;y++)if(!o(l[w][y],g?d[w][y]:d))return!1}else if(!o(l[w],g?d[w]:d))return!1;return!0}}},U.coerce=function(l,u,d,g,h){var w=c(d,g).get(),y=c(l,g),p=c(u,g),_=y.get(),x=u._template;if(void 0===_&&x&&(_=c(x,g).get(),x=0),void 0===h&&(h=w.dflt),w.arrayOk&&a(_))return p.set(_),_;var b=U.valObjectMeta[w.valType].coerceFunction;b(_,p,h,w);var M=p.get();return x&&M===h&&!o(_,w)&&(b(_=c(x,g).get(),p,h,w),M=p.get()),M},U.coerce2=function(l,u,d,g,h){var w=c(l,g),y=U.coerce(l,u,d,g,h);return null!=w.get()&&y},U.coerceFont=function(l,u,d){var g={};return g.family=l(u+".family",(d=d||{}).family),g.size=l(u+".size",d.size),g.color=l(u+".color",d.color),g},U.coercePattern=function(l,u,d,g){if(l(u+".shape")){l(u+".solidity"),l(u+".size");var h="overlay"===l(u+".fillmode");if(!g){var w=l(u+".bgcolor",h?d:void 0);l(u+".fgcolor",h?T.contrast(w):d)}l(u+".fgopacity",h?.5:1)}},U.coerceHoverinfo=function(l,u,d){var g,h=u._module.attributes,w=h.hoverinfo?h:f,y=w.hoverinfo;if(1===d._dataLength){var p="all"===y.dflt?y.flags.slice():y.dflt.split("+");p.splice(p.indexOf("name"),1),g=p.join("+")}return U.coerce(l,u,w,"hoverinfo",g)},U.coerceSelectionMarkerOpacity=function(l,u){if(l.marker){var d,g,h=l.marker.opacity;void 0!==h&&(a(h)||l.selected||l.unselected||(d=h,g=v*h),u("selected.marker.opacity",d),u("unselected.marker.opacity",g))}},U.validate=o},41631:function(se,U,r){"use strict";var I,C,f=r(84096).i$,k=r(92770),T=r(47769),v=r(64872).mod,c=r(50606),i=c.BADNUM,s=c.ONEDAY,a=c.ONEHOUR,o=c.ONEMIN,l=c.ONESEC,u=c.EPOCHJD,d=r(73972),g=r(84096).g0,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=(new Date).getFullYear()-70;function p(B){return B&&d.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function _(B,J){return String(B+Math.pow(10,J)).substr(1)}U.dateTick0=function(B,J){var G,H,z=(H=!!J,p(G=B)?H?d.getComponentMethod("calendars","CANONICAL_SUNDAY")[G]:d.getComponentMethod("calendars","CANONICAL_TICK")[G]:H?"2000-01-02":"2000-01-01");if(J<2)return z;var $=U.dateTime2ms(z,B);return U.ms2DateTime($+=s*(J-1),0,B)},U.dfltRange=function(B){return p(B)?d.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},U.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},U.dateTime2ms=function(B,J){if(U.isJSDate(B)){var z=B.getTimezoneOffset()*o,$=(B.getUTCMinutes()-B.getMinutes())*o+(B.getUTCSeconds()-B.getSeconds())*l+(B.getUTCMilliseconds()-B.getMilliseconds());if($){var G=3*o;z=z-G/2+v($-z+G/2,G)}return(B=Number(B)-z)>=I&&B<=C?B:i}if("string"!=typeof B&&"number"!=typeof B)return i;B=String(B);var H=p(J),X=B.charAt(0);!H||"G"!==X&&"g"!==X||(B=B.substr(1),J="");var K=H&&"chinese"===J.substr(0,7),ue=B.match(K?w:h);if(!ue)return i;var ae=ue[1],ne=ue[3]||"1",Q=Number(ue[5]||1),ie=Number(ue[7]||0),le=Number(ue[9]||0),fe=Number(ue[11]||0);if(H){if(2===ae.length)return i;var he;ae=Number(ae);try{var pe=d.getComponentMethod("calendars","getCal")(J);if(K){var xe="i"===ne.charAt(ne.length-1);ne=parseInt(ne,10),he=pe.newDate(ae,pe.toMonthIndex(ae,ne,xe),Q)}else he=pe.newDate(ae,Number(ne),Q)}catch{return i}return he?(he.toJD()-u)*s+ie*a+le*o+fe*l:i}ae=2===ae.length?(Number(ae)+2e3-y)%100+y:Number(ae),ne-=1;var Ee=new Date(Date.UTC(2e3,ne,Q,ie,le));return Ee.setUTCFullYear(ae),Ee.getUTCMonth()!==ne||Ee.getUTCDate()!==Q?i:Ee.getTime()+fe*l},I=U.MIN_MS=U.dateTime2ms("-9999"),C=U.MAX_MS=U.dateTime2ms("9999-12-31 23:59:59.9999"),U.isDateTime=function(B,J){return U.dateTime2ms(B,J)!==i};var x=90*s,b=3*a,M=5*o;function m(B,J,z,$,G){if((J||z||$||G)&&(B+=" "+_(J,2)+":"+_(z,2),($||G)&&(B+=":"+_($,2),G))){for(var H=4;G%10==0;)H-=1,G/=10;B+="."+_(G,H)}return B}U.ms2DateTime=function(B,J,z){if("number"!=typeof B||!(B>=I&&B<=C))return i;J||(J=0);var $,G,H,X,K,ue,ae=Math.floor(10*v(B+.05,1)),ne=Math.round(B-ae/10);if(p(z)){var Q=Math.floor(ne/s)+u,ie=Math.floor(v(B,s));try{$=d.getComponentMethod("calendars","getCal")(z).fromJD(Q).formatDate("yyyy-mm-dd")}catch{$=g("G%Y-%m-%d")(new Date(ne))}if("-"===$.charAt(0))for(;$.length<11;)$="-0"+$.substr(1);else for(;$.length<10;)$="0"+$;G=J<x?Math.floor(ie/a):0,H=J<x?Math.floor(ie%a/o):0,X=J<b?Math.floor(ie%o/l):0,K=J<M?ie%l*10+ae:0}else ue=new Date(ne),$=g("%Y-%m-%d")(ue),G=J<x?ue.getUTCHours():0,H=J<x?ue.getUTCMinutes():0,X=J<b?ue.getUTCSeconds():0,K=J<M?10*ue.getUTCMilliseconds()+ae:0;return m($,G,H,X,K)},U.ms2DateTimeLocal=function(B){if(!(B>=I+s&&B<=C-s))return i;var J=Math.floor(10*v(B+.05,1)),z=new Date(Math.round(B-J/10));return m(f("%Y-%m-%d")(z),z.getHours(),z.getMinutes(),z.getSeconds(),10*z.getUTCMilliseconds()+J)},U.cleanDate=function(B,J,z){if(B===i)return J;if(U.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(p(z))return T.error("JS Dates and milliseconds are incompatible with world calendars",B),J;if(!(B=U.ms2DateTimeLocal(+B))&&void 0!==J)return J}else if(!U.isDateTime(B,z))return T.error("unrecognized date",B),J;return B};var D=/%\d?f/g,S=/%h/g,O={1:"1",2:"1",3:"2",4:"2"};function P(B,J,z,$){B=B.replace(D,function(H){var X=Math.min(+H.charAt(1)||6,6);return(J/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0"});var G=new Date(Math.floor(J+.05));if(B=B.replace(S,function(){return O[z("%q")(G)]}),p($))try{B=d.getComponentMethod("calendars","worldCalFmt")(B,J,$)}catch{return"Invalid"}return z(B)(G)}var R=[59,59.9,59.99,59.999,59.9999];U.formatDate=function(B,J,z,$,G,H){if(G=p(G)&&G,!J)if("y"===z)J=H.year;else if("m"===z)J=H.month;else{if("d"!==z)return function(X,K){var ue=v(X+.05,s),ae=_(Math.floor(ue/a),2)+":"+_(v(Math.floor(ue/o),60),2);if("M"!==K){k(K)||(K=0);var ne=(100+Math.min(v(X/l,60),R[K])).toFixed(K).substr(1);K>0&&(ne=ne.replace(/0+$/,"").replace(/[\.]$/,"")),ae+=":"+ne}return ae}(B,z)+"\n"+P(H.dayMonthYear,B,$,G);J=H.dayMonth+"\n"+H.year}return P(J,B,$,G)};var F=3*s;U.incrementMonth=function(B,J,z){z=p(z)&&z;var $=v(B,s);if(B=Math.round(B-$),z)try{var G=Math.round(B/s)+u,H=d.getComponentMethod("calendars","getCal")(z),X=H.fromJD(G);return J%12?H.add(X,J,"m"):H.add(X,J/12,"y"),(X.toJD()-u)*s+$}catch{T.error("invalid ms "+B+" in calendar "+z)}var K=new Date(B+F);return K.setUTCMonth(K.getUTCMonth()+J)+$-F},U.findExactDates=function(B,J){for(var z,$,G=0,H=0,X=0,K=0,ue=p(J)&&d.getComponentMethod("calendars","getCal")(J),ae=0;ae<B.length;ae++)if(k($=B[ae])){if(!($%s))if(ue)try{1===(z=ue.fromJD($/s+u)).day()?1===z.month()?G++:H++:X++}catch{}else 1===(z=new Date($)).getUTCDate()?0===z.getUTCMonth()?G++:H++:X++}else K++;X+=H+=G;var ne=B.length-K;return{exactYears:G/ne,exactMonths:H/ne,exactDays:X/ne}}},24401:function(se,U,r){"use strict";var I=r(39898),C=r(47769),f=r(35657),k=r(79576);function T(a){var o=a&&a.parentNode;o&&o.removeChild(a)}function v(a,o,l){var u="plotly.js-style-"+a,d=document.getElementById(u);d||((d=document.createElement("style")).setAttribute("id",u),d.appendChild(document.createTextNode("")),document.head.appendChild(d));var g=d.sheet;g.insertRule?g.insertRule(o+"{"+l+"}",0):g.addRule?g.addRule(o,l,0):C.warn("addStyleRule failed")}function c(a){var o=window.getComputedStyle(a,null),l=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("-moz-transform")||o.getPropertyValue("-ms-transform")||o.getPropertyValue("-o-transform")||o.getPropertyValue("transform");return"none"===l?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(u){return+u})}function i(a){for(var o=[];s(a);)o.push(a),a=a.parentNode;return o}function s(a){return a&&(a instanceof Element||a instanceof HTMLElement)}se.exports={getGraphDiv:function(a){var o;if("string"==typeof a){if(null===(o=document.getElementById(a)))throw new Error("No DOM element with id '"+a+"' exists on the page.");return o}if(null==a)throw new Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){var o=I.select(a);return o.node()instanceof HTMLElement&&o.size()&&o.classed("js-plotly-plot")},removeElement:T,addStyleRule:function(a,o){v("global",a,o)},addRelatedStyleRule:v,deleteRelatedStyleRule:function(a){var l=document.getElementById("plotly.js-style-"+a);l&&T(l)},getFullTransformMatrix:function(a){var o=i(a),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return o.forEach(function(u){var d=c(u);if(d){var g=f.convertCssMatrix(d);l=k.multiply(l,l,g)}}),l},getElementTransformMatrix:c,getElementAndAncestors:i,equalDomRects:function(a,o){return a&&o&&a.top===o.top&&a.left===o.left&&a.right===o.right&&a.bottom===o.bottom}}},11086:function(se,U,r){"use strict";var I=r(15398).EventEmitter;se.exports={init:function(f){if(f._ev instanceof I)return f;var k=new I,T=new I;return f._ev=k,f._internalEv=T,f.on=k.on.bind(k),f.once=k.once.bind(k),f.removeListener=k.removeListener.bind(k),f.removeAllListeners=k.removeAllListeners.bind(k),f._internalOn=T.on.bind(T),f._internalOnce=T.once.bind(T),f._removeInternalListener=T.removeListener.bind(T),f._removeAllInternalListeners=T.removeAllListeners.bind(T),f.emit=function(v,c){typeof jQuery<"u"&&jQuery(f).trigger(v,c),k.emit(v,c),T.emit(v,c)},f},triggerHandler:function(f,k,T){var v,c;typeof jQuery<"u"&&(v=jQuery(f).triggerHandler(k,T));var i=f._ev;if(!i)return v;var s,a=i._events[k];if(!a)return v;function o(l){return l.listener?(i.removeListener(k,l.listener),l.fired?void 0:(l.fired=!0,l.listener.apply(i,[T]))):l.apply(i,[T])}for(a=Array.isArray(a)?a:[a],s=0;s<a.length-1;s++)o(a[s]);return c=o(a[s]),void 0!==v?v:c},purge:function(f){return delete f._ev,delete f.on,delete f.once,delete f.removeListener,delete f.removeAllListeners,delete f.emit,delete f._ev,delete f._internalEv,delete f._internalOn,delete f._internalOnce,delete f._removeInternalListener,delete f._removeAllInternalListeners,f}}},1426:function(se,U,r){"use strict";var I=r(41965),C=Array.isArray;function f(k,T,v,c){var i,s,a,o,l,u,g=k[0],h=k.length;if(2===h&&C(g)&&C(k[1])&&0===g.length){if(function(y,p){var _,x;for(_=0;_<y.length;_++){if(null!==(x=y[_])&&"object"==typeof x)return!1;void 0!==x&&(p[_]=x)}return!0}(k[1],g))return g;g.splice(0,g.length)}for(var w=1;w<h;w++)for(s in i=k[w])a=g[s],o=i[s],c&&C(o)?g[s]=o:T&&o&&(I(o)||(l=C(o)))?(l?(l=!1,u=a&&C(a)?a:[]):u=a&&I(a)?a:{},g[s]=f([u,o],T,v,c)):(void 0!==o||v)&&(g[s]=o);return g}U.extendFlat=function(){return f(arguments,!1,!1,!1)},U.extendDeep=function(){return f(arguments,!0,!1,!1)},U.extendDeepAll=function(){return f(arguments,!0,!0,!1)},U.extendDeepNoArrays=function(){return f(arguments,!0,!1,!0)}},75744:function(se){"use strict";se.exports=function(U){for(var r={},I=[],C=0,f=0;f<U.length;f++){var k=U[f];1!==r[k]&&(r[k]=1,I[C++]=k)}return I}},76756:function(se){"use strict";function U(I){return!0===I.visible}function r(I){var C=I[0].trace;return!0===C.visible&&0!==C._length}se.exports=function(I){for(var C,f=(C=I,Array.isArray(C)&&Array.isArray(C[0])&&C[0][0]&&C[0][0].trace?r:U),k=[],T=0;T<I.length;T++){var v=I[T];f(v)&&k.push(v)}return k}},41327:function(se,U,r){"use strict";var I=r(39898),C=r(24138),f=r(30774),k=r(29261),T=r(85268),v=r(23389),c=r(47769),i=r(41965),s=r(65487),a=r(61082),o=Object.keys(C),l={"ISO-3":v,"USA-states":v,"country names":function(d){for(var g=0;g<o.length;g++){var h=o[g];if(new RegExp(C[h]).test(d.trim().toLowerCase()))return h}return c.log("Unrecognized country name: "+d+"."),!1}};function u(d){var g=d.geojson,h=window.PlotlyGeoAssets||{},w="string"==typeof g?h[g]:g;return i(w)?w:(c.error("Oops ... something went wrong when fetching "+g),!1)}se.exports={locationToFeature:function(d,g,h){if(!g||"string"!=typeof g)return!1;var w,y,p,_=l[d](g);if(_){if("USA-states"===d)for(w=[],p=0;p<h.length;p++)(y=h[p]).properties&&y.properties.gu&&"USA"===y.properties.gu&&w.push(y);else w=h;for(p=0;p<w.length;p++)if((y=w[p]).id===_)return y;c.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(d){var g,h,w,y,p=d.geometry,_=p.coordinates,x=d.id,b=[];function M(m){for(var D=0;D<m.length-1;D++)if(m[D][0]>0&&m[D+1][0]<0)return D;return null}switch(g="RUS"===x||"FJI"===x?function(m){var D;if(null===M(m))D=m;else for(D=new Array(m.length),y=0;y<m.length;y++)D[y]=[m[y][0]<0?m[y][0]+360:m[y][0],m[y][1]];b.push(a.tester(D))}:"ATA"===x?function(m){var D=M(m);if(null===D)return b.push(a.tester(m));var S=new Array(m.length+1),O=0;for(y=0;y<m.length;y++)y>D?S[O++]=[m[y][0]+360,m[y][1]]:y===D?(S[O++]=m[y],S[O++]=[m[y][0],-90]):S[O++]=m[y];var P=a.tester(S);P.pts.pop(),b.push(P)}:function(m){b.push(a.tester(m))},p.type){case"MultiPolygon":for(h=0;h<_.length;h++)for(w=0;w<_[h].length;w++)g(_[h][w]);break;case"Polygon":for(h=0;h<_.length;h++)g(_[h])}return b},getTraceGeojson:u,extractTraceFeature:function(d){var g=d[0].trace,h=u(g);if(!h)return!1;var w,y={},p=[];for(w=0;w<g._length;w++){var _=d[w];(_.loc||0===_.loc)&&(y[_.loc]=_)}function x(m){var D=s(m,g.featureidkey||"id").get(),S=y[D];if(S){var O=m.geometry;if("Polygon"===O.type||"MultiPolygon"===O.type){var P={type:"Feature",id:D,geometry:O,properties:{}};P.properties.ct=function(R){var F,B=R.geometry;if("MultiPolygon"===B.type)for(var J=B.coordinates,z=0,$=0;$<J.length;$++){var G={type:"Polygon",coordinates:J[$]},H=f.default(G);H>z&&(z=H,F=G)}else F=B;return k.default(F).geometry.coordinates}(P),S.fIn=m,S.fOut=P,p.push(P)}else c.log(["Location",S.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete y[D]}switch(h.type){case"FeatureCollection":var b=h.features;for(w=0;w<b.length;w++)x(b[w]);break;case"Feature":x(h);break;default:return c.warn(["Invalid GeoJSON type",(h.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var M in y)c.log(["Location *"+M+"*","does not have a matching feature with id-key","*"+g.featureidkey+"*."].join(" "));return p},fetchTraceGeoData:function(d){var g=window.PlotlyGeoAssets||{},h=[];function w(x){return new Promise(function(b,M){I.json(x,function(m,D){return m?(delete g[x],M(new Error(404===m.status?'GeoJSON at URL "'+x+'" does not exist.':"Unexpected error while fetching from "+x))):(g[x]=D,b(D))})})}function y(x){return new Promise(function(b,M){var m=0,D=setInterval(function(){return g[x]&&"pending"!==g[x]?(clearInterval(D),b(g[x])):m>100?(clearInterval(D),M("Unexpected error while fetching from "+x)):void m++},50)})}for(var p=0;p<d.length;p++){var _=d[p][0].trace.geojson;"string"==typeof _&&(g[_]?"pending"===g[_]&&h.push(y(_)):(g[_]="pending",h.push(w(_))))}return h},computeBbox:function(d){return T.default(d)}}},18214:function(se,U,r){"use strict";var I=r(50606).BADNUM;U.calcTraceToLineCoords=function(C){for(var f=C[0].trace.connectgaps,k=[],T=[],v=0;v<C.length;v++){var c=C[v].lonlat;c[0]!==I?T.push(c):!f&&T.length>0&&(k.push(T),T=[])}return T.length>0&&k.push(T),k},U.makeLine=function(C){return 1===C.length?{type:"LineString",coordinates:C[0]}:{type:"MultiLineString",coordinates:C}},U.makePolygon=function(C){if(1===C.length)return{type:"Polygon",coordinates:C};for(var f=new Array(C.length),k=0;k<C.length;k++)f[k]=[C[k]];return{type:"MultiPolygon",coordinates:f}},U.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function(se,U,r){"use strict";var I,C,f,k=r(64872).mod;function T(c,i,s,a,o,l,u,d){var g=s-c,h=o-c,w=u-o,y=a-i,p=l-i,_=d-l,x=g*_-w*y;if(0===x)return null;var b=(h*_-w*p)/x,M=(h*y-g*p)/x;return M<0||M>1||b<0||b>1?null:{x:c+g*b,y:i+y*b}}function v(c,i,s,a,o){var l=a*c+o*i;if(l<0)return a*a+o*o;if(l>s){var u=a-c,d=o-i;return u*u+d*d}var g=a*i-o*c;return g*g/s}U.segmentsIntersect=T,U.segmentDistance=function(c,i,s,a,o,l,u,d){if(T(c,i,s,a,o,l,u,d))return 0;var g=s-c,h=a-i,w=u-o,y=d-l,p=g*g+h*h,_=w*w+y*y,x=Math.min(v(g,h,p,o-c,l-i),v(g,h,p,u-c,d-i),v(w,y,_,c-o,i-l),v(w,y,_,s-o,a-l));return Math.sqrt(x)},U.getTextLocation=function(c,i,s,a){if(c===C&&a===f||(I={},C=c,f=a),I[s])return I[s];var o=c.getPointAtLength(k(s-a/2,i)),l=c.getPointAtLength(k(s+a/2,i)),u=Math.atan((l.y-o.y)/(l.x-o.x)),d=c.getPointAtLength(k(s,i)),g={x:(4*d.x+o.x+l.x)/6,y:(4*d.y+o.y+l.y)/6,theta:u};return I[s]=g,g},U.clearLocationCache=function(){C=null},U.getVisibleSegment=function(c,i,s){var a,o,l=i.left,u=i.right,d=i.top,g=i.bottom,h=0,w=c.getTotalLength(),y=w;function p(x){var b=c.getPointAtLength(x);0===x?a=b:x===w&&(o=b);var M=b.x<l?l-b.x:b.x>u?b.x-u:0,m=b.y<d?d-b.y:b.y>g?b.y-g:0;return Math.sqrt(M*M+m*m)}for(var _=p(h);_;){if((h+=_+s)>y)return;_=p(h)}for(_=p(y);_;){if(h>(y-=_+s))return;_=p(y)}return{min:h,max:y,len:y-h,total:w,isClosed:0===h&&y===w&&Math.abs(a.x-o.x)<.1&&Math.abs(a.y-o.y)<.1}},U.findPointOnPath=function(c,i,s,a){for(var o,l,u,d=(a=a||{}).pathLength||c.getTotalLength(),g=a.tolerance||.001,h=a.iterationLimit||30,w=c.getPointAtLength(0)[s]>c.getPointAtLength(d)[s]?-1:1,y=0,p=0,_=d;y<h;){if(u=(l=c.getPointAtLength(o=(p+_)/2))[s]-i,Math.abs(u)<g)return l;w*u>0?_=o:p=o,y++}return l}},81697:function(se,U,r){"use strict";var I=r(92770),C=r(84267),f=r(25075),k=r(21081),T=r(22399).defaultLine,v=r(73627).isArrayOrTypedArray,c=f(T);function i(o,l){var u=o;return u[3]*=l,u}function s(o){if(I(o))return c;var l=f(o);return l.length?l:c}function a(o){return I(o)?o:1}se.exports={formatColor:function(o,l,u){var d,g,h,w,y,p=o.color,_=v(p),x=v(l),b=k.extractOpts(o),M=[];if(d=void 0!==b.colorscale?k.makeColorScaleFuncFromTrace(o):s,g=_?function(D,S){return void 0===D[S]?c:f(d(D[S]))}:s,h=x?function(D,S){return void 0===D[S]?1:a(D[S])}:a,_||x)for(var m=0;m<u;m++)w=g(p,m),y=h(l,m),M[m]=i(w,y);else M=i(f(p),l);return M},parseColorScale:function(o){var l=k.extractOpts(o),u=l.colorscale;return l.reversescale&&(u=k.flipScale(l.colorscale)),u.map(function(d){var g=d[0],h=C(d[1]).toRgb();return{index:g,rgb:[h.r,h.g,h.b,h.a]}})}}},28984:function(se,U,r){"use strict";var I=r(23389);function C(f){return[f]}se.exports={keyFun:function(f){return f.key},repeat:C,descend:I,wrap:C,unwrap:function(f){return f[0]}}},23389:function(se){"use strict";se.exports=function(U){return U}},39240:function(se){"use strict";se.exports=function(U,r){if(!r)return U;var I=1/Math.abs(r),C=I>1?(I*U+I*r)/I:U+r,f=String(C).length;if(f>16){var k=String(r).length;if(f>=String(U).length+k){var T=parseFloat(C).toPrecision(12);-1===T.indexOf("e+")&&(C=+T)}}return C}},71828:function(se,U,r){"use strict";var I=r(39898),C=r(84096).g0,f=r(60721).WU,k=r(92770),T=r(50606),v=T.FP_SAFE,c=-v,i=T.BADNUM,s=se.exports={};s.adjustFormat=function(Q){return!Q||/^\d[.]\df/.test(Q)||/[.]\d%/.test(Q)?Q:"0.f"===Q?"~f":/^\d%/.test(Q)?"~%":/^\ds/.test(Q)?"~s":!/^[~,.0$]/.test(Q)&&/[&fps]/.test(Q)?"~"+Q:Q};var a={};s.warnBadFormat=function(Q){var ie=String(Q);a[ie]||(a[ie]=1,s.warn('encountered bad format: "'+ie+'"'))},s.noFormat=function(Q){return String(Q)},s.numberFormat=function(Q){var ie;try{ie=f(s.adjustFormat(Q))}catch{return s.warnBadFormat(Q),s.noFormat}return ie},s.nestedProperty=r(65487),s.keyedContainer=r(66636),s.relativeAttr=r(6962),s.isPlainObject=r(41965),s.toLogRange=r(58163),s.relinkPrivateKeys=r(51332);var o=r(73627);s.isTypedArray=o.isTypedArray,s.isArrayOrTypedArray=o.isArrayOrTypedArray,s.isArray1D=o.isArray1D,s.ensureArray=o.ensureArray,s.concat=o.concat,s.maxRowLength=o.maxRowLength,s.minRowLength=o.minRowLength;var l=r(64872);s.mod=l.mod,s.modHalf=l.modHalf;var u=r(96554);s.valObjectMeta=u.valObjectMeta,s.coerce=u.coerce,s.coerce2=u.coerce2,s.coerceFont=u.coerceFont,s.coercePattern=u.coercePattern,s.coerceHoverinfo=u.coerceHoverinfo,s.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,s.validate=u.validate;var d=r(41631);s.dateTime2ms=d.dateTime2ms,s.isDateTime=d.isDateTime,s.ms2DateTime=d.ms2DateTime,s.ms2DateTimeLocal=d.ms2DateTimeLocal,s.cleanDate=d.cleanDate,s.isJSDate=d.isJSDate,s.formatDate=d.formatDate,s.incrementMonth=d.incrementMonth,s.dateTick0=d.dateTick0,s.dfltRange=d.dfltRange,s.findExactDates=d.findExactDates,s.MIN_MS=d.MIN_MS,s.MAX_MS=d.MAX_MS;var g=r(65888);s.findBin=g.findBin,s.sorterAsc=g.sorterAsc,s.sorterDes=g.sorterDes,s.distinctVals=g.distinctVals,s.roundUp=g.roundUp,s.sort=g.sort,s.findIndexOfMin=g.findIndexOfMin,s.sortObjectKeys=r(78607);var h=r(80038);s.aggNums=h.aggNums,s.len=h.len,s.mean=h.mean,s.median=h.median,s.midRange=h.midRange,s.variance=h.variance,s.stdev=h.stdev,s.interp=h.interp;var w=r(35657);s.init2dArray=w.init2dArray,s.transposeRagged=w.transposeRagged,s.dot=w.dot,s.translationMatrix=w.translationMatrix,s.rotationMatrix=w.rotationMatrix,s.rotationXYMatrix=w.rotationXYMatrix,s.apply3DTransform=w.apply3DTransform,s.apply2DTransform=w.apply2DTransform,s.apply2DTransform2=w.apply2DTransform2,s.convertCssMatrix=w.convertCssMatrix,s.inverseTransformMatrix=w.inverseTransformMatrix;var y=r(26348);s.deg2rad=y.deg2rad,s.rad2deg=y.rad2deg,s.angleDelta=y.angleDelta,s.angleDist=y.angleDist,s.isFullCircle=y.isFullCircle,s.isAngleInsideSector=y.isAngleInsideSector,s.isPtInsideSector=y.isPtInsideSector,s.pathArc=y.pathArc,s.pathSector=y.pathSector,s.pathAnnulus=y.pathAnnulus;var p=r(99863);s.isLeftAnchor=p.isLeftAnchor,s.isCenterAnchor=p.isCenterAnchor,s.isRightAnchor=p.isRightAnchor,s.isTopAnchor=p.isTopAnchor,s.isMiddleAnchor=p.isMiddleAnchor,s.isBottomAnchor=p.isBottomAnchor;var _=r(87642);s.segmentsIntersect=_.segmentsIntersect,s.segmentDistance=_.segmentDistance,s.getTextLocation=_.getTextLocation,s.clearLocationCache=_.clearLocationCache,s.getVisibleSegment=_.getVisibleSegment,s.findPointOnPath=_.findPointOnPath;var x=r(1426);s.extendFlat=x.extendFlat,s.extendDeep=x.extendDeep,s.extendDeepAll=x.extendDeepAll,s.extendDeepNoArrays=x.extendDeepNoArrays;var b=r(47769);s.log=b.log,s.warn=b.warn,s.error=b.error;var M=r(30587);s.counterRegex=M.counter;var m=r(79990);s.throttle=m.throttle,s.throttleDone=m.done,s.clearThrottle=m.clear;var D=r(24401);function S(Q){var ie={};for(var le in Q)for(var fe=Q[le],he=0;he<fe.length;he++)ie[fe[he]]=+le;return ie}s.getGraphDiv=D.getGraphDiv,s.isPlotDiv=D.isPlotDiv,s.removeElement=D.removeElement,s.addStyleRule=D.addStyleRule,s.addRelatedStyleRule=D.addRelatedStyleRule,s.deleteRelatedStyleRule=D.deleteRelatedStyleRule,s.getFullTransformMatrix=D.getFullTransformMatrix,s.getElementTransformMatrix=D.getElementTransformMatrix,s.getElementAndAncestors=D.getElementAndAncestors,s.equalDomRects=D.equalDomRects,s.clearResponsive=r(86367),s.preserveDrawingBuffer=r(45142),s.makeTraceGroups=r(77310),s._=r(15867),s.notifier=r(75046),s.filterUnique=r(75744),s.filterVisible=r(76756),s.pushUnique=r(75138),s.increment=r(39240),s.cleanNumber=r(95218),s.ensureNumber=function(Q){return k(Q)?(Q=Number(Q))>v||Q<c?i:Q:i},s.isIndex=function(Q,ie){return!(void 0!==ie&&Q>=ie)&&k(Q)&&Q>=0&&Q%1==0},s.noop=r(64213),s.identity=r(23389),s.repeat=function(Q,ie){for(var le=new Array(ie),fe=0;fe<ie;fe++)le[fe]=Q;return le},s.swapAttrs=function(Q,ie,le,fe){le||(le="x"),fe||(fe="y");for(var he=0;he<ie.length;he++){var pe=ie[he],xe=s.nestedProperty(Q,pe.replace("?",le)),Ee=s.nestedProperty(Q,pe.replace("?",fe)),Re=xe.get();xe.set(Ee.get()),Ee.set(Re)}},s.raiseToTop=function(Q){Q.parentNode.appendChild(Q)},s.cancelTransition=function(Q){return Q.transition().duration(0)},s.constrain=function(Q,ie,le){return ie>le?Math.max(le,Math.min(ie,Q)):Math.max(ie,Math.min(le,Q))},s.bBoxIntersect=function(Q,ie,le){return Q.left<=ie.right+(le=le||0)&&ie.left<=Q.right+le&&Q.top<=ie.bottom+le&&ie.top<=Q.bottom+le},s.simpleMap=function(Q,ie,le,fe,he){for(var pe=Q.length,xe=new Array(pe),Ee=0;Ee<pe;Ee++)xe[Ee]=ie(Q[Ee],le,fe,he);return xe},s.randstr=function Q(ie,le,fe,he){if(fe||(fe=16),void 0===le&&(le=24),le<=0)return"0";var pe,xe,Ee=Math.log(Math.pow(2,le))/Math.log(fe),Re="";for(pe=2;Ee===1/0;pe*=2)Ee=Math.log(Math.pow(2,le/pe))/Math.log(fe)*pe;var ke=Ee-Math.floor(Ee);for(pe=0;pe<Math.floor(Ee);pe++)Re=Math.floor(Math.random()*fe).toString(fe)+Re;ke&&(xe=Math.pow(fe,ke),Re=Math.floor(Math.random()*xe).toString(fe)+Re);var Te=parseInt(Re,fe);return ie&&ie[Re]||Te!==1/0&&Te>=Math.pow(2,le)?he>10?(s.warn("randstr failed uniqueness"),Re):Q(ie,le,fe,(he||0)+1):Re},s.OptionControl=function(Q,ie){Q||(Q={}),ie||(ie="opt");var le={optionList:[],_newoption:function(fe){fe[ie]=Q,le[fe.name]=fe,le.optionList.push(fe)}};return le["_"+ie]=Q,le},s.smooth=function(Q,ie){if((ie=Math.round(ie)||0)<2)return Q;var le,fe,he,pe,xe=Q.length,Ee=2*xe,Re=2*ie-1,ke=new Array(Re),Te=new Array(xe);for(le=0;le<Re;le++)ke[le]=(1-Math.cos(Math.PI*(le+1)/ie))/(2*ie);for(le=0;le<xe;le++){for(pe=0,fe=0;fe<Re;fe++)(he=le+fe+1-ie)<-xe?he-=Ee*Math.round(he/Ee):he>=Ee&&(he-=Ee*Math.floor(he/Ee)),he<0?he=-1-he:he>=xe&&(he=Ee-1-he),pe+=Q[he]*ke[fe];Te[le]=pe}return Te},s.syncOrAsync=function(Q,ie,le){var fe;function he(){return s.syncOrAsync(Q,ie,le)}for(;Q.length;)if((fe=(0,Q.splice(0,1)[0])(ie))&&fe.then)return fe.then(he);return le&&le(ie)},s.stripTrailingSlash=function(Q){return"/"===Q.substr(-1)?Q.substr(0,Q.length-1):Q},s.noneOrAll=function(Q,ie,le){if(Q){var fe,he=!1,pe=!0;for(fe=0;fe<le.length;fe++)null!=Q[le[fe]]?he=!0:pe=!1;if(he&&!pe)for(fe=0;fe<le.length;fe++)Q[le[fe]]=ie[le[fe]]}},s.mergeArray=function(Q,ie,le,fe){var he="function"==typeof fe;if(s.isArrayOrTypedArray(Q))for(var pe=Math.min(Q.length,ie.length),xe=0;xe<pe;xe++){var Ee=Q[xe];ie[xe][le]=he?fe(Ee):Ee}},s.mergeArrayCastPositive=function(Q,ie,le){return s.mergeArray(Q,ie,le,function(fe){var he=+fe;return isFinite(he)&&he>0?he:0})},s.fillArray=function(Q,ie,le,fe){if(fe=fe||s.identity,s.isArrayOrTypedArray(Q))for(var he=0;he<ie.length;he++)ie[he][le]=fe(Q[he])},s.castOption=function(Q,ie,le,fe){fe=fe||s.identity;var he=s.nestedProperty(Q,le).get();return s.isArrayOrTypedArray(he)?Array.isArray(ie)&&s.isArrayOrTypedArray(he[ie[0]])?fe(he[ie[0]][ie[1]]):fe(he[ie]):he},s.extractOption=function(Q,ie,le,fe){if(le in Q)return Q[le];var he=s.nestedProperty(ie,fe).get();return Array.isArray(he)?void 0:he},s.tagSelected=function(Q,ie,le){var fe,he,pe=ie.selectedpoints,xe=ie._indexToPoints;xe&&(fe=S(xe));for(var Ee=0;Ee<pe.length;Ee++){var Re=pe[Ee];if(s.isIndex(Re)||s.isArrayOrTypedArray(Re)&&s.isIndex(Re[0])&&s.isIndex(Re[1])){var ke=fe?fe[Re]:Re,Te=le?le[ke]:ke;void 0!==(he=Te)&&he<Q.length&&(Q[Te].selected=1)}}},s.selIndices2selPoints=function(Q){var ie=Q.selectedpoints,le=Q._indexToPoints;if(le){for(var fe=S(le),he=[],pe=0;pe<ie.length;pe++){var xe=ie[pe];if(s.isIndex(xe)){var Ee=fe[xe];s.isIndex(Ee)&&he.push(Ee)}}return he}return ie},s.getTargetArray=function(Q,ie){var le=ie.target;if("string"==typeof le&&le){var fe=s.nestedProperty(Q,le).get();return!!Array.isArray(fe)&&fe}return!!Array.isArray(le)&&le},s.minExtend=function Q(ie,le,fe){var he={};"object"!=typeof le&&(le={});var pe,xe,Ee,Re="pieLike"===fe?-1:3,ke=Object.keys(ie);for(pe=0;pe<ke.length;pe++)Ee=ie[xe=ke[pe]],"_"!==xe.charAt(0)&&"function"!=typeof Ee&&(he[xe]="module"===xe?Ee:Array.isArray(Ee)?"colorscale"===xe||-1===Re?Ee.slice():Ee.slice(0,Re):s.isTypedArray(Ee)?-1===Re?Ee.subarray():Ee.subarray(0,Re):Ee&&"object"==typeof Ee?Q(ie[xe],le[xe],fe):Ee);for(ke=Object.keys(le),pe=0;pe<ke.length;pe++)"object"==typeof(Ee=le[xe=ke[pe]])&&xe in he&&"object"==typeof he[xe]||(he[xe]=Ee);return he},s.titleCase=function(Q){return Q.charAt(0).toUpperCase()+Q.substr(1)},s.containsAny=function(Q,ie){for(var le=0;le<ie.length;le++)if(-1!==Q.indexOf(ie[le]))return!0;return!1},s.isIE=function(){return void 0!==window.navigator.msSaveBlob};var O=/Version\/[\d\.]+.*Safari/;s.isSafari=function(){return O.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;s.isIOS=function(){return P.test(window.navigator.userAgent)};var R=/Firefox\/(\d+)\.\d+/;s.getFirefoxVersion=function(){var Q=R.exec(window.navigator.userAgent);if(Q&&2===Q.length){var ie=parseInt(Q[1]);if(!isNaN(ie))return ie}return null},s.isD3Selection=function(Q){return Q instanceof I.selection},s.ensureSingle=function(Q,ie,le,fe){var he=Q.select(ie+(le?"."+le:""));if(he.size())return he;var pe=Q.append(ie);return le&&pe.classed(le,!0),fe&&pe.call(fe),pe},s.ensureSingleById=function(Q,ie,le,fe){var he=Q.select(ie+"#"+le);if(he.size())return he;var pe=Q.append(ie).attr("id",le);return fe&&pe.call(fe),pe},s.objectFromPath=function(Q,ie){for(var le,fe=Q.split("."),he=le={},pe=0;pe<fe.length;pe++){var xe=fe[pe],Ee=null,Re=fe[pe].match(/(.*)\[([0-9]+)\]/);Re?(Ee=Re[2],(le=le[xe=Re[1]]=[])[Ee]=pe===fe.length-1?ie:{},le=le[Ee]):(le[xe]=pe===fe.length-1?ie:{},le=le[xe])}return he};var F=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;s.expandObjectPaths=function(Q){var ie,le,fe,he,pe,xe,Ee;if("object"==typeof Q&&!Array.isArray(Q))for(le in Q)Q.hasOwnProperty(le)&&((ie=le.match(F))?(he=Q[le],fe=ie[1],delete Q[le],Q[fe]=s.extendDeepNoArrays(Q[fe]||{},s.objectFromPath(le,s.expandObjectPaths(he))[fe])):(ie=le.match(B))?(he=Q[le],fe=ie[1],pe=parseInt(ie[2]),delete Q[le],Q[fe]=Q[fe]||[],"."===ie[3]?(Ee=ie[4],xe=Q[fe][pe]=Q[fe][pe]||{},s.extendDeepNoArrays(xe,s.objectFromPath(Ee,s.expandObjectPaths(he)))):Q[fe][pe]=s.expandObjectPaths(he)):Q[le]=s.expandObjectPaths(Q[le]));return Q},s.numSeparate=function(Q,ie,le){if(le||(le=!1),"string"!=typeof ie||0===ie.length)throw new Error("Separator string required for formatting!");"number"==typeof Q&&(Q=String(Q));var fe=/(\d+)(\d{3})/,he=ie.charAt(0),pe=ie.charAt(1),xe=Q.split("."),Ee=xe[0],Re=xe.length>1?he+xe[1]:"";if(pe&&(xe.length>1||Ee.length>4||le))for(;fe.test(Ee);)Ee=Ee.replace(fe,"$1"+pe+"$2");return Ee+Re},s.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var J=/^\w*$/;s.templateString=function(Q,ie){var le={};return Q.replace(s.TEMPLATE_STRING_REGEX,function(fe,he){var pe;return J.test(he)?pe=ie[he]:(le[he]=le[he]||s.nestedProperty(ie,he).get,pe=le[he]()),s.isValidTextValue(pe)?pe:""})};var z={max:10,count:0,name:"hovertemplate"};s.hovertemplateString=function(){return K.apply(z,arguments)};var $={max:10,count:0,name:"texttemplate"};s.texttemplateString=function(){return K.apply($,arguments)};var G=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,H={max:10,count:0,name:"texttemplate",parseMultDiv:!0};s.texttemplateStringForShapes=function(){return K.apply(H,arguments)};var X=/^[:|\|]/;function K(Q,ie,le){var fe=this,he=arguments;ie||(ie={});var pe={};return Q.replace(s.TEMPLATE_STRING_REGEX,function(xe,Ee,Re){var ke="_xother"===Ee||"_yother"===Ee,Te="_xother_"===Ee||"_yother_"===Ee,we="xother_"===Ee||"yother_"===Ee,je="xother"===Ee||"yother"===Ee||ke||we||Te,Ce=Ee;(ke||Te)&&(Ce=Ce.substring(1)),(we||Te)&&(Ce=Ce.substring(0,Ce.length-1));var Ie,ge,me,be,Oe,ce=null,Ae=null;if(fe.parseMultDiv){var Ne=(Oe=(be=Ce).match(G))?{key:Oe[1],op:Oe[2],number:Number(Oe[3])}:{key:be,op:null,number:null};Ce=Ne.key,ce=Ne.op,Ae=Ne.number}if(je){if(void 0===(Ie=ie[Ce]))return""}else for(me=3;me<he.length;me++)if(ge=he[me]){if(ge.hasOwnProperty(Ce)){Ie=ge[Ce];break}if(J.test(Ce)||(Ie=s.nestedProperty(ge,Ce).get(),(Ie=pe[Ce]||s.nestedProperty(ge,Ce).get())&&(pe[Ce]=Ie)),void 0!==Ie)break}if(void 0!==Ie&&("*"===ce&&(Ie*=Ae),"/"===ce&&(Ie/=Ae)),void 0===Ie&&fe)return fe.count<fe.max&&(s.warn("Variable '"+Ce+"' in "+fe.name+" could not be found!"),Ie=xe),fe.count===fe.max&&s.warn("Too many "+fe.name+" warnings - additional warnings will be suppressed"),fe.count++,xe;if(Re){var De;if(":"===Re[0]&&(Ie=(De=le?le.numberFormat:s.numberFormat)(Re.replace(X,""))(Ie)),"|"===Re[0]){De=le?le.timeFormat:C;var qe=s.dateTime2ms(Ie);Ie=s.formatDate(qe,Re.replace(X,""),!1,De)}}else{var Ke=Ce+"Label";ie.hasOwnProperty(Ke)&&(Ie=ie[Ke])}return je&&(Ie="("+Ie+")",(ke||Te)&&(Ie=" "+Ie),(we||Te)&&(Ie+=" ")),Ie})}s.subplotSort=function(Q,ie){for(var le=Math.min(Q.length,ie.length)+1,fe=0,he=0,pe=0;pe<le;pe++){var xe=Q.charCodeAt(pe)||0,Ee=ie.charCodeAt(pe)||0,Re=xe>=48&&xe<=57,ke=Ee>=48&&Ee<=57;if(Re&&(fe=10*fe+xe-48),ke&&(he=10*he+Ee-48),!Re||!ke){if(fe!==he)return fe-he;if(xe!==Ee)return xe-Ee}}return he-fe};var ue=2e9;s.seedPseudoRandom=function(){ue=2e9},s.pseudoRandom=function(){var Q=ue;return ue=(69069*ue+1)%4294967296,Math.abs(ue-Q)<429496729?s.pseudoRandom():ue/4294967296},s.fillText=function(Q,ie,le){var fe=Array.isArray(le)?function(xe){le.push(xe)}:function(xe){le.text=xe},he=s.extractOption(Q,ie,"htx","hovertext");if(s.isValidTextValue(he))return fe(he);var pe=s.extractOption(Q,ie,"tx","text");return s.isValidTextValue(pe)?fe(pe):void 0},s.isValidTextValue=function(Q){return Q||0===Q},s.formatPercent=function(Q,ie){ie=ie||0;for(var le=(Math.round(100*Q*Math.pow(10,ie))*Math.pow(.1,ie)).toFixed(ie)+"%",fe=0;fe<ie;fe++)-1!==le.indexOf(".")&&(le=(le=le.replace("0%","%")).replace(".%","%"));return le},s.isHidden=function(Q){var ie=window.getComputedStyle(Q).display;return!ie||"none"===ie},s.strTranslate=function(Q,ie){return Q||ie?"translate("+Q+","+ie+")":""},s.strRotate=function(Q){return Q?"rotate("+Q+")":""},s.strScale=function(Q){return 1!==Q?"scale("+Q+")":""},s.getTextTransform=function(Q){var ie=Q.noCenter,le=Q.textX,fe=Q.textY,Re=Q.rotate,ke=Q.scale;return ke?ke>1&&(ke=1):ke=0,s.strTranslate(Q.targetX-ke*(le+(Q.anchorX||0)),Q.targetY-ke*(fe+(Q.anchorY||0)))+s.strScale(ke)+(Re?"rotate("+Re+(ie?"":" "+le+" "+fe)+")":"")},s.setTransormAndDisplay=function(Q,ie){Q.attr("transform",s.getTextTransform(ie)),Q.style("display",ie.scale?null:"none")},s.ensureUniformFontSize=function(Q,ie){var le=s.extendFlat({},ie);return le.size=Math.max(ie.size,Q._fullLayout.uniformtext.minsize||0),le},s.join2=function(Q,ie,le){var fe=Q.length;return fe>1?Q.slice(0,-1).join(ie)+le+Q[fe-1]:Q.join(ie)},s.bigFont=function(Q){return Math.round(1.2*Q)};var ae=s.getFirefoxVersion(),ne=null!==ae&&ae<86;s.getPositionFromD3Event=function(){return ne?[I.event.layerX,I.event.layerY]:[I.event.offsetX,I.event.offsetY]}},41965:function(se){"use strict";se.exports=function(U){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(U):"[object Object]"===Object.prototype.toString.call(U)&&Object.getPrototypeOf(U).hasOwnProperty("hasOwnProperty")}},66636:function(se,U,r){"use strict";var I=r(65487),C=/^\w*$/;se.exports=function(f,k,T,v){var c,i,s;T=T||"name",v=v||"value";var a={};k&&k.length?(s=I(f,k),i=s.get()):i=f,k=k||"";var o={};if(i)for(c=0;c<i.length;c++)o[i[c][T]]=c;var l=C.test(v),u={set:function(d,g){var h=null===g?4:0;if(!i){if(!s||4===h)return;s.set(i=[])}var w=o[d];if(void 0===w){if(4===h)return;h|=3,o[d]=w=i.length}else g!==(l?i[w][v]:I(i[w],v).get())&&(h|=2);var y=i[w]=i[w]||{};return y[T]=d,l?y[v]=g:I(y,v).set(g),null!==g&&(h&=-5),a[w]=a[w]|h,u},get:function(d){if(i){var g=o[d];return void 0===g?void 0:l?i[g][v]:I(i[g],v).get()}},rename:function(d,g){var h=o[d];return void 0===h||(a[h]=1|a[h],o[g]=h,delete o[d],i[h][T]=g),u},remove:function(d){var g=o[d];if(void 0===g)return u;var h=i[g];if(Object.keys(h).length>2)return a[g]=2|a[g],u.set(d,null);if(l){for(c=g;c<i.length;c++)a[c]=3|a[c];for(c=g;c<i.length;c++)o[i[c][T]]--;i.splice(g,1),delete o[d]}else I(h,v).set(null),a[g]=6|a[g];return u},constructUpdate:function(){for(var d,g,h={},w=Object.keys(a),y=0;y<w.length;y++)d=k+"["+(g=w[y])+"]",i[g]?(1&a[g]&&(h[d+"."+T]=i[g][T]),2&a[g]&&(h[d+"."+v]=l?4&a[g]?null:i[g][v]:4&a[g]?null:I(i[g],v).get())):h[d]=null;return h}};return u}},15867:function(se,U,r){"use strict";var I=r(73972);se.exports=function(C,f){for(var k=C._context.locale,T=0;T<2;T++){for(var v=C._context.locales,c=0;c<2;c++){var i=(v[k]||{}).dictionary;if(i){var s=i[f];if(s)return s}v=I.localeRegistry}var a=k.split("-")[0];if(a===k)break;k=a}return f}},47769:function(se,U,r){"use strict";var I=r(72075).dfltConfig,C=r(75046),f=se.exports={};f.log=function(){var k;if(I.logging>1){var T=["LOG:"];for(k=0;k<arguments.length;k++)T.push(arguments[k]);console.trace.apply(console,T)}if(I.notifyOnLogging>1){var v=[];for(k=0;k<arguments.length;k++)v.push(arguments[k]);C(v.join("<br>"),"long")}},f.warn=function(){var k;if(I.logging>0){var T=["WARN:"];for(k=0;k<arguments.length;k++)T.push(arguments[k]);console.trace.apply(console,T)}if(I.notifyOnLogging>0){var v=[];for(k=0;k<arguments.length;k++)v.push(arguments[k]);C(v.join("<br>"),"stick")}},f.error=function(){var k;if(I.logging>0){var T=["ERROR:"];for(k=0;k<arguments.length;k++)T.push(arguments[k]);console.error.apply(console,T)}if(I.notifyOnLogging>0){var v=[];for(k=0;k<arguments.length;k++)v.push(arguments[k]);C(v.join("<br>"),"stick")}}},77310:function(se,U,r){"use strict";var I=r(39898);se.exports=function(C,f,k){var T=C.selectAll("g."+k.replace(/\s/g,".")).data(f,function(c){return c[0].trace.uid});T.exit().remove(),T.enter().append("g").attr("class",k),T.order();var v=C.classed("rangeplot")?"nodeRangePlot3":"node3";return T.each(function(c){c[0][v]=I.select(this)}),T}},35657:function(se,U,r){"use strict";var I=r(79576);U.init2dArray=function(C,f){for(var k=new Array(C),T=0;T<C;T++)k[T]=new Array(f);return k},U.transposeRagged=function(C){var f,k,T=0,v=C.length;for(f=0;f<v;f++)T=Math.max(T,C[f].length);var c=new Array(T);for(f=0;f<T;f++)for(c[f]=new Array(v),k=0;k<v;k++)c[f][k]=C[k][f];return c},U.dot=function(C,f){if(!C.length||!f.length||C.length!==f.length)return null;var k,T,v=C.length;if(C[0].length)for(k=new Array(v),T=0;T<v;T++)k[T]=U.dot(C[T],f);else if(f[0].length){var c=U.transposeRagged(f);for(k=new Array(c.length),T=0;T<c.length;T++)k[T]=U.dot(C,c[T])}else for(k=0,T=0;T<v;T++)k+=C[T]*f[T];return k},U.translationMatrix=function(C,f){return[[1,0,C],[0,1,f],[0,0,1]]},U.rotationMatrix=function(C){var f=C*Math.PI/180;return[[Math.cos(f),-Math.sin(f),0],[Math.sin(f),Math.cos(f),0],[0,0,1]]},U.rotationXYMatrix=function(C,f,k){return U.dot(U.dot(U.translationMatrix(f,k),U.rotationMatrix(C)),U.translationMatrix(-f,-k))},U.apply3DTransform=function(C){return function(){var f=arguments,k=1===arguments.length?f[0]:[f[0],f[1],f[2]||0];return U.dot(C,[k[0],k[1],k[2],1]).slice(0,3)}},U.apply2DTransform=function(C){return function(){var f=arguments;3===f.length&&(f=f[0]);var k=1===arguments.length?f[0]:[f[0],f[1]];return U.dot(C,[k[0],k[1],1]).slice(0,2)}},U.apply2DTransform2=function(C){var f=U.apply2DTransform(C);return function(k){return f(k.slice(0,2)).concat(f(k.slice(2,4)))}},U.convertCssMatrix=function(C){if(C){var f=C.length;if(16===f)return C;if(6===f)return[C[0],C[1],0,0,C[2],C[3],0,0,0,0,1,0,C[4],C[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},U.inverseTransformMatrix=function(C){var f=[];return I.invert(f,C),[[f[0],f[1],f[2],f[3]],[f[4],f[5],f[6],f[7]],[f[8],f[9],f[10],f[11]],[f[12],f[13],f[14],f[15]]]}},64872:function(se){"use strict";se.exports={mod:function(U,r){var I=U%r;return I<0?I+r:I},modHalf:function(U,r){return Math.abs(U)>r/2?U-Math.round(U/r)*r:U}}},65487:function(se,U,r){"use strict";var I=r(92770),C=r(73627).isArrayOrTypedArray;function f(a,o){return function(){var l,u,d,g,h,w=a;for(g=0;g<o.length-1;g++){if(-1===(l=o[g])){for(u=!0,d=[],h=0;h<w.length;h++)d[h]=f(w[h],o.slice(g+1))(),d[h]!==d[0]&&(u=!1);return u?d[0]:d}if("number"==typeof l&&!C(w)||"object"!=typeof(w=w[l])||null===w)return}if("object"==typeof w&&null!==w&&null!==(d=w[o[g]]))return d}}se.exports=function(a,o){if(I(o))o=String(o);else if("string"!=typeof o||"[-1]"===o.substr(o.length-4))throw"bad property string";for(var l,u,d,g=0,h=o.split(".");g<h.length;){if(l=String(h[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(l[1])h[g]=l[1];else{if(0!==g)throw"bad property string";h.splice(0,1)}for(u=l[2].substr(1,l[2].length-2).split("]["),d=0;d<u.length;d++)g++,h.splice(g,0,Number(u[d]))}g++}return"object"!=typeof a?{set:function(){throw"bad container"},get:function(){},astr:o,parts:h,obj:a}:{set:v(a,h,o),get:f(a,h),astr:o,parts:h,obj:a}};var k=/(^|\.)args\[/;function T(a,o){return void 0===a||null===a&&!o.match(k)}function v(a,o,l){return function(u){var d,g,h=a,w="",y=[[a,w]],p=T(u,l);for(g=0;g<o.length-1;g++){if("number"==typeof(d=o[g])&&!C(h))throw"array index but container is not an array";if(-1===d){if(p=!i(h,o.slice(g+1),u,l))break;return}if(!s(h,d,o[g+1],p))break;if("object"!=typeof(h=h[d])||null===h)throw"container is not an object";w=c(w,d),y.push([h,w])}if(p){if(g===o.length-1&&(delete h[o[g]],Array.isArray(h)&&+o[g]==h.length-1))for(;h.length&&void 0===h[h.length-1];)h.pop()}else h[o[g]]=u}}function c(a,o){var l=o;return I(o)?l="["+o+"]":a&&(l="."+o),a+l}function i(a,o,l,u){var d,g=C(l),h=!0,w=l,y=u.replace("-1",0),p=!g&&T(l,y),_=o[0];for(d=0;d<a.length;d++)y=u.replace("-1",d),g&&(p=T(w=l[d%l.length],y)),p&&(h=!1),s(a,d,_,p)&&v(a[d],o,u.replace("-1",d))(w);return h}function s(a,o,l,u){if(void 0===a[o]){if(u)return!1;a[o]="number"==typeof l?[]:{}}return!0}},64213:function(se){"use strict";se.exports=function(){}},75046:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=[];se.exports=function(k,T){if(-1===f.indexOf(k)){f.push(k);var v=1e3;C(T)?v=T:"long"===T&&(v=3e3);var c=I.select("body").selectAll(".plotly-notifier").data([0]);c.enter().append("div").classed("plotly-notifier",!0),c.selectAll(".notifier-note").data(f).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(s){var a=I.select(this);a.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){a.transition().call(i)});for(var o=a.append("p"),l=s.split(/<br\s*\/?>/g),u=0;u<l.length;u++)u&&o.append("br"),o.append("span").text(l[u]);"stick"===T?a.transition().duration(350).style("opacity",1):a.transition().duration(700).style("opacity",1).transition().delay(v).call(i)})}function i(s){s.duration(700).style("opacity",0).each("end",function(a){var o=f.indexOf(a);-1!==o&&f.splice(o,1),I.select(this).remove()})}}},39918:function(se,U,r){"use strict";var I=r(6964),C="data-savedcursor";se.exports=function(f,k){var T=f.attr(C);if(k){if(!T){for(var v=(f.attr("class")||"").split(" "),c=0;c<v.length;c++){var i=v[c];0===i.indexOf("cursor-")&&f.attr(C,i.substr(7)).classed(i,!1)}f.attr(C)||f.attr(C,"!!")}I(f,k)}else T&&(f.attr(C,null),"!!"===T?I(f):I(f,T))}},61082:function(se,U,r){"use strict";var I=r(35657).dot,C=r(50606).BADNUM,f=se.exports={};f.tester=function(k){var T,v=k.slice(),c=v[0][0],i=c,s=v[0][1],a=s;for(v[v.length-1][0]===v[0][0]&&v[v.length-1][1]===v[0][1]||v.push(v[0]),T=1;T<v.length;T++)c=Math.min(c,v[T][0]),i=Math.max(i,v[T][0]),s=Math.min(s,v[T][1]),a=Math.max(a,v[T][1]);var o,l=!1;5===v.length&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(l=!0,o=function(g){return g[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(l=!0,o=function(g){return g[1]===v[0][1]}));var u=!0,d=v[0];for(T=1;T<v.length;T++)if(d[0]!==v[T][0]||d[1]!==v[T][1]){u=!1;break}return{xmin:c,xmax:i,ymin:s,ymax:a,pts:v,contains:l?function(g,h){var w=g[0],y=g[1];return!(w===C||w<c||w>i||y===C||y<s||y>a||h&&o(g))}:function(g,h){var w=g[0],y=g[1];if(w===C||w<c||w>i||y===C||y<s||y>a)return!1;var p,_,x,b,M,m=v.length,D=v[0][0],S=v[0][1],O=0;for(p=1;p<m;p++)if(_=D,x=S,D=v[p][0],S=v[p][1],!(w<(b=Math.min(_,D))||w>Math.max(_,D)||y>Math.max(x,S)))if(y<Math.min(x,S))w!==b&&O++;else{if(y===(M=D===_?y:x+(w-_)*(S-x)/(D-_)))return 1!==p||!h;y<=M&&w!==b&&O++}return O%2==1},isRect:l,degenerate:u}},f.isSegmentBent=function(k,T,v,c){var i,s,a,o=k[T],l=[k[v][0]-o[0],k[v][1]-o[1]],u=I(l,l),d=Math.sqrt(u),g=[-l[1]/d,l[0]/d];for(i=T+1;i<v;i++)if((a=I(s=[k[i][0]-o[0],k[i][1]-o[1]],l))<0||a>u||Math.abs(I(s,g))>c)return!0;return!1},f.filter=function(k,T){var v=[k[0]],c=0,i=0;function s(a){k.push(a);var o=v.length,l=c;v.splice(i+1);for(var u=l+1;u<k.length;u++)(u===k.length-1||f.isSegmentBent(k,l,u+1,T))&&(v.push(k[u]),v.length<o-2&&(c=u,i=v.length-1),l=u)}return k.length>1&&s(k.pop()),{addPt:s,raw:k,filtered:v}}},79749:function(se,U,r){"use strict";var I=r(58617),C=r(98580);se.exports=function(f,k,T){var v=f._fullLayout,c=!0;return v._glcanvas.each(function(i){if(i.regl)i.regl.preloadCachedCode(T);else if(!i.pick||v._has("parcoords")){try{i.regl=C({canvas:this,attributes:{antialias:!i.pick,preserveDrawingBuffer:!0},pixelRatio:f._context.plotGlPixelRatio||r.g.devicePixelRatio,extensions:k||[],cachedCode:T||{}})}catch{c=!1}i.regl||(c=!1),c&&this.addEventListener("webglcontextlost",function(s){f&&f.emit&&f.emit("plotly_webglcontextlost",{event:s,layer:i.key})},!1)}}),c||I({container:v._glcontainer.node()}),c}},45142:function(se,U,r){"use strict";var I=r(92770),C=r(35791);se.exports=function(f){var k,o;if("string"!=typeof(k=f&&f.hasOwnProperty("userAgent")?f.userAgent:(typeof navigator<"u"&&(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),o)))return!0;var T=C({ua:{headers:{"user-agent":k}},tablet:!0,featureDetect:!1});if(!T)for(var v=k.split(" "),c=1;c<v.length;c++)if(-1!==v[c].indexOf("Safari"))for(var i=c-1;i>-1;i--){var s=v[i];if("Version/"===s.substr(0,8)){var a=s.substr(8).split(".")[0];if(I(a)&&(a=+a),a>=13)return!0}}return T}},75138:function(se){"use strict";se.exports=function(U,r){if(r instanceof RegExp){for(var I=r.toString(),C=0;C<U.length;C++)if(U[C]instanceof RegExp&&U[C].toString()===I)return U;U.push(r)}else!r&&0!==r||-1!==U.indexOf(r)||U.push(r);return U}},10847:function(se,U,r){"use strict";var I=r(71828),C=r(72075).dfltConfig,f={add:function(k,T,v,c,i){var s,a;k.undoQueue=k.undoQueue||{index:0,queue:[],sequence:!1},a=k.undoQueue.index,k.autoplay?k.undoQueue.inSequence||(k.autoplay=!1):(!k.undoQueue.sequence||k.undoQueue.beginSequence?(k.undoQueue.queue.splice(a,k.undoQueue.queue.length-a,s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),k.undoQueue.index+=1):s=k.undoQueue.queue[a-1],k.undoQueue.beginSequence=!1,s&&(s.undo.calls.unshift(T),s.undo.args.unshift(v),s.redo.calls.push(c),s.redo.args.push(i)),k.undoQueue.queue.length>C.queueLength&&(k.undoQueue.queue.shift(),k.undoQueue.index--))},startSequence:function(k){k.undoQueue=k.undoQueue||{index:0,queue:[],sequence:!1},k.undoQueue.sequence=!0,k.undoQueue.beginSequence=!0},stopSequence:function(k){k.undoQueue=k.undoQueue||{index:0,queue:[],sequence:!1},k.undoQueue.sequence=!1,k.undoQueue.beginSequence=!1},undo:function(k){var T,v;if(!(void 0===k.undoQueue||isNaN(k.undoQueue.index)||k.undoQueue.index<=0)){for(k.undoQueue.index--,T=k.undoQueue.queue[k.undoQueue.index],k.undoQueue.inSequence=!0,v=0;v<T.undo.calls.length;v++)f.plotDo(k,T.undo.calls[v],T.undo.args[v]);k.undoQueue.inSequence=!1,k.autoplay=!1}},redo:function(k){var T,v;if(!(void 0===k.undoQueue||isNaN(k.undoQueue.index)||k.undoQueue.index>=k.undoQueue.queue.length)){for(T=k.undoQueue.queue[k.undoQueue.index],k.undoQueue.inSequence=!0,v=0;v<T.redo.calls.length;v++)f.plotDo(k,T.redo.calls[v],T.redo.args[v]);k.undoQueue.inSequence=!1,k.autoplay=!1,k.undoQueue.index++}},plotDo:function(k,T,v){k.autoplay=!0,v=function(c,i){for(var s,a=[],o=0;o<i.length;o++)a[o]=(s=i[o])===c?s:"object"==typeof s?Array.isArray(s)?I.extendDeep([],s):I.extendDeepAll({},s):s;return a}(k,v),T.apply(null,v)}};se.exports=f},30587:function(se,U){"use strict";U.counter=function(r,I,C,f){var k=(I||"")+(C?"":"$"),T=!1===f?"":"^";return"xy"===r?new RegExp(T+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+k):new RegExp(T+r+"([2-9]|[1-9][0-9]+)?"+k)}},6962:function(se){"use strict";var U=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,r=/^[^\.\[\]]+$/;se.exports=function(I,C){for(;C;){var f=I.match(U);if(f)I=f[1];else{if(!I.match(r))throw new Error("bad relativeAttr call:"+[I,C]);I=""}if("^"!==C.charAt(0))break;C=C.slice(1)}return I&&"["!==C.charAt(0)?I+"."+C:I+C}},51332:function(se,U,r){"use strict";var I=r(73627).isArrayOrTypedArray,C=r(41965);se.exports=function f(k,T){for(var v in T){var c=T[v],i=k[v];if(i!==c)if("_"===v.charAt(0)||"function"==typeof c){if(v in k)continue;k[v]=c}else if(I(c)&&I(i)&&C(c[0])){if("customdata"===v||"ids"===v)continue;for(var s=Math.min(c.length,i.length),a=0;a<s;a++)i[a]!==c[a]&&C(c[a])&&C(i[a])&&f(i[a],c[a])}else C(c)&&C(i)&&(f(i,c),Object.keys(i).length||delete k[v])}}},65888:function(se,U,r){"use strict";var I=r(92770),C=r(47769),f=r(23389),k=r(50606).BADNUM,T=1e-9;function v(a,o){return a<o}function c(a,o){return a<=o}function i(a,o){return a>o}function s(a,o){return a>=o}U.findBin=function(a,o,l){if(I(o.start))return l?Math.ceil((a-o.start)/o.size-T)-1:Math.floor((a-o.start)/o.size+T);var u,d,g=0,h=o.length,w=0,y=h>1?(o[h-1]-o[0])/(h-1):1;for(d=y>=0?l?v:c:l?s:i,a+=y*T*(l?-1:1)*(y>=0?1:-1);g<h&&w++<100;)d(o[u=Math.floor((g+h)/2)],a)?g=u+1:h=u;return w>90&&C.log("Long binary search..."),g-1},U.sorterAsc=function(a,o){return a-o},U.sorterDes=function(a,o){return o-a},U.distinctVals=function(a){var o,l=a.slice();for(l.sort(U.sorterAsc),o=l.length-1;o>-1&&l[o]===k;o--);for(var u,d=l[o]-l[0]||1,g=d/(o||1)/1e4,h=[],w=0;w<=o;w++){var y=l[w],p=y-u;void 0===u?(h.push(y),u=y):p>g&&(d=Math.min(d,p),h.push(y),u=y)}return{vals:h,minDiff:d}},U.roundUp=function(a,o,l){for(var u,d=0,g=o.length-1,h=0,w=l?0:1,y=l?1:0,p=l?Math.ceil:Math.floor;d<g&&h++<100;)o[u=p((d+g)/2)]<=a?d=u+w:g=u-y;return o[d]},U.sort=function(a,o){for(var l=0,u=0,d=1;d<a.length;d++){var g=o(a[d],a[d-1]);if(g<0?l=1:g>0&&(u=1),l&&u)return a.sort(o)}return u?a:a.reverse()},U.findIndexOfMin=function(a,o){o=o||f;for(var l,u=1/0,d=0;d<a.length;d++){var g=o(a[d]);g<u&&(u=g,l=d)}return l}},6964:function(se){"use strict";se.exports=function(U,r){(U.attr("class")||"").split(" ").forEach(function(I){0===I.indexOf("cursor-")&&U.classed(I,!1)}),r&&U.classed("cursor-"+r,!0)}},58617:function(se,U,r){"use strict";var I=r(7901),C=function(){};se.exports=function(f){for(var k in f)"function"==typeof f[k]&&(f[k]=C);f.destroy=function(){f.container.parentNode.removeChild(f.container)};var T=document.createElement("div");T.className="no-webgl",T.style.cursor="pointer",T.style.fontSize="24px",T.style.color=I.defaults[0],T.style.position="absolute",T.style.left=T.style.top="0px",T.style.width=T.style.height="100%",T.style["background-color"]=I.lightLine,T.style["z-index"]=30;var v=document.createElement("p");return v.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",v.style.position="relative",v.style.top="50%",v.style.left="50%",v.style.height="30%",v.style.width="50%",v.style.margin="-15% 0 0 -25%",T.appendChild(v),f.container.appendChild(T),f.container.style.background="#FFFFFF",f.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function(se){"use strict";se.exports=function(U){return Object.keys(U).sort()}},80038:function(se,U,r){"use strict";var I=r(92770),C=r(73627).isArrayOrTypedArray;U.aggNums=function(f,k,T,v){var c,i;if((!v||v>T.length)&&(v=T.length),I(k)||(k=!1),C(T[0])){for(i=new Array(v),c=0;c<v;c++)i[c]=U.aggNums(f,k,T[c]);T=i}for(c=0;c<v;c++)I(k)?I(T[c])&&(k=f(+k,+T[c])):k=T[c];return k},U.len=function(f){return U.aggNums(function(k){return k+1},0,f)},U.mean=function(f,k){return k||(k=U.len(f)),U.aggNums(function(T,v){return T+v},0,f)/k},U.midRange=function(f){if(void 0!==f&&0!==f.length)return(U.aggNums(Math.max,null,f)+U.aggNums(Math.min,null,f))/2},U.variance=function(f,k,T){return k||(k=U.len(f)),I(T)||(T=U.mean(f,k)),U.aggNums(function(v,c){return v+Math.pow(c-T,2)},0,f)/k},U.stdev=function(f,k,T){return Math.sqrt(U.variance(f,k,T))},U.median=function(f){var k=f.slice().sort();return U.interp(k,.5)},U.interp=function(f,k){if(!I(k))throw"n should be a finite number";if((k=k*f.length-.5)<0)return f[0];if(k>f.length-1)return f[f.length-1];var T=k%1;return T*f[Math.ceil(k)]+(1-T)*f[Math.floor(k)]}},78614:function(se,U,r){"use strict";var I=r(25075);se.exports=function(C){return C?I(C):[0,0,0,1]}},3883:function(se,U,r){"use strict";var I=r(32396),C=r(91424),f=r(71828),k=null;se.exports=function(){if(null!==k)return k;k=!1;var T=f.isIE()||f.isSafari()||f.isIOS();if(window.navigator.userAgent&&!T){var v=Array.from(I.CSS_DECLARATIONS).reverse(),c=window.CSS&&window.CSS.supports||window.supportsCSS;if("function"==typeof c)k=v.some(function(a){return c.apply(null,a)});else{var i=C.tester.append("image").attr("style",I.STYLE),s=window.getComputedStyle(i.node()).imageRendering;k=v.some(function(a){var o=a[1];return s===o||s===o.toLowerCase()}),i.remove()}}return k}},63893:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.strTranslate,k=r(77922),T=r(18783).LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;U.convertToTspans=function(B,J,z){var $=B.text(),G=!B.attr("data-notex")&&J&&J._context.typesetMath&&typeof MathJax<"u"&&$.match(v),H=I.select(B.node().parentNode);if(!H.empty()){var X=B.attr("class")?B.attr("class").split(" ")[0]:"text";return H.selectAll("svg."+(X+="-math")).remove(),H.selectAll("g."+X+"-group").remove(),B.style("display",null).attr({"data-unformatted":$,"data-math":"N"}),G?(J&&J._promises||[]).push(new Promise(function(ue){B.style("display","none");var ae=parseInt(B.node().style.fontSize,10);!function(Q,ie,le){var fe,he,pe,xe,Ee=parseInt((MathJax.version||"").split(".")[0]);if(2===Ee||3===Ee){var Re=function(){var Te="math-output-"+C.randstr({},64),we=(xe=I.select("body").append("div").attr({id:Te}).style({visibility:"hidden",position:"absolute","font-size":ie.fontSize+"px"}).text(Q.replace(c,"\\lt ").replace(i,"\\gt "))).node();return 2===Ee?MathJax.Hub.Typeset(we):MathJax.typeset([we])},ke=function(){var Te=xe.select(2===Ee?".MathJax_SVG":".MathJax"),we=!Te.empty()&&xe.select("svg").node();if(we){var je,Ce=we.getBoundingClientRect();je=2===Ee?I.select("body").select("#MathJax_SVG_glyphs"):Te.select("defs"),le(Te,je,Ce)}else C.log("There was an error in the tex syntax.",Q),le();xe.remove()};2===Ee?MathJax.Hub.Queue(function(){return he=C.extendDeepAll({},MathJax.Hub.config),pe=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:s},displayAlign:"left"})},function(){if("SVG"!==(fe=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},Re,ke,function(){if("SVG"!==fe)return MathJax.Hub.setRenderer(fe)},function(){return void 0!==pe&&(MathJax.Hub.processSectionDelay=pe),MathJax.Hub.Config(he)}):3===Ee&&(he=C.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=s,"svg"!==(fe=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){Re(),ke(),"svg"!==fe&&(MathJax.config.startup.output=fe),MathJax.config=he}))}else C.warn("No MathJax version:",MathJax.version)}(G[2],{fontSize:ae},function(Q,ie,le){H.selectAll("svg."+X).remove(),H.selectAll("g."+X+"-group").remove();var fe=Q&&Q.select("svg");if(!fe||!fe.node())return K(),void ue();var he=H.append("g").classed(X+"-group",!0).attr({"pointer-events":"none","data-unformatted":$,"data-math":"Y"});he.node().appendChild(fe.node()),ie&&ie.node()&&fe.node().insertBefore(ie.node().cloneNode(!0),fe.node().firstChild);var pe=le.width,xe=le.height;fe.attr({class:X,height:xe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var Ee=B.node().style.fill||"black",Re=fe.select("g");Re.attr({fill:Ee,stroke:Ee});var ke=Re.node().getBoundingClientRect(),Te=ke.width,we=ke.height;(Te>pe||we>xe)&&(fe.style("overflow","hidden"),Te=(ke=fe.node().getBoundingClientRect()).width,we=ke.height);var je=+B.attr("x"),Ce=+B.attr("y"),Ie=-(ae||B.node().getBoundingClientRect().height)/4;if("y"===X[0])he.attr({transform:"rotate("+[-90,je,Ce]+")"+f(-Te/2,Ie-we/2)});else if("l"===X[0])Ce=Ie-we/2;else if("a"===X[0]&&0!==X.indexOf("atitle"))je=0,Ce=Ie;else{var ge=B.attr("text-anchor");je-=Te*("middle"===ge?.5:"end"===ge?1:0),Ce=Ce+Ie-we/2}fe.attr({x:je,y:Ce}),z&&z.call(B,he),ue(he)})})):K(),B}function K(){H.empty()||(X=B.attr("class")+"-math",H.select("svg."+X).remove()),B.text("").style("white-space","pre"),function(ae,ne){ne=ne.replace(g," ");var Q,ie=!1,le=[],fe=-1;function he(){fe++;var Ne=document.createElementNS(k.svg,"tspan");I.select(Ne).attr({class:"line",dy:fe*T+"em"}),ae.appendChild(Ne),Q=Ne;var De=le;if(le=[{node:Ne}],De.length>1)for(var qe=1;qe<De.length;qe++)pe(De[qe])}function pe(Ne){var De,qe=Ne.type,Ke={};if("a"===qe){De="a";var be=Ne.target,Oe=Ne.href,Le=Ne.popup;Oe&&(Ke={"xlink:xlink:show":"_blank"===be||"_"!==be.charAt(0)?"new":"replace",target:be,"xlink:xlink:href":Oe},Le&&(Ke.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Le+'");return false;'))}else De="tspan";Ne.style&&(Ke.style=Ne.style);var Ue=document.createElementNS(k.svg,De);if("sup"===qe||"sub"===qe){xe(Q,u),Q.appendChild(Ue);var Ze=document.createElementNS(k.svg,"tspan");xe(Ze,u),I.select(Ze).attr("dy",l[qe]),Ke.dy=o[qe],Q.appendChild(Ue),Q.appendChild(Ze)}else Q.appendChild(Ue);I.select(Ue).attr(Ke),Q=Ne.node=Ue,le.push(Ne)}function xe(Ne,De){Ne.appendChild(document.createTextNode(De))}function Ee(Ne){if(1!==le.length){var De=le.pop();Ne!==De.type&&C.log("Start tag <"+De.type+"> doesnt match end tag <"+Ne+">. Pretending it did match.",ne),Q=le[le.length-1].node}else C.log("Ignoring unexpected end tag </"+Ne+">.",ne)}y.test(ne)?he():(Q=ae,le=[{node:ae}]);for(var Re=ne.split(h),ke=0;ke<Re.length;ke++){var Te=Re[ke],we=Te.match(w),je=we&&we[2].toLowerCase(),Ce=a[je];if("br"===je)he();else if(void 0===Ce)xe(Q,O(Te));else if(we[1])Ee(je);else{var Ie=we[4],ge={type:je},me=M(Ie,p);if(me?(me=me.replace(m,"$1 fill:"),Ce&&(me+=";"+Ce)):Ce&&(me=Ce),me&&(ge.style=me),"a"===je){ie=!0;var ce=M(Ie,_);if(ce){var Ae=P(ce);Ae&&(ge.href=Ae,ge.target=M(Ie,x)||"_blank",ge.popup=M(Ie,b))}}pe(ge)}}return ie}(B.node(),$)&&B.style("pointer-events","all"),U.positionText(B),z&&z.call(B)}};var c=/(<|&lt;|&#60;)/g,i=/(>|&gt;|&#62;)/g,s=[["$","$"],["\\(","\\)"]],a={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},l={sub:"-0.21em",sup:"0.42em"},u="\u200b",d=["http:","https:","mailto:","",void 0,":"],g=U.NEWLINES=/(\r\n?|\n)/g,h=/(<[^<>]*>)/,w=/<(\/?)([^ >]*)(\s+(.*))?>/i,y=/<br(\s+.*)?>/i;U.BR_TAG_ALL=/<br(\s+.*)?>/gi;var p=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,b=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(B,J){if(!B)return null;var z=B.match(J),$=z&&(z[3]||z[4]);return $&&O($)}var m=/(^|;)\s*color:/;U.plainText=function(B,J){for(var z=void 0!==(J=J||{}).len&&-1!==J.len?J.len:1/0,$=void 0!==J.allowedTags?J.allowedTags:["br"],G=B.split(h),H=[],X="",K=0,ue=0;ue<G.length;ue++){var ae=G[ue],ne=ae.match(w),Q=ne&&ne[2].toLowerCase();if(Q)-1!==$.indexOf(Q)&&(H.push(ae),X=Q);else{var ie=ae.length;if(K+ie<z)H.push(ae),K+=ie;else if(K<z){var le=z-K;X&&("br"!==X||le<=3||ie<=3)&&H.pop(),H.push(z>3?ae.substr(0,le-3)+"...":ae.substr(0,le));break}X=""}}return H.join("")};var D={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function O(B){return B.replace(S,function(J,z){return("#"===z.charAt(0)?function($){if(!($>1114111)){var G=String.fromCodePoint;if(G)return G($);var H=String.fromCharCode;return $<=65535?H($):H(55232+($>>10),$%1024+56320)}}("x"===z.charAt(1)?parseInt(z.substr(2),16):parseInt(z.substr(1),10)):D[z])||J})}function P(B){var J=encodeURI(decodeURI(B)),z=document.createElement("a"),$=document.createElement("a");z.href=B,$.href=J;var H=$.protocol;return-1!==d.indexOf(z.protocol)&&-1!==d.indexOf(H)?J:""}function R(B,J,z){var $,G,H,X=z.horizontalAlign,K=z.verticalAlign||"top",ue=B.node().getBoundingClientRect(),ae=J.node().getBoundingClientRect();return G="bottom"===K?function(){return ue.bottom-$.height}:"middle"===K?function(){return ue.top+(ue.height-$.height)/2}:function(){return ue.top},H="right"===X?function(){return ue.right-$.width}:"center"===X?function(){return ue.left+(ue.width-$.width)/2}:function(){return ue.left},function(){$=this.node().getBoundingClientRect();var ne=H()-ae.left,Q=G()-ae.top,ie=z.gd||{};if(z.gd){ie._fullLayout._calcInverseTransform(ie);var le=C.apply3DTransform(ie._fullLayout._invTransform)(ne,Q);ne=le[0],Q=le[1]}return this.style({top:Q+"px",left:ne+"px","z-index":1e3}),this}}U.convertEntities=O,U.sanitizeHTML=function(B){B=B.replace(g," ");for(var J=document.createElement("p"),z=J,$=[],G=B.split(h),H=0;H<G.length;H++){var X=G[H],K=X.match(w),ue=K&&K[2].toLowerCase();if(ue in a)if(K[1])$.length&&(z=$.pop());else{var ae=K[4],ne=M(ae,p),Q=ne?{style:ne}:{};if("a"===ue){var ie=M(ae,_);if(ie){var le=P(ie);if(le){Q.href=le;var fe=M(ae,x);fe&&(Q.target=fe)}}}var he=document.createElement(ue);z.appendChild(he),I.select(he).attr(Q),z=he,$.push(he)}else z.appendChild(document.createTextNode(O(X)))}return J.innerHTML},U.lineCount=function(B){return B.selectAll("tspan.line").size()||1},U.positionText=function(B,J,z){return B.each(function(){var $=I.select(this);function G(K,ue){return void 0===ue?null===(ue=$.attr(K))&&($.attr(K,0),ue=0):$.attr(K,ue),ue}var H=G("x",J),X=G("y",z);"text"===this.nodeName&&$.selectAll("tspan.line").attr({x:H,y:X})})};var F="1px ";U.makeTextShadow=function(B){return F+F+F+B+", -"+F+"-"+F+F+B+", "+F+"-"+F+F+B+", -"+F+F+F+B},U.makeEditable=function(B,J){var z=J.gd,$=J.delegate,G=I.dispatch("edit","input","cancel"),H=$||B;if(B.style({"pointer-events":$?"none":"all"}),1!==B.size())throw new Error("boo");function X(){var ue,ae,ne,Q,ie;ue=I.select(z).select(".svg-container"),ae=ue.append("div"),ne=B.node().style,Q=parseFloat(ne.fontSize||12),void 0===(ie=J.text)&&(ie=B.attr("data-unformatted")),ae.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ne.fontFamily||"Arial","font-size":Q,color:J.fill||ne.fill||"black",opacity:1,"background-color":J.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ie).call(R(B,ue,J)).on("blur",function(){z._editing=!1,B.text(this.textContent).style({opacity:1});var he,pe=I.select(this).attr("class");(he=pe?"."+pe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&I.select(B.node().parentNode).select(he).style({opacity:0});var xe=this.textContent;I.select(this).transition().duration(0).remove(),I.select(document).on("mouseup",null),G.edit.call(B,xe)}).on("focus",function(){var he=this;z._editing=!0,I.select(document).on("mouseup",function(){if(I.event.target===he)return!1;document.activeElement===ae.node()&&ae.node().blur()})}).on("keyup",function(){27===I.event.which?(z._editing=!1,B.style({opacity:1}),I.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),G.cancel.call(B,this.textContent)):(G.input.call(B,this.textContent),I.select(this).call(R(B,ue,J)))}).on("keydown",function(){13===I.event.which&&this.blur()}).call(K),B.style({opacity:0});var le,fe=H.attr("class");(le=fe?"."+fe.split(" ")[0]+"-math-group":"[class*=-math-group]")&&I.select(B.node().parentNode).select(le).style({opacity:0})}function K(ue){var ae=ue.node(),ne=document.createRange();ne.selectNodeContents(ae);var Q=window.getSelection();Q.removeAllRanges(),Q.addRange(ne),ae.focus()}return J.immediate?X():H.on("click",X),I.rebind(B,G,"on")}},79990:function(se,U){"use strict";var r={};function I(C){C&&null!==C.timer&&(clearTimeout(C.timer),C.timer=null)}U.throttle=function(C,f,k){var T=r[C],v=Date.now();if(!T){for(var c in r)r[c].ts<v-6e4&&delete r[c];T=r[C]={ts:0,timer:null}}function i(){k(),T.ts=Date.now(),T.onDone&&(T.onDone(),T.onDone=null)}I(T),v>T.ts+f?i():T.timer=setTimeout(function(){i(),T.timer=null},f)},U.done=function(C){var f=r[C];return f&&f.timer?new Promise(function(k){var T=f.onDone;f.onDone=function(){T&&T(),k(),f.onDone=null}}):Promise.resolve()},U.clear=function(C){if(C)I(r[C]),delete r[C];else for(var f in r)U.clear(f)}},58163:function(se,U,r){"use strict";var I=r(92770);se.exports=function(C,f){if(C>0)return Math.log(C)/Math.LN10;var k=Math.log(Math.min(f[0],f[1]))/Math.LN10;return I(k)||(k=Math.log(Math.max(f[0],f[1]))/Math.LN10-6),k}},90973:function(se,U,r){"use strict";var I=se.exports={},C=r(78776).locationmodeToLayer,f=r(96892).zL;I.getTopojsonName=function(k){return[k.scope.replace(/ /g,"-"),"_",k.resolution.toString(),"m"].join("")},I.getTopojsonPath=function(k,T){return k+T+".json"},I.getTopojsonFeatures=function(k,T){return f(T,T.objects[C[k.locationmode]]).features}},37815:function(se){"use strict";se.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function(se){"use strict";se.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function(se,U,r){"use strict";var I=r(73972);se.exports=function(C){for(var f,k,T=I.layoutArrayContainers,v=I.layoutArrayRegexes,c=C.split("[")[0],i=0;i<v.length;i++)if((k=C.match(v[i]))&&0===k.index){f=k[0];break}if(f||(f=T[T.indexOf(c)]),!f)return!1;var s=C.substr(f.length);return s?!!(k=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:f,index:Number(k[1]),property:k[3]||""}:{array:f,index:"",property:""}}},30962:function(se,U,r){"use strict";var I=r(71828),C=I.extendFlat,f=I.isPlainObject,k={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},T={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},v=k.flags.slice().concat(["fullReplot"]),c=T.flags.slice().concat("layoutReplot");function i(o){for(var l={},u=0;u<o.length;u++)l[o[u]]=!1;return l}function s(o,l,u){var d=C({},o);for(var g in d){var h=d[g];f(h)&&(d[g]=a(h,l,0,g))}return"from-root"===u&&(d.editType=l),d}function a(o,l,u,d){if(o.valType){var g=C({},o);if(g.editType=l,Array.isArray(o.items)){g.items=new Array(o.items.length);for(var h=0;h<o.items.length;h++)g.items[h]=a(o.items[h],l)}return g}return s(o,l,"_"===d.charAt(0)?"nested":"from-root")}se.exports={traces:k,layout:T,traceFlags:function(){return i(v)},layoutFlags:function(){return i(c)},update:function(o,l){var u=l.editType;if(u&&"none"!==u)for(var d=u.split("+"),g=0;g<d.length;g++)o[d[g]]=!0},overrideAll:s}},58377:function(se,U,r){"use strict";var I=r(92770),C=r(27812),f=r(73972),k=r(71828),T=r(74875),v=r(41675),c=r(7901),i=v.cleanId,s=v.getFromTrace,a=f.traceIs;function o(_,x){var b=_[x],M=x.charAt(0);b&&"paper"!==b&&(_[x]=i(b,M,!0))}function l(_){function x(b,M){_[b]&&(!_.title||!_.title[M])&&(_.title||(_.title={}),_.title[M]=_[b],delete _[b])}_&&("string"!=typeof _.title&&"number"!=typeof _.title||(_.title={text:_.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"))}function u(_){if(!k.isPlainObject(_))return!1;var x=_.name;return delete _.name,delete _.showlegend,("string"==typeof x||"number"==typeof x)&&String(x)}function d(_,x,b,M){if(b&&!M)return _;if(M&&!b||!_.trim())return x;if(!x.trim())return _;var m,D=Math.min(_.length,x.length);for(m=0;m<D&&_.charAt(m)===x.charAt(m);m++);return _.substr(0,m).trim()}function g(_){var x="middle",b="center";return"string"==typeof _&&(-1!==_.indexOf("top")?x="top":-1!==_.indexOf("bottom")&&(x="bottom"),-1!==_.indexOf("left")?b="left":-1!==_.indexOf("right")&&(b="right")),x+" "+b}function h(_,x){return x in _&&"object"==typeof _[x]&&0===Object.keys(_[x]).length}U.clearPromiseQueue=function(_){Array.isArray(_._promises)&&_._promises.length>0&&k.log("Clearing previous rejected promises from queue."),_._promises=[]},U.cleanLayout=function(_){var x,b;_||(_={}),_.xaxis1&&(_.xaxis||(_.xaxis=_.xaxis1),delete _.xaxis1),_.yaxis1&&(_.yaxis||(_.yaxis=_.yaxis1),delete _.yaxis1),_.scene1&&(_.scene||(_.scene=_.scene1),delete _.scene1);var M=(T.subplotsRegistry.cartesian||{}).attrRegex,m=(T.subplotsRegistry.polar||{}).attrRegex,D=(T.subplotsRegistry.ternary||{}).attrRegex,S=(T.subplotsRegistry.gl3d||{}).attrRegex,O=Object.keys(_);for(x=0;x<O.length;x++){var P=O[x];if(M&&M.test(P)){var R=_[P];R.anchor&&"free"!==R.anchor&&(R.anchor=i(R.anchor)),R.overlaying&&(R.overlaying=i(R.overlaying)),R.type||(R.isdate?R.type="date":R.islog?R.type="log":!1===R.isdate&&!1===R.islog&&(R.type="linear")),"withzero"!==R.autorange&&"tozero"!==R.autorange||(R.autorange=!0,R.rangemode="tozero"),delete R.islog,delete R.isdate,delete R.categories,h(R,"domain")&&delete R.domain,void 0!==R.autotick&&(void 0===R.tickmode&&(R.tickmode=R.autotick?"auto":"linear"),delete R.autotick),l(R)}else if(m&&m.test(P))l(_[P].radialaxis);else if(D&&D.test(P)){var F=_[P];l(F.aaxis),l(F.baxis),l(F.caxis)}else if(S&&S.test(P)){var B=_[P],J=B.cameraposition;if(Array.isArray(J)&&4===J[0].length){var $=J[1],G=J[2],H=C([],J[0]),X=[];for(b=0;b<3;++b)X[b]=$[b]+G*H[2+4*b];B.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:$[0],y:$[1],z:$[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}l(B.xaxis),l(B.yaxis),l(B.zaxis)}}var K=Array.isArray(_.annotations)?_.annotations.length:0;for(x=0;x<K;x++){var ue=_.annotations[x];k.isPlainObject(ue)&&(ue.ref&&("paper"===ue.ref?(ue.xref="paper",ue.yref="paper"):"data"===ue.ref&&(ue.xref="x",ue.yref="y"),delete ue.ref),o(ue,"xref"),o(ue,"yref"))}var ae=Array.isArray(_.shapes)?_.shapes.length:0;for(x=0;x<ae;x++){var ne=_.shapes[x];k.isPlainObject(ne)&&(o(ne,"xref"),o(ne,"yref"))}var Q=Array.isArray(_.images)?_.images.length:0;for(x=0;x<Q;x++){var ie=_.images[x];k.isPlainObject(ie)&&(o(ie,"xref"),o(ie,"yref"))}var le=_.legend;return le&&(le.x>3?(le.x=1.02,le.xanchor="left"):le.x<-2&&(le.x=-.02,le.xanchor="right"),le.y>3?(le.y=1.02,le.yanchor="bottom"):le.y<-2&&(le.y=-.02,le.yanchor="top")),l(_),"rotate"===_.dragmode&&(_.dragmode="orbit"),c.clean(_),_.template&&_.template.layout&&U.cleanLayout(_.template.layout),_},U.cleanData=function(_){for(var x=0;x<_.length;x++){var b,M=_[x];if("histogramy"===M.type&&"xbins"in M&&!("ybins"in M)&&(M.ybins=M.xbins,delete M.xbins),M.error_y&&"opacity"in M.error_y){var m=c.defaults,D=M.error_y.color||(a(M,"bar")?c.defaultLine:m[x%m.length]);M.error_y.color=c.addOpacity(c.rgb(D),c.opacity(D)*M.error_y.opacity),delete M.error_y.opacity}if("bardir"in M&&("h"!==M.bardir||!a(M,"bar")&&"histogram"!==M.type.substr(0,9)||(M.orientation="h",U.swapXYData(M)),delete M.bardir),"histogramy"===M.type&&U.swapXYData(M),"histogramx"!==M.type&&"histogramy"!==M.type||(M.type="histogram"),"scl"in M&&!("colorscale"in M)&&(M.colorscale=M.scl,delete M.scl),"reversescl"in M&&!("reversescale"in M)&&(M.reversescale=M.reversescl,delete M.reversescl),M.xaxis&&(M.xaxis=i(M.xaxis,"x")),M.yaxis&&(M.yaxis=i(M.yaxis,"y")),a(M,"gl3d")&&M.scene&&(M.scene=T.subplotsRegistry.gl3d.cleanId(M.scene)),!a(M,"pie-like")&&!a(M,"bar-like"))if(Array.isArray(M.textposition))for(b=0;b<M.textposition.length;b++)M.textposition[b]=g(M.textposition[b]);else M.textposition&&(M.textposition=g(M.textposition));var S=f.getModule(M);if(S&&S.colorbar){var O=S.colorbar.container,P=O?M[O]:M;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===M.type&&k.isPlainObject(M.contours)){var R=["x","y","z"];for(b=0;b<R.length;b++){var F=M.contours[R[b]];k.isPlainObject(F)&&(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if("candlestick"===M.type||"ohlc"===M.type){var B=!1!==(M.increasing||{}).showlegend,J=!1!==(M.decreasing||{}).showlegend,z=u(M.increasing),$=u(M.decreasing);if(!1!==z&&!1!==$){var G=d(z,$,B,J);G&&(M.name=G)}else!z&&!$||M.name||(M.name=z||$)}if(Array.isArray(M.transforms)){var H=M.transforms;for(b=0;b<H.length;b++){var X=H[b];if(k.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var K=X.styles,ue=Object.keys(K);X.styles=[];for(var ae=0;ae<ue.length;ae++)X.styles.push({target:ue[ae],value:K[ue[ae]]})}}}}h(M,"line")&&delete M.line,"marker"in M&&(h(M.marker,"line")&&delete M.marker.line,h(M,"marker")&&delete M.marker),c.clean(M),M.autobinx&&(delete M.autobinx,delete M.xbins),M.autobiny&&(delete M.autobiny,delete M.ybins),l(M),M.colorbar&&l(M.colorbar),M.marker&&M.marker.colorbar&&l(M.marker.colorbar),M.line&&M.line.colorbar&&l(M.line.colorbar),M.aaxis&&l(M.aaxis),M.baxis&&l(M.baxis)}},U.swapXYData=function(_){var x;if(k.swapAttrs(_,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(_.z)&&Array.isArray(_.z[0])&&(_.transpose?delete _.transpose:_.transpose=!0),_.error_x&&_.error_y){var b=_.error_y,M="copy_ystyle"in b?b.copy_ystyle:!(b.color||b.thickness||b.width);k.swapAttrs(_,["error_?.copy_ystyle"]),M&&k.swapAttrs(_,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof _.hoverinfo){var m=_.hoverinfo.split("+");for(x=0;x<m.length;x++)"x"===m[x]?m[x]="y":"y"===m[x]&&(m[x]="x");_.hoverinfo=m.join("+")}},U.coerceTraceIndices=function(_,x){if(I(x))return[x];if(!Array.isArray(x)||!x.length)return _.data.map(function(m,D){return D});if(Array.isArray(x)){for(var b=[],M=0;M<x.length;M++)k.isIndex(x[M],_.data.length)?b.push(x[M]):k.warn("trace index (",x[M],") is not a number or is out of bounds");return b}return x},U.manageArrayContainers=function(_,x,b){var M=_.obj,m=_.parts,D=m.length,S=m[D-1],O=I(S);if(O&&null===x){var P=m.slice(0,D-1).join(".");k.nestedProperty(M,P).get().splice(S,1)}else O&&void 0===_.get()&&void 0===_.get()&&(b[_.astr]=null),_.set(x)};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function y(_){var x=_.search(w);if(x>0)return _.substr(0,x)}U.hasParent=function(_,x){for(var b=y(x);b;){if(b in _)return!0;b=y(b)}return!1};var p=["x","y","z"];U.clearAxisTypes=function(_,x,b){for(var M=0;M<x.length;M++)for(var m=_._fullData[M],D=0;D<3;D++){var S=s(_,m,p[D]);if(S&&"log"!==S.type){var O=S._name,P=S._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==b[P])continue;O=P+"."+O}var R=O+".type";void 0===b[O]&&void 0===b[R]&&k.nestedProperty(_.layout,R).set(null)}}}},10641:function(se,U,r){"use strict";var I=r(72391);U._doPlot=I._doPlot,U.newPlot=I.newPlot,U.restyle=I.restyle,U.relayout=I.relayout,U.redraw=I.redraw,U.update=I.update,U._guiRestyle=I._guiRestyle,U._guiRelayout=I._guiRelayout,U._guiUpdate=I._guiUpdate,U._storeDirectGUIEdit=I._storeDirectGUIEdit,U.react=I.react,U.extendTraces=I.extendTraces,U.prependTraces=I.prependTraces,U.addTraces=I.addTraces,U.deleteTraces=I.deleteTraces,U.moveTraces=I.moveTraces,U.purge=I.purge,U.addFrames=I.addFrames,U.deleteFrames=I.deleteFrames,U.animate=I.animate,U.setPlotConfig=I.setPlotConfig,U.toImage=r(403),U.validate=r(84936),U.downloadImage=r(7239);var C=r(96318);U.makeTemplate=C.makeTemplate,U.validateTemplate=C.validateTemplate},6611:function(se,U,r){"use strict";var I=r(41965),C=r(64213),f=r(47769),k=r(65888).sorterAsc,T=r(73972);U.containerArrayMatch=r(14458);var v=U.isAddVal=function(i){return"add"===i||I(i)},c=U.isRemoveVal=function(i){return null===i||"remove"===i};U.applyContainerArrayChanges=function(i,s,a,o,l){var u=s.astr,d=T.getComponentMethod(u,"supplyLayoutDefaults"),g=T.getComponentMethod(u,"draw"),h=T.getComponentMethod(u,"drawOne"),w=o.replot||o.recalc||d===C||g===C,y=i.layout,p=i._fullLayout;if(a[""]){Object.keys(a).length>1&&f.warn("Full array edits are incompatible with other edits",u);var _=a[""][""];if(c(_))s.set(null);else{if(!Array.isArray(_))return f.warn("Unrecognized full array edit value",u,_),!0;s.set(_)}return!w&&(d(y,p),g(i),!0)}var x,b,M,m,D,S,O,R=Object.keys(a).map(Number).sort(k),F=s.get(),B=F||[],J=l(p,u).get(),z=[],$=-1,G=B.length;for(x=0;x<R.length;x++)if(m=a[M=R[x]],D=Object.keys(m),O=v(S=m[""]),M<0||M>B.length-(O?0:1))f.warn("index out of range",u,M);else if(void 0!==S)D.length>1&&f.warn("Insertion & removal are incompatible with edits to the same index.",u,M),c(S)?z.push(M):O?("add"===S&&(S={}),B.splice(M,0,S),J&&J.splice(M,0,{})):f.warn("Unrecognized full object edit value",u,M,S),-1===$&&($=M);else for(b=0;b<D.length;b++)l(B[M],D[b],u+"["+M+"].").set(m[D[b]]);for(x=z.length-1;x>=0;x--)B.splice(z[x],1),J&&J.splice(z[x],1);if(B.length?F||s.set(B):s.set(null),w)return!1;if(d(y,p),h!==C){var H;if(-1===$)H=R;else{for(G=Math.max(B.length,G),H=[],x=0;x<R.length&&!((M=R[x])>=$);x++)H.push(M);for(x=$;x<G;x++)H.push(x)}for(x=0;x<H.length;x++)h(i,H[x])}else g(i);return!0}},72391:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(57035),k=r(71828),T=k.nestedProperty,v=r(11086),c=r(10847),i=r(73972),s=r(86281),a=r(74875),o=r(89298),l=r(91424),u=r(7901),d=r(4305).initInteractions,g=r(77922),h=r(47322).clearOutline,w=r(72075).dfltConfig,y=r(6611),p=r(58377),_=r(61549),x=r(30962),b=r(85555).AX_NAME_PATTERN,M=0;function m(ce){var Ae=ce._fullLayout;Ae._redrawFromAutoMarginCount?Ae._redrawFromAutoMarginCount--:ce.emit("plotly_afterplot")}function D(ce,Ae){try{ce._fullLayout._paper.style("background",Ae)}catch(Ne){k.error(Ne)}}function S(ce,Ae){D(ce,u.combine(Ae,"white"))}function O(ce,Ae){if(!ce._context){ce._context=k.extendDeep({},w);var Ne=I.select("base");ce._context._baseUrl=Ne.size()&&Ne.attr("href")?window.location.href.split("#")[0]:""}var De,qe,Ke,be=ce._context;if(Ae){for(qe=Object.keys(Ae),De=0;De<qe.length;De++)"editable"!==(Ke=qe[De])&&"edits"!==Ke&&Ke in be&&(be[Ke]="setBackground"===Ke&&"opaque"===Ae[Ke]?S:Ae[Ke]);Ae.plot3dPixelRatio&&!be.plotGlPixelRatio&&(be.plotGlPixelRatio=be.plot3dPixelRatio);var Oe=Ae.editable;if(void 0!==Oe)for(be.editable=Oe,qe=Object.keys(be.edits),De=0;De<qe.length;De++)be.edits[qe[De]]=Oe;if(Ae.edits)for(qe=Object.keys(Ae.edits),De=0;De<qe.length;De++)(Ke=qe[De])in be.edits&&(be.edits[Ke]=Ae.edits[Ke]);be._exportedPlot=Ae._exportedPlot}be.staticPlot&&(be.editable=!1,be.edits={},be.autosizable=!1,be.scrollZoom=!1,be.doubleClick=!1,be.showTips=!1,be.showLink=!1,be.displayModeBar=!1),"hover"!==be.displayModeBar||f||(be.displayModeBar=!0),"transparent"!==be.setBackground&&"function"==typeof be.setBackground||(be.setBackground=D),be._hasZeroHeight=be._hasZeroHeight||0===ce.clientHeight,be._hasZeroWidth=be._hasZeroWidth||0===ce.clientWidth;var Le=be.scrollZoom,Ue=be._scrollZoom={};if(!0===Le)Ue.cartesian=1,Ue.gl3d=1,Ue.geo=1,Ue.mapbox=1;else if("string"==typeof Le){var Ze=Le.split("+");for(De=0;De<Ze.length;De++)Ue[Ze[De]]=1}else!1!==Le&&(Ue.gl3d=1,Ue.geo=1,Ue.mapbox=1)}function P(ce,Ae){var Ne,De,qe=Ae+1,Ke=[];for(Ne=0;Ne<ce.length;Ne++)(De=ce[Ne])<0?Ke.push(qe+De):Ke.push(De);return Ke}function R(ce,Ae,Ne){var De,qe;for(De=0;De<Ae.length;De++){if((qe=Ae[De])!==parseInt(qe,10))throw new Error("all values in "+Ne+" must be integers");if(qe>=ce.data.length||qe<-ce.data.length)throw new Error(Ne+" must be valid indices for gd.data.");if(Ae.indexOf(qe,De+1)>-1||qe>=0&&Ae.indexOf(-ce.data.length+qe)>-1||qe<0&&Ae.indexOf(ce.data.length+qe)>-1)throw new Error("each index in "+Ne+" must be unique.")}}function F(ce,Ae,Ne){if(!Array.isArray(ce.data))throw new Error("gd.data must be an array.");if(void 0===Ae)throw new Error("currentIndices is a required argument.");if(Array.isArray(Ae)||(Ae=[Ae]),R(ce,Ae,"currentIndices"),void 0===Ne||Array.isArray(Ne)||(Ne=[Ne]),void 0!==Ne&&R(ce,Ne,"newIndices"),void 0!==Ne&&Ae.length!==Ne.length)throw new Error("current and new indices must be of equal length.")}function B(ce,Ae,Ne,De,qe){!function(et,nt,ct,yt){var ut=k.isPlainObject(yt);if(!Array.isArray(et.data))throw new Error("gd.data must be an array");if(!k.isPlainObject(nt))throw new Error("update must be a key:value object");if(void 0===ct)throw new Error("indices must be an integer or array of integers");for(var Ct in R(et,ct,"indices"),nt){if(!Array.isArray(nt[Ct])||nt[Ct].length!==ct.length)throw new Error("attribute "+Ct+" must be an array of length equal to indices array length");if(ut&&(!(Ct in yt)||!Array.isArray(yt[Ct])||yt[Ct].length!==nt[Ct].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ce,Ae,Ne,De);for(var Ke=function(et,nt,ct,yt){var Ct,Dt,vt,mt,Lt=k.isPlainObject(yt),Ft=[];for(var Rt in Array.isArray(ct)||(ct=[ct]),ct=P(ct,et.data.length-1),nt)for(var Wt=0;Wt<ct.length;Wt++){if(Ct=(Dt=T(et.data[ct[Wt]],Rt)).get(),!k.isArrayOrTypedArray(vt=nt[Rt][Wt]))throw new Error("attribute: "+Rt+" index: "+Wt+" must be an array");if(!k.isArrayOrTypedArray(Ct))throw new Error("cannot extend missing or non-array attribute: "+Rt);if(Ct.constructor!==vt.constructor)throw new Error("cannot extend array with an array of a different type: "+Rt);C(mt=Lt?yt[Rt][Wt]:yt)||(mt=-1),Ft.push({prop:Dt,target:Ct,insert:vt,maxp:Math.floor(mt)})}return Ft}(ce,Ae,Ne,De),be={},Oe={},Le=0;Le<Ke.length;Le++){var Ue=Ke[Le].prop,We=qe(Ke[Le].target,Ke[Le].insert,Ke[Le].maxp);Ue.set(We[0]),Array.isArray(be[Ue.astr])||(be[Ue.astr]=[]),be[Ue.astr].push(We[1]),Array.isArray(Oe[Ue.astr])||(Oe[Ue.astr]=[]),Oe[Ue.astr].push(Ke[Le].target.length)}return{update:be,maxPoints:Oe}}function J(ce,Ae){var Ne=new ce.constructor(ce.length+Ae.length);return Ne.set(ce),Ne.set(Ae,ce.length),Ne}function z(ce,Ae,Ne,De){ce=k.getGraphDiv(ce),p.clearPromiseQueue(ce);var qe={};if("string"==typeof Ae)qe[Ae]=Ne;else{if(!k.isPlainObject(Ae))return k.warn("Restyle fail.",Ae,Ne,De),Promise.reject();qe=k.extendFlat({},Ae),void 0===De&&(De=Ne)}Object.keys(qe).length&&(ce.changed=!0);var Ke=p.coerceTraceIndices(ce,De),be=X(ce,qe,Ke),Oe=be.flags;Oe.calc&&(ce.calcdata=void 0),Oe.clearAxisTypes&&p.clearAxisTypes(ce,Ke,{});var Le=[];Oe.fullReplot?Le.push(U._doPlot):(Le.push(a.previousPromises),a.supplyDefaults(ce),Oe.markerSize&&(a.doCalcdata(ce),ne(Le)),Oe.style&&Le.push(_.doTraceStyle),Oe.colorbars&&Le.push(_.doColorBars),Le.push(m)),Le.push(a.rehover,a.redrag,a.reselect),c.add(ce,z,[ce,be.undoit,be.traces],z,[ce,be.redoit,be.traces]);var Ue=k.syncOrAsync(Le,ce);return Ue&&Ue.then||(Ue=Promise.resolve()),Ue.then(function(){return ce.emit("plotly_restyle",be.eventData),ce})}function $(ce){return void 0===ce?null:ce}function G(ce,Ae){return Ae?function(Ne,De,qe){var Ke=T(Ne,De),be=Ke.set;return Ke.set=function(Oe){H((qe||"")+De,Ke.get(),Oe,ce),be(Oe)},Ke}:T}function H(ce,Ae,Ne,De){if(Array.isArray(Ae)||Array.isArray(Ne))for(var qe=Array.isArray(Ae)?Ae:[],Ke=Array.isArray(Ne)?Ne:[],be=Math.max(qe.length,Ke.length),Oe=0;Oe<be;Oe++)H(ce+"["+Oe+"]",qe[Oe],Ke[Oe],De);else if(k.isPlainObject(Ae)||k.isPlainObject(Ne)){var Le=k.isPlainObject(Ae)?Ae:{},Ue=k.isPlainObject(Ne)?Ne:{},Ze=k.extendFlat({},Le,Ue);for(var We in Ze)H(ce+"."+We,Le[We],Ue[We],De)}else void 0===De[ce]&&(De[ce]=$(Ae))}function X(ce,Ae,Ne){var De,qe=ce._fullLayout,Ke=ce._fullData,be=ce.data,Oe=qe._guiEditing,Le=G(qe._preGUI,Oe),Ue=k.extendDeepAll({},Ae);K(Ae);var Ze,We=x.traceFlags(),et={},nt={};function ct(){return Ne.map(function(){})}function yt(Xt){var dn=o.id2name(Xt);-1===Ze.indexOf(dn)&&Ze.push(dn)}function ut(Xt){return"LAYOUT"+Xt+".autorange"}function Ct(Xt){return"LAYOUT"+Xt+".range"}function Dt(Xt){for(var dn=Xt;dn<Ke.length;dn++)if(Ke[dn]._input===be[Xt])return Ke[dn]}function vt(Xt,dn,on){if(Array.isArray(Xt))Xt.forEach(function(Cn){vt(Cn,dn,on)});else if(!(Xt in Ae)&&!p.hasParent(Ae,Xt)){var cn;if("LAYOUT"===Xt.substr(0,6))cn=Le(ce.layout,Xt.replace("LAYOUT",""));else{var tn=Ne[on];cn=G(qe._tracePreGUI[Dt(tn)._fullInput.uid],Oe)(be[tn],Xt)}Xt in nt||(nt[Xt]=ct()),void 0===nt[Xt][on]&&(nt[Xt][on]=$(cn.get())),void 0!==dn&&cn.set(dn)}}function mt(Xt){return function(dn){return Ke[dn][Xt]}}function Lt(Xt){return function(dn,on){return!1===dn?Ke[Ne[on]][Xt]:null}}for(var Ft in Ae){if(p.hasParent(Ae,Ft))throw new Error("cannot set "+Ft+" and a parent attribute simultaneously");var Rt,Wt,Ht,it,st,Je,ot=Ae[Ft];if("autobinx"!==Ft&&"autobiny"!==Ft||(Ft=Ft.charAt(Ft.length-1)+"bins",ot=Array.isArray(ot)?ot.map(Lt(Ft)):!1===ot?Ne.map(mt(Ft)):null),et[Ft]=ot,"LAYOUT"!==Ft.substr(0,6)){for(nt[Ft]=ct(),De=0;De<Ne.length;De++)if(Rt=be[Ne[De]],Wt=Dt(Ne[De]),it=(Ht=G(qe._tracePreGUI[Wt._fullInput.uid],Oe)(Rt,Ft)).get(),void 0!==(st=Array.isArray(ot)?ot[De%ot.length]:ot)){var pt=Ht.parts[Ht.parts.length-1],xt=Ft.substr(0,Ft.length-pt.length-1),He=xt?xt+".":"",Ge=xt?T(Wt,xt).get():Wt;if((Je=s.getTraceValObject(Wt,Ht.parts))&&Je.impliedEdits&&null!==st)for(var dt in Je.impliedEdits)vt(k.relativeAttr(Ft,dt),Je.impliedEdits[dt],De);else if("thicknessmode"!==pt&&"lenmode"!==pt||it===st||"fraction"!==st&&"pixels"!==st||!Ge){if("type"===Ft&&("pie"===st!=("pie"===it)||"funnelarea"===st!=("funnelarea"===it))){var ht="x",kt="y";"bar"!==st&&"bar"!==it||"h"!==Rt.orientation||(ht="y",kt="x"),k.swapAttrs(Rt,["?","?src"],"labels",ht),k.swapAttrs(Rt,["d?","?0"],"label",ht),k.swapAttrs(Rt,["?","?src"],"values",kt),"pie"===it||"funnelarea"===it?(T(Rt,"marker.color").set(T(Rt,"marker.colors").get()),qe._pielayer.selectAll("g.trace").remove()):i.traceIs(Rt,"cartesian")&&T(Rt,"marker.colors").set(T(Rt,"marker.color").get())}}else{var St=qe._size,Et=Ge.orient,wt="top"===Et||"bottom"===Et;if("thicknessmode"===pt){var Nt=wt?St.h:St.w;vt(He+"thickness",Ge.thickness*("fraction"===st?1/Nt:Nt),De)}else{var _t=wt?St.w:St.h;vt(He+"len",Ge.len*("fraction"===st?1/_t:_t),De)}}if(nt[Ft][De]=$(it),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Ft)){if("orientation"===Ft){Ht.set(st);var Mt=Rt.x&&!Rt.y?"h":"v";if((Ht.get()||Mt)===Wt.orientation)continue}else"orientationaxes"===Ft&&(Rt.orientation={v:"h",h:"v"}[Wt.orientation]);p.swapXYData(Rt),We.calc=We.clearAxisTypes=!0}else-1!==a.dataArrayContainers.indexOf(Ht.parts[0])?(p.manageArrayContainers(Ht,st,nt),We.calc=!0):(Je?Je.arrayOk&&!i.traceIs(Wt,"regl")&&(k.isArrayOrTypedArray(st)||k.isArrayOrTypedArray(it))?We.calc=!0:x.update(We,Je):We.calc=!0,Ht.set(st))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Ft)&&o.swap(ce,Ne),"orientationaxes"===Ft){var Pt=T(ce.layout,"hovermode"),Zt=Pt.get();"x"===Zt?Pt.set("y"):"y"===Zt?Pt.set("x"):"x unified"===Zt?Pt.set("y unified"):"y unified"===Zt&&Pt.set("x unified")}if(-1!==["orientation","type"].indexOf(Ft)){for(Ze=[],De=0;De<Ne.length;De++){var $t=be[Ne[De]];i.traceIs($t,"cartesian")&&(yt($t.xaxis||"x"),yt($t.yaxis||"y"))}vt(Ze.map(ut),!0,0),vt(Ze.map(Ct),[0,1],0)}}else Ht=Le(ce.layout,Ft.replace("LAYOUT","")),nt[Ft]=[$(Ht.get())],Ht.set(Array.isArray(ot)?ot[0]:ot),We.calc=!0}return(We.calc||We.plot)&&(We.fullReplot=!0),{flags:We,undoit:nt,redoit:et,traces:Ne,eventData:k.extendDeepNoArrays([],[Ue,Ne])}}function K(ce){var Ae,Ne,De,qe=k.counterRegex("axis",".title",!1,!1),Ke=/colorbar\.title$/,be=Object.keys(ce);for(Ae=0;Ae<be.length;Ae++)De=ce[Ne=be[Ae]],"title"!==Ne&&!qe.test(Ne)&&!Ke.test(Ne)||"string"!=typeof De&&"number"!=typeof De?Ne.indexOf("titlefont")>-1&&-1===Ne.indexOf("grouptitlefont")?Oe(Ne,Ne.replace("titlefont","title.font")):Ne.indexOf("titleposition")>-1?Oe(Ne,Ne.replace("titleposition","title.position")):Ne.indexOf("titleside")>-1?Oe(Ne,Ne.replace("titleside","title.side")):Ne.indexOf("titleoffset")>-1&&Oe(Ne,Ne.replace("titleoffset","title.offset")):Oe(Ne,Ne.replace("title","title.text"));function Oe(Le,Ue){ce[Ue]=ce[Le],delete ce[Le]}}function ue(ce,Ae,Ne){ce=k.getGraphDiv(ce),p.clearPromiseQueue(ce);var De={};if("string"==typeof Ae)De[Ae]=Ne;else{if(!k.isPlainObject(Ae))return k.warn("Relayout fail.",Ae,Ne),Promise.reject();De=k.extendFlat({},Ae)}Object.keys(De).length&&(ce.changed=!0);var qe=fe(ce,De),Ke=qe.flags;Ke.calc&&(ce.calcdata=void 0);var be=[a.previousPromises];Ke.layoutReplot?be.push(_.layoutReplot):Object.keys(De).length&&(ae(ce,Ke,qe)||a.supplyDefaults(ce),Ke.legend&&be.push(_.doLegend),Ke.layoutstyle&&be.push(_.layoutStyles),Ke.axrange&&ne(be,qe.rangesAltered),Ke.ticks&&be.push(_.doTicksRelayout),Ke.modebar&&be.push(_.doModeBar),Ke.camera&&be.push(_.doCamera),Ke.colorbars&&be.push(_.doColorBars),be.push(m)),be.push(a.rehover,a.redrag,a.reselect),c.add(ce,ue,[ce,qe.undoit],ue,[ce,qe.redoit]);var Oe=k.syncOrAsync(be,ce);return Oe&&Oe.then||(Oe=Promise.resolve(ce)),Oe.then(function(){return ce.emit("plotly_relayout",qe.eventData),ce})}function ae(ce,Ae,Ne){var De=ce._fullLayout;if(!Ae.axrange)return!1;for(var qe in Ae)if("axrange"!==qe&&Ae[qe])return!1;for(var Ke in Ne.rangesAltered){var be=o.id2name(Ke),Oe=ce.layout[be],Le=De[be];if(Le.autorange=Oe.autorange,Oe.range&&(Le.range=Oe.range.slice()),Le.cleanRange(),Le._matchGroup)for(var Ue in Le._matchGroup)if(Ue!==Ke){var Ze=De[o.id2name(Ue)];Ze.autorange=Le.autorange,Ze.range=Le.range.slice(),Ze._input.range=Le.range.slice()}}return!0}function ne(ce,Ae){ce.push(h,_.doAutoRangeAndConstraints,Ae?function(De){var qe=[];for(var Ke in Ae){var be=o.getFromId(De,Ke);if(qe.push(Ke),-1!==(be.ticklabelposition||"").indexOf("inside")&&be._anchorAxis&&qe.push(be._anchorAxis._id),be._matchGroup)for(var Oe in be._matchGroup)Ae[Oe]||qe.push(Oe)}return o.draw(De,qe,{skipTitle:!0})}:function(De){return o.draw(De,"redraw")},_.drawData,_.finalDraw)}var Q=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,le=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function fe(ce,Ae){var Ne,De,qe,Ke=ce.layout,be=ce._fullLayout,Le=G(be._preGUI,be._guiEditing),Ue=Object.keys(Ae),Ze=o.list(ce),We=k.extendDeepAll({},Ae),et={};for(K(Ae),Ue=Object.keys(Ae),De=0;De<Ue.length;De++)if(0===Ue[De].indexOf("allaxes")){for(qe=0;qe<Ze.length;qe++){var nt=Ze[qe]._id.substr(1),ct=-1!==nt.indexOf("scene")?nt+".":"",yt=Ue[De].replace("allaxes",ct+Ze[qe]._name);Ae[yt]||(Ae[yt]=Ae[Ue[De]])}delete Ae[Ue[De]]}var ut=x.layoutFlags(),Ct={},Dt={};function vt(tn,Cn){if(Array.isArray(tn))tn.forEach(function(En){vt(En,Cn)});else if(!(tn in Ae)&&!p.hasParent(Ae,tn)){var Fn=Le(Ke,tn);tn in Dt||(Dt[tn]=$(Fn.get())),void 0!==Cn&&Fn.set(Cn)}}var mt,Lt={};function Ft(tn){var Cn=o.name2id(tn.split(".")[0]);return Lt[Cn]=1,Cn}for(var Rt in Ae){if(p.hasParent(Ae,Rt))throw new Error("cannot set "+Rt+" and a parent attribute simultaneously");for(var Wt=Le(Ke,Rt),Ht=Ae[Rt],it=Wt.parts.length-1;it>0&&"string"!=typeof Wt.parts[it];)it--;var st=Wt.parts[it],Je=Wt.parts[it-1]+"."+st,ot=Wt.parts.slice(0,it).join("."),pt=T(ce.layout,ot).get(),xt=T(be,ot).get(),He=Wt.get();if(void 0!==Ht){Ct[Rt]=Ht,Dt[Rt]="reverse"===st?Ht:$(He);var Ge=s.getLayoutValObject(be,Wt.parts);if(Ge&&Ge.impliedEdits&&null!==Ht)for(var dt in Ge.impliedEdits)vt(k.relativeAttr(Rt,dt),Ge.impliedEdits[dt]);if(-1!==["width","height"].indexOf(Rt))if(Ht){vt("autosize",null);var ht="height"===Rt?"width":"height";vt(ht,be[ht])}else be[Rt]=ce._initialAutoSize[Rt];else if("autosize"===Rt)vt("width",Ht?null:be.width),vt("height",Ht?null:be.height);else if(Je.match(Q))Ft(Je),T(be,ot+"._inputRange").set(null);else if(Je.match(ie)){Ft(Je),T(be,ot+"._inputRange").set(null);var kt=T(be,ot).get();kt._inputDomain&&(kt._input.domain=kt._inputDomain.slice())}else Je.match(le)&&T(be,ot+"._inputDomain").set(null);if("type"===st){mt=pt;var St="linear"===xt.type&&"log"===Ht;if(St||"log"===xt.type&&"linear"===Ht){if(mt&&mt.range)if(xt.autorange)St&&(mt.range=mt.range[1]>mt.range[0]?[1,2]:[2,1]);else{var wt=mt.range[0],Nt=mt.range[1];St?(wt<=0&&Nt<=0&&vt(ot+".autorange",!0),wt<=0?wt=Nt/1e6:Nt<=0&&(Nt=wt/1e6),vt(ot+".range[0]",Math.log(wt)/Math.LN10),vt(ot+".range[1]",Math.log(Nt)/Math.LN10)):(vt(ot+".range[0]",Math.pow(10,wt)),vt(ot+".range[1]",Math.pow(10,Nt)))}else vt(ot+".autorange",!0);Array.isArray(be._subplots.polar)&&be._subplots.polar.length&&be[Wt.parts[0]]&&"radialaxis"===Wt.parts[1]&&delete be[Wt.parts[0]]._subplot.viewInitial["radialaxis.range"],i.getComponentMethod("annotations","convertCoords")(ce,xt,Ht,vt),i.getComponentMethod("images","convertCoords")(ce,xt,Ht,vt)}else vt(ot+".autorange",!0),vt(ot+".range",null);T(be,ot+"._inputRange").set(null)}else if(st.match(b)){var _t=T(be,Rt).get(),Mt=(Ht||{}).type;Mt&&"-"!==Mt||(Mt="linear"),i.getComponentMethod("annotations","convertCoords")(ce,_t,Mt,vt),i.getComponentMethod("images","convertCoords")(ce,_t,Mt,vt)}var Pt=y.containerArrayMatch(Rt);if(Pt){Ne=Pt.array;var Zt=Pt.property,$t=Ge||{editType:"calc"};""!==(De=Pt.index)&&""===Zt&&(y.isAddVal(Ht)?Dt[Rt]=null:y.isRemoveVal(Ht)?Dt[Rt]=(T(Ke,Ne).get()||[])[De]:k.warn("unrecognized full object value",Ae)),x.update(ut,$t),et[Ne]||(et[Ne]={});var Xt=et[Ne][De];Xt||(Xt=et[Ne][De]={}),Xt[Zt]=Ht,delete Ae[Rt]}else"reverse"===st?(pt.range?pt.range.reverse():(vt(ot+".autorange",!0),pt.range=[1,0]),xt.autorange?ut.calc=!0:ut.plot=!0):("dragmode"===Rt&&(!1===Ht&&!1!==He||!1!==Ht&&!1===He)||be._has("scatter-like")&&be._has("regl")&&"dragmode"===Rt&&("lasso"===Ht||"select"===Ht)&&"lasso"!==He&&"select"!==He||be._has("gl2d")?ut.plot=!0:Ge?x.update(ut,Ge):ut.calc=!0,Wt.set(Ht))}}for(Ne in et)y.applyContainerArrayChanges(ce,Le(Ke,Ne),et[Ne],ut,Le)||(ut.plot=!0);for(var dn in Lt){var on=(mt=o.getFromId(ce,dn))&&mt._constraintGroup;if(on)for(var cn in ut.calc=!0,on)Lt[cn]||(o.getFromId(ce,cn)._constraintShrinkable=!0)}return(he(ce)||Ae.height||Ae.width)&&(ut.plot=!0),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),{flags:ut,rangesAltered:Lt,undoit:Dt,redoit:Ct,eventData:We}}function he(ce){var Ae=ce._fullLayout,Ne=Ae.width,De=Ae.height;return ce.layout.autosize&&a.plotAutoSize(ce,ce.layout,Ae),Ae.width!==Ne||Ae.height!==De}function pe(ce,Ae,Ne,De){ce=k.getGraphDiv(ce),p.clearPromiseQueue(ce),k.isPlainObject(Ae)||(Ae={}),k.isPlainObject(Ne)||(Ne={}),Object.keys(Ae).length&&(ce.changed=!0),Object.keys(Ne).length&&(ce.changed=!0);var qe=p.coerceTraceIndices(ce,De),Ke=X(ce,k.extendFlat({},Ae),qe),be=Ke.flags,Oe=fe(ce,k.extendFlat({},Ne)),Le=Oe.flags;(be.calc||Le.calc)&&(ce.calcdata=void 0),be.clearAxisTypes&&p.clearAxisTypes(ce,qe,Ne);var Ue=[];Le.layoutReplot?Ue.push(_.layoutReplot):be.fullReplot?Ue.push(U._doPlot):(Ue.push(a.previousPromises),ae(ce,Le,Oe)||a.supplyDefaults(ce),be.style&&Ue.push(_.doTraceStyle),(be.colorbars||Le.colorbars)&&Ue.push(_.doColorBars),Le.legend&&Ue.push(_.doLegend),Le.layoutstyle&&Ue.push(_.layoutStyles),Le.axrange&&ne(Ue,Oe.rangesAltered),Le.ticks&&Ue.push(_.doTicksRelayout),Le.modebar&&Ue.push(_.doModeBar),Le.camera&&Ue.push(_.doCamera),Ue.push(m)),Ue.push(a.rehover,a.redrag,a.reselect),c.add(ce,pe,[ce,Ke.undoit,Oe.undoit,Ke.traces],pe,[ce,Ke.redoit,Oe.redoit,Ke.traces]);var Ze=k.syncOrAsync(Ue,ce);return Ze&&Ze.then||(Ze=Promise.resolve(ce)),Ze.then(function(){return ce.emit("plotly_update",{data:Ke.eventData,layout:Oe.eventData}),ce})}function xe(ce){return function(Ae){Ae._fullLayout._guiEditing=!0;var Ne=ce.apply(null,arguments);return Ae._fullLayout._guiEditing=!1,Ne}}var Ee=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Re=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ke(ce,Ae){for(var Ne=0;Ne<Ae.length;Ne++){var De=Ae[Ne],qe=ce.match(De.pattern);if(qe){var Ke=qe[1]||"";return{head:Ke,tail:ce.substr(Ke.length+1),attr:De.attr}}}}function Te(ce,Ae){var Ne=T(Ae,ce).get();if(void 0!==Ne)return Ne;var De=ce.split(".");for(De.pop();De.length>1;)if(De.pop(),void 0!==(Ne=T(Ae,De.join(".")+".uirevision").get()))return Ne;return Ae.uirevision}function we(ce,Ae){for(var Ne=0;Ne<Ae.length;Ne++)if(Ae[Ne]._fullInput.uid===ce)return Ne;return-1}function je(ce,Ae,Ne){for(var De=0;De<Ae.length;De++)if(Ae[De].uid===ce)return De;return!Ae[Ne]||Ae[Ne].uid?-1:Ne}function Ce(ce,Ae){var Ne=k.isPlainObject(ce),De=Array.isArray(ce);return Ne||De?(Ne&&k.isPlainObject(Ae)||De&&Array.isArray(Ae))&&JSON.stringify(ce)===JSON.stringify(Ae):ce===Ae}function Ie(ce,Ae,Ne,De){var qe,Ke,be,Oe=De.getValObject,Le=De.flags,Ue=De.immutable,Ze=De.inArray,We=De.arrayIndex;function et(){var pt=qe.editType;Ze&&-1!==pt.indexOf("arraydraw")?k.pushUnique(Le.arrays[Ze],We):(x.update(Le,qe),"none"!==pt&&Le.nChanges++,De.transition&&qe.anim&&Le.nChangesAnim++,(Q.test(be)||ie.test(be))&&(Le.rangesAltered[Ne[0]]=1),le.test(be)&&T(Ae,"_inputDomain").set(null),"datarevision"===Ke&&(Le.newDataRevision=1))}function nt(pt){return"data_array"===pt.valType||pt.arrayOk}for(Ke in ce){if(Le.calc&&!De.transition)return;var ct=ce[Ke],yt=Ae[Ke],ut=Ne.concat(Ke);if(be=ut.join("."),"_"!==Ke.charAt(0)&&"function"!=typeof ct&&ct!==yt){if(("tick0"===Ke||"dtick"===Ke)&&"geo"!==Ne[0]){var Ct=Ae.tickmode;if("auto"===Ct||"array"===Ct||!Ct)continue}if(("range"!==Ke||!Ae.autorange)&&("zmin"!==Ke&&"zmax"!==Ke||"contourcarpet"!==Ae.type)&&(qe=Oe(ut))&&(!qe._compareAsJSON||JSON.stringify(ct)!==JSON.stringify(yt))){var Dt,vt=qe.valType,mt=nt(qe),Lt=Array.isArray(ct),Ft=Array.isArray(yt);if(Lt&&Ft){var Rt="_input_"+Ke,Wt=ce[Rt],Ht=Ae[Rt];if(Array.isArray(Wt)&&Wt===Ht)continue}if(void 0===yt)mt&&Lt?Le.calc=!0:et();else if(qe._isLinkedToArray){var it=[],st=!1;Ze||(Le.arrays[Ke]=it);var Je=Math.min(ct.length,yt.length),ot=Math.max(ct.length,yt.length);if(Je!==ot){if("arraydraw"!==qe.editType){et();continue}st=!0}for(Dt=0;Dt<Je;Dt++)Ie(ct[Dt],yt[Dt],ut.concat(Dt),k.extendFlat({inArray:Ke,arrayIndex:Dt},De));if(st)for(Dt=Je;Dt<ot;Dt++)it.push(Dt)}else!vt&&k.isPlainObject(ct)?Ie(ct,yt,ut,De):mt?Lt&&Ft?(Ue&&(Le.calc=!0),(Ue||De.newDataRevision)&&et()):Lt!==Ft?Le.calc=!0:et():Lt&&Ft&&ct.length===yt.length&&String(ct)===String(yt)||et()}}}for(Ke in Ae)if(!(Ke in ce)&&"_"!==Ke.charAt(0)&&"function"!=typeof Ae[Ke]){if(nt(qe=Oe(Ne.concat(Ke)))&&Array.isArray(Ae[Ke]))return void(Le.calc=!0);et()}}function ge(ce,Ae){var Ne;for(Ne in ce)if("_"!==Ne.charAt(0)){var De=ce[Ne],qe=Ae[Ne];if(De!==qe)if(k.isPlainObject(De)&&k.isPlainObject(qe)){if(ge(De,qe))return!0}else{if(!Array.isArray(De)||!Array.isArray(qe)||De.length!==qe.length)return!0;for(var Ke=0;Ke<De.length;Ke++)if(De[Ke]!==qe[Ke]&&(!k.isPlainObject(De[Ke])||!k.isPlainObject(qe[Ke])||ge(De[Ke],qe[Ke])))return!0}}}function me(ce){var Ae=ce._fullLayout,Ne=ce.getBoundingClientRect();if(!k.equalDomRects(Ne,Ae._lastBBox)){var De=Ae._invTransform=k.inverseTransformMatrix(k.getFullTransformMatrix(ce));Ae._invScaleX=Math.sqrt(De[0][0]*De[0][0]+De[0][1]*De[0][1]+De[0][2]*De[0][2]),Ae._invScaleY=Math.sqrt(De[1][0]*De[1][0]+De[1][1]*De[1][1]+De[1][2]*De[1][2]),Ae._lastBBox=Ne}}U.animate=function(ce,Ae,Ne){if(ce=k.getGraphDiv(ce),!k.isPlotDiv(ce))throw new Error("This element is not a Plotly plot: "+ce+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var De=ce._transitionData;De._frameQueue||(De._frameQueue=[]);var qe=(Ne=a.supplyAnimationDefaults(Ne)).transition,Ke=Ne.frame;function be(Ue){return Array.isArray(qe)?Ue>=qe.length?qe[0]:qe[Ue]:qe}function Oe(Ue){return Array.isArray(Ke)?Ue>=Ke.length?Ke[0]:Ke[Ue]:Ke}function Le(Ue,Ze){var We=0;return function(){if(Ue&&++We===Ze)return Ue()}}return void 0===De._frameWaitingCnt&&(De._frameWaitingCnt=0),new Promise(function(Ue,Ze){var et,nt,ct=0;function yt(Rt){return Rt.transitionOpts=Array.isArray(qe)?ct>=qe.length?qe[ct]:qe[0]:qe,ct++,Rt}var ut=[],Ct=null==Ae,Dt=Array.isArray(Ae);if(Ct||Dt||!k.isPlainObject(Ae)){if(Ct||-1!==["string","number"].indexOf(typeof Ae))for(et=0;et<De._frames.length;et++)(nt=De._frames[et])&&(Ct||String(nt.group)===String(Ae))&&ut.push({type:"byname",name:String(nt.name),data:yt({name:nt.name})});else if(Dt)for(et=0;et<Ae.length;et++){var vt=Ae[et];-1!==["number","string"].indexOf(typeof vt)?(vt=String(vt),ut.push({type:"byname",name:vt,data:yt({name:vt})})):k.isPlainObject(vt)&&ut.push({type:"object",data:yt(k.extendFlat({},vt))})}}else ut.push({type:"object",data:yt(k.extendFlat({},Ae))});for(et=0;et<ut.length;et++)if("byname"===(nt=ut[et]).type&&!De._frameHash[nt.data.name])return k.warn('animate failure: frame not found: "'+nt.data.name+'"'),void Ze();-1!==["next","immediate"].indexOf(Ne.mode)&&function(){if(0!==De._frameQueue.length){for(;De._frameQueue.length;){var Rt=De._frameQueue.pop();Rt.onInterrupt&&Rt.onInterrupt()}ce.emit("plotly_animationinterrupted",[])}}(),"reverse"===Ne.direction&&ut.reverse();var mt=ce._fullLayout._currentFrame;if(mt&&Ne.fromcurrent){var Lt=-1;for(et=0;et<ut.length;et++)if("byname"===(nt=ut[et]).type&&nt.name===mt){Lt=et;break}if(Lt>0&&Lt<ut.length-1){var Ft=[];for(et=0;et<ut.length;et++)nt=ut[et],("byname"!==ut[et].type||et>Lt)&&Ft.push(nt);ut=Ft}}ut.length>0?function(Rt){if(0!==Rt.length){for(var Wt=0;Wt<Rt.length;Wt++){var Ht;Ht="byname"===Rt[Wt].type?a.computeFrame(ce,Rt[Wt].name):Rt[Wt].data;var it=Oe(Wt),st=be(Wt);st.duration=Math.min(st.duration,it.duration);var Je={frame:Ht,name:Rt[Wt].name,frameOpts:it,transitionOpts:st};Wt===Rt.length-1&&(Je.onComplete=Le(Ue,2),Je.onInterrupt=Ze),De._frameQueue.push(Je)}"immediate"===Ne.mode&&(De._lastFrameAt=-1/0),De._animationRaf||function We(){ce.emit("plotly_animating"),De._lastFrameAt=-1/0,De._timeToNext=0,De._runningTransitions=0,De._currentFrame=null;var Rt=function(){De._animationRaf=window.requestAnimationFrame(Rt),Date.now()-De._lastFrameAt>De._timeToNext&&function(){De._currentFrame&&De._currentFrame.onComplete&&De._currentFrame.onComplete();var Wt=De._currentFrame=De._frameQueue.shift();if(Wt){var Ht=Wt.name?Wt.name.toString():null;ce._fullLayout._currentFrame=Ht,De._lastFrameAt=Date.now(),De._timeToNext=Wt.frameOpts.duration,a.transition(ce,Wt.frame.data,Wt.frame.layout,p.coerceTraceIndices(ce,Wt.frame.traces),Wt.frameOpts,Wt.transitionOpts).then(function(){Wt.onComplete&&Wt.onComplete()}),ce.emit("plotly_animatingframe",{name:Ht,frame:Wt.frame,animation:{frame:Wt.frameOpts,transition:Wt.transitionOpts}})}else ce.emit("plotly_animated"),window.cancelAnimationFrame(De._animationRaf),De._animationRaf=null}()};Rt()}()}}(ut):(ce.emit("plotly_animated"),Ue())})},U.addFrames=function(ce,Ae,Ne){if(ce=k.getGraphDiv(ce),null==Ae)return Promise.resolve();if(!k.isPlotDiv(ce))throw new Error("This element is not a Plotly plot: "+ce+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var De,qe,Ke,be,Oe=ce._transitionData._frames,Le=ce._transitionData._frameHash;if(!Array.isArray(Ae))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ae);var Ue=Oe.length+2*Ae.length,Ze=[],We={};for(De=Ae.length-1;De>=0;De--)if(k.isPlainObject(Ae[De])){var et=Ae[De].name,nt=(Le[et]||We[et]||{}).name,ct=Ae[De].name;nt&&ct&&"number"==typeof ct&&(Le[nt]||We[nt])&&M<5&&(M++,k.warn('addFrames: overwriting frame "'+(Le[nt]||We[nt]).name+'" with a frame whose name of type "number" also equates to "'+nt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===M&&k.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[et]={name:et},Ze.push({frame:a.supplyFrameDefaults(Ae[De]),index:Ne&&null!=Ne[De]?Ne[De]:Ue+De})}Ze.sort(function(Rt,Wt){return Rt.index>Wt.index?-1:Rt.index<Wt.index?1:0});var ut=[],Ct=[],Dt=Oe.length;for(De=Ze.length-1;De>=0;De--){if("number"==typeof(qe=Ze[De].frame).name&&k.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!qe.name)for(;Le[qe.name="frame "+ce._transitionData._counter++];);if(Le[qe.name]){for(Ke=0;Ke<Oe.length&&(Oe[Ke]||{}).name!==qe.name;Ke++);ut.push({type:"replace",index:Ke,value:qe}),Ct.unshift({type:"replace",index:Ke,value:Oe[Ke]})}else be=Math.max(0,Math.min(Ze[De].index,Dt)),ut.push({type:"insert",index:be,value:qe}),Ct.unshift({type:"delete",index:be}),Dt++}return c&&c.add(ce,a.modifyFrames,[ce,Ct],a.modifyFrames,[ce,ut]),a.modifyFrames(ce,ut)},U.deleteFrames=function(ce,Ae){if(ce=k.getGraphDiv(ce),!k.isPlotDiv(ce))throw new Error("This element is not a Plotly plot: "+ce);var Ne,De,qe=ce._transitionData._frames,Ke=[],be=[];if(!Ae)for(Ae=[],Ne=0;Ne<qe.length;Ne++)Ae.push(Ne);for((Ae=Ae.slice()).sort(),Ne=Ae.length-1;Ne>=0;Ne--)Ke.push({type:"delete",index:De=Ae[Ne]}),be.unshift({type:"insert",index:De,value:qe[De]});return c&&c.add(ce,a.modifyFrames,[ce,be],a.modifyFrames,[ce,Ke]),a.modifyFrames(ce,Ke)},U.addTraces=function ce(Ae,Ne,De){Ae=k.getGraphDiv(Ae);var qe,Ke,be=[],Oe=U.deleteTraces,Le=ce,Ue=[Ae,be],Ze=[Ae,Ne];for(function(We,et,nt){var ct,yt;if(!Array.isArray(We.data))throw new Error("gd.data must be an array.");if(void 0===et)throw new Error("traces must be defined.");for(Array.isArray(et)||(et=[et]),ct=0;ct<et.length;ct++)if("object"!=typeof(yt=et[ct])||Array.isArray(yt)||null===yt)throw new Error("all values in traces array must be non-array objects");if(void 0===nt||Array.isArray(nt)||(nt=[nt]),void 0!==nt&&nt.length!==et.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Ae,Ne,De),Array.isArray(Ne)||(Ne=[Ne]),Ne=Ne.map(function(We){return k.extendFlat({},We)}),p.cleanData(Ne),qe=0;qe<Ne.length;qe++)Ae.data.push(Ne[qe]);for(qe=0;qe<Ne.length;qe++)be.push(-Ne.length+qe);if(void 0===De)return Ke=U.redraw(Ae),c.add(Ae,Oe,Ue,Le,Ze),Ke;Array.isArray(De)||(De=[De]);try{F(Ae,be,De)}catch(We){throw Ae.data.splice(Ae.data.length-Ne.length,Ne.length),We}return c.startSequence(Ae),c.add(Ae,Oe,Ue,Le,Ze),Ke=U.moveTraces(Ae,be,De),c.stopSequence(Ae),Ke},U.deleteTraces=function ce(Ae,Ne){Ae=k.getGraphDiv(Ae);var De,qe,Ke=[],be=U.addTraces,Oe=ce,Le=[Ae,Ke,Ne],Ue=[Ae,Ne];if(void 0===Ne)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ne)||(Ne=[Ne]),R(Ae,Ne,"indices"),(Ne=P(Ne,Ae.data.length-1)).sort(k.sorterDes),De=0;De<Ne.length;De+=1)qe=Ae.data.splice(Ne[De],1)[0],Ke.push(qe);var Ze=U.redraw(Ae);return c.add(Ae,be,Le,Oe,Ue),Ze},U.extendTraces=function ce(Ae,Ne,De,qe){var Ke=B(Ae=k.getGraphDiv(Ae),Ne,De,qe,function(Le,Ue,Ze){var We,et;if(k.isTypedArray(Le))if(Ze<0){var nt=new Le.constructor(0),ct=J(Le,Ue);Ze<0?(We=ct,et=nt):(We=nt,et=ct)}else if(We=new Le.constructor(Ze),et=new Le.constructor(Le.length+Ue.length-Ze),Ze===Ue.length)We.set(Ue),et.set(Le);else if(Ze<Ue.length){var yt=Ue.length-Ze;We.set(Ue.subarray(yt)),et.set(Le),et.set(Ue.subarray(0,yt),Le.length)}else{var ut=Ze-Ue.length,Ct=Le.length-ut;We.set(Le.subarray(Ct)),We.set(Ue,ut),et.set(Le.subarray(0,Ct))}else We=Le.concat(Ue),et=Ze>=0&&Ze<We.length?We.splice(0,We.length-Ze):[];return[We,et]}),be=U.redraw(Ae);return c.add(Ae,U.prependTraces,[Ae,Ke.update,De,Ke.maxPoints],ce,arguments),be},U.moveTraces=function ce(Ae,Ne,De){var qe,Ke=[],be=[],Oe=ce,Le=ce,Ue=[Ae=k.getGraphDiv(Ae),De,Ne],Ze=[Ae,Ne,De];if(F(Ae,Ne,De),Ne=Array.isArray(Ne)?Ne:[Ne],void 0===De)for(De=[],qe=0;qe<Ne.length;qe++)De.push(-Ne.length+qe);for(De=Array.isArray(De)?De:[De],Ne=P(Ne,Ae.data.length-1),De=P(De,Ae.data.length-1),qe=0;qe<Ae.data.length;qe++)-1===Ne.indexOf(qe)&&Ke.push(Ae.data[qe]);for(qe=0;qe<Ne.length;qe++)be.push({newIndex:De[qe],trace:Ae.data[Ne[qe]]});for(be.sort(function(et,nt){return et.newIndex-nt.newIndex}),qe=0;qe<be.length;qe+=1)Ke.splice(be[qe].newIndex,0,be[qe].trace);Ae.data=Ke;var We=U.redraw(Ae);return c.add(Ae,Oe,Ue,Le,Ze),We},U.prependTraces=function ce(Ae,Ne,De,qe){var Ke=B(Ae=k.getGraphDiv(Ae),Ne,De,qe,function(Le,Ue,Ze){var We,et;if(k.isTypedArray(Le))if(Ze<=0){var nt=new Le.constructor(0),ct=J(Ue,Le);Ze<0?(We=ct,et=nt):(We=nt,et=ct)}else if(We=new Le.constructor(Ze),et=new Le.constructor(Le.length+Ue.length-Ze),Ze===Ue.length)We.set(Ue),et.set(Le);else if(Ze<Ue.length){var yt=Ue.length-Ze;We.set(Ue.subarray(0,yt)),et.set(Ue.subarray(yt)),et.set(Le,yt)}else{var ut=Ze-Ue.length;We.set(Ue),We.set(Le.subarray(0,ut),Ue.length),et.set(Le.subarray(ut))}else We=Ue.concat(Le),et=Ze>=0&&Ze<We.length?We.splice(Ze,We.length):[];return[We,et]}),be=U.redraw(Ae);return c.add(Ae,U.extendTraces,[Ae,Ke.update,De,Ke.maxPoints],ce,arguments),be},U.newPlot=function(ce,Ae,Ne,De){return ce=k.getGraphDiv(ce),a.cleanPlot([],{},ce._fullData||[],ce._fullLayout||{}),a.purge(ce),U._doPlot(ce,Ae,Ne,De)},U._doPlot=function(ce,Ae,Ne,De){var qe;if(ce=k.getGraphDiv(ce),v.init(ce),k.isPlainObject(Ae)){var Ke=Ae;Ae=Ke.data,Ne=Ke.layout,De=Ke.config,qe=Ke.frames}if(!1===v.triggerHandler(ce,"plotly_beforeplot",[Ae,Ne,De]))return Promise.reject();Ae||Ne||k.isPlotDiv(ce)||k.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ce),O(ce,De),Ne||(Ne={}),I.select(ce).classed("js-plotly-plot",!0),l.makeTester(),Array.isArray(ce._promises)||(ce._promises=[]);var be=0===(ce.data||[]).length&&Array.isArray(Ae);Array.isArray(Ae)&&(p.cleanData(Ae),be?ce.data=Ae:ce.data.push.apply(ce.data,Ae),ce.empty=!1),ce.layout&&!be||(ce.layout=p.cleanLayout(Ne)),a.supplyDefaults(ce);var Oe=ce._fullLayout,Le=Oe._has("cartesian");Oe._replotting=!0,(be||Oe._shouldCreateBgLayer)&&(function(Ct){var Dt=I.select(Ct),vt=Ct._fullLayout;if(vt._calcInverseTransform=me,vt._calcInverseTransform(Ct),vt._container=Dt.selectAll(".plot-container").data([0]),vt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),vt._paperdiv=vt._container.selectAll(".svg-container").data([0]),vt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),vt._glcontainer=vt._paperdiv.selectAll(".gl-container").data([{}]),vt._glcontainer.enter().append("div").classed("gl-container",!0),vt._paperdiv.selectAll(".main-svg").remove(),vt._paperdiv.select(".modebar-container").remove(),vt._paper=vt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),vt._toppaper=vt._paperdiv.append("svg").classed("main-svg",!0),vt._modebardiv=vt._paperdiv.append("div"),delete vt._modeBar,vt._hoverpaper=vt._paperdiv.append("svg").classed("main-svg",!0),!vt._uid){var mt={};I.selectAll("defs").each(function(){this.id&&(mt[this.id.split("-")[1]]=1)}),vt._uid=k.randstr(mt)}vt._paperdiv.selectAll(".main-svg").attr(g.svgAttrs),vt._defs=vt._paper.append("defs").attr("id","defs-"+vt._uid),vt._clips=vt._defs.append("g").classed("clips",!0),vt._topdefs=vt._toppaper.append("defs").attr("id","topdefs-"+vt._uid),vt._topclips=vt._topdefs.append("g").classed("clips",!0),vt._bgLayer=vt._paper.append("g").classed("bglayer",!0),vt._draggers=vt._paper.append("g").classed("draglayer",!0);var Lt=vt._paper.append("g").classed("layer-below",!0);vt._imageLowerLayer=Lt.append("g").classed("imagelayer",!0),vt._shapeLowerLayer=Lt.append("g").classed("shapelayer",!0),vt._cartesianlayer=vt._paper.append("g").classed("cartesianlayer",!0),vt._polarlayer=vt._paper.append("g").classed("polarlayer",!0),vt._smithlayer=vt._paper.append("g").classed("smithlayer",!0),vt._ternarylayer=vt._paper.append("g").classed("ternarylayer",!0),vt._geolayer=vt._paper.append("g").classed("geolayer",!0),vt._funnelarealayer=vt._paper.append("g").classed("funnelarealayer",!0),vt._pielayer=vt._paper.append("g").classed("pielayer",!0),vt._iciclelayer=vt._paper.append("g").classed("iciclelayer",!0),vt._treemaplayer=vt._paper.append("g").classed("treemaplayer",!0),vt._sunburstlayer=vt._paper.append("g").classed("sunburstlayer",!0),vt._indicatorlayer=vt._toppaper.append("g").classed("indicatorlayer",!0),vt._glimages=vt._paper.append("g").classed("glimages",!0);var Ft=vt._toppaper.append("g").classed("layer-above",!0);vt._imageUpperLayer=Ft.append("g").classed("imagelayer",!0),vt._shapeUpperLayer=Ft.append("g").classed("shapelayer",!0),vt._selectionLayer=vt._toppaper.append("g").classed("selectionlayer",!0),vt._infolayer=vt._toppaper.append("g").classed("infolayer",!0),vt._menulayer=vt._toppaper.append("g").classed("menulayer",!0),vt._zoomlayer=vt._toppaper.append("g").classed("zoomlayer",!0),vt._hoverlayer=vt._hoverpaper.append("g").classed("hoverlayer",!0),vt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ct.emit("plotly_framework")}(ce),Oe._shouldCreateBgLayer&&delete Oe._shouldCreateBgLayer),l.initGradients(ce),l.initPatterns(ce),be&&o.saveShowSpikeInitial(ce);var Ue=!ce.calcdata||ce.calcdata.length!==(ce._fullData||[]).length;Ue&&a.doCalcdata(ce);for(var Ze=0;Ze<ce.calcdata.length;Ze++)ce.calcdata[Ze][0].trace=ce._fullData[Ze];ce._context.responsive?ce._responsiveChartHandler||(ce._responsiveChartHandler=function(){k.isHidden(ce)||a.resize(ce)},window.addEventListener("resize",ce._responsiveChartHandler)):k.clearResponsive(ce);var We=k.extendFlat({},Oe._size),et=0;function nt(){if(a.clearAutoMarginIds(ce),_.drawMarginPushers(ce),o.allowAutoMargin(ce),ce._fullLayout.title.text&&ce._fullLayout.title.automargin&&a.allowAutoMargin(ce,"title.automargin"),Oe._has("pie"))for(var Ct=ce._fullData,Dt=0;Dt<Ct.length;Dt++){var vt=Ct[Dt];"pie"===vt.type&&vt.automargin&&a.allowAutoMargin(ce,"pie."+vt.uid+".automargin")}return a.doAutoMargin(ce),a.previousPromises(ce)}function ct(){ce._transitioning||(_.doAutoRangeAndConstraints(ce),be&&o.saveRangeInitial(ce),i.getComponentMethod("rangeslider","calcAutorange")(ce))}var yt=[a.previousPromises,function(){if(qe)return U.addFrames(ce,qe)},function Ct(){for(var Dt=Oe._basePlotModules,vt=0;vt<Dt.length;vt++)Dt[vt].drawFramework&&Dt[vt].drawFramework(ce);!Oe._glcanvas&&Oe._has("gl")&&(Oe._glcanvas=Oe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Rt){return Rt.key}),Oe._glcanvas.enter().append("canvas").attr("class",function(Rt){return"gl-canvas gl-canvas-"+Rt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var mt=ce._context.plotGlPixelRatio;if(Oe._glcanvas){Oe._glcanvas.attr("width",Oe.width*mt).attr("height",Oe.height*mt).style("width",Oe.width+"px").style("height",Oe.height+"px");var Lt=Oe._glcanvas.data()[0].regl;if(Lt&&(Math.floor(Oe.width*mt)!==Lt._gl.drawingBufferWidth||Math.floor(Oe.height*mt)!==Lt._gl.drawingBufferHeight)){var Ft="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!et)return k.log(Ft+" Clearing graph and plotting again."),a.cleanPlot([],{},ce._fullData,Oe),a.supplyDefaults(ce),Oe=ce._fullLayout,a.doCalcdata(ce),et++,Ct();k.error(Ft)}}return"h"===Oe.modebar.orientation?Oe._modebardiv.style("height",null).style("width","100%"):Oe._modebardiv.style("width",null).style("height",Oe.height+"px"),a.previousPromises(ce)},nt,function(){if(a.didMarginChange(We,Oe._size))return k.syncOrAsync([nt,_.layoutStyles],ce)}];Le&&yt.push(function(){if(Ue)return k.syncOrAsync([i.getComponentMethod("shapes","calcAutorange"),i.getComponentMethod("annotations","calcAutorange"),ct],ce);ct()}),yt.push(_.layoutStyles),Le&&yt.push(function(){return o.draw(ce,be?"":"redraw")},function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&ue(Ct,Ct._fullLayout._insideTickLabelsAutorange).then(function(){Ct._fullLayout._insideTickLabelsAutorange=void 0})}),yt.push(_.drawData,_.finalDraw,d,a.addLinks,a.rehover,a.redrag,a.reselect,a.doAutoMargin,function(Ct){Ct._fullLayout._insideTickLabelsAutorange&&be&&o.saveRangeInitial(Ct,!0)},a.previousPromises);var ut=k.syncOrAsync(yt,ce);return ut&&ut.then||(ut=Promise.resolve()),ut.then(function(){return m(ce),ce})},U.purge=function(ce){var Ae=(ce=k.getGraphDiv(ce))._fullLayout||{};return a.cleanPlot([],{},ce._fullData||[],Ae),a.purge(ce),v.purge(ce),Ae._container&&Ae._container.remove(),delete ce._context,ce},U.react=function(ce,Ae,Ne,De){var qe,Ke;ce=k.getGraphDiv(ce),p.clearPromiseQueue(ce);var ot,pt,xt,He,Ge,dt,be=ce._fullData,Oe=ce._fullLayout;if(k.isPlotDiv(ce)&&be&&Oe){if(k.isPlainObject(Ae)){var Le=Ae;Ae=Le.data,Ne=Le.layout,De=Le.config,qe=Le.frames}var Ue=!1;if(De){var Ze=k.extendDeep({},ce._context);ce._context=void 0,O(ce,De),Ue=ge(Ze,ce._context)}ce.data=Ae||[],p.cleanData(ce.data),ce.layout=Ne||{},p.cleanLayout(ce.layout),function(ot,pt,xt,He){var Ge,dt,ht,kt,St,Et,wt,Nt,_t,Mt,Pt=He._preGUI,Zt=[],$t={},Xt={};for(Ge in Pt){if(St=ke(Ge,Ee)){if(_t=St.head,Mt=St.tail,(kt=(ht=T(He,dt=St.attr||_t+".uirevision").get())&&Te(dt,pt))&&kt===ht){if(null===(Et=Pt[Ge])&&(Et=void 0),Ce(Nt=(wt=T(pt,Ge)).get(),Et)){void 0===Nt&&"autorange"===Mt&&Zt.push(_t),wt.set($(T(He,Ge).get()));continue}if("autorange"===Mt||"range["===Mt.substr(0,6)){var cn=Pt[_t+".autorange"];if(cn||null===cn&&null===Pt[_t+".range[0]"]&&null===Pt[_t+".range[1]"]){if(!(_t in $t)){var tn=T(pt,_t).get();$t[_t]=tn&&(tn.autorange||!1!==tn.autorange&&(!tn.range||2!==tn.range.length))}if($t[_t]){wt.set($(T(He,Ge).get()));continue}}}}}else k.warn("unrecognized GUI edit: "+Ge);delete Pt[Ge],St&&"range["===St.tail.substr(0,6)&&(Xt[St.head]=1)}for(var Cn=0;Cn<Zt.length;Cn++){var Fn=Zt[Cn];if(Xt[Fn]){var En=T(pt,Fn).get();En&&delete En.autorange}}var rn=He._tracePreGUI;for(var yn in rn){var pn,bn=rn[yn],In=null;for(Ge in bn){if(!In){var _n=we(yn,xt);if(_n<0){delete rn[yn];break}var qn=je(yn,ot,(pn=xt[_n]._fullInput).index);if(qn<0){delete rn[yn];break}In=ot[qn]}if(St=ke(Ge,Re)){if(St.attr?kt=(ht=T(He,St.attr).get())&&Te(St.attr,pt):(ht=pn.uirevision,void 0===(kt=In.uirevision)&&(kt=pt.uirevision)),kt&&kt===ht&&(null===(Et=bn[Ge])&&(Et=void 0),Ce(Nt=(wt=T(In,Ge)).get(),Et))){wt.set($(T(pn,Ge).get()));continue}}else k.warn("unrecognized GUI edit: "+Ge+" in trace uid "+yn);delete bn[Ge]}}}(ce.data,ce.layout,be,Oe),a.supplyDefaults(ce,{skipUpdateCalc:!0});var We=ce._fullData,et=ce._fullLayout,nt=void 0===et.datarevision,ct=et.transition,yt=(ot=ce,pt=Oe,xt=et,He=nt,Ge=ct,(dt=x.layoutFlags()).arrays={},dt.rangesAltered={},dt.nChanges=0,dt.nChangesAnim=0,Ie(pt,xt,[],{getValObject:function(ht){return s.getLayoutValObject(xt,ht)},flags:dt,immutable:He,transition:Ge,gd:ot}),(dt.plot||dt.calc)&&(dt.layoutReplot=!0),Ge&&dt.nChanges&&dt.nChangesAnim&&(dt.anim=dt.nChanges===dt.nChangesAnim?"all":"some"),dt),Ct=function(ot,pt,xt,He,Ge,dt){var ht=pt.length===xt.length;if(!Ge&&!ht)return{fullReplot:!0,calc:!0};var kt,St,Et=x.traceFlags();Et.arrays={},Et.nChanges=0,Et.nChangesAnim=0;var wt={getValObject:function(_t){var Mt=s.getTraceValObject(St,_t);return!St._module.animatable&&Mt.anim&&(Mt.anim=!1),Mt},flags:Et,immutable:He,transition:Ge,newDataRevision:dt,gd:ot},Nt={};for(kt=0;kt<pt.length;kt++)if(xt[kt]){if(a.hasMakesDataTransform(St=xt[kt]._fullInput)&&(St=xt[kt]),Nt[St.uid])continue;Nt[St.uid]=1,Ie(pt[kt]._fullInput,St,[],wt)}return(Et.calc||Et.plot)&&(Et.fullReplot=!0),Ge&&Et.nChanges&&Et.nChangesAnim&&(Et.anim=Et.nChanges===Et.nChangesAnim&&ht?"all":"some"),Et}(ce,be,We,nt,ct,yt.newDataRevision);if(he(ce)&&(yt.layoutReplot=!0),Ct.calc||yt.calc){ce.calcdata=void 0;for(var Dt=Object.getOwnPropertyNames(et),vt=0;vt<Dt.length;vt++){var mt=Dt[vt],Lt=mt.substring(0,5);if("xaxis"===Lt||"yaxis"===Lt){var Ft=et[mt]._emptyCategories;Ft&&Ft()}}}else a.supplyDefaultsUpdateCalc(ce.calcdata,We);var Rt=[];if(qe&&(ce._transitionData={},a.createTransitionData(ce),Rt.push(function(){return U.addFrames(ce,qe)})),et.transition&&!Ue&&(Ct.anim||yt.anim))yt.ticks&&Rt.push(_.doTicksRelayout),a.doCalcdata(ce),_.doAutoRangeAndConstraints(ce),Rt.push(function(){return a.transitionFromReact(ce,Ct,yt,Oe)});else if(Ct.fullReplot||yt.layoutReplot||Ue)ce._fullLayout._skipDefaults=!0,Rt.push(U._doPlot);else{for(var Wt in yt.arrays){var Ht=yt.arrays[Wt];if(Ht.length){var it=i.getComponentMethod(Wt,"drawOne");if(it!==k.noop)for(var st=0;st<Ht.length;st++)it(ce,Ht[st]);else{var Je=i.getComponentMethod(Wt,"draw");if(Je===k.noop)throw new Error("cannot draw components: "+Wt);Je(ce)}}}Rt.push(a.previousPromises),Ct.style&&Rt.push(_.doTraceStyle),(Ct.colorbars||yt.colorbars)&&Rt.push(_.doColorBars),yt.legend&&Rt.push(_.doLegend),yt.layoutstyle&&Rt.push(_.layoutStyles),yt.axrange&&ne(Rt),yt.ticks&&Rt.push(_.doTicksRelayout),yt.modebar&&Rt.push(_.doModeBar),yt.camera&&Rt.push(_.doCamera),Rt.push(m)}Rt.push(a.rehover,a.redrag,a.reselect),(Ke=k.syncOrAsync(Rt,ce))&&Ke.then||(Ke=Promise.resolve(ce))}else Ke=U.newPlot(ce,Ae,Ne,De);return Ke.then(function(){return ce.emit("plotly_react",{data:Ae,layout:Ne}),ce})},U.redraw=function(ce){if(ce=k.getGraphDiv(ce),!k.isPlotDiv(ce))throw new Error("This element is not a Plotly plot: "+ce);return p.cleanData(ce.data),p.cleanLayout(ce.layout),ce.calcdata=void 0,U._doPlot(ce).then(function(){return ce.emit("plotly_redraw"),ce})},U.relayout=ue,U.restyle=z,U.setPlotConfig=function(ce){return k.extendFlat(w,ce)},U.update=pe,U._guiRelayout=xe(ue),U._guiRestyle=xe(z),U._guiUpdate=xe(pe),U._storeDirectGUIEdit=function(ce,Ae,Ne){for(var De in Ne)H(De,T(ce,De).get(),Ne[De],Ae)}},72075:function(se){"use strict";var U={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},r={};(function I(C,f){for(var k in C){var T=C[k];T.valType?f[k]=T.dflt:(f[k]||(f[k]={}),I(T,f[k]))}})(U,r),se.exports={configAttributes:U,dfltConfig:r}},86281:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(9012),k=r(10820),T=r(31391),v=r(85594),c=r(72075).configAttributes,i=r(30962),s=C.extendDeepAll,a=C.isPlainObject,o=C.isArrayOrTypedArray,l=C.nestedProperty,u=C.valObjectMeta,d="_isSubplotObj",g="_isLinkedToArray",h="_deprecated",w=[d,g,"_arrayAttrRegexps",h];function y(m,D,S){if(!m)return!1;if(m._isLinkedToArray)if(p(D[S]))S++;else if(S<D.length)return!1;for(;S<D.length;S++){var O=m[D[S]];if(!a(O)||(m=O,S===D.length-1))break;if(m._isLinkedToArray){if(!p(D[++S]))return!1}else if("info_array"===m.valType){var P=D[++S];if(!p(P))return!1;var R=m.items;if(Array.isArray(R)){if(P>=R.length)return!1;if(2===m.dimensions){if(S++,D.length===S)return m;var F=D[S];if(!p(F))return!1;m=R[P][F]}else m=R[P]}else m=R}}return m}function p(m){return m===Math.round(m)&&m>=0}function _(){var m,D,S={};for(m in s(S,k),I.subplotsRegistry)if((D=I.subplotsRegistry[m]).layoutAttributes)if(Array.isArray(D.attr))for(var O=0;O<D.attr.length;O++)b(S,D,D.attr[O]);else b(S,D,"subplot"===D.attr?D.name:D.attr);for(m in I.componentsRegistry){var P=(D=I.componentsRegistry[m]).schema;if(P&&(P.subplots||P.layout)){var R=P.subplots;if(R&&R.xaxis&&!R.yaxis)for(var F in R.xaxis)delete S.yaxis[F];delete S.xaxis.shift,delete S.xaxis.autoshift}else"colorscale"===D.name?s(S,D.layoutAttributes):D.layoutAttributes&&M(S,D.layoutAttributes,D.name)}return{layoutAttributes:x(S)}}function x(m){return U.crawl(m,function(S,O,P){U.isValObject(S)?!0!==S.arrayOk&&"data_array"!==S.valType||(P[O+"src"]={valType:"string",editType:"none"}):a(S)&&(S.role="object")}),U.crawl(m,function(S,O,P){if(S){var R=S[g];R&&(delete S[g],P[O]={items:{}},P[O].items[R]=S,P[O].role="object")}}),function(D){!function S(O){for(var P in O)if(a(O[P]))S(O[P]);else if(Array.isArray(O[P]))for(var R=0;R<O[P].length;R++)S(O[P][R]);else O[P]instanceof RegExp&&(O[P]=O[P].toString())}(D)}(m),m}function b(m,D,S){var O=l(m,S),P=s({},D.layoutAttributes);P[d]=!0,O.set(P)}function M(m,D,S){var O=l(m,S);O.set(s(O.get()||{},D))}U.IS_SUBPLOT_OBJ=d,U.IS_LINKED_TO_ARRAY=g,U.DEPRECATED=h,U.UNDERSCORE_ATTRS=w,U.get=function(){var m={};I.allTypes.forEach(function(O){m[O]=function(P){var R,F;F=(R=I.modules[P]._module).basePlotModule;var B={type:null},J=s({},f),z=s({},R.attributes);U.crawl(z,function(H,X,K,ue,ae){l(J,ae).set(void 0),void 0===H&&l(z,ae).set(void 0)}),s(B,J),I.traceIs(P,"noOpacity")&&delete B.opacity,I.traceIs(P,"showLegend")||(delete B.showlegend,delete B.legendgroup),I.traceIs(P,"noHover")&&(delete B.hoverinfo,delete B.hoverlabel),R.selectPoints||delete B.selectedpoints,s(B,z),F.attributes&&s(B,F.attributes),B.type=P;var $={meta:R.meta||{},categories:R.categories||{},animatable:!!R.animatable,type:P,attributes:x(B)};if(R.layoutAttributes){var G={};s(G,R.layoutAttributes),$.layoutAttributes=x(G)}return R.animatable||U.crawl($,function(H){U.isValObject(H)&&"anim"in H&&delete H.anim}),$}(O)});var D,S={};return Object.keys(I.transformsRegistry).forEach(function(O){var P,F;S[O]=(F=s({},I.transformsRegistry[P=O].attributes),Object.keys(I.componentsRegistry).forEach(function(B){var J=I.componentsRegistry[B];J.schema&&J.schema.transforms&&J.schema.transforms[P]&&Object.keys(J.schema.transforms[P]).forEach(function(z){M(F,J.schema.transforms[P][z],z)})}),{attributes:x(F)})}),{defs:{valObjects:u,metaKeys:w.concat(["description","role","editType","impliedEdits"]),editType:{traces:i.traces,layout:i.layout},impliedEdits:{}},traces:m,layout:_(),transforms:S,frames:(D={frames:s({},T)},x(D),D.frames),animation:x(v),config:x(c)}},U.crawl=function(m,D,S,O){var P=S||0;O=O||"",Object.keys(m).forEach(function(R){var F=m[R];if(-1===w.indexOf(R)){var B=(O?O+".":"")+R;D(F,R,m,P,B),U.isValObject(F)||a(F)&&"impliedEdits"!==R&&U.crawl(F,D,P+1,B)}})},U.isValObject=function(m){return m&&void 0!==m.valType},U.findArrayAttributes=function(m){var D,S,O=[],P=[],R=[];function F(H,X,K,ue){P=P.slice(0,ue).concat([X]),R=R.slice(0,ue).concat([H&&H._isLinkedToArray]),H&&("data_array"===H.valType||!0===H.arrayOk)&&("colorbar"!==P[ue-1]||"ticktext"!==X&&"tickvals"!==X)&&B(D,0,"")}function B(H,X,K){var ue=H[P[X]],ae=K+P[X];if(X===P.length-1)o(ue)&&O.push(S+ae);else if(R[X]){if(Array.isArray(ue))for(var ne=0;ne<ue.length;ne++)a(ue[ne])&&B(ue[ne],X+1,ae+"["+ne+"].")}else a(ue)&&B(ue,X+1,ae+".")}D=m,S="",U.crawl(f,F),m._module&&m._module.attributes&&U.crawl(m._module.attributes,F);var J=m.transforms;if(J)for(var z=0;z<J.length;z++){var $=J[z],G=$._module;G&&(S="transforms["+z+"].",D=$,U.crawl(G.attributes,F))}return O},U.getTraceValObject=function(m,D){var S,O,P=D[0],R=1;if("transforms"===P){if(1===D.length)return f.transforms;var F=m.transforms;if(!Array.isArray(F)||!F.length)return!1;var B=D[1];if(!p(B)||B>=F.length)return!1;O=(S=(I.transformsRegistry[F[B].type]||{}).attributes)&&S[D[2]],R=3}else{var J=m._module;if(J||(J=(I.modules[m.type||f.type.dflt]||{})._module),!J)return!1;if(!(O=(S=J.attributes)&&S[P])){var z=J.basePlotModule;z&&z.attributes&&(O=z.attributes[P])}O||(O=f[P])}return y(O,D,R)},U.getLayoutValObject=function(m,D){return y(function(O,P){var R,F,B,J,z=O._basePlotModules;if(z){var $;for(R=0;R<z.length;R++){if((B=z[R]).attrRegex&&B.attrRegex.test(P)){if(B.layoutAttrOverrides)return B.layoutAttrOverrides;!$&&B.layoutAttributes&&($=B.layoutAttributes)}var G=B.baseLayoutAttrOverrides;if(G&&P in G)return G[P]}if($)return $}var H=O._modules;if(H)for(R=0;R<H.length;R++)if((J=H[R].layoutAttributes)&&P in J)return J[P];for(F in I.componentsRegistry){if("colorscale"===(B=I.componentsRegistry[F]).name&&0===P.indexOf("coloraxis"))return B.layoutAttributes[P];if(!B.schema&&P===B.name)return B.layoutAttributes}return P in k&&k[P]}(m,D[0]),D,1)}},44467:function(se,U,r){"use strict";var I=r(71828),C=r(9012),f="templateitemname",k={name:{valType:"string",editType:"none"}};function T(c){return c&&"string"==typeof c}function v(c){return"s"!==c.charAt(c.length-1)&&I.warn("bad argument to arrayDefaultKey: "+c),c.substr(0,c.length-1)+"defaults"}k[f]={valType:"string",editType:"calc"},U.templatedArray=function(c,i){return i._isLinkedToArray=c,i.name=k.name,i[f]=k[f],i},U.traceTemplater=function(c){var i,s,a={};for(i in c)s=c[i],Array.isArray(s)&&s.length&&(a[i]=0);return{newTrace:function(o){var l={type:i=I.coerce(o,{},C,"type"),_template:null};if(i in a){var u=a[i]%(s=c[i]).length;a[i]++,l._template=s[u]}return l}}},U.newContainer=function(c,i,s){var a=c._template,o=a&&(a[i]||s&&a[s]);return I.isPlainObject(o)||(o=null),c[i]={_template:o}},U.arrayTemplater=function(c,i,s){var a=c._template,o=a&&a[v(i)],l=a&&a[i];Array.isArray(l)&&l.length||(l=[]);var u={};return{newItem:function(d){var g={name:d.name,_input:d},h=g[f]=d[f];if(!T(h))return g._template=o,g;for(var w=0;w<l.length;w++){var y=l[w];if(y.name===h)return u[h]=1,g._template=y,g}return g[s]=d[s]||!1,g._template=!1,g},defaultItems:function(){for(var d=[],g=0;g<l.length;g++){var h=l[g],w=h.name;if(T(w)&&!u[w]){var y={_template:h,name:w,_input:{_templateitemname:w}};y[f]=h[f],d.push(y),u[w]=1}}return d}}},U.arrayDefaultKey=v,U.arrayEditor=function(c,i,s){var a=(I.nestedProperty(c,i).get()||[]).length,o=s._index,l=o>=a&&(s._input||{})._templateitemname;l&&(o=a);var u,d=i+"["+o+"]";function g(){u={},l&&(u[d]={},u[d][f]=l)}function h(y,p){l?I.nestedProperty(u[d],y).set(p):u[d+"."+y]=p}function w(){var y=u;return g(),y}return g(),{modifyBase:function(y,p){u[y]=p},modifyItem:h,getUpdateObj:w,applyUpdate:function(y,p){y&&h(y,p);var _=w();for(var x in _)I.nestedProperty(c,x).set(_[x])}}}},61549:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(74875),k=r(71828),T=r(63893),v=r(33306),c=r(7901),i=r(91424),s=r(92998),a=r(64168),o=r(89298),l=r(18783),u=r(99082),d=u.enforce,g=u.clean,h=r(71739).doAutoRange,w="start";function y(M,m,D){for(var S=0;S<D.length;S++){var O=D[S][0],P=D[S][1];if(!(O[0]>=M[1]||O[1]<=M[0])&&P[0]<m[1]&&P[1]>m[0])return!0}return!1}function p(M){var m,D,S,O,P,R,F=M._fullLayout,B=F._size,J=B.p,z=o.list(M,"",!0);if(F._paperdiv.style({width:M._context.responsive&&F.autosize&&!M._context._hasZeroWidth&&!M.layout.width?"100%":F.width+"px",height:M._context.responsive&&F.autosize&&!M._context._hasZeroHeight&&!M.layout.height?"100%":F.height+"px"}).selectAll(".main-svg").call(i.setSize,F.width,F.height),M._context.setBackground(M,F.paper_bgcolor),U.drawMainTitle(M),a.manage(M),!F._has("cartesian"))return f.previousPromises(M);function $(We,et,nt){var ct=We._lw/2;return"x"===We._id.charAt(0)?et?"top"===nt?et._offset-J-ct:et._offset+et._length+J+ct:B.t+B.h*(1-(We.position||0))+ct%1:et?"right"===nt?et._offset+et._length+J+ct:et._offset-J-ct:B.l+B.w*(We.position||0)+ct%1}for(m=0;m<z.length;m++){var G=(O=z[m])._anchorAxis;O._linepositions={},O._lw=i.crispRound(M,O.linewidth,1),O._mainLinePosition=$(O,G,O.side),O._mainMirrorPosition=O.mirror&&G?$(O,G,l.OPPOSITE_SIDE[O.side]):null}var H=[],X=[],K=[],ue=1===c.opacity(F.paper_bgcolor)&&1===c.opacity(F.plot_bgcolor)&&F.paper_bgcolor===F.plot_bgcolor;for(D in F._plots)if((S=F._plots[D]).mainplot)S.bg&&S.bg.remove(),S.bg=void 0;else{var ae=S.xaxis.domain,ne=S.yaxis.domain,Q=S.plotgroup;if(y(ae,ne,K)){var ie=Q.node(),le=S.bg=k.ensureSingle(Q,"rect","bg");ie.insertBefore(le.node(),ie.childNodes[0]),X.push(D)}else Q.select("rect.bg").remove(),K.push([ae,ne]),ue||(H.push(D),X.push(D))}var fe,he,pe,xe,Ee,Re,ke,Te,we,je,Ce,Ie,ge,me=F._bgLayer.selectAll(".bg").data(H);for(me.enter().append("rect").classed("bg",!0),me.exit().remove(),me.each(function(We){F._plots[We].bg=I.select(this)}),m=0;m<X.length;m++)P=(S=F._plots[X[m]]).xaxis,R=S.yaxis,S.bg&&void 0!==P._offset&&void 0!==R._offset&&S.bg.call(i.setRect,P._offset-J,R._offset-J,P._length+2*J,R._length+2*J).call(c.fill,F.plot_bgcolor).style("stroke-width",0);if(!F._hasOnlyLargeSploms)for(D in F._plots){P=(S=F._plots[D]).xaxis,R=S.yaxis;var ce,Ae,Ne=S.clipId="clip"+F._uid+D+"plot",De=k.ensureSingleById(F._clips,"clipPath",Ne,function(We){We.classed("plotclip",!0).append("rect")});S.clipRect=De.select("rect").attr({width:P._length,height:R._length}),i.setTranslate(S.plot,P._offset,R._offset),S._hasClipOnAxisFalse?(ce=null,Ae=Ne):(ce=Ne,Ae=null),i.setClipUrl(S.plot,ce,M),S.layerClipId=Ae}function qe(We){return"M"+fe+","+We+"H"+he}function Ke(We){return"M"+P._offset+","+We+"h"+P._length}function be(We){return"M"+We+","+Te+"V"+ke}function Oe(We){return void 0!==R._shift&&(We+=R._shift),"M"+We+","+R._offset+"v"+R._length}function Le(We,et,nt){if(!We.showline||D!==We._mainSubplot)return"";if(!We._anchorAxis)return nt(We._mainLinePosition);var ct=et(We._mainLinePosition);return We.mirror&&(ct+=et(We._mainMirrorPosition)),ct}for(D in F._plots){R=(S=F._plots[D]).yaxis;var Ue="M0,0";_(P=S.xaxis,D)&&(Ee=b(P,"left",R,z),fe=P._offset-(Ee?J+Ee:0),Re=b(P,"right",R,z),he=P._offset+P._length+(Re?J+Re:0),pe=$(P,R,"bottom"),xe=$(P,R,"top"),!(ge=!P._anchorAxis||D!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[D]=[pe,xe]),Ue=Le(P,qe,Ke),ge&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(Ue+=qe(pe)+qe(xe)),S.xlines.style("stroke-width",P._lw+"px").call(c.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),S.xlines.attr("d",Ue);var Ze="M0,0";_(R,D)&&(Ce=b(R,"bottom",P,z),ke=R._offset+R._length+(Ce?J:0),Ie=b(R,"top",P,z),Te=R._offset-(Ie?J:0),we=$(R,P,"left"),je=$(R,P,"right"),!(ge=!R._anchorAxis||D!==R._mainSubplot)||"allticks"!==R.mirror&&"all"!==R.mirror||(R._linepositions[D]=[we,je]),Ze=Le(R,be,Oe),ge&&R.showline&&("all"===R.mirror||"allticks"===R.mirror)&&(Ze+=be(we)+be(je)),S.ylines.style("stroke-width",R._lw+"px").call(c.stroke,R.showline?R.linecolor:"rgba(0,0,0,0)")),S.ylines.attr("d",Ze)}return o.makeClipPaths(M),f.previousPromises(M)}function _(M,m){return(M.ticks||M.showline)&&(m===M._mainSubplot||"all"===M.mirror||"allticks"===M.mirror)}function x(M,m,D){if(!D.showline||!D._lw)return!1;if("all"===D.mirror||"allticks"===D.mirror)return!0;var S=D._anchorAxis;if(!S)return!1;var O=l.FROM_BL[m];return D.side===m?S.domain[O]===M.domain[O]:D.mirror&&S.domain[1-O]===M.domain[1-O]}function b(M,m,D,S){if(x(M,m,D))return D._lw;for(var O=0;O<S.length;O++){var P=S[O];if(P._mainAxis===D._mainAxis&&x(M,m,P))return P._lw}return 0}U.layoutStyles=function(M){return k.syncOrAsync([f.doAutoMargin,p],M)},U.drawMainTitle=function(M){var m,G,H,D=M._fullLayout.title,S=M._fullLayout,O=(H="middle",k.isRightAnchor(G=S.title)?H="end":k.isLeftAnchor(G)&&(H=w),H),P=function($){var G=$.title,H="0em";return k.isTopAnchor(G)?H=l.CAP_SHIFT+"em":k.isMiddleAnchor(G)&&(H=l.MID_SHIFT+"em"),H}(S),R=function($,G){var H=$.title,X=$._size,K=0;return"0em"!==G&&G?G===l.CAP_SHIFT+"em"&&(K=H.pad.t):K=-H.pad.b,"auto"===H.y?X.t/2:"paper"===H.yref?X.t+X.h-X.h*H.y+K:$.height-$.height*H.y+K}(S,P),F=function($,G){var H=$.title,X=$._size,K=0;return G===w?K=H.pad.l:"end"===G&&(K=-H.pad.r),"paper"===H.xref?X.l+X.w*H.x+K:$.width*H.x+K}(S,O);if(s.draw(M,"gtitle",{propContainer:S,propName:"title.text",placeholder:S._dfltTitle.plot,attributes:{x:F,y:R,"text-anchor":O,dy:P}}),D.text&&D.automargin){var B=I.selectAll(".gtitle"),J=i.bBox(B.node()).height,z=function($,G,H){var ie,le,fe,he,pe,X=G.y,ue=X>.5?"t":"b",ne=0;return"paper"===G.yref?ne=H+G.pad.t+G.pad.b:"container"===G.yref&&(ie=X,fe=$._fullLayout.height,he=H,pe=0,"middle"===(le=G.yanchor)&&(pe+=he/2),"t"===ue?("top"===le&&(pe+=he),pe+=fe-ie*fe):("bottom"===le&&(pe+=he),pe+=ie*fe),ne=pe+G.pad.t+G.pad.b),ne>$._fullLayout.margin[ue]?ne:0}(M,D,J);z>0&&(function($,G,H,X){var ie,le,fe,he,pe,xe,Ee,Re,K="title.automargin",ue=$._fullLayout.title,ae=ue.y>.5?"t":"b",ne={x:ue.x,y:ue.y,t:0,b:0},Q={};"paper"===ue.yref&&(ie=$,fe=ae,he=G,pe=X,xe="paper"===(le=ue).yref?ie._fullLayout._size.h:ie._fullLayout.height,Ee=k.isTopAnchor(le)?he:he-pe,Re="b"===fe?xe-Ee:Ee,!(k.isTopAnchor(le)&&"t"===fe||k.isBottomAnchor(le)&&"b"===fe)&&Re<pe)?ne[ae]=H:"container"===ue.yref&&(Q[ae]=H,$._fullLayout._reservedMargin[K]=Q),f.allowAutoMargin($,K),f.autoMargin($,K,ne)}(M,R,z,J),B.attr({x:F,y:R,"text-anchor":O,dy:(m=D.yanchor,"top"===m?l.CAP_SHIFT+.3+"em":"bottom"===m?"-0.3em":l.MID_SHIFT+"em")}).call(T.positionText,F,R))}},U.doTraceStyle=function(M){var m,D=M.calcdata,S=[];for(m=0;m<D.length;m++){var O=D[m],P=O[0]||{},R=P.trace||{},F=R._module||{},B=F.arraysToCalcdata;B&&B(O,R);var J=F.editStyle;J&&S.push({fn:J,cd0:P})}if(S.length){for(m=0;m<S.length;m++){var z=S[m];z.fn(M,z.cd0)}v(M),U.redrawReglTraces(M)}return f.style(M),C.getComponentMethod("legend","draw")(M),f.previousPromises(M)},U.doColorBars=function(M){return C.getComponentMethod("colorbar","draw")(M),f.previousPromises(M)},U.layoutReplot=function(M){var m=M.layout;return M.layout=void 0,C.call("_doPlot",M,"",m)},U.doLegend=function(M){return C.getComponentMethod("legend","draw")(M),f.previousPromises(M)},U.doTicksRelayout=function(M){return o.draw(M,"redraw"),M._fullLayout._hasOnlyLargeSploms&&(C.subplotsRegistry.splom.updateGrid(M),v(M),U.redrawReglTraces(M)),U.drawMainTitle(M),f.previousPromises(M)},U.doModeBar=function(M){var m=M._fullLayout;a.manage(M);for(var D=0;D<m._basePlotModules.length;D++){var S=m._basePlotModules[D].updateFx;S&&S(M)}return f.previousPromises(M)},U.doCamera=function(M){for(var m=M._fullLayout,D=m._subplots.gl3d,S=0;S<D.length;S++){var O=m[D[S]];O._scene.setViewport(O)}},U.drawData=function(M){var m=M._fullLayout;v(M);for(var D=m._basePlotModules,S=0;S<D.length;S++)D[S].plot(M);return U.redrawReglTraces(M),f.style(M),C.getComponentMethod("selections","draw")(M),C.getComponentMethod("shapes","draw")(M),C.getComponentMethod("annotations","draw")(M),C.getComponentMethod("images","draw")(M),m._replotting=!1,f.previousPromises(M)},U.redrawReglTraces=function(M){var m=M._fullLayout;if(m._has("regl")){var D,S,O=M._fullData,P=[],R=[];for(m._hasOnlyLargeSploms&&m._splomGrid.draw(),D=0;D<O.length;D++){var F=O[D];!0===F.visible&&0!==F._length&&("splom"===F.type?m._splomScenes[F.uid].draw():"scattergl"===F.type?k.pushUnique(P,F.xaxis+F.yaxis):"scatterpolargl"===F.type&&k.pushUnique(R,F.subplot))}for(D=0;D<P.length;D++)(S=m._plots[P[D]])._scene&&S._scene.draw();for(D=0;D<R.length;D++)(S=m[R[D]]._subplot)._scene&&S._scene.draw()}},U.doAutoRangeAndConstraints=function(M){for(var m,D=o.list(M,"",!0),S={},O=0;O<D.length;O++)if(!S[(m=D[O])._id]){S[m._id]=1,g(M,m),h(M,m);var P=m._matchGroup;if(P)for(var R in P){var F=o.getFromId(M,R);h(M,F,m.range),S[R]=1}}d(M)},U.finalDraw=function(M){C.getComponentMethod("rangeslider","draw")(M),C.getComponentMethod("rangeselector","draw")(M)},U.drawMarginPushers=function(M){C.getComponentMethod("legend","draw")(M),C.getComponentMethod("rangeselector","draw")(M),C.getComponentMethod("sliders","draw")(M),C.getComponentMethod("updatemenus","draw")(M),C.getComponentMethod("colorbar","draw")(M)}},96318:function(se,U,r){"use strict";var I=r(71828),C=I.isPlainObject,f=r(86281),k=r(74875),T=r(9012),v=r(44467),c=r(72075).dfltConfig;function i(h,w){h=I.extendDeep({},h);var y,p,_=Object.keys(h).sort();function x(S,O,P){if(C(O)&&C(S))i(S,O);else if(Array.isArray(O)&&Array.isArray(S)){var R=v.arrayTemplater({_template:h},P);for(p=0;p<O.length;p++){var F=O[p],B=R.newItem(F)._template;B&&i(B,F)}var J=R.defaultItems();for(p=0;p<J.length;p++)O.push(J[p]._template);for(p=0;p<O.length;p++)delete O[p].templateitemname}}for(y=0;y<_.length;y++){var b=_[y],M=h[b];if(b in w?x(M,w[b],b):w[b]=M,s(b)===b)for(var m in w){var D=s(m);m===D||D!==b||m in h||x(M,w[m],b)}}}function s(h){return h.replace(/[0-9]+$/,"")}function a(h,w,y,p,_){var x=_&&y(_);for(var b in h){var M=h[b],m=u(h,b,p),D=u(h,b,_),S=y(D);if(!S){var O=s(b);O!==b&&(S=y(D=u(h,O,_)))}if(!(x&&x===S||!S||S._noTemplating||"data_array"===S.valType||S.arrayOk&&Array.isArray(M)))if(!S.valType&&C(M))a(M,w,y,m,D);else if(S._isLinkedToArray&&Array.isArray(M))for(var P=!1,R=0,F={},B=0;B<M.length;B++){var J=M[B];if(C(J)){var z=J.name;if(z)F[z]||(a(J,w,y,u(M,R,m),u(M,R,D)),R++,F[z]=1);else if(!P){var $=u(h,v.arrayDefaultKey(b),p),G=u(M,R,m);a(J,w,y,G,u(M,R,D));var H=I.nestedProperty(w,G);I.nestedProperty(w,$).set(H.get()),H.set(null),P=!0}}}else I.nestedProperty(w,m).set(M)}}function o(h,w){return f.getLayoutValObject(h,I.nestedProperty({},w).parts)}function l(h,w){return f.getTraceValObject(h,I.nestedProperty({},w).parts)}function u(h,w,y){return y?Array.isArray(h)?y+"["+w+"]":y+"."+w:w}function d(h){for(var w=0;w<h.length;w++)if(C(h[w]))return!0}function g(h){var w;switch(h.code){case"data":w="The template has no key data.";break;case"layout":w="The template has no key layout.";break;case"missing":w=h.path?"There are no templates for item "+h.path+" with name "+h.templateitemname:"There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":w=h.path?"The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?"Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":"The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":w="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type."}return h.msg=w,h}U.makeTemplate=function(h){h=I.isPlainObject(h)?h:I.getGraphDiv(h),h=I.extendDeep({_context:c},{data:h.data,layout:h.layout}),k.supplyDefaults(h);var w=h.data||[],y=h.layout||{};y._basePlotModules=h._fullLayout._basePlotModules,y._modules=h._fullLayout._modules;var p={data:{},layout:{}};w.forEach(function(R){var F={};a(R,F,l.bind(null,R));var B=I.coerce(R,{},T,"type"),J=p.data[B];J||(J=p.data[B]=[]),J.push(F)}),a(y,p.layout,o.bind(null,y)),delete p.layout.template;var _=y.template;if(C(_)){var x,b,M,m,D,S,O=_.layout;C(O)&&i(O,p.layout);var P=_.data;if(C(P)){for(b in p.data)if(M=P[b],Array.isArray(M)){for(S=(D=p.data[b]).length,m=M.length,x=0;x<S;x++)i(M[x%m],D[x]);for(x=S;x<m;x++)D.push(I.extendDeep({},M[x]))}for(b in P)b in p.data||(p.data[b]=I.extendDeep([],P[b]))}}return p},U.validateTemplate=function(h,w){var y=I.extendDeep({},{_context:c,data:h.data,layout:h.layout}),p=y.layout||{};C(w)||(w=p.template||{});var _=w.layout,x=w.data,b=[];y.layout=p,y.layout.template=w,k.supplyDefaults(y);var M=y._fullLayout,m=y._fullData,D={};if(C(_)?(function J(z,$){for(var G in z)if("_"!==G.charAt(0)&&C(z[G])){var H,X=s(G),K=[];for(H=0;H<$.length;H++)K.push(u(z,G,$[H])),X!==G&&K.push(u(z,X,$[H]));for(H=0;H<K.length;H++)D[K[H]]=1;J(z[G],K)}}(M,["layout"]),function J(z,$){for(var G in z)if(-1===G.indexOf("defaults")&&C(z[G])){var H=u(z,G,$);D[H]?J(z[G],H):b.push({code:"unused",path:H})}}(_,"layout")):b.push({code:"layout"}),C(x)){for(var S,O={},P=0;P<m.length;P++){var R=m[P];O[S=R.type]=(O[S]||0)+1,R._fullInput._template||b.push({code:"missing",index:R._fullInput.index,traceType:S})}for(S in x){var F=x[S].length,B=O[S]||0;F>B?b.push({code:"unused",traceType:S,templateCount:F,dataCount:B}):B>F&&b.push({code:"reused",traceType:S,templateCount:F,dataCount:B})}}else b.push({code:"data"});if(function J(z,$){for(var G in z)if("_"!==G.charAt(0)){var H=z[G],X=u(z,G,$);C(H)?(Array.isArray(z)&&!1===H._template&&H.templateitemname&&b.push({code:"missing",path:X,templateitemname:H.templateitemname}),J(H,X)):Array.isArray(H)&&d(H)&&J(H,X)}}({data:m,layout:M},""),b.length)return b.map(g)}},403:function(se,U,r){"use strict";var I=r(92770),C=r(72391),f=r(74875),k=r(71828),T=r(25095),v=r(5900),c=r(70942),i=r(11506).version,s={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};se.exports=function(a,o){var l,u,d,g;function h(B){return!(B in o)||k.validate(o[B],s[B])}if(o=o||{},k.isPlainObject(a)?(l=a.data||[],u=a.layout||{},d=a.config||{},g={}):(a=k.getGraphDiv(a),l=k.extendDeep([],a.data),u=k.extendDeep({},a.layout),d=a._context,g=a._fullLayout||{}),!h("width")&&null!==o.width||!h("height")&&null!==o.height)throw new Error("Height and width should be pixel values.");if(!h("format"))throw new Error("Export format is not "+k.join2(s.format.values,", "," or ")+".");var w={};function y(B,J){return k.coerce(o,w,s,B,J)}var p=y("format"),_=y("width"),x=y("height"),b=y("scale"),M=y("setBackground"),m=y("imageDataOnly"),D=document.createElement("div");D.style.position="absolute",D.style.left="-5000px",document.body.appendChild(D);var S=k.extendFlat({},u);_?S.width=_:null===o.width&&I(g.width)&&(S.width=g.width),x?S.height=x:null===o.height&&I(g.height)&&(S.height=g.height);var O=k.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:M}),P=T.getRedrawFunc(D);function R(){return new Promise(function(B){setTimeout(B,T.getDelay(D._fullLayout))})}function F(){return new Promise(function(B,J){var z=v(D,p,b),$=D._fullLayout.width,G=D._fullLayout.height;function H(){C.purge(D),document.body.removeChild(D)}if("full-json"===p){var X=f.graphJson(D,!1,"keepdata","object",!0,!0);return X.version=i,X=JSON.stringify(X),H(),B(m?X:T.encodeJSON(X))}if(H(),"svg"===p)return B(m?z:T.encodeSVG(z));var K=document.createElement("canvas");K.id=k.randstr(),c({format:p,width:$,height:G,scale:b,canvas:K,svg:z,promise:!0}).then(B).catch(J)})}return new Promise(function(B,J){C.newPlot(D,l,S,O).then(P).then(R).then(F).then(function(z){var $;B(($=z,m?$.replace(T.IMAGE_URL_PREFIX,""):$))}).catch(function(z){J(z)})})}},84936:function(se,U,r){"use strict";var I=r(71828),C=r(74875),f=r(86281),k=r(72075).dfltConfig,T=I.isPlainObject,v=Array.isArray,c=I.isArrayOrTypedArray;function i(h,w,y,p,_,x){x=x||[];for(var b=Object.keys(h),M=0;M<b.length;M++){var m=b[M];if("transforms"!==m){var D=x.slice();D.push(m);var S=h[m],O=w[m],P=u(y,m),R=(P||{}).valType,F="info_array"===R,B="colorscale"===R,J=(P||{}).items;if(l(y,m))if(T(S)&&T(O)&&"any"!==R)i(S,O,P,p,_,D);else if(F&&v(S)){S.length>O.length&&p.push(o("unused",_,D.concat(O.length)));var z,$,H,X,K=O.length,ue=Array.isArray(J);if(ue&&(K=Math.min(K,J.length)),2===P.dimensions)for($=0;$<K;$++)if(v(S[$])){S[$].length>O[$].length&&p.push(o("unused",_,D.concat($,O[$].length)));var ae=O[$].length;for(z=0;z<(ue?Math.min(ae,J[$].length):ae);z++)X=O[$][z],I.validate(H=S[$][z],ue?J[$][z]:J)?X!==H&&X!==+H&&p.push(o("dynamic",_,D.concat($,z),H,X)):p.push(o("value",_,D.concat($,z),H))}else p.push(o("array",_,D.concat($),S[$]));else for($=0;$<K;$++)X=O[$],I.validate(H=S[$],ue?J[$]:J)?X!==H&&X!==+H&&p.push(o("dynamic",_,D.concat($),H,X)):p.push(o("value",_,D.concat($),H))}else if(P.items&&!F&&v(S)){var ne,Q,ie=J[Object.keys(J)[0]],le=[];for(ne=0;ne<O.length;ne++){var fe=O[ne]._index||ne;if((Q=D.slice()).push(fe),T(S[fe])&&T(O[ne])){le.push(fe);var he=S[fe],pe=O[ne];T(he)&&!1!==he.visible&&!1===pe.visible?p.push(o("invisible",_,Q)):i(he,pe,ie,p,_,Q)}}for(ne=0;ne<S.length;ne++)(Q=D.slice()).push(ne),T(S[ne])?-1===le.indexOf(ne)&&p.push(o("unused",_,Q)):p.push(o("object",_,Q,S[ne]))}else!T(S)&&T(O)?p.push(o("object",_,D,S)):c(S)||!c(O)||F||B?m in w?I.validate(S,P)?"enumerated"===P.valType&&(P.coerceNumber&&S!==+O||S!==O)&&p.push(o("dynamic",_,D,S,O)):p.push(o("value",_,D,S)):p.push(o("unused",_,D,S)):p.push(o("array",_,D,S));else p.push(o("schema",_,D))}}return p}se.exports=function(h,w){void 0===h&&(h=[]),void 0===w&&(w={});var y,p,_=f.get(),x=[],b={_context:I.extendFlat({},k)};v(h)?(b.data=I.extendDeep([],h),y=h):(b.data=[],y=[],x.push(o("array","data"))),T(w)?(b.layout=I.extendDeep({},w),p=w):(b.layout={},p={},arguments.length>1&&x.push(o("object","layout"))),C.supplyDefaults(b);for(var M=b._fullData,m=y.length,D=0;D<m;D++){var S=y[D],O=["data",D];if(T(S)){var P=M[D],R=P.type,F=_.traces[R].attributes;F.type={valType:"enumerated",values:[R]},!1===P.visible&&!1!==S.visible&&x.push(o("invisible",O)),i(S,P,F,x,O);var B=S.transforms,J=P.transforms;if(B){v(B)||x.push(o("array",O,["transforms"])),O.push("transforms");for(var z=0;z<B.length;z++){var $=["transforms",z],G=B[z].type;if(T(B[z])){var H=_.transforms[G]?_.transforms[G].attributes:{};H.type={valType:"enumerated",values:Object.keys(_.transforms)},i(B[z],J[z],H,x,O,$)}else x.push(o("object",O,$))}}}else x.push(o("object",O))}return i(p,b._fullLayout,function(ue,ae){for(var ne=ue.layout.layoutAttributes,Q=0;Q<ae.length;Q++){var ie=ae[Q],le=ue.traces[ie.type],fe=le.layoutAttributes;fe&&I.extendFlat(ie.subplot?ne[le.attributes.subplot.dflt]:ne,fe)}return ne}(_,M),x,"layout"),0===x.length?void 0:x};var s={object:function(h,w){return("layout"===h&&""===w?"The layout argument":"data"===h[0]&&""===w?"Trace "+h[1]+" in the data argument":a(h)+"key "+w)+" must be linked to an object container"},array:function(h,w){return("data"===h?"The data argument":a(h)+"key "+w)+" must be linked to an array container"},schema:function(h,w){return a(h)+"key "+w+" is not part of the schema"},unused:function(h,w,y){var p=T(y)?"container":"key";return a(h)+p+" "+w+" did not get coerced"},dynamic:function(h,w,y,p){return[a(h)+"key",w,"(set to '"+y+"')","got reset to","'"+p+"'","during defaults."].join(" ")},invisible:function(h,w){return(w?a(h)+"item "+w:"Trace "+h[1])+" got defaulted to be not visible"},value:function(h,w,y){return[a(h)+"key "+w,"is set to an invalid value ("+y+")"].join(" ")}};function a(h){return v(h)?"In data trace "+h[1]+", ":"In "+h+", "}function o(h,w,y,p,_){var x,b;y=y||"",v(w)?(x=w[0],b=w[1]):(x=w,b=null);var M=function(D){if(!v(D))return String(D);for(var S="",O=0;O<D.length;O++){var P=D[O];"number"==typeof P?S=S.substr(0,S.length-1)+"["+P+"]":S+=P,O<D.length-1&&(S+=".")}return S}(y),m=s[h](w,M,p,_);return I.log(m),{code:h,container:x,trace:b,path:y,astr:M,msg:m}}function l(h,w){var y=g(w),p=y.keyMinusId;return!!(p in h&&h[p]._isSubplotObj&&y.id)||w in h}function u(h,w){return w in h?h[w]:h[g(w).keyMinusId]}var d=I.counterRegex("([a-z]+)");function g(h){var w=h.match(d);return{keyMinusId:w&&w[1],id:w&&w[2]}}},85594:function(se){"use strict";se.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function(se,U,r){"use strict";var I=r(71828),C=r(44467);se.exports=function(f,k,T){var v,c,i=T.name,s=T.inclusionAttr||"visible",a=k[i],o=I.isArrayOrTypedArray(f[i])?f[i]:[],l=k[i]=[],u=C.arrayTemplater(k,i,s);for(v=0;v<o.length;v++){var d=o[v];I.isPlainObject(d)?c=u.newItem(d):(c=u.newItem({}))[s]=!1,c._index=v,!1!==c[s]&&T.handleItemDefaults(d,c,k,T),l.push(c)}var g=u.defaultItems();for(v=0;v<g.length;v++)(c=g[v])._index=l.length,T.handleItemDefaults({},c,k,T,{}),l.push(c);if(I.isArrayOrTypedArray(a)){var h=Math.min(a.length,l.length);for(v=0;v<h;v++)I.relinkPrivateKeys(l[v],a[v])}return l}},9012:function(se,U,r){"use strict";var I=r(41940),C=r(77914);se.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:I({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:C.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=C.dateTime2ms,k=C.incrementMonth,T=r(50606).ONEAVGMONTH;se.exports=function(v,c,i,s){if("date"!==c.type)return{vals:s};var a=v[i+"periodalignment"];if(!a)return{vals:s};var o,l=v[i+"period"];if(I(l)){if((l=+l)<=0)return{vals:s}}else if("string"==typeof l&&"M"===l.charAt(0)){var u=+l.substring(1);if(!(u>0&&Math.round(u)===u))return{vals:s};o=u}for(var d=c.calendar,g="start"===a,h="end"===a,y=f(v[i+"period0"],d)||0,p=[],_=[],x=[],b=s.length,M=0;M<b;M++){var m,D,S,O=s[M];if(o){for(m=Math.round((O-y)/(o*T)),S=k(y,o*m,d);S>O;)S=k(S,-o,d);for(;S<=O;)S=k(S,o,d);D=k(S,-o,d)}else{for(S=y+(m=Math.round((O-y)/l))*l;S>O;)S-=l;for(;S<=O;)S+=l;D=S-l}p[M]=g?D:h?S:(D+S)/2,_[M]=D,x[M]=S}return{vals:p,starts:_,ends:x}}},89502:function(se){"use strict";se.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(71828),k=r(50606).FP_SAFE,T=r(73972),v=r(91424),c=r(41675),i=c.getFromId,s=c.isLinked;function a(x,b){var M,m,D=[],S=x._fullLayout,O=l(S,b,0),P=l(S,b,1),R=d(x,b),F=R.min,B=R.max;if(0===F.length||0===B.length)return f.simpleMap(b.range,b.r2l);var J=F[0].val,z=B[0].val;for(M=1;M<F.length&&J===z;M++)J=Math.min(J,F[M].val);for(M=1;M<B.length&&J===z;M++)z=Math.max(z,B[M].val);var $=!1;if(b.range){var G=f.simpleMap(b.range,b.r2l);$=G[1]<G[0]}"reversed"===b.autorange&&($=!0,b.autorange=!0);var H,X,K,ue,ae,ne,Q=b.rangemode,ie="tozero"===Q,le="nonnegative"===Q,fe=b._length,he=fe/10,pe=0;for(M=0;M<F.length;M++)for(H=F[M],m=0;m<B.length;m++)(ne=(X=B[m]).val-H.val-o(b,H.val,X.val))>0&&((ae=fe-O(H)-P(X))>he?ne/ae>pe&&(K=H,ue=X,pe=ne/ae):ne/fe>pe&&(K={val:H.val,nopad:1},ue={val:X.val,nopad:1},pe=ne/fe));if(J===z){var xe=J-1,Ee=J+1;if(ie)if(0===J)D=[0,1];else{var Re=(J>0?B:F).reduce(function(Te,we){return Math.max(Te,P(we))},0),ke=J/(1-Math.min(.5,Re/fe));D=J>0?[0,ke]:[ke,0]}else D=le?[Math.max(0,xe),Math.max(1,Ee)]:[xe,Ee]}else ie?(K.val>=0&&(K={val:0,nopad:1}),ue.val<=0&&(ue={val:0,nopad:1})):le&&(K.val-pe*O(K)<0&&(K={val:0,nopad:1}),ue.val<=0&&(ue={val:1,nopad:1})),pe=(ue.val-K.val-o(b,H.val,X.val))/(fe-O(K)-P(ue)),D=[K.val-pe*O(K),ue.val+pe*P(ue)];return $&&D.reverse(),f.simpleMap(D,b.l2r||Number)}function o(x,b,M){var m=0;if(x.rangebreaks)for(var D=x.locateBreaks(b,M),S=0;S<D.length;S++){var O=D[S];m+=O.max-O.min}return m}function l(x,b,M){var m=.05*b._length,D=b._anchorAxis||{};if(-1!==(b.ticklabelposition||"").indexOf("inside")||-1!==(D.ticklabelposition||"").indexOf("inside")){var S="reversed"===b.autorange;if(!S){var O=f.simpleMap(b.range,b.r2l);S=O[1]<O[0]}S&&(M=!M)}var P=0;return s(x,b._id)||(P=function(R,F,B){var J=0,z="x"===F._id.charAt(0);for(var $ in R._plots){var G=R._plots[$];if(F._id===G.xaxis._id||F._id===G.yaxis._id){var H=(z?G.yaxis:G.xaxis)||{};if(-1!==(H.ticklabelposition||"").indexOf("inside")&&(!B&&("left"===H.side||"bottom"===H.side)||B&&("top"===H.side||"right"===H.side))){if(H._vals){var X=f.deg2rad(H._tickAngles[H._id+"tick"]||0),K=Math.abs(Math.cos(X)),ue=Math.abs(Math.sin(X));H._vals[0].bb||H._selections[H._id+"tick"].each(function(fe){var he=I.select(this);he.select(".text-math-group").empty()&&(fe.bb=v.bBox(he.node()))});for(var ne=0;ne<H._vals.length;ne++){var Q=H._vals[ne].bb;if(Q){var ie=2*u+Q.width,le=2*u+Q.height;J=Math.max(J,z?Math.max(ie*K,le*ue):Math.max(le*K,ie*ue))}}}"inside"===H.ticks&&"inside"===H.ticklabelposition&&(J+=H.ticklen||0)}}}return J}(x,b,M)),m=Math.max(P,m),"domain"===b.constrain&&b._inputDomain&&(m*=(b._inputDomain[1]-b._inputDomain[0])/(b.domain[1]-b.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?m:P)}}se.exports={getAutoRange:a,makePadFn:l,doAutoRange:function(x,b,M){if(b.setScale(),b.autorange){b.range=M?M.slice():a(x,b),b._r=b.range.slice(),b._rl=f.simpleMap(b._r,b.r2l);var m=b._input,D={};D[b._attr+".range"]=b.range,D[b._attr+".autorange"]=b.autorange,T.call("_storeDirectGUIEdit",x.layout,x._fullLayout._preGUI,D),m.range=b.range.slice(),m.autorange=b.autorange}var S=b._anchorAxis;if(S&&S.rangeslider){var O=S.rangeslider[b._name];O&&"auto"===O.rangemode&&(O.range=a(x,b)),S._input.rangeslider[b._name]=f.extendFlat({},O)}},findExtremes:function(x,b,M){M||(M={}),x._m||x.setScale();var m,D,S,O,P,R,F,B,J,z=[],$=[],G=b.length,H=M.padded||!1,X=M.tozero&&("linear"===x.type||"-"===x.type),K="log"===x.type,ue=!1,ae=M.vpadLinearized||!1;function ne(Ee){if(Array.isArray(Ee))return ue=!0,function(ke){return Math.max(Number(Ee[ke]||0),0)};var Re=Math.max(Number(Ee||0),0);return function(){return Re}}var Q=ne((x._m>0?M.ppadplus:M.ppadminus)||M.ppad||0),ie=ne((x._m>0?M.ppadminus:M.ppadplus)||M.ppad||0),le=ne(M.vpadplus||M.vpad),fe=ne(M.vpadminus||M.vpad);if(!ue){if(B=1/0,J=-1/0,K)for(m=0;m<G;m++)(D=b[m])<B&&D>0&&(B=D),D>J&&D<k&&(J=D);else for(m=0;m<G;m++)(D=b[m])<B&&D>-k&&(B=D),D>J&&D<k&&(J=D);b=[B,J],G=2}var he={tozero:X,extrapad:H};function pe(Ee){C(S=b[Ee])&&(R=Q(Ee),F=ie(Ee),ae?(O=x.c2l(S)-fe(Ee),P=x.c2l(S)+le(Ee)):(B=S-fe(Ee),J=S+le(Ee),K&&B<J/10&&(B=J/10),O=x.c2l(B),P=x.c2l(J)),X&&(O=Math.min(0,O),P=Math.max(0,P)),y(O)&&g(z,O,F,he),y(P)&&h($,P,R,he))}var xe=Math.min(6,G);for(m=0;m<xe;m++)pe(m);for(m=G-1;m>=xe;m--)pe(m);return{min:z,max:$,opts:M}},concatExtremes:d};var u=3;function d(x,b,M){var m,D,S,O=b._id,R=x._fullLayout,F=[],B=[];function J(X,K){for(m=0;m<K.length;m++){var ue=X[K[m]],ae=(ue._extremes||{})[O];if(!0===ue.visible&&ae){for(D=0;D<ae.min.length;D++)g(F,(S=ae.min[D]).val,S.pad,{extrapad:S.extrapad});for(D=0;D<ae.max.length;D++)h(B,(S=ae.max[D]).val,S.pad,{extrapad:S.extrapad})}}}if(J(x._fullData,b._traceIndices),J(R.annotations||[],b._annIndices||[]),J(R.shapes||[],b._shapeIndices||[]),b._matchGroup&&!M)for(var z in b._matchGroup)if(z!==b._id){var $=i(x,z),G=d(x,$,!0),H=b._length/$._length;for(D=0;D<G.min.length;D++)g(F,(S=G.min[D]).val,S.pad*H,{extrapad:S.extrapad});for(D=0;D<G.max.length;D++)h(B,(S=G.max[D]).val,S.pad*H,{extrapad:S.extrapad})}return{min:F,max:B}}function g(x,b,M,m){w(x,b,M,m,p)}function h(x,b,M,m){w(x,b,M,m,_)}function w(x,b,M,m,D){for(var S=m.tozero,O=m.extrapad,P=!0,R=0;R<x.length&&P;R++){var F=x[R];if(D(F.val,b)&&F.pad>=M&&(F.extrapad||!O)){P=!1;break}D(b,F.val)&&F.pad<=M&&(O||!F.extrapad)&&(x.splice(R,1),R--)}if(P){var B=S&&0===b;x.push({val:b,pad:B?0:M,extrapad:!B&&O})}}function y(x){return C(x)&&Math.abs(x)<k}function p(x,b){return x<=b}function _(x,b){return x>=b}},89298:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(74875),k=r(73972),T=r(71828),v=T.strTranslate,c=r(63893),i=r(92998),s=r(7901),a=r(91424),o=r(13838),l=r(66287),u=r(50606),d=u.ONEMAXYEAR,g=u.ONEAVGYEAR,h=u.ONEMINYEAR,w=u.ONEMAXQUARTER,y=u.ONEAVGQUARTER,p=u.ONEMINQUARTER,_=u.ONEMAXMONTH,x=u.ONEAVGMONTH,b=u.ONEMINMONTH,M=u.ONEWEEK,m=u.ONEDAY,D=m/2,S=u.ONEHOUR,O=u.ONEMIN,P=u.ONESEC,R=u.MINUS_SIGN,F=u.BADNUM,B={K:"zeroline"},J={K:"gridline",L:"path"},z={K:"minor-gridline",L:"path"},$={K:"tick",L:"path"},G={K:"tick",L:"text"},H={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},X=r(18783),K=X.MID_SHIFT,ue=X.CAP_SHIFT,ae=X.LINE_SPACING,ne=X.OPPOSITE_SIDE,Q=se.exports={};Q.setConvert=r(21994);var ie=r(4322),le=r(41675),fe=le.idSort,he=le.isLinked;Q.id2name=le.id2name,Q.name2id=le.name2id,Q.cleanId=le.cleanId,Q.list=le.list,Q.listIds=le.listIds,Q.getFromId=le.getFromId,Q.getFromTrace=le.getFromTrace;var pe=r(71739);Q.getAutoRange=pe.getAutoRange,Q.findExtremes=pe.findExtremes;var xe=1e-4;function Ee(He){var Ge=(He[1]-He[0])*xe;return[He[0]-Ge,He[1]+Ge]}Q.coerceRef=function(He,Ge,dt,ht,kt,St){var Et=ht.charAt(ht.length-1),wt=dt._fullLayout._subplots[Et+"axis"],Nt=ht+"ref",_t={};return kt||(kt=wt[0]||("string"==typeof St?St:St[0])),St||(St=kt),wt=wt.concat(wt.map(function(Mt){return Mt+" domain"})),_t[Nt]={valType:"enumerated",values:wt.concat(St?"string"==typeof St?[St]:St:[]),dflt:kt},T.coerce(He,Ge,_t,Nt)},Q.getRefType=function(He){return void 0===He?He:"paper"===He?"paper":"pixel"===He?"pixel":/( domain)$/.test(He)?"domain":"range"},Q.coercePosition=function(He,Ge,dt,ht,kt,St){var Et,wt;if("range"!==Q.getRefType(ht))Et=T.ensureNumber,wt=dt(kt,St);else{var Nt=Q.getFromId(Ge,ht);wt=dt(kt,St=Nt.fraction2r(St)),Et=Nt.cleanPos}He[kt]=Et(wt)},Q.cleanPosition=function(He,Ge,dt){return("paper"===dt||"pixel"===dt?T.ensureNumber:Q.getFromId(Ge,dt).cleanPos)(He)},Q.redrawComponents=function(He,Ge){Ge=Ge||Q.listIds(He);var dt=He._fullLayout;function ht(kt,St,Et,wt){for(var Nt=k.getComponentMethod(kt,St),_t={},Mt=0;Mt<Ge.length;Mt++)for(var Pt=dt[Q.id2name(Ge[Mt])][Et],Zt=0;Zt<Pt.length;Zt++){var $t=Pt[Zt];if(!_t[$t]&&(Nt(He,$t),_t[$t]=1,wt))return}}ht("annotations","drawOne","_annIndices"),ht("shapes","drawOne","_shapeIndices"),ht("images","draw","_imgIndices",!0),ht("selections","drawOne","_selectionIndices")};var Re=Q.getDataConversions=function(He,Ge,dt,ht){var kt,St="x"===dt||"y"===dt||"z"===dt?dt:ht;if(Array.isArray(St)){if(kt={type:ie(ht,void 0,{autotypenumbers:He._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(kt),"category"===kt.type)for(var Et=0;Et<ht.length;Et++)kt.d2c(ht[Et])}else kt=Q.getFromTrace(He,Ge,St);return kt?{d2c:kt.d2c,c2d:kt.c2d}:"ids"===St?{d2c:Te,c2d:Te}:{d2c:ke,c2d:ke}};function ke(He){return+He}function Te(He){return String(He)}function we(He,Ge){return Math.abs((He/Ge+.5)%1-.5)<.001}function je(He,Ge){return Math.abs(He/Ge-1)<.001}function Ce(He){return+He.substring(1)}function Ie(He,Ge){return He.rangebreaks&&(Ge=Ge.filter(function(dt){return He.maskBreaks(dt.x)!==F})),Ge}function ge(He){var Ge=He._mainAxis,dt=[];if(Ge._vals)for(var ht=0;ht<Ge._vals.length;ht++)if(!Ge._vals[ht].noTick){var kt=Ge.l2p(Ge._vals[ht].x),St=He.p2l(kt),Et=Q.tickText(He,St);Ge._vals[ht].minor&&(Et.minor=!0,Et.text=""),dt.push(Et)}return Ie(He,dt)}function me(He){var Ge=Ee(T.simpleMap(He.range,He.r2l)),dt=Math.min(Ge[0],Ge[1]),ht=Math.max(Ge[0],Ge[1]),kt="category"===He.type?He.d2l_noadd:He.d2l;"log"===He.type&&"L"!==String(He.dtick).charAt(0)&&(He.dtick="L"+Math.pow(10,Math.floor(Math.min(He.range[0],He.range[1]))-1));for(var St=[],Et=0;Et<=1;Et++)if(!Et||He.minor){var wt=Et?He.minor.tickvals:He.tickvals,Nt=Et?[]:He.ticktext;if(wt){Array.isArray(Nt)||(Nt=[]);for(var _t=0;_t<wt.length;_t++){var Mt=kt(wt[_t]);if(Mt>dt&&Mt<ht){var Pt=void 0===Nt[_t]?Q.tickText(He,Mt):Ue(He,Mt,String(Nt[_t]));Et&&(Pt.minor=!0,Pt.text=""),St.push(Pt)}}}}return Ie(He,St)}Q.getDataToCoordFunc=function(He,Ge,dt,ht){return Re(He,Ge,dt,ht).d2c},Q.counterLetter=function(He){var Ge=He.charAt(0);return"x"===Ge?"y":"y"===Ge?"x":void 0},Q.minDtick=function(He,Ge,dt,ht){-1===["log","category","multicategory"].indexOf(He.type)&&ht?void 0===He._minDtick?(He._minDtick=Ge,He._forceTick0=dt):He._minDtick&&((He._minDtick/Ge+1e-6)%1<2e-6&&((dt-He._forceTick0)/Ge%1+1.000001)%1<2e-6?(He._minDtick=Ge,He._forceTick0=dt):((Ge/He._minDtick+1e-6)%1>2e-6||((dt-He._forceTick0)/He._minDtick%1+1.000001)%1>2e-6)&&(He._minDtick=0)):He._minDtick=0},Q.saveRangeInitial=function(He,Ge){for(var dt=Q.list(He,"",!0),ht=!1,kt=0;kt<dt.length;kt++){var St=dt[kt],Et=void 0===St._rangeInitial;(Et&&!1===St.autorange||Ge&&(Et||St.range[0]!==St._rangeInitial[0]||St.range[1]!==St._rangeInitial[1]))&&(St._rangeInitial=St.range.slice(),ht=!0)}return ht},Q.saveShowSpikeInitial=function(He,Ge){for(var dt=Q.list(He,"",!0),ht=!1,kt="on",St=0;St<dt.length;St++){var Et=dt[St],wt=void 0===Et._showSpikeInitial;(wt||Ge&&(wt||Et.showspikes!==Et._showspikes))&&(Et._showSpikeInitial=Et.showspikes,ht=!0),"on"!==kt||Et.showspikes||(kt="off")}return He._fullLayout._cartesianSpikesEnabled=kt,ht},Q.autoBin=function(He,Ge,dt,ht,kt,St){var Et,wt=T.aggNums(Math.min,null,He),Nt=T.aggNums(Math.max,null,He);if("category"===Ge.type||"multicategory"===Ge.type)return{start:wt-.5,end:Nt+.5,size:Math.max(1,Math.round(St)||1),_dataSpan:Nt-wt};if(kt||(kt=Ge.calendar),Et="log"===Ge.type?{type:"linear",range:[wt,Nt]}:{type:Ge.type,range:T.simpleMap([wt,Nt],Ge.c2r,0,kt),calendar:kt},Q.setConvert(Et),St=St&&l.dtick(St,Et.type))Et.dtick=St,Et.tick0=l.tick0(void 0,Et.type,kt);else{var _t;if(dt)_t=(Nt-wt)/dt;else{var Mt=T.distinctVals(He),Pt=Math.pow(10,Math.floor(Math.log(Mt.minDiff)/Math.LN10)),Zt=Pt*T.roundUp(Mt.minDiff/Pt,[.9,1.9,4.9,9.9],!0);_t=Math.max(Zt,2*T.stdev(He)/Math.pow(He.length,ht?.25:.4)),C(_t)||(_t=1)}Q.autoTicks(Et,_t)}var $t,Xt=Et.dtick,dn=Q.tickIncrement(Q.tickFirst(Et),Xt,"reverse",kt);if("number"==typeof Xt)$t=(dn=function(on,cn,tn,Cn,Fn){var En=0,rn=0,yn=0,pn=0;function bn(Wn){return(1+100*(Wn-on)/tn.dtick)%100<2}for(var In=0;In<cn.length;In++)cn[In]%1==0?yn++:C(cn[In])||pn++,bn(cn[In])&&En++,bn(cn[In]+tn.dtick/2)&&rn++;var _n=cn.length-pn;if(yn===_n&&"date"!==tn.type)tn.dtick<1?on=Cn-.5*tn.dtick:(on-=.5)+tn.dtick<Cn&&(on+=tn.dtick);else if(rn<.1*_n&&(En>.3*_n||bn(Cn)||bn(Fn))){var qn=tn.dtick/2;on+=on+qn<Cn?qn:-qn}return on}(dn,He,Et,wt,Nt))+(1+Math.floor((Nt-dn)/Xt))*Xt;else for("M"===Et.dtick.charAt(0)&&(dn=function(on,cn,tn,Cn,Fn){var En=T.findExactDates(cn,Fn);if(En.exactDays>.8){var rn=Number(tn.substr(1));En.exactYears>.8&&rn%12==0?on=Q.tickIncrement(on,"M6","reverse")+1.5*m:En.exactMonths>.8?on=Q.tickIncrement(on,"M1","reverse")+15.5*m:on-=D;var yn=Q.tickIncrement(on,tn);if(yn<=Cn)return yn}return on}(dn,He,Xt,wt,kt)),$t=dn;$t<=Nt;)$t=Q.tickIncrement($t,Xt,!1,kt);return{start:Ge.c2r(dn,0,kt),end:Ge.c2r($t,0,kt),size:Xt,_dataSpan:Nt-wt}},Q.prepMinorTicks=function(He,Ge,dt){if(!Ge.minor.dtick){delete He.dtick;var ht,kt=Ge.dtick&&C(Ge._tmin);if(kt){var St=Q.tickIncrement(Ge._tmin,Ge.dtick,!0);ht=[Ge._tmin,.99*St+.01*Ge._tmin]}else{var Et=T.simpleMap(Ge.range,Ge.r2l);ht=[Et[0],.8*Et[0]+.2*Et[1]]}if(He.range=T.simpleMap(ht,Ge.l2r),He._isMinor=!0,Q.prepTicks(He,dt),kt){var wt=C(Ge.dtick),Nt=C(He.dtick),_t=wt?Ge.dtick:+Ge.dtick.substring(1),Mt=Nt?He.dtick:+He.dtick.substring(1);wt&&Nt?we(_t,Mt)?_t===2*M&&Mt===2*m&&(He.dtick=M):He.dtick=_t===2*M&&Mt===3*m?M:_t!==M||(Ge._input.minor||{}).nticks?je(_t/Mt,2.5)?_t/2:_t:m:"M"===String(Ge.dtick).charAt(0)?Nt?He.dtick="M1":we(_t,Mt)?_t>=12&&2===Mt&&(He.dtick="M3"):He.dtick=Ge.dtick:"L"===String(He.dtick).charAt(0)?"L"===String(Ge.dtick).charAt(0)?we(_t,Mt)||(He.dtick=je(_t/Mt,2.5)?Ge.dtick/2:Ge.dtick):He.dtick="D1":"D2"===He.dtick&&+Ge.dtick>1&&(He.dtick=1)}He.range=Ge.range}void 0===Ge.minor._tick0Init&&(He.tick0=Ge.tick0)},Q.prepTicks=function(He,Ge){var dt=T.simpleMap(He.range,He.r2l,void 0,void 0,Ge);if("auto"===He.tickmode||!He.dtick){var ht,kt=He.nticks;kt||("category"===He.type||"multicategory"===He.type?(ht=He.tickfont?T.bigFont(He.tickfont.size||12):15,kt=He._length/ht):(ht="y"===He._id.charAt(0)?40:80,kt=T.constrain(He._length/ht,4,9)+1),"radialaxis"===He._name&&(kt*=2)),He.minor&&"array"!==He.minor.tickmode||"array"===He.tickmode&&(kt*=100),He._roughDTick=Math.abs(dt[1]-dt[0])/kt,Q.autoTicks(He,He._roughDTick),He._minDtick>0&&He.dtick<2*He._minDtick&&(He.dtick=He._minDtick,He.tick0=He.l2r(He._forceTick0))}"period"===He.ticklabelmode&&function(St){var Et;function wt(){return!(C(St.dtick)||"M"!==St.dtick.charAt(0))}var Nt=wt(),_t=Q.getTickFormat(St);if(_t){var Mt=St._dtickInit!==St.dtick;/%[fLQsSMX]/.test(_t)||(/%[HI]/.test(_t)?(Et=S,Mt&&!Nt&&St.dtick<S&&(St.dtick=S)):/%p/.test(_t)?(Et=D,Mt&&!Nt&&St.dtick<D&&(St.dtick=D)):/%[Aadejuwx]/.test(_t)?(Et=m,Mt&&!Nt&&St.dtick<m&&(St.dtick=m)):/%[UVW]/.test(_t)?(Et=M,Mt&&!Nt&&St.dtick<M&&(St.dtick=M)):/%[Bbm]/.test(_t)?(Et=x,Mt&&(Nt?Ce(St.dtick)<1:St.dtick<b)&&(St.dtick="M1")):/%[q]/.test(_t)?(Et=y,Mt&&(Nt?Ce(St.dtick)<3:St.dtick<p)&&(St.dtick="M3")):/%[Yy]/.test(_t)&&(Et=g,Mt&&(Nt?Ce(St.dtick)<12:St.dtick<h)&&(St.dtick="M12")))}(Nt=wt())&&St.tick0===St._dowTick0&&(St.tick0=St._rawTick0),St._definedDelta=Et}(He),He.tick0||(He.tick0="date"===He.type?"2000-01-01":0),"date"===He.type&&He.dtick<.1&&(He.dtick=.1),Le(He)},Q.calcTicks=function(He,Ge){for(var dt,ht,kt=He.type,St=He.calendar,Et=He.ticklabelstep,wt="period"===He.ticklabelmode,Nt=T.simpleMap(He.range,He.r2l,void 0,void 0,Ge),_t=Nt[1]<Nt[0],Mt=Math.min(Nt[0],Nt[1]),Pt=Math.max(Nt[0],Nt[1]),Zt=Math.max(1e3,He._length||0),$t=[],Xt=[],dn=[],on=[],cn=He.minor&&(He.minor.ticks||He.minor.showgrid),tn=1;tn>=(cn?0:1);tn--){var Cn=!tn;tn?(He._dtickInit=He.dtick,He._tick0Init=He.tick0):(He.minor._dtickInit=He.minor.dtick,He.minor._tick0Init=He.minor.tick0);var Fn=tn?He:T.extendFlat({},He,He.minor);if(Cn?Q.prepMinorTicks(Fn,He,Ge):Q.prepTicks(Fn,Ge),"array"!==Fn.tickmode)if("sync"!==Fn.tickmode){var En=Ee(Nt),rn=En[0],yn=En[1],pn=C(Fn.dtick),bn="log"===kt&&!(pn||"L"===Fn.dtick.charAt(0)),In=Q.tickFirst(Fn,Ge);if(tn){if(He._tmin=In,In<rn!==_t)break;"category"!==kt&&"multicategory"!==kt||(yn=_t?Math.max(-.5,yn):Math.min(He._categories.length-.5,yn))}var _n,qn,Wn=null,Nn=In;tn&&(pn?qn=He.dtick:"date"===kt?"string"==typeof He.dtick&&"M"===He.dtick.charAt(0)&&(qn=x*He.dtick.substring(1)):qn=He._roughDTick,_n=Math.round((He.r2l(Nn)-He.r2l(He.tick0))/qn)-1);var Xn=Fn.dtick;for(Fn.rangebreaks&&Fn._tick0Init!==Fn.tick0&&(Nn=Je(Nn,He),_t||(Nn=Q.tickIncrement(Nn,Xn,!_t,St))),tn&&wt&&(Nn=Q.tickIncrement(Nn,Xn,!_t,St),_n--);_t?Nn>=yn:Nn<=yn;Nn=Q.tickIncrement(Nn,Xn,_t,St)){if(tn&&_n++,Fn.rangebreaks&&!_t){if(Nn<rn)continue;if(Fn.maskBreaks(Nn)===F&&Je(Nn,Fn)>=Pt)break}if(dn.length>Zt||Nn===Wn)break;Wn=Nn;var yr={value:Nn};tn?(bn&&Nn!==(0|Nn)&&(yr.simpleLabel=!0),Et>1&&_n%Et&&(yr.skipLabel=!0),dn.push(yr)):(yr.minor=!0,on.push(yr))}}else dn=[],$t=ge(He);else tn?(dn=[],$t=me(He)):(on=[],Xt=me(He))}if(cn&&!("inside"===He.minor.ticks&&"outside"===He.ticks||"outside"===He.minor.ticks&&"inside"===He.ticks)){for(var fr=dn.map(function(zt){return zt.value}),Er=[],gr=0;gr<on.length;gr++){var mr=on[gr],zr=mr.value;if(-1===fr.indexOf(zr)){for(var Jt=!1,an=0;!Jt&&an<dn.length;an++)1e7+dn[an].value===1e7+zr&&(Jt=!0);Jt||Er.push(mr)}}on=Er}if(wt&&function(zt,sn,hn){for(var Dn=0;Dn<zt.length;Dn++){var Rn=zt[Dn].value,Hn=Dn,Mn=Dn+1;Dn<zt.length-1?(Hn=Dn,Mn=Dn+1):Dn>0?(Hn=Dn-1,Mn=Dn):(Hn=Dn,Mn=Dn);var un,An=Math.abs(zt[Mn].value-zt[Hn].value),Gn=hn||An,Zn=0;Gn>=h?Zn=An>=h&&An<=d?An:g:hn===y&&Gn>=p?Zn=An>=p&&An<=w?An:y:Gn>=b?Zn=An>=b&&An<=_?An:x:hn===M&&Gn>=M?Zn=M:Gn>=m?Zn=m:hn===D&&Gn>=D?Zn=D:hn===S&&Gn>=S&&(Zn=S),Zn>=An&&(Zn=An,un=!0);var lr=Rn+Zn;if(sn.rangebreaks&&Zn>0){for(var nr=0,br=0;br<84;br++){var or=(br+.5)/84;sn.maskBreaks(Rn*(1-or)+or*lr)!==F&&nr++}(Zn*=nr/84)||(zt[Dn].drop=!0),un&&An>M&&(Zn=An)}(Zn>0||0===Dn)&&(zt[Dn].periodX=Rn+Zn/2)}}(dn,He,He._definedDelta),He.rangebreaks){var Sn="y"===He._id.charAt(0),Ln=1;"auto"===He.tickmode&&(Ln=He.tickfont?He.tickfont.size:12);var Vn=NaN;for(dt=dn.length-1;dt>-1;dt--)if(dn[dt].drop)dn.splice(dt,1);else{dn[dt].value=Je(dn[dt].value,He);var cr=He.c2p(dn[dt].value);(Sn?Vn>cr-Ln:Vn<cr+Ln)?dn.splice(_t?dt+1:dt,1):Vn=cr}}st(He)&&360===Math.abs(Nt[1]-Nt[0])&&dn.pop(),He._tmax=(dn[dn.length-1]||{}).value,He._prevDateHead="",He._inCalcTicks=!0;var xn,Qn,er=function(zt){zt.text="",He._prevDateHead=ht};for(dn=dn.concat(on),dt=0;dt<dn.length;dt++){var zn=dn[dt].value;dn[dt].minor?Xt.push({x:zn,minor:!0}):(ht=He._prevDateHead,xn=Q.tickText(He,zn,!1,dn[dt].simpleLabel),void 0!==(Qn=dn[dt].periodX)&&(xn.periodX=Qn,(Qn>Pt||Qn<Mt)&&(Qn>Pt&&(xn.periodX=Pt),Qn<Mt&&(xn.periodX=Mt),er(xn))),dn[dt].skipLabel&&er(xn),$t.push(xn))}return $t=$t.concat(Xt),He._inCalcTicks=!1,wt&&$t.length&&($t[0].noTick=!0),$t};var ce=[2,5,10],Ae=[1,2,3,6,12],Ne=[1,2,5,10,15,30],De=[1,2,3,7,14],qe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ke=[-.301,0,.301,.699,1],be=[15,30,45,90,180];function Oe(He,Ge,dt){return Ge*T.roundUp(He/Ge,dt)}function Le(He){var Ge=He.dtick;if(He._tickexponent=0,C(Ge)||"string"==typeof Ge||(Ge=1),"category"!==He.type&&"multicategory"!==He.type||(He._tickround=null),"date"===He.type){var dt=He.r2l(He.tick0),ht=He.l2r(dt).replace(/(^-|i)/g,""),kt=ht.length;if("M"===String(Ge).charAt(0))He._tickround=kt>10||"01-01"!==ht.substr(5)?"d":+Ge.substr(1)%12==0?"y":"m";else if(Ge>=m&&kt<=10||Ge>=15*m)He._tickround="d";else if(Ge>=O&&kt<=16||Ge>=S)He._tickround="M";else if(Ge>=P&&kt<=19||Ge>=O)He._tickround="S";else{var St=He.l2r(dt+Ge).replace(/^-/,"").length;He._tickround=Math.max(kt,St)-20,He._tickround<0&&(He._tickround=4)}}else if(C(Ge)||"L"===Ge.charAt(0)){var Et=He.range.map(He.r2d||Number);C(Ge)||(Ge=Number(Ge.substr(1))),He._tickround=2-Math.floor(Math.log(Ge)/Math.LN10+.01);var wt=Math.max(Math.abs(Et[0]),Math.abs(Et[1])),Nt=Math.floor(Math.log(wt)/Math.LN10+.01),_t=void 0===He.minexponent?3:He.minexponent;Math.abs(Nt)>_t&&(He._tickexponent=We(He.exponentformat)&&!et(Nt)?3*Math.round((Nt-1)/3):Nt)}else He._tickround=null}function Ue(He,Ge,dt){var ht=He.tickfont||{};return{x:Ge,dx:0,dy:0,text:dt||"",fontSize:ht.size,font:ht.family,fontColor:ht.color}}Q.autoTicks=function(He,Ge,dt){var ht;function kt(Pt){return Math.pow(Pt,Math.floor(Math.log(Ge)/Math.LN10))}if("date"===He.type){He.tick0=T.dateTick0(He.calendar,0);var St=2*Ge;if(St>g)Ge/=g,ht=kt(10),He.dtick="M"+12*Oe(Ge,ht,ce);else if(St>x)He.dtick="M"+Oe(Ge/=x,1,Ae);else if(St>m){if(He.dtick=Oe(Ge,m,He._hasDayOfWeekBreaks?[1,2,7,14]:De),!dt){var Et=Q.getTickFormat(He),wt="period"===He.ticklabelmode;wt&&(He._rawTick0=He.tick0),He.tick0=/%[uVW]/.test(Et)?T.dateTick0(He.calendar,2):T.dateTick0(He.calendar,1),wt&&(He._dowTick0=He.tick0)}}else St>S?He.dtick=Oe(Ge,S,Ae):St>O?He.dtick=Oe(Ge,O,Ne):St>P?He.dtick=Oe(Ge,P,Ne):(ht=kt(10),He.dtick=Oe(Ge,ht,ce))}else if("log"===He.type){He.tick0=0;var Nt=T.simpleMap(He.range,He.r2l);if(He._isMinor&&(Ge*=1.5),Ge>.7)He.dtick=Math.ceil(Ge);else if(Math.abs(Nt[1]-Nt[0])<1){var _t=1.5*Math.abs((Nt[1]-Nt[0])/Ge);Ge=Math.abs(Math.pow(10,Nt[1])-Math.pow(10,Nt[0]))/_t,ht=kt(10),He.dtick="L"+Oe(Ge,ht,ce)}else He.dtick=Ge>.3?"D2":"D1"}else"category"===He.type||"multicategory"===He.type?(He.tick0=0,He.dtick=Math.ceil(Math.max(Ge,1))):st(He)?(He.tick0=0,He.dtick=Oe(Ge,ht=1,be)):(He.tick0=0,ht=kt(10),He.dtick=Oe(Ge,ht,ce));if(0===He.dtick&&(He.dtick=1),!C(He.dtick)&&"string"!=typeof He.dtick){var Mt=He.dtick;throw He.dtick=1,"ax.dtick error: "+String(Mt)}},Q.tickIncrement=function(He,Ge,dt,ht){var kt=dt?-1:1;if(C(Ge))return T.increment(He,kt*Ge);var St=Ge.charAt(0),Et=kt*Number(Ge.substr(1));if("M"===St)return T.incrementMonth(He,Et,ht);if("L"===St)return Math.log(Math.pow(10,He)+Et)/Math.LN10;if("D"===St){var wt="D2"===Ge?Ke:qe,Nt=He+.01*kt,_t=T.roundUp(T.mod(Nt,1),wt,dt);return Math.floor(Nt)+Math.log(I.round(Math.pow(10,_t),1))/Math.LN10}throw"unrecognized dtick "+String(Ge)},Q.tickFirst=function(He,Ge){var dt=He.r2l||Number,ht=T.simpleMap(He.range,dt,void 0,void 0,Ge),kt=ht[1]<ht[0],St=kt?Math.floor:Math.ceil,Et=Ee(ht)[0],wt=He.dtick,Nt=dt(He.tick0);if(C(wt)){var _t=St((Et-Nt)/wt)*wt+Nt;return"category"!==He.type&&"multicategory"!==He.type||(_t=T.constrain(_t,0,He._categories.length-1)),_t}var Mt=wt.charAt(0),Pt=Number(wt.substr(1));if("M"===Mt){for(var Zt,$t,Xt,dn=0,on=Nt;dn<10;){if(((Zt=Q.tickIncrement(on,wt,kt,He.calendar))-Et)*(on-Et)<=0)return kt?Math.min(on,Zt):Math.max(on,Zt);$t=(Et-(on+Zt)/2)/(Zt-on),Xt=Mt+(Math.abs(Math.round($t))||1)*Pt,on=Q.tickIncrement(on,Xt,$t<0?!kt:kt,He.calendar),dn++}return T.error("tickFirst did not converge",He),on}if("L"===Mt)return Math.log(St((Math.pow(10,Et)-Nt)/Pt)*Pt+Nt)/Math.LN10;if("D"===Mt){var cn="D2"===wt?Ke:qe,tn=T.roundUp(T.mod(Et,1),cn,kt);return Math.floor(Et)+Math.log(I.round(Math.pow(10,tn),1))/Math.LN10}throw"unrecognized dtick "+String(wt)},Q.tickText=function(He,Ge,dt,ht){var kt,St=Ue(He,Ge),Et="array"===He.tickmode,wt=dt||Et,Nt=He.type,_t="category"===Nt?He.d2l_noadd:He.d2l;if(Et&&Array.isArray(He.ticktext)){var Mt=T.simpleMap(He.range,He.r2l),Pt=(Math.abs(Mt[1]-Mt[0])-(He._lBreaks||0))/1e4;for(kt=0;kt<He.ticktext.length&&!(Math.abs(Ge-_t(He.tickvals[kt]))<Pt);kt++);if(kt<He.ticktext.length)return St.text=String(He.ticktext[kt]),St}function Zt(on){return void 0===on||(dt?"none"===on:"all"!==on&&Ge!=={first:He._tmin,last:He._tmax}[on])}var cn,tn,$t=dt?"never":"none"!==He.exponentformat&&Zt(He.showexponent)?"hide":"";if("date"===Nt?function(on,cn,tn,Cn){var Fn=on._tickround,En=tn&&on.hoverformat||Q.getTickFormat(on);Cn&&(Fn=C(Fn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Fn]);var rn,yn=T.formatDate(cn.x,En,Fn,on._dateFormat,on.calendar,on._extraFormat),pn=yn.indexOf("\n");if(-1!==pn&&(rn=yn.substr(pn+1),yn=yn.substr(0,pn)),Cn&&("00:00:00"===yn||"00:00"===yn?(yn=rn,rn=""):8===yn.length&&(yn=yn.replace(/:00$/,""))),rn)if(tn)"d"===Fn?yn+=", "+rn:yn=rn+(yn?", "+yn:"");else if(on._inCalcTicks&&on._prevDateHead===rn){var bn=ot(on),In=on._trueSide||on.side;(!bn&&"top"===In||bn&&"bottom"===In)&&(yn+="<br> ")}else on._prevDateHead=rn,yn+="<br>"+rn;cn.text=yn}(He,St,dt,wt):"log"===Nt?function(on,cn,tn,Cn,Fn){var En=on.dtick,rn=cn.x,yn=on.tickformat,pn="string"==typeof En&&En.charAt(0);if("never"===Fn&&(Fn=""),Cn&&"L"!==pn&&(En="L3",pn="L"),yn||"L"===pn)cn.text=nt(Math.pow(10,rn),on,Fn,Cn);else if(C(En)||"D"===pn&&T.mod(rn+.01,1)<.1){var bn=Math.round(rn),In=Math.abs(bn),_n=on.exponentformat;"power"===_n||We(_n)&&et(bn)?(cn.text=0===bn?1:1===bn?"10":"10<sup>"+(bn>1?"":R)+In+"</sup>",cn.fontSize*=1.25):("e"===_n||"E"===_n)&&In>2?cn.text="1"+_n+(bn>0?"+":R)+In:(cn.text=nt(Math.pow(10,rn),on,"","fakehover"),"D1"===En&&"y"===on._id.charAt(0)&&(cn.dy-=cn.fontSize/6))}else{if("D"!==pn)throw"unrecognized dtick "+String(En);cn.text=String(Math.round(Math.pow(10,T.mod(rn,1)))),cn.fontSize*=.75}if("D1"===on.dtick){var qn=String(cn.text).charAt(0);"0"!==qn&&"1"!==qn||("y"===on._id.charAt(0)?cn.dx-=cn.fontSize/4:(cn.dy+=cn.fontSize/2,cn.dx+=(on.range[1]>on.range[0]?1:-1)*cn.fontSize*(rn<0?.5:.25)))}}(He,St,0,wt,$t):"category"===Nt?(cn=St,void 0===(tn=He._categories[Math.round(cn.x)])&&(tn=""),cn.text=String(tn)):"multicategory"===Nt?function(on,cn,tn){var Cn=Math.round(cn.x),Fn=on._categories[Cn]||[],En=void 0===Fn[1]?"":String(Fn[1]),rn=void 0===Fn[0]?"":String(Fn[0]);tn?cn.text=rn+" - "+En:(cn.text=En,cn.text2=rn)}(He,St,dt):st(He)?function(on,cn,tn,Cn,Fn){if("radians"!==on.thetaunit||tn)cn.text=nt(cn.x,on,Fn,Cn);else{var En=cn.x/180;if(0===En)cn.text="0";else{var rn=function(pn){function bn(Wn,Nn){return Math.abs(Wn-Nn)<=1e-6}var In=function(Wn){for(var Nn=1;!bn(Math.round(Wn*Nn)/Nn,Wn);)Nn*=10;return Nn}(pn),_n=pn*In,qn=Math.abs(function Wn(Nn,Xn){return bn(Xn,0)?Nn:Wn(Xn,Nn%Xn)}(_n,In));return[Math.round(_n/qn),Math.round(In/qn)]}(En);if(rn[1]>=100)cn.text=nt(T.deg2rad(cn.x),on,Fn,Cn);else{var yn=cn.x<0;cn.text=1===rn[1]?1===rn[0]?"\u03c0":rn[0]+"\u03c0":["<sup>",rn[0],"</sup>","\u2044","<sub>",rn[1],"</sub>","\u03c0"].join(""),yn&&(cn.text=R+cn.text)}}}}(He,St,dt,wt,$t):function(on,cn,tn,Cn,Fn){"never"===Fn?Fn="":"all"===on.showexponent&&Math.abs(cn.x/on.dtick)<1e-6&&(Fn="hide"),cn.text=nt(cn.x,on,Fn,Cn)}(He,St,0,wt,$t),ht||(He.tickprefix&&!Zt(He.showtickprefix)&&(St.text=He.tickprefix+St.text),He.ticksuffix&&!Zt(He.showticksuffix)&&(St.text+=He.ticksuffix)),He.labelalias&&He.labelalias.hasOwnProperty(St.text)){var Xt=He.labelalias[St.text];"string"==typeof Xt&&(St.text=Xt)}if("boundaries"===He.tickson||He.showdividers){var dn=function(on){var cn=He.l2p(on);return cn>=0&&cn<=He._length?on:null};St.xbnd=[dn(St.x-.5),dn(St.x+He.dtick-.5)]}return St},Q.hoverLabelText=function(He,Ge,dt){dt&&(He=T.extendFlat({},He,{hoverformat:dt}));var ht=Array.isArray(Ge)?Ge[0]:Ge,kt=Array.isArray(Ge)?Ge[1]:void 0;if(void 0!==kt&&kt!==ht)return Q.hoverLabelText(He,ht,dt)+" - "+Q.hoverLabelText(He,kt,dt);var St="log"===He.type&&ht<=0,Et=Q.tickText(He,He.c2l(St?-ht:ht),"hover").text;return St?0===ht?"0":R+Et:Et};var Ze=["f","p","n","\u03bc","m","","k","M","G","T"];function We(He){return"SI"===He||"B"===He}function et(He){return He>14||He<-15}function nt(He,Ge,dt,ht){var kt=He<0,St=Ge._tickround,Et=dt||Ge.exponentformat||"B",wt=Ge._tickexponent,Nt=Q.getTickFormat(Ge),_t=Ge.separatethousands;if(ht){var Mt={exponentformat:Et,minexponent:Ge.minexponent,dtick:"none"===Ge.showexponent?Ge.dtick:C(He)&&Math.abs(He)||1,range:"none"===Ge.showexponent?Ge.range.map(Ge.r2d):[0,He||1]};Le(Mt),St=(Number(Mt._tickround)||0)+4,wt=Mt._tickexponent,Ge.hoverformat&&(Nt=Ge.hoverformat)}if(Nt)return Ge._numFormat(Nt)(He).replace(/-/g,R);var Pt,Zt=Math.pow(10,-St)/2;if("none"===Et&&(wt=0),(He=Math.abs(He))<Zt)He="0",kt=!1;else{if(He+=Zt,wt&&(He*=Math.pow(10,-wt),St+=wt),0===St)He=String(Math.floor(He));else if(St<0){He=(He=String(Math.round(He))).substr(0,He.length+St);for(var $t=St;$t<0;$t++)He+="0"}else{var Xt=(He=String(He)).indexOf(".")+1;Xt&&(He=He.substr(0,Xt+St).replace(/\.?0+$/,""))}He=T.numSeparate(He,Ge._separators,_t)}return wt&&"hide"!==Et&&(We(Et)&&et(wt)&&(Et="power"),Pt=wt<0?R+-wt:"power"!==Et?"+"+wt:String(wt),"e"===Et||"E"===Et?He+=Et+Pt:"power"===Et?He+="\xd710<sup>"+Pt+"</sup>":"B"===Et&&9===wt?He+="B":We(Et)&&(He+=Ze[wt/3+5])),kt?R+He:He}function ct(He,Ge){if(He){var dt=Object.keys(H).reduce(function(ht,kt){return-1!==Ge.indexOf(kt)&&H[kt].forEach(function(St){ht[St]=1}),ht},{});Object.keys(He).forEach(function(ht){dt[ht]||(1===ht.length?He[ht]=0:delete He[ht])})}}function yt(He,Ge){for(var dt=[],ht={},kt=0;kt<Ge.length;kt++){var St=Ge[kt];ht[St.text2]?ht[St.text2].push(St.x):ht[St.text2]=[St.x]}for(var Et in ht)dt.push(Ue(He,T.interp(ht[Et],.5),Et));return dt}function ut(He){return void 0!==He.periodX?He.periodX:He.x}function Ct(He){return[He.text,He.x,He.axInfo,He.font,He.fontSize,He.fontColor].join("_")}function Dt(He){var Ge=He.title.font.size,dt=(He.title.text.match(c.BR_TAG_ALL)||[]).length;return He.title.hasOwnProperty("standoff")?dt?Ge*(ue+dt*ae):Ge*ue:dt?Ge*(dt+1)*ae:Ge}function vt(He,Ge){var dt=He.l2p(Ge);return dt>1&&dt<He._length-1}function mt(He){var Ge=I.select(He),dt=Ge.select(".text-math-group");return dt.empty()?Ge.select("text"):dt}function Lt(He){return He._id+".automargin"}function Ft(He){return Lt(He)+".mirror"}function Rt(He){return He._id+".rangeslider"}function Wt(He,Ge){for(var dt=0;dt<Ge.length;dt++)-1===He.indexOf(Ge[dt])&&He.push(Ge[dt])}function Ht(He,Ge,dt){var ht,kt,St=[],Et=[],wt=He.layout;for(ht=0;ht<Ge.length;ht++)St.push(Q.getFromId(He,Ge[ht]));for(ht=0;ht<dt.length;ht++)Et.push(Q.getFromId(He,dt[ht]));var Nt=Object.keys(o),_t=["anchor","domain","overlaying","position","side","tickangle","editType"],Mt=["linear","log"];for(ht=0;ht<Nt.length;ht++){var Pt=Nt[ht],Zt=St[0][Pt],$t=Et[0][Pt],Xt=!0,dn=!1,on=!1;if("_"!==Pt.charAt(0)&&"function"!=typeof Zt&&-1===_t.indexOf(Pt)){for(kt=1;kt<St.length&&Xt;kt++){var cn=St[kt][Pt];"type"===Pt&&-1!==Mt.indexOf(Zt)&&-1!==Mt.indexOf(cn)&&Zt!==cn?dn=!0:cn!==Zt&&(Xt=!1)}for(kt=1;kt<Et.length&&Xt;kt++){var tn=Et[kt][Pt];"type"===Pt&&-1!==Mt.indexOf($t)&&-1!==Mt.indexOf(tn)&&$t!==tn?on=!0:Et[kt][Pt]!==$t&&(Xt=!1)}Xt&&(dn&&(wt[St[0]._name].type="linear"),on&&(wt[Et[0]._name].type="linear"),it(wt,Pt,St,Et,He._fullLayout._dfltTitle))}}for(ht=0;ht<He._fullLayout.annotations.length;ht++){var Cn=He._fullLayout.annotations[ht];-1!==Ge.indexOf(Cn.xref)&&-1!==dt.indexOf(Cn.yref)&&T.swapAttrs(wt.annotations[ht],["?"])}}function it(He,Ge,dt,ht,kt){var St,Et=T.nestedProperty,wt=Et(He[dt[0]._name],Ge).get(),Nt=Et(He[ht[0]._name],Ge).get();for("title"===Ge&&(wt&&wt.text===kt.x&&(wt.text=kt.y),Nt&&Nt.text===kt.y&&(Nt.text=kt.x)),St=0;St<dt.length;St++)Et(He,dt[St]._name+"."+Ge).set(Nt);for(St=0;St<ht.length;St++)Et(He,ht[St]._name+"."+Ge).set(wt)}function st(He){return"angularaxis"===He._id}function Je(He,Ge){for(var dt=Ge._rangebreaks.length,ht=0;ht<dt;ht++){var kt=Ge._rangebreaks[ht];if(He>=kt.min&&He<kt.max)return kt.max}return He}function ot(He){return-1!==(He.ticklabelposition||"").indexOf("inside")}function pt(He,Ge){ot(He._anchorAxis||{})&&He._hideCounterAxisInsideTickLabels&&He._hideCounterAxisInsideTickLabels(Ge)}function xt(He,Ge,dt,ht){var kt,St="free"===He.anchor||void 0!==He.overlaying&&!1!==He.overlaying?He.overlaying:He._id;kt=ht?"right"===He.side?Ge:-Ge:Ge,St in dt||(dt[St]={}),He.side in dt[St]||(dt[St][He.side]=0),dt[St][He.side]+=kt}Q.getTickFormat=function(He){var Ge,dt,ht,kt,St,Et,wt,Nt,Zt,$t,Xt,dn,on,cn;function _t(Zt){return"string"!=typeof Zt?Zt:Number(Zt.replace("M",""))*x}function Mt(Zt,$t){var Xt=["L","D"];if(typeof Zt==typeof $t){if("number"==typeof Zt)return Zt-$t;var dn=Xt.indexOf(Zt.charAt(0)),on=Xt.indexOf($t.charAt(0));return dn===on?Number(Zt.replace(/(L|D)/g,""))-Number($t.replace(/(L|D)/g,"")):dn-on}return"number"==typeof Zt?1:-1}if(He.tickformatstops&&He.tickformatstops.length>0)switch(He.type){case"date":case"linear":for(Ge=0;Ge<He.tickformatstops.length;Ge++)if((ht=He.tickformatstops[Ge]).enabled&&(kt=He.dtick,Et=void 0,void 0,void 0,Et=_t||function(Zt){return Zt},Nt=(St=ht.dtickrange)[1],(!(wt=St[0])&&"number"!=typeof wt||Et(wt)<=Et(kt))&&(!Nt&&"number"!=typeof Nt||Et(Nt)>=Et(kt)))){dt=ht;break}break;case"log":for(Ge=0;Ge<He.tickformatstops.length;Ge++)if((ht=He.tickformatstops[Ge]).enabled&&(Xt=void 0,dn=void 0,on=void 0,cn=void 0,Xt=null===($t=ht.dtickrange)[0],dn=null===$t[1],on=Mt(Zt=He.dtick,$t[0])>=0,cn=Mt(Zt,$t[1])<=0,(Xt||on)&&(dn||cn))){dt=ht;break}}return dt?dt.value:He.tickformat},Q.getSubplots=function(He,Ge){var dt=He._fullLayout._subplots,ht=dt.cartesian.concat(dt.gl2d||[]),kt=Ge?Q.findSubplotsWithAxis(ht,Ge):ht;return kt.sort(function(St,Et){var wt=St.substr(1).split("y"),Nt=Et.substr(1).split("y");return wt[0]===Nt[0]?+wt[1]-+Nt[1]:+wt[0]-+Nt[0]}),kt},Q.findSubplotsWithAxis=function(He,Ge){for(var dt=new RegExp("x"===Ge._id.charAt(0)?"^"+Ge._id+"y":Ge._id+"$"),ht=[],kt=0;kt<He.length;kt++){var St=He[kt];dt.test(St)&&ht.push(St)}return ht},Q.makeClipPaths=function(He){var Ge=He._fullLayout;if(!Ge._hasOnlyLargeSploms){var dt,ht,kt={_offset:0,_length:Ge.width,_id:""},St={_offset:0,_length:Ge.height,_id:""},Et=Q.list(He,"x",!0),wt=Q.list(He,"y",!0),Nt=[];for(dt=0;dt<Et.length;dt++)for(Nt.push({x:Et[dt],y:St}),ht=0;ht<wt.length;ht++)0===dt&&Nt.push({x:kt,y:wt[ht]}),Nt.push({x:Et[dt],y:wt[ht]});var _t=Ge._clips.selectAll(".axesclip").data(Nt,function(Mt){return Mt.x._id+Mt.y._id});_t.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Mt){return"clip"+Ge._uid+Mt.x._id+Mt.y._id}).append("rect"),_t.exit().remove(),_t.each(function(Mt){I.select(this).select("rect").attr({x:Mt.x._offset||0,y:Mt.y._offset||0,width:Mt.x._length||1,height:Mt.y._length||1})})}},Q.draw=function(He,Ge,dt){var ht=He._fullLayout;"redraw"===Ge&&ht._paper.selectAll("g.subplot").each(function(wt){var _t=ht._plots[wt[0]];if(_t){var Mt=_t.xaxis,Pt=_t.yaxis;_t.xaxislayer.selectAll("."+Mt._id+"tick").remove(),_t.yaxislayer.selectAll("."+Pt._id+"tick").remove(),_t.xaxislayer.selectAll("."+Mt._id+"tick2").remove(),_t.yaxislayer.selectAll("."+Pt._id+"tick2").remove(),_t.xaxislayer.selectAll("."+Mt._id+"divider").remove(),_t.yaxislayer.selectAll("."+Pt._id+"divider").remove(),_t.minorGridlayer&&_t.minorGridlayer.selectAll("path").remove(),_t.gridlayer&&_t.gridlayer.selectAll("path").remove(),_t.zerolinelayer&&_t.zerolinelayer.selectAll("path").remove(),ht._infolayer.select(".g-"+Mt._id+"title").remove(),ht._infolayer.select(".g-"+Pt._id+"title").remove()}});var kt=Ge&&"redraw"!==Ge?Ge:Q.listIds(He),St=Q.list(He).filter(function(wt){return wt.autoshift}).map(function(wt){return wt.overlaying});kt.map(function(wt){var Nt=Q.getFromId(He,wt);if("sync"===Nt.tickmode&&Nt.overlaying){var _t=kt.findIndex(function(Mt){return Mt===Nt.overlaying});_t>=0&&kt.unshift(kt.splice(_t,1).shift())}});var Et={false:{left:0,right:0}};return T.syncOrAsync(kt.map(function(wt){return function(){if(wt){var Nt=Q.getFromId(He,wt);dt||(dt={}),dt.axShifts=Et,dt.overlayingShiftedAx=St;var _t=Q.drawOne(He,Nt,dt);return Nt._shiftPusher&&xt(Nt,Nt._fullDepth||0,Et,!0),Nt._r=Nt.range.slice(),Nt._rl=T.simpleMap(Nt._r,Nt.r2l),_t}}}))},Q.drawOne=function(He,Ge,dt){var ht,kt,St,Et=(dt=dt||{}).axShifts||{},wt=dt.overlayingShiftedAx||[];Ge.setScale();var Mn,Nt=He._fullLayout,_t=Ge._id,Mt=_t.charAt(0),Pt=Q.counterLetter(_t),Zt=Nt._plots[Ge._mainSubplot];if(Zt){if(Ge._shiftPusher=Ge.autoshift||-1!==wt.indexOf(Ge._id)||-1!==wt.indexOf(Ge.overlaying),Ge._shiftPusher&"free"===Ge.anchor){var $t=Ge.linewidth/2||0;"inside"===Ge.ticks&&($t+=Ge.ticklen),xt(Ge,$t,Et,!0),xt(Ge,Ge.shift||0,Et,!1)}!0===dt.skipTitle&&void 0!==Ge._shift||(Ge._shift=(Mn=Ge).autoshift?Et[Mn.overlaying][Mn.side]:Mn.shift||0);var Xt=Zt[Mt+"axislayer"],dn=Ge._mainLinePosition,on=dn+=Ge._shift,cn=Ge._mainMirrorPosition,tn=Ge._vals=Q.calcTicks(Ge),Cn=[Ge.mirror,on,cn].join("_");for(ht=0;ht<tn.length;ht++)tn[ht].axInfo=Cn;Ge._selections={},Ge._tickAngles&&(Ge._prevTickAngles=Ge._tickAngles),Ge._tickAngles={},Ge._depth=null;var Fn={};if(Ge.visible){var En,rn,yn=Q.makeTransTickFn(Ge),pn=Q.makeTransTickLabelFn(Ge),bn="inside"===Ge.ticks,In="outside"===Ge.ticks;if("boundaries"===Ge.tickson){var _n=function(Mn,un){var fn,Tn=[],An=function(Gn,Zn){var lr=Gn.xbnd[Zn];null!==lr&&Tn.push(T.extendFlat({},Gn,{x:lr}))};if(un.length){for(fn=0;fn<un.length;fn++)An(un[fn],0);An(un[fn-1],1)}return Tn}(0,tn);rn=Q.clipEnds(Ge,_n),En=bn?rn:_n}else rn=Q.clipEnds(Ge,tn),En=bn&&"period"!==Ge.ticklabelmode?rn:tn;var qn,Wn=Ge._gridVals=rn,Nn=function(Mn,un){var fn,Tn,An=[],Gn=un.length&&un[un.length-1].x<un[0].x,Zn=function(nr,br){var or=nr.xbnd[br];null!==or&&An.push(T.extendFlat({},nr,{x:or}))};if(Mn.showdividers&&un.length){for(fn=0;fn<un.length;fn++){var lr=un[fn];lr.text2!==Tn&&Zn(lr,Gn?1:0),Tn=lr.text2}Zn(un[fn-1],Gn?0:1)}return An}(Ge,tn);if(!Nt._hasOnlyLargeSploms){var Xn=Ge._subplotsWith,yr={};for(ht=0;ht<Xn.length;ht++){var fr=(St=Nt._plots[kt=Xn[ht]])[Pt+"axis"],Er=fr._mainAxis._id;if(!yr[Er]){yr[Er]=1;var gr="x"===Mt?"M0,"+fr._offset+"v"+fr._length:"M"+fr._offset+",0h"+fr._length;Q.drawGrid(He,Ge,{vals:Wn,counterAxis:fr,layer:St.gridlayer.select("."+_t),minorLayer:St.minorGridlayer.select("."+_t),path:gr,transFn:yn}),Q.drawZeroLine(He,Ge,{counterAxis:fr,layer:St.zerolinelayer,path:gr,transFn:yn})}}}var mr=Q.getTickSigns(Ge),zr=Q.getTickSigns(Ge,"minor");if(Ge.ticks||Ge.minor&&Ge.minor.ticks){var Jt,an,Sn,Ln,Vn=Q.makeTickPath(Ge,on,mr[2]),cr=Q.makeTickPath(Ge,on,zr[2],{minor:!0});if(Ge._anchorAxis&&Ge.mirror&&!0!==Ge.mirror?(Jt=Q.makeTickPath(Ge,cn,mr[3]),an=Q.makeTickPath(Ge,cn,zr[3],{minor:!0}),Sn=Vn+Jt,Ln=cr+an):(Jt="",an="",Sn=Vn,Ln=cr),Ge.showdividers&&In&&"boundaries"===Ge.tickson){var xn={};for(ht=0;ht<Nn.length;ht++)xn[Nn[ht].x]=1;qn=function(Mn){return xn[Mn.x]?Jt:Sn}}else qn=function(Mn){return Mn.minor?Ln:Sn}}if(Q.drawTicks(He,Ge,{vals:En,layer:Xt,path:qn,transFn:yn}),"allticks"===Ge.mirror){var Qn=Object.keys(Ge._linepositions||{});for(ht=0;ht<Qn.length;ht++){St=Nt._plots[kt=Qn[ht]];var er=Ge._linepositions[kt]||[],zn=er[1],zt=er[2],sn=Q.makeTickPath(Ge,er[0],zt?mr[0]:zr[0],{minor:zt})+Q.makeTickPath(Ge,zn,zt?mr[1]:zr[1],{minor:zt});Q.drawTicks(He,Ge,{vals:En,layer:St[Mt+"axislayer"],path:sn,transFn:yn})}}var hn=[];if(hn.push(function(){return Q.drawLabels(He,Ge,{vals:tn,layer:Xt,plotinfo:St,transFn:pn,labelFns:Q.makeLabelFns(Ge,on)})}),"multicategory"===Ge.type){var Dn={x:2,y:10}[Mt];hn.push(function(){var Mn={x:"height",y:"width"}[Mt],un=Hn()[Mn]+Dn+(Ge._tickAngles[_t+"tick"]?Ge.tickfont.size*ae:0);return Q.drawLabels(He,Ge,{vals:yt(Ge,tn),layer:Xt,cls:_t+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:yn,labelFns:Q.makeLabelFns(Ge,on+un*mr[4])})}),hn.push(function(){return Ge._depth=mr[4]*(Hn("tick2")[Ge.side]-on),function(Mn,un,fn){var Tn=un._id+"divider",An=fn.vals,Gn=fn.layer.selectAll("path."+Tn).data(An,Ct);Gn.exit().remove(),Gn.enter().insert("path",":first-child").classed(Tn,1).classed("crisp",1).call(s.stroke,un.dividercolor).style("stroke-width",a.crispRound(Mn,un.dividerwidth,1)+"px"),Gn.attr("transform",fn.transFn).attr("d",fn.path)}(He,Ge,{vals:Nn,layer:Xt,path:Q.makeTickPath(Ge,on,mr[4],{len:Ge._depth}),transFn:yn})})}else Ge.title.hasOwnProperty("standoff")&&hn.push(function(){Ge._depth=mr[4]*(Hn()[Ge.side]-on)});var Rn=k.getComponentMethod("rangeslider","isVisible")(Ge);return dt.skipTitle||Rn&&"bottom"===Ge.side||hn.push(function(){return function(Mn,un){var fn,Tn=Mn._fullLayout,An=un._id,Gn=An.charAt(0),Zn=un.title.font.size;if(un.title.hasOwnProperty("standoff"))fn=un._depth+un.title.standoff+Dt(un);else{var lr=ot(un);if("multicategory"===un.type)fn=un._depth;else{var nr=1.5*Zn;lr&&(nr=.5*Zn,"outside"===un.ticks&&(nr+=un.ticklen)),fn=10+nr+(un.linewidth?un.linewidth-1:0)}lr||(fn+="x"===Gn?"top"===un.side?Zn*(un.showticklabels?1:0):Zn*(un.showticklabels?1.5:.5):"right"===un.side?Zn*(un.showticklabels?1:.5):Zn*(un.showticklabels?.5:0))}var br,or,dr,kr,Sr=Q.getPxPosition(Mn,un);if("x"===Gn?(or=un._offset+un._length/2,dr="top"===un.side?Sr-fn:Sr+fn):(dr=un._offset+un._length/2,or="right"===un.side?Sr+fn:Sr-fn,br={rotate:"-90",offset:0}),"multicategory"!==un.type){var Pr=un._selections[un._id+"tick"];if(kr={selection:Pr,side:un.side},Pr&&Pr.node()&&Pr.node().parentNode){var rr=a.getTranslate(Pr.node().parentNode);kr.offsetLeft=rr.x,kr.offsetTop=rr.y}un.title.hasOwnProperty("standoff")&&(kr.pad=0)}return un._titleStandoff=fn,i.draw(Mn,An+"title",{propContainer:un,propName:un._name+".title.text",placeholder:Tn._dfltTitle[Gn],avoid:kr,transform:br,attributes:{x:or,y:dr,"text-anchor":"middle"}})}(He,Ge)}),hn.push(function(){var Mn,un,fn,Tn,An=Ge.side.charAt(0),Gn=ne[Ge.side].charAt(0),Zn=Q.getPxPosition(He,Ge),lr=In?Ge.ticklen:0;(Ge.automargin||Rn||Ge._shiftPusher)&&("multicategory"===Ge.type?Mn=Hn("tick2"):(Mn=Hn(),"x"===Mt&&"b"===An&&(Ge._depth=Math.max(Mn.width>0?Mn.bottom-Zn:0,lr))));var nr=0,br=0;if(Ge._shiftPusher&&(nr=Math.max(lr,Mn.height>0?"l"===An?Zn-Mn.left:Mn.right-Zn:0),Ge.title.text!==Nt._dfltTitle[Mt]&&(br=(Ge._titleStandoff||0)+(Ge._titleScoot||0),"l"===An&&(br+=Dt(Ge))),Ge._fullDepth=Math.max(nr,br)),Ge.automargin){un={x:0,y:0,r:0,l:0,t:0,b:0};var or=[0,1],dr="number"==typeof Ge._shift?Ge._shift:0;if("x"===Mt){if("b"===An?un[An]=Ge._depth:(un[An]=Ge._depth=Math.max(Mn.width>0?Zn-Mn.top:0,lr),or.reverse()),Mn.width>0){var kr=Mn.right-(Ge._offset+Ge._length);kr>0&&(un.xr=1,un.r=kr);var Sr=Ge._offset-Mn.left;Sr>0&&(un.xl=0,un.l=Sr)}}else if("l"===An?(Ge._depth=Math.max(Mn.height>0?Zn-Mn.left:0,lr),un[An]=Ge._depth-dr):(Ge._depth=Math.max(Mn.height>0?Mn.right-Zn:0,lr),un[An]=Ge._depth+dr,or.reverse()),Mn.height>0){var Pr=Mn.bottom-(Ge._offset+Ge._length);Pr>0&&(un.yb=0,un.b=Pr);var rr=Ge._offset-Mn.top;rr>0&&(un.yt=1,un.t=rr)}un[Pt]="free"===Ge.anchor?Ge.position:Ge._anchorAxis.domain[or[0]],Ge.title.text!==Nt._dfltTitle[Mt]&&(un[An]+=Dt(Ge)+(Ge.title.standoff||0)),Ge.mirror&&"free"!==Ge.anchor&&((fn={x:0,y:0,r:0,l:0,t:0,b:0})[Gn]=Ge.linewidth,Ge.mirror&&!0!==Ge.mirror&&(fn[Gn]+=lr),!0===Ge.mirror||"ticks"===Ge.mirror?fn[Pt]=Ge._anchorAxis.domain[or[1]]:"all"!==Ge.mirror&&"allticks"!==Ge.mirror||(fn[Pt]=[Ge._counterDomainMin,Ge._counterDomainMax][or[1]]))}Rn&&(Tn=k.getComponentMethod("rangeslider","autoMarginOpts")(He,Ge)),"string"==typeof Ge.automargin&&(ct(un,Ge.automargin),ct(fn,Ge.automargin)),f.autoMargin(He,Lt(Ge),un),f.autoMargin(He,Ft(Ge),fn),f.autoMargin(He,Rt(Ge),Tn)}),T.syncOrAsync(hn)}}function Hn(Mn){var fn,Tn,An,Gn,Zn,lr,un=_t+(Mn||"tick");return Fn[un]||(Fn[un]=((fn=Ge)._selections[Tn=un].size()?(An=1/0,Gn=-1/0,Zn=1/0,lr=-1/0,fn._selections[Tn].each(function(){var nr=mt(this),br=a.bBox(nr.node().parentNode);An=Math.min(An,br.top),Gn=Math.max(Gn,br.bottom),Zn=Math.min(Zn,br.left),lr=Math.max(lr,br.right)})):(An=0,Gn=0,Zn=0,lr=0),{top:An,bottom:Gn,left:Zn,right:lr,height:Gn-An,width:lr-Zn})),Fn[un]}},Q.getTickSigns=function(He,Ge){var dt=He._id.charAt(0),kt=He.side==={x:"top",y:"right"}[dt]?1:-1,St=[-1,1,kt,-kt];return"inside"!==(Ge?(He.minor||{}).ticks:He.ticks)==("x"===dt)&&(St=St.map(function(Et){return-Et})),He.side&&St.push({l:-1,t:-1,r:1,b:1}[He.side.charAt(0)]),St},Q.makeTransTickFn=function(He){return"x"===He._id.charAt(0)?function(Ge){return v(He._offset+He.l2p(Ge.x),0)}:function(Ge){return v(0,He._offset+He.l2p(Ge.x))}},Q.makeTransTickLabelFn=function(He){var Ge=function(kt){var St=kt.ticklabelposition||"",Et=function(cn){return-1!==St.indexOf(cn)},wt=Et("top"),Nt=Et("left"),_t=Et("right"),Mt=Et("bottom"),Pt=Et("inside"),Zt=Mt||Nt||wt||_t;if(!Zt&&!Pt)return[0,0];var $t=kt.side,Xt=Zt?(kt.tickwidth||0)/2:0,dn=3,on=kt.tickfont?kt.tickfont.size:12;return(Mt||wt)&&(Xt+=on*ue,dn+=(kt.linewidth||0)/2),(Nt||_t)&&(Xt+=(kt.linewidth||0)/2,dn+=3),Pt&&"top"===$t&&(dn-=on*(1-ue)),(Nt||wt)&&(Xt=-Xt),"bottom"!==$t&&"right"!==$t||(dn=-dn),[Zt?Xt:0,Pt?dn:0]}(He),dt=Ge[0],ht=Ge[1];return"x"===He._id.charAt(0)?function(kt){return v(dt+He._offset+He.l2p(ut(kt)),ht)}:function(kt){return v(ht,dt+He._offset+He.l2p(ut(kt)))}},Q.makeTickPath=function(He,Ge,dt,ht){ht||(ht={});var kt=ht.minor;if(kt&&!He.minor)return"";var St=void 0!==ht.len?ht.len:kt?He.minor.ticklen:He.ticklen,Et=He._id.charAt(0),wt=(He.linewidth||1)/2;return"x"===Et?"M0,"+(Ge+wt*dt)+"v"+St*dt:"M"+(Ge+wt*dt)+",0h"+St*dt},Q.makeLabelFns=function(He,Ge,dt){var ht=He.ticklabelposition||"",kt=function(_n){return-1!==ht.indexOf(_n)},St=kt("top"),Et=kt("left"),wt=kt("right"),Nt=kt("bottom")||Et||St||wt,_t=kt("inside"),Mt="inside"===ht&&"inside"===He.ticks||!_t&&"outside"===He.ticks&&"boundaries"!==He.tickson,Pt=0,Zt=0,$t=Mt?He.ticklen:0;if(_t?$t*=-1:Nt&&($t=0),Mt&&(Pt+=$t,dt)){var Xt=T.deg2rad(dt);Pt=$t*Math.cos(Xt)+1,Zt=$t*Math.sin(Xt)}He.showticklabels&&(Mt||He.showline)&&(Pt+=.2*He.tickfont.size);var dn,on,cn,tn,Cn,Fn={labelStandoff:Pt+=(He.linewidth||1)/2*(_t?-1:1),labelShift:Zt},En=0,rn=He.side,yn=He._id.charAt(0),pn=He.tickangle;if("x"===yn)tn=(Cn=!_t&&"bottom"===rn||_t&&"top"===rn)?1:-1,_t&&(tn*=-1),dn=Zt*tn,on=Ge+Pt*tn,cn=Cn?1:-.2,90===Math.abs(pn)&&(_t?cn+=K:cn=-90===pn&&"bottom"===rn?ue:90===pn&&"top"===rn?K:.5,En=K/2*(pn/90)),Fn.xFn=function(_n){return _n.dx+dn+En*_n.fontSize},Fn.yFn=function(_n){return _n.dy+on+_n.fontSize*cn},Fn.anchorFn=function(_n,qn){if(Nt){if(Et)return"end";if(wt)return"start"}return C(qn)&&0!==qn&&180!==qn?qn*tn<0!==_t?"end":"start":"middle"},Fn.heightFn=function(_n,qn,Wn){return qn<-60||qn>60?-.5*Wn:"top"===He.side!==_t?-Wn:0};else if("y"===yn){if(tn=(Cn=!_t&&"left"===rn||_t&&"right"===rn)?1:-1,_t&&(tn*=-1),dn=Pt,on=Zt*tn,cn=0,_t||90!==Math.abs(pn)||(cn=-90===pn&&"left"===rn||90===pn&&"right"===rn?ue:.5),_t){var bn=C(pn)?+pn:0;if(0!==bn){var In=T.deg2rad(bn);En=Math.abs(Math.sin(In))*ue*tn,cn=0}}Fn.xFn=function(_n){return _n.dx+Ge-(dn+_n.fontSize*cn)*tn+En*_n.fontSize},Fn.yFn=function(_n){return _n.dy+on+_n.fontSize*K},Fn.anchorFn=function(_n,qn){return C(qn)&&90===Math.abs(qn)?"middle":Cn?"end":"start"},Fn.heightFn=function(_n,qn,Wn){return"right"===He.side&&(qn*=-1),qn<-30?-Wn:qn<30?-.5*Wn:0}}return Fn},Q.drawTicks=function(He,Ge,dt){dt=dt||{};var ht=Ge._id+"tick",kt=[].concat(Ge.minor&&Ge.minor.ticks?dt.vals.filter(function(Et){return Et.minor&&!Et.noTick}):[]).concat(Ge.ticks?dt.vals.filter(function(Et){return!Et.minor&&!Et.noTick}):[]),St=dt.layer.selectAll("path."+ht).data(kt,Ct);St.exit().remove(),St.enter().append("path").classed(ht,1).classed("ticks",1).classed("crisp",!1!==dt.crisp).each(function(Et){return s.stroke(I.select(this),Et.minor?Ge.minor.tickcolor:Ge.tickcolor)}).style("stroke-width",function(Et){return a.crispRound(He,Et.minor?Ge.minor.tickwidth:Ge.tickwidth,1)+"px"}).attr("d",dt.path).style("display",null),pt(Ge,[$]),St.attr("transform",dt.transFn)},Q.drawGrid=function(He,Ge,dt){if(dt=dt||{},"sync"!==Ge.tickmode){var ht=Ge._id+"grid",kt=Ge.minor&&Ge.minor.showgrid,St=kt?dt.vals.filter(function(cn){return cn.minor}):[],Et=Ge.showgrid?dt.vals.filter(function(cn){return!cn.minor}):[],wt=dt.counterAxis;if(wt&&Q.shouldShowZeroLine(He,Ge,wt))for(var Nt="array"===Ge.tickmode,_t=0;_t<Et.length;_t++){var Mt=Et[_t].x;if(Nt?!Mt:Math.abs(Mt)<Ge.dtick/100){if(Et=Et.slice(0,_t).concat(Et.slice(_t+1)),!Nt)break;_t--}}Ge._gw=a.crispRound(He,Ge.gridwidth,1);for(var Pt=kt?a.crispRound(He,Ge.minor.gridwidth,1):0,Zt=dt.layer,$t=dt.minorLayer,Xt=1;Xt>=0;Xt--){var dn=Xt?Zt:$t;if(dn){var on=dn.selectAll("path."+ht).data(Xt?Et:St,Ct);on.exit().remove(),on.enter().append("path").classed(ht,1).classed("crisp",!1!==dt.crisp),on.attr("transform",dt.transFn).attr("d",dt.path).each(function(cn){return s.stroke(I.select(this),cn.minor?Ge.minor.gridcolor:Ge.gridcolor||"#ddd")}).style("stroke-dasharray",function(cn){return a.dashStyle(cn.minor?Ge.minor.griddash:Ge.griddash,cn.minor?Ge.minor.gridwidth:Ge.gridwidth)}).style("stroke-width",function(cn){return(cn.minor?Pt:Ge._gw)+"px"}).style("display",null),"function"==typeof dt.path&&on.attr("d",dt.path)}}pt(Ge,[J,z])}},Q.drawZeroLine=function(He,Ge,dt){var ht=Ge._id+"zl",kt=Q.shouldShowZeroLine(He,Ge,(dt=dt||dt).counterAxis),St=dt.layer.selectAll("path."+ht).data(kt?[{x:0,id:Ge._id}]:[]);St.exit().remove(),St.enter().append("path").classed(ht,1).classed("zl",1).classed("crisp",!1!==dt.crisp).each(function(){dt.layer.selectAll("path").sort(function(Et,wt){return fe(Et.id,wt.id)})}),St.attr("transform",dt.transFn).attr("d",dt.path).call(s.stroke,Ge.zerolinecolor||s.defaultLine).style("stroke-width",a.crispRound(He,Ge.zerolinewidth,Ge._gw||1)+"px").style("display",null),pt(Ge,[B])},Q.drawLabels=function(He,Ge,dt){dt=dt||{};var ht=He._fullLayout,kt=Ge._id,St=kt.charAt(0),Et=dt.cls||kt+"tick",wt=dt.vals.filter(function(tn){return tn.text}),Nt=dt.labelFns,_t=dt.secondary?0:Ge.tickangle,Mt=(Ge._prevTickAngles||{})[Et],Pt=dt.layer.selectAll("g."+Et).data(Ge.showticklabels?wt:[],Ct),Zt=[];function $t(tn,Cn){tn.each(function(Fn){var En=I.select(this),rn=En.select(".text-math-group"),yn=Nt.anchorFn(Fn,Cn),pn=dt.transFn.call(En.node(),Fn)+(C(Cn)&&0!=+Cn?" rotate("+Cn+","+Nt.xFn(Fn)+","+(Nt.yFn(Fn)-Fn.fontSize/2)+")":""),bn=c.lineCount(En),In=ae*Fn.fontSize,_n=Nt.heightFn(Fn,C(Cn)?+Cn:0,(bn-1)*In);if(_n&&(pn+=v(0,_n)),rn.empty()){var qn=En.select("text");qn.attr({transform:pn,"text-anchor":yn}),qn.style("opacity",1),Ge._adjustTickLabelsOverflow&&Ge._adjustTickLabelsOverflow()}else{var Wn=a.bBox(rn.node()).width*{end:-.5,start:.5}[yn];rn.attr("transform",pn+v(Wn,0))}})}Pt.enter().append("g").classed(Et,1).append("text").attr("text-anchor","middle").each(function(tn){var Cn=I.select(this),Fn=He._promises.length;Cn.call(c.positionText,Nt.xFn(tn),Nt.yFn(tn)).call(a.font,tn.font,tn.fontSize,tn.fontColor).text(tn.text).call(c.convertToTspans,He),He._promises[Fn]?Zt.push(He._promises.pop().then(function(){$t(Cn,_t)})):$t(Cn,_t)}),pt(Ge,[G]),Pt.exit().remove(),dt.repositionOnUpdate&&Pt.each(function(tn){I.select(this).select("text").call(c.positionText,Nt.xFn(tn),Nt.yFn(tn))}),Ge._adjustTickLabelsOverflow=function(){var tn=Ge.ticklabeloverflow;if(tn&&"allow"!==tn){var Cn=-1!==tn.indexOf("hide"),Fn="x"===Ge._id.charAt(0),En=0,rn=Fn?He._fullLayout.width:He._fullLayout.height;if(-1!==tn.indexOf("domain")){var yn=T.simpleMap(Ge.range,Ge.r2l);En=Ge.l2p(yn[0])+Ge._offset,rn=Ge.l2p(yn[1])+Ge._offset}var pn=Math.min(En,rn),bn=Math.max(En,rn),In=Ge.side,_n=1/0,qn=-1/0;for(var Wn in Pt.each(function(yr){var fr=I.select(this);if(fr.select(".text-math-group").empty()){var Er=a.bBox(fr.node()),gr=0;Fn?(Er.right>bn||Er.left<pn)&&(gr=1):(Er.bottom>bn||Er.top+(Ge.tickangle?0:yr.fontSize/4)<pn)&&(gr=1);var mr=fr.select("text");gr?Cn&&mr.style("opacity",0):(mr.style("opacity",1),_n="bottom"===In||"right"===In?Math.min(_n,Fn?Er.top:Er.left):-1/0,qn="top"===In||"left"===In?Math.max(qn,Fn?Er.bottom:Er.right):1/0)}}),ht._plots){var Nn=ht._plots[Wn];if(Ge._id===Nn.xaxis._id||Ge._id===Nn.yaxis._id){var Xn=Fn?Nn.yaxis:Nn.xaxis;Xn&&(Xn["_visibleLabelMin_"+Ge._id]=_n,Xn["_visibleLabelMax_"+Ge._id]=qn)}}}},Ge._hideCounterAxisInsideTickLabels=function(tn){var Cn="x"===Ge._id.charAt(0),Fn=[];for(var En in ht._plots){var rn=ht._plots[En];Ge._id!==rn.xaxis._id&&Ge._id!==rn.yaxis._id||Fn.push(Cn?rn.yaxis:rn.xaxis)}Fn.forEach(function(yn,pn){yn&&ot(yn)&&(tn||[B,z,J,$,G]).forEach(function(bn){var In="tick"===bn.K&&"text"===bn.L&&"period"===Ge.ticklabelmode,_n=ht._plots[Ge._mainSubplot];(bn.K===B.K?_n.zerolinelayer.selectAll("."+Ge._id+"zl"):bn.K===z.K?_n.minorGridlayer.selectAll("."+Ge._id):bn.K===J.K?_n.gridlayer.selectAll("."+Ge._id):_n[Ge._id.charAt(0)+"axislayer"]).each(function(){var qn=I.select(this);bn.L&&(qn=qn.selectAll(bn.L)),qn.each(function(Wn){var Nn=Ge.l2p(In?ut(Wn):Wn.x)+Ge._offset,Xn=I.select(this);Nn<Ge["_visibleLabelMax_"+yn._id]&&Nn>Ge["_visibleLabelMin_"+yn._id]?Xn.style("display","none"):"tick"!==bn.K||pn||Xn.style("display",null)})})})})},$t(Pt,Mt+1?Mt:_t);var Xt=null;Ge._selections&&(Ge._selections[Et]=Pt);var dn=[function(){return Zt.length&&Promise.all(Zt)}];Ge.automargin&&ht._redrawFromAutoMarginCount&&90===Mt?(Xt=90,dn.push(function(){$t(Pt,Mt)})):dn.push(function(){if($t(Pt,_t),wt.length&&"x"===St&&!C(_t)&&("log"!==Ge.type||"D"!==String(Ge.dtick).charAt(0))){Xt=0;var tn,Cn=0,Fn=[];if(Pt.each(function(fr){Cn=Math.max(Cn,fr.fontSize);var Er=Ge.l2p(fr.x),gr=mt(this),mr=a.bBox(gr.node());Fn.push({top:0,bottom:10,height:10,left:Er-mr.width/2,right:Er+mr.width/2+2,width:mr.width+2})}),"boundaries"!==Ge.tickson&&!Ge.showdividers||dt.secondary){var En=wt.length,rn=Math.abs((wt[En-1].x-wt[0].x)*Ge._m)/(En-1),yn=Ge.ticklabelposition||"",pn=function(fr){return-1!==yn.indexOf(fr)},bn=pn("top"),In=pn("left"),_n=pn("right"),qn=pn("bottom")||In||bn||_n?(Ge.tickwidth||0)+6:0,Wn=rn<2.5*Cn||"multicategory"===Ge.type||"realaxis"===Ge._name;for(tn=0;tn<Fn.length-1;tn++)if(T.bBoxIntersect(Fn[tn],Fn[tn+1],qn)){Xt=Wn?90:30;break}}else{var Nn=2;for(Ge.ticks&&(Nn+=Ge.tickwidth/2),tn=0;tn<Fn.length;tn++){var Xn=wt[tn].xbnd,yr=Fn[tn];if(null!==Xn[0]&&yr.left-Ge.l2p(Xn[0])<Nn||null!==Xn[1]&&Ge.l2p(Xn[1])-yr.right<Nn){Xt=90;break}}}Xt&&$t(Pt,Xt)}}),Ge._tickAngles&&dn.push(function(){Ge._tickAngles[Et]=null===Xt?C(_t)?_t:0:Xt});var on=Ge._anchorAxis;on&&on.autorange&&ot(Ge)&&!he(ht,Ge._id)&&(ht._insideTickLabelsAutorange||(ht._insideTickLabelsAutorange={}),ht._insideTickLabelsAutorange[on._name+".autorange"]=on.autorange,dn.push(function(){Pt.each(function(tn,Cn){var Fn=mt(this);Fn.select(".text-math-group").empty()&&(Ge._vals[Cn].bb=a.bBox(Fn.node()))})}));var cn=T.syncOrAsync(dn);return cn&&cn.then&&He._promises.push(cn),cn},Q.getPxPosition=function(He,Ge){var dt,ht=He._fullLayout._size,kt=Ge._id.charAt(0),St=Ge.side;return"free"!==Ge.anchor?dt=Ge._anchorAxis:"x"===kt?dt={_offset:ht.t+(1-(Ge.position||0))*ht.h,_length:0}:"y"===kt&&(dt={_offset:ht.l+(Ge.position||0)*ht.w+Ge._shift,_length:0}),"top"===St||"left"===St?dt._offset:"bottom"===St||"right"===St?dt._offset+dt._length:void 0},Q.shouldShowZeroLine=function(He,Ge,dt){var ht=T.simpleMap(Ge.range,Ge.r2l);return ht[0]*ht[1]<=0&&Ge.zeroline&&("linear"===Ge.type||"-"===Ge.type)&&!(Ge.rangebreaks&&Ge.maskBreaks(0)===F)&&(vt(Ge,0)||!function(kt,St,Et,wt){var Nt=Et._mainAxis;if(Nt){var _t=kt._fullLayout,Mt=St._id.charAt(0),Pt=Q.counterLetter(St._id),Zt=St._offset+(Math.abs(wt[0])<Math.abs(wt[1])==("x"===Mt)?0:St._length),$t=_t._plots[Et._mainSubplot];if(!($t.mainplotinfo||$t).overlays.length)return cn(Et);for(var Xt=Q.list(kt,Pt),dn=0;dn<Xt.length;dn++){var on=Xt[dn];if(on._mainAxis===Nt&&cn(on))return!0}}function cn(tn){if(!tn.showline||!tn.linewidth)return!1;var Cn=Math.max((tn.linewidth+St.zerolinewidth)/2,1);function Fn(yn){return"number"==typeof yn&&Math.abs(yn-Zt)<Cn}if(Fn(tn._mainLinePosition)||Fn(tn._mainMirrorPosition))return!0;var En=tn._linepositions||{};for(var rn in En)if(Fn(En[rn][0])||Fn(En[rn][1]))return!0}}(He,Ge,dt,ht)||function(kt,St){for(var Et=kt._fullData,wt=St._mainSubplot,Nt=St._id.charAt(0),_t=0;_t<Et.length;_t++){var Mt=Et[_t];if(!0===Mt.visible&&Mt.xaxis+Mt.yaxis===wt&&(k.traceIs(Mt,"bar-like")&&Mt.orientation==={x:"h",y:"v"}[Nt]||Mt.fill&&Mt.fill.charAt(Mt.fill.length-1)===Nt))return!0}return!1}(He,Ge))},Q.clipEnds=function(He,Ge){return Ge.filter(function(dt){return vt(He,dt.x)})},Q.allowAutoMargin=function(He){for(var Ge=Q.list(He,"",!0),dt=0;dt<Ge.length;dt++){var ht=Ge[dt];ht.automargin&&(f.allowAutoMargin(He,Lt(ht)),ht.mirror&&f.allowAutoMargin(He,Ft(ht))),k.getComponentMethod("rangeslider","isVisible")(ht)&&f.allowAutoMargin(He,Rt(ht))}},Q.swap=function(He,Ge){for(var dt=function(kt,St){var Et,wt,Nt=[];for(Et=0;Et<St.length;Et++){var _t=[],Mt=kt._fullData[St[Et]].xaxis,Pt=kt._fullData[St[Et]].yaxis;if(Mt&&Pt){for(wt=0;wt<Nt.length;wt++)-1===Nt[wt].x.indexOf(Mt)&&-1===Nt[wt].y.indexOf(Pt)||_t.push(wt);if(_t.length){var Zt,$t=Nt[_t[0]];if(_t.length>1)for(wt=1;wt<_t.length;wt++)Wt($t.x,(Zt=Nt[_t[wt]]).x),Wt($t.y,Zt.y);Wt($t.x,[Mt]),Wt($t.y,[Pt])}else Nt.push({x:[Mt],y:[Pt]})}}return Nt}(He,Ge),ht=0;ht<dt.length;ht++)Ht(He,dt[ht].x,dt[ht].y)}},4322:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(50606).BADNUM,k=C.isArrayOrTypedArray,T=C.isDateTime,v=C.cleanNumber,c=Math.round;function i(a,o){return o?I(a):"number"==typeof a}function s(a){return Math.max(1,(a-1)/1e3)}se.exports=function(a,o,l){var p,u=a,d=l.noMultiCategory;if(k(u)&&!u.length)return"-";if(!d&&k((p=u)[0])&&k(p[1]))return"multicategory";if(d&&Array.isArray(u[0])){for(var g=[],h=0;h<u.length;h++)if(k(u[h]))for(var w=0;w<u[h].length;w++)g.push(u[h][w]);u=g}if(function(p,_){for(var x=p.length,b=s(x),M=0,m=0,D={},S=0;S<x;S+=b){var O=p[c(S)],P=String(O);D[P]||(D[P]=1,T(O,_)&&M++,I(O)&&m++)}return M>2*m}(u,o))return"date";var y="strict"!==l.autotypenumbers;return function(p,_){for(var x=p.length,b=s(x),M=0,m=0,D={},S=0;S<x;S+=b){var O=p[c(S)],P=String(O);if(!D[P]){D[P]=1;var R=typeof O;"boolean"===R?m++:(_?v(O)!==f:"number"===R)?M++:"string"===R&&m++}}return m>2*M}(u,y)?"category":function(p,_){for(var x=p.length,b=0;b<x;b++)if(i(p[b],_))return!0;return!1}(u,y)?"linear":"-"}},71453:function(se,U,r){"use strict";var I=r(92770),C=r(73972),f=r(71828),k=r(44467),T=r(85501),v=r(13838),c=r(26218),i=r(38701),s=r(96115),a=r(89426),o=r(15258),l=r(92128),u=r(21994),d=r(85555).WEEKDAY_PATTERN,g=r(85555).HOUR_PATTERN;function h(p,_,x){function b(F,B){return f.coerce(p,_,v.rangebreaks,F,B)}if(b("enabled")){var M=b("bounds");if(M&&M.length>=2){var m,D,S="";if(2===M.length)for(m=0;m<2;m++)if(D=y(M[m])){S=d;break}var O=b("pattern",S);if(O===d)for(m=0;m<2;m++)(D=y(M[m]))&&(_.bounds[m]=M[m]=D-1);if(O)for(m=0;m<2;m++)switch(D=M[m],O){case d:if(!I(D)||(D=+D)!==Math.floor(D)||D<0||D>=7)return void(_.enabled=!1);_.bounds[m]=M[m]=D;break;case g:if(!I(D)||(D=+D)<0||D>24)return void(_.enabled=!1);_.bounds[m]=M[m]=D}if(!1===x.autorange){var P=x.range;if(P[0]<P[1]){if(M[0]<P[0]&&M[1]>P[1])return void(_.enabled=!1)}else if(M[0]>P[0]&&M[1]<P[1])return void(_.enabled=!1)}}else{var R=b("values");if(!R||!R.length)return void(_.enabled=!1);b("dvalue")}}}se.exports=function(p,_,x,b,M){var m,D=b.letter,S=b.font||{},O=b.splomStash||{},P=x("visible",!b.visibleDflt),F=_.type||(_._template||{}).type||"-";"date"===F&&(C.getComponentMethod("calendars","handleDefaults")(p,_,"calendar",b.calendar),b.noTicklabelmode||(m=x("ticklabelmode")));var B="";b.noTicklabelposition&&"multicategory"!==F||(B=f.coerce(p,_,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===m?["outside","inside"]:"x"===D?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),b.noTicklabeloverflow||x("ticklabeloverflow",-1!==B.indexOf("inside")?"hide past domain":"category"===F||"multicategory"===F?"allow":"hide past div"),u(_,M);var J=!_.isValidRange(p.range);J&&b.reverseDflt&&(J="reversed"),!x("autorange",J)||"linear"!==F&&"-"!==F||x("rangemode"),x("range"),_.cleanRange(),o(p,_,x,b),"category"===F||b.noHover||x("hoverformat");var z=x("color"),$=z!==v.color.dflt?z:S.color,G=O.label||M._dfltTitle[D];if(a(p,_,x,F,b),!P)return _;x("title.text",G),f.coerceFont(x,"title.font",{family:S.family,size:f.bigFont(S.size),color:$}),c(p,_,x,F);var H=b.hasMinor;if(H&&(k.newContainer(_,"minor"),c(p,_,x,F,{isMinor:!0})),s(p,_,x,F,b),i(p,_,x,b),H){var X=b.isMinor;b.isMinor=!0,i(p,_,x,b),b.isMinor=X}l(p,_,x,{dfltColor:z,bgColor:b.bgColor,showGrid:b.showGrid,hasMinor:H,attributes:v}),!H||_.minor.ticks||_.minor.showgrid||delete _.minor,(_.showline||_.ticks)&&x("mirror");var K,ue="multicategory"===F;if(b.noTickson||"category"!==F&&!ue||!_.ticks&&!_.showgrid||(ue&&(K="boundaries"),"boundaries"===x("tickson",K)&&delete _.ticklabelposition),ue&&x("showdividers")&&(x("dividercolor"),x("dividerwidth")),"date"===F)if(T(p,_,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:h}),_.rangebreaks.length){for(var ae=0;ae<_.rangebreaks.length;ae++)if(_.rangebreaks[ae].pattern===d){_._hasDayOfWeekBreaks=!0;break}if(u(_,M),M._has("scattergl")||M._has("splom"))for(var ne=0;ne<b.data.length;ne++){var Q=b.data[ne];"scattergl"!==Q.type&&"splom"!==Q.type||(Q.visible=!1,f.warn(Q.type+" traces do not work on axes with rangebreaks. Setting trace "+Q.index+" to `visible: false`."))}}else delete _.rangebreaks;return _};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(p){if("string"==typeof p)return w[p.substr(0,3).toLowerCase()]}},12663:function(se,U,r){"use strict";var I=r(31562),C=I.FORMAT_LINK,f=I.DATE_FORMAT_LINK;function k(v,c){return["Sets the "+v+" formatting rule"+(c?"for `"+c+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+C+"."].join(" ")}function T(v,c){return k(v,c)+[" And for dates see: "+f+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}se.exports={axisHoverFormat:function(v,c){return{valType:"string",dflt:"",editType:"none",description:(c?k:T)("hover text",v)+["By default the values are formatted using "+(c?"generic number format":"`"+v+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:k,descriptionWithDates:T}},41675:function(se,U,r){"use strict";var I=r(73972),C=r(85555);function f(k,T){if(T&&T.length)for(var v=0;v<T.length;v++)if(T[v][k])return!0;return!1}U.id2name=function(k){if("string"==typeof k&&k.match(C.AX_ID_PATTERN)){var T=k.split(" ")[0].substr(1);return"1"===T&&(T=""),k.charAt(0)+"axis"+T}},U.name2id=function(k){if(k.match(C.AX_NAME_PATTERN)){var T=k.substr(5);return"1"===T&&(T=""),k.charAt(0)+T}},U.cleanId=function(k,T,v){var c=/( domain)$/.test(k);if("string"==typeof k&&k.match(C.AX_ID_PATTERN)&&(!T||k.charAt(0)===T)&&(!c||v)){var i=k.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===i&&(i=""),k.charAt(0)+i+(c&&v?" domain":"")}},U.list=function(k,T,v){var c=k._fullLayout;if(!c)return[];var i,s=U.listIds(k,T),a=new Array(s.length);for(i=0;i<s.length;i++){var o=s[i];a[i]=c[o.charAt(0)+"axis"+o.substr(1)]}if(!v){var l=c._subplots.gl3d||[];for(i=0;i<l.length;i++){var u=c[l[i]];T?a.push(u[T+"axis"]):a.push(u.xaxis,u.yaxis,u.zaxis)}}return a},U.listIds=function(k,T){var v=k._fullLayout;if(!v)return[];var c=v._subplots;return T?c[T+"axis"]:c.xaxis.concat(c.yaxis)},U.getFromId=function(k,T,v){var c=k._fullLayout;return T=void 0===T||"string"!=typeof T?T:T.replace(" domain",""),"x"===v?T=T.replace(/y[0-9]*/,""):"y"===v&&(T=T.replace(/x[0-9]*/,"")),c[U.id2name(T)]},U.getFromTrace=function(k,T,v){var c=k._fullLayout,i=null;if(I.traceIs(T,"gl3d")){var s=T.scene;"scene"===s.substr(0,5)&&(i=c[s][v+"axis"])}else i=U.getFromId(k,T[v+"axis"]||v);return i},U.idSort=function(k,T){var v=k.charAt(0),c=T.charAt(0);return v!==c?v>c?1:-1:+(k.substr(1)||1)-+(T.substr(1)||1)},U.ref2id=function(k){return!!/^[xyz]/.test(k)&&k.split(" ")[0]},U.isLinked=function(k,T){return f(T,k._axisMatchGroups)||f(T,k._axisConstraintGroups)}},15258:function(se){"use strict";se.exports=function(U,r,I,C){if("category"===r.type){var f,k=U.categoryarray,T=Array.isArray(k)&&k.length>0;T&&(f="array");var v,c=I("categoryorder",f);"array"===c&&(v=I("categoryarray")),T||"array"!==c||(c=r.categoryorder="trace"),"trace"===c?r._initialCategories=[]:"array"===c?r._initialCategories=v.slice():(v=function(i,s){var a,o,l,u=s.dataAttr||i._id.charAt(0),d={};if(s.axData)a=s.axData;else for(a=[],o=0;o<s.data.length;o++){var g=s.data[o];g[u+"axis"]===i._id&&a.push(g)}for(o=0;o<a.length;o++){var h=a[o][u];for(l=0;l<h.length;l++){var w=h[l];null!=w&&(d[w]=1)}}return Object.keys(d)}(r,C).sort(),"category ascending"===c?r._initialCategories=v:"category descending"===c&&(r._initialCategories=v.reverse()))}}},66287:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(50606),k=f.ONEDAY,T=f.ONEWEEK;U.dtick=function(v,c){var i="log"===c,s="date"===c,a="category"===c,o=s?k:1;if(!v)return o;if(I(v))return(v=Number(v))<=0?o:a?Math.max(1,Math.round(v)):s?Math.max(.1,v):v;if("string"!=typeof v||!s&&!i)return o;var l=v.charAt(0),u=v.substr(1);return(u=I(u)?Number(u):0)<=0||!(s&&"M"===l&&u===Math.round(u)||i&&"L"===l||i&&"D"===l&&(1===u||2===u))?o:v},U.tick0=function(v,c,i,s){return"date"===c?C.cleanDate(v,C.dateTick0(i,s%T==0?1:0)):"D1"!==s&&"D2"!==s?I(v)?Number(v):0:void 0}},85555:function(se,U,r){"use strict";var I=r(30587).counter;se.exports={idRegex:{x:I("x","( domain)?"),y:I("y","( domain)?")},attrRegex:I("[xy]axis"),xAxisMatch:I("xaxis"),yAxisMatch:I("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function(se,U,r){"use strict";var I=r(71828),C=r(71739),f=r(41675).id2name,k=r(13838),T=r(42449),v=r(21994),c=r(50606).ALMOST_EQUAL,i=r(18783).FROM_BL;function s(h,w,y){var p=y.axIds,_=y.layoutOut,x=y.hasImage,b=_._axisConstraintGroups,M=_._axisMatchGroups,m=w._id,D=m.charAt(0),S=((_._splomAxes||{})[D]||{})[m]||{},O=w._id,P="x"===O.charAt(0);function R(ie,le){return I.coerce(h,w,k,ie,le)}w._matchGroup=null,w._constraintGroup=null,R("constrain",x?"domain":"range"),I.coerce(h,w,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var F,B,J=w.type,z=[];for(F=0;F<p.length;F++)(B=p[F])!==O&&_[f(B)].type===J&&z.push(B);var $=o(b,O);if($){var G=[];for(F=0;F<z.length;F++)$[B=z[F]]||G.push(B);z=G}var H,X,K=z.length;K&&(h.matches||S.matches)&&(H=I.coerce(h,w,{matches:{valType:"enumerated",values:z,dflt:-1!==z.indexOf(S.matches)?S.matches:void 0}},"matches"));var ue=x&&!P?w.anchor:void 0;if(K&&!H&&(h.scaleanchor||ue)&&(X=I.coerce(h,w,{scaleanchor:{valType:"enumerated",values:z}},"scaleanchor",ue)),H){w._matchGroup=l(M,O,H,1);var ae=_[f(H)],ne=a(_,w)/a(_,ae);P!==("x"===H.charAt(0))&&(ne=(P?"x":"y")+ne),l(b,O,H,ne)}else h.matches&&-1!==p.indexOf(h.matches)&&I.warn("ignored "+w._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(X){var Q=R("scaleratio");Q||(Q=w.scaleratio=1),l(b,O,X,Q)}else h.scaleanchor&&-1!==p.indexOf(h.scaleanchor)&&I.warn("ignored "+w._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function a(h,w){var y=w.domain;return y||(y=h[f(w.overlaying)].domain),y[1]-y[0]}function o(h,w){for(var y=0;y<h.length;y++)if(h[y][w])return h[y];return null}function l(h,w,y,p){var _,x,b,M,m,D=o(h,w);null===D?((D={})[w]=1,m=h.length,h.push(D)):m=h.indexOf(D);var S=Object.keys(D);for(_=0;_<h.length;_++)if(b=h[_],_!==m&&b[y]){var O=b[y];for(x=0;x<S.length;x++)b[M=S[x]]=u(O,u(p,D[M]));return void h.splice(m,1)}if(1!==p)for(x=0;x<S.length;x++){var P=S[x];D[P]=u(p,D[P])}D[y]=1}function u(h,w){var y,p,_="",x="";"string"==typeof h&&(y=(_=h.match(/^[xy]*/)[0]).length,h=+h.substr(y)),"string"==typeof w&&(p=(x=w.match(/^[xy]*/)[0]).length,w=+w.substr(p));var b=h*w;return y||p?y&&p&&_.charAt(0)!==x.charAt(0)?y===p?b:(y>p?_.substr(p):x.substr(y))+b:_+x+h*w:b}function d(h,w){for(var y=w._size,p=y.h/y.w,_={},x=Object.keys(h),b=0;b<x.length;b++){var M=x[b],m=h[M];if("string"==typeof m){var D=m.match(/^[xy]*/)[0],S=D.length;m=+m.substr(S);for(var O="y"===D.charAt(0)?p:1/p,P=0;P<S;P++)m*=O}_[M]=m}return _}function g(h,w){var y=h._inputDomain,_=y[0]+(y[1]-y[0])*i[h.constraintoward];h.domain=h._input.domain=[_+(y[0]-_)/w,_+(y[1]-_)/w],h.setScale()}U.handleDefaults=function(h,w,y){var p,_,x,b,M,m,D,S,O=y.axIds,P=y.axHasImage,R=w._axisConstraintGroups=[],F=w._axisMatchGroups=[];for(p=0;p<O.length;p++)s(M=h[b=f(O[p])],m=w[b],{axIds:O,layoutOut:w,hasImage:P[b]});function B(ae,ne){for(p=0;p<ae.length;p++)for(x in _=ae[p])w[f(x)][ne]=_}for(B(F,"_matchGroup"),p=0;p<R.length;p++)for(x in _=R[p])if((m=w[f(x)]).fixedrange){for(var J in _){var z=f(J);!1===(h[z]||{}).fixedrange&&I.warn("fixedrange was specified as false for axis "+z+" but was overridden because another axis in its constraint group has fixedrange true"),w[z].fixedrange=!0}break}for(p=0;p<R.length;){for(x in _=R[p]){(m=w[f(x)])._matchGroup&&Object.keys(m._matchGroup).length===Object.keys(_).length&&(R.splice(p,1),p--);break}p++}B(R,"_constraintGroup");var $=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],G=!1,H=!1;function X(){S=m[D],"rangebreaks"===D&&(H=m._hasDayOfWeekBreaks)}for(p=0;p<F.length;p++){_=F[p];for(var K=0;K<$.length;K++){var ue;for(x in D=$[K],S=null,_)if(M=h[b=f(x)],D in(m=w[b])){if(!m.matches&&(ue=m,D in M)){X();break}null===S&&D in M&&X()}if("range"===D&&S&&(G=!0),"autorange"===D&&null===S&&G&&(S=!1),null===S&&D in ue&&(S=ue[D]),null!==S)for(x in _)(m=w[f(x)])[D]="range"===D?S.slice():S,"rangebreaks"===D&&(m._hasDayOfWeekBreaks=H,v(m,w))}}},U.enforce=function(h){var w,y,p,_,x,b,M,m,D=h._fullLayout,S=D._axisConstraintGroups||[];for(w=0;w<S.length;w++){p=d(S[w],D);var O=Object.keys(p),P=1/0,R=0,F=1/0,B={},J={},z=!1;for(y=0;y<O.length;y++)J[_=O[y]]=x=D[f(_)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),B[_]=b=Math.abs(x._m)/p[_],P=Math.min(P,b),"domain"!==x.constrain&&x._constraintShrinkable||(F=Math.min(F,b)),delete x._constraintShrinkable,R=Math.max(R,b),"domain"===x.constrain&&(z=!0);if(!(P>c*R)||z)for(y=0;y<O.length;y++)if(b=B[_=O[y]],M=(x=J[_]).constrain,b!==F||"domain"===M)if(m=b/F,"range"===M)T(x,m);else{var $=x._inputDomain,G=(x.domain[1]-x.domain[0])/($[1]-$[0]),H=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if((m/=G)*H<1){x.domain=x._input.domain=$.slice(),T(x,m);continue}if(H<1&&(x.range=x._input.range=x._inputRange.slice(),m*=H),x.autorange){var X=x.r2l(x.range[0]),K=x.r2l(x.range[1]),ue=(X+K)/2,ae=ue,ne=ue,Q=Math.abs(K-ue),ie=ue-Q*m*1.0001,le=ue+Q*m*1.0001,fe=C.makePadFn(D,x,0),he=C.makePadFn(D,x,1);g(x,m);var pe,xe,Ee=Math.abs(x._m),Re=C.concatExtremes(h,x),ke=Re.min,Te=Re.max;for(xe=0;xe<ke.length;xe++)(pe=ke[xe].val-fe(ke[xe])/Ee)>ie&&pe<ae&&(ae=pe);for(xe=0;xe<Te.length;xe++)(pe=Te[xe].val+he(Te[xe])/Ee)<le&&pe>ne&&(ne=pe);m/=(ne-ae)/(2*Q),ae=x.l2r(ae),ne=x.l2r(ne),x.range=x._input.range=X<K?[ae,ne]:[ne,ae]}g(x,m)}}},U.getAxisGroup=function(h,w){for(var y=h._axisMatchGroups,p=0;p<y.length;p++)if(y[p][w])return"g"+p;return w},U.clean=function(h,w){if(w._inputDomain){for(var y=!1,p=w._id,_=h._fullLayout._axisConstraintGroups,x=0;x<_.length;x++)if(_[x][p]){y=!0;break}y&&"domain"===w.constrain||(w._input.domain=w.domain=w._inputDomain,delete w._inputDomain)}}},29323:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.numberFormat,k=r(84267),T=r(38520),v=r(73972),c=C.strTranslate,i=r(63893),s=r(7901),a=r(91424),o=r(30211),l=r(89298),u=r(6964),d=r(28569),g=r(64505),h=g.selectingOrDrawing,w=g.freeMode,y=r(18783).FROM_TL,p=r(33306),_=r(61549).redrawReglTraces,x=r(74875),b=r(41675).getFromId,M=r(47322).prepSelect,m=r(47322).clearOutline,D=r(47322).selectOnClick,S=r(42449),O=r(85555),P=O.MINDRAG,R=O.MINZOOM,F=!0;function B(pe,xe,Ee,Re){var ke=C.ensureSingle(pe.draglayer,xe,Ee,function(Te){Te.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",pe.id)});return ke.call(u,Re),ke.node()}function J(pe,xe,Ee,Re,ke,Te,we){var je=B(pe,"rect",xe,Ee);return I.select(je).call(a.setRect,Re,ke,Te,we),je}function z(pe,xe){for(var Ee=0;Ee<pe.length;Ee++)if(!pe[Ee].fixedrange)return xe;return""}function $(pe,xe,Ee,Re,ke){for(var Te=0;Te<pe.length;Te++){var we=pe[Te];if(!we.fixedrange)if(we.rangebreaks){var je="y"===we._id.charAt(0),Ie=je?1-Ee:Ee;Re[we._name+".range[0]"]=we.l2r(we.p2l((je?1-xe:xe)*we._length)),Re[we._name+".range[1]"]=we.l2r(we.p2l(Ie*we._length))}else{var ge=we._rl[0],me=we._rl[1]-ge;Re[we._name+".range[0]"]=we.l2r(ge+me*xe),Re[we._name+".range[1]"]=we.l2r(ge+me*Ee)}}if(ke&&ke.length){var ce=(xe+(1-Ee))/2;$(ke,ce,1-ce,Re,[])}}function G(pe,xe){for(var Ee=0;Ee<pe.length;Ee++){var Re=pe[Ee];if(!Re.fixedrange)if(Re.rangebreaks){var ke=Re._length,Te=(Re.p2l(0+xe)-Re.p2l(0)+(Re.p2l(ke+xe)-Re.p2l(ke)))/2;Re.range=[Re.l2r(Re._rl[0]-Te),Re.l2r(Re._rl[1]-Te)]}else Re.range=[Re.l2r(Re._rl[0]-xe/Re._m),Re.l2r(Re._rl[1]-xe/Re._m)]}}function H(pe){return 1-(pe>=0?Math.min(pe,.9):1/(1/Math.max(pe,-.3)+3.222))}function X(pe,xe,Ee,Re,ke){return pe.append("path").attr("class","zoombox").style({fill:xe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",c(Ee,Re)).attr("d",ke+"Z")}function K(pe,xe,Ee){return pe.append("path").attr("class","zoombox-corners").style({fill:s.background,stroke:s.defaultLine,"stroke-width":1,opacity:0}).attr("transform",c(xe,Ee)).attr("d","M0,0Z")}function ue(pe,xe,Ee,Re,ke,Te){pe.attr("d",Re+"M"+Ee.l+","+Ee.t+"v"+Ee.h+"h"+Ee.w+"v-"+Ee.h+"h-"+Ee.w+"Z"),ae(pe,xe,ke,Te)}function ae(pe,xe,Ee,Re){Ee||(pe.transition().style("fill",Re>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),xe.transition().style("opacity",1).duration(200))}function ne(pe){I.select(pe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(pe){F&&pe.data&&pe._context.showTips&&(C.notifier(C._(pe,"Double-click to zoom back out"),"long"),F=!1)}function ie(pe){var xe=Math.floor(Math.min(pe.b-pe.t,pe.r-pe.l,R)/2);return"M"+(pe.l-3.5)+","+(pe.t-.5+xe)+"h3v"+-xe+"h"+xe+"v-3h-"+(xe+3)+"ZM"+(pe.r+3.5)+","+(pe.t-.5+xe)+"h-3v"+-xe+"h"+-xe+"v-3h"+(xe+3)+"ZM"+(pe.r+3.5)+","+(pe.b+.5-xe)+"h-3v"+xe+"h"+-xe+"v3h"+(xe+3)+"ZM"+(pe.l-3.5)+","+(pe.b+.5-xe)+"h3v"+xe+"h"+xe+"v3h-"+(xe+3)+"Z"}function le(pe,xe,Ee,Re,ke){for(var Te,we,je,Ce,Ie=!1,ge={},me={},ce=(ke||{}).xaHash,Ae=(ke||{}).yaHash,Ne=0;Ne<xe.length;Ne++){var De=xe[Ne];for(Te in Ee)if(De[Te]){for(je in De)ke&&(ce[je]||Ae[je])||("x"===je.charAt(0)?Ee:Re)[je]||(ge[je]=Te);for(we in Re)ke&&(ce[we]||Ae[we])||!De[we]||(Ie=!0)}for(we in Re)if(De[we])for(Ce in De)ke&&(ce[Ce]||Ae[Ce])||("x"===Ce.charAt(0)?Ee:Re)[Ce]||(me[Ce]=we)}Ie&&(C.extendFlat(ge,me),me={});var qe={},Ke=[];for(je in ge){var be=b(pe,je);Ke.push(be),qe[be._id]=be}var Oe={},Le=[];for(Ce in me){var Ue=b(pe,Ce);Le.push(Ue),Oe[Ue._id]=Ue}return{xaHash:qe,yaHash:Oe,xaxes:Ke,yaxes:Le,xLinks:ge,yLinks:me,isSubplotConstrained:Ie}}function fe(pe,xe){if(T){var Ee=void 0!==pe.onwheel?"wheel":"mousewheel";pe._onwheel&&pe.removeEventListener(Ee,pe._onwheel),pe._onwheel=xe,pe.addEventListener(Ee,xe,{passive:!1})}else void 0!==pe.onwheel?pe.onwheel=xe:void 0!==pe.onmousewheel?pe.onmousewheel=xe:pe.isAddedWheelEvent||(pe.isAddedWheelEvent=!0,pe.addEventListener("wheel",xe,{passive:!1}))}function he(pe){var xe=[];for(var Ee in pe)xe.push(pe[Ee]);return xe}se.exports={makeDragBox:function(pe,xe,Ee,Re,ke,Te,we,je){var Ce,Ie,ge,me,ce,Ae,Ne,De,qe,Ke,be,Oe,Le,Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt,vt=pe._fullLayout._zoomlayer,mt=we+je==="nsew",Lt=1===(we+je).length;function Ft(){if(qe=(Ce=xe.xaxis)._length,Ke=(Ie=xe.yaxis)._length,Ne=Ce._offset,De=Ie._offset,(ge={})[Ce._id]=Ce,(me={})[Ie._id]=Ie,we&&je)for(var rn=xe.overlays,yn=0;yn<rn.length;yn++){var pn=rn[yn].xaxis;ge[pn._id]=pn;var bn=rn[yn].yaxis;me[bn._id]=bn}ce=he(ge),Ae=he(me),Le=z(ce,je),Ue=z(Ae,we),Ze=!Ue&&!Le,Oe=le(pe,pe._fullLayout._axisMatchGroups,ge,me);var In=(be=le(pe,pe._fullLayout._axisConstraintGroups,ge,me,Oe)).isSubplotConstrained||Oe.isSubplotConstrained;We=je||In,et=we||In;var _n=pe._fullLayout;nt=_n._has("scattergl"),ct=_n._has("splom"),yt=_n._has("svg")}Ee+=xe.yaxis._shift,Ft();var rn,Rt=(rn=Ue+Le)?"nsew"===rn?mt?"":"pan"===pe._fullLayout.dragmode?"move":"crosshair":rn.toLowerCase()+"-resize":"pointer",Wt=J(xe,we+je+"drag",Rt,Ee,Re,ke,Te);if(Ze&&!mt)return Wt.onmousedown=null,Wt.style.pointerEvents="none",Wt;var Ht,it,st,Je,ot,pt,xt,He,Ge,dt,ht={element:Wt,gd:pe,plotinfo:xe};function kt(){ht.plotinfo.selection=!1,m(pe)}function St(rn,yn){var yr,fr,Er,gr,mr,pn=ht.gd;if(pn._fullLayout._activeShapeIndex>=0)pn._fullLayout._deactivateShape(pn);else{var bn=pn._fullLayout.clickmode;if(ne(pn),2!==rn||Lt||function on(){if(!pe._transitioningWithDuration){var rn=pe._context.doubleClick,yn=[];Le&&(yn=yn.concat(ce)),Ue&&(yn=yn.concat(Ae)),Oe.xaxes&&(yn=yn.concat(Oe.xaxes)),Oe.yaxes&&(yn=yn.concat(Oe.yaxes));var pn,bn,In,_n={};if("reset+autosize"===rn)for(rn="autosize",bn=0;bn<yn.length;bn++)if((pn=yn[bn])._rangeInitial&&(pn.range[0]!==pn._rangeInitial[0]||pn.range[1]!==pn._rangeInitial[1])||!pn._rangeInitial&&!pn.autorange){rn="reset";break}if("autosize"===rn)for(bn=0;bn<yn.length;bn++)(pn=yn[bn]).fixedrange||(_n[pn._name+".autorange"]=!0);else if("reset"===rn)for((Le||be.isSubplotConstrained)&&(yn=yn.concat(be.xaxes)),Ue&&!be.isSubplotConstrained&&(yn=yn.concat(be.yaxes)),be.isSubplotConstrained&&(Le?Ue||(yn=yn.concat(Ae)):yn=yn.concat(ce)),bn=0;bn<yn.length;bn++)(pn=yn[bn]).fixedrange||(pn._rangeInitial?(_n[pn._name+".range[0]"]=(In=pn._rangeInitial)[0],_n[pn._name+".range[1]"]=In[1]):_n[pn._name+".autorange"]=!0);pe.emit("plotly_doubleclick",null),v.call("_guiRelayout",pe,_n)}}(),mt)bn.indexOf("select")>-1&&D(yn,pn,ce,Ae,xe.id,ht),bn.indexOf("event")>-1&&o.click(pn,yn,xe.id);else if(1===rn&&Lt){var In=we?Ie:Ce,_n="s"===we||"w"===je?0:1,qn=In._name+".range["+_n+"]",Wn=(gr=(yr=In).range[fr=_n],mr=Math.abs(gr-yr.range[1-fr]),"date"===yr.type?gr:"log"===yr.type?(Er=Math.ceil(Math.max(0,-Math.log(mr)/Math.LN10))+3,f("."+Er+"g")(Math.pow(10,gr))):(Er=Math.floor(Math.log(Math.abs(gr))/Math.LN10)-Math.floor(Math.log(mr)/Math.LN10)+4,f("."+String(Er)+"g")(gr))),Nn="left",Xn="middle";if(In.fixedrange)return;we?(Xn="n"===we?"top":"bottom","right"===In.side&&(Nn="right")):"e"===je&&(Nn="right"),pn._context.showAxisRangeEntryBoxes&&I.select(Wt).call(i.makeEditable,{gd:pn,immediate:!0,background:pn._fullLayout.paper_bgcolor,text:String(Wn),fill:In.tickfont?In.tickfont.color:"#444",horizontalAlign:Nn,verticalAlign:Xn}).on("edit",function(yr){var fr=In.d2r(yr);void 0!==fr&&v.call("_guiRelayout",pn,qn,fr)})}}}function Et(rn,yn){if(pe._transitioningWithDuration)return!1;var Xn,yr,pn=Math.max(0,Math.min(qe,Ct*rn+Ht)),bn=Math.max(0,Math.min(Ke,Dt*yn+it)),In=Math.abs(pn-Ht),_n=Math.abs(bn-it);function qn(){xt="",st.r=st.l,st.t=st.b,Ge.attr("d","M0,0Z")}if(st.l=Math.min(Ht,pn),st.r=Math.max(Ht,pn),st.t=Math.min(it,bn),st.b=Math.max(it,bn),be.isSubplotConstrained)In>R||_n>R?(xt="xy",In/qe>_n/Ke?(_n=In*Ke/qe,it>bn?st.t=it-_n:st.b=it+_n):(In=_n*qe/Ke,Ht>pn?st.l=Ht-In:st.r=Ht+In),Ge.attr("d",ie(st))):qn();else if(Oe.isSubplotConstrained)if(In>R||_n>R){xt="xy";var Wn=Math.min(st.l/qe,(Ke-st.b)/Ke),Nn=Math.max(st.r/qe,(Ke-st.t)/Ke);st.l=Wn*qe,st.r=Nn*qe,st.b=(1-Wn)*Ke,st.t=(1-Nn)*Ke,Ge.attr("d",ie(st))}else qn();else!Ue||_n<Math.min(Math.max(.6*In,P),R)?In<P||!Le?qn():(st.t=0,st.b=Ke,xt="x",Ge.attr("d","M"+((Xn=st).l-.5)+","+((yr=it)-R-.5)+"h-3v"+(2*R+1)+"h3ZM"+(Xn.r+.5)+","+(yr-R-.5)+"h3v"+(2*R+1)+"h-3Z")):!Le||In<Math.min(.6*_n,R)?(st.l=0,st.r=qe,xt="y",Ge.attr("d",function(Xn,yr){return"M"+(yr-R-.5)+","+(Xn.t-.5)+"v-3h"+(2*R+1)+"v3ZM"+(yr-R-.5)+","+(Xn.b+.5)+"v3h"+(2*R+1)+"v-3Z"}(st,Ht))):(xt="xy",Ge.attr("d",ie(st)));st.w=st.r-st.l,st.h=st.b-st.t,xt&&(dt=!0),pe._dragged=dt,ue(He,Ge,st,ot,pt,Je),wt(),pe.emit("plotly_relayouting",ut),pt=!0}function wt(){ut={},"xy"!==xt&&"x"!==xt||($(ce,st.l/qe,st.r/qe,ut,be.xaxes),Xt("x",ut)),"xy"!==xt&&"y"!==xt||($(Ae,(Ke-st.b)/Ke,(Ke-st.t)/Ke,ut,be.yaxes),Xt("y",ut))}function Nt(){wt(),ne(pe),cn(),Q(pe)}ht.prepFn=function(rn,yn,pn){var bn=ht.dragmode,In=pe._fullLayout.dragmode;In!==bn&&(ht.dragmode=In),Ft(),Ct=pe._fullLayout._invScaleX,Dt=pe._fullLayout._invScaleY,Ze||(mt?rn.shiftKey?"pan"===In?In="zoom":h(In)||(In="pan"):rn.ctrlKey&&(In="pan"):In="pan"),ht.minDrag=w(In)?1:void 0,h(In)?(ht.xaxes=ce,ht.yaxes=Ae,M(rn,yn,pn,ht,In)):(ht.clickFn=St,h(bn)&&kt(),Ze||("zoom"===In?(ht.moveFn=Et,ht.doneFn=Nt,ht.minDrag=1,function(_n,qn,Wn){var Nn=Wt.getBoundingClientRect();Ht=qn-Nn.left,it=Wn-Nn.top,pe._fullLayout._calcInverseTransform(pe);var Xn=C.apply3DTransform(pe._fullLayout._invTransform)(Ht,it);st={l:Ht=Xn[0],r:Ht,w:0,t:it=Xn[1],b:it,h:0},Je=pe._hmpixcount?pe._hmlumcount/pe._hmpixcount:k(pe._fullLayout.plot_bgcolor).getLuminance(),pt=!1,xt="xy",dt=!1,He=X(vt,Je,Ne,De,ot="M0,0H"+qe+"V"+Ke+"H0V0"),Ge=K(vt,Ne,De)}(0,yn,pn)):"pan"===In&&(ht.moveFn=$t,ht.doneFn=cn))),pe._fullLayout._redrag=function(){var _n=pe._dragdata;_n&&_n.element===Wt&&(h(pe._fullLayout.dragmode)||(Ft(),tn([0,0,qe,Ke]),ht.moveFn(_n.dx,_n.dy)))}},d.init(ht);var _t=[0,0,qe,Ke],Mt=null,Pt=O.REDRAWDELAY,Zt=xe.mainplot?pe._fullLayout._plots[xe.mainplot]:xe;function $t(rn,yn){if(rn*=Ct,yn*=Dt,!pe._transitioningWithDuration){if(pe._fullLayout._replotting=!0,"ew"===Le||"ns"===Ue){var pn=Le?-rn:0,bn=Ue?-yn:0;if(Oe.isSubplotConstrained){if(Le&&Ue){var In=(rn/qe-yn/Ke)/2;pn=-(rn=In*qe),bn=-(yn=-In*Ke)}Ue?pn=-bn*qe/Ke:bn=-pn*Ke/qe}return Le&&(G(ce,rn),Xt("x")),Ue&&(G(Ae,yn),Xt("y")),tn([pn,bn,qe,Ke]),dn(),void pe.emit("plotly_relayouting",ut)}var _n,qn,Wn="w"===Le==("n"===Ue)?1:-1;if(Le&&Ue&&(be.isSubplotConstrained||Oe.isSubplotConstrained)){var Nn=(rn/qe+Wn*yn/Ke)/2;rn=Nn*qe,yn=Wn*Nn*Ke}if("w"===Le?rn=Er(ce,0,rn):"e"===Le?rn=Er(ce,1,-rn):Le||(rn=0),"n"===Ue?yn=Er(Ae,1,yn):"s"===Ue?yn=Er(Ae,0,-yn):Ue||(yn=0),_n="w"===Le?rn:0,qn="n"===Ue?yn:0,be.isSubplotConstrained&&!Oe.isSubplotConstrained||Oe.isSubplotConstrained&&Le&&Ue&&Wn>0){var Xn;if(Oe.isSubplotConstrained||!Le&&1===Ue.length){for(Xn=0;Xn<ce.length;Xn++)ce[Xn].range=ce[Xn]._r.slice(),S(ce[Xn],1-yn/Ke);_n=(rn=yn*qe/Ke)/2}if(Oe.isSubplotConstrained||!Ue&&1===Le.length){for(Xn=0;Xn<Ae.length;Xn++)Ae[Xn].range=Ae[Xn]._r.slice(),S(Ae[Xn],1-rn/qe);qn=(yn=rn*Ke/qe)/2}}Oe.isSubplotConstrained&&Ue||Xt("x"),Oe.isSubplotConstrained&&Le||Xt("y");var yr=qe-rn,fr=Ke-yn;!Oe.isSubplotConstrained||Le&&Ue||(Le?(qn=_n?0:rn*Ke/qe,fr=yr*Ke/qe):(_n=qn?0:yn*qe/Ke,yr=fr*qe/Ke)),tn([_n,qn,yr,fr]),dn(),pe.emit("plotly_relayouting",ut)}function Er(gr,mr,zr){for(var Jt,an,Sn=1-mr,Ln=0;Ln<gr.length;Ln++){var Vn=gr[Ln];if(!Vn.fixedrange){Jt=Vn,an=Vn._rl[Sn]+(Vn._rl[mr]-Vn._rl[Sn])/H(zr/Vn._length);var cr=Vn.l2r(an);!1!==cr&&void 0!==cr&&(Vn.range[mr]=cr)}}return Jt._length*(Jt._rl[mr]-an)/(Jt._rl[mr]-Jt._rl[Sn])}}function Xt(rn,yn){for(var pn=Oe.isSubplotConstrained?{x:Ae,y:ce}[rn]:Oe[rn+"axes"],bn=Oe.isSubplotConstrained?{x:ce,y:Ae}[rn]:[],In=0;In<pn.length;In++){var _n=pn[In],qn=_n._id,Wn=Oe.xLinks[qn]||Oe.yLinks[qn],Nn=bn[0]||ge[Wn]||me[Wn];Nn&&(yn?(yn[_n._name+".range[0]"]=yn[Nn._name+".range[0]"],yn[_n._name+".range[1]"]=yn[Nn._name+".range[1]"]):_n.range=Nn.range.slice())}}function dn(){var rn,yn=[];function pn(qn){for(rn=0;rn<qn.length;rn++)qn[rn].fixedrange||yn.push(qn[rn]._id)}function bn(qn,Wn){for(rn=0;rn<qn.length;rn++){var Nn=qn[rn],Xn=Nn[Wn];Nn.fixedrange||"sync"!==Xn.tickmode||yn.push(Xn._id)}}for(We&&(pn(ce),pn(be.xaxes),pn(Oe.xaxes),bn(xe.overlays,"xaxis")),et&&(pn(Ae),pn(be.yaxes),pn(Oe.yaxes),bn(xe.overlays,"yaxis")),ut={},rn=0;rn<yn.length;rn++){var _n=b(pe,yn[rn]);l.drawOne(pe,_n,{skipTitle:!0}),ut[_n._name+".range[0]"]=_n.range[0],ut[_n._name+".range[1]"]=_n.range[1]}l.redrawComponents(pe,yn)}function cn(){tn([0,0,qe,Ke]),C.syncOrAsync([x.previousPromises,function(){pe._fullLayout._replotting=!1,v.call("_guiRelayout",pe,ut)}],pe)}function tn(rn){var yn,pn,bn,In,_n=pe._fullLayout,qn=_n._plots,Wn=_n._subplots.cartesian;if(ct&&v.subplotsRegistry.splom.drag(pe),nt)for(yn=0;yn<Wn.length;yn++)if(bn=(pn=qn[Wn[yn]]).xaxis,In=pn.yaxis,pn._scene){var Nn=C.simpleMap(bn.range,bn.r2l),Xn=C.simpleMap(In.range,In.r2l);pn._scene.update({range:[Nn[0],Xn[0],Nn[1],Xn[1]]})}if((ct||nt)&&(p(pe),_(pe)),yt){var yr=rn[2]/Ce._length,fr=rn[3]/Ie._length;for(yn=0;yn<Wn.length;yn++){bn=(pn=qn[Wn[yn]]).xaxis,In=pn.yaxis;var Er,gr,mr,zr,an=(et||Oe.isSubplotConstrained)&&!In.fixedrange&&me[In._id];if((We||Oe.isSubplotConstrained)&&!bn.fixedrange&&ge[bn._id]?(Er=yr,mr=je||Oe.isSubplotConstrained?rn[0]:En(bn,Er)):Oe.xaHash[bn._id]?(Er=yr,mr=rn[0]*bn._length/Ce._length):Oe.yaHash[bn._id]?(Er=fr,mr="ns"===Ue?-rn[1]*bn._length/Ie._length:En(bn,Er,{n:"top",s:"bottom"}[Ue])):mr=Fn(bn,Er=Cn(bn,yr,fr)),an?(gr=fr,zr=we||Oe.isSubplotConstrained?rn[1]:En(In,gr)):Oe.yaHash[In._id]?(gr=fr,zr=rn[1]*In._length/Ie._length):Oe.xaHash[In._id]?(gr=yr,zr="ew"===Le?-rn[0]*In._length/Ce._length:En(In,gr,{e:"right",w:"left"}[Le])):zr=Fn(In,gr=Cn(In,yr,fr)),Er||gr){Er||(Er=1),gr||(gr=1);var Sn=bn._offset-mr/Er,Ln=In._offset-zr/gr;pn.clipRect.call(a.setTranslate,mr,zr).call(a.setScale,Er,gr),pn.plot.call(a.setTranslate,Sn,Ln).call(a.setScale,1/Er,1/gr),Er===pn.xScaleFactor&&gr===pn.yScaleFactor||(a.setPointGroupScale(pn.zoomScalePts,Er,gr),a.setTextPointsScale(pn.zoomScaleTxt,Er,gr)),a.hideOutsideRangePoints(pn.clipOnAxisFalseTraces,pn),pn.xScaleFactor=Er,pn.yScaleFactor=gr}}}}function Cn(rn,yn,pn){return rn.fixedrange?0:We&&be.xaHash[rn._id]?yn:et&&(be.isSubplotConstrained?be.xaHash:be.yaHash)[rn._id]?pn:0}function Fn(rn,yn){return yn?(rn.range=rn._r.slice(),S(rn,yn),En(rn,yn)):0}function En(rn,yn,pn){return rn._length*(1-yn)*y[pn||rn.constraintoward||"middle"]}return we.length*je.length!=1&&fe(Wt,function(rn){if(pe._context._scrollZoom.cartesian||pe._fullLayout._enablescrollzoom){if(kt(),pe._transitioningWithDuration)return rn.preventDefault(),void rn.stopPropagation();Ft(),clearTimeout(Mt);var yn=-rn.deltaY;if(isFinite(yn)||(yn=rn.wheelDelta/10),isFinite(yn)){var pn,bn=Math.exp(-Math.min(Math.max(yn,-20),20)/200),In=Zt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),_n=(rn.clientX-In.left)/In.width,qn=(In.bottom-rn.clientY)/In.height;if(We){for(je||(_n=.5),pn=0;pn<ce.length;pn++)Wn(ce[pn],_n,bn);Xt("x"),_t[2]*=bn,_t[0]+=_t[2]*_n*(1/bn-1)}if(et){for(we||(qn=.5),pn=0;pn<Ae.length;pn++)Wn(Ae[pn],qn,bn);Xt("y"),_t[3]*=bn,_t[1]+=_t[3]*(1-qn)*(1/bn-1)}tn(_t),dn(),pe.emit("plotly_relayouting",ut),Mt=setTimeout(function(){pe._fullLayout&&(_t=[0,0,qe,Ke],cn())},Pt),rn.preventDefault()}else C.log("Did not find wheel motion attributes: ",rn)}function Wn(Nn,Xn,yr){if(!Nn.fixedrange){var fr=C.simpleMap(Nn.range,Nn.r2l),Er=fr[0]+(fr[1]-fr[0])*Xn;Nn.range=fr.map(function(gr){return Nn.l2r(Er+(gr-Er)*yr)})}}}),Wt},makeDragger:B,makeRectDragger:J,makeZoombox:X,makeCorners:K,updateZoombox:ue,xyCorners:ie,transitionZoombox:ae,removeZoombox:ne,showDoubleClickNotifier:Q,attachWheelEventHandler:fe}},4305:function(se,U,r){"use strict";var I=r(39898),C=r(30211),f=r(28569),k=r(6964),T=r(29323).makeDragBox,v=r(85555).DRAGGERSIZE;U.initInteractions=function(c){var i=c._fullLayout;if(c._context.staticPlot)I.select(c).selectAll(".drag").remove();else if(i._has("cartesian")||i._has("splom")){Object.keys(i._plots||{}).sort(function(a,o){if((i._plots[a].mainplot&&!0)===(i._plots[o].mainplot&&!0)){var l=a.split("y"),u=o.split("y");return l[0]===u[0]?Number(l[1]||1)-Number(u[1]||1):Number(l[0]||1)-Number(u[0]||1)}return i._plots[a].mainplot?1:-1}).forEach(function(a){var o=i._plots[a],l=o.xaxis,u=o.yaxis;if(!o.mainplot){var d=T(c,o,l._offset,u._offset,l._length,u._length,"ns","ew");d.onmousemove=function(w){c._fullLayout._rehover=function(){c._fullLayout._hoversubplot===a&&c._fullLayout._plots[a]&&C.hover(c,w,a)},C.hover(c,w,a),c._fullLayout._lasthover=d,c._fullLayout._hoversubplot=a},d.onmouseout=function(w){c._dragging||(c._fullLayout._hoversubplot=null,f.unhover(c,w))},c._context.showAxisDragHandles&&(T(c,o,l._offset-v,u._offset-v,v,v,"n","w"),T(c,o,l._offset+l._length,u._offset-v,v,v,"n","e"),T(c,o,l._offset-v,u._offset+u._length,v,v,"s","w"),T(c,o,l._offset+l._length,u._offset+u._length,v,v,"s","e"))}if(c._context.showAxisDragHandles){if(a===l._mainSubplot){var g=l._mainLinePosition;"top"===l.side&&(g-=v),T(c,o,l._offset+.1*l._length,g,.8*l._length,v,"","ew"),T(c,o,l._offset,g,.1*l._length,v,"","w"),T(c,o,l._offset+.9*l._length,g,.1*l._length,v,"","e")}if(a===u._mainSubplot){var h=u._mainLinePosition;"right"!==u.side&&(h-=v),T(c,o,h,u._offset+.1*u._length,v,.8*u._length,"ns",""),T(c,o,h,u._offset+.9*u._length,v,.1*u._length,"s",""),T(c,o,h,u._offset,v,.1*u._length,"n","")}}});var s=i._hoverlayer.node();s.onmousemove=function(a){a.target=c._fullLayout._lasthover,C.hover(c,a,i._hoversubplot)},s.onclick=function(a){a.target=c._fullLayout._lasthover,C.click(c,a)},s.onmousedown=function(a){c._fullLayout._lasthover.onmousedown(a)},U.updateFx(c)}},U.updateFx=function(c){var i=c._fullLayout;k(i._draggers,"pan"===i.dragmode?"move":"crosshair")}},76325:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(41675);se.exports=function(k){return function(T,v){var c=T[k];if(Array.isArray(c))for(var i=I.subplotsRegistry.cartesian,s=i.idRegex,a=v._subplots,o=a.xaxis,l=a.yaxis,u=a.cartesian,d=v._has("cartesian")||v._has("gl2d"),g=0;g<c.length;g++){var h=c[g];if(C.isPlainObject(h)){var w=f.cleanId(h.xref,"x",!1),y=f.cleanId(h.yref,"y",!1),p=s.x.test(w),_=s.y.test(y);if(p||_){d||C.pushUnique(v._basePlotModules,i);var x=!1;p&&-1===o.indexOf(w)&&(o.push(w),x=!0),_&&-1===l.indexOf(y)&&(l.push(y),x=!0),x&&p&&_&&u.push(w+y)}}}}}},93612:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(71828),k=r(74875),T=r(91424),v=r(27659).a0,c=r(41675),i=r(85555),s=r(77922),a=f.ensureSingle;function o(h,w,y){return f.ensureSingle(h,w,y,function(p){p.datum(y)})}function l(h,w,y,p,_){for(var x,b,M,m=i.traceLayerClasses,D=h._fullLayout,S=D._modules,O=[],P=[],R=0;R<S.length;R++){var F=(x=S[R]).name,B=C.modules[F].categories;if(B.svg){var J=x.layerName||F+"layer",z=x.plot;M=(b=v(y,z))[0],y=b[1],M.length&&O.push({i:m.indexOf(J),className:J,plotMethod:z,cdModule:M}),B.zoomScale&&P.push("."+J)}}O.sort(function(H,X){return H.i-X.i});var $=w.plot.selectAll("g.mlayer").data(O,function(H){return H.className});if($.enter().append("g").attr("class",function(H){return H.className}).classed("mlayer",!0).classed("rangeplot",w.isRangePlot),$.exit().remove(),$.order(),$.each(function(H){var X=I.select(this),K=H.className;H.plotMethod(h,w,H.cdModule,X,p,_),-1===i.clipOnAxisFalseQuery.indexOf("."+K)&&T.setClipUrl(X,w.layerClipId,h)}),D._has("scattergl")&&(x=C.getModule("scattergl"),M=v(y,x)[0],x.plot(h,w,M)),!h._context.staticPlot&&(w._hasClipOnAxisFalse&&(w.clipOnAxisFalseTraces=w.plot.selectAll(i.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var G=w.plot.selectAll(P.join(",")).selectAll(".trace");w.zoomScalePts=G.selectAll("path.point"),w.zoomScaleTxt=G.selectAll(".textpoint")}}function u(h,w){var y=w.plotgroup,p=w.id,_=i.layerValue2layerClass[w.xaxis.layer],x=i.layerValue2layerClass[w.yaxis.layer],b=h._fullLayout._hasOnlyLargeSploms;if(w.mainplot){var M=w.mainplotinfo,m=M.plotgroup,D=p+"-x",S=p+"-y";w.minorGridlayer=M.minorGridlayer,w.gridlayer=M.gridlayer,w.zerolinelayer=M.zerolinelayer,a(M.overlinesBelow,"path",D),a(M.overlinesBelow,"path",S),a(M.overaxesBelow,"g",D),a(M.overaxesBelow,"g",S),w.plot=a(M.overplot,"g",p),a(M.overlinesAbove,"path",D),a(M.overlinesAbove,"path",S),a(M.overaxesAbove,"g",D),a(M.overaxesAbove,"g",S),w.xlines=m.select(".overlines-"+_).select("."+D),w.ylines=m.select(".overlines-"+x).select("."+S),w.xaxislayer=m.select(".overaxes-"+_).select("."+D),w.yaxislayer=m.select(".overaxes-"+x).select("."+S)}else if(b)w.xlines=a(y,"path","xlines-above"),w.ylines=a(y,"path","ylines-above"),w.xaxislayer=a(y,"g","xaxislayer-above"),w.yaxislayer=a(y,"g","yaxislayer-above");else{var O=a(y,"g","layer-subplot");w.shapelayer=a(O,"g","shapelayer"),w.imagelayer=a(O,"g","imagelayer"),w.minorGridlayer=a(y,"g","minor-gridlayer"),w.gridlayer=a(y,"g","gridlayer"),w.zerolinelayer=a(y,"g","zerolinelayer"),a(y,"path","xlines-below"),a(y,"path","ylines-below"),w.overlinesBelow=a(y,"g","overlines-below"),a(y,"g","xaxislayer-below"),a(y,"g","yaxislayer-below"),w.overaxesBelow=a(y,"g","overaxes-below"),w.plot=a(y,"g","plot"),w.overplot=a(y,"g","overplot"),w.xlines=a(y,"path","xlines-above"),w.ylines=a(y,"path","ylines-above"),w.overlinesAbove=a(y,"g","overlines-above"),a(y,"g","xaxislayer-above"),a(y,"g","yaxislayer-above"),w.overaxesAbove=a(y,"g","overaxes-above"),w.xlines=y.select(".xlines-"+_),w.ylines=y.select(".ylines-"+x),w.xaxislayer=y.select(".xaxislayer-"+_),w.yaxislayer=y.select(".yaxislayer-"+x)}b||(o(w.minorGridlayer,"g",w.xaxis._id),o(w.minorGridlayer,"g",w.yaxis._id),w.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(c.idSort),o(w.gridlayer,"g",w.xaxis._id),o(w.gridlayer,"g",w.yaxis._id),w.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(c.idSort)),w.xlines.style("fill","none").classed("crisp",!0),w.ylines.style("fill","none").classed("crisp",!0)}function d(h,w){if(h){var y={};for(var p in h.each(function(M){var m=M[0];I.select(this).remove(),g(m,w),y[m]=!0}),w._plots)for(var _=w._plots[p].overlays||[],x=0;x<_.length;x++){var b=_[x];y[b.id]&&b.plot.selectAll(".trace").remove()}}}function g(h,w){w._draggers.selectAll("g."+h).remove(),w._defs.select("#clip"+w._uid+h+"plot").remove()}U.name="cartesian",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=i.idRegex,U.attrRegex=i.attrRegex,U.attributes=r(89502),U.layoutAttributes=r(13838),U.supplyLayoutDefaults=r(86763),U.transitionAxes=r(66847),U.finalizeSubplots=function(h,w){var y,p,_,x=w._subplots,b=x.xaxis,M=x.yaxis,m=x.cartesian,D=m.concat(x.gl2d||[]),S={},O={};for(y=0;y<D.length;y++){var P=D[y].split("y");S[P[0]]=1,O["y"+P[1]]=1}for(y=0;y<b.length;y++)S[p=b[y]]||(_=(h[c.id2name(p)]||{}).anchor,i.idRegex.y.test(_)||(_="y"),m.push(p+_),D.push(p+_),O[_]||(O[_]=1,f.pushUnique(M,_)));for(y=0;y<M.length;y++)O[_=M[y]]||(p=(h[c.id2name(_)]||{}).anchor,i.idRegex.x.test(p)||(p="x"),m.push(p+_),D.push(p+_),S[p]||(S[p]=1,f.pushUnique(b,p)));if(!D.length){for(var R in p="",_="",h)i.attrRegex.test(R)&&("x"===R.charAt(0)?(!p||+R.substr(5)<+p.substr(5))&&(p=R):(!_||+R.substr(5)<+_.substr(5))&&(_=R));p=p?c.name2id(p):"x",_=_?c.name2id(_):"y",b.push(p),M.push(_),m.push(p+_)}},U.plot=function(h,w,y,p){var _,x=h._fullLayout,b=x._subplots.cartesian,M=h.calcdata;if(!Array.isArray(w))for(w=[],_=0;_<M.length;_++)w.push(_);for(_=0;_<b.length;_++){for(var m,D=b[_],S=x._plots[D],O=[],P=0;P<M.length;P++){var R=M[P],F=R[0].trace;F.xaxis+F.yaxis===D&&((-1!==w.indexOf(F.index)||F.carpet)&&(m&&m[0].trace.xaxis+m[0].trace.yaxis===D&&-1!==["tonextx","tonexty","tonext"].indexOf(F.fill)&&-1===O.indexOf(m)&&O.push(m),O.push(R)),m=R)}l(h,S,O,y,p)}},U.clean=function(h,w,y,p){var _,x,b,M=p._plots||{},m=w._plots||{},D=p._subplots||{};if(p._hasOnlyLargeSploms&&!w._hasOnlyLargeSploms)for(b in M)(_=M[b]).plotgroup&&_.plotgroup.remove();var S=p._has&&p._has("gl"),O=w._has&&w._has("gl");if(S&&!O)for(b in M)(_=M[b])._scene&&_._scene.destroy();if(D.xaxis&&D.yaxis){var P=c.listIds({_fullLayout:p});for(x=0;x<P.length;x++){var R=P[x];w[c.id2name(R)]||p._infolayer.selectAll(".g-"+R+"title").remove()}}var F=p._has&&p._has("cartesian"),B=w._has&&w._has("cartesian");if(F&&!B)d(p._cartesianlayer.selectAll(".subplot"),p),p._defs.selectAll(".axesclip").remove(),delete p._axisConstraintGroups,delete p._axisMatchGroups;else if(D.cartesian)for(x=0;x<D.cartesian.length;x++){var J=D.cartesian[x];m[J]||(p._cartesianlayer.selectAll("."+J+",."+J+"-x,."+J+"-y").remove(),g(J,p))}},U.drawFramework=function(h){var w=h._fullLayout,y=function(_){var x,b,M,m,D,S,O=_._fullLayout,P=O._subplots.cartesian,R=P.length,F=[],B=[];for(x=0;x<R;x++){var $=(D=(m=O._plots[M=P[x]]).xaxis)._mainAxis._id+(S=m.yaxis)._mainAxis._id,G=O._plots[$];m.overlays=[],$!==M&&G?(m.mainplot=$,m.mainplotinfo=G,B.push(M)):(m.mainplot=void 0,m.mainplotinfo=void 0,F.push(M))}for(x=0;x<B.length;x++)(m=O._plots[M=B[x]]).mainplotinfo.overlays.push(m);var H=F.concat(B),X=new Array(R);for(x=0;x<R;x++){var K=[M=H[x],(D=(m=O._plots[M]).xaxis).layer,(S=m.yaxis).layer,D.overlaying||"",S.overlaying||""];for(b=0;b<m.overlays.length;b++)K.push(m.overlays[b].id);X[x]=K}return X}(h),p=w._cartesianlayer.selectAll(".subplot").data(y,String);p.enter().append("g").attr("class",function(_){return"subplot "+_[0]}),p.order(),p.exit().call(d,w),p.each(function(_){var x=_[0],b=w._plots[x];b.plotgroup=I.select(this),u(h,b),b.draglayer=a(w._draggers,"g",x)})},U.rangePlot=function(h,w,y){u(h,w),l(h,w,y),k.style(h)},U.toSVG=function(h){var w=h._fullLayout._glimages,y=I.select(h).selectAll(".svg-container");y.filter(function(p,_){return _===y.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var p=this,_=p.toDataURL("image/png");w.append("svg:image").attr({xmlns:s.svg,"xlink:href":_,preserveAspectRatio:"none",x:0,y:0,width:p.style.width,height:p.style.height})})},U.updateFx=r(4305).updateFx},13838:function(se,U,r){"use strict";var I=r(41940),C=r(22399),f=r(79952).P,k=r(1426).extendFlat,T=r(44467).templatedArray,v=r(12663).descriptionWithDates,c=r(50606).ONEDAY,i=r(85555),s=i.HOUR_PATTERN,a=i.WEEKDAY_PATTERN,o={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},l=k({},o,{values:o.values.slice().concat(["sync"])});function u(D){return{valType:"integer",min:0,dflt:D?5:0,editType:"ticks"}}var d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},w={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function y(D){var S={valType:"number",min:0,editType:"ticks"};return D||(S.dflt=5),S}function p(D){var S={valType:"number",min:0,editType:"ticks"};return D||(S.dflt=1),S}var _={valType:"color",dflt:C.defaultLine,editType:"ticks"},x={valType:"color",dflt:C.lightLine,editType:"ticks"};function b(D){var S={valType:"number",min:0,editType:"ticks"};return D||(S.dflt=1),S}var M=k({},f,{editType:"ticks"}),m={valType:"boolean",editType:"ticks"};se.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:C.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:I({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"calc"},rangebreaks:T("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[a,s,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:c},editType:"calc"}),tickmode:l,nticks:u(),tick0:d,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:w,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:y(),tickwidth:p(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:k({},f,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:I({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:v("tick label")},tickformatstops:T("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:v("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:C.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:m,gridcolor:x,gridwidth:b(),griddash:M,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:C.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:C.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},minor:{tickmode:o,nticks:u("minor"),tick0:d,dtick:g,tickvals:h,ticks:w,ticklen:y("minor"),tickwidth:p("minor"),tickcolor:_,gridcolor:x,gridwidth:b("minor"),griddash:M,showgrid:m,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:I({editType:"ticks"})}}},86763:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(23469).isUnifiedHover,k=r(98212),T=r(44467),v=r(10820),c=r(13838),i=r(951),s=r(71453),a=r(99082),o=r(52830),l=r(41675),u=l.id2name,d=l.name2id,g=r(85555).AX_ID_PATTERN,h=r(73972),w=h.traceIs,y=h.getComponentMethod;function p(_,x,b){Array.isArray(_[x])?_[x].push(b):_[x]=[b]}se.exports=function(_,x,b){var M,m,D=x.autotypenumbers,S={},O={},P={},R={},F={},B={},J={},z={},$={},G={};for(M=0;M<b.length;M++){var H=b[M];if(w(H,"cartesian")||w(H,"gl2d")){var X,K;if(H.xaxis)X=u(H.xaxis),p(S,X,H);else if(H.xaxes)for(m=0;m<H.xaxes.length;m++)p(S,u(H.xaxes[m]),H);if(H.yaxis)K=u(H.yaxis),p(S,K,H);else if(H.yaxes)for(m=0;m<H.yaxes.length;m++)p(S,u(H.yaxes[m]),H);"funnel"===H.type?"h"===H.orientation?(X&&(O[X]=!0),K&&(J[K]=!0)):K&&(P[K]=!0):"image"===H.type?(K&&(z[K]=!0),X&&(z[X]=!0)):(K&&(F[K]=!0,B[K]=!0),w(H,"carpet")&&("carpet"!==H.type||H._cheater)||X&&(R[X]=!0)),"carpet"===H.type&&H._cheater&&X&&(O[X]=!0),w(H,"2dMap")&&($[X]=!0,$[K]=!0),w(H,"oriented")&&(G["h"===H.orientation?K:X]=!0)}}var ue=x._subplots,ae=ue.xaxis,ne=ue.yaxis,Q=I.simpleMap(ae,u),ie=I.simpleMap(ne,u),le=Q.concat(ie),fe=C.background;ae.length&&ne.length&&(fe=I.coerce(_,x,v,"plot_bgcolor"));var he,pe,xe,Ee,Re,ke=C.combine(fe,x.paper_bgcolor);function Te(){Re._traceIndices=(S[he]||[]).map(function(Ft){return Ft._expandedIndex}),Re._annIndices=[],Re._shapeIndices=[],Re._selectionIndices=[],Re._imgIndices=[],Re._subplotsWith=[],Re._counterAxes=[],Re._name=Re._attr=he,Re._id=pe}function we(Lt,Ft){return I.coerce(Ee,Re,c,Lt,Ft)}function je(Lt,Ft){return I.coerce2(Ee,Re,c,Lt,Ft)}function Ce(Lt){return"x"===Lt?ne:ae}function Ie(Lt,Ft){for(var Rt="x"===Lt?Q:ie,Wt=[],Ht=0;Ht<Rt.length;Ht++){var it=Rt[Ht];it===Ft||(_[it]||{}).overlaying||Wt.push(d(it))}return Wt}var ge={x:Ce("x"),y:Ce("y")},me=ge.x.concat(ge.y),ce={},Ae=[];function Ne(){var Lt=Ee.matches;g.test(Lt)&&-1===me.indexOf(Lt)&&(ce[Lt]=Ee.type,Ae=Object.keys(ce))}var De=k(_,x),qe=f(De);for(M=0;M<le.length;M++){pe=d(he=le[M]),xe=he.charAt(0),I.isPlainObject(_[he])||(_[he]={}),Ee=_[he],Re=T.newContainer(x,he,xe+"axis"),Te();var Oe={hasMinor:!0,letter:xe,font:x.font,outerTicks:$[he],showGrid:!G[he],data:S[he]||[],bgColor:ke,calendar:x.calendar,automargin:!0,visibleDflt:"x"===xe&&!R[he]&&O[he]||"y"===xe&&!F[he]&&P[he],reverseDflt:"y"===xe&&(!B[he]&&J[he]||z[he]),autotypenumbersDflt:D,splomStash:((x._splomAxes||{})[xe]||{})[pe]};we("uirevision",x.uirevision),i(Ee,Re,we,Oe),s(Ee,Re,we,Oe,x);var Le=qe&&xe===De.charAt(0),Ue=je("spikecolor",qe?Re.color:void 0),Ze=je("spikethickness",qe?1.5:void 0),We=je("spikedash",qe?"dot":void 0),et=je("spikemode",qe?"across":void 0),nt=je("spikesnap");we("showspikes",!!(Le||Ue||Ze||We||et||nt))||(delete Re.spikecolor,delete Re.spikethickness,delete Re.spikedash,delete Re.spikemode,delete Re.spikesnap);var ct=u(Ee.overlaying),yt=[0,1];if(void 0!==x[ct]){var ut=u(x[ct].anchor);void 0!==x[ut]&&(yt=x[ut].domain)}o(Ee,Re,we,{letter:xe,counterAxes:ge[xe],overlayableAxes:Ie(xe,he),grid:x.grid,overlayingDomain:yt}),we("title.standoff"),Ne(),Re._input=Ee}for(M=0;M<Ae.length;){pe=Ae[M++],xe=(he=u(pe)).charAt(0),I.isPlainObject(_[he])||(_[he]={}),Ee=_[he],Re=T.newContainer(x,he,xe+"axis"),Te();var Ct={letter:xe,font:x.font,outerTicks:$[he],showGrid:!G[he],data:[],bgColor:ke,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:D,splomStash:((x._splomAxes||{})[xe]||{})[pe]};we("uirevision",x.uirevision),Re.type=ce[pe]||"linear",s(Ee,Re,we,Ct,x),o(Ee,Re,we,{letter:xe,counterAxes:ge[xe],overlayableAxes:Ie(xe,he),grid:x.grid}),we("fixedrange"),Ne(),Re._input=Ee}var Dt=y("rangeslider","handleDefaults"),vt=y("rangeselector","handleDefaults");for(M=0;M<Q.length;M++)Ee=_[he=Q[M]],Re=x[he],Dt(_,x,he),"date"===Re.type&&vt(Ee,Re,x,ie,Re.calendar),we("fixedrange");for(M=0;M<ie.length;M++){Ee=_[he=ie[M]];var mt=x[u((Re=x[he]).anchor)];we("fixedrange",y("rangeslider","isVisible")(mt))}a.handleDefaults(_,x,{axIds:me.concat(Ae).sort(l.idSort),axHasImage:z})}},92128:function(se,U,r){"use strict";var I=r(84267).mix,C=r(22399),f=r(71828);se.exports=function(k,T,v,c){var i=(c=c||{}).dfltColor;function s(_,x){return f.coerce2(k,T,c.attributes,_,x)}var a=s("linecolor",i),o=s("linewidth");v("showline",c.showLine||!!a||!!o)||(delete T.linecolor,delete T.linewidth);var l=s("gridcolor",I(i,c.bgColor,c.blend||C.lightFraction).toRgbString()),u=s("gridwidth"),d=s("griddash");if(v("showgrid",c.showGrid||!!l||!!u||!!d)||(delete T.gridcolor,delete T.gridwidth,delete T.griddash),c.hasMinor){var g=s("minor.gridcolor",I(T.gridcolor,c.bgColor,67).toRgbString()),h=s("minor.gridwidth",T.gridwidth||1),w=s("minor.griddash",T.griddash||"solid");v("minor.showgrid",!!g||!!h||!!w)||(delete T.minor.gridcolor,delete T.minor.gridwidth,delete T.minor.griddash)}if(!c.noZeroLine){var y=s("zerolinecolor",i),p=s("zerolinewidth");v("zeroline",c.showGrid||!!y||!!p)||(delete T.zerolinecolor,delete T.zerolinewidth)}}},52830:function(se,U,r){"use strict";var I=r(92770),C=r(71828);se.exports=function(f,k,T,v){var c,i,s,a,o,l,u=v.counterAxes||[],d=v.overlayableAxes||[],g=v.letter,h=v.grid,w=v.overlayingDomain;h&&(c=h._anchors[k._id],(i=h._domains[g][h._axisMap[k._id]])&&(s=h[g+"side"].split(" ")[0],a=h.domain[g]["right"===s||"top"===s?1:0])),i=i||[0,1],c=c||(I(f.position)?"free":u[0]||"free"),s=s||("x"===g?"bottom":"left"),a=a||0,o=0,l=!1;var y=C.coerce(f,k,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:c}},"anchor"),p=C.coerce(f,k,{side:{valType:"enumerated",values:"x"===g?["bottom","top"]:["left","right"],dflt:s}},"side");"free"===y&&("y"===g&&(T("autoshift")&&(a="left"===p?w[0]:w[1],l=!k.automargin||k.automargin,o="left"===p?-3:3),T("shift",o)),T("position",a)),T("automargin",l);var _=!1;if(d.length&&(_=C.coerce(f,k,{overlaying:{valType:"enumerated",values:[!1].concat(d),dflt:!1}},"overlaying")),!_){var x=T("domain",i);x[0]>x[1]-.000244140625&&(k.domain=i),C.noneOrAll(f.domain,k.domain,i),"sync"===k.tickmode&&(k.tickmode="auto")}return T("layer"),k}},89426:function(se,U,r){"use strict";var I=r(59652);se.exports=function(C,f,k,T,v){v||(v={});var c=v.tickSuffixDflt,i=I(C);k("tickprefix")&&k("showtickprefix",i),k("ticksuffix",c)&&k("showticksuffix",i)}},42449:function(se,U,r){"use strict";var I=r(18783).FROM_BL;se.exports=function(C,f,k){void 0===k&&(k=I[C.constraintoward||"center"]);var T=[C.r2l(C.range[0]),C.r2l(C.range[1])],v=T[0]+(T[1]-T[0])*k;C.range=C._input.range=[C.l2r(v+(T[0]-v)*f),C.l2r(v+(T[1]-v)*f)],C.setScale()}},21994:function(se,U,r){"use strict";var I=r(39898),C=r(84096).g0,f=r(71828),k=f.numberFormat,T=r(92770),v=f.cleanNumber,c=f.ms2DateTime,i=f.dateTime2ms,s=f.ensureNumber,a=f.isArrayOrTypedArray,o=r(50606),l=o.FP_SAFE,u=o.BADNUM,d=o.LOG_CLIP,g=o.ONEWEEK,h=o.ONEDAY,w=o.ONEHOUR,y=o.ONEMIN,p=o.ONESEC,_=r(41675),x=r(85555),b=x.HOUR_PATTERN,M=x.WEEKDAY_PATTERN;function m(S){return Math.pow(10,S)}function D(S){return null!=S}se.exports=function(S,O){O=O||{};var P=S._id||"x",R=P.charAt(0);function F(le,fe){if(le>0)return Math.log(le)/Math.LN10;if(le<=0&&fe&&S.range&&2===S.range.length){var he=S.range[0],pe=S.range[1];return.5*(he+pe-2*d*Math.abs(he-pe))}return u}function B(le,fe,he,pe){if((pe||{}).msUTC&&T(le))return+le;var xe=i(le,he||S.calendar);if(xe===u){if(!T(le))return u;le=+le;var Ee=Math.floor(10*f.mod(le+.05,1)),Re=Math.round(le-Ee/10);xe=i(new Date(Re))+Ee/10}return xe}function J(le,fe,he){return c(le,fe,he||S.calendar)}function z(le){return S._categories[Math.round(le)]}function $(le){if(D(le)){if(void 0===S._categoriesMap&&(S._categoriesMap={}),void 0!==S._categoriesMap[le])return S._categoriesMap[le];S._categories.push("number"==typeof le?String(le):le);var fe=S._categories.length-1;return S._categoriesMap[le]=fe,fe}return u}function G(le){if(S._categoriesMap)return S._categoriesMap[le]}function H(le){var fe=G(le);return void 0!==fe?fe:T(le)?+le:void 0}function X(le){return T(le)?+le:G(le)}function K(le,fe,he){return I.round(he+fe*le,2)}function ue(le,fe,he){return(le-he)/fe}var ae=function(le){return T(le)?K(le,S._m,S._b):u},ne=function(le){return ue(le,S._m,S._b)};if(S.rangebreaks){var Q="y"===R;ae=function(le){if(!T(le))return u;var fe=S._rangebreaks.length;if(!fe)return K(le,S._m,S._b);var he=Q;S.range[0]>S.range[1]&&(he=!he);for(var pe=he?-1:1,xe=pe*le,Ee=0,Re=0;Re<fe;Re++){var ke=pe*S._rangebreaks[Re].min,Te=pe*S._rangebreaks[Re].max;if(xe<ke)break;if(!(xe>Te)){Ee=xe<(ke+Te)/2?Re:Re+1;break}Ee=Re+1}var we=S._B[Ee]||0;return isFinite(we)?K(le,S._m2,we):0},ne=function(le){var fe=S._rangebreaks.length;if(!fe)return ue(le,S._m,S._b);for(var he=0,pe=0;pe<fe&&!(le<S._rangebreaks[pe].pmin);pe++)le>S._rangebreaks[pe].pmax&&(he=pe+1);return ue(le,S._m2,S._B[he])}}S.c2l="log"===S.type?F:s,S.l2c="log"===S.type?m:s,S.l2p=ae,S.p2l=ne,S.c2p="log"===S.type?function(le,fe){return ae(F(le,fe))}:ae,S.p2c="log"===S.type?function(le){return m(ne(le))}:ne,-1!==["linear","-"].indexOf(S.type)?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=v,S.c2d=S.c2r=S.l2d=S.l2r=s,S.d2p=S.r2p=function(le){return S.l2p(v(le))},S.p2d=S.p2r=ne,S.cleanPos=s):"log"===S.type?(S.d2r=S.d2l=function(le,fe){return F(v(le),fe)},S.r2d=S.r2c=function(le){return m(v(le))},S.d2c=S.r2l=v,S.c2d=S.l2r=s,S.c2r=F,S.l2d=m,S.d2p=function(le,fe){return S.l2p(S.d2r(le,fe))},S.p2d=function(le){return m(ne(le))},S.r2p=function(le){return S.l2p(v(le))},S.p2r=ne,S.cleanPos=s):"date"===S.type?(S.d2r=S.r2d=f.identity,S.d2c=S.r2c=S.d2l=S.r2l=B,S.c2d=S.c2r=S.l2d=S.l2r=J,S.d2p=S.r2p=function(le,fe,he){return S.l2p(B(le,0,he))},S.p2d=S.p2r=function(le,fe,he){return J(ne(le),fe,he)},S.cleanPos=function(le){return f.cleanDate(le,u,S.calendar)}):"category"===S.type?(S.d2c=S.d2l=$,S.r2d=S.c2d=S.l2d=z,S.d2r=S.d2l_noadd=H,S.r2c=function(le){var fe=X(le);return void 0!==fe?fe:S.fraction2r(.5)},S.l2r=S.c2r=s,S.r2l=X,S.d2p=function(le){return S.l2p(S.r2c(le))},S.p2d=function(le){return z(ne(le))},S.r2p=S.d2p,S.p2r=ne,S.cleanPos=function(le){return"string"==typeof le&&""!==le?le:s(le)}):"multicategory"===S.type&&(S.r2d=S.c2d=S.l2d=z,S.d2r=S.d2l_noadd=H,S.r2c=function(le){var fe=H(le);return void 0!==fe?fe:S.fraction2r(.5)},S.r2c_just_indices=G,S.l2r=S.c2r=s,S.r2l=H,S.d2p=function(le){return S.l2p(S.r2c(le))},S.p2d=function(le){return z(ne(le))},S.r2p=S.d2p,S.p2r=ne,S.cleanPos=function(le){return Array.isArray(le)||"string"==typeof le&&""!==le?le:s(le)},S.setupMultiCategory=function(le){var fe,he,pe=S._traceIndices,xe=S._matchGroup;if(xe&&0===S._categories.length)for(var Ee in xe)if(Ee!==P){var Re=O[_.id2name(Ee)];pe=pe.concat(Re._traceIndices)}var ke=[[0,{}],[0,{}]],Te=[];for(fe=0;fe<pe.length;fe++){var we=le[pe[fe]];if(R in we){var je=we[R],Ce=we._length||f.minRowLength(je);if(a(je[0])&&a(je[1]))for(he=0;he<Ce;he++){var Ie=je[0][he],ge=je[1][he];D(Ie)&&D(ge)&&(Te.push([Ie,ge]),Ie in ke[0][1]||(ke[0][1][Ie]=ke[0][0]++),ge in ke[1][1]||(ke[1][1][ge]=ke[1][0]++))}}}for(Te.sort(function(me,ce){var Ae=ke[0][1],Ne=Ae[me[0]]-Ae[ce[0]];if(Ne)return Ne;var De=ke[1][1];return De[me[1]]-De[ce[1]]}),fe=0;fe<Te.length;fe++)$(Te[fe])}),S.fraction2r=function(le){var fe=S.r2l(S.range[0]),he=S.r2l(S.range[1]);return S.l2r(fe+le*(he-fe))},S.r2fraction=function(le){var fe=S.r2l(S.range[0]),he=S.r2l(S.range[1]);return(S.r2l(le)-fe)/(he-fe)},S.cleanRange=function(le,fe){fe||(fe={}),le||(le="range");var he,pe,xe=f.nestedProperty(S,le).get();if(pe=(pe="date"===S.type?f.dfltRange(S.calendar):"y"===R?x.DFLTRANGEY:"realaxis"===S._name?[0,1]:fe.dfltRange||x.DFLTRANGEX).slice(),"tozero"!==S.rangemode&&"nonnegative"!==S.rangemode||(pe[0]=0),xe&&2===xe.length)for("date"!==S.type||S.autorange||(xe[0]=f.cleanDate(xe[0],u,S.calendar),xe[1]=f.cleanDate(xe[1],u,S.calendar)),he=0;he<2;he++)if("date"===S.type){if(!f.isDateTime(xe[he],S.calendar)){S[le]=pe;break}if(S.r2l(xe[0])===S.r2l(xe[1])){var Ee=f.constrain(S.r2l(xe[0]),f.MIN_MS+1e3,f.MAX_MS-1e3);xe[0]=S.l2r(Ee-1e3),xe[1]=S.l2r(Ee+1e3);break}}else{if(!T(xe[he])){if(!T(xe[1-he])){S[le]=pe;break}xe[he]=xe[1-he]*(he?10:.1)}if(xe[he]<-l?xe[he]=-l:xe[he]>l&&(xe[he]=l),xe[0]===xe[1]){var Re=Math.max(1,Math.abs(1e-6*xe[0]));xe[0]-=Re,xe[1]+=Re}}else f.nestedProperty(S,le).set(pe)},S.setScale=function(le){var fe=O._size;if(S.overlaying){var he=_.getFromId({_fullLayout:O},S.overlaying);S.domain=he.domain}var pe=le&&S._r?"_r":"range",xe=S.calendar;S.cleanRange(pe);var Ee,Re,ke=S.r2l(S[pe][0],xe),Te=S.r2l(S[pe][1],xe),we="y"===R;if(we?(S._offset=fe.t+(1-S.domain[1])*fe.h,S._length=fe.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ke-Te),S._b=-S._m*Te):(S._offset=fe.l+S.domain[0]*fe.w,S._length=fe.w*(S.domain[1]-S.domain[0]),S._m=S._length/(Te-ke),S._b=-S._m*ke),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks&&(S._rangebreaks=S.locateBreaks(Math.min(ke,Te),Math.max(ke,Te)),S._rangebreaks.length)){for(Ee=0;Ee<S._rangebreaks.length;Ee++)Re=S._rangebreaks[Ee],S._lBreaks+=Math.abs(Re.max-Re.min);var je=we;ke>Te&&(je=!je),je&&S._rangebreaks.reverse();var Ce=je?-1:1;for(S._m2=Ce*S._length/(Math.abs(Te-ke)-S._lBreaks),S._B.push(-S._m2*(we?Te:ke)),Ee=0;Ee<S._rangebreaks.length;Ee++)S._B.push(S._B[S._B.length-1]-Ce*S._m2*((Re=S._rangebreaks[Ee]).max-Re.min));for(Ee=0;Ee<S._rangebreaks.length;Ee++)(Re=S._rangebreaks[Ee]).pmin=ae(Re.min),Re.pmax=ae(Re.max)}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw O._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(le){var fe,he,pe,xe,Ee,Re=S.rangebreaks||[];Re._cachedPatterns||(Re._cachedPatterns=Re.map(function(Ie){return Ie.enabled&&Ie.bounds?f.simpleMap(Ie.bounds,Ie.pattern?v:S.d2c):null})),Re._cachedValues||(Re._cachedValues=Re.map(function(Ie){return Ie.enabled&&Ie.values?f.simpleMap(Ie.values,S.d2c).sort(f.sorterAsc):null}));for(var ke=0;ke<Re.length;ke++){var Te=Re[ke];if(Te.enabled)if(Te.bounds){switch(he=(fe=Re._cachedPatterns[ke])[0],pe=fe[1],Te.pattern){case M:xe=(Ee=new Date(le)).getUTCDay(),he>pe&&(pe+=7,xe<he&&(xe+=7));break;case b:xe=(Ee=new Date(le)).getUTCHours()+(Ee.getUTCMinutes()/60+Ee.getUTCSeconds()/3600+Ee.getUTCMilliseconds()/36e5),he>pe&&(pe+=24,xe<he&&(xe+=24));break;case"":xe=le}if(xe>=he&&xe<pe)return u}else for(var je=Re._cachedValues[ke],Ce=0;Ce<je.length;Ce++)if(pe=(he=je[Ce])+Te.dvalue,le>=he&&le<pe)return u}return le},S.locateBreaks=function(le,fe){var he,pe,xe,Ee,Re=[];if(!S.rangebreaks)return Re;var ke=S.rangebreaks.slice().sort(function(De,qe){return De.pattern===M&&qe.pattern===b?-1:qe.pattern===M&&De.pattern===b?1:0}),Te=function(De,qe){if((De=f.constrain(De,le,fe))!==(qe=f.constrain(qe,le,fe))){for(var Ke=!0,be=0;be<Re.length;be++){var Oe=Re[be];De<Oe.max&&qe>=Oe.min&&(De<Oe.min&&(Oe.min=De),qe>Oe.max&&(Oe.max=qe),Ke=!1)}Ke&&Re.push({min:De,max:qe})}};for(he=0;he<ke.length;he++){var we=ke[he];if(we.enabled)if(we.bounds){var je=le,Ce=fe;we.pattern&&(je=Math.floor(je)),xe=(pe=f.simpleMap(we.bounds,we.pattern?v:S.r2l))[0],Ee=pe[1];var Ie,ge,me=new Date(je);switch(we.pattern){case M:ge=g,Ie=(Ee-xe+(Ee<xe?7:0))*h,je+=xe*h-(me.getUTCDay()*h+me.getUTCHours()*w+me.getUTCMinutes()*y+me.getUTCSeconds()*p+me.getUTCMilliseconds());break;case b:ge=h,Ie=(Ee-xe+(Ee<xe?24:0))*w,je+=xe*w-(me.getUTCHours()*w+me.getUTCMinutes()*y+me.getUTCSeconds()*p+me.getUTCMilliseconds());break;default:je=Math.min(pe[0],pe[1]),Ie=ge=(Ce=Math.max(pe[0],pe[1]))-je}for(var ce=je;ce<Ce;ce+=ge)Te(ce,ce+Ie)}else for(var Ae=f.simpleMap(we.values,S.d2c),Ne=0;Ne<Ae.length;Ne++)Te(xe=Ae[Ne],Ee=xe+we.dvalue)}return Re.sort(function(De,qe){return De.min-qe.min}),Re},S.makeCalcdata=function(le,fe,he){var pe,xe,Ee,Re,ke=S.type,Te="date"===ke&&le[fe+"calendar"];if(fe in le){if(pe=le[fe],Re=le._length||f.minRowLength(pe),f.isTypedArray(pe)&&("linear"===ke||"log"===ke)){if(Re===pe.length)return pe;if(pe.subarray)return pe.subarray(0,Re)}if("multicategory"===ke)return function(Ce,Ie){for(var ge=new Array(Ie),me=0;me<Ie;me++)ge[me]=G([(Ce[0]||[])[me],(Ce[1]||[])[me]]);return ge}(pe,Re);for(xe=new Array(Re),Ee=0;Ee<Re;Ee++)xe[Ee]=S.d2c(pe[Ee],0,Te,he)}else{var we=fe+"0"in le?S.d2c(le[fe+"0"],0,Te):0,je=le["d"+fe]?Number(le["d"+fe]):1;for(pe=le[{x:"y",y:"x"}[fe]],Re=le._length||pe.length,xe=new Array(Re),Ee=0;Ee<Re;Ee++)xe[Ee]=we+Ee*je}if(S.rangebreaks)for(Ee=0;Ee<Re;Ee++)xe[Ee]=S.maskBreaks(xe[Ee]);return xe},S.isValidRange=function(le){return Array.isArray(le)&&2===le.length&&T(S.r2l(le[0]))&&T(S.r2l(le[1]))},S.isPtWithinRange=function(le,fe){var he=S.c2l(le[R],null,fe),pe=S.r2l(S.range[0]),xe=S.r2l(S.range[1]);return pe<xe?pe<=he&&he<=xe:xe<=he&&he<=pe},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var le=S._matchGroup;if(le){var fe=null,he=null;for(var pe in le){var xe=O[_.id2name(pe)];if(xe._categories){fe=xe._categories,he=xe._categoriesMap;break}}fe&&he?(S._categories=fe,S._categoriesMap=he):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var Ee=0;Ee<S._initialCategories.length;Ee++)$(S._initialCategories[Ee])},S.sortByInitialCategories=function(){var le=[];if(S._emptyCategories(),S._initialCategories)for(var fe=0;fe<S._initialCategories.length;fe++)$(S._initialCategories[fe]);le=le.concat(S._traceIndices);var he=S._matchGroup;for(var pe in he)if(P!==pe){var xe=O[_.id2name(pe)];xe._categories=S._categories,xe._categoriesMap=S._categoriesMap,le=le.concat(xe._traceIndices)}return le};var ie=O._d3locale;"date"===S.type&&(S._dateFormat=ie?ie.timeFormat:C,S._extraFormat=O._extraFormat),S._separators=O.separators,S._numFormat=ie?ie.numberFormat:k,delete S._minDtick,delete S._forceTick0}},59652:function(se){"use strict";se.exports=function(U){var r=["showexponent","showtickprefix","showticksuffix"].filter(function(I){return void 0!==U[I]});if(r.every(function(I){return U[I]===U[r[0]]})||1===r.length)return U[r[0]]}},96115:function(se,U,r){"use strict";var I=r(71828),C=r(7901).contrast,f=r(13838),k=r(59652),T=r(85501);function v(c,i){function s(a,o){return I.coerce(c,i,f.tickformatstops,a,o)}s("enabled")&&(s("dtickrange"),s("value"))}se.exports=function(c,i,s,a,o){o||(o={});var l=s("labelalias");I.isPlainObject(l)||delete i.labelalias;var u=k(c);if(s("showticklabels")){var d=o.font||{},g=i.color,h=-1!==(i.ticklabelposition||"").indexOf("inside")?C(o.bgColor):g&&g!==f.color.dflt?g:d.color;if(I.coerceFont(s,"tickfont",{family:d.family,size:d.size,color:h}),o.noTicklabelstep||"multicategory"===a||"log"===a||s("ticklabelstep"),o.noAng||s("tickangle"),"category"!==a){var w=s("tickformat");T(c,i,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:v}),i.tickformatstops.length||delete i.tickformatstops,o.noExp||w||"date"===a||(s("showexponent",u),s("exponentformat"),s("minexponent"),s("separatethousands"))}}}},38701:function(se,U,r){"use strict";var I=r(71828),C=r(13838);se.exports=function(f,k,T,v){var c=v.isMinor,i=c?f.minor||{}:f,s=c?k.minor:k,a=c?C.minor:C,o=c?"minor.":"",l=I.coerce2(i,s,a,"ticklen",c?.6*(k.ticklen||5):void 0),u=I.coerce2(i,s,a,"tickwidth",c?k.tickwidth||1:void 0),d=I.coerce2(i,s,a,"tickcolor",(c?k.tickcolor:void 0)||s.color);T(o+"ticks",!c&&v.outerTicks||l||u||d?"outside":"")||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)}},26218:function(se,U,r){"use strict";var I=r(66287),C=r(71828).isArrayOrTypedArray;se.exports=function(f,k,T,v,c){c||(c={});var i=c.isMinor,s=i?f.minor||{}:f,a=i?k.minor:k,o=i?"minor.":"";function l(y){var p=s[y];return void 0!==p?p:(a._template||{})[y]}var u=l("tick0"),d=l("dtick"),g=l("tickvals"),h=T(o+"tickmode",C(g)?"array":d?"linear":"auto");if("auto"===h||"sync"===h)T(o+"nticks");else if("linear"===h){var w=a.dtick=I.dtick(d,v);a.tick0=I.tick0(u,v,k.calendar,w)}else"multicategory"!==v&&(void 0===T(o+"tickvals")?a.tickmode="auto":i||T("ticktext"))}},66847:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(71828),k=r(91424),T=r(89298);se.exports=function(v,c,i,s){var a=v._fullLayout;if(0!==c.length){var o,l,u,d;s&&(o=s());var g=I.ease(i.easing);return v._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(d),d=null,function(){for(var y={},p=0;p<c.length;p++){var _=c[p],b=_.plotinfo.yaxis;_.xr0&&(y[_.plotinfo.xaxis._name+".range"]=_.xr0.slice()),_.yr0&&(y[b._name+".range"]=_.yr0.slice())}return C.call("relayout",v,y).then(function(){for(var M=0;M<c.length;M++)h(c[M].plotinfo)})}()}),l=Date.now(),d=window.requestAnimationFrame(function y(){u=Date.now();for(var p=Math.min(1,(u-l)/i.duration),_=g(p),x=0;x<c.length;x++)w(c[x],_);u-l>i.duration?(function(){for(var b={},M=0;M<c.length;M++){var m=c[M],S=m.plotinfo.yaxis;m.xr1&&(b[m.plotinfo.xaxis._name+".range"]=m.xr1.slice()),m.yr1&&(b[S._name+".range"]=m.yr1.slice())}o&&o(),C.call("relayout",v,b).then(function(){for(var O=0;O<c.length;O++)h(c[O].plotinfo)})}(),d=window.cancelAnimationFrame(y)):d=window.requestAnimationFrame(y)}),Promise.resolve()}function h(y){var p=y.xaxis,_=y.yaxis;a._defs.select("#"+y.clipId+"> rect").call(k.setTranslate,0,0).call(k.setScale,1,1),y.plot.call(k.setTranslate,p._offset,_._offset).call(k.setScale,1,1);var x=y.plot.selectAll(".scatterlayer .trace");x.selectAll(".point").call(k.setPointGroupScale,1,1),x.selectAll(".textpoint").call(k.setTextPointsScale,1,1),x.call(k.hideOutsideRangePoints,y)}function w(y,p){var _=y.plotinfo,x=_.xaxis,b=_.yaxis,M=x._length,m=b._length,D=!!y.xr1,S=!!y.yr1,O=[];if(D){var P=f.simpleMap(y.xr0,x.r2l),R=f.simpleMap(y.xr1,x.r2l),F=P[1]-P[0],B=R[1]-R[0];O[0]=(P[0]*(1-p)+p*R[0]-P[0])/(P[1]-P[0])*M,O[2]=M*(1-p+p*B/F),x.range[0]=x.l2r(P[0]*(1-p)+p*R[0]),x.range[1]=x.l2r(P[1]*(1-p)+p*R[1])}else O[0]=0,O[2]=M;if(S){var J=f.simpleMap(y.yr0,b.r2l),z=f.simpleMap(y.yr1,b.r2l),$=J[1]-J[0],G=z[1]-z[0];O[1]=(J[1]*(1-p)+p*z[1]-J[1])/(J[0]-J[1])*m,O[3]=m*(1-p+p*G/$),b.range[0]=x.l2r(J[0]*(1-p)+p*z[0]),b.range[1]=b.l2r(J[1]*(1-p)+p*z[1])}else O[1]=0,O[3]=m;T.drawOne(v,x,{skipTitle:!0}),T.drawOne(v,b,{skipTitle:!0}),T.redrawComponents(v,[x._id,b._id]);var H=D?M/O[2]:1,X=S?m/O[3]:1,Q=x._offset-(D?O[0]/O[2]*M:0),ie=b._offset-(S?O[1]/O[3]*m:0);_.clipRect.call(k.setTranslate,D?O[0]:0,S?O[1]:0).call(k.setScale,1/H,1/X),_.plot.call(k.setTranslate,Q,ie).call(k.setScale,H,X),k.setPointGroupScale(_.zoomScalePts,1/H,1/X),k.setTextPointsScale(_.zoomScaleTxt,1/H,1/X)}T.redrawComponents(v)}},951:function(se,U,r){"use strict";var I=r(73972).traceIs,C=r(4322);function f(T){return{v:"x",h:"y"}[T.orientation||"v"]}function k(T,v){var c=f(T),i=I(T,"box-violin"),s=I(T._fullInput||{},"candlestick");return i&&!s&&v===c&&void 0===T[c]&&void 0===T[c+"0"]}se.exports=function(T,v,c,i){c("autotypenumbers",i.autotypenumbersDflt),"-"===c("type",(i.splomStash||{}).type)&&(function(s,a){if("-"===s.type){var o,l=s._id,u=l.charAt(0);-1!==l.indexOf("scene")&&(l=u);var d=function(b,M,m){for(var D=0;D<b.length;D++){var S=b[D];if("splom"===S.type&&S._length>0&&(S["_"+m+"axes"]||{})[M]||(S[m+"axis"]||m)===M&&(k(S,m)||(S[m]||[]).length||S[m+"0"]))return S}}(a,l,u);if(d)if("histogram"!==d.type||u!=={v:"y",h:"x"}[d.orientation||"v"]){var g=u+"calendar",h=d[g],w={noMultiCategory:!I(d,"cartesian")||I(d,"noMultiCategory")};if("box"===d.type&&d._hasPreCompStats&&u==={h:"x",v:"y"}[d.orientation||"v"]&&(w.noMultiCategory=!0),w.autotypenumbers=s.autotypenumbers,k(d,u)){var y=f(d),p=[];for(o=0;o<a.length;o++){var _=a[o];I(_,"box-violin")&&(_[u+"axis"]||u)===l&&(p.push(void 0!==_[y]?_[y][0]:void 0!==_.name?_.name:"text"),_[g]!==h&&(h=void 0))}s.type=C(p,h,w)}else if("splom"===d.type){var x=d.dimensions[d._axesDim[l]];x.visible&&(s.type=C(x.values,h,w))}else s.type=C(d[u]||[d[u+"0"]],h,w)}else s.type="linear"}}(v,i.data),"-"===v.type?v.type="linear":T.type=v.type)}},31137:function(se,U,r){"use strict";var I=r(73972),C=r(71828);function f(c,i,s){var a,o,l,u=!1;if("data"===i.type)a=c._fullData[null!==i.traces?i.traces[0]:0];else{if("layout"!==i.type)return!1;a=c._fullLayout}return o=C.nestedProperty(a,i.prop).get(),(l=s[i.type]=s[i.type]||{}).hasOwnProperty(i.prop)&&l[i.prop]!==o&&(u=!0),l[i.prop]=o,{changed:u,value:o}}function k(c,i){var s=[],a=i[0],o={};if("string"==typeof a)o[a]=i[1];else{if(!C.isPlainObject(a))return s;o=a}return v(o,function(l,u,d){s.push({type:"layout",prop:l,value:d})},"",0),s}function T(c,i){var s,a,o,l,u=[];if(o=i[1],s=i[2],l={},"string"==typeof(a=i[0]))l[a]=o;else{if(!C.isPlainObject(a))return u;l=a,void 0===s&&(s=o)}return void 0===s&&(s=null),v(l,function(d,g,h){var w,y;if(Array.isArray(h)){y=h.slice();var p=Math.min(y.length,c.data.length);s&&(p=Math.min(p,s.length)),w=[];for(var _=0;_<p;_++)w[_]=s?s[_]:_}else y=h,w=s?s.slice():null;if(null===w)Array.isArray(y)&&(y=y[0]);else if(Array.isArray(w)){if(!Array.isArray(y)){var x=y;y=[];for(var b=0;b<w.length;b++)y[b]=x}y.length=Math.min(w.length,y.length)}u.push({type:"data",prop:d,traces:w,value:y})},"",0),u}function v(c,i,s,a){Object.keys(c).forEach(function(o){var l=c[o];if("_"!==o[0]){var u=s+(a>0?".":"")+o;C.isPlainObject(l)?v(l,i,u,a+1):i(u,o,l)}})}U.manageCommandObserver=function(c,i,s,a){var o={},l=!0;i&&i._commandObserver&&(o=i._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var u=U.hasSimpleAPICommandBindings(c,s,o.lookupTable);if(i&&i._commandObserver){if(u)return o;if(i._commandObserver.remove)return i._commandObserver.remove(),i._commandObserver=null,o}if(u){f(c,u,o.cache),o.check=function(){if(l){var h=f(c,u,o.cache);return h.changed&&a&&void 0!==o.lookupTable[h.value]&&(o.disable(),Promise.resolve(a({value:h.value,type:u.type,prop:u.prop,traces:u.traces,index:o.lookupTable[h.value]})).then(o.enable,o.enable)),h.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],g=0;g<d.length;g++)c._internalOn(d[g],o.check);o.remove=function(){for(var h=0;h<d.length;h++)c._removeInternalListener(d[h],o.check)}}else C.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){l=!1},o.enable=function(){l=!0},i&&(i._commandObserver=o),o},U.hasSimpleAPICommandBindings=function(c,i,s){var a,o,l=i.length;for(a=0;a<l;a++){var u,d=i[a],g=d.method,h=d.args;if(Array.isArray(h)||(h=[]),!g)return!1;var w=U.computeAPICommandBindings(c,g,h);if(1!==w.length)return!1;if(o){if((u=w[0]).type!==o.type||u.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(u.traces))return!1;u.traces.sort();for(var y=0;y<o.traces.length;y++)if(o.traces[y]!==u.traces[y])return!1}else if(u.prop!==o.prop)return!1}else o=w[0],Array.isArray(o.traces)&&o.traces.sort();var p=(u=w[0]).value;if(Array.isArray(p)){if(1!==p.length)return!1;p=p[0]}s&&(s[p]=a)}return o},U.executeAPICommand=function(c,i,s){if("skip"===i)return Promise.resolve();var a=I.apiMethodRegistry[i],o=[c];Array.isArray(s)||(s=[]);for(var l=0;l<s.length;l++)o.push(s[l]);return a.apply(null,o).catch(function(u){return C.warn("API call to Plotly."+i+" rejected.",u),Promise.reject(u)})},U.computeAPICommandBindings=function(c,i,s){var a,l;switch(Array.isArray(s)||(s=[]),i){case"restyle":a=T(c,s);break;case"relayout":a=k(0,s);break;case"update":a=T(c,[s[0],s[2]]).concat(k(0,[s[1]]));break;case"animate":l=s,a=Array.isArray(l[0])&&1===l[0].length&&-1!==["string","number"].indexOf(typeof l[0][0])?[{type:"layout",prop:"_currentFrame",value:l[0][0].toString()}]:[];break;default:a=[]}return a}},27670:function(se,U,r){"use strict";var I=r(1426).extendFlat;U.Y=function(C,f){f=f||{};var k={valType:"info_array",editType:(C=C||{}).editType,items:[{valType:"number",min:0,max:1,editType:C.editType},{valType:"number",min:0,max:1,editType:C.editType}],dflt:[0,1]},T={x:I({},k,{}),y:I({},k,{}),editType:C.editType};return C.noGridCell||(T.row={valType:"integer",min:0,dflt:0,editType:C.editType},T.column={valType:"integer",min:0,dflt:0,editType:C.editType}),T},U.c=function(C,f,k,T){var v=T&&T.x||[0,1],c=T&&T.y||[0,1],i=f.grid;if(i){var s=k("domain.column");void 0!==s&&(s<i.columns?v=i._domains.x[s]:delete C.domain.column);var a=k("domain.row");void 0!==a&&(a<i.rows?c=i._domains.y[a]:delete C.domain.row)}var o=k("domain.x",v),l=k("domain.y",c);o[0]<o[1]||(C.domain.x=v.slice()),l[0]<l[1]||(C.domain.y=c.slice())}},41940:function(se){"use strict";se.exports=function(U){var r=U.editType,I=U.colorEditType;void 0===I&&(I=r);var C={family:{valType:"string",noBlank:!0,strict:!0,editType:r},size:{valType:"number",min:1,editType:r},color:{valType:"color",editType:I},editType:r};return U.autoSize&&(C.size.dflt="auto"),U.autoColor&&(C.color.dflt="auto"),U.arrayOk&&(C.family.arrayOk=!0,C.size.arrayOk=!0,C.color.arrayOk=!0),C}},31391:function(se){"use strict";se.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function(se,U){"use strict";U.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},U.axesNames=["lonaxis","lataxis"],U.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},U.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},U.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},U.clipPad=.001,U.precision=.1,U.landColor="#F0DC82",U.waterColor="#3399FF",U.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},U.sphereSVG={type:"Sphere"},U.fillLayers={ocean:1,land:1,lakes:1},U.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},U.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],U.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],U.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function(se,U,r){"use strict";var I=r(39898),C=r(27362),f=C.geoPath,k=C.geoDistance,T=r(65704),v=r(73972),c=r(71828),i=c.strTranslate,s=r(7901),a=r(91424),o=r(30211),l=r(74875),u=r(89298),d=r(71739).getAutoRange,g=r(28569),h=r(47322).prepSelect,w=r(47322).clearOutline,y=r(47322).selectOnClick,p=r(74455),_=r(78776),x=r(41327),b=r(90973),M=r(96892).zL;function m(O){this.id=O.id,this.graphDiv=O.graphDiv,this.container=O.container,this.topojsonURL=O.topojsonURL,this.isStatic=O.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var D=m.prototype;function S(O,P){var R=_.clipPad,F=O[0]+R,B=O[1]-R,J=P[0]+R,z=P[1]-R;F>0&&B<0&&(B+=360);var $=(B-F)/4;return{type:"Polygon",coordinates:[[[F,J],[F,z],[F+$,z],[F+2*$,z],[F+3*$,z],[B,z],[B,J],[B-$,J],[B-2*$,J],[B-3*$,J],[F,J]]]}}se.exports=function(O){return new m(O)},D.plot=function(O,P,R,F){var B=this;if(F)return B.update(O,P,!0);B._geoCalcData=O,B._fullLayout=P;var J=P[this.id],z=[],$=!1;for(var G in _.layerNameToAdjective)if("frame"!==G&&J["show"+G]){$=!0;break}for(var H=!1,X=0;X<O.length;X++){var K=O[0][0].trace;K._geo=B,K.locationmode&&($=!0);var ue=K.marker;if(ue){var ne=ue.angleref;(ue.angle||"north"===ne||"previous"===ne)&&(H=!0)}}if(this._hasMarkerAngles=H,$){var Q=b.getTopojsonName(J);null!==B.topojson&&Q===B.topojsonName||(B.topojsonName=Q,void 0===PlotlyGeoAssets.topojson[B.topojsonName]&&z.push(B.fetchTopojson()))}z=z.concat(x.fetchTraceGeoData(O)),R.push(new Promise(function(ie,le){Promise.all(z).then(function(){B.topojson=PlotlyGeoAssets.topojson[B.topojsonName],B.update(O,P),ie()}).catch(le)}))},D.fetchTopojson=function(){var O=this,P=b.getTopojsonPath(O.topojsonURL,O.topojsonName);return new Promise(function(R,F){I.json(P,function(B,J){if(B)return F(404===B.status?new Error(["plotly.js could not find topojson file at",P+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[O.topojsonName]=J,R()})})},D.update=function(O,P,R){var F=P[this.id];this.hasChoropleth=!1;for(var B=0;B<O.length;B++){var J=O[B],z=J[0].trace;"choropleth"===z.type&&(this.hasChoropleth=!0),!0===z.visible&&z._length>0&&z._module.calcGeoJSON(J,P)}if(!R){if(this.updateProjection(O,P))return;this.viewInitial&&this.scope===F.scope||this.saveViewInitial(F)}this.scope=F.scope,this.updateBaseLayers(P,F),this.updateDims(P,F),this.updateFx(P,F),l.generalUpdatePerTraceModule(this.graphDiv,this,O,F);var $=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=$.selectAll(".point"),this.dataPoints.text=$.selectAll("text"),this.dataPaths.line=$.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this._render()},D.updateProjection=function(O,P){var R=this.graphDiv,F=P[this.id],B=P._size,J=F.domain,z=F.projection,$=F.lonaxis,G=F.lataxis,H=$._ax,X=G._ax,K=this.projection=function(me){var ce=me.projection,Ae=ce.type,Ne=_.projNames[Ae];Ne="geo"+c.titleCase(Ne);for(var De=(C[Ne]||T[Ne])(),qe=me._isSatellite?180*Math.acos(1/ce.distance)/Math.PI:me._isClipped?_.lonaxisSpan[Ae]/2:null,Ke=["center","rotate","parallels","clipExtent"],be=function(Ue){return Ue?De:[]},Oe=0;Oe<Ke.length;Oe++){var Le=Ke[Oe];"function"!=typeof De[Le]&&(De[Le]=be)}return De.isLonLatOverEdges=function(Ue){if(null===De(Ue))return!0;if(qe){var Ze=De.rotate();return k(Ue,[-Ze[0],-Ze[1]])>qe*Math.PI/180}return!1},De.getPath=function(){return f().projection(De)},De.getBounds=function(Ue){return De.getPath().bounds(Ue)},De.precision(_.precision),me._isSatellite&&De.tilt(ce.tilt).distance(ce.distance),qe&&De.clipAngle(qe-_.clipPad),De}(F),ue=[[B.l+B.w*J.x[0],B.t+B.h*(1-J.y[1])],[B.l+B.w*J.x[1],B.t+B.h*(1-J.y[0])]],ae=F.center||{},ne=z.rotation||{},Q=$.range||[],ie=G.range||[];if(F.fitbounds){H._length=ue[1][0]-ue[0][0],X._length=ue[1][1]-ue[0][1],H.range=d(R,H),X.range=d(R,X);var le=(H.range[0]+H.range[1])/2,fe=(X.range[0]+X.range[1])/2;if(F._isScoped)ae={lon:le,lat:fe};else if(F._isClipped){ae={lon:le,lat:fe},ne={lon:le,lat:fe,roll:ne.roll};var he=z.type,pe=_.lonaxisSpan[he]/2||180,xe=_.lataxisSpan[he]/2||90;Q=[le-pe,le+pe],ie=[fe-xe,fe+xe]}else ae={lon:le,lat:fe},ne={lon:le,lat:ne.lat,roll:ne.roll}}K.center([ae.lon-ne.lon,ae.lat-ne.lat]).rotate([-ne.lon,-ne.lat,ne.roll]).parallels(z.parallels);var Ee=S(Q,ie);K.fitExtent(ue,Ee);var Re=this.bounds=K.getBounds(Ee),ke=this.fitScale=K.scale(),Te=K.translate();if(F.fitbounds){var we=K.getBounds(S(H.range,X.range)),je=Math.min((Re[1][0]-Re[0][0])/(we[1][0]-we[0][0]),(Re[1][1]-Re[0][1])/(we[1][1]-we[0][1]));isFinite(je)?K.scale(je*ke):c.warn("Something went wrong during"+this.id+"fitbounds computations.")}else K.scale(z.scale*ke);var Ce=this.midPt=[(Re[0][0]+Re[1][0])/2,(Re[0][1]+Re[1][1])/2];if(K.translate([Te[0]+(Ce[0]-Te[0]),Te[1]+(Ce[1]-Te[1])]).clipExtent(Re),F._isAlbersUsa){var Ie=K([ae.lon,ae.lat]),ge=K.translate();K.translate([ge[0]-(Ie[0]-ge[0]),ge[1]-(Ie[1]-ge[1])])}},D.updateBaseLayers=function(O,P){var R=this,F=R.topojson,B=R.layers,J=R.basePaths;function z(K){return"lonaxis"===K||"lataxis"===K}function $(K){return!!_.lineLayers[K]}function G(K){return!!_.fillLayers[K]}var H=(this.hasChoropleth?_.layersForChoropleth:_.layers).filter(function(K){return $(K)||G(K)?P["show"+K]:!z(K)||P[K].showgrid}),X=R.framework.selectAll(".layer").data(H,String);X.exit().each(function(K){delete B[K],delete J[K],I.select(this).remove()}),X.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var ue=B[K]=I.select(this);"bg"===K?R.bgRect=ue.append("rect").style("pointer-events","all"):z(K)?J[K]=ue.append("path").style("fill","none"):"backplot"===K?ue.append("g").classed("choroplethlayer",!0):"frontplot"===K?ue.append("g").classed("scatterlayer",!0):$(K)?J[K]=ue.append("path").style("fill","none").style("stroke-miterlimit",2):G(K)&&(J[K]=ue.append("path").style("stroke","none"))}),X.order(),X.each(function(K){var ue=J[K],ae=_.layerNameToAdjective[K];"frame"===K?ue.datum(_.sphereSVG):$(K)||G(K)?ue.datum(M(F,F.objects[K])):z(K)&&ue.datum(function(ne,Q,ie){var le,fe,he,pe=Q[ne],xe=_.scopeDefaults[Q.scope];"lonaxis"===ne?(le=xe.lonaxisRange,fe=xe.lataxisRange,he=function(ge,me){return[ge,me]}):"lataxis"===ne&&(le=xe.lataxisRange,fe=xe.lonaxisRange,he=function(ge,me){return[me,ge]});var Ee={type:"linear",range:[le[0],le[1]-1e-6],tick0:pe.tick0,dtick:pe.dtick};u.setConvert(Ee,ie);var Re=u.calcTicks(Ee);Q.isScoped||"lonaxis"!==ne||Re.pop();for(var ke=Re.length,Te=new Array(ke),we=0;we<ke;we++)for(var je=Re[we].x,Ce=Te[we]=[],Ie=fe[0];Ie<fe[1]+2.5;Ie+=2.5)Ce.push(he(je,Ie));return{type:"MultiLineString",coordinates:Te}}(K,P,O)).call(s.stroke,P[K].gridcolor).call(a.dashLine,P[K].griddash,P[K].gridwidth),$(K)?ue.call(s.stroke,P[ae+"color"]).call(a.dashLine,"",P[ae+"width"]):G(K)&&ue.call(s.fill,P[ae+"color"])})},D.updateDims=function(O,P){var R=this.bounds,F=(P.framewidth||0)/2,B=R[0][0]-F,J=R[0][1]-F,z=R[1][0]-B+F,$=R[1][1]-J+F;a.setRect(this.clipRect,B,J,z,$),this.bgRect.call(a.setRect,B,J,z,$).call(s.fill,P.bgcolor),this.xaxis._offset=B,this.xaxis._length=z,this.yaxis._offset=J,this.yaxis._length=$},D.updateFx=function(O,P){var R=this,F=R.graphDiv,B=R.bgRect,J=O.dragmode,z=O.clickmode;if(!R.isStatic){var $={element:R.bgRect.node(),gd:F,plotinfo:{id:R.id,xaxis:R.xaxis,yaxis:R.yaxis,fillRangeItems:function(H,X){X.isRect?(H.range={})[R.id]=[G([X.xmin,X.ymin]),G([X.xmax,X.ymax])]:(H.lassoPoints={})[R.id]=X.map(G)}},xaxes:[R.xaxis],yaxes:[R.yaxis],subplot:R.id,clickFn:function(H){2===H&&w(F)}};"pan"===J?(B.node().onmousedown=null,B.call(p(R,P)),B.on("dblclick.zoom",function(){var H=R.viewInitial,X={};for(var K in H)X[R.id+"."+K]=H[K];v.call("_guiRelayout",F,X),F.emit("plotly_doubleclick",null)}),F._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==J&&"lasso"!==J||(B.on(".zoom",null),$.prepFn=function(H,X,K){h(H,X,K,$,J)},g.init($)),B.on("mousemove",function(){var H=R.projection.invert(c.getPositionFromD3Event());if(!H)return g.unhover(F,I.event);R.xaxis.p2c=function(){return H[0]},R.yaxis.p2c=function(){return H[1]},o.hover(F,I.event,R.id)}),B.on("mouseout",function(){F._dragging||g.unhover(F,I.event)}),B.on("click",function(){"select"!==J&&"lasso"!==J&&(z.indexOf("select")>-1&&y(I.event,F,[R.xaxis],[R.yaxis],R.id,$),z.indexOf("event")>-1&&o.click(F,I.event))})}function G(H){return R.projection.invert([H[0]+R.xaxis._offset,H[1]+R.yaxis._offset])}},D.makeFramework=function(){var O=this,P=O.graphDiv,R=P._fullLayout,F="clip"+R._uid+O.id;O.clipDef=R._clips.append("clipPath").attr("id",F),O.clipRect=O.clipDef.append("rect"),O.framework=I.select(O.container).append("g").attr("class","geo "+O.id).call(a.setClipUrl,F,P),O.project=function(B){var J=O.projection(B);return J?[J[0]-O.xaxis._offset,J[1]-O.yaxis._offset]:[null,null]},O.xaxis={_id:"x",c2p:function(B){return O.project(B)[0]}},O.yaxis={_id:"y",c2p:function(B){return O.project(B)[1]}},O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(O.mockAxis,R)},D.saveViewInitial=function(O){var R=O.center||{},F=O.projection,B=F.rotation||{};this.viewInitial={fitbounds:O.fitbounds,"projection.scale":F.scale},c.extendFlat(this.viewInitial,O._isScoped?{"center.lon":R.lon,"center.lat":R.lat}:O._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":R.lon,"center.lat":R.lat,"projection.rotation.lon":B.lon})},D.render=function(O){this._hasMarkerAngles&&O?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},D._render=function(){var O,P=this.projection,R=P.getPath();function F(J){var z=P(J.lonlat);return z?i(z[0],z[1]):null}function B(J){return P.isLonLatOverEdges(J.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",R);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(J){return R(J.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",B).attr("transform",F)}},44622:function(se,U,r){"use strict";var I=r(27659).AU,C=r(71828).counterRegex,f=r(69082),k="geo",T=C(k),v={};v[k]={valType:"subplotid",dflt:k,editType:"calc"},se.exports={attr:k,name:k,idRoot:k,idRegex:T,attrRegex:T,attributes:v,layoutAttributes:r(77519),supplyLayoutDefaults:r(82161),plot:function(c){for(var i=c._fullLayout,s=c.calcdata,a=i._subplots[k],o=0;o<a.length;o++){var l=a[o],u=I(s,k,l),d=i[l]._subplot;d||(d=f({id:l,graphDiv:c,container:i._geolayer.node(),topojsonURL:c._context.topojsonURL,staticPlot:c._context.staticPlot}),i[l]._subplot=d),d.plot(u,i,c._promises)}},updateFx:function(c){for(var i=c._fullLayout,s=i._subplots[k],a=0;a<s.length;a++){var o=i[s[a]];o._subplot.updateFx(i,o)}},clean:function(c,i,s,a){for(var o=a._subplots[k]||[],l=0;l<o.length;l++){var u=o[l],d=a[u]._subplot;!i[u]&&d&&(d.framework.remove(),d.clipDef.remove())}}}},77519:function(se,U,r){"use strict";var I=r(22399),C=r(27670).Y,f=r(79952).P,k=r(78776),T=r(30962).overrideAll,v=r(78607),c={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:I.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:f};(se.exports=T({domain:C({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:v(k.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:v(k.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:I.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:k.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:k.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:k.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:k.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:I.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:I.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:I.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:I.background},lonaxis:c,lataxis:c},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function(se,U,r){"use strict";var I=r(71828),C=r(49119),f=r(27659).NG,k=r(78776),T=r(77519),v=k.axesNames;function c(i,s,a,o){var l=f(o.fullData,"geo",o.id).map(function(ne){return ne._expandedIndex}),u=a("resolution"),d=a("scope"),g=k.scopeDefaults[d],h=a("projection.type",g.projType),w=s._isAlbersUsa="albers usa"===h;w&&(d=s.scope="usa");var y=s._isScoped="world"!==d,p=s._isSatellite="satellite"===h,_=s._isConic=-1!==h.indexOf("conic")||"albers"===h,x=s._isClipped=!!k.lonaxisSpan[h];if(!1===i.visible){var b=I.extendDeep({},s._template);b.showcoastlines=!1,b.showcountries=!1,b.showframe=!1,b.showlakes=!1,b.showland=!1,b.showocean=!1,b.showrivers=!1,b.showsubunits=!1,b.lonaxis&&(b.lonaxis.showgrid=!1),b.lataxis&&(b.lataxis.showgrid=!1),s._template=b}for(var M=a("visible"),m=0;m<v.length;m++){var D,S=v[m],O=[30,10][m];if(y)D=g[S+"Range"];else{var P=k[S+"Span"],R=(P[h]||P["*"])/2,F=a("projection.rotation."+S.substr(0,3),g.projRotate[m]);D=[F-R,F+R]}var B=a(S+".range",D);a(S+".tick0"),a(S+".dtick",O),a(S+".showgrid",!!M&&void 0)&&(a(S+".gridcolor"),a(S+".gridwidth"),a(S+".griddash")),s[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:l,setScale:I.identity,c2l:I.identity,r2l:I.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var J=s.lonaxis.range,z=s.lataxis.range,$=J[0],G=J[1];$>0&&G<0&&(G+=360);var H,X,K,ue=($+G)/2;if(!w){var ae=y?g.projRotate:[ue,0,0];H=a("projection.rotation.lon",ae[0]),a("projection.rotation.lat",ae[1]),a("projection.rotation.roll",ae[2]),a("showcoastlines",!y&&M)&&(a("coastlinecolor"),a("coastlinewidth")),a("showocean",!!M&&void 0)&&a("oceancolor")}w?(X=-96.6,K=38.7):(X=y?ue:H,K=(z[0]+z[1])/2),a("center.lon",X),a("center.lat",K),p&&(a("projection.tilt"),a("projection.distance")),_&&a("projection.parallels",g.projParallels||[0,60]),a("projection.scale"),a("showland",!!M&&void 0)&&a("landcolor"),a("showlakes",!!M&&void 0)&&a("lakecolor"),a("showrivers",!!M&&void 0)&&(a("rivercolor"),a("riverwidth")),a("showcountries",y&&"usa"!==d&&M)&&(a("countrycolor"),a("countrywidth")),("usa"===d||"north america"===d&&50===u)&&(a("showsubunits",M),a("subunitcolor"),a("subunitwidth")),y||a("showframe",M)&&(a("framecolor"),a("framewidth")),a("bgcolor"),a("fitbounds")&&(delete s.projection.scale,y?(delete s.center.lon,delete s.center.lat):x?(delete s.center.lon,delete s.center.lat,delete s.projection.rotation.lon,delete s.projection.rotation.lat,delete s.lonaxis.range,delete s.lataxis.range):(delete s.center.lon,delete s.center.lat,delete s.projection.rotation.lon))}se.exports=function(i,s,a){C(i,s,a,{type:"geo",attributes:T,handleDefaults:c,fullData:a,partition:"y"})}},74455:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(73972),k=Math.PI/180,T=180/Math.PI,v={cursor:"pointer"},c={cursor:"auto"};function i(y,p){return I.behavior.zoom().translate(p.translate()).scale(p.scale())}function s(y,p,_){var x=y.id,b=y.graphDiv,M=b.layout,m=M[x],D=b._fullLayout,S=D[x],O={},P={};function R(F,B){O[x+"."+F]=C.nestedProperty(m,F).get(),f.call("_storeDirectGUIEdit",M,D._preGUI,O);var J=C.nestedProperty(S,F);J.get()!==B&&(J.set(B),C.nestedProperty(m,F).set(B),P[x+"."+F]=B)}_(R),R("projection.scale",p.scale()/y.fitScale),R("fitbounds",!1),b.emit("plotly_relayout",P)}function a(y,p){var _=i(0,p);function x(b){var M=p.invert(y.midPt);b("center.lon",M[0]),b("center.lat",M[1])}return _.on("zoomstart",function(){I.select(this).style(v)}).on("zoom",function(){p.scale(I.event.scale).translate(I.event.translate),y.render(!0);var b=p.invert(y.midPt);y.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/y.fitScale,"geo.center.lon":b[0],"geo.center.lat":b[1]})}).on("zoomend",function(){I.select(this).style(c),s(y,p,x)}),_}function o(y,p){var _,x,b,M,m,D,S,O,P,R=i(0,p);function F(J){return p.invert(J)}function B(J){var z=p.rotate(),$=p.invert(y.midPt);J("projection.rotation.lon",-z[0]),J("center.lon",$[0]),J("center.lat",$[1])}return R.on("zoomstart",function(){I.select(this).style(v),_=I.mouse(this),x=p.rotate(),b=p.translate(),M=x,m=F(_)}).on("zoom",function(){if(D=I.mouse(this),function($){var G=F($);if(!G)return!0;var H=p(G);return Math.abs(H[0]-$[0])>2||Math.abs(H[1]-$[1])>2}(_))return R.scale(p.scale()),void R.translate(p.translate());p.scale(I.event.scale),p.translate([b[0],I.event.translate[1]]),m?F(D)&&(O=F(D),p.rotate(S=[M[0]+(O[0]-m[0]),x[1],x[2]]),M=S):m=F(_=D),P=!0,y.render(!0);var J=p.rotate(),z=p.invert(y.midPt);y.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/y.fitScale,"geo.center.lon":z[0],"geo.center.lat":z[1],"geo.projection.rotation.lon":-J[0]})}).on("zoomend",function(){I.select(this).style(c),P&&s(y,p,B)}),R}function l(y,p){var _,x={r:p.rotate(),k:p.scale()},b=i(0,p),M=function(O){for(var P=0,R=arguments.length,F=[];++P<R;)F.push(arguments[P]);var B=I.dispatch.apply(null,F);return B.of=function(J,z){return function($){var G;try{G=$.sourceEvent=I.event,$.target=O,I.event=$,B[$.type].apply(J,z)}finally{I.event=G}}},B}(b,"zoomstart","zoom","zoomend"),m=0,D=b.on;function S(O){var P=p.rotate();O("projection.rotation.lon",-P[0]),O("projection.rotation.lat",-P[1])}return b.on("zoomstart",function(){I.select(this).style(v);var O,P,R,F,B,J,z,$,G,H,X,K=I.mouse(this),ue=p.rotate(),ae=ue,ne=p.translate(),Q=(P=.5*(O=ue)[0]*k,R=.5*O[1]*k,F=.5*O[2]*k,B=Math.sin(P),J=Math.cos(P),z=Math.sin(R),$=Math.cos(R),G=Math.sin(F),[J*$*(H=Math.cos(F))+B*z*G,B*$*H-J*z*G,J*z*H+B*$*G,J*$*G-B*z*H]);_=u(p,K),D.call(b,"zoom",function(){var ie,le,fe,he,pe,xe,Ee,Re,ke,Te,me,we=I.mouse(this);if(p.scale(x.k=I.event.scale),_){if(u(p,we)){p.rotate(ue).translate(ne);var je=u(p,we),Ce=function(me,ce){if(me&&ce){var Ae=[(Ke=me)[1]*(be=ce)[2]-Ke[2]*be[1],Ke[2]*be[0]-Ke[0]*be[2],Ke[0]*be[1]-Ke[1]*be[0]],Ne=Math.sqrt(w(Ae,Ae)),De=.5*Math.acos(Math.max(-1,Math.min(1,w(me,ce)))),qe=Math.sin(De)/Ne;return Ne&&[Math.cos(De),Ae[2]*qe,-Ae[1]*qe,Ae[0]*qe]}var Ke,be}(_,je),Ie=(me=[(fe=(ie=Q)[0])*(Ee=(le=Ce)[0])-(he=ie[1])*(Re=le[1])-(pe=ie[2])*(ke=le[2])-(xe=ie[3])*(Te=le[3]),fe*Re+he*Ee+pe*Te-xe*ke,fe*ke-he*Te+pe*Ee+xe*Re,fe*Te+he*ke-pe*Re+xe*Ee],[Math.atan2(2*(me[0]*me[1]+me[2]*me[3]),1-2*(me[1]*me[1]+me[2]*me[2]))*T,Math.asin(Math.max(-1,Math.min(1,2*(me[0]*me[2]-me[3]*me[1]))))*T,Math.atan2(2*(me[0]*me[3]+me[1]*me[2]),1-2*(me[2]*me[2]+me[3]*me[3]))*T]),ge=x.r=function(me,ce,Ae){var Ne=h(ce,2,me[0]);Ne=h(Ne,1,me[1]),Ne=h(Ne,0,me[2]-Ae[2]);var De,qe,Ke=ce[0],be=ce[1],Oe=ce[2],Le=Ne[0],Ue=Ne[1],Ze=Ne[2],We=Math.atan2(be,Ke)*T,et=Math.sqrt(Ke*Ke+be*be);Math.abs(Ue)>et?(qe=(Ue>0?90:-90)-We,De=0):(qe=Math.asin(Ue/et)*T-We,De=Math.sqrt(et*et-Ue*Ue));var nt=180-qe-2*We,ct=(Math.atan2(Ze,Le)-Math.atan2(Oe,De))*T,yt=(Math.atan2(Ze,Le)-Math.atan2(Oe,-De))*T;return d(Ae[0],Ae[1],qe,ct)<=d(Ae[0],Ae[1],nt,yt)?[qe,ct,Ae[2]]:[nt,yt,Ae[2]]}(Ie,_,ae);isFinite(ge[0])&&isFinite(ge[1])&&isFinite(ge[2])||(ge=ae),p.rotate(ge),ae=ge}}else _=u(p,K=we);M.of(this,arguments)({type:"zoom"})}),X=M.of(this,arguments),m++||X({type:"zoomstart"})}).on("zoomend",function(){var O;I.select(this).style(c),D.call(b,"zoom",null),O=M.of(this,arguments),--m||O({type:"zoomend"}),s(y,p,S)}).on("zoom.redraw",function(){y.render(!0);var O=p.rotate();y.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":p.scale()/y.fitScale,"geo.projection.rotation.lon":-O[0],"geo.projection.rotation.lat":-O[1]})}),I.rebind(b,M,"on")}function u(y,p){var x,b,M,m,_=y.invert(p);return _&&isFinite(_[0])&&isFinite(_[1])&&(b=(x=_)[0]*k,M=x[1]*k,[(m=Math.cos(M))*Math.cos(b),m*Math.sin(b),Math.sin(M)])}function d(y,p,_,x){var b=g(_-y),M=g(x-p);return Math.sqrt(b*b+M*M)}function g(y){return(y%360+540)%360-180}function h(y,p,_){var x=_*k,b=y.slice(),M=0===p?1:0,m=2===p?1:2,D=Math.cos(x),S=Math.sin(x);return b[M]=y[M]*D-y[m]*S,b[m]=y[m]*D+y[M]*S,b}function w(y,p){for(var _=0,x=0,b=y.length;x<b;++x)_+=y[x]*p[x];return _}se.exports=function(y,p){return(p._isScoped?a:p._isClipped?l:o)(y,y.projection)}},27659:function(se,U,r){"use strict";var I=r(73972),C=r(85555).SUBPLOT_PATTERN;U.AU=function(f,k,T){var v=I.subplotsRegistry[k];if(!v)return[];for(var c=v.attr,i=[],s=0;s<f.length;s++){var a=f[s];a[0].trace[c]===T&&i.push(a)}return i},U.a0=function(f,k){var T,v=[],c=[];if(!(T="string"==typeof k?I.getModule(k).plot:"function"==typeof k?k:k.plot))return[v,f];for(var i=0;i<f.length;i++){var s=f[i],a=s[0].trace;!0===a.visible&&0!==a._length&&(a._module.plot===T?v.push(s):c.push(s))}return[v,c]},U.NG=function(f,k,T){if(!I.subplotsRegistry[k])return[];var v,c,i,s=I.subplotsRegistry[k].attr,a=[];if("gl2d"===k){var o=T.match(C);c="x"+o[1],i="y"+o[2]}for(var l=0;l<f.length;l++)v=f[l],"gl2d"===k&&I.traceIs(v,"gl2d")?v[s[0]]===c&&v[s[1]]===i&&a.push(v):v[s]===T&&a.push(v);return a}},75071:function(se,U,r){"use strict";var I=r(16825),C=r(1195),f=r(48956),k=r(85555),T=r(38520);function v(c,i){this.element=c,this.plot=i,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}se.exports=function(c){var i=c.mouseContainer,s=c.glplot,a=new v(i,s);function o(){c.xaxis.autorange=!1,c.yaxis.autorange=!1}function l(u,d,g){var h,w,y=c.calcDataBox(),p=s.viewBox,_=a.lastPos[0],x=a.lastPos[1],b=k.MINDRAG*s.pixelRatio,M=k.MINZOOM*s.pixelRatio;function m(F,B,J){var z=Math.min(B,J),$=Math.max(B,J);z!==$?(y[F]=z,y[F+2]=$,a.dataBox=y,c.setRanges(y)):(c.selectBox.selectBox=[0,0,1,1],c.glplot.setDirty())}switch(d*=s.pixelRatio,g=p[3]-p[1]-(g*=s.pixelRatio),c.fullLayout.dragmode){case"zoom":if(u){var D=d/(p[2]-p[0])*(y[2]-y[0])+y[0],S=g/(p[3]-p[1])*(y[3]-y[1])+y[1];a.boxInited||(a.boxStart[0]=D,a.boxStart[1]=S,a.dragStart[0]=d,a.dragStart[1]=g),a.boxEnd[0]=D,a.boxEnd[1]=S,a.boxInited=!0,a.boxEnabled||a.boxStart[0]===a.boxEnd[0]&&a.boxStart[1]===a.boxEnd[1]||(a.boxEnabled=!0);var O=Math.abs(a.dragStart[0]-d)<M,P=Math.abs(a.dragStart[1]-g)<M;if(!function(){for(var F=c.graphDiv._fullLayout._axisConstraintGroups,B=c.xaxis._id,J=c.yaxis._id,z=0;z<F.length;z++)if(-1!==F[z][B]){if(-1!==F[z][J])return!0;break}return!1}()||O&&P)O&&(a.boxEnd[0]=a.boxStart[0]),P&&(a.boxEnd[1]=a.boxStart[1]);else{h=a.boxEnd[0]-a.boxStart[0],w=a.boxEnd[1]-a.boxStart[1];var R=(y[3]-y[1])/(y[2]-y[0]);Math.abs(h*R)>Math.abs(w)?(a.boxEnd[1]=a.boxStart[1]+Math.abs(h)*R*(w>=0?1:-1),a.boxEnd[1]<y[1]?(a.boxEnd[1]=y[1],a.boxEnd[0]=a.boxStart[0]+(y[1]-a.boxStart[1])/Math.abs(R)):a.boxEnd[1]>y[3]&&(a.boxEnd[1]=y[3],a.boxEnd[0]=a.boxStart[0]+(y[3]-a.boxStart[1])/Math.abs(R))):(a.boxEnd[0]=a.boxStart[0]+Math.abs(w)/R*(h>=0?1:-1),a.boxEnd[0]<y[0]?(a.boxEnd[0]=y[0],a.boxEnd[1]=a.boxStart[1]+(y[0]-a.boxStart[0])*Math.abs(R)):a.boxEnd[0]>y[2]&&(a.boxEnd[0]=y[2],a.boxEnd[1]=a.boxStart[1]+(y[2]-a.boxStart[0])*Math.abs(R)))}}else a.boxEnabled?(w=a.boxStart[1]!==a.boxEnd[1],(h=a.boxStart[0]!==a.boxEnd[0])||w?(h&&(m(0,a.boxStart[0],a.boxEnd[0]),c.xaxis.autorange=!1),w&&(m(1,a.boxStart[1],a.boxEnd[1]),c.yaxis.autorange=!1),c.relayoutCallback()):c.glplot.setDirty(),a.boxEnabled=!1,a.boxInited=!1):a.boxInited&&(a.boxInited=!1);break;case"pan":a.boxEnabled=!1,a.boxInited=!1,u?(a.panning||(a.dragStart[0]=d,a.dragStart[1]=g),Math.abs(a.dragStart[0]-d)<b&&(d=a.dragStart[0]),Math.abs(a.dragStart[1]-g)<b&&(g=a.dragStart[1]),w=(x-g)*(y[3]-y[1])/(s.viewBox[3]-s.viewBox[1]),y[0]+=h=(_-d)*(y[2]-y[0])/(s.viewBox[2]-s.viewBox[0]),y[2]+=h,y[1]+=w,y[3]+=w,c.setRanges(y),a.panning=!0,a.lastInputTime=Date.now(),o(),c.cameraChanged(),c.handleAnnotations()):a.panning&&(a.panning=!1,c.relayoutCallback())}a.lastPos[0]=d,a.lastPos[1]=g}return a.mouseListener=I(i,l),i.addEventListener("touchstart",function(u){var d=f(u.changedTouches[0],i);l(0,d[0],d[1]),l(1,d[0],d[1]),u.preventDefault()},!!T&&{passive:!1}),i.addEventListener("touchmove",function(u){u.preventDefault();var d=f(u.changedTouches[0],i);l(1,d[0],d[1]),u.preventDefault()},!!T&&{passive:!1}),i.addEventListener("touchend",function(u){l(0,a.lastPos[0],a.lastPos[1]),u.preventDefault()},!!T&&{passive:!1}),a.wheelListener=C(i,function(u,d){if(!c.scrollZoom)return!1;var g=c.calcDataBox(),h=s.viewBox,w=a.lastPos[0],y=a.lastPos[1],p=Math.exp(5*d/(h[3]-h[1])),_=w/(h[2]-h[0])*(g[2]-g[0])+g[0],x=y/(h[3]-h[1])*(g[3]-g[1])+g[1];return g[0]=(g[0]-_)*p+_,g[2]=(g[2]-_)*p+_,g[1]=(g[1]-x)*p+x,g[3]=(g[3]-x)*p+x,c.setRanges(g),a.lastInputTime=Date.now(),o(),c.cameraChanged(),c.handleAnnotations(),c.relayoutCallback(),!0},!0),a}},82961:function(se,U,r){"use strict";var I=r(89298),C=r(78614);function f(v){this.scene=v,this.gl=v.gl,this.pixelRatio=v.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var k=f.prototype,T=["xaxis","yaxis"];k.merge=function(v){var c,i,s,a,o,l,u,d,g,h,w;for(this.titleEnable=!1,this.backgroundColor=C(v.plot_bgcolor),h=0;h<2;++h){var y=(c=T[h]).charAt(0);for(s=(i=v[this.scene[c]._name]).title.text===this.scene.fullLayout._dfltTitle[y]?"":i.title.text,w=0;w<=2;w+=2)this.labelEnable[h+w]=!1,this.labels[h+w]=s,this.labelColor[h+w]=C(i.title.font.color),this.labelFont[h+w]=i.title.font.family,this.labelSize[h+w]=i.title.font.size,this.labelPad[h+w]=this.getLabelPad(c,i),this.tickEnable[h+w]=!1,this.tickColor[h+w]=C((i.tickfont||{}).color),this.tickAngle[h+w]="auto"===i.tickangle?0:Math.PI*-i.tickangle/180,this.tickPad[h+w]=this.getTickPad(i),this.tickMarkLength[h+w]=0,this.tickMarkWidth[h+w]=i.tickwidth||0,this.tickMarkColor[h+w]=C(i.tickcolor),this.borderLineEnable[h+w]=!1,this.borderLineColor[h+w]=C(i.linecolor),this.borderLineWidth[h+w]=i.linewidth||0;u=this.hasSharedAxis(i),o=this.hasAxisInDfltPos(c,i)&&!u,l=this.hasAxisInAltrPos(c,i)&&!u,a=i.mirror||!1,d=u?-1!==String(a).indexOf("all"):!!a,g=u?"allticks"===a:-1!==String(a).indexOf("ticks"),o?this.labelEnable[h]=!0:l&&(this.labelEnable[h+2]=!0),o?this.tickEnable[h]=i.showticklabels:l&&(this.tickEnable[h+2]=i.showticklabels),(o||d)&&(this.borderLineEnable[h]=i.showline),(l||d)&&(this.borderLineEnable[h+2]=i.showline),(o||g)&&(this.tickMarkLength[h]=this.getTickMarkLength(i)),(l||g)&&(this.tickMarkLength[h+2]=this.getTickMarkLength(i)),this.gridLineEnable[h]=i.showgrid,this.gridLineColor[h]=C(i.gridcolor),this.gridLineWidth[h]=i.gridwidth,this.zeroLineEnable[h]=i.zeroline,this.zeroLineColor[h]=C(i.zerolinecolor),this.zeroLineWidth[h]=i.zerolinewidth}},k.hasSharedAxis=function(v){var c=this.scene;return 0!==I.findSubplotsWithAxis(c.fullLayout._subplots.gl2d,v).indexOf(c.id)},k.hasAxisInDfltPos=function(v,c){var i=c.side;return"xaxis"===v?"bottom"===i:"yaxis"===v?"left"===i:void 0},k.hasAxisInAltrPos=function(v,c){var i=c.side;return"xaxis"===v?"top"===i:"yaxis"===v?"right"===i:void 0},k.getLabelPad=function(v,c){var i=1.5,s=c.title.font.size,a=c.showticklabels;return"xaxis"===v?"top"===c.side?s*(i+(a?1:0))-10:s*(i+(a?.5:0))-10:"yaxis"===v?"right"===c.side?10+s*(i+(a?1:.5)):10+s*(i+(a?.5:0)):void 0},k.getTickPad=function(v){return"outside"===v.ticks?10+v.ticklen:15},k.getTickMarkLength=function(v){if(!v.ticks)return 0;var c=v.ticklen;return"inside"===v.ticks?-c:c},se.exports=function(v){return new f(v)}},4796:function(se,U,r){"use strict";var I=r(30962).overrideAll,C=r(92918),f=r(10820),k=r(77922),T=r(85555),v=r(93612),c=r(528),i=r(27659).NG;U.name="gl2d",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=T.idRegex,U.attrRegex=T.attrRegex,U.attributes=r(89502),U.supplyLayoutDefaults=function(s,a,o){a._has("cartesian")||v.supplyLayoutDefaults(s,a,o)},U.layoutAttrOverrides=I(v.layoutAttributes,"plot","from-root"),U.baseLayoutAttrOverrides=I({plot_bgcolor:f.plot_bgcolor,hoverlabel:c.hoverlabel},"plot","nested"),U.plot=function(s){for(var a=s._fullLayout,o=s._fullData,l=a._subplots.gl2d,u=0;u<l.length;u++){var d=l[u],g=a._plots[d],h=i(o,"gl2d",d),w=g._scene2d;void 0===w&&(w=new C({id:d,graphDiv:s,container:s.querySelector(".gl-container"),staticPlot:s._context.staticPlot,plotGlPixelRatio:s._context.plotGlPixelRatio},a),g._scene2d=w),w.plot(h,s.calcdata,a,s.layout)}},U.clean=function(s,a,o,l){for(var u=l._subplots.gl2d||[],d=0;d<u.length;d++){var g=u[d],h=l._plots[g];h._scene2d&&0===i(s,"gl2d",g).length&&(h._scene2d.destroy(),delete l._plots[g])}v.clean.apply(this,arguments)},U.drawFramework=function(s){s._context.staticPlot||v.drawFramework(s)},U.toSVG=function(s){for(var a=s._fullLayout,o=a._subplots.gl2d,l=0;l<o.length;l++){var u=a._plots[o[l]]._scene2d,d=u.toImage("png");a._glimages.append("svg:image").attr({xmlns:k.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},U.updateFx=function(s){for(var a=s._fullLayout,o=a._subplots.gl2d,l=0;l<o.length;l++)a._plots[o[l]]._scene2d.updateFx(a.dragmode)}},92918:function(se,U,r){"use strict";var I,C,f=r(73972),k=r(89298),T=r(30211),v=r(9330).gl_plot2d,c=r(9330).gl_spikes2d,i=r(9330).gl_select_box,s=r(40372),a=r(82961),o=r(75071),l=r(58617),u=r(99082),d=u.enforce,g=u.clean,h=r(71739).doAutoRange,w=r(64505),y=w.drawMode,p=w.selectMode,_=["xaxis","yaxis"],x=r(85555).SUBPLOT_PATTERN;function b(m,D){this.container=m.container,this.graphDiv=m.graphDiv,this.pixelRatio=m.plotGlPixelRatio||window.devicePixelRatio,this.id=m.id,this.staticPlot=!!m.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(D),this.makeFramework(),this.stopped||(this.glplotOptions=a(this),this.glplotOptions.merge(D),this.glplot=v(this.glplotOptions),this.camera=o(this),this.traces={},this.spikes=c(this.glplot),this.selectBox=i(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}se.exports=b;var M=b.prototype;M.makeFramework=function(){if(this.staticPlot){if(!(C||(I=document.createElement("canvas"),C=s({canvas:I,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=I,this.gl=C}else{var m=this.container.querySelector(".gl-canvas-focus"),D=s({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!D)return l(this),void(this.stopped=!0);this.canvas=m,this.gl=D}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var O=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var R=this.container;R.appendChild(O),R.appendChild(P);var F=this;P.addEventListener("mouseout",function(){F.isMouseOver=!1,F.unhover()}),P.addEventListener("mouseover",function(){F.isMouseOver=!0})},M.toImage=function(m){m||(m="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(I),this.updateSize(this.canvas);var D=this.glplot.gl,S=D.drawingBufferWidth,O=D.drawingBufferHeight;D.clearColor(1,1,1,0),D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),D.bindFramebuffer(D.FRAMEBUFFER,null);var P=new Uint8Array(S*O*4);D.readPixels(0,0,S,O,D.RGBA,D.UNSIGNED_BYTE,P);for(var R=0,F=O-1;R<F;++R,--F)for(var B=0;B<S;++B)for(var J=0;J<4;++J){var z=P[4*(S*R+B)+J];P[4*(S*R+B)+J]=P[4*(S*F+B)+J],P[4*(S*F+B)+J]=z}var $=document.createElement("canvas");$.width=S,$.height=O;var G,H=$.getContext("2d",{willReadFrequently:!0}),X=H.createImageData(S,O);switch(X.data.set(P),H.putImageData(X,0,0),m){case"jpeg":G=$.toDataURL("image/jpeg");break;case"webp":G=$.toDataURL("image/webp");break;default:G=$.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(I),G},M.updateSize=function(m){m||(m=this.canvas);var D=this.pixelRatio,S=this.fullLayout,P=S.height,R=0|Math.ceil(D*S.width),F=0|Math.ceil(D*P);return m.width===R&&m.height===F||(m.width=R,m.height=F),m},M.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var m=[k.calcTicks(this.xaxis),k.calcTicks(this.yaxis)],D=0;D<2;++D)for(var S=0;S<m[D].length;++S)m[D][S].text=m[D][S].text+"";return m},M.updateRefs=function(m){this.fullLayout=m;var D=this.id.match(x),O="yaxis"+D[2];this.xaxis=this.fullLayout["xaxis"+D[1]],this.yaxis=this.fullLayout[O]},M.relayoutCallback=function(){var m=this.graphDiv,D=this.xaxis,S=this.yaxis,O=m.layout,P={},R=P[D._name+".range"]=D.range.slice(),F=P[S._name+".range"]=S.range.slice();P[D._name+".autorange"]=D.autorange,P[S._name+".autorange"]=S.autorange,f.call("_storeDirectGUIEdit",m.layout,m._fullLayout._preGUI,P);var B=O[D._name];B.range=R,B.autorange=D.autorange;var J=O[S._name];J.range=F,J.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,m.emit("plotly_relayout",P)},M.cameraChanged=function(){var m=this.camera;this.glplot.setDataBox(this.calcDataBox());var D=this.computeTickMarks();(function(S,O){for(var P=0;P<2;++P){var R=S[P],F=O[P];if(R.length!==F.length)return!0;for(var B=0;B<R.length;++B)if(R[B].x!==F[B].x)return!0}return!1})(D,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=D,this.glplotOptions.dataBox=m.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},M.handleAnnotations=function(){for(var m=this.graphDiv,D=this.fullLayout.annotations,S=0;S<D.length;S++){var O=D[S];O.xref===this.xaxis._id&&O.yref===this.yaxis._id&&f.getComponentMethod("annotations","drawOne")(m,S)}},M.destroy=function(){if(this.glplot){var m=this.traces;m&&Object.keys(m).map(function(D){m[D].dispose(),delete m[D]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},M.plot=function(m,D,S){var O=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(m,D),this.updateFx(S.dragmode);var P=S.width,R=S.height;this.updateSize(this.canvas);var F=this.glplotOptions;F.merge(S),F.screenBox=[0,0,P,R];var B={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};g(B,this.xaxis),g(B,this.yaxis);var J,z,$=S._size,G=this.xaxis.domain,H=this.yaxis.domain;for(F.viewBox=[$.l+G[0]*$.w,$.b+H[0]*$.h,P-$.r-(1-G[1])*$.w,R-$.t-(1-H[1])*$.h],this.mouseContainer.style.width=$.w*(G[1]-G[0])+"px",this.mouseContainer.style.height=$.h*(H[1]-H[0])+"px",this.mouseContainer.height=$.h*(H[1]-H[0]),this.mouseContainer.style.left=$.l+G[0]*$.w+"px",this.mouseContainer.style.top=$.t+(1-H[1])*$.h+"px",z=0;z<2;++z)(J=this[_[z]])._length=F.viewBox[z+2]-F.viewBox[z],h(this.graphDiv,J),J.setScale();d(B),F.ticks=this.computeTickMarks(),F.dataBox=this.calcDataBox(),F.merge(S),O.update(F),this.glplot.draw()},M.calcDataBox=function(){var m=this.xaxis,D=this.yaxis,S=m.range,O=D.range,P=m.r2l,R=D.r2l;return[P(S[0]),R(O[0]),P(S[1]),R(O[1])]},M.setRanges=function(m){var D=this.xaxis,S=this.yaxis,O=D.l2r,P=S.l2r;D.range=[O(m[0]),O(m[2])],S.range=[P(m[1]),P(m[3])]},M.updateTraces=function(m,D){var S,O,P,R=Object.keys(this.traces);this.fullData=m;e:for(S=0;S<R.length;S++){var F=R[S],B=this.traces[F];for(O=0;O<m.length;O++)if((P=m[O]).uid===F&&P.type===B.type)continue e;B.dispose(),delete this.traces[F]}for(S=0;S<m.length;S++){var J=D[S],z=this.traces[(P=m[S]).uid];z?z.update(P,J):(z=P._module.plot(this,P,J),this.traces[P.uid]=z)}this.glplot.objects.sort(function($,G){return $._trace.index-G._trace.index})},M.updateFx=function(m){p(m)||y(m)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===m?"move":"zoom"===m?"crosshair":null},M.emitPointAction=function(m,D){for(var S,O=m.trace.uid,P=m.pointIndex,R=0;R<this.fullData.length;R++)this.fullData[R].uid===O&&(S=this.fullData[R]);var F={x:m.traceCoord[0],y:m.traceCoord[1],curveNumber:S.index,pointNumber:P,data:S._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};T.appendArrayPointValue(F,S,P),this.graphDiv.emit(D,{points:[F]})},M.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var m=this.glplot,D=this.camera,S=D.mouseListener,O=1===this.lastButtonState&&0===S.buttons,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var R,F=S.x*m.pixelRatio,B=this.canvas.height-m.pixelRatio*S.y;if(D.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var J=this.selectBox.selectBox=[Math.min(D.boxStart[0],D.boxEnd[0]),Math.min(D.boxStart[1],D.boxEnd[1]),Math.max(D.boxStart[0],D.boxEnd[0]),Math.max(D.boxStart[1],D.boxEnd[1])],z=0;z<2;z++)D.boxStart[z]===D.boxEnd[z]&&(J[z]=m.dataBox[z],J[z+2]=m.dataBox[z+2]);m.setDirty()}else if(!D.panning&&this.isMouseOver){this.selectBox.enabled=!1;var $=P._size,X=(R=m.pick(F/m.pixelRatio+$.l+this.xaxis.domain[0]*$.w,B/m.pixelRatio-($.t+(1-this.yaxis.domain[1])*$.h)))&&R.object._trace.handlePick(R);if(X&&O&&this.emitPointAction(X,"plotly_click"),R&&"skip"!==R.object._trace.hoverinfo&&P.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var K=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:R.dataCoord}),K.screenCoord=[((m.viewBox[2]-m.viewBox[0])*(R.dataCoord[0]-m.dataBox[0])/(m.dataBox[2]-m.dataBox[0])+m.viewBox[0])/m.pixelRatio,(this.canvas.height-(m.viewBox[3]-m.viewBox[1])*(R.dataCoord[1]-m.dataBox[1])/(m.dataBox[3]-m.dataBox[1])-m.viewBox[1])/m.pixelRatio],this.emitPointAction(X,"plotly_hover");var ue=this.fullData[K.trace.index]||{},ae=K.pointIndex,ne=T.castHoverinfo(ue,P,ae);if(ne&&"all"!==ne){var Q=ne.split("+");-1===Q.indexOf("x")&&(K.traceCoord[0]=void 0),-1===Q.indexOf("y")&&(K.traceCoord[1]=void 0),-1===Q.indexOf("z")&&(K.traceCoord[2]=void 0),-1===Q.indexOf("text")&&(K.textLabel=void 0),-1===Q.indexOf("name")&&(K.name=void 0)}T.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:T.castHoverOption(ue,ae,"bgcolor")||K.color,borderColor:T.castHoverOption(ue,ae,"bordercolor"),fontFamily:T.castHoverOption(ue,ae,"font.family"),fontSize:T.castHoverOption(ue,ae,"font.size"),fontColor:T.castHoverOption(ue,ae,"font.color"),nameLength:T.castHoverOption(ue,ae,"namelength"),textAlign:T.castHoverOption(ue,ae,"align")},{container:this.svgContainer,gd:this.graphDiv})}}R||this.unhover(),m.draw()}},M.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),T.loneUnhover(this.svgContainer))},M.hoverFormatter=function(m,D){if(void 0!==D){var S=this[m];return k.tickText(S,S.c2l(D),"hover").text}}},58547:function(se,U,r){"use strict";var I=r(30962).overrideAll,C=r(528),f=r(33539),k=r(27659).NG,T=r(71828),v=r(77922),c="gl3d",i="scene";U.name=c,U.attr=i,U.idRoot=i,U.idRegex=U.attrRegex=T.counterRegex("scene"),U.attributes=r(59084),U.layoutAttributes=r(65500),U.baseLayoutAttrOverrides=I({hoverlabel:C.hoverlabel},"plot","nested"),U.supplyLayoutDefaults=r(24682),U.plot=function(s){for(var a=s._fullLayout,o=s._fullData,l=a._subplots[c],u=0;u<l.length;u++){var d=l[u],g=k(o,c,d),h=a[d],w=h.camera,y=h._scene;y||(y=new f({id:d,graphDiv:s,container:s.querySelector(".gl-container"),staticPlot:s._context.staticPlot,plotGlPixelRatio:s._context.plotGlPixelRatio,camera:w},a),h._scene=y),y.viewInitial||(y.viewInitial={up:{x:w.up.x,y:w.up.y,z:w.up.z},eye:{x:w.eye.x,y:w.eye.y,z:w.eye.z},center:{x:w.center.x,y:w.center.y,z:w.center.z}}),y.plot(g,a,s.layout)}},U.clean=function(s,a,o,l){for(var u=l._subplots[c]||[],d=0;d<u.length;d++){var g=u[d];!a[g]&&l[g]._scene&&(l[g]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+g).remove())}},U.toSVG=function(s){for(var a=s._fullLayout,o=a._subplots[c],l=a._size,u=0;u<o.length;u++){var d=a[o[u]],g=d.domain,h=d._scene,w=h.toImage("png");a._glimages.append("svg:image").attr({xmlns:v.svg,"xlink:href":w,x:l.l+l.w*g.x[0],y:l.t+l.h*(1-g.y[1]),width:l.w*(g.x[1]-g.x[0]),height:l.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),h.destroy()}},U.cleanId=function(s){if(s.match(/^scene[0-9]*$/)){var a=s.substr(5);return"1"===a&&(a=""),i+a}},U.updateFx=function(s){for(var a=s._fullLayout,o=a._subplots[c],l=0;l<o.length;l++)a[o[l]]._scene.updateFx(a.dragmode,a.hovermode)}},59084:function(se){"use strict";se.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function(se,U,r){"use strict";var I=r(7901),C=r(13838),f=r(1426).extendFlat,k=r(30962).overrideAll;se.exports=k({visible:C.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:I.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:C.color,categoryorder:C.categoryorder,categoryarray:C.categoryarray,title:{text:C.title.text,font:C.title.font},type:f({},C.type,{values:["-","linear","log","date","category"]}),autotypenumbers:C.autotypenumbers,autorange:C.autorange,rangemode:C.rangemode,range:f({},C.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:C.minor.tickmode,nticks:C.nticks,tick0:C.tick0,dtick:C.dtick,tickvals:C.tickvals,ticktext:C.ticktext,ticks:C.ticks,mirror:C.mirror,ticklen:C.ticklen,tickwidth:C.tickwidth,tickcolor:C.tickcolor,showticklabels:C.showticklabels,labelalias:C.labelalias,tickfont:C.tickfont,tickangle:C.tickangle,tickprefix:C.tickprefix,showtickprefix:C.showtickprefix,ticksuffix:C.ticksuffix,showticksuffix:C.showticksuffix,showexponent:C.showexponent,exponentformat:C.exponentformat,minexponent:C.minexponent,separatethousands:C.separatethousands,tickformat:C.tickformat,tickformatstops:C.tickformatstops,hoverformat:C.hoverformat,showline:C.showline,linecolor:C.linecolor,linewidth:C.linewidth,showgrid:C.showgrid,gridcolor:f({},C.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:C.gridwidth,zeroline:C.zeroline,zerolinecolor:C.zerolinecolor,zerolinewidth:C.zerolinewidth,_deprecated:{title:C._deprecated.title,titlefont:C._deprecated.titlefont}},"plot","from-root")},3277:function(se,U,r){"use strict";var I=r(84267).mix,C=r(71828),f=r(44467),k=r(77894),T=r(951),v=r(71453),c=["xaxis","yaxis","zaxis"];se.exports=function(i,s,a){var o,l;function u(h,w){return C.coerce(o,l,k,h,w)}for(var d=0;d<c.length;d++){var g=c[d];o=i[g]||{},(l=f.newContainer(s,g))._id=g[0]+a.scene,l._name=g,T(o,l,u,a),v(o,l,u,{font:a.font,letter:g[0],data:a.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:a.bgColor,calendar:a.calendar},a.fullLayout),u("gridcolor",I(l.color,a.bgColor,72.72727272727273).toRgbString()),u("title.text",g[0]),l.setScale=C.noop,u("showspikes")&&(u("spikesides"),u("spikethickness"),u("spikecolor",l.color)),u("showaxeslabels"),u("showbackground")&&u("backgroundcolor")}}},30422:function(se,U,r){"use strict";var I=r(78614),C=r(71828),f=["xaxis","yaxis","zaxis"];function k(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}k.prototype.merge=function(T,v){for(var c=this,i=0;i<3;++i){var s=v[f[i]];s.visible?(c.labels[i]=T._meta?C.templateString(s.title.text,T._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(c.labelColor[i]=I(s.title.font.color)),s.title.font.family&&(c.labelFont[i]=s.title.font.family),s.title.font.size&&(c.labelSize[i]=s.title.font.size)),"showline"in s&&(c.lineEnable[i]=s.showline),"linecolor"in s&&(c.lineColor[i]=I(s.linecolor)),"linewidth"in s&&(c.lineWidth[i]=s.linewidth),"showgrid"in s&&(c.gridEnable[i]=s.showgrid),"gridcolor"in s&&(c.gridColor[i]=I(s.gridcolor)),"gridwidth"in s&&(c.gridWidth[i]=s.gridwidth),"log"===s.type?c.zeroEnable[i]=!1:"zeroline"in s&&(c.zeroEnable[i]=s.zeroline),"zerolinecolor"in s&&(c.zeroLineColor[i]=I(s.zerolinecolor)),"zerolinewidth"in s&&(c.zeroLineWidth[i]=s.zerolinewidth),c.lineTickEnable[i]=!(!("ticks"in s)||!s.ticks),"ticklen"in s&&(c.lineTickLength[i]=c._defaultLineTickLength[i]=s.ticklen),"tickcolor"in s&&(c.lineTickColor[i]=I(s.tickcolor)),"tickwidth"in s&&(c.lineTickWidth[i]=s.tickwidth),"tickangle"in s&&(c.tickAngle[i]="auto"===s.tickangle?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(c.tickEnable[i]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(c.tickColor[i]=I(s.tickfont.color)),s.tickfont.family&&(c.tickFont[i]=s.tickfont.family),s.tickfont.size&&(c.tickSize[i]=s.tickfont.size)),"mirror"in s?-1!==["ticks","all","allticks"].indexOf(s.mirror)?(c.lineTickMirror[i]=!0,c.lineMirror[i]=!0):!0===s.mirror?(c.lineTickMirror[i]=!1,c.lineMirror[i]=!0):(c.lineTickMirror[i]=!1,c.lineMirror[i]=!1):c.lineMirror[i]=!1,"showbackground"in s&&!1!==s.showbackground?(c.backgroundEnable[i]=!0,c.backgroundColor[i]=I(s.backgroundcolor)):c.backgroundEnable[i]=!1):(c.tickEnable[i]=!1,c.labelEnable[i]=!1,c.lineEnable[i]=!1,c.lineTickEnable[i]=!1,c.gridEnable[i]=!1,c.zeroEnable[i]=!1,c.backgroundEnable[i]=!1)}},se.exports=function(T,v){var c=new k;return c.merge(T,v),c}},24682:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(73972),k=r(49119),T=r(3277),v=r(65500),c=r(27659).NG,i="gl3d";function s(a,o,l,u){for(var d=l("bgcolor"),g=C.combine(d,u.paper_bgcolor),h=["up","center","eye"],w=0;w<h.length;w++)l("camera."+h[w]+".x"),l("camera."+h[w]+".y"),l("camera."+h[w]+".z");l("camera.projection.type");var y=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),p=l("aspectmode",y?"manual":"auto");y||(a.aspectratio=o.aspectratio={x:1,y:1,z:1},"manual"===p&&(o.aspectmode="auto"),a.aspectmode=o.aspectmode);var _=c(u.fullData,i,u.id);T(a,o,{font:u.font,scene:u.id,data:_,bgColor:g,calendar:u.calendar,autotypenumbersDflt:u.autotypenumbersDflt,fullLayout:u.fullLayout}),f.getComponentMethod("annotations3d","handleDefaults")(a,o,u);var x=u.getDfltFromLayout("dragmode");if(!1!==x&&!x)if(x="orbit",a.camera&&a.camera.up){var b=a.camera.up.x,M=a.camera.up.y,m=a.camera.up.z;0!==m&&(b&&M&&m?m/Math.sqrt(b*b+M*M+m*m)>.999&&(x="turntable"):x="turntable")}else x="turntable";l("dragmode",x),l("hovermode",u.getDfltFromLayout("hovermode"))}se.exports=function(a,o,l){var u=o._basePlotModules.length>1;k(a,o,l,{type:i,attributes:v,handleDefaults:s,fullLayout:o,font:o.font,fullData:l,getDfltFromLayout:function(d){if(!u)return I.validate(a[d],v[d])?a[d]:void 0},autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})}},65500:function(se,U,r){"use strict";var I=r(77894),C=r(27670).Y,f=r(1426).extendFlat,k=r(71828).counterRegex;function T(v,c,i){return{x:{valType:"number",dflt:v,editType:"camera"},y:{valType:"number",dflt:c,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}se.exports={_arrayAttrRegexps:[k("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:f(T(0,0,1),{}),center:f(T(0,0,0),{}),eye:f(T(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:C({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:I,yaxis:I,zaxis:I,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function(se,U,r){"use strict";var I=r(78614),C=["xaxis","yaxis","zaxis"];function f(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}f.prototype.merge=function(k){for(var T=0;T<3;++T){var v=k[C[T]];v.visible?(this.enabled[T]=v.showspikes,this.colors[T]=I(v.spikecolor),this.drawSides[T]=v.spikesides,this.lineWidth[T]=v.spikethickness):(this.enabled[T]=!1,this.drawSides[T]=!1)}},se.exports=function(k){var T=new f;return T.merge(k),T}},96085:function(se,U,r){"use strict";se.exports=function(T){for(var v=T.axesOptions,c=T.glplot.axesPixels,i=T.fullSceneLayout,s=[[],[],[]],a=0;a<3;++a){var o=i[f[a]];if(o._length=(c[a].hi-c[a].lo)*c[a].pixelsPerDataUnit/T.dataScale[a],Math.abs(o._length)===1/0||isNaN(o._length))s[a]=[];else{o._input_range=o.range.slice(),o.range[0]=c[a].lo/T.dataScale[a],o.range[1]=c[a].hi/T.dataScale[a],o._m=1/(T.dataScale[a]*c[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var l=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var u=o.nticks||C.constrain(o._length/40,4,9);I.autoTicks(o,Math.abs(o.range[1]-o.range[0])/u)}for(var d=I.calcTicks(o,{msUTC:!0}),g=0;g<d.length;++g)d[g].x=d[g].x*T.dataScale[a],"date"===o.type&&(d[g].text=d[g].text.replace(/\<br\>/g," "));s[a]=d,o.tickmode=l}}for(v.ticks=s,a=0;a<3;++a)for(k[a]=.5*(T.glplot.bounds[0][a]+T.glplot.bounds[1][a]),g=0;g<2;++g)v.bounds[g][a]=T.glplot.bounds[g][a];T.contourLevels=function(h){for(var w=new Array(3),y=0;y<3;++y){for(var p=h[y],_=new Array(p.length),x=0;x<p.length;++x)_[x]=p[x].x;w[y]=_}return w}(s)};var I=r(89298),C=r(71828),f=["xaxis","yaxis","zaxis"],k=[0,0,0]},63538:function(se){"use strict";function U(r,I){var C,f,k=[0,0,0,0];for(C=0;C<4;++C)for(f=0;f<4;++f)k[f]+=r[4*C+f]*I[C];return k}se.exports=function(r,I){return U(r.projection,U(r.view,U(r.model,[I[0],I[1],I[2],1])))}},33539:function(se,U,r){"use strict";var I,C,f=r(9330).gl_plot3d,k=f.createCamera,T=f.createScene,v=r(40372),c=r(38520),i=r(73972),s=r(71828),a=s.preserveDrawingBuffer(),o=r(89298),l=r(30211),u=r(78614),d=r(58617),g=r(63538),h=r(30422),w=r(13133),y=r(96085),p=!1;function _(D,S){var O=document.createElement("div"),P=D.container;this.graphDiv=D.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",O.appendChild(R),this.svgContainer=R,O.id=D.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",P.appendChild(O),this.fullLayout=S,this.id=D.id||"scene",this.fullSceneLayout=S[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(S,S[this.id]),this.spikeOptions=w(S[this.id]),this.container=O,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=i.getComponentMethod("annotations3d","convert"),this.drawAnnotations=i.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var x=_.prototype;x.prepareOptions=function(){var D=this,S={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:a,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!(C||(I=document.createElement("canvas"),C=v({canvas:I,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");S.gl=C,S.canvas=I}return S};var b=!0;x.tryCreatePlot=function(){var D=this,S=D.prepareOptions(),O=!0;try{D.glplot=T(S)}catch{if(D.staticMode||!b||a)O=!1;else{s.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{a=S.glOptions.preserveDrawingBuffer=!0,D.glplot=T(S)}catch{a=S.glOptions.preserveDrawingBuffer=!1,O=!1}}}return b=!1,O},x.initializeGLCamera=function(){var D=this,S=D.fullSceneLayout.camera;D.camera=k(D.container,{center:[S.center.x,S.center.y,S.center.z],eye:[S.eye.x,S.eye.y,S.eye.z],up:[S.up.x,S.up.y,S.up.z],_ortho:"orthographic"===S.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},x.initializeGLPlot=function(){var D=this;if(D.initializeGLCamera(),!D.tryCreatePlot())return d(D);D.traces={},D.make4thDimension();var S=D.graphDiv,O=S.layout,P=function(){var F={};return D.isCameraChanged(O)&&(F[D.id+".camera"]=D.getCamera()),D.isAspectChanged(O)&&(F[D.id+".aspectratio"]=D.glplot.getAspectratio(),"manual"!==O[D.id].aspectmode&&(D.fullSceneLayout.aspectmode=O[D.id].aspectmode=F[D.id+".aspectmode"]="manual")),F},R=function(F){if(!1!==F.fullSceneLayout.dragmode){var B=P();F.saveLayout(O),F.graphDiv.emit("plotly_relayout",B)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){R(D)}),D.glplot.canvas.addEventListener("touchstart",function(){p=!0}),D.glplot.canvas.addEventListener("wheel",function(F){if(S._context._scrollZoom.gl3d){if(D.camera._ortho){var B=F.deltaX>F.deltaY?1.1:.9090909090909091,J=D.glplot.getAspectratio();D.glplot.setAspectratio({x:B*J.x,y:B*J.y,z:B*J.z})}R(D)}},!!c&&{passive:!1}),D.glplot.canvas.addEventListener("mousemove",function(){if(!1!==D.fullSceneLayout.dragmode&&0!==D.camera.mouseListener.buttons){var F=P();D.graphDiv.emit("plotly_relayouting",F)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(F){S&&S.emit&&S.emit("plotly_webglcontextlost",{event:F,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},x.render=function(){var D,S=this,O=S.graphDiv,P=S.svgContainer,R=S.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var J=R.width*O._fullLayout._invScaleX,z=R.height*O._fullLayout._invScaleY;P.setAttributeNS(null,"viewBox","0 0 "+J+" "+z),P.setAttributeNS(null,"width",J),P.setAttributeNS(null,"height",z),y(S),S.glplot.axes.update(S.axesOptions);for(var $=Object.keys(S.traces),G=null,H=S.glplot.selection,X=0;X<$.length;++X)"skip"!==(D=S.traces[$[X]]).data.hoverinfo&&D.handlePick(H)&&(G=D),D.setContourLevels&&D.setContourLevels();function K(ke,Te,we){var je=S.fullSceneLayout[ke+"axis"];return"log"!==je.type&&(Te=je.d2l(Te)),o.hoverLabelText(je,Te,we)}if(null!==G){var ae,ue=g(S.glplot.cameraParams,H.dataCoordinate),ne=O._fullData[(D=G.data).index],Q=H.index,ie={xLabel:K("x",H.traceCoordinate[0],D.xhoverformat),yLabel:K("y",H.traceCoordinate[1],D.yhoverformat),zLabel:K("z",H.traceCoordinate[2],D.zhoverformat)},le=l.castHoverinfo(ne,S.fullLayout,Q),fe=(le||"").split("+"),he=le&&"all"===le;ne.hovertemplate||he||(-1===fe.indexOf("x")&&(ie.xLabel=void 0),-1===fe.indexOf("y")&&(ie.yLabel=void 0),-1===fe.indexOf("z")&&(ie.zLabel=void 0),-1===fe.indexOf("text")&&(H.textLabel=void 0),-1===fe.indexOf("name")&&(G.name=void 0));var pe=[];"cone"===D.type||"streamtube"===D.type?(ie.uLabel=K("x",H.traceCoordinate[3],D.uhoverformat),(he||-1!==fe.indexOf("u"))&&pe.push("u: "+ie.uLabel),ie.vLabel=K("y",H.traceCoordinate[4],D.vhoverformat),(he||-1!==fe.indexOf("v"))&&pe.push("v: "+ie.vLabel),ie.wLabel=K("z",H.traceCoordinate[5],D.whoverformat),(he||-1!==fe.indexOf("w"))&&pe.push("w: "+ie.wLabel),ie.normLabel=H.traceCoordinate[6].toPrecision(3),(he||-1!==fe.indexOf("norm"))&&pe.push("norm: "+ie.normLabel),"streamtube"===D.type&&(ie.divergenceLabel=H.traceCoordinate[7].toPrecision(3),(he||-1!==fe.indexOf("divergence"))&&pe.push("divergence: "+ie.divergenceLabel)),H.textLabel&&pe.push(H.textLabel),ae=pe.join("<br>")):"isosurface"===D.type||"volume"===D.type?(ie.valueLabel=o.hoverLabelText(S._mockAxis,S._mockAxis.d2l(H.traceCoordinate[3]),D.valuehoverformat),pe.push("value: "+ie.valueLabel),H.textLabel&&pe.push(H.textLabel),ae=pe.join("<br>")):ae=H.textLabel;var xe={x:H.traceCoordinate[0],y:H.traceCoordinate[1],z:H.traceCoordinate[2],data:ne._input,fullData:ne,curveNumber:ne.index,pointNumber:Q};l.appendArrayPointValue(xe,ne,Q),D._module.eventData&&(xe=ne._module.eventData(xe,H,ne,{},Q));var Ee={points:[xe]};if(S.fullSceneLayout.hovermode){var Re=[];l.loneHover({trace:ne,x:(.5+.5*ue[0]/ue[3])*J,y:(.5-.5*ue[1]/ue[3])*z,xLabel:ie.xLabel,yLabel:ie.yLabel,zLabel:ie.zLabel,text:ae,name:G.name,color:l.castHoverOption(ne,Q,"bgcolor")||G.color,borderColor:l.castHoverOption(ne,Q,"bordercolor"),fontFamily:l.castHoverOption(ne,Q,"font.family"),fontSize:l.castHoverOption(ne,Q,"font.size"),fontColor:l.castHoverOption(ne,Q,"font.color"),nameLength:l.castHoverOption(ne,Q,"namelength"),textAlign:l.castHoverOption(ne,Q,"align"),hovertemplate:s.castOption(ne,Q,"hovertemplate"),hovertemplateLabels:s.extendFlat({},xe,ie),eventData:[xe]},{container:P,gd:O,inOut_bbox:Re}),xe.bbox=Re[0]}O.emit(H.distance<5&&(H.buttons||p)?"plotly_click":"plotly_hover",Ee),this.oldEventData=Ee}else l.loneUnhover(P),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;S.drawAnnotations(S)},x.recoverContext=function(){var D=this;D.glplot.dispose();var S=function(){D.glplot.gl.isContextLost()?requestAnimationFrame(S):D.initializeGLPlot()?D.plot.apply(D,D.plotArgs):s.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(S)};var M=["xaxis","yaxis","zaxis"];function m(D,S,O){for(var P=D.fullSceneLayout,R=0;R<3;R++){var F=M[R],B=F.charAt(0),J=P[F],z=S[B],$=S[B+"calendar"],G=S["_"+B+"length"];if(s.isArrayOrTypedArray(z))for(var H,X=0;X<(G||z.length);X++)if(s.isArrayOrTypedArray(z[X]))for(var K=0;K<z[X].length;++K)H=J.d2l(z[X][K],0,$),!isNaN(H)&&isFinite(H)&&(O[0][R]=Math.min(O[0][R],H),O[1][R]=Math.max(O[1][R],H));else H=J.d2l(z[X],0,$),!isNaN(H)&&isFinite(H)&&(O[0][R]=Math.min(O[0][R],H),O[1][R]=Math.max(O[1][R],H));else O[0][R]=Math.min(O[0][R],0),O[1][R]=Math.max(O[1][R],G-1)}}x.plot=function(D,S,O){var P=this;if(P.plotArgs=[D,S,O],!P.glplot.contextLost){var R,F,B,J,z,$,G=S[P.id],H=O[P.id];P.fullLayout=S,P.fullSceneLayout=G,P.axesOptions.merge(S,G),P.spikeOptions.merge(G),P.setViewport(G),P.updateFx(G.dragmode,G.hovermode),P.camera.enableWheel=P.graphDiv._context._scrollZoom.gl3d,P.glplot.setClearColor(u(G.bgcolor)),P.setConvert(z),D?Array.isArray(D)||(D=[D]):D=[];var X=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(B=0;B<D.length;++B)!0===(R=D[B]).visible&&0!==R._length&&m(this,R,X);!function(De,qe){for(var Ke=De.fullSceneLayout,be=Ke.annotations||[],Oe=0;Oe<3;Oe++)for(var Le=M[Oe],Ue=Le.charAt(0),Ze=Ke[Le],We=0;We<be.length;We++){var et=be[We];if(et.visible){var nt=Ze.r2l(et[Ue]);!isNaN(nt)&&isFinite(nt)&&(qe[0][Oe]=Math.min(qe[0][Oe],nt),qe[1][Oe]=Math.max(qe[1][Oe],nt))}}}(this,X);var K=[1,1,1];for(J=0;J<3;++J)K[J]=X[1][J]===X[0][J]?1:1/(X[1][J]-X[0][J]);for(P.dataScale=K,P.convertAnnotations(this),B=0;B<D.length;++B)!0===(R=D[B]).visible&&0!==R._length&&((F=P.traces[R.uid])?F.data.type===R.type?F.update(R):(F.dispose(),F=R._module.plot(this,R),P.traces[R.uid]=F):(F=R._module.plot(this,R),P.traces[R.uid]=F),F.name=R.name);var ue=Object.keys(P.traces);e:for(B=0;B<ue.length;++B){for(J=0;J<D.length;++J)if(D[J].uid===ue[B]&&!0===D[J].visible&&0!==D[J]._length)continue e;(F=P.traces[ue[B]]).dispose(),delete P.traces[ue[B]]}P.glplot.objects.sort(function(De,qe){return De._trace.data.index-qe._trace.data.index});var ae,ne=[[0,0,0],[0,0,0]],Q=[],ie={};for(B=0;B<3;++B){if(($=(z=G[M[B]]).type)in ie?(ie[$].acc*=K[B],ie[$].count+=1):ie[$]={acc:K[B],count:1},z.autorange){ne[0][B]=1/0,ne[1][B]=-1/0;var le=P.glplot.objects,fe=P.fullSceneLayout.annotations||[],he=z._name.charAt(0);for(J=0;J<le.length;J++){var pe=le[J],xe=pe.bounds,Ee=pe._trace.data._pad||0;ne[0][B]="ErrorBars"===pe.constructor.name&&z._lowerLogErrorBound?Math.min(ne[0][B],z._lowerLogErrorBound):Math.min(ne[0][B],xe[0][B]/K[B]-Ee),ne[1][B]=Math.max(ne[1][B],xe[1][B]/K[B]+Ee)}for(J=0;J<fe.length;J++){var Re=fe[J];if(Re.visible){var ke=z.r2l(Re[he]);ne[0][B]=Math.min(ne[0][B],ke),ne[1][B]=Math.max(ne[1][B],ke)}}if("rangemode"in z&&"tozero"===z.rangemode&&(ne[0][B]=Math.min(ne[0][B],0),ne[1][B]=Math.max(ne[1][B],0)),ne[0][B]>ne[1][B])ne[0][B]=-1,ne[1][B]=1;else{var Te=ne[1][B]-ne[0][B];ne[0][B]-=Te/32,ne[1][B]+=Te/32}if("reversed"===z.autorange){var we=ne[0][B];ne[0][B]=ne[1][B],ne[1][B]=we}}else{var je=z.range;ne[0][B]=z.r2l(je[0]),ne[1][B]=z.r2l(je[1])}ne[0][B]===ne[1][B]&&(ne[0][B]-=1,ne[1][B]+=1),Q[B]=ne[1][B]-ne[0][B],P.glplot.setBounds(B,{min:ne[0][B]*K[B],max:ne[1][B]*K[B]})}var Ce=G.aspectmode;if("cube"===Ce)ae=[1,1,1];else if("manual"===Ce){var Ie=G.aspectratio;ae=[Ie.x,Ie.y,Ie.z]}else{if("auto"!==Ce&&"data"!==Ce)throw new Error("scene.js aspectRatio was not one of the enumerated types");var ge=[1,1,1];for(B=0;B<3;++B){var me=ie[$=(z=G[M[B]]).type];ge[B]=Math.pow(me.acc,1/me.count)/K[B]}ae="data"===Ce||Math.max.apply(null,ge)/Math.min.apply(null,ge)<=4?ge:[1,1,1]}G.aspectratio.x=H.aspectratio.x=ae[0],G.aspectratio.y=H.aspectratio.y=ae[1],G.aspectratio.z=H.aspectratio.z=ae[2],P.glplot.setAspectratio(G.aspectratio),P.viewInitial.aspectratio||(P.viewInitial.aspectratio={x:G.aspectratio.x,y:G.aspectratio.y,z:G.aspectratio.z}),P.viewInitial.aspectmode||(P.viewInitial.aspectmode=G.aspectmode);var ce=G.domain||null,Ae=S._size||null;if(ce&&Ae){var Ne=P.container.style;Ne.position="absolute",Ne.left=Ae.l+ce.x[0]*Ae.w+"px",Ne.top=Ae.t+(1-ce.y[1])*Ae.h+"px",Ne.width=Ae.w*(ce.x[1]-ce.x[0])+"px",Ne.height=Ae.h*(ce.y[1]-ce.y[0])+"px"}P.glplot.redraw()}},x.destroy=function(){var D=this;D.glplot&&(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)},x.getCamera=function(){var D,S=this;return S.camera.view.recalcMatrix(S.camera.view.lastT()),{up:{x:(D=S.camera).up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:!0===D._ortho?"orthographic":"perspective"}}},x.setViewport=function(D){var S,O=this,P=D.camera;O.camera.lookAt.apply(this,[[(S=P).eye.x,S.eye.y,S.eye.z],[S.center.x,S.center.y,S.center.z],[S.up.x,S.up.y,S.up.z]]),O.glplot.setAspectratio(D.aspectratio),"orthographic"===P.projection.type!==O.camera._ortho&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},x.isCameraChanged=function(D){var S=this.getCamera(),O=s.nestedProperty(D,this.id+".camera").get();var J,z,$,G,H,X,R=!1;if(void 0===O)R=!0;else{for(var F=0;F<3;F++)for(var B=0;B<3;B++)if(J=S,G=B,H=void 0,X=void 0,X=["x","y","z"],!(z=O)[(H=["up","center","eye"])[$=F]]||J[H[$]][X[G]]!==z[H[$]][X[G]]){R=!0;break}(!O.projection||S.projection&&S.projection.type!==O.projection.type)&&(R=!0)}return R},x.isAspectChanged=function(D){var S=this.glplot.getAspectratio(),O=s.nestedProperty(D,this.id+".aspectratio").get();return void 0===O||O.x!==S.x||O.y!==S.y||O.z!==S.z},x.saveLayout=function(D){var S,O,P,R,F,B,J=this,z=J.fullLayout,$=J.isCameraChanged(D),G=J.isAspectChanged(D),H=$||G;if(H){var X={};$&&(S=J.getCamera(),P=(O=s.nestedProperty(D,J.id+".camera")).get(),X[J.id+".camera"]=P),G&&(R=J.glplot.getAspectratio(),B=(F=s.nestedProperty(D,J.id+".aspectratio")).get(),X[J.id+".aspectratio"]=B),i.call("_storeDirectGUIEdit",D,z._preGUI,X),$&&(O.set(S),s.nestedProperty(z,J.id+".camera").set(S)),G&&(F.set(R),s.nestedProperty(z,J.id+".aspectratio").set(R),J.glplot.redraw())}return H},x.updateFx=function(D,S){var O=this,P=O.camera;if(P)if("orbit"===D)P.mode="orbit",P.keyBindingMode="rotate";else if("turntable"===D){P.up=[0,0,1],P.mode="turntable",P.keyBindingMode="rotate";var R=O.graphDiv,F=R._fullLayout,B=O.fullSceneLayout.camera,J=B.up.x,z=B.up.y,$=B.up.z;if($/Math.sqrt(J*J+z*z+$*$)<.999){var G=O.id+".camera.up",H={x:0,y:0,z:1},X={};X[G]=H;var K=R.layout;i.call("_storeDirectGUIEdit",K,F._preGUI,X),B.up=H,s.nestedProperty(K,G).set(H)}}else P.keyBindingMode=D;O.fullSceneLayout.hovermode=S},x.toImage=function(D){var S=this;D||(D="png"),S.staticMode&&S.container.appendChild(I),S.glplot.redraw();var O=S.glplot.gl,P=O.drawingBufferWidth,R=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var F=new Uint8Array(P*R*4);O.readPixels(0,0,P,R,O.RGBA,O.UNSIGNED_BYTE,F),function(G,H,X){for(var K=0,ue=X-1;K<ue;++K,--ue)for(var ae=0;ae<H;++ae)for(var ne=0;ne<4;++ne){var Q=4*(H*K+ae)+ne,ie=4*(H*ue+ae)+ne,le=G[Q];G[Q]=G[ie],G[ie]=le}}(F,P,R),function(G,H,X){for(var K=0;K<X;++K)for(var ue=0;ue<H;++ue){var ae=4*(H*K+ue),ne=G[ae+3];if(ne>0)for(var Q=255/ne,ie=0;ie<3;++ie)G[ae+ie]=Math.min(Q*G[ae+ie],255)}}(F,P,R);var B=document.createElement("canvas");B.width=P,B.height=R;var J,z=B.getContext("2d",{willReadFrequently:!0}),$=z.createImageData(P,R);switch($.data.set(F),z.putImageData($,0,0),D){case"jpeg":J=B.toDataURL("image/jpeg");break;case"webp":J=B.toDataURL("image/webp");break;default:J=B.toDataURL("image/png")}return S.staticMode&&S.container.removeChild(I),J},x.setConvert=function(){for(var D=0;D<3;D++){var S=this.fullSceneLayout[M[D]];o.setConvert(S,this.fullLayout),S.setScale=s.noop}},x.make4thDimension=function(){var D=this,S=D.graphDiv._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(D._mockAxis,S)},se.exports=_},90060:function(se){"use strict";se.exports=function(U,r,I,C){C=C||U.length;for(var f=new Array(C),k=0;k<C;k++)f[k]=[U[k],r[k],I[k]];return f}},10820:function(se,U,r){"use strict";var I=r(41940),C=r(85594),f=r(22399),k=r(29241),T=r(53777),v=r(35025),c=r(1426).extendFlat,i=I({editType:"calc"});i.family.dflt='"Open Sans", verdana, arial, sans-serif',i.size.dflt=12,i.color.dflt=f.defaultLine,se.exports={font:i,title:{text:{valType:"string",editType:"layoutstyle"},font:I({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:c(v({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:f.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:f.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:f.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:k.newshape,activeshape:k.activeshape,newselection:T.newselection,activeselection:T.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:c({},C.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:I({editType:"layoutstyle"})}}},77734:function(se,U,r){"use strict";var I=r(78607),C="1.10.1",f='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',k=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',f].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),v={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:f,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:k,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},c=I(v);se.exports={requiredVersion:C,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:v,styleValuesNonMapbox:c,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+C+"."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",c.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},13056:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){var k=C.split(" "),T=k[0],v=k[1],c=I.isArrayOrTypedArray(f)?I.mean(f):f,i=.5+c/100,s=1.5+c/100,a=["",""],o=[0,0];switch(T){case"top":a[0]="top",o[1]=-s;break;case"bottom":a[0]="bottom",o[1]=s}switch(v){case"left":a[1]="right",o[0]=-i;break;case"right":a[1]="left",o[0]=i}return{anchor:a[0]&&a[1]?a.join("-"):a[0]?a[0]:a[1]?a[1]:"center",offset:o}}},50101:function(se,U,r){"use strict";var I=r(44517),C=r(71828),f=C.strTranslate,k=C.strScale,T=r(27659).AU,v=r(77922),c=r(39898),i=r(91424),s=r(63893),a=r(10481),o="mapbox",l=U.constants=r(77734);function u(d){return"string"==typeof d&&(-1!==l.styleValuesMapbox.indexOf(d)||0===d.indexOf("mapbox://"))}U.name=o,U.attr="subplot",U.idRoot=o,U.idRegex=U.attrRegex=C.counterRegex(o),U.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},U.layoutAttributes=r(23585),U.supplyLayoutDefaults=r(77882),U.plot=function(d){var g=d._fullLayout,h=d.calcdata,w=g._subplots[o];if(I.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var y=function(m,D){var S=m._fullLayout;if(""===m._context.mapboxAccessToken)return"";for(var O=[],P=[],R=!1,F=!1,B=0;B<D.length;B++){var J=S[D[B]],z=J.accesstoken;u(J.style)&&(z?C.pushUnique(O,z):(u(J._input.style)&&(C.error("Uses Mapbox map style, but did not set an access token."),R=!0),F=!0)),z&&C.pushUnique(P,z)}if(F){var $=R?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw C.error($),new Error($)}return O.length?(O.length>1&&C.warn(l.multipleTokensErrorMsg),O[0]):(P.length&&C.log(["Listed mapbox access token(s)",P.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(d,w);I.accessToken=y;for(var p=0;p<w.length;p++){var _=w[p],x=T(h,o,_),b=g[_],M=b._subplot;M||(M=new a(d,_),g[_]._subplot=M),M.viewInitial||(M.viewInitial={center:C.extendFlat({},b.center),zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),M.plot(x,g,d._promises)}},U.clean=function(d,g,h,w){for(var y=w._subplots[o]||[],p=0;p<y.length;p++){var _=y[p];!g[_]&&w[_]._subplot&&w[_]._subplot.destroy()}},U.toSVG=function(d){for(var g=d._fullLayout,h=g._subplots[o],w=g._size,y=0;y<h.length;y++){var p=g[h[y]],_=p.domain,x=p._subplot.toImage("png");g._glimages.append("svg:image").attr({xmlns:v.svg,"xlink:href":x,x:w.l+w.w*_.x[0],y:w.t+w.h*(1-_.y[1]),width:w.w*(_.x[1]-_.x[0]),height:w.h*(_.y[1]-_.y[0]),preserveAspectRatio:"none"});var b=c.select(p._subplot.div);if(null!==b.select(".mapboxgl-ctrl-logo").node().offsetParent){var M=g._glimages.append("g");M.attr("transform",f(w.l+w.w*_.x[0]+10,w.t+w.h*(1-_.y[0])-31)),M.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var m=b.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),D=g._glimages.append("g"),S=D.append("text");S.text(m).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":m});var O=i.bBox(S.node()),P=w.w*(_.x[1]-_.x[0]);if(O.width>P/2){var R=m.split("|").join("<br>");S.text(R).attr("data-unformatted",R).call(s.convertToTspans,d),O=i.bBox(S.node())}S.attr("transform",f(-3,8-O.height)),D.insert("rect",".static-attribution").attr({x:-O.width-6,y:-O.height-3,width:O.width+6,height:O.height+3,fill:"rgba(255, 255, 255, 0.75)"});var F=1;O.width+6>P&&(F=P/(O.width+6));var B=[w.l+w.w*_.x[1],w.t+w.h*(1-_.y[0])];D.attr("transform",f(B[0],B[1])+k(F))}},U.updateFx=function(d){for(var g=d._fullLayout,h=g._subplots[o],w=0;w<h.length;w++)g[h[w]]._subplot.updateFx(g)}},67911:function(se,U,r){"use strict";var I=r(71828),C=r(63893).sanitizeHTML,f=r(13056),k=r(77734);function T(s,a){this.subplot=s,this.uid=s.uid+"-"+a,this.index=a,this.idSource="source-"+this.uid,this.idLayer=k.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var v=T.prototype;function c(s){if(!s.visible)return!1;var a=s.source;if(Array.isArray(a)&&a.length>0){for(var o=0;o<a.length;o++)if("string"!=typeof a[o]||0===a[o].length)return!1;return!0}return I.isPlainObject(a)||"string"==typeof a&&a.length>0}function i(s){var a={},o={};switch(s.type){case"circle":I.extendFlat(o,{"circle-radius":s.circle.radius,"circle-color":s.color,"circle-opacity":s.opacity});break;case"line":I.extendFlat(o,{"line-width":s.line.width,"line-color":s.color,"line-opacity":s.opacity,"line-dasharray":s.line.dash});break;case"fill":I.extendFlat(o,{"fill-color":s.color,"fill-outline-color":s.fill.outlinecolor,"fill-opacity":s.opacity});break;case"symbol":var l=s.symbol,u=f(l.textposition,l.iconsize);I.extendFlat(a,{"icon-image":l.icon+"-15","icon-size":l.iconsize/10,"text-field":l.text,"text-size":l.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":l.placement}),I.extendFlat(o,{"icon-color":s.color,"text-color":l.textfont.color,"text-opacity":s.opacity});break;case"raster":I.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":s.opacity})}return{layout:a,paint:o}}v.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=c(s)},v.needsNewImage=function(s){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===s.sourcetype&&(this.source!==s.source||JSON.stringify(this.coordinates)!==JSON.stringify(s.coordinates))},v.needsNewSource=function(s){return this.sourceType!==s.sourcetype||JSON.stringify(this.source)!==JSON.stringify(s.source)||this.layerType!==s.type},v.needsNewLayer=function(s){return this.layerType!==s.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},v.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},v.updateImage=function(s){this.subplot.map.getSource(this.idSource).updateImage({url:s.source,coordinates:s.coordinates});var a=this.findFollowingMapboxLayerId(this.lookupBelow());null!==a&&this.subplot.map.moveLayer(this.idLayer,a)},v.updateSource=function(s){var l,u,d,g,h,a=this.subplot.map;if(a.getSource(this.idSource)&&a.removeSource(this.idSource),this.sourceType=s.sourcetype,this.source=s.source,c(s)){var o=(g=(l=s).source,h={type:d=l.sourcetype},"geojson"===d?u="data":"vector"===d?u="string"==typeof g?"url":"tiles":"raster"===d?(u="tiles",h.tileSize=256):"image"===d&&(u="url",h.coordinates=l.coordinates),h[u]=g,l.sourceattribution&&(h.attribution=C(l.sourceattribution)),h);a.addSource(this.idSource,o)}},v.findFollowingMapboxLayerId=function(s){if("traces"===s)for(var a=this.subplot.getMapLayers(),o=0;o<a.length;o++){var l=a[o].id;if("string"==typeof l&&0===l.indexOf(k.traceLayerPrefix)){s=l;break}}return s},v.updateLayer=function(s){var a=this.subplot,o=i(s),l=this.lookupBelow(),u=this.findFollowingMapboxLayerId(l);this.removeLayer(),c(s)&&a.addLayer({id:this.idLayer,source:this.idSource,"source-layer":s.sourcelayer||"",type:s.type,minzoom:s.minzoom,maxzoom:s.maxzoom,layout:o.layout,paint:o.paint},u),this.layerType=s.type,this.below=l},v.updateStyle=function(s){if(c(s)){var a=i(s);this.subplot.setOptions(this.idLayer,"setLayoutProperty",a.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",a.paint)}},v.removeLayer=function(){var s=this.subplot.map;s.getLayer(this.idLayer)&&s.removeLayer(this.idLayer)},v.dispose=function(){var s=this.subplot.map;s.getLayer(this.idLayer)&&s.removeLayer(this.idLayer),s.getSource(this.idSource)&&s.removeSource(this.idSource)},se.exports=function(s,a,o){var l=new T(s,a);return l.update(o),l}},23585:function(se,U,r){"use strict";var I=r(71828),C=r(7901).defaultLine,f=r(27670).Y,k=r(41940),T=r(82196).textposition,v=r(30962).overrideAll,c=r(44467).templatedArray,i=r(77734),s=k({});s.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(se.exports=v({_arrayAttrRegexps:[I.counterRegex("mapbox",".layers",!0)],domain:f({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:i.styleValuesMapbox.concat(i.styleValuesNonMapbox),dflt:i.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:c("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:C},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:C}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:s,textposition:I.extendFlat({},T,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function(se,U,r){"use strict";var I=r(71828),C=r(49119),f=r(85501),k=r(23585);function T(c,i,s,a){s("accesstoken",a.accessToken),s("style"),s("center.lon"),s("center.lat"),s("zoom"),s("bearing"),s("pitch");var o=s("bounds.west"),l=s("bounds.east"),u=s("bounds.south"),d=s("bounds.north");void 0!==o&&void 0!==l&&void 0!==u&&void 0!==d||delete i.bounds,f(c,i,{name:"layers",handleItemDefaults:v}),i._input=c}function v(c,i){function s(d,g){return I.coerce(c,i,k.layers,d,g)}if(s("visible")){var a,o=s("sourcetype"),l="raster"===o||"image"===o;s("source"),s("sourceattribution"),"vector"===o&&s("sourcelayer"),"image"===o&&s("coordinates"),l&&(a="raster");var u=s("type",a);l&&"raster"!==u&&(u=i.type="raster",I.log("Source types *raster* and *image* must drawn *raster* layer type.")),s("below"),s("color"),s("opacity"),s("minzoom"),s("maxzoom"),"circle"===u&&s("circle.radius"),"line"===u&&(s("line.width"),s("line.dash")),"fill"===u&&s("fill.outlinecolor"),"symbol"===u&&(s("symbol.icon"),s("symbol.iconsize"),s("symbol.text"),I.coerceFont(s,"symbol.textfont"),s("symbol.textposition"),s("symbol.placement"))}}se.exports=function(c,i,s){C(c,i,s,{type:"mapbox",attributes:k,handleDefaults:T,partition:"y",accessToken:i._mapboxAccessToken})}},10481:function(se,U,r){"use strict";var I=r(44517),C=r(71828),f=r(41327),k=r(73972),T=r(89298),v=r(28569),c=r(30211),i=r(64505),s=i.drawMode,a=i.selectMode,o=r(47322).prepSelect,l=r(47322).clearOutline,u=r(47322).clearSelectionsCache,d=r(47322).selectOnClick,g=r(77734),h=r(67911);function w(M,m){this.id=m,this.gd=M;var D=M._fullLayout,S=M._context;this.container=D._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var y=w.prototype;y.plot=function(M,m,D){var S,O=this;O.map&&m[O.id].accesstoken!==O.accessToken&&(O.map.remove(),O.map=null,O.styleObj=null,O.traceHash={},O.layerList=[]),S=new Promise(O.map?function(R,F){O.updateMap(M,m,R,F)}:function(R,F){O.createMap(M,m,R,F)}),D.push(S)},y.createMap=function(M,m,D,S){var O=this,P=m[O.id],R=O.styleObj=_(P.style);O.accessToken=P.accesstoken;var F=P.bounds,B=F?[[F.west,F.south],[F.east,F.north]]:null,J=O.map=new I.Map({container:O.div,style:R.style,center:b(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,maxBounds:B,interactive:!O.isStatic,preserveDrawingBuffer:O.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new I.AttributionControl({compact:!0}));J._canvas.style.left="0px",J._canvas.style.top="0px",O.rejectOnError(S),O.isStatic||O.initFx(M,m);var z=[];z.push(new Promise(function($){J.once("load",$)})),z=z.concat(f.fetchTraceGeoData(M)),Promise.all(z).then(function(){O.fillBelowLookup(M,m),O.updateData(M),O.updateLayout(m),O.resolveOnRender(D)}).catch(S)},y.updateMap=function(M,m,D,S){var O=this,P=O.map,R=m[this.id];O.rejectOnError(S);var F=[],B=_(R.style);JSON.stringify(O.styleObj)!==JSON.stringify(B)&&(O.styleObj=B,P.setStyle(B.style),O.traceHash={},F.push(new Promise(function(J){P.once("styledata",J)}))),F=F.concat(f.fetchTraceGeoData(M)),Promise.all(F).then(function(){O.fillBelowLookup(M,m),O.updateData(M),O.updateLayout(m),O.resolveOnRender(D)}).catch(S)},y.fillBelowLookup=function(M,m){var D,S,O=m[this.id].layers,P=this.belowLookup={},R=!1;for(D=0;D<M.length;D++){var F=M[D][0].trace,B=F._module;"string"==typeof F.below?S=F.below:B.getBelow&&(S=B.getBelow(F,this)),""===S&&(R=!0),P["trace-"+F.uid]=S||""}for(D=0;D<O.length;D++){var J=O[D];P["layout-"+D]=S="string"==typeof J.below?J.below:R?"traces":""}var z,$,G={};for(z in P)G[S=P[z]]?G[S].push(z):G[S]=[z];for(S in G){var H=G[S];if(H.length>1)for(D=0;D<H.length;D++)0===(z=H[D]).indexOf("trace-")?($=z.split("trace-")[1],this.traceHash[$]&&(this.traceHash[$].below=null)):0===z.indexOf("layout-")&&($=z.split("layout-")[1],this.layerList[$]&&(this.layerList[$].below=null))}};var p={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function _(M){var m={};return C.isPlainObject(M)?(m.id=M.id,m.style=M):"string"==typeof M?(m.id=M,m.style=-1!==g.styleValuesMapbox.indexOf(M)?x(M):g.stylesNonMapbox[M]?g.stylesNonMapbox[M]:M):(m.id=g.styleValueDflt,m.style=x(g.styleValueDflt)),m.transition={duration:0,delay:0},m}function x(M){return g.styleUrlPrefix+M+"-"+g.styleUrlSuffix}function b(M){return[M.lon,M.lat]}y.updateData=function(M){var m,D,S,O,P=this.traceHash,R=M.slice().sort(function($,G){return p[$[0].trace.type]-p[G[0].trace.type]});for(S=0;S<R.length;S++){var F=R[S],B=!1;(m=P[(D=F[0].trace).uid])&&(m.type===D.type?(m.update(F),B=!0):m.dispose()),!B&&D._module&&(P[D.uid]=D._module.plot(this,F))}var J=Object.keys(P);e:for(S=0;S<J.length;S++){var z=J[S];for(O=0;O<M.length;O++)if(z===(D=M[O][0].trace).uid)continue e;(m=P[z]).dispose(),delete P[z]}},y.updateLayout=function(M){var m=this.map,D=M[this.id];this.dragging||this.wheeling||(m.setCenter(b(D.center)),m.setZoom(D.zoom),m.setBearing(D.bearing),m.setPitch(D.pitch)),this.updateLayers(M),this.updateFramework(M),this.updateFx(M),this.map.resize(),this.gd._context._scrollZoom.mapbox?m.scrollZoom.enable():m.scrollZoom.disable()},y.resolveOnRender=function(M){var m=this.map;m.on("render",function D(){m.loaded()&&(m.off("render",D),setTimeout(M,10))})},y.rejectOnError=function(M){var m=this.map;function D(){M(new Error(g.mapOnErrorMsg))}m.once("error",D),m.once("style.error",D),m.once("source.error",D),m.once("tile.error",D),m.once("layer.error",D)},y.createFramework=function(M){var m=this,D=m.div=document.createElement("div");D.id=m.uid,D.style.position="absolute",m.container.appendChild(D),m.xaxis={_id:"x",c2p:function(S){return m.project(S).x}},m.yaxis={_id:"y",c2p:function(S){return m.project(S).y}},m.updateFramework(M),m.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},T.setConvert(m.mockAxis,M)},y.initFx=function(M,m){var D=this,S=D.gd,O=D.map;function P(){c.loneUnhover(m._hoverlayer)}function R(){var F=D.getView();S.emit("plotly_relayouting",D.getViewEditsWithDerived(F))}O.on("moveend",function(F){if(D.map){var B=S._fullLayout;if(F.originalEvent||D.wheeling){var J=B[D.id];k.call("_storeDirectGUIEdit",S.layout,B._preGUI,D.getViewEdits(J));var z=D.getView();J._input.center=J.center=z.center,J._input.zoom=J.zoom=z.zoom,J._input.bearing=J.bearing=z.bearing,J._input.pitch=J.pitch=z.pitch,S.emit("plotly_relayout",D.getViewEditsWithDerived(z))}F.originalEvent&&"mouseup"===F.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),B._rehover&&B._rehover()}}),O.on("wheel",function(){D.wheeling=!0}),O.on("mousemove",function(F){var B=D.div.getBoundingClientRect(),J=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return B},D.xaxis.p2c=function(){return O.unproject(J).lng},D.yaxis.p2c=function(){return O.unproject(J).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===D.id&&S._fullLayout[D.id]&&c.hover(S,F,D.id)},c.hover(S,F,D.id),S._fullLayout._hoversubplot=D.id}),O.on("dragstart",function(){D.dragging=!0,P()}),O.on("zoomstart",P),O.on("mouseout",function(){S._fullLayout._hoversubplot=null}),O.on("drag",R),O.on("zoom",R),O.on("dblclick",function(){var F=S._fullLayout[D.id];k.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,D.getViewEdits(F));var B=D.viewInitial;O.setCenter(b(B.center)),O.setZoom(B.zoom),O.setBearing(B.bearing),O.setPitch(B.pitch);var J=D.getView();F._input.center=F.center=J.center,F._input.zoom=F.zoom=J.zoom,F._input.bearing=F.bearing=J.bearing,F._input.pitch=F.pitch=J.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",D.getViewEditsWithDerived(J))}),D.clearOutline=function(){u(D.dragOptions),l(D.dragOptions.gd)},D.onClickInPanFn=function(F){return function(B){var J=S._fullLayout.clickmode;J.indexOf("select")>-1&&d(B.originalEvent,S,[D.xaxis],[D.yaxis],D.id,F),J.indexOf("event")>-1&&c.click(S,B.originalEvent)}}},y.updateFx=function(M){var m=this,D=m.map;if(!m.isStatic){var P=M.dragmode;m.dragOptions=C.extendDeep(m.dragOptions||{},{dragmode:M.dragmode,element:m.div,gd:m.gd,plotinfo:{id:m.id,domain:M[m.id].domain,xaxis:m.xaxis,yaxis:m.yaxis,fillRangeItems:function(B,J){J.isRect?(B.range={})[m.id]=[F([J.xmin,J.ymin]),F([J.xmax,J.ymax])]:(B.lassoPoints={})[m.id]=J.map(F)}},xaxes:[m.xaxis],yaxes:[m.yaxis],subplot:m.id}),D.off("click",m.onClickInPanHandler),a(P)||s(P)?(D.dragPan.disable(),D.on("zoomstart",m.clearOutline),m.dragOptions.prepFn=function(B,J,z){o(B,J,z,m.dragOptions,P)},v.init(m.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",m.clearOutline),m.div.onmousedown=null,m.div.ontouchstart=null,m.div.removeEventListener("touchstart",m.div._ontouchstart),m.onClickInPanHandler=m.onClickInPanFn(m.dragOptions),D.on("click",m.onClickInPanHandler))}function F(B){var J=m.map.unproject(B);return[J.lng,J.lat]}},y.updateFramework=function(M){var m=M[this.id].domain,D=M._size,S=this.div.style;S.width=D.w*(m.x[1]-m.x[0])+"px",S.height=D.h*(m.y[1]-m.y[0])+"px",S.left=D.l+m.x[0]*D.w+"px",S.top=D.t+(1-m.y[1])*D.h+"px",this.xaxis._offset=D.l+m.x[0]*D.w,this.xaxis._length=D.w*(m.x[1]-m.x[0]),this.yaxis._offset=D.t+(1-m.y[1])*D.h,this.yaxis._length=D.h*(m.y[1]-m.y[0])},y.updateLayers=function(M){var m,D=M[this.id].layers,S=this.layerList;if(D.length!==S.length){for(m=0;m<S.length;m++)S[m].dispose();for(S=this.layerList=[],m=0;m<D.length;m++)S.push(h(this,m,D[m]))}else for(m=0;m<D.length;m++)S[m].update(D[m])},y.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},y.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},y.setOptions=function(M,m,D){for(var S in D)this.map[m](M,S,D[S])},y.getMapLayers=function(){return this.map.getStyle().layers},y.addLayer=function(M,m){var D=this.map;if("string"==typeof m){if(""===m)return void D.addLayer(M,m);for(var S=this.getMapLayers(),O=0;O<S.length;O++)if(m===S[O].id)return void D.addLayer(M,m);C.warn(["Trying to add layer with *below* value",m,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(M)},y.project=function(M){return this.map.project(new I.LngLat(M[0],M[1]))},y.getView=function(){var M=this.map,m=M.getCenter(),D={lon:m.lng,lat:m.lat},S=M.getCanvas(),O=parseInt(S.style.width),P=parseInt(S.style.height);return{center:D,zoom:M.getZoom(),bearing:M.getBearing(),pitch:M.getPitch(),_derived:{coordinates:[M.unproject([0,0]).toArray(),M.unproject([O,0]).toArray(),M.unproject([O,P]).toArray(),M.unproject([0,P]).toArray()]}}},y.getViewEdits=function(M){for(var m=this.id,D=["center","zoom","bearing","pitch"],S={},O=0;O<D.length;O++){var P=D[O];S[m+"."+P]=M[P]}return S},y.getViewEditsWithDerived=function(M){var m=this.id,D=this.getViewEdits(M);return D[m+"._derived"]=M._derived,D},se.exports=w},35025:function(se){"use strict";se.exports=function(U){var r=U.editType;return{t:{valType:"number",dflt:0,editType:r},r:{valType:"number",dflt:0,editType:r},b:{valType:"number",dflt:0,editType:r},l:{valType:"number",dflt:0,editType:r},editType:r}}},74875:function(se,U,r){"use strict";var I=r(39898),C=r(84096).Dq,f=r(60721).FF,k=r(92770),T=r(73972),v=r(86281),c=r(44467),i=r(71828),s=r(7901),a=r(50606).BADNUM,o=r(41675),l=r(51873).clearOutline,u=r(21479),d=r(85594),g=r(31391),h=r(27659).a0,w=i.relinkPrivateKeys,y=i._,p=se.exports={};i.extendFlat(p,T),p.attributes=r(9012),p.attributes.type.values=p.allTypes,p.fontAttrs=r(41940),p.layoutAttributes=r(10820),p.fontWeight="normal";var _=p.transformsRegistry,x=r(31137);p.executeAPICommand=x.executeAPICommand,p.computeAPICommandBindings=x.computeAPICommandBindings,p.manageCommandObserver=x.manageCommandObserver,p.hasSimpleAPICommandBindings=x.hasSimpleAPICommandBindings,p.redrawText=function(G){return G=i.getGraphDiv(G),new Promise(function(H){setTimeout(function(){G._fullLayout&&(T.getComponentMethod("annotations","draw")(G),T.getComponentMethod("legend","draw")(G),T.getComponentMethod("colorbar","draw")(G),H(p.previousPromises(G)))},300)})},p.resize=function(G){var H;G=i.getGraphDiv(G);var X=new Promise(function(K,ue){G&&!i.isHidden(G)||ue(new Error("Resize must be passed a displayed plot div element.")),G._redrawTimer&&clearTimeout(G._redrawTimer),G._resolveResize&&(H=G._resolveResize),G._resolveResize=K,G._redrawTimer=setTimeout(function(){if(!G.layout||G.layout.width&&G.layout.height||i.isHidden(G))K(G);else{delete G.layout.width,delete G.layout.height;var ae=G.changed;G.autoplay=!0,T.call("relayout",G,{autosize:!0}).then(function(){G.changed=ae,G._resolveResize===K&&(delete G._resolveResize,K(G))})}},100)});return H&&H(X),X},p.previousPromises=function(G){if((G._promises||[]).length)return Promise.all(G._promises).then(function(){G._promises=[]})},p.addLinks=function(G){if(G._context.showLink||G._context.showSources){var H=G._fullLayout,X=i.ensureSingle(H._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:s.defaultLine,"pointer-events":"all"}).each(function(){var le=I.select(this);le.append("tspan").classed("js-link-to-tool",!0),le.append("tspan").classed("js-link-spacer",!0),le.append("tspan").classed("js-sourcelinks",!0)})}),K=X.node(),ue={y:H._paper.attr("height")-9};document.body.contains(K)&&K.getComputedTextLength()>=H.width-20?(ue["text-anchor"]="start",ue.x=5):(ue["text-anchor"]="end",ue.x=H._paper.attr("width")-7),X.attr(ue);var ae=X.select(".js-link-to-tool"),ne=X.select(".js-link-spacer"),Q=X.select(".js-sourcelinks");G._context.showSources&&G._context.showSources(G),G._context.showLink&&function(ie,le){le.text("");var fe=le.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(ie._context.linkText+" "+String.fromCharCode(187));if(ie._context.sendData)fe.on("click",function(){p.sendDataToCloud(ie)});else{var he=window.location.pathname.split("/"),pe=window.location.search;fe.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+he[2].split(".")[0]+"/"+he[1]+pe})}}(G,ae),ne.text(ae.text()&&Q.text()?" - ":"")}},p.sendDataToCloud=function(G){var H=(window.PLOTLYENV||{}).BASE_URL||G._context.plotlyServerURL;if(H){G.emit("plotly_beforeexport");var X=I.select(G).append("div").attr("id","hiddenform").style("display","none"),K=X.append("form").attr({action:H+"/external",method:"post",target:"_blank"});return K.append("input").attr({type:"text",name:"data"}).node().value=p.graphJson(G,!1,"keepdata"),K.node().submit(),X.remove(),G.emit("plotly_afterexport"),!1}};var b=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],M=["year","month","dayMonth","dayMonthYear"];function m(G,H){var X=G._context.locale;X||(X="en-US");var K=!1,ue={};function ae(he){for(var pe=!0,xe=0;xe<H.length;xe++){var Ee=H[xe];ue[Ee]||(he[Ee]?ue[Ee]=he[Ee]:pe=!1)}pe&&(K=!0)}for(var ne=0;ne<2;ne++){for(var Q=G._context.locales,ie=0;ie<2;ie++){var le=(Q[X]||{}).format;if(le&&(ae(le),K))break;Q=T.localeRegistry}var fe=X.split("-")[0];if(K||fe===X)break;X=fe}return K||ae(T.localeRegistry.en.format),ue}function D(G,H){var X={_fullLayout:H},K="x"===G._id.charAt(0),ue=G._mainAxis._anchorAxis,ae="",ne="",Q="";if(ue&&(Q=ue._mainAxis._id,ae=K?G._id+Q:Q+G._id),!ae||!H._plots[ae]){ae="";for(var ie=G._counterAxes,le=0;le<ie.length;le++){var fe=ie[le],he=K?G._id+fe:fe+G._id;ne||(ne=he);var pe=o.getFromId(X,fe);if(Q&&pe.overlaying===Q){ae=he;break}}}return ae||ne}function S(G){var H=G.transforms;if(Array.isArray(H)&&H.length)for(var X=0;X<H.length;X++){var K=H[X],ue=K._module||_[K.type];if(ue&&ue.makesData)return!0}return!1}function O(G,H,X,K){for(var ue=G.transforms,ae=[G],ne=0;ne<ue.length;ne++){var Q=ue[ne],ie=_[Q.type];ie&&ie.transform&&(ae=ie.transform(ae,{transform:Q,fullTrace:G,fullData:H,layout:X,fullLayout:K,transformIndex:ne}))}return ae}function P(G){return"string"==typeof G&&"px"===G.substr(G.length-2)&&parseFloat(G)}function R(G){var H=G.margin;if(!G._size){var X=G._size={l:Math.round(H.l),r:Math.round(H.r),t:Math.round(H.t),b:Math.round(H.b),p:Math.round(H.pad)};X.w=Math.round(G.width)-X.l-X.r,X.h=Math.round(G.height)-X.t-X.b}G._pushmargin||(G._pushmargin={}),G._pushmarginIds||(G._pushmarginIds={}),G._reservedMargin||(G._reservedMargin={})}p.supplyDefaults=function(G,H){var Ze,We,X=H&&H.skipUpdateCalc,K=G._fullLayout||{};if(K._skipDefaults)delete K._skipDefaults;else{var ue,ae=G._fullLayout={},ne=G.layout||{},Q=G._fullData||[],ie=G._fullData=[],le=G.data||[],fe=G.calcdata||[],he=G._context||{};G._transitionData||p.createTransitionData(G),ae._dfltTitle={plot:y(G,"Click to enter Plot title"),x:y(G,"Click to enter X axis title"),y:y(G,"Click to enter Y axis title"),colorbar:y(G,"Click to enter Colorscale title"),annotation:y(G,"new text")},ae._traceWord=y(G,"trace");var pe=m(G,b);if(ae._mapboxAccessToken=he.mapboxAccessToken,K._initialAutoSizeIsDone){var xe=K.width,Ee=K.height;p.supplyLayoutGlobalDefaults(ne,ae,pe),ne.width||(ae.width=xe),ne.height||(ae.height=Ee),p.sanitizeMargins(ae)}else{p.supplyLayoutGlobalDefaults(ne,ae,pe);var Re=!ne.width||!ne.height,ke=ae.autosize;Re&&(ke||he.autosizable)?p.plotAutoSize(G,ne,ae):Re&&p.sanitizeMargins(ae),!ke&&Re&&(ne.width=ae.width,ne.height=ae.height)}ae._d3locale=((Ze=pe).decimal=(We=ae.separators).charAt(0),Ze.thousands=We.charAt(1),{numberFormat:function(et){try{et=f(Ze).format(i.adjustFormat(et))}catch{return i.warnBadFormat(et),i.noFormat}return et},timeFormat:C(Ze).utcFormat}),ae._extraFormat=m(G,M),ae._initialAutoSizeIsDone=!0,ae._dataLength=le.length,ae._modules=[],ae._visibleModules=[],ae._basePlotModules=[];var we=ae._subplots=function(){var Ze,We,et=T.collectableSubplotTypes,nt={};if(!et){et=[];var ct=T.subplotsRegistry;for(var yt in ct){var ut=ct[yt].attr;if(ut&&(et.push(yt),Array.isArray(ut)))for(We=0;We<ut.length;We++)i.pushUnique(et,ut[We])}}for(Ze=0;Ze<et.length;Ze++)nt[et[Ze]]=[];return nt}(),je=ae._splomAxes={x:{},y:{}},Ce=ae._splomSubplots={};ae._splomGridDflt={},ae._scatterStackOpts={},ae._firstScatter={},ae._alignmentOpts={},ae._colorAxes={},ae._requestRangeslider={},ae._traceUids=function(Ze,We){var et,nt,ct=We.length,yt=[];for(et=0;et<Ze.length;et++){var ut=Ze[et]._fullInput;ut!==nt&&yt.push(ut),nt=ut}var Ct=yt.length,Dt=new Array(ct),vt={};function mt(Rt,Wt){Dt[Wt]=Rt,vt[Rt]=1}function Lt(Rt,Wt){if(Rt&&"string"==typeof Rt&&!vt[Rt])return mt(Rt,Wt),!0}for(et=0;et<ct;et++){var Ft=We[et].uid;"number"==typeof Ft&&(Ft=String(Ft)),Lt(Ft,et)||et<Ct&&Lt(yt[et].uid,et)||mt(i.randstr(vt),et)}return Dt}(Q,le),ae._globalTransforms=(G._context||{}).globalTransforms,p.supplyDataDefaults(le,ie,ne,ae);var Ie=Object.keys(je.x),ge=Object.keys(je.y);if(Ie.length>1&&ge.length>1){for(T.getComponentMethod("grid","sizeDefaults")(ne,ae),ue=0;ue<Ie.length;ue++)i.pushUnique(we.xaxis,Ie[ue]);for(ue=0;ue<ge.length;ue++)i.pushUnique(we.yaxis,ge[ue]);for(var me in Ce)i.pushUnique(we.cartesian,me)}if(ae._has=p._hasPlotType.bind(ae),Q.length===ie.length)for(ue=0;ue<ie.length;ue++)w(ie[ue],Q[ue]);p.supplyLayoutModuleDefaults(ne,ae,ie,G._transitionData);var ce=ae._visibleModules,Ae=[];for(ue=0;ue<ce.length;ue++){var Ne=ce[ue].crossTraceDefaults;Ne&&i.pushUnique(Ae,Ne)}for(ue=0;ue<Ae.length;ue++)Ae[ue](ie,ae);ae._hasOnlyLargeSploms=1===ae._basePlotModules.length&&"splom"===ae._basePlotModules[0].name&&Ie.length>15&&ge.length>15&&0===ae.shapes.length&&0===ae.images.length,p.linkSubplots(ie,ae,Q,K),p.cleanPlot(ie,ae,Q,K);var De=!(!K._has||!K._has("gl2d")),qe=!(!ae._has||!ae._has("gl2d")),Ke=!(!K._has||!K._has("cartesian"))||De,be=!(!ae._has||!ae._has("cartesian"))||qe;Ke&&!be?K._bgLayer.remove():be&&!Ke&&(ae._shouldCreateBgLayer=!0),K._zoomlayer&&!G._dragging&&l({_fullLayout:K}),function(Ze,We){var et,nt=[];We.meta&&(et=We._meta={meta:We.meta,layout:{meta:We.meta}});for(var ct=0;ct<Ze.length;ct++){var yt=Ze[ct];yt.meta?nt[yt.index]=yt._meta={meta:yt.meta}:We.meta&&(yt._meta={meta:We.meta}),We.meta&&(yt._meta.layout={meta:We.meta})}nt.length&&(et||(et=We._meta={}),et.data=nt)}(ie,ae),w(ae,K),T.getComponentMethod("colorscale","crossTraceDefaults")(ie,ae),ae._preGUI||(ae._preGUI={}),ae._tracePreGUI||(ae._tracePreGUI={});var Oe,Le=ae._tracePreGUI,Ue={};for(Oe in Le)Ue[Oe]="old";for(ue=0;ue<ie.length;ue++)Ue[Oe=ie[ue]._fullInput.uid]||(Le[Oe]={}),Ue[Oe]="new";for(Oe in Ue)"old"===Ue[Oe]&&delete Le[Oe];R(ae),T.getComponentMethod("rangeslider","makeData")(ae),X||fe.length!==ie.length||p.supplyDefaultsUpdateCalc(fe,ie)}},p.supplyDefaultsUpdateCalc=function(G,H){for(var X=0;X<H.length;X++){var K=H[X],ue=(G[X]||[])[0];if(ue&&ue.trace){var ae=ue.trace;if(ae._hasCalcTransform){var ne,Q,ie,le=ae._arrayAttrs;for(ne=0;ne<le.length;ne++)ie=i.nestedProperty(ae,Q=le[ne]).get().slice(),i.nestedProperty(K,Q).set(ie)}ue.trace=K}}},p.createTransitionData=function(G){G._transitionData||(G._transitionData={}),G._transitionData._frames||(G._transitionData._frames=[]),G._transitionData._frameHash||(G._transitionData._frameHash={}),G._transitionData._counter||(G._transitionData._counter=0),G._transitionData._interruptCallbacks||(G._transitionData._interruptCallbacks=[])},p._hasPlotType=function(G){var H,X=this._basePlotModules||[];for(H=0;H<X.length;H++)if(X[H].name===G)return!0;var K=this._modules||[];for(H=0;H<K.length;H++){var ue=K[H].name;if(ue===G)return!0;var ae=T.modules[ue];if(ae&&ae.categories[G])return!0}return!1},p.cleanPlot=function(G,H,X,K){var ue,ae,ne=K._basePlotModules||[];for(ue=0;ue<ne.length;ue++){var Q=ne[ue];Q.clean&&Q.clean(G,H,X,K)}var ie=K._has&&K._has("gl"),le=H._has&&H._has("gl");ie&&!le&&void 0!==K._glcontainer&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.selectAll(".no-webgl").remove(),K._glcanvas=null);var fe=!!K._infolayer;e:for(ue=0;ue<X.length;ue++){var he=X[ue].uid;for(ae=0;ae<G.length;ae++)if(he===G[ae].uid)continue e;fe&&K._infolayer.select(".cb"+he).remove()}},p.linkSubplots=function(G,H,X,K){var ue,ae,ne=K._plots||{},Q=H._plots={},ie=H._subplots,le={_fullData:G,_fullLayout:H},fe=ie.cartesian.concat(ie.gl2d||[]);for(ue=0;ue<fe.length;ue++){var he,pe=fe[ue],xe=ne[pe],Ee=o.getFromId(le,pe,"x"),Re=o.getFromId(le,pe,"y");for(xe?he=Q[pe]=xe:(he=Q[pe]={}).id=pe,Ee._counterAxes.push(Re._id),Re._counterAxes.push(Ee._id),Ee._subplotsWith.push(pe),Re._subplotsWith.push(pe),he.xaxis=Ee,he.yaxis=Re,he._hasClipOnAxisFalse=!1,ae=0;ae<G.length;ae++){var ke=G[ae];if(ke.xaxis===he.xaxis._id&&ke.yaxis===he.yaxis._id&&!1===ke.cliponaxis){he._hasClipOnAxisFalse=!0;break}}}var Te,we=o.list(le,null,!0);for(ue=0;ue<we.length;ue++){var je=null;(Te=we[ue]).overlaying&&(je=o.getFromId(le,Te.overlaying))&&je.overlaying&&(Te.overlaying=!1,je=null),Te._mainAxis=je||Te,je&&(Te.domain=je.domain.slice()),Te._anchorAxis="free"===Te.anchor?null:o.getFromId(le,Te.anchor)}for(ue=0;ue<we.length;ue++)if((Te=we[ue])._counterAxes.sort(o.idSort),Te._subplotsWith.sort(i.subplotSort),Te._mainSubplot=D(Te,H),Te._counterAxes.length&&(Te.spikemode&&-1!==Te.spikemode.indexOf("across")||Te.automargin&&Te.mirror&&"free"!==Te.anchor||T.getComponentMethod("rangeslider","isVisible")(Te))){var Ce=1,Ie=0;for(ae=0;ae<Te._counterAxes.length;ae++){var ge=o.getFromId(le,Te._counterAxes[ae]);Ce=Math.min(Ce,ge.domain[0]),Ie=Math.max(Ie,ge.domain[1])}Ce<Ie&&(Te._counterDomainMin=Ce,Te._counterDomainMax=Ie)}},p.clearExpandedTraceDefaultColors=function(G){var H,X,K;for(X=[],(H=G._module._colorAttrs)||(G._module._colorAttrs=H=[],v.crawl(G._module.attributes,function(ue,ae,ne,Q){X[Q]=ae,X.length=Q+1,"color"===ue.valType&&void 0===ue.dflt&&H.push(X.join("."))})),K=0;K<H.length;K++)i.nestedProperty(G,"_input."+H[K]).get()||i.nestedProperty(G,H[K]).set(null)},p.supplyDataDefaults=function(G,H,X,K){var ue,ae,ne,Q=K._modules,ie=K._visibleModules,le=K._basePlotModules,fe=0,he=0;function pe(me){H.push(me);var ce=me._module;ce&&(i.pushUnique(Q,ce),!0===me.visible&&i.pushUnique(ie,ce),i.pushUnique(le,me._module.basePlotModule),fe++,!1!==me._input.visible&&he++)}K._transformModules=[];var xe={},Ee=[],ke=c.traceTemplater((X.template||{}).data||{});for(ue=0;ue<G.length;ue++){if((ae=ke.newTrace(ne=G[ue])).uid=K._traceUids[ue],p.supplyTraceDefaults(ne,ae,he,K,ue),ae.index=ue,ae._input=ne,ae._expandedIndex=fe,ae.transforms&&ae.transforms.length)for(var Te=!1!==ne.visible&&!1===ae.visible,we=O(ae,H,X,K),je=0;je<we.length;je++){var Ce=we[je],Ie={_template:ae._template,type:ae.type,uid:ae.uid+je};Te&&!1===Ce.visible&&delete Ce.visible,p.supplyTraceDefaults(Ce,Ie,fe,K,ue),w(Ie,Ce),Ie.index=ue,Ie._input=ne,Ie._fullInput=ae,Ie._expandedIndex=fe,Ie._expandedInput=Ce,pe(Ie)}else ae._fullInput=ae,ae._expandedInput=ae,pe(ae);T.traceIs(ae,"carpetAxis")&&(xe[ae.carpet]=ae),T.traceIs(ae,"carpetDependent")&&Ee.push(ue)}for(ue=0;ue<Ee.length;ue++)if((ae=H[Ee[ue]]).visible){var ge=xe[ae.carpet];ae._carpet=ge,ge&&ge.visible?(ae.xaxis=ge.xaxis,ae.yaxis=ge.yaxis):ae.visible=!1}},p.supplyAnimationDefaults=function(G){var H;G=G||{};var X={};function K(ue,ae){return i.coerce(G||{},X,d,ue,ae)}if(K("mode"),K("direction"),K("fromcurrent"),Array.isArray(G.frame))for(X.frame=[],H=0;H<G.frame.length;H++)X.frame[H]=p.supplyAnimationFrameDefaults(G.frame[H]||{});else X.frame=p.supplyAnimationFrameDefaults(G.frame||{});if(Array.isArray(G.transition))for(X.transition=[],H=0;H<G.transition.length;H++)X.transition[H]=p.supplyAnimationTransitionDefaults(G.transition[H]||{});else X.transition=p.supplyAnimationTransitionDefaults(G.transition||{});return X},p.supplyAnimationFrameDefaults=function(G){var H={};function X(K,ue){return i.coerce(G||{},H,d.frame,K,ue)}return X("duration"),X("redraw"),H},p.supplyAnimationTransitionDefaults=function(G){var H={};function X(K,ue){return i.coerce(G||{},H,d.transition,K,ue)}return X("duration"),X("easing"),H},p.supplyFrameDefaults=function(G){var H={};function X(K,ue){return i.coerce(G,H,g,K,ue)}return X("group"),X("name"),X("traces"),X("baseframe"),X("data"),X("layout"),H},p.supplyTraceDefaults=function(G,H,X,K,ue){var ae,ne=K.colorway||s.defaults,Q=ne[X%ne.length];function ie(we,je){return i.coerce(G,H,p.attributes,we,je)}var le=ie("visible");ie("type"),ie("name",K._traceWord+" "+ue),ie("uirevision",K.uirevision);var fe=p.getModule(H);if(H._module=fe,fe){var he=fe.basePlotModule,pe=he.attr,xe=he.attributes;if(pe&&xe){var Ee=K._subplots,Re="";if(le||"gl2d"!==he.name){if(Array.isArray(pe))for(ae=0;ae<pe.length;ae++){var ke=pe[ae],Te=i.coerce(G,H,xe,ke);Ee[ke]&&i.pushUnique(Ee[ke],Te),Re+=Te}else Re=i.coerce(G,H,xe,pe);Ee[he.name]&&i.pushUnique(Ee[he.name],Re)}}}return le&&(ie("customdata"),ie("ids"),ie("meta"),T.traceIs(H,"showLegend")?(i.coerce(G,H,fe.attributes.showlegend?fe.attributes:p.attributes,"showlegend"),ie("legend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),H._dfltShowLegend=!0):H._dfltShowLegend=!1,fe&&fe.supplyDefaults(G,H,Q,K),T.traceIs(H,"noOpacity")||ie("opacity"),T.traceIs(H,"notLegendIsolatable")&&(H.visible=!!H.visible),T.traceIs(H,"noHover")||(H.hovertemplate||i.coerceHoverinfo(G,H,K),"parcats"!==H.type&&T.getComponentMethod("fx","supplyDefaults")(G,H,Q,K)),fe&&fe.selectPoints&&ie("selectedpoints"),p.supplyTransformDefaults(G,H,K)),H},p.hasMakesDataTransform=S,p.supplyTransformDefaults=function(G,H,X){if(H._length||S(G)){var K=X._globalTransforms||[],ue=X._transformModules||[];if(Array.isArray(G.transforms)||0!==K.length)for(var ne=K.concat(G.transforms||[]),Q=H.transforms=[],ie=0;ie<ne.length;ie++){var le,fe=ne[ie],he=fe.type,pe=_[he],xe=!(fe._module&&fe._module===pe),Ee=pe&&"function"==typeof pe.transform;pe||i.warn("Unrecognized transform type "+he+"."),pe&&pe.supplyDefaults&&(xe||Ee)?((le=pe.supplyDefaults(fe,H,X,G)).type=he,le._module=pe,i.pushUnique(ue,pe)):le=i.extendFlat({},fe),Q.push(le)}}},p.supplyLayoutGlobalDefaults=function(G,H,X){function K(fe,he){return i.coerce(G,H,p.layoutAttributes,fe,he)}var ue=G.template;i.isPlainObject(ue)&&(H.template=ue,H._template=ue.layout,H._dataTemplate=ue.data),K("autotypenumbers");var ae=i.coerceFont(K,"font");i.coerceFont(K,"title.font",i.extendFlat({},ae,{size:Math.round(1.4*ae.size)})),K("title.text",H._dfltTitle.plot),K("title.xref");var Q=K("title.yref");K("title.pad.t"),K("title.pad.r"),K("title.pad.b"),K("title.pad.l");var ie=K("title.automargin");K("title.x"),K("title.xanchor"),K("title.y"),K("title.yanchor"),ie&&("paper"===Q&&(0!==H.title.y&&(H.title.y=1),"auto"===H.title.yanchor&&(H.title.yanchor=0===H.title.y?"top":"bottom")),"container"===Q&&("auto"===H.title.y&&(H.title.y=1),"auto"===H.title.yanchor&&(H.title.yanchor=H.title.y<.5?"bottom":"top"))),K("uniformtext.mode")&&K("uniformtext.minsize"),K("autosize",!(G.width&&G.height)),K("width"),K("height"),K("minreducedwidth"),K("minreducedheight"),K("margin.l"),K("margin.r"),K("margin.t"),K("margin.b"),K("margin.pad"),K("margin.autoexpand"),G.width&&G.height&&p.sanitizeMargins(H),T.getComponentMethod("grid","sizeDefaults")(G,H),K("paper_bgcolor"),K("separators",X.decimal+X.thousands),K("hidesources"),K("colorway"),K("datarevision");var le=K("uirevision");K("editrevision",le),K("selectionrevision",le),T.getComponentMethod("modebar","supplyLayoutDefaults")(G,H),T.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(G,H,K),T.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(G,H,K),K("meta"),i.isPlainObject(G.transition)&&(K("transition.duration"),K("transition.easing"),K("transition.ordering")),T.getComponentMethod("calendars","handleDefaults")(G,H,"calendar"),T.getComponentMethod("fx","supplyLayoutGlobalDefaults")(G,H,K),i.coerce(G,H,u,"scattermode")},p.plotAutoSize=function(G,H,X){var K,ue,ae=G._context||{},ne=ae.frameMargins,Q=i.isPlotDiv(G);if(Q&&G.emit("plotly_autosize"),ae.fillFrame)K=window.innerWidth,ue=window.innerHeight,document.body.style.overflow="hidden";else{var ie=Q?window.getComputedStyle(G):{};if(K=P(ie.width)||P(ie.maxWidth)||X.width,ue=P(ie.height)||P(ie.maxHeight)||X.height,k(ne)&&ne>0){var le=1-2*ne;K=Math.round(le*K),ue=Math.round(le*ue)}}var fe=p.layoutAttributes.width.min,he=p.layoutAttributes.height.min;K<fe&&(K=fe),ue<he&&(ue=he);var pe=!H.width&&Math.abs(X.width-K)>1,xe=!H.height&&Math.abs(X.height-ue)>1;(xe||pe)&&(pe&&(X.width=K),xe&&(X.height=ue)),G._initialAutoSize||(G._initialAutoSize={width:K,height:ue}),p.sanitizeMargins(X)},p.supplyLayoutModuleDefaults=function(G,H,X,K){var ue,ae,ne,Q=T.componentsRegistry,ie=H._basePlotModules,le=T.subplotsRegistry.cartesian;for(ue in Q)(ne=Q[ue]).includeBasePlot&&ne.includeBasePlot(G,H);for(var fe in ie.length||ie.push(le),H._has("cartesian")&&(T.getComponentMethod("grid","contentDefaults")(G,H),le.finalizeSubplots(G,H)),H._subplots)H._subplots[fe].sort(i.subplotSort);for(ae=0;ae<ie.length;ae++)(ne=ie[ae]).supplyLayoutDefaults&&ne.supplyLayoutDefaults(G,H,X);var he=H._modules;for(ae=0;ae<he.length;ae++)(ne=he[ae]).supplyLayoutDefaults&&ne.supplyLayoutDefaults(G,H,X);var pe=H._transformModules;for(ae=0;ae<pe.length;ae++)(ne=pe[ae]).supplyLayoutDefaults&&ne.supplyLayoutDefaults(G,H,X,K);for(ue in Q)(ne=Q[ue]).supplyLayoutDefaults&&ne.supplyLayoutDefaults(G,H,X)},p.purge=function(G){var H=G._fullLayout||{};void 0!==H._glcontainer&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.remove(),H._glcanvas=null),H._modeBar&&H._modeBar.destroy(),G._transitionData&&(G._transitionData._interruptCallbacks&&(G._transitionData._interruptCallbacks.length=0),G._transitionData._animationRaf&&window.cancelAnimationFrame(G._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(G),delete G.data,delete G.layout,delete G._fullData,delete G._fullLayout,delete G.calcdata,delete G.empty,delete G.fid,delete G.undoqueue,delete G.undonum,delete G.autoplay,delete G.changed,delete G._promises,delete G._redrawTimer,delete G._hmlumcount,delete G._hmpixcount,delete G._transitionData,delete G._transitioning,delete G._initialAutoSize,delete G._transitioningWithDuration,delete G._dragging,delete G._dragged,delete G._dragdata,delete G._hoverdata,delete G._snapshotInProgress,delete G._editing,delete G._mouseDownTime,delete G._legendMouseDownTime,G.removeAllListeners&&G.removeAllListeners()},p.style=function(G){var H,X=G._fullLayout._visibleModules,K=[];for(H=0;H<X.length;H++){var ue=X[H];ue.style&&i.pushUnique(K,ue.style)}for(H=0;H<K.length;H++)K[H](G)},p.sanitizeMargins=function(G){if(G&&G.margin){var H,X=G.width,K=G.height,ue=G.margin,ne=K-(ue.t+ue.b);X-(ue.l+ue.r)<0&&(H=(X-1)/(ue.l+ue.r),ue.l=Math.floor(H*ue.l),ue.r=Math.floor(H*ue.r)),ne<0&&(H=(K-1)/(ue.t+ue.b),ue.t=Math.floor(H*ue.t),ue.b=Math.floor(H*ue.b))}},p.clearAutoMarginIds=function(G){G._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(G,H){G._fullLayout._pushmarginIds[H]=1},p.autoMargin=function(G,H,X){var K=G._fullLayout,ue=K.width,ae=K.height,ne=K.margin,ie=K.minreducedheight,le=i.constrain(ue-ne.l-ne.r,2,K.minreducedwidth),fe=i.constrain(ae-ne.t-ne.b,2,ie),he=Math.max(0,ue-le),pe=Math.max(0,ae-fe),xe=K._pushmargin,Ee=K._pushmarginIds;if(!1!==ne.autoexpand){if(X){var Re=X.pad;if(void 0===Re&&(Re=Math.min(12,ne.l,ne.r,ne.t,ne.b)),he){var ke=(X.l+X.r)/he;ke>1&&(X.l/=ke,X.r/=ke)}if(pe){var Te=(X.t+X.b)/pe;Te>1&&(X.t/=Te,X.b/=Te)}xe[H]={l:{val:void 0!==X.xl?X.xl:X.x,size:X.l+Re},r:{val:void 0!==X.xr?X.xr:X.x,size:X.r+Re},b:{val:void 0!==X.yb?X.yb:X.y,size:X.b+Re},t:{val:void 0!==X.yt?X.yt:X.y,size:X.t+Re}},Ee[H]=1}else delete xe[H],delete Ee[H];if(!K._replotting)return p.doAutoMargin(G)}},p.doAutoMargin=function(G){var H=G._fullLayout,X=H.width,K=H.height;H._size||(H._size={}),R(H);var ue=H._size,ae=H.margin,ne={t:0,b:0,l:0,r:0},Q=i.extendFlat({},ue),ie=ae.l,le=ae.r,fe=ae.t,he=ae.b,pe=H._pushmargin,xe=H._pushmarginIds,Ee=H.minreducedwidth,Re=H.minreducedheight;if(!1!==ae.autoexpand){for(var ke in pe)xe[ke]||delete pe[ke];var Te=G._fullLayout._reservedMargin;for(var we in Te)for(var je in Te[we])ne[je]=Math.max(ne[je],Te[we][je]);for(var Ie in pe.base={l:{val:0,size:ie},r:{val:1,size:le},t:{val:1,size:fe},b:{val:0,size:he}},ne){var ge=0;for(var me in pe)"base"!==me&&k(pe[me][Ie].size)&&(ge=pe[me][Ie].size>ge?pe[me][Ie].size:ge);var ce=Math.max(0,ae[Ie]-ge);ne[Ie]=Math.max(0,ne[Ie]-ce)}for(var Ae in pe){var Ne=pe[Ae].l||{},De=pe[Ae].b||{},qe=Ne.val,Ke=Ne.size,be=De.val,Oe=De.size,Le=X-ne.r-ne.l,Ue=K-ne.t-ne.b;for(var Ze in pe){if(k(Ke)&&pe[Ze].r){var We=pe[Ze].r.val,et=pe[Ze].r.size;if(We>qe){var nt=(Ke*We+(et-Le)*qe)/(We-qe),ct=(et*(1-qe)+(Ke-Le)*(1-We))/(We-qe);nt+ct>ie+le&&(ie=nt,le=ct)}}if(k(Oe)&&pe[Ze].t){var yt=pe[Ze].t.val,ut=pe[Ze].t.size;if(yt>be){var Ct=(Oe*yt+(ut-Ue)*be)/(yt-be),Dt=(ut*(1-be)+(Oe-Ue)*(1-yt))/(yt-be);Ct+Dt>he+fe&&(he=Ct,fe=Dt)}}}}}var st,vt=i.constrain(X-ae.l-ae.r,2,Ee),mt=i.constrain(K-ae.t-ae.b,2,Re),Lt=Math.max(0,X-vt),Ft=Math.max(0,K-mt);if(Lt){var Rt=(ie+le)/Lt;Rt>1&&(ie/=Rt,le/=Rt)}if(Ft){var Wt=(he+fe)/Ft;Wt>1&&(he/=Wt,fe/=Wt)}if(ue.l=Math.round(ie)+ne.l,ue.r=Math.round(le)+ne.r,ue.t=Math.round(fe)+ne.t,ue.b=Math.round(he)+ne.b,ue.p=Math.round(ae.pad),ue.w=Math.round(X)-ue.l-ue.r,ue.h=Math.round(K)-ue.t-ue.b,!H._replotting&&(p.didMarginChange(Q,ue)||function(it){if("_redrawFromAutoMarginCount"in it._fullLayout)return!1;var st=o.list(it,"",!0);for(var Je in st)if(st[Je].autoshift||st[Je].shift)return!0;return!1}(G))){"_redrawFromAutoMarginCount"in H?H._redrawFromAutoMarginCount++:H._redrawFromAutoMarginCount=1;var Ht=3*(1+Object.keys(xe).length);if(H._redrawFromAutoMarginCount<Ht)return T.call("_doPlot",G);H._size=Q,i.warn("Too many auto-margin redraws.")}st=o.list(G,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Je){for(var ot=0;ot<st.length;ot++){var pt=st[ot][Je];pt&&pt()}})};var F=["l","r","t","b","p","w","h"];function B(G,H,X){var K=!1,ae=i.syncOrAsync([p.previousPromises,function(){if(G._transitionData)return G._transitioning=!1,function(ne){var Q=Promise.resolve();if(!ne)return Q;for(;ne.length;)Q=Q.then(ne.shift());return Q}(G._transitionData._interruptCallbacks)},X.prepareFn,p.rehover,p.reselect,function(){return G.emit("plotly_transitioning",[]),new Promise(function(ne){G._transitioning=!0,H.duration>0&&(G._transitioningWithDuration=!0),G._transitionData._interruptCallbacks.push(function(){K=!0}),X.redraw&&G._transitionData._interruptCallbacks.push(function(){return T.call("redraw",G)}),G._transitionData._interruptCallbacks.push(function(){G.emit("plotly_transitioninterrupted",[])});var Q=0,ie=0;function le(){return Q++,function(){var fe;ie++,K||ie!==Q||(fe=ne,G._transitionData&&(function(he){if(he)for(;he.length;)he.shift()}(G._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(X.redraw)return T.call("redraw",G)}).then(function(){G._transitioning=!1,G._transitioningWithDuration=!1,G.emit("plotly_transitioned",[])}).then(fe)))}}X.runFn(le),setTimeout(le())})}],G);return ae&&ae.then||(ae=Promise.resolve()),ae.then(function(){return G})}p.didMarginChange=function(G,H){for(var X=0;X<F.length;X++){var K=F[X],ue=G[K],ae=H[K];if(!k(ue)||Math.abs(ae-ue)>1)return!0}return!1},p.graphJson=function(G,H,X,K,ue,ae){(ue&&H&&!G._fullData||ue&&!H&&!G._fullLayout)&&p.supplyDefaults(G);var Q=ue?G._fullLayout:G.layout,ie=(G._transitionData||{})._frames;function le(pe,xe){if("function"==typeof pe)return xe?"_function_":null;if(i.isPlainObject(pe)){var Ee,Re={};return Object.keys(pe).sort().forEach(function(ke){if(-1===["_","["].indexOf(ke.charAt(0)))if("function"!=typeof pe[ke]){if("keepdata"===X){if("src"===ke.substr(ke.length-3))return}else if("keepstream"===X){if("string"==typeof(Ee=pe[ke+"src"])&&Ee.indexOf(":")>0&&!i.isPlainObject(pe.stream))return}else if("keepall"!==X&&"string"==typeof(Ee=pe[ke+"src"])&&Ee.indexOf(":")>0)return;Re[ke]=le(pe[ke],xe)}else xe&&(Re[ke]="_function")}),Re}return Array.isArray(pe)?pe.map(function(ke){return le(ke,xe)}):i.isTypedArray(pe)?i.simpleMap(pe,i.identity):i.isJSDate(pe)?i.ms2DateTimeLocal(+pe):pe}var fe={data:((ue?G._fullData:G.data)||[]).map(function(pe){var xe=le(pe);return H&&delete xe.fit,xe})};if(!H&&(fe.layout=le(Q),ue)){var he=Q._size;fe.layout.computed={margin:{b:he.b,l:he.l,r:he.r,t:he.t}}}return ie&&(fe.frames=le(ie)),ae&&(fe.config=le(G._context,!0)),"object"===K?fe:JSON.stringify(fe)},p.modifyFrames=function(G,H){var X,K,ue,ae=G._transitionData._frames,ne=G._transitionData._frameHash;for(X=0;X<H.length;X++)switch((K=H[X]).type){case"replace":var Q=(ae[K.index]||{}).name,ie=(ue=K.value).name;ae[K.index]=ne[ie]=ue,ie!==Q&&(delete ne[Q],ne[ie]=ue);break;case"insert":ne[(ue=K.value).name]=ue,ae.splice(K.index,0,ue);break;case"delete":delete ne[(ue=ae[K.index]).name],ae.splice(K.index,1)}return Promise.resolve()},p.computeFrame=function(G,H){var X,K,ue,ae,ne=G._transitionData._frameHash;if(!H)throw new Error("computeFrame must be given a string frame name");var Q=ne[H.toString()];if(!Q)return!1;for(var ie=[Q],le=[Q.name];Q.baseframe&&(Q=ne[Q.baseframe.toString()])&&-1===le.indexOf(Q.name);)ie.push(Q),le.push(Q.name);for(var fe={};Q=ie.pop();)if(Q.layout&&(fe.layout=p.extendLayout(fe.layout,Q.layout)),Q.data){if(fe.data||(fe.data=[]),!(K=Q.traces))for(K=[],X=0;X<Q.data.length;X++)K[X]=X;for(fe.traces||(fe.traces=[]),X=0;X<Q.data.length;X++)null!=(ue=K[X])&&(-1===(ae=fe.traces.indexOf(ue))&&(fe.traces[ae=fe.data.length]=ue),fe.data[ae]=p.extendTrace(fe.data[ae],Q.data[X]))}return fe},p.recomputeFrameHash=function(G){for(var H=G._transitionData._frameHash={},X=G._transitionData._frames,K=0;K<X.length;K++){var ue=X[K];ue&&ue.name&&(H[ue.name]=ue)}},p.extendObjectWithContainers=function(G,H,X){var K,ue,ae,ne,Q,ie,le,fe=i.extendDeepNoArrays({},H||{}),he=i.expandObjectPaths(fe),pe={};if(X&&X.length)for(ae=0;ae<X.length;ae++)void 0===(ue=(K=i.nestedProperty(he,X[ae])).get())?i.nestedProperty(pe,X[ae]).set(null):(K.set(null),i.nestedProperty(pe,X[ae]).set(ue));if(G=i.extendDeepNoArrays(G||{},he),X&&X.length)for(ae=0;ae<X.length;ae++)if(ie=i.nestedProperty(pe,X[ae]).get()){for(le=(Q=i.nestedProperty(G,X[ae])).get(),Array.isArray(le)||Q.set(le=[]),ne=0;ne<ie.length;ne++){var xe=ie[ne];le[ne]=null===xe?null:p.extendObjectWithContainers(le[ne],xe)}Q.set(le)}return G},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=T.layoutArrayContainers,p.extendTrace=function(G,H){return p.extendObjectWithContainers(G,H,p.dataArrayContainers)},p.extendLayout=function(G,H){return p.extendObjectWithContainers(G,H,p.layoutArrayContainers)},p.transition=function(G,H,X,K,ue,ae){var ne={redraw:ue.redraw},Q={},ie=[];return ne.prepareFn=function(){for(var le=Array.isArray(H)?H.length:0,fe=K.slice(0,le),he=0;he<fe.length;he++){var pe=fe[he],xe=G._fullData[pe]._module;if(xe){if(xe.animatable){var Ee=xe.basePlotModule.name;Q[Ee]||(Q[Ee]=[]),Q[Ee].push(pe)}G.data[fe[he]]=p.extendTrace(G.data[fe[he]],H[he])}}var Re=i.expandObjectPaths(i.extendDeepNoArrays({},X)),ke=/^[xy]axis[0-9]*$/;for(var Te in Re)ke.test(Te)&&delete Re[Te].range;p.extendLayout(G.layout,Re),delete G.calcdata,p.supplyDefaults(G),p.doCalcdata(G);var we=i.expandObjectPaths(X);if(we){var je=G._fullLayout._plots;for(var Ce in je){var Ie=je[Ce],ge=Ie.xaxis,me=Ie.yaxis,ce=ge.range.slice(),Ae=me.range.slice(),Ne=null,De=null,qe=null,Ke=null;Array.isArray(we[ge._name+".range"])?Ne=we[ge._name+".range"].slice():Array.isArray((we[ge._name]||{}).range)&&(Ne=we[ge._name].range.slice()),Array.isArray(we[me._name+".range"])?De=we[me._name+".range"].slice():Array.isArray((we[me._name]||{}).range)&&(De=we[me._name].range.slice()),ce&&Ne&&(ge.r2l(ce[0])!==ge.r2l(Ne[0])||ge.r2l(ce[1])!==ge.r2l(Ne[1]))&&(qe={xr0:ce,xr1:Ne}),Ae&&De&&(me.r2l(Ae[0])!==me.r2l(De[0])||me.r2l(Ae[1])!==me.r2l(De[1]))&&(Ke={yr0:Ae,yr1:De}),(qe||Ke)&&ie.push(i.extendFlat({plotinfo:Ie},qe,Ke))}}return Promise.resolve()},ne.runFn=function(le){var fe,he,pe=G._fullLayout._basePlotModules,xe=ie.length;if(X)for(he=0;he<pe.length;he++)pe[he].transitionAxes&&pe[he].transitionAxes(G,ie,ae,le);for(var Ee in xe?((fe=i.extendFlat({},ae)).duration=0,delete Q.cartesian):fe=ae,Q){var Re=Q[Ee];G._fullData[Re[0]]._module.basePlotModule.plot(G,Re,fe,le)}},B(G,ae,ne)},p.transitionFromReact=function(G,H,X,K){var ue=G._fullLayout,ae=ue.transition,ne={},Q=[];return ne.prepareFn=function(){var ie=ue._plots;for(var le in ne.redraw=!1,"some"===H.anim&&(ne.redraw=!0),"some"===X.anim&&(ne.redraw=!0),ie){var fe=ie[le],he=fe.xaxis,pe=fe.yaxis,xe=K[he._name].range.slice(),Ee=K[pe._name].range.slice(),Re=he.range.slice(),ke=pe.range.slice();he.setScale(),pe.setScale();var Te=null,we=null;he.r2l(xe[0])===he.r2l(Re[0])&&he.r2l(xe[1])===he.r2l(Re[1])||(Te={xr0:xe,xr1:Re}),pe.r2l(Ee[0])===pe.r2l(ke[0])&&pe.r2l(Ee[1])===pe.r2l(ke[1])||(we={yr0:Ee,yr1:ke}),(Te||we)&&Q.push(i.extendFlat({plotinfo:fe},Te,we))}return Promise.resolve()},ne.runFn=function(ie){for(var le,fe,he,pe=G._fullData,xe=G._fullLayout._basePlotModules,Ee=[],Re=0;Re<pe.length;Re++)Ee.push(Re);function ke(){if(G._fullLayout)for(var we=0;we<xe.length;we++)xe[we].transitionAxes&&xe[we].transitionAxes(G,Q,le,ie)}function Te(){if(G._fullLayout)for(var we=0;we<xe.length;we++)xe[we].plot(G,he,fe,ie)}Q.length&&H.anim?"traces first"===ae.ordering?(le=i.extendFlat({},ae,{duration:0}),he=Ee,fe=ae,setTimeout(ke,ae.duration),Te()):(le=ae,he=null,fe=i.extendFlat({},ae,{duration:0}),setTimeout(Te,le.duration),ke()):Q.length?(le=ae,ke()):H.anim&&(he=Ee,fe=ae,Te())},B(G,ae,ne)},p.doCalcdata=function(G,H){var X,K,ue,ae,ne=o.list(G),Q=G._fullData,ie=G._fullLayout,le=new Array(Q.length),fe=(G.calcdata||[]).slice();for(G.calcdata=le,ie._numBoxes=0,ie._numViolins=0,ie._violinScaleGroupStats={},G._hmpixcount=0,G._hmlumcount=0,ie._piecolormap={},ie._sunburstcolormap={},ie._treemapcolormap={},ie._iciclecolormap={},ie._funnelareacolormap={},ue=0;ue<Q.length;ue++)Array.isArray(H)&&-1===H.indexOf(ue)&&(le[ue]=fe[ue]);for(ue=0;ue<Q.length;ue++)(X=Q[ue])._arrayAttrs=v.findArrayAttributes(X),X._extremes={};var he=ie._subplots.polar||[];for(ue=0;ue<he.length;ue++)ne.push(ie[he[ue]].radialaxis,ie[he[ue]].angularaxis);for(var pe in ie._colorAxes){var xe=ie[pe];!1!==xe.cauto&&(delete xe.cmin,delete xe.cmax)}var Ee=!1;function Re(we){if(K=(X=Q[we])._module,!0===X.visible&&X.transforms){if(K&&K.calc){var je=K.calc(G,X);je[0]&&je[0].t&&je[0].t._scene&&delete je[0].t._scene.dirty}for(ae=0;ae<X.transforms.length;ae++){var Ce=X.transforms[ae];(K=_[Ce.type])&&K.calcTransform&&(X._hasCalcTransform=!0,Ee=!0,K.calcTransform(G,X,Ce))}}}function ke(we,je){if(!!(K=(X=Q[we])._module).isContainer===je){var Ce=[];if(!0===X.visible&&0!==X._length){delete X._indexToPoints;var Ie=X.transforms||[];for(ae=Ie.length-1;ae>=0;ae--)if(Ie[ae].enabled){X._indexToPoints=Ie[ae]._indexToPoints;break}K&&K.calc&&(Ce=K.calc(G,X))}Array.isArray(Ce)&&Ce[0]||(Ce=[{x:a,y:a}]),Ce[0].t||(Ce[0].t={}),Ce[0].trace=X,le[we]=Ce}}for(z(ne,Q,ie),ue=0;ue<Q.length;ue++)ke(ue,!0);for(ue=0;ue<Q.length;ue++)Re(ue);for(Ee&&z(ne,Q,ie),ue=0;ue<Q.length;ue++)ke(ue,!0);for(ue=0;ue<Q.length;ue++)ke(ue,!1);$(G);var Te=function(we,je){var Ce,Ie,ge,me,ce,Ae=[];function Ne(it,st,Je){var ot=st._id.charAt(0);if("histogram2dcontour"===it){var pt=st._counterAxes[0],xt=o.getFromId(je,pt),He="x"===ot||"x"===pt&&"category"===xt.type,Ge="y"===ot||"y"===pt&&"category"===xt.type;return function(dt,ht){return 0===dt||0===ht||He&&dt===Je[ht].length-1||Ge&&ht===Je.length-1?-1:("y"===ot?ht:dt)-1}}return function(dt,ht){return"y"===ot?ht:dt}}var De={min:function(it){return i.aggNums(Math.min,null,it)},max:function(it){return i.aggNums(Math.max,null,it)},sum:function(it){return i.aggNums(function(st,Je){return st+Je},null,it)},total:function(it){return i.aggNums(function(st,Je){return st+Je},null,it)},mean:function(it){return i.mean(it)},median:function(it){return i.median(it)}};for(Ce=0;Ce<we.length;Ce++){var qe=we[Ce];if("category"===qe.type){var Ke=qe.categoryorder.match(J);if(Ke){var be=Ke[1],Oe=Ke[2],Le=qe._id.charAt(0),Ue="x"===Le,Ze=[];for(Ie=0;Ie<qe._categories.length;Ie++)Ze.push([qe._categories[Ie],[]]);for(Ie=0;Ie<qe._traceIndices.length;Ie++){var We=qe._traceIndices[Ie],et=je._fullData[We];if(!0===et.visible){var nt=et.type;T.traceIs(et,"histogram")&&(delete et._xautoBinFinished,delete et._yautoBinFinished);var ct="splom"===nt,yt="scattergl"===nt,ut=je.calcdata[We];for(ge=0;ge<ut.length;ge++){var Ct,Dt,vt=ut[ge];if(ct){var mt=et._axesDim[qe._id];if(!Ue){var Lt=et._diag[mt][0];Lt&&(qe=je._fullLayout[o.id2name(Lt)])}var Ft=vt.trace.dimensions[mt].values;for(me=0;me<Ft.length;me++)for(Ct=qe._categoriesMap[Ft[me]],ce=0;ce<vt.trace.dimensions.length;ce++)ce!==mt&&Ze[Ct][1].push(vt.trace.dimensions[ce].values[me])}else if(yt){for(me=0;me<vt.t.x.length;me++)Ue?(Ct=vt.t.x[me],Dt=vt.t.y[me]):(Ct=vt.t.y[me],Dt=vt.t.x[me]),Ze[Ct][1].push(Dt);vt.t&&vt.t._scene&&delete vt.t._scene.dirty}else if(vt.hasOwnProperty("z")){var Wt=Ne(et.type,qe,Dt=vt.z);for(me=0;me<Dt.length;me++)for(ce=0;ce<Dt[me].length;ce++)(Ct=Wt(ce,me))+1&&Ze[Ct][1].push(Dt[me][ce])}else for(void 0===(Ct=vt.p)&&(Ct=vt[Le]),void 0===(Dt=vt.s)&&(Dt=vt.v),void 0===Dt&&(Dt=Ue?vt.y:vt.x),Array.isArray(Dt)||(Dt=void 0===Dt?[]:[Dt]),me=0;me<Dt.length;me++)Ze[Ct][1].push(Dt[me])}}}qe._categoriesValue=Ze;var Ht=[];for(Ie=0;Ie<Ze.length;Ie++)Ht.push([Ze[Ie][0],De[be](Ze[Ie][1])]);Ht.sort(function(it,st){return it[1]-st[1]}),qe._categoriesAggregatedValue=Ht,qe._initialCategories=Ht.map(function(it){return it[0]}),"descending"===Oe&&qe._initialCategories.reverse(),Ae=Ae.concat(qe.sortByInitialCategories())}}}return Ae}(ne,G);if(Te.length){for(ie._numBoxes=0,ie._numViolins=0,ue=0;ue<Te.length;ue++)ke(Te[ue],!0);for(ue=0;ue<Te.length;ue++)ke(Te[ue],!1);$(G)}T.getComponentMethod("fx","calc")(G),T.getComponentMethod("errorbars","calc")(G)};var J=/(total|sum|min|max|mean|median) (ascending|descending)/;function z(G,H,X){var K={};function ue(ie){ie.clearCalc(),"multicategory"===ie.type&&ie.setupMultiCategory(H),K[ie._id]=1}i.simpleMap(G,ue);for(var ae=X._axisMatchGroups||[],ne=0;ne<ae.length;ne++)for(var Q in ae[ne])K[Q]||ue(X[o.id2name(Q)])}function $(G){var H,X,K,ue=G._fullLayout,ae=ue._visibleModules,ne={};for(X=0;X<ae.length;X++){var Q=ae[X],ie=Q.crossTraceCalc;if(ie){var le=Q.basePlotModule.name;ne[le]?i.pushUnique(ne[le],ie):ne[le]=[ie]}}for(K in ne){var fe=ne[K],he=ue._subplots[K];if(Array.isArray(he))for(H=0;H<he.length;H++){var pe=he[H],xe="cartesian"===K?ue._plots[pe]:ue[pe];for(X=0;X<fe.length;X++)fe[X](G,xe,pe)}else for(X=0;X<fe.length;X++)fe[X](G)}}p.rehover=function(G){G._fullLayout._rehover&&G._fullLayout._rehover()},p.redrag=function(G){G._fullLayout._redrag&&G._fullLayout._redrag()},p.reselect=function(G){var H=G._fullLayout,X=(G.layout||{}).selections,K=H._previousSelections;H._previousSelections=X;var ue=H._reselect||JSON.stringify(X)!==JSON.stringify(K);T.getComponentMethod("selections","reselect")(G,ue)},p.generalUpdatePerTraceModule=function(G,H,X,K){var ue,ae=H.traceHash,ne={};for(ue=0;ue<X.length;ue++){var Q=X[ue],ie=Q[0].trace;ie.visible&&(ne[ie.type]=ne[ie.type]||[],ne[ie.type].push(Q))}for(var le in ae)if(!ne[le]){var fe=ae[le][0];fe[0].trace.visible=!1,ne[le]=[fe]}for(var he in ne){var pe=ne[he];pe[0][0].trace._module.plot(G,H,i.filterVisible(pe),K)}H.traceHash=ne},p.plotBasePlot=function(G,H,X,K,ue){var ae=T.getModule(G),ne=h(H.calcdata,ae)[0];ae.plot(H,ne,K,ue)},p.cleanBasePlot=function(G,H,X,K,ue){var ae=ue._has&&ue._has(G),ne=X._has&&X._has(G);ae&&!ne&&ue["_"+G+"layer"].selectAll("g.trace").remove()}},9813:function(se){"use strict";se.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function(se,U,r){"use strict";var I=r(71828),C=r(61082).tester,f=I.findIndexOfMin,k=I.isAngleInsideSector,T=I.angleDelta,v=I.angleDist;function c(o,l,u,d){var g,h,w=d[0],y=d[1],p=s(Math.sin(l)-Math.sin(o)),_=s(Math.cos(l)-Math.cos(o)),x=Math.tan(u),b=s(1/x),M=p/_,m=y-M*w;return b?p&&_?h=x*(g=m/(x-M)):_?(g=y*b,h=y):(g=w,h=w*x):p&&_?(g=0,h=m):_?(g=0,h=y):g=h=NaN,[g,h]}function i(o,l,u,d){return I.isFullCircle([l,u])?function(g,h){var w,y=h.length,p=new Array(y+1);for(w=0;w<y;w++){var _=h[w];p[w]=[g*Math.cos(_),g*Math.sin(_)]}return p[w]=p[0].slice(),p}(o,d):function(g,h,w,y){var p,_,x=y.length,b=[];function M(J){return[g*Math.cos(J),g*Math.sin(J)]}function m(J,z,$){return c(J,z,$,M(J))}function D(J){return I.mod(J,x)}function S(J){return k(J,[h,w])}var O=f(y,function(J){return S(J)?v(J,h):1/0}),P=m(y[O],y[D(O-1)],h);for(b.push(P),p=O,_=0;_<x;p++,_++){var R=y[D(p)];if(!S(R))break;b.push(M(R))}var F=f(y,function(J){return S(J)?v(J,w):1/0}),B=m(y[F],y[D(F+1)],w);return b.push(B),b.push([0,0]),b.push(b[0].slice()),b}(o,l,u,d)}function s(o){return Math.abs(o)>1e-10?o:0}function a(o,l,u){l=l||0,u=u||0;for(var d=o.length,g=new Array(d),h=0;h<d;h++){var w=o[h];g[h]=[l+w[0],u-w[1]]}return g}se.exports={isPtInsidePolygon:function(o,l,u,d,g){if(!k(l,d))return!1;var h,w;u[0]<u[1]?(h=u[0],w=u[1]):(h=u[1],w=u[0]);var y=C(i(h,d[0],d[1],g)),p=C(i(w,d[0],d[1],g)),_=[o*Math.cos(l),o*Math.sin(l)];return p.contains(_)&&!y.contains(_)},findPolygonOffset:function(o,l,u,d){for(var g=1/0,h=1/0,w=i(o,l,u,d),y=0;y<w.length;y++){var p=w[y];g=Math.min(g,p[0]),h=Math.min(h,-p[1])}return[g,h]},findEnclosingVertexAngles:function(o,l){var u=f(l,function(g){var h=T(g,o);return h>0?h:1/0}),d=I.mod(u+1,l.length);return[l[u],l[d]]},findIntersectionXY:c,findXYatLength:function(o,l,u,d){var g=-l*u,h=l*l+1,w=2*(l*g-u),p=Math.sqrt(w*w-4*h*(g*g+u*u-o*o)),_=(-w+p)/(2*h),x=(-w-p)/(2*h);return[[_,l*_+g+d],[x,l*x+g+d]]},clampTiny:s,pathPolygon:function(o,l,u,d,g,h){return"M"+a(i(o,l,u,d),g,h).join("L")},pathPolygonAnnulus:function(o,l,u,d,g,h,w){var y,p;o<l?(y=o,p=l):(y=l,p=o);var _=a(i(y,u,d,g),h,w);return"M"+a(i(p,u,d,g),h,w).reverse().join("L")+"M"+_.join("L")}}},23580:function(se,U,r){"use strict";var I=r(27659).AU,C=r(71828).counterRegex,f=r(77997),k=r(9813),T=k.attr,v=k.name,c=C(v),i={};i[T]={valType:"subplotid",dflt:v,editType:"calc"},se.exports={attr:T,name:v,idRoot:v,idRegex:c,attrRegex:c,attributes:i,layoutAttributes:r(73812),supplyLayoutDefaults:r(68993),plot:function(s){for(var a=s._fullLayout,o=s.calcdata,l=a._subplots[v],u=0;u<l.length;u++){var d=l[u],g=I(o,v,d),h=a[d]._subplot;h||(h=f(s,d),a[d]._subplot=h),h.plot(g,a,s._promises)}},clean:function(s,a,o,l){for(var u=l._subplots[v]||[],d=l._has&&l._has("gl"),g=a._has&&a._has("gl"),h=d&&!g,w=0;w<u.length;w++){var y=u[w],p=l[y]._subplot;if(!a[y]&&p)for(var _ in p.framework.remove(),p.layers["radial-axis-title"].remove(),p.clipPaths)p.clipPaths[_].remove();h&&p._scene&&(p._scene.destroy(),p._scene=null)}},toSVG:r(93612).toSVG}},73812:function(se,U,r){"use strict";var I=r(22399),C=r(13838),f=r(27670).Y,k=r(71828).extendFlat,T=r(30962).overrideAll,v=T({color:C.color,showline:k({},C.showline,{dflt:!0}),linecolor:C.linecolor,linewidth:C.linewidth,showgrid:k({},C.showgrid,{dflt:!0}),gridcolor:C.gridcolor,gridwidth:C.gridwidth,griddash:C.griddash},"plot","from-root"),c=T({tickmode:C.minor.tickmode,nticks:C.nticks,tick0:C.tick0,dtick:C.dtick,tickvals:C.tickvals,ticktext:C.ticktext,ticks:C.ticks,ticklen:C.ticklen,tickwidth:C.tickwidth,tickcolor:C.tickcolor,ticklabelstep:C.ticklabelstep,showticklabels:C.showticklabels,labelalias:C.labelalias,showtickprefix:C.showtickprefix,tickprefix:C.tickprefix,showticksuffix:C.showticksuffix,ticksuffix:C.ticksuffix,showexponent:C.showexponent,exponentformat:C.exponentformat,minexponent:C.minexponent,separatethousands:C.separatethousands,tickfont:C.tickfont,tickangle:C.tickangle,tickformat:C.tickformat,tickformatstops:C.tickformatstops,layer:C.layer},"plot","from-root"),i={visible:k({},C.visible,{dflt:!0}),type:k({},C.type,{values:["-","linear","log","date","category"]}),autotypenumbers:C.autotypenumbers,autorange:k({},C.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:k({},C.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:C.categoryorder,categoryarray:C.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:k({},C.title.text,{editType:"plot",dflt:""}),font:k({},C.title.font,{editType:"plot"}),editType:"plot"},hoverformat:C.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:C._deprecated.title,titlefont:C._deprecated.titlefont}};k(i,v,c);var s={visible:k({},C.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:C.autotypenumbers,categoryorder:C.categoryorder,categoryarray:C.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:C.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};k(s,v,c),se.exports={domain:f({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:I.background},radialaxis:i,angularaxis:s,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(44467),k=r(49119),T=r(27659).NG,v=r(26218),c=r(38701),i=r(96115),s=r(89426),a=r(15258),o=r(92128),l=r(4322),u=r(73812),d=r(12101),g=r(9813),h=g.axisNames;function w(p,_,x,b){var M=x("bgcolor");b.bgColor=C.combine(M,b.paper_bgcolor);var m=x("sector");x("hole");var D,S=T(b.fullData,g.name,b.id),O=b.layoutOut;function P(ie,le){return x(D+"."+ie,le)}for(var R=0;R<h.length;R++){I.isPlainObject(p[D=h[R]])||(p[D]={});var F=p[D],B=f.newContainer(_,D);B._id=B._name=D,B._attr=b.id+"."+D,B._traceIndices=S.map(function(ie){return ie._expandedIndex});var J=g.axisName2dataArray[D],z=y(F,B,P,S,J,b);a(F,B,P,{axData:S,dataAttr:J});var $=P("visible");switch(d(B,_,O),P("uirevision",_.uirevision),B._m=1,D){case"radialaxis":var G=P("autorange",!B.isValidRange(F.range));F.autorange=G,!G||"linear"!==z&&"-"!==z||P("rangemode"),"reversed"===G&&(B._m=-1),P("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===z){I.log("Polar plots do not support date angular axes yet.");for(var H=0;H<S.length;H++)S[H].visible=!1;z=F.type=B.type="linear"}P("linear"===z?"thetaunit":"period");var X=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[X])}if(s(F,B,P,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),$){var K,ue,ae,ne,Q=b.font||{};ue=(K=P("color"))===F.color?K:Q.color,ae=Q.size,ne=Q.family,v(F,B,P,B.type),i(F,B,P,B.type,{font:{color:ue,size:ae,family:ne}}),c(F,B,P,{outerTicks:!0}),o(F,B,P,{dfltColor:K,bgColor:b.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[D]}),P("layer"),"radialaxis"===D&&(P("side"),P("angle",m[0]),P("title.text"),I.coerceFont(P,"title.font",{color:ue,size:I.bigFont(ae),family:ne}))}"category"!==z&&P("hoverformat"),B._input=F}"category"===_.angularaxis.type&&x("gridshape")}function y(p,_,x,b,M,m){var D=x("autotypenumbers",m.autotypenumbersDflt);if("-"===x("type")){for(var S,O=0;O<b.length;O++)if(b[O].visible){S=b[O];break}S&&S[M]&&(_.type=l(S[M],"gregorian",{noMultiCategory:!0,autotypenumbers:D})),"-"===_.type?_.type="linear":p.type=_.type}return _.type}se.exports=function(p,_,x){k(p,_,x,{type:g.name,attributes:u,handleDefaults:w,font:_.font,autotypenumbersDflt:_.autotypenumbers,paper_bgcolor:_.paper_bgcolor,fullData:x,layoutOut:_})}},77997:function(se,U,r){"use strict";var I=r(39898),C=r(84267),f=r(73972),k=r(71828),T=k.strRotate,v=k.strTranslate,c=r(7901),i=r(91424),s=r(74875),a=r(89298),o=r(21994),l=r(12101),u=r(71739).doAutoRange,d=r(29323),g=r(28569),h=r(30211),w=r(92998),y=r(47322).prepSelect,p=r(47322).selectOnClick,_=r(47322).clearOutline,x=r(6964),b=r(33306),M=r(61549).redrawReglTraces,m=r(18783).MID_SHIFT,D=r(9813),S=r(10869),O=r(23893),P=O.smith,R=O.reactanceArc,F=O.resistanceArc,B=O.smithTransform,J=k._,z=k.mod,$=k.deg2rad,G=k.rad2deg;function H(ne,Q,ie){this.isSmith=ie||!1,this.id=Q,this.gd=ne,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var le=ne._fullLayout;this.clipIds.forTraces="clip"+le._uid+Q+"-for-traces",this.clipPaths.forTraces=le._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=le["_"+(ie?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(he){return this.isSmith?0:he.hole},this.getSector=function(he){return this.isSmith?[0,360]:he.sector},this.getRadial=function(he){return this.isSmith?he.realaxis:he.radialaxis},this.getAngular=function(he){return this.isSmith?he.imaginaryaxis:he.angularaxis},ie||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=H.prototype;function K(ne){var Q=ne.ticks+String(ne.ticklen)+String(ne.showticklabels);return"side"in ne&&(Q+=ne.side),Q}function ue(ne,Q){return Q[k.findIndexOfMin(Q,function(ie){return k.angleDist(ne,ie)})]}function ae(ne,Q,ie){return Q?(ne.attr("display",null),ne.attr(ie)):ne&&ne.attr("display","none"),ne}se.exports=function(ne,Q,ie){return new H(ne,Q,ie)},X.plot=function(ne,Q){for(var ie=this,le=Q[ie.id],fe=!1,he=0;he<ne.length;he++)if(!1===ne[he][0].trace.cliponaxis){fe=!0;break}ie._hasClipOnAxisFalse=fe,ie.updateLayers(Q,le),ie.updateLayout(Q,le),s.generalUpdatePerTraceModule(ie.gd,ie,ne,le),ie.updateFx(Q,le),ie.isSmith&&(delete le.realaxis.range,delete le.imaginaryaxis.range)},X.updateLayers=function(ne,Q){var ie=this,le=ie.isSmith,fe=ie.layers,he=ie.getRadial(Q),pe=ie.getAngular(Q),xe=D.layerNames,Ee=xe.indexOf("frontplot"),Re=xe.slice(0,Ee),ke="below traces"===pe.layer,Te="below traces"===he.layer;ke&&Re.push("angular-line"),Te&&Re.push("radial-line"),ke&&Re.push("angular-axis"),Te&&Re.push("radial-axis"),Re.push("frontplot"),ke||Re.push("angular-line"),Te||Re.push("radial-line"),ke||Re.push("angular-axis"),Te||Re.push("radial-axis");var we=(le?"smith":"polar")+"sublayer",je=ie.framework.selectAll("."+we).data(Re,String);je.enter().append("g").attr("class",function(Ce){return we+" "+Ce}).each(function(Ce){var Ie=fe[Ce]=I.select(this);switch(Ce){case"frontplot":le||Ie.append("g").classed("barlayer",!0),Ie.append("g").classed("scatterlayer",!0);break;case"backplot":Ie.append("g").classed("maplayer",!0);break;case"plotbg":fe.bg=Ie.append("path");break;case"radial-grid":case"angular-grid":Ie.style("fill","none");break;case"radial-line":Ie.append("line").style("fill","none");break;case"angular-line":Ie.append("path").style("fill","none")}}),je.order()},X.updateLayout=function(ne,Q){var ie=this,le=ie.layers,fe=ne._size,he=ie.getRadial(Q),pe=ie.getAngular(Q),xe=Q.domain.x,Ee=Q.domain.y;ie.xOffset=fe.l+fe.w*xe[0],ie.yOffset=fe.t+fe.h*(1-Ee[1]);var Re=ie.xLength=fe.w*(xe[1]-xe[0]),ke=ie.yLength=fe.h*(Ee[1]-Ee[0]),Te=ie.getSector(Q);ie.sectorInRad=Te.map($);var we,je,Ce,Ie,ge,yt,ut,Ct,Dt,vt,mt,Lt,Ft,Rt,Wt,me=ie.sectorBBox=(Dt=(yt=Te)[1]-(Ct=yt[0]),mt=(vt=z(Ct,360))+Dt,Lt=Math.cos($(vt)),Ft=Math.sin($(vt)),Rt=Math.cos($(mt)),Wt=Math.sin($(mt)),ut=vt<=90&&mt>=90||vt>90&&mt>=450?1:Ft<=0&&Wt<=0?0:Math.max(Ft,Wt),[vt<=180&&mt>=180||vt>180&&mt>=540?-1:Lt>=0&&Rt>=0?0:Math.min(Lt,Rt),vt<=270&&mt>=270||vt>270&&mt>=630?-1:Ft>=0&&Wt>=0?0:Math.min(Ft,Wt),mt>=360?1:Lt<=0&&Rt<=0?0:Math.max(Lt,Rt),ut]),ce=me[2]-me[0],Ne=ke/Re,De=Math.abs((me[3]-me[1])/ce);Ne>De?(we=Re,ge=(ke-(je=Re*De))/fe.h/2,Ce=[xe[0],xe[1]],Ie=[Ee[0]+ge,Ee[1]-ge]):(je=ke,ge=(Re-(we=ke/De))/fe.w/2,Ce=[xe[0]+ge,xe[1]-ge],Ie=[Ee[0],Ee[1]]),ie.xLength2=we,ie.yLength2=je,ie.xDomain2=Ce,ie.yDomain2=Ie;var qe,Ke=ie.xOffset2=fe.l+fe.w*Ce[0],be=ie.yOffset2=fe.t+fe.h*(1-Ie[1]),Oe=ie.radius=we/ce,Le=ie.innerRadius=ie.getHole(Q)*Oe,Ue=ie.cx=Ke-Oe*me[0],Ze=ie.cy=be+Oe*me[3],We=ie.cxx=Ue-Ke,et=ie.cyy=Ze-be,nt=he.side;"counterclockwise"===nt?(qe=nt,nt="top"):"clockwise"===nt&&(qe=nt,nt="bottom"),ie.radialAxis=ie.mockAxis(ne,Q,he,{_id:"x",side:nt,_trueSide:qe,domain:[Le/fe.w,Oe/fe.w]}),ie.angularAxis=ie.mockAxis(ne,Q,pe,{side:"right",domain:[0,Math.PI],autorange:!1}),ie.doAutoRange(ne,Q),ie.updateAngularAxis(ne,Q),ie.updateRadialAxis(ne,Q),ie.updateRadialAxisTitle(ne,Q),ie.xaxis=ie.mockCartesianAxis(ne,Q,{_id:"x",domain:Ce}),ie.yaxis=ie.mockCartesianAxis(ne,Q,{_id:"y",domain:Ie});var ct=ie.pathSubplot();ie.clipPaths.forTraces.select("path").attr("d",ct).attr("transform",v(We,et)),le.frontplot.attr("transform",v(Ke,be)).call(i.setClipUrl,ie._hasClipOnAxisFalse?null:ie.clipIds.forTraces,ie.gd),le.bg.attr("d",ct).attr("transform",v(Ue,Ze)).call(c.fill,Q.bgcolor)},X.mockAxis=function(ne,Q,ie,le){var fe=k.extendFlat({},ie,le);return l(fe,Q,ne),fe},X.mockCartesianAxis=function(ne,Q,ie){var le=this,fe=le.isSmith,he=ie._id,pe=k.extendFlat({type:"linear"},ie);o(pe,ne);var xe={x:[0,2],y:[1,3]};return pe.setRange=function(){var Ee=le.sectorBBox,Re=xe[he],ke=le.radialAxis._rl,Te=(ke[1]-ke[0])/(1-le.getHole(Q));pe.range=[Ee[Re[0]]*Te,Ee[Re[1]]*Te]},pe.isPtWithinRange="x"!==he||fe?function(){return!0}:function(Ee){return le.isPtInside(Ee)},pe.setRange(),pe.setScale(),pe},X.doAutoRange=function(ne,Q){var le=this.gd,fe=this.radialAxis,he=this.getRadial(Q);u(le,fe);var pe=fe.range;he.range=pe.slice(),he._input.range=pe.slice(),fe._rl=[fe.r2l(pe[0],null,"gregorian"),fe.r2l(pe[1],null,"gregorian")]},X.updateRadialAxis=function(ne,Q){var ie=this,le=ie.gd,fe=ie.layers,he=ie.radius,pe=ie.innerRadius,xe=ie.cx,Ee=ie.cy,Re=ie.getRadial(Q),ke=z(ie.getSector(Q)[0],360),Te=ie.radialAxis,we=pe<he,je=ie.isSmith;je||(ie.fillViewInitialKey("radialaxis.angle",Re.angle),ie.fillViewInitialKey("radialaxis.range",Te.range.slice()),Te.setGeometry()),"auto"===Te.tickangle&&ke>90&&ke<=270&&(Te.tickangle=180);var Ce=je?function(be){var Oe=B(ie,P([be.x,0]));return v(Oe[0]-xe,Oe[1]-Ee)}:function(be){return v(Te.l2p(be.x)+pe,0)},Ie=je?function(be){return F(ie,be.x,-1/0,1/0)}:function(be){return ie.pathArc(Te.r2p(be.x)+pe)},ge=K(Re);if(ie.radialTickLayout!==ge&&(fe["radial-axis"].selectAll(".xtick").remove(),ie.radialTickLayout=ge),we){Te.setScale();var me=0,ce=je?(Te.tickvals||[]).filter(function(be){return be>=0}).map(function(be){return a.tickText(Te,be,!0,!1)}):a.calcTicks(Te),Ae=je?ce:a.clipEnds(Te,ce),Ne=a.getTickSigns(Te)[2];je&&(("top"===Te.ticks&&"bottom"===Te.side||"bottom"===Te.ticks&&"top"===Te.side)&&(Ne=-Ne),"top"===Te.ticks&&"top"===Te.side&&(me=-Te.ticklen),"bottom"===Te.ticks&&"bottom"===Te.side&&(me=Te.ticklen)),a.drawTicks(le,Te,{vals:ce,layer:fe["radial-axis"],path:a.makeTickPath(Te,0,Ne),transFn:Ce,crisp:!1}),a.drawGrid(le,Te,{vals:Ae,layer:fe["radial-grid"],path:Ie,transFn:k.noop,crisp:!1}),a.drawLabels(le,Te,{vals:ce,layer:fe["radial-axis"],transFn:Ce,labelFns:a.makeLabelFns(Te,me)})}var De=ie.radialAxisAngle=ie.vangles?G(ue($(Re.angle),ie.vangles)):Re.angle,qe=v(xe,Ee),Ke=qe+T(-De);ae(fe["radial-axis"],we&&(Re.showticklabels||Re.ticks),{transform:Ke}),ae(fe["radial-grid"],we&&Re.showgrid,{transform:je?"":qe}),ae(fe["radial-line"].select("line"),we&&Re.showline,{x1:je?-he:pe,y1:0,x2:he,y2:0,transform:Ke}).attr("stroke-width",Re.linewidth).call(c.stroke,Re.linecolor)},X.updateRadialAxisTitle=function(ne,Q,ie){if(!this.isSmith){var le=this,fe=le.gd,he=le.radius,pe=le.cx,xe=le.cy,Ee=le.getRadial(Q),Re=le.id+"title",ke=0;if(Ee.title){var Te=i.bBox(le.layers["radial-axis"].node()).height,we=Ee.title.font.size,je=Ee.side;ke="top"===je?we:"counterclockwise"===je?-(Te+.4*we):Te+.8*we}var Ce=void 0!==ie?ie:le.radialAxisAngle,Ie=$(Ce),ge=Math.cos(Ie),me=Math.sin(Ie),ce=pe+he/2*ge+ke*me,Ae=xe-he/2*me+ke*ge;le.layers["radial-axis-title"]=w.draw(fe,Re,{propContainer:Ee,propName:le.id+".radialaxis.title",placeholder:J(fe,"Click to enter radial axis title"),attributes:{x:ce,y:Ae,"text-anchor":"middle"},transform:{rotate:-Ce}})}},X.updateAngularAxis=function(ne,Q){var ie=this,le=ie.gd,fe=ie.layers,he=ie.radius,pe=ie.innerRadius,xe=ie.cx,Ee=ie.cy,Re=ie.getAngular(Q),ke=ie.angularAxis,Te=ie.isSmith;Te||(ie.fillViewInitialKey("angularaxis.rotation",Re.rotation),ke.setGeometry(),ke.setScale());var we=Te?function(be){var Oe=B(ie,P([0,be.x]));return Math.atan2(Oe[0]-xe,Oe[1]-Ee)-Math.PI/2}:function(be){return ke.t2g(be.x)};"linear"===ke.type&&"radians"===ke.thetaunit&&(ke.tick0=G(ke.tick0),ke.dtick=G(ke.dtick));var je=function(be){return v(xe+he*Math.cos(be),Ee-he*Math.sin(be))},Ce=Te?function(be){var Oe=B(ie,P([0,be.x]));return v(Oe[0],Oe[1])}:function(be){return je(we(be))},Ie=Te?function(be){var Oe=B(ie,P([0,be.x])),Le=Math.atan2(Oe[0]-xe,Oe[1]-Ee)-Math.PI/2;return v(Oe[0],Oe[1])+T(-G(Le))}:function(be){var Oe=we(be);return je(Oe)+T(-G(Oe))},ge=Te?function(be){return R(ie,be.x,0,1/0)}:function(be){var Oe=we(be),Le=Math.cos(Oe),Ue=Math.sin(Oe);return"M"+[xe+pe*Le,Ee-pe*Ue]+"L"+[xe+he*Le,Ee-he*Ue]},me=a.makeLabelFns(ke,0).labelStandoff,ce={xFn:function(be){var Oe=we(be);return Math.cos(Oe)*me},yFn:function(be){var Oe=we(be),Le=Math.sin(Oe)>0?.2:1;return-Math.sin(Oe)*(me+be.fontSize*Le)+Math.abs(Math.cos(Oe))*(be.fontSize*m)},anchorFn:function(be){var Oe=we(be),Le=Math.cos(Oe);return Math.abs(Le)<.1?"middle":Le>0?"start":"end"},heightFn:function(be,Oe,Le){var Ue=we(be);return-.5*(1+Math.sin(Ue))*Le}},Ae=K(Re);ie.angularTickLayout!==Ae&&(fe["angular-axis"].selectAll("."+ke._id+"tick").remove(),ie.angularTickLayout=Ae);var Ne,De=Te?[1/0].concat(ke.tickvals||[]).map(function(be){return a.tickText(ke,be,!0,!1)}):a.calcTicks(ke);if(Te&&(De[0].text="\u221e",De[0].fontSize*=1.75),"linear"===Q.gridshape?(Ne=De.map(we),k.angleDelta(Ne[0],Ne[1])<0&&(Ne=Ne.slice().reverse())):Ne=null,ie.vangles=Ne,"category"===ke.type&&(De=De.filter(function(be){return k.isAngleInsideSector(we(be),ie.sectorInRad)})),ke.visible){var qe="inside"===ke.ticks?-1:1;a.drawTicks(le,ke,{vals:De,layer:fe["angular-axis"],path:"M"+qe*((ke.linewidth||1)/2)+",0h"+qe*ke.ticklen,transFn:Ie,crisp:!1}),a.drawGrid(le,ke,{vals:De,layer:fe["angular-grid"],path:ge,transFn:k.noop,crisp:!1}),a.drawLabels(le,ke,{vals:De,layer:fe["angular-axis"],repositionOnUpdate:!0,transFn:Ce,labelFns:ce})}ae(fe["angular-line"].select("path"),Re.showline,{d:ie.pathSubplot(),transform:v(xe,Ee)}).attr("stroke-width",Re.linewidth).call(c.stroke,Re.linecolor)},X.updateFx=function(ne,Q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(ne),this.updateRadialDrag(ne,Q,0),this.updateRadialDrag(ne,Q,1)),this.updateHoverAndMainDrag(ne))},X.updateHoverAndMainDrag=function(ne){var Q,ie,le=this,fe=le.isSmith,he=le.gd,xe=ne._zoomlayer,Ee=D.MINZOOM,Re=D.OFFEDGE,ke=le.radius,Te=le.innerRadius,we=le.cx,je=le.cy,Ce=le.cxx,Ie=le.cyy,ge=le.sectorInRad,me=le.vangles,ce=le.radialAxis,Ae=S.clampTiny,Ne=S.findXYatLength,De=S.findEnclosingVertexAngles,qe=D.cornerHalfWidth,Ke=D.cornerLen/2,be=d.makeDragger(le.layers,"path","maindrag",!1===ne.dragmode?"none":"crosshair");I.select(be).attr("d",le.pathSubplot()).attr("transform",v(we,je)),be.onmousemove=function(xt){h.hover(he,xt,le.id),he._fullLayout._lasthover=be,he._fullLayout._hoversubplot=le.id},be.onmouseout=function(xt){he._dragging||g.unhover(he,xt)};var Oe,Le,Ue,Ze,We,et,nt,ct,yt,ut={element:be,gd:he,subplot:le.id,plotinfo:{id:le.id,xaxis:le.xaxis,yaxis:le.yaxis},xaxes:[le.xaxis],yaxes:[le.yaxis]};function Ct(xt,He){return Math.sqrt(xt*xt+He*He)}function Dt(xt,He){return Ct(xt-Ce,He-Ie)}function vt(xt,He){return Math.atan2(Ie-He,xt-Ce)}function mt(xt,He){return[xt*Math.cos(He),xt*Math.sin(-He)]}function Lt(xt,He){if(0===xt)return le.pathSector(2*qe);var Ge=Ke/xt,dt=He-Ge,ht=He+Ge,kt=Math.max(0,Math.min(xt,ke)),St=kt-qe,Et=kt+qe;return"M"+mt(St,dt)+"A"+[St,St]+" 0,0,0 "+mt(St,ht)+"L"+mt(Et,ht)+"A"+[Et,Et]+" 0,0,1 "+mt(Et,dt)+"Z"}function Ft(xt,He,Ge){if(0===xt)return le.pathSector(2*qe);var dt,ht,kt=mt(xt,He),St=mt(xt,Ge),Et=Ae((kt[0]+St[0])/2),wt=Ae((kt[1]+St[1])/2);if(Et&&wt){var Nt=wt/Et,_t=-1/Nt,Mt=Ne(qe,Nt,Et,wt);dt=Ne(Ke,_t,Mt[0][0],Mt[0][1]),ht=Ne(Ke,_t,Mt[1][0],Mt[1][1])}else{var Pt,Zt;wt?(Pt=Ke,Zt=qe):(Pt=qe,Zt=Ke),dt=[[Et-Pt,wt-Zt],[Et+Pt,wt-Zt]],ht=[[Et-Pt,wt+Zt],[Et+Pt,wt+Zt]]}return"M"+dt.join("L")+"L"+ht.reverse().join("L")+"Z"}function Rt(xt,He){return He=Math.max(Math.min(He,ke),Te),xt<Re?xt=0:ke-xt<Re?xt=ke:He<Re?He=0:ke-He<Re&&(He=ke),Math.abs(He-xt)>Ee?(xt<He?(Ue=xt,Ze=He):(Ue=He,Ze=xt),!0):(Ue=null,Ze=null,!1)}function Wt(xt,He){He=He||"M0,0Z",ct.attr("d",xt=xt||We),yt.attr("d",He),d.transitionZoombox(ct,yt,et,nt),et=!0;var Ge={};ot(Ge),he.emit("plotly_relayouting",Ge)}function Ht(xt,He){var Ge,dt,ht=Oe+(xt*=Q),kt=Le+(He*=ie),St=Dt(Oe,Le),Et=Math.min(Dt(ht,kt),ke),wt=vt(Oe,Le);Rt(St,Et)&&(Ge=We+le.pathSector(Ze),Ue&&(Ge+=le.pathSector(Ue)),dt=Lt(Ue,wt)+Lt(Ze,wt)),Wt(Ge,dt)}function it(xt,He,Ge,dt){var ht=S.findIntersectionXY(Ge,dt,Ge,[xt-Ce,Ie-He]);return Ct(ht[0],ht[1])}function st(xt,He){var Ge,dt,ht=Oe+xt,kt=Le+He,St=vt(Oe,Le),Et=vt(ht,kt),wt=De(St,me),Nt=De(Et,me);Rt(it(Oe,Le,wt[0],wt[1]),Math.min(it(ht,kt,Nt[0],Nt[1]),ke))&&(Ge=We+le.pathSector(Ze),Ue&&(Ge+=le.pathSector(Ue)),dt=[Ft(Ue,wt[0],wt[1]),Ft(Ze,wt[0],wt[1])].join(" ")),Wt(Ge,dt)}function Je(){if(d.removeZoombox(he),null!==Ue&&null!==Ze){var xt={};ot(xt),d.showDoubleClickNotifier(he),f.call("_guiRelayout",he,xt)}}function ot(xt){var He=ce._rl,Ge=(He[1]-He[0])/(1-Te/ke)/ke;xt[le.id+".radialaxis.range"]=[He[0]+(Ue-Te)*Ge,He[0]+(Ze-Te)*Ge]}function pt(xt,He){var Ge=he._fullLayout.clickmode;if(d.removeZoombox(he),2===xt){var dt={};for(var ht in le.viewInitial)dt[le.id+"."+ht]=le.viewInitial[ht];he.emit("plotly_doubleclick",null),f.call("_guiRelayout",he,dt)}Ge.indexOf("select")>-1&&1===xt&&p(He,he,[le.xaxis],[le.yaxis],le.id,ut),Ge.indexOf("event")>-1&&h.click(he,He,le.id)}ut.prepFn=function(xt,He,Ge){var dt=he._fullLayout.dragmode,ht=be.getBoundingClientRect();he._fullLayout._calcInverseTransform(he),Q=he._fullLayout._invScaleX,ie=he._fullLayout._invScaleY;var St=k.apply3DTransform(he._fullLayout._invTransform)(He-ht.left,Ge-ht.top);if(Oe=St[0],Le=St[1],me){var Et=S.findPolygonOffset(ke,ge[0],ge[1],me);Oe+=Ce+Et[0],Le+=Ie+Et[1]}switch(dt){case"zoom":ut.clickFn=pt,fe||(ut.moveFn=me?st:Ht,ut.doneFn=Je,Ue=null,Ze=null,We=le.pathSubplot(),et=!1,nt=C(he._fullLayout[le.id].bgcolor).getLuminance(),(ct=d.makeZoombox(xe,nt,we,je,We)).attr("fill-rule","evenodd"),yt=d.makeCorners(xe,we,je),_(he));break;case"select":case"lasso":y(xt,He,Ge,ut,dt)}},g.init(ut)},X.updateRadialDrag=function(ne,Q,ie){var le=this,fe=le.gd,he=le.layers,pe=le.radius,xe=le.innerRadius,Ee=le.cx,Re=le.cy,ke=le.radialAxis,Te=D.radialDragBoxSize,we=Te/2;if(ke.visible){var je,Ce,Ie,ge=$(le.radialAxisAngle),me=ke._rl,ce=me[0],Ae=me[1],Ne=me[ie],De=.75*(me[1]-me[0])/(1-le.getHole(Q))/pe;ie?(je=Ee+(pe+we)*Math.cos(ge),Ce=Re-(pe+we)*Math.sin(ge),Ie="radialdrag"):(je=Ee+(xe-we)*Math.cos(ge),Ce=Re-(xe-we)*Math.sin(ge),Ie="radialdrag-inner");var qe,Ke,be,Oe=d.makeRectDragger(he,Ie,"crosshair",-we,-we,Te,Te),Le={element:Oe,gd:fe};!1===ne.dragmode&&(Le.dragmode=!1),ae(I.select(Oe),ke.visible&&xe<pe,{transform:v(je,Ce)}),Le.prepFn=function(){qe=null,Ke=null,be=null,Le.moveFn=Ue,Le.doneFn=Ze,_(fe)},Le.clampFn=function(nt,ct){return Math.sqrt(nt*nt+ct*ct)<D.MINDRAG&&(nt=0,ct=0),[nt,ct]},g.init(Le)}function Ue(nt,ct){if(qe)qe(nt,ct);else{var yt=[nt,-ct],ut=[Math.cos(ge),Math.sin(ge)],Ct=Math.abs(k.dot(yt,ut)/Math.sqrt(k.dot(yt,yt)));isNaN(Ct)||(qe=Ct<.5?We:et)}var vt,Dt={};vt=Dt,null!==Ke?vt[le.id+".radialaxis.angle"]=Ke:null!==be&&(vt[le.id+".radialaxis.range["+ie+"]"]=be),fe.emit("plotly_relayouting",Dt)}function Ze(){null!==Ke?f.call("_guiRelayout",fe,le.id+".radialaxis.angle",Ke):null!==be&&f.call("_guiRelayout",fe,le.id+".radialaxis.range["+ie+"]",be)}function We(nt,ct){if(0!==ie){Ke=Math.atan2(Re-(Ce+ct),je+nt-Ee),le.vangles&&(Ke=ue(Ke,le.vangles)),Ke=G(Ke);var Ct=v(Ee,Re)+T(-Ke);he["radial-axis"].attr("transform",Ct),he["radial-line"].select("line").attr("transform",Ct);var Dt=le.gd._fullLayout;le.updateRadialAxisTitle(Dt,Dt[le.id],Ke)}}function et(nt,ct){var yt=k.dot([nt,-ct],[Math.cos(ge),Math.sin(ge)]);if(be=Ne-De*yt,De>0==(ie?be>ce:be<Ae)){var ut=fe._fullLayout,Ct=ut[le.id];ke.range[ie]=be,ke._rl[ie]=be,le.updateRadialAxis(ut,Ct),le.xaxis.setRange(),le.xaxis.setScale(),le.yaxis.setRange(),le.yaxis.setScale();var Dt=!1;for(var vt in le.traceHash){var mt=le.traceHash[vt],Lt=k.filterVisible(mt);mt[0][0].trace._module.plot(fe,le,Lt,Ct),f.traceIs(vt,"gl")&&Lt.length&&(Dt=!0)}Dt&&(b(fe),M(fe))}else be=null}},X.updateAngularDrag=function(ne){var Q=this,ie=Q.gd,le=Q.layers,fe=Q.radius,he=Q.angularAxis,pe=Q.cx,xe=Q.cy,Ee=Q.cxx,Re=Q.cyy,ke=D.angularDragBoxSize,Te=d.makeDragger(le,"path","angulardrag",!1===ne.dragmode?"none":"move"),we={element:Te,gd:ie};function je(Le,Ue){return Math.atan2(Re+ke-Ue,Le-Ee-ke)}!1===ne.dragmode?we.dragmode=!1:I.select(Te).attr("d",Q.pathAnnulus(fe,fe+ke)).attr("transform",v(pe,xe)).call(x,"move");var Ce,Ie,ge,me,ce,Ae,Ne=le.frontplot.select(".scatterlayer").selectAll(".trace"),De=Ne.selectAll(".point"),qe=Ne.selectAll(".textpoint");function Ke(Le,Ue){var Ze=Q.gd._fullLayout,We=Ze[Q.id],et=je(Ce+Le*ne._invScaleX,Ie+Ue*ne._invScaleY),nt=G(et-Ae);if(me=ge+nt,le.frontplot.attr("transform",v(Q.xOffset2,Q.yOffset2)+T([-nt,Ee,Re])),Q.vangles){ce=Q.radialAxisAngle+nt;var ct=v(pe,xe)+T(-nt),yt=v(pe,xe)+T(-ce);le.bg.attr("transform",ct),le["radial-grid"].attr("transform",ct),le["radial-axis"].attr("transform",yt),le["radial-line"].select("line").attr("transform",yt),Q.updateRadialAxisTitle(Ze,We,ce)}else Q.clipPaths.forTraces.select("path").attr("transform",v(Ee,Re)+T(nt));De.each(function(){var Lt=I.select(this),Ft=i.getTranslate(Lt);Lt.attr("transform",v(Ft.x,Ft.y)+T([nt]))}),qe.each(function(){var Lt=I.select(this),Ft=Lt.select("text"),Rt=i.getTranslate(Lt);Lt.attr("transform",T([nt,Ft.attr("x"),Ft.attr("y")])+v(Rt.x,Rt.y))}),he.rotation=k.modHalf(me,360),Q.updateAngularAxis(Ze,We),Q._hasClipOnAxisFalse&&!k.isFullCircle(Q.sectorInRad)&&Ne.call(i.hideOutsideRangePoints,Q);var ut=!1;for(var Ct in Q.traceHash)if(f.traceIs(Ct,"gl")){var Dt=Q.traceHash[Ct],vt=k.filterVisible(Dt);Dt[0][0].trace._module.plot(ie,Q,vt,We),vt.length&&(ut=!0)}ut&&(b(ie),M(ie));var mt={};be(mt),ie.emit("plotly_relayouting",mt)}function be(Le){Le[Q.id+".angularaxis.rotation"]=me,Q.vangles&&(Le[Q.id+".radialaxis.angle"]=ce)}function Oe(){qe.select("text").attr("transform",null);var Le={};be(Le),f.call("_guiRelayout",ie,Le)}we.prepFn=function(Le,Ue,Ze){ge=ne[Q.id].angularaxis.rotation;var et=Te.getBoundingClientRect();Ce=Ue-et.left,Ie=Ze-et.top,ie._fullLayout._calcInverseTransform(ie);var nt=k.apply3DTransform(ne._invTransform)(Ce,Ie);Ae=je(Ce=nt[0],Ie=nt[1]),we.moveFn=Ke,we.doneFn=Oe,_(ie)},Q.vangles&&!k.isFullCircle(Q.sectorInRad)&&(we.prepFn=k.noop,x(I.select(Te),null)),g.init(we)},X.isPtInside=function(ne){if(this.isSmith)return!0;var Q=this.sectorInRad,ie=this.vangles,le=this.angularAxis.c2g(ne.theta),fe=this.radialAxis,he=fe.c2l(ne.r);return(ie?S.isPtInsidePolygon:k.isPtInsideSector)(he,le,fe._rl,Q,ie)},X.pathArc=function(ne){var Q=this.sectorInRad,ie=this.vangles;return(ie?S.pathPolygon:k.pathArc)(ne,Q[0],Q[1],ie)},X.pathSector=function(ne){var Q=this.sectorInRad,ie=this.vangles;return(ie?S.pathPolygon:k.pathSector)(ne,Q[0],Q[1],ie)},X.pathAnnulus=function(ne,Q){var ie=this.sectorInRad,le=this.vangles;return(le?S.pathPolygonAnnulus:k.pathAnnulus)(ne,Q,ie[0],ie[1],le)},X.pathSubplot=function(){var ne=this.innerRadius,Q=this.radius;return ne?this.pathAnnulus(ne,Q):this.pathSector(Q)},X.fillViewInitialKey=function(ne,Q){ne in this.viewInitial||(this.viewInitial[ne]=Q)}},12101:function(se,U,r){"use strict";var I=r(71828),C=r(21994),f=I.deg2rad,k=I.rad2deg;se.exports=function(T,v,c){switch(C(T,c),T._id){case"x":case"radialaxis":a=v._subplot,(i=T).setGeometry=function(){var o=i._rl[0],l=i._rl[1],u=a.innerRadius,d=(a.radius-u)/(l-o),g=u/d,h=o>l?function(w){return w<=0}:function(w){return w>=0};i.c2g=function(w){var y=i.c2l(w)-o;return(h(y)?y:0)+g},i.g2c=function(w){return i.l2c(w+o-g)},i.g2p=function(w){return w*d},i.c2p=function(w){return i.g2p(i.c2g(w))}};break;case"angularaxis":!function(i,s){var a=i.type;if("linear"===a){var o=i.d2c,l=i.c2d;i.d2c=function(u,d){return g=o(u),"degrees"===d?f(g):g;var g},i.c2d=function(u,d){return l((g=u,"degrees"===d?k(g):g));var g}}i.makeCalcdata=function(u,d){var g,h,w=u[d],y=u._length,p=function(m){return i.d2c(m,u.thetaunit)};if(w){if(I.isTypedArray(w)&&"linear"===a){if(y===w.length)return w;if(w.subarray)return w.subarray(0,y)}for(g=new Array(y),h=0;h<y;h++)g[h]=p(w[h])}else{var _=d+"0",x="d"+d,b=_ in u?p(u[_]):0,M=u[x]?p(u[x]):(i.period||2*Math.PI)/y;for(g=new Array(y),h=0;h<y;h++)g[h]=b+h*M}return g},i.setGeometry=function(){var u,d,g,h,w=s.sector,y=w.map(f),p={clockwise:-1,counterclockwise:1}[i.direction],_=f(i.rotation),x=function(D){return p*D+_},b=function(D){return(D-_)/p};switch(a){case"linear":d=u=I.identity,h=f,g=k,i.range=I.isFullCircle(y)?[w[0],w[0]+360]:y.map(b).map(k);break;case"category":var M=i._categories.length,m=i.period?Math.max(i.period,M):M;0===m&&(m=1),d=h=function(D){return 2*D*Math.PI/m},u=g=function(D){return D*m/Math.PI/2},i.range=[0,m]}i.c2g=function(D){return x(d(D))},i.g2c=function(D){return u(b(D))},i.t2g=function(D){return x(h(D))},i.g2t=function(D){return g(b(D))}}}(T,v)}var i,a}},39779:function(se){"use strict";se.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function(se){"use strict";function U(f){return f<0?-1:f>0?1:0}function r(f){var k=f[0],T=f[1];if(!isFinite(k)||!isFinite(T))return[1,0];var v=(k+1)*(k+1)+T*T;return[(k*k+T*T-1)/v,2*T/v]}function I(f,k){return[k[0]*f.radius+f.cx,-k[1]*f.radius+f.cy]}function C(f,k){return k*f.radius}se.exports={smith:r,reactanceArc:function(f,k,T,v){var c=I(f,r([T,k])),i=c[0],s=c[1],a=I(f,r([v,k])),o=a[0],l=a[1];if(0===k)return["M"+i+","+s,"L"+o+","+l].join(" ");var u=C(f,1/Math.abs(k));return["M"+i+","+s,"A"+u+","+u+" 0 0,"+(k<0?1:0)+" "+o+","+l].join(" ")},resistanceArc:function(f,k,T,v){var c=C(f,1/(k+1)),i=I(f,r([k,T])),s=i[0],a=i[1],o=I(f,r([k,v])),l=o[0],u=o[1];if(U(T)!==U(v)){var d=I(f,r([k,0]));return["M"+s+","+a,"A"+c+","+c+" 0 0,"+(0<T?0:1)+" "+d[0]+","+d[1],"A"+c+","+c+" 0 0,"+(v<0?0:1)+l+","+u].join(" ")}return["M"+s+","+a,"A"+c+","+c+" 0 0,"+(v<T?0:1)+" "+l+","+u].join(" ")},smithTransform:I}},7504:function(se,U,r){"use strict";var I=r(27659).AU,C=r(71828).counterRegex,f=r(77997),k=r(39779),T=k.attr,v=k.name,c=C(v),i={};i[T]={valType:"subplotid",dflt:v,editType:"calc"},se.exports={attr:T,name:v,idRoot:v,idRegex:c,attrRegex:c,attributes:i,layoutAttributes:r(33419),supplyLayoutDefaults:r(9558),plot:function(s){for(var a=s._fullLayout,o=s.calcdata,l=a._subplots[v],u=0;u<l.length;u++){var d=l[u],g=I(o,v,d),h=a[d]._subplot;h||(h=f(s,d,!0),a[d]._subplot=h),h.plot(g,a,s._promises)}},clean:function(s,a,o,l){for(var u=l._subplots[v]||[],d=0;d<u.length;d++){var g=u[d],h=l[g]._subplot;if(!a[g]&&h)for(var w in h.framework.remove(),h.clipPaths)h.clipPaths[w].remove()}},toSVG:r(93612).toSVG}},33419:function(se,U,r){"use strict";var I=r(22399),C=r(13838),f=r(27670).Y,k=r(71828).extendFlat,T=r(30962).overrideAll,v=T({color:C.color,showline:k({},C.showline,{dflt:!0}),linecolor:C.linecolor,linewidth:C.linewidth,showgrid:k({},C.showgrid,{dflt:!0}),gridcolor:C.gridcolor,gridwidth:C.gridwidth,griddash:C.griddash},"plot","from-root"),c=T({ticklen:C.ticklen,tickwidth:k({},C.tickwidth,{dflt:2}),tickcolor:C.tickcolor,showticklabels:C.showticklabels,labelalias:C.labelalias,showtickprefix:C.showtickprefix,tickprefix:C.tickprefix,showticksuffix:C.showticksuffix,ticksuffix:C.ticksuffix,tickfont:C.tickfont,tickformat:C.tickformat,hoverformat:C.hoverformat,layer:C.layer},"plot","from-root"),i=k({visible:k({},C.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:k({},C.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},v,c),s=k({visible:k({},C.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:C.ticks,editType:"calc"},v,c);se.exports={domain:f({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:I.background},realaxis:i,imaginaryaxis:s,editType:"calc"}},9558:function(se,U,r){"use strict";var I,C,f,k=r(71828),T=r(7901),v=r(44467),c=r(49119),i=r(27659).NG,s=r(89426),a=r(96115),o=r(92128),l=r(21994),u=r(33419),d=r(39779),g=d.axisNames,h=(I=function(y){return y.slice().reverse().map(function(p){return-p}).concat([0]).concat(y)},C=String,f={},function(y){var p=C?C(y):y;if(p in f)return f[p];var _=I(y);return f[p]=_,_});function w(y,p,_,x){var b=_("bgcolor");x.bgColor=T.combine(b,x.paper_bgcolor);var M,m=i(x.fullData,d.name,x.id),D=x.layoutOut;function S(X,K){return _(M+"."+X,K)}for(var O=0;O<g.length;O++){k.isPlainObject(y[M=g[O]])||(y[M]={});var P=y[M],R=v.newContainer(p,M);R._id=R._name=M,R._attr=x.id+"."+M,R._traceIndices=m.map(function(X){return X._expandedIndex});var F=S("visible");if(R.type="linear",l(R,D),s(P,R,S,R.type),F){var B,J,z,$,G="realaxis"===M;G&&S("side"),G?S("tickvals"):S("tickvals",h(p.realaxis.tickvals||u.realaxis.tickvals.dflt));var H=x.font||{};F&&(J=(B=S("color"))===P.color?B:H.color,z=H.size,$=H.family),a(P,R,S,R.type,{noTicklabelstep:!0,noAng:!G,noExp:!0,font:{color:J,size:z,family:$}}),k.coerce2(y,p,u,M+".ticklen"),k.coerce2(y,p,u,M+".tickwidth"),k.coerce2(y,p,u,M+".tickcolor",p.color),S("ticks")||(delete p[M].ticklen,delete p[M].tickwidth,delete p[M].tickcolor),o(P,R,S,{dfltColor:B,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[M]}),S("layer")}S("hoverformat"),delete R.type,R._input=P}}se.exports=function(y,p,_){c(y,p,_,{noUirevision:!0,type:d.name,attributes:u,handleDefaults:w,font:p.font,paper_bgcolor:p.paper_bgcolor,fullData:_,layoutOut:p})}},49119:function(se,U,r){"use strict";var I=r(71828),C=r(44467),f=r(27670).c;se.exports=function(k,T,v,c){var i,s,o=c.attributes,l=c.handleDefaults,u=c.partition||"x",d=T._subplots[c.type],g=d.length,h=g&&d[0].replace(/\d+$/,"");function w(x,b){return I.coerce(i,s,o,x,b)}for(var y=0;y<g;y++){var p=d[y];i=k[p]?k[p]:k[p]={},s=C.newContainer(T,p,h),c.noUirevision||w("uirevision",T.uirevision);var _={};_[u]=[y/g,(y+1)/g],f(s,T,w,_),c.id=p,l(i,s,w,c)}}},5386:function(se,U,r){"use strict";function C(f){var k=f.description?" "+f.description:"",T=f.keys||[];if(T.length>0){for(var v=[],c=0;c<T.length;c++)v[c]="`"+T[c]+"`";k+="Finally, the template string has access to ",k=1===T.length?k+"variable "+v[0]:k+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return k}r(31562),U.fF=function(f,k){f=f||{},C(k=k||{});var T={valType:"string",dflt:"",editType:f.editType||"none"};return!1!==f.arrayOk&&(T.arrayOk=!0),T},U.si=function(f,k){f=f||{},C(k=k||{});var T={valType:"string",dflt:"",editType:f.editType||"calc"};return!1!==f.arrayOk&&(T.arrayOk=!0),T},U.R=function(f,k){return f=f||{},C(k=k||{}),{valType:"string",dflt:"",editType:f.editType||"arraydraw"}}},61639:function(se,U,r){"use strict";var I=r(64380),C=r(27659).AU,f=r(71828).counterRegex,k="ternary";U.name=k;var T=U.attr="subplot";U.idRoot=k,U.idRegex=U.attrRegex=f(k),(U.attributes={})[T]={valType:"subplotid",dflt:"ternary",editType:"calc"},U.layoutAttributes=r(81367),U.supplyLayoutDefaults=r(25369),U.plot=function(v){for(var c=v._fullLayout,i=v.calcdata,s=c._subplots[k],a=0;a<s.length;a++){var o=s[a],l=C(i,k,o),u=c[o]._subplot;u||(u=new I({id:o,graphDiv:v,container:c._ternarylayer.node()},c),c[o]._subplot=u),u.plot(l,c,v._promises)}},U.clean=function(v,c,i,s){for(var a=s._subplots[k]||[],o=0;o<a.length;o++){var l=a[o],u=s[l]._subplot;!c[l]&&u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},81367:function(se,U,r){"use strict";var I=r(22399),C=r(27670).Y,f=r(13838),k=r(30962).overrideAll,T=r(1426).extendFlat,v={title:{text:f.title.text,font:f.title.font},color:f.color,tickmode:f.minor.tickmode,nticks:T({},f.nticks,{dflt:6,min:1}),tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,labelalias:f.labelalias,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickfont:f.tickfont,tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,hoverformat:f.hoverformat,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash,layer:f.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}},c=se.exports=k({domain:C({name:"ternary"}),bgcolor:{valType:"color",dflt:I.background},sum:{valType:"number",dflt:1,min:0},aaxis:v,baxis:v,caxis:v},"plot","from-root");c.uirevision={valType:"any",editType:"none"},c.aaxis.uirevision=c.baxis.uirevision=c.caxis.uirevision={valType:"any",editType:"none"}},25369:function(se,U,r){"use strict";var I=r(7901),C=r(44467),f=r(71828),k=r(49119),T=r(96115),v=r(89426),c=r(38701),i=r(26218),s=r(92128),a=r(81367),o=["aaxis","baxis","caxis"];function l(d,g,h,w){var y,p,_,x=h("bgcolor"),b=h("sum");w.bgColor=I.combine(x,w.paper_bgcolor);for(var M=0;M<o.length;M++)p=d[y=o[M]]||{},(_=C.newContainer(g,y))._name=y,u(p,_,w,g);var m=g.aaxis,D=g.baxis,S=g.caxis;m.min+D.min+S.min>=b&&(m.min=0,D.min=0,S.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function u(d,g,h,w){var y=a[g._name];function p(D,S){return f.coerce(d,g,y,D,S)}p("uirevision",w.uirevision),g.type="linear";var _=p("color"),x=_!==y.color.dflt?_:h.font.color,b=g._name.charAt(0).toUpperCase(),M="Component "+b,m=p("title.text",M);g._hovertitle=m===M?m:b,f.coerceFont(p,"title.font",{family:h.font.family,size:f.bigFont(h.font.size),color:x}),p("min"),i(d,g,p,"linear"),v(d,g,p,"linear"),T(d,g,p,"linear"),c(d,g,p,{outerTicks:!0}),p("showticklabels")&&(f.coerceFont(p,"tickfont",{family:h.font.family,size:h.font.size,color:x}),p("tickangle"),p("tickformat")),s(d,g,p,{dfltColor:_,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y}),p("hoverformat"),p("layer")}se.exports=function(d,g,h){k(d,g,h,{type:"ternary",attributes:a,handleDefaults:l,font:g.font,paper_bgcolor:g.paper_bgcolor})}},64380:function(se,U,r){"use strict";var I=r(39898),C=r(84267),f=r(73972),k=r(71828),T=k.strTranslate,v=k._,c=r(7901),i=r(91424),s=r(21994),a=r(1426).extendFlat,o=r(74875),l=r(89298),u=r(28569),d=r(30211),g=r(64505),h=g.freeMode,w=g.rectMode,y=r(92998),p=r(47322).prepSelect,_=r(47322).selectOnClick,x=r(47322).clearOutline,b=r(47322).clearSelectionsCache,M=r(85555);function m(z,$){this.id=z.id,this.graphDiv=z.graphDiv,this.init($),this.makeFramework($),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}se.exports=m;var D=m.prototype;D.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},D.plot=function(z,$){var G=this,H=$[G.id],X=$._size;G._hasClipOnAxisFalse=!1;for(var K=0;K<z.length;K++)if(!1===z[K][0].trace.cliponaxis){G._hasClipOnAxisFalse=!0;break}G.updateLayers(H),G.adjustLayout(H,X),o.generalUpdatePerTraceModule(G.graphDiv,G,z,H),G.layers.plotbg.select("path").call(c.fill,H.bgcolor)},D.makeFramework=function(z){var $=this,G=$.graphDiv,H=z[$.id],X=$.clipId="clip"+$.layoutId+$.id,K=$.clipIdRelative="clip-relative"+$.layoutId+$.id;$.clipDef=k.ensureSingleById(z._clips,"clipPath",X,function(ue){ue.append("path").attr("d","M0,0Z")}),$.clipDefRelative=k.ensureSingleById(z._clips,"clipPath",K,function(ue){ue.append("path").attr("d","M0,0Z")}),$.plotContainer=k.ensureSingle($.container,"g",$.id),$.updateLayers(H),i.setClipUrl($.layers.backplot,X,G),i.setClipUrl($.layers.grids,X,G)},D.updateLayers=function(z){var $=this.layers,G=["draglayer","plotbg","backplot","grids"];"below traces"===z.aaxis.layer&&G.push("aaxis","aline"),"below traces"===z.baxis.layer&&G.push("baxis","bline"),"below traces"===z.caxis.layer&&G.push("caxis","cline"),G.push("frontplot"),"above traces"===z.aaxis.layer&&G.push("aaxis","aline"),"above traces"===z.baxis.layer&&G.push("baxis","bline"),"above traces"===z.caxis.layer&&G.push("caxis","cline");var H=this.plotContainer.selectAll("g.toplevel").data(G,String),X=["agrid","bgrid","cgrid"];H.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var ue=I.select(this);$[K]=ue,"frontplot"===K?ue.append("g").classed("scatterlayer",!0):"backplot"===K?ue.append("g").classed("maplayer",!0):"plotbg"===K?ue.append("path").attr("d","M0,0Z"):"aline"===K||"bline"===K||"cline"===K?ue.append("path"):"grids"===K&&X.forEach(function(ae){$[ae]=ue.append("g").classed("grid "+ae,!0)})}),H.order()};var S=Math.sqrt(4/3);D.adjustLayout=function(z,$){var G,H,X,K,ue,ae,ne=this,Q=z.domain,ie=(Q.x[0]+Q.x[1])/2,le=(Q.y[0]+Q.y[1])/2,fe=Q.x[1]-Q.x[0],he=Q.y[1]-Q.y[0],pe=fe*$.w,xe=he*$.h,Ee=z.sum,Re=z.aaxis.min,ke=z.baxis.min,Te=z.caxis.min;pe>S*xe?X=(K=xe)*S:K=(X=pe)/S,ue=fe*X/pe,ae=he*K/xe,H=$.t+$.h*(1-le)-K/2,ne.x0=G=$.l+$.w*ie-X/2,ne.y0=H,ne.w=X,ne.h=K,ne.sum=Ee,ne.xaxis={type:"linear",range:[Re+2*Te-Ee,Ee-Re-2*ke],domain:[ie-ue/2,ie+ue/2],_id:"x"},s(ne.xaxis,ne.graphDiv._fullLayout),ne.xaxis.setScale(),ne.xaxis.isPtWithinRange=function(qe){return qe.a>=ne.aaxis.range[0]&&qe.a<=ne.aaxis.range[1]&&qe.b>=ne.baxis.range[1]&&qe.b<=ne.baxis.range[0]&&qe.c>=ne.caxis.range[1]&&qe.c<=ne.caxis.range[0]},ne.yaxis={type:"linear",range:[Re,Ee-ke-Te],domain:[le-ae/2,le+ae/2],_id:"y"},s(ne.yaxis,ne.graphDiv._fullLayout),ne.yaxis.setScale(),ne.yaxis.isPtWithinRange=function(){return!0};var we=ne.yaxis.domain[0],je=ne.aaxis=a({},z.aaxis,{range:[Re,Ee-ke-Te],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[we,we+ae*S],anchor:"free",position:0,_id:"y",_length:X});s(je,ne.graphDiv._fullLayout),je.setScale();var Ce=ne.baxis=a({},z.baxis,{range:[Ee-Re-Te,ke],side:"bottom",domain:ne.xaxis.domain,anchor:"free",position:0,_id:"x",_length:X});s(Ce,ne.graphDiv._fullLayout),Ce.setScale();var Ie=ne.caxis=a({},z.caxis,{range:[Ee-Re-ke,Te],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[we,we+ae*S],anchor:"free",position:0,_id:"y",_length:X});s(Ie,ne.graphDiv._fullLayout),Ie.setScale();var ge="M"+G+","+(H+K)+"h"+X+"l-"+X/2+",-"+K+"Z";ne.clipDef.select("path").attr("d",ge),ne.layers.plotbg.select("path").attr("d",ge);var me="M0,"+K+"h"+X+"l-"+X/2+",-"+K+"Z";ne.clipDefRelative.select("path").attr("d",me);var ce=T(G,H);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ce),ne.clipDefRelative.select("path").attr("transform",null);var Ae=T(G-Ce._offset,H+K);ne.layers.baxis.attr("transform",Ae),ne.layers.bgrid.attr("transform",Ae);var Ne=T(G+X/2,H)+"rotate(30)"+T(0,-je._offset);ne.layers.aaxis.attr("transform",Ne),ne.layers.agrid.attr("transform",Ne);var De=T(G+X/2,H)+"rotate(-30)"+T(0,-Ie._offset);ne.layers.caxis.attr("transform",De),ne.layers.cgrid.attr("transform",De),ne.drawAxes(!0),ne.layers.aline.select("path").attr("d",je.showline?"M"+G+","+(H+K)+"l"+X/2+",-"+K:"M0,0").call(c.stroke,je.linecolor||"#000").style("stroke-width",(je.linewidth||0)+"px"),ne.layers.bline.select("path").attr("d",Ce.showline?"M"+G+","+(H+K)+"h"+X:"M0,0").call(c.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),ne.layers.cline.select("path").attr("d",Ie.showline?"M"+(G+X/2)+","+H+"l"+X/2+","+K:"M0,0").call(c.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),ne.graphDiv._context.staticPlot||ne.initInteractions(),i.setClipUrl(ne.layers.frontplot,ne._hasClipOnAxisFalse?null:ne.clipId,ne.graphDiv)},D.drawAxes=function(z){var $=this,G=$.graphDiv,H=$.id.substr(7)+"title",X=$.layers,K=$.aaxis,ue=$.baxis,ae=$.caxis;if($.drawAx(K),$.drawAx(ue),$.drawAx(ae),z){var ne=Math.max(K.showticklabels?K.tickfont.size/2:0,(ae.showticklabels?.75*ae.tickfont.size:0)+("outside"===ae.ticks?.87*ae.ticklen:0)),Q=(ue.showticklabels?ue.tickfont.size:0)+("outside"===ue.ticks?ue.ticklen:0)+3;X["a-title"]=y.draw(G,"a"+H,{propContainer:K,propName:$.id+".aaxis.title",placeholder:v(G,"Click to enter Component A title"),attributes:{x:$.x0+$.w/2,y:$.y0-K.title.font.size/3-ne,"text-anchor":"middle"}}),X["b-title"]=y.draw(G,"b"+H,{propContainer:ue,propName:$.id+".baxis.title",placeholder:v(G,"Click to enter Component B title"),attributes:{x:$.x0-Q,y:$.y0+$.h+.83*ue.title.font.size+Q,"text-anchor":"middle"}}),X["c-title"]=y.draw(G,"c"+H,{propContainer:ae,propName:$.id+".caxis.title",placeholder:v(G,"Click to enter Component C title"),attributes:{x:$.x0+$.w+Q,y:$.y0+$.h+.83*ae.title.font.size+Q,"text-anchor":"middle"}})}},D.drawAx=function(z){var $,G=this,H=G.graphDiv,X=z._name,K=X.charAt(0),ue=z._id,ae=G.layers[X],ne=K+"tickLayout",Q=($=z).ticks+String($.ticklen)+String($.showticklabels);G[ne]!==Q&&(ae.selectAll("."+ue+"tick").remove(),G[ne]=Q),z.setScale();var ie=l.calcTicks(z),le=l.clipEnds(z,ie),fe=l.makeTransTickFn(z),he=l.getTickSigns(z)[2],pe=k.deg2rad(30),xe=he*(z.linewidth||1)/2,Ee=he*z.ticklen,Re=G.w,ke=G.h,Te="b"===K?"M0,"+xe+"l"+Math.sin(pe)*Ee+","+Math.cos(pe)*Ee:"M"+xe+",0l"+Math.cos(pe)*Ee+","+-Math.sin(pe)*Ee,we={a:"M0,0l"+ke+",-"+Re/2,b:"M0,0l-"+Re/2+",-"+ke,c:"M0,0l-"+ke+","+Re/2}[K];l.drawTicks(H,z,{vals:"inside"===z.ticks?le:ie,layer:ae,path:Te,transFn:fe,crisp:!1}),l.drawGrid(H,z,{vals:le,layer:G.layers[K+"grid"],path:we,transFn:fe,crisp:!1}),l.drawLabels(H,z,{vals:ie,layer:ae,transFn:fe,labelFns:l.makeLabelFns(z,0,30)})};var O=M.MINZOOM/2+.87,P="m-0.87,.5h"+O+"v3h-"+(O+5.2)+"l"+(O/2+2.6)+",-"+(.87*O+4.5)+"l2.6,1.5l-"+O/2+","+.87*O+"Z",R="m0.87,.5h-"+O+"v3h"+(O+5.2)+"l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-2.6,1.5l"+O/2+","+.87*O+"Z",F="m0,1l"+O/2+","+.87*O+"l2.6,-1.5l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-"+(O/2+2.6)+","+(.87*O+4.5)+"l2.6,1.5l"+O/2+",-"+.87*O+"Z",B=!0;function J(z){I.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}D.clearOutline=function(){b(this.dragOptions),x(this.dragOptions.gd)},D.initInteractions=function(){var z,$,G,H,X,K,ue,ae,ne,Q,ie,le,fe=this,he=fe.layers.plotbg.select("path").node(),pe=fe.graphDiv,xe=pe._fullLayout._zoomlayer;function Ee(me){var ce={};return ce[fe.id+".aaxis.min"]=me.a,ce[fe.id+".baxis.min"]=me.b,ce[fe.id+".caxis.min"]=me.c,ce}function Re(me,ce){var Ae=pe._fullLayout.clickmode;J(pe),2===me&&(pe.emit("plotly_doubleclick",null),f.call("_guiRelayout",pe,Ee({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&1===me&&_(ce,pe,[fe.xaxis],[fe.yaxis],fe.id,fe.dragOptions),Ae.indexOf("event")>-1&&d.click(pe,ce,fe.id)}function ke(me,ce){return 1-ce/fe.h}function Te(me,ce){return 1-(me+(fe.h-ce)/Math.sqrt(3))/fe.w}function we(me,ce){return(me-(fe.h-ce)/Math.sqrt(3))/fe.w}function je(me,ce){var Ae=G+me*z,Ne=H+ce*$,De=Math.max(0,Math.min(1,ke(0,H),ke(0,Ne))),qe=Math.max(0,Math.min(1,Te(G,H),Te(Ae,Ne))),Ke=Math.max(0,Math.min(1,we(G,H),we(Ae,Ne))),be=(De/2+Ke)*fe.w,Oe=(1-De/2-qe)*fe.w,Le=(be+Oe)/2,Ue=Oe-be,Ze=(1-De)*fe.h,We=Ze-Ue/S;Ue<M.MINZOOM?(ue=X,ie.attr("d",ne),le.attr("d","M0,0Z")):(ue={a:X.a+De*K,b:X.b+qe*K,c:X.c+Ke*K},ie.attr("d",ne+"M"+be+","+Ze+"H"+Oe+"L"+Le+","+We+"L"+be+","+Ze+"Z"),le.attr("d","M"+G+","+H+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+be+","+Ze+P+"M"+Oe+","+Ze+R+"M"+Le+","+We+F)),Q||(ie.transition().style("fill",ae>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),le.transition().style("opacity",1).duration(200),Q=!0),pe.emit("plotly_relayouting",Ee(ue))}function Ce(){J(pe),ue!==X&&(f.call("_guiRelayout",pe,Ee(ue)),B&&pe.data&&pe._context.showTips&&(k.notifier(v(pe,"Double-click to zoom back out"),"long"),B=!1))}function Ie(me,ce){var Ae=me/fe.xaxis._m,Ne=ce/fe.yaxis._m,De=[(ue={a:X.a-Ne,b:X.b+(Ae+Ne)/2,c:X.c-(Ae-Ne)/2}).a,ue.b,ue.c].sort(k.sorterAsc),qe=De.indexOf(ue.a),Ke=De.indexOf(ue.b),be=De.indexOf(ue.c);De[0]<0&&(De[1]+De[0]/2<0?(De[2]+=De[0]+De[1],De[0]=De[1]=0):(De[2]+=De[0]/2,De[1]+=De[0]/2,De[0]=0),ce=(X.a-(ue={a:De[qe],b:De[Ke],c:De[be]}).a)*fe.yaxis._m,me=(X.c-ue.c-X.b+ue.b)*fe.xaxis._m);var Oe=T(fe.x0+me,fe.y0+ce);fe.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Oe);var Le=T(-me,-ce);fe.clipDefRelative.select("path").attr("transform",Le),fe.aaxis.range=[ue.a,fe.sum-ue.b-ue.c],fe.baxis.range=[fe.sum-ue.a-ue.c,ue.b],fe.caxis.range=[fe.sum-ue.a-ue.b,ue.c],fe.drawAxes(!1),fe._hasClipOnAxisFalse&&fe.plotContainer.select(".scatterlayer").selectAll(".trace").call(i.hideOutsideRangePoints,fe),pe.emit("plotly_relayouting",Ee(ue))}function ge(){f.call("_guiRelayout",pe,Ee(ue))}this.dragOptions={element:he,gd:pe,plotinfo:{id:fe.id,domain:pe._fullLayout[fe.id].domain,xaxis:fe.xaxis,yaxis:fe.yaxis},subplot:fe.id,prepFn:function(me,ce,Ae){fe.dragOptions.xaxes=[fe.xaxis],fe.dragOptions.yaxes=[fe.yaxis],z=pe._fullLayout._invScaleX,$=pe._fullLayout._invScaleY;var Ne=fe.dragOptions.dragmode=pe._fullLayout.dragmode;fe.dragOptions.minDrag=h(Ne)?1:void 0,"zoom"===Ne?(fe.dragOptions.moveFn=je,fe.dragOptions.clickFn=Re,fe.dragOptions.doneFn=Ce,function(De,qe,Ke){var be=he.getBoundingClientRect();G=qe-be.left,H=Ke-be.top,pe._fullLayout._calcInverseTransform(pe);var Le=k.apply3DTransform(pe._fullLayout._invTransform)(G,H);G=Le[0],H=Le[1],ue=X={a:fe.aaxis.range[0],b:fe.baxis.range[1],c:fe.caxis.range[1]},K=fe.aaxis.range[1]-X.a,ae=C(fe.graphDiv._fullLayout[fe.id].bgcolor).getLuminance(),ne="M0,"+fe.h+"L"+fe.w/2+", 0L"+fe.w+","+fe.h+"Z",Q=!1,ie=xe.append("path").attr("class","zoombox").attr("transform",T(fe.x0,fe.y0)).style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ne),le=xe.append("path").attr("class","zoombox-corners").attr("transform",T(fe.x0,fe.y0)).style({fill:c.background,stroke:c.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),fe.clearOutline(pe)}(0,ce,Ae)):"pan"===Ne?(fe.dragOptions.moveFn=Ie,fe.dragOptions.clickFn=Re,fe.dragOptions.doneFn=ge,ue=X={a:fe.aaxis.range[0],b:fe.baxis.range[1],c:fe.caxis.range[1]},fe.clearOutline(pe)):(w(Ne)||h(Ne))&&p(me,ce,Ae,fe.dragOptions,Ne)}},he.onmousemove=function(me){d.hover(pe,me,fe.id),pe._fullLayout._lasthover=he,pe._fullLayout._hoversubplot=fe.id},he.onmouseout=function(me){pe._dragging||u.unhover(pe,me)},u.init(this.dragOptions)}},73972:function(se,U,r){"use strict";var I=r(47769),C=r(64213),f=r(75138),k=r(41965),T=r(24401).addStyleRule,v=r(1426),c=r(9012),i=r(10820),s=v.extendFlat,a=v.extendDeepAll;function o(_){var x=_.name,b=_.categories,M=_.meta;if(U.modules[x])I.log("Type "+x+" already registered");else{U.subplotsRegistry[_.basePlotModule.name]||function(B){var J=B.name;if(U.subplotsRegistry[J])I.log("Plot type "+J+" already registered.");else for(var z in g(B),U.subplotsRegistry[J]=B,U.componentsRegistry)y(z,B.name)}(_.basePlotModule);for(var m={},D=0;D<b.length;D++)m[b[D]]=!0,U.allCategories[b[D]]=!0;for(var S in U.modules[x]={_module:_,categories:m},M&&Object.keys(M).length&&(U.modules[x].meta=M),U.allTypes.push(x),U.componentsRegistry)h(S,x);_.layoutAttributes&&s(U.traceLayoutAttributes,_.layoutAttributes);var O=_.basePlotModule,P=O.name;if("mapbox"===P){var R=O.constants.styleRules;for(var F in R)T(".js-plotly-plot .plotly .mapboxgl-"+F,R[F])}"geo"!==P&&"mapbox"!==P||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function l(_){if("string"!=typeof _.name)throw new Error("Component module *name* must be a string.");var x=_.name;for(var b in U.componentsRegistry[x]=_,_.layoutAttributes&&(_.layoutAttributes._isLinkedToArray&&f(U.layoutArrayContainers,x),g(_)),U.modules)h(x,b);for(var M in U.subplotsRegistry)y(x,M);for(var m in U.transformsRegistry)w(x,m);_.schema&&_.schema.layout&&a(i,_.schema.layout)}function u(_){if("string"!=typeof _.name)throw new Error("Transform module *name* must be a string.");var x="Transform module "+_.name,b="function"==typeof _.transform,M="function"==typeof _.calcTransform;if(!b&&!M)throw new Error(x+" is missing a *transform* or *calcTransform* method.");for(var m in b&&M&&I.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),k(_.attributes)||I.log(x+" registered without an *attributes* object."),"function"!=typeof _.supplyDefaults&&I.log(x+" registered without a *supplyDefaults* method."),U.transformsRegistry[_.name]=_,U.componentsRegistry)w(m,_.name)}function d(_){var x=_.name,b=x.split("-")[0],M=_.dictionary,m=_.format,D=M&&Object.keys(M).length,S=m&&Object.keys(m).length,O=U.localeRegistry,P=O[x];if(P||(O[x]=P={}),b!==x){var R=O[b];R||(O[b]=R={}),D&&R.dictionary===P.dictionary&&(R.dictionary=M),S&&R.format===P.format&&(R.format=m)}D&&(P.dictionary=M),S&&(P.format=m)}function g(_){if(_.layoutAttributes){var x=_.layoutAttributes._arrayAttrRegexps;if(x)for(var b=0;b<x.length;b++)f(U.layoutArrayRegexes,x[b])}}function h(_,x){var b=U.componentsRegistry[_].schema;if(b&&b.traces){var M=b.traces[x];M&&a(U.modules[x]._module.attributes,M)}}function w(_,x){var b=U.componentsRegistry[_].schema;if(b&&b.transforms){var M=b.transforms[x];M&&a(U.transformsRegistry[x].attributes,M)}}function y(_,x){var b=U.componentsRegistry[_].schema;if(b&&b.subplots){var M=U.subplotsRegistry[x],m=M.layoutAttributes,D="subplot"===M.attr?M.name:M.attr;Array.isArray(D)&&(D=D[0]);var S=b.subplots[D];m&&S&&a(m,S)}}function p(_){return"object"==typeof _&&(_=_.type),_}U.modules={},U.allCategories={},U.allTypes=[],U.subplotsRegistry={},U.transformsRegistry={},U.componentsRegistry={},U.layoutArrayContainers=[],U.layoutArrayRegexes=[],U.traceLayoutAttributes={},U.localeRegistry={},U.apiMethodRegistry={},U.collectableSubplotTypes=null,U.register=function(_){if(U.collectableSubplotTypes=null,!_)throw new Error("No argument passed to Plotly.register.");_&&!Array.isArray(_)&&(_=[_]);for(var x=0;x<_.length;x++){var b=_[x];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":o(b);break;case"transform":u(b);break;case"component":l(b);break;case"locale":d(b);break;case"apiMethod":U.apiMethodRegistry[b.name]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},U.getModule=function(_){var x=U.modules[p(_)];return!!x&&x._module},U.traceIs=function(_,x){if("various"===(_=p(_)))return!1;var b=U.modules[_];return b||(_&&I.log("Unrecognized trace type "+_+"."),b=U.modules[c.type.dflt]),!!b.categories[x]},U.getTransformIndices=function(_,x){for(var b=[],M=_.transforms||[],m=0;m<M.length;m++)M[m].type===x&&b.push(m);return b},U.hasTransform=function(_,x){for(var b=_.transforms||[],M=0;M<b.length;M++)if(b[M].type===x)return!0;return!1},U.getComponentMethod=function(_,x){var b=U.componentsRegistry[_];return b&&b[x]||C},U.call=function(){var _=arguments[0],x=[].slice.call(arguments,1);return U.apiMethodRegistry[_].apply(null,x)}},61914:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=C.extendFlat,k=C.extendDeep;function T(v){var c;switch(v){case"themes__thumb":c={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":c={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:c={}}return c}se.exports=function(v,c){var i,o=v.layout,l=k([],v.data),u=k({},o,T(c.tileClass)),d=v._context||{};if(c.width&&(u.width=c.width),c.height&&(u.height=c.height),"thumbnail"===c.tileClass||"themes__thumb"===c.tileClass){u.annotations=[];var g=Object.keys(u);for(i=0;i<g.length;i++)["xaxis","yaxis","zaxis"].indexOf(g[i].slice(0,5))>-1&&(u[g[i]].title={text:""});for(i=0;i<l.length;i++){var h=l[i];h.showscale=!1,h.marker&&(h.marker.showscale=!1),I.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(c.annotations))for(i=0;i<c.annotations.length;i++)u.annotations.push(c.annotations[i]);var w=Object.keys(u).filter(function(b){return b.match(/^scene\d*$/)});if(w.length){var y={};for("thumbnail"===c.tileClass&&(y={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),i=0;i<w.length;i++){var p=u[w[i]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),f(p.xaxis,y),f(p.yaxis,y),f(p.zaxis,y),p._scene=null}}var _=document.createElement("div");c.tileClass&&(_.className=c.tileClass);var x={gd:_,td:_,layout:u,data:l,config:{staticPlot:void 0===c.staticPlot||c.staticPlot,plotGlPixelRatio:void 0===c.plotGlPixelRatio?2:c.plotGlPixelRatio,displaylogo:c.displaylogo||!1,showLink:c.showLink||!1,showTips:c.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return"transparent"!==c.setBackground&&(x.config.setBackground=c.setBackground||"opaque"),x.gd.defaultLayout=T(c.tileClass),x}},7239:function(se,U,r){"use strict";var I=r(71828),C=r(403),f=r(22435),k=r(25095);se.exports=function(T,v){var c;return I.isPlainObject(T)||(c=I.getGraphDiv(T)),(v=v||{}).format=v.format||"png",v.width=v.width||null,v.height=v.height||null,v.imageDataOnly=!0,new Promise(function(i,s){c&&c._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),I.isIE()&&"svg"!==v.format&&s(new Error(k.MSG_IE_BAD_FORMAT)),c&&(c._snapshotInProgress=!0);var a=C(T,v),o=v.filename||T.fn||"newplot";o+="."+v.format.replace("-","."),a.then(function(l){return c&&(c._snapshotInProgress=!1),f(l,o,v.format)}).then(function(l){i(l)}).catch(function(l){c&&(c._snapshotInProgress=!1),s(l)})})}},22435:function(se,U,r){"use strict";var I=r(71828),C=r(25095);se.exports=function(f,k,T){var v=document.createElement("a"),c="download"in v;return new Promise(function(i,s){var a,o;return I.isIE()?(a=C.createBlob(f,"svg"),window.navigator.msSaveBlob(a,k),a=null,i(k)):c?(a=C.createBlob(f,T),o=C.createObjectURL(a),v.href=o,v.download=k,document.body.appendChild(v),v.click(),document.body.removeChild(v),C.revokeObjectURL(o),a=null,i(k)):I.isSafari()?(C.octetStream(("svg"===T?",":";base64,")+encodeURIComponent(f)),i(k)):void s(new Error("download error"))})}},25095:function(se,U,r){"use strict";var I=r(73972);U.getDelay=function(f){return f._has&&(f._has("gl3d")||f._has("gl2d")||f._has("mapbox"))?500:0},U.getRedrawFunc=function(f){return function(){I.getComponentMethod("colorbar","draw")(f)}},U.encodeSVG=function(f){return"data:image/svg+xml,"+encodeURIComponent(f)},U.encodeJSON=function(f){return"data:application/json,"+encodeURIComponent(f)};var C=window.URL||window.webkitURL;U.createObjectURL=function(f){return C.createObjectURL(f)},U.revokeObjectURL=function(f){return C.revokeObjectURL(f)},U.createBlob=function(f,k){if("svg"===k)return new window.Blob([f],{type:"image/svg+xml;charset=utf-8"});if("full-json"===k)return new window.Blob([f],{type:"application/json;charset=utf-8"});var T=function(v){for(var c=v.length,i=new ArrayBuffer(c),s=new Uint8Array(i),a=0;a<c;a++)s[a]=v.charCodeAt(a);return i}(window.atob(f));return new window.Blob([T],{type:"image/"+k})},U.octetStream=function(f){document.location.href="data:application/octet-stream"+f},U.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,U.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function(se,U,r){"use strict";var I=r(25095),C={getDelay:I.getDelay,getRedrawFunc:I.getRedrawFunc,clone:r(61914),toSVG:r(5900),svgToImg:r(70942),toImage:r(56395),downloadImage:r(7239)};se.exports=C},70942:function(se,U,r){"use strict";var I=r(71828),C=r(15398).EventEmitter,f=r(25095);se.exports=function(k){var T=k.emitter||new C,v=new Promise(function(c,i){var s=window.Image,a=k.svg,o=k.format||"png";if(I.isIE()&&"svg"!==o){var l=new Error(f.MSG_IE_BAD_FORMAT);return i(l),k.promise?v:T.emit("error",l)}var u,d,g=k.canvas,h=k.scale||1,p=h*(k.width||300),_=h*(k.height||150),x=g.getContext("2d",{willReadFrequently:!0}),b=new s;"svg"===o||I.isSafari()?d=f.encodeSVG(a):(u=f.createBlob(a,"svg"),d=f.createObjectURL(u)),g.width=p,g.height=_,b.onload=function(){var M;switch(u=null,f.revokeObjectURL(d),"svg"!==o&&x.drawImage(b,0,0,p,_),o){case"jpeg":M=g.toDataURL("image/jpeg");break;case"png":M=g.toDataURL("image/png");break;case"webp":M=g.toDataURL("image/webp");break;case"svg":M=d;break;default:var m="Image format is not jpeg, png, svg or webp.";if(i(new Error(m)),!k.promise)return T.emit("error",m)}c(M),k.promise||T.emit("success",M)},b.onerror=function(M){if(u=null,f.revokeObjectURL(d),i(M),!k.promise)return T.emit("error",M)},b.src=d});return k.promise?v:T}},56395:function(se,U,r){"use strict";var I=r(15398).EventEmitter,C=r(73972),f=r(71828),k=r(25095),T=r(61914),v=r(5900),c=r(70942);se.exports=function(i,s){var a=new I,o=T(i,{format:"png"}),l=o.gd;l.style.position="absolute",l.style.left="-5000px",document.body.appendChild(l);var u=k.getRedrawFunc(l);return C.call("_doPlot",l,o.data,o.layout,o.config).then(u).then(function(){var d=k.getDelay(l._fullLayout);setTimeout(function(){var g=v(l),h=document.createElement("canvas");h.id=f.randstr(),(a=c({format:s.format,width:l._fullLayout.width,height:l._fullLayout.height,canvas:h,emitter:a,svg:g})).clean=function(){l&&document.body.removeChild(l)}},d)}).catch(function(d){a.emit("error",d)}),a}},5900:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(7901),T=r(77922),v=/"/g,c="TOBESTRIPPED",i=new RegExp('("'+c+")|("+c+'")',"g");se.exports=function(s,a,o){var l,u=s._fullLayout,d=u._paper,g=u._toppaper,h=u.width,w=u.height;d.insert("rect",":first-child").call(f.setRect,0,0,h,w).call(k.fill,u.paper_bgcolor);var y=u._basePlotModules||[];for(l=0;l<y.length;l++){var p=y[l];p.toSVG&&p.toSVG(s)}if(g){var _=g.node().childNodes,x=Array.prototype.slice.call(_);for(l=0;l<x.length;l++){var b=x[l];b.childNodes.length&&d.node().appendChild(b)}}u._draggers&&u._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var m=I.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){m.style({visibility:null,display:null});var D=this.style.fontFamily;D&&-1!==D.indexOf('"')&&m.style("font-family",D.replace(v,c))}else m.remove()}),d.selectAll(".gradient_filled,.pattern_filled").each(function(){var m=I.select(this),D=this.style.fill;D&&-1!==D.indexOf("url(")&&m.style("fill",D.replace(v,c));var S=this.style.stroke;S&&-1!==S.indexOf("url(")&&m.style("stroke",S.replace(v,c))}),"pdf"!==a&&"eps"!==a||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(T.xmlns,"xmlns",T.svg),d.node().setAttributeNS(T.xmlns,"xmlns:xlink",T.xlink),"svg"===a&&o&&(d.attr("width",o*h),d.attr("height",o*w),d.attr("viewBox","0 0 "+h+" "+w));var m,D,S,M=(new window.XMLSerializer).serializeToString(d.node());return M=(M=(m=M,D=I.select("body").append("div").style({display:"none"}).html(""),S=m.replace(/(&[^;]*;)/gi,function(O){return"&lt;"===O?"&#60;":"&rt;"===O?"&#62;":-1!==O.indexOf("<")||-1!==O.indexOf(">")?"":D.html(O).text()}),D.remove(),M=S).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(i,"'"),C.isIE()&&(M=(M=(M=M.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),M}},75341:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){for(var k=0;k<C.length;k++)C[k].i=k;I.mergeArray(f.text,C,"tx"),I.mergeArray(f.hovertext,C,"htx");var T=f.marker;if(T){I.mergeArray(T.opacity,C,"mo",!0),I.mergeArray(T.color,C,"mc");var v=T.line;v&&(I.mergeArray(v.color,C,"mlc"),I.mergeArrayCastPositive(v.width,C,"mlw"))}}},1486:function(se,U,r){"use strict";var I=r(82196),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(5386).si,T=r(50693),v=r(41940),c=r(97313),i=r(79952).u,s=r(1426).extendFlat,a=v({editType:"calc",arrayOk:!0,colorEditType:"style"}),o=s({},I.marker.line.width,{dflt:0}),l=s({width:o,editType:"calc"},T("marker.line")),u=s({line:l,editType:"calc"},T("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:i});se.exports={x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,xhoverformat:C("x"),yhoverformat:C("y"),text:I.text,texttemplate:k({editType:"plot"},{keys:c.eventDataKeys}),hovertext:I.hovertext,hovertemplate:f({},{keys:c.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:s({},a,{}),insidetextfont:s({},a,{}),outsidetextfont:s({},a,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:s({},I.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup,selected:{marker:{opacity:I.selected.marker.opacity,color:I.selected.marker.color,editType:"style"},textfont:I.selected.textfont,editType:"style"},unselected:{marker:{opacity:I.unselected.marker.opacity,color:I.unselected.marker.color,editType:"style"},textfont:I.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function(se,U,r){"use strict";var I=r(89298),C=r(42973),f=r(52075).hasColorscale,k=r(78803),T=r(75341),v=r(66279);se.exports=function(c,i){var s,a,o,l,u,d,g=I.getFromId(c,i.xaxis||"x"),h=I.getFromId(c,i.yaxis||"y"),w={msUTC:!(!i.base&&0!==i.base)};"h"===i.orientation?(s=g.makeCalcdata(i,"x",w),o=h.makeCalcdata(i,"y"),l=C(i,h,"y",o),u=!!i.yperiodalignment,d="y"):(s=h.makeCalcdata(i,"y",w),o=g.makeCalcdata(i,"x"),l=C(i,g,"x",o),u=!!i.xperiodalignment,d="x"),a=l.vals;for(var y=Math.min(a.length,s.length),p=new Array(y),_=0;_<y;_++)p[_]={p:a[_],s:s[_]},u&&(p[_].orig_p=o[_],p[_][d+"End"]=l.ends[_],p[_][d+"Start"]=l.starts[_]),i.ids&&(p[_].id=String(i.ids[_]));return f(i,"marker")&&k(c,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),f(i,"marker.line")&&k(c,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(p,i),v(p,i),p}},97313:function(se){"use strict";se.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function(se,U,r){"use strict";var I=r(92770),C=r(71828).isArrayOrTypedArray,f=r(50606).BADNUM,k=r(73972),T=r(89298),v=r(99082).getAxisGroup,c=r(61546);function i(y,p,_,x,b){if(x.length){var M,m,D,S;switch(function(O,P){var R,F;for(R=0;R<P.length;R++){var B,J=P[R],z=J[0].trace,$="funnel"===z.type?z._base:z.base,G="h"===z.orientation?z.xcalendar:z.ycalendar,H="category"===O.type||"multicategory"===O.type?function(){return null}:O.d2c;if(C($)){for(F=0;F<Math.min($.length,J.length);F++)B=H($[F],0,G),I(B)?(J[F].b=+B,J[F].hasB=1):J[F].b=0;for(;F<J.length;F++)J[F].b=0}else{B=H($,0,G);var X=I(B);for(B=X?B:0,F=0;F<J.length;F++)J[F].b=B,X&&(J[F].hasB=1)}}}(_,x),b.mode){case"overlay":s(p,_,x,b);break;case"group":for(M=[],m=[],D=0;D<x.length;D++)void 0===(S=x[D])[0].trace.offset?m.push(S):M.push(S);m.length&&(O=y,R=_,J=new c(m,{posAxis:P=p,sepNegVal:!1,overlapNoMerge:!(B=b).norm}),function(z,$,G,H){for(var X=z._fullLayout,ae=G.minDiff,ne=G.traces,Q=ne.length,ie=G.positions.length!==G.distinctPositions.length,le=ae*(1-H.gap),fe=v(X,$._id)+ne[0][0].trace.orientation,he=X._alignmentOpts[fe]||{},pe=0;pe<Q;pe++){var xe,Ee,Re=ne[pe],ke=Re[0].trace,we=Object.keys((he[ke.alignmentgroup]||{}).offsetGroups||{}).length,je=(xe=we?le/we:ie?le/Q:le)*(1-(H.groupgap||0));Ee=we?((2*ke._offsetIndex+1-we)*xe-je)/2:ie?((2*pe+1-Q)*xe-je)/2:-je/2;var Ce=Re[0].t;Ce.barwidth=je,Ce.poffset=Ee,Ce.bargroupwidth=le,Ce.bardelta=ae}G.binWidth=ne[0][0].t.barwidth/100,o(G),l($,G),u($,G,ie)}(O,P,J,B),function(z,$){for(var G=z.traces,H=0;H<G.length;H++){var X=G[H];if(void 0===X[0].trace.base)for(var K=new c([X],{posAxis:$,sepNegVal:!0,overlapNoMerge:!0}),ue=0;ue<X.length;ue++){var ae=X[ue];if(ae.p!==f){var ne=K.put(ae.p,ae.b+ae.s);ne&&(ae.b=ne)}}}}(J,P),B.norm?(g(J),h(R,J,B)):d(R,J)),M.length&&s(p,_,M,b);break;case"stack":case"relative":for(M=[],m=[],D=0;D<x.length;D++)void 0===(S=x[D])[0].trace.base?m.push(S):M.push(S);m.length&&function(O,P,R,F,B){var J=new c(F,{posAxis:P,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});a(P,J,B),function(X,K,ue){var ae,ne,Q,ie,le,fe,he=w(X),pe=K.traces;for(ie=0;ie<pe.length;ie++)if("funnel"===(ne=(ae=pe[ie])[0].trace).type)for(le=0;le<ae.length;le++)(fe=ae[le]).s!==f&&K.put(fe.p,-.5*fe.s);for(ie=0;ie<pe.length;ie++){Q="funnel"===(ne=(ae=pe[ie])[0].trace).type;var xe=[];for(le=0;le<ae.length;le++)if((fe=ae[le]).s!==f){var Ee,Re=K.put(fe.p,Ee=Q?fe.s:fe.s+fe.b),ke=Re+Ee;fe.b=Re,fe[he]=ke,ue.norm||(xe.push(ke),fe.hasB&&xe.push(Re))}ue.norm||(ne._extremes[X._id]=T.findExtremes(X,xe,{tozero:!0,padded:!0}))}}(R,J,B);for(var z=0;z<F.length;z++)for(var $=F[z],G=0;G<$.length;G++){var H=$[G];H.s!==f&&H.b+H.s===J.get(H.p,H.s)&&(H._outmost=!0)}B.norm&&h(R,J,B)}(0,p,_,m,b),M.length&&s(p,_,M,b)}!function(O,P){var R,F,B,J=w(P),z={},$=1/0,G=-1/0;for(R=0;R<O.length;R++)for(B=O[R],F=0;F<B.length;F++){var H=B[F].p;I(H)&&($=Math.min($,H),G=Math.max(G,H))}var X=1e4/(G-$),K=z.round=function(fe){return String(Math.round(X*(fe-$)))};for(R=0;R<O.length;R++){(B=O[R])[0].t.extents=z;var ue=B[0].t.poffset,ae=Array.isArray(ue);for(F=0;F<B.length;F++){var ne=B[F],Q=ne[J]-ne.w/2;if(I(Q)){var ie=ne[J]+ne.w/2,le=K(ne.p);z[le]=z[le]?[Math.min(Q,z[le][0]),Math.max(ie,z[le][1])]:[Q,ie]}ne.p0=ne.p+(ae?ue[F]:ue),ne.p1=ne.p0+ne.w,ne.s0=ne.b,ne.s1=ne.s0+ne.s}}}(x,p)}var O,P,R,B,J}function s(y,p,_,x){for(var b=0;b<_.length;b++){var m=new c([_[b]],{posAxis:y,sepNegVal:!1,overlapNoMerge:!x.norm});a(y,m,x),x.norm?(g(m),h(p,m,x)):d(p,m)}}function a(y,p,_){for(var x=p.minDiff,b=p.traces,M=x*(1-_.gap),m=M*(1-(_.groupgap||0)),D=-m/2,S=0;S<b.length;S++){var O=b[S][0].t;O.barwidth=m,O.poffset=D,O.bargroupwidth=M,O.bardelta=x}p.binWidth=b[0][0].t.barwidth/100,o(p),l(y,p),u(y,p)}function o(y){var p,_,x=y.traces;for(p=0;p<x.length;p++){var b,M=x[p],m=M[0],D=m.trace,S=m.t,O=D._offset||D.offset,P=S.poffset;if(C(O)){for(b=Array.prototype.slice.call(O,0,M.length),_=0;_<b.length;_++)I(b[_])||(b[_]=P);for(_=b.length;_<M.length;_++)b.push(P);S.poffset=b}else void 0!==O&&(S.poffset=O);var R=D._width||D.width,F=S.barwidth;if(C(R)){var B=Array.prototype.slice.call(R,0,M.length);for(_=0;_<B.length;_++)I(B[_])||(B[_]=F);for(_=B.length;_<M.length;_++)B.push(F);if(S.barwidth=B,void 0===O){for(b=[],_=0;_<M.length;_++)b.push(P+(F-B[_])/2);S.poffset=b}}else void 0!==R&&(S.barwidth=R,void 0===O&&(S.poffset=P+(F-R)/2))}}function l(y,p){for(var _=p.traces,x=w(y),b=0;b<_.length;b++)for(var M=_[b],m=M[0].t,D=m.poffset,S=Array.isArray(D),O=m.barwidth,P=Array.isArray(O),R=0;R<M.length;R++){var F=M[R],B=F.w=P?O[R]:O;void 0===F.p&&(F.p=F[x],F["orig_"+x]=F[x]),F[x]=F.p+((S?D[R]:D)+B/2)}}function u(y,p,_){var x=p.traces,b=p.minDiff/2;T.minDtick(y,p.minDiff,p.distinctPositions[0],_);for(var M=0;M<x.length;M++){var m,D,S,O,P=x[M],R=P[0],F=R.trace,B=[];for(O=0;O<P.length;O++)D=(m=P[O]).p-b,B.push(D,S=m.p+b);if(F.width||F.offset){var J=R.t,z=J.poffset,$=J.barwidth,G=Array.isArray(z),H=Array.isArray($);for(O=0;O<P.length;O++)S=(D=(m=P[O]).p+(G?z[O]:z))+(H?$[O]:$),B.push(D,S)}F._extremes[y._id]=T.findExtremes(y,B,{padded:!1})}}function d(y,p){for(var _=p.traces,x=w(y),b=0;b<_.length;b++){for(var M=_[b],m=M[0].trace,D="scatter"===m.type,S="v"===m.orientation,O=[],P=!1,R=0;R<M.length;R++){var F=M[R],B=D?0:F.b,J=D?S?F.y:F.x:B+F.s;F[x]=J,O.push(J),F.hasB&&O.push(B),F.hasB&&F.b||(P=!0)}m._extremes[y._id]=T.findExtremes(y,O,{tozero:P,padded:!0})}}function g(y){for(var p=y.traces,_=0;_<p.length;_++)for(var x=p[_],b=0;b<x.length;b++){var M=x[b];M.s!==f&&y.put(M.p,M.b+M.s)}}function h(y,p,_){var x=p.traces,b=w(y),M="fraction"===_.norm?1:100,m=M/1e9,D=y.l2c(y.c2l(0)),S="stack"===_.mode?M:D;function O(ue){return I(y.c2l(ue))&&(ue<D-m||ue>S+m||!I(D))}for(var P=0;P<x.length;P++){for(var R=x[P],F=R[0].trace,B=[],J=!1,z=!1,$=0;$<R.length;$++){var G=R[$];if(G.s!==f){var H=Math.abs(M/p.get(G.p,G.s));G.b*=H,G.s*=H;var X=G.b,K=X+G.s;G[b]=K,B.push(K),z=z||O(K),G.hasB&&(B.push(X),z=z||O(X)),G.hasB&&G.b||(J=!0)}}F._extremes[y._id]=T.findExtremes(y,B,{tozero:J,padded:z})}}function w(y){return y._id.charAt(0)}se.exports={crossTraceCalc:function(y,p){for(var _=p.xaxis,x=p.yaxis,b=y._fullLayout,M=y._fullData,m=y.calcdata,D=[],S=[],O=0;O<M.length;O++){var P=M[O];if(!0===P.visible&&k.traceIs(P,"bar")&&P.xaxis===_._id&&P.yaxis===x._id&&("h"===P.orientation?D.push(m[O]):S.push(m[O]),P._computePh))for(var R=y.calcdata[O],F=0;F<R.length;F++)"function"==typeof R[F].ph0&&(R[F].ph0=R[F].ph0()),"function"==typeof R[F].ph1&&(R[F].ph1=R[F].ph1())}var B={xCat:"category"===_.type||"multicategory"===_.type,yCat:"category"===x.type||"multicategory"===x.type,mode:b.barmode,norm:b.barnorm,gap:b.bargap,groupgap:b.bargroupgap};i(y,_,x,S,B),i(y,x,_,D,B)},setGroupPositions:i}},90769:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(73972),k=r(67513),T=r(73927),v=r(98340),c=r(26125),i=r(1486),s=I.coerceFont;function a(o,l,u,d,g,h){var w=!1!==(h=h||{}).moduleHasSelected,y=!1!==h.moduleHasUnselected,p=!1!==h.moduleHasConstrain,_=!1!==h.moduleHasCliponaxis,x=!1!==h.moduleHasTextangle,b=!1!==h.moduleHasInsideanchor,M=!!h.hasPathbar,m=Array.isArray(g)||"auto"===g,D=m||"inside"===g,S=m||"outside"===g;if(D||S){var O=s(d,"textfont",u.font),P=I.extendFlat({},O),R=!(o.textfont&&o.textfont.color);if(R&&delete P.color,s(d,"insidetextfont",P),M){var F=I.extendFlat({},O);R&&delete F.color,s(d,"pathbar.textfont",F)}S&&s(d,"outsidetextfont",O),w&&d("selected.textfont.color"),y&&d("unselected.textfont.color"),p&&d("constraintext"),_&&d("cliponaxis"),x&&d("textangle"),d("texttemplate")}D&&b&&d("insidetextanchor")}se.exports={supplyDefaults:function(o,l,u,d){function g(p,_){return I.coerce(o,l,i,p,_)}if(k(o,l,d,g)){T(o,l,d,g),g("xhoverformat"),g("yhoverformat"),g("orientation",l.x&&!l.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var h=g("textposition");a(o,0,d,g,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),v(o,l,g,u,d);var w=(l.marker.line||{}).color,y=f.getComponentMethod("errorbars","supplyDefaults");y(o,l,w||C.defaultLine,{axis:"y"}),y(o,l,w||C.defaultLine,{axis:"x",inherit:"y"}),I.coerceSelectionMarkerOpacity(l,g)}else l.visible=!1},crossTraceDefaults:function(o,l){var d;function g(w){return I.coerce(d._input,d,i,w)}if("group"===l.barmode)for(var h=0;h<o.length;h++)"bar"===(d=o[h]).type&&c(d._input,d,l,g)},handleText:a}},58065:function(se){"use strict";se.exports=function(U,r,I){return U.x="xVal"in r?r.xVal:r.x,U.y="yVal"in r?r.yVal:r.y,r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),"h"===I.orientation?(U.label=U.y,U.value=U.x):(U.label=U.x,U.value=U.y),U}},69383:function(se,U,r){"use strict";var I=r(92770),C=r(84267),f=r(71828).isArrayOrTypedArray;U.coerceString=function(k,T,v){if("string"==typeof T){if(T||!k.noBlank)return T}else if(("number"==typeof T||!0===T)&&!k.strict)return String(T);return void 0!==v?v:k.dflt},U.coerceNumber=function(k,T,v){if(I(T)){T=+T;var c=k.min,i=k.max;if(!(void 0!==c&&T<c||void 0!==i&&T>i))return T}return void 0!==v?v:k.dflt},U.coerceColor=function(k,T,v){return C(T).isValid()?T:void 0!==v?v:k.dflt},U.coerceEnumerated=function(k,T,v){return k.coerceNumber&&(T=+T),-1!==k.values.indexOf(T)?T:void 0!==v?v:k.dflt},U.getValue=function(k,T){var v;return Array.isArray(k)?T<k.length&&(v=k[T]):v=k,v},U.getLineWidth=function(k,T){return 0<T.mlw?T.mlw:f(k.marker.line.width)?0:k.marker.line.width}},95423:function(se,U,r){"use strict";var I=r(30211),C=r(73972),f=r(7901),k=r(71828).fillText,T=r(69383).getLineWidth,v=r(89298).hoverLabelText,c=r(50606).BADNUM;function i(a,o,l,u,d){var g,h,w,y,p,_,x,b=a.cd,M=b[0].trace,m=b[0].t,D="closest"===u,S="waterfall"===M.type,O=a.maxHoverDistance,P=a.maxSpikeDistance;"h"===M.orientation?(g=l,h=o,w="y",y="x",p=ae,_=K):(g=o,h=l,w="x",y="y",_=ae,p=K);var R=M[w+"period"],F=D||R;function B(xe){return z(xe,-1)}function J(xe){return z(xe,1)}function z(xe,Ee){return xe[w]+Ee*xe.w/2}function $(xe){return xe[w+"End"]-xe[w+"Start"]}var G=D?B:R?function(xe){return xe.p-$(xe)/2}:function(xe){return Math.min(B(xe),xe.p-m.bardelta/2)},H=D?J:R?function(xe){return xe.p+$(xe)/2}:function(xe){return Math.max(J(xe),xe.p+m.bardelta/2)};function X(xe,Ee,Re){return d.finiteRange&&(Re=0),I.inbox(xe-g,Ee-g,Re+Math.min(1,Math.abs(Ee-xe)/x)-1)}function K(xe){return X(G(xe),H(xe),O)}function ue(xe){var Ee=xe[y];if(S){var Re=Math.abs(xe.rawS)||0;h>0?Ee+=Re:h<0&&(Ee-=Re)}return Ee}function ae(xe){var Ee=h,Re=xe.b,ke=ue(xe);return I.inbox(Re-Ee,ke-Ee,O+(ke-Ee)/(ke-Re)-1)}var ne=a[w+"a"],Q=a[y+"a"];x=Math.abs(ne.r2c(ne.range[1])-ne.r2c(ne.range[0]));var xe,Ee,Re,ke,ie=I.getDistanceFunction(u,p,_,function(xe){return(p(xe)+_(xe))/2});if(I.getClosest(b,ie,a),!1!==a.index&&b[a.index].p!==c){F||(G=function(xe){return Math.min(B(xe),xe.p-m.bargroupwidth/2)},H=function(xe){return Math.max(J(xe),xe.p+m.bargroupwidth/2)});var le=b[a.index],fe=M.base?le.b+le.s:le.s;a[y+"0"]=a[y+"1"]=Q.c2p(le[y],!0),a[y+"LabelVal"]=fe;var he=m.extents[m.extents.round(le.p)];return a[w+"0"]=ne.c2p(D?G(le):he[0],!0),a[w+"1"]=ne.c2p(D?H(le):he[1],!0),a[w+"LabelVal"]=void 0!==le.orig_p?le.orig_p:le.p,a.labelLabel=v(ne,a[w+"LabelVal"],M[w+"hoverformat"]),a.valueLabel=v(Q,a[y+"LabelVal"],M[y+"hoverformat"]),a.baseLabel=v(Q,le.b,M[y+"hoverformat"]),a.spikeDistance=(Ee=h,Re=(xe=le).b,ke=ue(xe),(I.inbox(Re-Ee,ke-Ee,P+(ke-Ee)/(ke-Re)-1)+function(xe){return X(B(xe),J(xe),P)}(le))/2),a[w+"Spike"]=ne.c2p(le.p,!0),k(le,M,a),a.hovertemplate=M.hovertemplate,a}}function s(a,o){var l=o.mcc||a.marker.color,u=o.mlcc||a.marker.line.color,d=T(a,o);return f.opacity(l)?l:f.opacity(u)&&d?u:void 0}se.exports={hoverPoints:function(a,o,l,u,d){var g=i(a,o,l,u,d);if(g){var h=g.cd,w=h[0].trace,y=h[g.index];return g.color=s(w,y),C.getComponentMethod("errorbars","hoverInfo")(y,w,g),[g]}},hoverOnBars:i,getTraceColor:s}},60822:function(se,U,r){"use strict";se.exports={attributes:r(1486),layoutAttributes:r(43641),supplyDefaults:r(90769).supplyDefaults,crossTraceDefaults:r(90769).crossTraceDefaults,supplyLayoutDefaults:r(13957),calc:r(92290),crossTraceCalc:r(11661).crossTraceCalc,colorbar:r(4898),arraysToCalcdata:r(75341),plot:r(17295).plot,style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,hoverPoints:r(95423).hoverPoints,eventData:r(58065),selectPoints:r(81974),moduleType:"trace",name:"bar",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function(se){"use strict";se.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function(se,U,r){"use strict";var I=r(73972),C=r(89298),f=r(71828),k=r(43641);se.exports=function(T,v,c){function i(w,y){return f.coerce(T,v,k,w,y)}for(var s=!1,a=!1,o=!1,l={},u=i("barmode"),d=0;d<c.length;d++){var g=c[d];if(I.traceIs(g,"bar")&&g.visible){if(s=!0,"group"===u){var h=g.xaxis+g.yaxis;l[h]&&(o=!0),l[h]=!0}g.visible&&"histogram"===g.type&&"category"!==C.getFromId({_fullLayout:v},g["v"===g.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}s?("overlay"!==u&&i("barnorm"),i("bargap",a&&!o?0:.2),i("bargroupgap")):delete v.barmode}},17295:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(71828),k=r(63893),T=r(7901),v=r(91424),c=r(73972),i=r(89298).tickText,s=r(72597),a=s.recordMinTextSize,o=s.clearMinTextSize,l=r(16688),u=r(69383),d=r(97313),g=r(1486),h=g.text,w=g.textposition,y=r(23469).appendArrayPointValue,p=d.TEXTPAD;function _(P){return P.id}function b(P,R){return P<R?1:-1}function M(P,R,F,B){var J;return!R.uniformtext.mode&&m(F)?(B&&(J=B()),P.transition().duration(F.duration).ease(F.easing).each("end",function(){J&&J()}).each("interrupt",function(){J&&J()})):P}function m(P){return P&&P.duration>0}function D(P){return"auto"===P?0:P}function S(P,R){var F=Math.PI/180*R,B=Math.abs(Math.sin(F)),J=Math.abs(Math.cos(F));return{x:P.width*J+P.height*B,y:P.width*B+P.height*J}}function O(P,R,F,B,J,z){var $=!!z.isHorizontal,G=!!z.constrained,H=z.angle||0,X=z.anchor||"end",K="end"===X,ue="start"===X,ae=((z.leftToRight||0)+1)/2,ne=1-ae,Q=J.width,ie=J.height,le=Math.abs(R-P),fe=Math.abs(B-F),he=le>2*p&&fe>2*p?p:0;le-=2*he,fe-=2*he;var pe=D(H);"auto"!==H||Q<=le&&ie<=fe||!(Q>le||ie>fe)||(Q>fe||ie>le)&&Q<ie==le<fe||(pe+=90);var xe=S(J,pe),Ee=1;G&&(Ee=Math.min(1,le/xe.x,fe/xe.y));var Re=J.left*ne+J.right*ae,ke=(J.top+J.bottom)/2,Te=(P+p)*ne+(R-p)*ae,we=(F+B)/2,je=0,Ce=0;if(ue||K){var Ie=($?xe.x:xe.y)/2,ge=$?b(P,R):b(F,B);$?ue?(Te=P+ge*he,je=-ge*Ie):(Te=R-ge*he,je=ge*Ie):ue?(we=F+ge*he,Ce=-ge*Ie):(we=B-ge*he,Ce=ge*Ie)}return{textX:Re,textY:ke,targetX:Te,targetY:we,anchorX:je,anchorY:Ce,scale:Ee,rotate:pe}}se.exports={plot:function(P,R,F,B,J,z){var $=R.xaxis,G=R.yaxis,H=P._fullLayout,X=P._context.staticPlot;J||(J={mode:H.barmode,norm:H.barmode,gap:H.bargap,groupgap:H.bargroupgap},o("bar",H));var K=f.makeTraceGroups(B,F,"trace bars").each(function(ue){var ae=I.select(this),ne=ue[0].trace,le="bar"===ne.type||"funnel"===ne.type,fe=0;"waterfall"===ne.type&&ne.connector.visible&&"between"===ne.connector.mode&&(fe=ne.connector.line.width/2);var he="h"===ne.orientation,pe=m(J),xe=f.ensureSingle(ae,"g","points"),Ee=function x(P){if(P.ids)return _}(ne),Re=xe.selectAll("g.point").data(f.identity,Ee);Re.enter().append("g").classed("point",!0),Re.exit().remove(),Re.each(function(Te,we){var je,Ce,Ue,Ze,We,et,nt,ct,yt,ut,Ie=I.select(this),ge=(Ze=$,We=G,ct=[],ut=(et=he)?We:Ze,(nt=[])[0]=(yt=et?Ze:We).c2p((Ue=Te).s0,!0),ct[0]=ut.c2p(Ue.p0,!0),nt[1]=yt.c2p(Ue.s1,!0),ct[1]=ut.c2p(Ue.p1,!0),et?[nt,ct]:[ct,nt]),me=ge[0][0],ce=ge[0][1],Ae=ge[1][0],Ne=ge[1][1],De=0==(he?ce-me:Ne-Ae);if(De&&le&&u.getLineWidth(ne,Te)&&(De=!1),De||(De=!(C(me)&&C(ce)&&C(Ae)&&C(Ne))),Te.isBlank=De,De&&(he?ce=me:Ne=Ae),fe&&!De&&(he?(me-=b(me,ce)*fe,ce+=b(me,ce)*fe):(Ae-=b(Ae,Ne)*fe,Ne+=b(Ae,Ne)*fe)),"waterfall"===ne.type){if(!De){var qe=ne[Te.dir].marker;je=qe.line.width,Ce=qe.color}}else je=u.getLineWidth(ne,Te),Ce=Te.mc||ne.marker.color;function Ke(Ue){var Ze=I.round(je/2%1,2);return 0===J.gap&&0===J.groupgap?I.round(Math.round(Ue)-Ze,2):Ue}if(!P._context.staticPlot){var be=T.opacity(Ce)<1||je>.01?Ke:function(Ue,Ze,We){return We&&Ue===Ze?Ue:Math.abs(Ue-Ze)>=2?Ke(Ue):Ue>Ze?Math.ceil(Ue):Math.floor(Ue)};me=be(me,ce,he),ce=be(ce,me,he),Ae=be(Ae,Ne,!he),Ne=be(Ne,Ae,!he)}var Oe=M(f.ensureSingle(Ie,"path"),H,J,z);if(Oe.style("vector-effect",X?"none":"non-scaling-stroke").attr("d",isNaN((ce-me)*(Ne-Ae))||De&&P._context.staticPlot?"M0,0Z":"M"+me+","+Ae+"V"+Ne+"H"+ce+"V"+Ae+"Z").call(v.setClipUrl,R.layerClipId,P),!H.uniformtext.mode&&pe){var Le=v.makePointStyleFns(ne);v.singlePointStyle(Te,Oe,ne,Le,P)}(function(Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt,vt){var mt,Lt=Ze.xaxis,Ft=Ze.yaxis,Rt=Ue._fullLayout;function Wt(dn,on,cn){return f.ensureSingle(dn,"text").text(on).attr({class:"bartext bartext-"+mt,"text-anchor":"middle","data-notex":1}).call(v.font,cn).call(k.convertToTspans,Ue)}var on,cn,tn,Cn,Fn,En,Ht=et[0].trace,it="h"===Ht.orientation,st=(cn=nt,tn=Lt,Cn=Ft,Fn=(En=(on=et)[0].trace).texttemplate?function(rn,yn,pn,bn,In){var _n=yn[0].trace,qn=f.castOption(_n,pn,"texttemplate");if(!qn)return"";var Wn,Nn,Xn,yr,fr="histogram"===_n.type,Er="waterfall"===_n.type,gr="funnel"===_n.type,mr="h"===_n.orientation;function zr(xn){return i(yr,yr.c2l(xn),!0).text}mr?(Wn="y",Nn=In,Xn="x",yr=bn):(Wn="x",Nn=bn,Xn="y",yr=In);var an=yn[pn],Sn={};Sn.label=an.p,Sn.labelLabel=Sn[Wn+"Label"]=i(Nn,Nn.c2l(an.p),!0).text;var Ln=f.castOption(_n,an.i,"text");(0===Ln||Ln)&&(Sn.text=Ln),Sn.value=an.s,Sn.valueLabel=Sn[Xn+"Label"]=zr(an.s);var Vn={};y(Vn,_n,an.i),(fr||void 0===Vn.x)&&(Vn.x=mr?Sn.value:Sn.label),(fr||void 0===Vn.y)&&(Vn.y=mr?Sn.label:Sn.value),(fr||void 0===Vn.xLabel)&&(Vn.xLabel=mr?Sn.valueLabel:Sn.labelLabel),(fr||void 0===Vn.yLabel)&&(Vn.yLabel=mr?Sn.labelLabel:Sn.valueLabel),Er&&(Sn.delta=+an.rawS||an.s,Sn.deltaLabel=zr(Sn.delta),Sn.final=an.v,Sn.finalLabel=zr(Sn.final),Sn.initial=Sn.final-Sn.delta,Sn.initialLabel=zr(Sn.initial)),gr&&(Sn.value=an.s,Sn.valueLabel=zr(Sn.value),Sn.percentInitial=an.begR,Sn.percentInitialLabel=f.formatPercent(an.begR),Sn.percentPrevious=an.difR,Sn.percentPreviousLabel=f.formatPercent(an.difR),Sn.percentTotal=an.sumR,Sn.percenTotalLabel=f.formatPercent(an.sumR));var cr=f.castOption(_n,an.i,"customdata");return cr&&(Sn.customdata=cr),f.texttemplateString(qn,Sn,rn._d3locale,Vn,Sn,_n._meta||{})}(Rt,on,cn,tn,Cn):En.textinfo?function(rn,yn,pn,bn){var In=rn[0].trace,_n="h"===In.orientation,qn="waterfall"===In.type,Wn="funnel"===In.type;function Nn(cr){return i(_n?pn:bn,+cr,!0).text}var Xn,Er=rn[yn],gr=In.textinfo.split("+"),mr=[],zr=function(cr){return-1!==gr.indexOf(cr)};if(zr("label")&&mr.push(i(_n?bn:pn,rn[yn].p,!0).text),zr("text")&&(0===(Xn=f.castOption(In,Er.i,"text"))||Xn)&&mr.push(Xn),qn){var Jt=+Er.rawS||Er.s,an=Er.v,Sn=an-Jt;zr("initial")&&mr.push(Nn(Sn)),zr("delta")&&mr.push(Nn(Jt)),zr("final")&&mr.push(Nn(an))}if(Wn){zr("value")&&mr.push(Nn(Er.s));var Ln=0;zr("percent initial")&&Ln++,zr("percent previous")&&Ln++,zr("percent total")&&Ln++;var Vn=Ln>1;zr("percent initial")&&(Xn=f.formatPercent(Er.begR),Vn&&(Xn+=" of initial"),mr.push(Xn)),zr("percent previous")&&(Xn=f.formatPercent(Er.difR),Vn&&(Xn+=" of previous"),mr.push(Xn)),zr("percent total")&&(Xn=f.formatPercent(Er.sumR),Vn&&(Xn+=" of total"),mr.push(Xn))}return mr.join("<br>")}(on,cn,tn,Cn):u.getValue(En.text,cn),u.coerceString(h,Fn));mt=function(dn,on){var cn=u.getValue(dn.textposition,on);return u.coerceEnumerated(w,cn)}(Ht,nt);var ot=et[nt],pt=!("stack"===Dt.mode||"relative"===Dt.mode)||ot._outmost;if(st&&"none"!==mt&&(!ot.isBlank&&ct!==yt&&ut!==Ct||"auto"!==mt&&"inside"!==mt)){var xt=Rt.font,He=l.getBarColor(et[nt],Ht),Ge=l.getInsideTextFont(Ht,nt,xt,He),dt=l.getOutsideTextFont(Ht,nt,xt),ht=We.datum();it?"log"===Lt.type&&ht.s0<=0&&(ct=Lt.range[0]<Lt.range[1]?0:Lt._length):"log"===Ft.type&&ht.s0<=0&&(ut=Ft.range[0]<Ft.range[1]?Ft._length:0);var kt,St,Et,wt,Nt,_t=Math.abs(yt-ct)-2*p,Mt=Math.abs(Ct-ut)-2*p;if("outside"===mt&&(pt||ot.hasB||(mt="inside")),"auto"===mt&&(pt?(mt="inside",kt=Wt(We,st,Nt=f.ensureUniformFontSize(Ue,Ge)),Et=(St=v.bBox(kt.node())).width,wt=St.height,Et>0&&wt>0&&(Et<=_t&&wt<=Mt||Et<=Mt&&wt<=_t||(it?_t>=Et*(Mt/wt):Mt>=wt*(_t/Et)))?mt="inside":(mt="outside",kt.remove(),kt=null)):mt="inside"),!kt){var Pt=(kt=Wt(We,st,Nt=f.ensureUniformFontSize(Ue,"outside"===mt?dt:Ge))).attr("transform");if(kt.attr("transform",""),Et=(St=v.bBox(kt.node())).width,wt=St.height,kt.attr("transform",Pt),Et<=0||wt<=0)return void kt.remove()}var Zt,$t=Ht.textangle;Zt="outside"===mt?function(dn,on,cn,tn,Cn,Fn){var En,rn=!!Fn.isHorizontal,yn=!!Fn.constrained,pn=Fn.angle||0,bn=Cn.width,In=Cn.height,_n=Math.abs(on-dn),qn=Math.abs(tn-cn);En=rn?qn>2*p?p:0:_n>2*p?p:0;var Wn=1;yn&&(Wn=rn?Math.min(1,qn/In):Math.min(1,_n/bn));var Nn=D(pn),Xn=S(Cn,Nn),yr=(rn?Xn.x:Xn.y)/2,fr=(Cn.left+Cn.right)/2,Er=(Cn.top+Cn.bottom)/2,gr=(dn+on)/2,mr=(cn+tn)/2,zr=0,Jt=0,an=rn?b(on,dn):b(cn,tn);return rn?(gr=on-an*En,zr=an*yr):(mr=tn+an*En,Jt=-an*yr),{textX:fr,textY:Er,targetX:gr,targetY:mr,anchorX:zr,anchorY:Jt,scale:Wn,rotate:Nn}}(ct,yt,ut,Ct,St,{isHorizontal:it,constrained:"both"===Ht.constraintext||"outside"===Ht.constraintext,angle:$t}):O(ct,yt,ut,Ct,St,{isHorizontal:it,constrained:"both"===Ht.constraintext||"inside"===Ht.constraintext,angle:$t,anchor:Ht.insidetextanchor}),Zt.fontSize=Nt.size,a("histogram"===Ht.type?"bar":Ht.type,Zt,Rt),ot.transform=Zt;var Xt=M(kt,Rt,Dt,vt);f.setTransormAndDisplay(Xt,Zt)}else We.select("text").remove()})(P,R,Ie,ue,we,me,ce,Ae,Ne,J,z),R.layerClipId&&v.hideOutsideRangePoint(Te,Ie.select("text"),$,G,ne.xcalendar,ne.ycalendar)}),v.setClipUrl(ae,!1===ne.cliponaxis?null:R.layerClipId,P)});c.getComponentMethod("errorbars","plot")(P,K,R,J)},toMoveInsideBar:O}},81974:function(se){"use strict";function U(r,I,C,f,k){var T=I.c2p(f?r.s0:r.p0,!0),v=I.c2p(f?r.s1:r.p1,!0),c=C.c2p(f?r.p0:r.s0,!0),i=C.c2p(f?r.p1:r.s1,!0);return k?[(T+v)/2,(c+i)/2]:f?[v,(c+i)/2]:[(T+v)/2,i]}se.exports=function(r,I){var C,f=r.cd,k=r.xaxis,T=r.yaxis,v=f[0].trace,c="funnel"===v.type,i="h"===v.orientation,s=[];if(!1===I)for(C=0;C<f.length;C++)f[C].selected=0;else for(C=0;C<f.length;C++){var a=f[C],o="ct"in a?a.ct:U(a,k,T,i,c);I.contains(o,!1,C,r)?(s.push({pointNumber:C,x:k.c2d(a.x),y:T.c2d(a.y)}),a.selected=1):a.selected=0}return s}},61546:function(se,U,r){"use strict";se.exports=C;var I=r(71828).distinctVals;function C(f,k){this.traces=f,this.sepNegVal=k.sepNegVal,this.overlapNoMerge=k.overlapNoMerge;for(var T=1/0,v=k.posAxis._id.charAt(0),c=[],i=0;i<f.length;i++){for(var s=f[i],a=0;a<s.length;a++){var o=s[a],l=o.p;void 0===l&&(l=o[v]),void 0!==l&&c.push(l)}s[0]&&s[0].width1&&(T=Math.min(s[0].width1,T))}this.positions=c;var u=I(c);this.distinctPositions=u.vals,this.minDiff=1===u.vals.length&&T!==1/0?T:Math.min(u.minDiff,T);var d=(k.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}C.prototype.put=function(f,k){var T=this.getLabel(f,k),v=this.bins[T]||0;return this.bins[T]=v+k,v},C.prototype.get=function(f,k){var T=this.getLabel(f,k);return this.bins[T]||0},C.prototype.getLabel=function(f,k){return(k<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?f:Math.round(f/this.binWidth))}},16688:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(91424),k=r(71828),T=r(73972),v=r(72597).resizeText,c=r(1486),i=c.textfont,s=c.insidetextfont,a=c.outsidetextfont,o=r(69383);function l(_,x,b){f.pointStyle(_.selectAll("path"),x,b),u(_,x,b)}function u(_,x,b){_.selectAll("text").each(function(M){var m=I.select(this),D=k.ensureUniformFontSize(b,d(m,M,x,b));f.font(m,D)})}function d(_,x,b,M){var m=M._fullLayout.font,D=b.textfont;if(_.classed("bartext-inside")){var S=p(x,b);D=h(b,x.i,m,S)}else _.classed("bartext-outside")&&(D=w(b,x.i,m));return D}function g(_,x,b){return y(i,_.textfont,x,b)}function h(_,x,b,M){var m=g(_,x,b);return(void 0===_._input.textfont||void 0===_._input.textfont.color||Array.isArray(_.textfont.color)&&void 0===_.textfont.color[x])&&(m={color:C.contrast(M),family:m.family,size:m.size}),y(s,_.insidetextfont,x,m)}function w(_,x,b){var M=g(_,x,b);return y(a,_.outsidetextfont,x,M)}function y(_,x,b,M){var m=o.getValue((x=x||{}).family,b),D=o.getValue(x.size,b),S=o.getValue(x.color,b);return{family:o.coerceString(_.family,m,M.family),size:o.coerceNumber(_.size,D,M.size),color:o.coerceColor(_.color,S,M.color)}}function p(_,x){return"waterfall"===x.type?x[_.dir].marker.color:_.mcc||_.mc||x.marker.color}se.exports={style:function(_){var x=I.select(_).selectAll("g.barlayer").selectAll("g.trace");v(_,x,"bar");var b=x.size(),M=_._fullLayout;x.style("opacity",function(m){return m[0].trace.opacity}).each(function(m){("stack"===M.barmode&&b>1||0===M.bargap&&0===M.bargroupgap&&!m[0].trace.marker.line.width)&&I.select(this).attr("shape-rendering","crispEdges")}),x.selectAll("g.points").each(function(m){l(I.select(this),m[0].trace,_)}),T.getComponentMethod("errorbars","style")(x)},styleTextPoints:u,styleOnSelect:function(_,x,b){var m,D,S,O,P,R,M=x[0].trace;M.selectedpoints?(D=M,S=_,f.selectedPointStyle((m=b).selectAll("path"),D),O=m.selectAll("text"),P=D,R=S,O.each(function(F){var B,J=I.select(this);if(F.selected){B=k.ensureUniformFontSize(R,d(J,F,P,R));var z=P.selected.textfont&&P.selected.textfont.color;z&&(B.color=z),f.font(J,B)}else f.selectedTextStyle(J,P)})):(l(b,M,_),T.getComponentMethod("errorbars","style")(b))},getInsideTextFont:h,getOutsideTextFont:w,getBarColor:p,resizeText:v}},98340:function(se,U,r){"use strict";var I=r(7901),C=r(52075).hasColorscale,f=r(1586),k=r(71828).coercePattern;se.exports=function(T,v,c,i,s){var a=c("marker.color",i),o=C(T,"marker");o&&f(T,v,s,c,{prefix:"marker.",cLetter:"c"}),c("marker.line.color",I.defaultLine),C(T,"marker.line")&&f(T,v,s,c,{prefix:"marker.line.",cLetter:"c"}),c("marker.line.width"),c("marker.opacity"),k(c,"marker.pattern",a,o),c("selected.marker.color"),c("unselected.marker.color")}},72597:function(se,U,r){"use strict";var I=r(39898),C=r(71828);function f(k){return"_"+k+"Text_minsize"}se.exports={recordMinTextSize:function(k,T,v){if(v.uniformtext.mode){var c=f(k),i=v.uniformtext.minsize,s=T.scale*T.fontSize;T.hide=s<i,v[c]=v[c]||1/0,T.hide||(v[c]=Math.min(v[c],Math.max(s,i)))}},clearMinTextSize:function(k,T){T[f(k)]=void 0},resizeText:function(k,T,v){var c=k._fullLayout,i=c["_"+v+"Text_minsize"];if(i){var s,a="hide"===c.uniformtext.mode;switch(v){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":case"icicle":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}T.selectAll(s).each(function(o){var l=o.transform;if(l){l.scale=a&&l.hide?0:i/l.fontSize;var u=I.select(this).select("text");C.setTransormAndDisplay(u,l)}})}}}},55023:function(se,U,r){"use strict";var I=r(5386).fF,C=r(1426).extendFlat,f=r(81245),k=r(1486);se.exports={r:f.r,theta:f.theta,r0:f.r0,dr:f.dr,theta0:f.theta0,dtheta:f.dtheta,thetaunit:f.thetaunit,base:C({},k.base,{}),offset:C({},k.offset,{}),width:C({},k.width,{}),text:C({},k.text,{}),hovertext:C({},k.hovertext,{}),marker:k.marker,hoverinfo:f.hoverinfo,hovertemplate:I(),selected:k.selected,unselected:k.unselected}},74692:function(se,U,r){"use strict";var I=r(52075).hasColorscale,C=r(78803),f=r(75341),k=r(11661).setGroupPositions,T=r(66279),v=r(73972).traceIs,c=r(71828).extendFlat;se.exports={calc:function(i,s){for(var a=i._fullLayout,o=s.subplot,u=a[o].angularaxis,d=a[o].radialaxis.makeCalcdata(s,"r"),g=u.makeCalcdata(s,"theta"),h=s._length,w=new Array(h),y=d,p=g,_=0;_<h;_++)w[_]={p:p[_],s:y[_]};function x(b){var M=s[b];void 0!==M&&(s["_"+b]=Array.isArray(M)?u.makeCalcdata(s,b):u.d2c(M,s.thetaunit))}return"linear"===u.type&&(x("width"),x("offset")),I(s,"marker")&&C(i,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),I(s,"marker.line")&&C(i,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),f(w,s),T(w,s),w},crossTraceCalc:function(i,s,a){for(var o=i.calcdata,l=[],u=0;u<o.length;u++){var d=o[u],g=d[0].trace;!0===g.visible&&v(g,"bar")&&g.subplot===a&&l.push(d)}var h=c({},s.radialaxis,{_id:"x"});k(i,s.angularaxis,h,l,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}}},6135:function(se,U,r){"use strict";var I=r(71828),C=r(22184).handleRThetaDefaults,f=r(98340),k=r(55023);se.exports=function(T,v,c,i){function s(a,o){return I.coerce(T,v,k,a,o)}C(T,v,i,s)?(s("thetaunit"),s("base"),s("offset"),s("width"),s("text"),s("hovertext"),s("hovertemplate"),f(T,v,s,c,i),I.coerceSelectionMarkerOpacity(v,s)):v.visible=!1}},27379:function(se,U,r){"use strict";var I=r(30211),C=r(71828),f=r(95423).getTraceColor,k=C.fillText,T=r(59150).makeHoverPointText,v=r(10869).isPtInsidePolygon;se.exports=function(c,i,s){var a=c.cd,o=a[0].trace,l=c.subplot,u=l.radialAxis,g=l.vangles,h=g?v:C.isPtInsideSector,w=c.maxHoverDistance,y=l.angularAxis._period||2*Math.PI,p=Math.abs(u.g2p(Math.sqrt(i*i+s*s))),_=Math.atan2(s,i);if(u.range[0]>u.range[1]&&(_+=Math.PI),I.getClosest(a,function(M){return h(p,_,[M.rp0,M.rp1],[M.thetag0,M.thetag1],g)?w+Math.min(1,Math.abs(M.thetag1-M.thetag0)/y)-1+(M.rp1-p)/(M.rp1-M.rp0)-1:1/0},c),!1!==c.index){var x=a[c.index];c.x0=c.x1=x.ct[0],c.y0=c.y1=x.ct[1];var b=C.extendFlat({},x,{r:x.s,theta:x.p});return k(x,o,c),T(b,o,l,c),c.hovertemplate=o.hovertemplate,c.color=f(o,x),c.xLabelVal=c.yLabelVal=void 0,x.s<0&&(c.idealAlign="left"),[c]}}},23381:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"barpolar",basePlotModule:r(23580),categories:["polar","bar","showLegend"],attributes:r(55023),layoutAttributes:r(40151),supplyDefaults:r(6135),supplyLayoutDefaults:r(19860),calc:r(74692).calc,crossTraceCalc:r(74692).crossTraceCalc,plot:r(60173),colorbar:r(4898),formatLabels:r(98608),style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,hoverPoints:r(27379),selectPoints:r(81974),meta:{}}},40151:function(se){"use strict";se.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function(se,U,r){"use strict";var I=r(71828),C=r(40151);se.exports=function(f,k,T){var v,c={};function i(o,l){return I.coerce(f[v]||{},k[v],C,o,l)}for(var s=0;s<T.length;s++){var a=T[s];"barpolar"===a.type&&!0===a.visible&&(c[v=a.subplot]||(i("barmode"),i("bargap"),c[v]=1))}}},60173:function(se,U,r){"use strict";var I=r(39898),C=r(92770),f=r(71828),k=r(91424),T=r(10869);se.exports=function(v,c,i){var h,w,y,s=v._context.staticPlot,a=c.xaxis,o=c.yaxis,l=c.radialAxis,u=c.angularAxis,d=(w=(h=c).cxx,y=h.cyy,h.vangles?function(p,_,x,b){var M,m;f.angleDelta(x,b)>0?(M=x,m=b):(M=b,m=x);var D=[T.findEnclosingVertexAngles(M,h.vangles)[0],(M+m)/2,T.findEnclosingVertexAngles(m,h.vangles)[1]];return T.pathPolygonAnnulus(p,_,M,m,D,w,y)}:function(p,_,x,b){return f.pathAnnulus(p,_,x,b,w,y)}),g=c.layers.frontplot.select("g.barlayer");f.makeTraceGroups(g,i,"trace bars").each(function(){var h=I.select(this),w=f.ensureSingle(h,"g","points").selectAll("g.point").data(f.identity);w.enter().append("g").style("vector-effect",s?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),w.exit().remove(),w.each(function(y){var p,_=I.select(this),x=y.rp0=l.c2p(y.s0),b=y.rp1=l.c2p(y.s1),M=y.thetag0=u.c2g(y.p0),m=y.thetag1=u.c2g(y.p1);if(C(x)&&C(b)&&C(M)&&C(m)&&x!==b&&M!==m){var D=l.c2g(y.s1),S=(M+m)/2;y.ct=[a.c2p(D*Math.cos(S)),o.c2p(D*Math.sin(S))],p=d(x,b,M,m)}else p="M0,0Z";f.ensureSingle(_,"path").attr("d",p)}),k.setClipUrl(h,c._hasClipOnAxisFalse?c.clipIds.forTraces:null,v)})}},53522:function(se,U,r){"use strict";var I=r(82196),C=r(1486),f=r(22399),k=r(12663).axisHoverFormat,T=r(5386).fF,v=r(1426).extendFlat,c=I.marker,i=c.line;se.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:v({},c.symbol,{arrayOk:!1,editType:"plot"}),opacity:v({},c.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:v({},c.angle,{arrayOk:!1,editType:"calc"}),size:v({},c.size,{arrayOk:!1,editType:"calc"}),color:v({},c.color,{arrayOk:!1,editType:"style"}),line:{color:v({},i.color,{arrayOk:!1,dflt:f.defaultLine,editType:"style"}),width:v({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:I.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup,selected:{marker:I.selected.marker,editType:"style"},unselected:{marker:I.unselected.marker,editType:"style"},text:v({},I.text,{}),hovertext:v({},I.hovertext,{}),hovertemplate:T({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function(se,U,r){"use strict";var I=r(92770),C=r(89298),f=r(42973),k=r(71828),T=r(50606).BADNUM,v=k._;se.exports=function(h,w){var y,p,_,x,b,M,m,D=h._fullLayout,S=C.getFromId(h,w.xaxis||"x"),O=C.getFromId(h,w.yaxis||"y"),P=[],R="violin"===w.type?"_numViolins":"_numBoxes";"h"===w.orientation?(_=S,x="x",b=O,M="y",m=!!w.yperiodalignment):(_=O,x="y",b=S,M="x",m=!!w.xperiodalignment);var F,B,J,z,$,G,H=function(Ze,We,et,nt){var ct,yt=We+"0"in Ze;if(We in Ze||yt&&"d"+We in Ze){var ut=et.makeCalcdata(Ze,We);return[f(Ze,et,We,ut).vals,ut]}ct=yt?Ze[We+"0"]:"name"in Ze&&("category"===et.type||I(Ze.name)&&-1!==["linear","log"].indexOf(et.type)||k.isDateTime(Ze.name)&&"date"===et.type)?Ze.name:nt;for(var Ct="multicategory"===et.type?et.r2c_just_indices(ct):et.d2c(ct,0,Ze[We+"calendar"]),Dt=Ze._length,vt=new Array(Dt),mt=0;mt<Dt;mt++)vt[mt]=Ct;return[vt]}(w,M,b,D[R]),X=H[0],K=H[1],ue=k.distinctVals(X,b),ae=ue.vals,ne=ue.minDiff/2,Q="all"===(w.boxpoints||w.points)?k.identity:function(Ze){return Ze.v<F.lf||Ze.v>F.uf};if(w._hasPreCompStats){var ie=w[x],le=function(Ze){return _.d2c((w[Ze]||[])[y])},fe=1/0,he=-1/0;for(y=0;y<w._length;y++){var pe=X[y];if(I(pe)){if((F={}).pos=F[M]=pe,m&&K&&(F.orig_p=K[y]),F.q1=le("q1"),F.med=le("median"),F.q3=le("q3"),B=[],ie&&k.isArrayOrTypedArray(ie[y]))for(p=0;p<ie[y].length;p++)(G=_.d2c(ie[y][p]))!==T&&(i($={v:G,i:[y,p]},w,[y,p]),B.push($));if(F.pts=B.sort(s),z=(J=F[x]=B.map(a)).length,F.med!==T&&F.q1!==T&&F.q3!==T&&F.med>=F.q1&&F.q3>=F.med){var xe=le("lowerfence");F.lf=xe!==T&&xe<=F.q1?xe:o(F,J,z);var Ee=le("upperfence");F.uf=Ee!==T&&Ee>=F.q3?Ee:l(F,J,z);var Re=le("mean");F.mean=Re!==T?Re:z?k.mean(J,z):(F.q1+F.q3)/2;var ke=le("sd");F.sd=Re!==T&&ke>=0?ke:z?k.stdev(J,z,F.mean):F.q3-F.q1,F.lo=u(F),F.uo=d(F);var Te=le("notchspan");Te=Te!==T&&Te>0?Te:g(F,z),F.ln=F.med-Te,F.un=F.med+Te;var we=F.lf,je=F.uf;w.boxpoints&&J.length&&(we=Math.min(we,J[0]),je=Math.max(je,J[z-1])),w.notched&&(we=Math.min(we,F.ln),je=Math.max(je,F.un)),F.min=we,F.max=je}else{var Ce;k.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+F.q1,"median = "+F.med,"q3 = "+F.q3].join("\n")),F.med=Ce=F.med!==T?F.med:F.q1!==T?F.q3!==T?(F.q1+F.q3)/2:F.q1:F.q3!==T?F.q3:0,F.q1=F.q3=Ce,F.lf=F.uf=Ce,F.mean=F.sd=Ce,F.ln=F.un=Ce,F.min=F.max=Ce}fe=Math.min(fe,F.min),he=Math.max(he,F.max),F.pts2=B.filter(Q),P.push(F)}}w._extremes[_._id]=C.findExtremes(_,[fe,he],{padded:!0})}else{var Ie=_.makeCalcdata(w,x),ge=function(Ze,We){for(var et=Ze.length,nt=new Array(et+1),ct=0;ct<et;ct++)nt[ct]=Ze[ct]-We;return nt[et]=Ze[et-1]+We,nt}(ae,ne),me=ae.length,ce=function(Ze){for(var We=new Array(Ze),et=0;et<Ze;et++)We[et]=[];return We}(me);for(y=0;y<w._length;y++)if(I(G=Ie[y])){var Ae=k.findBin(X[y],ge);Ae>=0&&Ae<me&&(i($={v:G,i:y},w,y),ce[Ae].push($))}var Ne=1/0,De=-1/0,qe=w.quartilemethod,Ke="exclusive"===qe,be="inclusive"===qe;for(y=0;y<me;y++)if(ce[y].length>0){var Oe,Le;(F={}).pos=F[M]=ae[y],B=F.pts=ce[y].sort(s),z=(J=F[x]=B.map(a)).length,F.min=J[0],F.max=J[z-1],F.mean=k.mean(J,z),F.sd=k.stdev(J,z,F.mean),F.med=k.interp(J,.5),z%2&&(Ke||be)?(Ke?(Oe=J.slice(0,z/2),Le=J.slice(z/2+1)):be&&(Oe=J.slice(0,z/2+1),Le=J.slice(z/2)),F.q1=k.interp(Oe,.5),F.q3=k.interp(Le,.5)):(F.q1=k.interp(J,.25),F.q3=k.interp(J,.75)),F.lf=o(F,J,z),F.uf=l(F,J,z),F.lo=u(F),F.uo=d(F);var Ue=g(F,z);F.ln=F.med-Ue,F.un=F.med+Ue,Ne=Math.min(Ne,F.ln),De=Math.max(De,F.un),F.pts2=B.filter(Q),P.push(F)}w._extremes[_._id]=C.findExtremes(_,w.notched?Ie.concat([Ne,De]):Ie,{padded:!0})}return function(Ze,We){if(k.isArrayOrTypedArray(We.selectedpoints))for(var et=0;et<Ze.length;et++){for(var nt=Ze[et].pts||[],ct={},yt=0;yt<nt.length;yt++)ct[nt[yt].i]=yt;k.tagSelected(nt,We,ct)}}(P,w),P.length>0?(P[0].t={num:D[R],dPos:ne,posLetter:M,valLetter:x,labels:{med:v(h,"median:"),min:v(h,"min:"),q1:v(h,"q1:"),q3:v(h,"q3:"),max:v(h,"max:"),mean:v(h,"sd"===w.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:v(h,"lower fence:"),uf:v(h,"upper fence:")}},D[R]++,P):[{t:{empty:!0}}]};var c={text:"tx",hovertext:"htx"};function i(h,w,y){for(var p in c)k.isArrayOrTypedArray(w[p])&&(Array.isArray(y)?k.isArrayOrTypedArray(w[p][y[0]])&&(h[c[p]]=w[p][y[0]][y[1]]):h[c[p]]=w[p][y])}function s(h,w){return h.v-w.v}function a(h){return h.v}function o(h,w,y){return 0===y?h.q1:Math.min(h.q1,w[Math.min(k.findBin(2.5*h.q1-1.5*h.q3,w,!0)+1,y-1)])}function l(h,w,y){return 0===y?h.q3:Math.max(h.q3,w[Math.max(k.findBin(2.5*h.q3-1.5*h.q1,w),0)])}function u(h){return 4*h.q1-3*h.q3}function d(h){return 4*h.q3-3*h.q1}function g(h,w){return 0===w?0:1.57*(h.q3-h.q1)/Math.sqrt(w)}},37188:function(se,U,r){"use strict";var I=r(89298),C=r(71828),f=r(99082).getAxisGroup,k=["v","h"];function T(v,c,i,s){var a,o,l,u=c.calcdata,d=c._fullLayout,g=s._id,h=g.charAt(0),w=[],y=0;for(a=0;a<i.length;a++)for(l=u[i[a]],o=0;o<l.length;o++)w.push(s.c2l(l[o].pos,!0)),y+=(l[o].pts2||[]).length;if(w.length){var p=C.distinctVals(w);"category"!==s.type&&"multicategory"!==s.type||(p.minDiff=1);var _=p.minDiff/2;I.minDtick(s,p.minDiff,p.vals[0],!0);var x=d["violin"===v?"_numViolins":"_numBoxes"],b="group"===d[v+"mode"]&&x>1,M=1-d[v+"gap"],m=1-d[v+"groupgap"];for(a=0;a<i.length;a++){var D,S,O,P,R,F,B=(l=u[i[a]])[0].trace,J=l[0].t,z=B.width,$=B.side;if(z)D=S=P=z/2,O=0;else if(D=_,b){var G=f(d,s._id)+B.orientation,X=Object.keys(((d._alignmentOpts[G]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,K=X||x;S=D*M*m/K,O=2*D*(((X?B._offsetIndex:J.num)+.5)/K-.5)*M,P=D*M/K}else S=D*M*m,O=0,P=D;J.dPos=D,J.bPos=O,J.bdPos=S,J.wHover=P;var ue,ae,ne,Q,ie,le,fe=O+S,he=!!z;if("positive"===$?(R=D*(z?1:.5),ue=fe,F=ue=O):"negative"===$?(R=ue=O,F=D*(z?1:.5),ae=fe):(R=F=D,ue=ae=fe),(B.boxpoints||B.points)&&y>0){var pe=B.pointpos,xe=B.jitter,Ee=B.marker.size/2,Re=0;pe+xe>=0&&((Re=fe*(pe+xe))>R?(he=!0,ie=Ee,ne=Re):Re>ue&&(ie=Ee,ne=R)),Re<=R&&(ne=R);var ke=0;pe-xe<=0&&((ke=-fe*(pe-xe))>F?(he=!0,le=Ee,Q=ke):ke>ae&&(le=Ee,Q=F)),ke<=F&&(Q=F)}else ne=R,Q=F;var Te=new Array(l.length);for(o=0;o<l.length;o++)Te[o]=l[o].pos;B._extremes[g]=I.findExtremes(s,Te,{padded:he,vpadminus:Q,vpadplus:ne,vpadLinearized:!0,ppadminus:{x:le,y:ie}[h],ppadplus:{x:ie,y:le}[h]})}}}se.exports={crossTraceCalc:function(v,c){for(var i=v.calcdata,s=c.xaxis,a=c.yaxis,o=0;o<k.length;o++){for(var l=k[o],u="h"===l?a:s,d=[],g=0;g<i.length;g++){var h=i[g],y=h[0].trace;!0!==y.visible||"box"!==y.type&&"candlestick"!==y.type||h[0].t.empty||(y.orientation||"v")!==l||y.xaxis!==s._id||y.yaxis!==a._id||d.push(g)}T("box",v,d,u)}},setPositionOffset:T}},36411:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(7901),k=r(73927),T=r(26125),v=r(4322),c=r(53522);function i(a,o,l,u){function d($){var G=0;return $&&$.length&&(G+=1,I.isArrayOrTypedArray($[0])&&$[0].length&&(G+=1)),G}function g($){return I.validate(a[$],c[$])}var h,w=l("y"),y=l("x");if("box"===o.type){var p=l("q1"),_=l("median"),x=l("q3");o._hasPreCompStats=p&&p.length&&_&&_.length&&x&&x.length,h=Math.min(I.minRowLength(p),I.minRowLength(_),I.minRowLength(x))}var b,M,m=d(w),D=d(y),S=m&&I.minRowLength(w),O=D&&I.minRowLength(y),P=u.calendar,R={autotypenumbers:u.autotypenumbers};if(o._hasPreCompStats)switch(String(D)+String(m)){case"00":var F=g("x0")||g("dx");b=!g("y0")&&!g("dy")||F?"v":"h",M=h;break;case"10":b="v",M=Math.min(h,O);break;case"20":b="h",M=Math.min(h,y.length);break;case"01":b="h",M=Math.min(h,S);break;case"02":b="v",M=Math.min(h,w.length);break;case"12":b="v",M=Math.min(h,O,w.length);break;case"21":b="h",M=Math.min(h,y.length,S);break;case"11":M=0;break;case"22":var B,J=!1;for(B=0;B<y.length;B++)if("category"===v(y[B],P,R)){J=!0;break}if(J)b="v",M=Math.min(h,O,w.length);else{for(B=0;B<w.length;B++)if("category"===v(w[B],P,R)){J=!0;break}J?(b="h",M=Math.min(h,y.length,S)):(b="v",M=Math.min(h,O,w.length))}}else m>0?(b="v",M=D>0?Math.min(O,S):Math.min(S)):D>0?(b="h",M=Math.min(O)):M=0;if(M){o._length=M;var z=l("orientation",b);o._hasPreCompStats?"v"===z&&0===D?(l("x0",0),l("dx",1)):"h"===z&&0===m&&(l("y0",0),l("dy",1)):"v"===z&&0===D?l("x0"):"h"===z&&0===m&&l("y0"),C.getComponentMethod("calendars","handleTraceDefaults")(a,o,["x","y"],u)}else o.visible=!1}function s(a,o,l,u){var d=u.prefix,g=I.coerce2(a,o,c,"marker.outliercolor"),h=l("marker.line.outliercolor"),w="outliers";o._hasPreCompStats?w="all":(g||h)&&(w="suspectedoutliers");var y=l(d+"points",w);y?(l("jitter","all"===y?.3:0),l("pointpos","all"===y?-1.5:0),l("marker.symbol"),l("marker.opacity"),l("marker.size"),l("marker.angle"),l("marker.color",o.line.color),l("marker.line.color"),l("marker.line.width"),"suspectedoutliers"===y&&(l("marker.line.outliercolor",o.marker.color),l("marker.line.outlierwidth")),l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size"),l("text"),l("hovertext")):delete o.marker;var p=l("hoveron");"all"!==p&&-1===p.indexOf("points")||l("hovertemplate"),I.coerceSelectionMarkerOpacity(o,l)}se.exports={supplyDefaults:function(a,o,l,u){function d(x,b){return I.coerce(a,o,c,x,b)}if(i(a,o,d,u),!1!==o.visible){k(a,o,u,d),d("xhoverformat"),d("yhoverformat");var g=o._hasPreCompStats;g&&(d("lowerfence"),d("upperfence")),d("line.color",(a.marker||{}).color||l),d("line.width"),d("fillcolor",f.addOpacity(o.line.color,.5));var h=!1;if(g){var w=d("mean"),y=d("sd");w&&w.length&&(h=!0,y&&y.length&&(h="sd"))}d("boxmean",h),d("whiskerwidth"),d("width"),d("quartilemethod");var p=!1;if(g){var _=d("notchspan");_&&_.length&&(p=!0)}else I.validate(a.notchwidth,c.notchwidth)&&(p=!0);d("notched",p)&&d("notchwidth"),s(a,o,d,{prefix:"box"})}},crossTraceDefaults:function(a,o){var u;function d(w){return I.coerce(u._input,u,c,w)}for(var g=0;g<a.length;g++){var h=(u=a[g]).type;"box"!==h&&"violin"!==h||"group"===o[h+"mode"]&&T(u._input,u,o,d)}},handleSampleDefaults:i,handlePointsDefaults:s}},74907:function(se){"use strict";se.exports=function(U,r){return r.hoverOnBox&&(U.hoverOnBox=r.hoverOnBox),"xVal"in r&&(U.x=r.xVal),"yVal"in r&&(U.y=r.yVal),r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),U}},41868:function(se,U,r){"use strict";var I=r(89298),C=r(71828),f=r(30211),k=r(7901),T=C.fillText;function v(i,s,a,o){var l,u,d,g,h,w,y,p,_,x,b,M,m,D,S=i.cd,O=i.xa,P=i.ya,R=S[0].trace,F=S[0].t,B="violin"===R.type,J=F.bdPos,z=F.wHover,$=function(Ce){return d.c2l(Ce.pos)+F.bPos-d.c2l(w)};B&&"both"!==R.side?("positive"===R.side&&(_=function(Ce){var Ie=$(Ce);return f.inbox(Ie,Ie+z,x)},M=J,m=0),"negative"===R.side&&(_=function(Ce){var Ie=$(Ce);return f.inbox(Ie-z,Ie,x)},M=0,m=J)):(_=function(Ce){var Ie=$(Ce);return f.inbox(Ie-z,Ie+z,x)},M=m=J),D=B?function(Ce){return f.inbox(Ce.span[0]-h,Ce.span[1]-h,x)}:function(Ce){return f.inbox(Ce.min-h,Ce.max-h,x)},"h"===R.orientation?(h=s,w=a,y=D,p=_,l="y",d=P,u="x",g=O):(h=a,w=s,y=_,p=D,l="x",d=O,u="y",g=P);var G=Math.min(1,J/Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0])));function H(Ce){return(y(Ce)+p(Ce))/2}x=i.maxHoverDistance-G,b=i.maxSpikeDistance-G;var X=f.getDistanceFunction(o,y,p,H);if(f.getClosest(S,X,i),!1===i.index)return[];var K=S[i.index],ue=R.line.color,ae=(R.marker||{}).color;i.color=k.opacity(ue)&&R.line.width?ue:k.opacity(ae)&&R.boxpoints?ae:R.fillcolor,i[l+"0"]=d.c2p(K.pos+F.bPos-m,!0),i[l+"1"]=d.c2p(K.pos+F.bPos+M,!0),i[l+"LabelVal"]=void 0!==K.orig_p?K.orig_p:K.pos;var ne=l+"Spike";i.spikeDistance=H(K)*b/x,i[ne]=d.c2p(K.pos,!0);var Q=R.boxmean||(R.meanline||{}).visible,ie=R.boxpoints||R.points,le=ie&&Q?["max","uf","q3","med","mean","q1","lf","min"]:ie&&!Q?["max","uf","q3","med","q1","lf","min"]:!ie&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"];R.orientation===(g.range[1]<g.range[0]?"v":"h")&&le.reverse();for(var he=i.spikeDistance,pe=i[ne],xe=[],Ee=0;Ee<le.length;Ee++){var Re=le[Ee];if(Re in K){var ke=K[Re],Te=g.c2p(ke,!0),we=C.extendFlat({},i);we.attr=Re,we[u+"0"]=we[u+"1"]=Te,we[u+"LabelVal"]=ke,we[u+"Label"]=(F.labels?F.labels[Re]+" ":"")+I.hoverLabelText(g,ke,R[u+"hoverformat"]),we.hoverOnBox=!0,"mean"===Re&&"sd"in K&&"sd"===R.boxmean&&(we[u+"err"]=K.sd),we.hovertemplate=!1,xe.push(we)}}i.name="",i.spikeDistance=void 0,i[ne]=void 0;for(var je=0;je<xe.length;je++)"med"!==xe[je].attr?(xe[je].name="",xe[je].spikeDistance=void 0,xe[je][ne]=void 0):(xe[je].spikeDistance=he,xe[je][ne]=pe);return xe}function c(i,s,a){for(var o,l,u,d=i.cd,g=i.xa,h=i.ya,w=d[0].trace,y=g.c2p(s),p=h.c2p(a),_=f.quadrature(function(B){var J=Math.max(3,B.mrc||0);return Math.max(Math.abs(g.c2p(B.x)-y)-J,1-3/J)},function(B){var J=Math.max(3,B.mrc||0);return Math.max(Math.abs(h.c2p(B.y)-p)-J,1-3/J)}),x=!1,b=0;b<d.length;b++){l=d[b];for(var M=0;M<(l.pts||[]).length;M++){var m=_(u=l.pts[M]);m<=i.distance&&(i.distance=m,x=[b,M])}}if(!x)return!1;u=(l=d[x[0]]).pts[x[1]];var D=g.c2p(u.x,!0),S=h.c2p(u.y,!0),O=u.mrc||1;o=C.extendFlat({},i,{index:u.i,color:(w.marker||{}).color,name:w.name,x0:D-O,x1:D+O,y0:S-O,y1:S+O,spikeDistance:i.distance,hovertemplate:w.hovertemplate});var P,R=l.orig_p,F=void 0!==R?R:l.pos;return"h"===w.orientation?(P=h,o.xLabelVal=u.x,o.yLabelVal=F):(P=g,o.xLabelVal=F,o.yLabelVal=u.y),o[P._id.charAt(0)+"Spike"]=P.c2p(l.pos,!0),T(u,w,o),o}se.exports={hoverPoints:function(i,s,a,o){var l,u=i.cd[0].trace.hoveron,d=[];return-1!==u.indexOf("boxes")&&(d=d.concat(v(i,s,a,o))),-1!==u.indexOf("points")&&(l=c(i,s,a)),"closest"===o?l?[l]:d:(l&&d.push(l),d)},hoverOnBoxes:v,hoverOnPoints:c}},83832:function(se,U,r){"use strict";se.exports={attributes:r(53522),layoutAttributes:r(40094),supplyDefaults:r(36411).supplyDefaults,crossTraceDefaults:r(36411).crossTraceDefaults,supplyLayoutDefaults:r(4199).supplyLayoutDefaults,calc:r(48518),crossTraceCalc:r(37188).crossTraceCalc,plot:r(86047).plot,style:r(58063).style,styleOnSelect:r(58063).styleOnSelect,hoverPoints:r(41868).hoverPoints,eventData:r(74907),selectPoints:r(24626),moduleType:"trace",name:"box",basePlotModule:r(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function(se){"use strict";se.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(40094);function k(T,v,c,i,s){for(var a=s+"Layout",o=!1,l=0;l<c.length;l++)if(I.traceIs(c[l],a)){o=!0;break}o&&(i(s+"mode"),i(s+"gap"),i(s+"groupgap"))}se.exports={supplyLayoutDefaults:function(T,v,c){k(0,0,c,function(i,s){return C.coerce(T,v,f,i,s)},"box")},_supply:k}},86047:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424);function k(c,i,s,a,o){var l,u,d="h"===s.orientation,g=i.val,h=i.pos,w=!!h.rangebreaks,y=a.bPos,p=a.wdPos||0,_=a.bPosPxOffset||0,x=s.whiskerwidth||0,b=s.notched||!1,M=b?1-2*s.notchwidth:1;Array.isArray(a.bdPos)?(l=a.bdPos[0],u=a.bdPos[1]):(l=a.bdPos,u=a.bdPos);var m=c.selectAll("path.box").data("violin"!==s.type||s.box.visible?C.identity:[]);m.enter().append("path").style("vector-effect",o?"none":"non-scaling-stroke").attr("class","box"),m.exit().remove(),m.each(function(D){if(D.empty)return"M0,0Z";var S=h.c2l(D.pos+y,!0),O=h.l2p(S-l)+_,P=h.l2p(S+u)+_,R=w?(O+P)/2:h.l2p(S)+_,F=s.whiskerwidth,B=w?O*F+(1-F)*R:h.l2p(S-p)+_,J=w?P*F+(1-F)*R:h.l2p(S+p)+_,z=h.l2p(S-l*M)+_,$=h.l2p(S+u*M)+_,G=g.c2p(D.q1,!0),H=g.c2p(D.q3,!0),X=C.constrain(g.c2p(D.med,!0),Math.min(G,H)+1,Math.max(G,H)-1),K=void 0===D.lf||!1===s.boxpoints,ue=g.c2p(K?D.min:D.lf,!0),ae=g.c2p(K?D.max:D.uf,!0),ne=g.c2p(D.ln,!0),Q=g.c2p(D.un,!0);d?I.select(this).attr("d","M"+X+","+z+"V"+$+"M"+G+","+O+"V"+P+(b?"H"+ne+"L"+X+","+$+"L"+Q+","+P:"")+"H"+H+"V"+O+(b?"H"+Q+"L"+X+","+z+"L"+ne+","+O:"")+"ZM"+G+","+R+"H"+ue+"M"+H+","+R+"H"+ae+(0===x?"":"M"+ue+","+B+"V"+J+"M"+ae+","+B+"V"+J)):I.select(this).attr("d","M"+z+","+X+"H"+$+"M"+O+","+G+"H"+P+(b?"V"+ne+"L"+$+","+X+"L"+P+","+Q:"")+"V"+H+"H"+O+(b?"V"+Q+"L"+z+","+X+"L"+O+","+ne:"")+"ZM"+R+","+G+"V"+ue+"M"+R+","+H+"V"+ae+(0===x?"":"M"+B+","+ue+"H"+J+"M"+B+","+ae+"H"+J))})}function T(c,i,s,a){var o=i.x,l=i.y,u=a.bdPos,d=a.bPos,g=s.boxpoints||s.points;C.seedPseudoRandom();var h=c.selectAll("g.points").data(g?function(y){return y.forEach(function(p){p.t=a,p.trace=s}),y}:[]);h.enter().append("g").attr("class","points"),h.exit().remove();var w=h.selectAll("path").data(function(y){var p,_,x=y.pts2,b=Math.max((y.max-y.min)/10,y.q3-y.q1),M=1e-9*b,m=.01*b,D=[],S=0;if(s.jitter){if(0===b)for(S=1,D=new Array(x.length),p=0;p<x.length;p++)D[p]=1;else for(p=0;p<x.length;p++){var O=Math.max(0,p-5),P=x[O].v,R=Math.min(x.length-1,p+5),F=x[R].v;"all"!==g&&(x[p].v<y.lf?F=Math.min(F,y.lf):P=Math.max(P,y.uf));var B=Math.sqrt(m*(R-O)/(F-P+M))||0;B=C.constrain(Math.abs(B),0,1),D.push(B),S=Math.max(B,S)}_=2*s.jitter/(S||1)}for(p=0;p<x.length;p++){var J=x[p],z=J.v,$=s.jitter?_*D[p]*(C.pseudoRandom()-.5):0,G=y.pos+d+u*(s.pointpos+$);"h"===s.orientation?(J.y=G,J.x=z):(J.x=G,J.y=z),"suspectedoutliers"===g&&z<y.uo&&z>y.lo&&(J.so=!0)}return x});w.enter().append("path").classed("point",!0),w.exit().remove(),w.call(f.translatePoints,o,l)}function v(c,i,s,a){var o,l,u=i.val,d=i.pos,g=!!d.rangebreaks,h=a.bPos,w=a.bPosPxOffset||0,y=s.boxmean||(s.meanline||{}).visible;Array.isArray(a.bdPos)?(o=a.bdPos[0],l=a.bdPos[1]):(o=a.bdPos,l=a.bdPos);var p=c.selectAll("path.mean").data("box"===s.type&&s.boxmean||"violin"===s.type&&s.box.visible&&s.meanline.visible?C.identity:[]);p.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),p.exit().remove(),p.each(function(_){var x=d.c2l(_.pos+h,!0),b=d.l2p(x-o)+w,M=d.l2p(x+l)+w,m=g?(b+M)/2:d.l2p(x)+w,D=u.c2p(_.mean,!0),S=u.c2p(_.mean-_.sd,!0),O=u.c2p(_.mean+_.sd,!0);"h"===s.orientation?I.select(this).attr("d","M"+D+","+b+"V"+M+("sd"===y?"m0,0L"+S+","+m+"L"+D+","+b+"L"+O+","+m+"Z":"")):I.select(this).attr("d","M"+b+","+D+"H"+M+("sd"===y?"m0,0L"+m+","+S+"L"+b+","+D+"L"+m+","+O+"Z":""))})}se.exports={plot:function(c,i,s,a){var o=c._context.staticPlot,l=i.xaxis,u=i.yaxis;C.makeTraceGroups(a,s,"trace boxes").each(function(d){var g,h,w=I.select(this),y=d[0],p=y.t,_=y.trace;p.wdPos=p.bdPos*_.whiskerwidth,!0!==_.visible||p.empty?w.remove():("h"===_.orientation?(g=u,h=l):(g=l,h=u),k(w,{pos:g,val:h},_,p,o),T(w,{x:l,y:u},_,p),v(w,{pos:g,val:h},_,p))})},plotBoxAndWhiskers:k,plotPoints:T,plotBoxMean:v}},24626:function(se){"use strict";se.exports=function(U,r){var I,C,f=U.cd,k=U.xaxis,T=U.yaxis,v=[];if(!1===r)for(I=0;I<f.length;I++)for(C=0;C<(f[I].pts||[]).length;C++)f[I].pts[C].selected=0;else for(I=0;I<f.length;I++)for(C=0;C<(f[I].pts||[]).length;C++){var c=f[I].pts[C],i=k.c2p(c.x),s=T.c2p(c.y);r.contains([i,s],null,c.i,U)?(v.push({pointNumber:c.i,x:k.c2d(c.x),y:T.c2d(c.y)}),c.selected=1):c.selected=0}return v}},58063:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(91424);se.exports={style:function(k,T,v){var c=v||I.select(k).selectAll("g.trace.boxes");c.style("opacity",function(i){return i[0].trace.opacity}),c.each(function(i){var s=I.select(this),a=i[0].trace,o=a.line.width;function l(g,h,w,y){g.style("stroke-width",h+"px").call(C.stroke,w).call(C.fill,y)}var u=s.selectAll("path.box");if("candlestick"===a.type)u.each(function(g){if(!g.empty){var h=I.select(this),w=a[g.dir];l(h,w.line.width,w.line.color,w.fillcolor),h.style("opacity",a.selectedpoints&&!g.selected?.3:1)}});else{l(u,o,a.line.color,a.fillcolor),s.selectAll("path.mean").style({"stroke-width":o,"stroke-dasharray":2*o+"px,"+o+"px"}).call(C.stroke,a.line.color);var d=s.selectAll("path.point");f.pointStyle(d,a,k)}})},styleOnSelect:function(k,T,v){var c=T[0].trace,i=v.selectAll("path.point");c.selectedpoints?f.selectedPointStyle(i,c):f.pointStyle(i,c,k)}}},75343:function(se,U,r){"use strict";var I=r(71828).extendFlat,C=r(12663).axisHoverFormat,f=r(2522),k=r(53522);function T(v){return{line:{color:I({},k.line.color,{dflt:v}),width:k.line.width,editType:"style"},fillcolor:k.fillcolor,editType:"style"}}se.exports={xperiod:f.xperiod,xperiod0:f.xperiod0,xperiodalignment:f.xperiodalignment,xhoverformat:C("x"),yhoverformat:C("y"),x:f.x,open:f.open,high:f.high,low:f.low,close:f.close,line:{width:I({},k.line.width,{}),editType:"style"},increasing:T(f.increasing.line.color.dflt),decreasing:T(f.decreasing.line.color.dflt),text:f.text,hovertext:f.hovertext,whiskerwidth:I({},k.whiskerwidth,{dflt:0}),hoverlabel:f.hoverlabel}},41197:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(42973),k=r(3485).calcCommon;function T(v,c,i,s){return{min:i,q1:Math.min(v,s),med:s,q3:Math.max(v,s),max:c}}se.exports=function(v,c){var i=v._fullLayout,s=C.getFromId(v,c.xaxis),a=C.getFromId(v,c.yaxis),o=s.makeCalcdata(c,"x"),l=f(c,s,"x",o).vals,u=k(v,c,o,l,a,T);return u.length?(I.extendFlat(u[0].t,{num:i._numBoxes,dPos:I.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),i._numBoxes++,u):[{t:{empty:!0}}]}},1026:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(14555),k=r(73927),T=r(75343);function v(c,i,s,a){var o=s(a+".line.color");s(a+".line.width",i.line.width),s(a+".fillcolor",C.addOpacity(o,.5))}se.exports=function(c,i,s,a){function o(l,u){return I.coerce(c,i,T,l,u)}f(c,i,o,a)?(k(c,i,a,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),v(0,i,o,"increasing"),v(0,i,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),a._requestRangeslider[i.xaxis]=!0):i.visible=!1}},91815:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"candlestick",basePlotModule:r(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:r(75343),layoutAttributes:r(40094),supplyLayoutDefaults:r(4199).supplyLayoutDefaults,crossTraceCalc:r(37188).crossTraceCalc,supplyDefaults:r(1026),calc:r(41197),plot:r(86047).plot,layerName:"boxlayer",style:r(58063).style,hoverPoints:r(66449).hoverPoints,selectPoints:r(67324)}},13145:function(se,U,r){"use strict";var I=r(11500),C=r(44467);se.exports=function(f,k,T,v,c){var i,s,a,o;v("a")||(v("da"),v("a0")),v("b")||(v("db"),v("b0")),i=f,s=k,a=T,o=c,["aaxis","baxis"].forEach(function(l){var u=l.charAt(0),d=i[l]||{},g=C.newContainer(s,l);I(d,g,{noTicklabelstep:!0,tickfont:"x",id:u+"axis",letter:u,font:s.font,name:l,data:i[u],calendar:s.calendar,dfltColor:o,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a}),g._categories=g._categories||[],i[l]||"-"===d.type||(i[l]={type:d.type})})}},402:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray;function C(f,k){if(!I(f)||k>=10)return null;for(var T=1/0,v=-1/0,c=f.length,i=0;i<c;i++){var s=f[i];if(I(s)){var a=C(s,k+1);a&&(T=Math.min(a[0],T),v=Math.max(a[1],v))}else T=Math.min(s,T),v=Math.max(s,v)}return[T,v]}se.exports=function(f){return C(f,0)}},99798:function(se,U,r){"use strict";var I=r(41940),C=r(1928),f=r(22399),k=I({editType:"calc"});k.family.dflt='"Open Sans", verdana, arial, sans-serif',k.size.dflt=12,k.color.dflt=f.defaultLine,se.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:C,baxis:C,font:k,color:{valType:"color",dflt:f.defaultLine,editType:"plot"},transforms:void 0}},4536:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray;se.exports=function(C,f,k,T){var v,c,i,s,a,o,l,u,d,g,h,w,y,p=I(k)?"a":"b",_=("a"===p?C.aaxis:C.baxis).smoothing,x="a"===p?C.a2i:C.b2j,b="a"===p?k:T,M="a"===p?T:k,m="a"===p?f.a.length:f.b.length,D="a"===p?f.b.length:f.a.length,S=Math.floor("a"===p?C.b2j(M):C.a2i(M)),O="a"===p?function(ue){return C.evalxy([],ue,S)}:function(ue){return C.evalxy([],S,ue)};_&&(i=Math.max(0,Math.min(D-2,S)),s=S-i,c="a"===p?function(ue,ae){return C.dxydi([],ue,i,ae,s)}:function(ue,ae){return C.dxydj([],i,ue,s,ae)});var P=x(b[0]),R=x(b[1]),F=P<R?1:-1,B=1e-8*(R-P),J=F>0?Math.floor:Math.ceil,z=F>0?Math.ceil:Math.floor,$=F>0?Math.min:Math.max,G=F>0?Math.max:Math.min,H=J(P+B),X=z(R-B),K=[[l=O(P)]];for(v=H;v*F<X*F;v+=F)a=[],h=G(P,v),y=(w=$(R,v+F))-h,o=Math.max(0,Math.min(m-2,Math.floor(.5*(h+w)))),u=O(w),_&&(d=c(o,h-o),g=c(o,w-o),a.push([l[0]+d[0]/3*y,l[1]+d[1]/3*y]),a.push([u[0]-g[0]/3*y,u[1]-g[1]/3*y])),a.push(u),K.push(a),l=u;return K}},1928:function(se,U,r){"use strict";var I=r(41940),C=r(22399),f=r(13838),k=r(12663).descriptionWithDates,T=r(30962).overrideAll,v=r(79952).P,c=r(1426).extendFlat;se.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:I({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:f.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:c({},f.labelalias,{editType:"calc"}),tickfont:I({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:k("tick label")},tickformatstops:T(f.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:C.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:c({},v,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:c({},v,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:C.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:I({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function(se,U,r){"use strict";var I=r(99798),C=r(7901).addOpacity,f=r(73972),k=r(71828),T=r(26218),v=r(96115),c=r(89426),i=r(15258),s=r(21994),a=r(4322);se.exports=function(o,l,u){var d=u.letter,g=u.font||{},h=I[d+"axis"];function w(F,B){return k.coerce(o,l,h,F,B)}function y(F,B){return k.coerce2(o,l,h,F,B)}u.name&&(l._name=u.name,l._id=u.name),w("autotypenumbers",u.autotypenumbersDflt);var p=w("type");"-"===p&&(u.data&&function(F,B){if("-"===F.type){var J=F._id.charAt(0);F.type=a(B,F[J+"calendar"],{autotypenumbers:F.autotypenumbers})}}(l,u.data),"-"===l.type?l.type="linear":p=o.type=l.type),w("smoothing"),w("cheatertype"),w("showticklabels"),w("labelprefix",d+" = "),w("labelsuffix"),w("showtickprefix"),w("showticksuffix"),w("separatethousands"),w("tickformat"),w("exponentformat"),w("minexponent"),w("showexponent"),w("categoryorder"),w("tickmode"),w("tickvals"),w("ticktext"),w("tick0"),w("dtick"),"array"===l.tickmode&&(w("arraytick0"),w("arraydtick")),w("labelpadding"),l._hovertitle=d,"date"===p&&f.getComponentMethod("calendars","handleDefaults")(o,l,"calendar",u.calendar),s(l,u.fullLayout),l.c2p=k.identity;var _=w("color",u.dfltColor),x=_===o.color?_:g.color;w("title.text")&&(k.coerceFont(w,"title.font",{family:g.family,size:k.bigFont(g.size),color:x}),w("title.offset")),w("tickangle"),w("autorange",!l.isValidRange(o.range))&&w("rangemode"),w("range"),l.cleanRange(),w("fixedrange"),T(o,l,w,p),c(o,l,w,p,u),v(o,l,w,p,u),i(o,l,w,{data:u.data,dataAttr:d});var b=y("gridcolor",C(_,.3)),M=y("gridwidth"),m=y("griddash"),D=w("showgrid");D||(delete l.gridcolor,delete l.gridwidth,delete l.griddash);var S=y("startlinecolor",_),O=y("startlinewidth",M);w("startline",l.showgrid||!!S||!!O)||(delete l.startlinecolor,delete l.startlinewidth);var P=y("endlinecolor",_),R=y("endlinewidth",M);return w("endline",l.showgrid||!!P||!!R)||(delete l.endlinecolor,delete l.endlinewidth),D?(w("minorgridcount"),w("minorgridwidth",M),w("minorgriddash",m),w("minorgridcolor",C(b,.06)),l.minorgridcount||(delete l.minorgridwidth,delete l.minorgriddash,delete l.minorgridcolor)):(delete l.gridcolor,delete l.gridwidth,delete l.griddash),"none"===l.showticklabels&&(delete l.tickfont,delete l.tickangle,delete l.showexponent,delete l.exponentformat,delete l.minexponent,delete l.tickformat,delete l.showticksuffix,delete l.showtickprefix),l.showticksuffix||delete l.ticksuffix,l.showtickprefix||delete l.tickprefix,w("tickmode"),l}},25281:function(se,U,r){"use strict";var I=r(89298),C=r(71828).isArray1D,f=r(53824),k=r(402),T=r(20347),v=r(83311),c=r(44807),i=r(4742),s=r(72505),a=r(68296),o=r(11435);se.exports=function(l,u){var d=I.getFromId(l,u.xaxis),g=I.getFromId(l,u.yaxis),h=u.aaxis,w=u.baxis,y=u.x,p=u.y,_=[];y&&C(y)&&_.push("x"),p&&C(p)&&_.push("y"),_.length&&a(u,h,w,"a","b",_);var x=u._a=u._a||u.a,b=u._b=u._b||u.b;y=u._x||u.x,p=u._y||u.y;var M={};u._cheater&&(y=f("index"===h.cheatertype?x.length:x,"index"===w.cheatertype?b.length:b,u.cheaterslope)),u._x=y=i(y),u._y=p=i(p),s(y,x,b),s(p,x,b),o(u),u.setScale();var S=k(y),O=k(p),P=.5*(S[1]-S[0]),R=.5*(S[1]+S[0]),F=.5*(O[1]-O[0]),B=.5*(O[1]+O[0]),J=1.3;return O=[B-F*J,B+F*J],u._extremes[d._id]=I.findExtremes(d,S=[R-P*J,R+P*J],{padded:!0}),u._extremes[g._id]=I.findExtremes(g,O,{padded:!0}),T(u,"a","b"),T(u,"b","a"),v(u,h),v(u,w),M.clipsegments=c(u._xctrl,u._yctrl,h,w),M.x=y,M.y=p,M.a=x,M.b=b,[M]}},44807:function(se){"use strict";se.exports=function(U,r,I,C){var f,k,T,v=[],c=!!I.smoothing,i=!!C.smoothing,s=U[0].length-1,a=U.length-1;for(f=0,k=[],T=[];f<=s;f++)k[f]=U[0][f],T[f]=r[0][f];for(v.push({x:k,y:T,bicubic:c}),f=0,k=[],T=[];f<=a;f++)k[f]=U[f][s],T[f]=r[f][s];for(v.push({x:k,y:T,bicubic:i}),f=s,k=[],T=[];f>=0;f--)k[s-f]=U[a][f],T[s-f]=r[a][f];for(v.push({x:k,y:T,bicubic:c}),f=a,k=[],T=[];f>=0;f--)k[a-f]=U[f][0],T[a-f]=r[f][0];return v.push({x:k,y:T,bicubic:i}),v}},20347:function(se,U,r){"use strict";var I=r(89298),C=r(1426).extendFlat;se.exports=function(f,k,T){var v,c,i,s,a,o,l,u,d,g,h,w,y,p,_=f["_"+k],x=f[k+"axis"],b=x._gridlines=[],M=x._minorgridlines=[],m=x._boundarylines=[],D=f["_"+T],S=f[T+"axis"];"array"===x.tickmode&&(x.tickvals=_.slice());var O=f._xctrl,P=f._yctrl,R=O[0].length,F=O.length,B=f._a.length,J=f._b.length;I.prepTicks(x),"array"===x.tickmode&&delete x.tickvals;var z=x.smoothing?3:1;function $(H){var X,K,ue,ae,ne,Q,ie,le,fe,he,pe,xe,Ee=[],Re=[],ke={};if("b"===k)for(K=f.b2j(H),ue=Math.floor(Math.max(0,Math.min(J-2,K))),ae=K-ue,ke.length=J,ke.crossLength=B,ke.xy=function(Te){return f.evalxy([],Te,K)},ke.dxy=function(Te,we){return f.dxydi([],Te,ue,we,ae)},X=0;X<B;X++)Q=Math.min(B-2,X),ie=X-Q,le=f.evalxy([],X,K),S.smoothing&&X>0&&(fe=f.dxydi([],X-1,ue,0,ae),Ee.push(ne[0]+fe[0]/3),Re.push(ne[1]+fe[1]/3),he=f.dxydi([],X-1,ue,1,ae),Ee.push(le[0]-he[0]/3),Re.push(le[1]-he[1]/3)),Ee.push(le[0]),Re.push(le[1]),ne=le;else for(X=f.a2i(H),Q=Math.floor(Math.max(0,Math.min(B-2,X))),ie=X-Q,ke.length=B,ke.crossLength=J,ke.xy=function(Te){return f.evalxy([],X,Te)},ke.dxy=function(Te,we){return f.dxydj([],Q,Te,ie,we)},K=0;K<J;K++)ue=Math.min(J-2,K),ae=K-ue,le=f.evalxy([],X,K),S.smoothing&&K>0&&(pe=f.dxydj([],Q,K-1,ie,0),Ee.push(ne[0]+pe[0]/3),Re.push(ne[1]+pe[1]/3),xe=f.dxydj([],Q,K-1,ie,1),Ee.push(le[0]-xe[0]/3),Re.push(le[1]-xe[1]/3)),Ee.push(le[0]),Re.push(le[1]),ne=le;return ke.axisLetter=k,ke.axis=x,ke.crossAxis=S,ke.value=H,ke.constvar=T,ke.index=u,ke.x=Ee,ke.y=Re,ke.smoothing=S.smoothing,ke}function G(H){var X,K,ue,ae,ne,Q=[],ie=[],le={};if(le.length=_.length,le.crossLength=D.length,"b"===k)for(ue=Math.max(0,Math.min(J-2,H)),ne=Math.min(1,Math.max(0,H-ue)),le.xy=function(fe){return f.evalxy([],fe,H)},le.dxy=function(fe,he){return f.dxydi([],fe,ue,he,ne)},X=0;X<R;X++)Q[X]=O[H*z][X],ie[X]=P[H*z][X];else for(K=Math.max(0,Math.min(B-2,H)),ae=Math.min(1,Math.max(0,H-K)),le.xy=function(fe){return f.evalxy([],H,fe)},le.dxy=function(fe,he){return f.dxydj([],K,fe,ae,he)},X=0;X<F;X++)Q[X]=O[X][H*z],ie[X]=P[X][H*z];return le.axisLetter=k,le.axis=x,le.crossAxis=S,le.value=_[H],le.constvar=T,le.index=H,le.x=Q,le.y=ie,le.smoothing=S.smoothing,le}if("array"===x.tickmode){for(s=5e-15,o=(a=[Math.floor((_.length-1-x.arraytick0)/x.arraydtick*(1+s)),Math.ceil(-x.arraytick0/x.arraydtick/(1+s))].sort(function(H,X){return H-X}))[0]-1,l=a[1]+1,u=o;u<l;u++)(c=x.arraytick0+x.arraydtick*u)<0||c>_.length-1||b.push(C(G(c),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(u=o;u<l;u++)if(i=x.arraytick0+x.arraydtick*u,h=Math.min(i+x.arraydtick,_.length-1),!(i<0||i>_.length-1||h<0||h>_.length-1))for(w=_[i],y=_[h],v=0;v<x.minorgridcount;v++)(p=h-i)<=0||(g=w+(y-w)*(v+1)/(x.minorgridcount+1)*(x.arraydtick/p))<_[0]||g>_[_.length-1]||M.push(C($(g),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&m.push(C(G(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&m.push(C(G(_.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(s=5e-15,o=(a=[Math.floor((_[_.length-1]-x.tick0)/x.dtick*(1+s)),Math.ceil((_[0]-x.tick0)/x.dtick/(1+s))].sort(function(H,X){return H-X}))[0],l=a[1],u=o;u<=l;u++)b.push(C($(d=x.tick0+x.dtick*u),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(u=o-1;u<l+1;u++)for(d=x.tick0+x.dtick*u,v=0;v<x.minorgridcount;v++)(g=d+x.dtick*(v+1)/(x.minorgridcount+1))<_[0]||g>_[_.length-1]||M.push(C($(g),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&m.push(C($(_[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&m.push(C($(_[_.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},83311:function(se,U,r){"use strict";var I=r(89298),C=r(1426).extendFlat;se.exports=function(f,k){var T,v,c,i=k._labels=[],s=k._gridlines;for(T=0;T<s.length;T++)c=s[T],-1!==["start","both"].indexOf(k.showticklabels)&&(v=I.tickText(k,c.value),C(v,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:c.xy(0),dxy:c.dxy(0,0),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:0===T,isLast:T===s.length-1}),i.push(v)),-1!==["end","both"].indexOf(k.showticklabels)&&(v=I.tickText(k,c.value),C(v,{endAnchor:!1,xy:c.xy(c.crossLength-1),dxy:c.dxy(c.crossLength-2,1),axis:c.axis,length:c.crossAxis.length,font:c.axis.tickfont,isFirst:0===T,isLast:T===s.length-1}),i.push(v))}},42048:function(se){"use strict";se.exports=function(U,r,I,C){var f=U[0]-r[0],k=U[1]-r[1],T=I[0]-r[0],v=I[1]-r[1],c=Math.pow(f*f+k*k,.25),i=Math.pow(T*T+v*v,.25),s=(i*i*f-c*c*T)*C,a=(i*i*k-c*c*v)*C,o=i*(c+i)*3,l=c*(c+i)*3;return[[r[0]+(o&&s/o),r[1]+(o&&a/o)],[r[0]-(l&&s/l),r[1]-(l&&a/l)]]}},53824:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray;se.exports=function(C,f,k){var T,v,c,i,s,a,o=[],l=I(C)?C.length:C,u=I(f)?f.length:f,d=I(C)?C:null,g=I(f)?f:null;d&&(c=(d.length-1)/(d[d.length-1]-d[0])/(l-1)),g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(u-1));var h=1/0,w=-1/0;for(v=0;v<u;v++)for(o[v]=[],s=g?(g[v]-g[0])*i:v/(u-1),T=0;T<l;T++)a=(d?(d[T]-d[0])*c:T/(l-1))-s*k,h=Math.min(a,h),w=Math.max(a,w),o[v][T]=a;var y=1/(w-h),p=-h*y;for(v=0;v<u;v++)for(T=0;T<l;T++)o[v][T]=y*o[v][T]+p;return o}},45664:function(se,U,r){"use strict";var I=r(42048),C=r(71828).ensureArray;function f(k,T,v){return[(2*(-.5*v[0]+1.5*T[0])+k[0])/3,(2*(-.5*v[1]+1.5*T[1])+k[1])/3]}se.exports=function(k,T,v,c,i,s){var a,o,l,u,d,g,h,w,y,p,_=v[0].length,x=v.length,b=i?3*_-2:_,M=s?3*x-2:x;for(k=C(k,M),T=C(T,M),l=0;l<M;l++)k[l]=C(k[l],b),T[l]=C(T[l],b);for(o=0,u=0;o<x;o++,u+=s?3:1)for(d=k[u],g=T[u],h=v[o],w=c[o],a=0,l=0;a<_;a++,l+=i?3:1)d[l]=h[a],g[l]=w[a];if(i)for(o=0,u=0;o<x;o++,u+=s?3:1){for(a=1,l=3;a<_-1;a++,l+=3)y=I([v[o][a-1],c[o][a-1]],[v[o][a],c[o][a]],[v[o][a+1],c[o][a+1]],i),k[u][l-1]=y[0][0],T[u][l-1]=y[0][1],k[u][l+1]=y[1][0],T[u][l+1]=y[1][1];p=f([k[u][0],T[u][0]],[k[u][2],T[u][2]],[k[u][3],T[u][3]]),k[u][1]=p[0],T[u][1]=p[1],p=f([k[u][b-1],T[u][b-1]],[k[u][b-3],T[u][b-3]],[k[u][b-4],T[u][b-4]]),k[u][b-2]=p[0],T[u][b-2]=p[1]}if(s)for(l=0;l<b;l++){for(u=3;u<M-3;u+=3)y=I([k[u-3][l],T[u-3][l]],[k[u][l],T[u][l]],[k[u+3][l],T[u+3][l]],s),k[u-1][l]=y[0][0],T[u-1][l]=y[0][1],k[u+1][l]=y[1][0],T[u+1][l]=y[1][1];p=f([k[0][l],T[0][l]],[k[2][l],T[2][l]],[k[3][l],T[3][l]]),k[1][l]=p[0],T[1][l]=p[1],p=f([k[M-1][l],T[M-1][l]],[k[M-3][l],T[M-3][l]],[k[M-4][l],T[M-4][l]]),k[M-2][l]=p[0],T[M-2][l]=p[1]}if(i&&s)for(u=1;u<M;u+=(u+1)%3==0?2:1){for(l=3;l<b-3;l+=3)y=I([k[u][l-3],T[u][l-3]],[k[u][l],T[u][l]],[k[u][l+3],T[u][l+3]],i),k[u][l-1]=.5*(k[u][l-1]+y[0][0]),T[u][l-1]=.5*(T[u][l-1]+y[0][1]),k[u][l+1]=.5*(k[u][l+1]+y[1][0]),T[u][l+1]=.5*(T[u][l+1]+y[1][1]);p=f([k[u][0],T[u][0]],[k[u][2],T[u][2]],[k[u][3],T[u][3]]),k[u][1]=.5*(k[u][1]+p[0]),T[u][1]=.5*(T[u][1]+p[1]),p=f([k[u][b-1],T[u][b-1]],[k[u][b-3],T[u][b-3]],[k[u][b-4],T[u][b-4]]),k[u][b-2]=.5*(k[u][b-2]+p[0]),T[u][b-2]=.5*(T[u][b-2]+p[1])}return[k,T]}},35509:function(se){"use strict";se.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function(se){"use strict";se.exports=function(U,r,I){return r&&I?function(C,f,k,T,v){var c,o,l;C||(C=[]),f*=3,k*=3;var u=T*T,d=1-T,g=d*d,h=d*T*2,w=-3*g,y=3*(g-h),p=3*(h-u),_=3*u,x=v*v,b=x*v,M=1-v,m=M*M,D=m*M;for(l=0;l<U.length;l++)c=w*(o=U[l])[k][f]+y*o[k][f+1]+p*o[k][f+2]+_*o[k][f+3],C[l]=D*c+3*(m*v*(w*o[k+1][f]+y*o[k+1][f+1]+p*o[k+1][f+2]+_*o[k+1][f+3])+M*x*(w*o[k+2][f]+y*o[k+2][f+1]+p*o[k+2][f+2]+_*o[k+2][f+3]))+b*(w*o[k+3][f]+y*o[k+3][f+1]+p*o[k+3][f+2]+_*o[k+3][f+3]);return C}:r?function(C,f,k,T,v){var c,s,a;C||(C=[]),f*=3;var o=T*T,l=1-T,u=l*l,d=l*T*2,g=-3*u,h=3*(u-d),w=3*(d-o),y=3*o,p=1-v;for(s=0;s<U.length;s++)c=g*(a=U[s])[k][f]+h*a[k][f+1]+w*a[k][f+2]+y*a[k][f+3],C[s]=p*c+v*(g*a[k+1][f]+h*a[k+1][f+1]+w*a[k+1][f+2]+y*a[k+1][f+3]);return C}:I?function(C,f,k,T,v){var c,o,l;C||(C=[]),k*=3;var u=v*v,d=u*v,g=1-v,h=g*g,w=h*g;for(o=0;o<U.length;o++)c=(l=U[o])[k][f+1]-l[k][f],C[o]=w*c+3*(h*v*(l[k+1][f+1]-l[k+1][f])+g*u*(l[k+2][f+1]-l[k+2][f]))+d*(l[k+3][f+1]-l[k+3][f]);return C}:function(C,f,k,T,v){var c,s,a;C||(C=[]);var o=1-v;for(s=0;s<U.length;s++)c=(a=U[s])[k][f+1]-a[k][f],C[s]=o*c+v*(a[k+1][f+1]-a[k+1][f]);return C}}},73057:function(se){"use strict";se.exports=function(U,r,I){return r&&I?function(C,f,k,T,v){var c,o,l;C||(C=[]),f*=3,k*=3;var u=T*T,d=u*T,g=1-T,h=g*g,w=h*g,y=v*v,p=1-v,_=p*p,x=p*v*2,b=-3*_,M=3*(_-x),m=3*(x-y),D=3*y;for(l=0;l<U.length;l++)c=b*(o=U[l])[k][f]+M*o[k+1][f]+m*o[k+2][f]+D*o[k+3][f],C[l]=w*c+3*(h*T*(b*o[k][f+1]+M*o[k+1][f+1]+m*o[k+2][f+1]+D*o[k+3][f+1])+g*u*(b*o[k][f+2]+M*o[k+1][f+2]+m*o[k+2][f+2]+D*o[k+3][f+2]))+d*(b*o[k][f+3]+M*o[k+1][f+3]+m*o[k+2][f+3]+D*o[k+3][f+3]);return C}:r?function(C,f,k,T,v){var c,o,l;C||(C=[]),f*=3;var u=v*v,d=u*v,g=1-v,h=g*g,w=h*g;for(o=0;o<U.length;o++)c=(l=U[o])[k+1][f]-l[k][f],C[o]=w*c+3*(h*v*(l[k+1][f+1]-l[k][f+1])+g*u*(l[k+1][f+2]-l[k][f+2]))+d*(l[k+1][f+3]-l[k][f+3]);return C}:I?function(C,f,k,T,v){var c,s,a;C||(C=[]),k*=3;var o=1-T,l=v*v,u=1-v,d=u*u,g=u*v*2,h=-3*d,w=3*(d-g),y=3*(g-l),p=3*l;for(s=0;s<U.length;s++)c=h*(a=U[s])[k][f]+w*a[k+1][f]+y*a[k+2][f]+p*a[k+3][f],C[s]=o*c+T*(h*a[k][f+1]+w*a[k+1][f+1]+y*a[k+2][f+1]+p*a[k+3][f+1]);return C}:function(C,f,k,T,v){var c,s,a;C||(C=[]);var o=1-T;for(s=0;s<U.length;s++)c=(a=U[s])[k+1][f]-a[k][f],C[s]=o*c+T*(a[k+1][f+1]-a[k][f+1]);return C}}},20349:function(se){"use strict";se.exports=function(U,r,I,C,f){var k=r-2,T=I-2;return C&&f?function(v,c,i){var s,u,d;v||(v=[]);var g=Math.max(0,Math.min(Math.floor(c),k)),h=Math.max(0,Math.min(Math.floor(i),T)),w=Math.max(0,Math.min(1,c-g)),y=Math.max(0,Math.min(1,i-h));g*=3,h*=3;var p=w*w,_=p*w,x=1-w,b=x*x,M=b*x,m=y*y,D=m*y,S=1-y,O=S*S,P=O*S;for(d=0;d<U.length;d++)s=M*(u=U[d])[h][g]+3*(b*w*u[h][g+1]+x*p*u[h][g+2])+_*u[h][g+3],v[d]=P*s+3*(O*y*(M*u[h+1][g]+3*(b*w*u[h+1][g+1]+x*p*u[h+1][g+2])+_*u[h+1][g+3])+S*m*(M*u[h+2][g]+3*(b*w*u[h+2][g+1]+x*p*u[h+2][g+2])+_*u[h+2][g+3]))+D*(M*u[h+3][g]+3*(b*w*u[h+3][g+1]+x*p*u[h+3][g+2])+_*u[h+3][g+3]);return v}:C?function(v,c,i){v||(v=[]);var s,u,d,g=Math.max(0,Math.min(Math.floor(c),k)),h=Math.max(0,Math.min(Math.floor(i),T)),w=Math.max(0,Math.min(1,c-g)),y=Math.max(0,Math.min(1,i-h));g*=3;var p=w*w,_=p*w,x=1-w,b=x*x,M=b*x,m=1-y;for(u=0;u<U.length;u++)s=m*(d=U[u])[h][g]+y*d[h+1][g],v[u]=M*s+3*(b*w*(m*d[h][g+1]+y*d[h+1][g+1])+x*p*(m*d[h][g+2]+y*d[h+1][g+1]))+_*(m*d[h][g+3]+y*d[h+1][g+1]);return v}:f?function(v,c,i){v||(v=[]);var s,u,d,g=Math.max(0,Math.min(Math.floor(c),k)),h=Math.max(0,Math.min(Math.floor(i),T)),w=Math.max(0,Math.min(1,c-g)),y=Math.max(0,Math.min(1,i-h));h*=3;var p=y*y,_=p*y,x=1-y,b=x*x,M=b*x,m=1-w;for(u=0;u<U.length;u++)s=m*(d=U[u])[h][g]+w*d[h][g+1],v[u]=M*s+3*(b*y*(m*d[h+1][g]+w*d[h+1][g+1])+x*p*(m*d[h+2][g]+w*d[h+2][g+1]))+_*(m*d[h+3][g]+w*d[h+3][g+1]);return v}:function(v,c,i){v||(v=[]);var s,o,l,u=Math.max(0,Math.min(Math.floor(c),k)),d=Math.max(0,Math.min(Math.floor(i),T)),g=Math.max(0,Math.min(1,c-u)),h=Math.max(0,Math.min(1,i-d)),w=1-h,y=1-g;for(o=0;o<U.length;o++)s=y*(l=U[o])[d][u]+g*l[d][u+1],v[o]=w*s+h*(y*l[d+1][u]+g*l[d+1][u+1]);return v}}},92087:function(se,U,r){"use strict";var I=r(71828),C=r(19237),f=r(13145),k=r(99798),T=r(22399);se.exports=function(v,c,i,s){function a(l,u){return I.coerce(v,c,k,l,u)}c._clipPathId="clip"+c.uid+"carpet";var o=a("color",T.defaultLine);I.coerceFont(a,"font"),a("carpet"),f(v,c,s,a,o),c.a&&c.b?(c.a.length<3&&(c.aaxis.smoothing=0),c.b.length<3&&(c.baxis.smoothing=0),C(v,c,a)||(c.visible=!1),c._cheater&&a("cheaterslope")):c.visible=!1}},21462:function(se,U,r){"use strict";se.exports={attributes:r(99798),supplyDefaults:r(92087),plot:r(89740),calc:r(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:r(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function(se){"use strict";se.exports=function(U,r){for(var I,C=U._fullData.length,f=0;f<C;f++){var k=U._fullData[f];if(k.index!==r.index&&"carpet"===k.type&&(I||(I=k),k.carpet===r.carpet))return k}return I}},67961:function(se){"use strict";se.exports=function(U,r,I){if(0===U.length)return"";var C,f=[],k=I?3:1;for(C=0;C<U.length;C+=k)f.push(U[C]+","+r[C]),I&&C<U.length-k&&(f.push("C"),f.push([U[C+1]+","+r[C+1],U[C+2]+","+r[C+2]+" "].join(" ")));return f.join(I?"":"L")}},27669:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray;se.exports=function(C,f,k){var T;for(I(C)?C.length>f.length&&(C=C.slice(0,f.length)):C=[],T=0;T<f.length;T++)C[T]=k(f[T]);return C}},11651:function(se){"use strict";se.exports=function(U,r,I,C,f,k){var T=f[0]*U.dpdx(r),v=f[1]*U.dpdy(I),c=1,i=1;if(k){var s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),a=Math.sqrt(k[0]*k[0]+k[1]*k[1]);i=Math.max(0,(f[0]*k[0]+f[1]*k[1])/s/a)}var l=180*Math.atan2(v,T)/Math.PI;return l<-90?(l+=180,c=-c):l>90&&(l-=180,c=-c),{angle:l,flip:c,p:U.c2p(C,r,I),offsetMultplier:i}}},89740:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(27669),k=r(67961),T=r(11651),v=r(63893),c=r(71828),i=c.strRotate,s=c.strTranslate,a=r(18783);function o(h,w,y,p,_,x,b){var M="const-"+_+"-lines",m=y.selectAll("."+M).data(x);m.enter().append("path").classed(M,!0).style("vector-effect",b?"none":"non-scaling-stroke"),m.each(function(D){var S=D,P=S.y,R=f([],S.x,h.c2p),F=f([],P,w.c2p),B="M"+k(R,F,S.smoothing);I.select(this).attr("d",B).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",C.dashStyle(S.dash,S.width)).style("fill","none")}),m.exit().remove()}function l(h,w,y,p,_,x,b,M){var m=x.selectAll("text."+M).data(b);m.enter().append("text").classed(M,!0);var D=0,S={};return m.each(function(O,P){var R;if("auto"===O.axis.tickangle)R=T(p,w,y,O.xy,O.dxy);else{var F=(O.axis.tickangle+180)*Math.PI/180;R=T(p,w,y,O.xy,[Math.cos(F),Math.sin(F)])}P||(S={angle:R.angle,flip:R.flip});var B=(O.endAnchor?-1:1)*R.flip,J=I.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(C.font,O.font).text(O.text).call(v.convertToTspans,h),z=C.bBox(this);J.attr("transform",s(R.p[0],R.p[1])+i(R.angle)+s(O.axis.labelpadding*B,.3*z.height)),D=Math.max(D,z.width+O.axis.labelpadding)}),m.exit().remove(),S.maxExtent=D,S}se.exports=function(h,w,y,p){var _=h._context.staticPlot,x=w.xaxis,b=w.yaxis,M=h._fullLayout._clips;c.makeTraceGroups(p,y,"trace").each(function(m){var D=I.select(this),S=m[0],O=S.trace,P=O.aaxis,R=O.baxis,F=c.ensureSingle(D,"g","minorlayer"),B=c.ensureSingle(D,"g","majorlayer"),J=c.ensureSingle(D,"g","boundarylayer"),z=c.ensureSingle(D,"g","labellayer");D.style("opacity",O.opacity),o(x,b,B,0,"a",P._gridlines,!0),o(x,b,B,0,"b",R._gridlines,!0),o(x,b,F,0,"a",P._minorgridlines,!0),o(x,b,F,0,"b",R._minorgridlines,!0),o(x,b,J,0,"a-boundary",P._boundarylines,_),o(x,b,J,0,"b-boundary",R._boundarylines,_);var H,X,K,ae,ne,Q,ie,le,fe,he,pe,xe,Ee,Re,ke,$=l(h,x,b,O,0,z,P._labels,"a-label"),G=l(h,x,b,O,0,z,R._labels,"b-label");H=h,X=z,K=O,ae=x,ne=b,Q=$,ie=G,xe=c.aggNums(Math.min,null,K.a),Ee=c.aggNums(Math.max,null,K.a),Re=c.aggNums(Math.min,null,K.b),ke=c.aggNums(Math.max,null,K.b),he=K.ab2xy(le=.5*(xe+Ee),fe=Re,!0),pe=K.dxyda_rough(le,fe),void 0===Q.angle&&c.extendFlat(Q,T(K,ae,ne,he,K.dxydb_rough(le,fe))),g(H,X,K,0,he,pe,K.aaxis,ae,ne,Q,"a-title"),he=K.ab2xy(le=xe,fe=.5*(Re+ke),!0),pe=K.dxydb_rough(le,fe),void 0===ie.angle&&c.extendFlat(ie,T(K,ae,ne,he,K.dxyda_rough(le,fe))),g(H,X,K,0,he,pe,K.baxis,ae,ne,ie,"b-title"),function(H,X,K,ue,ae){var ne,Q,ie,le,fe=K.select("#"+H._clipPathId);fe.size()||(fe=K.append("clipPath").classed("carpetclip",!0));var he=c.ensureSingle(fe,"path","carpetboundary"),pe=X.clipsegments,xe=[];for(le=0;le<pe.length;le++)Q=f([],(ne=pe[le]).x,ue.c2p),ie=f([],ne.y,ae.c2p),xe.push(k(Q,ie,ne.bicubic));var Ee="M"+xe.join("L")+"Z";fe.attr("id",H._clipPathId),he.attr("d",Ee)}(O,S,M,x,b)})};var u=a.LINE_SPACING,d=(1-a.MID_SHIFT)/u+1;function g(h,w,y,p,_,x,b,M,m,D,S){var O=[];b.title.text&&O.push(b.title.text);var P=w.selectAll("text."+S).data(O),R=D.maxExtent;P.enter().append("text").classed(S,!0),P.each(function(){var F=T(y,M,m,_,x);-1===["start","both"].indexOf(b.showticklabels)&&(R=0);var B=b.title.font.size;R+=B+b.title.offset;var J=(D.angle+(D.flip<0?180:0)-F.angle+450)%360,z=J>90&&J<270,$=I.select(this);$.text(b.title.text).call(v.convertToTspans,h),z&&(R=(-v.lineCount($)+d)*u*B-R),$.attr("transform",s(F.p[0],F.p[1])+i(F.angle)+s(0,R)).attr("text-anchor","middle").call(C.font,b.title.font)}),P.exit().remove()}},11435:function(se,U,r){"use strict";var I=r(35509),C=r(65888).findBin,f=r(45664),k=r(20349),T=r(54495),v=r(73057);se.exports=function(c){var i=c._a,s=c._b,a=i.length,o=s.length,l=c.aaxis,u=c.baxis,d=i[0],g=i[a-1],h=s[0],w=s[o-1],y=i[i.length-1]-i[0],p=s[s.length-1]-s[0],_=y*I.RELATIVE_CULL_TOLERANCE,x=p*I.RELATIVE_CULL_TOLERANCE;d-=_,g+=_,h-=x,w+=x,c.isVisible=function(b,M){return b>d&&b<g&&M>h&&M<w},c.isOccluded=function(b,M){return b<d||b>g||M<h||M>w},c.setScale=function(){var m=f(c._xctrl,c._yctrl,c._x,c._y,l.smoothing,u.smoothing);c._xctrl=m[0],c._yctrl=m[1],c.evalxy=k([c._xctrl,c._yctrl],a,o,l.smoothing,u.smoothing),c.dxydi=T([c._xctrl,c._yctrl],l.smoothing,u.smoothing),c.dxydj=v([c._xctrl,c._yctrl],l.smoothing,u.smoothing)},c.i2a=function(b){var M=Math.max(0,Math.floor(b[0]),a-2),m=b[0]-M;return(1-m)*i[M]+m*i[M+1]},c.j2b=function(b){var M=Math.max(0,Math.floor(b[1]),a-2),m=b[1]-M;return(1-m)*s[M]+m*s[M+1]},c.ij2ab=function(b){return[c.i2a(b[0]),c.j2b(b[1])]},c.a2i=function(b){var M=Math.max(0,Math.min(C(b,i),a-2)),m=i[M];return Math.max(0,Math.min(a-1,M+(b-m)/(i[M+1]-m)))},c.b2j=function(b){var M=Math.max(0,Math.min(C(b,s),o-2)),m=s[M];return Math.max(0,Math.min(o-1,M+(b-m)/(s[M+1]-m)))},c.ab2ij=function(b){return[c.a2i(b[0]),c.b2j(b[1])]},c.i2c=function(b,M){return c.evalxy([],b,M)},c.ab2xy=function(b,M,m){if(!m&&(b<i[0]||b>i[a-1]|M<s[0]||M>s[o-1]))return[!1,!1];var D=c.a2i(b),S=c.b2j(M),O=c.evalxy([],D,S);if(m){var P,R,F,B,J=0,z=0,$=[];b<i[0]?(P=0,R=0,J=(b-i[0])/(i[1]-i[0])):b>i[a-1]?(P=a-2,R=1,J=(b-i[a-1])/(i[a-1]-i[a-2])):R=D-(P=Math.max(0,Math.min(a-2,Math.floor(D)))),M<s[0]?(F=0,B=0,z=(M-s[0])/(s[1]-s[0])):M>s[o-1]?(F=o-2,B=1,z=(M-s[o-1])/(s[o-1]-s[o-2])):B=S-(F=Math.max(0,Math.min(o-2,Math.floor(S)))),J&&(c.dxydi($,P,F,R,B),O[0]+=$[0]*J,O[1]+=$[1]*J),z&&(c.dxydj($,P,F,R,B),O[0]+=$[0]*z,O[1]+=$[1]*z)}return O},c.c2p=function(b,M,m){return[M.c2p(b[0]),m.c2p(b[1])]},c.p2x=function(b,M,m){return[M.p2c(b[0]),m.p2c(b[1])]},c.dadi=function(b){var M=Math.max(0,Math.min(i.length-2,b));return i[M+1]-i[M]},c.dbdj=function(b){var M=Math.max(0,Math.min(s.length-2,b));return s[M+1]-s[M]},c.dxyda=function(b,M,m,D){var S=c.dxydi(null,b,M,m,D),O=c.dadi(b,m);return[S[0]/O,S[1]/O]},c.dxydb=function(b,M,m,D){var S=c.dxydj(null,b,M,m,D),O=c.dbdj(M,D);return[S[0]/O,S[1]/O]},c.dxyda_rough=function(b,M,m){var D=y*(m||.1),S=c.ab2xy(b+D,M,!0),O=c.ab2xy(b-D,M,!0);return[.5*(S[0]-O[0])/D,.5*(S[1]-O[1])/D]},c.dxydb_rough=function(b,M,m){var D=p*(m||.1),S=c.ab2xy(b,M+D,!0),O=c.ab2xy(b,M-D,!0);return[.5*(S[0]-O[0])/D,.5*(S[1]-O[1])/D]},c.dpdx=function(b){return b._m},c.dpdy=function(b){return b._m}}},72505:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f,k){var T,v,c,i=[],s=[],a=C[0].length,o=C.length;var u,d,g,h,w,y,p,_,x,b,H,X,K,ue,ae,m=0;for(T=0;T<a;T++)for(v=0;v<o;v++)void 0===C[v][T]&&(i.push(T),s.push(v),C[v][T]=(X=v,K=void 0,ue=void 0,ae=void 0,ue=0,ae=0,(H=T)>0&&void 0!==(K=C[X][H-1])&&(ae++,ue+=K),H<a-1&&void 0!==(K=C[X][H+1])&&(ae++,ue+=K),X>0&&void 0!==(K=C[X-1][H])&&(ae++,ue+=K),X<o-1&&void 0!==(K=C[X+1][H])&&(ae++,ue+=K),ue/Math.max(1,ae))),m=Math.max(m,Math.abs(C[v][T]));if(!i.length)return C;var D=0,S=0,O=i.length;do{for(D=0,c=0;c<O;c++){v=s[c];var R,F,B,J,z,$=0,G=0;0===(T=i[c])?(F=f[J=Math.min(a-1,2)],G+=(R=C[v][1])+(R-C[v][J])*(f[0]-(B=f[1]))/(B-F),$++):T===a-1&&(F=f[J=Math.max(0,a-3)],G+=(R=C[v][a-2])+(R-C[v][J])*(f[a-1]-(B=f[a-2]))/(B-F),$++),(0===T||T===a-1)&&v>0&&v<o-1&&(G+=((d=k[v]-k[v-1])*C[v+1][T]+(u=k[v+1]-k[v])*C[v-1][T])/(d+u),$++),0===v?(F=k[z=Math.min(o-1,2)],G+=(R=C[1][T])+(R-C[z][T])*(k[0]-(B=k[1]))/(B-F),$++):v===o-1&&(F=k[z=Math.max(0,o-3)],G+=(R=C[o-2][T])+(R-C[z][T])*(k[o-1]-(B=k[o-2]))/(B-F),$++),(0===v||v===o-1)&&T>0&&T<a-1&&(G+=((d=f[T]-f[T-1])*C[v][T+1]+(u=f[T+1]-f[T])*C[v][T-1])/(d+u),$++),$?G/=$:(_=(w=k[v+1]-k[v])*(y=k[v]-k[v-1])*(w+y),G=((p=(g=f[T+1]-f[T])*(h=f[T]-f[T-1])*(g+h))*(y*C[v+1][T]+w*C[v-1][T])+_*(h*C[v][T+1]+g*C[v][T-1]))/(_*(h+g)+p*(y+w))),D+=(b=(x=G-C[v][T])/m)*b,C[v][T]+=x*(1+($?0:.85))}D=Math.sqrt(D)}while(S++<100&&D>1e-5);return I.log("Smoother converged to",D,"after",S,"iterations"),C}},19237:function(se,U,r){"use strict";var I=r(71828).isArray1D;se.exports=function(C,f,k){var T=k("x"),v=T&&T.length,c=k("y"),i=c&&c.length;if(!v&&!i)return!1;if(f._cheater=!T,v&&!I(T)||i&&!I(c))f._length=null;else{var s=v?T.length:1/0;i&&(s=Math.min(s,c.length)),f.a&&f.a.length&&(s=Math.min(s,f.a.length)),f.b&&f.b.length&&(s=Math.min(s,f.b.length)),f._length=s}return!0}},69568:function(se,U,r){"use strict";var I=r(5386).fF,C=r(19316),f=r(50693),k=r(9012),T=r(22399).defaultLine,v=r(1426).extendFlat,c=C.marker.line;se.exports=v({locations:{valType:"data_array",editType:"calc"},locationmode:C.locationmode,z:{valType:"data_array",editType:"calc"},geojson:v({},C.geojson,{}),featureidkey:C.featureidkey,text:v({},C.text,{}),hovertext:v({},C.hovertext,{}),marker:{line:{color:v({},c.color,{dflt:T}),width:v({},c.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:C.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:C.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:v({},k.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:I(),showlegend:v({},k.showlegend,{dflt:!1})},f("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function(se,U,r){"use strict";var I=r(92770),C=r(50606).BADNUM,f=r(78803),k=r(75225),T=r(66279);function v(c){return c&&"string"==typeof c}se.exports=function(c,i){var s,a=i._length,o=new Array(a);s=i.geojson?function(h){return v(h)||I(h)}:v;for(var l=0;l<a;l++){var u=o[l]={},d=i.locations[l],g=i.z[l];s(d)&&I(g)?(u.loc=d,u.z=g):(u.loc=null,u.z=C),u.index=l}return k(o,i),f(c,i,{vals:i.z,containerStr:"",cLetter:"z"}),T(o,i),o}},61869:function(se,U,r){"use strict";var I=r(71828),C=r(1586),f=r(69568);se.exports=function(k,T,v,c){function i(u,d){return I.coerce(k,T,f,u,d)}var s=i("locations"),a=i("z");if(s&&s.length&&I.isArrayOrTypedArray(a)&&a.length){T._length=Math.min(s.length,a.length);var o,l=i("geojson");("string"==typeof l&&""!==l||I.isPlainObject(l))&&(o="geojson-id"),"geojson-id"===i("locationmode",o)&&i("featureidkey"),i("text"),i("hovertext"),i("hovertemplate"),i("marker.line.width")&&i("marker.line.color"),i("marker.opacity"),C(k,T,c,i,{prefix:"",cLetter:"z"}),I.coerceSelectionMarkerOpacity(T,i)}else T.visible=!1}},92069:function(se){"use strict";se.exports=function(U,r,I,C,f){U.location=r.location,U.z=r.z;var k=C[f];return k.fIn&&k.fIn.properties&&(U.properties=k.fIn.properties),U.ct=k.ct,U}},42300:function(se,U,r){"use strict";var I=r(89298),C=r(69568),f=r(71828).fillText;se.exports=function(k,T,v){var c,i,s,a,o=k.cd,l=o[0].trace,u=k.subplot,d=[T,v],g=[T+360,v];for(i=0;i<o.length;i++)if(a=!1,(c=o[i])._polygons){for(s=0;s<c._polygons.length;s++)c._polygons[s].contains(d)&&(a=!a),c._polygons[s].contains(g)&&(a=!a);if(a)break}if(a&&c)return k.x0=k.x1=k.xa.c2p(c.ct),k.y0=k.y1=k.ya.c2p(c.ct),k.index=c.index,k.location=c.loc,k.z=c.z,k.zLabel=I.tickText(u.mockAxis,u.mockAxis.c2l(c.z),"hover").text,k.hovertemplate=c.hovertemplate,function(h,w,y){if(!w.hovertemplate){var p=y.hi||w.hoverinfo,_=String(y.loc),x="all"===p?C.hoverinfo.flags:p.split("+"),b=-1!==x.indexOf("name"),M=-1!==x.indexOf("location"),m=-1!==x.indexOf("z"),D=-1!==x.indexOf("text"),S=[];!b&&M?h.nameOverride=_:(b&&(h.nameOverride=w.name),M&&S.push(_)),m&&S.push(h.zLabel),D&&f(y,w,S),h.extraText=S.join("<br>")}}(k,l,c),[k]}},51319:function(se,U,r){"use strict";se.exports={attributes:r(69568),supplyDefaults:r(61869),colorbar:r(61243),calc:r(38675),calcGeoJSON:r(99841).calcGeoJSON,plot:r(99841).plot,style:r(99636).style,styleOnSelect:r(99636).styleOnSelect,hoverPoints:r(42300),eventData:r(92069),selectPoints:r(81253),moduleType:"trace",name:"choropleth",basePlotModule:r(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(41327),k=r(90973).getTopojsonFeatures,T=r(71739).findExtremes,v=r(99636).style;se.exports={calcGeoJSON:function(c,i){for(var s=c[0].trace,a=i[s.geo],o=a._subplot,l=s.locationmode,u=s._length,d="geojson-id"===l?f.extractTraceFeature(c):k(s,o.topojson),g=[],h=[],w=0;w<u;w++){var y=c[w],p="geojson-id"===l?y.fOut:f.locationToFeature(l,y.loc,d);if(p){y.geojson=p,y.ct=p.properties.ct,y._polygons=f.feature2polygons(p);var _=f.computeBbox(p);g.push(_[0],_[2]),h.push(_[1],_[3])}else y.geojson=null}if("geojson"===a.fitbounds&&"geojson-id"===l){var x=f.computeBbox(f.getTraceGeojson(s));g=[x[0],x[2]],h=[x[1],x[3]]}var b={padded:!0};s._extremes.lon=T(a.lonaxis._ax,g,b),s._extremes.lat=T(a.lataxis._ax,h,b)},plot:function(c,i,s){var a=i.layers.backplot.select(".choroplethlayer");C.makeTraceGroups(a,s,"trace choropleth").each(function(o){var l=I.select(this).selectAll("path.choroplethlocation").data(C.identity);l.enter().append("path").classed("choroplethlocation",!0),l.exit().remove(),v(c,o)})}}},81253:function(se){"use strict";se.exports=function(U,r){var I,C,f,k,T,v=U.cd,c=U.xaxis,i=U.yaxis,s=[];if(!1===r)for(I=0;I<v.length;I++)v[I].selected=0;else for(I=0;I<v.length;I++)(f=(C=v[I]).ct)&&(k=c.c2p(f),T=i.c2p(f),r.contains([k,T],null,I,U)?(s.push({pointNumber:I,lon:f[0],lat:f[1]}),C.selected=1):C.selected=0);return s}},99636:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(91424),k=r(21081);function T(v,c){var i=c[0].trace,s=c[0].node3.selectAll(".choroplethlocation"),a=i.marker||{},o=a.line||{},l=k.makeColorScaleFuncFromTrace(i);s.each(function(u){I.select(this).attr("fill",l(u.z)).call(C.stroke,u.mlc||o.color).call(f.dashLine,"",u.mlw||o.width||0).style("opacity",a.opacity)}),f.selectedPointStyle(s,i)}se.exports={style:function(v,c){c&&T(0,c)},styleOnSelect:function(v,c){var s=c[0].trace;s.selectedpoints?f.selectedPointStyle(c[0].node3.selectAll(".choroplethlocation"),s):T(0,c)}}},64496:function(se,U,r){"use strict";var I=r(69568),C=r(50693),f=r(5386).fF,k=r(9012),T=r(1426).extendFlat;se.exports=T({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:T({},I.featureidkey,{}),below:{valType:"string",editType:"plot"},text:I.text,hovertext:I.hovertext,marker:{line:{color:T({},I.marker.line.color,{editType:"plot"}),width:T({},I.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:T({},I.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:T({},I.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:T({},I.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:I.hoverinfo,hovertemplate:f({},{keys:["properties"]}),showlegend:T({},k.showlegend,{dflt:!1})},C("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(21081),k=r(91424),T=r(18214).makeBlank,v=r(41327);function c(i){var s,a=i[0].trace,o=a._opts;if(a.selectedpoints){for(var l=k.makeSelectedPointStyleFns(a),u=0;u<i.length;u++){var d=i[u];d.fOut&&(d.fOut.properties.mo2=l.selectedOpacityFn(d))}s={type:"identity",property:"mo2"}}else s=C.isArrayOrTypedArray(a.marker.opacity)?{type:"identity",property:"mo"}:a.marker.opacity;return C.extendFlat(o.fill.paint,{"fill-opacity":s}),C.extendFlat(o.line.paint,{"line-opacity":s}),o}se.exports={convert:function(i){var s=i[0].trace,a=!0===s.visible&&0!==s._length,o={layout:{visibility:"none"},paint:{}},l={layout:{visibility:"none"},paint:{}},u=s._opts={fill:o,line:l,geojson:T()};if(!a)return u;var d=v.extractTraceFeature(i);if(!d)return u;var g,h,w,y=f.makeColorScaleFuncFromTrace(s),p=s.marker,_=p.line||{};C.isArrayOrTypedArray(p.opacity)&&(g=function(S){var O=S.mo;return I(O)?+C.constrain(O,0,1):0}),C.isArrayOrTypedArray(_.color)&&(h=function(S){return S.mlc}),C.isArrayOrTypedArray(_.width)&&(w=function(S){return S.mlw});for(var x=0;x<i.length;x++){var b=i[x],M=b.fOut;if(M){var m=M.properties;m.fc=y(b.z),g&&(m.mo=g(b)),h&&(m.mlc=h(b)),w&&(m.mlw=w(b)),b.ct=m.ct,b._polygons=v.feature2polygons(M)}}var D=g?{type:"identity",property:"mo"}:p.opacity;return C.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":D}),C.extendFlat(l.paint,{"line-color":h?{type:"identity",property:"mlc"}:_.color,"line-width":w?{type:"identity",property:"mlw"}:_.width,"line-opacity":D}),o.layout.visibility="visible",l.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:d},c(i),u},convertOnSelect:c}},22654:function(se,U,r){"use strict";var I=r(71828),C=r(1586),f=r(64496);se.exports=function(k,T,v,c){function i(l,u){return I.coerce(k,T,f,l,u)}var s=i("locations"),a=i("z"),o=i("geojson");I.isArrayOrTypedArray(s)&&s.length&&I.isArrayOrTypedArray(a)&&a.length&&("string"==typeof o&&""!==o||I.isPlainObject(o))?(i("featureidkey"),T._length=Math.min(s.length,a.length),i("below"),i("text"),i("hovertext"),i("hovertemplate"),i("marker.line.width")&&i("marker.line.color"),i("marker.opacity"),C(k,T,c,i,{prefix:"",cLetter:"z"}),I.coerceSelectionMarkerOpacity(T,i)):T.visible=!1}},57516:function(se,U,r){"use strict";se.exports={attributes:r(64496),supplyDefaults:r(22654),colorbar:r(61243),calc:r(38675),plot:r(7852),hoverPoints:r(42300),eventData:r(92069),selectPoints:r(81253),styleOnSelect:function(I,C){C&&C[0].trace._glTrace.updateOnSelect(C)},getBelow:function(I,C){for(var f=C.getMapLayers(),k=f.length-2;k>=0;k--){var T=f[k].id;if("string"==typeof T&&0===T.indexOf("water"))for(var v=k+1;v<f.length;v++)if("string"==typeof(T=f[v].id)&&-1===T.indexOf("plotly-"))return T}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:r(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function(se,U,r){"use strict";var I=r(82004).convert,C=r(82004).convertOnSelect,f=r(77734).traceLayerPrefix;function k(v,c){this.type="choroplethmapbox",this.subplot=v,this.uid=c,this.sourceId="source-"+c,this.layerList=[["fill",f+c+"-fill"],["line",f+c+"-line"]],this.below=null}var T=k.prototype;T.update=function(v){this._update(I(v)),v[0].trace._glTrace=this},T.updateOnSelect=function(v){this._update(C(v))},T._update=function(v){var c=this.subplot,i=this.layerList,s=c.belowLookup["trace-"+this.uid];c.map.getSource(this.sourceId).setData(v.geojson),s!==this.below&&(this._removeLayers(),this._addLayers(v,s),this.below=s);for(var a=0;a<i.length;a++){var o=i[a],u=o[1],d=v[o[0]];c.setOptions(u,"setLayoutProperty",d.layout),"visible"===d.layout.visibility&&c.setOptions(u,"setPaintProperty",d.paint)}},T._addLayers=function(v,c){for(var i=this.subplot,s=this.layerList,a=this.sourceId,o=0;o<s.length;o++){var l=s[o],u=l[0],d=v[u];i.addLayer({type:u,id:l[1],source:a,layout:d.layout,paint:d.paint},c)}},T._removeLayers=function(){for(var v=this.subplot.map,c=this.layerList,i=c.length-1;i>=0;i--)v.removeLayer(c[i][1])},T.dispose=function(){var v=this.subplot.map;this._removeLayers(),v.removeSource(this.sourceId)},se.exports=function(v,c){var i=c[0].trace,s=new k(v,i.uid),a=s.sourceId,o=I(c),l=s.below=v.belowLookup["trace-"+i.uid];return v.map.addSource(a,{type:"geojson",data:o.geojson}),s._addLayers(o,l),c[0].trace._glTrace=s,s}},12674:function(se,U,r){"use strict";var I=r(50693),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(2418),T=r(9012),v=r(1426).extendFlat,c={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:f({editType:"calc"},{keys:["norm"]}),uhoverformat:C("u",1),vhoverformat:C("v",1),whoverformat:C("w",1),xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(c,I("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){c[i]=k[i]}),c.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),c.transforms=void 0,se.exports=c},31371:function(se,U,r){"use strict";var I=r(78803);se.exports=function(C,f){for(var k=f.u,T=f.v,v=f.w,c=Math.min(f.x.length,f.y.length,f.z.length,k.length,T.length,v.length),i=-1/0,s=1/0,a=0;a<c;a++){var o=k[a],l=T[a],u=v[a],d=Math.sqrt(o*o+l*l+u*u);i=Math.max(i,d),s=Math.min(s,d)}f._len=c,f._normMax=i,I(C,f,{vals:[s,i],containerStr:"",cLetter:"c"})}},5453:function(se,U,r){"use strict";var I=r(9330).gl_cone3d,C=r(9330).gl_cone3d.createConeMesh,f=r(71828).simpleMap,k=r(81697).parseColorScale,T=r(21081).extractOpts,v=r(90060);function c(u,d){this.scene=u,this.uid=d,this.mesh=null,this.data=null}var i=c.prototype;i.handlePick=function(u){if(u.object===this.mesh){var d=u.index=u.data.index,y=this.data.u[d],p=this.data.v[d],_=this.data.w[d];u.traceCoordinate=[this.data.x[d],this.data.y[d],this.data.z[d],y,p,_,Math.sqrt(y*y+p*p+_*_)];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&void 0!==x[d]?u.textLabel=x[d]:x&&(u.textLabel=x),!0}};var s={xaxis:0,yaxis:1,zaxis:2},a={tip:1,tail:0,cm:.25,center:.5},o={tip:1,tail:1,cm:.75,center:.5};function l(u,d){var g=u.fullSceneLayout,h=u.dataScale,w={};function y(b,M){var m=g[M],D=h[s[M]];return f(b,function(S){return m.d2l(S)*D})}w.vectors=v(y(d.u,"xaxis"),y(d.v,"yaxis"),y(d.w,"zaxis"),d._len),w.positions=v(y(d.x,"xaxis"),y(d.y,"yaxis"),y(d.z,"zaxis"),d._len);var p=T(d);w.colormap=k(d),w.vertexIntensityBounds=[p.min/d._normMax,p.max/d._normMax],w.coneOffset=a[d.anchor],w.coneSize="scaled"===d.sizemode?d.sizeref||.5:d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var _=I(w),x=d.lightposition;return _.lightPosition=[x.x,x.y,x.z],_.ambient=d.lighting.ambient,_.diffuse=d.lighting.diffuse,_.specular=d.lighting.specular,_.roughness=d.lighting.roughness,_.fresnel=d.lighting.fresnel,_.opacity=d.opacity,d._pad=o[d.anchor]*_.vectorScale*_.coneScale*d._normMax,_}i.update=function(u){this.data=u;var d=l(this.scene,u);this.mesh.update(d)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},se.exports=function(u,d){var g=u.glplot.gl,h=l(u,d),w=C(g,h),y=new c(u,d.uid);return y.mesh=w,y.data=d,w._trace=y,u.glplot.add(w),y}},91750:function(se,U,r){"use strict";var I=r(71828),C=r(1586),f=r(12674);se.exports=function(k,T,v,c){function i(g,h){return I.coerce(k,T,f,g,h)}var s=i("u"),a=i("v"),o=i("w"),l=i("x"),u=i("y"),d=i("z");s&&s.length&&a&&a.length&&o&&o.length&&l&&l.length&&u&&u.length&&d&&d.length?(i("sizeref"),i("sizemode"),i("anchor"),i("lighting.ambient"),i("lighting.diffuse"),i("lighting.specular"),i("lighting.roughness"),i("lighting.fresnel"),i("lightposition.x"),i("lightposition.y"),i("lightposition.z"),C(k,T,c,i,{prefix:"",cLetter:"c"}),i("text"),i("hovertext"),i("hovertemplate"),i("uhoverformat"),i("vhoverformat"),i("whoverformat"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),T._length=null):T.visible=!1}},98128:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"cone",basePlotModule:r(58547),categories:["gl3d","showLegend"],attributes:r(12674),supplyDefaults:r(91750),colorbar:{min:"cmin",max:"cmax"},calc:r(31371),plot:r(5453),eventData:function(I,C){return I.norm=C.traceCoordinate[6],I},meta:{}}},70600:function(se,U,r){"use strict";var I=r(21606),C=r(82196),f=r(12663),k=f.axisHoverFormat,T=f.descriptionOnlyNumbers,v=r(50693),c=r(79952).P,i=r(41940),s=r(1426).extendFlat,a=r(74808),o=a.COMPARISON_OPS2,l=a.INTERVAL_OPS,u=C.line;se.exports=s({z:I.z,x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,text:I.text,hovertext:I.hovertext,transpose:I.transpose,xtype:I.xtype,ytype:I.ytype,xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:I.hovertemplate,texttemplate:s({},I.texttemplate,{}),textfont:s({},I.textfont,{}),hoverongaps:I.hoverongaps,connectgaps:s({},I.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:i({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:T("contour label")},operation:{valType:"enumerated",values:[].concat(o).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:s({},u.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:c,smoothing:s({},u.smoothing,{}),editType:"plot"}},v("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function(se,U,r){"use strict";var I=r(21081),C=r(90757),f=r(18670),k=r(53572);se.exports=function(T,v){var c=C(T,v),i=c[0].z;f(v,i);var s,a=v.contours,o=I.extractOpts(v);if("heatmap"===a.coloring&&o.auto&&!1===v.autocontour){var l=a.start,u=k(a),d=a.size||1,g=Math.floor((u-l)/d)+1;isFinite(d)||(d=1,g=1);var h=l-d/2;s=[h,h+g*d]}else s=i;return I.calc(T,v,{vals:s,cLetter:"z"}),c}},20083:function(se){"use strict";se.exports=function(U,r){var I,C=U[0],f=C.z;switch(r.type){case"levels":var k=Math.min(f[0][0],f[0][1]);for(I=0;I<U.length;I++){var T=U[I];T.prefixBoundary=!T.edgepaths.length&&(k>T.level||T.starts.length&&k===T.level)}break;case"constraint":if(C.prefixBoundary=!1,C.edgepaths.length)return;var v=C.x.length,c=C.y.length,i=-1/0,s=1/0;for(I=0;I<c;I++)s=Math.min(s,f[I][0]),s=Math.min(s,f[I][v-1]),i=Math.max(i,f[I][0]),i=Math.max(i,f[I][v-1]);for(I=1;I<v-1;I++)s=Math.min(s,f[0][I]),s=Math.min(s,f[c-1][I]),i=Math.max(i,f[0][I]),i=Math.max(i,f[c-1][I]);var a,o,l=r.value;switch(r._operation){case">":l>i&&(C.prefixBoundary=!0);break;case"<":(l<s||C.starts.length&&l===s)&&(C.prefixBoundary=!0);break;case"[]":a=Math.min(l[0],l[1]),((o=Math.max(l[0],l[1]))<s||a>i||C.starts.length&&o===s)&&(C.prefixBoundary=!0);break;case"][":a=Math.min(l[0],l[1]),o=Math.max(l[0],l[1]),a<s&&o>i&&(C.prefixBoundary=!0)}}}},90654:function(se,U,r){"use strict";var I=r(21081),C=r(86068),f=r(53572);se.exports={min:"zmin",max:"zmax",calc:function(k,T,v){var c=T.contours,i=T.line,s=c.size||1,a=c.coloring,o=C(T,{isColorbar:!0});if("heatmap"===a){var l=I.extractOpts(T);v._fillgradient=l.reversescale?I.flipScale(l.colorscale):l.colorscale,v._zrange=[l.min,l.max]}else"fill"===a&&(v._fillcolor=o);v._line={color:"lines"===a?o:i.color,width:!1!==c.showlines?i.width:0,dash:i.dash},v._levels={start:c.start,end:f(c),size:s}}}},36914:function(se){"use strict";se.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function(se,U,r){"use strict";var I=r(92770),C=r(14523),f=r(7901),k=f.addOpacity,T=f.opacity,v=r(74808),c=v.CONSTRAINT_REDUCTION,i=v.COMPARISON_OPS2;se.exports=function(s,a,o,l,u,d){var g,h,w,_,x,b,y=a.contours,p=o("contours.operation");y._operation=c[p],_=o,-1===i.indexOf((x=y).operation)?(_("contours.value",[0,1]),Array.isArray(x.value)?x.value.length>2?x.value=x.value.slice(2):0===x.length?x.value=[0,1]:x.length<2?(b=parseFloat(x.value[0]),x.value=[b,b+1]):x.value=[parseFloat(x.value[0]),parseFloat(x.value[1])]:I(x.value)&&(b=parseFloat(x.value),x.value=[b,b+1])):(_("contours.value",0),I(x.value)||(x.value=Array.isArray(x.value)?parseFloat(x.value[0]):0)),"="===p?g=y.showlines=!0:(g=o("contours.showlines"),w=o("fillcolor",k((s.line||{}).color||u,.5))),g&&(h=o("line.color",w&&T(w)?k(a.fillcolor,1):u),o("line.width",2),o("line.dash")),o("line.smoothing"),C(o,l,h,d)}},64237:function(se,U,r){"use strict";var I=r(74808),C=r(92770);function f(v,c){var i,s=Array.isArray(c);function a(o){return C(o)?+o:null}return-1!==I.COMPARISON_OPS2.indexOf(v)?i=a(s?c[0]:c):-1!==I.INTERVAL_OPS.indexOf(v)?i=s?[a(c[0]),a(c[1])]:[a(c),a(c)]:-1!==I.SET_OPS.indexOf(v)&&(i=s?c.map(a):[a(c)]),i}function k(v){return function(c){c=f(v,c);var i=Math.min(c[0],c[1]),s=Math.max(c[0],c[1]);return{start:i,end:s,size:s-i}}}function T(v){return function(c){return{start:c=f(v,c),end:1/0,size:1/0}}}se.exports={"[]":k("[]"),"][":k("]["),">":T(">"),"<":T("<"),"=":T("=")}},67217:function(se){"use strict";se.exports=function(U,r,I,C){var f=C("contours.start"),k=C("contours.end"),T=!1===f||!1===k,v=I("contours.size");!(T?r.autocontour=!0:I("autocontour",!1))&&v||I("ncontours")}},84857:function(se,U,r){"use strict";var I=r(71828);function C(f){return I.extendFlat({},f,{edgepaths:I.extendDeep([],f.edgepaths),paths:I.extendDeep([],f.paths),starts:I.extendDeep([],f.starts)})}se.exports=function(f,k){var T,v,c,i=function(o){return o.reverse()},s=function(o){return o};switch(k){case"=":case"<":return f;case">":for(1!==f.length&&I.warn("Contour data invalid for the specified inequality operation."),v=f[0],T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=i(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=i(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=i(v.starts[T]);return f;case"][":var a=i;i=s,s=a;case"[]":for(2!==f.length&&I.warn("Contour data invalid for the specified inequality range operation."),v=C(f[0]),c=C(f[1]),T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=i(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=i(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=i(v.starts[T]);for(;c.edgepaths.length;)v.edgepaths.push(s(c.edgepaths.shift()));for(;c.paths.length;)v.paths.push(s(c.paths.shift()));for(;c.starts.length;)v.starts.push(s(c.starts.shift()));return[v]}}},13031:function(se,U,r){"use strict";var I=r(71828),C=r(67684),f=r(73927),k=r(83179),T=r(67217),v=r(8724),c=r(58623),i=r(70600);se.exports=function(s,a,o,l){function u(g,h){return I.coerce(s,a,i,g,h)}if(C(s,a,u,l)){f(s,a,l,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var d="constraint"===u("contours.type");u("connectgaps",I.isArray1D(a.z)),d?k(s,a,u,l,o):(T(s,a,u,function(g){return I.coerce2(s,a,i,g)}),v(s,a,u,l)),a.contours&&"heatmap"===a.contours.coloring&&c(u,l)}else a.visible=!1}},87558:function(se,U,r){"use strict";var I=r(71828),C=r(64237),f=r(53572);se.exports=function(k,T,v){for(var c="constraint"===k.type?C[k._operation](k.value):k,i=c.size,s=[],a=f(c),o=v.trace._carpetTrace,l=o?{xaxis:o.aaxis,yaxis:o.baxis,x:v.a,y:v.b}:{xaxis:T.xaxis,yaxis:T.yaxis,x:v.x,y:v.y},u=c.start;u<a;u+=i)if(s.push(I.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:v.z,smoothing:v.trace.line.smoothing},l)),s.length>1e3){I.warn("Too many contours, clipping at 1000",k);break}return s}},53572:function(se){"use strict";se.exports=function(U){return U.end+U.size/1e6}},81696:function(se,U,r){"use strict";var I=r(71828),C=r(36914);function f(v,c,i,s){return Math.abs(v[0]-c[0])<i&&Math.abs(v[1]-c[1])<s}function k(v,c,i,s,a){var o,fe,pe,xe,Ee,l=c.join(","),u=v.crossings[l],d=(pe=c,xe=0,Ee=0,(fe=u)>20&&i?208===fe||1114===fe?xe=0===pe[0]?1:-1:Ee=0===pe[1]?1:-1:-1!==C.BOTTOMSTART.indexOf(fe)?Ee=1:-1!==C.LEFTSTART.indexOf(fe)?xe=1:-1!==C.TOPSTART.indexOf(fe)?Ee=-1:xe=-1,[xe,Ee]),g=[T(v,c,[-d[0],-d[1]])],h=v.z.length,w=v.z[0].length,y=c.slice(),p=d.slice();for(o=0;o<1e4;o++){if(u>20?v.crossings[l]=C.SADDLEREMAINDER[u=C.CHOOSESADDLE[u][(d[0]||d[1])<0?0:1]]:delete v.crossings[l],!(d=C.NEWDELTA[u])){I.log("Found bad marching index:",u,c,v.level);break}if(g.push(T(v,c,d)),c[0]+=d[0],c[1]+=d[1],l=c.join(","),f(g[g.length-1],g[g.length-2],s,a)&&g.pop(),c[0]===y[0]&&c[1]===y[1]&&d[0]===p[0]&&d[1]===p[1]||i&&(d[0]&&(c[0]<0||c[0]>w-2)||d[1]&&(c[1]<0||c[1]>h-2)))break;u=v.crossings[l]}1e4===o&&I.log("Infinite loop in contour?");var x,b,M,m,D,S,O,P,R,F,B,J,z,$,G,H=f(g[0],g[g.length-1],s,a),X=0,K=.2*v.smoothing,ue=[],ae=0;for(o=1;o<g.length;o++)$=(J=g[o])[2]-(z=g[o-1])[2],G=J[3]-z[3],X+=O=Math.sqrt($*$+G*G),ue.push(O);var ne=X/ue.length*K;function Q(fe){return g[fe%g.length]}for(o=g.length-2;o>=ae;o--)if((x=ue[o])<ne){for(M=0,b=o-1;b>=ae&&x+ue[b]<ne;b--)x+=ue[b];if(H&&o===g.length-2)for(M=0;M<b&&x+ue[M]<ne;M++)x+=ue[M];D=o-b+M+1,S=Math.floor((o+b+M+2)/2),m=H||o!==g.length-2?H||-1!==b?D%2?Q(S):[(Q(S)[0]+Q(S+1)[0])/2,(Q(S)[1]+Q(S+1)[1])/2]:g[0]:g[g.length-1],g.splice(b+1,o-b+1,m),o=b+1,M&&(ae=M),H&&(o===g.length-2?g[M]=g[g.length-1]:0===o&&(g[g.length-1]=g[0]))}for(g.splice(0,ae),o=0;o<g.length;o++)g[o].length=2;if(!(g.length<2))if(H)g.pop(),v.paths.push(g);else{i||I.log("Unclosed interior contour?",v.level,y.join(","),g.join("L"));var ie=!1;for(P=0;P<v.edgepaths.length;P++)if(F=v.edgepaths[P],!ie&&f(F[0],g[g.length-1],s,a)){g.pop(),ie=!0;var le=!1;for(R=0;R<v.edgepaths.length;R++)if(f((B=v.edgepaths[R])[B.length-1],g[0],s,a)){le=!0,g.shift(),v.edgepaths.splice(P,1),R===P?v.paths.push(g.concat(B)):(R>P&&R--,v.edgepaths[R]=B.concat(g,F));break}le||(v.edgepaths[P]=g.concat(F))}for(P=0;P<v.edgepaths.length&&!ie;P++)f((F=v.edgepaths[P])[F.length-1],g[0],s,a)&&(g.shift(),v.edgepaths[P]=F.concat(g),ie=!0);ie||v.edgepaths.push(g)}}function T(v,c,i){var s=c[0]+Math.max(i[0],0),a=c[1]+Math.max(i[1],0),o=v.z[a][s],l=v.xaxis,u=v.yaxis;if(i[1]){var d=(v.level-o)/(v.z[a][s+1]-o),g=(1!==d?(1-d)*l.c2l(v.x[s]):0)+(0!==d?d*l.c2l(v.x[s+1]):0);return[l.c2p(l.l2c(g),!0),u.c2p(v.y[a],!0),s+d,a]}var h=(v.level-o)/(v.z[a+1][s]-o),w=(1!==h?(1-h)*u.c2l(v.y[a]):0)+(0!==h?h*u.c2l(v.y[a+1]):0);return[l.c2p(v.x[s],!0),u.c2p(u.l2c(w),!0),s,a+h]}se.exports=function(v,c,i){var s,a,o,l;for(c=c||.01,i=i||.01,a=0;a<v.length;a++){for(o=v[a],l=0;l<o.starts.length;l++)k(o,o.starts[l],"edge",c,i);for(s=0;Object.keys(o.crossings).length&&s<1e4;)s++,k(o,Object.keys(o.crossings)[0].split(",").map(Number),void 0,c,i);1e4===s&&I.log("Infinite loop in contour?")}}},52421:function(se,U,r){"use strict";var I=r(7901),C=r(46248);se.exports=function(f,k,T,v,c){c||(c={}),c.isContour=!0;var i=C(f,k,T,v,c);return i&&i.forEach(function(s){var a=s.trace;"constraint"===a.contours.type&&(a.fillcolor&&I.opacity(a.fillcolor)?s.color=I.addOpacity(a.fillcolor,1):a.contours.showlines&&I.opacity(a.line.color)&&(s.color=I.addOpacity(a.line.color,1)))}),i}},99442:function(se,U,r){"use strict";se.exports={attributes:r(70600),supplyDefaults:r(13031),calc:r(27529),plot:r(29854).plot,style:r(84426),colorbar:r(90654),hoverPoints:r(52421),moduleType:"trace",name:"contour",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f,k,T){if(T||(T={}),C("contours.showlabels")){var v=f.font;I.coerceFont(C,"contours.labelfont",{family:v.family,size:v.size,color:k}),C("contours.labelformat")}!1!==T.hasHover&&C("zhoverformat")}},86068:function(se,U,r){"use strict";var I=r(39898),C=r(21081),f=r(53572);se.exports=function(k){var T=k.contours,v=T.start,c=f(T),i=T.size||1,s=Math.floor((c-v)/i)+1,a="lines"===T.coloring?0:1,o=C.extractOpts(k);isFinite(i)||(i=1,s=1);var l,u,d=o.reversescale?C.flipScale(o.colorscale):o.colorscale,g=d.length,h=new Array(g),w=new Array(g);if("heatmap"===T.coloring){var y=o.min,p=o.max;for(u=0;u<g;u++)h[u]=(l=d[u])[0]*(p-y)+y,w[u]=l[1];var _=I.extent([y,p,T.start,T.start+i*(s-1)]),x=_[y<p?0:1],b=_[y<p?1:0];x!==y&&(h.splice(0,0,x),w.splice(0,0,w[0])),b!==p&&(h.push(b),w.push(w[w.length-1]))}else for(u=0;u<g;u++)h[u]=((l=d[u])[0]*(s+a-1)-a/2)*i+v,w[u]=l[1];return C.makeColorScaleFunc({domain:h,range:w},{noNumericCheck:!0})}},87678:function(se,U,r){"use strict";var I=r(36914);function C(f,k){var T=(k[0][0]>f?0:1)+(k[0][1]>f?0:2)+(k[1][1]>f?0:4)+(k[1][0]>f?0:8);return 5===T||10===T?f>(k[0][0]+k[0][1]+k[1][0]+k[1][1])/4?5===T?713:1114:5===T?104:208:15===T?0:T}se.exports=function(f){var k,T,v,c,i,s,a,o,l,u=f[0].z,d=u.length,g=u[0].length,h=2===d||2===g;for(T=0;T<d-1;T++)for(c=[],0===T&&(c=c.concat(I.BOTTOMSTART)),T===d-2&&(c=c.concat(I.TOPSTART)),k=0;k<g-1;k++)for(v=c.slice(),0===k&&(v=v.concat(I.LEFTSTART)),k===g-2&&(v=v.concat(I.RIGHTSTART)),i=k+","+T,s=[[u[T][k],u[T][k+1]],[u[T+1][k],u[T+1][k+1]]],l=0;l<f.length;l++)(a=C((o=f[l]).level,s))&&(o.crossings[i]=a,-1!==v.indexOf(a)&&(o.starts.push([k,T]),h&&-1!==v.indexOf(a,v.indexOf(a)+1)&&o.starts.push([k,T])))}},29854:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(21081),T=r(63893),v=r(89298),c=r(21994),i=r(50347),s=r(87678),a=r(81696),o=r(87558),l=r(84857),u=r(20083),d=r(36914),g=d.LABELOPTIMIZER;function h(p,_){var x,b,M,m,D,S,P="",R=0,F=p.edgepaths.map(function(H,X){return X}),B=!0;function J(H){return Math.abs(H[1]-_[2][1])<.01}function $(H){return Math.abs(H[0]-_[2][0])<.01}for(;F.length;){for(S=f.smoothopen(p.edgepaths[R],p.smoothing),P+=B?S:S.replace(/^M/,"L"),F.splice(F.indexOf(R),1),x=p.edgepaths[R][p.edgepaths[R].length-1],m=-1,M=0;M<4;M++){if(!x){C.log("Missing end?",R,p);break}for(Math.abs(x[1]-_[0][1])<.01&&!$(x)?b=_[1]:Math.abs(x[0]-_[0][0])<.01?b=_[0]:J(x)?b=_[3]:$(x)&&(b=_[2]),D=0;D<p.edgepaths.length;D++){var G=p.edgepaths[D][0];Math.abs(x[0]-b[0])<.01?Math.abs(x[0]-G[0])<.01&&(G[1]-x[1])*(b[1]-G[1])>=0&&(b=G,m=D):Math.abs(x[1]-b[1])<.01?Math.abs(x[1]-G[1])<.01&&(G[0]-x[0])*(b[0]-G[0])>=0&&(b=G,m=D):C.log("endpt to newendpt is not vert. or horz.",x,b,G)}if(x=b,m>=0)break;P+="L"+b}if(m===p.edgepaths.length){C.log("unclosed perimeter path");break}(B=-1===F.indexOf(R=m))&&(R=F[0],P+="Z")}for(R=0;R<p.paths.length;R++)P+=f.smoothclosed(p.paths[R],p.smoothing);return P}function w(p,_,x,b){var M=_.width/2,m=_.height/2,D=p.x,S=p.y,O=p.theta,P=Math.cos(O)*M,R=Math.sin(O)*M,F=(D>b.center?b.right-D:D-b.left)/(P+Math.abs(Math.sin(O)*m)),B=(S>b.middle?b.bottom-S:S-b.top)/(Math.abs(R)+Math.cos(O)*m);if(F<1||B<1)return 1/0;var J=g.EDGECOST*(1/(F-1)+1/(B-1));J+=g.ANGLECOST*O*O;for(var z=D-P,$=S-R,G=D+P,H=S+R,X=0;X<x.length;X++){var K=x[X],ue=Math.cos(K.theta)*K.width/2,ae=Math.sin(K.theta)*K.width/2,ne=2*C.segmentDistance(z,$,G,H,K.x-ue,K.y-ae,K.x+ue,K.y+ae)/(_.height+K.height),Q=K.level===_.level,ie=Q?g.SAMELEVELDISTANCE:1;if(ne<=ie)return 1/0;J+=g.NEIGHBORCOST*(Q?g.SAMELEVELFACTOR:1)/(ne-ie)}return J}function y(p){var _,x,b=p.trace._emptypoints,M=[],m=p.z.length,D=p.z[0].length,S=[];for(_=0;_<D;_++)S.push(1);for(_=0;_<m;_++)M.push(S.slice());for(_=0;_<b.length;_++)M[(x=b[_])[0]][x[1]]=0;return p.zmask=M,M}U.plot=function(p,_,x,b){var M=_.xaxis,m=_.yaxis;C.makeTraceGroups(b,x,"contour").each(function(D){var S=I.select(this),O=D[0],R=O.x,F=O.y,B=O.trace.contours,J=o(B,_,O),z=C.ensureSingle(S,"g","heatmapcoloring"),$=[];"heatmap"===B.coloring&&($=[D]),i(p,_,$,z),s(J),a(J);var Q,ie,le,G=M.c2p(R[0],!0),H=M.c2p(R[R.length-1],!0),X=m.c2p(F[0],!0),K=m.c2p(F[F.length-1],!0),ue=[[G,K],[H,K],[H,X],[G,X]],ae=J;"constraint"===B.type&&(ae=l(J,B._operation)),Q=ue,ie=B,(le=C.ensureSingle(S,"g","contourbg").selectAll("path").data("fill"===ie.coloring?[0]:[])).enter().append("path"),le.exit().remove(),le.attr("d","M"+Q.join("L")+"Z").style("stroke","none"),function(ne,Q,ie,le){var fe="fill"===le.coloring||"constraint"===le.type&&"="!==le._operation,he="M"+ie.join("L")+"Z";fe&&u(Q,le);var pe=C.ensureSingle(ne,"g","contourfill").selectAll("path").data(fe?Q:[]);pe.enter().append("path"),pe.exit().remove(),pe.each(function(xe){var Ee=(xe.prefixBoundary?he:"")+h(xe,ie);Ee?I.select(this).attr("d",Ee).style("stroke","none"):I.select(this).remove()})}(S,ae,ue,B),function(ne,Q,ie,le,fe){var he=ie._context.staticPlot,pe=C.ensureSingle(ne,"g","contourlines"),xe=!1!==fe.showlines,Ee=fe.showlabels,Re=xe&&Ee,ke=U.createLines(pe,xe||Ee,Q,he),Te=U.createLineClip(pe,Re,ie,le.trace.uid),we=ne.selectAll("g.contourlabels").data(Ee?[0]:[]);if(we.exit().remove(),we.enter().append("g").classed("contourlabels",!0),Ee){var je=[],Ce=[];C.clearLocationCache();var Ie=U.labelFormatter(ie,le),ge=f.tester.append("text").attr("data-notex",1).call(f.font,fe.labelfont),me=Q[0].xaxis,ce=Q[0].yaxis,Ae=me._length,Ne=ce._length,De=me.range,qe=ce.range,Ke=C.aggNums(Math.min,null,le.x),be=C.aggNums(Math.max,null,le.x),Oe=C.aggNums(Math.min,null,le.y),Le=C.aggNums(Math.max,null,le.y),Ue=Math.max(me.c2p(Ke,!0),0),Ze=Math.min(me.c2p(be,!0),Ae),We=Math.max(ce.c2p(Le,!0),0),et=Math.min(ce.c2p(Oe,!0),Ne),nt={};De[0]<De[1]?(nt.left=Ue,nt.right=Ze):(nt.left=Ze,nt.right=Ue),qe[0]<qe[1]?(nt.top=We,nt.bottom=et):(nt.top=et,nt.bottom=We),nt.middle=(nt.top+nt.bottom)/2,nt.center=(nt.left+nt.right)/2,je.push([[nt.left,nt.top],[nt.right,nt.top],[nt.right,nt.bottom],[nt.left,nt.bottom]]);var ct=Math.sqrt(Ae*Ae+Ne*Ne),yt=d.LABELDISTANCE*ct/Math.max(1,Q.length/d.LABELINCREASE);ke.each(function(ut){var Ct=U.calcTextOpts(ut.level,Ie,ge,ie);I.select(this).selectAll("path").each(function(){var Dt=C.getVisibleSegment(this,nt,Ct.height/2);if(Dt&&!(Dt.len<(Ct.width+Ct.height)*d.LABELMIN))for(var vt=Math.min(Math.ceil(Dt.len/yt),d.LABELMAX),mt=0;mt<vt;mt++){var Lt=U.findBestTextLocation(this,Dt,Ct,Ce,nt);if(!Lt)break;U.addLabelData(Lt,Ct,Ce,je)}})}),ge.remove(),U.drawLabels(we,Ce,ie,Te,Re?je:null)}Ee&&!xe&&ke.remove()}(S,J,p,O,B),function(ne,Q,ie,le,fe){var he=le.trace,xe="clip"+he.uid,Ee=ie._fullLayout._clips.selectAll("#"+xe).data(he.connectgaps?[]:[0]);if(Ee.enter().append("clipPath").classed("contourclip",!0).attr("id",xe),Ee.exit().remove(),!1===he.connectgaps){var Re={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:Q.xaxis,yaxis:Q.yaxis,x:le.x,y:le.y,z:y(le),smoothing:0};s([Re]),a([Re]),u([Re],{type:"levels"}),C.ensureSingle(Ee,"path","").attr("d",(Re.prefixBoundary?"M"+fe.join("L")+"Z":"")+h(Re,fe))}else xe=null;f.setClipUrl(ne,xe,ie)}(S,_,p,O,ue)})},U.createLines=function(p,_,x,b){var M=x[0].smoothing,m=p.selectAll("g.contourlevel").data(_?x:[]);if(m.exit().remove(),m.enter().append("g").classed("contourlevel",!0),_){var D=m.selectAll("path.openline").data(function(O){return O.pedgepaths||O.edgepaths});D.exit().remove(),D.enter().append("path").classed("openline",!0),D.attr("d",function(O){return f.smoothopen(O,M)}).style("stroke-miterlimit",1).style("vector-effect",b?"none":"non-scaling-stroke");var S=m.selectAll("path.closedline").data(function(O){return O.ppaths||O.paths});S.exit().remove(),S.enter().append("path").classed("closedline",!0),S.attr("d",function(O){return f.smoothclosed(O,M)}).style("stroke-miterlimit",1).style("vector-effect",b?"none":"non-scaling-stroke")}return m},U.createLineClip=function(p,_,x,b){var M=_?"clipline"+b:null,m=x._fullLayout._clips.selectAll("#"+M).data(_?[0]:[]);return m.exit().remove(),m.enter().append("clipPath").classed("contourlineclip",!0).attr("id",M),f.setClipUrl(p,M,x),m},U.labelFormatter=function(p,_){var x=p._fullLayout,b=_.trace,M=b.contours,m={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(M.labelformat)m.tickformat=M.labelformat,c(m,x);else{var D=k.extractOpts(b);if(D&&D.colorbar&&D.colorbar._axis)m=D.colorbar._axis;else{if("constraint"===M.type){var S=M.value;m.range=Array.isArray(S)?[S[0],S[S.length-1]]:[S,S]}else m.range=[M.start,M.end],m.nticks=(M.end-M.start)/M.size;m.range[0]===m.range[1]&&(m.range[1]+=m.range[0]||1),m.nticks||(m.nticks=1e3),c(m,x),v.prepTicks(m),m._tmin=null,m._tmax=null}}return function(O){return v.tickText(m,O).text}},U.calcTextOpts=function(p,_,x,b){var M=_(p);x.text(M).call(T.convertToTspans,b);var m=x.node(),D=f.bBox(m,!0);return{text:M,width:D.width,height:D.height,fontSize:+m.style["font-size"].replace("px",""),level:p,dy:(D.top+D.bottom)/2}},U.findBestTextLocation=function(p,_,x,b,M){var m,D,S,O,P,R=x.width;_.isClosed?(m=_.min+(D=_.len/g.INITIALSEARCHPOINTS)/2,S=_.max):(m=_.min+(D=(_.len-R)/(g.INITIALSEARCHPOINTS+1))+R/2,S=_.max-(D+R)/2);for(var F=1/0,B=0;B<g.ITERATIONS;B++){for(var J=m;J<S;J+=D){var z=C.getTextLocation(p,_.total,J,R),$=w(z,x,b,M);$<F&&(F=$,P=z,O=J)}if(F>2*g.MAXCOST)break;B&&(D/=2),S=(m=O-D/2)+1.5*D}if(F<=g.MAXCOST)return P},U.addLabelData=function(p,_,x,b){var M=_.fontSize,m=_.width+M/3,D=Math.max(0,_.height-M/3),S=p.x,O=p.y,P=p.theta,R=Math.sin(P),F=Math.cos(P),B=function(z,$){return[S+z*F-$*R,O+z*R+$*F]},J=[B(-m/2,-D/2),B(-m/2,D/2),B(m/2,D/2),B(m/2,-D/2)];x.push({text:_.text,x:S,y:O,dy:_.dy,theta:P,level:_.level,width:m,height:D}),b.push(J)},U.drawLabels=function(p,_,x,b,M){var m=p.selectAll("text").data(_,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(m.exit().remove(),m.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var P=O.x+Math.sin(O.theta)*O.dy,R=O.y-Math.cos(O.theta)*O.dy;I.select(this).text(O.text).attr({x:P,y:R,transform:"rotate("+180*O.theta/Math.PI+" "+P+" "+R+")"}).call(T.convertToTspans,x)}),M){for(var D="",S=0;S<M.length;S++)D+="M"+M[S].join("L")+"Z";C.ensureSingle(b,"path","").attr("d",D)}}},18670:function(se,U,r){"use strict";var I=r(89298),C=r(71828);function f(k,T,v){var c={type:"linear",range:[k,T]};return I.autoTicks(c,(T-k)/(v||15)),c}se.exports=function(k,T){var v=k.contours;if(k.autocontour){var c=k.zmin,i=k.zmax;(k.zauto||void 0===c)&&(c=C.aggNums(Math.min,null,T)),(k.zauto||void 0===i)&&(i=C.aggNums(Math.max,null,T));var s=f(c,i,k.ncontours);v.size=s.dtick,v.start=I.tickFirst(s),s.range.reverse(),v.end=I.tickFirst(s),v.start===c&&(v.start+=v.size),v.end===i&&(v.end-=v.size),v.start>v.end&&(v.start=v.end=(v.start+v.end)/2),k._input.contours||(k._input.contours={}),C.extendFlat(k._input.contours,{start:v.start,end:v.end,size:v.size}),k._input.autocontour=!0}else if("constraint"!==v.type){var a,o=v.start,l=v.end,u=k._input.contours;o>l&&(v.start=u.start=l,l=v.end=u.end=o,o=v.start),v.size>0||(a=o===l?1:f(o,l,k.ncontours).dtick,u.size=v.size=a)}}},84426:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(70035),k=r(86068);se.exports=function(T){var v=I.select(T).selectAll("g.contour");v.style("opacity",function(c){return c[0].trace.opacity}),v.each(function(c){var i=I.select(this),s=c[0].trace,a=s.contours,o=s.line,l=a.size||1,u=a.start,d="constraint"===a.type,g=!d&&"lines"===a.coloring,h=!d&&"fill"===a.coloring,w=g||h?k(s):null;i.selectAll("g.contourlevel").each(function(_){I.select(this).selectAll("path").call(C.lineGroupStyle,o.width,g?w(_.level):o.color,o.dash)});var y=a.labelfont;if(i.selectAll("g.contourlabels text").each(function(_){C.font(I.select(this),{family:y.family,size:y.size,color:y.color||(g?w(_.level):o.color)})}),d)i.selectAll("g.contourfill path").style("fill",s.fillcolor);else if(h){var p;i.selectAll("g.contourfill path").style("fill",function(_){return void 0===p&&(p=_.level),w(_.level+.5*l)}),void 0===p&&(p=u),i.selectAll("g.contourbg path").style("fill",w(p-.5*l))}}),f(T)}},8724:function(se,U,r){"use strict";var I=r(1586),C=r(14523);se.exports=function(f,k,T,v,c){var i,s=T("contours.coloring"),a="";"fill"===s&&(i=T("contours.showlines")),!1!==i&&("lines"!==s&&(a=T("line.color","#000")),T("line.width",.5),T("line.dash")),"none"!==s&&(!0!==f.showlegend&&(k.showlegend=!1),k._dfltShowLegend=!1,I(f,k,v,T,{prefix:"",cLetter:"z"})),T("line.smoothing"),C(T,v,a,c)}},88085:function(se,U,r){"use strict";var I=r(21606),C=r(70600),f=r(50693),k=r(1426).extendFlat,T=C.contours;se.exports=k({carpet:{valType:"string",editType:"calc"},z:I.z,a:I.x,a0:I.x0,da:I.dx,b:I.y,b0:I.y0,db:I.dy,text:I.text,hovertext:I.hovertext,transpose:I.transpose,atype:I.xtype,btype:I.ytype,fillcolor:C.fillcolor,autocontour:C.autocontour,ncontours:C.ncontours,contours:{type:T.type,start:T.start,end:T.end,size:T.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:T.showlines,showlabels:T.showlabels,labelfont:T.labelfont,labelformat:T.labelformat,operation:T.operation,value:T.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:C.line.color,width:C.line.width,dash:C.line.dash,smoothing:C.line.smoothing,editType:"plot"},transforms:void 0},f("",{cLetter:"z",autoColorDflt:!1}))},59885:function(se,U,r){"use strict";var I=r(78803),C=r(71828),f=r(68296),k=r(4742),T=r(824),v=r(43907),c=r(70769),i=r(75005),s=r(22882),a=r(18670);se.exports=function(o,l){var u=l._carpetTrace=s(o,l);if(u&&u.visible&&"legendonly"!==u.visible){if(!l.a||!l.b){var d=o.data[u.index],g=o.data[l.index];g.a||(g.a=d.a),g.b||(g.b=d.b),i(g,l,l._defaultColor,o._fullLayout)}var h=function(w,y){var p,_,x,b,M,m,D,S=y._carpetTrace,O=S.aaxis,P=S.baxis;O._minDtick=0,P._minDtick=0,C.isArray1D(y.z)&&f(y,O,P,"a","b",["z"]),p=y._a=y._a||y.a,b=y._b=y._b||y.b,p=p?O.makeCalcdata(y,"_a"):[],b=b?P.makeCalcdata(y,"_b"):[],_=y.a0||0,x=y.da||1,M=y.b0||0,m=y.db||1,D=y._z=k(y._z||y.z,y.transpose),y._emptypoints=v(D),T(D,y._emptypoints);var R=C.maxRowLength(D),z={a:c(y,"scaled"===y.xtype?"":p,_,x,R,O),b:c(y,"scaled"===y.ytype?"":b,M,m,D.length,P),z:D};return"levels"===y.contours.type&&"none"!==y.contours.coloring&&I(w,y,{vals:D,containerStr:"",cLetter:"z"}),[z]}(o,l);return a(l,l._z),h}}},75005:function(se,U,r){"use strict";var I=r(71828),C=r(67684),f=r(88085),k=r(83179),T=r(67217),v=r(8724);se.exports=function(c,i,s,a){function o(l,u){return I.coerce(c,i,f,l,u)}if(o("carpet"),c.a&&c.b){if(!C(c,i,o,a,"a","b"))return void(i.visible=!1);o("text"),"constraint"===o("contours.type")?k(c,i,o,a,s,{hasHover:!1}):(T(c,i,o,function(l){return I.coerce2(c,i,f,l)}),v(c,i,o,a,{hasHover:!1}))}else i._defaultColor=s,i._length=null}},93740:function(se,U,r){"use strict";se.exports={attributes:r(88085),supplyDefaults:r(75005),colorbar:r(90654),calc:r(59885),plot:r(51048),style:r(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:r(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function(se,U,r){"use strict";var I=r(39898),C=r(27669),f=r(67961),k=r(91424),T=r(71828),v=r(87678),c=r(81696),i=r(29854),s=r(36914),a=r(84857),o=r(87558),l=r(20083),u=r(22882),d=r(4536);function g(y,p,_){var x=y.getPointAtLength(p),b=y.getPointAtLength(_),M=b.x-x.x,m=b.y-x.y,D=Math.sqrt(M*M+m*m);return[M/D,m/D]}function h(y){var p=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/p,y[1]/p]}function w(y,p){var _=Math.abs(y[0]*p[0]+y[1]*p[1]);return Math.sqrt(1-_*_)/_}se.exports=function(y,p,_,x){var b=p.xaxis,M=p.yaxis;T.makeTraceGroups(x,_,"contour").each(function(m){var D=I.select(this),S=m[0],O=S.trace,P=O._carpetTrace=u(y,O),R=y.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var F=S.a,B=S.b,J=O.contours,z=o(J,p,S),$="constraint"===J.type,G=J._operation,H=$?"="===G?"lines":"fill":J.coloring,X=[[F[0],B[B.length-1]],[F[F.length-1],B[B.length-1]],[F[F.length-1],B[0]],[F[0],B[0]]];v(z),c(z,1e-8*(F[F.length-1]-F[0]),1e-8*(B[B.length-1]-B[0]));var ae,ne,Q,ie,le=z;"constraint"===J.type&&(le=a(z,G)),function(xe,Ee){var Re,ke,Te,we,je,Ce,Ie,ge,me;for(Re=0;Re<xe.length;Re++){for(je=(we=xe[Re]).pedgepaths=[],Ce=we.ppaths=[],ke=0;ke<we.edgepaths.length;ke++){for(me=we.edgepaths[ke],Ie=[],Te=0;Te<me.length;Te++)Ie[Te]=Ee(me[Te]);je.push(Ie)}for(ke=0;ke<we.paths.length;ke++){for(me=we.paths[ke],ge=[],Te=0;Te<me.length;Te++)ge[Te]=Ee(me[Te]);Ce.push(ge)}}}(z,pe);var fe=[];for(ie=R.clipsegments.length-1;ie>=0;ie--)ne=C([],(ae=R.clipsegments[ie]).x,b.c2p),Q=C([],ae.y,M.c2p),ne.reverse(),Q.reverse(),fe.push(f(ne,Q,ae.bicubic));var he="M"+fe.join("L")+"Z";(function(xe,Ee,Re,ke,Te,we){var je,Ce,Ie,ge,me=T.ensureSingle(xe,"g","contourbg").selectAll("path").data("fill"!==we||Te?[]:[0]);me.enter().append("path"),me.exit().remove();var ce=[];for(ge=0;ge<Ee.length;ge++)Ce=C([],(je=Ee[ge]).x,Re.c2p),Ie=C([],je.y,ke.c2p),ce.push(f(Ce,Ie,je.bicubic));me.attr("d","M"+ce.join("L")+"Z").style("stroke","none")})(D,R.clipsegments,b,M,$,H),function(xe,Ee,Re,ke,Te,we,je,Ce,Ie,ge,me){var ce="fill"===ge;ce&&l(Te,xe.contours);var Ae=T.ensureSingle(Ee,"g","contourfill").selectAll("path").data(ce?Te:[]);Ae.enter().append("path"),Ae.exit().remove(),Ae.each(function(Ne){var De=(Ne.prefixBoundary?me:"")+function(qe,Ke,be,Oe,Le,Ue,Ze,We){var et,nt,ct,yt,ut,Ct,Dt,vt="",mt=Ke.edgepaths.map(function(xt,He){return He}),Lt=!0,Ft=1e-4*Math.abs(be[0][0]-be[2][0]),Rt=1e-4*Math.abs(be[0][1]-be[2][1]);function Wt(xt){return Math.abs(xt[1]-be[0][1])<Rt}function Ht(xt){return Math.abs(xt[1]-be[2][1])<Rt}function it(xt){return Math.abs(xt[0]-be[0][0])<Ft}function st(xt){return Math.abs(xt[0]-be[2][0])<Ft}function Je(xt,He){var Ge,dt,ht,kt,St="";for(Wt(xt)&&!st(xt)||Ht(xt)&&!it(xt)?(kt=Le.aaxis,ht=d(Le,Ue,[xt[0],He[0]],.5*(xt[1]+He[1]))):(kt=Le.baxis,ht=d(Le,Ue,.5*(xt[0]+He[0]),[xt[1],He[1]])),Ge=1;Ge<ht.length;Ge++)for(St+=kt.smoothing?"C":"L",dt=0;dt<ht[Ge].length;dt++){var Et=ht[Ge][dt];St+=[Ze.c2p(Et[0]),We.c2p(Et[1])]+" "}return St}for(et=0,nt=null;mt.length;){for(nt&&(vt+=Je(nt,Ke.edgepaths[et][0])),Dt=k.smoothopen(Ke.edgepaths[et].map(Oe),Ke.smoothing),vt+=Lt?Dt:Dt.replace(/^M/,"L"),mt.splice(mt.indexOf(et),1),nt=Ke.edgepaths[et][Ke.edgepaths[et].length-1],ut=-1,yt=0;yt<4;yt++){if(!nt){T.log("Missing end?",et,Ke);break}for(Wt(nt)&&!st(nt)?ct=be[1]:it(nt)?ct=be[0]:Ht(nt)?ct=be[3]:st(nt)&&(ct=be[2]),Ct=0;Ct<Ke.edgepaths.length;Ct++){var pt=Ke.edgepaths[Ct][0];Math.abs(nt[0]-ct[0])<Ft?Math.abs(nt[0]-pt[0])<Ft&&(pt[1]-nt[1])*(ct[1]-pt[1])>=0&&(ct=pt,ut=Ct):Math.abs(nt[1]-ct[1])<Rt?Math.abs(nt[1]-pt[1])<Rt&&(pt[0]-nt[0])*(ct[0]-pt[0])>=0&&(ct=pt,ut=Ct):T.log("endpt to newendpt is not vert. or horz.",nt,ct,pt)}if(ut>=0)break;vt+=Je(nt,ct),nt=ct}if(ut===Ke.edgepaths.length){T.log("unclosed perimeter path");break}(Lt=-1===mt.indexOf(et=ut))&&(et=mt[0],vt+=Je(nt,ct)+"Z",nt=null)}for(et=0;et<Ke.paths.length;et++)vt+=k.smoothclosed(Ke.paths[et].map(Oe),Ke.smoothing);return vt}(0,Ne,we,je,Ce,Ie,Re,ke);De?I.select(this).attr("d",De).style("stroke","none"):I.select(this).remove()})}(O,D,b,M,le,X,pe,P,R,H,he),function(xe,Ee,Re,ke,Te,we,je){var Ce=Re._context.staticPlot,Ie=T.ensureSingle(xe,"g","contourlines"),ge=!1!==Te.showlines,me=Te.showlabels,ce=ge&&me,Ae=i.createLines(Ie,ge||me,Ee,Ce),Ne=i.createLineClip(Ie,ce,Re,ke.trace.uid),De=xe.selectAll("g.contourlabels").data(me?[0]:[]);if(De.exit().remove(),De.enter().append("g").classed("contourlabels",!0),me){var be=we.xaxis._length,Oe=we.yaxis._length,Le=[[[0,0],[be,0],[be,Oe],[0,Oe]]],Ue=[];T.clearLocationCache();var Ze=i.labelFormatter(Re,ke),We=k.tester.append("text").attr("data-notex",1).call(k.font,Te.labelfont),et={left:0,right:be,center:be/2,top:0,bottom:Oe,middle:Oe/2},nt=Math.sqrt(be*be+Oe*Oe),ct=s.LABELDISTANCE*nt/Math.max(1,Ee.length/s.LABELINCREASE);Ae.each(function(yt){var ut=i.calcTextOpts(yt.level,Ze,We,Re);I.select(this).selectAll("path").each(function(Ct){var vt=T.getVisibleSegment(this,et,ut.height/2);if(vt&&(function(Rt,Wt,Ht,it,st,Je){for(var ot,pt=0;pt<Ht.pedgepaths.length;pt++)Wt===Ht.pedgepaths[pt]&&(ot=Ht.edgepaths[pt]);if(ot){var xt=st.a[0],He=st.a[st.a.length-1],Ge=st.b[0],dt=st.b[st.b.length-1],ht=g(Rt,0,1),kt=g(Rt,it.total,it.total-1),St=wt(ot[0],ht),Et=it.total-wt(ot[ot.length-1],kt);it.min<St&&(it.min=St),it.max>Et&&(it.max=Et),it.len=it.max-it.min}function wt(Nt,_t){var Mt,Pt=0;return(Math.abs(Nt[0]-xt)<.1||Math.abs(Nt[0]-He)<.1)&&(Mt=h(st.dxydb_rough(Nt[0],Nt[1],.1)),Pt=Math.max(Pt,Je*w(_t,Mt)/2)),(Math.abs(Nt[1]-Ge)<.1||Math.abs(Nt[1]-dt)<.1)&&(Mt=h(st.dxyda_rough(Nt[0],Nt[1],.1)),Pt=Math.max(Pt,Je*w(_t,Mt)/2)),Pt}}(this,Ct,yt,vt,je,ut.height),!(vt.len<(ut.width+ut.height)*s.LABELMIN)))for(var mt=Math.min(Math.ceil(vt.len/ct),s.LABELMAX),Lt=0;Lt<mt;Lt++){var Ft=i.findBestTextLocation(this,vt,ut,Ue,et);if(!Ft)break;i.addLabelData(Ft,ut,Ue,Le)}})}),We.remove(),i.drawLabels(De,Ue,Re,Ne,ce?Le:null)}me&&!ge&&Ae.remove()}(D,z,y,S,J,p,P),k.setClipUrl(D,P._clipPathId,y)}function pe(xe){var Ee=P.ab2xy(xe[0],xe[1],!0);return[b.c2p(Ee[0]),M.c2p(Ee[1])]}})}},64096:function(se,U,r){"use strict";var I=r(50693),C=r(5386).fF,f=r(9012),k=r(99181),T=r(1426).extendFlat;se.exports=T({lon:k.lon,lat:k.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:k.text,hovertext:k.hovertext,hoverinfo:T({},f.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:C(),showlegend:T({},f.showlegend,{dflt:!1})},I("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function(se,U,r){"use strict";var I=r(92770),C=r(71828).isArrayOrTypedArray,f=r(50606).BADNUM,k=r(78803),T=r(71828)._;se.exports=function(v,c){for(var i=c._length,s=new Array(i),a=c.z,o=C(a)&&a.length,l=0;l<i;l++){var u=s[l]={},d=c.lon[l],g=c.lat[l];if(u.lonlat=I(d)&&I(g)?[+d,+g]:[f,f],o){var h=a[l];u.z=I(h)?h:f}}return k(v,c,{vals:o?a:[0,1],containerStr:"",cLetter:"z"}),i&&(s[0].t={labels:{lat:T(v,"lat:")+" ",lon:T(v,"lon:")+" "}}),s}},52414:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(7901),k=r(21081),T=r(50606).BADNUM,v=r(18214).makeBlank;se.exports=function(c){var i=c[0].trace,s=!0===i.visible&&0!==i._length,a=i._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:v()};if(!s)return a;var o,l=[],u=i.z,d=i.radius,g=C.isArrayOrTypedArray(u)&&u.length,h=C.isArrayOrTypedArray(d);for(o=0;o<c.length;o++){var w=c[o],y=w.lonlat;if(y[0]!==T){var p={};if(g){var _=w.z;p.z=_!==T?_:0}h&&(p.r=I(d[o])&&d[o]>0?+d[o]:0),l.push({type:"Feature",geometry:{type:"Point",coordinates:y},properties:p})}}var x=k.extractOpts(i),b=x.reversescale?k.flipScale(x.colorscale):x.colorscale,M=b[0][1],m=["interpolate",["linear"],["heatmap-density"],0,f.opacity(M)<1?M:f.addOpacity(M,0)];for(o=1;o<b.length;o++)m.push(b[o][0],b[o][1]);return C.extendFlat(a.heatmap.paint,{"heatmap-weight":g?["interpolate",["linear"],["get","z"],x.min,0,x.max,1]:1/(x.max-x.min),"heatmap-color":m,"heatmap-radius":h?{type:"identity",property:"r"}:i.radius,"heatmap-opacity":i.opacity}),a.geojson={type:"FeatureCollection",features:l},a.heatmap.layout.visibility="visible",a}},79429:function(se,U,r){"use strict";var I=r(71828),C=r(1586),f=r(64096);se.exports=function(k,T,v,c){function i(l,u){return I.coerce(k,T,f,l,u)}var s=i("lon")||[],a=i("lat")||[],o=Math.min(s.length,a.length);o?(T._length=o,i("z"),i("radius"),i("below"),i("text"),i("hovertext"),i("hovertemplate"),C(k,T,c,i,{prefix:"",cLetter:"z"})):T.visible=!1}},62474:function(se){"use strict";se.exports=function(U,r){return U.lon=r.lon,U.lat=r.lat,U.z=r.z,U}},84684:function(se,U,r){"use strict";var I=r(89298),C=r(28178).hoverPoints,f=r(28178).getExtraText;se.exports=function(k,T,v){var c=C(k,T,v);if(c){var i=c[0],s=i.cd,a=s[0].trace,o=s[i.index];if(delete i.color,"z"in o){var l=i.subplot.mockAxis;i.z=o.z,i.zLabel=I.tickText(l,l.c2l(o.z),"hover").text}return i.extraText=f(a,o,s[0].t.labels),[i]}}},93814:function(se,U,r){"use strict";se.exports={attributes:r(64096),supplyDefaults:r(79429),colorbar:r(61243),formatLabels:r(15636),calc:r(85070),plot:r(7336),hoverPoints:r(84684),eventData:r(62474),getBelow:function(I,C){for(var f=C.getMapLayers(),k=0;k<f.length;k++){var T=f[k],v=T.id;if("symbol"===T.type&&"string"==typeof v&&-1===v.indexOf("plotly-"))return v}},moduleType:"trace",name:"densitymapbox",basePlotModule:r(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function(se,U,r){"use strict";var I=r(52414),C=r(77734).traceLayerPrefix;function f(T,v){this.type="densitymapbox",this.subplot=T,this.uid=v,this.sourceId="source-"+v,this.layerList=[["heatmap",C+v+"-heatmap"]],this.below=null}var k=f.prototype;k.update=function(T){var v=this.subplot,c=this.layerList,i=I(T),s=v.belowLookup["trace-"+this.uid];v.map.getSource(this.sourceId).setData(i.geojson),s!==this.below&&(this._removeLayers(),this._addLayers(i,s),this.below=s);for(var a=0;a<c.length;a++){var o=c[a],u=o[1],d=i[o[0]];v.setOptions(u,"setLayoutProperty",d.layout),"visible"===d.layout.visibility&&v.setOptions(u,"setPaintProperty",d.paint)}},k._addLayers=function(T,v){for(var c=this.subplot,i=this.layerList,s=this.sourceId,a=0;a<i.length;a++){var o=i[a],l=o[0],u=T[l];c.addLayer({type:l,id:o[1],source:s,layout:u.layout,paint:u.paint},v)}},k._removeLayers=function(){for(var T=this.subplot.map,v=this.layerList,c=v.length-1;c>=0;c--)T.removeLayer(v[c][1])},k.dispose=function(){var T=this.subplot.map;this._removeLayers(),T.removeSource(this.sourceId)},se.exports=function(T,v){var c=v[0].trace,i=new f(T,c.uid),s=i.sourceId,a=I(v),o=i.below=T.belowLookup["trace-"+c.uid];return T.map.addSource(s,{type:"geojson",data:a.geojson}),i._addLayers(a,o),i}},49789:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){for(var k=0;k<C.length;k++)C[k].i=k;I.mergeArray(f.text,C,"tx"),I.mergeArray(f.hovertext,C,"htx");var T=f.marker;if(T){I.mergeArray(T.opacity,C,"mo"),I.mergeArray(T.color,C,"mc");var v=T.line;v&&(I.mergeArray(v.color,C,"mlc"),I.mergeArrayCastPositive(v.width,C,"mlw"))}}},1285:function(se,U,r){"use strict";var I,C=r(1486),f=r(82196).line,k=r(9012),T=r(12663).axisHoverFormat,v=r(5386).fF,c=r(5386).si,i=r(18517),s=r(1426).extendFlat,a=r(7901);se.exports={x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:C.hovertext,hovertemplate:v({},{keys:i.eventDataKeys}),hoverinfo:s({},k.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:c({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:C.text,textposition:C.textposition,insidetextanchor:s({},C.insidetextanchor,{dflt:"middle"}),textangle:s({},C.textangle,{dflt:0}),textfont:C.textfont,insidetextfont:C.insidetextfont,outsidetextfont:C.outsidetextfont,constraintext:C.constraintext,cliponaxis:C.cliponaxis,orientation:s({},C.orientation,{}),offset:s({},C.offset,{arrayOk:!1}),width:s({},C.width,{arrayOk:!1}),marker:(I=s({},C.marker),delete I.pattern,I),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:s({},f.color,{dflt:a.defaultLine}),width:s({},f.width,{dflt:0,editType:"plot"}),dash:f.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:C.offsetgroup,alignmentgroup:C.alignmentgroup}},9532:function(se,U,r){"use strict";var I=r(89298),C=r(42973),f=r(49789),k=r(66279),T=r(50606).BADNUM;function v(c){return c===T?0:c}se.exports=function(c,i){var s,a,o,l,u,d,g,h,w=I.getFromId(c,i.xaxis||"x"),y=I.getFromId(c,i.yaxis||"y");"h"===i.orientation?(s=w.makeCalcdata(i,"x"),o=y.makeCalcdata(i,"y"),l=C(i,y,"y",o),u=!!i.yperiodalignment,d="y"):(s=y.makeCalcdata(i,"y"),o=w.makeCalcdata(i,"x"),l=C(i,w,"x",o),u=!!i.xperiodalignment,d="x"),a=l.vals;var p,_=Math.min(a.length,s.length),x=new Array(_);for(i._base=[],g=0;g<_;g++){s[g]<0&&(s[g]=T);var b=!1;s[g]!==T&&g+1<_&&s[g+1]!==T&&(b=!0),h=x[g]={p:a[g],s:s[g],cNext:b},i._base[g]=-.5*h.s,u&&(x[g].orig_p=o[g],x[g][d+"End"]=l.ends[g],x[g][d+"Start"]=l.starts[g]),i.ids&&(h.id=String(i.ids[g])),0===g&&(x[0].vTotal=0),x[0].vTotal+=v(h.s),h.begR=v(h.s)/v(x[0].s)}for(g=0;g<_;g++)(h=x[g]).s!==T&&(h.sumR=h.s/x[0].vTotal,h.difR=void 0!==p?h.s/p:1,p=h.s);return f(x,i),k(x,i),x}},18517:function(se){"use strict";se.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function(se,U,r){"use strict";var I=r(11661).setGroupPositions;se.exports=function(C,f){var k,T,v=C._fullLayout,c=C._fullData,i=C.calcdata,s=f.xaxis,a=f.yaxis,o=[],l=[],u=[];for(T=0;T<c.length;T++){var d=c[T];!0===d.visible&&d.xaxis===s._id&&d.yaxis===a._id&&"funnel"===d.type&&(k=i[T],"h"===d.orientation?u.push(k):l.push(k),o.push(k))}var h={mode:v.funnelmode,norm:v.funnelnorm,gap:v.funnelgap,groupgap:v.funnelgroupgap};for(I(C,s,a,l,h),I(C,a,s,u,h),T=0;T<o.length;T++){k=o[T];for(var w=0;w<k.length;w++)w+1<k.length&&(k[w].nextP0=k[w+1].p0,k[w].nextS0=k[w+1].s0,k[w].nextP1=k[w+1].p1,k[w].nextS1=k[w+1].s1)}}},26199:function(se,U,r){"use strict";var I=r(71828),C=r(26125),f=r(90769).handleText,k=r(67513),T=r(73927),v=r(1285),c=r(7901);se.exports={supplyDefaults:function(i,s,a,o){function l(h,w){return I.coerce(i,s,v,h,w)}if(k(i,s,o,l)){T(i,s,o,l),l("xhoverformat"),l("yhoverformat"),l("orientation",s.y&&!s.x?"v":"h"),l("offset"),l("width");var u=l("text");l("hovertext"),l("hovertemplate");var d=l("textposition");f(i,s,o,l,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===s.textposition||s.texttemplate||l("textinfo",Array.isArray(u)?"text+value":"value");var g=l("marker.color",a);l("marker.line.color",c.defaultLine),l("marker.line.width"),l("connector.visible")&&(l("connector.fillcolor",(w=I.isArrayOrTypedArray(h=g)?"#000":h,c.addOpacity(w,.5*c.opacity(w)))),l("connector.line.width")&&(l("connector.line.color"),l("connector.line.dash")))}else s.visible=!1;var h,w},crossTraceDefaults:function(i,s){var a,o;function l(d){return I.coerce(o._input,o,v,d)}if("group"===s.funnelmode)for(var u=0;u<i.length;u++)a=(o=i[u])._input,C(a,o,s,l)}}},34598:function(se){"use strict";se.exports=function(U,r){return U.x="xVal"in r?r.xVal:r.x,U.y="yVal"in r?r.yVal:r.y,"percentInitial"in r&&(U.percentInitial=r.percentInitial),"percentPrevious"in r&&(U.percentPrevious=r.percentPrevious),"percentTotal"in r&&(U.percentTotal=r.percentTotal),r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),U}},63341:function(se,U,r){"use strict";var I=r(7901).opacity,C=r(95423).hoverOnBars,f=r(71828).formatPercent;se.exports=function(k,T,v,c,i){var _,x,b,M,m,s=C(k,T,v,c,i);if(s){var a=s.cd,o=a[0].trace,u=a[s.index];s[("h"===o.orientation?"x":"y")+"LabelVal"]=u.s,s.percentInitial=u.begR,s.percentInitialLabel=f(u.begR,1),s.percentPrevious=u.difR,s.percentPreviousLabel=f(u.difR,1),s.percentTotal=u.sumR,s.percentTotalLabel=f(u.sumR,1);var d=u.hi||o.hoverinfo,g=[];if(d&&"none"!==d&&"skip"!==d){var h="all"===d,w=d.split("+"),y=function(p){return h||-1!==w.indexOf(p)};y("percent initial")&&g.push(s.percentInitialLabel+" of initial"),y("percent previous")&&g.push(s.percentPreviousLabel+" of previous"),y("percent total")&&g.push(s.percentTotalLabel+" of total")}return s.extraText=g.join("<br>"),s.color=(x=o.marker,M=(_=u).mlc||x.line.color,m=_.mlw||x.line.width,I(b=_.mc||x.color)?b:I(M)&&m?M:void 0),[s]}}},51759:function(se,U,r){"use strict";se.exports={attributes:r(1285),layoutAttributes:r(10440),supplyDefaults:r(26199).supplyDefaults,crossTraceDefaults:r(26199).crossTraceDefaults,supplyLayoutDefaults:r(93138),calc:r(9532),crossTraceCalc:r(8984),plot:r(80461),style:r(68266).style,hoverPoints:r(63341),eventData:r(34598),selectPoints:r(81974),moduleType:"trace",name:"funnel",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function(se){"use strict";se.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function(se,U,r){"use strict";var I=r(71828),C=r(10440);se.exports=function(f,k,T){var v=!1;function c(a,o){return I.coerce(f,k,C,a,o)}for(var i=0;i<T.length;i++){var s=T[i];if(s.visible&&"funnel"===s.type){v=!0;break}}v&&(c("funnelmode"),c("funnelgap",.2),c("funnelgroupgap"))}},80461:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(50606).BADNUM,T=r(17295),v=r(72597).clearMinTextSize;function c(i,s,a,o){var l=[],u=[],d=o?s:a,g=o?a:s;return l[0]=d.c2p(i.s0,!0),u[0]=g.c2p(i.p0,!0),l[1]=d.c2p(i.s1,!0),u[1]=g.c2p(i.p1,!0),l[2]=d.c2p(i.nextS0,!0),u[2]=g.c2p(i.nextP0,!0),l[3]=d.c2p(i.nextS1,!0),u[3]=g.c2p(i.nextP1,!0),o?[l,u]:[u,l]}se.exports=function(i,s,a,o){var u,d,w,y,l=i._fullLayout;v("funnel",l),u=i,w=(d=s).xaxis,y=d.yaxis,C.makeTraceGroups(o,a,"trace bars").each(function(p){var _=I.select(this),x=p[0].trace,b=C.ensureSingle(_,"g","regions");if(x.connector&&x.connector.visible){var M="h"===x.orientation,m=b.selectAll("g.region").data(C.identity);m.enter().append("g").classed("region",!0),m.exit().remove();var D=m.size();m.each(function(S,O){if(O===D-1||S.cNext){var P=c(S,w,y,M),R=P[0],F=P[1],B="";R[0]!==k&&F[0]!==k&&R[1]!==k&&F[1]!==k&&R[2]!==k&&F[2]!==k&&R[3]!==k&&F[3]!==k&&(B+=M?"M"+R[0]+","+F[1]+"L"+R[2]+","+F[2]+"H"+R[3]+"L"+R[1]+","+F[1]+"Z":"M"+R[1]+","+F[1]+"L"+R[2]+","+F[3]+"V"+F[2]+"L"+R[1]+","+F[0]+"Z"),""===B&&(B="M0,0Z"),C.ensureSingle(I.select(this),"path").attr("d",B).call(f.setClipUrl,d.layerClipId,u)}})}else b.remove()}),function(u,d,g,h){var w=d.xaxis,y=d.yaxis;C.makeTraceGroups(h,g,"trace bars").each(function(p){var _=I.select(this),x=p[0].trace,b=C.ensureSingle(_,"g","lines");if(x.connector&&x.connector.visible&&x.connector.line.width){var M="h"===x.orientation,m=b.selectAll("g.line").data(C.identity);m.enter().append("g").classed("line",!0),m.exit().remove();var D=m.size();m.each(function(S,O){if(O===D-1||S.cNext){var P=c(S,w,y,M),R=P[0],F=P[1],B="";void 0!==R[3]&&void 0!==F[3]&&(M?(B+="M"+R[0]+","+F[1]+"L"+R[2]+","+F[2],B+="M"+R[1]+","+F[1]+"L"+R[3]+","+F[2]):(B+="M"+R[1]+","+F[1]+"L"+R[2]+","+F[3],B+="M"+R[1]+","+F[0]+"L"+R[2]+","+F[2])),""===B&&(B="M0,0Z"),C.ensureSingle(I.select(this),"path").attr("d",B).call(f.setClipUrl,d.layerClipId,u)}})}else b.remove()})}(i,s,a,o),T.plot(i,s,a,o,{mode:l.funnelmode,norm:l.funnelmode,gap:l.funnelgap,groupgap:l.funnelgroupgap})}},68266:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(7901),k=r(37822).DESELECTDIM,T=r(16688),v=r(72597).resizeText,c=T.styleTextPoints;se.exports={style:function(i,s,a){var o=a||I.select(i).selectAll("g.funnellayer").selectAll("g.trace");v(i,o,"funnel"),o.style("opacity",function(l){return l[0].trace.opacity}),o.each(function(l){var u=I.select(this),d=l[0].trace;u.selectAll(".point > path").each(function(g){if(!g.isBlank){var h=d.marker;I.select(this).call(f.fill,g.mc||h.color).call(f.stroke,g.mlc||h.line.color).call(C.dashLine,h.line.dash,g.mlw||h.line.width).style("opacity",d.selectedpoints&&!g.selected?k:1)}}),c(u,d,i),u.selectAll(".regions").each(function(){I.select(this).selectAll("path").style("stroke-width",0).call(f.fill,d.connector.fillcolor)}),u.selectAll(".lines").each(function(){var g=d.connector.line;C.lineGroupStyle(I.select(this).selectAll("path"),g.width,g.color,g.dash)})})}}},86807:function(se,U,r){"use strict";var I=r(34e3),C=r(9012),f=r(27670).Y,k=r(5386).fF,T=r(5386).si,v=r(1426).extendFlat;se.exports={labels:I.labels,label0:I.label0,dlabel:I.dlabel,values:I.values,marker:{colors:I.marker.colors,line:{color:v({},I.marker.line.color,{dflt:null}),width:v({},I.marker.line.width,{dflt:1}),editType:"calc"},pattern:I.marker.pattern,editType:"calc"},text:I.text,hovertext:I.hovertext,scalegroup:v({},I.scalegroup,{}),textinfo:v({},I.textinfo,{flags:["label","text","value","percent"]}),texttemplate:T({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:v({},C.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:k({},{keys:["label","color","value","text","percent"]}),textposition:v({},I.textposition,{values:["inside","none"],dflt:"inside"}),textfont:I.textfont,insidetextfont:I.insidetextfont,title:{text:I.title.text,font:I.title.font,position:v({},I.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:f({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function(se,U,r){"use strict";var I=r(74875);U.name="funnelarea",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},89574:function(se,U,r){"use strict";var I=r(32354);se.exports={calc:function(C,f){return I.calc(C,f)},crossTraceCalc:function(C){I.crossTraceCalc(C,{type:"funnelarea"})}}},86282:function(se,U,r){"use strict";var I=r(71828),C=r(86807),f=r(27670).c,k=r(90769).handleText,T=r(37434).handleLabelsAndValues,v=r(37434).handleMarkerDefaults;se.exports=function(c,i,s,a){function o(_,x){return I.coerce(c,i,C,_,x)}var l=o("labels"),u=o("values"),d=T(l,u),g=d.len;if(i._hasLabels=d.hasLabels,i._hasValues=d.hasValues,!i._hasLabels&&i._hasValues&&(o("label0"),o("dlabel")),g){i._length=g,v(c,i,a,o),o("scalegroup");var h,w=o("text"),y=o("texttemplate");if(y||(h=o("textinfo",Array.isArray(w)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),y||h&&"none"!==h){var p=o("textposition");k(c,i,a,o,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}f(i,a,o),o("title.text")&&(o("title.position"),I.coerceFont(o,"title.font",a.font)),o("aspectratio"),o("baseratio")}else i.visible=!1}},10421:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"funnelarea",basePlotModule:r(6452),categories:["pie-like","funnelarea","showLegend"],attributes:r(86807),layoutAttributes:r(80097),supplyDefaults:r(86282),supplyLayoutDefaults:r(57402),calc:r(89574).calc,crossTraceCalc:r(89574).crossTraceCalc,plot:r(79187),style:r(71858),styleOne:r(63463),meta:{}}},80097:function(se,U,r){"use strict";var I=r(92774).hiddenlabels;se.exports={hiddenlabels:I,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function(se,U,r){"use strict";var I=r(71828),C=r(80097);se.exports=function(f,k){function T(v,c){return I.coerce(f,k,C,v,c)}T("hiddenlabels"),T("funnelareacolorway",k.colorway),T("extendfunnelareacolors")}},79187:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(71828),k=f.strScale,T=f.strTranslate,v=r(63893),c=r(17295).toMoveInsideBar,i=r(72597),s=i.recordMinTextSize,a=i.clearMinTextSize,o=r(53581),l=r(14575),u=l.attachFxHandlers,d=l.determineInsideTextFont,g=l.layoutAreas,h=l.prerenderTitles,w=l.positionTitleOutside,y=l.formatSliceLabel;function p(_,x){return"l"+(x[0]-_[0])+","+(x[1]-_[1])}se.exports=function(_,x){var b=_._context.staticPlot,M=_._fullLayout;a("funnelarea",M),h(x,_),g(x,M._size),f.makeTraceGroups(M._funnelarealayer,x,"trace").each(function(m){var D=I.select(this),S=m[0],O=S.trace;(function(P){if(P.length){var R=P[0],F=R.trace,B=F.aspectratio,J=F.baseratio;J>.999&&(J=.999);var z,$,G,H=Math.pow(J,2),X=R.vTotal,K=X,ue=X*H/(1-H)/X,ae=[];for(ae.push(Ie()),$=P.length-1;$>-1;$--)(G=P[$]).hidden||(ue+=G.v/K,ae.push(Ie()));var Q=1/0,ie=-1/0;for($=0;$<ae.length;$++)z=ae[$],Q=Math.min(Q,z[1]),ie=Math.max(ie,z[1]);for($=0;$<ae.length;$++)ae[$][1]-=(ie+Q)/2;var fe=R.r,he=(ie-Q)/2,pe=fe/ae[ae.length-1][0],xe=fe/he*B;for(R.r=xe*he,$=0;$<ae.length;$++)ae[$][0]*=pe,ae[$][1]*=xe;var Ee,Re,ke=[-(z=ae[0])[0],z[1]],Te=[z[0],z[1]],we=0;for($=P.length-1;$>-1;$--)if(!(G=P[$]).hidden){var je=ae[we+=1][0],Ce=ae[we][1];G.TL=[-je,Ce],G.TR=[je,Ce],G.BL=ke,G.BR=Te,G.pxmid=[.5*((Ee=G.TR)[0]+(Re=G.BR)[0]),.5*(Ee[1]+Re[1])],ke=G.TL,Te=G.TR}}function Ie(){var ge,me={x:ge=Math.sqrt(ue),y:-ge};return[me.x,me.y]}})(m),D.each(function(){var P=I.select(this).selectAll("g.slice").data(m);P.enter().append("g").classed("slice",!0),P.exit().remove(),P.each(function(F,B){if(F.hidden)I.select(this).selectAll("path,g").remove();else{F.pointNumber=F.i,F.curveNumber=O.index;var J=S.cx,z=S.cy,$=I.select(this),G=$.selectAll("path.surface").data([F]);G.enter().append("path").classed("surface",!0).style({"pointer-events":b?"none":"all"}),$.call(u,_,m);var H="M"+(J+F.TR[0])+","+(z+F.TR[1])+p(F.TR,F.BR)+p(F.BR,F.BL)+p(F.BL,F.TL)+"Z";G.attr("d",H),y(_,F,S);var X=o.castOption(O.textposition,F.pts),K=$.selectAll("g.slicetext").data(F.text&&"none"!==X?[0]:[]);K.enter().append("g").classed("slicetext",!0),K.exit().remove(),K.each(function(){var ue=f.ensureSingle(I.select(this),"text","",function(pe){pe.attr("data-notex",1)}),ae=f.ensureUniformFontSize(_,d(O,F,M.font));ue.text(F.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(C.font,ae).call(v.convertToTspans,_);var ne,Q,ie,le=C.bBox(ue.node()),fe=Math.min(F.BL[1],F.BR[1])+z,he=Math.max(F.TL[1],F.TR[1])+z;Q=Math.max(F.TL[0],F.BL[0])+J,ie=Math.min(F.TR[0],F.BR[0])+J,(ne=c(Q,ie,fe,he,le,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ae.size,s(O.type,ne,M),m[B].transform=ne,f.setTransormAndDisplay(ue,ne)})}});var R=I.select(this).selectAll("g.titletext").data(O.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var F=f.ensureSingle(I.select(this),"text","",function(z){z.attr("data-notex",1)}),B=O.title.text;O._meta&&(B=f.templateString(B,O._meta)),F.text(B).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(C.font,O.title.font).call(v.convertToTspans,_);var J=w(S,M._size);F.attr("transform",T(J.x,J.y)+k(Math.min(1,J.scale))+T(J.tx,J.ty))})})})}},71858:function(se,U,r){"use strict";var I=r(39898),C=r(63463),f=r(72597).resizeText;se.exports=function(k){var T=k._fullLayout._funnelarealayer.selectAll(".trace");f(k,T,"funnelarea"),T.each(function(v){var c=v[0].trace,i=I.select(this);i.style({opacity:c.opacity}),i.selectAll("path.surface").each(function(s){I.select(this).call(C,s,c,k)})})}},21606:function(se,U,r){"use strict";var I=r(82196),C=r(9012),f=r(41940),k=r(12663).axisHoverFormat,T=r(5386).fF,v=r(5386).si,c=r(50693),i=r(1426).extendFlat;se.exports=i({z:{valType:"data_array",editType:"calc"},x:i({},I.x,{impliedEdits:{xtype:"array"}}),x0:i({},I.x0,{impliedEdits:{xtype:"scaled"}}),dx:i({},I.dx,{impliedEdits:{xtype:"scaled"}}),y:i({},I.y,{impliedEdits:{ytype:"array"}}),y0:i({},I.y0,{impliedEdits:{ytype:"scaled"}}),dy:i({},I.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:i({},I.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:i({},I.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:i({},I.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:i({},I.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:i({},I.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:i({},I.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:T(),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:f({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:i({},C.showlegend,{dflt:!1})},{transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},90757:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(89298),k=r(42973),T=r(17562),v=r(78803),c=r(68296),i=r(4742),s=r(824),a=r(43907),o=r(70769),l=r(50606).BADNUM;function u(d){for(var g=[],h=d.length,w=0;w<h;w++){var y=d[w];y!==l&&g.push(y)}return g}se.exports=function(d,g){var h,w,y,p,_,x,b,M,m,D,S,O=f.getFromId(d,g.xaxis||"x"),P=f.getFromId(d,g.yaxis||"y"),R=I.traceIs(g,"contour"),F=I.traceIs(g,"histogram"),B=I.traceIs(g,"gl2d"),J=R?"best":g.zsmooth;if(O._minDtick=0,P._minDtick=0,F)p=(S=T(d,g)).orig_x,h=S.x,w=S.x0,y=S.dx,M=S.orig_y,_=S.y,x=S.y0,b=S.dy,m=S.z;else{var z=g.z;C.isArray1D(z)?(c(g,O,P,"x","y",["z"]),h=g._x,_=g._y,z=g._z):(p=g.x?O.makeCalcdata(g,"x"):[],M=g.y?P.makeCalcdata(g,"y"):[],h=k(g,O,"x",p).vals,_=k(g,P,"y",M).vals,g._x=h,g._y=_),w=g.x0,y=g.dx,x=g.y0,b=g.dy,m=i(z,g,O,P)}function $(ie){J=g._input.zsmooth=g.zsmooth=!1,C.warn('cannot use zsmooth: "fast": '+ie)}function G(ie){if(ie.length>1){var le=(ie[ie.length-1]-ie[0])/(ie.length-1),fe=Math.abs(le/100);for(D=0;D<ie.length-1;D++)if(Math.abs(ie[D+1]-ie[D]-le)>fe)return!1}return!0}(O.rangebreaks||P.rangebreaks)&&(m=function(ie,le,fe){for(var he=[],pe=-1,xe=0;xe<fe.length;xe++)if(le[xe]!==l){he[++pe]=[];for(var Ee=0;Ee<fe[xe].length;Ee++)ie[Ee]!==l&&he[pe].push(fe[xe][Ee])}return he}(h,_,m),F||(h=u(h),_=u(_),g._x=h,g._y=_)),F||!R&&!g.connectgaps||(g._emptypoints=a(m),s(m,g._emptypoints)),g._islinear=!1,"log"===O.type||"log"===P.type?"fast"===J&&$("log axis found"):G(h)?G(_)?g._islinear=!0:"fast"===J&&$("y scale is not linear"):"fast"===J&&$("x scale is not linear");var H=C.maxRowLength(m),X="scaled"===g.xtype?"":h,K=o(g,X,w,y,H,O),ue="scaled"===g.ytype?"":_,ae=o(g,ue,x,b,m.length,P);B||(g._extremes[O._id]=f.findExtremes(O,K),g._extremes[P._id]=f.findExtremes(P,ae));var ne={x:K,y:ae,z:m,text:g._text||g.text,hovertext:g._hovertext||g.hovertext};if(g.xperiodalignment&&p&&(ne.orig_x=p),g.yperiodalignment&&M&&(ne.orig_y=M),X&&X.length===K.length-1&&(ne.xCenter=X),ue&&ue.length===ae.length-1&&(ne.yCenter=ue),F&&(ne.xRanges=S.xRanges,ne.yRanges=S.yRanges,ne.pts=S.pts),R||v(d,g,{vals:m,cLetter:"z"}),R&&g.contours&&"heatmap"===g.contours.coloring){var Q={type:"contour"===g.type?"heatmap":"histogram2d",xcalendar:g.xcalendar,ycalendar:g.ycalendar};ne.xfill=o(Q,X,w,y,H,O),ne.yfill=o(Q,ue,x,b,m.length,P)}return[ne]}},4742:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(50606).BADNUM;se.exports=function(k,T,v,c){var i,s,a,o,l,u;function d(_){if(I(_))return+_}if(T&&T.transpose){for(i=0,l=0;l<k.length;l++)i=Math.max(i,k[l].length);if(0===i)return!1;a=function(_){return _.length},o=function(_,x,b){return(_[b]||[])[x]}}else i=k.length,a=function(_,x){return _[x].length},o=function(_,x,b){return(_[x]||[])[b]};function h(_){if(T&&"carpet"!==T.type&&"contourcarpet"!==T.type&&_&&"category"===_.type&&T["_"+_._id.charAt(0)].length){var x=_._id.charAt(0),b={},M=T["_"+x+"CategoryMap"]||T[x];for(l=0;l<M.length;l++)b[M[l]]=l;return function(m){var D=b[_._categories[m]];return D+1?D:f}}return C.identity}var w=h(v),y=h(c);c&&"category"===c.type&&(i=c._categories.length);var _,x,b,p=new Array(i);for(l=0;l<i;l++)for(s=v&&"category"===v.type?v._categories.length:a(k,l),p[l]=new Array(s),u=0;u<s;u++)p[l][u]=d((_=k,x=y(l),b=w(u),x===f||b===f?f:o(_,x,b)));return p}},61243:function(se){"use strict";se.exports={min:"zmin",max:"zmax"}},68296:function(se,U,r){"use strict";var I=r(71828),C=r(50606).BADNUM,f=r(42973);se.exports=function(k,T,v,c,i,s){var a=k._length,o=T.makeCalcdata(k,c),l=v.makeCalcdata(k,i);o=f(k,T,c,o).vals,l=f(k,v,i,l).vals;var u,d,g,h,w=k.text,y=void 0!==w&&I.isArray1D(w),p=k.hovertext,_=void 0!==p&&I.isArray1D(p),x=I.distinctVals(o),b=x.vals,M=I.distinctVals(l),m=M.vals,D=[],S=m.length,O=b.length;for(u=0;u<s.length;u++)D[u]=I.init2dArray(S,O);y&&(g=I.init2dArray(S,O)),_&&(h=I.init2dArray(S,O));var P=I.init2dArray(S,O);for(u=0;u<a;u++)if(o[u]!==C&&l[u]!==C){var R=I.findBin(o[u]+x.minDiff/2,b),F=I.findBin(l[u]+M.minDiff/2,m);for(d=0;d<s.length;d++)D[d][F][R]=k[s[d]][u],P[F][R]=u;y&&(g[F][R]=w[u]),_&&(h[F][R]=p[u])}for(k["_"+c]=b,k["_"+i]=m,d=0;d<s.length;d++)k["_"+s[d]]=D[d];y&&(k._text=g),_&&(k._hovertext=h),T&&"category"===T.type&&(k["_"+c+"CategoryMap"]=b.map(function(J){return T._categories[J]})),v&&"category"===v.type&&(k["_"+i+"CategoryMap"]=m.map(function(J){return v._categories[J]})),k._after2before=P}},76382:function(se,U,r){"use strict";var I=r(71828),C=r(67684),f=r(58623),k=r(73927),T=r(49901),v=r(1586),c=r(21606);se.exports=function(i,s,a,o){function l(u,d){return I.coerce(i,s,c,u,d)}C(i,s,l,o)?(k(i,s,o,l),l("xhoverformat"),l("yhoverformat"),l("text"),l("hovertext"),l("hovertemplate"),f(l,o),T(i,s,l,o),l("hoverongaps"),l("connectgaps",I.isArray1D(s.z)&&!1!==s.zsmooth),v(i,s,o,l,{prefix:"",cLetter:"z"})):s.visible=!1}},43907:function(se,U,r){"use strict";var I=r(71828).maxRowLength;se.exports=function(C){var f,k,T,v,c,i,s,a,o=[],l={},u=[],d=C[0],g=[],h=[0,0,0],w=I(C);for(k=0;k<C.length;k++)for(f=g,g=d,d=C[k+1]||[],T=0;T<w;T++)void 0===g[T]&&((i=(void 0!==g[T-1]?1:0)+(void 0!==g[T+1]?1:0)+(void 0!==f[T]?1:0)+(void 0!==d[T]?1:0))?(0===k&&i++,0===T&&i++,k===C.length-1&&i++,T===g.length-1&&i++,i<4&&(l[[k,T]]=[k,T,i]),o.push([k,T,i])):u.push([k,T]));for(;u.length;){for(s={},a=!1,c=u.length-1;c>=0;c--)(i=((l[[(k=(v=u[c])[0])-1,T=v[1]]]||h)[2]+(l[[k+1,T]]||h)[2]+(l[[k,T-1]]||h)[2]+(l[[k,T+1]]||h)[2])/20)&&(s[v]=[k,T,i],u.splice(c,1),a=!0);if(!a)throw"findEmpties iterated with no new neighbors";for(v in s)l[v]=s[v],o.push(s[v])}return o.sort(function(y,p){return p[2]-y[2]})}},46248:function(se,U,r){"use strict";var I=r(30211),C=r(71828),f=r(89298),k=r(21081).extractOpts;se.exports=function(T,v,c,i,s){s||(s={});var a,o,l,u,d=s.isContour,g=T.cd[0],h=g.trace,w=T.xa,y=T.ya,p=g.x,_=g.y,x=g.z,b=g.xCenter,M=g.yCenter,m=g.zmask,D=h.zhoverformat,S=p,O=_;if(!1!==T.index){try{l=Math.round(T.index[1]),u=Math.round(T.index[0])}catch{return void C.error("Error hovering on heatmap, pointNumber must be [row,col], found:",T.index)}if(l<0||l>=x[0].length||u<0||u>x.length)return}else{if(I.inbox(v-p[0],v-p[p.length-1],0)>0||I.inbox(c-_[0],c-_[_.length-1],0)>0)return;if(d){var P;for(S=[2*p[0]-p[1]],P=1;P<p.length;P++)S.push((p[P]+p[P-1])/2);for(S.push([2*p[p.length-1]-p[p.length-2]]),O=[2*_[0]-_[1]],P=1;P<_.length;P++)O.push((_[P]+_[P-1])/2);O.push([2*_[_.length-1]-_[_.length-2]])}l=Math.max(0,Math.min(S.length-2,C.findBin(v,S))),u=Math.max(0,Math.min(O.length-2,C.findBin(c,O)))}var R,F,B=w.c2p(p[l]),J=w.c2p(p[l+1]),z=y.c2p(_[u]),$=y.c2p(_[u+1]);d?(J=B,a=(R=g.orig_x||p)[l],$=z,o=(F=g.orig_y||_)[u]):(R=g.orig_x||b||p,F=g.orig_y||M||_,a=b?R[l]:(R[l]+R[l+1])/2,o=M?F[u]:(F[u]+F[u+1])/2,w&&"category"===w.type&&(a=p[l]),y&&"category"===y.type&&(o=_[u]),h.zsmooth&&(B=J=w.c2p(a),z=$=y.c2p(o)));var G=x[u][l];if(m&&!m[u][l]&&(G=void 0),void 0!==G||h.hoverongaps){var H;Array.isArray(g.hovertext)&&Array.isArray(g.hovertext[u])?H=g.hovertext[u][l]:Array.isArray(g.text)&&Array.isArray(g.text[u])&&(H=g.text[u][l]);var X=k(h),ue=f.tickText({type:"linear",range:[X.min,X.max],hoverformat:D,_separators:w._separators,_numFormat:w._numFormat},G,"hover").text;return[C.extendFlat(T,{index:h._after2before?h._after2before[u][l]:[u,l],distance:T.maxHoverDistance,spikeDistance:T.maxSpikeDistance,x0:B,x1:J,y0:z,y1:$,xLabelVal:a,yLabelVal:o,zLabelVal:G,zLabel:ue,text:H})]}}},92165:function(se,U,r){"use strict";se.exports={attributes:r(21606),supplyDefaults:r(76382),calc:r(90757),plot:r(50347),colorbar:r(61243),style:r(70035),hoverPoints:r(46248),moduleType:"trace",name:"heatmap",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function(se,U,r){"use strict";var I=r(71828),C=[[-1,0],[1,0],[0,-1],[0,1]];function f(T){return.5-.25*Math.min(1,.5*T)}function k(T,v,c){var i,s,a,o,l,u,d,g,h,w,y,p,_,x=0;for(o=0;o<v.length;o++){for(y=T[s=(i=v[o])[0]][a=i[1]],w=0,h=0,l=0;l<4;l++)(d=T[s+(u=C[l])[0]])&&void 0!==(g=d[a+u[1]])&&(0===w?p=_=g:(p=Math.min(p,g),_=Math.max(_,g)),h++,w+=g);if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";T[s][a]=w/h,void 0===y?h<4&&(x=1):(T[s][a]=(1+c)*T[s][a]-c*y,_>p&&(x=Math.max(x,Math.abs(T[s][a]-y)/(_-p))))}return x}se.exports=function(T,v){var c,i=1;for(k(T,v),c=0;c<v.length&&!(v[c][2]<4);c++);for(v=v.slice(c),c=0;c<100&&i>.01;c++)i=k(T,v,f(i));return i>.01&&I.log("interp2d didn't converge quickly",i),T}},58623:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){C("texttemplate");var k=I.extendFlat({},f.font,{color:"auto",size:"auto"});I.coerceFont(C,"textfont",k)}},70769:function(se,U,r){"use strict";var I=r(73972),C=r(71828).isArrayOrTypedArray;se.exports=function(f,k,T,v,c,i){var s,a,o,l=[],u=I.traceIs(f,"contour"),d=I.traceIs(f,"histogram"),g=I.traceIs(f,"gl2d");if(C(k)&&k.length>1&&!d&&"category"!==i.type){var h=k.length;if(!(h<=c))return k.slice(0,u?c:c+1);if(u||g)l=k.slice(0,c);else if(1===c)l=[k[0]-.5,k[0]+.5];else{for(l=[1.5*k[0]-.5*k[1]],o=1;o<h;o++)l.push(.5*(k[o-1]+k[o]));l.push(1.5*k[h-1]-.5*k[h-2])}if(h<c){var w=l[l.length-1],y=w-l[l.length-2];for(o=h;o<c;o++)l.push(w+=y)}}else{var p=f[i._id.charAt(0)+"calendar"];for(s=d?i.r2c(T,0,p):C(k)&&1===k.length?k[0]:void 0===T?0:("log"===i.type?i.d2c:i.r2c)(T,0,p),a=v||1,o=u||g?0:-.5;o<c;o++)l.push(s+a*o)}return l}},50347:function(se,U,r){"use strict";var I=r(39898),C=r(84267),f=r(73972),k=r(91424),T=r(89298),v=r(71828),c=r(63893),i=r(8225),s=r(7901),a=r(21081).extractOpts,o=r(21081).makeColorScaleFuncFromTrace,l=r(77922),u=r(18783).LINE_SPACING,d=r(3883),g=r(32396).STYLE,h="heatmap-label";function w(b){return b.selectAll("g."+h)}function y(b){w(b).remove()}function p(b,M){var m=M.length-2,D=v.constrain(v.findBin(b,M),0,m),S=M[D],P=v.constrain(D+(b-S)/(M[D+1]-S)-.5,0,m),R=Math.round(P),F=Math.abs(P-R);return P&&P!==m&&F?{bin0:R,frac:F,bin1:Math.round(R+F/(P-R))}:{bin0:R,bin1:R,frac:0}}function _(b,M){var m=M.length-1,D=v.constrain(v.findBin(b,M),0,m),S=M[D],O=(b-S)/(M[D+1]-S)||0;return O<=0?{bin0:D,bin1:D,frac:0}:O<.5?{bin0:D,bin1:D+1,frac:O}:{bin0:D+1,bin1:D,frac:1-O}}function x(b,M,m){b[M]=m[0],b[M+1]=m[1],b[M+2]=m[2],b[M+3]=Math.round(255*m[3])}se.exports=function(b,M,m,D){var S=M.xaxis,O=M.yaxis;v.makeTraceGroups(D,m,"hm").each(function(P){var R,F,B,J,z,$,G,H,X=I.select(this),K=P[0],ue=K.trace,ae=ue.xgap||0,ne=ue.ygap||0,Q=K.z,ie=K.x,le=K.y,fe=K.xCenter,he=K.yCenter,pe=f.traceIs(ue,"contour"),xe=pe?"best":ue.zsmooth,Ee=Q.length,Re=v.maxRowLength(Q),ke=!1,Te=!1;for($=0;void 0===R&&$<ie.length-1;)R=S.c2p(ie[$]),$++;for($=ie.length-1;void 0===F&&$>0;)F=S.c2p(ie[$]),$--;for(F<R&&(B=F,F=R,R=B,ke=!0),$=0;void 0===J&&$<le.length-1;)J=O.c2p(le[$]),$++;for($=le.length-1;void 0===z&&$>0;)z=O.c2p(le[$]),$--;z<J&&(B=J,J=z,z=B,Te=!0),pe&&(fe=ie,he=le,ie=K.xfill,le=K.yfill);var we="default";if(xe?we="best"===xe?"smooth":"fast":ue._islinear&&0===ae&&0===ne&&d()&&(we="fast"),"fast"!==we){var je="best"===xe?0:.5;R=Math.max(-je*S._length,R),F=Math.min((1+je)*S._length,F),J=Math.max(-je*O._length,J),z=Math.min((1+je)*O._length,z)}var Ce,Ie,ge=Math.round(F-R),me=Math.round(z-J);if(R>=S._length||F<=0||J>=O._length||z<=0)return X.selectAll("image").data([]).exit().remove(),void y(X);"fast"===we?(Ce=Re,Ie=Ee):(Ce=ge,Ie=me);var ce=document.createElement("canvas");ce.width=Ce,ce.height=Ie;var Ae,Ne,De=ce.getContext("2d"),qe=o(ue,{noNumericCheck:!0,returnArray:!0});"fast"===we?(Ae=ke?function(Jt){return Re-1-Jt}:v.identity,Ne=Te?function(Jt){return Ee-1-Jt}:v.identity):(Ae=function(Jt){return v.constrain(Math.round(S.c2p(ie[Jt])-R),0,ge)},Ne=function(Jt){return v.constrain(Math.round(O.c2p(le[Jt])-J),0,me)});var Ke,be,Oe,Le,Ue=Ne(0),Ze=[Ue,Ue],We=ke?0:1,et=Te?0:1,nt=0,ct=0,yt=0,ut=0;function Ct(Jt,an){if(void 0!==Jt){var Sn=qe(Jt);return Sn[0]=Math.round(Sn[0]),Sn[1]=Math.round(Sn[1]),Sn[2]=Math.round(Sn[2]),nt+=an,ct+=Sn[0]*an,yt+=Sn[1]*an,ut+=Sn[2]*an,Sn}return[0,0,0,0]}function Dt(Jt,an,Sn,Ln){var Vn=Jt[Sn.bin0];if(void 0===Vn)return Ct(void 0,1);var xn=Jt[Sn.bin1],Qn=an[Sn.bin0],er=an[Sn.bin1];return Ct(Vn+Sn.frac*(xn-Vn||0)+Ln.frac*((Qn-Vn||0)+Sn.frac*(void 0===xn?void 0===er?0:void 0===Qn?2*(er-Vn):2*(2*er-Qn-Vn)/3:void 0===er?void 0===Qn?0:2*(2*Vn-xn-Qn)/3:void 0===Qn?2*(2*er-xn-Vn)/3:er+Vn-xn-Qn)))}if("default"!==we){var vt,mt=0;try{vt=new Uint8Array(Ce*Ie*4)}catch{vt=new Array(Ce*Ie*4)}if("smooth"===we){var Lt,Ft,Rt,Wt=fe||ie,Ht=he||le,it=new Array(Wt.length),st=new Array(Ht.length),Je=new Array(ge),ot=fe?_:p,pt=he?_:p;for($=0;$<Wt.length;$++)it[$]=Math.round(S.c2p(Wt[$])-R);for($=0;$<Ht.length;$++)st[$]=Math.round(O.c2p(Ht[$])-J);for($=0;$<ge;$++)Je[$]=ot($,it);for(G=0;G<me;G++)for(Ft=Q[(Lt=pt(G,st)).bin0],Rt=Q[Lt.bin1],$=0;$<ge;$++,mt+=4)x(vt,mt,Le=Dt(Ft,Rt,Je[$],Lt))}else for(G=0;G<Ee;G++)for(Oe=Q[G],Ze=Ne(G),$=0;$<Re;$++)Le=Ct(Oe[$],1),x(vt,mt=4*(Ze*Re+Ae($)),Le);var xt=De.createImageData(Ce,Ie);try{xt.data.set(vt)}catch{var He=xt.data,Ge=He.length;for(G=0;G<Ge;G++)He[G]=vt[G]}De.putImageData(xt,0,0)}else{var dt=Math.floor(ae/2),ht=Math.floor(ne/2);for(G=0;G<Ee;G++)if(Oe=Q[G],Ze.reverse(),Ze[et]=Ne(G+1),Ze[0]!==Ze[1]&&void 0!==Ze[0]&&void 0!==Ze[1])for(Ke=[be=Ae(0),be],$=0;$<Re;$++)Ke.reverse(),Ke[We]=Ae($+1),Ke[0]!==Ke[1]&&void 0!==Ke[0]&&void 0!==Ke[1]&&(Le=Ct(Oe[$],(Ke[1]-Ke[0])*(Ze[1]-Ze[0])),De.fillStyle="rgba("+Le.join(",")+")",De.fillRect(Ke[0]+dt,Ze[0]+ht,Ke[1]-Ke[0]-ae,Ze[1]-Ze[0]-ne))}ct=Math.round(ct/nt),yt=Math.round(yt/nt),ut=Math.round(ut/nt);var kt=C("rgb("+ct+","+yt+","+ut+")");b._hmpixcount=(b._hmpixcount||0)+nt,b._hmlumcount=(b._hmlumcount||0)+nt*kt.getLuminance();var St=X.selectAll("image").data(P);St.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),St.attr({height:me,width:ge,x:R,y:J,"xlink:href":ce.toDataURL("image/png")}),"fast"!==we||xe||St.attr("style",g),y(X);var Et=ue.texttemplate;if(Et){var wt=a(ue),Nt={type:"linear",range:[wt.min,wt.max],_separators:S._separators,_numFormat:S._numFormat},_t="histogram2dcontour"===ue.type,Mt="contour"===ue.type,Pt=Mt?Ee-1:Ee,Zt=Mt?1:0,$t=Mt?Re-1:Re,Xt=[];for($=Mt?1:0;$<Pt;$++){var dn;if(Mt)dn=K.y[$];else if(_t){if(0===$||$===Ee-1)continue;dn=K.y[$]}else if(K.yCenter)dn=K.yCenter[$];else{if($+1===Ee&&void 0===K.y[$+1])continue;dn=(K.y[$]+K.y[$+1])/2}var on=Math.round(O.c2p(dn));if(!(0>on||on>O._length))for(G=Zt;G<$t;G++){var cn;if(Mt)cn=K.x[G];else if(_t){if(0===G||G===Re-1)continue;cn=K.x[G]}else if(K.xCenter)cn=K.xCenter[G];else{if(G+1===Re&&void 0===K.x[G+1])continue;cn=(K.x[G]+K.x[G+1])/2}var tn=Math.round(S.c2p(cn));if(!(0>tn||tn>S._length)){var Cn=i({x:cn,y:dn},ue,b._fullLayout);Cn.x=cn,Cn.y=dn;var Fn=K.z[$][G];void 0===Fn?(Cn.z="",Cn.zLabel=""):(Cn.z=Fn,Cn.zLabel=T.tickText(Nt,Fn,"hover").text);var En=K.text&&K.text[$]&&K.text[$][G];void 0!==En&&!1!==En||(En=""),Cn.text=En;var rn=v.texttemplateString(Et,Cn,b._fullLayout._d3locale,Cn,ue._meta||{});if(rn){var yn=rn.split("<br>"),pn=yn.length,bn=0;for(H=0;H<pn;H++)bn=Math.max(bn,yn[H].length);Xt.push({l:pn,c:bn,t:rn,x:tn,y:on,z:Fn})}}}}var In=ue.textfont,_n=In.family,qn=In.size,Wn=b._fullLayout.font.size;if(!qn||"auto"===qn){var Nn=1/0,Xn=1/0,yr=0,fr=0;for(H=0;H<Xt.length;H++){var Er=Xt[H];if(yr=Math.max(yr,Er.l),fr=Math.max(fr,Er.c),H<Xt.length-1){var gr=Xt[H+1],mr=Math.abs(gr.x-Er.x),zr=Math.abs(gr.y-Er.y);mr&&(Nn=Math.min(Nn,mr)),zr&&(Xn=Math.min(Xn,zr))}}isFinite(Nn)&&isFinite(Xn)?(Nn-=ae,Xn-=ne,Nn/=fr,Xn/=yr,Nn/=u/2,Xn/=u,qn=Math.min(Math.floor(Nn),Math.floor(Xn),Wn)):qn=Wn}if(qn<=0||!isFinite(qn))return;w(X).data(Xt).enter().append("g").classed(h,1).append("text").attr("text-anchor","middle").each(function(Jt){var Ln,an=I.select(this),Sn=In.color;Sn&&"auto"!==Sn||(Sn=s.contrast("rgba("+qe(Jt.z).join()+")")),an.attr("data-notex",1).call(c.positionText,(Ln=Jt,Ln.x),function(Ln){return Ln.y-qn*(Ln.l*u/2-1)}(Jt)).call(k.font,_n,qn,Sn).text(Jt.t).call(c.convertToTspans,b)})}})}},70035:function(se,U,r){"use strict";var I=r(39898);se.exports=function(C){I.select(C).selectAll(".hm image").style("opacity",function(f){return f.trace.opacity})}},49901:function(se){"use strict";se.exports=function(U,r,I){!1===I("zsmooth")&&(I("xgap"),I("ygap")),I("zhoverformat")}},67684:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(73972);function k(T,v){var c=v(T);return"scaled"===(c?v(T+"type","array"):"scaled")&&(v(T+"0"),v("d"+T)),c}se.exports=function(T,v,c,i,s,a){var o,l,u=c("z");if(s=s||"x",a=a||"y",void 0===u||!u.length)return 0;if(C.isArray1D(T.z)){o=c(s),l=c(a);var d=C.minRowLength(o),g=C.minRowLength(l);if(0===d||0===g)return 0;v._length=Math.min(d,g,u.length)}else{if(o=k(s,c),l=k(a,c),!function(h){for(var w,y=!0,p=!1,_=!1,x=0;x<h.length;x++){if(!C.isArrayOrTypedArray(w=h[x])){y=!1;break}w.length>0&&(p=!0);for(var b=0;b<w.length;b++)if(I(w[b])){_=!0;break}}return y&&p&&_}(u))return 0;c("transpose"),v._length=null}return"heatmapgl"===T.type||f.getComponentMethod("calendars","handleTraceDefaults")(T,v,[s,a],i),!0}},16063:function(se,U,r){"use strict";for(var I=r(21606),C=r(50693),f=r(1426).extendFlat,k=r(30962).overrideAll,T=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],v={},c=0;c<T.length;c++){var i=T[c];v[i]=I[i]}v.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},f(v,C("",{cLetter:"z",autoColorDflt:!1})),se.exports=k(v,"calc","nested")},59560:function(se,U,r){"use strict";var I=r(9330).gl_heatmap2d,C=r(89298),f=r(78614);function k(v,c){this.scene=v,this.uid=c,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=I(v.glplot,this.options),this.heatmap._trace=this}var T=k.prototype;T.handlePick=function(v){var c=this.options,i=c.shape,s=v.pointId,a=s%i[0],o=Math.floor(s/i[0]);return{trace:this,dataCoord:v.dataCoord,traceCoord:[c.x[a],c.y[o],c.z[s]],textLabel:this.textLabels[s],name:this.name,pointIndex:[o,a],hoverinfo:this.hoverinfo}},T.update=function(v,c){var i=c[0];this.index=v.index,this.name=v.name,this.hoverinfo=v.hoverinfo;var s=i.z;this.options.z=[].concat.apply([],s),this.options.shape=[s[0].length,s.length],this.options.x=i.x,this.options.y=i.y,this.options.zsmooth=v.zsmooth;var l=function(w){for(var y=w.colorscale,p=w.zmin,_=w.zmax,x=y.length,b=new Array(x),M=new Array(4*x),m=0;m<x;m++){var D=y[m],S=f(D[1]);b[m]=p+D[0]*(_-p);for(var O=0;O<4;O++)M[4*m+O]=S[O]}return{colorLevels:b,colorValues:M}}(v);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],v.text),this.heatmap.update(this.options);var u,d,g=this.scene.xaxis,h=this.scene.yaxis;!1===v.zsmooth&&(u={ppad:i.x[1]-i.x[0]},d={ppad:i.y[1]-i.y[0]}),v._extremes[g._id]=C.findExtremes(g,i.x,u),v._extremes[h._id]=C.findExtremes(h,i.y,d)},T.dispose=function(){this.heatmap.dispose()},se.exports=function(v,c,i){var s=new k(v,c.uid);return s.update(c,i),s}},19600:function(se,U,r){"use strict";var I=r(71828),C=r(67684),f=r(1586),k=r(16063);se.exports=function(T,v,c,i){function s(a,o){return I.coerce(T,v,k,a,o)}C(T,v,s,i)?(s("text"),s("zsmooth"),f(T,v,i,s,{prefix:"",cLetter:"z"})):v.visible=!1}},3325:function(se,U,r){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),se.exports={attributes:r(16063),supplyDefaults:r(19600),colorbar:r(61243),calc:r(90757),plot:r(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:r(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function(se,U,r){"use strict";var I=r(1486),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(5386).si,T=r(41940),v=r(17656),c=r(72406),i=r(1426).extendFlat;se.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:C("x"),yhoverformat:C("y"),text:i({},I.text,{}),hovertext:i({},I.hovertext,{}),orientation:I.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:v("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:v("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:f({},{keys:c.eventDataKeys}),texttemplate:k({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:i({},I.textposition,{arrayOk:!1}),textfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:I.insidetextanchor,textangle:I.textangle,cliponaxis:I.cliponaxis,constraintext:I.constraintext,marker:I.marker,offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup,selected:I.selected,unselected:I.unselected,_deprecated:{bardir:I._deprecated.bardir}}},42174:function(se){"use strict";se.exports=function(U,r){for(var I=U.length,C=0,f=0;f<I;f++)r[f]?(U[f]/=r[f],C+=U[f]):U[f]=null;return C}},17656:function(se){"use strict";se.exports=function(U,r){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function(se,U,r){"use strict";var I=r(92770);se.exports={count:function(C,f,k){return k[C]++,1},sum:function(C,f,k,T){var v=T[f];return I(v)?(v=Number(v),k[C]+=v,v):0},avg:function(C,f,k,T,v){var c=T[f];return I(c)&&(c=Number(c),k[C]+=c,v[C]++),0},min:function(C,f,k,T){var v=T[f];if(I(v)){if(v=Number(v),!I(k[C]))return k[C]=v,v;if(k[C]>v){var c=v-k[C];return k[C]=v,c}}return 0},max:function(C,f,k,T){var v=T[f];if(I(v)){if(v=Number(v),!I(k[C]))return k[C]=v,v;if(k[C]<v){var c=v-k[C];return k[C]=v,c}}return 0}}},40965:function(se,U,r){"use strict";var I=r(50606),C=I.ONEAVGYEAR,f=I.ONEAVGMONTH,k=I.ONEDAY,T=I.ONEHOUR,v=I.ONEMIN,c=I.ONESEC,i=r(89298).tickIncrement;function s(u,d,g,h){if(u*d<=0)return 1/0;for(var w=Math.abs(d-u),y="date"===g.type,p=a(w,y),_=0;_<10;_++){var x=a(80*p,y);if(p===x||!o(x,u,d,y,g,h))break;p=x}return p}function a(u,d){return d&&u>c?u>k?u>1.1*C?C:u>1.1*f?f:k:u>T?T:u>v?v:c:Math.pow(10,Math.floor(Math.log(u)/Math.LN10))}function o(u,d,g,h,w,y){if(h&&u>k){var p=l(d,w,y),_=l(g,w,y),x=u===C?0:1;return p[x]!==_[x]}return Math.floor(g/u)-Math.floor(d/u)>.1}function l(u,d,g){var h=d.c2d(u,C,g).split("-");return""===h[0]&&(h.unshift(),h[0]="-"+h[0]),h}se.exports=function(u,d,g,h,w){var y,p,_=-1.1*d,x=-.1*d,b=u-x,M=g[0],m=g[1],D=Math.min(s(M+x,M+b,h,w),s(m+x,m+b,h,w)),S=Math.min(s(M+_,M+x,h,w),s(m+_,m+x,h,w));if(D>S&&S<Math.abs(m-M)/4e3?(y=D,p=!1):(y=Math.min(D,S),p=!0),"date"===h.type&&y>k){var O=y===C?1:6,P=y===C?"M12":"M1";return function(R,F){var B=h.c2d(R,C,w),J=B.indexOf("-",O);J>0&&(B=B.substr(0,J));var z=h.d2c(B,0,w);if(z<R){var $=i(z,P,!1,w);(z+$)/2<R+u&&(z=$)}return F&&p?i(z,P,!0,w):z}}return function(R,F){var B=y*Math.round(R/y);return B+y/10<R&&B+.9*y<R+u&&(B+=y),F&&p&&(B-=y),B}}},72138:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(73972),k=r(89298),T=r(75341),v=r(59575),c=r(36362),i=r(42174),s=r(40965);function a(o,l,u,d,g){var h,w,y,p,_,x,b,M=d+"bins",m=o._fullLayout,S=m._histogramBinOpts[l["_"+d+"bingroup"]],O="overlay"===m.barmode,P=function(Te){return u.r2c(Te,0,p)},R=function(Te){return u.c2r(Te,0,p)},F="date"===u.type?function(Te){return Te||0===Te?C.cleanDate(Te,null,p):null}:function(Te){return I(Te)?Number(Te):null};function B(Te,we,je){we[Te+"Found"]?(we[Te]=F(we[Te]),null===we[Te]&&(we[Te]=je[Te])):(x[Te]=we[Te]=je[Te],C.nestedProperty(w[0],M+"."+Te).set(je[Te]))}if(l["_"+d+"autoBinFinished"])delete l["_"+d+"autoBinFinished"];else{w=S.traces;var J=[],z=!0,$=!1,G=!1;for(h=0;h<w.length;h++)if((y=w[h]).visible){var H=S.dirs[h];_=y["_"+H+"pos0"]=u.makeCalcdata(y,H),J=C.concat(J,_),delete y["_"+d+"autoBinFinished"],!0===l.visible&&(z?z=!1:(delete y._autoBin,y["_"+d+"autoBinFinished"]=1),f.traceIs(y,"2dMap")&&($=!0),"histogram2dcontour"===y.type&&(G=!0))}var X=k.autoBin(J,u,S.nbins,$,p=w[0][d+"calendar"],S.sizeFound&&S.size),K=w[0]._autoBin={};if(x=K[S.dirs[0]]={},G&&(S.size||(X.start=R(k.tickIncrement(P(X.start),X.size,!0,p))),void 0===S.end&&(X.end=R(k.tickIncrement(P(X.end),X.size,!1,p)))),O&&!f.traceIs(l,"2dMap")&&0===X._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(g)return[X,_,!0];X=function(Te,we,je,Ce,Ie){var ge,me,ce,Ae=Te._fullLayout,Ne=function(ct,yt){for(var ut=yt.xaxis,Ct=yt.yaxis,Dt=yt.orientation,vt=[],mt=ct._fullData,Lt=0;Lt<mt.length;Lt++){var Ft=mt[Lt];"histogram"===Ft.type&&!0===Ft.visible&&Ft.orientation===Dt&&Ft.xaxis===ut&&Ft.yaxis===Ct&&vt.push(Ft)}return vt}(Te,we),De=!1,qe=1/0,Ke=[we];for(ge=0;ge<Ne.length;ge++)if((me=Ne[ge])===we)De=!0;else if(De){var be=a(Te,me,je,Ce,!0),Oe=be[0],Le=be[2];me["_"+Ce+"autoBinFinished"]=1,me["_"+Ce+"pos0"]=be[1],Le?Ke.push(me):qe=Math.min(qe,Oe.size)}else ce=Ae._histogramBinOpts[me["_"+Ce+"bingroup"]],qe=Math.min(qe,ce.size||me[Ie].size);var Ue=new Array(Ke.length);for(ge=0;ge<Ke.length;ge++)for(var Ze=Ke[ge]["_"+Ce+"pos0"],We=0;We<Ze.length;We++)if(void 0!==Ze[We]){Ue[ge]=Ze[We];break}for(isFinite(qe)||(qe=C.distinctVals(Ue).minDiff),ge=0;ge<Ke.length;ge++){var et=(me=Ke[ge])[Ce+"calendar"],nt={start:je.c2r(Ue[ge]-qe/2,0,et),end:je.c2r(Ue[ge]+qe/2,0,et),size:qe};me._input[Ie]=me[Ie]=nt,(ce=Ae._histogramBinOpts[me["_"+Ce+"bingroup"]])&&C.extendFlat(ce,nt)}return we[Ie]}(o,l,u,d,M)}(b=y.cumulative||{}).enabled&&"include"!==b.currentbin&&("decreasing"===b.direction?X.start=R(k.tickIncrement(P(X.start),X.size,!0,p)):X.end=R(k.tickIncrement(P(X.end),X.size,!1,p))),S.size=X.size,S.sizeFound||(x.size=X.size,C.nestedProperty(w[0],M+".size").set(X.size)),B("start",S,X),B("end",S,X)}_=l["_"+d+"pos0"],delete l["_"+d+"pos0"];var ue=l._input[M]||{},ae=C.extendFlat({},S),ne=S.start,Q=u.r2l(ue.start),ie=void 0!==Q;if((S.startFound||ie)&&Q!==u.r2l(ne)){var le=ie?Q:C.aggNums(Math.min,null,_),fe={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:S.size,tick0:ne,calendar:p,range:[le,k.tickIncrement(le,S.size,!1,p)].map(u.l2r)},he=k.tickFirst(fe);he>u.r2l(le)&&(he=k.tickIncrement(he,S.size,!0,p)),ae.start=u.l2r(he),ie||C.nestedProperty(l,M+".start").set(ae.start)}var pe=S.end,xe=u.r2l(ue.end),Ee=void 0!==xe;if((S.endFound||Ee)&&xe!==u.r2l(pe)){var Re=Ee?xe:C.aggNums(Math.max,null,_);ae.end=u.l2r(Re),Ee||C.nestedProperty(l,M+".start").set(ae.end)}var ke="autobin"+d;return!1===l._input[ke]&&(l._input[M]=C.extendFlat({},l[M]||{}),delete l._input[ke],delete l[ke]),[ae,_]}se.exports={calc:function(o,l){var u,d,g,h,w=[],y=[],p="h"===l.orientation,_=k.getFromId(o,p?l.yaxis:l.xaxis),x=p?"y":"x",b={x:"y",y:"x"}[x],M=l[x+"calendar"],m=l.cumulative,D=a(o,l,_,x),S=D[0],O=D[1],P="string"==typeof S.size,R=[],F=P?R:S,B=[],J=[],z=[],$=0,G=l.histnorm,H=l.histfunc,X=-1!==G.indexOf("density");m.enabled&&X&&(G=G.replace(/ ?density$/,""),X=!1);var K,ue="max"===H||"min"===H?null:0,ae=v.count,ne=c[G],Q=!1,ie=function(me){return _.r2c(me,0,M)};for(C.isArrayOrTypedArray(l[b])&&"count"!==H&&(K=l[b],Q="avg"===H,ae=v[H]),u=ie(S.start),g=ie(S.end)+(u-k.tickIncrement(u,S.size,!1,M))/1e6;u<g&&w.length<1e6&&(d=k.tickIncrement(u,S.size,!1,M),w.push((u+d)/2),y.push(ue),z.push([]),R.push(u),X&&B.push(1/(d-u)),Q&&J.push(0),!(d<=u));)u=d;R.push(u),P||"date"!==_.type||(F={start:ie(F.start),end:ie(F.end),size:F.size}),o._fullLayout._roundFnOpts||(o._fullLayout._roundFnOpts={});var le=l["_"+x+"bingroup"],fe={leftGap:1/0,rightGap:1/0};le&&(o._fullLayout._roundFnOpts[le]||(o._fullLayout._roundFnOpts[le]=fe),fe=o._fullLayout._roundFnOpts[le]);var he,pe=y.length,xe=!0,Ee=fe.leftGap,Re=fe.rightGap,ke={};for(u=0;u<O.length;u++){var Te=O[u];(h=C.findBin(Te,F))>=0&&h<pe&&($+=ae(h,u,y,K,J),xe&&z[h].length&&Te!==O[z[h][0]]&&(xe=!1),z[h].push(u),ke[u]=h,Ee=Math.min(Ee,Te-R[h]),Re=Math.min(Re,R[h+1]-Te))}fe.leftGap=Ee,fe.rightGap=Re,xe||(he=function(me,ce){return function(){var Ae=o._fullLayout._roundFnOpts[le];return s(Ae.leftGap,Ae.rightGap,R,_,M)(me,ce)}}),Q&&($=i(y,J)),ne&&ne(y,$,B),m.enabled&&function(me,ce,Ae){var Ne,De,qe;function Ke(Oe){qe=me[Oe],me[Oe]/=2}function be(Oe){me[Oe]=qe+(De=me[Oe])/2,qe+=De}if("half"===Ae)if("increasing"===ce)for(Ke(0),Ne=1;Ne<me.length;Ne++)be(Ne);else for(Ke(me.length-1),Ne=me.length-2;Ne>=0;Ne--)be(Ne);else if("increasing"===ce){for(Ne=1;Ne<me.length;Ne++)me[Ne]+=me[Ne-1];"exclude"===Ae&&(me.unshift(0),me.pop())}else{for(Ne=me.length-2;Ne>=0;Ne--)me[Ne]+=me[Ne+1];"exclude"===Ae&&(me.push(0),me.shift())}}(y,m.direction,m.currentbin);var we=Math.min(w.length,y.length),je=[],Ce=0,Ie=we-1;for(u=0;u<we;u++)if(y[u]){Ce=u;break}for(u=we-1;u>=Ce;u--)if(y[u]){Ie=u;break}for(u=Ce;u<=Ie;u++)if(I(w[u])&&I(y[u])){var ge={p:w[u],s:y[u],b:0};m.enabled||(ge.pts=z[u],xe?ge.ph0=ge.ph1=z[u].length?O[z[u][0]]:w[u]:(l._computePh=!0,ge.ph0=he(R[u]),ge.ph1=he(R[u+1],!0))),je.push(ge)}return 1===je.length&&(je[0].width1=k.tickIncrement(je[0].p,S.size,!1,M)-je[0].p),T(je,l),C.isArrayOrTypedArray(l.selectedpoints)&&C.tagSelected(je,l,ke),je},calcAllAutoBins:a}},72406:function(se){"use strict";se.exports={eventDataKeys:["binNumber"]}},82222:function(se,U,r){"use strict";var I=r(71828),C=r(41675),f=r(73972).traceIs,k=r(26125),T=I.nestedProperty,v=r(99082).getAxisGroup,c=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];se.exports=function(s,a){var o,l,u,d,g,h,w,y=a._histogramBinOpts={},p=[],_={},x=[];function b(X,K){return I.coerce(o._input,o,o._module.attributes,X,K)}function M(X){return"v"===X.orientation?"x":"y"}function m(X,K,ue){var ae=X.uid+"__"+ue;K||(K=ae);var ne=C.getFromTrace({_fullLayout:a},X,ue).type,Q=X[ue+"calendar"]||"",ie=y[K],le=!0;ie&&(ne===ie.axType&&Q===ie.calendar?(le=!1,ie.traces.push(X),ie.dirs.push(ue)):(K=ae,ne!==ie.axType&&I.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+ne,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),Q!==ie.calendar&&I.warn(["Attempted to group the bins of trace",X.index,"set with a",Q,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),le&&(y[K]={traces:[X],dirs:[ue],axType:ne,calendar:X[ue+"calendar"]||""}),X["_"+ue+"bingroup"]=K}for(g=0;g<s.length;g++)f(o=s[g],"histogram")&&(p.push(o),delete o._xautoBinFinished,delete o._yautoBinFinished,f(o,"2dMap")||k(o._input,o,a,b));var D=a._alignmentOpts||{};for(g=0;g<p.length;g++){if(u="",!f(o=p[g],"2dMap")){if(d=M(o),"group"===a.barmode&&o.alignmentgroup){var O=v(a,o[d+"axis"])+o.orientation;(D[O]||{})[o.alignmentgroup]&&(u=O)}u||"overlay"===a.barmode||(u=v(a,o.xaxis)+v(a,o.yaxis)+M(o))}u?(_[u]||(_[u]=[]),_[u].push(o)):x.push(o)}for(u in _)if(1!==(l=_[u]).length){var P=!1;for(l.length&&(o=l[0],P=b("bingroup")),u=P||u,g=0;g<l.length;g++){var R=(o=l[g])._input.bingroup;R&&R!==u&&I.warn(["Trace",o.index,"must match","within bingroup",u+".","Ignoring its bingroup:",R,"setting."].join(" ")),o.bingroup=u,m(o,u,M(o))}}else x.push(l[0]);for(g=0;g<x.length;g++){o=x[g];var F=b("bingroup");if(f(o,"2dMap"))for(w=0;w<2;w++){var B=b((d=i[w])+"bingroup",F?F+"__"+d:null);m(o,B,d)}else m(o,F,M(o))}for(u in y){var J=y[u];for(l=J.traces,h=0;h<c.length;h++){var z,$,G=c[h],H=G.name;if("nbins"!==H||!J.sizeFound){for(g=0;g<l.length;g++){if(void 0!==T((o=l[g])._input,z=G.aStr[d=J.dirs[g]]).get()){J[H]=b(z),J[H+"Found"]=!0;break}($=(o._autoBin||{})[d]||{})[H]&&T(o,z).set($[H])}if("start"===H||"end"===H)for(;g<l.length;g++)(o=l[g])["_"+d+"bingroup"]&&b(z,($=(o._autoBin||{})[d]||{})[H]);"nbins"!==H||J.sizeFound||J.nbinsFound||(o=l[0],J[H]=b(z))}}}}},11385:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(7901),k=r(90769).handleText,T=r(98340),v=r(7745);se.exports=function(c,i,s,a){function o(x,b){return C.coerce(c,i,v,x,b)}var l=o("x"),u=o("y");o("cumulative.enabled")&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var d=o("textposition");k(c,i,a,o,d,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var g=o("orientation",u&&!l?"h":"v"),h="v"===g?"x":"y",w="v"===g?"y":"x",y=l&&u?Math.min(C.minRowLength(l)&&C.minRowLength(u)):C.minRowLength(i[h]||[]);if(y){i._length=y,I.getComponentMethod("calendars","handleTraceDefaults")(c,i,["x","y"],a),i[w]&&o("histfunc"),o("histnorm"),o("autobin"+h),T(c,i,o,s,a),C.coerceSelectionMarkerOpacity(i,o);var p=(i.marker.line||{}).color,_=I.getComponentMethod("errorbars","supplyDefaults");_(c,i,p||f.defaultLine,{axis:"y"}),_(c,i,p||f.defaultLine,{axis:"x",inherit:"y"})}else i.visible=!1}},84402:function(se){"use strict";se.exports=function(U,r,I,C,f){if(U.x="xVal"in r?r.xVal:r.x,U.y="yVal"in r?r.yVal:r.y,"zLabelVal"in r&&(U.z=r.zLabelVal),r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),!(I.cumulative||{}).enabled){var k,T=Array.isArray(f)?C[0].pts[f[0]][f[1]]:C[f].pts;if(U.pointNumbers=T,U.binNumber=U.pointNumber,delete U.pointNumber,delete U.pointIndex,I._indexToPoints){k=[];for(var v=0;v<T.length;v++)k=k.concat(I._indexToPoints[T[v]])}else k=T;U.pointIndices=k}return U}},76440:function(se,U,r){"use strict";var I=r(95423).hoverPoints,C=r(89298).hoverLabelText;se.exports=function(f,k,T,v,c){var i=I(f,k,T,v,c);if(i){var s=(f=i[0]).cd[f.index],a=f.cd[0].trace;if(!a.cumulative.enabled){var o="h"===a.orientation?"y":"x";f[o+"Label"]=C(f[o+"a"],[s.ph0,s.ph1],a[o+"hoverformat"])}return i}}},36071:function(se,U,r){"use strict";se.exports={attributes:r(7745),layoutAttributes:r(43641),supplyDefaults:r(11385),crossTraceDefaults:r(82222),supplyLayoutDefaults:r(13957),calc:r(72138).calc,crossTraceCalc:r(11661).crossTraceCalc,plot:r(17295).plot,layerName:"barlayer",style:r(16688).style,styleOnSelect:r(16688).styleOnSelect,colorbar:r(4898),hoverPoints:r(76440),selectPoints:r(81974),eventData:r(84402),moduleType:"trace",name:"histogram",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function(se){"use strict";se.exports={percent:function(U,r){for(var I=U.length,C=100/r,f=0;f<I;f++)U[f]*=C},probability:function(U,r){for(var I=U.length,C=0;C<I;C++)U[C]/=r},density:function(U,r,I,C){var f=U.length;C=C||1;for(var k=0;k<f;k++)U[k]*=I[k]*C},"probability density":function(U,r,I,C){var f=U.length;C&&(r/=C);for(var k=0;k<f;k++)U[k]*=I[k]/r}}},35361:function(se,U,r){"use strict";var I=r(7745),C=r(17656),f=r(21606),k=r(9012),T=r(12663).axisHoverFormat,v=r(5386).fF,c=r(5386).si,i=r(50693),s=r(1426).extendFlat;se.exports=s({x:I.x,y:I.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:I.histnorm,histfunc:I.histfunc,nbinsx:I.nbinsx,xbins:C("x"),nbinsy:I.nbinsy,ybins:C("y"),autobinx:I.autobinx,autobiny:I.autobiny,bingroup:s({},I.bingroup,{}),xbingroup:s({},I.bingroup,{}),ybingroup:s({},I.bingroup,{}),xgap:f.xgap,ygap:f.ygap,zsmooth:f.zsmooth,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:v({},{keys:"z"}),texttemplate:c({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:f.textfont,showlegend:s({},k.showlegend,{dflt:!1})},i("",{cLetter:"z",autoColorDflt:!1}))},17562:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(59575),k=r(36362),T=r(42174),v=r(40965),c=r(72138).calcAllAutoBins;function i(o,l,u,d){var g,h=new Array(o);if(d)for(g=0;g<o;g++)h[g]=1/(l[g+1]-l[g]);else{var w=1/u;for(g=0;g<o;g++)h[g]=w}return h}function s(o,l){return{start:o(l.start),end:o(l.end),size:l.size}}function a(o,l,u,d,g,h){var w,y=o.length-1,p=new Array(y),_=v(u,d,o,g,h);for(w=0;w<y;w++){var x=(l||[])[w];p[w]=void 0===x?[_(o[w]),_(o[w+1],!0)]:[x,x]}return p}se.exports=function(o,l){var u,d,g,h,w=C.getFromId(o,l.xaxis),y=C.getFromId(o,l.yaxis),p=l.xcalendar,_=l.ycalendar,x=function(Ct){return w.r2c(Ct,0,p)},b=function(Ct){return y.r2c(Ct,0,_)},M=c(o,l,w,"x"),m=M[0],D=M[1],S=c(o,l,y,"y"),O=S[0],P=S[1],R=l._length;D.length>R&&D.splice(R,D.length-R),P.length>R&&P.splice(R,P.length-R);var F=[],B=[],J=[],z="string"==typeof m.size,$="string"==typeof O.size,G=[],H=[],X=z?G:m,K=$?H:O,ue=0,ae=[],ne=[],Q=l.histnorm,ie=l.histfunc,le=-1!==Q.indexOf("density"),fe="max"===ie||"min"===ie?null:0,he=f.count,pe=k[Q],xe=!1,Ee=[],Re=[],ke="z"in l?l.z:"marker"in l&&Array.isArray(l.marker.color)?l.marker.color:"";ke&&"count"!==ie&&(xe="avg"===ie,he=f[ie]);var Te=m.size,we=x(m.start),je=x(m.end)+(we-C.tickIncrement(we,Te,!1,p))/1e6;for(u=we;u<je;u=C.tickIncrement(u,Te,!1,p))B.push(fe),G.push(u),xe&&J.push(0);G.push(u);var Ie=B.length,ge=(u-we)/Ie,me=w.c2r(we+ge/2,0,p),ce=O.size,Ae=b(O.start),Ne=b(O.end)+(Ae-C.tickIncrement(Ae,ce,!1,_))/1e6;for(u=Ae;u<Ne;u=C.tickIncrement(u,ce,!1,_)){F.push(B.slice()),H.push(u);var De=new Array(Ie);for(d=0;d<Ie;d++)De[d]=[];ne.push(De),xe&&ae.push(J.slice())}H.push(u);var qe=F.length,Ke=(u-Ae)/qe,be=y.c2r(Ae+Ke/2,0,_);le&&(Ee=i(B.length,X,ge,z),Re=i(F.length,K,Ke,$)),z||"date"!==w.type||(X=s(x,X)),$||"date"!==y.type||(K=s(b,K));var Oe=!0,Le=!0,Ue=new Array(Ie),Ze=new Array(qe),We=1/0,et=1/0,nt=1/0,ct=1/0;for(u=0;u<R;u++){var yt=D[u],ut=P[u];g=I.findBin(yt,X),h=I.findBin(ut,K),g>=0&&g<Ie&&h>=0&&h<qe&&(ue+=he(g,u,F[h],ke,ae[h]),ne[h][g].push(u),Oe&&(void 0===Ue[g]?Ue[g]=yt:Ue[g]!==yt&&(Oe=!1)),Le&&(void 0===Ze[h]?Ze[h]=ut:Ze[h]!==ut&&(Le=!1)),We=Math.min(We,yt-G[g]),et=Math.min(et,G[g+1]-yt),nt=Math.min(nt,ut-H[h]),ct=Math.min(ct,H[h+1]-ut))}if(xe)for(h=0;h<qe;h++)ue+=T(F[h],ae[h]);if(pe)for(h=0;h<qe;h++)pe(F[h],ue,Ee,Re[h]);return{x:D,xRanges:a(G,Oe&&Ue,We,et,w,p),x0:me,dx:ge,y:P,yRanges:a(H,Le&&Ze,nt,ct,y,_),y0:be,dy:Ke,z:F,pts:ne}}},93888:function(se,U,r){"use strict";var I=r(71828),C=r(75238),f=r(49901),k=r(1586),T=r(58623),v=r(35361);se.exports=function(c,i,s,a){function o(l,u){return I.coerce(c,i,v,l,u)}C(c,i,o,a),!1!==i.visible&&(f(c,i,o,a),k(c,i,a,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),T(o,a),o("xhoverformat"),o("yhoverformat"))}},76128:function(se,U,r){"use strict";var I=r(46248),C=r(89298).hoverLabelText;se.exports=function(f,k,T,v,c){var i=I(f,k,T,v,c);if(i){var s=(f=i[0]).index,l=f.cd[0],u=l.trace,d=l.xRanges[s[1]],g=l.yRanges[s[0]];return f.xLabel=C(f.xa,[d[0],d[1]],u.xhoverformat),f.yLabel=C(f.ya,[g[0],g[1]],u.yhoverformat),i}}},43905:function(se,U,r){"use strict";se.exports={attributes:r(35361),supplyDefaults:r(93888),crossTraceDefaults:r(82222),calc:r(90757),plot:r(50347),layerName:"heatmaplayer",colorbar:r(61243),style:r(70035),hoverPoints:r(76128),eventData:r(84402),moduleType:"trace",name:"histogram2d",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function(se,U,r){"use strict";var I=r(73972),C=r(71828);se.exports=function(f,k,T,v){var c=T("x"),i=T("y"),s=C.minRowLength(c),a=C.minRowLength(i);s&&a?(k._length=Math.min(s,a),I.getComponentMethod("calendars","handleTraceDefaults")(f,k,["x","y"],v),(T("z")||T("marker.color"))&&T("histfunc"),T("histnorm"),T("autobinx"),T("autobiny")):k.visible=!1}},99066:function(se,U,r){"use strict";var I=r(35361),C=r(70600),f=r(50693),k=r(12663).axisHoverFormat,T=r(1426).extendFlat;se.exports=T({x:I.x,y:I.y,z:I.z,marker:I.marker,histnorm:I.histnorm,histfunc:I.histfunc,nbinsx:I.nbinsx,xbins:I.xbins,nbinsy:I.nbinsy,ybins:I.ybins,autobinx:I.autobinx,autobiny:I.autobiny,bingroup:I.bingroup,xbingroup:I.xbingroup,ybingroup:I.ybingroup,autocontour:C.autocontour,ncontours:C.ncontours,contours:C.contours,line:{color:C.line.color,width:T({},C.line.width,{dflt:.5}),dash:C.line.dash,smoothing:C.line.smoothing,editType:"plot"},xhoverformat:k("x"),yhoverformat:k("y"),zhoverformat:k("z",1),hovertemplate:I.hovertemplate,texttemplate:C.texttemplate,textfont:C.textfont},f("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function(se,U,r){"use strict";var I=r(71828),C=r(75238),f=r(67217),k=r(8724),T=r(58623),v=r(99066);se.exports=function(c,i,s,a){function o(l,u){return I.coerce(c,i,v,l,u)}C(c,i,o,a),!1!==i.visible&&(f(c,i,o,function(l){return I.coerce2(c,i,v,l)}),k(c,i,o,a),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),i.contours&&"heatmap"===i.contours.coloring&&T(o,a))}},35902:function(se,U,r){"use strict";se.exports={attributes:r(99066),supplyDefaults:r(62654),crossTraceDefaults:r(82222),calc:r(27529),plot:r(29854).plot,layerName:"contourlayer",style:r(84426),colorbar:r(90654),hoverPoints:r(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(50693),k=r(27670).Y,T=r(34e3),v=r(57564),c=r(45802),i=r(43473),s=r(1426).extendFlat,a=r(79952).u;se.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:c.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:s({colors:v.marker.colors,line:v.marker.line,pattern:a,editType:"calc"},f("marker",{colorAttr:"colors",anim:!1})),leaf:v.leaf,pathbar:c.pathbar,text:T.text,textinfo:v.textinfo,texttemplate:C({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:I({},{keys:i.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:c.outsidetextfont,textposition:c.textposition,sort:T.sort,root:v.root,domain:k({name:"icicle",trace:!0,editType:"calc"})}},96346:function(se,U,r){"use strict";var I=r(74875);U.name="icicle",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},46584:function(se,U,r){"use strict";var I=r(52147);U.y=function(C,f){return I.calc(C,f)},U.T=function(C){return I._runCrossTraceCalc("icicle",C)}},56524:function(se,U,r){"use strict";var I=r(71828),C=r(46291),f=r(7901),k=r(27670).c,T=r(90769).handleText,v=r(97313).TEXTPAD,c=r(37434).handleMarkerDefaults,i=r(21081),s=i.hasColorscale,a=i.handleDefaults;se.exports=function(o,l,u,d){function g(b,M){return I.coerce(o,l,C,b,M)}var h=g("labels"),w=g("parents");if(h&&h.length&&w&&w.length){var y=g("values");g(y&&y.length?"branchvalues":"count"),g("level"),g("maxdepth"),g("tiling.orientation"),g("tiling.flip"),g("tiling.pad");var p=g("text");g("texttemplate"),l.texttemplate||g("textinfo",Array.isArray(p)?"text+label":"label"),g("hovertext"),g("hovertemplate");var _=g("pathbar.visible");T(o,l,d,g,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition"),c(o,l,d,g);var x=l._hasColorscale=s(o,"marker","colors")||(o.marker||{}).coloraxis;x&&a(o,l,d,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",x?1:.7),l._hovered={marker:{line:{width:2,color:f.contrast(d.paper_bgcolor)}}},_&&(g("pathbar.thickness",l.pathbar.textfont.size+2*v),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),k(l,d,g),l._length=null}else l.visible=!1}},90666:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(63893),T=r(21538),v=r(82454).styleOne,c=r(43473),i=r(2791),s=r(83523),a=r(24714).formatSliceLabel,o=!1;se.exports=function(l,u,d,g,h){var w=h.width,y=h.height,p=h.viewX,_=h.viewY,x=h.pathSlice,b=h.toMoveInsideSlice,M=h.strTransform,m=h.hasTransition,D=h.handleSlicesExit,S=h.makeUpdateSliceInterpolator,O=h.makeUpdateTextInterpolator,P=h.prevEntry,R=l._context.staticPlot,F=l._fullLayout,B=u[0].trace,J=-1!==B.textposition.indexOf("left"),z=-1!==B.textposition.indexOf("right"),$=-1!==B.textposition.indexOf("bottom"),G=T(d,[w,y],{flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1,orientation:B.tiling.orientation,pad:{inner:B.tiling.pad},maxDepth:B._maxDepth}).descendants(),H=1/0,X=-1/0;G.forEach(function(Q){var ie=Q.depth;ie>=B._maxDepth?(Q.x0=Q.x1=(Q.x0+Q.x1)/2,Q.y0=Q.y1=(Q.y0+Q.y1)/2):(H=Math.min(H,ie),X=Math.max(X,ie))}),g=g.data(G,i.getPtId),B._maxVisibleLayers=isFinite(X)?X-H+1:0,g.enter().append("g").classed("slice",!0),D(g,o,{},[w,y],x),g.order();var K=null;if(m&&P){var ue=i.getPtId(P);g.each(function(Q){null===K&&i.getPtId(Q)===ue&&(K={x0:Q.x0,x1:Q.x1,y0:Q.y0,y1:Q.y1})})}var ae=function(){return K||{x0:0,x1:w,y0:0,y1:y}},ne=g;return m&&(ne=ne.transition().each("end",function(){var Q=I.select(this);i.setSliceCursor(Q,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ne.each(function(Q){Q._x0=p(Q.x0),Q._x1=p(Q.x1),Q._y0=_(Q.y0),Q._y1=_(Q.y1),Q._hoverX=p(Q.x1-B.tiling.pad),Q._hoverY=_($?Q.y1-B.tiling.pad/2:Q.y0+B.tiling.pad/2);var ie=I.select(this),le=C.ensureSingle(ie,"path","surface",function(xe){xe.style("pointer-events",R?"none":"all")});m?le.transition().attrTween("d",function(xe){var Ee=S(xe,o,ae(),[w,y],{orientation:B.tiling.orientation,flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1});return function(Re){return x(Ee(Re))}}):le.attr("d",x),ie.call(s,d,l,u,{styleOne:v,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,l,{isTransitioning:l._transitioning}),le.call(v,Q,B,l,{hovered:!1}),Q._text=Q.x0===Q.x1||Q.y0===Q.y1?"":a(Q,d,B,u,F)||"";var fe=C.ensureSingle(ie,"g","slicetext"),he=C.ensureSingle(fe,"text","",function(xe){xe.attr("data-notex",1)}),pe=C.ensureUniformFontSize(l,i.determineTextFont(B,Q,F.font));he.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":J?"start":"middle").call(f.font,pe).call(k.convertToTspans,l),Q.textBB=f.bBox(he.node()),Q.transform=b(Q,{fontSize:pe.size}),Q.transform.fontSize=pe.size,m?he.transition().attrTween("transform",function(xe){var Ee=O(xe,o,ae(),[w,y]);return function(Re){return M(Ee(Re))}}):he.attr("transform",M(Q))}),K}},69816:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"icicle",basePlotModule:r(96346),categories:[],animatable:!0,attributes:r(46291),layoutAttributes:r(92894),supplyDefaults:r(56524),supplyLayoutDefaults:r(21070),calc:r(46584).y,crossTraceCalc:r(46584).T,plot:r(85596),style:r(82454).style,colorbar:r(4898),meta:{}}},92894:function(se){"use strict";se.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function(se,U,r){"use strict";var I=r(71828),C=r(92894);se.exports=function(f,k){function T(v,c){return I.coerce(f,k,C,v,c)}T("iciclecolorway",k.colorway),T("extendiciclecolors")}},21538:function(se,U,r){"use strict";var I=r(674),C=r(14102);se.exports=function(f,k,T){var v=T.flipX,c=T.flipY,i="h"===T.orientation,s=T.maxDepth,a=k[0],o=k[1];s&&(a=(f.height+1)*k[0]/Math.min(f.height+1,s),o=(f.height+1)*k[1]/Math.min(f.height+1,s));var l=I.partition().padding(T.pad.inner).size(i?[k[1],a]:[k[0],o])(f);return(i||v||c)&&C(l,k,{swapXY:i,flipX:v,flipY:c}),l}},85596:function(se,U,r){"use strict";var I=r(80694),C=r(90666);se.exports=function(f,k,T,v){return I(f,k,T,v,{type:"icicle",drawDescendants:C})}},82454:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(71828),k=r(72597).resizeText,T=r(43467);function v(c,i,s,a){var l=!i.children,u=i.data.data.i,d=f.castOption(s,u,"marker.line.color")||C.defaultLine,g=f.castOption(s,u,"marker.line.width")||0;c.call(T,i,s,a).style("stroke-width",g).call(C.stroke,d).style("opacity",l?s.leaf.opacity:null)}se.exports={style:function(c){var i=c._fullLayout._iciclelayer.selectAll(".trace");k(c,i,"icicle"),i.each(function(s){var a=I.select(this),o=s[0].trace;a.style("opacity",o.opacity),a.selectAll("path.surface").each(function(l){I.select(this).call(v,l,o,c)})})},styleOne:v}},17230:function(se,U,r){"use strict";for(var I=r(9012),C=r(5386).fF,f=r(1426).extendFlat,k=r(51877).colormodel,T=["rgb","rgba","rgba256","hsl","hsla"],v=[],c=[],i=0;i<T.length;i++){var s=k[T[i]];v.push("For the `"+T[i]+"` colormodel, it is ["+(s.zminDflt||s.min).join(", ")+"]."),c.push("For the `"+T[i]+"` colormodel, it is ["+(s.zmaxDflt||s.max).join(", ")+"].")}se.exports=f({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:T,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:f({},I.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:C({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function(se,U,r){"use strict";var I=r(71828),C=r(51877),f=r(92770),k=r(89298),T=r(71828).maxRowLength,v=r(67395).A;function c(s,a,o,l){return function(u){return I.constrain((u-s)*a,o,l)}}function i(s,a){return function(o){return I.constrain(o,s,a)}}se.exports=function(s,a){var o,l;if(a._hasZ)o=a.z.length,l=T(a.z);else if(a._hasSource){var u=v(a.source);o=u.height,l=u.width}var d,g=k.getFromId(s,a.xaxis||"x"),h=k.getFromId(s,a.yaxis||"y"),w=g.d2c(a.x0)-a.dx/2,y=h.d2c(a.y0)-a.dy/2,p=[w,w+l*a.dx],_=[y,y+o*a.dy];if(g&&"log"===g.type)for(d=0;d<l;d++)p.push(w+d*a.dx);if(h&&"log"===h.type)for(d=0;d<o;d++)_.push(y+d*a.dy);return a._extremes[g._id]=k.findExtremes(g,p),a._extremes[h._id]=k.findExtremes(h,_),a._scaler=function(x){var b=C.colormodel[x.colormodel],M=(b.colormodel||x.colormodel).length;x._sArray=[];for(var m=0;m<M;m++)x._sArray.push(b.min[m]!==x.zmin[m]||b.max[m]!==x.zmax[m]?c(x.zmin[m],(b.max[m]-b.min[m])/(x.zmax[m]-x.zmin[m]),b.min[m],b.max[m]):i(b.min[m],b.max[m]));return function(D){for(var S=D.slice(0,M),O=0;O<M;O++){var P=S[O];if(!f(P))return!1;S[O]=x._sArray[O](P)}return S}}(a),[{x0:w,y0:y,z:a.z,w:l,h:o}]}},51877:function(se){"use strict";se.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(U){return U.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(U){var r=U.slice(0,3);return r[1]=r[1]+"%",r[2]=r[2]+"%",r},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(U){var r=U.slice(0,4);return r[1]=r[1]+"%",r[2]=r[2]+"%",r},suffix:["\xb0","%","%",""]}}}},13245:function(se,U,r){"use strict";var I=r(71828),C=r(17230),f=r(51877),k=r(25095).IMAGE_URL_PREFIX;se.exports=function(T,v){function c(a,o){return I.coerce(T,v,C,a,o)}c("source"),v.source&&!v.source.match(k)&&delete v.source,v._hasSource=!!v.source;var i,s=c("z");v._hasZ=!(void 0===s||!s.length||!s[0]||!s[0].length),v._hasZ||v._hasSource?(c("x0"),c("y0"),c("dx"),c("dy"),v._hasZ?(c("colormodel","rgb"),c("zmin",(i=f.colormodel[v.colormodel]).zminDflt||i.min),c("zmax",i.zmaxDflt||i.max)):v._hasSource&&(v.colormodel="rgba256",v.zmin=(i=f.colormodel[v.colormodel]).zminDflt,v.zmax=i.zmaxDflt),c("zsmooth"),c("text"),c("hovertext"),c("hovertemplate"),v._length=null):v.visible=!1}},30835:function(se){"use strict";se.exports=function(U,r){return"xVal"in r&&(U.x=r.xVal),"yVal"in r&&(U.y=r.yVal),r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),U.color=r.color,U.colormodel=r.trace.colormodel,U.z||(U.z=r.color),U}},67395:function(se,U,r){"use strict";var I=r(33575),C=r(25095).IMAGE_URL_PREFIX,f=r(12856).Buffer;U.A=function(k){var T=k.replace(C,""),v=new f(T,"base64");return I(v)}},28749:function(se,U,r){"use strict";var I=r(30211),C=r(71828),f=r(51877);se.exports=function(k,T,v){var c=k.cd[0],i=c.trace,s=k.xa,a=k.ya;if(!(I.inbox(T-c.x0,T-(c.x0+c.w*i.dx),0)>0||I.inbox(v-c.y0,v-(c.y0+c.h*i.dy),0)>0)){var o,l=Math.floor((T-c.x0)/i.dx),u=Math.floor(Math.abs(v-c.y0)/i.dy);if(i._hasZ?o=c.z[u][l]:i._hasSource&&(o=i._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(l,u,1,1).data),o){var d,g=c.hi||i.hoverinfo;if(g){var h=g.split("+");-1!==h.indexOf("all")&&(h=["color"]),-1!==h.indexOf("color")&&(d=!0)}var w,y=f.colormodel[i.colormodel],p=y.colormodel||i.colormodel,_=p.length,x=i._scaler(o),b=y.suffix,M=[];(i.hovertemplate||d)&&(M.push("["+[x[0]+b[0],x[1]+b[1],x[2]+b[2]].join(", ")),4===_&&M.push(", "+x[3]+b[3]),M.push("]"),M=M.join(""),k.extraText=p.toUpperCase()+": "+M),Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[u])?w=i.hovertext[u][l]:Array.isArray(i.text)&&Array.isArray(i.text[u])&&(w=i.text[u][l]);var m=a.c2p(c.y0+(u+.5)*i.dy),D=c.x0+(l+.5)*i.dx,S=c.y0+(u+.5)*i.dy,O="["+o.slice(0,i.colormodel.length).join(", ")+"]";return[C.extendFlat(k,{index:[u,l],x0:s.c2p(c.x0+l*i.dx),x1:s.c2p(c.x0+(l+1)*i.dx),y0:m,y1:m,color:x,xVal:D,xLabelVal:D,yVal:S,yLabelVal:S,zLabelVal:O,text:w,hovertemplateLabels:{zLabel:O,colorLabel:M,"color[0]Label":x[0]+b[0],"color[1]Label":x[1]+b[1],"color[2]Label":x[2]+b[2],"color[3]Label":x[3]+b[3]}})]}}}},94507:function(se,U,r){"use strict";se.exports={attributes:r(17230),supplyDefaults:r(13245),calc:r(71113),plot:r(60775),style:r(12826),hoverPoints:r(28749),eventData:r(30835),moduleType:"trace",name:"image",basePlotModule:r(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.strTranslate,k=r(77922),T=r(51877),v=r(3883),c=r(32396).STYLE;se.exports=function(i,s,a,o){var l=s.xaxis,u=s.yaxis,d=!i._context._exportedPlot&&v();C.makeTraceGroups(o,a,"im").each(function(g){var h=I.select(this),w=g[0],y=w.trace,p=("fast"===y.zsmooth||!1===y.zsmooth&&d)&&!y._hasZ&&y._hasSource&&"linear"===l.type&&"linear"===u.type;y._realImage=p;var _,x,b,M,m,D,S=w.z,O=w.x0,P=w.y0,R=w.w,F=w.h,B=y.dx,J=y.dy;for(D=0;void 0===_&&D<R;)_=l.c2p(O+D*B),D++;for(D=R;void 0===x&&D>0;)x=l.c2p(O+D*B),D--;for(D=0;void 0===M&&D<F;)M=u.c2p(P+D*J),D++;for(D=F;void 0===m&&D>0;)m=u.c2p(P+D*J),D--;x<_&&(b=x,x=_,_=b),m<M&&(b=M,M=m,m=b),p||(_=Math.max(-.5*l._length,_),x=Math.min(1.5*l._length,x),M=Math.max(-.5*u._length,M),m=Math.min(1.5*u._length,m));var z=Math.round(x-_),$=Math.round(m-M);if(z<=0||$<=0)h.selectAll("image").data([]).exit().remove();else{var G=h.selectAll("image").data([g]);G.enter().append("svg:image").attr({xmlns:k.svg,preserveAspectRatio:"none"}),G.exit().remove();var H=!1===y.zsmooth?c:"";if(p){var X=C.simpleMap(l.range,l.r2l),K=C.simpleMap(u.range,u.r2l),ue=X[1]<X[0],ae=K[1]>K[0];if(ue||ae){var ne=_+z/2,Q=M+$/2;H+="transform:"+f(ne+"px",Q+"px")+"scale("+(ue?-1:1)+","+(ae?-1:1)+")"+f(-ne+"px",-Q+"px")+";"}}G.attr("style",H);var ie=new Promise(function(fe){if(y._hasZ)fe();else if(y._hasSource)if(y._canvas&&y._canvas.el.width===R&&y._canvas.el.height===F&&y._canvas.source===y.source)fe();else{var he=document.createElement("canvas");he.width=R,he.height=F;var pe=he.getContext("2d",{willReadFrequently:!0});y._image=y._image||new Image;var xe=y._image;xe.onload=function(){pe.drawImage(xe,0,0),y._canvas={el:he,source:y.source},fe()},xe.setAttribute("src",y.source)}}).then(function(){var fe;if(y._hasZ)fe=le(function(xe,Ee){return S[Ee][xe]}).toDataURL("image/png");else if(y._hasSource)if(p)fe=y.source;else{var pe=y._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,R,F).data;fe=le(function(xe,Ee){var Re=4*(Ee*R+xe);return[pe[Re],pe[Re+1],pe[Re+2],pe[Re+3]]}).toDataURL("image/png")}G.attr({"xlink:href":fe,height:$,width:z,x:_,y:M})});i._promises.push(ie)}function le(fe){var he=document.createElement("canvas");he.width=z,he.height=$;var pe,xe=he.getContext("2d",{willReadFrequently:!0}),Ee=function(ce){return C.constrain(Math.round(l.c2p(O+ce*B)-_),0,z)},Re=function(ce){return C.constrain(Math.round(u.c2p(P+ce*J)-M),0,$)},ke=T.colormodel[y.colormodel],Te=ke.colormodel||y.colormodel,we=ke.fmt;for(D=0;D<w.w;D++){var je=Ee(D),Ce=Ee(D+1);if(Ce!==je&&!isNaN(Ce)&&!isNaN(je))for(var Ie=0;Ie<w.h;Ie++){var ge=Re(Ie),me=Re(Ie+1);me===ge||isNaN(me)||isNaN(ge)||!fe(D,Ie)||(pe=y._scaler(fe(D,Ie)),xe.fillStyle=pe?Te+"("+we(pe).join(",")+")":"rgba(0,0,0,0)",xe.fillRect(je,ge,Ce-je,me-ge))}}return he}})}},12826:function(se,U,r){"use strict";var I=r(39898);se.exports=function(C){I.select(C).selectAll(".im image").style("opacity",function(f){return f[0].trace.opacity})}},54846:function(se,U,r){"use strict";var I=r(1426).extendFlat,C=r(1426).extendDeep,f=r(30962).overrideAll,k=r(41940),T=r(22399),v=r(27670).Y,c=r(13838),i=r(44467).templatedArray,s=r(22372),a=r(12663).descriptionOnlyNumbers,o=k({editType:"plot",colorEditType:"plot"}),l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:T.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},u={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=i("step",C({},l,{range:u}));se.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:v({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:I({},o,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:a("value")},font:I({},o,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:a("value")},increasing:{symbol:{valType:"string",dflt:s.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:s.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:s.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:s.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:I({},o,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:C({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:f({range:u,visible:I({},c.visible,{dflt:!0}),tickmode:c.minor.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:I({},c.ticks,{dflt:"outside"}),ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,ticklabelstep:c.ticklabelstep,showticklabels:c.showticklabels,labelalias:c.labelalias,tickfont:k({}),tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,separatethousands:c.separatethousands,exponentformat:c.exponentformat,minexponent:c.minexponent,showexponent:c.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:I({},l.line.color,{}),width:I({},l.line.width,{dflt:1}),editType:"plot"},thickness:I({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function(se,U,r){"use strict";var I=r(74875);U.name="indicator",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},24667:function(se){"use strict";se.exports={calc:function(U,r){var I=[],C=r.value;"number"!=typeof r._lastValue&&(r._lastValue=r.value);var f=r._lastValue,k=f;return r._hasDelta&&"number"==typeof r.delta.reference&&(k=r.delta.reference),I[0]={y:C,lastY:f,delta:C-k,relativeDelta:(C-k)/k},I}}},84577:function(se){"use strict";se.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function(se,U,r){"use strict";var I=r(71828),C=r(54846),f=r(27670).c,k=r(44467),T=r(85501),v=r(84577),c=r(26218),i=r(38701),s=r(96115),a=r(89426);function o(l,u){function d(g,h){return I.coerce(l,u,C.gauge.steps,g,h)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}se.exports={supplyDefaults:function(l,u,d,g){function h(P,R){return I.coerce(l,u,C,P,R)}f(u,g,h),h("mode"),u._hasNumber=-1!==u.mode.indexOf("number"),u._hasDelta=-1!==u.mode.indexOf("delta"),u._hasGauge=-1!==u.mode.indexOf("gauge");var w=h("value");u._range=[0,"number"==typeof w?1.5*w:1];var y,p,_,x,b,M,m=new Array(2);function D(P,R){return I.coerce(_,x,C.gauge,P,R)}function S(P,R){return I.coerce(b,M,C.gauge.axis,P,R)}if(u._hasNumber&&(h("number.valueformat"),h("number.font.color",g.font.color),h("number.font.family",g.font.family),h("number.font.size"),void 0===u.number.font.size&&(u.number.font.size=v.defaultNumberFontSize,m[0]=!0),h("number.prefix"),h("number.suffix"),y=u.number.font.size),u._hasDelta&&(h("delta.font.color",g.font.color),h("delta.font.family",g.font.family),h("delta.font.size"),void 0===u.delta.font.size&&(u.delta.font.size=(u._hasNumber?.5:1)*(y||v.defaultNumberFontSize),m[1]=!0),h("delta.reference",u.value),h("delta.relative"),h("delta.valueformat",u.delta.relative?"2%":""),h("delta.increasing.symbol"),h("delta.increasing.color"),h("delta.decreasing.symbol"),h("delta.decreasing.color"),h("delta.position"),h("delta.prefix"),h("delta.suffix"),p=u.delta.font.size),u._scaleNumbers=(!u._hasNumber||m[0])&&(!u._hasDelta||m[1])||!1,h("title.font.color",g.font.color),h("title.font.family",g.font.family),h("title.font.size",.25*(y||p||v.defaultNumberFontSize)),h("title.text"),u._hasGauge){(_=l.gauge)||(_={}),x=k.newContainer(u,"gauge"),D("shape"),(u._isBullet="bullet"===u.gauge.shape)||h("title.align","center"),(u._isAngular="angular"===u.gauge.shape)||h("align","center"),D("bgcolor",g.paper_bgcolor),D("borderwidth"),D("bordercolor"),D("bar.color"),D("bar.line.color"),D("bar.line.width"),D("bar.thickness",v.valueThickness*("bullet"===u.gauge.shape?.5:1)),T(_,x,{name:"steps",handleItemDefaults:o}),D("threshold.value"),D("threshold.thickness"),D("threshold.line.width"),D("threshold.line.color"),b={},_&&(b=_.axis||{}),M=k.newContainer(x,"axis"),S("visible"),u._range=S("range",u._range);var O={outerTicks:!0};c(b,M,S,"linear"),a(b,M,S,"linear",O),s(b,M,S,"linear",O),i(b,M,S,O)}else h("title.align","center"),h("align","center"),u._isAngular=u._isBullet=!1;u._length=null}}},15154:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"indicator",basePlotModule:r(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:r(54846),supplyDefaults:r(94425).supplyDefaults,calc:r(24667).calc,plot:r(75634),meta:{}}},75634:function(se,U,r){"use strict";var I=r(39898),C=r(81684).sX,f=r(81684).k4,k=r(71828),T=k.strScale,v=k.strTranslate,c=k.rad2deg,i=r(18783).MID_SHIFT,s=r(91424),a=r(84577),o=r(63893),l=r(89298),u=r(71453),d=r(52830),g=r(13838),h=r(7901),w={left:"start",center:"middle",right:"end"},y={left:0,center:.5,right:1},p=/[yzafpn\xb5mkMGTPEZY]/;function _(S){return S&&S.duration>0}function x(S){S.each(function(O){h.stroke(I.select(this),O.line.color)}).each(function(O){h.fill(I.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function b(S,O,P){var R=S._fullLayout,F=k.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},O),B={type:"linear",_id:"x"+O._id},J={letter:"x",font:R.font,noHover:!0,noTickson:!0};function z($,G){return k.coerce(F,B,g,$,G)}return u(F,B,z,J,R),d(F,B,z,J),B}function M(S,O,P){return[Math.min(O/S.width,P/S.height),S,O+"x"+P]}function m(S,O,P,R){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),B=I.select(F);return B.text(S).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",S).call(o.convertToTspans,R).call(s.font,O),s.bBox(B.node())}function D(S,O,P,R,F,B){var J="_cache"+O;S[J]&&S[J].key===F||(S[J]={key:F,value:P});var z=k.aggNums(B,null,[S[J].value,R],2);return S[J].value=z,z}se.exports=function(S,O,P,R){var F,B=S._fullLayout;_(P)&&R&&(F=R()),k.makeTraceGroups(B._indicatorlayer,O,"trace").each(function(J){var z,$,G,H,X,K=J[0].trace,ue=I.select(this),ae=K._hasGauge,ne=K._isAngular,Q=K._isBullet,ie=K.domain,le={w:B._size.w*(ie.x[1]-ie.x[0]),h:B._size.h*(ie.y[1]-ie.y[0]),l:B._size.l+B._size.w*ie.x[0],r:B._size.r+B._size.w*(1-ie.x[1]),t:B._size.t+B._size.h*(1-ie.y[1]),b:B._size.b+B._size.h*ie.y[0]},fe=le.l+le.w/2,he=le.t+le.h/2,pe=Math.min(le.w/2,le.h),xe=a.innerRadius*pe,Ee=K.align||"center";if($=he,ae){if(ne&&(z=fe,$=he+pe/2,G=function(ge){return me=ge,[(ce=.9*xe)/Math.sqrt(me.width/2*(me.width/2)+me.height*me.height),me,ce];var me,ce}),Q){var Re=a.bulletPadding,ke=1-a.bulletNumberDomainSize+Re;z=le.l+(ke+(1-ke)*y[Ee])*le.w,G=function(ge){return M(ge,(a.bulletNumberDomainSize-Re)*le.w,le.h)}}}else z=le.l+y[Ee]*le.w,G=function(ge){return M(ge,le.w,le.h)};(function(ge,me,ce,Ae){var Ne,De,qe,Ke=ce[0].trace,be=Ae.numbersX,Oe=Ae.numbersY,Le=Ke.align||"center",Ue=w[Le],Ze=Ae.transitionOpts,We=Ae.onComplete,et=k.ensureSingle(me,"g","numbers"),nt=[];Ke._hasNumber&&nt.push("number"),Ke._hasDelta&&(nt.push("delta"),"left"===Ke.delta.position&&nt.reverse());var ct=et.selectAll("text").data(nt);function yt(Rt,Wt,Ht,it){if(!Rt.match("s")||Ht>=0==it>=0||Wt(Ht).slice(-1).match(p)||Wt(it).slice(-1).match(p))return Wt;var st=Rt.slice().replace("s","f").replace(/\d+/,function(ot){return parseInt(ot)-1}),Je=b(ge,{tickformat:st});return function(ot){return Math.abs(ot)<1?l.tickText(Je,ot).text:Wt(ot)}}ct.enter().append("text"),ct.attr("text-anchor",function(){return Ue}).attr("class",function(Rt){return Rt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ct.exit().remove();var ut,Ct=Ke.mode+Ke.align;if(Ke._hasDelta&&(ut=function(){var Rt=b(ge,{tickformat:Ke.delta.valueformat},Ke._range);Rt.setScale(),l.prepTicks(Rt);var Wt=function(He){return l.tickText(Rt,He).text},Ht=Ke.delta.suffix,it=Ke.delta.prefix,st=function(He){return Ke.delta.relative?He.relativeDelta:He.delta},Je=function(He,Ge){return 0===He||"number"!=typeof He||isNaN(He)?"-":(He>0?Ke.delta.increasing.symbol:Ke.delta.decreasing.symbol)+it+Ge(He)+Ht},ot=function(He){return He.delta>=0?Ke.delta.increasing.color:Ke.delta.decreasing.color};void 0===Ke._deltaLastValue&&(Ke._deltaLastValue=st(ce[0]));var pt=et.select("text.delta");function xt(){pt.text(Je(st(ce[0]),Wt)).call(h.fill,ot(ce[0])).call(o.convertToTspans,ge)}return pt.call(s.font,Ke.delta.font).call(h.fill,ot({delta:Ke._deltaLastValue})),_(Ze)?pt.transition().duration(Ze.duration).ease(Ze.easing).tween("text",function(){var He=I.select(this),Ge=st(ce[0]),dt=Ke._deltaLastValue,ht=yt(Ke.delta.valueformat,Wt,dt,Ge),kt=f(dt,Ge);return Ke._deltaLastValue=Ge,function(St){He.text(Je(kt(St),ht)),He.call(h.fill,ot({delta:kt(St)}))}}).each("end",function(){xt(),We&&We()}).each("interrupt",function(){xt(),We&&We()}):xt(),De=m(Je(st(ce[0]),Wt),Ke.delta.font,Ue,ge),pt}(),Ct+=Ke.delta.position+Ke.delta.font.size+Ke.delta.font.family+Ke.delta.valueformat,Ct+=Ke.delta.increasing.symbol+Ke.delta.decreasing.symbol,qe=De),Ke._hasNumber&&(function(){var Rt=b(ge,{tickformat:Ke.number.valueformat},Ke._range);Rt.setScale(),l.prepTicks(Rt);var Wt=function(ot){return l.tickText(Rt,ot).text},Ht=Ke.number.suffix,it=Ke.number.prefix,st=et.select("text.number");function Je(){var ot="number"==typeof ce[0].y?it+Wt(ce[0].y)+Ht:"-";st.text(ot).call(s.font,Ke.number.font).call(o.convertToTspans,ge)}_(Ze)?st.transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){Je(),We&&We()}).each("interrupt",function(){Je(),We&&We()}).attrTween("text",function(){var ot=I.select(this),pt=f(ce[0].lastY,ce[0].y);Ke._lastValue=ce[0].y;var xt=yt(Ke.number.valueformat,Wt,ce[0].lastY,ce[0].y);return function(He){ot.text(it+xt(pt(He))+Ht)}}):Je(),Ne=m(it+Wt(ce[0].y)+Ht,Ke.number.font,Ue,ge)}(),Ct+=Ke.number.font.size+Ke.number.font.family+Ke.number.valueformat+Ke.number.suffix+Ke.number.prefix,qe=Ne),Ke._hasDelta&&Ke._hasNumber){var Dt,vt,mt=[(Ne.left+Ne.right)/2,(Ne.top+Ne.bottom)/2],Lt=[(De.left+De.right)/2,(De.top+De.bottom)/2],Ft=.75*Ke.delta.font.size;"left"===Ke.delta.position&&(Dt=D(Ke,"deltaPos",0,-1*(Ne.width*y[Ke.align]+De.width*(1-y[Ke.align])+Ft),Ct,Math.min),vt=mt[1]-Lt[1],qe={width:Ne.width+De.width+Ft,height:Math.max(Ne.height,De.height),left:De.left+Dt,right:Ne.right,top:Math.min(Ne.top,De.top+vt),bottom:Math.max(Ne.bottom,De.bottom+vt)}),"right"===Ke.delta.position&&(Dt=D(Ke,"deltaPos",0,Ne.width*(1-y[Ke.align])+De.width*y[Ke.align]+Ft,Ct,Math.max),vt=mt[1]-Lt[1],qe={width:Ne.width+De.width+Ft,height:Math.max(Ne.height,De.height),left:Ne.left,right:De.right+Dt,top:Math.min(Ne.top,De.top+vt),bottom:Math.max(Ne.bottom,De.bottom+vt)}),"bottom"===Ke.delta.position&&(Dt=null,vt=De.height,qe={width:Math.max(Ne.width,De.width),height:Ne.height+De.height,left:Math.min(Ne.left,De.left),right:Math.max(Ne.right,De.right),top:Ne.bottom-Ne.height,bottom:Ne.bottom+De.height}),"top"===Ke.delta.position&&(Dt=null,vt=Ne.top,qe={width:Math.max(Ne.width,De.width),height:Ne.height+De.height,left:Math.min(Ne.left,De.left),right:Math.max(Ne.right,De.right),top:Ne.bottom-Ne.height-De.height,bottom:Ne.bottom}),ut.attr({dx:Dt,dy:vt})}(Ke._hasNumber||Ke._hasDelta)&&et.attr("transform",function(){var Wt,Rt=Ae.numbersScaler(qe),Ht=D(Ke,"numbersScale",1,Rt[0],Ct+=Rt[2],Math.min);Ke._scaleNumbers||(Ht=1),Ke._numbersTop=Ht*qe.top+(Wt=Ke._isAngular?Oe-Ht*qe.bottom:Oe-Ht*(qe.top+qe.bottom)/2);var it=qe[Le];"center"===Le&&(it=(qe.left+qe.right)/2);var st=be-Ht*it;return st=D(Ke,"numbersTranslate",0,st,Ct,Math.max),v(st,Wt)+T(Ht)})})(S,ue,J,{numbersX:z,numbersY:$,numbersScaler:G,transitionOpts:P,onComplete:F}),ae&&(H={range:K.gauge.axis.range,color:K.gauge.bgcolor,line:{color:K.gauge.bordercolor,width:0},thickness:1},X={range:K.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:K.gauge.bordercolor,width:K.gauge.borderwidth},thickness:1});var Te=ue.selectAll("g.angular").data(ne?J:[]);Te.exit().remove();var we=ue.selectAll("g.angularaxis").data(ne?J:[]);we.exit().remove(),ne&&function(ge,me,ce,Ae){var Ne,De,qe,Ke,be=ce[0].trace,Oe=Ae.size,Le=Ae.radius,Ue=Ae.innerRadius,Ze=Ae.gaugeBg,We=Ae.gaugeOutline,et=[Oe.l+Oe.w/2,Oe.t+Oe.h/2+Le/2],nt=Ae.gauge,ct=Ae.layer,yt=Ae.transitionOpts,ut=Ae.onComplete,Ct=Math.PI/2;function Dt(St){var Et=be.gauge.axis.range[0],wt=(St-Et)/(be.gauge.axis.range[1]-Et)*Math.PI-Ct;return wt<-Ct?-Ct:wt>Ct?Ct:wt}function vt(St){return I.svg.arc().innerRadius((Ue+Le)/2-St/2*(Le-Ue)).outerRadius((Ue+Le)/2+St/2*(Le-Ue)).startAngle(-Ct)}function mt(St){St.attr("d",function(Et){return vt(Et.thickness).startAngle(Dt(Et.range[0])).endAngle(Dt(Et.range[1]))()})}nt.enter().append("g").classed("angular",!0),nt.attr("transform",v(et[0],et[1])),ct.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ct.selectAll("g.xangularaxistick,path,text").remove(),(Ne=b(ge,be.gauge.axis)).type="linear",Ne.range=be.gauge.axis.range,Ne._id="xangularaxis",Ne.ticklabeloverflow="allow",Ne.setScale();var Lt=function(St){return(Ne.range[0]-St.x)/(Ne.range[1]-Ne.range[0])*Math.PI+Math.PI},Ft={},Rt=l.makeLabelFns(Ne,0).labelStandoff;Ft.xFn=function(St){var Et=Lt(St);return Math.cos(Et)*Rt},Ft.yFn=function(St){var Et=Lt(St),wt=Math.sin(Et)>0?.2:1;return-Math.sin(Et)*(Rt+St.fontSize*wt)+Math.abs(Math.cos(Et))*(St.fontSize*i)},Ft.anchorFn=function(St){var Et=Lt(St),wt=Math.cos(Et);return Math.abs(wt)<.1?"middle":wt>0?"start":"end"},Ft.heightFn=function(St,Et,wt){var Nt=Lt(St);return-.5*(1+Math.sin(Nt))*wt};var Wt=function(St){return v(et[0]+Le*Math.cos(St),et[1]-Le*Math.sin(St))};qe=function(St){return Wt(Lt(St))},De=l.calcTicks(Ne),Ke=l.getTickSigns(Ne)[2],Ne.visible&&(l.drawTicks(ge,Ne,{vals:De,layer:ct,path:"M"+(Ke="inside"===Ne.ticks?-1:1)*((Ne.linewidth||1)/2)+",0h"+Ke*Ne.ticklen,transFn:function(St){var Et=Lt(St);return Wt(Et)+"rotate("+-c(Et)+")"}}),l.drawLabels(ge,Ne,{vals:De,layer:ct,transFn:qe,labelFns:Ft}));var it=[Ze].concat(be.gauge.steps),st=nt.selectAll("g.bg-arc").data(it);st.enter().append("g").classed("bg-arc",!0).append("path"),st.select("path").call(mt).call(x),st.exit().remove();var Je=vt(be.gauge.bar.thickness),ot=nt.selectAll("g.value-arc").data([be.gauge.bar]);ot.enter().append("g").classed("value-arc",!0).append("path");var pt,xt,He,Ge=ot.select("path");_(yt)?(Ge.transition().duration(yt.duration).ease(yt.easing).each("end",function(){ut&&ut()}).each("interrupt",function(){ut&&ut()}).attrTween("d",(pt=Je,xt=Dt(ce[0].lastY),He=Dt(ce[0].y),function(){var St=C(xt,He);return function(Et){return pt.endAngle(St(Et))()}})),be._lastValue=ce[0].y):Ge.attr("d","number"==typeof ce[0].y?Je.endAngle(Dt(ce[0].y)):"M0,0Z"),Ge.call(x),ot.exit().remove(),it=[];var dt=be.gauge.threshold.value;(dt||0===dt)&&it.push({range:[dt,dt],color:be.gauge.threshold.color,line:{color:be.gauge.threshold.line.color,width:be.gauge.threshold.line.width},thickness:be.gauge.threshold.thickness});var ht=nt.selectAll("g.threshold-arc").data(it);ht.enter().append("g").classed("threshold-arc",!0).append("path"),ht.select("path").call(mt).call(x),ht.exit().remove();var kt=nt.selectAll("g.gauge-outline").data([We]);kt.enter().append("g").classed("gauge-outline",!0).append("path"),kt.select("path").call(mt).call(x),kt.exit().remove()}(S,0,J,{radius:pe,innerRadius:xe,gauge:Te,layer:we,size:le,gaugeBg:H,gaugeOutline:X,transitionOpts:P,onComplete:F});var je=ue.selectAll("g.bullet").data(Q?J:[]);je.exit().remove();var Ce=ue.selectAll("g.bulletaxis").data(Q?J:[]);Ce.exit().remove(),Q&&function(ge,me,ce,Ae){var Ne,De,qe,Ke,be,Oe=ce[0].trace,Le=Ae.gauge,Ue=Ae.layer,Ze=Ae.gaugeBg,We=Ae.gaugeOutline,et=Ae.size,nt=Oe.domain,ct=Ae.transitionOpts,yt=Ae.onComplete;Le.enter().append("g").classed("bullet",!0),Le.attr("transform",v(et.l,et.t)),Ue.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Ue.selectAll("g.xbulletaxistick,path,text").remove();var ut=et.h,Ct=Oe.gauge.bar.thickness*ut,Dt=nt.x[0],vt=nt.x[0]+(nt.x[1]-nt.x[0])*(Oe._hasNumber||Oe._hasDelta?1-a.bulletNumberDomainSize:1);function mt(st){st.attr("width",function(Je){return Math.max(0,Ne.c2p(Je.range[1])-Ne.c2p(Je.range[0]))}).attr("x",function(Je){return Ne.c2p(Je.range[0])}).attr("y",function(Je){return.5*(1-Je.thickness)*ut}).attr("height",function(Je){return Je.thickness*ut})}(Ne=b(ge,Oe.gauge.axis))._id="xbulletaxis",Ne.domain=[Dt,vt],Ne.setScale(),De=l.calcTicks(Ne),qe=l.makeTransTickFn(Ne),Ke=l.getTickSigns(Ne)[2],be=et.t+et.h,Ne.visible&&(l.drawTicks(ge,Ne,{vals:"inside"===Ne.ticks?l.clipEnds(Ne,De):De,layer:Ue,path:l.makeTickPath(Ne,be,Ke),transFn:qe}),l.drawLabels(ge,Ne,{vals:De,layer:Ue,transFn:qe,labelFns:l.makeLabelFns(Ne,be)}));var Lt=[Ze].concat(Oe.gauge.steps),Ft=Le.selectAll("g.bg-bullet").data(Lt);Ft.enter().append("g").classed("bg-bullet",!0).append("rect"),Ft.select("rect").call(mt).call(x),Ft.exit().remove();var Rt=Le.selectAll("g.value-bullet").data([Oe.gauge.bar]);Rt.enter().append("g").classed("value-bullet",!0).append("rect"),Rt.select("rect").attr("height",Ct).attr("y",(ut-Ct)/2).call(x),_(ct)?Rt.select("rect").transition().duration(ct.duration).ease(ct.easing).each("end",function(){yt&&yt()}).each("interrupt",function(){yt&&yt()}).attr("width",Math.max(0,Ne.c2p(Math.min(Oe.gauge.axis.range[1],ce[0].y)))):Rt.select("rect").attr("width","number"==typeof ce[0].y?Math.max(0,Ne.c2p(Math.min(Oe.gauge.axis.range[1],ce[0].y))):0),Rt.exit().remove();var Wt=ce.filter(function(){return Oe.gauge.threshold.value||0===Oe.gauge.threshold.value}),Ht=Le.selectAll("g.threshold-bullet").data(Wt);Ht.enter().append("g").classed("threshold-bullet",!0).append("line"),Ht.select("line").attr("x1",Ne.c2p(Oe.gauge.threshold.value)).attr("x2",Ne.c2p(Oe.gauge.threshold.value)).attr("y1",(1-Oe.gauge.threshold.thickness)/2*ut).attr("y2",(1-(1-Oe.gauge.threshold.thickness)/2)*ut).call(h.stroke,Oe.gauge.threshold.line.color).style("stroke-width",Oe.gauge.threshold.line.width),Ht.exit().remove();var it=Le.selectAll("g.gauge-outline").data([We]);it.enter().append("g").classed("gauge-outline",!0).append("rect"),it.select("rect").call(mt).call(x),it.exit().remove()}(S,0,J,{gauge:je,layer:Ce,size:le,gaugeBg:H,gaugeOutline:X,transitionOpts:P,onComplete:F});var Ie=ue.selectAll("text.title").data(J);Ie.exit().remove(),Ie.enter().append("text").classed("title",!0),Ie.attr("text-anchor",function(){return Q?w.right:w[K.title.align]}).text(K.title.text).call(s.font,K.title.font).call(o.convertToTspans,S),Ie.attr("transform",function(){var ge,me=le.l+le.w*y[K.title.align],ce=a.titlePadding,Ae=s.bBox(Ie.node());return ae?(ne&&(ge=K.gauge.axis.visible?s.bBox(we.node()).top-ce-Ae.bottom:le.t+le.h/2-pe/2-Ae.bottom-ce),Q&&(ge=$-(Ae.top+Ae.bottom)/2,me=le.l-a.bulletPadding*le.w)):ge=K._numbersTop-ce-Ae.bottom,v(me,ge)})})}},16249:function(se,U,r){"use strict";var I=r(50693),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(2418),T=r(9012),v=r(1426).extendFlat,c=r(30962).overrideAll,i=se.exports=c(v({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:f(),xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z"),valuehoverformat:C("value",1),showlegend:v({},T.showlegend,{dflt:!1})},I("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:v({},T.hoverinfo)}),"calc","nested");i.flatshading.dflt=!0,i.lighting.facenormalsepsilon.dflt=0,i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},56959:function(se,U,r){"use strict";var I=r(78803),C=r(88489).processGrid,f=r(88489).filter;se.exports=function(k,T){T._len=Math.min(T.x.length,T.y.length,T.z.length,T.value.length),T._x=f(T.x,T._len),T._y=f(T.y,T._len),T._z=f(T.z,T._len),T._value=f(T.value,T._len);var v=C(T);T._gridFill=v.fill,T._Xs=v.Xs,T._Ys=v.Ys,T._Zs=v.Zs,T._len=v.len;for(var c=1/0,i=-1/0,s=0;s<T._len;s++){var a=T._value[s];c=Math.min(c,a),i=Math.max(i,a)}T._minValues=c,T._maxValues=i,T._vMin=null==T.isomin?c:T.isomin,T._vMax=void 0===T.isomax||null===T.isomin?i:T.isomax,I(k,T,{vals:[T._vMin,T._vMax],containerStr:"",cLetter:"c"})}},22674:function(se,U,r){"use strict";var I=r(9330).gl_mesh3d,C=r(81697).parseColorScale,f=r(78614),k=r(21081).extractOpts,T=r(90060),v=function(o,l){for(var u=l.length-1;u>0;u--){var d=Math.min(l[u],l[u-1]),g=Math.max(l[u],l[u-1]);if(g>d&&d<o&&o<=g)return{id:u,distRatio:(g-o)/(g-d)}}return{id:0,distRatio:0}};function c(o,l,u){this.scene=o,this.uid=u,this.mesh=l,this.name="",this.data=null,this.showContour=!1}var i=c.prototype;i.handlePick=function(o){if(o.object===this.mesh){var l=o.data.index,d=this.data._meshY[l],g=this.data._meshZ[l],h=this.data._Ys.length,w=this.data._Zs.length,y=v(this.data._meshX[l],this.data._Xs).id,p=v(d,this.data._Ys).id,_=v(g,this.data._Zs).id,x=o.index=_+w*p+w*h*y;o.traceCoordinate=[this.data._meshX[x],this.data._meshY[x],this.data._meshZ[x],this.data._value[x]];var b=this.data.hovertext||this.data.text;return Array.isArray(b)&&void 0!==b[x]?o.textLabel=b[x]:b&&(o.textLabel=b),!0}},i.update=function(o){var l=this.scene,u=l.fullSceneLayout;function d(w,y,p,_){return y.map(function(x){return w.d2l(x,0,_)*p})}this.data=a(o);var g={positions:T(d(u.xaxis,o._meshX,l.dataScale[0],o.xcalendar),d(u.yaxis,o._meshY,l.dataScale[1],o.ycalendar),d(u.zaxis,o._meshZ,l.dataScale[2],o.zcalendar)),cells:T(o._meshI,o._meshJ,o._meshK),lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:f(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},h=k(o);g.vertexIntensity=o._meshIntensity,g.vertexIntensityBounds=[h.min,h.max],g.colormap=C(o),this.mesh.update(g)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var s=["xyz","xzy","yxz","yzx","zxy","zyx"];function a(o){o._meshI=[],o._meshJ=[],o._meshK=[];var l,u,d,g,h,w,y,p=o.surface.show,_=o.spaceframe.show,x=o.surface.fill,b=o.spaceframe.fill,M=!1,m=!1,D=0,S=o._Xs,O=o._Ys,P=o._Zs,R=S.length,F=O.length,B=P.length,J=s.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),z=function(Le,Ue,Ze){switch(J){case 5:return Ze+B*Ue+B*F*Le;case 4:return Ze+B*Le+B*R*Ue;case 3:return Ue+F*Ze+F*B*Le;case 2:return Ue+F*Le+F*R*Ze;case 1:return Le+R*Ze+R*B*Ue;default:return Le+R*Ue+R*F*Ze}},$=o._minValues,G=o._maxValues,H=o._vMin,X=o._vMax;function K(Le,Ue,Ze){for(var We=w.length,et=u;et<We;et++)if(Le===d[et]&&Ue===g[et]&&Ze===h[et])return et;return-1}function ue(){u=l}function ae(){d=[],g=[],h=[],w=[],l=0,ue()}function ne(Le,Ue,Ze,We){return d.push(Le),g.push(Ue),h.push(Ze),w.push(We),++l-1}function Q(Le,Ue,Ze){for(var We=[],et=0;et<Le.length;et++)We[et]=Le[et]*(1-Ze)+Ze*Ue[et];return We}function ie(Le){y=Le}function le(Le,Ue){return"all"===Le||null===Le||Le.indexOf(Ue)>-1}function fe(Le,Ue){return null===Le?Ue:Le}function he(Le,Ue,Ze){ue();var et,nt,Ht,it,st,Je,ot,pt,xt,He,Ge,dt,ht,kt,St,ct=[Ue],yt=[Ze];if(y>=1)ct=[Ue],yt=[Ze];else if(y>0){var ut=(it=Ze,He=Q(pt=function(Et,wt,Nt){for(var _t=[],Mt=0;Mt<Et.length;Mt++)_t[Mt]=(Et[Mt]+wt[Mt]+Nt[Mt])/3;return _t}(st=(Ht=Ue)[0],Je=Ht[1],ot=Ht[2]),st,xt=Math.sqrt(1-y)),{xyzv:[[st,Je,Ge=Q(pt,Je,xt)],[Ge,He,st],[Je,ot,dt=Q(pt,ot,xt)],[dt,Ge,Je],[ot,st,He],[He,dt,ot]],abc:[[ht=it[0],kt=it[1],-1],[-1,-1,ht],[kt,St=it[2],-1],[-1,-1,kt],[St,ht,-1],[-1,-1,St]]});ct=ut.xyzv,yt=ut.abc}for(var Ct=0;Ct<ct.length;Ct++){Ue=ct[Ct],Ze=yt[Ct];for(var Dt=[],vt=0;vt<3;vt++){var mt=Ue[vt][0],Lt=Ue[vt][1],Ft=Ue[vt][2],Rt=Ue[vt][3],Wt=Ze[vt]>-1?Ze[vt]:K(mt,Lt,Ft);Dt[vt]=Wt>-1?Wt:ne(mt,Lt,Ft,fe(Le,Rt))}et=Dt[1],nt=Dt[2],o._meshI.push(Dt[0]),o._meshJ.push(et),o._meshK.push(nt),++D}}function pe(Le,Ue,Ze,We){var et=Le[3];et<Ze&&(et=Ze),et>We&&(et=We);for(var nt=(Le[3]-et)/(Le[3]-Ue[3]+1e-9),ct=[],yt=0;yt<4;yt++)ct[yt]=(1-nt)*Le[yt]+nt*Ue[yt];return ct}function xe(Le,Ue,Ze){return Le>=Ue&&Le<=Ze}function Ee(Le){var Ue=.001*(X-H);return Le>=H-Ue&&Le<=X+Ue}function Re(Le){for(var Ue=[],Ze=0;Ze<4;Ze++){var We=Le[Ze];Ue.push([o._x[We],o._y[We],o._z[We],o._value[We]])}return Ue}var ke=3;function Te(Le,Ue,Ze,We,et,nt){nt||(nt=1),Ze=[-1,-1,-1];var ct=!1,yt=[xe(Ue[0][3],We,et),xe(Ue[1][3],We,et),xe(Ue[2][3],We,et)];if(!yt[0]&&!yt[1]&&!yt[2])return!1;var ut=function(Dt,vt,mt){return Ee(vt[0][3])&&Ee(vt[1][3])&&Ee(vt[2][3])?(he(Dt,vt,mt),!0):nt<ke&&Te(Dt,vt,mt,H,X,++nt)};if(yt[0]&&yt[1]&&yt[2])return ut(Le,Ue,Ze)||ct;var Ct=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Dt){if(yt[Dt[0]]&&yt[Dt[1]]&&!yt[Dt[2]]){var vt=Ue[Dt[0]],mt=Ue[Dt[1]],Lt=Ue[Dt[2]],Ft=pe(Lt,vt,We,et),Rt=pe(Lt,mt,We,et);ct=ut(Le,[Rt,Ft,vt],[-1,-1,Ze[Dt[0]]])||ct,ct=ut(Le,[vt,mt,Rt],[Ze[Dt[0]],Ze[Dt[1]],-1])||ct,Ct=!0}}),Ct||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Dt){if(yt[Dt[0]]&&!yt[Dt[1]]&&!yt[Dt[2]]){var vt=Ue[Dt[0]],Lt=Ue[Dt[2]],Ft=pe(Ue[Dt[1]],vt,We,et),Rt=pe(Lt,vt,We,et);ct=ut(Le,[Rt,Ft,vt],[-1,-1,Ze[Dt[0]]])||ct,Ct=!0}}),ct}function we(Le,Ue,Ze,We){var ut,Ct,Dt,vt,et=!1,nt=Re(Ue),ct=[xe(nt[0][3],Ze,We),xe(nt[1][3],Ze,We),xe(nt[2][3],Ze,We),xe(nt[3][3],Ze,We)];if(!(ct[0]||ct[1]||ct[2]||ct[3]))return et;if(ct[0]&&ct[1]&&ct[2]&&ct[3])return m&&(ut=Le,Ct=nt,Dt=Ue,(vt=function(mt,Lt,Ft){he(ut,[Ct[mt],Ct[Lt],Ct[Ft]],[Dt[mt],Dt[Lt],Dt[Ft]])})(0,1,2),vt(3,0,1),vt(2,3,0),et=void vt(1,2,3)||et),et;var yt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(ct[ut[0]]&&ct[ut[1]]&&ct[ut[2]]&&!ct[ut[3]]){var Ct=nt[ut[0]],Dt=nt[ut[1]],vt=nt[ut[2]],mt=nt[ut[3]];if(m)et=he(Le,[Ct,Dt,vt],[Ue[ut[0]],Ue[ut[1]],Ue[ut[2]]])||et;else{var Lt=pe(mt,Ct,Ze,We),Ft=pe(mt,Dt,Ze,We),Rt=pe(mt,vt,Ze,We);et=he(null,[Lt,Ft,Rt],[-1,-1,-1])||et}yt=!0}}),yt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(ct[ut[0]]&&ct[ut[1]]&&!ct[ut[2]]&&!ct[ut[3]]){var Ct=nt[ut[0]],Dt=nt[ut[1]],vt=nt[ut[2]],mt=nt[ut[3]],Lt=pe(vt,Ct,Ze,We),Ft=pe(vt,Dt,Ze,We),Rt=pe(mt,Dt,Ze,We),Wt=pe(mt,Ct,Ze,We);m?(et=he(Le,[Ct,Wt,Lt],[Ue[ut[0]],-1,-1])||et,et=he(Le,[Dt,Ft,Rt],[Ue[ut[1]],-1,-1])||et):(it=[Lt,Ft,Rt,Wt],st=[-1,-1,-1,-1],(Je=function(ot,pt,xt){he(null,[it[ot],it[pt],it[xt]],[st[ot],st[pt],st[xt]])})(0,1,2),et=void Je(2,3,0)||et),yt=!0}var it,st,Je}),yt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(ct[ut[0]]&&!ct[ut[1]]&&!ct[ut[2]]&&!ct[ut[3]]){var Ct=nt[ut[0]],vt=nt[ut[2]],mt=nt[ut[3]],Lt=pe(nt[ut[1]],Ct,Ze,We),Ft=pe(vt,Ct,Ze,We),Rt=pe(mt,Ct,Ze,We);m?(et=he(Le,[Ct,Lt,Ft],[Ue[ut[0]],-1,-1])||et,et=he(Le,[Ct,Ft,Rt],[Ue[ut[0]],-1,-1])||et,et=he(Le,[Ct,Rt,Lt],[Ue[ut[0]],-1,-1])||et):et=he(null,[Lt,Ft,Rt],[-1,-1,-1])||et,yt=!0}})),et}function je(Le,Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt){var vt=!1;return M&&(le(Le,"A")&&(vt=we(null,[Ue,Ze,We,nt],Ct,Dt)||vt),le(Le,"B")&&(vt=we(null,[Ze,We,et,ut],Ct,Dt)||vt),le(Le,"C")&&(vt=we(null,[Ze,nt,ct,ut],Ct,Dt)||vt),le(Le,"D")&&(vt=we(null,[We,nt,yt,ut],Ct,Dt)||vt),le(Le,"E")&&(vt=we(null,[Ze,We,nt,ut],Ct,Dt)||vt)),m&&(vt=we(Le,[Ze,We,nt,ut],Ct,Dt)||vt),vt}function Ce(Le,Ue,Ze,We,et,nt,ct,yt){return[!0===yt[0]||Te(Le,Re([Ue,Ze,We]),[Ue,Ze,We],nt,ct),!0===yt[1]||Te(Le,Re([We,et,Ue]),[We,et,Ue],nt,ct)]}function Ie(Le,Ue,Ze,We,et,nt,ct,yt,ut){return yt?Ce(Le,Ue,Ze,et,We,nt,ct,ut):Ce(Le,Ze,et,We,Ue,nt,ct,ut)}function ge(Le,Ue,Ze,We,et,nt,ct){var yt,ut,Ct,Dt,vt=!1,mt=function(){vt=Te(Le,[yt,ut,Ct],[-1,-1,-1],et,nt)||vt,vt=Te(Le,[Ct,Dt,yt],[-1,-1,-1],et,nt)||vt},Lt=ct[0],Ft=ct[1],Rt=ct[2];return Lt&&(yt=Q(Re([z(Ue,Ze-0,We-0)])[0],Re([z(Ue-1,Ze-0,We-0)])[0],Lt),ut=Q(Re([z(Ue,Ze-0,We-1)])[0],Re([z(Ue-1,Ze-0,We-1)])[0],Lt),Ct=Q(Re([z(Ue,Ze-1,We-1)])[0],Re([z(Ue-1,Ze-1,We-1)])[0],Lt),Dt=Q(Re([z(Ue,Ze-1,We-0)])[0],Re([z(Ue-1,Ze-1,We-0)])[0],Lt),mt()),Ft&&(yt=Q(Re([z(Ue-0,Ze,We-0)])[0],Re([z(Ue-0,Ze-1,We-0)])[0],Ft),ut=Q(Re([z(Ue-0,Ze,We-1)])[0],Re([z(Ue-0,Ze-1,We-1)])[0],Ft),Ct=Q(Re([z(Ue-1,Ze,We-1)])[0],Re([z(Ue-1,Ze-1,We-1)])[0],Ft),Dt=Q(Re([z(Ue-1,Ze,We-0)])[0],Re([z(Ue-1,Ze-1,We-0)])[0],Ft),mt()),Rt&&(yt=Q(Re([z(Ue-0,Ze-0,We)])[0],Re([z(Ue-0,Ze-0,We-1)])[0],Rt),ut=Q(Re([z(Ue-0,Ze-1,We)])[0],Re([z(Ue-0,Ze-1,We-1)])[0],Rt),Ct=Q(Re([z(Ue-1,Ze-1,We)])[0],Re([z(Ue-1,Ze-1,We-1)])[0],Rt),Dt=Q(Re([z(Ue-1,Ze-0,We)])[0],Re([z(Ue-1,Ze-0,We-1)])[0],Rt),mt()),vt}function me(Le,Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt,vt){var mt=Le;return vt?(M&&"even"===Le&&(mt=null),je(mt,Ue,Ze,We,et,nt,ct,yt,ut,Ct,Dt)):(M&&"odd"===Le&&(mt=null),je(mt,ut,yt,ct,nt,et,We,Ze,Ue,Ct,Dt))}function ce(Le,Ue,Ze,We,et){for(var nt=[],ct=0,yt=0;yt<Ue.length;yt++)for(var ut=Ue[yt],Ct=1;Ct<B;Ct++)for(var Dt=1;Dt<F;Dt++)nt.push(Ie(Le,z(ut,Dt-1,Ct-1),z(ut,Dt-1,Ct),z(ut,Dt,Ct-1),z(ut,Dt,Ct),Ze,We,(ut+Dt+Ct)%2,et&&et[ct]?et[ct]:[])),ct++;return nt}function Ae(Le,Ue,Ze,We,et){for(var nt=[],ct=0,yt=0;yt<Ue.length;yt++)for(var ut=Ue[yt],Ct=1;Ct<R;Ct++)for(var Dt=1;Dt<B;Dt++)nt.push(Ie(Le,z(Ct-1,ut,Dt-1),z(Ct,ut,Dt-1),z(Ct-1,ut,Dt),z(Ct,ut,Dt),Ze,We,(Ct+ut+Dt)%2,et&&et[ct]?et[ct]:[])),ct++;return nt}function Ne(Le,Ue,Ze,We,et){for(var nt=[],ct=0,yt=0;yt<Ue.length;yt++)for(var ut=Ue[yt],Ct=1;Ct<F;Ct++)for(var Dt=1;Dt<R;Dt++)nt.push(Ie(Le,z(Dt-1,Ct-1,ut),z(Dt-1,Ct,ut),z(Dt,Ct-1,ut),z(Dt,Ct,ut),Ze,We,(Dt+Ct+ut)%2,et&&et[ct]?et[ct]:[])),ct++;return nt}function De(Le,Ue,Ze){for(var We=1;We<B;We++)for(var et=1;et<F;et++)for(var nt=1;nt<R;nt++)me(Le,z(nt-1,et-1,We-1),z(nt-1,et-1,We),z(nt-1,et,We-1),z(nt-1,et,We),z(nt,et-1,We-1),z(nt,et-1,We),z(nt,et,We-1),z(nt,et,We),Ue,Ze,(nt+et+We)%2)}function qe(Le,Ue,Ze,We,et,nt){for(var ct=[],ut=0;ut<Ue.length;ut++)for(var Ct=Ue[ut],Dt=1;Dt<B;Dt++)for(var vt=1;vt<F;vt++)ct.push(ge(Le,Ct,vt,Dt,Ze,We,et[ut]));return ct}function Ke(Le,Ue,Ze,We,et,nt){for(var ct=[],ut=0;ut<Ue.length;ut++)for(var Ct=Ue[ut],Dt=1;Dt<R;Dt++)for(var vt=1;vt<B;vt++)ct.push(ge(Le,Dt,Ct,vt,Ze,We,et[ut]));return ct}function be(Le,Ue,Ze,We,et,nt){for(var ct=[],ut=0;ut<Ue.length;ut++)for(var Ct=Ue[ut],Dt=1;Dt<F;Dt++)for(var vt=1;vt<R;vt++)ct.push(ge(Le,vt,Dt,Ct,Ze,We,et[ut]));return ct}function Oe(Le,Ue){for(var Ze=[],We=Le;We<Ue;We++)Ze.push(We);return Ze}return function(){ae(),function(){for(var ut=0;ut<R;ut++)for(var Ct=0;Ct<F;Ct++)for(var Dt=0;Dt<B;Dt++){var vt=z(ut,Ct,Dt);ne(o._x[vt],o._y[vt],o._z[vt],o._value[vt])}}();var Le=null;if(_&&b&&(ie(b),m=!0,De(Le,H,X),m=!1),p&&x){ie(x);for(var Ue=o.surface.pattern,Ze=o.surface.count,We=0;We<Ze;We++){var et=1===Ze?.5:We/(Ze-1),nt=(1-et)*H+et*X,ct=Math.abs(nt-$)>Math.abs(nt-G)?[$,nt]:[nt,G];M=!0,De(Ue,ct[0],ct[1]),M=!1}}var yt=[[Math.min(H,G),Math.max(H,G)],[Math.min($,X),Math.max($,X)]];["x","y","z"].forEach(function(ut){for(var Ct=[],Dt=0;Dt<yt.length;Dt++){var vt=0,mt=yt[Dt][0],Lt=yt[Dt][1],Ft=o.slices[ut];if(Ft.show&&Ft.fill){ie(Ft.fill);var Rt=[],Wt=[],Ht=[];if(Ft.locations.length)for(var it=0;it<Ft.locations.length;it++){var st=v(Ft.locations[it],"x"===ut?S:"y"===ut?O:P);0===st.distRatio?Rt.push(st.id):st.id>0&&(Wt.push(st.id),Ht.push("x"===ut?[st.distRatio,0,0]:"y"===ut?[0,st.distRatio,0]:[0,0,st.distRatio]))}else Rt=Oe(1,"x"===ut?R-1:"y"===ut?F-1:B-1);Wt.length>0&&(Ct[vt]="x"===ut?qe(Le,Wt,mt,Lt,Ht):"y"===ut?Ke(Le,Wt,mt,Lt,Ht):be(Le,Wt,mt,Lt,Ht),vt++),Rt.length>0&&(Ct[vt]="x"===ut?ce(Le,Rt,mt,Lt,Ct[vt]):"y"===ut?Ae(Le,Rt,mt,Lt,Ct[vt]):Ne(Le,Rt,mt,Lt,Ct[vt]),vt++)}var Je=o.caps[ut];Je.show&&Je.fill&&(ie(Je.fill),Ct[vt]="x"===ut?ce(Le,[0,R-1],mt,Lt,Ct[vt]):"y"===ut?Ae(Le,[0,F-1],mt,Lt,Ct[vt]):Ne(Le,[0,B-1],mt,Lt,Ct[vt]),vt++)}}),0===D&&ae(),o._meshX=d,o._meshY=g,o._meshZ=h,o._meshIntensity=w,o._Xs=S,o._Ys=O,o._Zs=P}(),o}se.exports={findNearestOnAxis:v,generateIsoMeshes:a,createIsosurfaceTrace:function(o,l){var d=I({gl:o.glplot.gl}),g=new c(o,d,l.uid);return d._trace=g,g.update(l),o.glplot.add(d),g}}},82738:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(16249),k=r(1586);function T(v,c,i,s,a){var o=a("isomin"),l=a("isomax");null!=l&&null!=o&&o>l&&(c.isomin=null,c.isomax=null);var u=a("x"),d=a("y"),g=a("z"),h=a("value");u&&u.length&&d&&d.length&&g&&g.length&&h&&h.length?(C.getComponentMethod("calendars","handleTraceDefaults")(v,c,["x","y","z"],s),a("valuehoverformat"),["x","y","z"].forEach(function(w){a(w+"hoverformat");var y="caps."+w;a(y+".show")&&a(y+".fill");var p="slices."+w;a(p+".show")&&(a(p+".fill"),a(p+".locations"))}),a("spaceframe.show")&&a("spaceframe.fill"),a("surface.show")&&(a("surface.count"),a("surface.fill"),a("surface.pattern")),a("contour.show")&&(a("contour.color"),a("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){a(w)}),k(v,c,s,a,{prefix:"",cLetter:"c"}),c._length=null):c.visible=!1}se.exports={supplyDefaults:function(v,c,i,s){T(v,c,0,s,function(a,o){return I.coerce(v,c,f,a,o)})},supplyIsoDefaults:T}},64943:function(se,U,r){"use strict";se.exports={attributes:r(16249),supplyDefaults:r(82738).supplyDefaults,calc:r(56959),colorbar:{min:"cmin",max:"cmax"},plot:r(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function(se,U,r){"use strict";var I=r(50693),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(54532),T=r(9012),v=r(1426).extendFlat;se.exports=v({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:f({editType:"calc"}),xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},I("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:v({},k.contours.x.show,{}),color:k.contours.x.color,width:k.contours.x.width,editType:"calc"},lightposition:{x:v({},k.lightposition.x,{dflt:1e5}),y:v({},k.lightposition.y,{dflt:1e5}),z:v({},k.lightposition.z,{dflt:0}),editType:"calc"},lighting:v({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},k.lighting),hoverinfo:v({},T.hoverinfo,{editType:"calc"}),showlegend:v({},T.showlegend,{dflt:!1})})},82932:function(se,U,r){"use strict";var I=r(78803);se.exports=function(C,f){f.intensity&&I(C,f,{vals:f.intensity,containerStr:"",cLetter:"c"})}},91134:function(se,U,r){"use strict";var I=r(9330).gl_mesh3d,C=r(9330).delaunay_triangulate,f=r(9330).alpha_shape,k=r(9330).convex_hull,T=r(81697).parseColorScale,v=r(78614),c=r(21081).extractOpts,i=r(90060);function s(g,h,w){this.scene=g,this.uid=w,this.mesh=h,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var a=s.prototype;function o(g){for(var h=[],w=g.length,y=0;y<w;y++)h[y]=v(g[y]);return h}function l(g,h,w,y){for(var p=[],_=h.length,x=0;x<_;x++)p[x]=g.d2l(h[x],0,y)*w;return p}function u(g){for(var h=[],w=g.length,y=0;y<w;y++)h[y]=Math.round(g[y]);return h}function d(g,h){for(var w=g.length,y=0;y<w;y++)if(g[y]<=-.5||g[y]>=h-.5)return!1;return!0}a.handlePick=function(g){if(g.object===this.mesh){var h=g.index=g.data.index;g.traceCoordinate=g.data._cellCenter?g.data.dataCoordinate:[this.data.x[h],this.data.y[h],this.data.z[h]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[h]?g.textLabel=w[h]:w&&(g.textLabel=w),!0}},a.update=function(g){var h=this.scene,w=h.fullSceneLayout;this.data=g;var y,p=g.x.length,_=i(l(w.xaxis,g.x,h.dataScale[0],g.xcalendar),l(w.yaxis,g.y,h.dataScale[1],g.ycalendar),l(w.zaxis,g.z,h.dataScale[2],g.zcalendar));if(g.i&&g.j&&g.k){if(g.i.length!==g.j.length||g.j.length!==g.k.length||!d(g.i,p)||!d(g.j,p)||!d(g.k,p))return;y=i(u(g.i),u(g.j),u(g.k))}else y=0===g.alphahull?k(_):g.alphahull>0?f(g.alphahull,_):function(m,D){for(var S=["x","y","z"].indexOf(m),O=[],P=D.length,R=0;R<P;R++)O[R]=[D[R][(S+1)%3],D[R][(S+2)%3]];return C(O)}(g.delaunayaxis,_);var x={positions:_,cells:y,lightPosition:[g.lightposition.x,g.lightposition.y,g.lightposition.z],ambient:g.lighting.ambient,diffuse:g.lighting.diffuse,specular:g.lighting.specular,roughness:g.lighting.roughness,fresnel:g.lighting.fresnel,vertexNormalsEpsilon:g.lighting.vertexnormalsepsilon,faceNormalsEpsilon:g.lighting.facenormalsepsilon,opacity:g.opacity,contourEnable:g.contour.show,contourColor:v(g.contour.color).slice(0,3),contourWidth:g.contour.width,useFacetNormals:g.flatshading};if(g.intensity){var b=c(g);this.color="#fff";var M=g.intensitymode;x[M+"Intensity"]=g.intensity,x[M+"IntensityBounds"]=[b.min,b.max],x.colormap=T(g)}else g.vertexcolor?(this.color=g.vertexcolor[0],x.vertexColors=o(g.vertexcolor)):g.facecolor?(this.color=g.facecolor[0],x.cellColors=o(g.facecolor)):(this.color=g.color,x.meshColor=v(g.color));this.mesh.update(x)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},se.exports=function(g,h){var y=I({gl:g.glplot.gl}),p=new s(g,y,h.uid);return y._trace=p,p.update(h),g.glplot.add(y),p}},58669:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(1586),k=r(2418);se.exports=function(T,v,c,i){function s(o,l){return C.coerce(T,v,k,o,l)}function a(o){var l=o.map(function(u){var d=s(u);return d&&C.isArrayOrTypedArray(d)?d:null});return l.every(function(u){return u&&u.length===l[0].length})&&l}a(["x","y","z"])?(a(["i","j","k"]),(!v.i||v.j&&v.k)&&(!v.j||v.k&&v.i)&&(!v.k||v.i&&v.j)?(I.getComponentMethod("calendars","handleTraceDefaults")(T,v,["x","y","z"],i),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(o){s(o)}),s("contour.show")&&(s("contour.color"),s("contour.width")),"intensity"in T?(s("intensity"),s("intensitymode"),f(T,v,i,s,{prefix:"",cLetter:"c"})):(v.showscale=!1,"facecolor"in T?s("facecolor"):"vertexcolor"in T?s("vertexcolor"):s("color",c)),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),v._length=null):v.visible=!1):v.visible=!1}},21164:function(se,U,r){"use strict";se.exports={attributes:r(2418),supplyDefaults:r(58669),calc:r(82932),colorbar:{min:"cmin",max:"cmax"},plot:r(91134),moduleType:"trace",name:"mesh3d",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function(se,U,r){"use strict";var I=r(71828).extendFlat,C=r(82196),f=r(12663).axisHoverFormat,k=r(79952).P,T=r(77914),v=r(22372),c=v.INCREASING.COLOR,i=v.DECREASING.COLOR,s=C.line;function a(o){return{line:{color:I({},s.color,{dflt:o}),width:s.width,dash:k,editType:"style"},editType:"style"}}se.exports={xperiod:C.xperiod,xperiod0:C.xperiod0,xperiodalignment:C.xperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:I({},s.width,{}),dash:I({},k,{}),editType:"style"},increasing:a(c),decreasing:a(i),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:I({},T.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function(se,U,r){"use strict";var I=r(71828),C=I._,f=r(89298),k=r(42973),T=r(50606).BADNUM;function v(i,s,a,o){return{o:i,h:s,l:a,c:o}}function c(i,s,a,o,l,u){for(var d=l.makeCalcdata(s,"open"),g=l.makeCalcdata(s,"high"),h=l.makeCalcdata(s,"low"),w=l.makeCalcdata(s,"close"),y=Array.isArray(s.text),p=Array.isArray(s.hovertext),_=!0,x=null,b=!!s.xperiodalignment,M=[],m=0;m<o.length;m++){var D=o[m],S=d[m],O=g[m],P=h[m],R=w[m];if(D!==T&&S!==T&&O!==T&&P!==T&&R!==T){R===S?null!==x&&R!==x&&(_=R>x):_=R>S,x=R;var F=u(S,O,P,R);F.pos=D,F.yc=(S+R)/2,F.i=m,F.dir=_?"increasing":"decreasing",F.x=F.pos,F.y=[P,O],b&&(F.orig_p=a[m]),y&&(F.tx=s.text[m]),p&&(F.htx=s.hovertext[m]),M.push(F)}else M.push({pos:D,empty:!0})}return s._extremes[l._id]=f.findExtremes(l,I.concat(h,g),{padded:!0}),M.length&&(M[0].t={labels:{open:C(i,"open:")+" ",high:C(i,"high:")+" ",low:C(i,"low:")+" ",close:C(i,"close:")+" "}}),M}se.exports={calc:function(i,s){var a=f.getFromId(i,s.xaxis),o=f.getFromId(i,s.yaxis),l=function(w,y,p){var _=p._minDiff;if(!_){var x,b=w._fullData,M=[];for(_=1/0,x=0;x<b.length;x++){var m=b[x];if("ohlc"===m.type&&!0===m.visible&&m.xaxis===y._id){M.push(m);var D=y.makeCalcdata(m,"x");m._origX=D;var S=k(p,y,"x",D).vals;m._xcalc=S;var O=I.distinctVals(S).minDiff;O&&isFinite(O)&&(_=Math.min(_,O))}}for(_===1/0&&(_=1),x=0;x<M.length;x++)M[x]._minDiff=_}return _*p.tickwidth}(i,a,s),u=s._minDiff;s._minDiff=null;var d=s._origX;s._origX=null;var g=s._xcalc;s._xcalc=null;var h=c(i,s,d,g,o,v);return s._extremes[a._id]=f.findExtremes(a,g,{vpad:u/2}),h.length?(I.extendFlat(h[0].t,{wHover:u/2,tickLen:l}),h):[{t:{empty:!0}}]},calcCommon:c}},16169:function(se,U,r){"use strict";var I=r(71828),C=r(14555),f=r(73927),k=r(2522);function T(v,c,i,s){i(s+".line.color"),i(s+".line.width",c.line.width),i(s+".line.dash",c.line.dash)}se.exports=function(v,c,i,s){function a(o,l){return I.coerce(v,c,k,o,l)}C(v,c,a,s)?(f(v,c,s,a,{x:!0}),a("xhoverformat"),a("yhoverformat"),a("line.width"),a("line.dash"),T(0,c,a,"increasing"),T(0,c,a,"decreasing"),a("text"),a("hovertext"),a("tickwidth"),s._requestRangeslider[c.xaxis]=!0):c.visible=!1}},66449:function(se,U,r){"use strict";var I=r(89298),C=r(71828),f=r(30211),k=r(7901),T=r(71828).fillText,v=r(22372),c={increasing:v.INCREASING.SYMBOL,decreasing:v.DECREASING.SYMBOL};function i(o,l,u,d){var g,h,w=o.cd,y=o.xa,p=w[0].trace,_=w[0].t,x=p.type,b="ohlc"===x?"l":"min",M="ohlc"===x?"h":"max",m=_.bPos||0,D=function(H){return H.pos+m-l},S=_.bdPos||_.tickLen,O=_.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));function R(H){var X=D(H);return f.inbox(X-O,X+O,g)}function F(H){var X=H[b],K=H[M];return X===K||f.inbox(X-u,K-u,g)}function B(H){return(R(H)+F(H))/2}g=o.maxHoverDistance-P,h=o.maxSpikeDistance-P;var J=f.getDistanceFunction(d,R,F,B);if(f.getClosest(w,J,o),!1===o.index)return null;var z=w[o.index];if(z.empty)return null;var $=p[z.dir],G=$.line.color;return o.color=k.opacity(G)&&$.line.width?G:$.fillcolor,o.x0=y.c2p(z.pos+m-S,!0),o.x1=y.c2p(z.pos+m+S,!0),o.xLabelVal=void 0!==z.orig_p?z.orig_p:z.pos,o.spikeDistance=B(z)*h/g,o.xSpike=y.c2p(z.pos,!0),o}function s(o,l,u,d){var g=o.cd,h=o.ya,w=g[0].trace,y=g[0].t,p=[],_=i(o,l,u,d);if(!_)return[];var x=g[_.index].hi||w.hoverinfo,b=x.split("+");if("all"!==x&&-1===b.indexOf("y"))return[];for(var M=["high","open","close","low"],m={},D=0;D<M.length;D++){var S,O=M[D],P=w[O][_.index],R=h.c2p(P,!0);P in m?(S=m[P]).yLabel+="<br>"+y.labels[O]+I.hoverLabelText(h,P,w.yhoverformat):((S=C.extendFlat({},_)).y0=S.y1=R,S.yLabelVal=P,S.yLabel=y.labels[O]+I.hoverLabelText(h,P,w.yhoverformat),S.name="",p.push(S),m[P]=S)}return p}function a(o,l,u,d){var g=o.cd,h=o.ya,w=g[0].trace,y=g[0].t,p=i(o,l,u,d);if(!p)return[];var _=g[p.index],x=p.index=_.i,b=_.dir;function M(F){return y.labels[F]+I.hoverLabelText(h,w[F][x],w.yhoverformat)}var m=_.hi||w.hoverinfo,D=m.split("+"),S="all"===m,O=S||-1!==D.indexOf("y"),P=S||-1!==D.indexOf("text"),R=O?[M("open"),M("high"),M("low"),M("close")+"  "+c[b]]:[];return P&&T(_,w,R),p.extraText=R.join("<br>"),p.y0=p.y1=h.c2p(_.yc,!0),[p]}se.exports={hoverPoints:function(o,l,u,d){return o.cd[0].trace.hoverlabel.split?s(o,l,u,d):a(o,l,u,d)},hoverSplit:s,hoverOnPoints:a}},54186:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"ohlc",basePlotModule:r(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:r(2522),supplyDefaults:r(16169),calc:r(3485).calc,plot:r(72314),style:r(53101),hoverPoints:r(66449).hoverPoints,selectPoints:r(67324)}},14555:function(se,U,r){"use strict";var I=r(73972),C=r(71828);se.exports=function(f,k,T,v){var c=T("x"),i=T("open"),s=T("high"),a=T("low"),o=T("close");if(T("hoverlabel.split"),I.getComponentMethod("calendars","handleTraceDefaults")(f,k,["x"],v),i&&s&&a&&o){var l=Math.min(i.length,s.length,a.length,o.length);return c&&(l=Math.min(l,C.minRowLength(c))),k._length=l,l}}},72314:function(se,U,r){"use strict";var I=r(39898),C=r(71828);se.exports=function(f,k,T,v){var c=k.yaxis,i=k.xaxis,s=!!i.rangebreaks;C.makeTraceGroups(v,T,"trace ohlc").each(function(a){var o=I.select(this),l=a[0],u=l.t;if(!0!==l.trace.visible||u.empty)o.remove();else{var d=u.tickLen,g=o.selectAll("path").data(C.identity);g.enter().append("path"),g.exit().remove(),g.attr("d",function(h){if(h.empty)return"M0,0Z";var w=i.c2p(h.pos-d,!0),y=i.c2p(h.pos+d,!0),p=s?(w+y)/2:i.c2p(h.pos,!0);return"M"+w+","+c.c2p(h.o,!0)+"H"+p+"M"+p+","+c.c2p(h.h,!0)+"V"+c.c2p(h.l,!0)+"M"+y+","+c.c2p(h.c,!0)+"H"+p})}})}},67324:function(se){"use strict";se.exports=function(U,r){var I,C=U.cd,f=U.xaxis,k=U.yaxis,T=[],v=C[0].t.bPos||0;if(!1===r)for(I=0;I<C.length;I++)C[I].selected=0;else for(I=0;I<C.length;I++){var c=C[I];r.contains([f.c2p(c.pos+v),k.c2p(c.yc)],null,c.i,U)?(T.push({pointNumber:c.i,x:f.c2d(c.pos),y:k.c2d(c.yc)}),c.selected=1):c.selected=0}return T}},53101:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(7901);se.exports=function(k,T,v){var c=v||I.select(k).selectAll("g.ohlclayer").selectAll("g.trace");c.style("opacity",function(i){return i[0].trace.opacity}),c.each(function(i){var s=i[0].trace;I.select(this).selectAll("path").each(function(a){if(!a.empty){var o=s[a.dir].line;I.select(this).style("fill","none").call(f.stroke,o.color).call(C.dashLine,o.dash,o.width).style("opacity",s.selectedpoints&&!a.selected?.3:1)}})})}},99506:function(se,U,r){"use strict";var I=r(1426).extendFlat,C=r(9012),f=r(41940),k=r(50693),T=r(5386).fF,v=r(27670).Y,c=I({editType:"calc"},k("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});se.exports={domain:v({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:I({},C.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:f({editType:"calc"}),tickfont:f({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:c,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function(se,U,r){"use strict";var I=r(27659).a0,C=r(45784),f="parcats";U.name=f,U.plot=function(k,T,v,c){var i=I(k.calcdata,f);i.length&&C(k,i[0],v,c)},U.clean=function(k,T,v,c){var i=c._has&&c._has("parcats"),s=T._has&&T._has("parcats");i&&!s&&c._paperdiv.selectAll(".parcats").remove()}},28699:function(se,U,r){"use strict";var I=r(28984).wrap,C=r(52075).hasColorscale,f=r(78803),k=r(75744),T=r(91424),v=r(71828),c=r(92770);function i(o,l,u){o.valueInds.push(l),o.count+=u}function s(o,l,u){return{categoryInds:o,color:l,rawColor:u,valueInds:[],count:0}}function a(o,l,u){o.valueInds.push(l),o.count+=u}se.exports=function(o,l){var u=v.filterVisible(l.dimensions);if(0===u.length)return[];var d,g,h,w=u.map(function(K){var ue;if("trace"===K.categoryorder)ue=null;else if("array"===K.categoryorder)ue=K.categoryarray;else{ue=k(K.values);for(var ae=!0,ne=0;ne<ue.length;ne++)if(!c(ue[ne])){ae=!1;break}ue.sort(ae?v.sorterAsc:void 0),"category descending"===K.categoryorder&&(ue=ue.reverse())}return function(Q,ie){ie=null==ie?[]:ie.map(function(ke){return ke});var le={},fe={},he=[];ie.forEach(function(ke,Te){le[ke]=0,fe[ke]=Te});for(var pe=0;pe<Q.length;pe++){var xe,Ee=Q[pe];void 0===le[Ee]?(le[Ee]=1,xe=ie.push(Ee)-1,fe[Ee]=xe):(le[Ee]++,xe=fe[Ee]),he.push(xe)}var Re=ie.map(function(ke){return le[ke]});return{uniqueValues:ie,uniqueCounts:Re,inds:he}}(K.values,ue)});d=v.isArrayOrTypedArray(l.counts)?l.counts:[l.counts],function(K){var ue;if(function(ne){for(var Q=new Array(ne.length),ie=0;ie<ne.length;ie++){if(ne[ie]<0||ne[ie]>=ne.length||void 0!==Q[ne[ie]])return!1;Q[ne[ie]]=!0}return!0}(K.map(function(ne){return ne.displayindex})))for(ue=0;ue<K.length;ue++)K[ue]._displayindex=K[ue].displayindex;else for(ue=0;ue<K.length;ue++)K[ue]._displayindex=ue}(u),u.forEach(function(K,ue){!function(ae,ne){ae._categoryarray=ne.uniqueValues,ae._ticktext=null==ae.ticktext?[]:ae.ticktext.slice();for(var Q=ae._ticktext.length;Q<ne.uniqueValues.length;Q++)ae._ticktext.push(ne.uniqueValues[Q])}(K,w[ue])});var y,p=l.line;p?(C(l,"line")&&f(o,l,{vals:l.line.color,containerStr:"line",cLetter:"c"}),y=T.tryColorscale(p)):y=v.identity;var _,x,b,M,m,D=u[0].values.length,S={},O=w.map(function(K){return K.inds});for(h=0,_=0;_<D;_++){var P=[];for(x=0;x<O.length;x++)P.push(O[x][_]);h+=g=d[_%d.length];var R=(b=_,M=void 0,m=void 0,v.isArrayOrTypedArray(p.color)?m=M=p.color[b%p.color.length]:M=p.color,{color:y(M),rawColor:m}),F=P+"-"+R.rawColor;void 0===S[F]&&(S[F]=s(P,R.color,R.rawColor)),a(S[F],_,g)}var B,K,ue,ae,ne,J=u.map(function(K,ue){return{dimensionInd:ue,containerInd:K._index,displayInd:K._displayindex,dimensionLabel:K.label,count:h,categories:[],dragX:null}});for(_=0;_<D;_++)for(g=d[_%d.length],x=0;x<J.length;x++){var z=J[x].containerInd,$=w[x].inds[_],G=J[x].categories;void 0===G[$]&&(G[$]={dimensionInd:x,categoryInd:B=$,categoryValue:l.dimensions[z]._categoryarray[$],displayInd:B,categoryLabel:l.dimensions[z]._ticktext[$],valueInds:[],count:0,dragY:null}),i(G[$],_,g)}return I((ue=S,ae=h,ne=(K=J).map(function(Q){return Q.categories.length}).reduce(function(Q,ie){return Math.max(Q,ie)}),{dimensions:K,paths:ue,trace:void 0,maxCats:ne,count:ae}))}},14647:function(se,U,r){"use strict";var I=r(71828),C=r(52075).hasColorscale,f=r(1586),k=r(27670).c,T=r(85501),v=r(99506),c=r(94397);function i(s,a){function o(y,p){return I.coerce(s,a,v.dimensions,y,p)}var l=o("values"),u=o("visible");if(l&&l.length||(u=a.visible=!1),u){o("label"),o("displayindex",a._index);var d,g=s.categoryarray,h=Array.isArray(g)&&g.length>0;h&&(d="array");var w=o("categoryorder",d);"array"===w?(o("categoryarray"),o("ticktext")):(delete s.categoryarray,delete s.ticktext),h||"array"!==w||(a.categoryorder="trace")}}se.exports=function(s,a,o,l){function u(y,p){return I.coerce(s,a,v,y,p)}var d=T(s,a,{name:"dimensions",handleItemDefaults:i}),g=function(y,p,_,x,b){b("line.shape"),b("line.hovertemplate");var M=b("line.color",x.colorway[0]);if(C(y,"line")&&I.isArrayOrTypedArray(M)){if(M.length)return b("line.colorscale"),f(y,p,x,b,{prefix:"line.",cLetter:"c"}),M.length;p.line.color=_}return 1/0}(s,a,o,l,u);k(a,l,u),Array.isArray(d)&&d.length||(a.visible=!1),c(a,d,"values",g),u("hoveron"),u("hovertemplate"),u("arrangement"),u("bundlecolors"),u("sortpaths"),u("counts");var h={family:l.font.family,size:Math.round(l.font.size),color:l.font.color};I.coerceFont(u,"labelfont",h);var w={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};I.coerceFont(u,"tickfont",w)}},94873:function(se,U,r){"use strict";se.exports={attributes:r(99506),supplyDefaults:r(14647),calc:r(28699),plot:r(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:r(27677),categories:["noOpacity"],meta:{}}},45460:function(se,U,r){"use strict";var I=r(39898),C=r(81684).k4,f=r(72391),k=r(30211),T=r(71828),v=T.strTranslate,c=r(91424),i=r(84267),s=r(63893);function a(ae,ne,Q,ie){var le=ne._context.staticPlot,fe=ae.map(G.bind(0,ne,Q)),he=ie.selectAll("g.parcatslayer").data([null]);he.enter().append("g").attr("class","parcatslayer").style("pointer-events",le?"none":"all");var pe=he.selectAll("g.trace.parcats").data(fe,o),xe=pe.enter().append("g").attr("class","trace parcats");pe.attr("transform",function(ge){return v(ge.x,ge.y)}),xe.append("g").attr("class","paths");var Ee=pe.select("g.paths").selectAll("path.path").data(function(ge){return ge.paths},o);Ee.attr("fill",function(ge){return ge.model.color});var Re=Ee.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(ge){return ge.model.color}).attr("fill-opacity",0);p(Re),Ee.attr("d",function(ge){return ge.svgD}),Re.empty()||Ee.sort(u),Ee.exit().remove(),Ee.on("mouseover",d).on("mouseout",g).on("click",y),xe.append("g").attr("class","dimensions");var ke=pe.select("g.dimensions").selectAll("g.dimension").data(function(ge){return ge.dimensions},o);ke.enter().append("g").attr("class","dimension"),ke.attr("transform",function(ge){return v(ge.x,0)}),ke.exit().remove();var Te=ke.selectAll("g.category").data(function(ge){return ge.categories},o),we=Te.enter().append("g").attr("class","category");Te.attr("transform",function(ge){return v(0,ge.y)}),we.append("rect").attr("class","catrect").attr("pointer-events","none"),Te.select("rect.catrect").attr("fill","none").attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),x(we);var je=Te.selectAll("rect.bandrect").data(function(ge){return ge.bands},o);je.each(function(){T.raiseToTop(this)}),je.attr("fill",function(ge){return ge.color});var Ce=je.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ge){return ge.color}).attr("fill-opacity",0);je.attr("fill",function(ge){return ge.color}).attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}).attr("y",function(ge){return ge.y}).attr("cursor",function(ge){return"fixed"===ge.parcatsViewModel.arrangement?"default":"perpendicular"===ge.parcatsViewModel.arrangement?"ns-resize":"move"}),b(Ce),je.exit().remove(),we.append("text").attr("class","catlabel").attr("pointer-events","none");var Ie=ne._fullLayout.paper_bgcolor;Te.select("text.catlabel").attr("text-anchor",function(ge){return l(ge)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",s.makeTextShadow(Ie)).style("fill","rgb(0, 0, 0)").attr("x",function(ge){return l(ge)?ge.width+5:-5}).attr("y",function(ge){return ge.height/2}).text(function(ge){return ge.model.categoryLabel}).each(function(ge){c.font(I.select(this),ge.parcatsViewModel.categorylabelfont),s.convertToTspans(I.select(this),ne)}),we.append("text").attr("class","dimlabel"),Te.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ge){return"fixed"===ge.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ge){return ge.width/2}).attr("y",-5).text(function(ge,me){return 0===me?ge.parcatsViewModel.model.dimensions[ge.model.dimensionInd].dimensionLabel:null}).each(function(ge){c.font(I.select(this),ge.parcatsViewModel.labelfont)}),Te.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",P),Te.exit().remove(),ke.call(I.behavior.drag().origin(function(ge){return{x:ge.x,y:0}}).on("dragstart",R).on("drag",F).on("dragend",B)),pe.each(function(ge){ge.traceSelection=I.select(this),ge.pathSelection=I.select(this).selectAll("g.paths").selectAll("path.path"),ge.dimensionSelection=I.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),pe.exit().remove()}function o(ae){return ae.key}function l(ae){return ae.model.dimensionInd===ae.parcatsViewModel.dimensions[ae.parcatsViewModel.dimensions.length-1].model.dimensionInd}function u(ae,ne){return ae.model.rawColor>ne.model.rawColor?1:ae.model.rawColor<ne.model.rawColor?-1:0}function d(ae){if(!ae.parcatsViewModel.dragDimension&&-1===ae.parcatsViewModel.hoverinfoItems.indexOf("skip")){T.raiseToTop(this),_(I.select(this));var ne=h(ae),Q=w(ae);if(ae.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ne,event:I.event,constraints:Q}),-1===ae.parcatsViewModel.hoverinfoItems.indexOf("none")){var ie,le,fe,he=I.mouse(this)[0],pe=ae.parcatsViewModel.graphDiv,xe=ae.parcatsViewModel.trace,Ee=pe._fullLayout,Re=Ee._paperdiv.node().getBoundingClientRect(),ke=ae.parcatsViewModel.graphDiv.getBoundingClientRect();for(fe=0;fe<ae.leftXs.length-1;fe++)if(ae.leftXs[fe]+ae.dimWidths[fe]-2<=he&&he<=ae.leftXs[fe+1]+2){var Te=ae.parcatsViewModel.dimensions[fe];ie=(Te.x+Te.width+ae.parcatsViewModel.dimensions[fe+1].x)/2,le=(ae.topYs[fe]+ae.topYs[fe+1]+ae.height)/2;break}var je=ae.parcatsViewModel.x+ie,Ce=ae.parcatsViewModel.y+le,Ie=i.mostReadable(ae.model.color,["black","white"]),ge=ae.model.count,me=ge/ae.parcatsViewModel.model.count,ce={countLabel:ge,probabilityLabel:me.toFixed(3)},Ae=[];-1!==ae.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ae.push(["Count:",ce.countLabel].join(" ")),-1!==ae.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ae.push(["P:",ce.probabilityLabel].join(" "));var Ne=Ae.join("<br>"),De=I.mouse(pe)[0];k.loneHover({trace:xe,x:je-Re.left+ke.left,y:Ce-Re.top+ke.top,text:Ne,color:ae.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ie,idealAlign:De<je?"right":"left",hovertemplate:(xe.line||{}).hovertemplate,hovertemplateLabels:ce,eventData:[{data:xe._input,fullData:xe,count:ge,probability:me}]},{container:Ee._hoverlayer.node(),outerContainer:Ee._paper.node(),gd:pe})}}}function g(ae){if(!ae.parcatsViewModel.dragDimension&&(p(I.select(this)),k.loneUnhover(ae.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ae.parcatsViewModel.pathSelection.sort(u),-1===ae.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ne=h(ae),Q=w(ae);ae.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ne,event:I.event,constraints:Q})}}function h(ae){for(var ne=[],Q=J(ae.parcatsViewModel),ie=0;ie<ae.model.valueInds.length;ie++)ne.push({curveNumber:Q,pointNumber:ae.model.valueInds[ie]});return ne}function w(ae){for(var ne={},Q=ae.parcatsViewModel.model.dimensions,ie=0;ie<Q.length;ie++){var le=Q[ie];ne[le.containerInd]=le.categories[ae.model.categoryInds[ie]].categoryValue}return void 0!==ae.model.rawColor&&(ne.color=ae.model.rawColor),ne}function y(ae){if(-1===ae.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ne=h(ae),Q=w(ae);ae.parcatsViewModel.graphDiv.emit("plotly_click",{points:ne,event:I.event,constraints:Q})}}function p(ae){ae.attr("fill",function(ne){return ne.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function _(ae){ae.attr("fill-opacity",.8).attr("stroke",function(ne){return i.mostReadable(ne.model.color,["black","white"])}).attr("stroke-width",.3)}function x(ae){ae.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function b(ae){ae.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function M(ae){var Q=ae.categoryViewModel.model.dimensionInd,ie=ae.categoryViewModel.model.categoryInd;return ae.parcatsViewModel.pathSelection.filter(function(le){return le.model.categoryInds[Q]===ie&&le.model.color===ae.color})}function m(ae,ne,Q){var ie=I.select(ae).datum(),le=ie.categoryViewModel.model,fe=ie.parcatsViewModel.graphDiv,he=I.select(ae.parentNode).selectAll("rect.bandrect"),pe=[];he.each(function(Ee){M(Ee).each(function(Re){Array.prototype.push.apply(pe,h(Re))})});var xe={};xe[le.dimensionInd]=le.categoryValue,fe.emit(ne,{points:pe,event:Q,constraints:xe})}function D(ae,ne,Q){var ie=I.select(ae).datum(),le=ie.categoryViewModel.model,fe=ie.parcatsViewModel.graphDiv,he=M(ie),pe=[];he.each(function(Ee){Array.prototype.push.apply(pe,h(Ee))});var xe={};xe[le.dimensionInd]=le.categoryValue,void 0!==ie.rawColor&&(xe.color=ie.rawColor),fe.emit(ne,{points:pe,event:Q,constraints:xe})}function S(ae,ne,Q){ae._fullLayout._calcInverseTransform(ae);var ie,le,fe=ae._fullLayout._invScaleX,he=ae._fullLayout._invScaleY,pe=I.select(Q.parentNode).select("rect.catrect"),xe=pe.node().getBoundingClientRect(),Ee=pe.datum(),Re=Ee.parcatsViewModel,Te=Re.trace,we=xe.top+xe.height/2;Re.dimensions.length>1&&Re.model.dimensions[Ee.model.dimensionInd].displayInd===Re.dimensions.length-1?(ie=xe.left,le="left"):(ie=xe.left+xe.width,le="right");var je=Ee.model.count,Ce=Ee.model.categoryLabel,Ie=je/Ee.parcatsViewModel.model.count,ge={countLabel:je,categoryLabel:Ce,probabilityLabel:Ie.toFixed(3)},me=[];-1!==Ee.parcatsViewModel.hoverinfoItems.indexOf("count")&&me.push(["Count:",ge.countLabel].join(" ")),-1!==Ee.parcatsViewModel.hoverinfoItems.indexOf("probability")&&me.push(["P("+ge.categoryLabel+"):",ge.probabilityLabel].join(" "));var ce=me.join("<br>");return{trace:Te,x:fe*(ie-ne.left),y:he*(we-ne.top),text:ce,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:le,hovertemplate:Te.hovertemplate,hovertemplateLabels:ge,eventData:[{data:Te._input,fullData:Te,count:je,category:Ce,probability:Ie}]}}function O(ae){if(!ae.parcatsViewModel.dragDimension&&-1===ae.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(I.mouse(this)[1]<-1)return;var ne,Q=ae.parcatsViewModel.graphDiv,ie=Q._fullLayout,le=ie._paperdiv.node().getBoundingClientRect(),fe=ae.parcatsViewModel.hoveron,he=this;"color"===fe?(_(Ee=M(xe=I.select(pe=he).datum())),Ee.each(function(){T.raiseToTop(this)}),I.select(pe.parentNode).selectAll("rect.bandrect").filter(function(Re){return Re.color===xe.color}).each(function(){T.raiseToTop(this),I.select(this).attr("stroke","black").attr("stroke-width",1.5)}),D(he,"plotly_hover",I.event)):(function(pe){I.select(pe.parentNode).selectAll("rect.bandrect").each(function(xe){var Ee=M(xe);_(Ee),Ee.each(function(){T.raiseToTop(this)})}),I.select(pe.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(he),m(he,"plotly_hover",I.event)),-1===ae.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===fe?ne=S(Q,le,he):"color"===fe?ne=function(pe,xe,Ee){pe._fullLayout._calcInverseTransform(pe);var Re,ke,Te=pe._fullLayout._invScaleX,we=pe._fullLayout._invScaleY,je=Ee.getBoundingClientRect(),Ce=I.select(Ee).datum(),Ie=Ce.categoryViewModel,ge=Ie.parcatsViewModel,ce=ge.trace,Ae=je.y+je.height/2;ge.dimensions.length>1&&ge.model.dimensions[Ie.model.dimensionInd].displayInd===ge.dimensions.length-1?(Re=je.left,ke="left"):(Re=je.left+je.width,ke="right");var Ne=Ie.model.categoryLabel,De=Ce.parcatsViewModel.model.count,qe=0;Ce.categoryViewModel.bands.forEach(function(ct){ct.color===Ce.color&&(qe+=ct.count)});var Ke=Ie.model.count,be=0;ge.pathSelection.each(function(ct){ct.model.color===Ce.color&&(be+=ct.model.count)});var Oe=qe/De,Le=qe/be,Ue=qe/Ke,Ze={countLabel:De,categoryLabel:Ne,probabilityLabel:Oe.toFixed(3)},We=[];-1!==Ie.parcatsViewModel.hoverinfoItems.indexOf("count")&&We.push(["Count:",Ze.countLabel].join(" ")),-1!==Ie.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(We.push("P(color \u2229 "+Ne+"): "+Ze.probabilityLabel),We.push("P("+Ne+" | color): "+Le.toFixed(3)),We.push("P(color | "+Ne+"): "+Ue.toFixed(3)));var et=We.join("<br>"),nt=i.mostReadable(Ce.color,["black","white"]);return{trace:ce,x:Te*(Re-xe.left),y:we*(Ae-xe.top),text:et,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:nt,fontSize:10,idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ze,eventData:[{data:ce._input,fullData:ce,category:Ne,count:De,probability:Oe,categorycount:Ke,colorcount:be,bandcolorcount:qe}]}}(Q,le,he):"dimension"===fe&&(ne=function(pe,xe,Ee){var Re=[];return I.select(Ee.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){Re.push(S(pe,xe,this))}),Re}(Q,le,he)),ne&&k.loneHover(ne,{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:Q}))}var pe,xe,Ee}function P(ae){var ne=ae.parcatsViewModel;ne.dragDimension||(p(ne.pathSelection),x(ne.dimensionSelection.selectAll("g.category")),b(ne.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),k.loneUnhover(ne.graphDiv._fullLayout._hoverlayer.node()),ne.pathSelection.sort(u),-1!==ne.hoverinfoItems.indexOf("skip"))||("color"===ae.parcatsViewModel.hoveron?D(this,"plotly_unhover",I.event):m(this,"plotly_unhover",I.event))}function R(ae){"fixed"!==ae.parcatsViewModel.arrangement&&(ae.dragDimensionDisplayInd=ae.model.displayInd,ae.initialDragDimensionDisplayInds=ae.parcatsViewModel.model.dimensions.map(function(ne){return ne.displayInd}),ae.dragHasMoved=!1,ae.dragCategoryDisplayInd=null,I.select(this).selectAll("g.category").select("rect.catrect").each(function(ne){var Q=I.mouse(this)[0],ie=I.mouse(this)[1];-2<=Q&&Q<=ne.width+2&&-2<=ie&&ie<=ne.height+2&&(ae.dragCategoryDisplayInd=ne.model.displayInd,ae.initialDragCategoryDisplayInds=ae.model.categories.map(function(le){return le.displayInd}),ne.model.dragY=ne.y,T.raiseToTop(this.parentNode),I.select(this.parentNode).selectAll("rect.bandrect").each(function(le){le.y<ie&&ie<=le.y+le.height&&(ae.potentialClickBand=this)}))}),ae.parcatsViewModel.dragDimension=ae,k.loneUnhover(ae.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function F(ae){if("fixed"!==ae.parcatsViewModel.arrangement&&(ae.dragHasMoved=!0,null!==ae.dragDimensionDisplayInd)){var ne=ae.dragDimensionDisplayInd,Q=ne-1,ie=ne+1,le=ae.parcatsViewModel.dimensions[ne];if(null!==ae.dragCategoryDisplayInd){var fe=le.categories[ae.dragCategoryDisplayInd];fe.model.dragY+=I.event.dy;var he=fe.model.dragY,pe=fe.model.displayInd,xe=le.categories,Ee=xe[pe-1],Re=xe[pe+1];void 0!==Ee&&he<Ee.y+Ee.height/2&&(fe.model.displayInd=Ee.model.displayInd,Ee.model.displayInd=pe),void 0!==Re&&he+fe.height>Re.y+Re.height/2&&(fe.model.displayInd=Re.model.displayInd,Re.model.displayInd=pe),ae.dragCategoryDisplayInd=fe.model.displayInd}if(null===ae.dragCategoryDisplayInd||"freeform"===ae.parcatsViewModel.arrangement){le.model.dragX=I.event.x;var ke=ae.parcatsViewModel.dimensions[Q],Te=ae.parcatsViewModel.dimensions[ie];void 0!==ke&&le.model.dragX<ke.x+ke.width&&(le.model.displayInd=ke.model.displayInd,ke.model.displayInd=ne),void 0!==Te&&le.model.dragX+le.width>Te.x&&(le.model.displayInd=Te.model.displayInd,Te.model.displayInd=ae.dragDimensionDisplayInd),ae.dragDimensionDisplayInd=le.model.displayInd}K(ae.parcatsViewModel),X(ae.parcatsViewModel),$(ae.parcatsViewModel),z(ae.parcatsViewModel)}}function B(ae){if("fixed"!==ae.parcatsViewModel.arrangement&&null!==ae.dragDimensionDisplayInd){I.select(this).selectAll("text").attr("font-weight","normal");var ne={},Q=J(ae.parcatsViewModel),ie=ae.parcatsViewModel.model.dimensions.map(function(Re){return Re.displayInd}),le=ae.initialDragDimensionDisplayInds.some(function(Re,ke){return Re!==ie[ke]});le&&ie.forEach(function(Re,ke){ne["dimensions["+ae.parcatsViewModel.model.dimensions[ke].containerInd+"].displayindex"]=Re});var fe=!1;if(null!==ae.dragCategoryDisplayInd){var he=ae.model.categories.map(function(Re){return Re.displayInd});if(fe=ae.initialDragCategoryDisplayInds.some(function(Re,ke){return Re!==he[ke]})){var pe=ae.model.categories.slice().sort(function(Re,ke){return Re.displayInd-ke.displayInd}),xe=pe.map(function(Re){return Re.categoryValue}),Ee=pe.map(function(Re){return Re.categoryLabel});ne["dimensions["+ae.model.containerInd+"].categoryarray"]=[xe],ne["dimensions["+ae.model.containerInd+"].ticktext"]=[Ee],ne["dimensions["+ae.model.containerInd+"].categoryorder"]="array"}}-1===ae.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ae.dragHasMoved&&ae.potentialClickBand&&("color"===ae.parcatsViewModel.hoveron?D(ae.potentialClickBand,"plotly_click",I.event.sourceEvent):m(ae.potentialClickBand,"plotly_click",I.event.sourceEvent)),ae.model.dragX=null,null!==ae.dragCategoryDisplayInd&&(ae.parcatsViewModel.dimensions[ae.dragDimensionDisplayInd].categories[ae.dragCategoryDisplayInd].model.dragY=null,ae.dragCategoryDisplayInd=null),ae.dragDimensionDisplayInd=null,ae.parcatsViewModel.dragDimension=null,ae.dragHasMoved=null,ae.potentialClickBand=null,K(ae.parcatsViewModel),X(ae.parcatsViewModel),I.transition().duration(300).ease("cubic-in-out").each(function(){$(ae.parcatsViewModel,!0),z(ae.parcatsViewModel,!0)}).each("end",function(){(le||fe)&&f.restyle(ae.parcatsViewModel.graphDiv,ne,[Q])})}}function J(ae){for(var ne,Q=ae.graphDiv._fullData,ie=0;ie<Q.length;ie++)if(ae.key===Q[ie].uid){ne=ie;break}return ne}function z(ae,ne){var Q;void 0===ne&&(ne=!1),ae.pathSelection.data(function(ie){return ie.paths},o),(Q=ae.pathSelection,ne?Q.transition():Q).attr("d",function(ie){return ie.svgD})}function $(ae,ne){function Q(he){return ne?he.transition():he}void 0===ne&&(ne=!1),ae.dimensionSelection.data(function(he){return he.dimensions},o);var ie=ae.dimensionSelection.selectAll("g.category").data(function(he){return he.categories},o);Q(ae.dimensionSelection).attr("transform",function(he){return v(he.x,0)}),Q(ie).attr("transform",function(he){return v(0,he.y)}),ie.select(".dimlabel").text(function(he,pe){return 0===pe?he.parcatsViewModel.model.dimensions[he.model.dimensionInd].dimensionLabel:null}),ie.select(".catlabel").attr("text-anchor",function(he){return l(he)?"start":"end"}).attr("x",function(he){return l(he)?he.width+5:-5}).each(function(he){var pe,xe;l(he)?(pe=he.width+5,xe="start"):(pe=-5,xe="end"),I.select(this).selectAll("tspan").attr("x",pe).attr("text-anchor",xe)});var le=ie.selectAll("rect.bandrect").data(function(he){return he.bands},o),fe=le.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(he){return he.color}).attr("fill-opacity",0);le.attr("fill",function(he){return he.color}).attr("width",function(he){return he.width}).attr("height",function(he){return he.height}).attr("y",function(he){return he.y}),b(fe),le.each(function(){T.raiseToTop(this)}),le.exit().remove()}function G(ae,ne,Q){var ie,le=Q[0],fe=ne.margin||{l:80,r:80,t:100,b:80},he=le.trace,pe=he.domain,xe=ne.width,Ee=ne.height,Re=Math.floor(xe*(pe.x[1]-pe.x[0])),ke=Math.floor(Ee*(pe.y[1]-pe.y[0])),Te=pe.x[0]*xe+fe.l,we=ne.height-pe.y[1]*ne.height+fe.t,je=he.line.shape;ie="all"===he.hoverinfo?["count","probability"]:(he.hoverinfo||"").split("+");var Ce={trace:he,key:he.uid,model:le,x:Te,y:we,width:Re,height:ke,hoveron:he.hoveron,hoverinfoItems:ie,arrangement:he.arrangement,bundlecolors:he.bundlecolors,sortpaths:he.sortpaths,labelfont:he.labelfont,categorylabelfont:he.tickfont,pathShape:je,dragDimension:null,margin:fe,paths:[],dimensions:[],graphDiv:ae,traceSelection:null,pathSelection:null,dimensionSelection:null};return le.dimensions&&(K(Ce),X(Ce)),Ce}function H(ae,ne,Q,ie,le){var fe,he,pe=[],xe=[];for(he=0;he<Q.length-1;he++)fe=C(Q[he]+ae[he],ae[he+1]),pe.push(fe(le)),xe.push(fe(1-le));var Ee="M "+ae[0]+","+ne[0];for(Ee+="l"+Q[0]+",0 ",he=1;he<Q.length;he++)Ee+="C"+pe[he-1]+","+ne[he-1]+" "+xe[he-1]+","+ne[he]+" "+ae[he]+","+ne[he],Ee+="l"+Q[he]+",0 ";for(Ee+="l0,"+ie+" ",Ee+="l -"+Q[Q.length-1]+",0 ",he=Q.length-2;he>=0;he--)Ee+="C"+xe[he]+","+(ne[he+1]+ie)+" "+pe[he]+","+(ne[he]+ie)+" "+(ae[he]+Q[he])+","+(ne[he]+ie),Ee+="l-"+Q[he]+",0 ";return Ee+"Z"}function X(ae){var ne=ae.dimensions,Q=ae.model,ie=ne.map(function(Ze){return Ze.categories.map(function(We){return We.y})}),le=ae.model.dimensions.map(function(Ze){return Ze.categories.map(function(We){return We.displayInd})}),fe=ae.model.dimensions.map(function(Ze){return Ze.displayInd}),he=ae.dimensions.map(function(Ze){return Ze.model.dimensionInd}),pe=ne.map(function(Ze){return Ze.x}),xe=ne.map(function(Ze){return Ze.width}),Ee=[];for(var Re in Q.paths)Q.paths.hasOwnProperty(Re)&&Ee.push(Q.paths[Re]);function ke(Ze){var We=Ze.categoryInds.map(function(et,nt){return le[nt][et]});return he.map(function(et){return We[et]})}Ee.sort(function(Ze,We){var et=ke(Ze),nt=ke(We);return"backward"===ae.sortpaths&&(et.reverse(),nt.reverse()),et.push(Ze.valueInds[0]),nt.push(We.valueInds[0]),ae.bundlecolors&&(et.unshift(Ze.rawColor),nt.unshift(We.rawColor)),et<nt?-1:et>nt?1:0});for(var Te=new Array(Ee.length),we=ne[0].model.count,je=ne[0].categories.map(function(Ze){return Ze.height}).reduce(function(Ze,We){return Ze+We}),Ce=0;Ce<Ee.length;Ce++){var Ie,ge=Ee[Ce];Ie=we>0?je*(ge.count/we):0;for(var me,ce=new Array(ie.length),Ae=0;Ae<ge.categoryInds.length;Ae++){var De=le[Ae][ge.categoryInds[Ae]],qe=fe[Ae];ce[qe]=ie[qe][De],ie[qe][De]+=Ie;var Ke=ae.dimensions[qe].categories[De],be=Ke.bands.length,Oe=Ke.bands[be-1];if(void 0===Oe||ge.rawColor!==Oe.rawColor){var Le=void 0===Oe?0:Oe.y+Oe.height;Ke.bands.push({key:Le,color:ge.color,rawColor:ge.rawColor,height:Ie,width:Ke.width,count:ge.count,y:Le,categoryViewModel:Ke,parcatsViewModel:ae})}else{var Ue=Ke.bands[be-1];Ue.height+=Ie,Ue.count+=ge.count}}me=H(pe,ce,xe,Ie,"hspline"===ae.pathShape?.5:0),Te[Ce]={key:ge.valueInds[0],model:ge,height:Ie,leftXs:pe,topYs:ce,dimWidths:xe,svgD:me,parcatsViewModel:ae}}ae.paths=Te}function K(ae){var ne=ae.model.dimensions.map(function(he){return{displayInd:he.displayInd,dimensionInd:he.dimensionInd}});ne.sort(function(he,pe){return he.displayInd-pe.displayInd});var Q=[];for(var ie in ne)Q.push(ue(ae,ae.model.dimensions[ne[ie].dimensionInd]));ae.dimensions=Q}function ue(ae,ne){var Q,ie=ae.model.dimensions.length;Q=40+(ie>1?(ae.width-80-16)/(ie-1):0)*ne.displayInd;var fe,he,pe,Ee,Re=[],ke=ae.model.maxCats,Te=ne.categories.length,we=ne.count,je=ae.height-8*(ke-1),Ce=8*(ke-Te)/2,Ie=ne.categories.map(function(ge){return{displayInd:ge.displayInd,categoryInd:ge.categoryInd}});for(Ie.sort(function(ge,me){return ge.displayInd-me.displayInd}),Ee=0;Ee<Te;Ee++)pe={key:(he=ne.categories[Ie[Ee].categoryInd]).valueInds[0],model:he,width:16,height:fe=we>0?he.count/we*je:0,y:null!==he.dragY?he.dragY:Ce,bands:[],parcatsViewModel:ae},Ce=Ce+fe+8,Re.push(pe);return{key:ne.dimensionInd,x:null!==ne.dragX?ne.dragX:Q,y:0,width:16,model:ne,categories:Re,parcatsViewModel:ae,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}se.exports=function(ae,ne,Q,ie){a(Q,ae,ie,ne)}},45784:function(se,U,r){"use strict";var I=r(45460);se.exports=function(C,f,k,T){var v=C._fullLayout,i=v._size;I(C,v._paper,f,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},k,T)}},73362:function(se,U,r){"use strict";var I=r(50693),C=r(13838),f=r(41940),k=r(27670).Y,T=r(1426).extendFlat,v=r(44467).templatedArray;se.exports={domain:k({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:f({editType:"plot"}),tickfont:f({editType:"plot"}),rangefont:f({editType:"plot"}),dimensions:v("dimension",{label:{valType:"string",editType:"plot"},tickvals:T({},C.tickvals,{editType:"plot"}),ticktext:T({},C.ticktext,{editType:"plot"}),tickformat:T({},C.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:T({editType:"calc"},I("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function(se,U,r){"use strict";var I=r(25706),C=r(39898),f=r(28984).keyFun,k=r(28984).repeat,T=r(71828).sorterAsc,v=r(71828).strTranslate,c=I.bar.snapRatio;function i(S,O){return S*(1-c)+O*c}var s=I.bar.snapClose;function a(S,O){return S*(1-s)+O*s}function o(S,O,P,R){if(function(ue,ae){for(var ne=0;ne<ae.length;ne++)if(ue>=ae[ne][0]&&ue<=ae[ne][1])return!0;return!1}(P,R))return P;var F=S?-1:1,B=0,J=O.length-1;if(F<0){var z=B;B=J,J=z}for(var $=O[B],G=$,H=B;F*H<F*J;H+=F){var X=H+F,K=O[X];if(F*P<F*a($,K))return i($,G);if(F*P<F*K||X===J)return i(K,$);G=$,$=K}}function l(S){S.attr("x",-I.bar.captureWidth/2).attr("width",I.bar.captureWidth)}function u(S){S.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(S){if(!S.brush.filterSpecified)return"0,"+S.height;for(var O,P,R,F=g(S.brush.filter.getConsolidated(),S.height),B=[0],J=F.length?F[0][0]:null,z=0;z<F.length;z++)P=(O=F[z])[1]-O[0],B.push(J),B.push(P),(R=z+1)<F.length&&(J=F[R][0]-O[1]);return B.push(S.height),B}function g(S,O){return S.map(function(P){return P.map(function(R){return Math.max(0,R*O)}).sort(T)})}function h(){C.select(document.body).style("cursor",null)}function w(S){S.attr("stroke-dasharray",d)}function y(S,O){var P=C.select(S).selectAll(".highlight, .highlight-shadow");w(O?P.transition().duration(I.bar.snapDuration).each("end",O):P)}function p(S,O){var P,R=S.brush,F=NaN,B={};if(R.filterSpecified){var J=S.height,z=R.filter.getConsolidated(),$=g(z,J),G=NaN,H=NaN,X=NaN;for(P=0;P<=$.length;P++){var K=$[P];if(K&&K[0]<=O&&O<=K[1]){G=P;break}if(H=P?P-1:NaN,K&&K[0]>O){X=P;break}}if(F=G,isNaN(F)&&(F=isNaN(H)||isNaN(X)?isNaN(H)?X:H:O-$[H][1]<$[X][0]-O?H:X),!isNaN(F)){var ue=$[F],ae=function(le,fe){var he=I.bar.handleHeight;if(!(fe>le[1]+he||fe<le[0]-he))return fe>=.9*le[1]+.1*le[0]?"n":fe<=.9*le[0]+.1*le[1]?"s":"ns"}(ue,O);ae&&(B.interval=z[F],B.intervalPix=ue,B.region=ae)}}if(S.ordinal&&!B.region){var ne=S.unitTickvals,Q=S.unitToPaddedPx.invert(O);for(P=0;P<ne.length;P++){var ie=[.25*ne[Math.max(P-1,0)]+.75*ne[P],.25*ne[Math.min(P+1,ne.length-1)]+.75*ne[P]];if(Q>=ie[0]&&Q<=ie[1]){B.clickableOrdinalRange=ie;break}}}return B}function _(S,O){C.event.sourceEvent.stopPropagation();var P=O.height-C.mouse(S)[1]-2*I.verticalPadding,R=O.brush.svgBrush;R.wasDragged=!0,R._dragging=!0,R.newExtent=R.grabbingBar?[P-R.grabPoint,P+R.barLength-R.grabPoint].map(O.unitToPaddedPx.invert):[R.startExtent,O.unitToPaddedPx.invert(P)].sort(T),O.brush.filterSpecified=!0,R.extent=R.stayingIntervals.concat([R.newExtent]),R.brushCallback(O),y(S.parentNode)}function x(S,O){var P=p(O,O.height-C.mouse(S)[1]-2*I.verticalPadding),R="crosshair";P.clickableOrdinalRange?R="pointer":P.region&&(R=P.region+"-resize"),C.select(document.body).style("cursor",R)}function b(S){S.on("mousemove",function(O){C.event.preventDefault(),O.parent.inBrushDrag||x(this,O)}).on("mouseleave",function(O){O.parent.inBrushDrag||h()}).call(C.behavior.drag().on("dragstart",function(O){!function(P,R){C.event.sourceEvent.stopPropagation();var F=R.height-C.mouse(P)[1]-2*I.verticalPadding,B=R.unitToPaddedPx.invert(F),J=R.brush,z=p(R,F),$=z.interval,G=J.svgBrush;if(G.wasDragged=!1,G.grabbingBar="ns"===z.region,G.grabbingBar){var H=$.map(R.unitToPaddedPx);G.grabPoint=F-H[0]-I.verticalPadding,G.barLength=H[1]-H[0]}G.clickableOrdinalRange=z.clickableOrdinalRange,G.stayingIntervals=R.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],$&&(G.stayingIntervals=G.stayingIntervals.filter(function(X){return X[0]!==$[0]&&X[1]!==$[1]})),G.startExtent=z.region?$["s"===z.region?1:0]:B,R.parent.inBrushDrag=!0,G.brushStartCallback()}(this,O)}).on("drag",function(O){_(this,O)}).on("dragend",function(O){!function(P,R){var F=R.brush,B=F.filter,J=F.svgBrush;J._dragging||(x(P,R),_(P,R),R.brush.svgBrush.wasDragged=!1),J._dragging=!1,C.event.sourceEvent.stopPropagation();var z=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,R.parent.inBrushDrag=!1,h(),!J.wasDragged)return J.wasDragged=void 0,J.clickableOrdinalRange?F.filterSpecified&&R.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],F.filterSpecified=!0):z?(J.extent=J.stayingIntervals,0===J.extent.length&&m(F)):m(F),J.brushCallback(R),y(P.parentNode),void J.brushEndCallback(F.filterSpecified?B.getConsolidated():[]);var $=function(){B.set(B.getConsolidated())};if(R.ordinal){var G=R.unitTickvals;G[G.length-1]<G[0]&&G.reverse(),J.newExtent=[o(0,G,J.newExtent[0],J.stayingIntervals),o(1,G,J.newExtent[1],J.stayingIntervals)];var H=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(H?[J.newExtent]:[]),J.extent.length||m(F),J.brushCallback(R),H?y(P.parentNode,$):($(),y(P.parentNode))}else $();J.brushEndCallback(F.filterSpecified?B.getConsolidated():[])}(this,O)}))}function M(S,O){return S[0]-O[0]}function m(S){S.filterSpecified=!1,S.svgBrush.extent=[[-1/0,1/0]]}function D(S){for(var O,P=S.slice(),R=[],F=P.shift();F;){for(O=F.slice();(F=P.shift())&&F[0]<=O[1];)O[1]=Math.max(O[1],F[1]);R.push(O)}return 1===R.length&&R[0][0]>R[0][1]&&(R=[]),R}se.exports={makeBrush:function(S,O,P,R,F,B){var J,$,G,H,z=(H=[],{set:function(X){1===(H=X.map(function(K){return K.slice().sort(T)}).sort(M)).length&&H[0][0]===-1/0&&H[0][1]===1/0&&(H=[[0,-1]]),$=D(H),G=H.reduce(function(K,ue){return[Math.min(K[0],ue[0]),Math.max(K[1],ue[1])]},[1/0,-1/0])},get:function(){return H.slice()},getConsolidated:function(){return $},getBounds:function(){return G}});return z.set(P),{filter:z,filterSpecified:O,svgBrush:{extent:[],brushStartCallback:R,brushCallback:(J=F,function($){var G=$.brush,X=G.svgBrush.extent.map(function(ue){return ue.slice()}).slice();G.filter.set(X),J()}),brushEndCallback:B}}},ensureAxisBrush:function(S,O,P){var R=S.selectAll("."+I.cn.axisBrush).data(k,f);R.enter().append("g").classed(I.cn.axisBrush,!0),function(F,B,J){var z=J._context.staticPlot,$=F.selectAll(".background").data(k);$.enter().append("rect").classed("background",!0).call(l).call(u).style("pointer-events",z?"none":"auto").attr("transform",v(0,I.verticalPadding)),$.call(b).attr("height",function(X){return X.height-I.verticalPadding});var G=F.selectAll(".highlight-shadow").data(k);G.enter().append("line").classed("highlight-shadow",!0).attr("x",-I.bar.width/2).attr("stroke-width",I.bar.width+I.bar.strokeWidth).attr("stroke",B).attr("opacity",I.bar.strokeOpacity).attr("stroke-linecap","butt"),G.attr("y1",function(X){return X.height}).call(w);var H=F.selectAll(".highlight").data(k);H.enter().append("line").classed("highlight",!0).attr("x",-I.bar.width/2).attr("stroke-width",I.bar.width-I.bar.strokeWidth).attr("stroke",I.bar.fillColor).attr("opacity",I.bar.fillOpacity).attr("stroke-linecap","butt"),H.attr("y1",function(X){return X.height}).call(w)}(R,O,P)},cleanRanges:function(S,O){if(Array.isArray(S[0])?(S=S.map(function(R){return R.sort(T)}),S=O.multiselect?D(S.sort(M)):[S[0]]):S=[S.sort(T)],O.tickvals){var P=O.tickvals.slice().sort(T);if(!(S=S.map(function(R){var F=[o(0,P,R[0],[]),o(1,P,R[1],[])];if(F[1]>F[0])return F}).filter(function(R){return R})).length)return}return S.length>1?S:S[0]}}},71791:function(se,U,r){"use strict";se.exports={attributes:r(73362),supplyDefaults:r(3633),calc:r(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:r(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function(se,U,r){"use strict";var I=r(39898),C=r(27659).a0,f=r(21341),k=r(77922);U.name="parcoords",U.plot=function(T){var v=C(T.calcdata,"parcoords")[0];v.length&&f(T,v)},U.clean=function(T,v,c,i){var s=i._has&&i._has("parcoords"),a=v._has&&v._has("parcoords");s&&!a&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())},U.toSVG=function(T){var v=T._fullLayout._glimages,c=I.select(T).selectAll(".svg-container");c.filter(function(i,s){return s===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var i=this,s=i.toDataURL("image/png");v.append("svg:image").attr({xmlns:k.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:i.style.width,height:i.style.height})}),window.setTimeout(function(){I.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray,C=r(21081),f=r(28984).wrap;se.exports=function(k,T){var v,c;return C.hasColorscale(T,"line")&&I(T.line.color)?(v=T.line.color,c=C.extractOpts(T.line).colorscale,C.calc(k,T,{vals:v,containerStr:"line",cLetter:"c"})):(v=function(i){for(var s=new Array(i),a=0;a<i;a++)s[a]=.5;return s}(T._length),c=[[0,T.line.color],[1,T.line.color]]),f({lineColor:v,cscale:c})}},25706:function(se){"use strict";se.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function(se,U,r){"use strict";var I=r(71828),C=r(52075).hasColorscale,f=r(1586),k=r(27670).c,T=r(85501),v=r(89298),c=r(73362),i=r(57920),s=r(25706).maxDimensionCount,a=r(94397);function o(l,u,d,g){function h(x,b){return I.coerce(l,u,c.dimensions,x,b)}var w=h("values"),y=h("visible");if(w&&w.length||(y=u.visible=!1),y){h("label"),h("tickvals"),h("ticktext"),h("tickformat");var p=h("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:p},v.setConvert(u._ax,g.layout),h("multiselect");var _=h("constraintrange");_&&(u.constraintrange=i.cleanRanges(_,u))}}se.exports=function(l,u,d,g){function h(x,b){return I.coerce(l,u,c,x,b)}var w=l.dimensions;Array.isArray(w)&&w.length>s&&(I.log("parcoords traces support up to "+s+" dimensions at the moment"),w.splice(s));var y=T(l,u,{name:"dimensions",layout:g,handleItemDefaults:o}),p=function(x,b,M,m,D){var S=D("line.color",M);if(C(x,"line")&&I.isArrayOrTypedArray(S)){if(S.length)return D("line.colorscale"),f(x,b,m,D,{prefix:"line.",cLetter:"c"}),S.length;b.line.color=M}return 1/0}(l,u,d,g,h);k(u,g,h),Array.isArray(y)&&y.length||(u.visible=!1),a(u,y,"values",p);var _={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};I.coerceFont(h,"labelfont",_),I.coerceFont(h,"tickfont",_),I.coerceFont(h,"rangefont",_),h("labelangle"),h("labelside"),h("unselected.line.color"),h("unselected.line.opacity")}},1602:function(se,U,r){"use strict";var I=r(71828).isTypedArray;U.convertTypedArray=function(C){return I(C)?Array.prototype.slice.call(C):C},U.isOrdinal=function(C){return!!C.tickvals},U.isVisible=function(C){return C.visible||!("visible"in C)}},67618:function(se,U,r){"use strict";var I=r(71791);I.plot=r(21341),se.exports=I},83398:function(se,U,r){"use strict";var I=r(56068),C=I(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),f=I(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),k=r(25706).maxDimensionCount,T=r(71828),c=new Uint8Array(4),i=new Uint8Array(4),s={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function a(p,_,x,b,M){var m=p._gl;m.enable(m.SCISSOR_TEST),m.scissor(_,x,b,M),p.clear({color:[0,0,0,0],depth:1})}function o(p,_,x,b,M,m){var D=m.key;x.drawCompleted||(p.read({x:0,y:0,width:1,height:1,data:c}),x.drawCompleted=!0),function S(O){var P=Math.min(b,M-O*b);0===O&&(window.cancelAnimationFrame(x.currentRafs[D]),delete x.currentRafs[D],a(p,m.scissorX,m.scissorY,m.scissorWidth,m.viewBoxSize[1])),x.clearOnly||(m.count=2*P,m.offset=2*O*b,_(m),O*b+P<M&&(x.currentRafs[D]=window.requestAnimationFrame(function(){S(O+1)})),x.drawCompleted=!1)}(0)}function l(p,_){for(var x=new Array(256),b=0;b<256;b++)x[b]=p(b/255).concat(_);return x}function u(p,_){return(p>>>8*_)%256/255}function d(p,_,x){for(var b=new Array(8*_),M=0,m=0;m<_;m++)for(var D=0;D<2;D++)for(var S=0;S<4;S++){var O=4*p+S,P=x[64*m+O];63===O&&0===D&&(P*=-1),b[M++]=P}return b}function g(p){var _="0"+p;return _.substr(_.length-2)}function h(p){return p<k?"p"+g(p+1)+"_"+g(p+4):"colors"}function w(p,_,x,b,M,m,D,S,O,P,R,F,B,J){for(var z=[[],[]],$=0;$<64;$++)z[0][$]=$===M?1:0,z[1][$]=$===m?1:0;var G=p.lines.canvasOverdrag*J,H=p.domain,X=p.canvasWidth*J,K=p.canvasHeight*J,ue=p.pad.l*J,ae=p.pad.b*J,ne=p.layoutHeight*J,Q=p.layoutWidth*J,ie=p.deselectedLines.color,le=p.deselectedLines.opacity;return T.extendFlat({key:R,resolution:[X,K],viewBoxPos:[(D*=J)+G,S*=J],viewBoxSize:[O*=J,P*=J],i0:M,i1:m,dim0A:z[0].slice(0,16),dim0B:z[0].slice(16,32),dim0C:z[0].slice(32,48),dim0D:z[0].slice(48,64),dim1A:z[1].slice(0,16),dim1B:z[1].slice(16,32),dim1C:z[1].slice(32,48),dim1D:z[1].slice(48,64),drwLayer:F,contextColor:[ie[0]/255,ie[1]/255,ie[2]/255,"auto"!==le?ie[3]*le:Math.max(.00392156862745098,Math.pow(1/p.lines.color.length,.3333333333333333))],scissorX:(b===_?0:D+G)+(ue-G)+Q*H.x[0],scissorWidth:(b===x?X-D+G:O+.5)+(b===_?D+G:0),scissorY:S+ae+ne*H.y[0],scissorHeight:P,viewportX:ue-G+Q*H.x[0],viewportY:ae+ne*H.y[0],viewportWidth:X,viewportHeight:K},B)}function y(p){var _=2047,x=Math.max(0,Math.floor(p[0]*_),0),b=Math.min(_,Math.ceil(p[1]*_),_);return[Math.min(x,b),Math.max(x,b)]}se.exports=function(p,_){var x,M,m,D,S=_.context,O=_.pick,P=_.regl,R=P._gl,F=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),B=Math.max(F[0],Math.min(F[1],_.viewModel.plotGlPixelRatio)),J={currentRafs:{},drawCompleted:!0,clearOnly:!1},z=function(K){for(var ue={},ae=0;ae<=k;ae+=4)ue[h(ae)]=K.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return ue}(P),$=P.texture(s),G=[];X(_);var H=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:C,frag:f,primitive:"lines",lineWidth:B,attributes:z,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:$,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function X(K){x=K.model,M=K.viewModel.dimensions.slice(),m=M[0]?M[0].values.length:0;var ue=x.lines,ae=O?ue.color.map(function(Q,ie){return ie/ue.color.length}):ue.color,ne=function(Q,ie,le){for(var he=new Array(Q*(k+4)),pe=0,xe=0;xe<Q;xe++){for(var Ee=0;Ee<k;Ee++)he[pe++]=Ee<ie.length?ie[Ee].paddedUnitValues[xe]:.5;he[pe++]=u(xe,2),he[pe++]=u(xe,1),he[pe++]=u(xe,0),he[pe++]=Math.max(1e-6,Math.min(.999999,le[xe]))}return he}(m,M,ae);(function(Q,ie,le){for(var fe=0;fe<=k;fe+=4)Q[h(fe)](d(fe/4,ie,le))})(z,m,ne),S||O||($=P.texture(T.extendFlat({data:l(x.unitToColor,255)},s)))}return{render:function(K,ue,ae){var ne,Q,ie,le=K.length,fe=1/0,he=-1/0;for(ne=0;ne<le;ne++)K[ne].dim0.canvasX<fe&&(fe=K[ne].dim0.canvasX,Q=ne),K[ne].dim1.canvasX>he&&(he=K[ne].dim1.canvasX,ie=ne);0===le&&a(P,0,0,x.canvasWidth,x.canvasHeight);var pe=function(ge){var me,ce,Ae,Ne=[[],[]];for(Ae=0;Ae<64;Ae++){var De=!ge&&Ae<M.length?M[Ae].brush.filter.getBounds():[-1/0,1/0];Ne[0][Ae]=De[0],Ne[1][Ae]=De[1]}var qe=new Array(16384);for(me=0;me<16384;me++)qe[me]=255;if(!ge)for(me=0;me<M.length;me++){var Ke=me%8,be=(me-Ke)/8,Oe=Math.pow(2,Ke),Le=M[me].brush.filter.get();if(!(Le.length<2)){var Ue=y(Le[0])[1];for(ce=1;ce<Le.length;ce++){var Ze=y(Le[ce]);for(Ae=Ue+1;Ae<Ze[0];Ae++)qe[8*Ae+be]&=~Oe;Ue=Math.max(Ue,Ze[1])}}}var We={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:qe};return D?D(We):D=P.texture(We),{maskTexture:D,maskHeight:2048,loA:Ne[0].slice(0,16),loB:Ne[0].slice(16,32),loC:Ne[0].slice(32,48),loD:Ne[0].slice(48,64),hiA:Ne[1].slice(0,16),hiB:Ne[1].slice(16,32),hiC:Ne[1].slice(32,48),hiD:Ne[1].slice(48,64)}}(S);for(ne=0;ne<le;ne++){var xe=K[ne],Ee=xe.dim0.crossfilterDimensionIndex,Re=xe.dim1.crossfilterDimensionIndex,ke=xe.canvasX,Te=xe.canvasY,we=ke+xe.panelSizeX,je=xe.plotGlPixelRatio;if(ue||!G[Ee]||G[Ee][0]!==ke||G[Ee][1]!==we){G[Ee]=[ke,we];var Ce=w(x,Q,ie,ne,Ee,Re,ke,Te,xe.panelSizeX,xe.panelSizeY,xe.dim0.crossfilterDimensionIndex,S?0:O?2:1,pe,je);J.clearOnly=ae,o(P,H,J,ue?x.lines.blockLineCount:m,m,Ce)}}},readPixel:function(K,ue){return P.read({x:K,y:ue,width:1,height:1,data:i}),i},readPixels:function(K,ue,ae,ne){var Q=new Uint8Array(4*ae*ne);return P.read({x:K,y:ue,width:ae,height:ne,data:Q}),Q},destroy:function(){for(var K in p.style["pointer-events"]="none",$.destroy(),D&&D.destroy(),z)z[K].destroy()},update:X}}},94397:function(se){"use strict";se.exports=function(U,r,I,C){var f,k;for(C||(C=1/0),f=0;f<r.length;f++)(k=r[f]).visible&&(C=Math.min(C,k[I].length));for(C===1/0&&(C=0),U._length=C,f=0;f<r.length;f++)(k=r[f]).visible&&(k._length=C);return C}},17171:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.numberFormat,k=r(36652),T=r(89298),v=C.strRotate,c=C.strTranslate,i=r(63893),s=r(91424),a=r(21081),o=r(28984),l=o.keyFun,u=o.repeat,d=o.unwrap,g=r(1602),h=r(25706),w=r(57920),y=r(83398);function p($,G,H){return C.aggNums($,null,G,H)}function _($,G){return b(p(Math.min,$,G),p(Math.max,$,G))}function x($){var G=$.range;return G?b(G[0],G[1]):_($.values,$._length)}function b($,G){return!isNaN($)&&isFinite($)||($=0),!isNaN(G)&&isFinite(G)||(G=0),$===G&&(0===$?($-=1,G+=1):($*=.9,G*=1.1)),[$,G]}function M($,G,H,X,K){var ue,ae,ne=x(H);return X?I.scale.ordinal().domain(X.map((ue=f(H.tickformat),ae=K,ae?function(Q,ie){return ae[ie]??ue(Q)}:ue))).range(X.map(function(Q){return $-G+(Q-ne[0])/(ne[1]-ne[0])*(2*G-$)})):I.scale.linear().domain(ne).range([$-G,G])}function m($){if($.tickvals){var G=x($);return I.scale.ordinal().domain($.tickvals).range($.tickvals.map(function(H){return(H-G[0])/(G[1]-G[0])}))}}function D($){var G=$.map(function(K){return K[0]}),H=$.map(function(K){var ue=k(K[1]);return I.rgb("rgb("+ue[0]+","+ue[1]+","+ue[2]+")")}),X="rgb".split("").map(function(K){return I.scale.linear().clamp(!0).domain(G).range(H.map((ue=K,function(ae){return ae[ue]})));var ue});return function(K){return X.map(function(ue){return ue(K)})}}function S($){return $.dimensions.some(function(G){return G.brush.filterSpecified})}function O($,G,H){var X=d(G),K=X.trace,ue=g.convertTypedArray(X.lineColor),ae=K.line,ne={color:k(K.unselected.line.color),opacity:K.unselected.line.opacity},Q=a.extractOpts(ae),ie=Q.reversescale?a.flipScale(X.cscale):X.cscale,le=K.domain,fe=K.dimensions,he=$.width,pe=K.labelangle,xe=K.labelside,Ee=K.labelfont,Re=K.tickfont,ke=K.rangefont,Te=C.extendDeepNoArrays({},ae,{color:ue.map(I.scale.linear().domain(x({values:ue,range:[Q.min,Q.max],_length:K._length}))),blockLineCount:h.blockLineCount,canvasOverdrag:h.overdrag*h.canvasPixelRatio}),we=Math.floor(he*(le.x[1]-le.x[0])),je=Math.floor($.height*(le.y[1]-le.y[0])),Ce=$.margin||{l:80,r:80,t:100,b:80},Ie=we,ge=je;return{key:H,colCount:fe.filter(g.isVisible).length,dimensions:fe,tickDistance:h.tickDistance,unitToColor:D(ie),lines:Te,deselectedLines:ne,labelAngle:pe,labelSide:xe,labelFont:Ee,tickFont:Re,rangeFont:ke,layoutWidth:he,layoutHeight:$.height,domain:le,translateX:le.x[0]*he,translateY:$.height-le.y[1]*$.height,pad:Ce,canvasWidth:Ie*h.canvasPixelRatio+2*Te.canvasOverdrag,canvasHeight:ge*h.canvasPixelRatio,width:Ie,height:ge,canvasPixelRatio:h.canvasPixelRatio}}function P($,G,H){var he,pe,X=H.width,K=H.height,ue=H.dimensions,ae=H.canvasPixelRatio,ne=function(he){return X*he/Math.max(1,H.colCount-1)},Q=h.verticalPadding/K,ie=(he=K,pe=h.verticalPadding,I.scale.linear().range([pe,he-pe])),le={key:H.key,xScale:ne,model:H,inBrushDrag:!1},fe={};return le.dimensions=ue.filter(g.isVisible).map(function(he,pe){var De,qe,xe=(De=he,qe=Q,I.scale.linear().domain(x(De)).range([qe,1-qe])),Ee=fe[he.label];fe[he.label]=(Ee||0)+1;var Re=he.label+(Ee?"__"+Ee:""),ke=he.constraintrange,Te=ke&&ke.length;Te&&!Array.isArray(ke[0])&&(ke=[ke]);var we=Te?ke.map(function(De){return De.map(xe)}):[[-1/0,1/0]],je=he.values;je.length>he._length&&(je=je.slice(0,he._length));var Ce,Ie=he.tickvals;function ge(De,qe){return{val:De,text:Ce[qe]}}function me(De,qe){return De.val-qe.val}if(Array.isArray(Ie)&&Ie.length){Ce=he.ticktext,Array.isArray(Ce)&&Ce.length?Ce.length>Ie.length?Ce=Ce.slice(0,Ie.length):Ie.length>Ce.length&&(Ie=Ie.slice(0,Ce.length)):Ce=Ie.map(f(he.tickformat));for(var ce=1;ce<Ie.length;ce++)if(Ie[ce]<Ie[ce-1]){for(var Ae=Ie.map(ge).sort(me),Ne=0;Ne<Ie.length;Ne++)Ie[Ne]=Ae[Ne].val,Ce[Ne]=Ae[Ne].text;break}}else Ie=void 0;return je=g.convertTypedArray(je),{key:Re,label:he.label,tickFormat:he.tickformat,tickvals:Ie,ticktext:Ce,ordinal:g.isOrdinal(he),multiselect:he.multiselect,xIndex:pe,crossfilterDimensionIndex:pe,visibleIndex:he._index,height:K,values:je,paddedUnitValues:je.map(xe),unitTickvals:Ie&&Ie.map(xe),xScale:ne,x:ne(pe),canvasX:ne(pe)*ae,unitToPaddedPx:ie,domainScale:M(K,h.verticalPadding,he,Ie,Ce),ordinalScale:m(he),parent:le,model:H,brush:w.makeBrush($,Te,we,function(){$.linePickActive(!1)},function(){var De=le;De.focusLayer&&De.focusLayer.render(De.panels,!0);var qe=S(De);!$.contextShown()&&qe?(De.contextLayer&&De.contextLayer.render(De.panels,!0),$.contextShown(!0)):$.contextShown()&&!qe&&(De.contextLayer&&De.contextLayer.render(De.panels,!0,!0),$.contextShown(!1))},function(De){if(le.focusLayer.render(le.panels,!0),le.pickLayer&&le.pickLayer.render(le.panels,!0),$.linePickActive(!0),G&&G.filterChanged){var qe=xe.invert,Ke=De.map(function(be){return be.map(qe).sort(C.sorterAsc)}).sort(function(be,Oe){return be[0]-Oe[0]});G.filterChanged(le.key,he._index,Ke)}})}}),le}function R($){$.classed(h.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F($,G){var X=$*Math.PI/180;return{dir:"top"===G?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:$}}function B($,G,H){for(var X=G.panels||(G.panels=[]),K=$.data(),ue=0;ue<K.length-1;ue++){var ae=X[ue]||(X[ue]={}),ne=K[ue],Q=K[ue+1];ae.dim0=ne,ae.dim1=Q,ae.canvasX=ne.canvasX,ae.panelSizeX=Q.canvasX-ne.canvasX,ae.panelSizeY=G.model.canvasHeight,ae.y=0,ae.canvasY=0,ae.plotGlPixelRatio=H}}function J($,G){return T.tickText($._ax,G,!1).text}function z($,G){if($.ordinal)return"";var H=$.domainScale.domain();return J($.model.dimensions[$.visibleIndex],H[G?H.length-1:0])}se.exports=function($,G,H,X){var K=$._context.staticPlot,ue=$._fullLayout,ae=ue._toppaper,ne=ue._glcontainer,Q=$._context.plotGlPixelRatio,ie=$._fullLayout.paper_bgcolor;!function(De){for(var qe=0;qe<De.length;qe++)for(var Ke=0;Ke<De[qe].length;Ke++)for(var be=De[qe][Ke].trace,Oe=be.dimensions,Le=0;Le<Oe.length;Le++){var Ue=Oe[Le].values,Ze=Oe[Le]._ax;Ze&&(Ze.range=Ze.range?b(Ze.range[0],Ze.range[1]):_(Ue,be._length),Ze.dtick||(Ze.dtick=.01*(Math.abs(Ze.range[1]-Ze.range[0])||1)),Ze.tickformat=Oe[Le].tickformat,T.calcTicks(Ze),Ze.cleanRange())}}(G);var le,fe,he=(le=!0,fe=!1,{linePickActive:function(De){return arguments.length?le=!!De:le},contextShown:function(De){return arguments.length?fe=!!De:fe}}),pe=G.filter(function(De){return d(De).trace.visible}).map(O.bind(0,H)).map(P.bind(0,he,X));ne.each(function(De,qe){return C.extendFlat(De,pe[qe])});var xe=ne.selectAll(".gl-canvas").each(function(De){De.viewModel=pe[0],De.viewModel.plotGlPixelRatio=Q,De.viewModel.paperColor=ie,De.model=De.viewModel?De.viewModel.model:null}),Ee=null;xe.filter(function(De){return De.pick}).style("pointer-events",K?"none":"auto").on("mousemove",function(De){if(he.linePickActive()&&De.lineLayer&&X&&X.hover){var qe=I.event,Ke=this.width,be=this.height,Oe=I.mouse(this),Le=Oe[0],Ue=Oe[1];if(Le<0||Ue<0||Le>=Ke||Ue>=be)return;var Ze=De.lineLayer.readPixel(Le,be-1-Ue),We=0!==Ze[3],et=We?Ze[2]+256*(Ze[1]+256*Ze[0]):null,nt={x:Le,y:Ue,clientX:qe.clientX,clientY:qe.clientY,dataIndex:De.model.key,curveNumber:et};et!==Ee&&(We?X.hover(nt):X.unhover&&X.unhover(nt),Ee=et)}}),xe.style("opacity",function(De){return De.pick?0:1}),ae.style("background","rgba(255, 255, 255, 0)");var Re=ae.selectAll("."+h.cn.parcoords).data(pe,l);Re.exit().remove(),Re.enter().append("g").classed(h.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),Re.attr("transform",function(De){return c(De.model.translateX,De.model.translateY)});var ke=Re.selectAll("."+h.cn.parcoordsControlView).data(u,l);ke.enter().append("g").classed(h.cn.parcoordsControlView,!0),ke.attr("transform",function(De){return c(De.model.pad.l,De.model.pad.t)});var Te=ke.selectAll("."+h.cn.yAxis).data(function(De){return De.dimensions},l);Te.enter().append("g").classed(h.cn.yAxis,!0),ke.each(function(De){B(Te,De,Q)}),xe.each(function(De){De.viewModel&&(!De.lineLayer||X?De.lineLayer=y(this,De):De.lineLayer.update(De),(De.key||0===De.key)&&(De.viewModel[De.key]=De.lineLayer),De.lineLayer.render(De.viewModel.panels,!De.context||X))}),Te.attr("transform",function(De){return c(De.xScale(De.xIndex),0)}),Te.call(I.behavior.drag().origin(function(De){return De}).on("drag",function(De){var qe=De.parent;he.linePickActive(!1),De.x=Math.max(-h.overdrag,Math.min(De.model.width+h.overdrag,I.event.x)),De.canvasX=De.x*De.model.canvasPixelRatio,Te.sort(function(Ke,be){return Ke.x-be.x}).each(function(Ke,be){Ke.xIndex=be,Ke.x=De===Ke?Ke.x:Ke.xScale(Ke.xIndex),Ke.canvasX=Ke.x*Ke.model.canvasPixelRatio}),B(Te,qe,Q),Te.filter(function(Ke){return 0!==Math.abs(De.xIndex-Ke.xIndex)}).attr("transform",function(Ke){return c(Ke.xScale(Ke.xIndex),0)}),I.select(this).attr("transform",c(De.x,0)),Te.each(function(Ke,be,Oe){Oe===De.parent.key&&(qe.dimensions[be]=Ke)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!S(qe)),qe.focusLayer.render&&qe.focusLayer.render(qe.panels)}).on("dragend",function(De){var qe=De.parent;De.x=De.xScale(De.xIndex),De.canvasX=De.x*De.model.canvasPixelRatio,B(Te,qe,Q),I.select(this).attr("transform",function(Ke){return c(Ke.x,0)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!S(qe)),qe.focusLayer&&qe.focusLayer.render(qe.panels),qe.pickLayer&&qe.pickLayer.render(qe.panels,!0),he.linePickActive(!0),X&&X.axesMoved&&X.axesMoved(qe.key,qe.dimensions.map(function(Ke){return Ke.crossfilterDimensionIndex}))})),Te.exit().remove();var we=Te.selectAll("."+h.cn.axisOverlays).data(u,l);we.enter().append("g").classed(h.cn.axisOverlays,!0),we.selectAll("."+h.cn.axis).remove();var je=we.selectAll("."+h.cn.axis).data(u,l);je.enter().append("g").classed(h.cn.axis,!0),je.each(function(De){var qe=De.model.height/De.model.tickDistance,Ke=De.domainScale,be=Ke.domain();I.select(this).call(I.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qe,De.tickFormat).tickValues(De.ordinal?be:null).tickFormat(function(Oe){return g.isOrdinal(De)?Oe:J(De.model.dimensions[De.visibleIndex],Oe)}).scale(Ke)),s.font(je.selectAll("text"),De.model.tickFont)}),je.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),je.selectAll("text").style("text-shadow",i.makeTextShadow(ie)).style("cursor","default");var Ce=we.selectAll("."+h.cn.axisHeading).data(u,l);Ce.enter().append("g").classed(h.cn.axisHeading,!0);var Ie=Ce.selectAll("."+h.cn.axisTitle).data(u,l);Ie.enter().append("text").classed(h.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",K?"none":"auto"),Ie.text(function(De){return De.label}).each(function(De){var qe=I.select(this);s.font(qe,De.model.labelFont),i.convertToTspans(qe,$)}).attr("transform",function(De){var qe=F(De.model.labelAngle,De.model.labelSide),Ke=h.axisTitleOffset;return(qe.dir>0?"":c(0,2*Ke+De.model.height))+v(qe.degrees)+c(-Ke*qe.dx,-Ke*qe.dy)}).attr("text-anchor",function(De){var qe=F(De.model.labelAngle,De.model.labelSide);return 2*Math.abs(qe.dx)>Math.abs(qe.dy)?qe.dir*qe.dx<0?"start":"end":"middle"});var ge=we.selectAll("."+h.cn.axisExtent).data(u,l);ge.enter().append("g").classed(h.cn.axisExtent,!0);var me=ge.selectAll("."+h.cn.axisExtentTop).data(u,l);me.enter().append("g").classed(h.cn.axisExtentTop,!0),me.attr("transform",c(0,-h.axisExtentOffset));var ce=me.selectAll("."+h.cn.axisExtentTopText).data(u,l);ce.enter().append("text").classed(h.cn.axisExtentTopText,!0).call(R),ce.text(function(De){return z(De,!0)}).each(function(De){s.font(I.select(this),De.model.rangeFont)});var Ae=ge.selectAll("."+h.cn.axisExtentBottom).data(u,l);Ae.enter().append("g").classed(h.cn.axisExtentBottom,!0),Ae.attr("transform",function(De){return c(0,De.model.height+h.axisExtentOffset)});var Ne=Ae.selectAll("."+h.cn.axisExtentBottomText).data(u,l);Ne.enter().append("text").classed(h.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(R),Ne.text(function(De){return z(De,!1)}).each(function(De){s.font(I.select(this),De.model.rangeFont)}),w.ensureAxisBrush(we,ie,$)}},21341:function(se,U,r){"use strict";var I=r(17171),C=r(79749),f=r(1602).isVisible,k={};function T(v,c,i){var s=c.indexOf(i),a=v.indexOf(s);return-1===a&&(a+=c.length),a}(se.exports=function(v,c){var i=v._fullLayout;if(C(v,[],k)){var s={},a={},o={},l={},u=i._size;c.forEach(function(d,g){var h=d[0].trace;o[g]=h.index;var w=l[g]=h._fullInput.index;s[g]=v.data[w].dimensions,a[g]=v.data[w].dimensions.slice()}),I(v,c,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:function(d,g,h){var w=a[d][g],y=h.map(function(m){return m.slice()}),p="dimensions["+g+"].constraintrange",_=i._tracePreGUI[v._fullData[o[d]]._fullInput.uid];void 0===_[p]&&(_[p]=w.constraintrange||null);var b=v._fullData[o[d]].dimensions[g];y.length?(1===y.length&&(y=y[0]),w.constraintrange=y,b.constraintrange=y.slice(),y=[y]):(delete w.constraintrange,delete b.constraintrange,y=null);var M={};M[p]=y,v.emit("plotly_restyle",[M,[l[d]]])},hover:function(d){v.emit("plotly_hover",d)},unhover:function(d){v.emit("plotly_unhover",d)},axesMoved:function(d,g){var w,y,h=(w=g,y=a[d].filter(f),function(p,_){return T(w,y,p)-T(w,y,_)});s[d].sort(h),a[d].filter(function(w){return!f(w)}).sort(function(w){return a[d].indexOf(w)}).forEach(function(w){s[d].splice(s[d].indexOf(w),1),s[d].splice(a[d].indexOf(w),0,w)}),v.emit("plotly_restyle",[{dimensions:[s[d]]},[l[d]]])}})}}).reglPrecompiled=k},34e3:function(se,U,r){"use strict";var I=r(9012),C=r(27670).Y,f=r(41940),k=r(22399),T=r(5386).fF,v=r(5386).si,c=r(1426).extendFlat,i=r(79952).u,s=f({editType:"plot",arrayOk:!0,colorEditType:"plot"});se.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:k.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:i,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:c({},I.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","percent","text"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:c({},s,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:c({},s,{}),outsidetextfont:c({},s,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:c({},s,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:C({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:c({},s,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function(se,U,r){"use strict";var I=r(74875);U.name="pie",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},32354:function(se,U,r){"use strict";var I=r(92770),C=r(84267),f=r(7901),k={};function T(c){return function(i,s){return!!i&&!!(i=C(i)).isValid()&&(i=f.addOpacity(i,i.getAlpha()),c[s]||(c[s]=i),i)}}function v(c,i){var s,a=JSON.stringify(c),o=i[a];if(!o){for(o=c.slice(),s=0;s<c.length;s++)o.push(C(c[s]).lighten(20).toHexString());for(s=0;s<c.length;s++)o.push(C(c[s]).darken(20).toHexString());i[a]=o}return o}se.exports={calc:function(c,i){var s,a,o=[],l=c._fullLayout,u=l.hiddenlabels||[],d=i.labels,g=i.marker.colors||[],h=i.values,w=i._length,y=i._hasValues&&w;if(i.dlabel)for(d=new Array(w),s=0;s<w;s++)d[s]=String(i.label0+s*i.dlabel);var p={},_=T(l["_"+i.type+"colormap"]),x=0,b=!1;for(s=0;s<w;s++){var M,m,D;if(y){if(!I(M=h[s]))continue;M=+M}else M=1;void 0!==(m=d[s])&&""!==m||(m=s);var S=p[m=String(m)];void 0===S?(p[m]=o.length,(D=-1!==u.indexOf(m))||(x+=M),o.push({v:M,label:m,color:_(g[s],m),i:s,pts:[s],hidden:D})):(b=!0,(a=o[S]).v+=M,a.pts.push(s),a.hidden||(x+=M),!1===a.color&&g[s]&&(a.color=_(g[s],m)))}return o=o.filter(function(O){return O.v>=0}),("funnelarea"===i.type?b:i.sort)&&o.sort(function(O,P){return P.v-O.v}),o[0]&&(o[0].vTotal=x),o},crossTraceCalc:function(c,i){var s=(i||{}).type;s||(s="pie");var a=c._fullLayout,o=c.calcdata,l=a[s+"colorway"],u=a["_"+s+"colormap"];a["extend"+s+"colors"]&&(l=v(l,k));for(var d=0,g=0;g<o.length;g++){var h=o[g];if(h[0].trace.type===s)for(var w=0;w<h.length;w++){var y=h[w];!1===y.color&&(u[y.label]?y.color=u[y.label]:(u[y.label]=y.color=l[d%l.length],d++))}}},makePullColorFn:T,generateExtendedColors:v}},37434:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(34e3),k=r(27670).c,T=r(90769).handleText,v=r(71828).coercePattern;function c(s,a){var o=Array.isArray(s),l=C.isArrayOrTypedArray(a),u=Math.min(o?s.length:1/0,l?a.length:1/0);if(isFinite(u)||(u=0),u&&l){for(var d,g=0;g<u;g++){var h=a[g];if(I(h)&&h>0){d=!0;break}}d||(u=0)}return{hasLabels:o,hasValues:l,len:u}}function i(s,a,o,l,u){l("marker.line.width")&&l("marker.line.color",u?void 0:o.paper_bgcolor);var d=l("marker.colors");v(l,"marker.pattern",d),s.marker&&!a.marker.pattern.fgcolor&&(a.marker.pattern.fgcolor=s.marker.colors),a.marker.pattern.bgcolor||(a.marker.pattern.bgcolor=o.paper_bgcolor)}se.exports={handleLabelsAndValues:c,handleMarkerDefaults:i,supplyDefaults:function(s,a,o,l){function u(b,M){return C.coerce(s,a,f,b,M)}var d=c(u("labels"),u("values")),g=d.len;if(a._hasLabels=d.hasLabels,a._hasValues=d.hasValues,!a._hasLabels&&a._hasValues&&(u("label0"),u("dlabel")),g){a._length=g,i(s,a,l,u,!0),u("scalegroup");var h,w=u("text"),y=u("texttemplate");if(y||(h=u("textinfo",Array.isArray(w)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),y||h&&"none"!==h){var p=u("textposition");T(s,a,l,u,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(p)||"auto"===p||"outside"===p)&&u("automargin"),("inside"===p||"auto"===p||Array.isArray(p))&&u("insidetextorientation")}k(a,l,u);var _=u("hole");if(u("title.text")){var x=u("title.position",_?"middle center":"top center");_||"middle center"!==x||(a.title.position="top center"),C.coerceFont(u,"title.font",l.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else a.visible=!1}}},20007:function(se,U,r){"use strict";var I=r(23469).appendArrayMultiPointValues;se.exports=function(C,f){var k={curveNumber:f.index,pointNumbers:C.pts,data:f._input,fullData:f,label:C.label,color:C.color,value:C.v,percent:C.percent,text:C.text,bbox:C.bbox,v:C.v};return 1===C.pts.length&&(k.pointNumber=k.i=C.pts[0]),I(k,f,C.pts),"funnelarea"===f.type&&(delete k.v,delete k.i),k}},22209:function(se,U,r){"use strict";var I=r(91424),C=r(7901);se.exports=function(f,k,T,v){var c=T.marker.pattern;c&&c.shape?I.pointStyle(f,T,v,k):C.fill(f,k.color)}},53581:function(se,U,r){"use strict";var I=r(71828);function C(f){return-1!==f.indexOf("e")?f.replace(/[.]?0+e/,"e"):-1!==f.indexOf(".")?f.replace(/[.]?0+$/,""):f}U.formatPiePercent=function(f,k){var T=C((100*f).toPrecision(3));return I.numSeparate(T,k)+"%"},U.formatPieValue=function(f,k){var T=C(f.toPrecision(10));return I.numSeparate(T,k)},U.getFirstFilled=function(f,k){if(Array.isArray(f))for(var T=0;T<k.length;T++){var v=f[k[T]];if(v||0===v||""===v)return v}},U.castOption=function(f,k){return Array.isArray(f)?U.getFirstFilled(f,k):f||void 0},U.getRotationAngle=function(f){return("auto"===f?0:f)*Math.PI/180}},58810:function(se,U,r){"use strict";se.exports={attributes:r(34e3),supplyDefaults:r(37434).supplyDefaults,supplyLayoutDefaults:r(92097),layoutAttributes:r(92774),calc:r(32354).calc,crossTraceCalc:r(32354).crossTraceCalc,plot:r(14575).plot,style:r(68357),styleOne:r(63463),moduleType:"trace",name:"pie",basePlotModule:r(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function(se){"use strict";se.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function(se,U,r){"use strict";var I=r(71828),C=r(92774);se.exports=function(f,k){function T(v,c){return I.coerce(f,k,C,v,c)}T("hiddenlabels"),T("piecolorway",k.colorway),T("extendpiecolors")}},14575:function(se,U,r){"use strict";var I=r(39898),C=r(74875),f=r(30211),k=r(7901),T=r(91424),v=r(71828),c=v.strScale,i=v.strTranslate,s=r(63893),a=r(72597),o=a.recordMinTextSize,l=a.clearMinTextSize,u=r(97313).TEXTPAD,d=r(53581),g=r(20007),h=r(71828).isValidTextValue;function w(G,H,X){var K=X[0],ue=K.cx,ae=K.cy,ne=K.trace,Q="funnelarea"===ne.type;"_hasHoverLabel"in ne||(ne._hasHoverLabel=!1),"_hasHoverEvent"in ne||(ne._hasHoverEvent=!1),G.on("mouseover",function(ie){var le=H._fullLayout,fe=H._fullData[ne.index];if(!H._dragging&&!1!==le.hovermode){var he=fe.hoverinfo;if(Array.isArray(he)&&(he=f.castHoverinfo({hoverinfo:[d.castOption(he,ie.pts)],_module:ne._module},le,0)),"all"===he&&(he="label+text+value+percent+name"),fe.hovertemplate||"none"!==he&&"skip"!==he&&he){var pe=ie.rInscribed||0,xe=ue+ie.pxmid[0]*(1-pe),Ee=ae+ie.pxmid[1]*(1-pe),Re=le.separators,ke=[];if(he&&-1!==he.indexOf("label")&&ke.push(ie.label),ie.text=d.castOption(fe.hovertext||fe.text,ie.pts),he&&-1!==he.indexOf("text")){var Te=ie.text;v.isValidTextValue(Te)&&ke.push(Te)}ie.value=ie.v,ie.valueLabel=d.formatPieValue(ie.v,Re),he&&-1!==he.indexOf("value")&&ke.push(ie.valueLabel),ie.percent=ie.v/K.vTotal,ie.percentLabel=d.formatPiePercent(ie.percent,Re),he&&-1!==he.indexOf("percent")&&ke.push(ie.percentLabel);var we=fe.hoverlabel,je=we.font,Ce=[];f.loneHover({trace:ne,x0:xe-pe*K.r,x1:xe+pe*K.r,y:Ee,_x0:Q?ue+ie.TL[0]:xe-pe*K.r,_x1:Q?ue+ie.TR[0]:xe+pe*K.r,_y0:Q?ae+ie.TL[1]:Ee-pe*K.r,_y1:Q?ae+ie.BL[1]:Ee+pe*K.r,text:ke.join("<br>"),name:fe.hovertemplate||-1!==he.indexOf("name")?fe.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:d.castOption(we.bgcolor,ie.pts)||ie.color,borderColor:d.castOption(we.bordercolor,ie.pts),fontFamily:d.castOption(je.family,ie.pts),fontSize:d.castOption(je.size,ie.pts),fontColor:d.castOption(je.color,ie.pts),nameLength:d.castOption(we.namelength,ie.pts),textAlign:d.castOption(we.align,ie.pts),hovertemplate:d.castOption(fe.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[g(ie,fe)]},{container:le._hoverlayer.node(),outerContainer:le._paper.node(),gd:H,inOut_bbox:Ce}),ie.bbox=Ce[0],ne._hasHoverLabel=!0}ne._hasHoverEvent=!0,H.emit("plotly_hover",{points:[g(ie,fe)],event:I.event})}}),G.on("mouseout",function(ie){var le=H._fullLayout,fe=H._fullData[ne.index],he=I.select(this).datum();ne._hasHoverEvent&&(ie.originalEvent=I.event,H.emit("plotly_unhover",{points:[g(he,fe)],event:I.event}),ne._hasHoverEvent=!1),ne._hasHoverLabel&&(f.loneUnhover(le._hoverlayer.node()),ne._hasHoverLabel=!1)}),G.on("click",function(ie){H._dragging||!1===H._fullLayout.hovermode||(H._hoverdata=[g(ie,H._fullData[ne.index])],f.click(H,I.event))})}function y(G,H,X){var K=d.castOption(G.insidetextfont.color,H.pts);!K&&G._input.textfont&&(K=d.castOption(G._input.textfont.color,H.pts));var ue=d.castOption(G.insidetextfont.family,H.pts)||d.castOption(G.textfont.family,H.pts)||X.family,ae=d.castOption(G.insidetextfont.size,H.pts)||d.castOption(G.textfont.size,H.pts)||X.size;return{color:K||k.contrast(H.color),family:ue,size:ae}}function p(G,H){for(var X,K,ue=0;ue<G.length;ue++)if((K=(X=G[ue][0]).trace).title.text){var ae=K.title.text;K._meta&&(ae=v.templateString(ae,K._meta));var ne=T.tester.append("text").attr("data-notex",1).text(ae).call(T.font,K.title.font).call(s.convertToTspans,H),Q=T.bBox(ne.node(),!0);X.titleBox={width:Q.width,height:Q.height},ne.remove()}}function _(G,H,X){var K=X.r||H.rpx1,ue=H.rInscribed;if(H.startangle===H.stopangle)return{rCenter:1-ue,scale:0,rotate:0,textPosAngle:0};var ae,ne=H.ring,Q=1===ne&&Math.abs(H.startangle-H.stopangle)===2*Math.PI,ie=H.halfangle,le=H.midangle,fe=X.trace.insidetextorientation,he="horizontal"===fe,pe="tangential"===fe,xe="radial"===fe,Ee="auto"===fe,Re=[];if(!Ee){var ke,Te=function(me,ce){if(Oe=(qe=H).stopangle,(be=qe.startangle)>(Ke=me)&&Ke>Oe||be<Ke&&Ke<Oe){var Ae=Math.abs(me-H.startangle),Ne=Math.abs(me-H.stopangle),De=Ae<Ne?Ae:Ne;(ae="tan"===ce?b(G,K,ne,De,0):x(G,K,ne,De,Math.PI/2)).textPosAngle=me,Re.push(ae)}var qe,Ke,be,Oe};if(he||pe){for(ke=4;ke>=-4;ke-=2)Te(Math.PI*ke,"tan");for(ke=4;ke>=-4;ke-=2)Te(Math.PI*(ke+1),"tan")}if(he||xe){for(ke=4;ke>=-4;ke-=2)Te(Math.PI*(ke+1.5),"rad");for(ke=4;ke>=-4;ke-=2)Te(Math.PI*(ke+.5),"rad")}}if(Q||Ee||he){var we=Math.sqrt(G.width*G.width+G.height*G.height);if((ae={scale:ue*K*2/we,rCenter:1-ue,rotate:0}).textPosAngle=(H.startangle+H.stopangle)/2,ae.scale>=1)return ae;Re.push(ae)}(Ee||xe)&&((ae=x(G,K,ne,ie,le)).textPosAngle=(H.startangle+H.stopangle)/2,Re.push(ae)),(Ee||pe)&&((ae=b(G,K,ne,ie,le)).textPosAngle=(H.startangle+H.stopangle)/2,Re.push(ae));for(var je=0,Ce=0,Ie=0;Ie<Re.length;Ie++){var ge=Re[Ie].scale;if(Ce<ge&&(Ce=ge,je=Ie),!Ee&&Ce>=1)break}return Re[je]}function x(G,H,X,K,ue){H=Math.max(0,H-2*u);var ae=G.width/G.height,ne=D(ae,K,H,X);return{scale:2*ne/G.height,rCenter:M(ae,ne/H),rotate:m(ue)}}function b(G,H,X,K,ue){H=Math.max(0,H-2*u);var ae=G.height/G.width,ne=D(ae,K,H,X);return{scale:2*ne/G.width,rCenter:M(ae,ne/H),rotate:m(ue+Math.PI/2)}}function M(G,H){return Math.cos(H)-G*H}function m(G){return(180/Math.PI*G+720)%180-90}function D(G,H,X,K){var ue=G+1/(2*Math.tan(H));return X*Math.min(1/(Math.sqrt(ue*ue+.5)+ue),K/(Math.sqrt(G*G+K/2)+G))}function S(G,H){return G.v!==H.vTotal||H.trace.hole?Math.min(1/(1+1/Math.sin(G.halfangle)),G.ring/2):1}function O(G,H){var X=H.pxmid[0],K=H.pxmid[1],ue=G.width/2,ae=G.height/2;return X<0&&(ue*=-1),K<0&&(ae*=-1),{scale:1,rCenter:1,rotate:0,x:ue+Math.abs(ae)*(ue>0?1:-1)/2,y:ae/(1+X*X/(K*K)),outside:!0}}function P(G,H){var X,K,ue,ae=G.trace,ne={x:G.cx,y:G.cy},Q={tx:0,ty:0};Q.ty+=ae.title.font.size,ue=F(ae),-1!==ae.title.position.indexOf("top")?(ne.y-=(1+ue)*G.r,Q.ty-=G.titleBox.height):-1!==ae.title.position.indexOf("bottom")&&(ne.y+=(1+ue)*G.r);var ie,le=G.r/(void 0===(ie=G.trace.aspectratio)?1:ie),fe=H.w*(ae.domain.x[1]-ae.domain.x[0])/2;return-1!==ae.title.position.indexOf("left")?(fe+=le,ne.x-=(1+ue)*le,Q.tx+=G.titleBox.width/2):-1!==ae.title.position.indexOf("center")?fe*=2:-1!==ae.title.position.indexOf("right")&&(fe+=le,ne.x+=(1+ue)*le,Q.tx-=G.titleBox.width/2),X=fe/G.titleBox.width,K=R(G,H)/G.titleBox.height,{x:ne.x,y:ne.y,scale:Math.min(X,K),tx:Q.tx,ty:Q.ty}}function R(G,H){var X=G.trace;return Math.min(G.titleBox.height,H.h*(X.domain.y[1]-X.domain.y[0])/2)}function F(G){var H,X=G.pull;if(!X)return 0;if(Array.isArray(X))for(X=0,H=0;H<G.pull.length;H++)G.pull[H]>X&&(X=G.pull[H]);return X}function B(G,H){for(var X=[],K=0;K<G.length;K++){var ue=G[K][0],ae=ue.trace,ne=ae.domain,Q=H.w*(ne.x[1]-ne.x[0]),ie=H.h*(ne.y[1]-ne.y[0]);ae.title.text&&"middle center"!==ae.title.position&&(ie-=R(ue,H));var fe=ie/2;"funnelarea"!==ae.type||ae.scalegroup||(fe/=ae.aspectratio),ue.r=Math.min(Q/2,fe)/(1+F(ae)),ue.cx=H.l+H.w*(ae.domain.x[1]+ae.domain.x[0])/2,ue.cy=H.t+H.h*(1-ae.domain.y[0])-ie/2,ae.title.text&&-1!==ae.title.position.indexOf("bottom")&&(ue.cy-=R(ue,H)),ae.scalegroup&&-1===X.indexOf(ae.scalegroup)&&X.push(ae.scalegroup)}!function(he,pe){for(var xe,Ee,Re,ke=0;ke<pe.length;ke++){var Te=1/0,we=pe[ke];for(Ee=0;Ee<he.length;Ee++)if((Re=(xe=he[Ee][0]).trace).scalegroup===we){var je;if("pie"===Re.type)je=xe.r*xe.r;else if("funnelarea"===Re.type){var Ce,Ie;Re.aspectratio>1?Ie=(Ce=xe.r)/Re.aspectratio:Ce=(Ie=xe.r)*Re.aspectratio,je=(Ce*=(1+Re.baseratio)/2)*Ie}Te=Math.min(Te,je/xe.vTotal)}for(Ee=0;Ee<he.length;Ee++)if((Re=(xe=he[Ee][0]).trace).scalegroup===we){var ge=Te*xe.vTotal;"funnelarea"===Re.type&&(ge/=(1+Re.baseratio)/2,ge/=Re.aspectratio),xe.r=Math.sqrt(ge)}}}(G,X)}function J(G,H){return[G*Math.sin(H),-G*Math.cos(H)]}function z(G,H,X){var je,K=G._fullLayout,ue=X.trace,ae=ue.texttemplate,ne=ue.textinfo;if(!ae&&ne&&"none"!==ne){var Q,ie=ne.split("+"),le=function(je){return-1!==ie.indexOf(je)},fe=le("label"),he=le("text"),pe=le("value"),xe=le("percent"),Ee=K.separators;if(Q=fe?[H.label]:[],he){var Re=d.getFirstFilled(ue.text,H.pts);h(Re)&&Q.push(Re)}pe&&Q.push(d.formatPieValue(H.v,Ee)),xe&&Q.push(d.formatPiePercent(H.v/X.vTotal,Ee)),H.text=Q.join("<br>")}if(ae){var ke=v.castOption(ue,H.i,"texttemplate");if(ke){var Te={label:(je=H).label,value:je.v,valueLabel:d.formatPieValue(je.v,K.separators),percent:je.v/X.vTotal,percentLabel:d.formatPiePercent(je.v/X.vTotal,K.separators),color:je.color,text:je.text,customdata:v.castOption(ue,je.i,"customdata")},we=d.getFirstFilled(ue.text,H.pts);(h(we)||""===we)&&(Te.text=we),H.text=v.texttemplateString(ke,Te,G._fullLayout._d3locale,Te,ue._meta||{})}else H.text=""}}function $(G,H){var X=G.rotate*Math.PI/180,K=Math.cos(X),ue=Math.sin(X),ae=(H.left+H.right)/2,ne=(H.top+H.bottom)/2;G.textX=ae*K-ne*ue,G.textY=ae*ue+ne*K,G.noCenter=!0}se.exports={plot:function(G,H){var X=G._context.staticPlot,K=G._fullLayout,ue=K._size;l("pie",K),p(H,G),B(H,ue);var ae=v.makeTraceGroups(K._pielayer,H,"trace").each(function(ne){var Q=I.select(this),ie=ne[0],le=ie.trace;(function(fe){var he,pe,xe,Ee=fe[0],Re=Ee.r,ke=Ee.trace,Te=d.getRotationAngle(ke.rotation),we=2*Math.PI/Ee.vTotal,je="px0",Ce="px1";if("counterclockwise"===ke.direction){for(he=0;he<fe.length&&fe[he].hidden;he++);if(he===fe.length)return;Te+=we*fe[he].v,we*=-1,je="px1",Ce="px0"}for(xe=J(Re,Te),he=0;he<fe.length;he++)(pe=fe[he]).hidden||(pe[je]=xe,pe.startangle=Te,pe.pxmid=J(Re,Te+=we*pe.v/2),pe.midangle=Te,xe=J(Re,Te+=we*pe.v/2),pe.stopangle=Te,pe[Ce]=xe,pe.largeArc=pe.v>Ee.vTotal/2?1:0,pe.halfangle=Math.PI*Math.min(pe.v/Ee.vTotal,.5),pe.ring=1-ke.hole,pe.rInscribed=S(pe,Ee))})(ne),Q.attr("stroke-linejoin","round"),Q.each(function(){var fe=I.select(this).selectAll("g.slice").data(ne);fe.enter().append("g").classed("slice",!0),fe.exit().remove();var he=[[[],[]],[[],[]]],pe=!1;fe.each(function(Ce,Ie){if(Ce.hidden)I.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=le.index,he[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var ge=ie.cx,me=ie.cy,ce=I.select(this),Ae=ce.selectAll("path.surface").data([Ce]);if(Ae.enter().append("path").classed("surface",!0).style({"pointer-events":X?"none":"all"}),ce.call(w,G,ne),le.pull){var Ne=+d.castOption(le.pull,Ce.pts)||0;Ne>0&&(ge+=Ne*Ce.pxmid[0],me+=Ne*Ce.pxmid[1])}Ce.cxFinal=ge,Ce.cyFinal=me;var De=le.hole;if(Ce.v===ie.vTotal){var qe="M"+(ge+Ce.px0[0])+","+(me+Ce.px0[1])+Ue(Ce.px0,Ce.pxmid,!0,1)+Ue(Ce.pxmid,Ce.px0,!0,1)+"Z";Ae.attr("d",De?"M"+(ge+De*Ce.px0[0])+","+(me+De*Ce.px0[1])+Ue(Ce.px0,Ce.pxmid,!1,De)+Ue(Ce.pxmid,Ce.px0,!1,De)+"Z"+qe:qe)}else{var Ke=Ue(Ce.px0,Ce.px1,!0,1);if(De){var be=1-De;Ae.attr("d","M"+(ge+De*Ce.px1[0])+","+(me+De*Ce.px1[1])+Ue(Ce.px1,Ce.px0,!1,De)+"l"+be*Ce.px0[0]+","+be*Ce.px0[1]+Ke+"Z")}else Ae.attr("d","M"+ge+","+me+"l"+Ce.px0[0]+","+Ce.px0[1]+Ke+"Z")}z(G,Ce,ie);var Oe=d.castOption(le.textposition,Ce.pts),Le=ce.selectAll("g.slicetext").data(Ce.text&&"none"!==Oe?[0]:[]);Le.enter().append("g").classed("slicetext",!0),Le.exit().remove(),Le.each(function(){var Dt,vt,mt,Ze=v.ensureSingle(I.select(this),"text","",function(Dt){Dt.attr("data-notex",1)}),We=v.ensureUniformFontSize(G,"outside"===Oe?(mt=K.font,{color:d.castOption((Dt=le).outsidetextfont.color,(vt=Ce).pts)||d.castOption(Dt.textfont.color,vt.pts)||mt.color,family:d.castOption(Dt.outsidetextfont.family,vt.pts)||d.castOption(Dt.textfont.family,vt.pts)||mt.family,size:d.castOption(Dt.outsidetextfont.size,vt.pts)||d.castOption(Dt.textfont.size,vt.pts)||mt.size}):y(le,Ce,K.font));Ze.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(T.font,We).call(s.convertToTspans,G);var et,nt=T.bBox(Ze.node());if("outside"===Oe)et=O(nt,Ce);else if(et=_(nt,Ce,ie),"auto"===Oe&&et.scale<1){var ct=v.ensureUniformFontSize(G,le.outsidetextfont);Ze.call(T.font,ct),et=O(nt=T.bBox(Ze.node()),Ce)}var yt=et.textPosAngle,ut=void 0===yt?Ce.pxmid:J(ie.r,yt);if(et.targetX=ge+ut[0]*et.rCenter+(et.x||0),et.targetY=me+ut[1]*et.rCenter+(et.y||0),$(et,nt),et.outside){var Ct=et.targetY;Ce.yLabelMin=Ct-nt.height/2,Ce.yLabelMid=Ct,Ce.yLabelMax=Ct+nt.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,pe=!0}et.fontSize=We.size,o(le.type,et,K),ne[Ie].transform=et,v.setTransormAndDisplay(Ze,et)})}function Ue(Ze,We,et,nt){return"a"+nt*ie.r+","+nt*ie.r+" 0 "+Ce.largeArc+(et?" 1 ":" 0 ")+nt*(We[0]-Ze[0])+","+nt*(We[1]-Ze[1])}});var Ie,xe=I.select(this).selectAll("g.titletext").data(le.title.text?[0]:[]);if(xe.enter().append("g").classed("titletext",!0),xe.exit().remove(),xe.each(function(){var Ce,me,ce,Ie=v.ensureSingle(I.select(this),"text","",function(me){me.attr("data-notex",1)}),ge=le.title.text;le._meta&&(ge=v.templateString(ge,le._meta)),Ie.text(ge).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(T.font,le.title.font).call(s.convertToTspans,G),Ce="middle center"===le.title.position?(me=ie,ce=Math.sqrt(me.titleBox.width*me.titleBox.width+me.titleBox.height*me.titleBox.height),{x:me.cx,y:me.cy,scale:me.trace.hole*me.r*2/ce,tx:0,ty:-me.titleBox.height/2+me.trace.title.font.size}):P(ie,ue),Ie.attr("transform",i(Ce.x,Ce.y)+c(Math.min(1,Ce.scale))+i(Ce.tx,Ce.ty))}),pe&&function(Ce,Ie){var ge,me,ce,Ae,Ne,De,qe,Ke,be,Oe,Le,Ue,Ze;function We(yt,ut){return yt.pxmid[1]-ut.pxmid[1]}function et(yt,ut){return ut.pxmid[1]-yt.pxmid[1]}function nt(yt,ut){ut||(ut={});var Ct,Dt,vt,mt,Lt=ut.labelExtraY+(me?ut.yLabelMax:ut.yLabelMin),Ft=me?yt.yLabelMin:yt.yLabelMax,Rt=me?yt.yLabelMax:yt.yLabelMin,Wt=yt.cyFinal+Ne(yt.px0[1],yt.px1[1]),Ht=Lt-Ft;if(Ht*qe>0&&(yt.labelExtraY=Ht),Array.isArray(Ie.pull))for(Dt=0;Dt<Oe.length;Dt++)(vt=Oe[Dt])===yt||(d.castOption(Ie.pull,yt.pts)||0)>=(d.castOption(Ie.pull,vt.pts)||0)||((yt.pxmid[1]-vt.pxmid[1])*qe>0?(Ht=vt.cyFinal+Ne(vt.px0[1],vt.px1[1])-Ft-yt.labelExtraY)*qe>0&&(yt.labelExtraY+=Ht):(Rt+yt.labelExtraY-Wt)*qe>0&&(Ct=3*De*Math.abs(Dt-Oe.indexOf(yt)),(mt=vt.cxFinal+Ae(vt.px0[0],vt.px1[0])+Ct-(yt.cxFinal+yt.pxmid[0])-yt.labelExtraX)*De>0&&(yt.labelExtraX+=mt)))}for(me=0;me<2;me++)for(ce=me?We:et,Ne=me?Math.max:Math.min,qe=me?1:-1,ge=0;ge<2;ge++){for(Ae=ge?Math.max:Math.min,De=ge?1:-1,(Ke=Ce[me][ge]).sort(ce),Oe=(be=Ce[1-me][ge]).concat(Ke),Ue=[],Le=0;Le<Ke.length;Le++)void 0!==Ke[Le].yLabelMid&&Ue.push(Ke[Le]);for(Ze=!1,Le=0;me&&Le<be.length;Le++)if(void 0!==be[Le].yLabelMid){Ze=be[Le];break}for(Le=0;Le<Ue.length;Le++){var ct=Le&&Ue[Le-1];Ze&&!Le&&(ct=Ze),nt(Ue[Le],ct)}}}(he,le),Ie=le,fe.each(function(ge){var me=I.select(this);if(ge.labelExtraX||ge.labelExtraY){var ce=me.select("g.slicetext text");ge.transform.targetX+=ge.labelExtraX,ge.transform.targetY+=ge.labelExtraY,v.setTransormAndDisplay(ce,ge.transform);var Ae=ge.cxFinal+ge.pxmid[0],Ne="M"+Ae+","+(ge.cyFinal+ge.pxmid[1]),De=(ge.yLabelMax-ge.yLabelMin)*(ge.pxmid[0]<0?-1:1)/4;if(ge.labelExtraX){var qe=ge.labelExtraX*ge.pxmid[1]/ge.pxmid[0],Ke=ge.yLabelMid+ge.labelExtraY-(ge.cyFinal+ge.pxmid[1]);Math.abs(qe)>Math.abs(Ke)?Ne+="l"+Ke*ge.pxmid[0]/ge.pxmid[1]+","+Ke+"H"+(Ae+ge.labelExtraX+De):Ne+="l"+ge.labelExtraX+","+qe+"v"+(Ke-qe)+"h"+De}else Ne+="V"+(ge.yLabelMid+ge.labelExtraY)+"h"+De;v.ensureSingle(me,"path","textline").call(k.stroke,Ie.outsidetextfont.color).attr({"stroke-width":Math.min(2,Ie.outsidetextfont.size/8),d:Ne,fill:"none"})}else me.select("path.textline").remove()}),pe&&le.automargin){var Ee=T.bBox(Q.node()),Re=le.domain,we=(ue.w*(Re.x[1]-Re.x[0])*.5-ie.r)/ue.w,je=(ue.h*(Re.y[1]-Re.y[0])*.5-ie.r)/ue.h;C.autoMargin(G,"pie."+le.uid+".automargin",{xl:Re.x[0]-we,xr:Re.x[1]+we,yb:Re.y[0]-je,yt:Re.y[1]+je,l:Math.max(ie.cx-ie.r-Ee.left,0),r:Math.max(Ee.right-(ie.cx+ie.r),0),b:Math.max(Ee.bottom-(ie.cy+ie.r),0),t:Math.max(ie.cy-ie.r-Ee.top,0),pad:5})}})});setTimeout(function(){ae.selectAll("tspan").each(function(){var ne=I.select(this);ne.attr("dy")&&ne.attr("dy",ne.attr("dy"))})},0)},formatSliceLabel:z,transformInsideText:_,determineInsideTextFont:y,positionTitleOutside:P,prerenderTitles:p,layoutAreas:B,attachFxHandlers:w,computeTransform:$}},68357:function(se,U,r){"use strict";var I=r(39898),C=r(63463),f=r(72597).resizeText;se.exports=function(k){var T=k._fullLayout._pielayer.selectAll(".trace");f(k,T,"pie"),T.each(function(v){var c=v[0].trace,i=I.select(this);i.style({opacity:c.opacity}),i.selectAll("path.surface").each(function(s){I.select(this).call(C,s,c,k)})})}},63463:function(se,U,r){"use strict";var I=r(7901),C=r(53581).castOption,f=r(22209);se.exports=function(k,T,v,c){var i=v.marker.line,s=C(i.color,T.pts)||I.defaultLine,a=C(i.width,T.pts)||0;k.call(f,T,v,c).style("stroke-width",a).call(I.stroke,s)}},10959:function(se,U,r){"use strict";var I=r(82196);se.exports={x:I.x,y:I.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:I.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function(se,U,r){"use strict";var I=r(9330).gl_pointcloud2d,C=r(78614),f=r(71739).findExtremes,k=r(34603);function T(c,i){this.scene=c,this.uid=i,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=I(c.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var v=T.prototype;v.handlePick=function(c){var i=this.idToIndex[c.pointId];return{trace:this,dataCoord:c.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*i],this.pickXYData[2*i+1]]:[this.pickXData[i],this.pickYData[i]],textLabel:Array.isArray(this.textLabels)?this.textLabels[i]:this.textLabels,color:this.color,name:this.name,pointIndex:i,hoverinfo:this.hoverinfo}},v.update=function(c){this.index=c.index,this.textLabels=c.text,this.name=c.name,this.hoverinfo=c.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(c),this.color=k(c,{})},v.updateFast=function(c){var i,s,a,o,l,u,d=this.xData=this.pickXData=c.x,g=this.yData=this.pickYData=c.y,h=this.pickXYData=c.xy,y=c.indices,p=this.bounds;if(h){if(a=h,i=h.length>>>1,c.xbounds&&c.ybounds)p[0]=c.xbounds[0],p[2]=c.xbounds[1],p[1]=c.ybounds[0],p[3]=c.ybounds[1];else for(u=0;u<i;u++)l=a[2*u+1],(o=a[2*u])<p[0]&&(p[0]=o),o>p[2]&&(p[2]=o),l<p[1]&&(p[1]=l),l>p[3]&&(p[3]=l);if(y)s=y;else for(s=new Int32Array(i),u=0;u<i;u++)s[u]=u}else for(i=d.length,a=new Float32Array(2*i),s=new Int32Array(i),u=0;u<i;u++)o=d[u],l=g[u],s[u]=u,a[2*u]=o,a[2*u+1]=l,o<p[0]&&(p[0]=o),o>p[2]&&(p[2]=o),l<p[1]&&(p[1]=l),l>p[3]&&(p[3]=l);this.idToIndex=s,this.pointcloudOptions.idToIndex=s,this.pointcloudOptions.positions=a;var _=C(c.marker.color),x=C(c.marker.border.color),b=c.opacity*c.marker.opacity;_[3]*=b,this.pointcloudOptions.color=_;var M=c.marker.blend;null===M&&(M=d.length<100||g.length<100),this.pointcloudOptions.blend=M,x[3]*=b,this.pointcloudOptions.borderColor=x;var m=c.marker.sizemin,D=Math.max(c.marker.sizemax,c.marker.sizemin);this.pointcloudOptions.sizeMin=m,this.pointcloudOptions.sizeMax=D,this.pointcloudOptions.areaRatio=c.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var S=this.scene.xaxis,O=this.scene.yaxis,P=D/2||.5;c._extremes[S._id]=f(S,[p[0],p[2]],{ppad:P}),c._extremes[O._id]=f(O,[p[1],p[3]],{ppad:P})},v.dispose=function(){this.pointcloud.dispose()},se.exports=function(c,i){var s=new T(c,i.uid);return s.update(i),s}},33876:function(se,U,r){"use strict";var I=r(71828),C=r(10959);se.exports=function(f,k,T){function v(c,i){return I.coerce(f,k,C,c,i)}v("x"),v("y"),v("xbounds"),v("ybounds"),f.xy&&f.xy instanceof Float32Array&&(k.xy=f.xy),f.indices&&f.indices instanceof Int32Array&&(k.indices=f.indices),v("text"),v("marker.color",T),v("marker.opacity"),v("marker.blend"),v("marker.sizemin"),v("marker.sizemax"),v("marker.border.color",T),v("marker.border.arearatio"),k._length=null}},20593:function(se,U,r){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),se.exports={attributes:r(10959),supplyDefaults:r(33876),calc:r(36563),plot:r(42743),moduleType:"trace",name:"pointcloud",basePlotModule:r(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function(se,U,r){"use strict";var I=r(41940),C=r(9012),f=r(22399),k=r(77914),T=r(27670).Y,v=r(5386).fF,c=r(50693),i=r(44467).templatedArray,s=r(12663).descriptionOnlyNumbers,a=r(1426).extendFlat,o=r(30962).overrideAll;(se.exports=o({hoverinfo:a({},C.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:k.hoverlabel,domain:T({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:s("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:I({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:v({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:f.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:k.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),colorscales:i("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:a(c().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function(se,U,r){"use strict";var I=r(30962).overrideAll,C=r(27659).a0,f=r(60436),k=r(528),T=r(6964),v=r(28569),c=r(47322).prepSelect,i=r(71828),s=r(73972),a="sankey";function o(l,u){var d=l._fullData[u],g=l._fullLayout,h=g.dragmode,y=d._bgRect;if(y&&"pan"!==h&&"zoom"!==h){T(y,"pan"===g.dragmode?"move":"crosshair");var p={_id:"x",c2p:i.identity,_offset:d._sankey.translateX,_length:d._sankey.width},_={_id:"y",c2p:i.identity,_offset:d._sankey.translateY,_length:d._sankey.height},x={gd:l,element:y.node(),plotinfo:{id:u,xaxis:p,yaxis:_,fillRangeItems:i.noop},subplot:u,xaxes:[p],yaxes:[_],doneFnCompleted:function(b){var M,m=l._fullData[u],D=m.node.groups.slice(),S=[];function O(B){for(var J=m._sankey.graph.nodes,z=0;z<J.length;z++)if(J[z].pointNumber===B)return J[z]}for(var P=0;P<b.length;P++){var R=O(b[P].pointNumber);if(R)if(R.group){for(var F=0;F<R.childrenNodes.length;F++)S.push(R.childrenNodes[F].pointNumber);D[R.pointNumber-m.node._count]=!1}else S.push(R.pointNumber)}M=D.filter(Boolean).concat([S]),s.call("_guiRestyle",l,{"node.groups":[M]},u)},prepFn:function(b,M,m){c(b,M,m,x,h)}};v.init(x)}}U.name=a,U.baseLayoutAttrOverrides=I({hoverlabel:k.hoverlabel},"plot","nested"),U.plot=function(l){var u=C(l.calcdata,a)[0];f(l,u),U.updateFx(l)},U.clean=function(l,u,d,g){var h=g._has&&g._has(a),w=u._has&&u._has(a);h&&!w&&(g._paperdiv.selectAll(".sankey").remove(),g._paperdiv.selectAll(".bgsankey").remove())},U.updateFx=function(l){for(var u=0;u<l._fullData.length;u++)o(l,u)}},92930:function(se,U,r){"use strict";var I=r(68664),C=r(71828),f=r(28984).wrap,k=C.isArrayOrTypedArray,T=C.isIndex,v=r(21081);se.exports=function(c,i){var s=function(a){var o,l=a.node,u=a.link,d=[],g=k(u.color),h=k(u.customdata),w={},y={},p=u.colorscales.length;for(o=0;o<p;o++){var _=u.colorscales[o],x=v.extractScale(_,{cLetter:"c"}),b=v.makeColorScaleFunc(x);y[_.label]=b}var M=0;for(o=0;o<u.value.length;o++)u.source[o]>M&&(M=u.source[o]),u.target[o]>M&&(M=u.target[o]);var m,D=M+1;a.node._count=D;var S=a.node.groups,O={};for(o=0;o<S.length;o++){var P=S[o];for(m=0;m<P.length;m++){var R=P[m],F=D+o;O.hasOwnProperty(R)?C.warn("Node "+R+" is already part of a group."):O[R]=F}}var B={source:[],target:[]};for(o=0;o<u.value.length;o++){var J=u.value[o],z=u.source[o],$=u.target[o];if(J>0&&T(z,D)&&T($,D)&&(!O.hasOwnProperty(z)||!O.hasOwnProperty($)||O[z]!==O[$])){O.hasOwnProperty($)&&($=O[$]),O.hasOwnProperty(z)&&(z=O[z]),w[z=+z]=w[$=+$]=!0;var G="";u.label&&u.label[o]&&(G=u.label[o]);var H=null;G&&y.hasOwnProperty(G)&&(H=y[G]),d.push({pointNumber:o,label:G,color:g?u.color[o]:u.color,customdata:h?u.customdata[o]:u.customdata,concentrationscale:H,source:z,target:$,value:+J}),B.source.push(z),B.target.push($)}}var X=D+S.length,K=k(l.color),ue=k(l.customdata),ae=[];for(o=0;o<X;o++)w[o]&&ae.push({group:o>D-1,childrenNodes:[],pointNumber:o,label:l.label[o],color:K?l.color[o]:l.color,customdata:ue?l.customdata[o]:l.customdata});var Q=!1;return function(ie,le,fe){for(var he=C.init2dArray(ie,0),pe=0;pe<Math.min(le.length,fe.length);pe++)if(C.isIndex(le[pe],ie)&&C.isIndex(fe[pe],ie)){if(le[pe]===fe[pe])return!0;he[le[pe]].push(fe[pe])}return I(he).components.some(function(xe){return xe.length>1})}(X,B.source,B.target)&&(Q=!0),{circular:Q,links:d,nodes:ae,groups:S,groupLookup:O}}(i);return f({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},85247:function(se){"use strict";se.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function(se,U,r){"use strict";var I=r(71828),C=r(39953),f=r(7901),k=r(84267),T=r(27670).c,v=r(38048),c=r(44467),i=r(85501);function s(a,o){function l(u,d){return I.coerce(a,o,C.link.colorscales,u,d)}l("label"),l("cmin"),l("cmax"),l("colorscale")}se.exports=function(a,o,l,u){function d(D,S){return I.coerce(a,o,C,D,S)}var g=I.extendDeep(u.hoverlabel,a.hoverlabel),h=a.node,w=c.newContainer(o,"node");function y(D,S){return I.coerce(h,w,C.node,D,S)}y("label"),y("groups"),y("x"),y("y"),y("pad"),y("thickness"),y("line.color"),y("line.width"),y("hoverinfo",a.hoverinfo),v(h,w,y,g),y("hovertemplate");var p=u.colorway;y("color",w.label.map(function(D,S){return f.addOpacity(p[S%p.length],.8)})),y("customdata");var _=a.link||{},x=c.newContainer(o,"link");function b(D,S){return I.coerce(_,x,C.link,D,S)}b("label"),b("arrowlen"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",a.hoverinfo),v(_,x,b,g),b("hovertemplate");var M,m=k(u.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",I.repeat(m,x.value.length)),b("customdata"),i(_,x,{name:"colorscales",handleItemDefaults:s}),T(o,u,d),d("orientation"),d("valueformat"),d("valuesuffix"),w.x.length&&w.y.length&&(M="freeform"),d("arrangement",M),I.coerceFont(d,"textfont",I.extendFlat({},u.font)),o._length=null}},29396:function(se,U,r){"use strict";se.exports={attributes:r(39953),supplyDefaults:r(26857),calc:r(92930),plot:r(60436),moduleType:"trace",name:"sankey",basePlotModule:r(75536),selectPoints:r(84564),categories:["noOpacity"],meta:{}}},60436:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=C.numberFormat,k=r(3393),T=r(30211),v=r(7901),c=r(85247).cn,i=C._;function s(_){return""!==_}function a(_,x){return _.filter(function(b){return b.key===x.traceId})}function o(_,x){I.select(_).select("path").style("fill-opacity",x),I.select(_).select("rect").style("fill-opacity",x)}function l(_){I.select(_).select("text.name").style("fill","black")}function u(_){return function(x){return-1!==_.node.sourceLinks.indexOf(x.link)||-1!==_.node.targetLinks.indexOf(x.link)}}function d(_){return function(x){return-1!==x.node.sourceLinks.indexOf(_.link)||-1!==x.node.targetLinks.indexOf(_.link)}}function g(_,x,b){x&&b&&a(b,x).selectAll("."+c.sankeyLink).filter(u(x)).call(w.bind(0,x,b,!1))}function h(_,x,b){x&&b&&a(b,x).selectAll("."+c.sankeyLink).filter(u(x)).call(y.bind(0,x,b,!1))}function w(_,x,b,M){var m=M.datum().link.label;M.style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4}),m&&a(x,_).selectAll("."+c.sankeyLink).filter(function(D){return D.link.label===m}).style("fill-opacity",function(D){if(!D.link.concentrationscale)return.4}),b&&a(x,_).selectAll("."+c.sankeyNode).filter(d(_)).call(g)}function y(_,x,b,M){var m=M.datum().link.label;M.style("fill-opacity",function(D){return D.tinyColorAlpha}),m&&a(x,_).selectAll("."+c.sankeyLink).filter(function(D){return D.link.label===m}).style("fill-opacity",function(D){return D.tinyColorAlpha}),b&&a(x,_).selectAll(c.sankeyNode).filter(d(_)).call(h)}function p(_,x){var M=C.nestedProperty(_.hoverlabel||{},x).get();return!Array.isArray(M)&&M}se.exports=function(_,x){for(var b=_._fullLayout,M=b._paper,m=b._size,D=0;D<_._fullData.length;D++)if(_._fullData[D].visible&&_._fullData[D].type===c.sankey&&!_._fullData[D]._viewInitial){var S=_._fullData[D].node;_._fullData[D]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var O=i(_,"source:")+" ",P=i(_,"target:")+" ",R=i(_,"concentration:")+" ",F=i(_,"incoming flow count:")+" ",B=i(_,"outgoing flow count:")+" ";k(_,M,x,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{linkEvents:{hover:function(J,z,$){!1!==_._fullLayout.hovermode&&(I.select(J).call(w.bind(0,z,$,!0)),"skip"!==z.link.trace.link.hoverinfo&&(z.link.fullData=z.link.trace,_.emit("plotly_hover",{event:I.event,points:[z.link]})))},follow:function(J,z){if(!1!==_._fullLayout.hovermode){var $=z.link.trace.link;if("none"!==$.hoverinfo&&"skip"!==$.hoverinfo){for(var G=[],H=0,X=0;X<z.flow.links.length;X++){var K=z.flow.links[X];if("closest"!==_._fullLayout.hovermode||z.link.pointNumber===K.pointNumber){z.link.pointNumber===K.pointNumber&&(H=X),K.fullData=K.trace,$=z.link.trace.link;var ue=ne(K),ae={valueLabel:f(z.valueFormat)(K.value)+z.valueSuffix};G.push({x:ue[0],y:ue[1],name:ae.valueLabel,text:[K.label||"",O+K.source.label,P+K.target.label,K.concentrationscale?R+f("%0.2f")(K.flow.labelConcentration):""].filter(s).join("<br>"),color:p($,"bgcolor")||v.addOpacity(K.color,1),borderColor:p($,"bordercolor"),fontFamily:p($,"font.family"),fontSize:p($,"font.size"),fontColor:p($,"font.color"),nameLength:p($,"namelength"),textAlign:p($,"align"),idealAlign:I.event.x<ue[0]?"right":"left",hovertemplate:$.hovertemplate,hovertemplateLabels:ae,eventData:[K]})}}T.loneHover(G,{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:_,anchorIndex:H}).each(function(){z.link.concentrationscale||o(this,.65),l(this)})}}function ne(Q){var ie,le;Q.circular?(ie=(Q.circularPathData.leftInnerExtent+Q.circularPathData.rightInnerExtent)/2,le=Q.circularPathData.verticalFullExtent):(ie=(Q.source.x1+Q.target.x0)/2,le=(Q.y0+Q.y1)/2);var fe=[ie,le];return"v"===Q.trace.orientation&&fe.reverse(),fe[0]+=z.parent.translateX,fe[1]+=z.parent.translateY,fe}},unhover:function(J,z,$){!1!==_._fullLayout.hovermode&&(I.select(J).call(y.bind(0,z,$,!0)),"skip"!==z.link.trace.link.hoverinfo&&(z.link.fullData=z.link.trace,_.emit("plotly_unhover",{event:I.event,points:[z.link]})),T.loneUnhover(b._hoverlayer.node()))},select:function(J,z){var $=z.link;$.originalEvent=I.event,_._hoverdata=[$],T.click(_,{target:!0})}},nodeEvents:{hover:function(J,z,$){!1!==_._fullLayout.hovermode&&(I.select(J).call(g,z,$),"skip"!==z.node.trace.node.hoverinfo&&(z.node.fullData=z.node.trace,_.emit("plotly_hover",{event:I.event,points:[z.node]})))},follow:function(J,z){if(!1!==_._fullLayout.hovermode){var $=z.node.trace.node;if("none"!==$.hoverinfo&&"skip"!==$.hoverinfo){var G=I.select(J).select("."+c.nodeRect),H=_._fullLayout._paperdiv.node().getBoundingClientRect(),X=G.node().getBoundingClientRect(),K=X.left-2-H.left,ue=X.right+2-H.left,ae=X.top+X.height/4-H.top,ne={valueLabel:f(z.valueFormat)(z.node.value)+z.valueSuffix};z.node.fullData=z.node.trace,_._fullLayout._calcInverseTransform(_);var Q=_._fullLayout._invScaleX,le=T.loneHover({x0:Q*K,x1:Q*ue,y:_._fullLayout._invScaleY*ae,name:f(z.valueFormat)(z.node.value)+z.valueSuffix,text:[z.node.label,F+z.node.targetLinks.length,B+z.node.sourceLinks.length].filter(s).join("<br>"),color:p($,"bgcolor")||z.tinyColorHue,borderColor:p($,"bordercolor"),fontFamily:p($,"font.family"),fontSize:p($,"font.size"),fontColor:p($,"font.color"),nameLength:p($,"namelength"),textAlign:p($,"align"),idealAlign:"left",hovertemplate:$.hovertemplate,hovertemplateLabels:ne,eventData:[z.node]},{container:b._hoverlayer.node(),outerContainer:b._paper.node(),gd:_});o(le,.85),l(le)}}},unhover:function(J,z,$){!1!==_._fullLayout.hovermode&&(I.select(J).call(h,z,$),"skip"!==z.node.trace.node.hoverinfo&&(z.node.fullData=z.node.trace,_.emit("plotly_unhover",{event:I.event,points:[z.node]})),T.loneUnhover(b._hoverlayer.node()))},select:function(J,z,$){var G=z.node;G.originalEvent=I.event,_._hoverdata=[G],I.select(J).call(h,z,$),T.click(_,{target:!0})}}})}},3393:function(se,U,r){"use strict";var I=r(49887),C=r(81684).k4,f=r(39898),k=r(30838),T=r(86781),v=r(85247),c=r(84267),i=r(7901),s=r(91424),a=r(71828),o=a.strTranslate,l=a.strRotate,u=r(28984),d=u.keyFun,g=u.repeat,h=u.unwrap,w=r(63893),y=r(73972),p=r(18783),_=p.CAP_SHIFT,x=p.LINE_SPACING;function b(X,K,ue){var ae,ne=h(K),Q=ne.trace,ie=Q.domain,le="h"===Q.orientation,fe=Q.node.pad,he=Q.node.thickness,pe=X.width*(ie.x[1]-ie.x[0]),xe=X.height*(ie.y[1]-ie.y[0]),Ee=ne._nodes,Re=ne._links,ke=ne.circular;(ae=ke?T.sankeyCircular().circularLinkGap(0):k.sankey()).iterations(v.sankeyIterations).size(le?[pe,xe]:[xe,pe]).nodeWidth(he).nodePadding(fe).nodeId(function(De){return De.pointNumber}).nodes(Ee).links(Re);var Te,we,je,Ce=ae();for(var Ie in ae.nodePadding()<fe&&a.warn("node.pad was reduced to ",ae.nodePadding()," to fit within the figure."),ne._groupLookup){var ge,me=parseInt(ne._groupLookup[Ie]);for(Te=0;Te<Ce.nodes.length;Te++)if(Ce.nodes[Te].pointNumber===me){ge=Ce.nodes[Te];break}if(ge){var ce={pointNumber:parseInt(Ie),x0:ge.x0,x1:ge.x1,y0:ge.y0,y1:ge.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ce.nodes.unshift(ce),ge.childrenNodes.unshift(ce)}}if(function(){for(Te=0;Te<Ce.nodes.length;Te++){var De,qe,Ke=Ce.nodes[Te],be={};for(we=0;we<Ke.targetLinks.length;we++)De=(qe=Ke.targetLinks[we]).source.pointNumber+":"+qe.target.pointNumber,be.hasOwnProperty(De)||(be[De]=[]),be[De].push(qe);var Oe=Object.keys(be);for(we=0;we<Oe.length;we++){var Le=be[De=Oe[we]],Ue=0,Ze={};for(je=0;je<Le.length;je++)Ze[(qe=Le[je]).label]||(Ze[qe.label]=0),Ze[qe.label]+=qe.value,Ue+=qe.value;for(je=0;je<Le.length;je++)(qe=Le[je]).flow={value:Ue,labelConcentration:Ze[qe.label]/Ue,concentration:qe.value/Ue,links:Le},qe.concentrationscale&&(qe.color=c(qe.concentrationscale(qe.flow.labelConcentration)))}var We=0;for(we=0;we<Ke.sourceLinks.length;we++)We+=Ke.sourceLinks[we].value;for(we=0;we<Ke.sourceLinks.length;we++)(qe=Ke.sourceLinks[we]).concentrationOut=qe.value/We;var et=0;for(we=0;we<Ke.targetLinks.length;we++)et+=Ke.targetLinks[we].value;for(we=0;we<Ke.targetLinks.length;we++)(qe=Ke.targetLinks[we]).concenrationIn=qe.value/et}}(),Q.node.x.length&&Q.node.y.length){for(Te=0;Te<Math.min(Q.node.x.length,Q.node.y.length,Ce.nodes.length);Te++)if(Q.node.x[Te]&&Q.node.y[Te]){var Ae=[Q.node.x[Te]*pe,Q.node.y[Te]*xe];Ce.nodes[Te].x0=Ae[0]-he/2,Ce.nodes[Te].x1=Ae[0]+he/2;var Ne=Ce.nodes[Te].y1-Ce.nodes[Te].y0;Ce.nodes[Te].y0=Ae[1]-Ne/2,Ce.nodes[Te].y1=Ae[1]+Ne/2}"snap"===Q.arrangement&&function(De){var qe,Ke,be=De.map(function(We,et){return{x0:We.x0,index:et}}).sort(function(We,et){return We.x0-et.x0}),Oe=[],Le=-1,Ue=-1/0;for(Te=0;Te<be.length;Te++){var Ze=De[be[Te].index];Ze.x0>Ue+he&&(Le+=1,qe=Ze.x0),Ue=Ze.x0,Oe[Le]||(Oe[Le]=[]),Oe[Le].push(Ze),Ze.x0+=Ke=qe-Ze.x0,Ze.x1+=Ke}return Oe}(Ee=Ce.nodes).forEach(function(De){var qe,Ke,be,Oe=0,Le=De.length;for(De.sort(function(Ue,Ze){return Ue.y0-Ze.y0}),be=0;be<Le;++be)(qe=De[be]).y0>=Oe||(Ke=Oe-qe.y0)>1e-6&&(qe.y0+=Ke,qe.y1+=Ke),Oe=qe.y1+fe}),ae.update(Ce)}return{circular:ke,key:ue,trace:Q,guid:a.randstr(),horizontal:le,width:pe,height:xe,nodePad:Q.node.pad,nodeLineColor:Q.node.line.color,nodeLineWidth:Q.node.line.width,linkLineColor:Q.link.line.color,linkLineWidth:Q.link.line.width,linkArrowLength:Q.link.arrowlen,valueFormat:Q.valueformat,valueSuffix:Q.valuesuffix,textFont:Q.textfont,translateX:ie.x[0]*X.width+X.margin.l,translateY:X.height-ie.y[1]*X.height+X.margin.t,dragParallel:le?xe:pe,dragPerpendicular:le?pe:xe,arrangement:Q.arrangement,sankey:ae,graph:Ce,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function M(X,K,ue){var ae=c(K.color),ne=K.source.label+"|"+K.target.label+"__"+ue;return K.trace=X.trace,K.curveNumber=X.trace.index,{circular:X.circular,key:ne,traceId:X.key,pointNumber:K.pointNumber,link:K,tinyColorHue:i.tinyRGB(ae),tinyColorAlpha:ae.getAlpha(),linkPath:m,linkLineColor:X.linkLineColor,linkLineWidth:X.linkLineWidth,linkArrowLength:X.linkArrowLength,valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,parent:X,interactionState:X.interactionState,flow:K.flow}}function m(){return function(X){var we,je,Ce,Ie,K=X.linkArrowLength;if(X.link.circular)return je=K,Ce=(we=X.link).width/2,Ie=we.circularPathData,"top"===we.circularLinkType?"M "+(Ie.targetX-je)+" "+(Ie.targetY+Ce)+" L"+(Ie.rightInnerExtent-je)+" "+(Ie.targetY+Ce)+"A"+(Ie.rightLargeArcRadius+Ce)+" "+(Ie.rightSmallArcRadius+Ce)+" 0 0 1 "+(Ie.rightFullExtent-Ce-je)+" "+(Ie.targetY-Ie.rightSmallArcRadius)+"L"+(Ie.rightFullExtent-Ce-je)+" "+Ie.verticalRightInnerExtent+"A"+(Ie.rightLargeArcRadius+Ce)+" "+(Ie.rightLargeArcRadius+Ce)+" 0 0 1 "+(Ie.rightInnerExtent-je)+" "+(Ie.verticalFullExtent-Ce)+"L"+Ie.leftInnerExtent+" "+(Ie.verticalFullExtent-Ce)+"A"+(Ie.leftLargeArcRadius+Ce)+" "+(Ie.leftLargeArcRadius+Ce)+" 0 0 1 "+(Ie.leftFullExtent+Ce)+" "+Ie.verticalLeftInnerExtent+"L"+(Ie.leftFullExtent+Ce)+" "+(Ie.sourceY-Ie.leftSmallArcRadius)+"A"+(Ie.leftLargeArcRadius+Ce)+" "+(Ie.leftSmallArcRadius+Ce)+" 0 0 1 "+Ie.leftInnerExtent+" "+(Ie.sourceY+Ce)+"L"+Ie.sourceX+" "+(Ie.sourceY+Ce)+"L"+Ie.sourceX+" "+(Ie.sourceY-Ce)+"L"+Ie.leftInnerExtent+" "+(Ie.sourceY-Ce)+"A"+(Ie.leftLargeArcRadius-Ce)+" "+(Ie.leftSmallArcRadius-Ce)+" 0 0 0 "+(Ie.leftFullExtent-Ce)+" "+(Ie.sourceY-Ie.leftSmallArcRadius)+"L"+(Ie.leftFullExtent-Ce)+" "+Ie.verticalLeftInnerExtent+"A"+(Ie.leftLargeArcRadius-Ce)+" "+(Ie.leftLargeArcRadius-Ce)+" 0 0 0 "+Ie.leftInnerExtent+" "+(Ie.verticalFullExtent+Ce)+"L"+(Ie.rightInnerExtent-je)+" "+(Ie.verticalFullExtent+Ce)+"A"+(Ie.rightLargeArcRadius-Ce)+" "+(Ie.rightLargeArcRadius-Ce)+" 0 0 0 "+(Ie.rightFullExtent+Ce-je)+" "+Ie.verticalRightInnerExtent+"L"+(Ie.rightFullExtent+Ce-je)+" "+(Ie.targetY-Ie.rightSmallArcRadius)+"A"+(Ie.rightLargeArcRadius-Ce)+" "+(Ie.rightSmallArcRadius-Ce)+" 0 0 0 "+(Ie.rightInnerExtent-je)+" "+(Ie.targetY-Ce)+"L"+(Ie.targetX-je)+" "+(Ie.targetY-Ce)+(je>0?"L"+Ie.targetX+" "+Ie.targetY:"")+"Z":"M "+(Ie.targetX-je)+" "+(Ie.targetY-Ce)+" L"+(Ie.rightInnerExtent-je)+" "+(Ie.targetY-Ce)+"A"+(Ie.rightLargeArcRadius+Ce)+" "+(Ie.rightSmallArcRadius+Ce)+" 0 0 0 "+(Ie.rightFullExtent-Ce-je)+" "+(Ie.targetY+Ie.rightSmallArcRadius)+"L"+(Ie.rightFullExtent-Ce-je)+" "+Ie.verticalRightInnerExtent+"A"+(Ie.rightLargeArcRadius+Ce)+" "+(Ie.rightLargeArcRadius+Ce)+" 0 0 0 "+(Ie.rightInnerExtent-je)+" "+(Ie.verticalFullExtent+Ce)+"L"+Ie.leftInnerExtent+" "+(Ie.verticalFullExtent+Ce)+"A"+(Ie.leftLargeArcRadius+Ce)+" "+(Ie.leftLargeArcRadius+Ce)+" 0 0 0 "+(Ie.leftFullExtent+Ce)+" "+Ie.verticalLeftInnerExtent+"L"+(Ie.leftFullExtent+Ce)+" "+(Ie.sourceY+Ie.leftSmallArcRadius)+"A"+(Ie.leftLargeArcRadius+Ce)+" "+(Ie.leftSmallArcRadius+Ce)+" 0 0 0 "+Ie.leftInnerExtent+" "+(Ie.sourceY-Ce)+"L"+Ie.sourceX+" "+(Ie.sourceY-Ce)+"L"+Ie.sourceX+" "+(Ie.sourceY+Ce)+"L"+Ie.leftInnerExtent+" "+(Ie.sourceY+Ce)+"A"+(Ie.leftLargeArcRadius-Ce)+" "+(Ie.leftSmallArcRadius-Ce)+" 0 0 1 "+(Ie.leftFullExtent-Ce)+" "+(Ie.sourceY+Ie.leftSmallArcRadius)+"L"+(Ie.leftFullExtent-Ce)+" "+Ie.verticalLeftInnerExtent+"A"+(Ie.leftLargeArcRadius-Ce)+" "+(Ie.leftLargeArcRadius-Ce)+" 0 0 1 "+Ie.leftInnerExtent+" "+(Ie.verticalFullExtent-Ce)+"L"+(Ie.rightInnerExtent-je)+" "+(Ie.verticalFullExtent-Ce)+"A"+(Ie.rightLargeArcRadius-Ce)+" "+(Ie.rightLargeArcRadius-Ce)+" 0 0 1 "+(Ie.rightFullExtent+Ce-je)+" "+Ie.verticalRightInnerExtent+"L"+(Ie.rightFullExtent+Ce-je)+" "+(Ie.targetY+Ie.rightSmallArcRadius)+"A"+(Ie.rightLargeArcRadius-Ce)+" "+(Ie.rightSmallArcRadius-Ce)+" 0 0 1 "+(Ie.rightInnerExtent-je)+" "+(Ie.targetY+Ce)+"L"+(Ie.targetX-je)+" "+(Ie.targetY+Ce)+(je>0?"L"+Ie.targetX+" "+Ie.targetY:"")+"Z";var ue=Math.abs((X.link.target.x0-X.link.source.x1)/2);K>ue&&(K=ue);var ae=X.link.source.x1,ne=X.link.target.x0-K,Q=C(ae,ne),ie=Q(.5),le=Q(.5),fe=X.link.y0-X.link.width/2,he=X.link.y0+X.link.width/2,pe=X.link.y1-X.link.width/2,xe=X.link.y1+X.link.width/2,Te=K>0?"L"+(ne+K)+","+(pe+X.link.width/2):"";return"M"+ae+","+fe+"C"+ie+","+fe+" "+le+","+pe+" "+ne+","+pe+(Te+="L"+ne+","+xe)+"C"+le+","+xe+" "+ie+","+he+" "+ae+","+he+"Z"}}function D(X,K){var ue=c(K.color),ae=v.nodePadAcross,ne=X.nodePad/2;K.dx=K.x1-K.x0,K.dy=K.y1-K.y0;var Q=K.dx,ie=Math.max(.5,K.dy),le="node_"+K.pointNumber;return K.group&&(le=a.randstr()),K.trace=X.trace,K.curveNumber=X.trace.index,{index:K.pointNumber,key:le,partOfGroup:K.partOfGroup||!1,group:K.group,traceId:X.key,trace:X.trace,node:K,nodePad:X.nodePad,nodeLineColor:X.nodeLineColor,nodeLineWidth:X.nodeLineWidth,textFont:X.textFont,size:X.horizontal?X.height:X.width,visibleWidth:Math.ceil(Q),visibleHeight:ie,zoneX:-ae,zoneY:-ne,zoneWidth:Q+2*ae,zoneHeight:ie+2*ne,labelY:X.horizontal?K.dy/2+1:K.dx/2+1,left:1===K.originalLayer,sizeAcross:X.width,forceLayouts:X.forceLayouts,horizontal:X.horizontal,darkBackground:ue.getBrightness()<=128,tinyColorHue:i.tinyRGB(ue),tinyColorAlpha:ue.getAlpha(),valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,graph:X.graph,arrangement:X.arrangement,uniqueNodeLabelPathId:[X.guid,X.key,le].join("_"),interactionState:X.interactionState,figure:X}}function S(X){X.attr("transform",function(K){return o(K.node.x0.toFixed(3),K.node.y0.toFixed(3))})}function O(X){X.call(S)}function P(X,K){X.call(O),K.attr("d",m())}function R(X){X.attr("width",function(K){return K.node.x1-K.node.x0}).attr("height",function(K){return K.visibleHeight})}function F(X){return X.link.width>1||X.linkLineWidth>0}function B(X){return o(X.translateX,X.translateY)+(X.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function J(X,K,ue){X.on(".basic",null).on("mouseover.basic",function(ae){ae.interactionState.dragInProgress||ae.partOfGroup||(ue.hover(this,ae,K),ae.interactionState.hovered=[this,ae])}).on("mousemove.basic",function(ae){ae.interactionState.dragInProgress||ae.partOfGroup||(ue.follow(this,ae),ae.interactionState.hovered=[this,ae])}).on("mouseout.basic",function(ae){ae.interactionState.dragInProgress||ae.partOfGroup||(ue.unhover(this,ae,K),ae.interactionState.hovered=!1)}).on("click.basic",function(ae){ae.interactionState.hovered&&(ue.unhover(this,ae,K),ae.interactionState.hovered=!1),ae.interactionState.dragInProgress||ae.partOfGroup||ue.select(this,ae,K)})}function z(X,K,ue,ae){var ne=f.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if("fixed"!==Q.arrangement&&(a.ensureSingle(ae._fullLayout._infolayer,"g","dragcover",function(le){ae._fullLayout._dragCover=le}),a.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,G(Q.node),Q.interactionState.hovered&&(ue.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),"snap"===Q.arrangement)){var ie=Q.traceId+"|"+Q.key;Q.forceLayouts[ie]?Q.forceLayouts[ie].alpha(1):function(le,fe,he,pe){!function(Ee){for(var Re=0;Re<Ee.length;Re++)Ee[Re].y=(Ee[Re].y0+Ee[Re].y1)/2,Ee[Re].x=(Ee[Re].x0+Ee[Re].x1)/2}(he.graph.nodes);var Re,ke,Te,xe=he.graph.nodes.filter(function(Ee){return Ee.originalX===he.node.originalX}).filter(function(Ee){return!Ee.partOfGroup});he.forceLayouts[fe]=I.forceSimulation(xe).alphaDecay(0).force("collide",I.forceCollide().radius(function(Ee){return Ee.dy/2+he.nodePad/2}).strength(1).iterations(v.forceIterations)).force("constrain",(Re=fe,ke=xe,Te=he,function(){for(var we=0,je=0;je<ke.length;je++){var Ce=ke[je];Ce===Te.interactionState.dragInProgress?(Ce.x=Ce.lastDraggedX,Ce.y=Ce.lastDraggedY):(Ce.vx=(Ce.originalX-Ce.x)/v.forceTicksPerFrame,Ce.y=Math.min(Te.size-Ce.dy/2,Math.max(Ce.dy/2,Ce.y))),we=Math.max(we,Math.abs(Ce.vx),Math.abs(Ce.vy))}!Te.interactionState.dragInProgress&&we<.1&&Te.forceLayouts[Re].alpha()>0&&Te.forceLayouts[Re].alpha(0)})).stop()}(0,ie,Q),le=X,fe=K,he=Q,pe=ie,xe=ae,window.requestAnimationFrame(function Ee(){var Re;for(Re=0;Re<v.forceTicksPerFrame;Re++)he.forceLayouts[pe].tick();if(function(Te){for(var we=0;we<Te.length;we++)Te[we].y0=Te[we].y-Te[we].dy/2,Te[we].y1=Te[we].y0+Te[we].dy,Te[we].x0=Te[we].x-Te[we].dx/2,Te[we].x1=Te[we].x0+Te[we].dx}(he.graph.nodes),he.sankey.update(he.graph),P(le.filter(H(he)),fe),he.forceLayouts[pe].alpha()>0)window.requestAnimationFrame(Ee);else{var ke=he.node.originalX;he.node.x0=ke-he.visibleWidth/2,he.node.x1=ke+he.visibleWidth/2,$(he,xe)}})}var le,fe,he,pe,xe}).on("drag",function(Q){if("fixed"!==Q.arrangement){var ie=f.event.x,le=f.event.y;"snap"===Q.arrangement?(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2,Q.node.y0=le-Q.visibleHeight/2,Q.node.y1=le+Q.visibleHeight/2):("freeform"===Q.arrangement&&(Q.node.x0=ie-Q.visibleWidth/2,Q.node.x1=ie+Q.visibleWidth/2),le=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,le)),Q.node.y0=le-Q.visibleHeight/2,Q.node.y1=le+Q.visibleHeight/2),G(Q.node),"snap"!==Q.arrangement&&(Q.sankey.update(Q.graph),P(X.filter(H(Q)),K))}}).on("dragend",function(Q){if("fixed"!==Q.arrangement){Q.interactionState.dragInProgress=!1;for(var ie=0;ie<Q.node.childrenNodes.length;ie++)Q.node.childrenNodes[ie].x=Q.node.x,Q.node.childrenNodes[ie].y=Q.node.y;"snap"!==Q.arrangement&&$(Q,ae)}});X.on(".drag",null).call(ne)}function $(X,K){for(var ue=[],ae=[],ne=0;ne<X.graph.nodes.length;ne++){var ie=(X.graph.nodes[ne].y0+X.graph.nodes[ne].y1)/2;ue.push((X.graph.nodes[ne].x0+X.graph.nodes[ne].x1)/2/X.figure.width),ae.push(ie/X.figure.height)}y.call("_guiRestyle",K,{"node.x":[ue],"node.y":[ae]},X.trace.index).then(function(){K._fullLayout._dragCover&&K._fullLayout._dragCover.remove()})}function G(X){X.lastDraggedX=X.x0+X.dx/2,X.lastDraggedY=X.y0+X.dy/2}function H(X){return function(K){return K.node.originalX===X.node.originalX}}se.exports=function(X,K,ue,ae,ne){var Q=X._context.staticPlot,ie=!1;a.ensureSingle(X._fullLayout._infolayer,"g","first-render",function(){ie=!0});var le=X._fullLayout._dragCover,fe=ue.filter(function(we){return h(we).trace.visible}).map(b.bind(null,ae)),he=K.selectAll("."+v.cn.sankey).data(fe,d);he.exit().remove(),he.enter().append("g").classed(v.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Q?"none":"auto").attr("transform",B),he.each(function(we,je){X._fullData[je]._sankey=we;var Ce="bgsankey-"+we.trace.uid+"-"+je;a.ensureSingle(X._fullLayout._draggers,"rect",Ce),X._fullData[je]._bgRect=f.select("."+Ce),X._fullData[je]._bgRect.style("pointer-events",Q?"none":"all").attr("width",we.width).attr("height",we.height).attr("x",we.translateX).attr("y",we.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),he.transition().ease(v.ease).duration(v.duration).attr("transform",B);var pe=he.selectAll("."+v.cn.sankeyLinks).data(g,d);pe.enter().append("g").classed(v.cn.sankeyLinks,!0).style("fill","none");var xe=pe.selectAll("."+v.cn.sankeyLink).data(function(we){return we.graph.links.filter(function(je){return je.value}).map(M.bind(null,we))},d);xe.enter().append("path").classed(v.cn.sankeyLink,!0).call(J,he,ne.linkEvents),xe.style("stroke",function(we){return F(we)?i.tinyRGB(c(we.linkLineColor)):we.tinyColorHue}).style("stroke-opacity",function(we){return F(we)?i.opacity(we.linkLineColor):we.tinyColorAlpha}).style("fill",function(we){return we.tinyColorHue}).style("fill-opacity",function(we){return we.tinyColorAlpha}).style("stroke-width",function(we){return F(we)?we.linkLineWidth:1}).attr("d",m()),xe.style("opacity",function(){return X._context.staticPlot||ie||le?1:0}).transition().ease(v.ease).duration(v.duration).style("opacity",1),xe.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var Ee=he.selectAll("."+v.cn.sankeyNodeSet).data(g,d);Ee.enter().append("g").classed(v.cn.sankeyNodeSet,!0),Ee.style("cursor",function(we){switch(we.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Re=Ee.selectAll("."+v.cn.sankeyNode).data(function(we){var je=we.graph.nodes;return function(Ce){var Ie,ge=[];for(Ie=0;Ie<Ce.length;Ie++)Ce[Ie].originalX=(Ce[Ie].x0+Ce[Ie].x1)/2,Ce[Ie].originalY=(Ce[Ie].y0+Ce[Ie].y1)/2,-1===ge.indexOf(Ce[Ie].originalX)&&ge.push(Ce[Ie].originalX);for(ge.sort(function(me,ce){return me-ce}),Ie=0;Ie<Ce.length;Ie++)Ce[Ie].originalLayerIndex=ge.indexOf(Ce[Ie].originalX),Ce[Ie].originalLayer=Ce[Ie].originalLayerIndex/(ge.length-1)}(je),je.map(D.bind(null,we))},d);Re.enter().append("g").classed(v.cn.sankeyNode,!0).call(S).style("opacity",function(we){return!X._context.staticPlot&&!ie||we.partOfGroup?0:1}),Re.call(J,he,ne.nodeEvents).call(z,xe,ne,X),Re.transition().ease(v.ease).duration(v.duration).call(S).style("opacity",function(we){return we.partOfGroup?0:1}),Re.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var ke=Re.selectAll("."+v.cn.nodeRect).data(g);ke.enter().append("rect").classed(v.cn.nodeRect,!0).call(R),ke.style("stroke-width",function(we){return we.nodeLineWidth}).style("stroke",function(we){return i.tinyRGB(c(we.nodeLineColor))}).style("stroke-opacity",function(we){return i.opacity(we.nodeLineColor)}).style("fill",function(we){return we.tinyColorHue}).style("fill-opacity",function(we){return we.tinyColorAlpha}),ke.transition().ease(v.ease).duration(v.duration).call(R);var Te=Re.selectAll("."+v.cn.nodeLabel).data(g);Te.enter().append("text").classed(v.cn.nodeLabel,!0).style("cursor","default"),Te.attr("data-notex",1).text(function(we){return we.node.label}).each(function(we){var je=f.select(this);s.font(je,we.textFont),w.convertToTspans(je,X)}).style("text-shadow",w.makeTextShadow(X._fullLayout.paper_bgcolor)).attr("text-anchor",function(we){return we.horizontal&&we.left?"end":"start"}).attr("transform",function(we){var je=f.select(this),Ce=w.lineCount(je),ge=we.nodeLineWidth/2+3,me=((we.horizontal?we.visibleHeight:we.visibleWidth)-we.textFont.size*((Ce-1)*x-_))/2;we.horizontal&&(we.left?ge=-ge:ge+=we.visibleWidth);var ce=we.horizontal?"":"scale(-1,1)"+l(90);return o(we.horizontal?ge:me,we.horizontal?me:ge)+ce}),Te.transition().ease(v.ease).duration(v.duration)}},84564:function(se){"use strict";se.exports=function(U,r){for(var I=[],C=U.cd[0].trace,f=C._sankey.graph.nodes,k=0;k<f.length;k++){var T=f[k];if(!T.partOfGroup){var v=[(T.x0+T.x1)/2,(T.y0+T.y1)/2];"v"===C.orientation&&v.reverse(),r&&r.contains(v,!1,k,U)&&I.push({pointNumber:T.pointNumber})}}return I}},75225:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){for(var k=0;k<C.length;k++)C[k].i=k;I.mergeArray(f.text,C,"tx"),I.mergeArray(f.texttemplate,C,"txt"),I.mergeArray(f.hovertext,C,"htx"),I.mergeArray(f.customdata,C,"data"),I.mergeArray(f.textposition,C,"tp"),f.textfont&&(I.mergeArrayCastPositive(f.textfont.size,C,"ts"),I.mergeArray(f.textfont.color,C,"tc"),I.mergeArray(f.textfont.family,C,"tf"));var T=f.marker;if(T){I.mergeArrayCastPositive(T.size,C,"ms"),I.mergeArrayCastPositive(T.opacity,C,"mo"),I.mergeArray(T.symbol,C,"mx"),I.mergeArray(T.angle,C,"ma"),I.mergeArray(T.standoff,C,"mf"),I.mergeArray(T.color,C,"mc");var v=T.line;T.line&&(I.mergeArray(v.color,C,"mlc"),I.mergeArrayCastPositive(v.width,C,"mlw"));var c=T.gradient;c&&"none"!==c.type&&(I.mergeArray(c.type,C,"mgt"),I.mergeArray(c.color,C,"mgc"))}}},82196:function(se,U,r){"use strict";var I=r(12663).axisHoverFormat,C=r(5386).si,f=r(5386).fF,k=r(50693),T=r(41940),v=r(79952).P,c=r(79952).u,i=r(91424),s=r(47581),a=r(1426).extendFlat;se.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:I("x"),yhoverformat:I("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:C({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:f({},{keys:s.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:a({},v,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:c,marker:a({symbol:{valType:"enumerated",values:i.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:a({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},k("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},k("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:T({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(89298),k=r(42973),T=r(50606).BADNUM,v=r(34098),c=r(36922),i=r(75225),s=r(66279);function a(g,h,w,y,p,_,x){var b=h._length,M=g._fullLayout,m=w._id,D=y._id,S=M._firstScatter[u(h)]===h.uid,O=(d(h,M,w,y)||{}).orientation,P=h.fill;w._minDtick=0,y._minDtick=0;var R={padded:!0},F={padded:!0};x&&(R.ppad=F.ppad=x);var B=b<2||p[0]!==p[b-1]||_[0]!==_[b-1];B&&("tozerox"===P||"tonextx"===P&&(S||"h"===O))?R.tozero=!0:(h.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(v.hasMarkers(h)||v.hasText(h))||(R.padded=!1,R.ppad=0),B&&("tozeroy"===P||"tonexty"===P&&(S||"v"===O))?F.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(F.padded=!1),m&&(h._extremes[m]=f.findExtremes(w,p,R)),D&&(h._extremes[D]=f.findExtremes(y,_,F))}function o(g,h){if(v.hasMarkers(g)){var w,y=g.marker,p=1.6*(g.marker.sizeref||1);if(w="area"===g.marker.sizemode?function(m){return Math.max(Math.sqrt((m||0)/p),3)}:function(m){return Math.max((m||0)/p,3)},C.isArrayOrTypedArray(y.size)){var _={type:"linear"};f.setConvert(_);for(var x=_.makeCalcdata(g.marker,"size"),b=new Array(h),M=0;M<h;M++)b[M]=w(x[M]);return b}return w(y.size)}}function l(g,h){var w=u(h),y=g._firstScatter;y[w]||(y[w]=h.uid)}function u(g){var h=g.stackgroup;return g.xaxis+g.yaxis+g.type+(h?"-"+h:"")}function d(g,h,w,y){var p=g.stackgroup;if(p){var _=h._scatterStackOpts[w._id+y._id][p],x="v"===_.orientation?y:w;return"linear"===x.type||"log"===x.type?_:void 0}}se.exports={calc:function(g,h){var w,y,p,_,x,b,M=g._fullLayout,m=h._xA=f.getFromId(g,h.xaxis||"x","x"),D=h._yA=f.getFromId(g,h.yaxis||"y","y"),S=m.makeCalcdata(h,"x"),O=D.makeCalcdata(h,"y"),P=k(h,m,"x",S),R=k(h,D,"y",O),F=P.vals,B=R.vals,J=h._length,z=new Array(J),$=h.ids,G=d(h,M,m,D),H=!1;l(M,h);var X,K="x",ue="y";G?(C.pushUnique(G.traceIndices,h._expandedIndex),(w="v"===G.orientation)?(ue="s",X="x"):(K="s",X="y"),x="interpolate"===G.stackgaps):a(g,h,m,D,F,B,o(h,J));var ae=!!h.xperiodalignment,ne=!!h.yperiodalignment;for(y=0;y<J;y++){var Q=z[y]={},ie=I(F[y]),le=I(B[y]);ie&&le?(Q[K]=F[y],Q[ue]=B[y],ae&&(Q.orig_x=S[y],Q.xEnd=P.ends[y],Q.xStart=P.starts[y]),ne&&(Q.orig_y=O[y],Q.yEnd=R.ends[y],Q.yStart=R.starts[y])):G&&(w?ie:le)?(Q[X]=w?F[y]:B[y],Q.gap=!0,x?(Q.s=T,H=!0):Q.s=0):Q[K]=Q[ue]=T,$&&(Q.id=String($[y]))}if(i(z,h),c(g,h),s(z,h),G){for(y=0;y<z.length;)z[y][X]===T?z.splice(y,1):y++;if(C.sort(z,function(xe,Ee){return xe[X]-Ee[X]||xe.i-Ee.i}),H){for(y=0;y<z.length-1&&z[y].gap;)y++;for((b=z[y].s)||(b=z[y].s=0),p=0;p<y;p++)z[p].s=b;for(_=z.length-1;_>y&&z[_].gap;)_--;for(b=z[_].s,p=z.length-1;p>_;p--)z[p].s=b;for(;y<_;)if(z[++y].gap){for(p=y+1;z[p].gap;)p++;for(var fe=z[y-1][X],he=z[y-1].s,pe=(z[p].s-he)/(z[p][X]-fe);y<p;)z[y].s=he+(z[y][X]-fe)*pe,y++}}}return z},calcMarkerSize:o,calcAxisExpansion:a,setFirstScatter:l,getStackOpts:d}},66279:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){I.isArrayOrTypedArray(f.selectedpoints)&&I.tagSelected(C,f)}},36922:function(se,U,r){"use strict";var I=r(52075).hasColorscale,C=r(78803),f=r(34098);se.exports=function(k,T){f.hasLines(T)&&I(T,"line")&&C(k,T,{vals:T.line.color,containerStr:"line",cLetter:"c"}),f.hasMarkers(T)&&(I(T,"marker")&&C(k,T,{vals:T.marker.color,containerStr:"marker",cLetter:"c"}),I(T,"marker.line")&&C(k,T,{vals:T.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function(se){"use strict";se.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function(se,U,r){"use strict";var I=r(47761),C=r(11661).setGroupPositions;function f(k,T,v,c,i,s,a){i[c]=!0;var u,d,h,w,y,o={i:null,gap:!0,s:0};if(o[a]=v,k.splice(T,0,o),T&&v===k[T-1][a]){var l=k[T-1];o.s=l.s,o.i=l.i,o.gap=l.gap}else s&&(o.s=(h=a,w=(u=k)[(d=T)-1],(y=u[d+1])?w?w.s+(y.s-w.s)*(v-w[h])/(y[h]-w[h]):y.s:w.s));T||(k[0].t=k[1].t,k[0].trace=k[1].trace,delete k[1].t,delete k[1].trace)}se.exports=function(k,T){"group"===k._fullLayout.scattermode&&function(X,K){for(var ue=K.xaxis,ae=K.yaxis,ne=X._fullLayout,Q=X._fullData,ie=X.calcdata,le=[],fe=[],he=0;he<Q.length;he++){var pe=Q[he];!0===pe.visible&&"scatter"===pe.type&&pe.xaxis===ue._id&&pe.yaxis===ae._id&&("h"===pe.orientation?le.push(ie[he]):"v"===pe.orientation&&fe.push(ie[he]))}var xe={mode:ne.scattermode,gap:ne.scattergap};C(X,ue,ae,fe,xe),C(X,ae,ue,le,xe)}(k,T);var v=T.xaxis,c=T.yaxis,s=k._fullLayout._scatterStackOpts[v._id+c._id];if(s){var a,o,l,u,d,g,h,w,y,p,_,x,b,M,m,D=k.calcdata;for(var S in s){var O=(p=s[S]).traceIndices;if(O.length){for(_="interpolate"===p.stackgaps,x=p.groupnorm,"v"===p.orientation?(b="x",M="y"):(b="y",M="x"),m=new Array(O.length),a=0;a<m.length;a++)m[a]=!1;g=D[O[0]];var P=new Array(g.length);for(a=0;a<g.length;a++)P[a]=g[a][b];for(a=1;a<O.length;a++){for(d=D[O[a]],o=l=0;o<d.length;o++){for(h=d[o][b];h>P[l]&&l<P.length;l++)f(d,o,P[l],a,m,_,b),o++;if(h!==P[l]){for(u=0;u<a;u++)f(D[O[u]],l,h,u,m,_,b);P.splice(l,0,h)}l++}for(;l<P.length;l++)f(d,o,P[l],a,m,_,b),o++}var R=P.length;for(o=0;o<g.length;o++){for(w=g[o][M]=g[o].s,a=1;a<O.length;a++)(d=D[O[a]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=R,d[o][M]=w+=d[o].s;if(x)for(y=("fraction"===x?w:w/100)||1,a=0;a<O.length;a++){var F=D[O[a]][o];F[M]/=y,F.sNorm=F.s/y}}for(a=0;a<O.length;a++){var B=(d=D[O[a]])[0].trace,J=I.calcMarkerSize(B,B._rawLength),z=Array.isArray(J);if(J&&m[a]||z){var $=J;for(J=new Array(R),o=0;o<R;o++)J[o]=d[o].gap?0:z?$[d[o].i]:$}var G=new Array(R),H=new Array(R);for(o=0;o<R;o++)G[o]=d[o].x,H[o]=d[o].y;I.calcAxisExpansion(k,B,v,c,G,H,J),d[0].t.orientation=p.orientation}}}}}},34936:function(se,U,r){"use strict";var I=r(71828),C=r(26125),f=r(82196);se.exports=function(k,T){var c,i;function s(d){return I.coerce(c._input,c,f,d)}if("group"===T.scattermode)for(i=0;i<k.length;i++)"scatter"===(c=k[i]).type&&C(c._input,c,T,s);for(i=0;i<k.length;i++){var a=k[i];if("scatter"===a.type){var o=a.fill;if("none"!==o&&"toself"!==o&&(a.opacity=void 0,"tonexty"===o||"tonextx"===o))for(var l=i-1;l>=0;l--){var u=k[l];if("scatter"===u.type&&u.xaxis===a.xaxis&&u.yaxis===a.yaxis){u.opacity=void 0;break}}}}}},17438:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(82196),k=r(47581),T=r(34098),v=r(67513),c=r(73927),i=r(565),s=r(49508),a=r(11058),o=r(94039),l=r(82410),u=r(28908),d=r(71828).coercePattern;se.exports=function(g,h,w,y){function p(O,P){return I.coerce(g,h,f,O,P)}var _=v(g,h,y,p);if(_||(h.visible=!1),h.visible){c(g,h,y,p),p("xhoverformat"),p("yhoverformat");var x=i(g,h,y,p);"group"===y.scattermode&&void 0===h.orientation&&p("orientation","v");var b=!x&&_<k.PTS_LINESONLY?"lines+markers":"lines";p("text"),p("hovertext"),p("mode",b),T.hasLines(h)&&(a(g,h,w,y,p,{backoff:!0}),o(g,h,p),p("connectgaps"),p("line.simplify")),T.hasMarkers(h)&&s(g,h,w,y,p,{gradient:!0}),T.hasText(h)&&(p("texttemplate"),l(g,h,y,p));var M=[];(T.hasMarkers(h)||T.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),M.push("points")),p("fill",x?x.fillDflt:"none"),"none"!==h.fill&&(u(g,h,w,p),T.hasLines(h)||o(g,h,p),d(p,"fillpattern",h.fillcolor,!1));var m=(h.line||{}).color,D=(h.marker||{}).color;"tonext"!==h.fill&&"toself"!==h.fill||M.push("fills"),p("hoveron",M.join("+")||"points"),"fills"!==h.hoveron&&p("hovertemplate");var S=C.getComponentMethod("errorbars","supplyDefaults");S(g,h,m||D||w,{axis:"y"}),S(g,h,m||D||w,{axis:"x",inherit:"y"}),I.coerceSelectionMarkerOpacity(h,p)}}},28908:function(se,U,r){"use strict";var I=r(7901),C=r(71828).isArrayOrTypedArray;se.exports=function(f,k,T,v){var c=!1;if(k.marker){var i=k.marker.color,s=(k.marker.line||{}).color;i&&!C(i)?c=i:s&&!C(s)&&(c=s)}v("fillcolor",I.addOpacity((k.line||{}).color||c||T,.5))}},8225:function(se,U,r){"use strict";var I=r(89298);se.exports=function(C,f,k){var T={},v={_fullLayout:k},c=I.getFromTrace(v,f,"x"),i=I.getFromTrace(v,f,"y"),s=C.orig_x;void 0===s&&(s=C.x);var a=C.orig_y;return void 0===a&&(a=C.y),T.xLabel=I.tickText(c,c.c2l(s),!0).text,T.yLabel=I.tickText(i,i.c2l(a),!0).text,T}},34603:function(se,U,r){"use strict";var I=r(7901),C=r(34098);se.exports=function(f,k){var T,v;if("lines"===f.mode)return(T=f.line.color)&&I.opacity(T)?T:f.fillcolor;if("none"===f.mode)return f.fill?f.fillcolor:"";var c=k.mcc||(f.marker||{}).color,i=k.mlcc||((f.marker||{}).line||{}).color;return(v=c&&I.opacity(c)?c:i&&I.opacity(i)&&(k.mlw||((f.marker||{}).line||{}).width)?i:"")?I.opacity(v)<.3?I.addOpacity(v,.3):v:(T=(f.line||{}).color)&&I.opacity(T)&&C.hasLines(f)&&f.line.width?T:f.fillcolor}},26125:function(se,U,r){"use strict";var I=r(99082).getAxisGroup;se.exports=function(C,f,k,T){var v=f.orientation,i=I(k,f[{v:"x",h:"y"}[v]+"axis"])+v,s=k._alignmentOpts||{},a=T("alignmentgroup"),o=s[i];o||(o=s[i]={});var l=o[a];l?l.traces.push(f):l=o[a]={traces:[f],alignmentIndex:Object.keys(o).length,offsetGroups:{}};var u=T("offsetgroup"),d=l.offsetGroups,g=d[u];u&&(g||(g=d[u]={offsetIndex:Object.keys(d).length}),f._offsetIndex=g.offsetIndex)}},33720:function(se,U,r){"use strict";var I=r(71828),C=r(30211),f=r(73972),k=r(34603),T=r(7901),v=I.fillText;se.exports=function(c,i,s,a){var o=c.cd,l=o[0].trace,u=c.xa,d=c.ya,g=u.c2p(i),h=d.c2p(s),w=[g,h],y=l.hoveron||"",p=-1!==l.mode.indexOf("markers")?3:.5,_=!!l.xperiodalignment,x=!!l.yperiodalignment;if(-1!==y.indexOf("points")){var b=function(Re){var ke=Math.max(p,Re.mrc||0),Te=u.c2p(Re.x)-g,we=d.c2p(Re.y)-h;return Math.max(Math.sqrt(Te*Te+we*we)-ke,1-p/ke)},M=C.getDistanceFunction(a,function(Re){if(_){var ke=u.c2p(Re.xStart),Te=u.c2p(Re.xEnd);return g>=Math.min(ke,Te)&&g<=Math.max(ke,Te)?0:1/0}var we=Math.max(3,Re.mrc||0),je=1-1/we,Ce=Math.abs(u.c2p(Re.x)-g);return Ce<we?je*Ce/we:Ce-we+je},function(Re){if(x){var ke=d.c2p(Re.yStart),Te=d.c2p(Re.yEnd);return h>=Math.min(ke,Te)&&h<=Math.max(ke,Te)?0:1/0}var we=Math.max(3,Re.mrc||0),je=1-1/we,Ce=Math.abs(d.c2p(Re.y)-h);return Ce<we?je*Ce/we:Ce-we+je},b);if(C.getClosest(o,M,c),!1!==c.index){var m=o[c.index],D=u.c2p(m.x,!0),S=d.c2p(m.y,!0),O=m.mrc||1;c.index=m.i;var P=o[0].t.orientation,R=P&&(m.sNorm||m.s),F="h"===P?R:void 0!==m.orig_x?m.orig_x:m.x,B="v"===P?R:void 0!==m.orig_y?m.orig_y:m.y;return I.extendFlat(c,{color:k(l,m),x0:D-O,x1:D+O,xLabelVal:F,y0:S-O,y1:S+O,yLabelVal:B,spikeDistance:b(m),hovertemplate:l.hovertemplate}),v(m,l,c),f.getComponentMethod("errorbars","hoverInfo")(m,l,c),[c]}}if(-1!==y.indexOf("fills")&&l._polygons){var J,z,$,G,H,X,ue,ae,ne=l._polygons,Q=[],ie=!1,le=1/0,fe=-1/0,he=1/0,pe=-1/0;for(J=0;J<ne.length;J++)($=ne[J]).contains(w)&&(ie=!ie,Q.push($),he=Math.min(he,$.ymin),pe=Math.max(pe,$.ymax));if(ie){var xe=((he=Math.max(he,0))+(pe=Math.min(pe,d._length)))/2;for(J=0;J<Q.length;J++)for(G=Q[J].pts,z=1;z<G.length;z++)(ue=G[z-1][1])>xe!=(ae=G[z][1])>=xe&&(X=G[z-1][0],ae-ue&&(H=X+(G[z][0]-X)*(xe-ue)/(ae-ue),le=Math.min(le,H),fe=Math.max(fe,H)));le=Math.max(le,0),fe=Math.min(fe,u._length);var Ee=T.defaultLine;return T.opacity(l.fillcolor)?Ee=l.fillcolor:T.opacity((l.line||{}).color)&&(Ee=l.line.color),I.extendFlat(c,{distance:c.maxHoverDistance,x0:le,x1:fe,y0:xe,y1:xe,color:Ee,hovertemplate:!1}),delete c.index,c.text=l.text&&!Array.isArray(l.text)?String(l.text):l.name,[c]}}}},67368:function(se,U,r){"use strict";var I=r(34098);se.exports={hasLines:I.hasLines,hasMarkers:I.hasMarkers,hasText:I.hasText,isBubble:I.isBubble,attributes:r(82196),layoutAttributes:r(21479),supplyDefaults:r(17438),crossTraceDefaults:r(34936),supplyLayoutDefaults:r(79334),calc:r(47761).calc,crossTraceCalc:r(72626),arraysToCalcdata:r(75225),plot:r(32663),colorbar:r(4898),formatLabels:r(8225),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(33720),selectPoints:r(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:r(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function(se){"use strict";se.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function(se,U,r){"use strict";var I=r(71828),C=r(21479);se.exports=function(f,k){"group"===k.scattermode&&I.coerce(f,k,C,"scattergap","group"===k.barmode?k.bargap:.2)}},11058:function(se,U,r){"use strict";var I=r(71828).isArrayOrTypedArray,C=r(52075).hasColorscale,f=r(1586);se.exports=function(k,T,v,c,i,s){s||(s={});var a=(k.marker||{}).color;i("line.color",v),C(k,"line")?f(k,T,c,i,{prefix:"line.",cLetter:"c"}):i("line.color",!I(a)&&a||v),i("line.width"),s.noDash||i("line.dash"),s.backoff&&i("line.backoff")}},34621:function(se,U,r){"use strict";var I=r(91424),C=r(50606),f=C.BADNUM,k=C.LOG_CLIP,T=k+.5,v=k-.5,c=r(71828),i=c.segmentsIntersect,s=c.constrain,a=r(47581);se.exports=function(o,l){var u,d,g,h,w,y,p,_,x,b,M,m,D,S,O,P,R,F,B=l.trace||{},J=l.xaxis,z=l.yaxis,$="log"===J.type,G="log"===z.type,H=J._length,X=z._length,K=l.backoff,ue=B.marker,ae=l.connectGaps,ne=l.baseTolerance,Q=l.shape,ie="linear"===Q,le=B.fill&&"none"!==B.fill,fe=[],he=a.minTolerance,pe=o.length,xe=new Array(pe),Ee=0;function Re(Ht){var it=o[Ht];if(!it)return!1;var st=l.linearized?J.l2p(it.x):J.c2p(it.x),Je=l.linearized?z.l2p(it.y):z.c2p(it.y);if(st===f){if($&&(st=J.c2p(it.x,!0)),st===f)return!1;G&&Je===f&&(st*=Math.abs(J._m*X*(J._m>0?T:v)/(z._m*H*(z._m>0?T:v)))),st*=1e3}if(Je===f){if(G&&(Je=z.c2p(it.y,!0)),Je===f)return!1;Je*=1e3}return[st,Je]}function ke(Ht,it,st,Je){var ot=st-Ht,pt=Je-it,xt=.5-Ht,He=.5-it,Ge=ot*ot+pt*pt,dt=ot*xt+pt*He;if(dt>0&&dt<Ge){var ht=xt*pt-He*ot;if(ht*ht<Ge)return!0}}function Te(Ht,it){var st=Ht[0]/H,Je=Ht[1]/X,ot=Math.max(0,-st,st-1,-Je,Je-1);return ot&&void 0!==R&&ke(st,Je,R,F)&&(ot=0),ot&&it&&ke(st,Je,it[0]/H,it[1]/X)&&(ot=0),(1+a.toleranceGrowth*ot)*ne}function we(Ht,it){var st=Ht[0]-it[0],Je=Ht[1]-it[1];return Math.sqrt(st*st+Je*Je)}var je,Ce,Ie,ge,me,ce,Ae,Ne=a.maxScreensAway,De=-H*Ne,qe=H*(1+Ne),Ke=-X*Ne,be=X*(1+Ne),Oe=[[De,Ke,qe,Ke],[qe,Ke,qe,be],[qe,be,De,be],[De,be,De,Ke]];function Le(Ht){if(Ht[0]<De||Ht[0]>qe||Ht[1]<Ke||Ht[1]>be)return[s(Ht[0],De,qe),s(Ht[1],Ke,be)]}function Ue(Ht,it){return Ht[0]===it[0]&&(Ht[0]===De||Ht[0]===qe)||Ht[1]===it[1]&&(Ht[1]===Ke||Ht[1]===be)||void 0}function Ze(Ht,it,st){return function(Je,ot){var pt=Le(Je),xt=Le(ot),He=[];if(pt&&xt&&Ue(pt,xt))return He;pt&&He.push(pt),xt&&He.push(xt);var Ge=2*c.constrain((Je[Ht]+ot[Ht])/2,it,st)-((pt||Je)[Ht]+(xt||ot)[Ht]);return Ge&&((pt&&xt?Ge>0==pt[Ht]>xt[Ht]?pt:xt:pt||xt)[Ht]+=Ge),He}}function We(Ht){var it=Ht[0],st=Ht[1],Je=it===xe[Ee-1][0],ot=st===xe[Ee-1][1];if(!Je||!ot)if(Ee>1){var pt=it===xe[Ee-2][0],xt=st===xe[Ee-2][1];Je&&(it===De||it===qe)&&pt?xt?Ee--:xe[Ee-1]=Ht:ot&&(st===Ke||st===be)&&xt?pt?Ee--:xe[Ee-1]=Ht:xe[Ee++]=Ht}else xe[Ee++]=Ht}function et(Ht){xe[Ee-1][0]!==Ht[0]&&xe[Ee-1][1]!==Ht[1]&&We([Ie,ge]),We(Ht),me=null,Ie=ge=0}"linear"===Q||"spline"===Q?Ae=function(Ht,it){for(var st=[],Je=0,ot=0;ot<4;ot++){var pt=Oe[ot],xt=i(Ht[0],Ht[1],it[0],it[1],pt[0],pt[1],pt[2],pt[3]);xt&&(!Je||Math.abs(xt.x-st[0][0])>1||Math.abs(xt.y-st[0][1])>1)&&(xt=[xt.x,xt.y],Je&&we(xt,Ht)<we(st[0],Ht)?st.unshift(xt):st.push(xt),Je++)}return st}:"hv"===Q||"vh"===Q?Ae=function(Ht,it){var st=[],Je=Le(Ht),ot=Le(it);return Je&&ot&&Ue(Je,ot)||(Je&&st.push(Je),ot&&st.push(ot)),st}:"hvh"===Q?Ae=Ze(0,De,qe):"vhv"===Q&&(Ae=Ze(1,Ke,be));var nt=c.isArrayOrTypedArray(ue);function ct(Ht){if(Ht&&K&&(Ht.i=u,Ht.d=o,Ht.trace=B,Ht.marker=nt?ue[Ht.i]:ue,Ht.backoff=K),R=Ht[0]/H,F=Ht[1]/X,Ce=Ht[1]<Ke?Ke:Ht[1]>be?be:0,(je=Ht[0]<De?De:Ht[0]>qe?qe:0)||Ce){if(Ee)if(me){var it=Ae(me,Ht);it.length>1&&(et(it[0]),xe[Ee++]=it[1])}else ce=Ae(xe[Ee-1],Ht)[0],xe[Ee++]=ce;else xe[Ee++]=[je||Ht[0],Ce||Ht[1]];var st=xe[Ee-1];je&&Ce&&(st[0]!==je||st[1]!==Ce)?(me&&(Ie!==je&&ge!==Ce?We(Ie&&ge?(pt=(ot=Ht)[0]-(Je=me)[0],xt=(ot[1]-Je[1])/pt,(Je[1]*ot[0]-ot[1]*Je[0])/pt>0?[xt>0?De:qe,be]:[xt>0?qe:De,Ke]):[Ie||je,ge||Ce]):Ie&&ge&&We([Ie,ge])),We([je,Ce])):Ie-je&&ge-Ce&&We([je||Ie,Ce||ge]),me=Ht,Ie=je,ge=Ce}else me&&et(Ae(me,Ht)[0]),xe[Ee++]=Ht;var Je,ot,pt,xt}for(u=0;u<pe;u++)if(d=Re(u)){for(Ee=0,me=null,ct(d),u++;u<pe;u++){if(!(h=Re(u))){if(ae)continue;break}if(ie&&l.simplify){var yt=Re(u+1);if(b=we(h,d),le&&(0===Ee||Ee===pe-1)||!(b<Te(h,yt)*he)){for(_=[(h[0]-d[0])/b,(h[1]-d[1])/b],w=d,M=b,m=S=O=0,p=!1,g=h,u++;u<o.length;u++){if(y=yt,yt=Re(u+1),!y){if(ae)continue;break}if(P=(x=[y[0]-d[0],y[1]-d[1]])[0]*_[1]-x[1]*_[0],S=Math.min(S,P),(O=Math.max(O,P))-S>Te(y,yt))break;g=y,(D=x[0]*_[0]+x[1]*_[1])>M?(M=D,h=y,p=!1):D<m&&(m=D,w=y,p=!0)}if(p?(ct(h),g!==w&&ct(w)):(w!==d&&ct(w),g!==h&&ct(h)),ct(g),u>=o.length||!y)break;ct(y),d=y}}else ct(h)}me&&We([Ie||me[0],ge||me[1]]),fe.push(xe.slice(0,Ee))}var ut=Q.slice(Q.length-1);if(K&&"h"!==ut&&"v"!==ut){for(var Ct=!1,Dt=-1,vt=[],mt=0;mt<fe.length;mt++)for(var Lt=0;Lt<fe[mt].length-1;Lt++){var Ft=fe[mt][Lt],Rt=fe[mt][Lt+1],Wt=I.applyBackoff(Rt,Ft);Wt[0]===Rt[0]&&Wt[1]===Rt[1]||(Ct=!0),vt[Dt+1]||(vt[++Dt]=[Ft,[Wt[0],Wt[1]]])}return Ct?vt:fe}return fe}},94039:function(se){"use strict";se.exports=function(U,r,I){"spline"===I("line.shape")&&I("line.smoothing")}},68687:function(se){"use strict";var U={tonextx:1,tonexty:1,tonext:1};se.exports=function(r,I,C){var f,k,T,v,c,i={},s=!1,a=-1,o=0,l=-1;for(k=0;k<C.length;k++)(T=(f=C[k][0].trace).stackgroup||"")?T in i?c=i[T]:(c=i[T]=o,o++):f.fill in U&&l>=0?c=l:(c=l=o,o++),c<a&&(s=!0),f._groupIndex=a=c;var u=C.slice();s&&u.sort(function(g,h){var w=g[0].trace,y=h[0].trace;return w._groupIndex-y._groupIndex||w.index-y.index});var d={};for(k=0;k<u.length;k++)T=(f=u[k][0].trace).stackgroup||"",!0===f.visible?(f._nexttrace=null,f.fill in U&&(f._prevtrace=(v=d[T])||null,v&&(v._nexttrace=f)),f._ownfill=f.fill&&("tozero"===f.fill.substr(0,6)||"toself"===f.fill||"to"===f.fill.substr(0,2)&&!f._prevtrace),d[T]=f):f._prevtrace=f._nexttrace=f._ownfill=null;return u}},39984:function(se,U,r){"use strict";var I=r(92770);se.exports=function(C,f){f||(f=2);var k=C.marker,T=k.sizeref||1,v=k.sizemin||0,c="area"===k.sizemode?function(i){return Math.sqrt(i/T)}:function(i){return i/T};return function(i){var s=c(i/f);return I(s)&&s>0?Math.max(s,v):0}}},4898:function(se){"use strict";se.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function(se,U,r){"use strict";var I=r(7901),C=r(52075).hasColorscale,f=r(1586),k=r(34098);se.exports=function(T,v,c,i,s,a){var o=k.isBubble(T),l=(T.line||{}).color;a=a||{},l&&(c=l),s("marker.symbol"),s("marker.opacity",o?.7:1),s("marker.size"),a.noAngle||(s("marker.angle"),a.noAngleRef||s("marker.angleref"),a.noStandOff||s("marker.standoff")),s("marker.color",c),C(T,"marker")&&f(T,v,i,s,{prefix:"marker.",cLetter:"c"}),a.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),a.noLine||(s("marker.line.color",l&&!Array.isArray(l)&&v.marker.color!==l?l:o?I.background:I.defaultLine),C(T,"marker.line")&&f(T,v,i,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",o?1:0)),o&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),a.gradient&&"none"!==s("marker.gradient.type")&&s("marker.gradient.color")}},73927:function(se,U,r){"use strict";var I=r(71828).dateTick0,C=r(50606).ONEWEEK;function f(k,T){return I(T,k%C==0?1:0)}se.exports=function(k,T,v,c,i){if(i||(i={x:!0,y:!0}),i.x){var s=c("xperiod");s&&(c("xperiod0",f(s,T.xcalendar)),c("xperiodalignment"))}if(i.y){var a=c("yperiod");a&&(c("yperiod0",f(a,T.ycalendar)),c("yperiodalignment"))}}},32663:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(71828),k=f.ensureSingle,T=f.identity,v=r(91424),c=r(34098),i=r(34621),s=r(68687),a=r(61082).tester;function o(l,u,d,g,h,w,y){var p,_=l._context.staticPlot;!function(Ae,Ne,De,qe,Ke){var be=De.xaxis,Oe=De.yaxis,Le=I.extent(f.simpleMap(be.range,be.r2c)),Ue=I.extent(f.simpleMap(Oe.range,Oe.r2c)),Ze=qe[0].trace;if(c.hasMarkers(Ze)){var We=Ze.marker.maxdisplayed;if(0!==We){var et=qe.filter(function(ut){return ut.x>=Le[0]&&ut.x<=Le[1]&&ut.y>=Ue[0]&&ut.y<=Ue[1]}),nt=Math.ceil(et.length/We),ct=0;Ke.forEach(function(ut,Ct){var Dt=ut[0].trace;c.hasMarkers(Dt)&&Dt.marker.maxdisplayed>0&&Ct<Ne&&ct++});var yt=Math.round(ct*nt/3+Math.floor(ct/3)*nt/7.1);qe.forEach(function(ut){delete ut.vis}),et.forEach(function(ut,Ct){0===Math.round((Ct+yt)%nt)&&(ut.vis=!0)})}}}(0,u,d,g,h);var x=!!y&&y.duration>0;function b(Ae){return x?Ae.transition():Ae}var M=d.xaxis,m=d.yaxis,D=g[0].trace,S=D.line,O=I.select(w),P=k(O,"g","errorbars"),R=k(O,"g","lines"),F=k(O,"g","points"),B=k(O,"g","text");if(C.getComponentMethod("errorbars","plot")(l,P,d,y),!0===D.visible){var J,z;b(O).style("opacity",D.opacity);var $=D.fill.charAt(D.fill.length-1);"x"!==$&&"y"!==$&&($=""),g[0][d.isRangePlot?"nodeRangePlot3":"node3"]=O;var G,H,X="",K=[],ue=D._prevtrace;ue&&(X=ue._prevRevpath||"",z=ue._nextFill,K=ue._polygons);var ae,ne,Q,ie,le,fe,he,pe="",xe="",Ee=[],Re=f.noop;if(J=D._ownFill,c.hasLines(D)||"none"!==D.fill){for(z&&z.datum(g),-1!==["hv","vh","hvh","vhv"].indexOf(S.shape)?(ae=v.steps(S.shape),ne=v.steps(S.shape.split("").reverse().join(""))):ae=ne="spline"===S.shape?function(Ae){var Ne=Ae[Ae.length-1];return Ae.length>1&&Ae[0][0]===Ne[0]&&Ae[0][1]===Ne[1]?v.smoothclosed(Ae.slice(1),S.smoothing):v.smoothopen(Ae,S.smoothing)}:function(Ae){return"M"+Ae.join("L")},Q=function(Ae){return ne(Ae.reverse())},Ee=i(g,{xaxis:M,yaxis:m,trace:D,connectGaps:D.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:D.fill}),he=D._polygons=new Array(Ee.length),p=0;p<Ee.length;p++)D._polygons[p]=a(Ee[p]);Ee.length&&(ie=Ee[0][0],fe=(le=Ee[Ee.length-1])[le.length-1]),Re=function(Ae){return function(Ne){if(G=ae(Ne),H=Q(Ne),pe?$?(pe+="L"+G.substr(1),xe=H+"L"+xe.substr(1)):(pe+="Z"+G,xe=H+"Z"+xe):(pe=G,xe=H),c.hasLines(D)){var De=I.select(this);if(De.datum(g),Ae)b(De.style("opacity",0).attr("d",G).call(v.lineGroupStyle)).style("opacity",1);else{var qe=b(De);qe.attr("d",G),v.singleLineStyle(g,qe)}}}}}var ke=R.selectAll(".js-line").data(Ee);b(ke.exit()).style("opacity",0).remove(),ke.each(Re(!1)),ke.enter().append("path").classed("js-line",!0).style("vector-effect",_?"none":"non-scaling-stroke").call(v.lineGroupStyle).each(Re(!0)),v.setClipUrl(ke,d.layerClipId,l),Ee.length?(J?(J.datum(g),ie&&fe&&($?("y"===$?ie[1]=fe[1]=m.c2p(0,!0):"x"===$&&(ie[0]=fe[0]=M.c2p(0,!0)),b(J).attr("d","M"+fe+"L"+ie+"L"+pe.substr(1)).call(v.singleFillStyle,l)):b(J).attr("d",pe+"Z").call(v.singleFillStyle,l))):z&&("tonext"===D.fill.substr(0,6)&&pe&&X?("tonext"===D.fill?b(z).attr("d",pe+"Z"+X+"Z").call(v.singleFillStyle,l):b(z).attr("d",pe+"L"+X.substr(1)+"Z").call(v.singleFillStyle,l),D._polygons=D._polygons.concat(K)):(we(z),D._polygons=null)),D._prevRevpath=xe,D._prevPolygons=he):(J?we(J):z&&we(z),D._polygons=D._prevRevpath=D._prevPolygons=null),F.datum(g),B.datum(g),function(Ae,Ne,De){var qe,Ke=De[0].trace,be=c.hasMarkers(Ke),Oe=c.hasText(Ke),Le=function me(Ae){if(Ae.ids)return ge}(Ke),Ue=ce,Ze=ce;if(be||Oe){var We=T,et=Ke.stackgroup,nt=et&&"infer zero"===l._fullLayout._scatterStackOpts[M._id+m._id][et].stackgaps;Ke.marker.maxdisplayed||Ke._needsCull?We=nt?Ce:je:et&&!nt&&(We=Ie),be&&(Ue=We),Oe&&(Ze=We)}var ct,yt=(qe=Ae.selectAll("path.point").data(Ue,Le)).enter().append("path").classed("point",!0);x&&yt.call(v.pointStyle,Ke,l).call(v.translatePoints,M,m).style("opacity",0).transition().style("opacity",1),qe.order(),be&&(ct=v.makePointStyleFns(Ke)),qe.each(function(ut){var Ct=I.select(this),Dt=b(Ct);v.translatePoint(ut,Dt,M,m)?(v.singlePointStyle(ut,Dt,Ke,ct,l),d.layerClipId&&v.hideOutsideRangePoint(ut,Dt,M,m,Ke.xcalendar,Ke.ycalendar),Ke.customdata&&Ct.classed("plotly-customdata",null!=ut.data)):Dt.remove()}),x?qe.exit().transition().style("opacity",0).remove():qe.exit().remove(),(qe=Ne.selectAll("g").data(Ze,Le)).enter().append("g").classed("textpoint",!0).append("text"),qe.order(),qe.each(function(ut){var Ct=I.select(this),Dt=b(Ct.select("text"));v.translatePoint(ut,Dt,M,m)?d.layerClipId&&v.hideOutsideRangePoint(ut,Ct,M,m,Ke.xcalendar,Ke.ycalendar):Ct.remove()}),qe.selectAll("text").call(v.textPointStyle,Ke,l).each(function(ut){var Ct=M.c2p(ut.x),Dt=m.c2p(ut.y);I.select(this).selectAll("tspan.line").each(function(){b(I.select(this)).attr({x:Ct,y:Dt})})}),qe.exit().remove()}(F,B,g);var Te=!1===D.cliponaxis?null:d.layerClipId;v.setClipUrl(F,Te,l),v.setClipUrl(B,Te,l)}function we(Ae){b(Ae).attr("d","M0,0Z")}function je(Ae){return Ae.filter(function(Ne){return!Ne.gap&&Ne.vis})}function Ce(Ae){return Ae.filter(function(Ne){return Ne.vis})}function Ie(Ae){return Ae.filter(function(Ne){return!Ne.gap})}function ge(Ae){return Ae.id}function ce(){return!1}}se.exports=function(l,u,d,g,h,w){var y,p,M,D,_=!h,x=!!h&&h.duration>0,b=s(l,u,d);(y=g.selectAll("g.trace").data(b,function(M){return M[0].trace.uid})).enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),y.order(),M=l,D=u,y.each(function(S){var O=k(I.select(this),"g","fills");v.setClipUrl(O,D.layerClipId,M);var P=S[0].trace,R=[];P._ownfill&&R.push("_ownFill"),P._nexttrace&&R.push("_nextFill");var F=O.selectAll("g").data(R,T);F.enter().append("g"),F.exit().each(function(B){P[B]=null}).remove(),F.order().each(function(B){P[B]=k(I.select(this),"path","js-fill")})}),x?(w&&(p=w()),I.transition().duration(h.duration).ease(h.easing).each("end",function(){p&&p()}).each("interrupt",function(){p&&p()}).each(function(){g.selectAll("g.trace").each(function(M,m){o(l,m,u,M,b,this,h)})})):y.each(function(M,m){o(l,m,u,M,b,this,h)}),_&&y.exit().remove(),g.selectAll("path:not([d])").remove()}},98002:function(se,U,r){"use strict";var I=r(34098);se.exports=function(C,f){var k,T,v,c,i=C.cd,s=C.xaxis,a=C.yaxis,o=[],l=i[0].trace;if(!I.hasMarkers(l)&&!I.hasText(l))return[];if(!1===f)for(k=0;k<i.length;k++)i[k].selected=0;else for(k=0;k<i.length;k++)v=s.c2p((T=i[k]).x),c=a.c2p(T.y),null!==T.i&&f.contains([v,c],!1,k,C)?(o.push({pointNumber:T.i,x:s.c2d(T.x),y:a.c2d(T.y)}),T.selected=1):T.selected=0;return o}},565:function(se){"use strict";var U=["orientation","groupnorm","stackgaps"];se.exports=function(r,I,C,f){var k=C._scatterStackOpts,T=f("stackgroup");if(T){var v=I.xaxis+I.yaxis,c=k[v];c||(c=k[v]={});var i=c[T],s=!1;i?i.traces.push(I):(i=c[T]={traceIndices:[],traces:[I]},s=!0);for(var a={orientation:I.x&&!I.y?"h":"v"},o=0;o<U.length;o++){var l=U[o],u=l+"Found";if(!i[u]){var d=void 0!==r[l],g="orientation"===l;if((d||s)&&(i[l]=f(l,a[l]),g&&(i.fillDflt="h"===i[l]?"tonextx":"tonexty"),d&&(i[u]=!0,!s&&(delete i.traces[0][l],g))))for(var h=0;h<i.traces.length-1;h++){var w=i.traces[h];w._input.fill!==w.fill&&(w.fill=i.fillDflt)}}}return i}}},16296:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(73972);function k(v,c,i){C.pointStyle(v.selectAll("path.point"),c,i)}function T(v,c,i){C.textPointStyle(v.selectAll("text"),c,i)}se.exports={style:function(v){var c=I.select(v).selectAll("g.trace.scatter");c.style("opacity",function(i){return i[0].trace.opacity}),c.selectAll("g.points").each(function(i){k(I.select(this),i.trace||i[0].trace,v)}),c.selectAll("g.text").each(function(i){T(I.select(this),i.trace||i[0].trace,v)}),c.selectAll("g.trace path.js-line").call(C.lineGroupStyle),c.selectAll("g.trace path.js-fill").call(C.fillGroupStyle,v),f.getComponentMethod("errorbars","style")(c)},stylePoints:k,styleText:T,styleOnSelect:function(v,c,i){var s=c[0].trace;s.selectedpoints?(C.selectedPointStyle(i.selectAll("path.point"),s),C.selectedTextStyle(i.selectAll("text"),s)):(k(i,s,v),T(i,s,v))}}},34098:function(se,U,r){"use strict";var I=r(71828);se.exports={hasLines:function(C){return C.visible&&C.mode&&-1!==C.mode.indexOf("lines")},hasMarkers:function(C){return C.visible&&(C.mode&&-1!==C.mode.indexOf("markers")||"splom"===C.type)},hasText:function(C){return C.visible&&C.mode&&-1!==C.mode.indexOf("text")},isBubble:function(C){return I.isPlainObject(C.marker)&&I.isArrayOrTypedArray(C.marker.size)}}},82410:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f,k,T,v){v=v||{},T("textposition"),I.coerceFont(T,"textfont",k.font),v.noSelect||(T("selected.textfont.color"),T("unselected.textfont.color"))}},67513:function(se,U,r){"use strict";var I=r(71828),C=r(73972);se.exports=function(f,k,T,v){var c,i=v("x"),s=v("y");if(C.getComponentMethod("calendars","handleTraceDefaults")(f,k,["x","y"],T),i){var a=I.minRowLength(i);s?c=Math.min(a,I.minRowLength(s)):(c=a,v("y0"),v("dy"))}else{if(!s)return 0;c=I.minRowLength(s),v("x0"),v("dx")}return k._length=c,c}},44542:function(se,U,r){"use strict";var I=r(82196),C=r(50693),f=r(12663).axisHoverFormat,k=r(5386).fF,T=r(5386).si,v=r(9012),c=r(29659),i=r(87381),s=r(1426).extendFlat,a=r(30962).overrideAll,o=r(78607),u=I.marker,d=u.line,g=s({width:I.line.width,dash:{valType:"enumerated",values:o(c),dflt:"solid"}},C("line")),h=se.exports=a({x:I.x,y:I.y,z:{valType:"data_array"},text:s({},I.text,{}),texttemplate:T({},{}),hovertext:s({},I.hovertext,{}),hovertemplate:k(),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),mode:s({},I.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:I.connectgaps,line:g,marker:s({symbol:{valType:"enumerated",values:o(i),dflt:"circle",arrayOk:!0},size:s({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:s({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:s({width:s({},d.width,{arrayOk:!1})},C("marker.line"))},C("marker")),textposition:s({},I.textposition,{dflt:"top center"}),textfont:{color:I.textfont.color,size:I.textfont.size,family:s({},I.textfont.family,{arrayOk:!1})},opacity:v.opacity,hoverinfo:s({},v.hoverinfo)},"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes"},36563:function(se,U,r){"use strict";var I=r(75225),C=r(36922);se.exports=function(f,k){var T=[{x:!1,y:!1,trace:k,t:{}}];return I(T,k),C(f,k),T}},67336:function(se,U,r){"use strict";var I=r(73972);function C(f,k,T,v){if(!k||!k.visible)return null;for(var c=I.getComponentMethod("errorbars","makeComputeError")(k),i=new Array(f.length),s=0;s<f.length;s++){var a=c(+f[s],s);if("log"===v.type){var o=v.c2l(f[s]),l=f[s]-a[0],u=f[s]+a[1];if(i[s]=[(v.c2l(l,!0)-o)*T,(v.c2l(u,!0)-o)*T],l>0){var d=v.c2l(l);v._lowerLogErrorBound||(v._lowerLogErrorBound=d),v._lowerErrorBound=Math.min(v._lowerLogErrorBound,d)}}else i[s]=[-a[0]*T,a[1]*T]}return i}se.exports=function(f,k,T){var v=[C(f.x,f.error_x,k[0],T.xaxis),C(f.y,f.error_y,k[1],T.yaxis),C(f.z,f.error_z,k[2],T.zaxis)],c=function(u){for(var d=0;d<u.length;d++)if(u[d])return u[d].length;return 0}(v);if(0===c)return null;for(var i=new Array(c),s=0;s<c;s++){for(var a=[[0,0,0],[0,0,0]],o=0;o<3;o++)if(v[o])for(var l=0;l<2;l++)a[l][o]=v[o][s][l];i[s]=a}return i}},58925:function(se,U,r){"use strict";var I=r(9330).gl_line3d,C=r(9330).gl_scatter3d,f=r(9330).gl_error3d,k=r(9330).gl_mesh3d,T=r(9330).delaunay_triangulate,v=r(71828),c=r(78614),i=r(81697).formatColor,s=r(39984),a=r(29659),o=r(87381),l=r(89298),u=r(23469).appendArrayPointValue,d=r(67336);function g(m,D){this.scene=m,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=g.prototype;function w(m){return null==m?0:m.indexOf("left")>-1?-1:m.indexOf("right")>-1?1:0}function y(m){return null==m?0:m.indexOf("top")>-1?-1:m.indexOf("bottom")>-1?1:0}function p(m,D){return D(4*m)}function _(m){return o[m]}function x(m,D,S,O,P){var R=null;if(v.isArrayOrTypedArray(m)){R=[];for(var F=0;F<D;F++)R[F]=void 0===m[F]?O:S(m[F],P)}else R=S(m,v.identity);return R}function b(m){if(v.isArrayOrTypedArray(m)){var D=m[0];return v.isArrayOrTypedArray(D)&&(m=D),"rgb("+m.slice(0,3).map(function(S){return Math.round(255*S)})+")"}return null}function M(m){return v.isArrayOrTypedArray(m)?4===m.length&&"number"==typeof m[0]?b(m):m.map(b):null}h.handlePick=function(m){if(m.object&&(m.object===this.linePlot||m.object===this.delaunayMesh||m.object===this.textMarkers||m.object===this.scatterPlot)){var D=m.index=m.data.index;return m.object.highlight&&m.object.highlight(null),this.scatterPlot&&(m.object=this.scatterPlot,this.scatterPlot.highlight(m.data)),m.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||0===this.textLabels[D])&&(m.textLabel=this.textLabels[D]):m.textLabel=this.textLabels),m.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}},h.update=function(m){var D,S,O,P,R=this.scene.glplot.gl,F=a.solid;this.data=m;var B=function($,G){var H,X,K,ue,ae,ne,Q=[],ie=$.fullSceneLayout,le=$.dataScale,fe=ie.xaxis,he=ie.yaxis,pe=ie.zaxis,xe=G.marker,Ee=G.line,Re=G.x||[],ke=G.y||[],Te=G.z||[],we=Re.length,je=G.xcalendar,Ce=G.ycalendar,Ie=G.zcalendar;for(ae=0;ae<we;ae++)H=fe.d2l(Re[ae],0,je)*le[0],X=he.d2l(ke[ae],0,Ce)*le[1],K=pe.d2l(Te[ae],0,Ie)*le[2],Q[ae]=[H,X,K];if(Array.isArray(G.text))ne=G.text;else if(void 0!==G.text)for(ne=new Array(we),ae=0;ae<we;ae++)ne[ae]=G.text;function ge(et,nt){var ct=ie[et];return l.tickText(ct,ct.d2l(nt),!0).text}var me=G.texttemplate;if(me){var ce=$.fullLayout._d3locale,Ae=Array.isArray(me),Ne=Ae?Math.min(me.length,we):we,De=Ae?function(et){return me[et]}:function(){return me};for(ne=new Array(Ne),ae=0;ae<Ne;ae++){var qe={x:Re[ae],y:ke[ae],z:Te[ae]},Ke={xLabel:ge("xaxis",Re[ae]),yLabel:ge("yaxis",ke[ae]),zLabel:ge("zaxis",Te[ae])},be={};u(be,G,ae);var Oe=G._meta||{};ne[ae]=v.texttemplateString(De(ae),Ke,ce,be,qe,Oe)}}if(ue={position:Q,mode:G.mode,text:ne},"line"in G&&(ue.lineColor=i(Ee,1,we),ue.lineWidth=Ee.width,ue.lineDashes=Ee.dash),"marker"in G){var Le=s(G);ue.scatterColor=i(xe,1,we),ue.scatterSize=x(xe.size,we,p,20,Le),ue.scatterMarker=x(xe.symbol,we,_,"\u25cf"),ue.scatterLineWidth=xe.line.width,ue.scatterLineColor=i(xe.line,1,we),ue.scatterAngle=0}"textposition"in G&&(ue.textOffset=function(et){var nt=[0,0];if(Array.isArray(et))for(var ct=0;ct<et.length;ct++)nt[ct]=[0,0],et[ct]&&(nt[ct][0]=w(et[ct]),nt[ct][1]=y(et[ct]));else nt[0]=w(et),nt[1]=y(et);return nt}(G.textposition),ue.textColor=i(G.textfont,1,we),ue.textSize=x(G.textfont.size,we,v.identity,12),ue.textFont=G.textfont.family,ue.textAngle=0);var Ue=["x","y","z"];for(ue.project=[!1,!1,!1],ue.projectScale=[1,1,1],ue.projectOpacity=[1,1,1],ae=0;ae<3;++ae){var Ze=G.projection[Ue[ae]];(ue.project[ae]=Ze.show)&&(ue.projectOpacity[ae]=Ze.opacity,ue.projectScale[ae]=Ze.scale)}ue.errorBounds=d(G,le,ie);var We=function(et){for(var nt=[0,0,0],ct=[[0,0,0],[0,0,0],[0,0,0]],yt=[1,1,1],ut=0;ut<3;ut++){var Ct=et[ut];Ct&&!1!==Ct.copy_zstyle&&!1!==et[2].visible&&(Ct=et[2]),Ct&&Ct.visible&&(nt[ut]=Ct.width/2,ct[ut]=c(Ct.color),yt[ut]=Ct.thickness)}return{capSize:nt,color:ct,lineWidth:yt}}([G.error_x,G.error_y,G.error_z]);return ue.errorColor=We.color,ue.errorLineWidth=We.lineWidth,ue.errorCapSize=We.capSize,ue.delaunayAxis=G.surfaceaxis,ue.delaunayColor=c(G.surfacecolor),ue}(this.scene,m);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in a&&(F=a[B.lineDashes]),this.color=M(B.scatterColor)||M(B.lineColor),this.dataPoints=B.position,D={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:m.opacity,connectGaps:m.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=I(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var J=m.opacity;if(m.marker&&void 0!==m.marker.opacity&&(J*=m.marker.opacity),S={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:J,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(S):(this.scatterPlot=C(S),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),P={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:m.opacity},this.textLabels=m.hovertext||m.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(P):(this.textMarkers=C(P),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),O={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:m.opacity},this.errorBars?B.errorBounds?this.errorBars.update(O):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=f(O),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var z=function($,G,H){var X,K=(H+1)%3,ue=(H+2)%3,ae=[],ne=[];for(X=0;X<$.length;++X){var Q=$[X];!isNaN(Q[K])&&isFinite(Q[K])&&!isNaN(Q[ue])&&isFinite(Q[ue])&&(ae.push([Q[K],Q[ue]]),ne.push(X))}var ie=T(ae);for(X=0;X<ie.length;++X)for(var le=ie[X],fe=0;fe<le.length;++fe)le[fe]=ne[le[fe]];return{positions:$,cells:ie,meshColor:G}}(B.position,B.delaunayColor,B.delaunayAxis);z.opacity=m.opacity,this.delaunayMesh?this.delaunayMesh.update(z):(z.gl=R,this.delaunayMesh=k(z),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},se.exports=function(m,D){var S=new g(m,D.uid);return S.update(D),S}},21428:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(34098),k=r(49508),T=r(11058),v=r(82410),c=r(44542);se.exports=function(i,s,a,o){function l(_,x){return C.coerce(i,s,c,_,x)}var _,x,b,M,m,D,S,O;if(_=i,x=s,M=o,m=0,D=(b=l)("x"),S=b("y"),O=b("z"),I.getComponentMethod("calendars","handleTraceDefaults")(_,x,["x","y","z"],M),D&&S&&O&&(m=Math.min(D.length,S.length,O.length),x._length=x._xlength=x._ylength=x._zlength=m),m){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),l("mode"),f.hasLines(s)&&(l("connectgaps"),T(i,s,a,o,l)),f.hasMarkers(s)&&k(i,s,a,o,l,{noSelect:!0,noAngle:!0}),f.hasText(s)&&(l("texttemplate"),v(i,s,o,l,{noSelect:!0}));var d=(s.line||{}).color,g=(s.marker||{}).color;l("surfaceaxis")>=0&&l("surfacecolor",d||g);for(var h=["x","y","z"],w=0;w<3;++w){var y="projection."+h[w];l(y+".show")&&(l(y+".opacity"),l(y+".scale"))}var p=I.getComponentMethod("errorbars","supplyDefaults");p(i,s,d||g||a,{axis:"z"}),p(i,s,d||g||a,{axis:"y",inherit:"z"}),p(i,s,d||g||a,{axis:"x",inherit:"z"})}else s.visible=!1}},13551:function(se,U,r){"use strict";se.exports={plot:r(58925),attributes:r(44542),markerSymbols:r(87381),supplyDefaults:r(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:r(36563),moduleType:"trace",name:"scatter3d",basePlotModule:r(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function(se,U,r){"use strict";var I=r(82196),C=r(9012),f=r(5386).fF,k=r(5386).si,T=r(50693),v=r(1426).extendFlat,c=I.marker,i=I.line,s=c.line;se.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:v({},I.mode,{dflt:"markers"}),text:v({},I.text,{}),texttemplate:k({editType:"plot"},{keys:["a","b","text"]}),hovertext:v({},I.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,backoff:i.backoff,shape:v({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:I.connectgaps,fill:v({},I.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:I.fillcolor,marker:v({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,angle:c.angle,angleref:c.angleref,standoff:c.standoff,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:v({width:s.width,editType:"calc"},T("marker.line")),gradient:c.gradient,editType:"calc"},T("marker")),textfont:I.textfont,textposition:I.textposition,selected:I.selected,unselected:I.unselected,hoverinfo:v({},C.hoverinfo,{flags:["a","b","text","name"]}),hoveron:I.hoveron,hovertemplate:f()}},34618:function(se,U,r){"use strict";var I=r(92770),C=r(36922),f=r(75225),k=r(66279),T=r(47761).calcMarkerSize,v=r(22882);se.exports=function(c,i){var s=i._carpetTrace=v(c,i);if(s&&s.visible&&"legendonly"!==s.visible){var a;i.xaxis=s.xaxis,i.yaxis=s.yaxis;var o,l,u=i._length,d=new Array(u),g=!1;for(a=0;a<u;a++)if(l=i.b[a],I(o=i.a[a])&&I(l)){var h=s.ab2xy(+o,+l,!0),w=s.isVisible(+o,+l);w||(g=!0),d[a]={x:h[0],y:h[1],a:o,b:l,vis:w}}else d[a]={x:!1,y:!1};return i._needsCull=g,d[0].carpet=s,d[0].trace=i,T(i,u),C(c,i),f(d,i),k(d,i),d}}},98965:function(se,U,r){"use strict";var I=r(71828),C=r(47581),f=r(34098),k=r(49508),T=r(11058),v=r(94039),c=r(82410),i=r(28908),s=r(97001);se.exports=function(a,o,l,u){function d(p,_){return I.coerce(a,o,s,p,_)}d("carpet"),o.xaxis="x",o.yaxis="y";var g=d("a"),h=d("b"),w=Math.min(g.length,h.length);if(w){o._length=w,d("text"),d("texttemplate"),d("hovertext"),d("mode",w<C.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(o)&&(T(a,o,l,u,d,{backoff:!0}),v(a,o,d),d("connectgaps")),f.hasMarkers(o)&&k(a,o,l,u,d,{gradient:!0}),f.hasText(o)&&c(a,o,u,d);var y=[];(f.hasMarkers(o)||f.hasText(o))&&(d("marker.maxdisplayed"),y.push("points")),d("fill"),"none"!==o.fill&&(i(a,o,l,d),f.hasLines(o)||v(a,o,d)),"tonext"!==o.fill&&"toself"!==o.fill||y.push("fills"),"fills"!==d("hoveron",y.join("+")||"points")&&d("hovertemplate"),I.coerceSelectionMarkerOpacity(o,d)}else o.visible=!1}},16165:function(se){"use strict";se.exports=function(U,r,I,C,f){var k=C[f];return U.a=k.a,U.b=k.b,U.y=k.y,U}},48953:function(se){"use strict";se.exports=function(U,r){var I={},C=r._carpet,f=C.ab2ij([U.a,U.b]),k=Math.floor(f[0]),T=f[0]-k,v=Math.floor(f[1]),i=C.evalxy([],k,v,T,f[1]-v);return I.yLabel=i[1].toFixed(3),I}},22931:function(se,U,r){"use strict";var I=r(33720),C=r(71828).fillText;se.exports=function(f,k,T,v){var c=I(f,k,T,v);if(c&&!1!==c[0].index){var i=c[0];if(void 0===i.index){var a=f.xa._length,o=a*(1-i.y0/f.ya._length)/2,l=a-o;return i.x0=Math.max(Math.min(i.x0,l),o),i.x1=Math.max(Math.min(i.x1,l),o),c}var u=i.cd[i.index];i.a=u.a,i.b=u.b,i.xLabelVal=void 0,i.yLabelVal=void 0;var d=i.trace,g=d._carpet,h=d._module.formatLabels(u,d);i.yLabel=h.yLabel,delete i.text;var w=[];if(!d.hovertemplate){var y=(u.hi||d.hoverinfo).split("+");-1!==y.indexOf("all")&&(y=["a","b","text"]),-1!==y.indexOf("a")&&p(g.aaxis,u.a),-1!==y.indexOf("b")&&p(g.baxis,u.b),w.push("y: "+i.yLabel),-1!==y.indexOf("text")&&C(u,d,w),i.extraText=w.join("<br>")}return c}function p(_,x){var b;b=_.labelprefix&&_.labelprefix.length>0?_.labelprefix.replace(/ = $/,""):_._hovertitle,w.push(b+": "+x.toFixed(3)+_.labelsuffix)}}},46858:function(se,U,r){"use strict";se.exports={attributes:r(97001),supplyDefaults:r(98965),colorbar:r(4898),formatLabels:r(48953),calc:r(34618),plot:r(1913),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(22931),selectPoints:r(98002),eventData:r(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:r(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function(se,U,r){"use strict";var I=r(32663),C=r(89298),f=r(91424);se.exports=function(k,T,v,c){var i,s,a,o=v[0][0].carpet,l=C.getFromId(k,o.xaxis||"x"),u=C.getFromId(k,o.yaxis||"y"),d={xaxis:l,yaxis:u,plot:T.plot};for(i=0;i<v.length;i++)(s=v[i][0].trace)._xA=l,s._yA=u;for(I(k,d,v,c),i=0;i<v.length;i++)a=c.selectAll("g.trace"+(s=v[i][0].trace).uid+" .js-line"),f.setClipUrl(a,v[i][0].carpet._clipPathId,k)}},19316:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(82196),k=r(9012),T=r(50693),v=r(79952).P,c=r(1426).extendFlat,i=r(30962).overrideAll,s=f.marker,a=f.line,o=s.line;se.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:c({},f.mode,{dflt:"markers"}),text:c({},f.text,{}),texttemplate:C({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:c({},f.hovertext,{}),textfont:f.textfont,textposition:f.textposition,line:{color:a.color,width:a.width,dash:v},connectgaps:f.connectgaps,marker:c({symbol:s.symbol,opacity:s.opacity,angle:s.angle,angleref:c({},s.angleref,{values:["previous","up","north"]}),standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,colorbar:s.colorbar,line:c({width:o.width},T("marker.line")),gradient:s.gradient},T("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:f.fillcolor,selected:f.selected,unselected:f.unselected,hoverinfo:c({},k.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:I()},"calc","nested")},84622:function(se,U,r){"use strict";var I=r(92770),C=r(50606).BADNUM,f=r(36922),k=r(75225),T=r(66279),v=r(71828)._;function c(i){return i&&"string"==typeof i}se.exports=function(i,s){var a,o=Array.isArray(s.locations),l=o?s.locations.length:s._length,u=new Array(l);a=s.geojson?function(p){return c(p)||I(p)}:c;for(var d=0;d<l;d++){var g=u[d]={};if(o){var h=s.locations[d];g.loc=a(h)?h:null}else{var w=s.lon[d],y=s.lat[d];g.lonlat=I(w)&&I(y)?[+w,+y]:[C,C]}}return k(u,s),f(i,s),T(u,s),l&&(u[0].t={labels:{lat:v(i,"lat:")+" ",lon:v(i,"lon:")+" "}}),u}},10659:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(49508),k=r(11058),T=r(82410),v=r(28908),c=r(19316);se.exports=function(i,s,a,o){function l(p,_){return I.coerce(i,s,c,p,_)}var u,d=l("locations");if(d&&d.length){var g,h=l("geojson");("string"==typeof h&&""!==h||I.isPlainObject(h))&&(g="geojson-id"),"geojson-id"===l("locationmode",g)&&l("featureidkey"),u=d.length}else{var w=l("lon")||[],y=l("lat")||[];u=Math.min(w.length,y.length)}u?(s._length=u,l("text"),l("hovertext"),l("hovertemplate"),l("mode"),C.hasLines(s)&&(k(i,s,a,o,l),l("connectgaps")),C.hasMarkers(s)&&f(i,s,a,o,l,{gradient:!0}),C.hasText(s)&&(l("texttemplate"),T(i,s,o,l)),l("fill"),"none"!==s.fill&&v(i,s,a,l),I.coerceSelectionMarkerOpacity(s,l)):s.visible=!1}},84084:function(se){"use strict";se.exports=function(U,r,I,C,f){U.lon=r.lon,U.lat=r.lat,U.location=r.loc?r.loc:null;var k=C[f];return k.fIn&&k.fIn.properties&&(U.properties=k.fIn.properties),U}},82719:function(se,U,r){"use strict";var I=r(89298);se.exports=function(C,f,k){var T={},v=k[f.geo]._subplot.mockAxis,c=C.lonlat;return T.lonLabel=I.tickText(v,v.c2l(c[0]),!0).text,T.latLabel=I.tickText(v,v.c2l(c[1]),!0).text,T}},14977:function(se,U,r){"use strict";var I=r(30211),C=r(50606).BADNUM,f=r(34603),k=r(71828).fillText,T=r(19316);se.exports=function(v,c,i){var s=v.cd,a=s[0].trace,o=v.xa,l=v.ya,u=v.subplot,d=u.projection.isLonLatOverEdges,g=u.project;if(I.getClosest(s,function(b){var M=b.lonlat;if(M[0]===C||d(M))return 1/0;var m=g(M),D=g([c,i]),S=Math.abs(m[0]-D[0]),O=Math.abs(m[1]-D[1]),P=Math.max(3,b.mrc||0);return Math.max(Math.sqrt(S*S+O*O)-P,1-3/P)},v),!1!==v.index){var h=s[v.index],w=h.lonlat,y=[o.c2p(w),l.c2p(w)],p=h.mrc||1;v.x0=y[0]-p,v.x1=y[0]+p,v.y0=y[1]-p,v.y1=y[1]+p,v.loc=h.loc,v.lon=w[0],v.lat=w[1];var _={};_[a.geo]={_subplot:u};var x=a._module.formatLabels(h,a,_);return v.lonLabel=x.lonLabel,v.latLabel=x.latLabel,v.color=f(a,h),v.extraText=function(b,M,m,D){if(!b.hovertemplate){var S=M.hi||b.hoverinfo,O="all"===S?T.hoverinfo.flags:S.split("+"),P=-1!==O.indexOf("location")&&Array.isArray(b.locations),R=-1!==O.indexOf("lon"),F=-1!==O.indexOf("lat"),B=-1!==O.indexOf("text"),J=[];return P?J.push(M.loc):R&&F?J.push("("+z(m.latLabel)+", "+z(m.lonLabel)+")"):R?J.push(D.lon+z(m.lonLabel)):F&&J.push(D.lat+z(m.latLabel)),B&&k(M,b,J),J.join("<br>")}function z($){return $+"\xb0"}}(a,h,v,s[0].t.labels),v.hovertemplate=a.hovertemplate,[v]}}},17988:function(se,U,r){"use strict";se.exports={attributes:r(19316),supplyDefaults:r(10659),colorbar:r(4898),formatLabels:r(82719),calc:r(84622),calcGeoJSON:r(89171).calcGeoJSON,plot:r(89171).plot,style:r(33095),styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(14977),eventData:r(84084),selectPoints:r(20548),moduleType:"trace",name:"scattergeo",basePlotModule:r(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(90973).getTopojsonFeatures,k=r(18214),T=r(41327),v=r(71739).findExtremes,c=r(50606).BADNUM,i=r(47761).calcMarkerSize,s=r(34098),a=r(33095);se.exports={calcGeoJSON:function(o,l){var u,d,g=o[0].trace,h=l[g.geo],w=h._subplot,y=g._length;if(Array.isArray(g.locations)){var p=g.locationmode,_="geojson-id"===p?T.extractTraceFeature(o):f(g,w.topojson);for(u=0;u<y;u++){d=o[u];var x="geojson-id"===p?d.fOut:T.locationToFeature(p,d.loc,_);d.lonlat=x?x.properties.ct:[c,c]}}var b,M,m={padded:!0};if("geojson"===h.fitbounds&&"geojson-id"===g.locationmode){var D=T.computeBbox(T.getTraceGeojson(g));b=[D[0],D[2]],M=[D[1],D[3]]}else{for(b=new Array(y),M=new Array(y),u=0;u<y;u++)b[u]=(d=o[u]).lonlat[0],M[u]=d.lonlat[1];m.ppad=i(g,y)}g._extremes.lon=v(h.lonaxis._ax,b,m),g._extremes.lat=v(h.lataxis._ax,M,m)},plot:function(o,l,u){var d=l.layers.frontplot.select(".scatterlayer"),g=C.makeTraceGroups(d,u,"trace scattergeo");function h(w,y){w.lonlat[0]===c&&I.select(y).remove()}g.selectAll("*").remove(),g.each(function(w){var y=I.select(this),p=w[0].trace;if(s.hasLines(p)||"none"!==p.fill){var _=k.calcTraceToLineCoords(w),x="none"!==p.fill?k.makePolygon(_):k.makeLine(_);y.selectAll("path.js-line").data([{geojson:x,trace:p}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}s.hasMarkers(p)&&y.selectAll("path.point").data(C.identity).enter().append("path").classed("point",!0).each(function(b){h(b,this)}),s.hasText(p)&&y.selectAll("g").data(C.identity).enter().append("g").append("text").each(function(b){h(b,this)}),a(o,w)})}}},20548:function(se,U,r){"use strict";var I=r(34098),C=r(50606).BADNUM;se.exports=function(f,k){var T,v,c,i,s,a=f.cd,o=f.xaxis,l=f.yaxis,u=[],d=a[0].trace;if(!I.hasMarkers(d)&&!I.hasText(d))return[];if(!1===k)for(s=0;s<a.length;s++)a[s].selected=0;else for(s=0;s<a.length;s++)(v=(T=a[s]).lonlat)[0]!==C&&(c=o.c2p(v),i=l.c2p(v),k.contains([c,i],null,s,f)?(u.push({pointNumber:s,lon:v[0],lat:v[1]}),T.selected=1):T.selected=0);return u}},33095:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(7901),k=r(16296),T=k.stylePoints,v=k.styleText;se.exports=function(c,i){var s,a,o,l;i&&(s=c,o=(a=i)[0].trace,(l=a[0].node3).style("opacity",a[0].trace.opacity),T(l,o,s),v(l,o,s),l.selectAll("path.js-line").style("fill","none").each(function(u){var d=I.select(this),g=u.trace,h=g.line||{};d.call(f.stroke,h.color).call(C.dashLine,h.dash||"",h.width||0),"none"!==g.fill&&d.call(f.fill,g.fillcolor)}))}},42341:function(se,U,r){"use strict";var I=r(9012),C=r(82196),f=r(12663).axisHoverFormat,k=r(50693),T=r(78607),v=r(1426).extendFlat,c=r(30962).overrideAll,i=r(78232).DASHES,s=C.line,a=C.marker,o=a.line,l=se.exports=c({x:C.x,x0:C.x0,dx:C.dx,y:C.y,y0:C.y0,dy:C.dy,xperiod:C.xperiod,yperiod:C.yperiod,xperiod0:C.xperiod0,yperiod0:C.yperiod0,xperiodalignment:C.xperiodalignment,yperiodalignment:C.yperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),text:C.text,hovertext:C.hovertext,textposition:C.textposition,textfont:C.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:s.color,width:s.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:T(i),dflt:"solid"}},marker:v({},k("marker"),{symbol:a.symbol,angle:a.angle,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:a.opacity,colorbar:a.colorbar,line:v({},k("marker.line"),{width:o.width})}),connectgaps:C.connectgaps,fill:v({},C.fill,{dflt:"none"}),fillcolor:C.fillcolor,selected:{marker:C.selected.marker,textfont:C.selected.textfont},unselected:{marker:C.unselected.marker,textfont:C.unselected.textfont},opacity:I.opacity},"calc","nested");l.x.editType=l.y.editType=l.x0.editType=l.y0.editType="calc+clearAxisTypes",l.hovertemplate=C.hovertemplate,l.texttemplate=C.texttemplate},72156:function(se,U,r){"use strict";var I=r(20794);se.exports={moduleType:"trace",name:"scattergl",basePlotModule:r(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:r(42341),supplyDefaults:r(47148),crossTraceDefaults:r(34936),colorbar:r(4898),formatLabels:r(68101),calc:r(45032),hoverPoints:I.hoverPoints,selectPoints:r(58147),meta:{}}},45032:function(se,U,r){"use strict";var I=r(88294),C=r(71828),f=r(41675),k=r(71739).findExtremes,T=r(42973),v=r(47761),c=v.calcMarkerSize,i=v.calcAxisExpansion,s=v.setFirstScatter,a=r(36922),o=r(19635),l=r(38967),u=r(50606).BADNUM,d=r(78232).TOO_MANY_POINTS;function g(h,w,y){var p=h._extremes[w._id],_=k(w,y._bnds,{padded:!0});p.min=p.min.concat(_.min),p.max=p.max.concat(_.max)}se.exports=function(h,w){var y,p=h._fullLayout,_=w._xA=f.getFromId(h,w.xaxis,"x"),x=w._yA=f.getFromId(h,w.yaxis,"y"),b=p._plots[w.xaxis+w.yaxis],M=w._length,m=M>=d,D=2*M,S={},O=_.makeCalcdata(w,"x"),P=x.makeCalcdata(w,"y"),R=T(w,_,"x",O),F=T(w,x,"y",P),B=R.vals,J=F.vals;w._x=B,w._y=J,w.xperiodalignment&&(w._origX=O,w._xStarts=R.starts,w._xEnds=R.ends),w.yperiodalignment&&(w._origY=P,w._yStarts=F.starts,w._yEnds=F.ends);var z=new Array(D),$=new Array(M);for(y=0;y<M;y++)z[2*y]=B[y]===u?NaN:B[y],z[2*y+1]=J[y]===u?NaN:J[y],$[y]=y;if("log"===_.type)for(y=0;y<D;y+=2)z[y]=_.c2l(z[y]);if("log"===x.type)for(y=1;y<D;y+=2)z[y]=x.c2l(z[y]);m&&"log"!==_.type&&"log"!==x.type?S.tree=I(z):S.ids=$,a(h,w);var G,H=function(K,ue,ae,ne,Q,ie){var le=o.style(K,ae);if(le.marker&&(le.marker.positions=ne),le.line&&ne.length>1&&C.extendFlat(le.line,o.linePositions(K,ae,ne)),le.errorX||le.errorY){var fe=o.errorBarPositions(K,ae,ne,Q,ie);le.errorX&&C.extendFlat(le.errorX,fe.x),le.errorY&&C.extendFlat(le.errorY,fe.y)}return le.text&&(C.extendFlat(le.text,{positions:ne},o.textPosition(K,ae,le.text,le.marker)),C.extendFlat(le.textSel,{positions:ne},o.textPosition(K,ae,le.text,le.markerSel)),C.extendFlat(le.textUnsel,{positions:ne},o.textPosition(K,ae,le.text,le.markerUnsel))),le}(h,0,w,z,B,J),X=l(h,b);return s(p,w),m?H.marker&&(G=H.marker.sizeAvg||Math.max(H.marker.size,3)):G=c(w,M),i(h,w,_,x,B,J,G),H.errorX&&g(w,_,H.errorX),H.errorY&&g(w,x,H.errorY),H.fill&&!X.fill2d&&(X.fill2d=!0),H.marker&&!X.scatter2d&&(X.scatter2d=!0),H.line&&!X.line2d&&(X.line2d=!0),!H.errorX&&!H.errorY||X.error2d||(X.error2d=!0),H.text&&!X.glText&&(X.glText=!0),H.marker&&(H.marker.snap=M),X.lineOptions.push(H.line),X.errorXOptions.push(H.errorX),X.errorYOptions.push(H.errorY),X.fillOptions.push(H.fill),X.markerOptions.push(H.marker),X.markerSelectedOptions.push(H.markerSel),X.markerUnselectedOptions.push(H.markerUnsel),X.textOptions.push(H.text),X.textSelectedOptions.push(H.textSel),X.textUnselectedOptions.push(H.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),S._scene=X,S.index=X.count,S.x=B,S.y=J,S.positions=z,X.count++,[{x:!1,y:!1,t:S,trace:w}]}},78232:function(se){"use strict";se.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function(se,U,r){"use strict";var I=r(92770),C=r(82019),f=r(25075),k=r(73972),T=r(71828),v=r(91424),c=r(41675),i=r(81697).formatColor,s=r(34098),a=r(39984),o=r(68645),l=r(78232),u=r(37822).DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},g=r(23469).appendArrayPointValue;function h(O,P){var R,F=O._fullLayout,B=P._length,J=P.textfont,z=P.textposition,$=Array.isArray(z)?z:[z],G=J.color,H=J.size,X=J.family,K={},ue=O._context.plotGlPixelRatio,ae=P.texttemplate;if(ae){K.text=[];var ne=F._d3locale,Q=Array.isArray(ae),ie=Q?Math.min(ae.length,B):B,le=Q?function(ke){return ae[ke]}:function(){return ae};for(R=0;R<ie;R++){var fe={i:R},he=P._module.formatLabels(fe,P,F),pe={};g(pe,P,R);var xe=P._meta||{};K.text.push(T.texttemplateString(le(R),he,ne,pe,fe,xe))}}else K.text=Array.isArray(P.text)&&P.text.length<B?P.text.slice():P.text;if(Array.isArray(K.text))for(R=K.text.length;R<B;R++)K.text[R]="";for(K.opacity=P.opacity,K.font={},K.align=[],K.baseline=[],R=0;R<$.length;R++){var Ee=$[R].split(/\s+/);switch(Ee[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(Ee[1])}switch(Ee[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(Ee[0])}}if(Array.isArray(G))for(K.color=new Array(B),R=0;R<B;R++)K.color[R]=G[R];else K.color=G;if(T.isArrayOrTypedArray(H)||Array.isArray(X))for(K.font=new Array(B),R=0;R<B;R++){var Re=K.font[R]={};Re.size=(T.isTypedArray(H)?H[R]:Array.isArray(H)?I(H[R])?H[R]:0:H)*ue,Re.family=Array.isArray(X)?X[R]:X}else K.font={size:H*ue,family:X};return K}function w(O,P){var R,F,B=P._length,J=P.marker,z={},$=T.isArrayOrTypedArray(J.symbol),G=T.isArrayOrTypedArray(J.angle),H=T.isArrayOrTypedArray(J.color),X=T.isArrayOrTypedArray(J.line.color),K=T.isArrayOrTypedArray(J.opacity),ue=T.isArrayOrTypedArray(J.size),ae=T.isArrayOrTypedArray(J.line.width);if($||(F=o.isOpenSymbol(J.symbol)),$||H||X||K||G){z.symbols=new Array(B),z.angles=new Array(B),z.colors=new Array(B),z.borderColors=new Array(B);var ne=J.symbol,Q=J.angle,ie=i(J,J.opacity,B),le=i(J.line,J.opacity,B);if(!Array.isArray(le[0])){var fe=le;for(le=Array(B),R=0;R<B;R++)le[R]=fe}if(!Array.isArray(ie[0])){var he=ie;for(ie=Array(B),R=0;R<B;R++)ie[R]=he}if(!Array.isArray(ne)){var pe=ne;for(ne=Array(B),R=0;R<B;R++)ne[R]=pe}if(!Array.isArray(Q)){var xe=Q;for(Q=Array(B),R=0;R<B;R++)Q[R]=xe}for(z.symbols=ne,z.angles=Q,z.colors=ie,z.borderColors=le,R=0;R<B;R++)$&&(F=o.isOpenSymbol(J.symbol[R])),F&&(le[R]=ie[R].slice(),ie[R]=ie[R].slice(),ie[R][3]=0);for(z.opacity=P.opacity,z.markers=new Array(B),R=0;R<B;R++)z.markers[R]=S({mx:z.symbols[R],ma:z.angles[R]},P)}else F?(z.color=f(J.color,"uint8"),z.color[3]=0,z.borderColor=f(J.color,"uint8")):(z.color=f(J.color,"uint8"),z.borderColor=f(J.line.color,"uint8")),z.opacity=P.opacity*J.opacity,z.marker=S({mx:J.symbol,ma:J.angle},P);var Ee,Re=a(P,1);if(ue||ae){var ke,Te=z.sizes=new Array(B),we=z.borderSizes=new Array(B),je=0;if(ue){for(R=0;R<B;R++)Te[R]=Re(J.size[R]),je+=Te[R];ke=je/B}else for(Ee=Re(J.size),R=0;R<B;R++)Te[R]=Ee;if(ae)for(R=0;R<B;R++)we[R]=J.line.width[R];else for(Ee=J.line.width,R=0;R<B;R++)we[R]=Ee;z.sizeAvg=ke}else z.size=Re(J&&J.size||10),z.borderSizes=Re(J.line.width);return z}function y(O,P,R){var B={};return R&&(R.marker&&R.marker.symbol?B=w(0,T.extendFlat({},P.marker,R.marker)):R.marker&&(R.marker.size&&(B.size=R.marker.size),R.marker.color&&(B.colors=R.marker.color),void 0!==R.marker.opacity&&(B.opacity=R.marker.opacity))),B}function p(O,P,R){var F={};if(!R)return F;if(R.textfont){var B={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:T.extendFlat({},P.textfont)};R.textfont&&T.extendFlat(B.textfont,R.textfont),F=h(O,B)}return F}function _(O,P,R){var F={capSize:2*P.width*R,lineWidth:P.thickness*R,color:P.color};return P.copy_ystyle&&(F=O.error_y),F}var x=l.SYMBOL_SDF_SIZE,b=l.SYMBOL_SIZE,M=l.SYMBOL_STROKE,m={},D=v.symbolFuncs[0](.05*b);function S(O,P){var R,F,B=O.mx;if("circle"===B)return null;var J=v.symbolNumber(B),z=v.symbolFuncs[J%100],$=!!v.symbolNoDot[J%100],G=!!v.symbolNoFill[J%100],H=o.isDotSymbol(B);if(O.ma&&(B+="_"+O.ma),m[B])return m[B];var X=v.getMarkerAngle(O,P);return R=H&&!$?z(1.1*b,X)+D:z(b,X),F=C(R,{w:x,h:x,viewBox:[-b,-b,b,b],stroke:G?M:-M}),m[B]=F,F||null}se.exports={style:function(O,P){var R,F={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=O._context.plotGlPixelRatio;if(!0!==P.visible)return F;if(s.hasText(P)&&(F.text=h(O,P),F.textSel=p(O,P,P.selected),F.textUnsel=p(O,P,P.unselected)),s.hasMarkers(P)&&(F.marker=w(0,P),F.markerSel=y(0,P,P.selected),F.markerUnsel=y(0,P,P.unselected),!P.unselected&&T.isArrayOrTypedArray(P.marker.opacity))){var J=P.marker.opacity;for(F.markerUnsel.opacity=new Array(J.length),R=0;R<J.length;R++)F.markerUnsel.opacity[R]=u*J[R]}if(s.hasLines(P)){F.line={overlay:!0,thickness:P.line.width*B,color:P.line.color,opacity:P.opacity};var z=(l.DASHES[P.line.dash]||[1]).slice();for(R=0;R<z.length;++R)z[R]*=P.line.width*B;F.line.dashes=z}return P.error_x&&P.error_x.visible&&(F.errorX=_(P,P.error_x,B)),P.error_y&&P.error_y.visible&&(F.errorY=_(P,P.error_y,B)),P.fill&&"none"!==P.fill&&(F.fill={closed:!0,fill:P.fillcolor,thickness:0}),F},markerStyle:w,markerSelection:y,linePositions:function(O,P,R){var F,B,J=R.length,z=J/2;if(s.hasLines(P)&&z)if("hv"===P.line.shape){for(F=[],B=0;B<z-1;B++)isNaN(R[2*B])||isNaN(R[2*B+1])?F.push(NaN,NaN,NaN,NaN):(F.push(R[2*B],R[2*B+1]),isNaN(R[2*B+2])||isNaN(R[2*B+3])?F.push(NaN,NaN):F.push(R[2*B+2],R[2*B+1]));F.push(R[J-2],R[J-1])}else if("hvh"===P.line.shape){for(F=[],B=0;B<z-1;B++)if(isNaN(R[2*B])||isNaN(R[2*B+1])||isNaN(R[2*B+2])||isNaN(R[2*B+3]))isNaN(R[2*B])||isNaN(R[2*B+1])?F.push(NaN,NaN):F.push(R[2*B],R[2*B+1]),F.push(NaN,NaN);else{var $=(R[2*B]+R[2*B+2])/2;F.push(R[2*B],R[2*B+1],$,R[2*B+1],$,R[2*B+3])}F.push(R[J-2],R[J-1])}else if("vhv"===P.line.shape){for(F=[],B=0;B<z-1;B++)if(isNaN(R[2*B])||isNaN(R[2*B+1])||isNaN(R[2*B+2])||isNaN(R[2*B+3]))isNaN(R[2*B])||isNaN(R[2*B+1])?F.push(NaN,NaN):F.push(R[2*B],R[2*B+1]),F.push(NaN,NaN);else{var G=(R[2*B+1]+R[2*B+3])/2;F.push(R[2*B],R[2*B+1],R[2*B],G,R[2*B+2],G)}F.push(R[J-2],R[J-1])}else if("vh"===P.line.shape){for(F=[],B=0;B<z-1;B++)isNaN(R[2*B])||isNaN(R[2*B+1])?F.push(NaN,NaN,NaN,NaN):(F.push(R[2*B],R[2*B+1]),isNaN(R[2*B+2])||isNaN(R[2*B+3])?F.push(NaN,NaN):F.push(R[2*B],R[2*B+3]));F.push(R[J-2],R[J-1])}else F=R;var H=!1;for(B=0;B<F.length;B++)if(isNaN(F[B])){H=!0;break}var X=H||F.length>l.TOO_MANY_POINTS||s.hasMarkers(P)?"rect":"round";if(H&&P.connectgaps){var K=F[0],ue=F[1];for(B=0;B<F.length;B+=2)isNaN(F[B])||isNaN(F[B+1])?(F[B]=K,F[B+1]=ue):(K=F[B],ue=F[B+1])}return{join:X,positions:F}},errorBarPositions:function(O,P,R,F,B){var J=k.getComponentMethod("errorbars","makeComputeError"),z=c.getFromId(O,P.xaxis,"x"),$=c.getFromId(O,P.yaxis,"y"),G=R.length/2,H={};function X(K,ue){var ae=ue._id.charAt(0),ne=P["error_"+ae];if(ne&&ne.visible&&("linear"===ue.type||"log"===ue.type)){for(var Q=J(ne),ie={x:0,y:1}[ae],le={x:[0,1,2,3],y:[2,3,0,1]}[ae],fe=new Float64Array(4*G),he=1/0,pe=-1/0,xe=0,Ee=0;xe<G;xe++,Ee+=4){var Re=K[xe];if(I(Re)){var ke=R[2*xe+ie],Te=Q(Re,xe),we=Te[0],je=Te[1];if(I(we)&&I(je)){var Ie=Re+je;fe[Ee+le[0]]=ke-ue.c2l(Re-we),fe[Ee+le[1]]=ue.c2l(Ie)-ke,fe[Ee+le[2]]=0,fe[Ee+le[3]]=0,he=Math.min(he,Re-we),pe=Math.max(pe,Re+je)}}}H[ae]={positions:R,errors:fe,_bnds:[he,pe]}}}return X(F,z),X(B,$),H},textPosition:function(O,P,R,F){var B,J=P._length,z={};if(s.hasMarkers(P)){var $=R.font,G=R.align,H=R.baseline;for(z.offset=new Array(J),B=0;B<J;B++){var X=F.sizes?F.sizes[B]:F.size,K=Array.isArray($)?$[B].size:$.size,ue=Array.isArray(G)?G.length>1?G[B]:G[0]:G,ae=Array.isArray(H)?H.length>1?H[B]:H[0]:H,Q=d[ae],ie=X?X/.8+1:0;z.offset[B]=[d[ue]*ie/K,(-Q*ie-.5*Q)/K]}}return z}}},47148:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(68645),k=r(42341),T=r(47581),v=r(34098),c=r(67513),i=r(73927),s=r(49508),a=r(11058),o=r(28908),l=r(82410);se.exports=function(u,d,g,h){function w(D,S){return I.coerce(u,d,k,D,S)}var y=!!u.marker&&f.isOpenSymbol(u.marker.symbol),p=v.isBubble(u),_=c(u,d,h,w);if(_){i(u,d,h,w),w("xhoverformat"),w("yhoverformat");var x=_<T.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("hovertemplate"),w("mode",x),v.hasLines(d)&&(w("connectgaps"),a(u,d,g,h,w),w("line.shape")),v.hasMarkers(d)&&(s(u,d,g,h,w,{noAngleRef:!0,noStandOff:!0}),w("marker.line.width",y||p?1:0)),v.hasText(d)&&(w("texttemplate"),l(u,d,h,w));var b=(d.line||{}).color,M=(d.marker||{}).color;w("fill"),"none"!==d.fill&&o(u,d,g,w);var m=C.getComponentMethod("errorbars","supplyDefaults");m(u,d,b||M||g,{axis:"y"}),m(u,d,b||M||g,{axis:"x",inherit:"y"}),I.coerceSelectionMarkerOpacity(d,w)}else d.visible=!1}},5345:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(37822).DESELECTDIM;se.exports={styleTextSelection:function(k){var T,v,c=k[0],i=c.trace,s=c.t,a=s._scene,o=s.index,l=a.selectBatch[o],u=a.unselectBatch[o],d=a.textOptions[o],g=a.textSelectedOptions[o]||{},h=a.textUnselectedOptions[o]||{},w=I.extendFlat({},d);if(l.length||u.length){var y=g.color,p=h.color,_=d.color,x=Array.isArray(_);for(w.color=new Array(i._length),T=0;T<l.length;T++)w.color[v=l[T]]=y||(x?_[v]:_);for(T=0;T<u.length;T++){v=u[T];var b=x?_[v]:_;w.color[v]=p||(y?b:C.addOpacity(b,f))}}a.glText[o].update(w)}}},68101:function(se,U,r){"use strict";var I=r(8225);se.exports=function(C,f,k){var T=C.i;return"x"in C||(C.x=f._x[T]),"y"in C||(C.y=f._y[T]),I(C,f,k)}},68645:function(se,U,r){"use strict";var I=r(78232);U.isOpenSymbol=function(C){return"string"==typeof C?I.OPEN_RE.test(C):C%200>100},U.isDotSymbol=function(C){return"string"==typeof C?I.DOT_RE.test(C):C>200}},20794:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(34603);function k(T,v,c,i){var s=T.xa,a=T.ya,o=T.distance,l=T.dxy,u=T.index,d={pointNumber:u,x:v[u],y:c[u]};d.tx=Array.isArray(i.text)?i.text[u]:i.text,d.htx=Array.isArray(i.hovertext)?i.hovertext[u]:i.hovertext,d.data=Array.isArray(i.customdata)?i.customdata[u]:i.customdata,d.tp=Array.isArray(i.textposition)?i.textposition[u]:i.textposition;var g=i.textfont;g&&(d.ts=C.isArrayOrTypedArray(g.size)?g.size[u]:g.size,d.tc=Array.isArray(g.color)?g.color[u]:g.color,d.tf=Array.isArray(g.family)?g.family[u]:g.family);var h=i.marker;h&&(d.ms=C.isArrayOrTypedArray(h.size)?h.size[u]:h.size,d.mo=C.isArrayOrTypedArray(h.opacity)?h.opacity[u]:h.opacity,d.mx=C.isArrayOrTypedArray(h.symbol)?h.symbol[u]:h.symbol,d.ma=C.isArrayOrTypedArray(h.angle)?h.angle[u]:h.angle,d.mc=C.isArrayOrTypedArray(h.color)?h.color[u]:h.color);var w=h&&h.line;w&&(d.mlc=Array.isArray(w.color)?w.color[u]:w.color,d.mlw=C.isArrayOrTypedArray(w.width)?w.width[u]:w.width);var y=h&&h.gradient;y&&"none"!==y.type&&(d.mgt=Array.isArray(y.type)?y.type[u]:y.type,d.mgc=Array.isArray(y.color)?y.color[u]:y.color);var p=s.c2p(d.x,!0),_=a.c2p(d.y,!0),x=d.mrc||1,b=i.hoverlabel;b&&(d.hbg=Array.isArray(b.bgcolor)?b.bgcolor[u]:b.bgcolor,d.hbc=Array.isArray(b.bordercolor)?b.bordercolor[u]:b.bordercolor,d.hts=C.isArrayOrTypedArray(b.font.size)?b.font.size[u]:b.font.size,d.htc=Array.isArray(b.font.color)?b.font.color[u]:b.font.color,d.htf=Array.isArray(b.font.family)?b.font.family[u]:b.font.family,d.hnl=C.isArrayOrTypedArray(b.namelength)?b.namelength[u]:b.namelength);var M=i.hoverinfo;M&&(d.hi=Array.isArray(M)?M[u]:M);var m=i.hovertemplate;m&&(d.ht=Array.isArray(m)?m[u]:m);var D={};D[T.index]=d;var S=i._origX,O=i._origY,P=C.extendFlat({},T,{color:f(i,d),x0:p-x,x1:p+x,xLabelVal:S?S[u]:d.x,y0:_-x,y1:_+x,yLabelVal:O?O[u]:d.y,cd:D,distance:o,spikeDistance:l,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:i.text&&(P.text=i.text),C.fillText(d,i,P),I.getComponentMethod("errorbars","hoverInfo")(d,i,P),P}se.exports={hoverPoints:function(T,v,c,i){var s,a,o,l,u,d,g,h,w,y,p=T.cd,_=p[0].t,x=p[0].trace,b=T.xa,M=T.ya,m=_.x,D=_.y,S=b.c2p(v),O=M.c2p(c),P=T.distance;if(_.tree){var R=b.p2c(S-P),F=b.p2c(S+P),B=M.p2c(O-P),J=M.p2c(O+P);s="x"===i?_.tree.range(Math.min(R,F),Math.min(M._rl[0],M._rl[1]),Math.max(R,F),Math.max(M._rl[0],M._rl[1])):_.tree.range(Math.min(R,F),Math.min(B,J),Math.max(R,F),Math.max(B,J))}else s=_.ids;var z=P;if("x"===i){var $=!!x.xperiodalignment,G=!!x.yperiodalignment;for(d=0;d<s.length;d++){if(l=m[a=s[d]],g=Math.abs(b.c2p(l)-S),$){var H=b.c2p(x._xStarts[a]),X=b.c2p(x._xEnds[a]);g=S>=Math.min(H,X)&&S<=Math.max(H,X)?0:1/0}if(g<z){if(z=g,h=M.c2p(u=D[a])-O,G){var K=M.c2p(x._yStarts[a]),ue=M.c2p(x._yEnds[a]);h=O>=Math.min(K,ue)&&O<=Math.max(K,ue)?0:1/0}y=Math.sqrt(g*g+h*h),o=s[d]}}}else for(d=s.length-1;d>-1;d--)l=m[a=s[d]],u=D[a],g=b.c2p(l)-S,h=M.c2p(u)-O,(w=Math.sqrt(g*g+h*h))<z&&(z=y=w,o=a);return T.index=o,T.distance=z,T.dxy=y,void 0===o?[T]:[k(T,m,D,x)]},calcHover:k}},68868:function(se,U,r){"use strict";var I=r(72156);I.plot=r(26787),se.exports=I},26787:function(se,U,r){"use strict";var I=r(11870),C=r(46075),f=r(3593),k=r(42505),T=r(71828),v=r(64505).selectMode,c=r(79749),i=r(34098),s=r(68687),a=r(5345).styleTextSelection,o={};function l(u,d,g,h){var w=u._size,m=w.w*h,D=w.h*h;return[w.l*h+d.domain[0]*m,w.b*h+g.domain[0]*D,u.width*h-w.r*h-(1-d.domain[1])*m,u.height*h-w.t*h-(1-g.domain[1])*D]}(se.exports=function(u,d,g){if(g.length){var h,w,y=u._fullLayout,p=d._scene,_=d.xaxis,x=d.yaxis;if(p)if(c(u,["ANGLE_instanced_arrays","OES_element_index_uint"],o)){var b=p.count,M=y._glcanvas.data()[0].regl;if(s(u,d,g),p.dirty){if(!0===p.error2d&&(p.error2d=f(M)),!0===p.line2d&&(p.line2d=C(M)),!0===p.scatter2d&&(p.scatter2d=I(M)),!0===p.fill2d&&(p.fill2d=C(M)),!0===p.glText)for(p.glText=new Array(b),h=0;h<b;h++)p.glText[h]=new k(M);if(p.glText){if(b>p.glText.length){var m=b-p.glText.length;for(h=0;h<m;h++)p.glText.push(new k(M))}else b<p.glText.length&&p.glText.splice(b,p.glText.length-b).forEach(function(fe){fe.destroy()});for(h=0;h<b;h++)p.glText[h].update(p.textOptions[h])}if(p.line2d&&(p.line2d.update(p.lineOptions),p.lineOptions=p.lineOptions.map(function(fe){if(fe&&fe.positions){for(var he=fe.positions,pe=0;pe<he.length&&(isNaN(he[pe])||isNaN(he[pe+1]));)pe+=2;for(var xe=he.length-2;xe>pe&&(isNaN(he[xe])||isNaN(he[xe+1]));)xe-=2;fe.positions=he.slice(pe,xe+2)}return fe}),p.line2d.update(p.lineOptions)),p.error2d){var S=(p.errorXOptions||[]).concat(p.errorYOptions||[]);p.error2d.update(S)}p.scatter2d&&p.scatter2d.update(p.markerOptions),p.fillOrder=T.repeat(null,b),p.fill2d&&(p.fillOptions=p.fillOptions.map(function(fe,he){var pe=g[he];if(fe&&pe&&pe[0]&&pe[0].trace){var xe,Ee,Re=pe[0],ke=Re.trace,Te=Re.t,we=p.lineOptions[he],je=[];ke._ownfill&&je.push(he),ke._nexttrace&&je.push(he+1),je.length&&(p.fillOrder[he]=je);var Ce,Ie,ge=[],me=we&&we.positions||Te.positions;if("tozeroy"===ke.fill){for(Ce=0;Ce<me.length&&isNaN(me[Ce+1]);)Ce+=2;for(Ie=me.length-2;Ie>Ce&&isNaN(me[Ie+1]);)Ie-=2;0!==me[Ce+1]&&(ge=[me[Ce],0]),ge=ge.concat(me.slice(Ce,Ie+2)),0!==me[Ie+1]&&(ge=ge.concat([me[Ie],0]))}else if("tozerox"===ke.fill){for(Ce=0;Ce<me.length&&isNaN(me[Ce]);)Ce+=2;for(Ie=me.length-2;Ie>Ce&&isNaN(me[Ie]);)Ie-=2;0!==me[Ce]&&(ge=[0,me[Ce+1]]),ge=ge.concat(me.slice(Ce,Ie+2)),0!==me[Ie]&&(ge=ge.concat([0,me[Ie+1]]))}else if("toself"===ke.fill||"tonext"===ke.fill){for(ge=[],xe=0,fe.splitNull=!0,Ee=0;Ee<me.length;Ee+=2)(isNaN(me[Ee])||isNaN(me[Ee+1]))&&((ge=ge.concat(me.slice(xe,Ee))).push(me[xe],me[xe+1]),ge.push(null,null),xe=Ee+2);ge=ge.concat(me.slice(xe)),xe&&ge.push(me[xe],me[xe+1])}else{var ce=ke._nexttrace;if(ce){var Ae=p.lineOptions[he+1];if(Ae){var Ne=Ae.positions;if("tonexty"===ke.fill){for(ge=me.slice(),he=Math.floor(Ne.length/2);he--;){var De=Ne[2*he],qe=Ne[2*he+1];isNaN(De)||isNaN(qe)||ge.push(De,qe)}fe.fill=ce.fillcolor}}}}if(ke._prevtrace&&"tonext"===ke._prevtrace.fill){var Ke=p.lineOptions[he-1].positions,be=ge.length/2,Oe=[xe=be];for(Ee=0;Ee<Ke.length;Ee+=2)(isNaN(Ke[Ee])||isNaN(Ke[Ee+1]))&&(Oe.push(Ee/2+be+1),xe=Ee+2);ge=ge.concat(Ke),fe.hole=Oe}return fe.fillmode=ke.fill,fe.opacity=ke.opacity,fe.positions=ge,fe}}),p.fill2d.update(p.fillOptions))}var P=v(y.dragmode),R=y.clickmode.indexOf("select")>-1;for(h=0;h<b;h++){var F=g[h][0],B=F.trace,J=F.t,z=J.index,$=B._length,G=J.x,H=J.y;if(B.selectedpoints||P||R){if(P||(P=!0),B.selectedpoints){var X=p.selectBatch[z]=T.selIndices2selPoints(B),K={};for(w=0;w<X.length;w++)K[X[w]]=1;var ue=[];for(w=0;w<$;w++)K[w]||ue.push(w);p.unselectBatch[z]=ue}var ae=J.xpx=new Array($),ne=J.ypx=new Array($);for(w=0;w<$;w++)ae[w]=_.c2p(G[w]),ne[w]=x.c2p(H[w])}else J.xpx=J.ypx=null}if(P){if(p.select2d||(p.select2d=I(y._glcanvas.data()[1].regl)),p.scatter2d){var Q=new Array(b);for(h=0;h<b;h++)Q[h]=p.selectBatch[h].length||p.unselectBatch[h].length?p.markerUnselectedOptions[h]:{};p.scatter2d.update(Q)}p.select2d&&(p.select2d.update(p.markerOptions),p.select2d.update(p.markerSelectedOptions)),p.glText&&g.forEach(function(fe){i.hasText(((fe||[])[0]||{}).trace||{})&&a(fe)})}else p.scatter2d&&p.scatter2d.update(p.markerOptions);var ie={viewport:l(y,_,x,u._context.plotGlPixelRatio),range:[(_._rl||_.range)[0],(x._rl||x.range)[0],(_._rl||_.range)[1],(x._rl||x.range)[1]]},le=T.repeat(ie,p.count);p.fill2d&&p.fill2d.update(le),p.line2d&&p.line2d.update(le),p.error2d&&p.error2d.update(le.concat(le)),p.scatter2d&&p.scatter2d.update(le),p.select2d&&p.select2d.update(le),p.glText&&p.glText.forEach(function(fe){fe.update(ie)})}else p.init()}}).reglPrecompiled=o},38967:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){var k=f._scene,T={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},v={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return f._scene||((k=f._scene={}).init=function(){I.extendFlat(k,v,T)},k.init(),k.update=function(c){var i=I.repeat(c,k.count);if(k.fill2d&&k.fill2d.update(i),k.scatter2d&&k.scatter2d.update(i),k.line2d&&k.line2d.update(i),k.error2d&&k.error2d.update(i.concat(i)),k.select2d&&k.select2d.update(i),k.glText)for(var s=0;s<k.count;s++)k.glText[s].update(c)},k.draw=function(){for(var c=k.count,i=k.fill2d,s=k.error2d,a=k.line2d,o=k.scatter2d,l=k.glText,u=k.select2d,d=k.selectBatch,g=k.unselectBatch,h=0;h<c;h++){if(i&&k.fillOrder[h]&&i.draw(k.fillOrder[h]),a&&k.lineOptions[h]&&a.draw(h),s&&(k.errorXOptions[h]&&s.draw(h),k.errorYOptions[h]&&s.draw(h+c)),o&&k.markerOptions[h])if(g[h].length){var w=I.repeat([],k.count);w[h]=g[h],o.draw(w)}else d[h].length||o.draw(h);l[h]&&k.textOptions[h]&&l[h].render()}u&&u.draw(d),k.dirty=!1},k.destroy=function(){k.fill2d&&k.fill2d.destroy&&k.fill2d.destroy(),k.scatter2d&&k.scatter2d.destroy&&k.scatter2d.destroy(),k.error2d&&k.error2d.destroy&&k.error2d.destroy(),k.line2d&&k.line2d.destroy&&k.line2d.destroy(),k.select2d&&k.select2d.destroy&&k.select2d.destroy(),k.glText&&k.glText.forEach(function(c){c.destroy&&c.destroy()}),k.lineOptions=null,k.fillOptions=null,k.markerOptions=null,k.markerSelectedOptions=null,k.markerUnselectedOptions=null,k.errorXOptions=null,k.errorYOptions=null,k.textOptions=null,k.textSelectedOptions=null,k.textUnselectedOptions=null,k.selectBatch=null,k.unselectBatch=null,f._scene=null}),k.dirty||I.extendFlat(k,T),k}},58147:function(se,U,r){"use strict";var I=r(34098),C=r(5345).styleTextSelection;se.exports=function(f,k){var T=f.cd,v=f.xaxis,c=f.yaxis,i=[],s=T[0].trace,a=T[0].t,o=s._length,l=a.x,u=a.y,d=a._scene,g=a.index;if(!d)return i;var h=I.hasText(s),w=I.hasMarkers(s);if(!0!==s.visible||!w&&!h)return i;var p=[],_=[];if(!1!==k&&!k.degenerate)for(var x=0;x<o;x++)k.contains([a.xpx[x],a.ypx[x]],!1,x,f)?(p.push(x),i.push({pointNumber:x,x:v.c2d(l[x]),y:c.c2d(u[x])})):_.push(x);if(w){var b=d.scatter2d;if(p.length||_.length){if(!d.selectBatch[g].length&&!d.unselectBatch[g].length){var M=new Array(d.count);M[g]=d.markerUnselectedOptions[g],b.update.apply(b,M)}}else{var m=new Array(d.count);m[g]=d.markerOptions[g],b.update.apply(b,m)}}return d.selectBatch[g]=p,d.unselectBatch[g]=_,h&&C(T),i}},99181:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(19316),k=r(82196),T=r(23585),v=r(9012),c=r(50693),i=r(1426).extendFlat,s=r(30962).overrideAll,a=r(23585),o=f.line,l=f.marker;se.exports=s({lon:f.lon,lat:f.lat,cluster:{enabled:{valType:"boolean"},maxzoom:i({},a.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:i({},l.opacity,{dflt:1})},mode:i({},k.mode,{dflt:"markers"}),text:i({},k.text,{}),texttemplate:C({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},k.hovertext,{}),line:{color:o.color,width:o.width},connectgaps:k.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},c("marker")),fill:f.fill,fillcolor:k.fillcolor,textfont:T.layers.symbol.textfont,textposition:T.layers.symbol.textposition,below:{valType:"string"},selected:{marker:k.selected.marker},unselected:{marker:k.unselected.marker},hoverinfo:i({},v.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:I()},"calc","nested")},15790:function(se,U,r){"use strict";var I=r(92770),C=r(71828),f=r(50606).BADNUM,k=r(18214),T=r(21081),v=r(91424),c=r(39984),i=r(34098),s=r(13056),a=r(23469).appendArrayPointValue,o=r(63893).NEWLINES,l=r(63893).BR_TAG_ALL;function u(y){return{type:y,geojson:k.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function d(y,p){return C.isArrayOrTypedArray(y)?p?function(_){return I(y[_])?+y[_]:0}:function(_){return y[_]}:y?function(){return y}:g}function g(){return""}function h(y){return y[0]===f}function w(y,p){var _;if(C.isArrayOrTypedArray(y)&&C.isArrayOrTypedArray(p)){_=["step",["get","point_count"],y[0]];for(var x=1;x<y.length;x++)_.push(p[x-1],y[x])}else _=y;return _}se.exports=function(y,p){var _,x=p[0].trace,b=!0===x.visible&&0!==x._length,M="none"!==x.fill,m=i.hasLines(x),D=i.hasMarkers(x),S=i.hasText(x),O=D&&"circle"===x.marker.symbol,P=D&&"circle"!==x.marker.symbol,R=x.cluster&&x.cluster.enabled,F=u("fill"),B=u("line"),J=u("circle"),z=u("symbol"),$={fill:F,line:B,circle:J,symbol:z};if(!b)return $;if((M||m)&&(_=k.calcTraceToLineCoords(p)),M&&(F.geojson=k.makePolygon(_),F.layout.visibility="visible",C.extendFlat(F.paint,{"fill-color":x.fillcolor})),m&&(B.geojson=k.makeLine(_),B.layout.visibility="visible",C.extendFlat(B.paint,{"line-width":x.line.width,"line-color":x.line.color,"line-opacity":x.opacity})),O){var G=function(K){var ue,ae,ne,Q,ie=K[0].trace,le=ie.marker,fe=ie.selectedpoints,he=C.isArrayOrTypedArray(le.color),pe=C.isArrayOrTypedArray(le.size),xe=C.isArrayOrTypedArray(le.opacity);function Ee(ge){return ie.opacity*ge}he&&(ae=T.hasColorscale(ie,"marker")?T.makeColorScaleFuncFromTrace(le):C.identity),pe&&(ne=c(ie)),xe&&(Q=function(ge){return Ee(I(ge)?+C.constrain(ge,0,1):0)});var Re,ke,Te=[];for(ue=0;ue<K.length;ue++){var we=K[ue],je=we.lonlat;if(!h(je)){var Ce={};ae&&(Ce.mcc=we.mcc=ae(we.mc)),ne&&(Ce.mrc=we.mrc=ne(we.ms)),Q&&(Ce.mo=Q(we.mo)),fe&&(Ce.selected=we.selected||0),Te.push({type:"Feature",id:ue+1,geometry:{type:"Point",coordinates:je},properties:Ce})}}if(fe)for(Re=v.makeSelectedPointStyleFns(ie),ue=0;ue<Te.length;ue++){var Ie=Te[ue].properties;Re.selectedOpacityFn&&(Ie.mo=Ee(Re.selectedOpacityFn(Ie))),Re.selectedColorFn&&(Ie.mcc=Re.selectedColorFn(Ie)),Re.selectedSizeFn&&(Ie.mrc=Re.selectedSizeFn(Ie))}return{geojson:{type:"FeatureCollection",features:Te},mcc:he||Re&&Re.selectedColorFn?{type:"identity",property:"mcc"}:le.color,mrc:pe||Re&&Re.selectedSizeFn?{type:"identity",property:"mrc"}:(ke=le.size,ke/2),mo:xe||Re&&Re.selectedOpacityFn?{type:"identity",property:"mo"}:Ee(le.opacity)}}(p);J.geojson=G.geojson,J.layout.visibility="visible",R&&(J.filter=["!",["has","point_count"]],$.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":w(x.cluster.color,x.cluster.step),"circle-radius":w(x.cluster.size,x.cluster.step),"circle-opacity":w(x.cluster.opacity,x.cluster.step)}},$.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),C.extendFlat(J.paint,{"circle-color":G.mcc,"circle-radius":G.mrc,"circle-opacity":G.mo})}if(O&&R&&(J.filter=["!",["has","point_count"]]),(P||S)&&(z.geojson=function(K,ue){for(var ae=ue._fullLayout,ne=K[0].trace,Q=ne.marker||{},ie=Q.symbol,le=Q.angle,fe="circle"!==ie?d(ie):g,he="auto"!==le?d(le,!0):g,pe=i.hasText(ne)?d(ne.text):g,xe=[],Ee=0;Ee<K.length;Ee++){var Re=K[Ee];if(!h(Re.lonlat)){var ke,Te=ne.texttemplate;if(Te){var we=Array.isArray(Te)?Te[Ee]||"":Te,je=ne._module.formatLabels(Re,ne,ae),Ce={};a(Ce,ne,Re.i),ke=C.texttemplateString(we,je,ae._d3locale,Ce,Re,ne._meta||{})}else ke=pe(Ee);ke&&(ke=ke.replace(o,"").replace(l,"\n")),xe.push({type:"Feature",geometry:{type:"Point",coordinates:Re.lonlat},properties:{symbol:fe(Ee),angle:he(Ee),text:ke}})}}return{type:"FeatureCollection",features:xe}}(p,y),C.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(C.extendFlat(z.layout,{"icon-size":x.marker.size/10}),"angle"in x.marker&&"auto"!==x.marker.angle&&C.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=x.marker.allowoverlap,C.extendFlat(z.paint,{"icon-opacity":x.opacity*x.marker.opacity,"icon-color":x.marker.color})),S)){var X=s(x.textposition,(x.marker||{}).size);C.extendFlat(z.layout,{"text-size":x.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),C.extendFlat(z.paint,{"text-color":x.textfont.color,"text-opacity":x.opacity})}return $}},76645:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(49508),k=r(11058),T=r(82410),v=r(28908),c=r(99181);se.exports=function(i,s,a,o){function l(x,b){return I.coerce(i,s,c,x,b)}function u(x,b){return I.coerce2(i,s,c,x,b)}var b,M,m,D,S;if(b=s,m=(M=l)("lon")||[],D=M("lat")||[],S=Math.min(m.length,D.length),b._length=S,S){if(l("text"),l("texttemplate"),l("hovertext"),l("hovertemplate"),l("mode"),l("below"),C.hasLines(s)&&(k(i,s,a,o,l,{noDash:!0}),l("connectgaps")),C.hasMarkers(s)){f(i,s,a,o,l,{noLine:!0,noAngle:!0}),l("marker.allowoverlap"),l("marker.angle");var g=s.marker;"circle"!==g.symbol&&(I.isArrayOrTypedArray(g.size)&&(g.size=g.size[0]),I.isArrayOrTypedArray(g.color)&&(g.color=g.color[0]))}var h=u("cluster.maxzoom"),w=u("cluster.step"),y=u("cluster.color",s.marker&&s.marker.color||a),p=u("cluster.size"),_=u("cluster.opacity");l("cluster.enabled",!1!==h||!1!==w||!1!==y||!1!==p||!1!==_),C.hasText(s)&&T(i,s,o,l,{noSelect:!0}),l("fill"),"none"!==s.fill&&v(i,s,a,l),I.coerceSelectionMarkerOpacity(s,l)}else s.visible=!1}},53353:function(se){"use strict";se.exports=function(U,r){return U.lon=r.lon,U.lat=r.lat,U}},15636:function(se,U,r){"use strict";var I=r(89298);se.exports=function(C,f,k){var T={},v=k[f.subplot]._subplot.mockAxis,c=C.lonlat;return T.lonLabel=I.tickText(v,v.c2l(c[0]),!0).text,T.latLabel=I.tickText(v,v.c2l(c[1]),!0).text,T}},28178:function(se,U,r){"use strict";var I=r(30211),C=r(71828),f=r(34603),k=C.fillText,T=r(50606).BADNUM,v=r(77734).traceLayerPrefix;function c(i,s,a){if(!i.hovertemplate){var o=(s.hi||i.hoverinfo).split("+"),l=-1!==o.indexOf("all"),u=-1!==o.indexOf("lon"),d=-1!==o.indexOf("lat"),g=s.lonlat,h=[];return l||u&&d?h.push("("+w(g[1])+", "+w(g[0])+")"):u?h.push(a.lon+w(g[0])):d&&h.push(a.lat+w(g[1])),(l||-1!==o.indexOf("text"))&&k(s,i,h),h.join("<br>")}function w(y){return y+"\xb0"}}se.exports={hoverPoints:function(i,s,a){var o=i.cd,l=o[0].trace,u=i.xa,d=i.ya,g=i.subplot,h=[],y=l.cluster&&l.cluster.enabled;if(y){var p=g.map.queryRenderedFeatures(null,{layers:[v+l.uid+"-circle"]});h=p.map(function(F){return F.id})}var _=360*(s>=0?Math.floor((s+180)/360):Math.ceil((s-180)/360)),x=s-_;if(I.getClosest(o,function(F){var B=F.lonlat;if(B[0]===T||y&&-1===h.indexOf(F.i+1))return 1/0;var J=C.modHalf(B[0],360),z=B[1],$=g.project([J,z]),G=$.x-u.c2p([x,z]),H=$.y-d.c2p([J,a]),X=Math.max(3,F.mrc||0);return Math.max(Math.sqrt(G*G+H*H)-X,1-3/X)},i),!1!==i.index){var b=o[i.index],M=b.lonlat,m=[C.modHalf(M[0],360)+_,M[1]],D=u.c2p(m),S=d.c2p(m),O=b.mrc||1;i.x0=D-O,i.x1=D+O,i.y0=S-O,i.y1=S+O;var P={};P[l.subplot]={_subplot:g};var R=l._module.formatLabels(b,l,P);return i.lonLabel=R.lonLabel,i.latLabel=R.latLabel,i.color=f(l,b),i.extraText=c(l,b,o[0].t.labels),i.hovertemplate=l.hovertemplate,[i]}},getExtraText:c}},20467:function(se,U,r){"use strict";se.exports={attributes:r(99181),supplyDefaults:r(76645),colorbar:r(4898),formatLabels:r(15636),calc:r(84622),plot:r(86951),hoverPoints:r(28178).hoverPoints,eventData:r(53353),selectPoints:r(86387),styleOnSelect:function(I,C){C&&C[0].trace._glTrace.update(C)},moduleType:"trace",name:"scattermapbox",basePlotModule:r(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function(se,U,r){"use strict";var I=r(71828),C=r(15790),f=r(77734).traceLayerPrefix,k={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function T(c,i,s,a){this.type="scattermapbox",this.subplot=c,this.uid=i,this.clusterEnabled=s,this.isHidden=a,this.sourceIds={fill:"source-"+i+"-fill",line:"source-"+i+"-line",circle:"source-"+i+"-circle",symbol:"source-"+i+"-symbol",cluster:"source-"+i+"-circle",clusterCount:"source-"+i+"-circle"},this.layerIds={fill:f+i+"-fill",line:f+i+"-line",circle:f+i+"-circle",symbol:f+i+"-symbol",cluster:f+i+"-cluster",clusterCount:f+i+"-cluster-count"},this.below=null}var v=T.prototype;v.addSource=function(c,i,s){var a={type:"geojson",data:i.geojson};s&&s.enabled&&I.extendFlat(a,{cluster:!0,clusterMaxZoom:s.maxzoom});var o=this.subplot.map.getSource(this.sourceIds[c]);o?o.setData(i.geojson):this.subplot.map.addSource(this.sourceIds[c],a)},v.setSourceData=function(c,i){this.subplot.map.getSource(this.sourceIds[c]).setData(i.geojson)},v.addLayer=function(c,i,s){var a={type:i.type,id:this.layerIds[c],source:this.sourceIds[c],layout:i.layout,paint:i.paint};i.filter&&(a.filter=i.filter);for(var o,l=this.layerIds[c],u=this.subplot.getMapLayers(),d=0;d<u.length;d++)if(u[d].id===l){o=!0;break}o?(this.subplot.setOptions(l,"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&this.subplot.setOptions(l,"setPaintProperty",a.paint)):this.subplot.addLayer(a,s)},v.update=function(c){var i=c[0].trace,s=this.subplot,a=s.map,o=C(s.gd,c),l=s.belowLookup["trace-"+this.uid],u=!(!i.cluster||!i.cluster.enabled),d=!!this.clusterEnabled,g=this;function h(x){d?function(b){for(var M=k.cluster,m=M.length-1;m>=0;m--)a.removeLayer(g.layerIds[M[m]]);b||a.removeSource(g.sourceIds.circle)}(x):function(b){for(var M=k.nonCluster,m=M.length-1;m>=0;m--){var D=M[m];a.removeLayer(g.layerIds[D]),b||a.removeSource(g.sourceIds[D])}}(x)}function w(x){u?function(b){b||g.addSource("circle",o.circle,i.cluster);for(var M=k.cluster,m=0;m<M.length;m++){var D=M[m];g.addLayer(D,o[D],l)}}(x):function(b){for(var M=k.nonCluster,m=0;m<M.length;m++){var D=M[m],S=o[D];b||g.addSource(D,S),g.addLayer(D,S,l)}}(x)}var p=this.isHidden,_=!0!==i.visible;_?p||h():p?_||w():d!==u?(h(),w()):(this.below!==l&&(h(!0),w(!0)),function y(){for(var x=u?k.cluster:k.nonCluster,b=0;b<x.length;b++){var M=x[b],m=o[M];m&&(s.setOptions(g.layerIds[M],"setLayoutProperty",m.layout),"visible"===m.layout.visibility&&("cluster"!==M&&g.setSourceData(M,m),s.setOptions(g.layerIds[M],"setPaintProperty",m.paint)))}}()),this.clusterEnabled=u,this.isHidden=_,this.below=l,c[0].trace._glTrace=this},v.dispose=function(){for(var c=this.subplot.map,i=this.clusterEnabled?k.cluster:k.nonCluster,s=i.length-1;s>=0;s--){var a=i[s];c.removeLayer(this.layerIds[a]),c.removeSource(this.sourceIds[a])}},se.exports=function(c,i){var s,a,o,l=i[0].trace,u=l.cluster&&l.cluster.enabled,g=new T(c,l.uid,u,!0!==l.visible),h=C(c.gd,i),w=g.below=c.belowLookup["trace-"+l.uid];if(u)for(g.addSource("circle",h.circle,l.cluster),s=0;s<k.cluster.length;s++)o=h[a=k.cluster[s]],g.addLayer(a,o,w);else for(s=0;s<k.nonCluster.length;s++)o=h[a=k.nonCluster[s]],g.addSource(a,o,l.cluster),g.addLayer(a,o,w);return i[0].trace._glTrace=g,g}},86387:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(50606).BADNUM;se.exports=function(k,T){var v,c=k.cd,i=k.xaxis,s=k.yaxis,a=[];if(!C.hasMarkers(c[0].trace))return[];if(!1===T)for(v=0;v<c.length;v++)c[v].selected=0;else for(v=0;v<c.length;v++){var l=c[v],u=l.lonlat;if(u[0]!==f){var d=[I.modHalf(u[0],360),u[1]],g=[i.c2p(d),s.c2p(d)];T.contains(g,null,v,k)?(a.push({pointNumber:v,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0}}return a}},81245:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(1426).extendFlat,k=r(82196),T=r(9012),v=k.line;se.exports={mode:k.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:k.text,texttemplate:C({editType:"plot"},{keys:["r","theta","text"]}),hovertext:k.hovertext,line:{color:v.color,width:v.width,dash:v.dash,backoff:v.backoff,shape:f({},v.shape,{values:["linear","spline"]}),smoothing:v.smoothing,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,cliponaxis:f({},k.cliponaxis,{dflt:!1}),textposition:k.textposition,textfont:k.textfont,fill:f({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,hoverinfo:f({},T.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:k.hoveron,hovertemplate:I(),selected:k.selected,unselected:k.unselected}},26442:function(se,U,r){"use strict";var I=r(92770),C=r(50606).BADNUM,f=r(89298),k=r(36922),T=r(75225),v=r(66279),c=r(47761).calcMarkerSize;se.exports=function(i,s){for(var a=i._fullLayout,o=s.subplot,l=a[o].radialaxis,u=a[o].angularaxis,d=l.makeCalcdata(s,"r"),g=u.makeCalcdata(s,"theta"),h=s._length,w=new Array(h),y=0;y<h;y++){var p=d[y],_=g[y],x=w[y]={};I(p)&&I(_)?(x.r=p,x.theta=_):x.r=C}var b=c(s,h);return s._extremes.x=f.findExtremes(l,d,{ppad:b}),k(i,s),T(w,s),v(w,s),w}},22184:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(49508),k=r(11058),T=r(94039),v=r(82410),c=r(28908),i=r(47581).PTS_LINESONLY,s=r(81245);function a(o,l,u,d){var g,h=d("r"),w=d("theta");if(h)w?g=Math.min(h.length,w.length):(g=h.length,d("theta0"),d("dtheta"));else{if(!w)return 0;g=l.theta.length,d("r0"),d("dr")}return l._length=g,g}se.exports={handleRThetaDefaults:a,supplyDefaults:function(o,l,u,d){function g(y,p){return I.coerce(o,l,s,y,p)}var h=a(0,l,0,g);if(h){g("thetaunit"),g("mode",h<i?"lines+markers":"lines"),g("text"),g("hovertext"),"fills"!==l.hoveron&&g("hovertemplate"),C.hasLines(l)&&(k(o,l,u,d,g,{backoff:!0}),T(o,l,g),g("connectgaps")),C.hasMarkers(l)&&f(o,l,u,d,g,{gradient:!0}),C.hasText(l)&&(g("texttemplate"),v(o,l,d,g));var w=[];(C.hasMarkers(l)||C.hasText(l))&&(g("cliponaxis"),g("marker.maxdisplayed"),w.push("points")),g("fill"),"none"!==l.fill&&(c(o,l,u,g),C.hasLines(l)||T(o,l,g)),"tonext"!==l.fill&&"toself"!==l.fill||w.push("fills"),g("hoveron",w.join("+")||"points"),I.coerceSelectionMarkerOpacity(l,g)}else l.visible=!1}}},98608:function(se,U,r){"use strict";var I=r(71828),C=r(89298);se.exports=function(f,k,T){var v,c,i={},s=T[k.subplot]._subplot;s?(v=s.radialAxis,c=s.angularAxis):(v=(s=T[k.subplot]).radialaxis,c=s.angularaxis);var a=v.c2l(f.r);i.rLabel=C.tickText(v,a,!0).text;var o="degrees"===c.thetaunit?I.rad2deg(f.theta):f.theta;return i.thetaLabel=C.tickText(c,o,!0).text,i}},59150:function(se,U,r){"use strict";var I=r(33720);function C(f,k,T,v){var c=T.radialAxis,i=T.angularAxis;c._hovertitle="r",i._hovertitle="\u03b8";var s={};s[k.subplot]={_subplot:T};var a=k._module.formatLabels(f,k,s);v.rLabel=a.rLabel,v.thetaLabel=a.thetaLabel;var l=[];function u(g,h){l.push(g._hovertitle+": "+h)}if(!k.hovertemplate){var d=(f.hi||k.hoverinfo).split("+");-1!==d.indexOf("all")&&(d=["r","theta","text"]),-1!==d.indexOf("r")&&u(c,v.rLabel),-1!==d.indexOf("theta")&&u(i,v.thetaLabel),-1!==d.indexOf("text")&&v.text&&(l.push(v.text),delete v.text),v.extraText=l.join("<br>")}}se.exports={hoverPoints:function(f,k,T,v){var c=I(f,k,T,v);if(c&&!1!==c[0].index){var i=c[0];if(void 0===i.index)return c;var s=f.subplot,a=i.cd[i.index],o=i.trace;if(s.isPtInside(a))return i.xLabelVal=void 0,i.yLabelVal=void 0,C(a,o,s,i),i.hovertemplate=o.hovertemplate,c}},makeHoverPointText:C}},91271:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:r(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:r(81245),supplyDefaults:r(22184).supplyDefaults,colorbar:r(4898),formatLabels:r(98608),calc:r(26442),plot:r(45162),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(59150).hoverPoints,selectPoints:r(98002),meta:{}}},45162:function(se,U,r){"use strict";var I=r(32663),C=r(50606).BADNUM;se.exports=function(f,k,T){for(var v=k.layers.frontplot.select("g.scatterlayer"),c=k.xaxis,i=k.yaxis,s={xaxis:c,yaxis:i,plot:k.framework,layerClipId:k._hasClipOnAxisFalse?k.clipIds.forTraces:null},a=k.radialAxis,o=k.angularAxis,l=0;l<T.length;l++)for(var u=T[l],d=0;d<u.length;d++){0===d&&(u[0].trace._xA=c,u[0].trace._yA=i);var g=u[d],h=g.r;if(h===C)g.x=g.y=C;else{var w=a.c2g(h),y=o.c2g(g.theta);g.x=w*Math.cos(y),g.y=w*Math.sin(y)}}I(f,s,T,v)}},53286:function(se,U,r){"use strict";var I=r(81245),C=r(42341),f=r(5386).si;se.exports={mode:I.mode,r:I.r,theta:I.theta,r0:I.r0,dr:I.dr,theta0:I.theta0,dtheta:I.dtheta,thetaunit:I.thetaunit,text:I.text,texttemplate:f({editType:"plot"},{keys:["r","theta","text"]}),hovertext:I.hovertext,hovertemplate:I.hovertemplate,line:C.line,connectgaps:C.connectgaps,marker:C.marker,fill:C.fill,fillcolor:C.fillcolor,textposition:C.textposition,textfont:C.textfont,hoverinfo:I.hoverinfo,selected:I.selected,unselected:I.unselected}},65746:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:r(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:r(53286),supplyDefaults:r(75485),colorbar:r(4898),formatLabels:r(46255),calc:r(37499),hoverPoints:r(29347).hoverPoints,selectPoints:r(58147),meta:{}}},37499:function(se,U,r){"use strict";var I=r(36922),C=r(47761).calcMarkerSize,f=r(19635),k=r(89298),T=r(78232).TOO_MANY_POINTS;se.exports=function(v,c){var i=v._fullLayout,s=c.subplot,a=i[s].radialaxis,o=i[s].angularaxis,l=c._r=a.makeCalcdata(c,"r"),u=c._theta=o.makeCalcdata(c,"theta"),d=c._length,g={};d<l.length&&(l=l.slice(0,d)),d<u.length&&(u=u.slice(0,d)),g.r=l,g.theta=u,I(v,c);var h,w=g.opts=f.style(v,c);return d<T?h=C(c,d):w.marker&&(h=2*(w.marker.sizeAvg||Math.max(w.marker.size,3))),c._extremes.x=k.findExtremes(a,l,{ppad:h}),[{x:!1,y:!1,t:g,trace:c}]}},75485:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(22184).handleRThetaDefaults,k=r(49508),T=r(11058),v=r(82410),c=r(28908),i=r(47581).PTS_LINESONLY,s=r(53286);se.exports=function(a,o,l,u){function d(h,w){return I.coerce(a,o,s,h,w)}var g=f(a,o,u,d);g?(d("thetaunit"),d("mode",g<i?"lines+markers":"lines"),d("text"),d("hovertext"),"fills"!==o.hoveron&&d("hovertemplate"),C.hasLines(o)&&(T(a,o,l,u,d),d("connectgaps")),C.hasMarkers(o)&&k(a,o,l,u,d,{noAngleRef:!0,noStandOff:!0}),C.hasText(o)&&(d("texttemplate"),v(a,o,u,d)),d("fill"),"none"!==o.fill&&c(a,o,l,d),I.coerceSelectionMarkerOpacity(o,d)):o.visible=!1}},46255:function(se,U,r){"use strict";var I=r(98608);se.exports=function(C,f,k){var T=C.i;return"r"in C||(C.r=f._r[T]),"theta"in C||(C.theta=f._theta[T]),I(C,f,k)}},29347:function(se,U,r){"use strict";var I=r(20794),C=r(59150).makeHoverPointText;se.exports={hoverPoints:function(f,k,T,v){var c=f.cd[0].t,i=c.r,s=c.theta,a=I.hoverPoints(f,k,T,v);if(a&&!1!==a[0].index){var o=a[0];if(void 0===o.index)return a;var l=f.subplot,u=o.cd[o.index],d=o.trace;if(u.r=i[o.index],u.theta=s[o.index],l.isPtInside(u))return o.xLabelVal=void 0,o.yLabelVal=void 0,C(u,d,l,o),a}}}},21461:function(se,U,r){"use strict";var I=r(65746);I.plot=r(49741),se.exports=I},49741:function(se,U,r){"use strict";var I=r(88294),C=r(92770),f=r(26787),k=r(38967),T=r(19635),v=r(71828),c=r(78232).TOO_MANY_POINTS;se.exports=function(i,s,a){if(a.length){var o=s.radialAxis,l=s.angularAxis,u=k(i,s);return a.forEach(function(d){if(d&&d[0]&&d[0].trace){var g,h=d[0],w=h.trace,y=h.t,p=w._length,_=y.r,x=y.theta,b=y.opts,M=_.slice(),m=x.slice();for(g=0;g<_.length;g++)s.isPtInside({r:_[g],theta:x[g]})||(M[g]=NaN,m[g]=NaN);var D=new Array(2*p),S=Array(p),O=Array(p);for(g=0;g<p;g++){var P,R,F=M[g];if(C(F)){var B=o.c2g(F),J=l.c2g(m[g],w.thetaunit);P=B*Math.cos(J),R=B*Math.sin(J)}else P=R=NaN;S[g]=D[2*g]=P,O[g]=D[2*g+1]=R}y.tree=I(D),b.marker&&p>=c&&(b.marker.cluster=y.tree),b.marker&&(b.markerSel.positions=b.markerUnsel.positions=b.marker.positions=D),b.line&&D.length>1&&v.extendFlat(b.line,T.linePositions(i,w,D)),b.text&&(v.extendFlat(b.text,{positions:D},T.textPosition(i,w,b.text,b.marker)),v.extendFlat(b.textSel,{positions:D},T.textPosition(i,w,b.text,b.markerSel)),v.extendFlat(b.textUnsel,{positions:D},T.textPosition(i,w,b.text,b.markerUnsel))),b.fill&&!u.fill2d&&(u.fill2d=!0),b.marker&&!u.scatter2d&&(u.scatter2d=!0),b.line&&!u.line2d&&(u.line2d=!0),b.text&&!u.glText&&(u.glText=!0),u.lineOptions.push(b.line),u.fillOptions.push(b.fill),u.markerOptions.push(b.marker),u.markerSelectedOptions.push(b.markerSel),u.markerUnselectedOptions.push(b.markerUnsel),u.textOptions.push(b.text),u.textSelectedOptions.push(b.textSel),u.textUnselectedOptions.push(b.textUnsel),u.selectBatch.push([]),u.unselectBatch.push([]),y.x=S,y.y=O,y.rawx=S,y.rawy=O,y.r=_,y.theta=x,y.positions=D,y._scene=u,y.index=u.count,u.count++}}),f(i,s,a)}},se.exports.reglPrecompiled={}},48300:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(1426).extendFlat,k=r(82196),T=r(9012),v=k.line;se.exports={mode:k.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:k.text,texttemplate:C({editType:"plot"},{keys:["real","imag","text"]}),hovertext:k.hovertext,line:{color:v.color,width:v.width,dash:v.dash,backoff:v.backoff,shape:f({},v.shape,{values:["linear","spline"]}),smoothing:v.smoothing,editType:"calc"},connectgaps:k.connectgaps,marker:k.marker,cliponaxis:f({},k.cliponaxis,{dflt:!1}),textposition:k.textposition,textfont:k.textfont,fill:f({},k.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:k.fillcolor,hoverinfo:f({},T.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:k.hoveron,hovertemplate:I(),selected:k.selected,unselected:k.unselected}},30621:function(se,U,r){"use strict";var I=r(92770),C=r(50606).BADNUM,f=r(36922),k=r(75225),T=r(66279),v=r(47761).calcMarkerSize;se.exports=function(c,i){for(var s=c._fullLayout,a=i.subplot,l=s[a].imaginaryaxis,u=s[a].realaxis.makeCalcdata(i,"real"),d=l.makeCalcdata(i,"imag"),g=i._length,h=new Array(g),w=0;w<g;w++){var y=u[w],p=d[w],_=h[w]={};I(y)&&I(p)?(_.real=y,_.imag=p):_.real=C}return v(i,g),f(c,i),k(h,i),T(h,i),h}},65269:function(se,U,r){"use strict";var I=r(71828),C=r(34098),f=r(49508),k=r(11058),T=r(94039),v=r(82410),c=r(28908),i=r(47581).PTS_LINESONLY,s=r(48300);se.exports=function(a,o,l,u){function d(w,y){return I.coerce(a,o,s,w,y)}var y,_,x,b,M,g=(y=o,b=(_=d)("real"),M=_("imag"),b&&M&&(x=Math.min(b.length,M.length)),y._length=x,x);if(g){d("mode",g<i?"lines+markers":"lines"),d("text"),d("hovertext"),"fills"!==o.hoveron&&d("hovertemplate"),C.hasLines(o)&&(k(a,o,l,u,d,{backoff:!0}),T(a,o,d),d("connectgaps")),C.hasMarkers(o)&&f(a,o,l,u,d,{gradient:!0}),C.hasText(o)&&(d("texttemplate"),v(a,o,u,d));var h=[];(C.hasMarkers(o)||C.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),h.push("points")),d("fill"),"none"!==o.fill&&(c(a,o,l,d),C.hasLines(o)||T(a,o,d)),"tonext"!==o.fill&&"toself"!==o.fill||h.push("fills"),d("hoveron",h.join("+")||"points"),I.coerceSelectionMarkerOpacity(o,d)}else o.visible=!1}},62047:function(se,U,r){"use strict";var I=r(89298);se.exports=function(C,f,k){var T={},v=k[f.subplot]._subplot;return T.realLabel=I.tickText(v.radialAxis,C.real,!0).text,T.imagLabel=I.tickText(v.angularAxis,C.imag,!0).text,T}},11350:function(se,U,r){"use strict";var I=r(33720);function C(f,k,T,v){var c=T.radialAxis,i=T.angularAxis;c._hovertitle="real",i._hovertitle="imag";var s={};s[k.subplot]={_subplot:T};var a=k._module.formatLabels(f,k,s);v.realLabel=a.realLabel,v.imagLabel=a.imagLabel;var l=[];function u(g,h){l.push(g._hovertitle+": "+h)}if(!k.hovertemplate){var d=(f.hi||k.hoverinfo).split("+");-1!==d.indexOf("all")&&(d=["real","imag","text"]),-1!==d.indexOf("real")&&u(c,v.realLabel),-1!==d.indexOf("imag")&&u(i,v.imagLabel),-1!==d.indexOf("text")&&v.text&&(l.push(v.text),delete v.text),v.extraText=l.join("<br>")}}se.exports={hoverPoints:function(f,k,T,v){var c=I(f,k,T,v);if(c&&!1!==c[0].index){var i=c[0];if(void 0===i.index)return c;var s=f.subplot,a=i.cd[i.index],o=i.trace;if(s.isPtInside(a))return i.xLabelVal=void 0,i.yLabelVal=void 0,C(a,o,s,i),i.hovertemplate=o.hovertemplate,c}},makeHoverPointText:C}},85956:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"scattersmith",basePlotModule:r(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:r(48300),supplyDefaults:r(65269),colorbar:r(4898),formatLabels:r(62047),calc:r(30621),plot:r(12480),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(11350).hoverPoints,selectPoints:r(98002),meta:{}}},12480:function(se,U,r){"use strict";var I=r(32663),C=r(50606).BADNUM,f=r(23893).smith;se.exports=function(k,T,v){for(var c=T.layers.frontplot.select("g.scatterlayer"),i=T.xaxis,s=T.yaxis,a={xaxis:i,yaxis:s,plot:T.framework,layerClipId:T._hasClipOnAxisFalse?T.clipIds.forTraces:null},o=0;o<v.length;o++)for(var l=v[o],u=0;u<l.length;u++){0===u&&(l[0].trace._xA=i,l[0].trace._yA=s);var d=l[u],g=d.real;if(g===C)d.x=d.y=C;else{var h=f([g,d.imag]);d.x=h[0],d.y=h[1]}}I(k,a,v,c)}},50413:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(82196),k=r(9012),T=r(50693),v=r(79952).P,c=r(1426).extendFlat,i=f.marker,s=f.line,a=i.line;se.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:c({},f.mode,{dflt:"markers"}),text:c({},f.text,{}),texttemplate:C({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:c({},f.hovertext,{}),line:{color:s.color,width:s.width,dash:v,backoff:s.backoff,shape:c({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:f.connectgaps,cliponaxis:f.cliponaxis,fill:c({},f.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:f.fillcolor,marker:c({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:i.angleref,standoff:i.standoff,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:c({width:a.width,editType:"calc"},T("marker.line")),gradient:i.gradient,editType:"calc"},T("marker")),textfont:f.textfont,textposition:f.textposition,selected:f.selected,unselected:f.unselected,hoverinfo:c({},k.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:f.hoveron,hovertemplate:I()}},54337:function(se,U,r){"use strict";var I=r(92770),C=r(36922),f=r(75225),k=r(66279),T=r(47761).calcMarkerSize,v=["a","b","c"],c={a:["b","c"],b:["a","c"],c:["a","b"]};se.exports=function(i,s){var a,o,l,u,d,g,h=i._fullLayout[s.subplot].sum,w=s.sum||h,y={a:s.a,b:s.b,c:s.c};for(a=0;a<v.length;a++)if(!y[l=v[a]]){for(d=y[c[l][0]],g=y[c[l][1]],u=new Array(d.length),o=0;o<d.length;o++)u[o]=w-d[o]-g[o];y[l]=u}var p,_,x,b,D=s._length,S=new Array(D);for(a=0;a<D;a++)_=y.b[a],x=y.c[a],I(p=y.a[a])&&I(_)&&I(x)?(1!=(b=h/((p=+p)+(_=+_)+(x=+x)))&&(p*=b,_*=b,x*=b),S[a]={x:x-_,y:p,a:p,b:_,c:x}):S[a]={x:!1,y:!1};return T(s,D),C(i,s),f(S,s),k(S,s),S}},46008:function(se,U,r){"use strict";var I=r(71828),C=r(47581),f=r(34098),k=r(49508),T=r(11058),v=r(94039),c=r(82410),i=r(28908),s=r(50413);se.exports=function(a,o,l,u){function d(_,x){return I.coerce(a,o,s,_,x)}var g,h=d("a"),w=d("b"),y=d("c");if(h?(g=h.length,w?(g=Math.min(g,w.length),y&&(g=Math.min(g,y.length))):g=y?Math.min(g,y.length):0):w&&y&&(g=Math.min(w.length,y.length)),g){o._length=g,d("sum"),d("text"),d("hovertext"),"fills"!==o.hoveron&&d("hovertemplate"),d("mode",g<C.PTS_LINESONLY?"lines+markers":"lines"),f.hasLines(o)&&(T(a,o,l,u,d,{backoff:!0}),v(a,o,d),d("connectgaps")),f.hasMarkers(o)&&k(a,o,l,u,d,{gradient:!0}),f.hasText(o)&&(d("texttemplate"),c(a,o,u,d));var p=[];(f.hasMarkers(o)||f.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),p.push("points")),d("fill"),"none"!==o.fill&&(i(a,o,l,d),f.hasLines(o)||v(a,o,d)),"tonext"!==o.fill&&"toself"!==o.fill||p.push("fills"),d("hoveron",p.join("+")||"points"),I.coerceSelectionMarkerOpacity(o,d)}else o.visible=!1}},4524:function(se){"use strict";se.exports=function(U,r,I,C,f){if(r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),C[f]){var k=C[f];U.a=k.a,U.b=k.b,U.c=k.c}else U.a=r.a,U.b=r.b,U.c=r.c;return U}},93645:function(se,U,r){"use strict";var I=r(89298);se.exports=function(C,f,k){var T={},v=k[f.subplot]._subplot;return T.aLabel=I.tickText(v.aaxis,C.a,!0).text,T.bLabel=I.tickText(v.baxis,C.b,!0).text,T.cLabel=I.tickText(v.caxis,C.c,!0).text,T}},47250:function(se,U,r){"use strict";var I=r(33720);se.exports=function(C,f,k,T){var v=I(C,f,k,T);if(v&&!1!==v[0].index){var c=v[0];if(void 0===c.index){var s=C.xa._length,a=s*(1-c.y0/C.ya._length)/2,o=s-a;return c.x0=Math.max(Math.min(c.x0,o),a),c.x1=Math.max(Math.min(c.x1,o),a),v}var l=c.cd[c.index],u=c.trace,d=c.subplot;c.a=l.a,c.b=l.b,c.c=l.c,c.xLabelVal=void 0,c.yLabelVal=void 0;var g={};g[u.subplot]={_subplot:d};var h=u._module.formatLabels(l,u,g);c.aLabel=h.aLabel,c.bLabel=h.bLabel,c.cLabel=h.cLabel;var y=[];if(!u.hovertemplate){var p=(l.hi||u.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["a","b","c"]),-1!==p.indexOf("a")&&_(d.aaxis,c.aLabel),-1!==p.indexOf("b")&&_(d.baxis,c.bLabel),-1!==p.indexOf("c")&&_(d.caxis,c.cLabel)}return c.extraText=y.join("<br>"),c.hovertemplate=u.hovertemplate,v}function _(x,b){y.push(x._hovertitle+": "+b)}}},52979:function(se,U,r){"use strict";se.exports={attributes:r(50413),supplyDefaults:r(46008),colorbar:r(4898),formatLabels:r(93645),calc:r(54337),plot:r(7507),style:r(16296).style,styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(47250),selectPoints:r(98002),eventData:r(4524),moduleType:"trace",name:"scatterternary",basePlotModule:r(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function(se,U,r){"use strict";var I=r(32663);se.exports=function(C,f,k){var T=f.plotContainer;T.select(".scatterlayer").selectAll("*").remove();for(var v=f.xaxis,c=f.yaxis,i={xaxis:v,yaxis:c,plot:T,layerClipId:f._hasClipOnAxisFalse?f.clipIdRelative:null},s=f.layers.frontplot.select("g.scatterlayer"),a=0;a<k.length;a++){var o=k[a];o.length&&(o[0].trace._xA=v,o[0].trace._yA=c)}I(C,i,k,s)}},46880:function(se,U,r){"use strict";var I=r(82196),C=r(50693),f=r(12663).axisHoverFormat,k=r(5386).fF,T=r(42341),v=r(85555).idRegex,c=r(44467).templatedArray,i=r(1426).extendFlat,s=I.marker,a=s.line,o=i(C("marker.line",{editTypeOverride:"calc"}),{width:i({},a.width,{editType:"calc"}),editType:"calc"}),l=i(C("marker"),{symbol:s.symbol,angle:s.angle,size:i({},s.size,{editType:"markerSize"}),sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,opacity:s.opacity,colorbar:s.colorbar,line:o,editType:"calc"});function u(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:v[d],editType:"plot"}}}l.color.editType=l.cmin.editType=l.cmax.editType="style",se.exports={dimensions:c("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:i({},T.text,{}),hovertext:i({},T.hovertext,{}),hovertemplate:k(),xhoverformat:f("x"),yhoverformat:f("y"),marker:l,xaxes:u("x"),yaxes:u("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:T.selected.marker,editType:"calc"},unselected:{marker:T.unselected.marker,editType:"calc"},opacity:T.opacity}},65017:function(se,U,r){"use strict";var I=r(73972),C=r(83312);se.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:r(46880),supplyDefaults:r(25784),colorbar:r(4898),calc:r(87625),plot:r(79410),hoverPoints:r(8567).hoverPoints,selectPoints:r(8689),editStyle:r(28801),meta:{}},I.register(C)},16947:function(se,U,r){"use strict";var I=r(46075),C=r(73972),f=r(79749),k=r(27659).a0,T=r(93612),v=r(41675).getFromId,c=r(89298).shouldShowZeroLine,i="splom",s={};function a(l,u,d){for(var h=u._visibleDims,w=d.viewOpts.ranges=new Array(d.matrixOptions.data.length),y=0;y<h.length;y++){var p=h[y],_=w[y]=new Array(4),x=v(l,u._diag[p][0]);x&&(_[0]=x.r2l(x.range[0]),_[2]=x.r2l(x.range[1]));var b=v(l,u._diag[p][1]);b&&(_[1]=b.r2l(b.range[0]),_[3]=b.r2l(b.range[1]))}d.selectBatch.length||d.unselectBatch.length?d.matrix.update({ranges:w},{ranges:w}):d.matrix.update({ranges:w})}function o(l){var u=l._fullLayout,d=u._glcanvas.data()[0].regl,g=u._splomGrid;g||(g=u._splomGrid=I(d)),g.update(function(h){var w,y=h._context.plotGlPixelRatio,p=h._fullLayout,_=p._size,x=[0,0,p.width*y,p.height*y],b={};function M(K,ue,ae,ne,Q,ie){ae*=y,ne*=y,Q*=y,ie*=y;var le=ue[K+"color"],fe=ue[K+"width"],he=String(le+fe);he in b?b[he].data.push(NaN,NaN,ae,ne,Q,ie):b[he]={data:[ae,ne,Q,ie],join:"rect",thickness:fe*y,color:le,viewport:x,range:x,overlay:!1}}for(w in p._splomSubplots){var m,D,S=p._plots[w],O=S.xaxis,P=S.yaxis,R=O._gridVals,F=P._gridVals,B=O._offset,J=O._length,z=P._length,$=_.b+P.domain[0]*_.h,G=-P._m,H=-G*P.r2l(P.range[0],P.calendar);if(O.showgrid)for(w=0;w<R.length;w++)m=B+O.l2p(R[w].x),M("grid",O,m,$,m,$+z);if(P.showgrid)for(w=0;w<F.length;w++)M("grid",P,B,D=$+H+G*F[w].x,B+J,D);c(h,O,P)&&(m=B+O.l2p(0),M("zeroline",O,m,$,m,$+z)),c(h,P,O)&&M("zeroline",P,B,D=$+H+0,B+J,D)}var X=[];for(w in b)X.push(b[w]);return X}(l))}se.exports={name:i,attr:T.attr,attrRegex:T.attrRegex,layoutAttributes:T.layoutAttributes,supplyLayoutDefaults:T.supplyLayoutDefaults,drawFramework:T.drawFramework,plot:function(l){var u=l._fullLayout,d=C.getModule(i),g=k(l.calcdata,d)[0];f(l,["ANGLE_instanced_arrays","OES_element_index_uint"],s)&&(u._hasOnlyLargeSploms&&o(l),d.plot(l,{},g))},drag:function(l){var u=l.calcdata,d=l._fullLayout;d._hasOnlyLargeSploms&&o(l);for(var g=0;g<u.length;g++){var h=u[g][0].trace,w=d._splomScenes[h.uid];"splom"===h.type&&w&&w.matrix&&a(l,h,w)}},updateGrid:o,clean:function(l,u,d,g){var h,w={};if(g._splomScenes){for(h=0;h<l.length;h++){var y=l[h];"splom"===y.type&&(w[y.uid]=1)}for(h=0;h<d.length;h++){var p=d[h];if(!w[p.uid]){var _=g._splomScenes[p.uid];_&&_.destroy&&_.destroy(),g._splomScenes[p.uid]=null,delete g._splomScenes[p.uid]}}}0===Object.keys(g._splomScenes||{}).length&&delete g._splomScenes,g._splomGrid&&!u._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),T.clean(l,u,d,g)},updateFx:T.updateFx,toSVG:T.toSVG,reglPrecompiled:s}},87625:function(se,U,r){"use strict";var I=r(71828),C=r(41675),f=r(47761).calcMarkerSize,k=r(47761).calcAxisExpansion,T=r(36922),v=r(19635).markerSelection,c=r(19635).markerStyle,i=r(10164),s=r(50606).BADNUM,a=r(78232).TOO_MANY_POINTS;se.exports=function(o,l){var u,d,g,h,w,y,p=l.dimensions,_=l._length,x={},b=x.cdata=[],M=x.data=[],m=l._visibleDims=[];function D(O,P){for(var R=O.makeCalcdata({v:P.values,vcalendar:l.calendar},"v"),F=0;F<R.length;F++)R[F]=R[F]===s?NaN:R[F];b.push(R),M.push("log"===O.type?I.simpleMap(R,O.c2l):R)}for(u=0;u<p.length;u++)if((g=p[u]).visible){if(h=C.getFromId(o,l._diag[u][0]),w=C.getFromId(o,l._diag[u][1]),h&&w&&h.type!==w.type){I.log("Skipping splom dimension "+u+" with conflicting axis types");continue}h?(D(h,g),w&&"category"===w.type&&(w._categories=h._categories.slice())):D(w,g),m.push(u)}for(T(o,l),I.extendFlat(x,c(o,l)),y=b.length*_>a?x.sizeAvg||Math.max(x.size,3):f(l,_),d=0;d<m.length;d++)g=p[u=m[d]],h=C.getFromId(o,l._diag[u][0])||{},w=C.getFromId(o,l._diag[u][1])||{},k(o,l,h,w,b[d],b[d],y);var S=i(o,l);return S.matrix||(S.matrix=!0),S.matrixOptions=x,S.selectedOptions=v(o,l,l.selected),S.unselectedOptions=v(o,l,l.unselected),[{x:!1,y:!1,t:{},trace:l}]}},25784:function(se,U,r){"use strict";var I=r(71828),C=r(85501),f=r(46880),k=r(34098),T=r(49508),v=r(94397),c=r(68645).isOpenSymbol;function i(s,a){function o(u,d){return I.coerce(s,a,f.dimensions,u,d)}o("label");var l=o("values");l&&l.length?o("visible"):a.visible=!1,o("axis.type"),o("axis.matches")}se.exports=function(s,a,o,l){function u(_,x){return I.coerce(s,a,f,_,x)}var d=C(s,a,{name:"dimensions",handleItemDefaults:i}),g=u("diagonal.visible"),h=u("showupperhalf"),w=u("showlowerhalf");if(v(a,d,"values")&&(g||h||w)){u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),T(s,a,o,l,u,{noAngleRef:!0,noStandOff:!0});var y=c(a.marker.symbol),p=k.isBubble(a);u("marker.line.width",y||p?1:0),function(_,x,b,M){var m,D,S=x.dimensions,O=S.length,P=x.showupperhalf,R=x.showlowerhalf,F=x.diagonal.visible,B=new Array(O),J=new Array(O);for(m=0;m<O;m++){var z=m?m+1:"";B[m]="x"+z,J[m]="y"+z}var $=M("xaxes",B),G=M("yaxes",J),H=x._diag=new Array(O);x._xaxes={},x._yaxes={};var X=[],K=[];function ue(xe,Ee,Re,ke){if(xe){var Te=xe.charAt(0),we=b._splomAxes[Te];if(x["_"+Te+"axes"][xe]=1,ke.push(xe),!(xe in we)){var je=we[xe]={};Re&&(je.label=Re.label||"",Re.visible&&Re.axis&&(Re.axis.type&&(je.type=Re.axis.type),Re.axis.matches&&(je.matches=Ee)))}}}var ae=!F&&!R,ne=!F&&!P;for(x._axesDim={},m=0;m<O;m++){var Q=S[m],ie=0===m,le=m===O-1,fe=ie&&ae||le&&ne?void 0:$[m],he=ie&&ne||le&&ae?void 0:G[m];ue(fe,he,Q,X),ue(he,fe,Q,K),H[m]=[fe,he],x._axesDim[fe]=m,x._axesDim[he]=m}for(m=0;m<X.length;m++)for(D=0;D<K.length;D++){var pe=X[m]+K[D];m>D&&P||m<D&&R?b._splomSubplots[pe]=1:m!==D||!F&&R&&P||(b._splomSubplots[pe]=1)}(!R||!F&&P&&R)&&(b._splomGridDflt.xside="bottom",b._splomGridDflt.yside="left")}(0,a,l,u),I.coerceSelectionMarkerOpacity(a,u)}else a.visible=!1}},28801:function(se,U,r){"use strict";var I=r(71828),C=r(36922),f=r(19635).markerStyle;se.exports=function(k,T){var v=T.trace,c=k._fullLayout._splomScenes[v.uid];if(c){C(k,v),I.extendFlat(c.matrixOptions,f(k,v));var i=I.extendFlat({},c.matrixOptions,c.viewOpts);c.matrix.update(i,null)}}},35948:function(se,U){"use strict";U.getDimIndex=function(r,I){for(var C=I._id,f={x:0,y:1}[C.charAt(0)],k=r._visibleDims,T=0;T<k.length;T++)if(r._diag[k[T]][f]===C)return T;return!1}},8567:function(se,U,r){"use strict";var I=r(35948),C=r(20794).calcHover;se.exports={hoverPoints:function(f,k,T){var v=f.cd[0].trace,c=f.scene.matrixOptions.cdata,i=f.xa,s=f.ya,a=i.c2p(k),o=s.c2p(T),l=f.distance,u=I.getDimIndex(v,i),d=I.getDimIndex(v,s);if(!1===u||!1===d)return[f];for(var g,h,w=c[u],y=c[d],p=l,_=0;_<w.length;_++){var b=y[_],M=i.c2p(w[_])-a,m=s.c2p(b)-o,D=Math.sqrt(M*M+m*m);D<p&&(p=h=D,g=_)}return f.index=g,f.distance=p,f.dxy=h,void 0===g?[f]:[C(f,w,y,v)]}}},6419:function(se,U,r){"use strict";var I=r(65017);I.basePlotModule=r(16947),se.exports=I},79410:function(se,U,r){"use strict";var I=r(60487),C=r(71828),f=r(41675),k=r(64505).selectMode;function T(v,c){var i,s,a,o,l,u=v._fullLayout,d=u._size,g=c.trace,h=c.t,w=u._splomScenes[g.uid],y=w.matrixOptions,p=y.cdata,_=u._glcanvas.data()[0].regl,x=u.dragmode;if(0!==p.length){y.lower=g.showupperhalf,y.upper=g.showlowerhalf,y.diagonal=g.diagonal.visible;var b=g._visibleDims,M=p.length,m=w.viewOpts={};for(m.ranges=new Array(M),m.domains=new Array(M),l=0;l<b.length;l++){a=b[l];var D=m.ranges[l]=new Array(4),S=m.domains[l]=new Array(4);(i=f.getFromId(v,g._diag[a][0]))&&(D[0]=i._rl[0],D[2]=i._rl[1],S[0]=i.domain[0],S[2]=i.domain[1]),(s=f.getFromId(v,g._diag[a][1]))&&(D[1]=s._rl[0],D[3]=s._rl[1],S[1]=s.domain[0],S[3]=s.domain[1])}var O=v._context.plotGlPixelRatio,P=d.l*O,R=d.b*O;m.viewport=[P,R,d.w*O+P,d.h*O+R],!0===w.matrix&&(w.matrix=I(_));var J=u.clickmode.indexOf("select")>-1,z=!0;if(k(x)||g.selectedpoints||J){var $=g._length;if(g.selectedpoints){w.selectBatch=g.selectedpoints;var G=g.selectedpoints,H={};for(a=0;a<G.length;a++)H[G[a]]=!0;var X=[];for(a=0;a<$;a++)H[a]||X.push(a);w.unselectBatch=X}var K=h.xpx=new Array(M),ue=h.ypx=new Array(M);for(l=0;l<b.length;l++){if(i=f.getFromId(v,g._diag[a=b[l]][0]))for(K[l]=new Array($),o=0;o<$;o++)K[l][o]=i.c2p(p[l][o]);if(s=f.getFromId(v,g._diag[a][1]))for(ue[l]=new Array($),o=0;o<$;o++)ue[l][o]=s.c2p(p[l][o])}if(w.selectBatch.length||w.unselectBatch.length){var ae=C.extendFlat({},y,w.unselectedOptions,m),ne=C.extendFlat({},y,w.selectedOptions,m);w.matrix.update(ae,ne),z=!1}}else h.xpx=h.ypx=null;if(z){var Q=C.extendFlat({},y,m);w.matrix.update(Q,null)}}}se.exports=function(v,c,i){if(i.length)for(var s=0;s<i.length;s++)T(v,i[s][0])}},10164:function(se,U,r){"use strict";var I=r(71828);se.exports=function(C,f){var k=C._fullLayout,T=f.uid,v=k._splomScenes;v||(v=k._splomScenes={});var c={dirty:!0,selectBatch:[],unselectBatch:[]},i=v[f.uid];return i||((i=v[T]=I.extendFlat({},c,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){i.matrix&&i.matrix.draw&&(i.selectBatch.length||i.unselectBatch.length?i.matrix.draw(i.unselectBatch,i.selectBatch):i.matrix.draw()),i.dirty=!1},i.destroy=function(){i.matrix&&i.matrix.destroy&&i.matrix.destroy(),i.matrixOptions=null,i.selectBatch=null,i.unselectBatch=null,i=null}),i.dirty||I.extendFlat(i,c),i}},8689:function(se,U,r){"use strict";var I=r(71828),C=I.pushUnique,f=r(34098),k=r(35948);se.exports=function(T,v){var c=T.cd,i=c[0].trace,s=c[0].t,a=T.scene,o=a.matrixOptions.cdata,l=T.xaxis,u=T.yaxis,d=[];if(!a)return d;var g=!f.hasMarkers(i)&&!f.hasText(i);if(!0!==i.visible||g)return d;var h=k.getDimIndex(i,l),w=k.getDimIndex(i,u);if(!1===h||!1===w)return d;var y=s.xpx[h],p=s.ypx[w],_=o[h],x=o[w],b=(T.scene.selectBatch||[]).slice(),M=[];if(!1!==v&&!v.degenerate)for(var m=0;m<_.length;m++)v.contains([y[m],p[m]],null,m,T)?(d.push({pointNumber:m,x:_[m],y:x[m]}),C(b,m)):-1!==b.indexOf(m)?C(b,m):M.push(m);var D=a.matrixOptions;return b.length||M.length?a.selectBatch.length||a.unselectBatch.length||a.matrix.update(a.unselectedOptions,I.extendFlat({},D,a.selectedOptions,a.viewOpts)):a.matrix.update(D,null),a.selectBatch=b,a.unselectBatch=M,d}},21850:function(se,U,r){"use strict";var I=r(50693),C=r(12663).axisHoverFormat,f=r(5386).fF,k=r(2418),T=r(9012),v=r(1426).extendFlat,c={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:f({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:C("u",1),vhoverformat:C("v",1),whoverformat:C("w",1),xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(c,I("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(i){c[i]=k[i]}),c.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),c.transforms=void 0,se.exports=c},88489:function(se,U,r){"use strict";var I=r(71828),C=r(78803);function f(v){var c,i,s,a,o,l,u,d,g,h,w,y,p=v._x,_=v._y,x=v._z,b=v._len,M=-1/0,m=1/0,D=-1/0,S=1/0,O=-1/0,P=1/0,R="";for(b&&(u=p[0],g=_[0],w=x[0]),b>1&&(d=p[b-1],h=_[b-1],y=x[b-1]),c=0;c<b;c++)M=Math.max(M,p[c]),m=Math.min(m,p[c]),D=Math.max(D,_[c]),S=Math.min(S,_[c]),O=Math.max(O,x[c]),P=Math.min(P,x[c]),a||p[c]===u||(a=!0,R+="x"),o||_[c]===g||(o=!0,R+="y"),l||x[c]===w||(l=!0,R+="z");a||(R+="x"),o||(R+="y"),l||(R+="z");var F=k(v._x),B=k(v._y),J=k(v._z);R=(R=(R=R.replace("x",(u>d?"-":"+")+"x")).replace("y",(g>h?"-":"+")+"y")).replace("z",(w>y?"-":"+")+"z");var z=function(){b=0,F=[],B=[],J=[]};(!b||b<F.length*B.length*J.length)&&z();var $=function(Te){return"x"===Te?p:"y"===Te?_:x},G=function(Te){return"x"===Te?F:"y"===Te?B:J},H=function(Te){return Te[b-1]<Te[0]?-1:1},X=$(R[1]),K=$(R[3]),ue=$(R[5]),ae=G(R[1]).length,ne=G(R[3]).length,Q=G(R[5]).length,ie=!1,le=function(Te,we,je){return ae*(ne*Te+we)+je},fe=H($(R[1])),he=H($(R[3])),pe=H($(R[5]));for(c=0;c<Q-1;c++){for(i=0;i<ne-1;i++){for(s=0;s<ae-1;s++){var xe=le(c,i,s),Ee=le(c,i,s+1),Re=le(c,i+1,s),ke=le(c+1,i,s);if(X[xe]*fe<X[Ee]*fe&&K[xe]*he<K[Re]*he&&ue[xe]*pe<ue[ke]*pe||(ie=!0),ie)break}if(ie)break}if(ie)break}return ie&&(I.warn("Encountered arbitrary coordinates! Unable to input data grid."),z()),{xMin:m,yMin:S,zMin:P,xMax:M,yMax:D,zMax:O,Xs:F,Ys:B,Zs:J,len:b,fill:R}}function k(v){return I.distinctVals(v).vals}function T(v,c){if(void 0===c&&(c=v.length),I.isTypedArray(v))return v.subarray(0,c);for(var i=[],s=0;s<c;s++)i[s]=+v[s];return i}se.exports={calc:function(v,c){c._len=Math.min(c.u.length,c.v.length,c.w.length,c.x.length,c.y.length,c.z.length),c._u=T(c.u,c._len),c._v=T(c.v,c._len),c._w=T(c.w,c._len),c._x=T(c.x,c._len),c._y=T(c.y,c._len),c._z=T(c.z,c._len);var i=f(c);c._gridFill=i.fill,c._Xs=i.Xs,c._Ys=i.Ys,c._Zs=i.Zs,c._len=i.len;var s,a,o,l=0;c.starts&&(s=T(c.starts.x||[]),a=T(c.starts.y||[]),o=T(c.starts.z||[]),l=Math.min(s.length,a.length,o.length)),c._startsX=s||[],c._startsY=a||[],c._startsZ=o||[];var u,d=0,g=1/0;for(u=0;u<c._len;u++){var h=c._u[u],w=c._v[u],y=c._w[u],p=Math.sqrt(h*h+w*w+y*y);d=Math.max(d,p),g=Math.min(g,p)}for(C(v,c,{vals:[g,d],containerStr:"",cLetter:"c"}),u=0;u<l;u++){var _=s[u];i.xMax=Math.max(i.xMax,_),i.xMin=Math.min(i.xMin,_);var x=a[u];i.yMax=Math.max(i.yMax,x),i.yMin=Math.min(i.yMin,x);var b=o[u];i.zMax=Math.max(i.zMax,b),i.zMin=Math.min(i.zMin,b)}c._slen=l,c._normMax=d,c._xbnds=[i.xMin,i.xMax],c._ybnds=[i.yMin,i.yMax],c._zbnds=[i.zMin,i.zMax]},filter:T,processGrid:f}},90154:function(se,U,r){"use strict";var I=r(9330).gl_streamtube3d,C=I.createTubeMesh,f=r(71828),k=r(81697).parseColorScale,T=r(21081).extractOpts,v=r(90060),c={xaxis:0,yaxis:1,zaxis:2};function i(u,d){this.scene=u,this.uid=d,this.mesh=null,this.data=null}var s=i.prototype;function a(u){var d=u.length;return d>2?u.slice(1,d-1):2===d?[(u[0]+u[1])/2]:u}function o(u){var d=u.length;return 1===d?[.5,.5]:[u[1]-u[0],u[d-1]-u[d-2]]}function l(u,d){var g=u.fullSceneLayout,h=u.dataScale,w=d._len,y={};function p(ae,ne){var Q=g[ne],ie=h[c[ne]];return f.simpleMap(ae,function(le){return Q.d2l(le)*ie})}if(y.vectors=v(p(d._u,"xaxis"),p(d._v,"yaxis"),p(d._w,"zaxis"),w),!w)return{positions:[],cells:[]};var _=p(d._Xs,"xaxis"),x=p(d._Ys,"yaxis"),b=p(d._Zs,"zaxis");if(y.meshgrid=[_,x,b],y.gridFill=d._gridFill,d._slen)y.startingPositions=v(p(d._startsX,"xaxis"),p(d._startsY,"yaxis"),p(d._startsZ,"zaxis"));else{for(var M=x[0],m=a(_),D=a(b),S=new Array(m.length*D.length),O=0,P=0;P<m.length;P++)for(var R=0;R<D.length;R++)S[O++]=[m[P],M,D[R]];y.startingPositions=S}y.colormap=k(d),y.tubeSize=d.sizeref,y.maxLength=d.maxdisplayed;var F=p(d._xbnds,"xaxis"),B=p(d._ybnds,"yaxis"),J=p(d._zbnds,"zaxis"),z=o(_),$=o(x),G=o(b),X=I(y,[[F[0]-z[0],B[0]-$[0],J[0]-G[0]],[F[1]+z[1],B[1]+$[1],J[1]+G[1]]]),K=T(d);X.vertexIntensityBounds=[K.min/d._normMax,K.max/d._normMax];var ue=d.lightposition;return X.lightPosition=[ue.x,ue.y,ue.z],X.ambient=d.lighting.ambient,X.diffuse=d.lighting.diffuse,X.specular=d.lighting.specular,X.roughness=d.lighting.roughness,X.fresnel=d.lighting.fresnel,X.opacity=d.opacity,d._pad=X.tubeScale*d.sizeref*2,X}s.handlePick=function(u){var d=this.scene.fullSceneLayout,g=this.scene.dataScale;function h(p,_){var b=g[c[_]];return d[_].l2c(p)/b}if(u.object===this.mesh){var w=u.data.position,y=u.data.velocity;return u.traceCoordinate=[h(w[0],"xaxis"),h(w[1],"yaxis"),h(w[2],"zaxis"),h(y[0],"xaxis"),h(y[1],"yaxis"),h(y[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}},s.update=function(u){this.data=u;var d=l(this.scene,u);this.mesh.update(d)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},se.exports=function(u,d){var g=u.glplot.gl,h=l(u,d),w=C(g,h),y=new i(u,d.uid);return y.mesh=w,y.data=d,w._trace=y,u.glplot.add(w),y}},22459:function(se,U,r){"use strict";var I=r(71828),C=r(1586),f=r(21850);se.exports=function(k,T,v,c){function i(g,h){return I.coerce(k,T,f,g,h)}var s=i("u"),a=i("v"),o=i("w"),l=i("x"),u=i("y"),d=i("z");s&&s.length&&a&&a.length&&o&&o.length&&l&&l.length&&u&&u.length&&d&&d.length?(i("starts.x"),i("starts.y"),i("starts.z"),i("maxdisplayed"),i("sizeref"),i("lighting.ambient"),i("lighting.diffuse"),i("lighting.specular"),i("lighting.roughness"),i("lighting.fresnel"),i("lightposition.x"),i("lightposition.y"),i("lightposition.z"),C(k,T,c,i,{prefix:"",cLetter:"c"}),i("text"),i("hovertext"),i("hovertemplate"),i("uhoverformat"),i("vhoverformat"),i("whoverformat"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),T._length=null):T.visible=!1}},61510:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"streamtube",basePlotModule:r(58547),categories:["gl3d","showLegend"],attributes:r(21850),supplyDefaults:r(22459),colorbar:{min:"cmin",max:"cmax"},calc:r(88489).calc,plot:r(90154),eventData:function(I,C){return I.tubex=I.x,I.tubey=I.y,I.tubez=I.z,I.tubeu=C.traceCoordinate[3],I.tubev=C.traceCoordinate[4],I.tubew=C.traceCoordinate[5],I.norm=C.traceCoordinate[6],I.divergence=C.traceCoordinate[7],delete I.x,delete I.y,delete I.z,I},meta:{}}},57564:function(se,U,r){"use strict";var I=r(9012),C=r(5386).fF,f=r(5386).si,k=r(50693),T=r(27670).Y,v=r(34e3),c=r(7055),i=r(1426).extendFlat,s=r(79952).u;se.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:i({colors:{valType:"data_array",editType:"calc"},line:{color:i({},v.marker.line.color,{dflt:null}),width:i({},v.marker.line.width,{dflt:1}),editType:"calc"},pattern:s,editType:"calc"},k("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:v.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:f({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:i({},I.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:C({},{keys:c.eventDataKeys}),textfont:v.textfont,insidetextorientation:v.insidetextorientation,insidetextfont:v.insidetextfont,outsidetextfont:i({},v.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:v.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:T({name:"sunburst",trace:!0,editType:"calc"})}},66888:function(se,U,r){"use strict";var I=r(74875);U.name="sunburst",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},52147:function(se,U,r){"use strict";var I=r(674),C=r(92770),f=r(71828),k=r(21081).makeColorScaleFuncFromTrace,T=r(32354).makePullColorFn,v=r(32354).generateExtendedColors,c=r(21081).calc,i=r(50606).ALMOST_EQUAL,s={},a={},o={};function l(u,d,g){var h=0,w=u.children;if(w){for(var y=w.length,p=0;p<y;p++)h+=l(w[p],d,g);g.branches&&h++}else g.leaves&&h++;return u.value=u.data.data.value=h,d._values||(d._values=[]),d._values[u.data.data.i]=h,h}U.calc=function(u,d){var g,h,w,y,p,_,x=u._fullLayout,b=d.ids,M=f.isArrayOrTypedArray(b),m=d.labels,D=d.parents,S=d.values,O=f.isArrayOrTypedArray(S),P=[],R={},F={},B=function(pe){return pe||"number"==typeof pe},J=function(pe){return!O||C(S[pe])&&S[pe]>=0};M?(g=Math.min(b.length,D.length),h=function(pe){return B(b[pe])&&J(pe)},w=function(pe){return String(b[pe])}):(g=Math.min(m.length,D.length),h=function(pe){return B(m[pe])&&J(pe)},w=function(pe){return String(m[pe])}),O&&(g=Math.min(g,S.length));for(var z=0;z<g;z++)if(h(z)){var $=w(z),G=B(D[z])?String(D[z]):"",H={i:z,id:$,pid:G,label:B(m[z])?String(m[z]):""};O&&(H.v=+S[z]),P.push(H),p=$,R[y=G]?R[y].push(p):R[y]=[p],F[p]=1}if(R[""]){if(R[""].length>1){for(var X=f.randstr(),K=0;K<P.length;K++)""===P[K].pid&&(P[K].pid=X);P.unshift({hasMultipleRoots:!0,id:X,pid:"",label:""})}}else{var ue,ae=[];for(ue in R)F[ue]||ae.push(ue);if(1!==ae.length)return f.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",ae.join(", ")].join(" "));P.unshift({hasImpliedRoot:!0,id:ue=ae[0],pid:"",label:ue})}try{_=I.stratify().id(function(pe){return pe.id}).parentId(function(pe){return pe.pid})(P)}catch(pe){return f.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",pe.message].join(" "))}var ne=I.hierarchy(_),Q=!1;if(O)switch(d.branchvalues){case"remainder":ne.sum(function(pe){return pe.data.v});break;case"total":ne.each(function(pe){var xe=pe.data.data,Ee=xe.v;if(pe.children){var Re=pe.children.reduce(function(ke,Te){return ke+Te.data.data.v},0);if((xe.hasImpliedRoot||xe.hasMultipleRoots)&&(Ee=Re),Ee<Re*i)return Q=!0,f.warn(["Total value for node",pe.data.data.id,"of",d.name,"is smaller than the sum of its children.","\nparent value =",Ee,"\nchildren sum =",Re].join(" "))}pe.value=Ee})}else l(ne,d,{branches:-1!==d.count.indexOf("branches"),leaves:-1!==d.count.indexOf("leaves")});if(!Q){var ie,le;d.sort&&ne.sort(function(pe,xe){return xe.value-pe.value});var fe=d.marker.colors||[];return d._hasColorscale?(!!fe.length||(fe=O?d.values:d._values),c(u,d,{vals:fe,containerStr:"marker",cLetter:"c"}),le=k(d.marker)):ie=T(x["_"+d.type+"colormap"]),ne.each(function(pe){var xe=pe.data.data;xe.color=d._hasColorscale?le(fe[xe.i]):ie(fe[xe.i],xe.id)}),P[0].hierarchy=ne,P}},U._runCrossTraceCalc=function(u,d){var g=d._fullLayout,h=d.calcdata,w=g[u+"colorway"],y=g["_"+u+"colormap"];g["extend"+u+"colors"]&&(w=v(w,"icicle"===u?o:"treemap"===u?a:s));var p,_=0;function x(m){var D=m.data.data,S=D.id;!1===D.color&&(y[S]?D.color=y[S]:m.parent?m.parent.parent?D.color=m.parent.data.data.color:(y[S]=D.color=w[_%w.length],_++):D.color=p)}for(var b=0;b<h.length;b++){var M=h[b][0];M.trace.type===u&&M.hierarchy&&(p=M.trace.root.color,M.hierarchy.each(x))}},U.crossTraceCalc=function(u){return U._runCrossTraceCalc("sunburst",u)}},7055:function(se){"use strict";se.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function(se,U,r){"use strict";var I=r(71828),C=r(57564),f=r(27670).c,k=r(90769).handleText,T=r(37434).handleMarkerDefaults,v=r(21081),c=v.hasColorscale,i=v.handleDefaults;se.exports=function(s,a,o,l){function u(p,_){return I.coerce(s,a,C,p,_)}var d=u("labels"),g=u("parents");if(d&&d.length&&g&&g.length){var h=u("values");u(h&&h.length?"branchvalues":"count"),u("level"),u("maxdepth"),T(s,a,l,u);var w=a._hasColorscale=c(s,"marker","colors")||(s.marker||{}).coloraxis;w&&i(s,a,l,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",w?1:.7);var y=u("text");u("texttemplate"),a.texttemplate||u("textinfo",Array.isArray(y)?"text+label":"label"),u("hovertext"),u("hovertemplate"),k(s,a,l,u,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("insidetextorientation"),u("sort"),u("rotation"),u("root.color"),f(a,l,u),a._length=null}else a.visible=!1}},43467:function(se,U,r){"use strict";var I=r(91424),C=r(7901);se.exports=function(f,k,T,v,c){var i=k.data.data,a=c||i.color;if(i.i>=0){k.i=i.i;var o=T.marker;o.pattern&&o.colors&&o.pattern.shape||(o.color=a,k.color=a),I.pointStyle(f,T,v,k)}else C.fill(f,a)}},83523:function(se,U,r){"use strict";var I=r(39898),C=r(73972),f=r(23469).appendArrayPointValue,k=r(30211),T=r(71828),v=r(11086),c=r(2791),i=r(53581).formatPieValue;function s(a,o,l){for(var u=a.data.data,d={curveNumber:o.index,pointNumber:u.i,data:o._input,fullData:o},g=0;g<l.length;g++){var h=l[g];h in a&&(d[h]=a[h])}return"parentString"in a&&!c.isHierarchyRoot(a)&&(d.parent=a.parentString),f(d,o,u.i),d}se.exports=function(a,o,l,u,d){var g=u[0],h=g.trace,w=g.hierarchy,y="sunburst"===h.type,p="treemap"===h.type||"icicle"===h.type;"_hasHoverLabel"in h||(h._hasHoverLabel=!1),"_hasHoverEvent"in h||(h._hasHoverEvent=!1),a.on("mouseover",function(_){var x=l._fullLayout;if(!l._dragging&&!1!==x.hovermode){var b,M=l._fullData[h.index],m=_.data.data,D=m.i,S=c.isHierarchyRoot(_),O=c.getParent(w,_),P=c.getValue(_),R=function(fe){return T.castOption(M,D,fe)},F=R("hovertemplate"),B=k.castHoverinfo(M,x,D),J=x.separators;if(F||B&&"none"!==B&&"skip"!==B){var z,$;y&&(z=g.cx+_.pxmid[0]*(1-_.rInscribed),$=g.cy+_.pxmid[1]*(1-_.rInscribed)),p&&(z=_._hoverX,$=_._hoverY);var G,H={},X=[],K=[],ue=function(fe){return-1!==X.indexOf(fe)};B&&(X="all"===B?M._module.attributes.hoverinfo.flags:B.split("+")),H.label=m.label,ue("label")&&H.label&&K.push(H.label),m.hasOwnProperty("v")&&(H.value=m.v,H.valueLabel=i(H.value,J),ue("value")&&K.push(H.valueLabel)),H.currentPath=_.currentPath=c.getPath(_.data),ue("current path")&&!S&&K.push(H.currentPath);var ae=[],ne=function(){-1===ae.indexOf(G)&&(K.push(G),ae.push(G))};H.percentParent=_.percentParent=P/c.getValue(O),H.parent=_.parentString=c.getPtLabel(O),ue("percent parent")&&(G=c.formatPercent(H.percentParent,J)+" of "+H.parent,ne()),H.percentEntry=_.percentEntry=P/c.getValue(o),H.entry=_.entry=c.getPtLabel(o),!ue("percent entry")||S||_.onPathbar||(G=c.formatPercent(H.percentEntry,J)+" of "+H.entry,ne()),H.percentRoot=_.percentRoot=P/c.getValue(w),H.root=_.root=c.getPtLabel(w),ue("percent root")&&!S&&(G=c.formatPercent(H.percentRoot,J)+" of "+H.root,ne()),H.text=R("hovertext")||R("text"),ue("text")&&T.isValidTextValue(G=H.text)&&K.push(G),b=[s(_,M,d.eventDataKeys)];var Q={trace:M,y:$,_x0:_._x0,_x1:_._x1,_y0:_._y0,_y1:_._y1,text:K.join("<br>"),name:F||ue("name")?M.name:void 0,color:R("hoverlabel.bgcolor")||m.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:F,hovertemplateLabels:H,eventData:b};y&&(Q.x0=z-_.rInscribed*_.rpx1,Q.x1=z+_.rInscribed*_.rpx1,Q.idealAlign=_.pxmid[0]<0?"left":"right"),p&&(Q.x=z,Q.idealAlign=z<0?"left":"right");var ie=[];k.loneHover(Q,{container:x._hoverlayer.node(),outerContainer:x._paper.node(),gd:l,inOut_bbox:ie}),b[0].bbox=ie[0],h._hasHoverLabel=!0}if(p){var le=a.select("path.surface");d.styleOne(le,_,M,l,{hovered:!0})}h._hasHoverEvent=!0,l.emit("plotly_hover",{points:b||[s(_,M,d.eventDataKeys)],event:I.event})}}),a.on("mouseout",function(_){var x=l._fullLayout,b=l._fullData[h.index],M=I.select(this).datum();if(h._hasHoverEvent&&(_.originalEvent=I.event,l.emit("plotly_unhover",{points:[s(M,b,d.eventDataKeys)],event:I.event}),h._hasHoverEvent=!1),h._hasHoverLabel&&(k.loneUnhover(x._hoverlayer.node()),h._hasHoverLabel=!1),p){var m=a.select("path.surface");d.styleOne(m,M,b,l,{hovered:!1})}}),a.on("click",function(_){var x=l._fullLayout,b=l._fullData[h.index],M=y&&(c.isHierarchyRoot(_)||c.isLeaf(_)),m=c.getPtId(_),D=c.isEntry(_)?c.findEntryWithChild(w,m):c.findEntryWithLevel(w,m),S=c.getPtId(D),O={points:[s(_,b,d.eventDataKeys)],event:I.event};M||(O.nextLevel=S);var P=v.triggerHandler(l,"plotly_"+h.type+"click",O);if(!1!==P&&x.hovermode&&(l._hoverdata=[s(_,b,d.eventDataKeys)],k.click(l,I.event)),!M&&!1!==P&&!l._dragging&&!l._transitioning){C.call("_storeDirectGUIEdit",b,x._tracePreGUI[b.uid],{level:b.level});var R={data:[{level:S}],traces:[h.index]},F={frame:{redraw:!1,duration:d.transitionTime},transition:{duration:d.transitionTime,easing:d.transitionEasing},mode:"immediate",fromcurrent:!0};k.loneUnhover(x._hoverlayer.node()),C.call("animate",l,R,F)}})}},2791:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(6964),k=r(53581);function T(v){return v.data.data.pid}U.findEntryWithLevel=function(v,c){var i;return c&&v.eachAfter(function(s){if(U.getPtId(s)===c)return i=s.copy()}),i||v},U.findEntryWithChild=function(v,c){var i;return v.eachAfter(function(s){for(var a=s.children||[],o=0;o<a.length;o++)if(U.getPtId(a[o])===c)return i=s.copy()}),i||v},U.isEntry=function(v){return!v.parent},U.isLeaf=function(v){return!v.children},U.getPtId=function(v){return v.data.data.id},U.getPtLabel=function(v){return v.data.data.label},U.getValue=function(v){return v.value},U.isHierarchyRoot=function(v){return""===T(v)},U.setSliceCursor=function(v,c,i){var s=i.isTransitioning;if(!s){var a=v.datum();s=i.hideOnRoot&&U.isHierarchyRoot(a)||i.hideOnLeaves&&U.isLeaf(a)}f(v,s?null:"pointer")},U.getInsideTextFontKey=function(v,c,i,s,a){var l=i.data.data.i;return I.castOption(c,l,((a||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+v)||I.castOption(c,l,"textfont."+v)||s.size},U.getOutsideTextFontKey=function(v,c,i,s){var a=i.data.data.i;return I.castOption(c,a,"outsidetextfont."+v)||I.castOption(c,a,"textfont."+v)||s.size},U.isOutsideText=function(v,c){return!v._hasColorscale&&U.isHierarchyRoot(c)},U.determineTextFont=function(v,c,i,s){return U.isOutsideText(v,c)?{color:U.getOutsideTextFontKey("color",a=v,o=c,l=i),family:U.getOutsideTextFontKey("family",a,o,l),size:U.getOutsideTextFontKey("size",a,o,l)}:function(a,o,l,u){var g=o.data.data,h=g.i,w=I.castOption(a,h,((u||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!w&&a._input.textfont&&(w=I.castOption(a._input,h,"textfont.color")),{color:w||C.contrast(g.color),family:U.getInsideTextFontKey("family",a,o,l,u),size:U.getInsideTextFontKey("size",a,o,l,u)}}(v,c,i,s);var a,o,l},U.hasTransition=function(v){return!!(v&&v.duration>0)},U.getMaxDepth=function(v){return v.maxdepth>=0?v.maxdepth:1/0},U.isHeader=function(v,c){return!(U.isLeaf(v)||v.depth===c._maxDepth-1)},U.getParent=function(v,c){return U.findEntryWithLevel(v,T(c))},U.listPath=function(v,c){var i=v.parent;if(!i)return[];var s=c?[i.data[c]]:[i];return U.listPath(i,c).concat(s)},U.getPath=function(v){return U.listPath(v,"label").join("/")+"/"},U.formatValue=k.formatPieValue,U.formatPercent=function(v,c){var i=I.formatPercent(v,0);return"0%"===i&&(i=k.formatPiePercent(v,c)),i}},87619:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"sunburst",basePlotModule:r(66888),categories:[],animatable:!0,attributes:r(57564),layoutAttributes:r(2654),supplyDefaults:r(17094),supplyLayoutDefaults:r(57034),calc:r(52147).calc,crossTraceCalc:r(52147).crossTraceCalc,plot:r(24714).plot,style:r(29969).style,colorbar:r(4898),meta:{}}},2654:function(se){"use strict";se.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function(se,U,r){"use strict";var I=r(71828),C=r(2654);se.exports=function(f,k){function T(v,c){return I.coerce(f,k,C,v,c)}T("sunburstcolorway",k.colorway),T("extendsunburstcolors")}},24714:function(se,U,r){"use strict";var I=r(39898),C=r(674),f=r(81684).sX,k=r(91424),T=r(71828),v=r(63893),c=r(72597),i=c.recordMinTextSize,s=c.clearMinTextSize,a=r(14575),o=r(53581).getRotationAngle,l=a.computeTransform,u=a.transformInsideText,d=r(29969).styleOne,g=r(16688).resizeText,h=r(83523),w=r(7055),y=r(2791);function p(x,b,M,m){var D=x._context.staticPlot,S=x._fullLayout,O=!S.uniformtext.mode&&y.hasTransition(m),P=I.select(M).selectAll("g.slice"),R=b[0],F=R.trace,J=y.findEntryWithLevel(R.hierarchy,F.level),z=y.getMaxDepth(F),$=S._size,G=F.domain,X=$.h*(G.y[1]-G.y[0]),K=.5*Math.min($.w*(G.x[1]-G.x[0]),X),ue=R.cx=$.l+$.w*(G.x[1]+G.x[0])/2,ae=R.cy=$.t+$.h*(1-G.y[0])-X/2;if(!J)return P.remove();var ne=null,Q={};O&&P.each(function(me){Q[y.getPtId(me)]={rpx0:me.rpx0,rpx1:me.rpx1,x0:me.x0,x1:me.x1,transform:me.transform},!ne&&y.isEntry(me)&&(ne=me)});var me,ie=(me=J,C.partition().size([2*Math.PI,me.height+1])(me)).descendants(),le=J.height+1,fe=0,he=z;R.hasMultipleRoots&&y.isHierarchyRoot(J)&&(ie=ie.slice(1),le-=1,fe=1,he+=1),ie=ie.filter(function(me){return me.y1<=he});var pe=o(F.rotation);pe&&ie.forEach(function(me){me.x0+=pe,me.x1+=pe});var xe=Math.min(le,z),Ee=function(me){return(me-fe)/xe*K},Re=function(me,ce){return[me*Math.cos(ce),-me*Math.sin(ce)]},ke=function(me){return T.pathAnnulus(me.rpx0,me.rpx1,me.x0,me.x1,ue,ae)},Te=function(me){return ue+_(me)[0]*(me.transform.rCenter||0)+(me.transform.x||0)},we=function(me){return ae+_(me)[1]*(me.transform.rCenter||0)+(me.transform.y||0)};(P=P.data(ie,y.getPtId)).enter().append("g").classed("slice",!0),O?P.exit().transition().each(function(){var me=I.select(this);me.select("path.surface").transition().attrTween("d",function(ce){var Ae=function(Ne){var De,qe=y.getPtId(Ne),Ke=Q[qe],be=Q[y.getPtId(J)];if(be){var Oe=(Ne.x1>be.x1?2*Math.PI:0)+pe;De=Ne.rpx1<be.rpx1?{x0:Ne.x0,x1:Ne.x1,rpx0:0,rpx1:0}:{x0:Oe,x1:Oe,rpx0:Ne.rpx0,rpx1:Ne.rpx1}}else{var Le,Ue=y.getPtId(Ne.parent);P.each(function(ct){if(y.getPtId(ct)===Ue)return Le=ct});var Ze,We=Le.children;We.forEach(function(ct,yt){if(y.getPtId(ct)===qe)return Ze=yt});var et=We.length,nt=f(Le.x0,Le.x1);De={rpx0:K,rpx1:K,x0:nt(Ze/et),x1:nt((Ze+1)/et)}}return f(Ke,De)}(ce);return function(Ne){return ke(Ae(Ne))}}),me.select("g.slicetext").attr("opacity",0)}).remove():P.exit().remove(),P.order();var je=null;if(O&&ne){var Ce=y.getPtId(ne);P.each(function(me){null===je&&y.getPtId(me)===Ce&&(je=me.x1)})}var Ie=P;function ge(me){var ce=me.parent,Ae=Q[y.getPtId(ce)],Ne={};if(Ae){var De=ce.children,qe=De.indexOf(me),Ke=De.length,be=f(Ae.x0,Ae.x1);Ne.x0=be(qe/Ke),Ne.x1=be(qe/Ke)}else Ne.x0=Ne.x1=0;return Ne}O&&(Ie=Ie.transition().each("end",function(){var me=I.select(this);y.setSliceCursor(me,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Ie.each(function(me){var Oe,ce=I.select(this),Ae=T.ensureSingle(ce,"path","surface",function(Oe){Oe.style("pointer-events",D?"none":"all")});me.rpx0=Ee(me.y0),me.rpx1=Ee(me.y1),me.xmid=(me.x0+me.x1)/2,me.pxmid=Re(me.rpx1,me.xmid),me.midangle=-(me.xmid-Math.PI/2),me.startangle=-(me.x0-Math.PI/2),me.stopangle=-(me.x1-Math.PI/2),me.halfangle=.5*Math.min(T.angleDelta(me.x0,me.x1)||Math.PI,Math.PI),me.ring=1-me.rpx0/me.rpx1,me.rInscribed=0===(Oe=me).rpx0&&T.isFullCircle([Oe.x0,Oe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Oe.halfangle)),Oe.ring/2)),O?Ae.transition().attrTween("d",function(Oe){var Le=function(Ue){var Ze,We=Q[y.getPtId(Ue)],et={x0:Ue.x0,x1:Ue.x1,rpx0:Ue.rpx0,rpx1:Ue.rpx1};if(We)Ze=We;else if(ne)if(Ue.parent)if(je){var nt=(Ue.x1>je?2*Math.PI:0)+pe;Ze={x0:nt,x1:nt}}else T.extendFlat(Ze={rpx0:K,rpx1:K},ge(Ue));else Ze={rpx0:0,rpx1:0};else Ze={x0:pe,x1:pe};return f(Ze,et)}(Oe);return function(Ue){return ke(Le(Ue))}}):Ae.attr("d",ke),ce.call(h,J,x,b,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,transitionEasing:w.CLICK_TRANSITION_EASING}).call(y.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Ae.call(d,me,F,x);var Ne=T.ensureSingle(ce,"g","slicetext"),De=T.ensureSingle(Ne,"text","",function(Oe){Oe.attr("data-notex",1)}),qe=T.ensureUniformFontSize(x,y.determineTextFont(F,me,S.font));De.text(U.formatSliceLabel(me,J,F,b,S)).classed("slicetext",!0).attr("text-anchor","middle").call(k.font,qe).call(v.convertToTspans,x);var Ke=k.bBox(De.node());me.transform=u(Ke,me,R),me.transform.targetX=Te(me),me.transform.targetY=we(me);var be=function(Oe,Le){var Ue=Oe.transform;return l(Ue,Le),Ue.fontSize=qe.size,i(F.type,Ue,S),T.getTextTransform(Ue)};O?De.transition().attrTween("transform",function(Oe){var Le=function(Ue){var Ze,We=Q[y.getPtId(Ue)],et=Ue.transform;if(We)Ze=We;else if(Ze={rpx1:Ue.rpx1,transform:{textPosAngle:et.textPosAngle,scale:0,rotate:et.rotate,rCenter:et.rCenter,x:et.x,y:et.y}},ne)if(Ue.parent)if(je){var nt=Ue.x1>je?2*Math.PI:0;Ze.x0=Ze.x1=nt}else T.extendFlat(Ze,ge(Ue));else Ze.x0=Ze.x1=pe;else Ze.x0=Ze.x1=pe;var ct=f(Ze.transform.textPosAngle,Ue.transform.textPosAngle),yt=f(Ze.rpx1,Ue.rpx1),ut=f(Ze.x0,Ue.x0),Ct=f(Ze.x1,Ue.x1),Dt=f(Ze.transform.scale,et.scale),vt=f(Ze.transform.rotate,et.rotate),mt=0===et.rCenter?3:0===Ze.transform.rCenter?1/3:1,Lt=f(Ze.transform.rCenter,et.rCenter);return function(Ft){var Rt=yt(Ft),Wt=ut(Ft),Ht=Ct(Ft),it=Lt(Math.pow(Ft,mt)),st={pxmid:Re(Rt,(Wt+Ht)/2),rpx1:Rt,transform:{textPosAngle:ct(Ft),rCenter:it,x:et.x,y:et.y}};return i(F.type,et,S),{transform:{targetX:Te(st),targetY:we(st),scale:Dt(Ft),rotate:vt(Ft),rCenter:it}}}}(Oe);return function(Ue){return be(Le(Ue),Ke)}}):De.attr("transform",be(me,Ke))})}function _(x){return M=x.transform.textPosAngle,[(b=x.rpx1)*Math.sin(M),-b*Math.cos(M)];var b,M}U.plot=function(x,b,M,m){var D,S,O=x._fullLayout,P=O._sunburstlayer,R=!M,F=!O.uniformtext.mode&&y.hasTransition(M);s("sunburst",O),(D=P.selectAll("g.trace.sunburst").data(b,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),D.order(),F?(m&&(S=m()),I.transition().duration(M.duration).ease(M.easing).each("end",function(){S&&S()}).each("interrupt",function(){S&&S()}).each(function(){P.selectAll("g.trace").each(function(B){p(x,B,this,M)})})):(D.each(function(B){p(x,B,this,M)}),O.uniformtext.mode&&g(x,O._sunburstlayer.selectAll(".trace"),"sunburst")),R&&D.exit().remove()},U.formatSliceLabel=function(x,b,M,m,D){var S=M.texttemplate,O=M.textinfo;if(!(S||O&&"none"!==O))return"";var P=D.separators,F=x.data.data,B=m[0].hierarchy,J=y.isHierarchyRoot(x),z=y.getParent(B,x),$=y.getValue(x);if(!S){var G,H=O.split("+"),X=function(he){return-1!==H.indexOf(he)},K=[];if(X("label")&&F.label&&K.push(F.label),F.hasOwnProperty("v")&&X("value")&&K.push(y.formatValue(F.v,P)),!J){X("current path")&&K.push(y.getPath(x.data));var ue=0;X("percent parent")&&ue++,X("percent entry")&&ue++,X("percent root")&&ue++;var ae=ue>1;if(ue){var ne,Q=function(he){G=y.formatPercent(ne,P),ae&&(G+=" of "+he),K.push(G)};X("percent parent")&&!J&&(ne=$/y.getValue(z),Q("parent")),X("percent entry")&&(ne=$/y.getValue(b),Q("entry")),X("percent root")&&(ne=$/y.getValue(B),Q("root"))}}return X("text")&&(G=T.castOption(M,F.i,"text"),T.isValidTextValue(G)&&K.push(G)),K.join("<br>")}var ie=T.castOption(M,F.i,"texttemplate");if(!ie)return"";var le={};F.label&&(le.label=F.label),F.hasOwnProperty("v")&&(le.value=F.v,le.valueLabel=y.formatValue(F.v,P)),le.currentPath=y.getPath(x.data),J||(le.percentParent=$/y.getValue(z),le.percentParentLabel=y.formatPercent(le.percentParent,P),le.parent=y.getPtLabel(z)),le.percentEntry=$/y.getValue(b),le.percentEntryLabel=y.formatPercent(le.percentEntry,P),le.entry=y.getPtLabel(b),le.percentRoot=$/y.getValue(B),le.percentRootLabel=y.formatPercent(le.percentRoot,P),le.root=y.getPtLabel(B),F.hasOwnProperty("color")&&(le.color=F.color);var fe=T.castOption(M,F.i,"text");return(T.isValidTextValue(fe)||""===fe)&&(le.text=fe),le.customdata=T.castOption(M,F.i,"customdata"),T.texttemplateString(ie,le,D._d3locale,le,M._meta||{})}},29969:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(71828),k=r(72597).resizeText,T=r(43467);function v(c,i,s,a){var l=!i.children,u=i.data.data.i,d=f.castOption(s,u,"marker.line.color")||C.defaultLine,g=f.castOption(s,u,"marker.line.width")||0;c.call(T,i,s,a).style("stroke-width",g).call(C.stroke,d).style("opacity",l?s.leaf.opacity:null)}se.exports={style:function(c){var i=c._fullLayout._sunburstlayer.selectAll(".trace");k(c,i,"sunburst"),i.each(function(s){var a=I.select(this),o=s[0].trace;a.style("opacity",o.opacity),a.selectAll("path.surface").each(function(l){I.select(this).call(v,l,o,c)})})},styleOne:v}},54532:function(se,U,r){"use strict";var I=r(7901),C=r(50693),f=r(12663).axisHoverFormat,k=r(5386).fF,T=r(9012),v=r(1426).extendFlat,c=r(30962).overrideAll;function i(a){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:I.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:I.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var s=se.exports=c(v({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:k(),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},C("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:i(),y:i(),z:i()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:v({},C.zauto,{}),zmin:v({},C.zmin,{}),zmax:v({},C.zmax,{})},hoverinfo:v({},T.hoverinfo),showlegend:v({},T.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType="calc+clearAxisTypes",s.transforms=void 0},18396:function(se,U,r){"use strict";var I=r(78803);se.exports=function(C,f){I(C,f,f.surfacecolor?{vals:f.surfacecolor,containerStr:"",cLetter:"c"}:{vals:f.z,containerStr:"",cLetter:"c"})}},43768:function(se,U,r){"use strict";var I=r(9330).gl_surface3d,C=r(9330).ndarray,f=r(9330).ndarray_linear_interpolate.d2,k=r(824),T=r(43907),v=r(71828).isArrayOrTypedArray,c=r(81697).parseColorScale,i=r(78614),s=r(21081).extractOpts;function a(M,m,D){this.scene=M,this.uid=D,this.surface=m,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var o=a.prototype;o.getXat=function(M,m,D,S){var O=v(this.data.x)?v(this.data.x[0])?this.data.x[m][M]:this.data.x[M]:M;return void 0===D?O:S.d2l(O,0,D)},o.getYat=function(M,m,D,S){var O=v(this.data.y)?v(this.data.y[0])?this.data.y[m][M]:this.data.y[m]:m;return void 0===D?O:S.d2l(O,0,D)},o.getZat=function(M,m,D,S){var O=this.data.z[m][M];return null===O&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[m][M]),void 0===D?O:S.d2l(O,0,D)},o.handlePick=function(M){if(M.object===this.surface){var D=(M.data.index[1]-1)/this.dataScaleY-1,S=Math.max(Math.min(Math.round((M.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(D),this.data._ylength-1),0);M.index=[S,O],M.traceCoordinate=[this.getXat(S,O),this.getYat(S,O),this.getZat(S,O)],M.dataCoordinate=[this.getXat(S,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(S,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(S,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=M.dataCoordinate[P]&&(M.dataCoordinate[P]*=this.scene.dataScale[P]);var R=this.data.hovertext||this.data.text;return M.textLabel=Array.isArray(R)&&R[O]&&void 0!==R[O][S]?R[O][S]:R||"",M.data.dataCoordinate=M.dataCoordinate.slice(),this.surface.highlight(M.data),this.scene.glplot.spikes.position=M.dataCoordinate,!0}};var l=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(M,m){if(M<m)return 0;for(var D=0;0===Math.floor(M%m);)M/=m,D++;return D}function d(M){for(var m=[],D=0;D<l.length;D++)m.push(u(M,l[D]));return m}function g(M){for(var m=d(M),D=M,S=0;S<l.length;S++)if(m[S]>0){D=l[S];break}return D}function h(M,m){if(!(M<1||m<1)){for(var D=d(M),S=d(m),O=1,P=0;P<l.length;P++)O*=Math.pow(l[P],Math.max(D[P],S[P]));return O}}o.calcXnums=function(M){var m,D=[];for(m=1;m<M;m++){var S=this.getXat(m-1,0),O=this.getXat(m,0);D[m-1]=O!==S&&null!=S&&null!=O?Math.abs(O-S):0}var P=0;for(m=1;m<M;m++)P+=D[m-1];for(m=1;m<M;m++)D[m-1]=0===D[m-1]?1:Math.round(P/D[m-1]);return D},o.calcYnums=function(M){var m,D=[];for(m=1;m<M;m++){var S=this.getYat(0,m-1),O=this.getYat(0,m);D[m-1]=O!==S&&null!=S&&null!=O?Math.abs(O-S):0}var P=0;for(m=1;m<M;m++)P+=D[m-1];for(m=1;m<M;m++)D[m-1]=0===D[m-1]?1:Math.round(P/D[m-1]);return D};var w=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],y=w[9],p=w[13];function _(M,m,D){var S=D[8]+D[2]*m[0]+D[5]*m[1];return M[0]=(D[6]+D[0]*m[0]+D[3]*m[1])/S,M[1]=(D[7]+D[1]*m[0]+D[4]*m[1])/S,M}function x(M,m,D){return function(S,O,P,R){for(var F=[0,0],B=S.shape[0],J=S.shape[1],z=0;z<B;z++)for(var $=0;$<J;$++)P(F,[z,$],R),S.set(z,$,f(O,F[0],F[1]))}(M,m,_,D),M}function b(M,m){for(var D=!1,S=0;S<M.length;S++)if(m===M[S]){D=!0;break}!1===D&&M.push(m)}o.estimateScale=function(M,m){for(var D=1+function(O){if(0!==O.length){for(var P=1,R=0;R<O.length;R++)P=h(P,O[R]);return P}}(0===m?this.calcXnums(M):this.calcYnums(M));D<y;)D*=2;for(;D>p;)D--,D/=g(D),++D<y&&(D=p);var S=Math.round(D/M);return S>1?S:1},o.refineCoords=function(M){for(var m=this.dataScaleX,D=this.dataScaleY,S=M[0].shape[0],O=M[0].shape[1],P=0|Math.floor(M[0].shape[0]*m+1),R=0|Math.floor(M[0].shape[1]*D+1),F=1+S+1,B=1+O+1,J=C(new Float32Array(F*B),[F,B]),z=[1/m,0,0,0,1/D,0,0,0,1],$=0;$<M.length;++$){this.surface.padField(J,M[$]);var G=C(new Float32Array(P*R),[P,R]);x(G,J,z),M[$]=G}},o.setContourLevels=function(){var M,m,S=[[],[],[]],O=[!1,!1,!1],P=!1;for(M=0;M<3;++M)if(this.showContour[M]&&(P=!0,this.contourSize[M]>0&&null!==this.contourStart[M]&&null!==this.contourEnd[M]&&this.contourEnd[M]>this.contourStart[M]))for(O[M]=!0,m=this.contourStart[M];m<this.contourEnd[M];m+=this.contourSize[M])b(S[M],m*this.scene.dataScale[M]);if(P){var R=[[],[],[]];for(M=0;M<3;++M)this.showContour[M]&&(R[M]=O[M]?S[M]:this.scene.contourLevels[M]);this.surface.update({levels:R})}},o.update=function(M){var m,D,S,O,P=this.scene,R=P.fullSceneLayout,F=this.surface,B=c(M),J=P.dataScale,z=M.z[0].length,$=M._ylength,G=P.contourLevels;this.data=M;var H=[];for(m=0;m<3;m++)for(H[m]=[],D=0;D<z;D++)H[m][D]=[];for(D=0;D<z;D++)for(S=0;S<$;S++)H[0][D][S]=this.getXat(D,S,M.xcalendar,R.xaxis),H[1][D][S]=this.getYat(D,S,M.ycalendar,R.yaxis),H[2][D][S]=this.getZat(D,S,M.zcalendar,R.zaxis);if(M.connectgaps)for(M._emptypoints=T(H[2]),k(H[2],M._emptypoints),M._interpolatedZ=[],D=0;D<z;D++)for(M._interpolatedZ[D]=[],S=0;S<$;S++)M._interpolatedZ[D][S]=H[2][D][S];for(m=0;m<3;m++)for(D=0;D<z;D++)for(S=0;S<$;S++)null==(O=H[m][D][S])?H[m][D][S]=NaN:O=H[m][D][S]*=J[m];for(m=0;m<3;m++)for(D=0;D<z;D++)for(S=0;S<$;S++)null!=(O=H[m][D][S])&&(this.minValues[m]>O&&(this.minValues[m]=O),this.maxValues[m]<O&&(this.maxValues[m]=O));for(m=0;m<3;m++)this.objectOffset[m]=.5*(this.minValues[m]+this.maxValues[m]);for(m=0;m<3;m++)for(D=0;D<z;D++)for(S=0;S<$;S++)null!=(O=H[m][D][S])&&(H[m][D][S]-=this.objectOffset[m]);var X=[C(new Float32Array(z*$),[z,$]),C(new Float32Array(z*$),[z,$]),C(new Float32Array(z*$),[z,$])];for(m=0;m<3;m++)for(D=0;D<z;D++)for(S=0;S<$;S++)X[m].set(D,S,H[m][D][S]);H=[];var K={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!M.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:M.opacityscale,opacity:M.opacity},ue=s(M);if(K.intensityBounds=[ue.min,ue.max],M.surfacecolor){var ae=C(new Float32Array(z*$),[z,$]);for(D=0;D<z;D++)for(S=0;S<$;S++)ae.set(D,S,M.surfacecolor[S][D]);X.push(ae)}else K.intensityBounds[0]*=J[2],K.intensityBounds[1]*=J[2];(p<X[0].shape[0]||p<X[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(X[0].shape[0],0),this.dataScaleY=this.estimateScale(X[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(X)),M.surfacecolor&&(K.intensity=X.pop());var le,fe,he,ne=[!0,!0,!0],Q=["x","y","z"];for(m=0;m<3;++m){var ie=M.contours[Q[m]];ne[m]=ie.highlight,K.showContour[m]=ie.show||ie.highlight,K.showContour[m]&&(K.contourProject[m]=[ie.project.x,ie.project.y,ie.project.z],ie.show?(this.showContour[m]=!0,K.levels[m]=G[m],F.highlightColor[m]=K.contourColor[m]=i(ie.color),F.highlightTint[m]=K.contourTint[m]=ie.usecolormap?0:1,K.contourWidth[m]=ie.width,this.contourStart[m]=ie.start,this.contourEnd[m]=ie.end,this.contourSize[m]=ie.size):(this.showContour[m]=!1,this.contourStart[m]=null,this.contourEnd[m]=null,this.contourSize[m]=0),ie.highlight&&(K.dynamicColor[m]=i(ie.highlightcolor),K.dynamicWidth[m]=ie.highlightwidth))}(fe=(le=B)[0].rgb)[0]===(he=le[le.length-1].rgb)[0]&&fe[1]===he[1]&&fe[2]===he[2]&&fe[3]===he[3]&&(K.vertexColor=!0),K.objectOffset=this.objectOffset,K.coords=X,F.update(K),F.visible=M.visible,F.enableDynamic=ne,F.enableHighlight=ne,F.snapToData=!0,"lighting"in M&&(F.ambientLight=M.lighting.ambient,F.diffuseLight=M.lighting.diffuse,F.specularLight=M.lighting.specular,F.roughness=M.lighting.roughness,F.fresnel=M.lighting.fresnel),"lightposition"in M&&(F.lightPosition=[M.lightposition.x,M.lightposition.y,M.lightposition.z])},o.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},se.exports=function(M,m){var S=I({gl:M.glplot.gl}),O=new a(M,S,m.uid);return S._trace=O,O.update(m),M.glplot.add(S),O}},91831:function(se,U,r){"use strict";var I=r(73972),C=r(71828),f=r(1586),k=r(54532);function T(c,i,s,a){var o=a("opacityscale");"max"===o?i.opacityscale=[[0,.1],[1,1]]:"min"===o?i.opacityscale=[[0,1],[1,.1]]:"extremes"===o?i.opacityscale=function(l,u){for(var d=[],g=0;g<32;g++){var h=g/31,w=.1+.9*(1-Math.pow(Math.sin(1*h*Math.PI),2));d.push([h,Math.max(0,Math.min(1,w))])}return d}():function(l){var u=0;if(!Array.isArray(l)||l.length<2||!l[0]||!l[l.length-1]||0!=+l[0][0]||1!=+l[l.length-1][0])return!1;for(var d=0;d<l.length;d++){var g=l[d];if(2!==g.length||+g[0]<u)return!1;u=+g[0]}return!0}(o)||(i.opacityscale=void 0)}function v(c,i,s){i in c&&!(s in c)&&(c[s]=c[i])}se.exports={supplyDefaults:function(c,i,s,a){var o,l;function u(b,M){return C.coerce(c,i,k,b,M)}var d=u("x"),g=u("y"),h=u("z");if(!h||!h.length||d&&d.length<1||g&&g.length<1)i.visible=!1;else{i._xlength=Array.isArray(d)&&C.isArrayOrTypedArray(d[0])?h.length:h[0].length,i._ylength=h.length,I.getComponentMethod("calendars","handleTraceDefaults")(c,i,["x","y","z"],a),u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(b){u(b)});var w=u("surfacecolor"),y=["x","y","z"];for(o=0;o<3;++o){var p="contours."+y[o],_=u(p+".show"),x=u(p+".highlight");if(_||x)for(l=0;l<3;++l)u(p+".project."+y[l]);_&&(u(p+".color"),u(p+".width"),u(p+".usecolormap")),x&&(u(p+".highlightcolor"),u(p+".highlightwidth")),u(p+".start"),u(p+".end"),u(p+".size")}w||(v(c,"zmin","cmin"),v(c,"zmax","cmax"),v(c,"zauto","cauto")),f(c,i,a,u,{prefix:"",cLetter:"c"}),T(0,i,0,u),i._length=null}},opacityscaleDefaults:T}},93601:function(se,U,r){"use strict";se.exports={attributes:r(54532),supplyDefaults:r(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:r(18396),plot:r(43768),moduleType:"trace",name:"surface",basePlotModule:r(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function(se,U,r){"use strict";var I=r(50215),C=r(1426).extendFlat,f=r(30962).overrideAll,k=r(41940),T=r(27670).Y,v=r(12663).descriptionOnlyNumbers;(se.exports=f({domain:T({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:C({},I.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:C({},k({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:C({},I.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:C({},k({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function(se,U,r){"use strict";var I=r(27659).a0,C=r(36736),f="table";U.name=f,U.plot=function(k){var T=I(k.calcdata,f)[0];T.length&&C(k,T)},U.clean=function(k,T,v,c){var i=c._has&&c._has(f),s=T._has&&T._has(f);i&&!s&&c._paperdiv.selectAll(".table").remove()}},76333:function(se,U,r){"use strict";var I=r(28984).wrap;se.exports=function(){return I({})}},49850:function(se){"use strict";se.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function(se,U,r){"use strict";var I=r(49850),C=r(1426).extendFlat,f=r(92770);function k(o){if(Array.isArray(o)){for(var l=0,u=0;u<o.length;u++)l=Math.max(l,k(o[u]));return l}return o}function T(o,l){return o+l}function v(o){var l,u=o.slice(),d=1/0,g=0;for(l=0;l<u.length;l++)Array.isArray(u[l])||(u[l]=[u[l]]),d=Math.min(d,u[l].length),g=Math.max(g,u[l].length);if(d!==g)for(l=0;l<u.length;l++){var h=g-u[l].length;h&&(u[l]=u[l].concat(c(h)))}return u}function c(o){for(var l=new Array(o),u=0;u<o;u++)l[u]="";return l}function i(o){return o.calcdata.columns.reduce(function(l,u){return u.xIndex<o.xIndex?l+u.columnWidth:l},0)}function s(o,l){return Object.keys(o).map(function(u){return C({},o[u],{auxiliaryBlocks:l})})}function a(o,l){for(var u,d={},g=0,h=0,w={firstRowIndex:null,lastRowIndex:null,rows:[]},y=0,p=0,_=0;_<o.length;_++)w.rows.push({rowIndex:_,rowHeight:u=o[_]}),((h+=u)>=l||_===o.length-1)&&(d[g]=w,w.key=p++,w.firstRowIndex=y,w.lastRowIndex=_,w={firstRowIndex:null,lastRowIndex:null,rows:[]},g+=h,y=_+1,h=0);return d}se.exports=function(o,l){var u=v(l.cells.values),d=function(J){return J.slice(l.header.values.length,J.length)},g=v(l.header.values);g.length&&!g[0].length&&(g[0]=[""],g=v(g));var h=g.concat(d(u).map(function(){return c((g[0]||[""]).length)})),w=l.domain,y=Math.floor(o._fullLayout._size.w*(w.x[1]-w.x[0])),p=Math.floor(o._fullLayout._size.h*(w.y[1]-w.y[0])),_=l.header.values.length?h[0].map(function(){return l.header.height}):[I.emptyHeaderHeight],x=u.length?u[0].map(function(){return l.cells.height}):[],b=_.reduce(T,0),M=a(x,p-b+I.uplift),m=s(a(_,b),[]),D=s(M,m),S={},O=l._fullInput.columnorder.concat(d(u.map(function(J,z){return z}))),P=h.map(function(J,z){var $=Array.isArray(l.columnwidth)?l.columnwidth[Math.min(z,l.columnwidth.length-1)]:l.columnwidth;return f($)?Number($):1}),R=P.reduce(T,0);P=P.map(function(J){return J/R*y});var F=Math.max(k(l.header.line.width),k(l.cells.line.width)),B={key:l.uid+o._context.staticPlot,translateX:w.x[0]*o._fullLayout._size.w,translateY:o._fullLayout._size.h*(1-w.y[1]),size:o._fullLayout._size,width:y,maxLineWidth:F,height:p,columnOrder:O,groupHeight:p,rowBlocks:D,headerRowBlocks:m,scrollY:0,cells:C({},l.cells,{values:u}),headerCells:C({},l.header,{values:h}),gdColumns:h.map(function(J){return J[0]}),gdColumnsOriginalOrder:h.map(function(J){return J[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:h.map(function(J,z){return S[J]=(S[J]||0)+1,{key:J+"__"+S[J],label:J,specIndex:z,xIndex:O[z],xScale:i,x:void 0,calcdata:void 0,columnWidth:P[z]}})};return B.columns.forEach(function(J){J.calcdata=B,J.x=i(J)}),B}},56269:function(se,U,r){"use strict";var I=r(1426).extendFlat;U.splitToPanels=function(C){var f=[0,0],k=I({},C,{key:"header",type:"header",page:0,prevPages:f,currentRepaint:[null,null],dragHandle:!0,values:C.calcdata.headerCells.values[C.specIndex],rowBlocks:C.calcdata.headerRowBlocks,calcdata:I({},C.calcdata,{cells:C.calcdata.headerCells})});return[I({},C,{key:"cells1",type:"cells",page:0,prevPages:f,currentRepaint:[null,null],dragHandle:!1,values:C.calcdata.cells.values[C.specIndex],rowBlocks:C.calcdata.rowBlocks}),I({},C,{key:"cells2",type:"cells",page:1,prevPages:f,currentRepaint:[null,null],dragHandle:!1,values:C.calcdata.cells.values[C.specIndex],rowBlocks:C.calcdata.rowBlocks}),k]},U.splitToCells=function(C){var k,T,v,f=[v=(T=(k=C).rowBlocks[k.page])?T.rows[0].rowIndex:0,T?v+T.rows.length:0];return(C.values||[]).slice(f[0],f[1]).map(function(k,T){return{keyWithinBlock:T+("string"==typeof k&&k.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:f[0]+T,column:C,calcdata:C.calcdata,page:C.page,rowBlocks:C.rowBlocks,value:k}})}},39754:function(se,U,r){"use strict";var I=r(71828),C=r(44464),f=r(27670).c;se.exports=function(k,T,v,c){function i(s,a){return I.coerce(k,T,C,s,a)}f(T,c,i),i("columnwidth"),i("header.values"),i("header.format"),i("header.align"),i("header.prefix"),i("header.suffix"),i("header.height"),i("header.line.width"),i("header.line.color"),i("header.fill.color"),I.coerceFont(i,"header.font",I.extendFlat({},c.font)),function(s,a){for(var l=s.header.values.length,u=(s.columnorder||[]).slice(0,l),d=u.slice().sort(function(w,y){return w-y}),g=u.map(function(w){return d.indexOf(w)}),h=g.length;h<l;h++)g.push(h);a("columnorder",g)}(T,i),i("cells.values"),i("cells.format"),i("cells.align"),i("cells.prefix"),i("cells.suffix"),i("cells.height"),i("cells.line.width"),i("cells.line.color"),i("cells.fill.color"),I.coerceFont(i,"cells.font",I.extendFlat({},c.font)),T._length=null}},96595:function(se,U,r){"use strict";se.exports={attributes:r(44464),supplyDefaults:r(39754),calc:r(76333),plot:r(36736),moduleType:"trace",name:"table",basePlotModule:r(99469),categories:["noOpacity"],meta:{}}},36736:function(se,U,r){"use strict";var I=r(49850),C=r(39898),f=r(71828).numberFormat,k=r(28984),T=r(91424),v=r(63893),c=r(71828).raiseToTop,i=r(71828).strTranslate,s=r(71828).cancelTransition,a=r(51018),o=r(56269),l=r(7901);function u(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function d(X,K){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+K.key}function g(X,K){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+K.calcdata.key+"_"+K.specIndex}function h(X){return[].concat.apply([],X.map(function(K){return K})).map(function(K){return K.__data__})}function w(X,K,ue){var ae=X.selectAll("."+I.cn.scrollbarKit).data(k.repeat,k.keyFun);ae.enter().append("g").classed(I.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ae.each(function(fe){var xe,he=fe.scrollbarState;he.totalHeight=z(xe=fe.rowBlocks,xe.length-1)+(xe.length?$(xe[xe.length-1],1/0):1),he.scrollableAreaHeight=fe.groupHeight-D(fe),he.currentlyVisibleHeight=Math.min(he.totalHeight,he.scrollableAreaHeight),he.ratio=he.currentlyVisibleHeight/he.totalHeight,he.barLength=Math.max(he.ratio*he.currentlyVisibleHeight,I.goldenRatio*I.scrollbarWidth),he.barWiggleRoom=he.currentlyVisibleHeight-he.barLength,he.wiggleRoom=Math.max(0,he.totalHeight-he.scrollableAreaHeight),he.topY=0===he.barWiggleRoom?0:fe.scrollY/he.wiggleRoom*he.barWiggleRoom,he.bottomY=he.topY+he.barLength,he.dragMultiplier=he.wiggleRoom/he.barWiggleRoom}).attr("transform",function(fe){return i(fe.width+I.scrollbarWidth/2+I.scrollbarOffset,D(fe))});var ne=ae.selectAll("."+I.cn.scrollbar).data(k.repeat,k.keyFun);ne.enter().append("g").classed(I.cn.scrollbar,!0);var Q=ne.selectAll("."+I.cn.scrollbarSlider).data(k.repeat,k.keyFun);Q.enter().append("g").classed(I.cn.scrollbarSlider,!0),Q.attr("transform",function(fe){return i(0,fe.scrollbarState.topY||0)});var ie=Q.selectAll("."+I.cn.scrollbarGlyph).data(k.repeat,k.keyFun);ie.enter().append("line").classed(I.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",I.scrollbarWidth).attr("stroke-linecap","round").attr("y1",I.scrollbarWidth/2),ie.attr("y2",function(fe){return fe.scrollbarState.barLength-I.scrollbarWidth/2}).attr("stroke-opacity",function(fe){return fe.columnDragInProgress||!fe.scrollbarState.barWiggleRoom||ue?0:.4}),ie.transition().delay(0).duration(0),ie.transition().delay(I.scrollbarHideDelay).duration(I.scrollbarHideDuration).attr("stroke-opacity",0);var le=ne.selectAll("."+I.cn.scrollbarCaptureZone).data(k.repeat,k.keyFun);le.enter().append("line").classed(I.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",I.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(fe){var he=C.event.y,pe=this.getBoundingClientRect(),xe=fe.scrollbarState,Ee=he-pe.top,Re=C.scale.linear().domain([0,xe.scrollableAreaHeight]).range([0,xe.totalHeight]).clamp(!0);xe.topY<=Ee&&Ee<=xe.bottomY||O(K,X,null,Re(Ee-xe.barLength/2))(fe)}).call(C.behavior.drag().origin(function(fe){return C.event.stopPropagation(),fe.scrollbarState.scrollbarScrollInProgress=!0,fe}).on("drag",O(K,X)).on("dragend",function(){})),le.attr("y2",function(fe){return fe.scrollbarState.scrollableAreaHeight}),K._context.staticPlot&&(ie.remove(),le.remove())}function y(X,K,ue,ae){var pe,Q=function(he){var pe=he.selectAll("."+I.cn.columnCell).data(o.splitToCells,function(xe){return xe.keyWithinBlock});return pe.enter().append("g").classed(I.cn.columnCell,!0),pe.exit().remove(),pe}(((pe=ue.selectAll("."+I.cn.columnCells).data(k.repeat,k.keyFun)).enter().append("g").classed(I.cn.columnCells,!0),pe.exit().remove(),pe));Q.each(function(pe,xe){var Ee=pe.calcdata.cells.font,Re=pe.column.specIndex,ke={size:x(Ee.size,Re,xe),color:x(Ee.color,Re,xe),family:x(Ee.family,Re,xe)};pe.rowNumber=pe.key,pe.align=x(pe.calcdata.cells.align,Re,xe),pe.cellBorderWidth=x(pe.calcdata.cells.line.width,Re,xe),pe.font=ke});var ie=function(he){var pe=he.selectAll("."+I.cn.cellRect).data(k.repeat,function(xe){return xe.keyWithinBlock});return pe.enter().append("rect").classed(I.cn.cellRect,!0),pe}(Q);!function(he){he.attr("width",function(pe){return pe.column.columnWidth}).attr("stroke-width",function(pe){return pe.cellBorderWidth}).each(function(pe){var xe=C.select(this);l.stroke(xe,x(pe.calcdata.cells.line.color,pe.column.specIndex,pe.rowNumber)),l.fill(xe,x(pe.calcdata.cells.fill.color,pe.column.specIndex,pe.rowNumber))})}(ie);var le=function(he){var pe=he.selectAll("."+I.cn.cellTextHolder).data(k.repeat,function(xe){return xe.keyWithinBlock});return pe.enter().append("g").classed(I.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),pe}(Q),fe=function(he){var pe=he.selectAll("."+I.cn.cellText).data(k.repeat,function(xe){return xe.keyWithinBlock});return pe.enter().append("text").classed(I.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){C.event.stopPropagation()}),pe}(le);(function(he){he.each(function(pe){T.font(C.select(this),pe.font)})})(fe),p(fe,K,ae,X),J(Q)}function p(X,K,ue,ae){X.text(function(ne){var Q=ne.column.specIndex,ie=ne.rowNumber,le=ne.value,fe="string"==typeof le,he=fe&&le.match(/<br>/i),pe=!fe||he;ne.mayHaveMarkup=fe&&le.match(/[<&>]/);var xe,Ee="string"==typeof(xe=le)&&xe.match(I.latexCheck);ne.latex=Ee;var Re,ke,Te=Ee?"":x(ne.calcdata.cells.prefix,Q,ie)||"",we=Ee?"":x(ne.calcdata.cells.suffix,Q,ie)||"",je=Ee?null:x(ne.calcdata.cells.format,Q,ie)||null,Ce=Te+(je?f(je)(ne.value):ne.value)+we;if(ne.wrappingNeeded=!ne.wrapped&&!pe&&!Ee&&(Re=_(Ce)),ne.cellHeightMayIncrease=he||Ee||ne.mayHaveMarkup||(void 0===Re?_(Ce):Re),ne.needsConvertToTspans=ne.mayHaveMarkup||ne.wrappingNeeded||ne.latex,ne.wrappingNeeded){var Ie=(" "===I.wrapSplitCharacter?Ce.replace(/<a href=/gi,"<a_href="):Ce).split(I.wrapSplitCharacter),ge=" "===I.wrapSplitCharacter?Ie.map(function(me){return me.replace(/<a_href=/gi,"<a href=")}):Ie;ne.fragments=ge.map(function(me){return{text:me,width:null}}),ne.fragments.push({fragment:I.wrapSpacer,width:null}),ke=ge.join(I.lineBreaker)+I.lineBreaker+I.wrapSpacer}else delete ne.fragments,ke=Ce;return ke}).attr("dy",function(ne){return ne.needsConvertToTspans?0:"0.75em"}).each(function(ne){var Q=this,ie=C.select(Q);ne.needsConvertToTspans?v.convertToTspans(ie,ae,(ne.wrappingNeeded?R:F)(ue,Q,K,ae,ne)):C.select(Q.parentNode).attr("transform",function(fe){return i(B(fe),I.cellPad)}).attr("text-anchor",function(fe){return{left:"start",center:"middle",right:"end"}[fe.align]})})}function _(X){return-1!==X.indexOf(I.wrapSplitCharacter)}function x(X,K,ue){if(Array.isArray(X)){var ae=X[Math.min(K,X.length-1)];return Array.isArray(ae)?ae[Math.min(ue,ae.length-1)]:ae}return X}function b(X,K,ue){X.transition().ease(I.releaseTransitionEase).duration(I.releaseTransitionDuration).attr("transform",i(K.x,ue))}function M(X){return"cells"===X.type}function m(X){return"header"===X.type}function D(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(K,ue){return K+$(ue,1/0)},0)}function S(X,K,ue){var ae=h(K)[0];if(void 0!==ae){var ne=ae.rowBlocks,Q=ae.calcdata,ie=z(ne,ne.length),le=ae.calcdata.groupHeight-D(ae),fe=Q.scrollY=Math.max(0,Math.min(ie-le,Q.scrollY)),he=function(pe,xe,Ee){for(var Re=[],ke=0,Te=0;Te<pe.length;Te++){for(var we=pe[Te],je=we.rows,Ce=0,Ie=0;Ie<je.length;Ie++)Ce+=je[Ie].rowHeight;we.allRowsHeight=Ce,xe<ke+Ce&&xe+Ee>ke&&Re.push(Te),ke+=Ce}return Re}(ne,fe,le);1===he.length&&(he[0]===ne.length-1?he.unshift(he[0]-1):he.push(he[0]+1)),he[0]%2&&he.reverse(),K.each(function(pe,xe){pe.page=he[xe],pe.scrollY=fe}),K.attr("transform",function(pe){var xe=z(pe.rowBlocks,pe.page)-pe.scrollY;return i(0,xe)}),X&&(P(X,ue,K,he,ae.prevPages,ae,0),P(X,ue,K,he,ae.prevPages,ae,1),w(ue,X))}}function O(X,K,ue,ae){return function(ne){var Q=ne.calcdata?ne.calcdata:ne,ie=K.filter(function(pe){return Q.key===pe.key}),fe=Q.scrollY;Q.scrollY=void 0===ae?Q.scrollY+(ue||Q.scrollbarState.dragMultiplier)*C.event.dy:ae;var he=ie.selectAll("."+I.cn.yColumn).selectAll("."+I.cn.columnBlock).filter(M);return S(X,he,ie),Q.scrollY===fe}}function P(X,K,ue,ae,ne,Q,ie){ae[ie]!==ne[ie]&&(clearTimeout(Q.currentRepaint[ie]),Q.currentRepaint[ie]=setTimeout(function(){var le=ue.filter(function(fe,he){return he===ie&&ae[he]!==ne[he]});y(X,K,le,ue),ne[ie]=ae[ie]}))}function R(X,K,ue,ae){return function(){var ne=C.select(K.parentNode);ne.each(function(Q){var ie=Q.fragments;ne.selectAll("tspan.line").each(function(ke,Te){ie[Te].width=this.getComputedTextLength()});var le,fe,he=ie[ie.length-1].width,pe=ie.slice(0,-1),xe=[],Ee=0,Re=Q.column.columnWidth-2*I.cellPad;for(Q.value="";pe.length;)Ee+(fe=(le=pe.shift()).width+he)>Re&&(Q.value+=xe.join(I.wrapSpacer)+I.lineBreaker,xe=[],Ee=0),xe.push(le.text),Ee+=fe;Ee&&(Q.value+=xe.join(I.wrapSpacer)),Q.wrapped=!0}),ne.selectAll("tspan.line").remove(),p(ne.select("."+I.cn.cellText),ue,X,ae),C.select(K.parentNode.parentNode).call(J)}}function F(X,K,ue,ae,ne){return function(){if(!ne.settledY){var Q=C.select(K.parentNode),ie=H(ne),le=ne.key-ie.firstRowIndex,fe=ie.rows[le].rowHeight,he=ne.cellHeightMayIncrease?K.parentNode.getBoundingClientRect().height+2*I.cellPad:fe,pe=Math.max(he,fe);pe-ie.rows[le].rowHeight&&(ie.rows[le].rowHeight=pe,X.selectAll("."+I.cn.columnCell).call(J),S(null,X.filter(M),0),w(ue,ae,!0)),Q.attr("transform",function(){var Ee=this.parentNode.getBoundingClientRect(),Re=C.select(this.parentNode).select("."+I.cn.cellRect).node().getBoundingClientRect(),ke=this.transform.baseVal.consolidate(),Te=Re.top-Ee.top+(ke?ke.matrix.f:I.cellPad);return i(B(ne,C.select(this.parentNode).select("."+I.cn.cellTextHolder).node().getBoundingClientRect().width),Te)}),ne.settledY=!0}}}function B(X,K){switch(X.align){case"left":default:return I.cellPad;case"right":return X.column.columnWidth-(K||0)-I.cellPad;case"center":return(X.column.columnWidth-(K||0))/2}}function J(X){X.attr("transform",function(K){var ue=K.rowBlocks[0].auxiliaryBlocks.reduce(function(ne,Q){return ne+$(Q,1/0)},0),ae=$(H(K),K.key);return i(0,ae+ue)}).selectAll("."+I.cn.cellRect).attr("height",function(K){return(ue=H(K),ae=K.key,ue.rows[ae-ue.firstRowIndex]).rowHeight;var ue,ae})}function z(X,K){for(var ue=0,ae=K-1;ae>=0;ae--)ue+=G(X[ae]);return ue}function $(X,K){for(var ue=0,ae=0;ae<X.rows.length&&X.rows[ae].rowIndex<K;ae++)ue+=X.rows[ae].rowHeight;return ue}function G(X){var K=X.allRowsHeight;if(void 0!==K)return K;for(var ue=0,ae=0;ae<X.rows.length;ae++)ue+=X.rows[ae].rowHeight;return X.allRowsHeight=ue,ue}function H(X){return X.rowBlocks[X.page]}se.exports=function(X,K){var ue=!X._context.staticPlot,ae=X._fullLayout._paper.selectAll("."+I.cn.table).data(K.map(function(we){var je=k.unwrap(we).trace;return a(X,je)}),k.keyFun);ae.exit().remove(),ae.enter().append("g").classed(I.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ae.attr("width",function(we){return we.width+we.size.l+we.size.r}).attr("height",function(we){return we.height+we.size.t+we.size.b}).attr("transform",function(we){return i(we.translateX,we.translateY)});var ne=ae.selectAll("."+I.cn.tableControlView).data(k.repeat,k.keyFun),Q=ne.enter().append("g").classed(I.cn.tableControlView,!0).style("box-sizing","content-box");if(ue){var ie="onwheel"in document?"wheel":"mousewheel";Q.on("mousemove",function(we){ne.filter(function(je){return we===je}).call(w,X)}).on(ie,function(we){we.scrollbarState.wheeling||(we.scrollbarState.wheeling=!0,O(X,ne,null,we.scrollY+C.event.deltaY)(we)||(C.event.stopPropagation(),C.event.preventDefault()),we.scrollbarState.wheeling=!1)}).call(w,X,!0)}ne.attr("transform",function(we){return i(we.size.l,we.size.t)});var le=ne.selectAll("."+I.cn.scrollBackground).data(k.repeat,k.keyFun);le.enter().append("rect").classed(I.cn.scrollBackground,!0).attr("fill","none"),le.attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),ne.each(function(we){T.setClipUrl(C.select(this),d(X,we),X)});var fe=ne.selectAll("."+I.cn.yColumn).data(function(we){return we.columns},k.keyFun);fe.enter().append("g").classed(I.cn.yColumn,!0),fe.exit().remove(),fe.attr("transform",function(we){return i(we.x,0)}),ue&&fe.call(C.behavior.drag().origin(function(we){return b(C.select(this),we,-I.uplift),c(this),we.calcdata.columnDragInProgress=!0,w(ne.filter(function(je){return we.calcdata.key===je.key}),X),we}).on("drag",function(we){var je=C.select(this),Ce=function(Ie){return(we===Ie?C.event.x:Ie.x)+Ie.columnWidth/2};we.x=Math.max(-I.overdrag,Math.min(we.calcdata.width+I.overdrag-we.columnWidth,C.event.x)),h(fe).filter(function(Ie){return Ie.calcdata.key===we.calcdata.key}).sort(function(Ie,ge){return Ce(Ie)-Ce(ge)}).forEach(function(Ie,ge){Ie.xIndex=ge,Ie.x=we===Ie?Ie.x:Ie.xScale(Ie)}),fe.filter(function(Ie){return we!==Ie}).transition().ease(I.transitionEase).duration(I.transitionDuration).attr("transform",function(Ie){return i(Ie.x,0)}),je.call(s).attr("transform",i(we.x,-I.uplift))}).on("dragend",function(we){var Ie,ge,me,ce,je=C.select(this),Ce=we.calcdata;we.x=we.xScale(we),we.calcdata.columnDragInProgress=!1,b(je,we,0),Ie=X,ge=Ce,me=Ce.columns.map(function(Ie){return Ie.xIndex}),ce=ge.gdColumnsOriginalOrder,ge.gdColumns.sort(function(Ae,Ne){return me[ce.indexOf(Ae)]-me[ce.indexOf(Ne)]}),ge.columnorder=me,Ie.emit("plotly_restyle")})),fe.each(function(we){T.setClipUrl(C.select(this),g(X,we),X)});var he=fe.selectAll("."+I.cn.columnBlock).data(o.splitToPanels,k.keyFun);he.enter().append("g").classed(I.cn.columnBlock,!0).attr("id",function(we){return we.key}),he.style("cursor",function(we){return we.dragHandle?"ew-resize":we.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var pe=he.filter(m),xe=he.filter(M);ue&&xe.call(C.behavior.drag().origin(function(we){return C.event.stopPropagation(),we}).on("drag",O(X,ne,-1)).on("dragend",function(){})),y(X,ne,pe,he),y(X,ne,xe,he);var Ee=ne.selectAll("."+I.cn.scrollAreaClip).data(k.repeat,k.keyFun);Ee.enter().append("clipPath").classed(I.cn.scrollAreaClip,!0).attr("id",function(we){return d(X,we)});var Re=Ee.selectAll("."+I.cn.scrollAreaClipRect).data(k.repeat,k.keyFun);Re.enter().append("rect").classed(I.cn.scrollAreaClipRect,!0).attr("x",-I.overdrag).attr("y",-I.uplift).attr("fill","none"),Re.attr("width",function(we){return we.width+2*I.overdrag}).attr("height",function(we){return we.height+I.uplift}),fe.selectAll("."+I.cn.columnBoundary).data(k.repeat,k.keyFun).enter().append("g").classed(I.cn.columnBoundary,!0);var ke=fe.selectAll("."+I.cn.columnBoundaryClippath).data(k.repeat,k.keyFun);ke.enter().append("clipPath").classed(I.cn.columnBoundaryClippath,!0),ke.attr("id",function(we){return g(X,we)});var Te=ke.selectAll("."+I.cn.columnBoundaryRect).data(k.repeat,k.keyFun);Te.enter().append("rect").classed(I.cn.columnBoundaryRect,!0).attr("fill","none"),Te.attr("width",function(we){return we.columnWidth+2*u(we)}).attr("height",function(we){return we.calcdata.height+2*u(we)+I.uplift}).attr("x",function(we){return-u(we)}).attr("y",function(we){return-u(we)}),S(null,xe,ne)}},45802:function(se,U,r){"use strict";var I=r(5386).fF,C=r(5386).si,f=r(50693),k=r(27670).Y,T=r(34e3),v=r(57564),c=r(43473),i=r(1426).extendFlat,s=r(79952).u;se.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:i({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:v.marker.colors,pattern:s,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:v.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},f("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:i({},T.textfont,{}),editType:"calc"},text:T.text,textinfo:v.textinfo,texttemplate:C({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:I({},{keys:c.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:i({},T.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:T.sort,root:v.root,domain:k({name:"treemap",trace:!0,editType:"calc"})}},78018:function(se,U,r){"use strict";var I=r(74875);U.name="treemap",U.plot=function(C,f,k,T){I.plotBasePlot(U.name,C,f,k,T)},U.clean=function(C,f,k,T){I.cleanBasePlot(U.name,C,f,k,T)}},65039:function(se,U,r){"use strict";var I=r(52147);U.y=function(C,f){return I.calc(C,f)},U.T=function(C){return I._runCrossTraceCalc("treemap",C)}},43473:function(se){"use strict";se.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function(se,U,r){"use strict";var I=r(71828),C=r(45802),f=r(7901),k=r(27670).c,T=r(90769).handleText,v=r(97313).TEXTPAD,c=r(37434).handleMarkerDefaults,i=r(21081),s=i.hasColorscale,a=i.handleDefaults;se.exports=function(o,l,u,d){function g(M,m){return I.coerce(o,l,C,M,m)}var h=g("labels"),w=g("parents");if(h&&h.length&&w&&w.length){var y=g("values");g(y&&y.length?"branchvalues":"count"),g("level"),g("maxdepth"),"squarify"===g("tiling.packing")&&g("tiling.squarifyratio"),g("tiling.flip"),g("tiling.pad");var p=g("text");g("texttemplate"),l.texttemplate||g("textinfo",Array.isArray(p)?"text+label":"label"),g("hovertext"),g("hovertemplate");var _=g("pathbar.visible");T(o,l,d,g,"auto",{hasPathbar:_,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("textposition");var x=-1!==l.textposition.indexOf("bottom");c(o,l,d,g),(l._hasColorscale=s(o,"marker","colors")||(o.marker||{}).coloraxis)?a(o,l,d,g,{prefix:"marker.",cLetter:"c"}):g("marker.depthfade",!(l.marker.colors||[]).length);var b=2*l.textfont.size;g("marker.pad.t",x?b/4:b),g("marker.pad.l",b/4),g("marker.pad.r",b/4),g("marker.pad.b",x?b:b/4),g("marker.cornerradius"),l._hovered={marker:{line:{width:2,color:f.contrast(d.paper_bgcolor)}}},_&&(g("pathbar.thickness",l.pathbar.textfont.size+2*v),g("pathbar.side"),g("pathbar.edgeshape")),g("sort"),g("root.color"),k(l,d,g),l._length=null}else l.visible=!1}},80694:function(se,U,r){"use strict";var I=r(39898),C=r(2791),f=r(72597).clearMinTextSize,k=r(16688).resizeText,T=r(46650);se.exports=function(v,c,i,s,a){var o,l,u=a.type,d=a.drawDescendants,g=v._fullLayout,h=g["_"+u+"layer"],w=!i;f(u,g),(o=h.selectAll("g.trace."+u).data(c,function(y){return y[0].trace.uid})).enter().append("g").classed("trace",!0).classed(u,!0),o.order(),!g.uniformtext.mode&&C.hasTransition(i)?(s&&(l=s()),I.transition().duration(i.duration).ease(i.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()}).each(function(){h.selectAll("g.trace").each(function(y){T(v,y,this,i,d)})})):(o.each(function(y){T(v,y,this,i,d)}),g.uniformtext.mode&&k(v,h.selectAll(".trace"),u)),w&&o.exit().remove()}},66209:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(63893),T=r(37210),v=r(96362).styleOne,c=r(43473),i=r(2791),s=r(83523),a=!0;se.exports=function(o,l,u,d,g){var h=g.barDifY,w=g.width,y=g.height,p=g.viewX,_=g.viewY,x=g.pathSlice,b=g.toMoveInsideSlice,M=g.strTransform,m=g.hasTransition,D=g.handleSlicesExit,S=g.makeUpdateSliceInterpolator,O=g.makeUpdateTextInterpolator,P={},R=o._context.staticPlot,F=o._fullLayout,B=l[0],J=B.trace,z=B.hierarchy,$=w/J._entryDepth,G=i.listPath(u.data,"id"),H=T(z.copy(),[w,y],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(H=H.filter(function(K){var ue=G.indexOf(K.data.id);return-1!==ue&&(K.x0=$*ue,K.x1=$*(ue+1),K.y0=h,K.y1=h+y,K.onPathbar=!0,!0)})).reverse(),(d=d.data(H,i.getPtId)).enter().append("g").classed("pathbar",!0),D(d,a,P,[w,y],x),d.order();var X=d;m&&(X=X.transition().each("end",function(){var K=I.select(this);i.setSliceCursor(K,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(K){K._x0=p(K.x0),K._x1=p(K.x1),K._y0=_(K.y0),K._y1=_(K.y1),K._hoverX=p(K.x1-Math.min(w,y)/2),K._hoverY=_(K.y1-y/2);var ue=I.select(this),ae=C.ensureSingle(ue,"path","surface",function(le){le.style("pointer-events",R?"none":"all")});m?ae.transition().attrTween("d",function(le){var fe=S(le,a,P,[w,y]);return function(he){return x(fe(he))}}):ae.attr("d",x),ue.call(s,u,o,l,{styleOne:v,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),ae.call(v,K,J,o,{hovered:!1}),K._text=(i.getPtLabel(K)||"").split("<br>").join(" ")||"";var ne=C.ensureSingle(ue,"g","slicetext"),Q=C.ensureSingle(ne,"text","",function(le){le.attr("data-notex",1)}),ie=C.ensureUniformFontSize(o,i.determineTextFont(J,K,F.font,{onPathbar:!0}));Q.text(K._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(f.font,ie).call(k.convertToTspans,o),K.textBB=f.bBox(Q.node()),K.transform=b(K,{fontSize:ie.size,onPathbar:!0}),K.transform.fontSize=ie.size,m?Q.transition().attrTween("transform",function(le){var fe=O(le,a,P,[w,y]);return function(he){return M(fe(he))}}):Q.attr("transform",M(K))})}},52583:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(63893),T=r(37210),v=r(96362).styleOne,c=r(43473),i=r(2791),s=r(83523),a=r(24714).formatSliceLabel,o=!1;se.exports=function(l,u,d,g,h){var w=h.width,y=h.height,p=h.viewX,_=h.viewY,x=h.pathSlice,b=h.toMoveInsideSlice,M=h.strTransform,m=h.hasTransition,D=h.handleSlicesExit,S=h.makeUpdateSliceInterpolator,O=h.makeUpdateTextInterpolator,P=h.prevEntry,R=l._context.staticPlot,F=l._fullLayout,B=u[0].trace,J=-1!==B.textposition.indexOf("left"),z=-1!==B.textposition.indexOf("right"),$=-1!==B.textposition.indexOf("bottom"),G=!$&&!B.marker.pad.t||$&&!B.marker.pad.b,H=T(d,[w,y],{packing:B.tiling.packing,squarifyratio:B.tiling.squarifyratio,flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1,pad:{inner:B.tiling.pad,top:B.marker.pad.t,left:B.marker.pad.l,right:B.marker.pad.r,bottom:B.marker.pad.b}}).descendants(),X=1/0,K=-1/0;H.forEach(function(ie){var le=ie.depth;le>=B._maxDepth?(ie.x0=ie.x1=(ie.x0+ie.x1)/2,ie.y0=ie.y1=(ie.y0+ie.y1)/2):(X=Math.min(X,le),K=Math.max(K,le))}),g=g.data(H,i.getPtId),B._maxVisibleLayers=isFinite(K)?K-X+1:0,g.enter().append("g").classed("slice",!0),D(g,o,{},[w,y],x),g.order();var ue=null;if(m&&P){var ae=i.getPtId(P);g.each(function(ie){null===ue&&i.getPtId(ie)===ae&&(ue={x0:ie.x0,x1:ie.x1,y0:ie.y0,y1:ie.y1})})}var ne=function(){return ue||{x0:0,x1:w,y0:0,y1:y}},Q=g;return m&&(Q=Q.transition().each("end",function(){var ie=I.select(this);i.setSliceCursor(ie,l,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(ie){var le=i.isHeader(ie,B);ie._x0=p(ie.x0),ie._x1=p(ie.x1),ie._y0=_(ie.y0),ie._y1=_(ie.y1),ie._hoverX=p(ie.x1-B.marker.pad.r),ie._hoverY=_($?ie.y1-B.marker.pad.b/2:ie.y0+B.marker.pad.t/2);var fe=I.select(this),he=C.ensureSingle(fe,"path","surface",function(Re){Re.style("pointer-events",R?"none":"all")});m?he.transition().attrTween("d",function(Re){var ke=S(Re,o,ne(),[w,y]);return function(Te){return x(ke(Te))}}):he.attr("d",x),fe.call(s,d,l,u,{styleOne:v,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,l,{isTransitioning:l._transitioning}),he.call(v,ie,B,l,{hovered:!1}),ie._text=ie.x0===ie.x1||ie.y0===ie.y1?"":le?G?"":i.getPtLabel(ie)||"":a(ie,d,B,u,F)||"";var pe=C.ensureSingle(fe,"g","slicetext"),xe=C.ensureSingle(pe,"text","",function(Re){Re.attr("data-notex",1)}),Ee=C.ensureUniformFontSize(l,i.determineTextFont(B,ie,F.font));xe.text(ie._text||" ").classed("slicetext",!0).attr("text-anchor",z?"end":J||le?"start":"middle").call(f.font,Ee).call(k.convertToTspans,l),ie.textBB=f.bBox(xe.node()),ie.transform=b(ie,{fontSize:Ee.size,isHeader:le}),ie.transform.fontSize=Ee.size,m?xe.transition().attrTween("transform",function(Re){var ke=O(Re,o,ne(),[w,y]);return function(Te){return M(ke(Te))}}):xe.attr("transform",M(ie))}),ue}},14102:function(se){"use strict";se.exports=function U(r,I,C){var f;C.swapXY&&(f=r.x0,r.x0=r.y0,r.y0=f,f=r.x1,r.x1=r.y1,r.y1=f),C.flipX&&(f=r.x0,r.x0=I[0]-r.x1,r.x1=I[0]-f),C.flipY&&(f=r.y0,r.y0=I[1]-r.y1,r.y1=I[1]-f);var k=r.children;if(k)for(var T=0;T<k.length;T++)U(k[T],I,C)}},70954:function(se,U,r){"use strict";se.exports={moduleType:"trace",name:"treemap",basePlotModule:r(78018),categories:[],animatable:!0,attributes:r(45802),layoutAttributes:r(55479),supplyDefaults:r(91174),supplyLayoutDefaults:r(77182),calc:r(65039).y,crossTraceCalc:r(65039).T,plot:r(5893),style:r(96362).style,colorbar:r(4898),meta:{}}},55479:function(se){"use strict";se.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function(se,U,r){"use strict";var I=r(71828),C=r(55479);se.exports=function(f,k){function T(v,c){return I.coerce(f,k,C,v,c)}T("treemapcolorway",k.colorway),T("extendtreemapcolors")}},37210:function(se,U,r){"use strict";var I=r(674),C=r(14102);se.exports=function(f,k,T){var v,c=T.flipX,i=T.flipY,s="dice-slice"===T.packing,a=T.pad[i?"bottom":"top"],o=T.pad[c?"right":"left"],l=T.pad[c?"left":"right"],u=T.pad[i?"top":"bottom"];s&&(v=o,o=a,a=v,v=l,l=u,u=v);var d=I.treemap().tile(function(g,h){switch(g){case"squarify":return I.treemapSquarify.ratio(h);case"binary":return I.treemapBinary;case"dice":return I.treemapDice;case"slice":return I.treemapSlice;default:return I.treemapSliceDice}}(T.packing,T.squarifyratio)).paddingInner(T.pad.inner).paddingLeft(o).paddingRight(l).paddingTop(a).paddingBottom(u).size(s?[k[1],k[0]]:k)(f);return(s||c||i)&&C(d,k,{swapXY:s,flipX:c,flipY:i}),d}},5893:function(se,U,r){"use strict";var I=r(80694),C=r(52583);se.exports=function(f,k,T,v){return I(f,k,T,v,{type:"treemap",drawDescendants:C})}},46650:function(se,U,r){"use strict";var I=r(39898),C=r(81684).sX,f=r(2791),k=r(71828),T=r(97313).TEXTPAD,v=r(17295).toMoveInsideBar,c=r(72597).recordMinTextSize,i=r(43473),s=r(66209);function a(o){return f.isHierarchyRoot(o)?"":f.getPtId(o)}se.exports=function(o,l,u,d,g){var h=o._fullLayout,w=l[0],y=w.trace,p="icicle"===y.type,_=w.hierarchy,x=f.findEntryWithLevel(_,y.level),b=I.select(u),M=b.selectAll("g.pathbar"),m=b.selectAll("g.slice");if(!x)return M.remove(),void m.remove();var D=f.isHierarchyRoot(x),S=!h.uniformtext.mode&&f.hasTransition(d),O=f.getMaxDepth(y),P=h._size,R=y.domain,F=P.w*(R.x[1]-R.x[0]),B=P.h*(R.y[1]-R.y[0]),J=F,z=y.pathbar.thickness,$=y.marker.line.width+i.gapWithPathbar,G=y.pathbar.visible?y.pathbar.side.indexOf("bottom")>-1?B+$:-(z+$):0,H={x0:J,x1:J,y0:G,y1:G+z},X=function(Le,Ue,Ze){var We=y.tiling.pad,et=function(ut){return ut-We<=Ue.x0},nt=function(ut){return ut+We>=Ue.x1},ct=function(ut){return ut-We<=Ue.y0},yt=function(ut){return ut+We>=Ue.y1};return Le.x0===Ue.x0&&Le.x1===Ue.x1&&Le.y0===Ue.y0&&Le.y1===Ue.y1?{x0:Le.x0,x1:Le.x1,y0:Le.y0,y1:Le.y1}:{x0:et(Le.x0-We)?0:nt(Le.x0-We)?Ze[0]:Le.x0,x1:et(Le.x1+We)?0:nt(Le.x1+We)?Ze[0]:Le.x1,y0:ct(Le.y0-We)?0:yt(Le.y0-We)?Ze[1]:Le.y0,y1:ct(Le.y1+We)?0:yt(Le.y1+We)?Ze[1]:Le.y1}},K=null,ue={},ae={},ne=null,Q=function(Le,Ue){return Ue?ue[a(Le)]:ae[a(Le)]};w.hasMultipleRoots&&D&&O++,y._maxDepth=O,y._backgroundColor=h.paper_bgcolor,y._entryDepth=x.data.depth,y._atRootLevel=D;var ie=-F/2+P.l+P.w*(R.x[1]+R.x[0])/2,le=-B/2+P.t+P.h*(1-(R.y[1]+R.y[0])/2),fe=function(Le){return ie+Le},he=function(Le){return le+Le},pe=he(0),xe=fe(0),Ee=function(Le){return xe+Le},Re=function(Le){return pe+Le};function ke(Le,Ue){return Le+","+Ue}var Te=Ee(0),we=function(Le){Le.x=Math.max(Te,Le.x)},je=y.pathbar.edgeshape,Ce=y[p?"tiling":"marker"].pad,Ie=function(Le){return-1!==y.textposition.indexOf(Le)},ge=Ie("top"),me=Ie("left"),ce=Ie("right"),Ae=Ie("bottom"),Ne=function(Le,Ue){var Ze=Le.x0,We=Le.x1,et=Le.y0,nt=Le.y1,ct=Le.textBB,yt=ge||Ue.isHeader&&!Ae?"start":Ae?"end":"middle",ut=Ie("right"),Ct=Ie("left")||Ue.onPathbar?-1:ut?1:0;if(Ue.isHeader){if((Ze+=(p?Ce:Ce.l)-T)>=(We-=(p?Ce:Ce.r)-T)){var Dt=(Ze+We)/2;Ze=Dt,We=Dt}var vt;Ae?et<(vt=nt-(p?Ce:Ce.b))&&vt<nt&&(et=vt):et<(vt=et+(p?Ce:Ce.t))&&vt<nt&&(nt=vt)}var mt=v(Ze,We,et,nt,ct,{isHorizontal:!1,constrained:!0,angle:0,anchor:yt,leftToRight:Ct});return mt.fontSize=Ue.fontSize,mt.targetX=fe(mt.targetX),mt.targetY=he(mt.targetY),isNaN(mt.targetX)||isNaN(mt.targetY)?{}:(Ze!==We&&et!==nt&&c(y.type,mt,h),{scale:mt.scale,rotate:mt.rotate,textX:mt.textX,textY:mt.textY,anchorX:mt.anchorX,anchorY:mt.anchorY,targetX:mt.targetX,targetY:mt.targetY})},De=function(Le,Ue){for(var Ze,We=0,et=Le;!Ze&&We<O;)We++,(et=et.parent)?Ze=Q(et,Ue):We=O;return Ze||{}},qe=function(Le,Ue,Ze,We,et){var nt,ct=Q(Le,Ue);if(ct)nt=ct;else if(Ue)nt=H;else if(K)if(Le.parent){var yt=ne||Ze;yt&&!Ue?nt=X(Le,yt,We):k.extendFlat(nt={},De(Le,Ue))}else nt=k.extendFlat({},Le),p&&("h"===et.orientation?et.flipX?nt.x0=Le.x1:nt.x1=0:et.flipY?nt.y0=Le.y1:nt.y1=0);else nt={};return C(nt,{x0:Le.x0,x1:Le.x1,y0:Le.y0,y1:Le.y1})},Ke=function(Le,Ue,Ze,We){var ut,Dt,vt,et=Q(Le,Ue),nt={},ct=(ut=Le,Dt=Ze,vt=We,Ue?ue[a(_)]||H:ut.data.depth-x.data.depth<O?X(ut,ae[y.level]||Dt,vt):{});k.extendFlat(nt,{transform:Ne({x0:ct.x0,x1:ct.x1,y0:ct.y0,y1:ct.y1,textBB:Le.textBB,_text:Le._text},{isHeader:f.isHeader(Le,y)})}),et?nt=et:Le.parent&&k.extendFlat(nt,De(Le,Ue));var yt=Le.transform;return Le.x0!==Le.x1&&Le.y0!==Le.y1&&c(y.type,yt,h),C(nt,{transform:{scale:yt.scale,rotate:yt.rotate,textX:yt.textX,textY:yt.textY,anchorX:yt.anchorX,anchorY:yt.anchorY,targetX:yt.targetX,targetY:yt.targetY}})},be=function(Le,Ue,Ze,We,et){var nt=We[0],ct=We[1];S?Le.exit().transition().each(function(){var yt=I.select(this);yt.select("path.surface").transition().attrTween("d",function(ut){var Ct=function(Dt,vt,mt,Lt){var Ft,Rt=Q(Dt,vt);if(vt)Ft=H;else{var Wt=Q(x,vt);Ft=Wt?X(Dt,Wt,Lt):{}}return C(Rt,Ft)}(ut,Ue,0,[nt,ct]);return function(Dt){return et(Ct(Dt))}}),yt.select("g.slicetext").attr("opacity",0)}).remove():Le.exit().remove()},Oe=function(Le){var Ue=Le.transform;return Le.x0!==Le.x1&&Le.y0!==Le.y1&&c(y.type,Ue,h),k.getTextTransform({textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY,scale:Ue.scale,rotate:Ue.rotate})};S&&(M.each(function(Le){ue[a(Le)]={x0:Le.x0,x1:Le.x1,y0:Le.y0,y1:Le.y1},Le.transform&&(ue[a(Le)].transform={textX:Le.transform.textX,textY:Le.transform.textY,anchorX:Le.transform.anchorX,anchorY:Le.transform.anchorY,targetX:Le.transform.targetX,targetY:Le.transform.targetY,scale:Le.transform.scale,rotate:Le.transform.rotate})}),m.each(function(Le){ae[a(Le)]={x0:Le.x0,x1:Le.x1,y0:Le.y0,y1:Le.y1},Le.transform&&(ae[a(Le)].transform={textX:Le.transform.textX,textY:Le.transform.textY,anchorX:Le.transform.anchorX,anchorY:Le.transform.anchorY,targetX:Le.transform.targetX,targetY:Le.transform.targetY,scale:Le.transform.scale,rotate:Le.transform.rotate}),!K&&f.isEntry(Le)&&(K=Le)})),ne=g(o,l,x,m,{width:F,height:B,viewX:fe,viewY:he,pathSlice:function(Le){var Ue=fe(Le.x0),Ze=fe(Le.x1),We=he(Le.y0),et=he(Le.y1),nt=Ze-Ue,ct=et-We;if(!nt||!ct)return"";var ut=Math.min(y.marker.cornerradius||0,nt/2,ct/2);ut&&Le.data&&Le.data.data&&Le.data.data.label&&(ge&&(ut=Math.min(ut,Ce.t)),me&&(ut=Math.min(ut,Ce.l)),ce&&(ut=Math.min(ut,Ce.r)),Ae&&(ut=Math.min(ut,Ce.b)));var Ct=function(Dt,vt){return ut?"a"+ke(ut,ut)+" 0 0 1 "+ke(Dt,vt):""};return"M"+ke(Ue,We+ut)+Ct(ut,-ut)+"L"+ke(Ze-ut,We)+Ct(ut,ut)+"L"+ke(Ze,et-ut)+Ct(-ut,ut)+"L"+ke(Ue+ut,et)+Ct(-ut,-ut)+"Z"},toMoveInsideSlice:Ne,prevEntry:K,makeUpdateSliceInterpolator:qe,makeUpdateTextInterpolator:Ke,handleSlicesExit:be,hasTransition:S,strTransform:Oe}),y.pathbar.visible?s(o,l,x,M,{barDifY:G,width:J,height:z,viewX:Ee,viewY:Re,pathSlice:function(Le){var Ue=Ee(Math.max(Math.min(Le.x0,Le.x0),0)),Ze=Ee(Math.min(Math.max(Le.x1,Le.x1),J)),We=Re(Le.y0),et=Re(Le.y1),nt=z/2,ct={},yt={};ct.x=Ue,yt.x=Ze,ct.y=yt.y=(We+et)/2;var ut={x:Ue,y:We},Ct={x:Ze,y:We},Dt={x:Ze,y:et},vt={x:Ue,y:et};return">"===je?(ut.x-=nt,Ct.x-=nt,Dt.x-=nt,vt.x-=nt):"/"===je?(Dt.x-=nt,vt.x-=nt,ct.x-=nt/2,yt.x-=nt/2):"\\"===je?(ut.x-=nt,Ct.x-=nt,ct.x-=nt/2,yt.x-=nt/2):"<"===je&&(ct.x-=nt,yt.x-=nt),we(ut),we(vt),we(ct),we(Ct),we(Dt),we(yt),"M"+ke(ut.x,ut.y)+"L"+ke(Ct.x,Ct.y)+"L"+ke(yt.x,yt.y)+"L"+ke(Dt.x,Dt.y)+"L"+ke(vt.x,vt.y)+"L"+ke(ct.x,ct.y)+"Z"},toMoveInsideSlice:Ne,makeUpdateSliceInterpolator:qe,makeUpdateTextInterpolator:Ke,handleSlicesExit:be,hasTransition:S,strTransform:Oe}):M.remove()}},96362:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(71828),k=r(2791),T=r(72597).resizeText,v=r(43467);function c(i,s,a,o,l){var u,d,g=(l||{}).hovered,h=s.data.data,w=h.i,y=h.color,p=k.isHierarchyRoot(s),_=1;if(g)u=a._hovered.marker.line.color,d=a._hovered.marker.line.width;else if(p&&y===a.root.color)_=100,u="rgba(0,0,0,0)",d=0;else if(u=f.castOption(a,w,"marker.line.color")||C.defaultLine,d=f.castOption(a,w,"marker.line.width")||0,!a._hasColorscale&&!s.onPathbar){var x=a.marker.depthfade;if(x){var b,M=C.combine(C.addOpacity(a._backgroundColor,.75),y);if(!0===x){var m=k.getMaxDepth(a);b=isFinite(m)?k.isLeaf(s)?0:a._maxVisibleLayers-(s.data.depth-a._entryDepth):s.data.height+1}else b=s.data.depth-a._entryDepth,a._atRootLevel||b++;if(b>0)for(var D=0;D<b;D++)y=C.combine(C.addOpacity(M,.5*D/b),y)}}i.call(v,s,a,o,y).style("stroke-width",d).call(C.stroke,u).style("opacity",_)}se.exports={style:function(i){var s=i._fullLayout._treemaplayer.selectAll(".trace");T(i,s,"treemap"),s.each(function(a){var o=I.select(this),l=a[0].trace;o.style("opacity",l.opacity),o.selectAll("path.surface").each(function(u){I.select(this).call(c,u,l,i,{hovered:!1})})})},styleOne:c}},68875:function(se,U,r){"use strict";var I=r(53522),C=r(1426).extendFlat,f=r(12663).axisHoverFormat;se.exports={y:I.y,x:I.x,x0:I.x0,y0:I.y0,xhoverformat:f("x"),yhoverformat:f("y"),name:C({},I.name,{}),orientation:C({},I.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:I.fillcolor,points:C({},I.boxpoints,{}),jitter:C({},I.jitter,{}),pointpos:C({},I.pointpos,{}),width:C({},I.width,{}),marker:I.marker,text:I.text,hovertext:I.hovertext,hovertemplate:I.hovertemplate,quartilemethod:I.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup,selected:I.selected,unselected:I.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(48518),k=r(60168),T=r(50606).BADNUM;function v(i,s,a){var o=s.max-s.min;if(!o)return i.bandwidth?i.bandwidth:0;if(i.bandwidth)return Math.max(i.bandwidth,o/1e4);var d,l=a.length,u=I.stdev(a,l-1,s.mean);return Math.max((d=l,1.059*Math.min(u,(s.q3-s.q1)/1.349)*Math.pow(d,-.2)),o/100)}function c(i,s,a,o){var l,u=i.spanmode,d=i.span||[],h=[s.min-2*o,s.max+2*o];function w(p){var _=d[p],x="multicategory"===a.type?a.r2c(_):a.d2c(_,0,i[s.valLetter+"calendar"]);return x===T?h[p]:x}var y={type:"linear",range:l="soft"===u?h:"hard"===u?[s.min,s.max]:[w(0),w(1)]};return C.setConvert(y),y.cleanRange(),l}se.exports=function(i,s){var a=f(i,s);if(a[0].t.empty)return a;for(var o=i._fullLayout,l=C.getFromId(i,s["h"===s.orientation?"xaxis":"yaxis"]),u=1/0,d=-1/0,g=0,h=0,w=0;w<a.length;w++){var y=a[w],p=y.pts.map(k.extractVal),_=y.bandwidth=v(s,y,p),x=y.span=c(s,y,l,_);if(y.min===y.max&&0===_)x=y.span=[y.min,y.max],y.density=[{v:1,t:x[0]}],y.bandwidth=_,g=Math.max(g,1);else{var b=x[1]-x[0],M=Math.ceil(b/(_/3)),m=b/M;if(!isFinite(m)||!isFinite(M))return I.error("Something went wrong with computing the violin span"),a[0].t.empty=!0,a;var D=k.makeKDE(y,s,p);y.density=new Array(M);for(var S=0,O=x[0];O<x[1]+m/2;S++,O+=m){var P=D(O);y.density[S]={v:P,t:O},g=Math.max(g,P)}}h=Math.max(h,p.length),u=Math.min(u,x[0]),d=Math.max(d,x[1])}var R=C.findExtremes(l,[u,d],{padded:!0});if(s._extremes[l._id]=R,s.width)a[0].t.maxKDE=g;else{var F=o._violinScaleGroupStats,B=s.scalegroup,J=F[B];J?(J.maxKDE=Math.max(J.maxKDE,g),J.maxCount=Math.max(J.maxCount,h)):F[B]={maxKDE:g,maxCount:h}}return a[0].t.labels.kde=I._(i,"kde:"),a}},86403:function(se,U,r){"use strict";var I=r(37188).setPositionOffset,C=["v","h"];se.exports=function(f,k){for(var T=f.calcdata,v=k.xaxis,c=k.yaxis,i=0;i<C.length;i++){for(var s=C[i],a="h"===s?c:v,o=[],l=0;l<T.length;l++){var u=T[l],g=u[0].trace;!0!==g.visible||"violin"!==g.type||u[0].t.empty||g.orientation!==s||g.xaxis!==v._id||g.yaxis!==c._id||o.push(l)}I("violin",f,o,a)}}},15899:function(se,U,r){"use strict";var I=r(71828),C=r(7901),f=r(36411),k=r(68875);se.exports=function(T,v,c,i){function s(b,M){return I.coerce(T,v,k,b,M)}function a(b,M){return I.coerce2(T,v,k,b,M)}if(f.handleSampleDefaults(T,v,s,i),!1!==v.visible){s("bandwidth"),s("side"),s("width")||(s("scalegroup",v.name),s("scalemode"));var o,l=s("span");Array.isArray(l)&&(o="manual"),s("spanmode",o);var u=s("line.color",(T.marker||{}).color||c),d=s("line.width"),g=s("fillcolor",C.addOpacity(v.line.color,.5));f.handlePointsDefaults(T,v,s,{prefix:""});var h=a("box.width"),w=a("box.fillcolor",g),y=a("box.line.color",u),p=a("box.line.width",d);s("box.visible",!!(h||w||y||p))||(v.box={visible:!1});var _=a("meanline.color",u),x=a("meanline.width",d);s("meanline.visible",!(!_&&!x))||(v.meanline={visible:!1}),s("quartilemethod")}}},60168:function(se,U,r){"use strict";var I=r(71828),C=function(f){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*f*f)};U.makeKDE=function(f,k,T){var v=T.length,c=C,i=f.bandwidth,s=1/(v*i);return function(a){for(var o=0,l=0;l<v;l++)o+=c((a-T[l])/i);return s*o}},U.getPositionOnKdePath=function(f,k,T){var v,c;"h"===k.orientation?(v="y",c="x"):(v="x",c="y");var i=I.findPointOnPath(f.path,T,c,{pathLength:f.pathLength}),s=f.posCenterPx,a=i[v];return[a,"both"===k.side?2*s-a:s]},U.getKdeValue=function(f,k,T){var v=f.pts.map(U.extractVal);return U.makeKDE(f,k,v)(T)/f.posDensityScale},U.extractVal=function(f){return f.v}},57634:function(se,U,r){"use strict";var I=r(7901),C=r(71828),f=r(89298),k=r(41868),T=r(60168);se.exports=function(v,c,i,s,a){a||(a={});var o,l,u=a.hoverLayer,d=v.cd,g=d[0].trace,h=g.hoveron,w=-1!==h.indexOf("violins"),y=-1!==h.indexOf("kde"),p=[];if(w||y){var _=k.hoverOnBoxes(v,c,i,s);if(y&&_.length>0){var x,b,M,m,D,S=v.xa,O=v.ya;"h"===g.orientation?(D=c,x="y",M=O,b="x",m=S):(D=i,x="x",M=S,b="y",m=O);var P=d[v.index];if(D>=P.span[0]&&D<=P.span[1]){var R=C.extendFlat({},v),F=m.c2p(D,!0),B=T.getKdeValue(P,g,D),J=T.getPositionOnKdePath(P,g,F),z=M._offset,$=M._length;R[x+"0"]=J[0],R[x+"1"]=J[1],R[b+"0"]=R[b+"1"]=F,R[b+"Label"]=b+": "+f.hoverLabelText(m,D,g[b+"hoverformat"])+", "+d[0].t.labels.kde+" "+B.toFixed(3);for(var G=0,H=0;H<_.length;H++)if("med"===_[H].attr){G=H;break}R.spikeDistance=_[G].spikeDistance;var X=x+"Spike";R[X]=_[G][X],_[G].spikeDistance=void 0,_[G][X]=void 0,R.hovertemplate=!1,p.push(R),(l={})[x+"1"]=C.constrain(z+J[0],z,z+$),l[x+"2"]=C.constrain(z+J[1],z,z+$),l[b+"1"]=l[b+"2"]=m._offset+F}}w&&(p=p.concat(_))}-1!==h.indexOf("points")&&(o=k.hoverOnPoints(v,c,i));var K=u.selectAll(".violinline-"+g.uid).data(l?[0]:[]);return K.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),K.exit().remove(),K.attr(l).call(I.stroke,v.color),"closest"===s?o?[o]:p:(o&&p.push(o),p)}},47462:function(se,U,r){"use strict";se.exports={attributes:r(68875),layoutAttributes:r(9228),supplyDefaults:r(15899),crossTraceDefaults:r(36411).crossTraceDefaults,supplyLayoutDefaults:r(33598),calc:r(38603),crossTraceCalc:r(86403),plot:r(28443),style:r(31847),styleOnSelect:r(16296).styleOnSelect,hoverPoints:r(57634),selectPoints:r(24626),moduleType:"trace",name:"violin",basePlotModule:r(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function(se,U,r){"use strict";var I=r(40094),C=r(71828).extendFlat;se.exports={violinmode:C({},I.boxmode,{}),violingap:C({},I.boxgap,{}),violingroupgap:C({},I.boxgroupgap,{})}},33598:function(se,U,r){"use strict";var I=r(71828),C=r(9228),f=r(4199);se.exports=function(k,T,v){f._supply(k,T,v,function(c,i){return I.coerce(k,T,C,c,i)},"violin")}},28443:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(86047),T=r(34621),v=r(60168);se.exports=function(c,i,s,a){var o=c._context.staticPlot,l=c._fullLayout,u=i.xaxis,d=i.yaxis;function g(h,w){var y=T(h,{xaxis:u,yaxis:d,trace:w,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return f.smoothopen(y[0],1)}C.makeTraceGroups(a,s,"trace violins").each(function(h){var w=I.select(this),y=h[0],p=y.t,_=y.trace;if(!0!==_.visible||p.empty)w.remove();else{var x=p.bPos,b=p.bdPos,M=i[p.valLetter+"axis"],m=i[p.posLetter+"axis"],D="both"===_.side,S=D||"positive"===_.side,O=D||"negative"===_.side,P=w.selectAll("path.violin").data(C.identity);P.enter().append("path").style("vector-effect",o?"none":"non-scaling-stroke").attr("class","violin"),P.exit().remove(),P.each(function(H){var X,K,ue,ae,ne,Q,ie,le,fe=I.select(this),he=H.density,pe=he.length,xe=m.c2l(H.pos+x,!0),Ee=m.l2p(xe);if(_.width)X=p.maxKDE/b;else{var Re=l._violinScaleGroupStats[_.scalegroup];X="count"===_.scalemode?Re.maxKDE/b*(Re.maxCount/H.pts.length):Re.maxKDE/b}if(S){for(ie=new Array(pe),ne=0;ne<pe;ne++)(le=ie[ne]={})[p.posLetter]=xe+he[ne].v/X,le[p.valLetter]=M.c2l(he[ne].t,!0);K=g(ie,_)}if(O){for(ie=new Array(pe),Q=0,ne=pe-1;Q<pe;Q++,ne--)(le=ie[Q]={})[p.posLetter]=xe-he[ne].v/X,le[p.valLetter]=M.c2l(he[ne].t,!0);ue=g(ie,_)}if(D)ae=K+"L"+ue.substr(1)+"Z";else{var ke=[Ee,M.c2p(he[0].t)],Te=[Ee,M.c2p(he[pe-1].t)];"h"===_.orientation&&(ke.reverse(),Te.reverse()),ae=S?"M"+ke+"L"+K.substr(1)+"L"+Te:"M"+Te+"L"+ue.substr(1)+"L"+ke}fe.attr("d",ae),H.posCenterPx=Ee,H.posDensityScale=X*b,H.path=fe.node(),H.pathLength=H.path.getTotalLength()/(D?2:1)});var R,F,B,J=_.box,z=J.width,$=(J.line||{}).width;D?(R=b*z,F=0):S?(R=[0,b*z/2],F=$*{x:1,y:-1}[p.posLetter]):(R=[b*z/2,0],F=$*{x:-1,y:1}[p.posLetter]),k.plotBoxAndWhiskers(w,{pos:m,val:M},_,{bPos:x,bdPos:R,bPosPxOffset:F}),k.plotBoxMean(w,{pos:m,val:M},_,{bPos:x,bdPos:R,bPosPxOffset:F}),!_.box.visible&&_.meanline.visible&&(B=C.identity);var G=w.selectAll("path.meanline").data(B||[]);G.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",o?"none":"non-scaling-stroke"),G.exit().remove(),G.each(function(H){var X=M.c2p(H.mean,!0),K=v.getPositionOnKdePath(H,_,X);I.select(this).attr("d","h"===_.orientation?"M"+X+","+K[0]+"V"+K[1]:"M"+K[0]+","+X+"H"+K[1])}),k.plotPoints(w,{x:u,y:d},_,p)}})}},31847:function(se,U,r){"use strict";var I=r(39898),C=r(7901),f=r(16296).stylePoints;se.exports=function(k){var T=I.select(k).selectAll("g.trace.violins");T.style("opacity",function(v){return v[0].trace.opacity}),T.each(function(v){var c=v[0].trace,i=I.select(this),s=c.box||{},a=s.line||{},o=c.meanline||{},l=o.width;i.selectAll("path.violin").style("stroke-width",c.line.width+"px").call(C.stroke,c.line.color).call(C.fill,c.fillcolor),i.selectAll("path.box").style("stroke-width",a.width+"px").call(C.stroke,a.color).call(C.fill,s.fillcolor);var u={"stroke-width":l+"px","stroke-dasharray":2*l+"px,"+l+"px"};i.selectAll("path.mean").style(u).call(C.stroke,o.color),i.selectAll("path.meanline").style(u).call(C.stroke,o.color),f(i,c,k)})}},16336:function(se,U,r){"use strict";var I=r(50693),C=r(16249),f=r(54532),k=r(9012),T=r(1426).extendFlat,v=r(30962).overrideAll,c=se.exports=v(T({x:C.x,y:C.y,z:C.z,value:C.value,isomin:C.isomin,isomax:C.isomax,surface:C.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:C.slices,caps:C.caps,text:C.text,hovertext:C.hovertext,xhoverformat:C.xhoverformat,yhoverformat:C.yhoverformat,zhoverformat:C.zhoverformat,valuehoverformat:C.valuehoverformat,hovertemplate:C.hovertemplate},I("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:C.colorbar,opacity:C.opacity,opacityscale:f.opacityscale,lightposition:C.lightposition,lighting:C.lighting,flatshading:C.flatshading,contour:C.contour,hoverinfo:T({},k.hoverinfo),showlegend:T({},k.showlegend,{dflt:!1})}),"calc","nested");c.x.editType=c.y.editType=c.z.editType=c.value.editType="calc+clearAxisTypes",c.transforms=void 0},64809:function(se,U,r){"use strict";var I=r(9330).gl_mesh3d,C=r(81697).parseColorScale,f=r(78614),k=r(21081).extractOpts,T=r(90060),v=r(22674).findNearestOnAxis,c=r(22674).generateIsoMeshes;function i(a,o,l){this.scene=a,this.uid=l,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var s=i.prototype;s.handlePick=function(a){if(a.object===this.mesh){var o=a.data.index,u=this.data._meshY[o],d=this.data._meshZ[o],g=this.data._Ys.length,h=this.data._Zs.length,w=v(this.data._meshX[o],this.data._Xs).id,y=v(u,this.data._Ys).id,p=v(d,this.data._Zs).id,_=a.index=p+h*y+h*g*w;a.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&void 0!==x[_]?a.textLabel=x[_]:x&&(a.textLabel=x),!0}},s.update=function(a){var o=this.scene,l=o.fullSceneLayout;function u(h,w,y,p){return w.map(function(_){return h.d2l(_,0,p)*y})}this.data=c(a);var d={positions:T(u(l.xaxis,a._meshX,o.dataScale[0],a.xcalendar),u(l.yaxis,a._meshY,o.dataScale[1],a.ycalendar),u(l.zaxis,a._meshZ,o.dataScale[2],a.zcalendar)),cells:T(a._meshI,a._meshJ,a._meshK),lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,opacityscale:a.opacityscale,contourEnable:a.contour.show,contourColor:f(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading},g=k(a);d.vertexIntensity=a._meshIntensity,d.vertexIntensityBounds=[g.min,g.max],d.colormap=C(a),this.mesh.update(d)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},se.exports=function(a,o){var u=I({gl:a.glplot.gl}),d=new i(a,u,o.uid);return u._trace=d,d.update(o),a.glplot.add(u),d}},47651:function(se,U,r){"use strict";var I=r(71828),C=r(16336),f=r(82738).supplyIsoDefaults,k=r(91831).opacityscaleDefaults;se.exports=function(T,v,c,i){function s(a,o){return I.coerce(T,v,C,a,o)}f(T,v,c,i,s),k(T,v,i,s)}},17659:function(se,U,r){"use strict";se.exports={attributes:r(16336),supplyDefaults:r(47651),calc:r(56959),colorbar:{min:"cmin",max:"cmax"},plot:r(64809),moduleType:"trace",name:"volume",basePlotModule:r(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function(se,U,r){"use strict";var I=r(1486),C=r(82196).line,f=r(9012),k=r(12663).axisHoverFormat,T=r(5386).fF,v=r(5386).si,c=r(48334),i=r(1426).extendFlat,s=r(7901);function a(o){return{marker:{color:i({},I.marker.color,{arrayOk:!1,editType:"style"}),line:{color:i({},I.marker.line.color,{arrayOk:!1,editType:"style"}),width:i({},I.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}se.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:I.x,x0:I.x0,dx:I.dx,y:I.y,y0:I.y0,dy:I.dy,xperiod:I.xperiod,yperiod:I.yperiod,xperiod0:I.xperiod0,yperiod0:I.yperiod0,xperiodalignment:I.xperiodalignment,yperiodalignment:I.yperiodalignment,xhoverformat:k("x"),yhoverformat:k("y"),hovertext:I.hovertext,hovertemplate:T({},{keys:c.eventDataKeys}),hoverinfo:i({},f.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:c.eventDataKeys.concat(["label"])}),text:I.text,textposition:I.textposition,insidetextanchor:I.insidetextanchor,textangle:I.textangle,textfont:I.textfont,insidetextfont:I.insidetextfont,outsidetextfont:I.outsidetextfont,constraintext:I.constraintext,cliponaxis:I.cliponaxis,orientation:I.orientation,offset:I.offset,width:I.width,increasing:a(),decreasing:a(),totals:a(),connector:{line:{color:i({},C.color,{dflt:s.defaultLine}),width:i({},C.width,{editType:"plot"}),dash:C.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:I.offsetgroup,alignmentgroup:I.alignmentgroup}},52752:function(se,U,r){"use strict";var I=r(89298),C=r(42973),f=r(71828).mergeArray,k=r(66279),T=r(50606).BADNUM;function v(i){return"a"===i||"absolute"===i}function c(i){return"t"===i||"total"===i}se.exports=function(i,s){var a,o,l,u,d,g,h=I.getFromId(i,s.xaxis||"x"),w=I.getFromId(i,s.yaxis||"y");"h"===s.orientation?(a=h.makeCalcdata(s,"x"),l=w.makeCalcdata(s,"y"),u=C(s,w,"y",l),d=!!s.yperiodalignment,g="y"):(a=w.makeCalcdata(s,"y"),l=h.makeCalcdata(s,"x"),u=C(s,h,"x",l),d=!!s.xperiodalignment,g="x"),o=u.vals;for(var y,p=Math.min(o.length,a.length),_=new Array(p),x=0,b=!1,M=0;M<p;M++){var m=a[M]||0,D=!1;(a[M]!==T||c(s.measure[M])||v(s.measure[M]))&&M+1<p&&(a[M+1]!==T||c(s.measure[M+1])||v(s.measure[M+1]))&&(D=!0);var S=_[M]={i:M,p:o[M],s:m,rawS:m,cNext:D};v(s.measure[M])?(x=S.s,S.isSum=!0,S.dir="totals",S.s=x):c(s.measure[M])?(S.isSum=!0,S.dir="totals",S.s=x):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",S.s=x+(y=S.s),x+=y),"totals"===S.dir&&(b=!0),d&&(_[M].orig_p=l[M],_[M][g+"End"]=u.ends[M],_[M][g+"Start"]=u.starts[M]),s.ids&&(S.id=String(s.ids[M])),S.v=(s.base||0)+x}return _.length&&(_[0].hasTotals=b),f(s.text,_,"tx"),f(s.hovertext,_,"htx"),k(_,s),_}},48334:function(se){"use strict";se.exports={eventDataKeys:["initial","delta","final"]}},70766:function(se,U,r){"use strict";var I=r(11661).setGroupPositions;se.exports=function(C,f){var k,T,v=C._fullLayout,c=C._fullData,i=C.calcdata,s=f.xaxis,a=f.yaxis,o=[],l=[],u=[];for(T=0;T<c.length;T++){var d=c[T];!0===d.visible&&d.xaxis===s._id&&d.yaxis===a._id&&"waterfall"===d.type&&(k=i[T],"h"===d.orientation?u.push(k):l.push(k),o.push(k))}var g={mode:v.waterfallmode,norm:v.waterfallnorm,gap:v.waterfallgap,groupgap:v.waterfallgroupgap};for(I(C,s,a,l,g),I(C,a,s,u,g),T=0;T<o.length;T++){k=o[T];for(var h=0;h<k.length;h++){var w=k[h];!1===w.isSum&&(w.s0+=0===h?0:k[h-1].s),h+1<k.length&&(k[h].nextP0=k[h+1].p0,k[h].nextS0=k[h+1].s0)}}}},83266:function(se,U,r){"use strict";var I=r(71828),C=r(26125),f=r(90769).handleText,k=r(67513),T=r(73927),v=r(43037),c=r(7901),i=r(22372),s=i.INCREASING.COLOR,a=i.DECREASING.COLOR;function o(l,u,d){l(u+".marker.color",d),l(u+".marker.line.color",c.defaultLine),l(u+".marker.line.width")}se.exports={supplyDefaults:function(l,u,d,g){function h(y,p){return I.coerce(l,u,v,y,p)}if(k(l,u,g,h)){T(l,u,g,h),h("xhoverformat"),h("yhoverformat"),h("measure"),h("orientation",u.x&&!u.y?"h":"v"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate");var w=h("textposition");f(l,u,g,h,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==u.textposition&&(h("texttemplate"),u.texttemplate||h("textinfo")),o(h,"increasing",s),o(h,"decreasing",a),o(h,"totals","#4499FF"),h("connector.visible")&&(h("connector.mode"),h("connector.line.width")&&(h("connector.line.color"),h("connector.line.dash")))}else u.visible=!1},crossTraceDefaults:function(l,u){var d,g;function h(y){return I.coerce(g._input,g,v,y)}if("group"===u.waterfallmode)for(var w=0;w<l.length;w++)d=(g=l[w])._input,C(d,g,u,h)}}},58593:function(se){"use strict";se.exports=function(U,r){return U.x="xVal"in r?r.xVal:r.x,U.y="yVal"in r?r.yVal:r.y,"initial"in r&&(U.initial=r.initial),"delta"in r&&(U.delta=r.delta),"final"in r&&(U.final=r.final),r.xa&&(U.xaxis=r.xa),r.ya&&(U.yaxis=r.ya),U}},61326:function(se,U,r){"use strict";var I=r(89298).hoverLabelText,C=r(7901).opacity,f=r(95423).hoverOnBars,k=r(22372),T=k.INCREASING.SYMBOL,v=k.DECREASING.SYMBOL;se.exports=function(c,i,s,a,o){var R,F,B,J,l=f(c,i,s,a,o);if(l){var u=l.cd,d=u[0].trace,g="h"===d.orientation,h=g?"x":"y",w=g?c.xa:c.ya,y=u[l.index],p=y.isSum?y.b+y.s:y.rawS;l.initial=y.b+y.s-p,l.delta=p,l.final=l.initial+l.delta;var _=S(Math.abs(l.delta));l.deltaLabel=p<0?"("+_+")":_,l.finalLabel=S(l.final),l.initialLabel=S(l.initial);var x=y.hi||d.hoverinfo,b=[];if(x&&"none"!==x&&"skip"!==x){var M="all"===x,m=x.split("+"),D=function(O){return M||-1!==m.indexOf(O)};y.isSum||(!D("final")||D(g?"x":"y")||b.push(l.finalLabel),D("delta")&&b.push(p<0?l.deltaLabel+" "+v:l.deltaLabel+" "+T),D("initial")&&b.push("Initial: "+l.initialLabel))}return b.length&&(l.extraText=b.join("<br>")),l.color=(B=(R=d[y.dir].marker).line.color,J=R.line.width,C(F=R.color)?F:C(B)&&J?B:void 0),[l]}function S(O){return I(w,O,d[h+"hoverformat"])}}},19990:function(se,U,r){"use strict";se.exports={attributes:r(43037),layoutAttributes:r(13494),supplyDefaults:r(83266).supplyDefaults,crossTraceDefaults:r(83266).crossTraceDefaults,supplyLayoutDefaults:r(5176),calc:r(52752),crossTraceCalc:r(70766),plot:r(30436),style:r(55750).style,hoverPoints:r(61326),eventData:r(58593),selectPoints:r(81974),moduleType:"trace",name:"waterfall",basePlotModule:r(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function(se){"use strict";se.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function(se,U,r){"use strict";var I=r(71828),C=r(13494);se.exports=function(f,k,T){var v=!1;function c(a,o){return I.coerce(f,k,C,a,o)}for(var i=0;i<T.length;i++){var s=T[i];if(s.visible&&"waterfall"===s.type){v=!0;break}}v&&(c("waterfallmode"),c("waterfallgap",.2),c("waterfallgroupgap"))}},30436:function(se,U,r){"use strict";var I=r(39898),C=r(71828),f=r(91424),k=r(50606).BADNUM,T=r(17295),v=r(72597).clearMinTextSize;se.exports=function(c,i,s,a){var l,u,h,w,o=c._fullLayout;v("waterfall",o),T.plot(c,i,s,a,{mode:o.waterfallmode,norm:o.waterfallmode,gap:o.waterfallgap,groupgap:o.waterfallgroupgap}),l=c,h=(u=i).xaxis,w=u.yaxis,C.makeTraceGroups(a,s,"trace bars").each(function(y){var p=I.select(this),_=y[0].trace,x=C.ensureSingle(p,"g","lines");if(_.connector&&_.connector.visible){var b="h"===_.orientation,M=_.connector.mode,m=x.selectAll("g.line").data(C.identity);m.enter().append("g").classed("line",!0),m.exit().remove();var D=m.size();m.each(function(S,O){if(O===D-1||S.cNext){var P=(z=h,$=w,X=[],ue=(G=b)?$:z,(H=[])[0]=(K=G?z:$).c2p((J=S).s0,!0),X[0]=ue.c2p(J.p0,!0),H[1]=K.c2p(J.s1,!0),X[1]=ue.c2p(J.p1,!0),H[2]=K.c2p(J.nextS0,!0),X[2]=ue.c2p(J.nextP0,!0),G?[H,X]:[X,H]),R=P[0],F=P[1],B="";R[0]!==k&&F[0]!==k&&R[1]!==k&&F[1]!==k&&("spanning"===M&&!S.isSum&&O>0&&(B+=b?"M"+R[0]+","+F[1]+"V"+F[0]:"M"+R[1]+","+F[0]+"H"+R[0]),"between"!==M&&(S.isSum||O<D-1)&&(B+=b?"M"+R[1]+","+F[0]+"V"+F[1]:"M"+R[0]+","+F[1]+"H"+R[1]),R[2]!==k&&F[2]!==k&&(B+=b?"M"+R[1]+","+F[1]+"V"+F[2]:"M"+R[1]+","+F[1]+"H"+R[2])),""===B&&(B="M0,0Z"),C.ensureSingle(I.select(this),"path").attr("d",B).call(f.setClipUrl,u.layerClipId,l)}var J,z,$,G,H,X,K,ue})}else x.remove()})}},55750:function(se,U,r){"use strict";var I=r(39898),C=r(91424),f=r(7901),k=r(37822).DESELECTDIM,T=r(16688),v=r(72597).resizeText,c=T.styleTextPoints;se.exports={style:function(i,s,a){var o=a||I.select(i).selectAll("g.waterfalllayer").selectAll("g.trace");v(i,o,"waterfall"),o.style("opacity",function(l){return l[0].trace.opacity}),o.each(function(l){var u=I.select(this),d=l[0].trace;u.selectAll(".point > path").each(function(g){if(!g.isBlank){var h=d[g.dir].marker;I.select(this).call(f.fill,h.color).call(f.stroke,h.line.color).call(C.dashLine,h.line.dash,h.line.width).style("opacity",d.selectedpoints&&!g.selected?k:1)}}),c(u,d,i),u.selectAll(".lines").each(function(){var g=d.connector.line;C.lineGroupStyle(I.select(this).selectAll("path"),g.width,g.color,g.dash)})})}}},82887:function(se,U,r){"use strict";var I=r(89298),C=r(71828),f=r(86281),k=r(79344).p,T=r(50606).BADNUM;U.moduleType="transform",U.name="aggregate";var v=U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},c=v.aggregations;function i(l,u,d,g){if(g.enabled){for(var h=g.target,w=C.nestedProperty(u,h),y=w.get(),p=function(b,M){var D=M.d2c,S=M.c2d;switch(b.func){case"count":return s;case"first":return a;case"last":return o;case"sum":return function(O,P){for(var R=0,F=0;F<P.length;F++){var B=D(O[P[F]]);B!==T&&(R+=B)}return S(R)};case"avg":return function(O,P){for(var R=0,F=0,B=0;B<P.length;B++){var J=D(O[P[B]]);J!==T&&(R+=J,F++)}return F?S(R/F):T};case"min":return function(O,P){for(var R=1/0,F=0;F<P.length;F++){var B=D(O[P[F]]);B!==T&&(R=Math.min(R,B))}return R===1/0?T:S(R)};case"max":return function(O,P){for(var R=-1/0,F=0;F<P.length;F++){var B=D(O[P[F]]);B!==T&&(R=Math.max(R,B))}return R===-1/0?T:S(R)};case"range":return function(O,P){for(var R=1/0,F=-1/0,B=0;B<P.length;B++){var J=D(O[P[B]]);J!==T&&(R=Math.min(R,J),F=Math.max(F,J))}return F===-1/0||R===1/0?T:S(F-R)};case"change":return function(O,P){var R=D(O[P[0]]),F=D(O[P[P.length-1]]);return R===T||F===T?T:S(F-R)};case"median":return function(O,P){for(var R=[],F=0;F<P.length;F++){var B=D(O[P[F]]);B!==T&&R.push(B)}if(!R.length)return T;R.sort(C.sorterAsc);var J=(R.length-1)/2;return S((R[Math.floor(J)]+R[Math.ceil(J)])/2)};case"mode":return function(O,P){for(var R={},F=0,B=T,J=0;J<P.length;J++){var z=D(O[P[J]]);if(z!==T){var $=R[z]=(R[z]||0)+1;$>F&&(F=$,B=z)}}return F?S(B):T};case"rms":return function(O,P){for(var R=0,F=0,B=0;B<P.length;B++){var J=D(O[P[B]]);J!==T&&(R+=J*J,F++)}return F?S(Math.sqrt(R/F)):T};case"stddev":return function(O,P){var R,F=0,B=0,J=1,z=T;for(R=0;R<P.length&&z===T;R++)z=D(O[P[R]]);if(z===T)return T;for(;R<P.length;R++){var $=D(O[P[R]]);if($!==T){var G=$-z;F+=G,B+=G*G,J++}}var H="sample"===b.funcmode?J-1:J;return H?Math.sqrt((B-F*F/J)/H):0}}}(g,I.getDataConversions(l,u,h,y)),_=new Array(d.length),x=0;x<d.length;x++)_[x]=p(y,d[x]);w.set(_),"count"===g.func&&C.pushUnique(u._arrayAttrs,h)}}function s(l,u){return u.length}function a(l,u){return l[u[0]]}function o(l,u){return l[u[u.length-1]]}U.supplyDefaults=function(l,u){var d,g={};function h(S,O){return C.coerce(l,g,v,S,O)}if(!h("enabled"))return g;var w=f.findArrayAttributes(u),y={};for(d=0;d<w.length;d++)y[w[d]]=1;var p=h("groups");if(!Array.isArray(p)){if(!y[p])return g.enabled=!1,g;y[p]=0}var _,x=l.aggregations||[],b=g.aggregations=new Array(x.length);function M(S,O){return C.coerce(x[d],_,c,S,O)}for(d=0;d<x.length;d++){_={_index:d};var m=M("target"),D=M("func");M("enabled")&&m&&(y[m]||"count"===D&&void 0===y[m])?("stddev"===D&&M("funcmode"),y[m]=0,b[d]=_):b[d]={enabled:!1,_index:d}}for(d=0;d<w.length;d++)y[w[d]]&&b.push({target:w[d],func:c.func.dflt,enabled:!0,_index:-1});return g},U.calcTransform=function(l,u,d){if(d.enabled){var g=d.groups,h=C.getTargetArray(u,{target:g});if(h){var w,y,p,x={},b={},M=[],m=k(u.transforms,d),D=h.length;for(u._length&&(D=Math.min(D,u._length)),w=0;w<D;w++)void 0===(p=x[y=h[w]])?(x[y]=M.length,M.push([w]),b[x[y]]=m(w)):(M[p].push(w),b[x[y]]=(b[x[y]]||[]).concat(m(w)));d._indexToPoints=b;var S=d.aggregations;for(w=0;w<S.length;w++)i(l,u,M,S[w]);"string"==typeof g&&i(l,u,M,{target:g,func:"first",enabled:!0}),u._length=M.length}}}},14382:function(se,U,r){"use strict";var I=r(71828),C=r(73972),f=r(89298),k=r(79344).p,T=r(74808),v=T.COMPARISON_OPS,c=T.INTERVAL_OPS,i=T.SET_OPS;U.moduleType="transform",U.name="filter",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(v).concat(c).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},U.supplyDefaults=function(s){var a={};function o(d,g){return I.coerce(s,a,U.attributes,d,g)}if(o("enabled")){var l=o("target");if(I.isArrayOrTypedArray(l)&&0===l.length)return a.enabled=!1,a;o("preservegaps"),o("operation"),o("value");var u=C.getComponentMethod("calendars","handleDefaults");u(s,a,"valuecalendar",null),u(s,a,"targetcalendar",null)}return a},U.calcTransform=function(s,a,o){if(o.enabled){var l=I.getTargetArray(a,o);if(l){var u=o.target,d=l.length;a._length&&(d=Math.min(d,a._length));var g=o.targetcalendar,h=a._arrayAttrs,w=o.preservegaps;if("string"==typeof u){var y=I.nestedProperty(a,u+"calendar").get();y&&(g=y)}var p,_,x=function(P,R,F){var B=P.operation,J=P.value,z=Array.isArray(J);function $(K){return-1!==K.indexOf(B)}var G,H=function(K){return R(K,0,P.valuecalendar)},X=function(K){return R(K,0,F)};switch($(v)?G=H(z?J[0]:J):$(c)?G=z?[H(J[0]),H(J[1])]:[H(J),H(J)]:$(i)&&(G=z?J.map(H):[H(J)]),B){case"=":return function(K){return X(K)===G};case"!=":return function(K){return X(K)!==G};case"<":return function(K){return X(K)<G};case"<=":return function(K){return X(K)<=G};case">":return function(K){return X(K)>G};case">=":return function(K){return X(K)>=G};case"[]":return function(K){var ue=X(K);return ue>=G[0]&&ue<=G[1]};case"()":return function(K){var ue=X(K);return ue>G[0]&&ue<G[1]};case"[)":return function(K){var ue=X(K);return ue>=G[0]&&ue<G[1]};case"(]":return function(K){var ue=X(K);return ue>G[0]&&ue<=G[1]};case"][":return function(K){var ue=X(K);return ue<=G[0]||ue>=G[1]};case")(":return function(K){var ue=X(K);return ue<G[0]||ue>G[1]};case"](":return function(K){var ue=X(K);return ue<=G[0]||ue>G[1]};case")[":return function(K){var ue=X(K);return ue<G[0]||ue>=G[1]};case"{}":return function(K){return-1!==G.indexOf(X(K))};case"}{":return function(K){return-1===G.indexOf(X(K))}}}(o,f.getDataToCoordFunc(s,a,u,l),g),b={},M={},m=0;w?(p=function(P){b[P.astr]=I.extendDeep([],P.get()),P.set(new Array(d))},_=function(P,R){var F=b[P.astr][R];P.get()[R]=F}):(p=function(P){b[P.astr]=I.extendDeep([],P.get()),P.set([])},_=function(P,R){var F=b[P.astr][R];P.get().push(F)}),O(p);for(var D=k(a.transforms,o),S=0;S<d;S++)x(l[S])?(O(_,S),M[m++]=D(S)):w&&m++;o._indexToPoints=M,a._length=m}}function O(P,R){for(var F=0;F<h.length;F++)P(I.nestedProperty(a,h[F]),R)}}},43102:function(se,U,r){"use strict";var I=r(71828),C=r(86281),f=r(74875),k=r(79344).p;function T(v,c){var i,s,a,o,l,u,d,g,h,w,y=c.transform,p=c.transformIndex,_=v.transforms[p].groups,x=k(v.transforms,y);if(!I.isArrayOrTypedArray(_)||0===_.length)return[v];var b=I.filterUnique(_),M=new Array(b.length),m=_.length,D=C.findArrayAttributes(v),S=y.styles||[],O={};for(i=0;i<S.length;i++)O[S[i].target]=S[i].value;y.styles&&(w=I.keyedContainer(y,"styles","target","value.name"));var P={},R={};for(i=0;i<b.length;i++){P[u=b[i]]=i,R[u]=0,(d=M[i]=I.extendDeepNoArrays({},v))._group=u,d.transforms[p]._indexToPoints={};var F=null;for(w&&(F=w.get(u)),d.name=F||""===F?F:I.templateString(y.nameformat,{trace:v.name,group:u}),g=d.transforms,d.transforms=[],s=0;s<g.length;s++)d.transforms[s]=I.extendDeepNoArrays({},g[s]);for(s=0;s<D.length;s++)I.nestedProperty(d,D[s]).set([])}for(a=0;a<D.length;a++){for(o=D[a],s=0,h=[];s<b.length;s++)h[s]=I.nestedProperty(M[s],o).get();for(l=I.nestedProperty(v,o).get(),s=0;s<m;s++)h[P[_[s]]].push(l[s])}for(s=0;s<m;s++)(d=M[P[_[s]]]).transforms[p]._indexToPoints[R[_[s]]]=x(s),R[_[s]]++;for(i=0;i<b.length;i++)u=b[i],f.clearExpandedTraceDefaultColors(d=M[i]),d=I.extendDeepNoArrays(d,O[u]||{});return M}U.moduleType="transform",U.name="groupby",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},U.supplyDefaults=function(v,c,i){var s,a={};function o(h,w){return I.coerce(v,a,U.attributes,h,w)}if(!o("enabled"))return a;o("groups"),o("nameformat",i._dataLength>1?"%{group} (%{trace})":"%{group}");var l=v.styles,u=a.styles=[];if(l)for(s=0;s<l.length;s++){var d=u[s]={};I.coerce(l[s],u[s],U.attributes.styles,"target");var g=I.coerce(l[s],u[s],U.attributes.styles,"value");I.isPlainObject(g)?d.value=I.extendDeep({},g):g&&delete d.value}return a},U.transform=function(v,c){var i,s,a,o=[];for(s=0;s<v.length;s++)for(i=T(v[s],c),a=0;a<i.length;a++)o.push(i[a]);return o}},79344:function(se,U){"use strict";U.p=function(r,I){for(var C,f,k=0;k<r.length&&(C=r[k])!==I;k++)C._indexToPoints&&!1!==C.enabled&&(f=C._indexToPoints);return f?function(v){return f[v]}:function(v){return[v]}}},32275:function(se,U,r){"use strict";var I=r(71828),C=r(89298),f=r(79344).p,k=r(50606).BADNUM;U.moduleType="transform",U.name="sort",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},U.supplyDefaults=function(T){var v={};function c(i,s){return I.coerce(T,v,U.attributes,i,s)}return c("enabled")&&(c("target"),c("order")),v},U.calcTransform=function(T,v,c){if(c.enabled){var i=I.getTargetArray(v,c);if(i){var s=c.target,a=i.length;v._length&&(a=Math.min(a,v._length));var o,l,u=v._arrayAttrs,d=function(_,x,b,M){var m,D=new Array(M),S=new Array(M);for(m=0;m<M;m++)D[m]={v:x[m],i:m};for(D.sort(function(O,P){switch(O.order){case"ascending":return function(R,F){var B=P(R.v),J=P(F.v);return B===k?1:J===k?-1:B-J};case"descending":return function(R,F){var B=P(R.v),J=P(F.v);return B===k?1:J===k?-1:J-B}}}(_,b)),m=0;m<M;m++)S[m]=D[m].i;return S}(c,i,C.getDataToCoordFunc(T,v,s,i),a),g=f(v.transforms,c),h={};for(o=0;o<u.length;o++){var w=I.nestedProperty(v,u[o]),y=w.get(),p=new Array(a);for(l=0;l<a;l++)p[l]=y[d[l]];w.set(p)}for(l=0;l<a;l++)h[l]=g(d[l]);c._indexToPoints=h,v._length=a}}}},11506:function(se,U){"use strict";U.version="2.24.2"},9330:function(se,U,r){var I,C=r(90386);I=function(){return function(){var f={7386:function(v,c,i){v.exports={alpha_shape:i(2350),convex_hull:i(5537),delaunay_triangulate:i(4419),gl_cone3d:i(1140),gl_error3d:i(3110),gl_heatmap2d:i(6386),gl_line3d:i(6086),gl_mesh3d:i(8116),gl_plot2d:i(2117),gl_plot3d:i(1059),gl_pointcloud2d:i(8271),gl_scatter3d:i(2182),gl_select_box:i(6623),gl_spikes2d:i(3050),gl_streamtube3d:i(7307),gl_surface3d:i(3754),ndarray:i(5050),ndarray_linear_interpolate:i(3581)}},2146:function(v,c,i){"use strict";function a(be,Oe){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Le,Ue){return Le.__proto__=Ue,Le})(be,Oe)}function o(be){if(void 0===be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return be}function l(be){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Oe){return Oe.__proto__||Object.getPrototypeOf(Oe)})(be)}function u(be){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Oe){return typeof Oe}:function(Oe){return Oe&&"function"==typeof Symbol&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe})(be)}var d=i(3910),g=i(3187),h="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;c.lW=p,c.h2=50;var w=2147483647;function y(be){if(be>w)throw new RangeError('The value "'+be+'" is invalid for option "size"');var Oe=new Uint8Array(be);return Object.setPrototypeOf(Oe,p.prototype),Oe}function p(be,Oe,Le){if("number"==typeof be){if("string"==typeof Oe)throw new TypeError('The "string" argument must be of type string. Received type number');return b(be)}return _(be,Oe,Le)}function _(be,Oe,Le){if("string"==typeof be)return function(We,et){if("string"==typeof et&&""!==et||(et="utf8"),!p.isEncoding(et))throw new TypeError("Unknown encoding: "+et);var nt=0|S(We,et),ct=y(nt),yt=ct.write(We,et);return yt!==nt&&(ct=ct.slice(0,yt)),ct}(be,Oe);if(ArrayBuffer.isView(be))return function(We){if(Ae(We,Uint8Array)){var et=new Uint8Array(We);return m(et.buffer,et.byteOffset,et.byteLength)}return M(We)}(be);if(null==be)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(be));if(Ae(be,ArrayBuffer)||be&&Ae(be.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(be,SharedArrayBuffer)||be&&Ae(be.buffer,SharedArrayBuffer)))return m(be,Oe,Le);if("number"==typeof be)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ue=be.valueOf&&be.valueOf();if(null!=Ue&&Ue!==be)return p.from(Ue,Oe,Le);var Ze=function(We){if(p.isBuffer(We)){var et=0|D(We.length),nt=y(et);return 0===nt.length||We.copy(nt,0,0,et),nt}return void 0!==We.length?"number"!=typeof We.length||Ne(We.length)?y(0):M(We):"Buffer"===We.type&&Array.isArray(We.data)?M(We.data):void 0}(be);if(Ze)return Ze;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof be[Symbol.toPrimitive])return p.from(be[Symbol.toPrimitive]("string"),Oe,Le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+u(be))}function x(be){if("number"!=typeof be)throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function b(be){return x(be),y(be<0?0:0|D(be))}function M(be){for(var Oe=be.length<0?0:0|D(be.length),Le=y(Oe),Ue=0;Ue<Oe;Ue+=1)Le[Ue]=255&be[Ue];return Le}function m(be,Oe,Le){if(Oe<0||be.byteLength<Oe)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<Oe+(Le||0))throw new RangeError('"length" is outside of buffer bounds');var Ue;return Ue=void 0===Oe&&void 0===Le?new Uint8Array(be):void 0===Le?new Uint8Array(be,Oe):new Uint8Array(be,Oe,Le),Object.setPrototypeOf(Ue,p.prototype),Ue}function D(be){if(be>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return 0|be}function S(be,Oe){if(p.isBuffer(be))return be.length;if(ArrayBuffer.isView(be)||Ae(be,ArrayBuffer))return be.byteLength;if("string"!=typeof be)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+u(be));var Le=be.length,Ue=arguments.length>2&&!0===arguments[2];if(!Ue&&0===Le)return 0;for(var Ze=!1;;)switch(Oe){case"ascii":case"latin1":case"binary":return Le;case"utf8":case"utf-8":return ge(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Le;case"hex":return Le>>>1;case"base64":return me(be).length;default:if(Ze)return Ue?-1:ge(be).length;Oe=(""+Oe).toLowerCase(),Ze=!0}}function O(be,Oe,Le){var Ue=!1;if((void 0===Oe||Oe<0)&&(Oe=0),Oe>this.length||((void 0===Le||Le>this.length)&&(Le=this.length),Le<=0)||(Le>>>=0)<=(Oe>>>=0))return"";for(be||(be="utf8");;)switch(be){case"hex":return ne(this,Oe,Le);case"utf8":case"utf-8":return X(this,Oe,Le);case"ascii":return ue(this,Oe,Le);case"latin1":case"binary":return ae(this,Oe,Le);case"base64":return H(this,Oe,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,Oe,Le);default:if(Ue)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),Ue=!0}}function P(be,Oe,Le){var Ue=be[Oe];be[Oe]=be[Le],be[Le]=Ue}function R(be,Oe,Le,Ue,Ze){if(0===be.length)return-1;if("string"==typeof Le?(Ue=Le,Le=0):Le>2147483647?Le=2147483647:Le<-2147483648&&(Le=-2147483648),Ne(Le=+Le)&&(Le=Ze?0:be.length-1),Le<0&&(Le=be.length+Le),Le>=be.length){if(Ze)return-1;Le=be.length-1}else if(Le<0){if(!Ze)return-1;Le=0}if("string"==typeof Oe&&(Oe=p.from(Oe,Ue)),p.isBuffer(Oe))return 0===Oe.length?-1:F(be,Oe,Le,Ue,Ze);if("number"==typeof Oe)return Oe&=255,"function"==typeof Uint8Array.prototype.indexOf?Ze?Uint8Array.prototype.indexOf.call(be,Oe,Le):Uint8Array.prototype.lastIndexOf.call(be,Oe,Le):F(be,[Oe],Le,Ue,Ze);throw new TypeError("val must be string, number or Buffer")}function F(be,Oe,Le,Ue,Ze){var We,et=1,nt=be.length,ct=Oe.length;if(void 0!==Ue&&("ucs2"===(Ue=String(Ue).toLowerCase())||"ucs-2"===Ue||"utf16le"===Ue||"utf-16le"===Ue)){if(be.length<2||Oe.length<2)return-1;et=2,nt/=2,ct/=2,Le/=2}function yt(vt,mt){return 1===et?vt[mt]:vt.readUInt16BE(mt*et)}if(Ze){var ut=-1;for(We=Le;We<nt;We++)if(yt(be,We)===yt(Oe,-1===ut?0:We-ut)){if(-1===ut&&(ut=We),We-ut+1===ct)return ut*et}else-1!==ut&&(We-=We-ut),ut=-1}else for(Le+ct>nt&&(Le=nt-ct),We=Le;We>=0;We--){for(var Ct=!0,Dt=0;Dt<ct;Dt++)if(yt(be,We+Dt)!==yt(Oe,Dt)){Ct=!1;break}if(Ct)return We}return-1}function B(be,Oe,Le,Ue){Le=Number(Le)||0;var Ze=be.length-Le;Ue?(Ue=Number(Ue))>Ze&&(Ue=Ze):Ue=Ze;var We,et=Oe.length;for(Ue>et/2&&(Ue=et/2),We=0;We<Ue;++We){var nt=parseInt(Oe.substr(2*We,2),16);if(Ne(nt))return We;be[Le+We]=nt}return We}function J(be,Oe,Le,Ue){return ce(ge(Oe,be.length-Le),be,Le,Ue)}function z(be,Oe,Le,Ue){return ce(function(Ze){for(var We=[],et=0;et<Ze.length;++et)We.push(255&Ze.charCodeAt(et));return We}(Oe),be,Le,Ue)}function $(be,Oe,Le,Ue){return ce(me(Oe),be,Le,Ue)}function G(be,Oe,Le,Ue){return ce(function(Ze,We){for(var et,nt,yt=[],ut=0;ut<Ze.length&&!((We-=2)<0);++ut)nt=(et=Ze.charCodeAt(ut))>>8,yt.push(et%256),yt.push(nt);return yt}(Oe,be.length-Le),be,Le,Ue)}function H(be,Oe,Le){return d.fromByteArray(0===Oe&&Le===be.length?be:be.slice(Oe,Le))}function X(be,Oe,Le){Le=Math.min(be.length,Le);for(var Ue=[],Ze=Oe;Ze<Le;){var We=be[Ze],et=null,nt=We>239?4:We>223?3:We>191?2:1;if(Ze+nt<=Le){var ct=void 0,yt=void 0,ut=void 0,Ct=void 0;switch(nt){case 1:We<128&&(et=We);break;case 2:128==(192&(ct=be[Ze+1]))&&(Ct=(31&We)<<6|63&ct)>127&&(et=Ct);break;case 3:yt=be[Ze+2],128==(192&(ct=be[Ze+1]))&&128==(192&yt)&&(Ct=(15&We)<<12|(63&ct)<<6|63&yt)>2047&&(Ct<55296||Ct>57343)&&(et=Ct);break;case 4:yt=be[Ze+2],ut=be[Ze+3],128==(192&(ct=be[Ze+1]))&&128==(192&yt)&&128==(192&ut)&&(Ct=(15&We)<<18|(63&ct)<<12|(63&yt)<<6|63&ut)>65535&&Ct<1114112&&(et=Ct)}}null===et?(et=65533,nt=1):et>65535&&(Ue.push((et-=65536)>>>10&1023|55296),et=56320|1023&et),Ue.push(et),Ze+=nt}return function(Dt){var vt=Dt.length;if(vt<=K)return String.fromCharCode.apply(String,Dt);for(var mt="",Lt=0;Lt<vt;)mt+=String.fromCharCode.apply(String,Dt.slice(Lt,Lt+=K));return mt}(Ue)}(p.TYPED_ARRAY_SUPPORT=function(){try{var be=new Uint8Array(1),Oe={foo:function(){return 42}};return Object.setPrototypeOf(Oe,Uint8Array.prototype),Object.setPrototypeOf(be,Oe),42===be.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(be,Oe,Le){return _(be,Oe,Le)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(be,Oe,Le){return Ze=Oe,We=Le,x(Ue=be),Ue<=0?y(Ue):void 0!==Ze?"string"==typeof We?y(Ue).fill(Ze,We):y(Ue).fill(Ze):y(Ue);var Ue,Ze,We},p.allocUnsafe=function(be){return b(be)},p.allocUnsafeSlow=function(be){return b(be)},p.isBuffer=function(be){return null!=be&&!0===be._isBuffer&&be!==p.prototype},p.compare=function(be,Oe){if(Ae(be,Uint8Array)&&(be=p.from(be,be.offset,be.byteLength)),Ae(Oe,Uint8Array)&&(Oe=p.from(Oe,Oe.offset,Oe.byteLength)),!p.isBuffer(be)||!p.isBuffer(Oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(be===Oe)return 0;for(var Le=be.length,Ue=Oe.length,Ze=0,We=Math.min(Le,Ue);Ze<We;++Ze)if(be[Ze]!==Oe[Ze]){Le=be[Ze],Ue=Oe[Ze];break}return Le<Ue?-1:Ue<Le?1:0},p.isEncoding=function(be){switch(String(be).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(be,Oe){if(!Array.isArray(be))throw new TypeError('"list" argument must be an Array of Buffers');if(0===be.length)return p.alloc(0);var Le;if(void 0===Oe)for(Oe=0,Le=0;Le<be.length;++Le)Oe+=be[Le].length;var Ue=p.allocUnsafe(Oe),Ze=0;for(Le=0;Le<be.length;++Le){var We=be[Le];if(Ae(We,Uint8Array))Ze+We.length>Ue.length?(p.isBuffer(We)||(We=p.from(We)),We.copy(Ue,Ze)):Uint8Array.prototype.set.call(Ue,We,Ze);else{if(!p.isBuffer(We))throw new TypeError('"list" argument must be an Array of Buffers');We.copy(Ue,Ze)}Ze+=We.length}return Ue},p.byteLength=S,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var be=this.length;if(be%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Oe=0;Oe<be;Oe+=2)P(this,Oe,Oe+1);return this},p.prototype.swap32=function(){var be=this.length;if(be%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Oe=0;Oe<be;Oe+=4)P(this,Oe,Oe+3),P(this,Oe+1,Oe+2);return this},p.prototype.swap64=function(){var be=this.length;if(be%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Oe=0;Oe<be;Oe+=8)P(this,Oe,Oe+7),P(this,Oe+1,Oe+6),P(this,Oe+2,Oe+5),P(this,Oe+3,Oe+4);return this},p.prototype.toString=function(){var be=this.length;return 0===be?"":0===arguments.length?X(this,0,be):O.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(be){if(!p.isBuffer(be))throw new TypeError("Argument must be a Buffer");return this===be||0===p.compare(this,be)},p.prototype.inspect=function(){var be="",Oe=c.h2;return be=this.toString("hex",0,Oe).replace(/(.{2})/g,"$1 ").trim(),this.length>Oe&&(be+=" ... "),"<Buffer "+be+">"},h&&(p.prototype[h]=p.prototype.inspect),p.prototype.compare=function(be,Oe,Le,Ue,Ze){if(Ae(be,Uint8Array)&&(be=p.from(be,be.offset,be.byteLength)),!p.isBuffer(be))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+u(be));if(void 0===Oe&&(Oe=0),void 0===Le&&(Le=be?be.length:0),void 0===Ue&&(Ue=0),void 0===Ze&&(Ze=this.length),Oe<0||Le>be.length||Ue<0||Ze>this.length)throw new RangeError("out of range index");if(Ue>=Ze&&Oe>=Le)return 0;if(Ue>=Ze)return-1;if(Oe>=Le)return 1;if(this===be)return 0;for(var We=(Ze>>>=0)-(Ue>>>=0),et=(Le>>>=0)-(Oe>>>=0),nt=Math.min(We,et),ct=this.slice(Ue,Ze),yt=be.slice(Oe,Le),ut=0;ut<nt;++ut)if(ct[ut]!==yt[ut]){We=ct[ut],et=yt[ut];break}return We<et?-1:et<We?1:0},p.prototype.includes=function(be,Oe,Le){return-1!==this.indexOf(be,Oe,Le)},p.prototype.indexOf=function(be,Oe,Le){return R(this,be,Oe,Le,!0)},p.prototype.lastIndexOf=function(be,Oe,Le){return R(this,be,Oe,Le,!1)},p.prototype.write=function(be,Oe,Le,Ue){if(void 0===Oe)Ue="utf8",Le=this.length,Oe=0;else if(void 0===Le&&"string"==typeof Oe)Ue=Oe,Le=this.length,Oe=0;else{if(!isFinite(Oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Oe>>>=0,isFinite(Le)?(Le>>>=0,void 0===Ue&&(Ue="utf8")):(Ue=Le,Le=void 0)}var Ze=this.length-Oe;if((void 0===Le||Le>Ze)&&(Le=Ze),be.length>0&&(Le<0||Oe<0)||Oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ue||(Ue="utf8");for(var We=!1;;)switch(Ue){case"hex":return B(this,be,Oe,Le);case"utf8":case"utf-8":return J(this,be,Oe,Le);case"ascii":case"latin1":case"binary":return z(this,be,Oe,Le);case"base64":return $(this,be,Oe,Le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,be,Oe,Le);default:if(We)throw new TypeError("Unknown encoding: "+Ue);Ue=(""+Ue).toLowerCase(),We=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;function ue(be,Oe,Le){var Ue="";Le=Math.min(be.length,Le);for(var Ze=Oe;Ze<Le;++Ze)Ue+=String.fromCharCode(127&be[Ze]);return Ue}function ae(be,Oe,Le){var Ue="";Le=Math.min(be.length,Le);for(var Ze=Oe;Ze<Le;++Ze)Ue+=String.fromCharCode(be[Ze]);return Ue}function ne(be,Oe,Le){var Ue=be.length;(!Oe||Oe<0)&&(Oe=0),(!Le||Le<0||Le>Ue)&&(Le=Ue);for(var Ze="",We=Oe;We<Le;++We)Ze+=De[be[We]];return Ze}function Q(be,Oe,Le){for(var Ue=be.slice(Oe,Le),Ze="",We=0;We<Ue.length-1;We+=2)Ze+=String.fromCharCode(Ue[We]+256*Ue[We+1]);return Ze}function ie(be,Oe,Le){if(be%1!=0||be<0)throw new RangeError("offset is not uint");if(be+Oe>Le)throw new RangeError("Trying to access beyond buffer length")}function le(be,Oe,Le,Ue,Ze,We){if(!p.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(Oe>Ze||Oe<We)throw new RangeError('"value" argument is out of bounds');if(Le+Ue>be.length)throw new RangeError("Index out of range")}function fe(be,Oe,Le,Ue,Ze){we(Oe,Ue,Ze,be,Le,7);var We=Number(Oe&BigInt(4294967295));be[Le++]=We,be[Le++]=We>>=8,be[Le++]=We>>=8,be[Le++]=We>>=8;var et=Number(Oe>>BigInt(32)&BigInt(4294967295));return be[Le++]=et,be[Le++]=et>>=8,be[Le++]=et>>=8,be[Le++]=et>>=8,Le}function he(be,Oe,Le,Ue,Ze){we(Oe,Ue,Ze,be,Le,7);var We=Number(Oe&BigInt(4294967295));be[Le+7]=We,be[Le+6]=We>>=8,be[Le+5]=We>>=8,be[Le+4]=We>>=8;var et=Number(Oe>>BigInt(32)&BigInt(4294967295));return be[Le+3]=et,be[Le+2]=et>>=8,be[Le+1]=et>>=8,be[Le]=et>>=8,Le+8}function pe(be,Oe,Le,Ue,Ze,We){if(Le+Ue>be.length)throw new RangeError("Index out of range");if(Le<0)throw new RangeError("Index out of range")}function xe(be,Oe,Le,Ue,Ze){return Oe=+Oe,Le>>>=0,Ze||pe(be,0,Le,4),g.write(be,Oe,Le,Ue,23,4),Le+4}function Ee(be,Oe,Le,Ue,Ze){return Oe=+Oe,Le>>>=0,Ze||pe(be,0,Le,8),g.write(be,Oe,Le,Ue,52,8),Le+8}p.prototype.slice=function(be,Oe){var Le=this.length;(be=~~be)<0?(be+=Le)<0&&(be=0):be>Le&&(be=Le),(Oe=void 0===Oe?Le:~~Oe)<0?(Oe+=Le)<0&&(Oe=0):Oe>Le&&(Oe=Le),Oe<be&&(Oe=be);var Ue=this.subarray(be,Oe);return Object.setPrototypeOf(Ue,p.prototype),Ue},p.prototype.readUintLE=p.prototype.readUIntLE=function(be,Oe,Le){be>>>=0,Oe>>>=0,Le||ie(be,Oe,this.length);for(var Ue=this[be],Ze=1,We=0;++We<Oe&&(Ze*=256);)Ue+=this[be+We]*Ze;return Ue},p.prototype.readUintBE=p.prototype.readUIntBE=function(be,Oe,Le){be>>>=0,Oe>>>=0,Le||ie(be,Oe,this.length);for(var Ue=this[be+--Oe],Ze=1;Oe>0&&(Ze*=256);)Ue+=this[be+--Oe]*Ze;return Ue},p.prototype.readUint8=p.prototype.readUInt8=function(be,Oe){return be>>>=0,Oe||ie(be,1,this.length),this[be]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(be,Oe){return be>>>=0,Oe||ie(be,2,this.length),this[be]|this[be+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(be,Oe){return be>>>=0,Oe||ie(be,2,this.length),this[be]<<8|this[be+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),(this[be]|this[be+1]<<8|this[be+2]<<16)+16777216*this[be+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),16777216*this[be]+(this[be+1]<<16|this[be+2]<<8|this[be+3])},p.prototype.readBigUInt64LE=qe(function(be){je(be>>>=0,"offset");var Oe=this[be],Le=this[be+7];void 0!==Oe&&void 0!==Le||Ce(be,this.length-8);var Ue=Oe+this[++be]*Math.pow(2,8)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,24),Ze=this[++be]+this[++be]*Math.pow(2,8)+this[++be]*Math.pow(2,16)+Le*Math.pow(2,24);return BigInt(Ue)+(BigInt(Ze)<<BigInt(32))}),p.prototype.readBigUInt64BE=qe(function(be){je(be>>>=0,"offset");var Oe=this[be],Le=this[be+7];void 0!==Oe&&void 0!==Le||Ce(be,this.length-8);var Ue=Oe*Math.pow(2,24)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,8)+this[++be],Ze=this[++be]*Math.pow(2,24)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,8)+Le;return(BigInt(Ue)<<BigInt(32))+BigInt(Ze)}),p.prototype.readIntLE=function(be,Oe,Le){be>>>=0,Oe>>>=0,Le||ie(be,Oe,this.length);for(var Ue=this[be],Ze=1,We=0;++We<Oe&&(Ze*=256);)Ue+=this[be+We]*Ze;return Ue>=(Ze*=128)&&(Ue-=Math.pow(2,8*Oe)),Ue},p.prototype.readIntBE=function(be,Oe,Le){be>>>=0,Oe>>>=0,Le||ie(be,Oe,this.length);for(var Ue=Oe,Ze=1,We=this[be+--Ue];Ue>0&&(Ze*=256);)We+=this[be+--Ue]*Ze;return We>=(Ze*=128)&&(We-=Math.pow(2,8*Oe)),We},p.prototype.readInt8=function(be,Oe){return be>>>=0,Oe||ie(be,1,this.length),128&this[be]?-1*(255-this[be]+1):this[be]},p.prototype.readInt16LE=function(be,Oe){be>>>=0,Oe||ie(be,2,this.length);var Le=this[be]|this[be+1]<<8;return 32768&Le?4294901760|Le:Le},p.prototype.readInt16BE=function(be,Oe){be>>>=0,Oe||ie(be,2,this.length);var Le=this[be+1]|this[be]<<8;return 32768&Le?4294901760|Le:Le},p.prototype.readInt32LE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),this[be]|this[be+1]<<8|this[be+2]<<16|this[be+3]<<24},p.prototype.readInt32BE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),this[be]<<24|this[be+1]<<16|this[be+2]<<8|this[be+3]},p.prototype.readBigInt64LE=qe(function(be){je(be>>>=0,"offset");var Oe=this[be],Le=this[be+7];void 0!==Oe&&void 0!==Le||Ce(be,this.length-8);var Ue=this[be+4]+this[be+5]*Math.pow(2,8)+this[be+6]*Math.pow(2,16)+(Le<<24);return(BigInt(Ue)<<BigInt(32))+BigInt(Oe+this[++be]*Math.pow(2,8)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,24))}),p.prototype.readBigInt64BE=qe(function(be){je(be>>>=0,"offset");var Oe=this[be],Le=this[be+7];void 0!==Oe&&void 0!==Le||Ce(be,this.length-8);var Ue=(Oe<<24)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,8)+this[++be];return(BigInt(Ue)<<BigInt(32))+BigInt(this[++be]*Math.pow(2,24)+this[++be]*Math.pow(2,16)+this[++be]*Math.pow(2,8)+Le)}),p.prototype.readFloatLE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),g.read(this,be,!0,23,4)},p.prototype.readFloatBE=function(be,Oe){return be>>>=0,Oe||ie(be,4,this.length),g.read(this,be,!1,23,4)},p.prototype.readDoubleLE=function(be,Oe){return be>>>=0,Oe||ie(be,8,this.length),g.read(this,be,!0,52,8)},p.prototype.readDoubleBE=function(be,Oe){return be>>>=0,Oe||ie(be,8,this.length),g.read(this,be,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(be,Oe,Le,Ue){be=+be,Oe>>>=0,Le>>>=0,Ue||le(this,be,Oe,Le,Math.pow(2,8*Le)-1,0);var Ze=1,We=0;for(this[Oe]=255&be;++We<Le&&(Ze*=256);)this[Oe+We]=be/Ze&255;return Oe+Le},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(be,Oe,Le,Ue){be=+be,Oe>>>=0,Le>>>=0,Ue||le(this,be,Oe,Le,Math.pow(2,8*Le)-1,0);var Ze=Le-1,We=1;for(this[Oe+Ze]=255&be;--Ze>=0&&(We*=256);)this[Oe+Ze]=be/We&255;return Oe+Le},p.prototype.writeUint8=p.prototype.writeUInt8=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,1,255,0),this[Oe]=255&be,Oe+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,2,65535,0),this[Oe]=255&be,this[Oe+1]=be>>>8,Oe+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,2,65535,0),this[Oe]=be>>>8,this[Oe+1]=255&be,Oe+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,4,4294967295,0),this[Oe+3]=be>>>24,this[Oe+2]=be>>>16,this[Oe+1]=be>>>8,this[Oe]=255&be,Oe+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,4,4294967295,0),this[Oe]=be>>>24,this[Oe+1]=be>>>16,this[Oe+2]=be>>>8,this[Oe+3]=255&be,Oe+4},p.prototype.writeBigUInt64LE=qe(function(be){return fe(this,be,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=qe(function(be){return he(this,be,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(be,Oe,Le,Ue){if(be=+be,Oe>>>=0,!Ue){var Ze=Math.pow(2,8*Le-1);le(this,be,Oe,Le,Ze-1,-Ze)}var We=0,et=1,nt=0;for(this[Oe]=255&be;++We<Le&&(et*=256);)be<0&&0===nt&&0!==this[Oe+We-1]&&(nt=1),this[Oe+We]=(be/et>>0)-nt&255;return Oe+Le},p.prototype.writeIntBE=function(be,Oe,Le,Ue){if(be=+be,Oe>>>=0,!Ue){var Ze=Math.pow(2,8*Le-1);le(this,be,Oe,Le,Ze-1,-Ze)}var We=Le-1,et=1,nt=0;for(this[Oe+We]=255&be;--We>=0&&(et*=256);)be<0&&0===nt&&0!==this[Oe+We+1]&&(nt=1),this[Oe+We]=(be/et>>0)-nt&255;return Oe+Le},p.prototype.writeInt8=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,1,127,-128),be<0&&(be=255+be+1),this[Oe]=255&be,Oe+1},p.prototype.writeInt16LE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,2,32767,-32768),this[Oe]=255&be,this[Oe+1]=be>>>8,Oe+2},p.prototype.writeInt16BE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,2,32767,-32768),this[Oe]=be>>>8,this[Oe+1]=255&be,Oe+2},p.prototype.writeInt32LE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,4,2147483647,-2147483648),this[Oe]=255&be,this[Oe+1]=be>>>8,this[Oe+2]=be>>>16,this[Oe+3]=be>>>24,Oe+4},p.prototype.writeInt32BE=function(be,Oe,Le){return be=+be,Oe>>>=0,Le||le(this,be,Oe,4,2147483647,-2147483648),be<0&&(be=4294967295+be+1),this[Oe]=be>>>24,this[Oe+1]=be>>>16,this[Oe+2]=be>>>8,this[Oe+3]=255&be,Oe+4},p.prototype.writeBigInt64LE=qe(function(be){return fe(this,be,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=qe(function(be){return he(this,be,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(be,Oe,Le){return xe(this,be,Oe,!0,Le)},p.prototype.writeFloatBE=function(be,Oe,Le){return xe(this,be,Oe,!1,Le)},p.prototype.writeDoubleLE=function(be,Oe,Le){return Ee(this,be,Oe,!0,Le)},p.prototype.writeDoubleBE=function(be,Oe,Le){return Ee(this,be,Oe,!1,Le)},p.prototype.copy=function(be,Oe,Le,Ue){if(!p.isBuffer(be))throw new TypeError("argument should be a Buffer");if(Le||(Le=0),Ue||0===Ue||(Ue=this.length),Oe>=be.length&&(Oe=be.length),Oe||(Oe=0),Ue>0&&Ue<Le&&(Ue=Le),Ue===Le||0===be.length||0===this.length)return 0;if(Oe<0)throw new RangeError("targetStart out of bounds");if(Le<0||Le>=this.length)throw new RangeError("Index out of range");if(Ue<0)throw new RangeError("sourceEnd out of bounds");Ue>this.length&&(Ue=this.length),be.length-Oe<Ue-Le&&(Ue=be.length-Oe+Le);var Ze=Ue-Le;return this===be&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Oe,Le,Ue):Uint8Array.prototype.set.call(be,this.subarray(Le,Ue),Oe),Ze},p.prototype.fill=function(be,Oe,Le,Ue){if("string"==typeof be){if("string"==typeof Oe?(Ue=Oe,Oe=0,Le=this.length):"string"==typeof Le&&(Ue=Le,Le=this.length),void 0!==Ue&&"string"!=typeof Ue)throw new TypeError("encoding must be a string");if("string"==typeof Ue&&!p.isEncoding(Ue))throw new TypeError("Unknown encoding: "+Ue);if(1===be.length){var Ze=be.charCodeAt(0);("utf8"===Ue&&Ze<128||"latin1"===Ue)&&(be=Ze)}}else"number"==typeof be?be&=255:"boolean"==typeof be&&(be=Number(be));if(Oe<0||this.length<Oe||this.length<Le)throw new RangeError("Out of range index");if(Le<=Oe)return this;var We;if(Oe>>>=0,Le=void 0===Le?this.length:Le>>>0,be||(be=0),"number"==typeof be)for(We=Oe;We<Le;++We)this[We]=be;else{var et=p.isBuffer(be)?be:p.from(be,Ue),nt=et.length;if(0===nt)throw new TypeError('The value "'+be+'" is invalid for argument "value"');for(We=0;We<Le-Oe;++We)this[We+Oe]=et[We%nt]}return this};var Re={};function ke(be,Oe,Le){Re[be]=function(Ue){!function(ut,Ct){if("function"!=typeof Ct&&null!==Ct)throw new TypeError("Super expression must either be null or a function");ut.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:ut,writable:!0,configurable:!0}}),Object.defineProperty(ut,"prototype",{writable:!1}),Ct&&a(ut,Ct)}(yt,Ue);var Ze,We,et,nt,ct=(et=yt,nt=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ut,Ct=l(et);if(nt){var Dt=l(this).constructor;ut=Reflect.construct(Ct,arguments,Dt)}else ut=Ct.apply(this,arguments);return function(vt,mt){if(mt&&("object"===u(mt)||"function"==typeof mt))return mt;if(void 0!==mt)throw new TypeError("Derived constructors may only return object or undefined");return o(vt)}(this,ut)});function yt(){var ut;return function(Ct,Dt){if(!(Ct instanceof Dt))throw new TypeError("Cannot call a class as a function")}(this,yt),ut=ct.call(this),Object.defineProperty(o(ut),"message",{value:Oe.apply(o(ut),arguments),writable:!0,configurable:!0}),ut.name="".concat(ut.name," [").concat(be,"]"),delete ut.name,ut}return Ze=yt,(We=[{key:"code",get:function(){return be},set:function(ut){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ut,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(be,"]: ").concat(this.message)}}])&&function s(be,Oe){for(var Le=0;Le<Oe.length;Le++){var Ue=Oe[Le];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(be,Ue.key,Ue)}}(Ze.prototype,We),Object.defineProperty(Ze,"prototype",{writable:!1}),yt}(Le)}function Te(be){for(var Oe="",Le=be.length,Ue="-"===be[0]?1:0;Le>=Ue+4;Le-=3)Oe="_".concat(be.slice(Le-3,Le)).concat(Oe);return"".concat(be.slice(0,Le)).concat(Oe)}function we(be,Oe,Le,Ue,Ze,We){if(be>Le||be<Oe){var et,nt="bigint"==typeof Oe?"n":"";throw et=We>3?0===Oe||Oe===BigInt(0)?">= 0".concat(nt," and < 2").concat(nt," ** ").concat(8*(We+1)).concat(nt):">= -(2".concat(nt," ** ").concat(8*(We+1)-1).concat(nt,") and < 2 ** ")+"".concat(8*(We+1)-1).concat(nt):">= ".concat(Oe).concat(nt," and <= ").concat(Le).concat(nt),new Re.ERR_OUT_OF_RANGE("value",et,be)}var ct,yt,ut;ct=Ue,ut=We,je(yt=Ze,"offset"),void 0!==ct[yt]&&void 0!==ct[yt+ut]||Ce(yt,ct.length-(ut+1))}function je(be,Oe){if("number"!=typeof be)throw new Re.ERR_INVALID_ARG_TYPE(Oe,"number",be)}function Ce(be,Oe,Le){throw Math.floor(be)!==be?(je(be,Le),new Re.ERR_OUT_OF_RANGE(Le||"offset","an integer",be)):Oe<0?new Re.ERR_BUFFER_OUT_OF_BOUNDS:new Re.ERR_OUT_OF_RANGE(Le||"offset",">= ".concat(Le?1:0," and <= ").concat(Oe),be)}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?"".concat(be," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(be,Oe){return'The "'.concat(be,'" argument must be of type number. Received type ').concat(u(Oe))},TypeError),ke("ERR_OUT_OF_RANGE",function(be,Oe,Le){var Ue='The value of "'.concat(be,'" is out of range.'),Ze=Le;return Number.isInteger(Le)&&Math.abs(Le)>Math.pow(2,32)?Ze=Te(String(Le)):"bigint"==typeof Le&&(Ze=String(Le),(Le>Math.pow(BigInt(2),BigInt(32))||Le<-Math.pow(BigInt(2),BigInt(32)))&&(Ze=Te(Ze)),Ze+="n"),Ue+" It must be ".concat(Oe,". Received ").concat(Ze)},RangeError);var Ie=/[^+/0-9A-Za-z-_]/g;function ge(be,Oe){var Le;Oe=Oe||1/0;for(var Ue=be.length,Ze=null,We=[],et=0;et<Ue;++et){if((Le=be.charCodeAt(et))>55295&&Le<57344){if(!Ze){if(Le>56319){(Oe-=3)>-1&&We.push(239,191,189);continue}if(et+1===Ue){(Oe-=3)>-1&&We.push(239,191,189);continue}Ze=Le;continue}if(Le<56320){(Oe-=3)>-1&&We.push(239,191,189),Ze=Le;continue}Le=65536+(Ze-55296<<10|Le-56320)}else Ze&&(Oe-=3)>-1&&We.push(239,191,189);if(Ze=null,Le<128){if((Oe-=1)<0)break;We.push(Le)}else if(Le<2048){if((Oe-=2)<0)break;We.push(Le>>6|192,63&Le|128)}else if(Le<65536){if((Oe-=3)<0)break;We.push(Le>>12|224,Le>>6&63|128,63&Le|128)}else{if(!(Le<1114112))throw new Error("Invalid code point");if((Oe-=4)<0)break;We.push(Le>>18|240,Le>>12&63|128,Le>>6&63|128,63&Le|128)}}return We}function me(be){return d.toByteArray(function(Oe){if((Oe=(Oe=Oe.split("=")[0]).trim().replace(Ie,"")).length<2)return"";for(;Oe.length%4!=0;)Oe+="=";return Oe}(be))}function ce(be,Oe,Le,Ue){var Ze;for(Ze=0;Ze<Ue&&!(Ze+Le>=Oe.length||Ze>=be.length);++Ze)Oe[Ze+Le]=be[Ze];return Ze}function Ae(be,Oe){return be instanceof Oe||null!=be&&null!=be.constructor&&null!=be.constructor.name&&be.constructor.name===Oe.name}function Ne(be){return be!=be}var De=function(){for(var be="0123456789abcdef",Oe=new Array(256),Le=0;Le<16;++Le)for(var Ue=16*Le,Ze=0;Ze<16;++Ze)Oe[Ue+Ze]=be[Le]+be[Ze];return Oe}();function qe(be){return typeof BigInt>"u"?Ke:be}function Ke(){throw new Error("BigInt not supported")}},2321:function(v){"use strict";v.exports=a,v.exports.isMobile=a,v.exports.default=a;var c=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,s=/android|ipad|playbook|silk/i;function a(o){o||(o={});var l=o.ua;if(l||typeof navigator>"u"||(l=navigator.userAgent),l&&l.headers&&"string"==typeof l.headers["user-agent"]&&(l=l.headers["user-agent"]),"string"!=typeof l)return!1;var u=c.test(l)&&!i.test(l)||!!o.tablet&&s.test(l);return!u&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==l.indexOf("Macintosh")&&-1!==l.indexOf("Safari")&&(u=!0),u}},3910:function(v,c){"use strict";c.byteLength=function(g){var h=u(g),y=h[1];return 3*(h[0]+y)/4-y},c.toByteArray=function(g){var h,w,S,y=u(g),p=y[0],_=y[1],x=new a(3*(p+(S=_))/4-S),b=0,M=_>0?p-4:p;for(w=0;w<M;w+=4)h=s[g.charCodeAt(w)]<<18|s[g.charCodeAt(w+1)]<<12|s[g.charCodeAt(w+2)]<<6|s[g.charCodeAt(w+3)],x[b++]=h>>16&255,x[b++]=h>>8&255,x[b++]=255&h;return 2===_&&(h=s[g.charCodeAt(w)]<<2|s[g.charCodeAt(w+1)]>>4,x[b++]=255&h),1===_&&(h=s[g.charCodeAt(w)]<<10|s[g.charCodeAt(w+1)]<<4|s[g.charCodeAt(w+2)]>>2,x[b++]=h>>8&255,x[b++]=255&h),x},c.fromByteArray=function(g){for(var h,w=g.length,y=w%3,p=[],_=16383,x=0,b=w-y;x<b;x+=_)p.push(d(g,x,x+_>b?b:x+_));return 1===y?p.push(i[(h=g[w-1])>>2]+i[h<<4&63]+"=="):2===y&&p.push(i[(h=(g[w-2]<<8)+g[w-1])>>10]+i[h>>4&63]+i[h<<2&63]+"="),p.join("")};for(var i=[],s=[],a=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)i[l]=o[l],s[o.charCodeAt(l)]=l;function u(g){var h=g.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=g.indexOf("=");return-1===w&&(w=h),[w,w===h?0:4-w%4]}function d(g,h,w){for(var p,_=[],x=h;x<w;x+=3)_.push(i[(p=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(255&g[x+2]))>>18&63]+i[p>>12&63]+i[p>>6&63]+i[63&p]);return _.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},3187:function(v,c){c.read=function(i,s,a,o,l){var u,d,g=8*l-o-1,h=(1<<g)-1,w=h>>1,y=-7,p=a?l-1:0,_=a?-1:1,x=i[s+p];for(p+=_,u=x&(1<<-y)-1,x>>=-y,y+=g;y>0;u=256*u+i[s+p],p+=_,y-=8);for(d=u&(1<<-y)-1,u>>=-y,y+=o;y>0;d=256*d+i[s+p],p+=_,y-=8);if(0===u)u=1-w;else{if(u===h)return d?NaN:1/0*(x?-1:1);d+=Math.pow(2,o),u-=w}return(x?-1:1)*d*Math.pow(2,u-o)},c.write=function(i,s,a,o,l,u){var d,g,h,w=8*u-l-1,y=(1<<w)-1,p=y>>1,_=23===l?Math.pow(2,-24)-Math.pow(2,-77):0,x=o?0:u-1,b=o?1:-1,M=s<0||0===s&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(g=isNaN(s)?1:0,d=y):(d=Math.floor(Math.log(s)/Math.LN2),s*(h=Math.pow(2,-d))<1&&(d--,h*=2),(s+=d+p>=1?_/h:_*Math.pow(2,1-p))*h>=2&&(d++,h/=2),d+p>=y?(g=0,d=y):d+p>=1?(g=(s*h-1)*Math.pow(2,l),d+=p):(g=s*Math.pow(2,p-1)*Math.pow(2,l),d=0));l>=8;i[a+x]=255&g,x+=b,g/=256,l-=8);for(d=d<<l|g,w+=l;w>0;i[a+x]=255&d,x+=b,d/=256,w-=8);i[a+x-b]|=128*M}},1152:function(v,c,i){"use strict";v.exports=function(d){var g=(d=d||{}).eye||[0,0,1],h=d.center||[0,0,0],w=d.up||[0,1,0],y=d.distanceLimits||[0,1/0],p=d.mode||"turntable",_=s(),x=a(),b=o();return _.setDistanceLimits(y[0],y[1]),_.lookAt(0,g,h,w),x.setDistanceLimits(y[0],y[1]),x.lookAt(0,g,h,w),b.setDistanceLimits(y[0],y[1]),b.lookAt(0,g,h,w),new l({turntable:_,orbit:x,matrix:b},p)};var s=i(3440),a=i(7774),o=i(9298);function l(d,g){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(h){return d[h]}),this._mode=g,this._active=d[g],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var u=l.prototype;u.flush=function(d){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].flush(d)},u.idle=function(d){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].idle(d)},u.lookAt=function(d,g,h,w){for(var y=this._controllerList,p=0;p<y.length;++p)y[p].lookAt(d,g,h,w)},u.rotate=function(d,g,h,w){for(var y=this._controllerList,p=0;p<y.length;++p)y[p].rotate(d,g,h,w)},u.pan=function(d,g,h,w){for(var y=this._controllerList,p=0;p<y.length;++p)y[p].pan(d,g,h,w)},u.translate=function(d,g,h,w){for(var y=this._controllerList,p=0;p<y.length;++p)y[p].translate(d,g,h,w)},u.setMatrix=function(d,g){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].setMatrix(d,g)},u.setDistanceLimits=function(d,g){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].setDistanceLimits(d,g)},u.setDistance=function(d,g){for(var h=this._controllerList,w=0;w<h.length;++w)h[w].setDistance(d,g)},u.recalcMatrix=function(d){this._active.recalcMatrix(d)},u.getDistance=function(d){return this._active.getDistance(d)},u.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},u.lastT=function(){return this._active.lastT()},u.setMode=function(d){if(d!==this._mode){var g=this._controllerNames.indexOf(d);if(!(g<0)){var h=this._active,w=this._controllerList[g],y=Math.max(h.lastT(),w.lastT());h.recalcMatrix(y),w.setMatrix(y,h.computedMatrix),this._active=w,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},u.getMode=function(){return this._mode}},8126:function(v,c,i){"use strict";var s=typeof WeakMap>"u"?i(5346):WeakMap,a=i(5827),o=i(2944),l=new s;v.exports=function(u){var d=l.get(u),g=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!g||!u.isBuffer(g)){var h=a(u,new Float32Array([-1,-1,-1,4,4,-1]));(d=o(u,[{buffer:h,type:u.FLOAT,size:2}]))._triangleBuffer=h,l.set(u,d)}d.bind(),u.drawArrays(u.TRIANGLES,0,3),d.unbind()}},8008:function(v,c,i){var s=i(4930);v.exports=function(a,o,l){o="number"==typeof o?o:1,l=l||": ";var u=a.split(/\r?\n/),d=String(u.length+o-1).length;return u.map(function(g,h){var w=h+o,y=String(w).length;return s(w,d-y)+l+g}).join("\n")}},2153:function(v,c,i){"use strict";v.exports=function(o){var l=o.length;if(0===l)return[];if(1===l)return[0];for(var u=o[0].length,d=[o[0]],g=[0],h=1;h<l;++h)if(d.push(o[h]),a(d,u)){if(g.push(h),g.length===u+1)return g}else d.pop();return g};var s=i(417);function a(o,l){for(var u=new Array(l+1),d=0;d<o.length;++d)u[d]=o[d];for(d=0;d<=o.length;++d){for(var g=o.length;g<=l;++g){for(var h=new Array(l),w=0;w<l;++w)h[w]=Math.pow(g+1-d,w);u[g]=h}if(s.apply(void 0,u))return!0}return!1}},4653:function(v,c,i){"use strict";v.exports=function(o,l){return s(l).filter(function(u){for(var d=new Array(u.length),g=0;g<u.length;++g)d[g]=l[u[g]];return a(d)*o<1})};var s=i(4419),a=i(1778)},2350:function(v,c,i){v.exports=function(o,l){return a(s(o,l))};var s=i(4653),a=i(8691)},7896:function(v){v.exports=function(c){return atob(c)}},957:function(v,c,i){"use strict";v.exports=function(o,l){for(var u=l.length,d=new Array(u+1),g=0;g<u;++g){for(var h=new Array(u+1),w=0;w<=u;++w)h[w]=o[w][g];d[g]=h}for(d[u]=new Array(u+1),g=0;g<=u;++g)d[u][g]=1;var y=new Array(u+1);for(g=0;g<u;++g)y[g]=l[g];y[u]=1;var p=s(d,y),_=a(p[u+1]);0===_&&(_=1);var x=new Array(u+1);for(g=0;g<=u;++g)x[g]=a(p[g])/_;return x};var s=i(6606);function a(o){for(var l=0,u=0;u<o.length;++u)l+=o[u];return l}},1539:function(v,c,i){"use strict";var s=i(8524);v.exports=function(a,o){return s(a[0].mul(o[1]).add(o[0].mul(a[1])),a[1].mul(o[1]))}},8846:function(v){"use strict";v.exports=function(c,i){return c[0].mul(i[1]).cmp(i[0].mul(c[1]))}},9189:function(v,c,i){"use strict";var s=i(8524);v.exports=function(a,o){return s(a[0].mul(o[1]),a[1].mul(o[0]))}},5125:function(v,c,i){"use strict";var s=i(234),a=i(3218),o=i(5514),l=i(2813),u=i(8524),d=i(9189);v.exports=function g(h,w){if(s(h))return w?d(h,g(w)):[h[0].clone(),h[1].clone()];var y,p,_=0;if(a(h))y=h.clone();else if("string"==typeof h)y=l(h);else{if(0===h)return[o(0),o(1)];if(h===Math.floor(h))y=o(h);else{for(;h!==Math.floor(h);)h*=Math.pow(2,256),_-=256;y=o(h)}}if(s(w))y.mul(w[1]),p=w[0].clone();else if(a(w))p=w.clone();else if("string"==typeof w)p=l(w);else if(w)if(w===Math.floor(w))p=o(w);else{for(;w!==Math.floor(w);)w*=Math.pow(2,256),_+=256;p=o(w)}else p=o(1);return _>0?y=y.ushln(_):_<0&&(p=p.ushln(-_)),u(y,p)}},234:function(v,c,i){"use strict";var s=i(3218);v.exports=function(a){return Array.isArray(a)&&2===a.length&&s(a[0])&&s(a[1])}},4275:function(v,c,i){"use strict";var s=i(1928);v.exports=function(a){return a.cmp(new s(0))}},9958:function(v,c,i){"use strict";var s=i(4275);v.exports=function(a){var o=a.length,l=a.words,u=0;if(1===o)u=l[0];else if(2===o)u=l[0]+67108864*l[1];else for(var d=0;d<o;d++)u+=l[d]*Math.pow(67108864,d);return s(a)*u}},1112:function(v,c,i){"use strict";var s=i(8362),a=i(2288).countTrailingZeros;v.exports=function(o){var l=a(s.lo(o));if(l<32)return l;var u=a(s.hi(o));return u>20?52:u+32}},3218:function(v,c,i){"use strict";i(1928),v.exports=function(s){return s&&"object"==typeof s&&!!s.words}},5514:function(v,c,i){"use strict";var s=i(1928),a=i(8362);v.exports=function(o){var l=a.exponent(o);return l<52?new s(o):new s(o*Math.pow(2,52-l)).ushln(l-52)}},8524:function(v,c,i){"use strict";var s=i(5514),a=i(4275);v.exports=function(o,l){var u=a(o),d=a(l);if(0===u)return[s(0),s(1)];if(0===d)return[s(0),s(0)];d<0&&(o=o.neg(),l=l.neg());var g=o.gcd(l);return g.cmpn(1)?[o.div(g),l.div(g)]:[o,l]}},2813:function(v,c,i){"use strict";var s=i(1928);v.exports=function(a){return new s(a)}},3962:function(v,c,i){"use strict";var s=i(8524);v.exports=function(a,o){return s(a[0].mul(o[0]),a[1].mul(o[1]))}},4951:function(v,c,i){"use strict";var s=i(4275);v.exports=function(a){return s(a[0])*s(a[1])}},4354:function(v,c,i){"use strict";var s=i(8524);v.exports=function(a,o){return s(a[0].mul(o[1]).sub(a[1].mul(o[0])),a[1].mul(o[1]))}},7999:function(v,c,i){"use strict";var s=i(9958),a=i(1112);v.exports=function(o){var l=o[0],u=o[1];if(0===l.cmpn(0))return 0;var d=l.abs().divmod(u.abs()),h=s(d.div),w=d.mod,y=l.negative!==u.negative?-1:1;if(0===w.cmpn(0))return y*h;if(h){var p=a(h)+4;return y*(h+(x=s(w.ushln(p).divRound(u)))*Math.pow(2,-p))}var _=u.bitLength()-w.bitLength()+53,x=s(w.ushln(_).divRound(u));return _<1023?y*x*Math.pow(2,-_):y*(x*=Math.pow(2,-1023))*Math.pow(2,1023-_)}},5070:function(v){"use strict";function c(u,d,g,h,w){for(var y=w+1;h<=w;){var p=h+w>>>1,_=u[p];(void 0!==g?g(_,d):_-d)>=0?(y=p,w=p-1):h=p+1}return y}function i(u,d,g,h,w){for(var y=w+1;h<=w;){var p=h+w>>>1,_=u[p];(void 0!==g?g(_,d):_-d)>0?(y=p,w=p-1):h=p+1}return y}function s(u,d,g,h,w){for(var y=h-1;h<=w;){var p=h+w>>>1,_=u[p];(void 0!==g?g(_,d):_-d)<0?(y=p,h=p+1):w=p-1}return y}function a(u,d,g,h,w){for(var y=h-1;h<=w;){var p=h+w>>>1,_=u[p];(void 0!==g?g(_,d):_-d)<=0?(y=p,h=p+1):w=p-1}return y}function o(u,d,g,h,w){for(;h<=w;){var y=h+w>>>1,p=u[y],_=void 0!==g?g(p,d):p-d;if(0===_)return y;_<=0?h=y+1:w=y-1}return-1}function l(u,d,g,h,w,y){return"function"==typeof g?y(u,d,g,void 0===h?0:0|h,void 0===w?u.length-1:0|w):y(u,d,void 0,void 0===g?0:0|g,void 0===h?u.length-1:0|h)}v.exports={ge:function(u,d,g,h,w){return l(u,d,g,h,w,c)},gt:function(u,d,g,h,w){return l(u,d,g,h,w,i)},lt:function(u,d,g,h,w){return l(u,d,g,h,w,s)},le:function(u,d,g,h,w){return l(u,d,g,h,w,a)},eq:function(u,d,g,h,w){return l(u,d,g,h,w,o)}}},2288:function(v,c){"use strict";function i(a){var o=32;return(a&=-a)&&o--,65535&a&&(o-=16),16711935&a&&(o-=8),252645135&a&&(o-=4),858993459&a&&(o-=2),1431655765&a&&(o-=1),o}c.INT_BITS=32,c.INT_MAX=2147483647,c.INT_MIN=-2147483648,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var o=a>>31;return(a^o)-o},c.min=function(a,o){return o^(a^o)&-(a<o)},c.max=function(a,o){return a^(a^o)&-(a<o)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var o,l;return o=(a>65535)<<4,o|=l=((a>>>=o)>255)<<3,o|=l=((a>>>=l)>15)<<2,(o|=l=((a>>>=l)>3)<<1)|(a>>>=l)>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},c.countTrailingZeros=i,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var s=new Array(256);(function(a){for(var o=0;o<256;++o){var l=o,u=o,d=7;for(l>>>=1;l;l>>>=1)u<<=1,u|=1&l,--d;a[o]=u<<d&255}})(s),c.reverse=function(a){return s[255&a]<<24|s[a>>>8&255]<<16|s[a>>>16&255]<<8|s[a>>>24&255]},c.interleave2=function(a,o){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},c.deinterleave2=function(a,o){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>o&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},c.interleave3=function(a,o,l){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},c.deinterleave3=function(a,o){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>o&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},c.nextCombination=function(a){var o=a|a-1;return o+1|(~o&-~o)-1>>>i(a)+1}},1928:function(v,c,i){!function(s,a){"use strict";function o(z,$){if(!z)throw new Error($||"Assertion failed")}function l(z,$){z.super_=$;var G=function(){};G.prototype=$.prototype,z.prototype=new G,z.prototype.constructor=z}function u(z,$,G){if(u.isBN(z))return z;this.negative=0,this.words=null,this.length=0,this.red=null,null!==z&&("le"!==$&&"be"!==$||(G=$,$=10),this._init(z||0,$||10,G||"be"))}var d;"object"==typeof s?s.exports=u:a.BN=u,u.BN=u,u.wordSize=26;try{d=typeof window<"u"&&void 0!==window.Buffer?window.Buffer:i(6601).Buffer}catch{}function g(z,$){var G=z.charCodeAt($);return G>=65&&G<=70?G-55:G>=97&&G<=102?G-87:G-48&15}function h(z,$,G){var H=g(z,G);return G-1>=$&&(H|=g(z,G-1)<<4),H}function w(z,$,G,H){for(var X=0,K=Math.min(z.length,G),ue=$;ue<K;ue++){var ae=z.charCodeAt(ue)-48;X*=H,X+=ae>=49?ae-49+10:ae>=17?ae-17+10:ae}return X}u.isBN=function(z){return z instanceof u||null!==z&&"object"==typeof z&&z.constructor.wordSize===u.wordSize&&Array.isArray(z.words)},u.max=function(z,$){return z.cmp($)>0?z:$},u.min=function(z,$){return z.cmp($)<0?z:$},u.prototype._init=function(z,$,G){if("number"==typeof z)return this._initNumber(z,$,G);if("object"==typeof z)return this._initArray(z,$,G);"hex"===$&&($=16),o($===(0|$)&&$>=2&&$<=36);var H=0;"-"===(z=z.toString().replace(/\s+/g,""))[0]&&(H++,this.negative=1),H<z.length&&(16===$?this._parseHex(z,H,G):(this._parseBase(z,$,H),"le"===G&&this._initArray(this.toArray(),$,G)))},u.prototype._initNumber=function(z,$,G){z<0&&(this.negative=1,z=-z),z<67108864?(this.words=[67108863&z],this.length=1):z<4503599627370496?(this.words=[67108863&z,z/67108864&67108863],this.length=2):(o(z<9007199254740992),this.words=[67108863&z,z/67108864&67108863,1],this.length=3),"le"===G&&this._initArray(this.toArray(),$,G)},u.prototype._initArray=function(z,$,G){if(o("number"==typeof z.length),z.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(z.length/3),this.words=new Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var X,K,ue=0;if("be"===G)for(H=z.length-1,X=0;H>=0;H-=3)this.words[X]|=(K=z[H]|z[H-1]<<8|z[H-2]<<16)<<ue&67108863,this.words[X+1]=K>>>26-ue&67108863,(ue+=24)>=26&&(ue-=26,X++);else if("le"===G)for(H=0,X=0;H<z.length;H+=3)this.words[X]|=(K=z[H]|z[H+1]<<8|z[H+2]<<16)<<ue&67108863,this.words[X+1]=K>>>26-ue&67108863,(ue+=24)>=26&&(ue-=26,X++);return this.strip()},u.prototype._parseHex=function(z,$,G){this.length=Math.ceil((z.length-$)/6),this.words=new Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var X,K=0,ue=0;if("be"===G)for(H=z.length-1;H>=$;H-=2)X=h(z,$,H)<<K,this.words[ue]|=67108863&X,K>=18?(K-=18,this.words[ue+=1]|=X>>>26):K+=8;else for(H=(z.length-$)%2==0?$+1:$;H<z.length;H+=2)X=h(z,$,H)<<K,this.words[ue]|=67108863&X,K>=18?(K-=18,this.words[ue+=1]|=X>>>26):K+=8;this.strip()},u.prototype._parseBase=function(z,$,G){this.words=[0],this.length=1;for(var H=0,X=1;X<=67108863;X*=$)H++;H--,X=X/$|0;for(var K=z.length-G,ue=K%H,ae=Math.min(K,K-ue)+G,ne=0,Q=G;Q<ae;Q+=H)ne=w(z,Q,Q+H,$),this.imuln(X),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne);if(0!==ue){var ie=1;for(ne=w(z,Q,z.length,$),Q=0;Q<ue;Q++)ie*=$;this.imuln(ie),this.words[0]+ne<67108864?this.words[0]+=ne:this._iaddn(ne)}this.strip()},u.prototype.copy=function(z){z.words=new Array(this.length);for(var $=0;$<this.length;$++)z.words[$]=this.words[$];z.length=this.length,z.negative=this.negative,z.red=this.red},u.prototype.clone=function(){var z=new u(null);return this.copy(z),z},u.prototype._expand=function(z){for(;this.length<z;)this.words[this.length++]=0;return this},u.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},u.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},u.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function x(z,$,G){G.negative=$.negative^z.negative;var H=z.length+$.length|0;G.length=H,H=H-1|0;var X=0|z.words[0],K=0|$.words[0],ue=X*K,ne=ue/67108864|0;G.words[0]=67108863&ue;for(var Q=1;Q<H;Q++){for(var ie=ne>>>26,le=67108863&ne,fe=Math.min(Q,$.length-1),he=Math.max(0,Q-z.length+1);he<=fe;he++)ie+=(ue=(X=0|z.words[Q-he|0])*(K=0|$.words[he])+le)/67108864|0,le=67108863&ue;G.words[Q]=0|le,ne=0|ie}return 0!==ne?G.words[Q]=0|ne:G.length--,G.strip()}u.prototype.toString=function(z,$){var G;if($=0|$||1,16===(z=z||10)||"hex"===z){G="";for(var H=0,X=0,K=0;K<this.length;K++){var ue=this.words[K],ae=(16777215&(ue<<H|X)).toString(16);G=0!=(X=ue>>>24-H&16777215)||K!==this.length-1?y[6-ae.length]+ae+G:ae+G,(H+=2)>=26&&(H-=26,K--)}for(0!==X&&(G=X.toString(16)+G);G.length%$!=0;)G="0"+G;return 0!==this.negative&&(G="-"+G),G}if(z===(0|z)&&z>=2&&z<=36){var ne=p[z],Q=_[z];G="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var le=ie.modn(Q).toString(z);G=(ie=ie.idivn(Q)).isZero()?le+G:y[ne-le.length]+le+G}for(this.isZero()&&(G="0"+G);G.length%$!=0;)G="0"+G;return 0!==this.negative&&(G="-"+G),G}o(!1,"Base should be between 2 and 36")},u.prototype.toNumber=function(){var z=this.words[0];return 2===this.length?z+=67108864*this.words[1]:3===this.length&&1===this.words[2]?z+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-z:z},u.prototype.toJSON=function(){return this.toString(16)},u.prototype.toBuffer=function(z,$){return o(void 0!==d),this.toArrayLike(d,z,$)},u.prototype.toArray=function(z,$){return this.toArrayLike(Array,z,$)},u.prototype.toArrayLike=function(z,$,G){var H=this.byteLength(),X=G||Math.max(1,H);o(H<=X,"byte array longer than desired length"),o(X>0,"Requested array length <= 0"),this.strip();var K,ue,ae="le"===$,ne=new z(X),Q=this.clone();if(ae){for(ue=0;!Q.isZero();ue++)K=Q.andln(255),Q.iushrn(8),ne[ue]=K;for(;ue<X;ue++)ne[ue]=0}else{for(ue=0;ue<X-H;ue++)ne[ue]=0;for(ue=0;!Q.isZero();ue++)K=Q.andln(255),Q.iushrn(8),ne[X-ue-1]=K}return ne},u.prototype._countBits=Math.clz32?function(z){return 32-Math.clz32(z)}:function(z){var $=z,G=0;return $>=4096&&(G+=13,$>>>=13),$>=64&&(G+=7,$>>>=7),$>=8&&(G+=4,$>>>=4),$>=2&&(G+=2,$>>>=2),G+$},u.prototype._zeroBits=function(z){if(0===z)return 26;var $=z,G=0;return!(8191&$)&&(G+=13,$>>>=13),!(127&$)&&(G+=7,$>>>=7),!(15&$)&&(G+=4,$>>>=4),!(3&$)&&(G+=2,$>>>=2),!(1&$)&&G++,G},u.prototype.bitLength=function(){var $=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+$},u.prototype.zeroBits=function(){if(this.isZero())return 0;for(var z=0,$=0;$<this.length;$++){var G=this._zeroBits(this.words[$]);if(z+=G,26!==G)break}return z},u.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},u.prototype.toTwos=function(z){return 0!==this.negative?this.abs().inotn(z).iaddn(1):this.clone()},u.prototype.fromTwos=function(z){return this.testn(z-1)?this.notn(z).iaddn(1).ineg():this.clone()},u.prototype.isNeg=function(){return 0!==this.negative},u.prototype.neg=function(){return this.clone().ineg()},u.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},u.prototype.iuor=function(z){for(;this.length<z.length;)this.words[this.length++]=0;for(var $=0;$<z.length;$++)this.words[$]=this.words[$]|z.words[$];return this.strip()},u.prototype.ior=function(z){return o(0==(this.negative|z.negative)),this.iuor(z)},u.prototype.or=function(z){return this.length>z.length?this.clone().ior(z):z.clone().ior(this)},u.prototype.uor=function(z){return this.length>z.length?this.clone().iuor(z):z.clone().iuor(this)},u.prototype.iuand=function(z){var $;$=this.length>z.length?z:this;for(var G=0;G<$.length;G++)this.words[G]=this.words[G]&z.words[G];return this.length=$.length,this.strip()},u.prototype.iand=function(z){return o(0==(this.negative|z.negative)),this.iuand(z)},u.prototype.and=function(z){return this.length>z.length?this.clone().iand(z):z.clone().iand(this)},u.prototype.uand=function(z){return this.length>z.length?this.clone().iuand(z):z.clone().iuand(this)},u.prototype.iuxor=function(z){var $,G;this.length>z.length?($=this,G=z):($=z,G=this);for(var H=0;H<G.length;H++)this.words[H]=$.words[H]^G.words[H];if(this!==$)for(;H<$.length;H++)this.words[H]=$.words[H];return this.length=$.length,this.strip()},u.prototype.ixor=function(z){return o(0==(this.negative|z.negative)),this.iuxor(z)},u.prototype.xor=function(z){return this.length>z.length?this.clone().ixor(z):z.clone().ixor(this)},u.prototype.uxor=function(z){return this.length>z.length?this.clone().iuxor(z):z.clone().iuxor(this)},u.prototype.inotn=function(z){o("number"==typeof z&&z>=0);var $=0|Math.ceil(z/26),G=z%26;this._expand($),G>0&&$--;for(var H=0;H<$;H++)this.words[H]=67108863&~this.words[H];return G>0&&(this.words[H]=~this.words[H]&67108863>>26-G),this.strip()},u.prototype.notn=function(z){return this.clone().inotn(z)},u.prototype.setn=function(z,$){o("number"==typeof z&&z>=0);var G=z/26|0,H=z%26;return this._expand(G+1),this.words[G]=$?this.words[G]|1<<H:this.words[G]&~(1<<H),this.strip()},u.prototype.iadd=function(z){var $,G,H;if(0!==this.negative&&0===z.negative)return this.negative=0,$=this.isub(z),this.negative^=1,this._normSign();if(0===this.negative&&0!==z.negative)return z.negative=0,$=this.isub(z),z.negative=1,$._normSign();this.length>z.length?(G=this,H=z):(G=z,H=this);for(var X=0,K=0;K<H.length;K++)this.words[K]=67108863&($=(0|G.words[K])+(0|H.words[K])+X),X=$>>>26;for(;0!==X&&K<G.length;K++)this.words[K]=67108863&($=(0|G.words[K])+X),X=$>>>26;if(this.length=G.length,0!==X)this.words[this.length]=X,this.length++;else if(G!==this)for(;K<G.length;K++)this.words[K]=G.words[K];return this},u.prototype.add=function(z){var $;return 0!==z.negative&&0===this.negative?(z.negative=0,$=this.sub(z),z.negative^=1,$):0===z.negative&&0!==this.negative?(this.negative=0,$=z.sub(this),this.negative=1,$):this.length>z.length?this.clone().iadd(z):z.clone().iadd(this)},u.prototype.isub=function(z){if(0!==z.negative){z.negative=0;var $=this.iadd(z);return z.negative=1,$._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(z),this.negative=1,this._normSign();var G,H,X=this.cmp(z);if(0===X)return this.negative=0,this.length=1,this.words[0]=0,this;X>0?(G=this,H=z):(G=z,H=this);for(var K=0,ue=0;ue<H.length;ue++)K=($=(0|G.words[ue])-(0|H.words[ue])+K)>>26,this.words[ue]=67108863&$;for(;0!==K&&ue<G.length;ue++)K=($=(0|G.words[ue])+K)>>26,this.words[ue]=67108863&$;if(0===K&&ue<G.length&&G!==this)for(;ue<G.length;ue++)this.words[ue]=G.words[ue];return this.length=Math.max(this.length,ue),G!==this&&(this.negative=1),this.strip()},u.prototype.sub=function(z){return this.clone().isub(z)};var b=function(z,$,G){var H,X,K,ue=z.words,ae=$.words,ne=G.words,Q=0,ie=0|ue[0],le=8191&ie,fe=ie>>>13,he=0|ue[1],pe=8191&he,xe=he>>>13,Ee=0|ue[2],Re=8191&Ee,ke=Ee>>>13,Te=0|ue[3],we=8191&Te,je=Te>>>13,Ce=0|ue[4],Ie=8191&Ce,ge=Ce>>>13,me=0|ue[5],ce=8191&me,Ae=me>>>13,Ne=0|ue[6],De=8191&Ne,qe=Ne>>>13,Ke=0|ue[7],be=8191&Ke,Oe=Ke>>>13,Le=0|ue[8],Ue=8191&Le,Ze=Le>>>13,We=0|ue[9],et=8191&We,nt=We>>>13,ct=0|ae[0],yt=8191&ct,ut=ct>>>13,Ct=0|ae[1],Dt=8191&Ct,vt=Ct>>>13,mt=0|ae[2],Lt=8191&mt,Ft=mt>>>13,Rt=0|ae[3],Wt=8191&Rt,Ht=Rt>>>13,it=0|ae[4],st=8191&it,Je=it>>>13,ot=0|ae[5],pt=8191&ot,xt=ot>>>13,He=0|ae[6],Ge=8191&He,dt=He>>>13,ht=0|ae[7],kt=8191&ht,St=ht>>>13,Et=0|ae[8],wt=8191&Et,Nt=Et>>>13,_t=0|ae[9],Mt=8191&_t,Pt=_t>>>13;G.negative=z.negative^$.negative,G.length=19;var Zt=(Q+(H=Math.imul(le,yt))|0)+((8191&(X=(X=Math.imul(le,ut))+Math.imul(fe,yt)|0))<<13)|0;Q=((K=Math.imul(fe,ut))+(X>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,H=Math.imul(pe,yt),X=(X=Math.imul(pe,ut))+Math.imul(xe,yt)|0,K=Math.imul(xe,ut);var $t=(Q+(H=H+Math.imul(le,Dt)|0)|0)+((8191&(X=(X=X+Math.imul(le,vt)|0)+Math.imul(fe,Dt)|0))<<13)|0;Q=((K=K+Math.imul(fe,vt)|0)+(X>>>13)|0)+($t>>>26)|0,$t&=67108863,H=Math.imul(Re,yt),X=(X=Math.imul(Re,ut))+Math.imul(ke,yt)|0,K=Math.imul(ke,ut),H=H+Math.imul(pe,Dt)|0,X=(X=X+Math.imul(pe,vt)|0)+Math.imul(xe,Dt)|0,K=K+Math.imul(xe,vt)|0;var Xt=(Q+(H=H+Math.imul(le,Lt)|0)|0)+((8191&(X=(X=X+Math.imul(le,Ft)|0)+Math.imul(fe,Lt)|0))<<13)|0;Q=((K=K+Math.imul(fe,Ft)|0)+(X>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,H=Math.imul(we,yt),X=(X=Math.imul(we,ut))+Math.imul(je,yt)|0,K=Math.imul(je,ut),H=H+Math.imul(Re,Dt)|0,X=(X=X+Math.imul(Re,vt)|0)+Math.imul(ke,Dt)|0,K=K+Math.imul(ke,vt)|0,H=H+Math.imul(pe,Lt)|0,X=(X=X+Math.imul(pe,Ft)|0)+Math.imul(xe,Lt)|0,K=K+Math.imul(xe,Ft)|0;var dn=(Q+(H=H+Math.imul(le,Wt)|0)|0)+((8191&(X=(X=X+Math.imul(le,Ht)|0)+Math.imul(fe,Wt)|0))<<13)|0;Q=((K=K+Math.imul(fe,Ht)|0)+(X>>>13)|0)+(dn>>>26)|0,dn&=67108863,H=Math.imul(Ie,yt),X=(X=Math.imul(Ie,ut))+Math.imul(ge,yt)|0,K=Math.imul(ge,ut),H=H+Math.imul(we,Dt)|0,X=(X=X+Math.imul(we,vt)|0)+Math.imul(je,Dt)|0,K=K+Math.imul(je,vt)|0,H=H+Math.imul(Re,Lt)|0,X=(X=X+Math.imul(Re,Ft)|0)+Math.imul(ke,Lt)|0,K=K+Math.imul(ke,Ft)|0,H=H+Math.imul(pe,Wt)|0,X=(X=X+Math.imul(pe,Ht)|0)+Math.imul(xe,Wt)|0,K=K+Math.imul(xe,Ht)|0;var on=(Q+(H=H+Math.imul(le,st)|0)|0)+((8191&(X=(X=X+Math.imul(le,Je)|0)+Math.imul(fe,st)|0))<<13)|0;Q=((K=K+Math.imul(fe,Je)|0)+(X>>>13)|0)+(on>>>26)|0,on&=67108863,H=Math.imul(ce,yt),X=(X=Math.imul(ce,ut))+Math.imul(Ae,yt)|0,K=Math.imul(Ae,ut),H=H+Math.imul(Ie,Dt)|0,X=(X=X+Math.imul(Ie,vt)|0)+Math.imul(ge,Dt)|0,K=K+Math.imul(ge,vt)|0,H=H+Math.imul(we,Lt)|0,X=(X=X+Math.imul(we,Ft)|0)+Math.imul(je,Lt)|0,K=K+Math.imul(je,Ft)|0,H=H+Math.imul(Re,Wt)|0,X=(X=X+Math.imul(Re,Ht)|0)+Math.imul(ke,Wt)|0,K=K+Math.imul(ke,Ht)|0,H=H+Math.imul(pe,st)|0,X=(X=X+Math.imul(pe,Je)|0)+Math.imul(xe,st)|0,K=K+Math.imul(xe,Je)|0;var cn=(Q+(H=H+Math.imul(le,pt)|0)|0)+((8191&(X=(X=X+Math.imul(le,xt)|0)+Math.imul(fe,pt)|0))<<13)|0;Q=((K=K+Math.imul(fe,xt)|0)+(X>>>13)|0)+(cn>>>26)|0,cn&=67108863,H=Math.imul(De,yt),X=(X=Math.imul(De,ut))+Math.imul(qe,yt)|0,K=Math.imul(qe,ut),H=H+Math.imul(ce,Dt)|0,X=(X=X+Math.imul(ce,vt)|0)+Math.imul(Ae,Dt)|0,K=K+Math.imul(Ae,vt)|0,H=H+Math.imul(Ie,Lt)|0,X=(X=X+Math.imul(Ie,Ft)|0)+Math.imul(ge,Lt)|0,K=K+Math.imul(ge,Ft)|0,H=H+Math.imul(we,Wt)|0,X=(X=X+Math.imul(we,Ht)|0)+Math.imul(je,Wt)|0,K=K+Math.imul(je,Ht)|0,H=H+Math.imul(Re,st)|0,X=(X=X+Math.imul(Re,Je)|0)+Math.imul(ke,st)|0,K=K+Math.imul(ke,Je)|0,H=H+Math.imul(pe,pt)|0,X=(X=X+Math.imul(pe,xt)|0)+Math.imul(xe,pt)|0,K=K+Math.imul(xe,xt)|0;var tn=(Q+(H=H+Math.imul(le,Ge)|0)|0)+((8191&(X=(X=X+Math.imul(le,dt)|0)+Math.imul(fe,Ge)|0))<<13)|0;Q=((K=K+Math.imul(fe,dt)|0)+(X>>>13)|0)+(tn>>>26)|0,tn&=67108863,H=Math.imul(be,yt),X=(X=Math.imul(be,ut))+Math.imul(Oe,yt)|0,K=Math.imul(Oe,ut),H=H+Math.imul(De,Dt)|0,X=(X=X+Math.imul(De,vt)|0)+Math.imul(qe,Dt)|0,K=K+Math.imul(qe,vt)|0,H=H+Math.imul(ce,Lt)|0,X=(X=X+Math.imul(ce,Ft)|0)+Math.imul(Ae,Lt)|0,K=K+Math.imul(Ae,Ft)|0,H=H+Math.imul(Ie,Wt)|0,X=(X=X+Math.imul(Ie,Ht)|0)+Math.imul(ge,Wt)|0,K=K+Math.imul(ge,Ht)|0,H=H+Math.imul(we,st)|0,X=(X=X+Math.imul(we,Je)|0)+Math.imul(je,st)|0,K=K+Math.imul(je,Je)|0,H=H+Math.imul(Re,pt)|0,X=(X=X+Math.imul(Re,xt)|0)+Math.imul(ke,pt)|0,K=K+Math.imul(ke,xt)|0,H=H+Math.imul(pe,Ge)|0,X=(X=X+Math.imul(pe,dt)|0)+Math.imul(xe,Ge)|0,K=K+Math.imul(xe,dt)|0;var Cn=(Q+(H=H+Math.imul(le,kt)|0)|0)+((8191&(X=(X=X+Math.imul(le,St)|0)+Math.imul(fe,kt)|0))<<13)|0;Q=((K=K+Math.imul(fe,St)|0)+(X>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,H=Math.imul(Ue,yt),X=(X=Math.imul(Ue,ut))+Math.imul(Ze,yt)|0,K=Math.imul(Ze,ut),H=H+Math.imul(be,Dt)|0,X=(X=X+Math.imul(be,vt)|0)+Math.imul(Oe,Dt)|0,K=K+Math.imul(Oe,vt)|0,H=H+Math.imul(De,Lt)|0,X=(X=X+Math.imul(De,Ft)|0)+Math.imul(qe,Lt)|0,K=K+Math.imul(qe,Ft)|0,H=H+Math.imul(ce,Wt)|0,X=(X=X+Math.imul(ce,Ht)|0)+Math.imul(Ae,Wt)|0,K=K+Math.imul(Ae,Ht)|0,H=H+Math.imul(Ie,st)|0,X=(X=X+Math.imul(Ie,Je)|0)+Math.imul(ge,st)|0,K=K+Math.imul(ge,Je)|0,H=H+Math.imul(we,pt)|0,X=(X=X+Math.imul(we,xt)|0)+Math.imul(je,pt)|0,K=K+Math.imul(je,xt)|0,H=H+Math.imul(Re,Ge)|0,X=(X=X+Math.imul(Re,dt)|0)+Math.imul(ke,Ge)|0,K=K+Math.imul(ke,dt)|0,H=H+Math.imul(pe,kt)|0,X=(X=X+Math.imul(pe,St)|0)+Math.imul(xe,kt)|0,K=K+Math.imul(xe,St)|0;var Fn=(Q+(H=H+Math.imul(le,wt)|0)|0)+((8191&(X=(X=X+Math.imul(le,Nt)|0)+Math.imul(fe,wt)|0))<<13)|0;Q=((K=K+Math.imul(fe,Nt)|0)+(X>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,H=Math.imul(et,yt),X=(X=Math.imul(et,ut))+Math.imul(nt,yt)|0,K=Math.imul(nt,ut),H=H+Math.imul(Ue,Dt)|0,X=(X=X+Math.imul(Ue,vt)|0)+Math.imul(Ze,Dt)|0,K=K+Math.imul(Ze,vt)|0,H=H+Math.imul(be,Lt)|0,X=(X=X+Math.imul(be,Ft)|0)+Math.imul(Oe,Lt)|0,K=K+Math.imul(Oe,Ft)|0,H=H+Math.imul(De,Wt)|0,X=(X=X+Math.imul(De,Ht)|0)+Math.imul(qe,Wt)|0,K=K+Math.imul(qe,Ht)|0,H=H+Math.imul(ce,st)|0,X=(X=X+Math.imul(ce,Je)|0)+Math.imul(Ae,st)|0,K=K+Math.imul(Ae,Je)|0,H=H+Math.imul(Ie,pt)|0,X=(X=X+Math.imul(Ie,xt)|0)+Math.imul(ge,pt)|0,K=K+Math.imul(ge,xt)|0,H=H+Math.imul(we,Ge)|0,X=(X=X+Math.imul(we,dt)|0)+Math.imul(je,Ge)|0,K=K+Math.imul(je,dt)|0,H=H+Math.imul(Re,kt)|0,X=(X=X+Math.imul(Re,St)|0)+Math.imul(ke,kt)|0,K=K+Math.imul(ke,St)|0,H=H+Math.imul(pe,wt)|0,X=(X=X+Math.imul(pe,Nt)|0)+Math.imul(xe,wt)|0,K=K+Math.imul(xe,Nt)|0;var En=(Q+(H=H+Math.imul(le,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(le,Pt)|0)+Math.imul(fe,Mt)|0))<<13)|0;Q=((K=K+Math.imul(fe,Pt)|0)+(X>>>13)|0)+(En>>>26)|0,En&=67108863,H=Math.imul(et,Dt),X=(X=Math.imul(et,vt))+Math.imul(nt,Dt)|0,K=Math.imul(nt,vt),H=H+Math.imul(Ue,Lt)|0,X=(X=X+Math.imul(Ue,Ft)|0)+Math.imul(Ze,Lt)|0,K=K+Math.imul(Ze,Ft)|0,H=H+Math.imul(be,Wt)|0,X=(X=X+Math.imul(be,Ht)|0)+Math.imul(Oe,Wt)|0,K=K+Math.imul(Oe,Ht)|0,H=H+Math.imul(De,st)|0,X=(X=X+Math.imul(De,Je)|0)+Math.imul(qe,st)|0,K=K+Math.imul(qe,Je)|0,H=H+Math.imul(ce,pt)|0,X=(X=X+Math.imul(ce,xt)|0)+Math.imul(Ae,pt)|0,K=K+Math.imul(Ae,xt)|0,H=H+Math.imul(Ie,Ge)|0,X=(X=X+Math.imul(Ie,dt)|0)+Math.imul(ge,Ge)|0,K=K+Math.imul(ge,dt)|0,H=H+Math.imul(we,kt)|0,X=(X=X+Math.imul(we,St)|0)+Math.imul(je,kt)|0,K=K+Math.imul(je,St)|0,H=H+Math.imul(Re,wt)|0,X=(X=X+Math.imul(Re,Nt)|0)+Math.imul(ke,wt)|0,K=K+Math.imul(ke,Nt)|0;var rn=(Q+(H=H+Math.imul(pe,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(pe,Pt)|0)+Math.imul(xe,Mt)|0))<<13)|0;Q=((K=K+Math.imul(xe,Pt)|0)+(X>>>13)|0)+(rn>>>26)|0,rn&=67108863,H=Math.imul(et,Lt),X=(X=Math.imul(et,Ft))+Math.imul(nt,Lt)|0,K=Math.imul(nt,Ft),H=H+Math.imul(Ue,Wt)|0,X=(X=X+Math.imul(Ue,Ht)|0)+Math.imul(Ze,Wt)|0,K=K+Math.imul(Ze,Ht)|0,H=H+Math.imul(be,st)|0,X=(X=X+Math.imul(be,Je)|0)+Math.imul(Oe,st)|0,K=K+Math.imul(Oe,Je)|0,H=H+Math.imul(De,pt)|0,X=(X=X+Math.imul(De,xt)|0)+Math.imul(qe,pt)|0,K=K+Math.imul(qe,xt)|0,H=H+Math.imul(ce,Ge)|0,X=(X=X+Math.imul(ce,dt)|0)+Math.imul(Ae,Ge)|0,K=K+Math.imul(Ae,dt)|0,H=H+Math.imul(Ie,kt)|0,X=(X=X+Math.imul(Ie,St)|0)+Math.imul(ge,kt)|0,K=K+Math.imul(ge,St)|0,H=H+Math.imul(we,wt)|0,X=(X=X+Math.imul(we,Nt)|0)+Math.imul(je,wt)|0,K=K+Math.imul(je,Nt)|0;var yn=(Q+(H=H+Math.imul(Re,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(Re,Pt)|0)+Math.imul(ke,Mt)|0))<<13)|0;Q=((K=K+Math.imul(ke,Pt)|0)+(X>>>13)|0)+(yn>>>26)|0,yn&=67108863,H=Math.imul(et,Wt),X=(X=Math.imul(et,Ht))+Math.imul(nt,Wt)|0,K=Math.imul(nt,Ht),H=H+Math.imul(Ue,st)|0,X=(X=X+Math.imul(Ue,Je)|0)+Math.imul(Ze,st)|0,K=K+Math.imul(Ze,Je)|0,H=H+Math.imul(be,pt)|0,X=(X=X+Math.imul(be,xt)|0)+Math.imul(Oe,pt)|0,K=K+Math.imul(Oe,xt)|0,H=H+Math.imul(De,Ge)|0,X=(X=X+Math.imul(De,dt)|0)+Math.imul(qe,Ge)|0,K=K+Math.imul(qe,dt)|0,H=H+Math.imul(ce,kt)|0,X=(X=X+Math.imul(ce,St)|0)+Math.imul(Ae,kt)|0,K=K+Math.imul(Ae,St)|0,H=H+Math.imul(Ie,wt)|0,X=(X=X+Math.imul(Ie,Nt)|0)+Math.imul(ge,wt)|0,K=K+Math.imul(ge,Nt)|0;var pn=(Q+(H=H+Math.imul(we,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(we,Pt)|0)+Math.imul(je,Mt)|0))<<13)|0;Q=((K=K+Math.imul(je,Pt)|0)+(X>>>13)|0)+(pn>>>26)|0,pn&=67108863,H=Math.imul(et,st),X=(X=Math.imul(et,Je))+Math.imul(nt,st)|0,K=Math.imul(nt,Je),H=H+Math.imul(Ue,pt)|0,X=(X=X+Math.imul(Ue,xt)|0)+Math.imul(Ze,pt)|0,K=K+Math.imul(Ze,xt)|0,H=H+Math.imul(be,Ge)|0,X=(X=X+Math.imul(be,dt)|0)+Math.imul(Oe,Ge)|0,K=K+Math.imul(Oe,dt)|0,H=H+Math.imul(De,kt)|0,X=(X=X+Math.imul(De,St)|0)+Math.imul(qe,kt)|0,K=K+Math.imul(qe,St)|0,H=H+Math.imul(ce,wt)|0,X=(X=X+Math.imul(ce,Nt)|0)+Math.imul(Ae,wt)|0,K=K+Math.imul(Ae,Nt)|0;var bn=(Q+(H=H+Math.imul(Ie,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(Ie,Pt)|0)+Math.imul(ge,Mt)|0))<<13)|0;Q=((K=K+Math.imul(ge,Pt)|0)+(X>>>13)|0)+(bn>>>26)|0,bn&=67108863,H=Math.imul(et,pt),X=(X=Math.imul(et,xt))+Math.imul(nt,pt)|0,K=Math.imul(nt,xt),H=H+Math.imul(Ue,Ge)|0,X=(X=X+Math.imul(Ue,dt)|0)+Math.imul(Ze,Ge)|0,K=K+Math.imul(Ze,dt)|0,H=H+Math.imul(be,kt)|0,X=(X=X+Math.imul(be,St)|0)+Math.imul(Oe,kt)|0,K=K+Math.imul(Oe,St)|0,H=H+Math.imul(De,wt)|0,X=(X=X+Math.imul(De,Nt)|0)+Math.imul(qe,wt)|0,K=K+Math.imul(qe,Nt)|0;var In=(Q+(H=H+Math.imul(ce,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(ce,Pt)|0)+Math.imul(Ae,Mt)|0))<<13)|0;Q=((K=K+Math.imul(Ae,Pt)|0)+(X>>>13)|0)+(In>>>26)|0,In&=67108863,H=Math.imul(et,Ge),X=(X=Math.imul(et,dt))+Math.imul(nt,Ge)|0,K=Math.imul(nt,dt),H=H+Math.imul(Ue,kt)|0,X=(X=X+Math.imul(Ue,St)|0)+Math.imul(Ze,kt)|0,K=K+Math.imul(Ze,St)|0,H=H+Math.imul(be,wt)|0,X=(X=X+Math.imul(be,Nt)|0)+Math.imul(Oe,wt)|0,K=K+Math.imul(Oe,Nt)|0;var _n=(Q+(H=H+Math.imul(De,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(De,Pt)|0)+Math.imul(qe,Mt)|0))<<13)|0;Q=((K=K+Math.imul(qe,Pt)|0)+(X>>>13)|0)+(_n>>>26)|0,_n&=67108863,H=Math.imul(et,kt),X=(X=Math.imul(et,St))+Math.imul(nt,kt)|0,K=Math.imul(nt,St),H=H+Math.imul(Ue,wt)|0,X=(X=X+Math.imul(Ue,Nt)|0)+Math.imul(Ze,wt)|0,K=K+Math.imul(Ze,Nt)|0;var qn=(Q+(H=H+Math.imul(be,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(be,Pt)|0)+Math.imul(Oe,Mt)|0))<<13)|0;Q=((K=K+Math.imul(Oe,Pt)|0)+(X>>>13)|0)+(qn>>>26)|0,qn&=67108863,H=Math.imul(et,wt),X=(X=Math.imul(et,Nt))+Math.imul(nt,wt)|0,K=Math.imul(nt,Nt);var Wn=(Q+(H=H+Math.imul(Ue,Mt)|0)|0)+((8191&(X=(X=X+Math.imul(Ue,Pt)|0)+Math.imul(Ze,Mt)|0))<<13)|0;Q=((K=K+Math.imul(Ze,Pt)|0)+(X>>>13)|0)+(Wn>>>26)|0,Wn&=67108863;var Nn=(Q+(H=Math.imul(et,Mt))|0)+((8191&(X=(X=Math.imul(et,Pt))+Math.imul(nt,Mt)|0))<<13)|0;return Q=((K=Math.imul(nt,Pt))+(X>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,ne[0]=Zt,ne[1]=$t,ne[2]=Xt,ne[3]=dn,ne[4]=on,ne[5]=cn,ne[6]=tn,ne[7]=Cn,ne[8]=Fn,ne[9]=En,ne[10]=rn,ne[11]=yn,ne[12]=pn,ne[13]=bn,ne[14]=In,ne[15]=_n,ne[16]=qn,ne[17]=Wn,ne[18]=Nn,0!==Q&&(ne[19]=Q,G.length++),G};function M(z,$,G){return(new m).mulp(z,$,G)}function m(z,$){this.x=z,this.y=$}Math.imul||(b=x),u.prototype.mulTo=function(z,$){var H=this.length+z.length;return 10===this.length&&10===z.length?b(this,z,$):H<63?x(this,z,$):H<1024?function(X,K,ue){ue.negative=K.negative^X.negative,ue.length=X.length+K.length;for(var ae=0,ne=0,Q=0;Q<ue.length-1;Q++){var ie=ne;ne=0;for(var le=67108863&ae,fe=Math.min(Q,K.length-1),he=Math.max(0,Q-X.length+1);he<=fe;he++){var xe=(0|X.words[Q-he])*(0|K.words[he]),Ee=67108863&xe;le=67108863&(Ee=Ee+le|0),ne+=(ie=(ie=ie+(xe/67108864|0)|0)+(Ee>>>26)|0)>>>26,ie&=67108863}ue.words[Q]=le,ae=ie,ie=ne}return 0!==ae?ue.words[Q]=ae:ue.length--,ue.strip()}(this,z,$):M(this,z,$)},m.prototype.makeRBT=function(z){for(var $=new Array(z),G=u.prototype._countBits(z)-1,H=0;H<z;H++)$[H]=this.revBin(H,G,z);return $},m.prototype.revBin=function(z,$,G){if(0===z||z===G-1)return z;for(var H=0,X=0;X<$;X++)H|=(1&z)<<$-X-1,z>>=1;return H},m.prototype.permute=function(z,$,G,H,X,K){for(var ue=0;ue<K;ue++)H[ue]=$[z[ue]],X[ue]=G[z[ue]]},m.prototype.transform=function(z,$,G,H,X,K){this.permute(K,z,$,G,H,X);for(var ue=1;ue<X;ue<<=1)for(var ae=ue<<1,ne=Math.cos(2*Math.PI/ae),Q=Math.sin(2*Math.PI/ae),ie=0;ie<X;ie+=ae)for(var le=ne,fe=Q,he=0;he<ue;he++){var pe=G[ie+he],xe=H[ie+he],Ee=G[ie+he+ue],Re=H[ie+he+ue],ke=le*Ee-fe*Re;Re=le*Re+fe*Ee,G[ie+he]=pe+(Ee=ke),H[ie+he]=xe+Re,G[ie+he+ue]=pe-Ee,H[ie+he+ue]=xe-Re,he!==ae&&(ke=ne*le-Q*fe,fe=ne*fe+Q*le,le=ke)}},m.prototype.guessLen13b=function(z,$){var G=1|Math.max($,z),H=1&G,X=0;for(G=G/2|0;G;G>>>=1)X++;return 1<<X+1+H},m.prototype.conjugate=function(z,$,G){if(!(G<=1))for(var H=0;H<G/2;H++){var X=z[H];z[H]=z[G-H-1],z[G-H-1]=X,X=$[H],$[H]=-$[G-H-1],$[G-H-1]=-X}},m.prototype.normalize13b=function(z,$){for(var G=0,H=0;H<$/2;H++){var X=8192*Math.round(z[2*H+1]/$)+Math.round(z[2*H]/$)+G;z[H]=67108863&X,G=X<67108864?0:X/67108864|0}return z},m.prototype.convert13b=function(z,$,G,H){for(var X=0,K=0;K<$;K++)G[2*K]=8191&(X+=0|z[K]),G[2*K+1]=8191&(X>>>=13),X>>>=13;for(K=2*$;K<H;++K)G[K]=0;o(0===X),o(0==(-8192&X))},m.prototype.stub=function(z){for(var $=new Array(z),G=0;G<z;G++)$[G]=0;return $},m.prototype.mulp=function(z,$,G){var H=2*this.guessLen13b(z.length,$.length),X=this.makeRBT(H),K=this.stub(H),ue=new Array(H),ae=new Array(H),ne=new Array(H),Q=new Array(H),ie=new Array(H),le=new Array(H),fe=G.words;fe.length=H,this.convert13b(z.words,z.length,ue,H),this.convert13b($.words,$.length,Q,H),this.transform(ue,K,ae,ne,H,X),this.transform(Q,K,ie,le,H,X);for(var he=0;he<H;he++){var pe=ae[he]*ie[he]-ne[he]*le[he];ne[he]=ae[he]*le[he]+ne[he]*ie[he],ae[he]=pe}return this.conjugate(ae,ne,H),this.transform(ae,ne,fe,K,H,X),this.conjugate(fe,K,H),this.normalize13b(fe,H),G.negative=z.negative^$.negative,G.length=z.length+$.length,G.strip()},u.prototype.mul=function(z){var $=new u(null);return $.words=new Array(this.length+z.length),this.mulTo(z,$)},u.prototype.mulf=function(z){var $=new u(null);return $.words=new Array(this.length+z.length),M(this,z,$)},u.prototype.imul=function(z){return this.clone().mulTo(z,this)},u.prototype.imuln=function(z){o("number"==typeof z),o(z<67108864);for(var $=0,G=0;G<this.length;G++){var H=(0|this.words[G])*z,X=(67108863&H)+(67108863&$);$>>=26,$+=H/67108864|0,$+=X>>>26,this.words[G]=67108863&X}return 0!==$&&(this.words[G]=$,this.length++),this},u.prototype.muln=function(z){return this.clone().imuln(z)},u.prototype.sqr=function(){return this.mul(this)},u.prototype.isqr=function(){return this.imul(this.clone())},u.prototype.pow=function(z){var $=function(K){for(var ue=new Array(K.bitLength()),ae=0;ae<ue.length;ae++){var Q=ae%26;ue[ae]=(K.words[ae/26|0]&1<<Q)>>>Q}return ue}(z);if(0===$.length)return new u(1);for(var G=this,H=0;H<$.length&&0===$[H];H++,G=G.sqr());if(++H<$.length)for(var X=G.sqr();H<$.length;H++,X=X.sqr())0!==$[H]&&(G=G.mul(X));return G},u.prototype.iushln=function(z){o("number"==typeof z&&z>=0);var $,G=z%26,H=(z-G)/26,X=67108863>>>26-G<<26-G;if(0!==G){var K=0;for($=0;$<this.length;$++){var ue=this.words[$]&X;this.words[$]=(0|this.words[$])-ue<<G|K,K=ue>>>26-G}K&&(this.words[$]=K,this.length++)}if(0!==H){for($=this.length-1;$>=0;$--)this.words[$+H]=this.words[$];for($=0;$<H;$++)this.words[$]=0;this.length+=H}return this.strip()},u.prototype.ishln=function(z){return o(0===this.negative),this.iushln(z)},u.prototype.iushrn=function(z,$,G){var H;o("number"==typeof z&&z>=0),H=$?($-$%26)/26:0;var X=z%26,K=Math.min((z-X)/26,this.length),ue=67108863^67108863>>>X<<X,ae=G;if(H-=K,H=Math.max(0,H),ae){for(var ne=0;ne<K;ne++)ae.words[ne]=this.words[ne];ae.length=K}if(0!==K)if(this.length>K)for(this.length-=K,ne=0;ne<this.length;ne++)this.words[ne]=this.words[ne+K];else this.words[0]=0,this.length=1;var Q=0;for(ne=this.length-1;ne>=0&&(0!==Q||ne>=H);ne--){var ie=0|this.words[ne];this.words[ne]=Q<<26-X|ie>>>X,Q=ie&ue}return ae&&0!==Q&&(ae.words[ae.length++]=Q),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},u.prototype.ishrn=function(z,$,G){return o(0===this.negative),this.iushrn(z,$,G)},u.prototype.shln=function(z){return this.clone().ishln(z)},u.prototype.ushln=function(z){return this.clone().iushln(z)},u.prototype.shrn=function(z){return this.clone().ishrn(z)},u.prototype.ushrn=function(z){return this.clone().iushrn(z)},u.prototype.testn=function(z){o("number"==typeof z&&z>=0);var $=z%26,G=(z-$)/26;return!(this.length<=G||!(this.words[G]&1<<$))},u.prototype.imaskn=function(z){o("number"==typeof z&&z>=0);var $=z%26,G=(z-$)/26;return o(0===this.negative,"imaskn works only with positive numbers"),this.length<=G?this:(0!==$&&G++,this.length=Math.min(G,this.length),0!==$&&(this.words[this.length-1]&=67108863^67108863>>>$<<$),this.strip())},u.prototype.maskn=function(z){return this.clone().imaskn(z)},u.prototype.iaddn=function(z){return o("number"==typeof z),o(z<67108864),z<0?this.isubn(-z):0!==this.negative?1===this.length&&(0|this.words[0])<z?(this.words[0]=z-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(z),this.negative=1,this):this._iaddn(z)},u.prototype._iaddn=function(z){this.words[0]+=z;for(var $=0;$<this.length&&this.words[$]>=67108864;$++)this.words[$]-=67108864,$===this.length-1?this.words[$+1]=1:this.words[$+1]++;return this.length=Math.max(this.length,$+1),this},u.prototype.isubn=function(z){if(o("number"==typeof z),o(z<67108864),z<0)return this.iaddn(-z);if(0!==this.negative)return this.negative=0,this.iaddn(z),this.negative=1,this;if(this.words[0]-=z,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var $=0;$<this.length&&this.words[$]<0;$++)this.words[$]+=67108864,this.words[$+1]-=1;return this.strip()},u.prototype.addn=function(z){return this.clone().iaddn(z)},u.prototype.subn=function(z){return this.clone().isubn(z)},u.prototype.iabs=function(){return this.negative=0,this},u.prototype.abs=function(){return this.clone().iabs()},u.prototype._ishlnsubmul=function(z,$,G){var H,X;this._expand(z.length+G);var ue=0;for(H=0;H<z.length;H++){X=(0|this.words[H+G])+ue;var ae=(0|z.words[H])*$;ue=((X-=67108863&ae)>>26)-(ae/67108864|0),this.words[H+G]=67108863&X}for(;H<this.length-G;H++)ue=(X=(0|this.words[H+G])+ue)>>26,this.words[H+G]=67108863&X;if(0===ue)return this.strip();for(o(-1===ue),ue=0,H=0;H<this.length;H++)ue=(X=-(0|this.words[H])+ue)>>26,this.words[H]=67108863&X;return this.negative=1,this.strip()},u.prototype._wordDiv=function(z,$){var G,H=this.clone(),X=z,K=0|X.words[X.length-1];0!=(G=26-this._countBits(K))&&(X=X.ushln(G),H.iushln(G),K=0|X.words[X.length-1]);var ue,ae=H.length-X.length;if("mod"!==$){(ue=new u(null)).length=ae+1,ue.words=new Array(ue.length);for(var ne=0;ne<ue.length;ne++)ue.words[ne]=0}var Q=H.clone()._ishlnsubmul(X,1,ae);0===Q.negative&&(H=Q,ue&&(ue.words[ae]=1));for(var ie=ae-1;ie>=0;ie--){var le=67108864*(0|H.words[X.length+ie])+(0|H.words[X.length+ie-1]);for(le=Math.min(le/K|0,67108863),H._ishlnsubmul(X,le,ie);0!==H.negative;)le--,H.negative=0,H._ishlnsubmul(X,1,ie),H.isZero()||(H.negative^=1);ue&&(ue.words[ie]=le)}return ue&&ue.strip(),H.strip(),"div"!==$&&0!==G&&H.iushrn(G),{div:ue||null,mod:H}},u.prototype.divmod=function(z,$,G){return o(!z.isZero()),this.isZero()?{div:new u(0),mod:new u(0)}:0!==this.negative&&0===z.negative?(K=this.neg().divmod(z,$),"mod"!==$&&(H=K.div.neg()),"div"!==$&&(X=K.mod.neg(),G&&0!==X.negative&&X.iadd(z)),{div:H,mod:X}):0===this.negative&&0!==z.negative?(K=this.divmod(z.neg(),$),"mod"!==$&&(H=K.div.neg()),{div:H,mod:K.mod}):this.negative&z.negative?(K=this.neg().divmod(z.neg(),$),"div"!==$&&(X=K.mod.neg(),G&&0!==X.negative&&X.isub(z)),{div:K.div,mod:X}):z.length>this.length||this.cmp(z)<0?{div:new u(0),mod:this}:1===z.length?"div"===$?{div:this.divn(z.words[0]),mod:null}:"mod"===$?{div:null,mod:new u(this.modn(z.words[0]))}:{div:this.divn(z.words[0]),mod:new u(this.modn(z.words[0]))}:this._wordDiv(z,$);var H,X,K},u.prototype.div=function(z){return this.divmod(z,"div",!1).div},u.prototype.mod=function(z){return this.divmod(z,"mod",!1).mod},u.prototype.umod=function(z){return this.divmod(z,"mod",!0).mod},u.prototype.divRound=function(z){var $=this.divmod(z);if($.mod.isZero())return $.div;var G=0!==$.div.negative?$.mod.isub(z):$.mod,H=z.ushrn(1),X=z.andln(1),K=G.cmp(H);return K<0||1===X&&0===K?$.div:0!==$.div.negative?$.div.isubn(1):$.div.iaddn(1)},u.prototype.modn=function(z){o(z<=67108863);for(var $=67108864%z,G=0,H=this.length-1;H>=0;H--)G=($*G+(0|this.words[H]))%z;return G},u.prototype.idivn=function(z){o(z<=67108863);for(var $=0,G=this.length-1;G>=0;G--){var H=(0|this.words[G])+67108864*$;this.words[G]=H/z|0,$=H%z}return this.strip()},u.prototype.divn=function(z){return this.clone().idivn(z)},u.prototype.egcd=function(z){o(0===z.negative),o(!z.isZero());var $=this,G=z.clone();$=0!==$.negative?$.umod(z):$.clone();for(var H=new u(1),X=new u(0),K=new u(0),ue=new u(1),ae=0;$.isEven()&&G.isEven();)$.iushrn(1),G.iushrn(1),++ae;for(var ne=G.clone(),Q=$.clone();!$.isZero();){for(var ie=0,le=1;!($.words[0]&le)&&ie<26;++ie,le<<=1);if(ie>0)for($.iushrn(ie);ie-- >0;)(H.isOdd()||X.isOdd())&&(H.iadd(ne),X.isub(Q)),H.iushrn(1),X.iushrn(1);for(var fe=0,he=1;!(G.words[0]&he)&&fe<26;++fe,he<<=1);if(fe>0)for(G.iushrn(fe);fe-- >0;)(K.isOdd()||ue.isOdd())&&(K.iadd(ne),ue.isub(Q)),K.iushrn(1),ue.iushrn(1);$.cmp(G)>=0?($.isub(G),H.isub(K),X.isub(ue)):(G.isub($),K.isub(H),ue.isub(X))}return{a:K,b:ue,gcd:G.iushln(ae)}},u.prototype._invmp=function(z){o(0===z.negative),o(!z.isZero());var $=this,G=z.clone();$=0!==$.negative?$.umod(z):$.clone();for(var H,X=new u(1),K=new u(0),ue=G.clone();$.cmpn(1)>0&&G.cmpn(1)>0;){for(var ae=0,ne=1;!($.words[0]&ne)&&ae<26;++ae,ne<<=1);if(ae>0)for($.iushrn(ae);ae-- >0;)X.isOdd()&&X.iadd(ue),X.iushrn(1);for(var Q=0,ie=1;!(G.words[0]&ie)&&Q<26;++Q,ie<<=1);if(Q>0)for(G.iushrn(Q);Q-- >0;)K.isOdd()&&K.iadd(ue),K.iushrn(1);$.cmp(G)>=0?($.isub(G),X.isub(K)):(G.isub($),K.isub(X))}return(H=0===$.cmpn(1)?X:K).cmpn(0)<0&&H.iadd(z),H},u.prototype.gcd=function(z){if(this.isZero())return z.abs();if(z.isZero())return this.abs();var $=this.clone(),G=z.clone();$.negative=0,G.negative=0;for(var H=0;$.isEven()&&G.isEven();H++)$.iushrn(1),G.iushrn(1);for(;;){for(;$.isEven();)$.iushrn(1);for(;G.isEven();)G.iushrn(1);var X=$.cmp(G);if(X<0){var K=$;$=G,G=K}else if(0===X||0===G.cmpn(1))break;$.isub(G)}return G.iushln(H)},u.prototype.invm=function(z){return this.egcd(z).a.umod(z)},u.prototype.isEven=function(){return 0==(1&this.words[0])},u.prototype.isOdd=function(){return 1==(1&this.words[0])},u.prototype.andln=function(z){return this.words[0]&z},u.prototype.bincn=function(z){o("number"==typeof z);var $=z%26,G=(z-$)/26,H=1<<$;if(this.length<=G)return this._expand(G+1),this.words[G]|=H,this;for(var X=H,K=G;0!==X&&K<this.length;K++){var ue=0|this.words[K];X=(ue+=X)>>>26,this.words[K]=ue&=67108863}return 0!==X&&(this.words[K]=X,this.length++),this},u.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},u.prototype.cmpn=function(z){var $,G=z<0;if(0!==this.negative&&!G)return-1;if(0===this.negative&&G)return 1;if(this.strip(),this.length>1)$=1;else{G&&(z=-z),o(z<=67108863,"Number is too big");var H=0|this.words[0];$=H===z?0:H<z?-1:1}return 0!==this.negative?0|-$:$},u.prototype.cmp=function(z){if(0!==this.negative&&0===z.negative)return-1;if(0===this.negative&&0!==z.negative)return 1;var $=this.ucmp(z);return 0!==this.negative?0|-$:$},u.prototype.ucmp=function(z){if(this.length>z.length)return 1;if(this.length<z.length)return-1;for(var $=0,G=this.length-1;G>=0;G--){var H=0|this.words[G],X=0|z.words[G];if(H!==X){H<X?$=-1:H>X&&($=1);break}}return $},u.prototype.gtn=function(z){return 1===this.cmpn(z)},u.prototype.gt=function(z){return 1===this.cmp(z)},u.prototype.gten=function(z){return this.cmpn(z)>=0},u.prototype.gte=function(z){return this.cmp(z)>=0},u.prototype.ltn=function(z){return-1===this.cmpn(z)},u.prototype.lt=function(z){return-1===this.cmp(z)},u.prototype.lten=function(z){return this.cmpn(z)<=0},u.prototype.lte=function(z){return this.cmp(z)<=0},u.prototype.eqn=function(z){return 0===this.cmpn(z)},u.prototype.eq=function(z){return 0===this.cmp(z)},u.red=function(z){return new B(z)},u.prototype.toRed=function(z){return o(!this.red,"Already a number in reduction context"),o(0===this.negative,"red works only with positives"),z.convertTo(this)._forceRed(z)},u.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},u.prototype._forceRed=function(z){return this.red=z,this},u.prototype.forceRed=function(z){return o(!this.red,"Already a number in reduction context"),this._forceRed(z)},u.prototype.redAdd=function(z){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,z)},u.prototype.redIAdd=function(z){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,z)},u.prototype.redSub=function(z){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,z)},u.prototype.redISub=function(z){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,z)},u.prototype.redShl=function(z){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,z)},u.prototype.redMul=function(z){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.mul(this,z)},u.prototype.redIMul=function(z){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,z),this.red.imul(this,z)},u.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},u.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},u.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},u.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},u.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},u.prototype.redPow=function(z){return o(this.red&&!z.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,z)};var D={k256:null,p224:null,p192:null,p25519:null};function S(z,$){this.name=z,this.p=new u($,16),this.n=this.p.bitLength(),this.k=new u(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function O(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function R(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function F(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(z){if("string"==typeof z){var $=u._prime(z);this.m=$.p,this.prime=$}else o(z.gtn(1),"modulus must be greater than 1"),this.m=z,this.prime=null}function J(z){B.call(this,z),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new u(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}S.prototype._tmp=function(){var z=new u(null);return z.words=new Array(Math.ceil(this.n/13)),z},S.prototype.ireduce=function(z){var $,G=z;do{this.split(G,this.tmp),$=(G=(G=this.imulK(G)).iadd(this.tmp)).bitLength()}while($>this.n);var H=$<this.n?-1:G.ucmp(this.p);return 0===H?(G.words[0]=0,G.length=1):H>0?G.isub(this.p):void 0!==G.strip?G.strip():G._strip(),G},S.prototype.split=function(z,$){z.iushrn(this.n,0,$)},S.prototype.imulK=function(z){return z.imul(this.k)},l(O,S),O.prototype.split=function(z,$){for(var G=4194303,H=Math.min(z.length,9),X=0;X<H;X++)$.words[X]=z.words[X];if($.length=H,z.length<=9)return z.words[0]=0,void(z.length=1);var K=z.words[9];for($.words[$.length++]=K&G,X=10;X<z.length;X++){var ue=0|z.words[X];z.words[X-10]=(ue&G)<<4|K>>>22,K=ue}z.words[X-10]=K>>>=22,z.length-=0===K&&z.length>10?10:9},O.prototype.imulK=function(z){z.words[z.length]=0,z.words[z.length+1]=0,z.length+=2;for(var $=0,G=0;G<z.length;G++){var H=0|z.words[G];z.words[G]=67108863&($+=977*H),$=64*H+($/67108864|0)}return 0===z.words[z.length-1]&&(z.length--,0===z.words[z.length-1]&&z.length--),z},l(P,S),l(R,S),l(F,S),F.prototype.imulK=function(z){for(var $=0,G=0;G<z.length;G++){var H=19*(0|z.words[G])+$,X=67108863&H;H>>>=26,z.words[G]=X,$=H}return 0!==$&&(z.words[z.length++]=$),z},u._prime=function(z){if(D[z])return D[z];var $;if("k256"===z)$=new O;else if("p224"===z)$=new P;else if("p192"===z)$=new R;else{if("p25519"!==z)throw new Error("Unknown prime "+z);$=new F}return D[z]=$,$},B.prototype._verify1=function(z){o(0===z.negative,"red works only with positives"),o(z.red,"red works only with red numbers")},B.prototype._verify2=function(z,$){o(0==(z.negative|$.negative),"red works only with positives"),o(z.red&&z.red===$.red,"red works only with red numbers")},B.prototype.imod=function(z){return this.prime?this.prime.ireduce(z)._forceRed(this):z.umod(this.m)._forceRed(this)},B.prototype.neg=function(z){return z.isZero()?z.clone():this.m.sub(z)._forceRed(this)},B.prototype.add=function(z,$){this._verify2(z,$);var G=z.add($);return G.cmp(this.m)>=0&&G.isub(this.m),G._forceRed(this)},B.prototype.iadd=function(z,$){this._verify2(z,$);var G=z.iadd($);return G.cmp(this.m)>=0&&G.isub(this.m),G},B.prototype.sub=function(z,$){this._verify2(z,$);var G=z.sub($);return G.cmpn(0)<0&&G.iadd(this.m),G._forceRed(this)},B.prototype.isub=function(z,$){this._verify2(z,$);var G=z.isub($);return G.cmpn(0)<0&&G.iadd(this.m),G},B.prototype.shl=function(z,$){return this._verify1(z),this.imod(z.ushln($))},B.prototype.imul=function(z,$){return this._verify2(z,$),this.imod(z.imul($))},B.prototype.mul=function(z,$){return this._verify2(z,$),this.imod(z.mul($))},B.prototype.isqr=function(z){return this.imul(z,z.clone())},B.prototype.sqr=function(z){return this.mul(z,z)},B.prototype.sqrt=function(z){if(z.isZero())return z.clone();var $=this.m.andln(3);if(o($%2==1),3===$){var G=this.m.add(new u(1)).iushrn(2);return this.pow(z,G)}for(var H=this.m.subn(1),X=0;!H.isZero()&&0===H.andln(1);)X++,H.iushrn(1);o(!H.isZero());var K=new u(1).toRed(this),ue=K.redNeg(),ae=this.m.subn(1).iushrn(1),ne=this.m.bitLength();for(ne=new u(2*ne*ne).toRed(this);0!==this.pow(ne,ae).cmp(ue);)ne.redIAdd(ue);for(var Q=this.pow(ne,H),ie=this.pow(z,H.addn(1).iushrn(1)),le=this.pow(z,H),fe=X;0!==le.cmp(K);){for(var he=le,pe=0;0!==he.cmp(K);pe++)he=he.redSqr();o(pe<fe);var xe=this.pow(Q,new u(1).iushln(fe-pe-1));ie=ie.redMul(xe),Q=xe.redSqr(),le=le.redMul(Q),fe=pe}return ie},B.prototype.invm=function(z){var $=z._invmp(this.m);return 0!==$.negative?($.negative=0,this.imod($).redNeg()):this.imod($)},B.prototype.pow=function(z,$){if($.isZero())return new u(1).toRed(this);if(0===$.cmpn(1))return z.clone();var G=new Array(16);G[0]=new u(1).toRed(this),G[1]=z;for(var H=2;H<G.length;H++)G[H]=this.mul(G[H-1],z);var X=G[0],K=0,ue=0,ae=$.bitLength()%26;for(0===ae&&(ae=26),H=$.length-1;H>=0;H--){for(var ne=$.words[H],Q=ae-1;Q>=0;Q--){var ie=ne>>Q&1;X!==G[0]&&(X=this.sqr(X)),0!==ie||0!==K?(K<<=1,K|=ie,(4==++ue||0===H&&0===Q)&&(X=this.mul(X,G[K]),ue=0,K=0)):ue=0}ae=26}return X},B.prototype.convertTo=function(z){var $=z.umod(this.m);return $===z?$.clone():$},B.prototype.convertFrom=function(z){var $=z.clone();return $.red=null,$},u.mont=function(z){return new J(z)},l(J,B),J.prototype.convertTo=function(z){return this.imod(z.ushln(this.shift))},J.prototype.convertFrom=function(z){var $=this.imod(z.mul(this.rinv));return $.red=null,$},J.prototype.imul=function(z,$){if(z.isZero()||$.isZero())return z.words[0]=0,z.length=1,z;var G=z.imul($),H=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=G.isub(H).iushrn(this.shift),K=X;return X.cmp(this.m)>=0?K=X.isub(this.m):X.cmpn(0)<0&&(K=X.iadd(this.m)),K._forceRed(this)},J.prototype.mul=function(z,$){if(z.isZero()||$.isZero())return new u(0)._forceRed(this);var G=z.mul($),H=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=G.isub(H).iushrn(this.shift),K=X;return X.cmp(this.m)>=0?K=X.isub(this.m):X.cmpn(0)<0&&(K=X.iadd(this.m)),K._forceRed(this)},J.prototype.invm=function(z){return this.imod(z._invmp(this.m).mul(this.r2))._forceRed(this)}}(v=i.nmd(v),this)},2692:function(v){"use strict";v.exports=function(c){var i,s,a,o=c.length,l=0;for(i=0;i<o;++i)l+=c[i].length;var u=new Array(l),d=0;for(i=0;i<o;++i){var g=c[i],h=g.length;for(s=0;s<h;++s){var w=u[d++]=new Array(h-1),y=0;for(a=0;a<h;++a)a!==s&&(w[y++]=g[a]);if(1&s){var p=w[1];w[1]=w[0],w[0]=p}}}return u}},2569:function(v,c,i){"use strict";v.exports=function(w,y,p){switch(arguments.length){case 1:return s=[],g(_=w,_,h,!0),s;case 2:return"function"==typeof y?g(w,w,y,!0):(s=[],g(w,y,h,!1),s);case 3:return g(w,y,p,!1);default:throw new Error("box-intersect: Invalid arguments")}var _};var s,a=i(5306),o=i(1390),l=i(2337);function u(w,y){for(var p=0;p<w;++p)if(!(y[p]<=y[p+w]))return!0;return!1}function d(w,y,p,_){for(var x=0,b=0,M=0,m=w.length;M<m;++M){var D=w[M];if(!u(y,D)){for(var S=0;S<2*y;++S)p[x++]=D[S];_[b++]=M}}return b}function g(w,y,p,_){var x=w.length,b=y.length;if(!(x<=0||b<=0)){var M=w[0].length>>>1;if(!(M<=0)){var m,D=a.mallocDouble(2*M*x),S=a.mallocInt32(x);if((x=d(w,M,D,S))>0){if(1===M&&_)o.init(x),m=o.sweepComplete(M,p,0,x,D,S,0,x,D,S);else{var O=a.mallocDouble(2*M*b),P=a.mallocInt32(b);(b=d(y,M,O,P))>0&&(o.init(x+b),m=1===M?o.sweepBipartite(M,p,0,x,D,S,0,b,O,P):l(M,p,_,x,D,S,b,O,P),a.free(O),a.free(P))}a.free(D),a.free(S)}return m}}}function h(w,y){s.push([w,y])}},7333:function(v,c){"use strict";function i(s){return s?function(a,o,l,u,d,g,h,w,y,p,_){return d-u>y-w?function(x,b,M,m,D,S,O,P,R,F,B){for(var J=2*x,z=m,$=J*m;z<D;++z,$+=J){var G=S[b+$],H=S[b+$+x],X=O[z];e:for(var K=P,ue=J*P;K<R;++K,ue+=J){var Q=B[K];if(!(F[b+ue+x]<G||H<F[b+ue])){for(var ie=b+1;ie<x;++ie)if(S[ie+x+$]<F[ie+ue]||F[ie+x+ue]<S[ie+$])continue e;var xe=M(X,Q);if(void 0!==xe)return xe}}}}(a,o,l,u,d,g,h,w,y,p,_):function(x,b,M,m,D,S,O,P,R,F,B){for(var J=2*x,z=P,$=J*P;z<R;++z,$+=J){var G=F[b+$],H=F[b+$+x],X=B[z];e:for(var K=m,ue=J*m;K<D;++K,ue+=J){var Q=O[K];if(!(H<S[b+ue]||S[b+ue+x]<G)){for(var ie=b+1;ie<x;++ie)if(S[ie+x+ue]<F[ie+$]||F[ie+x+$]<S[ie+ue])continue e;var xe=M(Q,X);if(void 0!==xe)return xe}}}}(a,o,l,u,d,g,h,w,y,p,_)}:function(a,o,l,u,d,g,h,w,y,p,_,x){return g-d>p-y?u?function(b,M,m,D,S,O,P,R,F,B,J){for(var z=2*b,$=D,G=z*D;$<S;++$,G+=z){var H=O[M+G],X=O[M+G+b],K=P[$];e:for(var ue=R,ae=z*R;ue<F;++ue,ae+=z){var ne=B[M+ae],Q=J[ue];if(!(ne<=H||X<ne)){for(var ie=M+1;ie<b;++ie)if(O[ie+b+G]<B[ie+ae]||B[ie+b+ae]<O[ie+G])continue e;var xe=m(Q,K);if(void 0!==xe)return xe}}}}(a,o,l,d,g,h,w,y,p,_,x):function(b,M,m,D,S,O,P,R,F,B,J){for(var z=2*b,$=D,G=z*D;$<S;++$,G+=z){var H=O[M+G],X=O[M+G+b],K=P[$];e:for(var ue=R,ae=z*R;ue<F;++ue,ae+=z){var ne=B[M+ae],Q=J[ue];if(!(ne<H||X<ne)){for(var ie=M+1;ie<b;++ie)if(O[ie+b+G]<B[ie+ae]||B[ie+b+ae]<O[ie+G])continue e;var xe=m(K,Q);if(void 0!==xe)return xe}}}}(a,o,l,d,g,h,w,y,p,_,x):u?function(b,M,m,D,S,O,P,R,F,B,J){for(var z=2*b,$=R,G=z*R;$<F;++$,G+=z){var H=B[M+G],X=J[$];e:for(var K=D,ue=z*D;K<S;++K,ue+=z){var Q=P[K];if(!(H<=O[M+ue]||O[M+ue+b]<H)){for(var ie=M+1;ie<b;++ie)if(O[ie+b+ue]<B[ie+G]||B[ie+b+G]<O[ie+ue])continue e;var xe=m(X,Q);if(void 0!==xe)return xe}}}}(a,o,l,d,g,h,w,y,p,_,x):function(b,M,m,D,S,O,P,R,F,B,J){for(var z=2*b,$=R,G=z*R;$<F;++$,G+=z){var H=B[M+G],X=J[$];e:for(var K=D,ue=z*D;K<S;++K,ue+=z){var Q=P[K];if(!(H<O[M+ue]||O[M+ue+b]<H)){for(var ie=M+1;ie<b;++ie)if(O[ie+b+ue]<B[ie+G]||B[ie+b+G]<O[ie+ue])continue e;var xe=m(Q,X);if(void 0!==xe)return xe}}}}(a,o,l,d,g,h,w,y,p,_,x)}}c.partial=i(!1),c.full=i(!0)},2337:function(v,c,i){"use strict";v.exports=function(z,$,G,H,X,K,ue,ae,ne){!function(Ze,We){var et=8*a.log2(We+1)*(Ze+1)|0,nt=a.nextPow2(S*et);P.length<nt&&(s.free(P),P=s.mallocInt32(nt));var ct=a.nextPow2(O*et);R.length<ct&&(s.free(R),R=s.mallocDouble(ct))}(z,H+ue);var Q,ie=0,le=2*z;for(F(ie++,0,0,H,0,ue,G?16:0,-1/0,1/0),G||F(ie++,0,0,ue,0,H,1,-1/0,1/0);ie>0;){var fe=(ie-=1)*S,he=P[fe],pe=P[fe+1],xe=P[fe+2],Ee=P[fe+3],Re=P[fe+4],ke=P[fe+5],Te=ie*O,we=R[Te],je=R[Te+1],Ce=1&ke,Ie=!!(16&ke),ge=X,me=K,ce=ae,Ae=ne;if(Ce&&(ge=ae,me=ne,ce=X,Ae=K),!(2&ke&&pe>=(xe=b(z,he,pe,xe,ge,me,je))||4&ke&&(pe=M(z,he,pe,xe,ge,me,we))>=xe)){var Ne=xe-pe,De=Re-Ee;if(Ie){if(z*Ne*(Ne+De)<p){if(void 0!==(Q=d.scanComplete(z,he,$,pe,xe,ge,me,Ee,Re,ce,Ae)))return Q;continue}}else{if(z*Math.min(Ne,De)<w){if(void 0!==(Q=l(z,he,$,Ce,pe,xe,ge,me,Ee,Re,ce,Ae)))return Q;continue}if(z*Ne*De<y){if(void 0!==(Q=d.scanBipartite(z,he,$,Ce,pe,xe,ge,me,Ee,Re,ce,Ae)))return Q;continue}}var qe=_(z,he,pe,xe,ge,me,we,je);if(pe<qe)if(z*(qe-pe)<w){if(void 0!==(Q=u(z,he+1,$,pe,qe,ge,me,Ee,Re,ce,Ae)))return Q}else if(he===z-2){if(void 0!==(Q=Ce?d.sweepBipartite(z,$,Ee,Re,ce,Ae,pe,qe,ge,me):d.sweepBipartite(z,$,pe,qe,ge,me,Ee,Re,ce,Ae)))return Q}else F(ie++,he+1,pe,qe,Ee,Re,Ce,-1/0,1/0),F(ie++,he+1,Ee,Re,pe,qe,1^Ce,-1/0,1/0);if(qe<xe){var Ke=g(z,he,Ee,Re,ce,Ae),be=ce[le*Ke+he],Oe=x(z,he,Ke,Re,ce,Ae,be);if(Oe<Re&&F(ie++,he,qe,xe,Oe,Re,(4|Ce)+(Ie?16:0),be,je),Ee<Ke&&F(ie++,he,qe,xe,Ee,Ke,(2|Ce)+(Ie?16:0),we,be),Ke+1===Oe){if(void 0!==(Q=Ie?J(z,he,$,qe,xe,ge,me,Ke,ce,Ae[Ke]):B(z,he,$,Ce,qe,xe,ge,me,Ke,ce,Ae[Ke])))return Q}else if(Ke<Oe){var Le;if(Ie){if(qe<(Le=m(z,he,qe,xe,ge,me,be))){var Ue=x(z,he,qe,Le,ge,me,be);if(he===z-2){if(qe<Ue&&void 0!==(Q=d.sweepComplete(z,$,qe,Ue,ge,me,Ke,Oe,ce,Ae))||Ue<Le&&void 0!==(Q=d.sweepBipartite(z,$,Ue,Le,ge,me,Ke,Oe,ce,Ae)))return Q}else qe<Ue&&F(ie++,he+1,qe,Ue,Ke,Oe,16,-1/0,1/0),Ue<Le&&(F(ie++,he+1,Ue,Le,Ke,Oe,0,-1/0,1/0),F(ie++,he+1,Ke,Oe,Ue,Le,1,-1/0,1/0))}}else qe<(Le=Ce?D(z,he,qe,xe,ge,me,be):m(z,he,qe,xe,ge,me,be))&&(he===z-2?Q=Ce?d.sweepBipartite(z,$,Ke,Oe,ce,Ae,qe,Le,ge,me):d.sweepBipartite(z,$,qe,Le,ge,me,Ke,Oe,ce,Ae):(F(ie++,he+1,qe,Le,Ke,Oe,Ce,-1/0,1/0),F(ie++,he+1,Ke,Oe,qe,Le,1^Ce,-1/0,1/0)))}}}}};var s=i(5306),a=i(2288),o=i(7333),l=o.partial,u=o.full,d=i(1390),g=i(2464),h=i(122),w=128,y=1<<22,p=1<<22,_=h("!(lo>=p0)&&!(p1>=hi)"),x=h("lo===p0"),b=h("lo<p0"),M=h("hi<=p0"),m=h("lo<=p0&&p0<=hi"),D=h("lo<p0&&p0<=hi"),S=6,O=2,P=s.mallocInt32(1024),R=s.mallocDouble(1024);function F(z,$,G,H,X,K,ue,ae,ne){var Q=S*z;P[Q]=$,P[Q+1]=G,P[Q+2]=H,P[Q+3]=X,P[Q+4]=K,P[Q+5]=ue;var ie=O*z;R[ie]=ae,R[ie+1]=ne}function B(z,$,G,H,X,K,ue,ae,ne,Q,ie){var le=2*z,fe=ne*le,he=Q[fe+$];e:for(var pe=X,xe=X*le;pe<K;++pe,xe+=le){var Ee=ue[xe+$],Re=ue[xe+$+z];if(!(he<Ee||Re<he||H&&he===Ee)){for(var ke,Te=ae[pe],we=$+1;we<z;++we)if(Ee=ue[xe+we],(Re=ue[xe+we+z])<Q[fe+we]||Q[fe+we+z]<Ee)continue e;if(void 0!==(ke=H?G(ie,Te):G(Te,ie)))return ke}}}function J(z,$,G,H,X,K,ue,ae,ne,Q){var ie=2*z,le=ae*ie,fe=ne[le+$];e:for(var he=H,pe=H*ie;he<X;++he,pe+=ie){var xe=ue[he];if(xe!==Q){var Ee=K[pe+$],Re=K[pe+$+z];if(!(fe<Ee||Re<fe)){for(var ke=$+1;ke<z;++ke)if(Ee=K[pe+ke],(Re=K[pe+ke+z])<ne[le+ke]||ne[le+ke+z]<Ee)continue e;var je=G(xe,Q);if(void 0!==je)return je}}}}},2464:function(v,c,i){"use strict";v.exports=function(l,u,d,g,h,w){if(g<=d+1)return d;for(var y=d,p=g,_=g+d>>>1,x=2*l,b=_,M=h[x*_+u];y<p;){if(p-y<a){o(l,u,y,p,h,w),M=h[x*_+u];break}var m=p-y,D=Math.random()*m+y|0,S=h[x*D+u],O=Math.random()*m+y|0,P=h[x*O+u],R=Math.random()*m+y|0,F=h[x*R+u];S<=P?F>=P?(b=O,M=P):S>=F?(b=D,M=S):(b=R,M=F):P>=F?(b=O,M=P):F>=S?(b=D,M=S):(b=R,M=F);for(var B=x*(p-1),J=x*b,z=0;z<x;++z,++B,++J){var $=h[B];h[B]=h[J],h[J]=$}var G=w[p-1];for(w[p-1]=w[b],w[b]=G,B=x*(p-1),J=x*(b=s(l,u,y,p-1,h,w,M)),z=0;z<x;++z,++B,++J)$=h[B],h[B]=h[J],h[J]=$;if(G=w[p-1],w[p-1]=w[b],w[b]=G,_<b){for(p=b-1;y<p&&h[x*(p-1)+u]===M;)p-=1;p+=1}else{if(!(b<_))break;for(y=b+1;y<p&&h[x*y+u]===M;)y+=1}}return s(l,u,d,_,h,w,h[x*_+u])};var s=i(122)("lo<p0"),a=8;function o(l,u,d,g,h,w){for(var y=2*l,p=y*(d+1)+u,_=d+1;_<g;++_,p+=y)for(var x=h[p],b=_,M=y*(_-1);b>d&&h[M+u]>x;--b,M-=y){for(var m=M,D=M+y,S=0;S<y;++S,++m,++D){var O=h[m];h[m]=h[D],h[D]=O}var P=w[b];w[b]=w[b-1],w[b-1]=P}}},122:function(v){"use strict";v.exports=function(i){return c[i]};var c={"lo===p0":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=s,_=a;o>_;++_,h+=g)if(l[h+p]===d)if(y===_)y+=1,w+=g;else{for(var x=0;g>x;++x){var b=l[h+x];l[h+x]=l[w],l[w++]=b}var M=u[_];u[_]=u[y],u[y++]=M}return y},"lo<p0":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=s,_=a;o>_;++_,h+=g)if(l[h+p]<d)if(y===_)y+=1,w+=g;else{for(var x=0;g>x;++x){var b=l[h+x];l[h+x]=l[w],l[w++]=b}var M=u[_];u[_]=u[y],u[y++]=M}return y},"lo<=p0":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=i+s,_=a;o>_;++_,h+=g)if(l[h+p]<=d)if(y===_)y+=1,w+=g;else{for(var x=0;g>x;++x){var b=l[h+x];l[h+x]=l[w],l[w++]=b}var M=u[_];u[_]=u[y],u[y++]=M}return y},"hi<=p0":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=i+s,_=a;o>_;++_,h+=g)if(l[h+p]<=d)if(y===_)y+=1,w+=g;else{for(var x=0;g>x;++x){var b=l[h+x];l[h+x]=l[w],l[w++]=b}var M=u[_];u[_]=u[y],u[y++]=M}return y},"lo<p0&&p0<=hi":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=s,_=i+s,x=a;o>x;++x,h+=g)if(l[h+p]<d&&d<=l[h+_])if(y===x)y+=1,w+=g;else{for(var m=0;g>m;++m){var D=l[h+m];l[h+m]=l[w],l[w++]=D}var S=u[x];u[x]=u[y],u[y++]=S}return y},"lo<=p0&&p0<=hi":function(i,s,a,o,l,u,d){for(var g=2*i,h=g*a,w=h,y=a,p=s,_=i+s,x=a;o>x;++x,h+=g)if(l[h+p]<=d&&d<=l[h+_])if(y===x)y+=1,w+=g;else{for(var m=0;g>m;++m){var D=l[h+m];l[h+m]=l[w],l[w++]=D}var S=u[x];u[x]=u[y],u[y++]=S}return y},"!(lo>=p0)&&!(p1>=hi)":function(i,s,a,o,l,u,d,g){for(var h=2*i,w=h*a,y=w,p=a,_=s,x=i+s,b=a;o>b;++b,w+=h)if(!(l[w+_]>=d||g>=l[w+x]))if(p===b)p+=1,y+=h;else{for(var D=0;h>D;++D){var S=l[w+D];l[w+D]=l[y],l[y++]=S}var O=u[b];u[b]=u[p],u[p++]=O}return p}}},309:function(v){"use strict";v.exports=function(h,w){w<=4*c?i(0,w-1,h):g(0,w-1,h)};var c=32;function i(h,w,y){for(var p=2*(h+1),_=h+1;_<=w;++_){for(var x=y[p++],b=y[p++],M=_,m=p-2;M-- >h;){var D=y[m-2],S=y[m-1];if(D<x||D===x&&S<b)break;y[m]=D,y[m+1]=S,m-=2}y[m]=x,y[m+1]=b}}function s(h,w,y){var p=y[h*=2],_=y[h+1];y[h]=y[w*=2],y[h+1]=y[w+1],y[w]=p,y[w+1]=_}function a(h,w,y){y[h*=2]=y[w*=2],y[h+1]=y[w+1]}function o(h,w,y,p){y*=2;var _=p[h*=2],x=p[h+1];p[h]=p[w*=2],p[h+1]=p[w+1],p[w]=p[y],p[w+1]=p[y+1],p[y]=_,p[y+1]=x}function l(h,w,y,p,_){_[h*=2]=_[w*=2],_[w]=y,_[h+1]=_[w+1],_[w+1]=p}function u(h,w,y){var p=y[h*=2],_=y[w*=2];return!(p<_)&&(p!==_||y[h+1]>y[w+1])}function d(h,w,y,p){var _=p[h*=2];return _<w||_===w&&p[h+1]<y}function g(h,w,y){var p=(w-h+1)/6|0,_=h+p,x=w-p,b=h+w>>1,M=b-p,m=b+p,D=_,S=M,O=b,P=m,R=x,F=h+1,B=w-1,J=0;u(D,S,y)&&(J=D,D=S,S=J),u(P,R,y)&&(J=P,P=R,R=J),u(D,O,y)&&(J=D,D=O,O=J),u(S,O,y)&&(J=S,S=O,O=J),u(D,P,y)&&(J=D,D=P,P=J),u(O,P,y)&&(J=O,O=P,P=J),u(S,R,y)&&(J=S,S=R,R=J),u(S,O,y)&&(J=S,S=O,O=J),u(P,R,y)&&(J=P,P=R,R=J);for(var z=y[2*S],$=y[2*S+1],G=y[2*P],H=y[2*P+1],X=2*D,K=2*O,ue=2*R,ae=2*_,ne=2*b,Q=2*x,ie=0;ie<2;++ie){var fe=y[K+ie],he=y[ue+ie];y[ae+ie]=y[X+ie],y[ne+ie]=fe,y[Q+ie]=he}a(M,h,y),a(m,w,y);for(var pe=F;pe<=B;++pe)if(d(pe,z,$,y))pe!==F&&s(pe,F,y),++F;else if(!d(pe,G,H,y))for(;;){if(d(B,G,H,y)){d(B,z,$,y)?(o(pe,F,B,y),++F,--B):(s(pe,B,y),--B);break}if(--B<pe)break}l(h,F-1,z,$,y),l(w,B+1,G,H,y),F-2-h<=c?i(h,F-2,y):g(h,F-2,y),w-(B+2)<=c?i(B+2,w,y):g(B+2,w,y),B-F<=c?i(F,B,y):g(F,B,y)}},1390:function(v,c,i){"use strict";v.exports={init:function(M){var m=a.nextPow2(M);d.length<m&&(s.free(d),d=s.mallocInt32(m)),g.length<m&&(s.free(g),g=s.mallocInt32(m)),h.length<m&&(s.free(h),h=s.mallocInt32(m)),w.length<m&&(s.free(w),w=s.mallocInt32(m)),y.length<m&&(s.free(y),y=s.mallocInt32(m)),p.length<m&&(s.free(p),p=s.mallocInt32(m));var D=8*m;_.length<D&&(s.free(_),_=s.mallocDouble(D))},sweepBipartite:function(M,m,D,S,O,P,R,F,B,J){for(var z=0,$=2*M,G=M-1,H=$-1,X=D;X<S;++X){var K=P[X],ue=$*X;_[z++]=O[ue+G],_[z++]=-(K+1),_[z++]=O[ue+H],_[z++]=K}for(X=R;X<F;++X){K=J[X]+l;var ae=$*X;_[z++]=B[ae+G],_[z++]=-K,_[z++]=B[ae+H],_[z++]=K}var ne=z>>>1;o(_,ne);var Q=0,ie=0;for(X=0;X<ne;++X){var le=0|_[2*X+1];if(le>=l)x(h,w,ie--,le=le-l|0);else if(le>=0)x(d,g,Q--,le);else if(le<=-l){le=-le-l|0;for(var fe=0;fe<Q;++fe)if(void 0!==(he=m(d[fe],le)))return he;b(h,w,ie++,le)}else{for(le=-le-1|0,fe=0;fe<ie;++fe){var he;if(void 0!==(he=m(le,h[fe])))return he}b(d,g,Q++,le)}}},sweepComplete:function(M,m,D,S,O,P,R,F,B,J){for(var z=0,$=2*M,G=M-1,H=$-1,X=D;X<S;++X){var K=P[X]+1<<1,ue=$*X;_[z++]=O[ue+G],_[z++]=-K,_[z++]=O[ue+H],_[z++]=K}for(X=R;X<F;++X){K=J[X]+1<<1;var ae=$*X;_[z++]=B[ae+G],_[z++]=1|-K,_[z++]=B[ae+H],_[z++]=1|K}var ne=z>>>1;o(_,ne);var Q=0,ie=0,le=0;for(X=0;X<ne;++X){var fe=0|_[2*X+1],he=1&fe;if(X<ne-1&&fe>>1==_[2*X+3]>>1&&(he=2,X+=1),fe<0){for(var pe=-(fe>>1)-1,xe=0;xe<le;++xe)if(void 0!==(Ee=m(y[xe],pe)))return Ee;if(0!==he)for(xe=0;xe<Q;++xe)if(void 0!==(Ee=m(d[xe],pe)))return Ee;if(1!==he)for(xe=0;xe<ie;++xe){var Ee;if(void 0!==(Ee=m(h[xe],pe)))return Ee}0===he?b(d,g,Q++,pe):1===he?b(h,w,ie++,pe):2===he&&b(y,p,le++,pe)}else pe=(fe>>1)-1,0===he?x(d,g,Q--,pe):1===he?x(h,w,ie--,pe):2===he&&x(y,p,le--,pe)}},scanBipartite:function(M,m,D,S,O,P,R,F,B,J,z,$){var G=0,H=2*M,X=m,K=m+M,ue=1,ae=1;S?ae=l:ue=l;for(var ne=O;ne<P;++ne){var Q=ne+ue,ie=H*ne;_[G++]=R[ie+X],_[G++]=-Q,_[G++]=R[ie+K],_[G++]=Q}for(ne=B;ne<J;++ne)Q=ne+ae,_[G++]=z[H*ne+X],_[G++]=-Q;var fe=G>>>1;o(_,fe);var he=0;for(ne=0;ne<fe;++ne){var pe=0|_[2*ne+1];if(pe<0){var xe=!1;if((Q=-pe)>=l?(xe=!S,Q-=l):(xe=!!S,Q-=1),xe)b(d,g,he++,Q);else{var Ee=$[Q],Re=H*Q,ke=z[Re+m+1],Te=z[Re+m+1+M];e:for(var we=0;we<he;++we){var je=d[we],Ce=H*je;if(!(Te<R[Ce+m+1]||R[Ce+m+1+M]<ke)){for(var Ie=m+2;Ie<M;++Ie)if(z[Re+Ie+M]<R[Ce+Ie]||R[Ce+Ie+M]<z[Re+Ie])continue e;var ge,me=F[je];if(void 0!==(ge=S?D(Ee,me):D(me,Ee)))return ge}}}}else x(d,g,he--,pe-ue)}},scanComplete:function(M,m,D,S,O,P,R,F,B,J,z){for(var $=0,G=2*M,H=m,X=m+M,K=S;K<O;++K){var ue=K+l,ae=G*K;_[$++]=P[ae+H],_[$++]=-ue,_[$++]=P[ae+X],_[$++]=ue}for(K=F;K<B;++K)ue=K+1,_[$++]=J[G*K+H],_[$++]=-ue;var Q=$>>>1;o(_,Q);var ie=0;for(K=0;K<Q;++K){var le=0|_[2*K+1];if(le<0)if((ue=-le)>=l)d[ie++]=ue-l;else{var fe=z[ue-=1],he=G*ue,pe=J[he+m+1],xe=J[he+m+1+M];e:for(var Ee=0;Ee<ie;++Ee){var Re=d[Ee],ke=R[Re];if(ke===fe)break;var Te=G*Re;if(!(xe<P[Te+m+1]||P[Te+m+1+M]<pe)){for(var we=m+2;we<M;++we)if(J[he+we+M]<P[Te+we]||P[Te+we+M]<J[he+we])continue e;var je=D(ke,fe);if(void 0!==je)return je}}}else{for(ue=le-l,Ee=ie-1;Ee>=0;--Ee)if(d[Ee]===ue){for(we=Ee+1;we<ie;++we)d[we-1]=d[we];break}--ie}}}};var s=i(5306),a=i(2288),o=i(309),l=1<<28,u=1024,d=s.mallocInt32(u),g=s.mallocInt32(u),h=s.mallocInt32(u),w=s.mallocInt32(u),y=s.mallocInt32(u),p=s.mallocInt32(u),_=s.mallocDouble(8192);function x(M,m,D,S){var O=m[S],P=M[D-1];M[O]=P,m[P]=O}function b(M,m,D,S){M[D]=S,m[S]=D}},7761:function(v,c,i){"use strict";var s=i(9971),a=i(743),o=i(2161),l=i(7098);function u(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function d(h,w){return h[0]-w[0]||h[1]-w[1]}function g(h,w,y){return w in h?h[w]:y}v.exports=function(h,w,y){Array.isArray(w)?(y=y||{},w=w||[]):(y=w||{},w=[]);var p=!!g(y,"delaunay",!0),_=!!g(y,"interior",!0),x=!!g(y,"exterior",!0),b=!!g(y,"infinity",!1);if(!_&&!x||0===h.length)return[];var M=s(h,w);if(p||_!==x||b){for(var m=a(h.length,w.map(u).sort(d)),D=0;D<M.length;++D){var S=M[D];m.addTriangle(S[0],S[1],S[2])}return p&&o(h,m),x?_?b?l(m,0,b):m.cells():l(m,1,b):l(m,-1)}return M}},2161:function(v,c,i){"use strict";var s=i(2227)[4];function a(o,l,u,d,g,h){var w=l.opposite(d,g);if(!(w<0)){if(g<d){var y=d;d=g,g=y,y=h,h=w,w=y}l.isConstraint(d,g)||s(o[d],o[g],o[h],o[w])<0&&u.push(d,g)}}i(5070),v.exports=function(o,l){for(var u=[],d=o.length,g=l.stars,h=0;h<d;++h)for(var w=g[h],y=1;y<w.length;y+=2)if(!((b=w[y])<h||l.isConstraint(h,b))){for(var p=w[y-1],_=-1,x=1;x<w.length;x+=2)if(w[x-1]===b){_=w[x];break}_<0||s(o[h],o[b],o[p],o[_])<0&&u.push(h,b)}for(;u.length>0;){for(var b=u.pop(),M=(p=-1,_=-1,w=g[h=u.pop()],1);M<w.length;M+=2){var m=w[M-1],D=w[M];m===b?_=D:D===b&&(p=m)}p<0||_<0||s(o[h],o[b],o[p],o[_])>=0||(l.flip(h,b),a(o,l,u,p,h,_),a(o,l,u,h,_,p),a(o,l,u,_,b,p),a(o,l,u,b,p,_))}}},7098:function(v,c,i){"use strict";var s,a=i(5070);function o(u,d,g,h,w,y,p){this.cells=u,this.neighbor=d,this.flags=h,this.constraint=g,this.active=w,this.next=y,this.boundary=p}function l(u,d){return u[0]-d[0]||u[1]-d[1]||u[2]-d[2]}v.exports=function(u,d,g){var h=function(R,F){for(var B=R.cells(),J=B.length,z=0;z<J;++z){var $=(le=B[z])[0],G=le[1],H=le[2];G<H?G<$&&(le[0]=G,le[1]=H,le[2]=$):H<$&&(le[0]=H,le[1]=$,le[2]=G)}B.sort(l);var X=new Array(J);for(z=0;z<X.length;++z)X[z]=0;var K=[],ue=[],ae=new Array(3*J),ne=new Array(3*J),Q=null;F&&(Q=[]);var ie=new o(B,ae,ne,X,K,ue,Q);for(z=0;z<J;++z)for(var le=B[z],fe=0;fe<3;++fe){var he=ae[3*z+fe]=ie.locate(G=le[(fe+1)%3],$=le[fe],R.opposite(G,$)),pe=ne[3*z+fe]=R.isConstraint($,G);he<0&&(pe?ue.push(z):(K.push(z),X[z]=1),F&&Q.push([G,$,-1]))}return ie}(u,g);if(0===d)return g?h.cells.concat(h.boundary):h.cells;for(var w=1,y=h.active,p=h.next,_=h.flags,x=h.cells,b=h.constraint,M=h.neighbor;y.length>0||p.length>0;){for(;y.length>0;){var m=y.pop();if(_[m]!==-w){_[m]=w;for(var D=0;D<3;++D){var S=M[3*m+D];S>=0&&0===_[S]&&(b[3*m+D]?p.push(S):(y.push(S),_[S]=w))}}}var O=p;p=y,y=O,p.length=0,w=-w}var P=function(R,F,B){for(var J=0,z=0;z<R.length;++z)F[z]===B&&(R[J++]=R[z]);return R.length=J,R}(x,_,d);return g?P.concat(h.boundary):P},o.prototype.locate=(s=[0,0,0],function(u,d,g){var h=u,w=d,y=g;return d<g?d<u&&(h=d,w=g,y=u):g<u&&(h=g,w=u,y=d),h<0?-1:(s[0]=h,s[1]=w,s[2]=y,a.eq(this.cells,s,l))})},9971:function(v,c,i){"use strict";var s=i(5070),a=i(417)[3];function o(p,_,x,b,M){this.a=p,this.b=_,this.idx=x,this.lowerIds=b,this.upperIds=M}function l(p,_,x,b){this.a=p,this.b=_,this.type=x,this.idx=b}function u(p,_){var x=p.a[0]-_.a[0]||p.a[1]-_.a[1]||p.type-_.type;return x||(0!==p.type&&(x=a(p.a,p.b,_.b))?x:p.idx-_.idx)}function d(p,_){return a(p.a,p.b,_)}function g(p,_,x,b,M){for(var m=s.lt(_,b,d),D=s.gt(_,b,d),S=m;S<D;++S){for(var O=_[S],P=O.lowerIds,R=P.length;R>1&&a(x[P[R-2]],x[P[R-1]],b)>0;)p.push([P[R-1],P[R-2],M]),R-=1;P.length=R,P.push(M);var F=O.upperIds;for(R=F.length;R>1&&a(x[F[R-2]],x[F[R-1]],b)<0;)p.push([F[R-2],F[R-1],M]),R-=1;F.length=R,F.push(M)}}function h(p,_){var x;return(x=p.a[0]<_.a[0]?a(p.a,p.b,_.a):a(_.b,_.a,p.a))?x:(x=_.b[0]<p.b[0]?a(p.a,p.b,_.b):a(_.b,_.a,p.b))||p.idx-_.idx}function w(p,_,x){var b=s.le(p,x,h),M=p[b],m=M.upperIds,D=m[m.length-1];M.upperIds=[D],p.splice(b+1,0,new o(x.a,x.b,x.idx,[D],m))}function y(p,_,x){var b=x.a;x.a=x.b,x.b=b;var M=s.eq(p,x,h);p[M-1].upperIds=p[M].upperIds,p.splice(M,1)}v.exports=function(p,_){for(var x=p.length,b=_.length,M=[],m=0;m<x;++m)M.push(new l(p[m],null,0,m));for(m=0;m<b;++m){var D=_[m],S=p[D[0]],O=p[D[1]];S[0]<O[0]?M.push(new l(S,O,2,m),new l(O,S,1,m)):S[0]>O[0]&&M.push(new l(O,S,2,m),new l(S,O,1,m))}M.sort(u);for(var P=M[0].a[0]-(1+Math.abs(M[0].a[0]))*Math.pow(2,-52),R=[new o([P,1],[P,0],-1,[],[],[],[])],F=[],B=(m=0,M.length);m<B;++m){var J=M[m],z=J.type;0===z?g(F,R,p,J.a,J.idx):2===z?w(R,0,J):y(R,0,J)}return F}},743:function(v,c,i){"use strict";var s=i(5070);function a(u,d){this.stars=u,this.edges=d}v.exports=function(u,d){for(var g=new Array(u),h=0;h<u;++h)g[h]=[];return new a(g,d)};var o=a.prototype;function l(u,d,g){for(var h=1,w=u.length;h<w;h+=2)if(u[h-1]===d&&u[h]===g)return u[h-1]=u[w-2],u[h]=u[w-1],void(u.length=w-2)}o.isConstraint=function(){var u=[0,0];function d(g,h){return g[0]-h[0]||g[1]-h[1]}return function(g,h){return u[0]=Math.min(g,h),u[1]=Math.max(g,h),s.eq(this.edges,u,d)>=0}}(),o.removeTriangle=function(u,d,g){var h=this.stars;l(h[u],d,g),l(h[d],g,u),l(h[g],u,d)},o.addTriangle=function(u,d,g){var h=this.stars;h[u].push(d,g),h[d].push(g,u),h[g].push(u,d)},o.opposite=function(u,d){for(var g=this.stars[d],h=1,w=g.length;h<w;h+=2)if(g[h]===u)return g[h-1];return-1},o.flip=function(u,d){var g=this.opposite(u,d),h=this.opposite(d,u);this.removeTriangle(u,d,g),this.removeTriangle(d,u,h),this.addTriangle(u,h,g),this.addTriangle(d,g,h)},o.edges=function(){for(var u=this.stars,d=[],g=0,h=u.length;g<h;++g)for(var w=u[g],y=0,p=w.length;y<p;y+=2)d.push([w[y],w[y+1]]);return d},o.cells=function(){for(var u=this.stars,d=[],g=0,h=u.length;g<h;++g)for(var w=u[g],y=0,p=w.length;y<p;y+=2){var _=w[y],x=w[y+1];g<Math.min(_,x)&&d.push([g,_,x])}return d}},9887:function(v){"use strict";v.exports=function(c){for(var i=1,s=1;s<c.length;++s)for(var a=0;a<s;++a)if(c[s]<c[a])i=-i;else if(c[a]===c[s])return 0;return i}},9243:function(v,c,i){"use strict";var s=i(3094),a=i(6606);function o(d,g){for(var h=0,w=d.length,y=0;y<w;++y)h+=d[y]*g[y];return h}function l(d){var g=d.length;if(0===g)return[];var h=s([d.length+1,d.length+1],1),w=s([d.length+1],1);h[g][g]=0;for(var y=0;y<g;++y){for(var p=0;p<=y;++p)h[p][y]=h[y][p]=2*o(d[y],d[p]);w[y]=o(d[y],d[y])}var _=a(h,w),x=0,b=_[g+1];for(y=0;y<b.length;++y)x+=b[y];var M=new Array(g);for(y=0;y<g;++y){b=_[y];var m=0;for(p=0;p<b.length;++p)m+=b[p];M[y]=m/x}return M}function u(d){if(0===d.length)return[];for(var g=d[0].length,h=s([g]),w=l(d),y=0;y<d.length;++y)for(var p=0;p<g;++p)h[p]+=d[y][p]*w[y];return h}u.barycenetric=l,v.exports=u},1778:function(v,c,i){v.exports=function(a){for(var o=s(a),l=0,u=0;u<a.length;++u)for(var d=a[u],g=0;g<o.length;++g)l+=Math.pow(d[g]-o[g],2);return Math.sqrt(l/a.length)};var s=i(9243)},197:function(v,c,i){"use strict";v.exports=function(D,S,O){var P,z,G,H;if(O){P=S;for(var R=new Array(S.length),F=0;F<S.length;++F){var B=S[F];R[F]=[B[0],B[1],O[F]]}S=R}for(var J=(G=!!O,void 0,M(S,H=_(z=D,[],p(z)),G),!!H);m(D,S,!!O);)J=!0;if(O&&J)for(P.length=0,O.length=0,F=0;F<S.length;++F)P.push([(B=S[F])[0],B[1]]),O.push(B[2]);return J};var s=i(1731),a=i(2569),o=i(4434),l=i(5125),u=i(8846),d=i(7999),g=i(2826),h=i(8551),w=i(5528);function y(D){var S=d(D);return[h(S,-1/0),h(S,1/0)]}function p(D){for(var S=new Array(D.length),O=0;O<D.length;++O){var P=D[O];S[O]=[h(P[0],-1/0),h(P[1],-1/0),h(P[0],1/0),h(P[1],1/0)]}return S}function _(D,S,O){for(var P=S.length,R=new s(P),F=[],B=0;B<S.length;++B){var J=S[B],z=y(J[0]),$=y(J[1]);F.push([h(z[0],-1/0),h($[0],-1/0),h(z[1],1/0),h($[1],1/0)])}a(F,function(ue,ae){R.link(ue,ae)});var G=!0,H=new Array(P);for(B=0;B<P;++B)(K=R.find(B))!==B&&(G=!1,D[K]=[Math.min(D[B][0],D[K][0]),Math.min(D[B][1],D[K][1])]);if(G)return null;var X=0;for(B=0;B<P;++B){var K;(K=R.find(B))===B?(H[B]=X,D[X++]=D[B]):H[B]=-1}for(D.length=X,B=0;B<P;++B)H[B]<0&&(H[B]=H[R.find(B)]);return H}function x(D,S){return D[0]-S[0]||D[1]-S[1]}function b(D,S){return D[0]-S[0]||D[1]-S[1]||(D[2]<S[2]?-1:D[2]>S[2]?1:0)}function M(D,S,O){if(0!==D.length){if(S)for(var P=0;P<D.length;++P){var R=S[(B=D[P])[0]],F=S[B[1]];B[0]=Math.min(R,F),B[1]=Math.max(R,F)}else for(P=0;P<D.length;++P){var B;R=(B=D[P])[0],F=B[1],B[0]=Math.min(R,F),B[1]=Math.max(R,F)}D.sort(O?b:x);var J=1;for(P=1;P<D.length;++P){var z=D[P-1],$=D[P];($[0]!==z[0]||$[1]!==z[1]||O&&$[2]!==z[2])&&(D[J++]=$)}D.length=J}}function m(D,S,O){var z,$,H,P=function(z,$){for(var G=new Array($.length),H=0;H<$.length;++H){var X=$[H],K=z[X[0]],ue=z[X[1]];G[H]=[h(Math.min(K[0],ue[0]),-1/0),h(Math.min(K[1],ue[1]),-1/0),h(Math.max(K[0],ue[0]),1/0),h(Math.max(K[1],ue[1]),1/0)]}return G}(D,S),R=(z=D,$=S,H=[],a(P,function(X,K){var ue=$[X],ae=$[K];ue[0]!==ae[0]&&ue[0]!==ae[1]&&ue[1]!==ae[0]&&ue[1]!==ae[1]&&o(z[ue[0]],z[ue[1]],z[ae[0]],z[ae[1]])&&H.push([X,K])}),H),F=function(z,$,G,H){var X=[];return a(G,H,function(K,ue){var ae=$[K];if(ae[0]!==ue&&ae[1]!==ue){var ne=z[ue];o(z[ae[0]],z[ae[1]],ne,ne)&&X.push([K,ue])}}),X}(D,S,P,p(D)),B=function(z,$,G,H,X){var K,ue,ae=z.map(function(ge){return[l(ge[0]),l(ge[1])]});for(K=0;K<G.length;++K){var ne=G[K],Q=ne[1],ie=$[ue=ne[0]],le=$[Q],fe=w(g(z[ie[0]]),g(z[ie[1]]),g(z[le[0]]),g(z[le[1]]));if(fe){var he=z.length;z.push([d(fe[0]),d(fe[1])]),ae.push(fe),H.push([ue,he],[Q,he])}}for(H.sort(function(ge,me){if(ge[0]!==me[0])return ge[0]-me[0];var ce=ae[ge[1]],Ae=ae[me[1]];return u(ce[0],Ae[0])||u(ce[1],Ae[1])}),K=H.length-1;K>=0;--K){var pe=$[ue=(Ce=H[K])[0]],xe=pe[0],Ee=pe[1],Re=z[xe],ke=z[Ee];if((Re[0]-ke[0]||Re[1]-ke[1])<0){var Te=xe;xe=Ee,Ee=Te}pe[0]=xe;var we,je=pe[1]=Ce[1];for(X&&(we=pe[2]);K>0&&H[K-1][0]===ue;){var Ce,Ie=(Ce=H[--K])[1];$.push(X?[je,Ie,we]:[je,Ie]),je=Ie}$.push(X?[je,Ee,we]:[je,Ee])}return ae}(D,S,R,F,O),J=_(D,B);return M(S,J,O),!!J||R.length>0||F.length>0}},5528:function(v,c,i){"use strict";v.exports=function(w,y,p,_){var x=u(y,w),b=u(_,p),M=h(x,b);if(0===l(M))return null;var m=h(b,u(w,p)),D=a(m,M),S=g(x,D);return d(w,S)};var s=i(3962),a=i(9189),o=i(4354),l=i(4951),u=i(6695),d=i(7584),g=i(4469);function h(w,y){return o(s(w[0],y[1]),s(w[1],y[0]))}},5692:function(v){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(v,c,i){"use strict";var s=i(5692),a=i(3578);function o(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function l(d){for(var g,h="#",w=0;w<3;++w)h+=("00"+(g=(g=d[w]).toString(16))).substr(g.length);return h}function u(d){return"rgba("+d.join(",")+")"}v.exports=function(d){var g,h,w,y,p,_,x,b,M,m;if(d||(d={}),b=(d.nshades||72)-1,x=d.format||"hex",(_=d.colormap)||(_="jet"),"string"==typeof _){if(_=_.toLowerCase(),!s[_])throw Error(_+" not a supported colorscale");p=s[_]}else{if(!Array.isArray(_))throw Error("unsupported colormap option",_);p=_.slice()}if(p.length>b+1)throw new Error(_+" map requires nshades to be at least size "+p.length);M=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"==typeof d.alpha?[d.alpha,d.alpha]:[1,1],g=p.map(function(R){return Math.round(R.index*b)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var D=p.map(function(R,F){var B=p[F].index,J=p[F].rgb.slice();return 4===J.length&&J[3]>=0&&J[3]<=1||(J[3]=M[0]+(M[1]-M[0])*B),J}),S=[];for(m=0;m<g.length-1;++m){y=g[m+1]-g[m],h=D[m],w=D[m+1];for(var O=0;O<y;O++){var P=O/y;S.push([Math.round(a(h[0],w[0],P)),Math.round(a(h[1],w[1],P)),Math.round(a(h[2],w[2],P)),a(h[3],w[3],P)])}}return S.push(p[p.length-1].rgb.concat(M[1])),"hex"===x?S=S.map(l):"rgbaString"===x?S=S.map(u):"float"===x&&(S=S.map(o)),S}},9398:function(v,c,i){"use strict";v.exports=function(g,h,w,y){var p=s(h,w,y);if(0===p){var _=a(s(g,h,w)),x=a(s(g,h,y));if(_===x){if(0===_){var b=d(g,h,w);return b===d(g,h,y)?0:b?1:-1}return 0}return 0===x?_>0||d(g,h,y)?-1:1:0===_?x>0||d(g,h,w)?1:-1:a(x-_)}var M=s(g,h,w);return M>0?p>0&&s(g,h,y)>0?1:-1:M<0?p>0||s(g,h,y)>0?1:-1:s(g,h,y)>0||d(g,h,w)?1:-1};var s=i(417),a=i(7538),o=i(87),l=i(2019),u=i(9662);function d(g,h,w){var y=o(g[0],-h[0]),p=o(g[1],-h[1]),_=o(w[0],-h[0]),x=o(w[1],-h[1]),b=u(l(y,_),l(p,x));return b[b.length-1]>=0}},7538:function(v){"use strict";v.exports=function(c){return c<0?-1:c>0?1:0}},9209:function(v){v.exports=function(s,a){var o=s.length,l=s.length-a.length;if(l)return l;switch(o){case 0:return 0;case 1:return s[0]-a[0];case 2:return s[0]+s[1]-a[0]-a[1]||c(s[0],s[1])-c(a[0],a[1]);case 3:var u=s[0]+s[1],d=a[0]+a[1];if(l=u+s[2]-(d+a[2]))return l;var g=c(s[0],s[1]),h=c(a[0],a[1]);return c(g,s[2])-c(h,a[2])||c(g+s[2],u)-c(h+a[2],d);case 4:var w=s[0],y=s[1],p=s[2],_=s[3],x=a[0],b=a[1],M=a[2],m=a[3];return w+y+p+_-(x+b+M+m)||c(w,y,p,_)-c(x,b,M,m,x)||c(w+y,w+p,w+_,y+p,y+_,p+_)-c(x+b,x+M,x+m,b+M,b+m,M+m)||c(w+y+p,w+y+_,w+p+_,y+p+_)-c(x+b+M,x+b+m,x+M+m,b+M+m);default:for(var D=s.slice().sort(i),S=a.slice().sort(i),O=0;O<o;++O)if(l=D[O]-S[O])return l;return 0}};var c=Math.min;function i(s,a){return s-a}},1284:function(v,c,i){"use strict";var s=i(9209),a=i(9887);v.exports=function(o,l){return s(o,l)||a(o)-a(l)}},5537:function(v,c,i){"use strict";var s=i(8950),a=i(8722),o=i(3332);v.exports=function(l){var u=l.length;if(0===u)return[];if(1===u)return[[0]];var d=l[0].length;return 0===d?[]:1===d?s(l):2===d?a(l):o(l,d)}},8950:function(v){"use strict";v.exports=function(c){for(var i=0,s=0,a=1;a<c.length;++a)c[a][0]<c[i][0]&&(i=a),c[a][0]>c[s][0]&&(s=a);return i<s?[[i],[s]]:i>s?[[s],[i]]:[[i]]}},8722:function(v,c,i){"use strict";v.exports=function(a){var o=s(a),l=o.length;if(l<=2)return[];for(var u=new Array(l),d=o[l-1],g=0;g<l;++g){var h=o[g];u[g]=[d,h],d=h}return u};var s=i(3266)},3332:function(v,c,i){"use strict";v.exports=function(o,l){try{return s(o,!0)}catch{var u=a(o);if(u.length<=l)return[];var d=function(h,w){for(var y=h.length,p=new Array(y),_=0;_<w.length;++_)p[_]=h[w[_]];var x=w.length;for(_=0;_<y;++_)w.indexOf(_)<0&&(p[x++]=h[_]);return p}(o,u);return function(h,w){for(var y=h.length,p=w.length,_=0;_<y;++_)for(var x=h[_],b=0;b<x.length;++b){var M=x[b];if(M<p)x[b]=w[M];else{M-=p;for(var m=0;m<p;++m)M>=w[m]&&(M+=1);x[b]=M}}return h}(s(d,!0),u)}};var s=i(2183),a=i(2153)},9680:function(v){"use strict";v.exports=function(c,i,s,a,o,l){var u=o-1,d=o*o,g=u*u,h=(1+2*o)*g,w=o*g,y=d*(3-2*o),p=d*u;if(c.length){l||(l=new Array(c.length));for(var _=c.length-1;_>=0;--_)l[_]=h*c[_]+w*i[_]+y*s[_]+p*a[_];return l}return h*c+w*i+y*s+p*a},v.exports.derivative=function(c,i,s,a,o,l){var u=6*o*o-6*o,d=3*o*o-4*o+1,g=-6*o*o+6*o,h=3*o*o-2*o;if(c.length){l||(l=new Array(c.length));for(var w=c.length-1;w>=0;--w)l[w]=u*c[w]+d*i[w]+g*s[w]+h*a[w];return l}return u*c+d*i+g*s[w]+h*a}},4419:function(v,c,i){"use strict";var s=i(2183),a=i(1215);function o(u,d){this.point=u,this.index=d}function l(u,d){for(var g=u.point,h=d.point,w=g.length,y=0;y<w;++y){var p=h[y]-g[y];if(p)return p}return 0}v.exports=function(u,d){var g=u.length;if(0===g)return[];var h=u[0].length;if(h<1)return[];if(1===h)return function(B,J,z){if(1===B)return z?[[-1,0]]:[];var $=J.map(function(ue,ae){return[ue[0],ae]});$.sort(function(ue,ae){return ue[0]-ae[0]});for(var G=new Array(B-1),H=1;H<B;++H)G[H-1]=[$[H-1][1],$[H][1]];return z&&G.push([-1,G[0][1]],[G[B-1][1],-1]),G}(g,u,d);for(var w=new Array(g),y=1,p=0;p<g;++p){for(var _=u[p],x=new Array(h+1),b=0,M=0;M<h;++M){var m=_[M];x[M]=m,b+=m*m}x[h]=b,w[p]=new o(x,p),y=Math.max(b,y)}a(w,l),g=w.length;var D=new Array(g+h+1),S=new Array(g+h+1),O=(h+1)*(h+1)*y,P=new Array(h+1);for(p=0;p<=h;++p)P[p]=0;for(P[h]=O,D[0]=P.slice(),S[0]=-1,p=0;p<=h;++p)(x=P.slice())[p]=1,D[p+1]=x,S[p+1]=-1;for(p=0;p<g;++p){var R=w[p];D[p+h+1]=R.point,S[p+h+1]=R.index}var F=s(D,!1);if(F=F.filter(d?function(B){for(var J=0,z=0;z<=h;++z){var $=S[B[z]];if($<0&&++J>=2)return!1;B[z]=$}return!0}:function(B){for(var J=0;J<=h;++J){var z=S[B[J]];if(z<0)return!1;B[J]=z}return!0}),1&h)for(p=0;p<F.length;++p)x=(R=F[p])[0],R[0]=R[1],R[1]=x;return F}},8362:function(v){var c=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),s=new Uint32Array(i.buffer);i[0]=1,c=!0,1072693248===s[1]?(v.exports=function(o){return i[0]=o,[s[0],s[1]]},v.exports.pack=function(o,l){return s[0]=o,s[1]=l,i[0]},v.exports.lo=function(o){return i[0]=o,s[0]},v.exports.hi=function(o){return i[0]=o,s[1]}):1072693248===s[0]?(v.exports=function(o){return i[0]=o,[s[1],s[0]]},v.exports.pack=function(o,l){return s[1]=o,s[0]=l,i[0]},v.exports.lo=function(o){return i[0]=o,s[1]},v.exports.hi=function(o){return i[0]=o,s[0]}):c=!1}if(!c){var a=new Buffer(8);v.exports=function(o){return a.writeDoubleLE(o,0,!0),[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]},v.exports.pack=function(o,l){return a.writeUInt32LE(o,0,!0),a.writeUInt32LE(l,4,!0),a.readDoubleLE(0,!0)},v.exports.lo=function(o){return a.writeDoubleLE(o,0,!0),a.readUInt32LE(0,!0)},v.exports.hi=function(o){return a.writeDoubleLE(o,0,!0),a.readUInt32LE(4,!0)}}v.exports.sign=function(o){return v.exports.hi(o)>>>31},v.exports.exponent=function(o){return(v.exports.hi(o)<<1>>>21)-1023},v.exports.fraction=function(o){var l=v.exports.lo(o),u=v.exports.hi(o),d=1048575&u;return 2146435072&u&&(d+=1048576),[l,d]},v.exports.denormalized=function(o){return!(2146435072&v.exports.hi(o))}},3094:function(v){"use strict";function c(i,s,a){var o=0|i[a];if(o<=0)return[];var l,u=new Array(o);if(a===i.length-1)for(l=0;l<o;++l)u[l]=s;else for(l=0;l<o;++l)u[l]=c(i,s,a+1);return u}v.exports=function(i,s){switch(void 0===s&&(s=0),typeof i){case"number":if(i>0)return function(a,o){var l,u;for(l=new Array(a),u=0;u<a;++u)l[u]=o;return l}(0|i,s);break;case"object":if("number"==typeof i.length)return c(i,s,0)}return[]}},8348:function(v,c,i){"use strict";v.exports=function(a,o){var l=a.length;if("number"!=typeof o){o=0;for(var u=0;u<l;++u){var d=a[u];o=Math.max(o,d[0],d[1])}o=1+(0|o)}o|=0;var g=new Array(o);for(u=0;u<o;++u)g[u]=[];for(u=0;u<l;++u)g[(d=a[u])[0]].push(d[1]),g[d[1]].push(d[0]);for(var h=0;h<o;++h)s(g[h],function(w,y){return w-y});return g};var s=i(1215)},5795:function(v){"use strict";v.exports=function(c,i,s){var a=i||0,o=s||1;return[[c[12]+c[0],c[13]+c[1],c[14]+c[2],c[15]+c[3]],[c[12]-c[0],c[13]-c[1],c[14]-c[2],c[15]-c[3]],[c[12]+c[4],c[13]+c[5],c[14]+c[6],c[15]+c[7]],[c[12]-c[4],c[13]-c[5],c[14]-c[6],c[15]-c[7]],[a*c[12]+c[8],a*c[13]+c[9],a*c[14]+c[10],a*c[15]+c[11]],[o*c[12]-c[8],o*c[13]-c[9],o*c[14]-c[10],o*c[15]-c[11]]]}},8444:function(v,c,i){"use strict";v.exports=function(g,h,w){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof g?new l(y=d(g),y,0):new l(g,d(g.length),0);case 2:var y;if("number"==typeof h)return new l(g,y=d(g.length),+h);w=0;case 3:if(g.length!==h.length)throw new Error("state and velocity lengths must match");return new l(g,h,w)}};var s=i(9680),a=i(5070);function o(g,h,w){return Math.min(h,Math.max(g,w))}function l(g,h,w){this.dimension=g.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var y=0;y<this.dimension;++y)this.bounds[0][y]=-1/0,this.bounds[1][y]=1/0;this._state=g.slice().reverse(),this._velocity=h.slice().reverse(),this._time=[w],this._scratch=[g.slice(),g.slice(),g.slice(),g.slice(),g.slice()]}var u=l.prototype;function d(g){for(var h=new Array(g),w=0;w<g;++w)h[w]=0;return h}u.flush=function(g){var h=a.gt(this._time,g)-1;h<=0||(this._time.splice(0,h),this._state.splice(0,h*this.dimension),this._velocity.splice(0,h*this.dimension))},u.curve=function(g){var h=this._time,w=h.length,y=a.le(h,g),p=this._scratch[0],_=this._state,x=this._velocity,b=this.dimension,M=this.bounds;if(y<0)for(var m=b-1,D=0;D<b;++D,--m)p[D]=_[m];else if(y>=w-1){m=_.length-1;var S=g-h[w-1];for(D=0;D<b;++D,--m)p[D]=_[m]+S*x[m]}else{m=b*(y+1)-1;var O=h[y],P=h[y+1]-O||1,R=this._scratch[1],F=this._scratch[2],B=this._scratch[3],J=this._scratch[4],z=!0;for(D=0;D<b;++D,--m)R[D]=_[m],B[D]=x[m]*P,F[D]=_[m+b],J[D]=x[m+b]*P,z=z&&R[D]===F[D]&&B[D]===J[D]&&0===B[D];if(z)for(D=0;D<b;++D)p[D]=R[D];else s(R,B,F,J,(g-O)/P,p)}var $=M[0],G=M[1];for(D=0;D<b;++D)p[D]=o($[D],G[D],p[D]);return p},u.dcurve=function(g){var h=this._time,w=h.length,y=a.le(h,g),p=this._scratch[0],_=this._state,x=this._velocity,b=this.dimension;if(y>=w-1)for(var M=_.length-1,m=0;m<b;++m,--M)p[m]=x[M];else{M=b*(y+1)-1;var D=h[y],S=h[y+1]-D||1,O=this._scratch[1],P=this._scratch[2],R=this._scratch[3],F=this._scratch[4],B=!0;for(m=0;m<b;++m,--M)O[m]=_[M],R[m]=x[M]*S,P[m]=_[M+b],F[m]=x[M+b]*S,B=B&&O[m]===P[m]&&R[m]===F[m]&&0===R[m];if(B)for(m=0;m<b;++m)p[m]=0;else for(s.derivative(O,R,P,F,(g-D)/S,p),m=0;m<b;++m)p[m]/=S}return p},u.lastT=function(){var g=this._time;return g[g.length-1]},u.stable=function(){for(var g=this._velocity,h=g.length,w=this.dimension-1;w>=0;--w)if(g[--h])return!1;return!0},u.jump=function(g){var h=this.lastT(),w=this.dimension;if(!(g<h||arguments.length!==w+1)){var y=this._state,p=this._velocity,_=y.length-this.dimension,x=this.bounds,b=x[0],M=x[1];this._time.push(h,g);for(var m=0;m<2;++m)for(var D=0;D<w;++D)y.push(y[_++]),p.push(0);for(this._time.push(g),D=w;D>0;--D)y.push(o(b[D-1],M[D-1],arguments[D])),p.push(0)}},u.push=function(g){var h=this.lastT(),w=this.dimension;if(!(g<h||arguments.length!==w+1)){var y=this._state,p=this._velocity,_=y.length-this.dimension,x=g-h,b=this.bounds,M=b[0],m=b[1],D=x>1e-6?1/x:0;this._time.push(g);for(var S=w;S>0;--S){var O=o(M[S-1],m[S-1],arguments[S]);y.push(O),p.push((O-y[_++])*D)}}},u.set=function(g){var h=this.dimension;if(!(g<this.lastT()||arguments.length!==h+1)){var w=this._state,y=this._velocity,p=this.bounds,_=p[0],x=p[1];this._time.push(g);for(var b=h;b>0;--b)w.push(o(_[b-1],x[b-1],arguments[b])),y.push(0)}},u.move=function(g){var h=this.lastT(),w=this.dimension;if(!(g<=h||arguments.length!==w+1)){var y=this._state,p=this._velocity,_=y.length-this.dimension,x=this.bounds,b=x[0],M=x[1],m=g-h,D=m>1e-6?1/m:0;this._time.push(g);for(var S=w;S>0;--S){var O=arguments[S];y.push(o(b[S-1],M[S-1],y[_++]+O)),p.push(O*D)}}},u.idle=function(g){var h=this.lastT();if(!(g<h)){var w=this.dimension,y=this._state,p=this._velocity,_=y.length-w,x=this.bounds,b=x[0],M=x[1],m=g-h;this._time.push(g);for(var D=w-1;D>=0;--D)y.push(o(b[D],M[D],y[_]+m*p[_])),p.push(0),_+=1}}},7080:function(v){"use strict";function c(_,x,b,M,m,D){this._color=_,this.key=x,this.value=b,this.left=M,this.right=m,this._count=D}function i(_){return new c(_._color,_.key,_.value,_.left,_.right,_._count)}function s(_,x){return new c(_,x.key,x.value,x.left,x.right,x._count)}function a(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function o(_,x){this._compare=_,this.root=x}v.exports=function(_){return new o(_||p,null)};var l=o.prototype;function u(_,x){var b;return x.left&&(b=u(_,x.left))?b:(b=_(x.key,x.value))||(x.right?u(_,x.right):void 0)}function d(_,x,b,M){var m;return x(_,M.key)<=0&&(M.left&&(m=d(_,x,b,M.left))||(m=b(M.key,M.value)))?m:M.right?d(_,x,b,M.right):void 0}function g(_,x,b,M,m){var D,S=b(_,m.key),O=b(x,m.key);return S<=0&&(m.left&&(D=g(_,x,b,M,m.left))||O>0&&(D=M(m.key,m.value)))?D:O>0&&m.right?g(_,x,b,M,m.right):void 0}function h(_,x){this.tree=_,this._stack=x}Object.defineProperty(l,"keys",{get:function(){var _=[];return this.forEach(function(x,b){_.push(x)}),_}}),Object.defineProperty(l,"values",{get:function(){var _=[];return this.forEach(function(x,b){_.push(b)}),_}}),Object.defineProperty(l,"length",{get:function(){return this.root?this.root._count:0}}),l.insert=function(_,x){for(var b=this._compare,M=this.root,m=[],D=[];M;){var S=b(_,M.key);m.push(M),D.push(S),M=S<=0?M.left:M.right}m.push(new c(0,_,x,null,null,1));for(var O=m.length-2;O>=0;--O)M=m[O],m[O]=D[O]<=0?new c(M._color,M.key,M.value,m[O+1],M.right,M._count+1):new c(M._color,M.key,M.value,M.left,m[O+1],M._count+1);for(O=m.length-1;O>1;--O){var P=m[O-1];if(M=m[O],1===P._color||1===M._color)break;var R=m[O-2];if(R.left===P)if(P.left===M){if(!(F=R.right)||0!==F._color){R._color=0,R.left=P.right,P._color=1,P.right=R,m[O-2]=P,m[O-1]=M,a(R),a(P),O>=3&&((B=m[O-3]).left===R?B.left=P:B.right=P);break}P._color=1,R.right=s(1,F),R._color=0,O-=1}else{if(!(F=R.right)||0!==F._color){P.right=M.left,R._color=0,R.left=M.right,M._color=1,M.left=P,M.right=R,m[O-2]=M,m[O-1]=P,a(R),a(P),a(M),O>=3&&((B=m[O-3]).left===R?B.left=M:B.right=M);break}P._color=1,R.right=s(1,F),R._color=0,O-=1}else if(P.right===M){if(!(F=R.left)||0!==F._color){R._color=0,R.right=P.left,P._color=1,P.left=R,m[O-2]=P,m[O-1]=M,a(R),a(P),O>=3&&((B=m[O-3]).right===R?B.right=P:B.left=P);break}P._color=1,R.left=s(1,F),R._color=0,O-=1}else{var F;if(!(F=R.left)||0!==F._color){var B;P.left=M.right,R._color=0,R.right=M.left,M._color=1,M.right=P,M.left=R,m[O-2]=M,m[O-1]=P,a(R),a(P),a(M),O>=3&&((B=m[O-3]).right===R?B.right=M:B.left=M);break}P._color=1,R.left=s(1,F),R._color=0,O-=1}}return m[0]._color=1,new o(b,m[0])},l.forEach=function(_,x,b){if(this.root)switch(arguments.length){case 1:return u(_,this.root);case 2:return d(x,this._compare,_,this.root);case 3:return this._compare(x,b)>=0?void 0:g(x,b,this._compare,_,this.root)}},Object.defineProperty(l,"begin",{get:function(){for(var _=[],x=this.root;x;)_.push(x),x=x.left;return new h(this,_)}}),Object.defineProperty(l,"end",{get:function(){for(var _=[],x=this.root;x;)_.push(x),x=x.right;return new h(this,_)}}),l.at=function(_){if(_<0)return new h(this,[]);for(var x=this.root,b=[];;){if(b.push(x),x.left){if(_<x.left._count){x=x.left;continue}_-=x.left._count}if(!_)return new h(this,b);if(_-=1,!x.right||_>=x.right._count)break;x=x.right}return new h(this,[])},l.ge=function(_){for(var x=this._compare,b=this.root,M=[],m=0;b;){var D=x(_,b.key);M.push(b),D<=0&&(m=M.length),b=D<=0?b.left:b.right}return M.length=m,new h(this,M)},l.gt=function(_){for(var x=this._compare,b=this.root,M=[],m=0;b;){var D=x(_,b.key);M.push(b),D<0&&(m=M.length),b=D<0?b.left:b.right}return M.length=m,new h(this,M)},l.lt=function(_){for(var x=this._compare,b=this.root,M=[],m=0;b;){var D=x(_,b.key);M.push(b),D>0&&(m=M.length),b=D<=0?b.left:b.right}return M.length=m,new h(this,M)},l.le=function(_){for(var x=this._compare,b=this.root,M=[],m=0;b;){var D=x(_,b.key);M.push(b),D>=0&&(m=M.length),b=D<0?b.left:b.right}return M.length=m,new h(this,M)},l.find=function(_){for(var x=this._compare,b=this.root,M=[];b;){var m=x(_,b.key);if(M.push(b),0===m)return new h(this,M);b=m<=0?b.left:b.right}return new h(this,[])},l.remove=function(_){var x=this.find(_);return x?x.remove():this},l.get=function(_){for(var x=this._compare,b=this.root;b;){var M=x(_,b.key);if(0===M)return b.value;b=M<=0?b.left:b.right}};var w=h.prototype;function y(_,x){_.key=x.key,_.value=x.value,_.left=x.left,_.right=x.right,_._color=x._color,_._count=x._count}function p(_,x){return _<x?-1:_>x?1:0}Object.defineProperty(w,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(w,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),w.clone=function(){return new h(this.tree,this._stack.slice())},w.remove=function(){var _=this._stack;if(0===_.length)return this.tree;var x=new Array(_.length),b=_[_.length-1];x[x.length-1]=new c(b._color,b.key,b.value,b.left,b.right,b._count);for(var M=_.length-2;M>=0;--M)x[M]=(b=_[M]).left===_[M+1]?new c(b._color,b.key,b.value,x[M+1],b.right,b._count):new c(b._color,b.key,b.value,b.left,x[M+1],b._count);if((b=x[x.length-1]).left&&b.right){var m=x.length;for(b=b.left;b.right;)x.push(b),b=b.right;var D=x[m-1];for(x.push(new c(b._color,D.key,D.value,b.left,b.right,b._count)),x[m-1].key=b.key,x[m-1].value=b.value,M=x.length-2;M>=m;--M)x[M]=new c((b=x[M])._color,b.key,b.value,b.left,x[M+1],b._count);x[m-1].left=x[m]}if(0===(b=x[x.length-1])._color){var S=x[x.length-2];for(S.left===b?S.left=null:S.right===b&&(S.right=null),x.pop(),M=0;M<x.length;++M)x[M]._count--;return new o(this.tree._compare,x[0])}if(b.left||b.right){for(b.left?y(b,b.left):b.right&&y(b,b.right),b._color=1,M=0;M<x.length-1;++M)x[M]._count--;return new o(this.tree._compare,x[0])}if(1===x.length)return new o(this.tree._compare,null);for(M=0;M<x.length;++M)x[M]._count--;var O=x[x.length-2];return function(P){for(var R,F,B,J,z=P.length-1;z>=0;--z){if(R=P[z],0===z)return void(R._color=1);if((F=P[z-1]).left===R){if((B=F.right).right&&0===B.right._color)return J=(B=F.right=i(B)).right=i(B.right),F.right=B.left,B.left=F,B.right=J,B._color=F._color,R._color=1,F._color=1,J._color=1,a(F),a(B),z>1&&(($=P[z-2]).left===F?$.left=B:$.right=B),void(P[z-1]=B);if(B.left&&0===B.left._color)return J=(B=F.right=i(B)).left=i(B.left),F.right=J.left,B.left=J.right,J.left=F,J.right=B,J._color=F._color,F._color=1,B._color=1,R._color=1,a(F),a(B),a(J),z>1&&(($=P[z-2]).left===F?$.left=J:$.right=J),void(P[z-1]=J);if(1===B._color){if(0===F._color)return F._color=1,void(F.right=s(0,B));F.right=s(0,B);continue}B=i(B),F.right=B.left,B.left=F,B._color=F._color,F._color=0,a(F),a(B),z>1&&(($=P[z-2]).left===F?$.left=B:$.right=B),P[z-1]=B,P[z]=F,z+1<P.length?P[z+1]=R:P.push(R),z+=2}else{if((B=F.left).left&&0===B.left._color)return J=(B=F.left=i(B)).left=i(B.left),F.left=B.right,B.right=F,B.left=J,B._color=F._color,R._color=1,F._color=1,J._color=1,a(F),a(B),z>1&&(($=P[z-2]).right===F?$.right=B:$.left=B),void(P[z-1]=B);if(B.right&&0===B.right._color)return J=(B=F.left=i(B)).right=i(B.right),F.left=J.right,B.right=J.left,J.right=F,J.left=B,J._color=F._color,F._color=1,B._color=1,R._color=1,a(F),a(B),a(J),z>1&&(($=P[z-2]).right===F?$.right=J:$.left=J),void(P[z-1]=J);if(1===B._color){if(0===F._color)return F._color=1,void(F.left=s(0,B));F.left=s(0,B);continue}var $;B=i(B),F.left=B.right,B.right=F,B._color=F._color,F._color=0,a(F),a(B),z>1&&(($=P[z-2]).right===F?$.right=B:$.left=B),P[z-1]=B,P[z]=F,z+1<P.length?P[z+1]=R:P.push(R),z+=2}}}(x),O.left===b?O.left=null:O.right=null,new o(this.tree._compare,x[0])},Object.defineProperty(w,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(w,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(w,"index",{get:function(){var _=0,x=this._stack;if(0===x.length){var b=this.tree.root;return b?b._count:0}x[x.length-1].left&&(_=x[x.length-1].left._count);for(var M=x.length-2;M>=0;--M)x[M+1]===x[M].right&&(++_,x[M].left&&(_+=x[M].left._count));return _},enumerable:!0}),w.next=function(){var _=this._stack;if(0!==_.length){var x=_[_.length-1];if(x.right)for(x=x.right;x;)_.push(x),x=x.left;else for(_.pop();_.length>0&&_[_.length-1].right===x;)x=_[_.length-1],_.pop()}},Object.defineProperty(w,"hasNext",{get:function(){var _=this._stack;if(0===_.length)return!1;if(_[_.length-1].right)return!0;for(var x=_.length-1;x>0;--x)if(_[x-1].left===_[x])return!0;return!1}}),w.update=function(_){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var b=new Array(x.length),M=x[x.length-1];b[b.length-1]=new c(M._color,M.key,_,M.left,M.right,M._count);for(var m=x.length-2;m>=0;--m)b[m]=(M=x[m]).left===x[m+1]?new c(M._color,M.key,M.value,b[m+1],M.right,M._count):new c(M._color,M.key,M.value,M.left,b[m+1],M._count);return new o(this.tree._compare,b[0])},w.prev=function(){var _=this._stack;if(0!==_.length){var x=_[_.length-1];if(x.left)for(x=x.left;x;)_.push(x),x=x.right;else for(_.pop();_.length>0&&_[_.length-1].left===x;)x=_[_.length-1],_.pop()}},Object.defineProperty(w,"hasPrev",{get:function(){var _=this._stack;if(0===_.length)return!1;if(_[_.length-1].left)return!0;for(var x=_.length-1;x>0;--x)if(_[x-1].right===_[x])return!0;return!1}})},7453:function(v,c,i){"use strict";v.exports=function(S,O){var P=new h(S);return P.update(O),P};var s=i(9557),a=i(1681),o=i(1011),l=i(2864),u=i(8468),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function g(S,O){return S[0]=O[0],S[1]=O[1],S[2]=O[2],S}function h(S){this.gl=S,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=o(S)}var w=h.prototype;function y(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}w.update=function(S){function O(ue,ae,ne){if(ne in S){var Q,ie=S[ne],le=this[ne];this[ne]=Q=(ue?Array.isArray(ie)&&Array.isArray(ie[0]):Array.isArray(ie))?[ae(ie[0]),ae(ie[1]),ae(ie[2])]:[ae(ie),ae(ie),ae(ie)];for(var fe=0;fe<3;++fe)if(Q[fe]!==le[fe])return!0}return!1}S=S||{};var P,R=O.bind(this,!1,Number),F=O.bind(this,!1,Boolean),B=O.bind(this,!1,String),J=O.bind(this,!0,function(ue){if(Array.isArray(ue)){if(3===ue.length)return[+ue[0],+ue[1],+ue[2],1];if(4===ue.length)return[+ue[0],+ue[1],+ue[2],+ue[3]]}return[0,0,0,1]}),z=!1,$=!1;if("bounds"in S)for(var G=S.bounds,H=0;H<2;++H)for(var X=0;X<3;++X)G[H][X]!==this.bounds[H][X]&&($=!0),this.bounds[H][X]=G[H][X];if("ticks"in S)for(P=S.ticks,z=!0,this.autoTicks=!1,H=0;H<3;++H)this.tickSpacing[H]=0;else R("tickSpacing")&&(this.autoTicks=!0,$=!0);if(this._firstInit&&("ticks"in S||"tickSpacing"in S||(this.autoTicks=!0),$=!0,z=!0,this._firstInit=!1),$&&this.autoTicks&&(P=u.create(this.bounds,this.tickSpacing),z=!0),z){for(H=0;H<3;++H)P[H].sort(function(ue,ae){return ue.x-ae.x});u.equal(P,this.ticks)?z=!1:this.ticks=P}F("tickEnable"),B("tickFont")&&(z=!0),R("tickSize"),R("tickAngle"),R("tickPad"),J("tickColor");var K=B("labels");B("labelFont")&&(K=!0),F("labelEnable"),R("labelSize"),R("labelPad"),J("labelColor"),F("lineEnable"),F("lineMirror"),R("lineWidth"),J("lineColor"),F("lineTickEnable"),F("lineTickMirror"),R("lineTickLength"),R("lineTickWidth"),J("lineTickColor"),F("gridEnable"),R("gridWidth"),J("gridColor"),F("zeroEnable"),J("zeroLineColor"),R("zeroLineWidth"),F("backgroundEnable"),J("backgroundColor"),this._text?this._text&&(K||z)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=s(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&z&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};var p=[new y,new y,new y];function _(S,O,P,R,F){for(var B=S.primalOffset,J=S.primalMinor,z=S.mirrorOffset,$=S.mirrorMinor,G=R[O],H=0;H<3;++H)if(O!==H){var X=B,K=z,ue=J,ae=$;G&1<<H&&(X=z,K=B,ue=$,ae=J),X[H]=P[0][H],K[H]=P[1][H],F[H]>0?(ue[H]=-1,ae[H]=0):(ue[H]=0,ae[H]=1)}}var x=[0,0,0],b={model:d,view:d,projection:d,_ortho:!1};w.isOpaque=function(){return!0},w.isTransparent=function(){return!1},w.drawTransparent=function(S){};var M=[0,0,0],m=[0,0,0],D=[0,0,0];w.draw=function(S){for(var O=this.gl,P=(S=S||b).model||d,R=S.view||d,F=S.projection||d,B=this.bounds,J=S._ortho||!1,z=l(P,R,F,B,J),$=z.cubeEdges,G=z.axis,ae=(J?2:1)*this.pixelRatio*(F[3]*R[12]+F[7]*R[13]+F[11]*R[14]+F[15]*R[15])/O.drawingBufferHeight,ne=0;ne<3;++ne)this.lastCubeProps.cubeEdges[ne]=$[ne],this.lastCubeProps.axis[ne]=G[ne];var Q=p;for(ne=0;ne<3;++ne)_(p[ne],ne,this.bounds,$,G);O=this.gl;var ie,le,fe,Ne,De,qe,Ke,be,Oe,Le,Ue,Ze,he=x;for(ne=0;ne<3;++ne)he[ne]=this.backgroundEnable[ne]?G[ne]:0;for(this._background.draw(P,R,F,B,he,this.backgroundColor),this._lines.bind(P,R,F,this),ne=0;ne<3;++ne){var pe=[0,0,0];pe[ne]=G[ne]>0?B[1][ne]:B[0][ne];for(var xe=0;xe<2;++xe){var Ee=(ne+1+xe)%3,Re=(ne+1+(1^xe))%3;this.gridEnable[Ee]&&this._lines.drawGrid(Ee,Re,this.bounds,pe,this.gridColor[Ee],this.gridWidth[Ee]*this.pixelRatio)}for(xe=0;xe<2;++xe)Ee=(ne+1+xe)%3,this.zeroEnable[Re=(ne+1+(1^xe))%3]&&Math.min(B[0][Re],B[1][Re])<=0&&Math.max(B[0][Re],B[1][Re])>=0&&this._lines.drawZero(Ee,Re,this.bounds,pe,this.zeroLineColor[Re],this.zeroLineWidth[Re]*this.pixelRatio)}for(ne=0;ne<3;++ne){this.lineEnable[ne]&&this._lines.drawAxisLine(ne,this.bounds,Q[ne].primalOffset,this.lineColor[ne],this.lineWidth[ne]*this.pixelRatio),this.lineMirror[ne]&&this._lines.drawAxisLine(ne,this.bounds,Q[ne].mirrorOffset,this.lineColor[ne],this.lineWidth[ne]*this.pixelRatio);var ke=g(M,Q[ne].primalMinor),Te=g(m,Q[ne].mirrorMinor),we=this.lineTickLength;for(xe=0;xe<3;++xe){var je=ae/P[5*xe];ke[xe]*=we[xe]*je,Te[xe]*=we[xe]*je}this.lineTickEnable[ne]&&this._lines.drawAxisTicks(ne,Q[ne].primalOffset,ke,this.lineTickColor[ne],this.lineTickWidth[ne]*this.pixelRatio),this.lineTickMirror[ne]&&this._lines.drawAxisTicks(ne,Q[ne].mirrorOffset,Te,this.lineTickColor[ne],this.lineTickWidth[ne]*this.pixelRatio)}function Ce(Ne){(fe=[0,0,0])[Ne]=1}for(this._lines.unbind(),this._text.bind(P,R,F,this.pixelRatio),ne=0;ne<3;++ne){var ge=Q[ne].primalMinor,me=Q[ne].mirrorMinor,ce=g(D,Q[ne].primalOffset);for(xe=0;xe<3;++xe)this.lineTickEnable[ne]&&(ce[xe]+=ae*ge[xe]*Math.max(this.lineTickLength[xe],0)/P[5*xe]);var Ae=[0,0,0];if(Ae[ne]=1,this.tickEnable[ne]){for(-3600===this.tickAngle[ne]?(this.tickAngle[ne]=0,this.tickAlign[ne]="auto"):this.tickAlign[ne]=-1,ie[0]="auto"===(ie=[this.tickAlign[ne],.5,le=1])[0]?0:parseInt(""+ie[0]),fe=[0,0,0],Ke=void 0,be=void 0,Oe=void 0,Le=void 0,Ue=void 0,Ze=void 0,Le=(De=ge)[be=((Ne=ne)+2)%3],Ue=(qe=me)[Ke=(Ne+1)%3],Ze=qe[be],(Oe=De[Ke])>0&&Ze>0||Oe>0&&Ze<0||Oe<0&&Ze>0||Oe<0&&Ze<0?Ce(Ke):(Le>0&&Ue>0||Le>0&&Ue<0||Le<0&&Ue>0||Le<0&&Ue<0)&&Ce(be),xe=0;xe<3;++xe)ce[xe]+=ae*ge[xe]*this.tickPad[xe]/P[5*xe];this._text.drawTicks(ne,this.tickSize[ne],this.tickAngle[ne],ce,this.tickColor[ne],Ae,fe,ie)}if(this.labelEnable[ne]){for(le=0,fe=[0,0,0],this.labels[ne].length>4&&(Ce(ne),le=1),ie[0]="auto"===(ie=[this.labelAlign[ne],.5,le])[0]?0:parseInt(""+ie[0]),xe=0;xe<3;++xe)ce[xe]+=ae*ge[xe]*this.labelPad[xe]/P[5*xe];ce[ne]+=.5*(B[0][ne]+B[1][ne]),this._text.drawLabel(ne,this.labelSize[ne],this.labelAngle[ne],ce,this.labelColor[ne],[0,0,0],fe,ie)}}this._text.unbind()},w.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(v,c,i){"use strict";v.exports=function(d){for(var g=[],h=[],w=0,y=0;y<3;++y)for(var p=(y+1)%3,_=(y+2)%3,x=[0,0,0],b=[0,0,0],M=-1;M<=1;M+=2){h.push(w,w+2,w+1,w+1,w+2,w+3),x[y]=M,b[y]=M;for(var m=-1;m<=1;m+=2){x[p]=m;for(var D=-1;D<=1;D+=2)x[_]=D,g.push(x[0],x[1],x[2],b[0],b[1],b[2]),w+=1}var S=p;p=_,_=S}var O=s(d,new Float32Array(g)),P=s(d,new Uint16Array(h),d.ELEMENT_ARRAY_BUFFER),R=a(d,[{buffer:O,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:O,type:d.FLOAT,size:3,offset:12,stride:24}],P),F=o(d);return F.attributes.position.location=0,F.attributes.normal.location=1,new l(d,O,R,F)};var s=i(5827),a=i(2944),o=i(1943).bg;function l(d,g,h,w){this.gl=d,this.buffer=g,this.vao=h,this.shader=w}var u=l.prototype;u.draw=function(d,g,h,w,y,p){for(var _=!1,x=0;x<3;++x)_=_||y[x];if(_){var b=this.gl;b.enable(b.POLYGON_OFFSET_FILL),b.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:g,projection:h,bounds:w,enable:y,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),b.disable(b.POLYGON_OFFSET_FILL)}},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(v,c,i){"use strict";v.exports=function(m,D,S,O,P){a(u,D,m),a(u,S,u);for(var R=0,F=0;F<2;++F){h[2]=O[F][2];for(var B=0;B<2;++B){h[1]=O[B][1];for(var J=0;J<2;++J)h[0]=O[J][0],y(d[R],h,u),R+=1}}var z=-1;for(F=0;F<8;++F){for(var $=d[F][3],G=0;G<3;++G)g[F][G]=d[F][G]/$;P&&(g[F][2]*=-1),$<0&&(z<0||g[F][2]<g[z][2])&&(z=F)}if(z<0){z=0;for(var H=0;H<3;++H){for(var X=(H+2)%3,K=(H+1)%3,ue=-1,ae=-1,ne=0;ne<2;++ne){var Q=(le=ne<<H)+(ne<<X)+(1-ne<<K),ie=le+(1-ne<<X)+(ne<<K);l(g[le],g[Q],g[ie],w)<0||(ne?ue=1:ae=1)}if(ue<0||ae<0)ae>ue&&(z|=1<<H);else{for(ne=0;ne<2;++ne){Q=(le=ne<<H)+(ne<<X)+(1-ne<<K);var le,fe=_([d[le],d[Q],d[ie=le+(1-ne<<X)+(ne<<K)],d[le+(1<<X)+(1<<K)]]);ne?ue=fe:ae=fe}ae>ue&&(z|=1<<H)}}}var he=7^z,pe=-1;for(F=0;F<8;++F)F!==z&&F!==he&&(pe<0||g[pe][1]>g[F][1])&&(pe=F);var xe=-1;for(F=0;F<3;++F)(Re=pe^1<<F)!==z&&Re!==he&&(xe<0&&(xe=Re),(K=g[Re])[0]<g[xe][0]&&(xe=Re));var Ee=-1;for(F=0;F<3;++F){var Re;(Re=pe^1<<F)!==z&&Re!==he&&Re!==xe&&(Ee<0&&(Ee=Re),(K=g[Re])[0]>g[Ee][0]&&(Ee=Re))}var ke=x;ke[0]=ke[1]=ke[2]=0,ke[s.log2(xe^pe)]=pe&xe,ke[s.log2(pe^Ee)]=pe&Ee;var Te=7^Ee;Te===z||Te===he?ke[s.log2(Ee^(Te=7^xe))]=Te&Ee:ke[s.log2(xe^Te)]=Te&xe;var we=b,je=z;for(H=0;H<3;++H)we[H]=je&1<<H?-1:1;return M};var s=i(2288),a=i(104),o=i(4670),l=i(417),u=new Array(16),d=new Array(8),g=new Array(8),h=new Array(3),w=[0,0,0];function y(m,D,S){for(var O=0;O<4;++O){m[O]=S[12+O];for(var P=0;P<3;++P)m[O]+=D[P]*S[4*P+O]}}!function(){for(var m=0;m<8;++m)d[m]=[1,1,1,1],g[m]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function _(m){for(var D=0;D<p.length;++D)if((m=o.positive(m,p[D])).length<3)return 0;var S=m[0],O=S[0]/S[3],P=S[1]/S[3],R=0;for(D=1;D+1<m.length;++D){var F=m[D],B=m[D+1];R+=Math.abs((F[0]/F[3]-O)*(B[1]/B[3]-P)-(F[1]/F[3]-P)*(B[0]/B[3]-O))}return R}var x=[1,1,1],b=[0,0,0],M={cubeEdges:x,axis:b}},1681:function(v,c,i){"use strict";v.exports=function(x,b,M){var m=[],D=[0,0,0],S=[0,0,0],O=[0,0,0],P=[0,0,0];m.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var R=0;R<3;++R){for(var F=m.length/3|0,B=0;B<M[R].length;++B){var J=+M[R][B].x;m.push(J,0,1,J,1,1,J,0,-1,J,0,-1,J,1,1,J,1,-1)}var z=m.length/3|0;D[R]=F,S[R]=z-F,F=m.length/3|0;for(var $=0;$<M[R].length;++$)m.push(J=+M[R][$].x,0,1,J,1,1,J,0,-1,J,0,-1,J,1,1,J,1,-1);z=m.length/3|0,O[R]=F,P[R]=z-F}var G=s(x,new Float32Array(m)),H=a(x,[{buffer:G,type:x.FLOAT,size:3,stride:0,offset:0}]),X=o(x);return X.attributes.position.location=0,new p(x,G,H,X,S,D,P,O)};var s=i(5827),a=i(2944),o=i(1943).j,l=[0,0,0],u=[0,0,0],d=[0,0,0],g=[0,0,0],h=[1,1];function w(x){return x[0]=x[1]=x[2]=0,x}function y(x,b){return x[0]=b[0],x[1]=b[1],x[2]=b[2],x}function p(x,b,M,m,D,S,O,P){this.gl=x,this.vertBuffer=b,this.vao=M,this.shader=m,this.tickCount=D,this.tickOffset=S,this.gridCount=O,this.gridOffset=P}var _=p.prototype;_.bind=function(x,b,M){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=b,this.shader.uniforms.projection=M,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},_.unbind=function(){this.vao.unbind()},_.drawAxisLine=function(x,b,M,m,D){var S=w(u);this.shader.uniforms.majorAxis=u,S[x]=b[1][x]-b[0][x],this.shader.uniforms.minorAxis=S;var O,P=y(g,M);P[x]+=b[0][x],this.shader.uniforms.offset=P,this.shader.uniforms.lineWidth=D,this.shader.uniforms.color=m,(O=w(d))[(x+2)%3]=1,this.shader.uniforms.screenAxis=O,this.vao.draw(this.gl.TRIANGLES,6),(O=w(d))[(x+1)%3]=1,this.shader.uniforms.screenAxis=O,this.vao.draw(this.gl.TRIANGLES,6)},_.drawAxisTicks=function(x,b,M,m,D){if(this.tickCount[x]){var S=w(l);S[x]=1,this.shader.uniforms.majorAxis=S,this.shader.uniforms.offset=b,this.shader.uniforms.minorAxis=M,this.shader.uniforms.color=m,this.shader.uniforms.lineWidth=D;var O=w(d);O[x]=1,this.shader.uniforms.screenAxis=O,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},_.drawGrid=function(x,b,M,m,D,S){if(this.gridCount[x]){var O=w(u);O[b]=M[1][b]-M[0][b],this.shader.uniforms.minorAxis=O;var P=y(g,m);P[b]+=M[0][b],this.shader.uniforms.offset=P;var R=w(l);R[x]=1,this.shader.uniforms.majorAxis=R;var F=w(d);F[x]=1,this.shader.uniforms.screenAxis=F,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=D,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},_.drawZero=function(x,b,M,m,D,S){var O=w(u);this.shader.uniforms.majorAxis=O,O[x]=M[1][x]-M[0][x],this.shader.uniforms.minorAxis=O;var P=y(g,m);P[x]+=M[0][x],this.shader.uniforms.offset=P;var R=w(d);R[b]=1,this.shader.uniforms.screenAxis=R,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=D,this.vao.draw(this.gl.TRIANGLES,6)},_.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(v,c,i){"use strict";var s=i(6832),a=i(5158),o=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);c.j=function(w){return a(w,o,l,null,[{name:"position",type:"vec3"}])};var u=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),d=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);c.f=function(w){return a(w,u,d,null,[{name:"position",type:"vec3"}])};var g=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),h=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);c.bg=function(w){return a(w,g,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(v,c,i){"use strict";v.exports=function(y,p,_,x,b,M){var m=s(y),D=a(y,[{buffer:m,size:3}]),S=l(y);S.attributes.position.location=0;var O=new g(y,S,m,D);return O.update(p,_,x,b,M),O};var s=i(5827),a=i(2944),o=i(875),l=i(1943).f,u=window||C.global||{},d=u.__TEXT_CACHE||{};function g(y,p,_,x){this.gl=y,this.shader=p,this.buffer=_,this.vao=x,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var h=g.prototype,w=[0,0];h.bind=function(y,p,_,x){this.vao.bind(),this.shader.bind();var b=this.shader.uniforms;b.model=y,b.view=p,b.projection=_,b.pixelScale=x,w[0]=this.gl.drawingBufferWidth,w[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=w},h.unbind=function(){this.vao.unbind()},h.update=function(y,p,_,x,b){var M=[];function m(J,z,$,G,H,X){var K=d[$];K||(K=d[$]={});var ue=K[z];ue||(ue=K[z]=function(xe,Ee){try{return o(xe,Ee)}catch(Re){return console.warn('error vectorizing text:"'+xe+'" error:',Re),{cells:[],positions:[]}}}(z,{triangles:!0,font:$,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:X}));for(var ae=(G||12)/12,ne=ue.positions,Q=ue.cells,ie=0,le=Q.length;ie<le;++ie)for(var fe=Q[ie],he=2;he>=0;--he){var pe=ne[fe[he]];M.push(ae*pe[0],-ae*pe[1],J)}}for(var D=[0,0,0],S=[0,0,0],O=[0,0,0],P=[0,0,0],R={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){O[F]=M.length/3|0,m(.5*(y[0][F]+y[1][F]),p[F],_[F],12,1.25,R),P[F]=(M.length/3|0)-O[F],D[F]=M.length/3|0;for(var B=0;B<x[F].length;++B)x[F][B].text&&m(x[F][B].x,x[F][B].text,x[F][B].font||b,x[F][B].fontSize||12,1.25,R);S[F]=(M.length/3|0)-D[F]}this.buffer.update(M),this.tickOffset=D,this.tickCount=S,this.labelOffset=O,this.labelCount=P},h.drawTicks=function(y,p,_,x,b,M,m,D){this.tickCount[y]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=b,this.shader.uniforms.angle=_,this.shader.uniforms.scale=p,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=D,this.vao.draw(this.gl.TRIANGLES,this.tickCount[y],this.tickOffset[y]))},h.drawLabel=function(y,p,_,x,b,M,m,D){this.labelCount[y]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=b,this.shader.uniforms.angle=_,this.shader.uniforms.scale=p,this.shader.uniforms.offset=x,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=D,this.vao.draw(this.gl.TRIANGLES,this.labelCount[y],this.labelOffset[y]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(v,c){"use strict";function i(s,a){var o=s+"",l=o.indexOf("."),u=0;l>=0&&(u=o.length-l-1);var d=Math.pow(10,u),g=Math.round(s*a*d),h=g+"";if(h.indexOf("e")>=0)return h;var w=g/d,y=g%d;g<0?(w=0|-Math.ceil(w),y=0|-y):(w=0|Math.floor(w),y|=0);var p=""+w;if(g<0&&(p="-"+p),u){for(var _=""+y;_.length<u;)_="0"+_;return p+"."+_}return p}c.create=function(s,a){for(var o=[],l=0;l<3;++l){for(var u=[],d=0;d*a[l]<=s[1][l];++d)u.push({x:d*a[l],text:i(a[l],d)});for(d=-1;d*a[l]>=s[0][l];--d)u.push({x:d*a[l],text:i(a[l],d)});o.push(u)}return o},c.equal=function(s,a){for(var o=0;o<3;++o){if(s[o].length!==a[o].length)return!1;for(var l=0;l<s[o].length;++l){var u=s[o][l],d=a[o][l];if(u.x!==d.x||u.text!==d.text||u.font!==d.font||u.fontColor!==d.fontColor||u.fontSize!==d.fontSize||u.dx!==d.dx||u.dy!==d.dy)return!1}}return!0}},2771:function(v,c,i){"use strict";v.exports=function(M,m,D,S,O){var P=m.model||g,R=m.view||g,F=m.projection||g,B=m._ortho||!1,J=M.bounds,z=(O=O||o(P,R,F,J,B)).axis;l(h,R,P),l(h,F,h);for(var $=x,G=0;G<3;++G)$[G].lo=1/0,$[G].hi=-1/0,$[G].pixelsPerDataUnit=1/0;var H=s(u(h,h));u(h,h);for(var X=0;X<3;++X){var K=(X+1)%3,ue=(X+2)%3,ae=b;e:for(G=0;G<2;++G){var ne=[];if(z[X]<0!=!!G){ae[X]=J[G][X];for(var Q=0;Q<2;++Q){ae[K]=J[Q^G][K];for(var ie=0;ie<2;++ie)ae[ue]=J[ie^Q^G][ue],ne.push(ae.slice())}var le=B?5:4;for(Q=le;Q===le;++Q){if(0===ne.length)continue e;ne=a.positive(ne,H[Q])}for(Q=0;Q<ne.length;++Q){var fe=_(b,h,ue=ne[Q],D,S);for(ie=0;ie<3;++ie)$[ie].lo=Math.min($[ie].lo,ue[ie]),$[ie].hi=Math.max($[ie].hi,ue[ie]),ie!==X&&($[ie].pixelsPerDataUnit=Math.min($[ie].pixelsPerDataUnit,Math.abs(fe[ie])))}}}}return $};var s=i(5795),a=i(4670),o=i(2864),l=i(104),u=i(2142),d=i(6342),g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function w(M,m,D){this.lo=M,this.hi=m,this.pixelsPerDataUnit=D}var y=[0,0,0,1],p=[0,0,0,1];function _(M,m,D,S,O){for(var P=0;P<3;++P){for(var R=y,F=p,B=0;B<3;++B)F[B]=R[B]=D[B];F[3]=R[3]=1,F[P]+=1,d(F,F,m),F[3]<0&&(M[P]=1/0),R[P]-=1,d(R,R,m),R[3]<0&&(M[P]=1/0);var J=(R[0]/R[3]-F[0]/F[3])*S,z=(R[1]/R[3]-F[1]/F[3])*O;M[P]=.25*Math.sqrt(J*J+z*z)}return M}var x=[new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0),new w(1/0,-1/0,1/0)],b=[0,0,0]},5827:function(v,c,i){"use strict";var s=i(5306),a=i(7498),o=i(5050),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function u(w,y,p,_,x){this.gl=w,this.type=y,this.handle=p,this.length=_,this.usage=x}var d=u.prototype;function g(w,y,p,_,x,b){var M=x.length*x.BYTES_PER_ELEMENT;if(b<0)return w.bufferData(y,x,_),M;if(M+b>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return w.bufferSubData(y,b,x),p}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(w,y){if("number"!=typeof y&&(y=-1),this.bind(),"object"==typeof w&&void 0!==w.shape){var p=w.dtype;if(l.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(p=gl.getExtension("OES_element_index_uint")&&"uint16"!==p?"uint32":"uint16"),p===w.dtype&&function(M,m){for(var D=1,S=m.length-1;S>=0;--S){if(m[S]!==D)return!1;D*=M[S]}return!0}(w.shape,w.stride))this.length=g(this.gl,this.type,this.length,this.usage,0===w.offset&&w.data.length===w.shape[0]?w.data:w.data.subarray(w.offset,w.shape[0]),y);else{var _=s.malloc(w.size,p),x=o(_,w.shape);a.assign(x,w),this.length=g(this.gl,this.type,this.length,this.usage,y<0?_:_.subarray(0,w.size),y),s.free(_)}}else if(Array.isArray(w)){var b;b=function h(w,y){for(var p=s.malloc(w.length,y),_=w.length,x=0;x<_;++x)p[x]=w[x];return p}(w,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=g(this.gl,this.type,this.length,this.usage,y<0?b:b.subarray(0,w.length),y),s.free(b)}else if("object"==typeof w&&"number"==typeof w.length)this.length=g(this.gl,this.type,this.length,this.usage,w,y);else{if("number"!=typeof w&&void 0!==w)throw new Error("gl-buffer: Invalid data type");if(y>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(w|=0)<=0&&(w=1),this.gl.bufferData(this.type,0|w,this.usage),this.length=w}},v.exports=function(w,y,p,_){if(_=_||w.DYNAMIC_DRAW,(p=p||w.ARRAY_BUFFER)!==w.ARRAY_BUFFER&&p!==w.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(_!==w.DYNAMIC_DRAW&&_!==w.STATIC_DRAW&&_!==w.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=w.createBuffer(),b=new u(w,p,x,0,_);return b.update(y),b}},1140:function(v,c,i){"use strict";var s=i(2858);v.exports=function(o,l){var u=o.positions,d=o.vectors,g={positions:[],vertexIntensity:[],vertexIntensityBounds:o.vertexIntensityBounds,vectors:[],cells:[],coneOffset:o.coneOffset,colormap:o.colormap};if(0===o.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),g;for(var h=0,w=1/0,y=-1/0,p=1/0,_=-1/0,x=1/0,b=-1/0,M=null,m=null,D=[],S=1/0,O=!1,P=0;P<u.length;P++){var R=u[P];w=Math.min(R[0],w),y=Math.max(R[0],y),p=Math.min(R[1],p),_=Math.max(R[1],_),x=Math.min(R[2],x),b=Math.max(R[2],b);var F=d[P];if(s.length(F)>h&&(h=s.length(F)),P){var B=2*s.distance(M,R)/(s.length(m)+s.length(F));B?(S=Math.min(S,B),O=!1):O=!0}O||(M=R,m=F),D.push(F)}var z=[y,_,b];l&&(l[0]=[w,p,x],l[1]=z),0===h&&(h=1);var $=1/h;isFinite(S)||(S=1),g.vectorScale=S;var G=o.coneSize||.5;o.absoluteConeSize&&(G=o.absoluteConeSize*$),g.coneScale=G,P=0;for(var H=0;P<u.length;P++)for(var X=(R=u[P])[0],K=R[1],ue=R[2],ae=D[P],ne=s.length(ae)*$,Q=0;Q<8;Q++){g.positions.push([X,K,ue,H++]),g.positions.push([X,K,ue,H++]),g.positions.push([X,K,ue,H++]),g.positions.push([X,K,ue,H++]),g.positions.push([X,K,ue,H++]),g.positions.push([X,K,ue,H++]),g.vectors.push(ae),g.vectors.push(ae),g.vectors.push(ae),g.vectors.push(ae),g.vectors.push(ae),g.vectors.push(ae),g.vertexIntensity.push(ne,ne,ne),g.vertexIntensity.push(ne,ne,ne);var ie=g.positions.length;g.cells.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}return g};var a=i(7234);v.exports.createMesh=i(5028),v.exports.createConeMesh=function(o,l){return v.exports.createMesh(o,l,{shaders:a,traceType:"cone"})}},5028:function(v,c,i){"use strict";var s=i(5158),a=i(5827),o=i(2944),l=i(8931),u=i(104),d=i(7437),g=i(5050),h=i(9156),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(_,x,b,M,m,D,S,O,P,R,F){this.gl=_,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=b,this.pickShader=M,this.trianglePositions=m,this.triangleVectors=D,this.triangleColors=O,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=R,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var p=y.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(_){this.pickId=_},p.update=function(_){_=_||{};var x=this.gl;this.dirty=!0,"lightPosition"in _&&(this.lightPosition=_.lightPosition),"opacity"in _&&(this.opacity=_.opacity),"ambient"in _&&(this.ambientLight=_.ambient),"diffuse"in _&&(this.diffuseLight=_.diffuse),"specular"in _&&(this.specularLight=_.specular),"roughness"in _&&(this.roughness=_.roughness),"fresnel"in _&&(this.fresnel=_.fresnel),void 0!==_.tubeScale&&(this.tubeScale=_.tubeScale),void 0!==_.vectorScale&&(this.vectorScale=_.vectorScale),void 0!==_.coneScale&&(this.coneScale=_.coneScale),void 0!==_.coneOffset&&(this.coneOffset=_.coneOffset),_.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(fe){for(var he=h({colormap:fe,nshades:256,format:"rgba"}),pe=new Uint8Array(1024),xe=0;xe<256;++xe){for(var Ee=he[xe],Re=0;Re<3;++Re)pe[4*xe+Re]=Ee[Re];pe[4*xe+3]=255*Ee[3]}return g(pe,[256,256,4],[4,0,1])}(_.colormap)),this.texture.generateMipmap());var b=_.cells,M=_.positions,m=_.vectors;if(M&&b&&m){var D=[],S=[],O=[],P=[],R=[];this.cells=b,this.positions=M,this.vectors=m;var F=_.meshColor||[1,1,1,1],B=_.vertexIntensity,J=1/0,z=-1/0;if(B)if(_.vertexIntensityBounds)J=+_.vertexIntensityBounds[0],z=+_.vertexIntensityBounds[1];else for(var $=0;$<B.length;++$){var G=B[$];J=Math.min(J,G),z=Math.max(z,G)}else for($=0;$<M.length;++$)G=M[$][2],J=Math.min(J,G),z=Math.max(z,G);for(this.intensity=B||function(fe){for(var he=fe.length,pe=new Array(he),xe=0;xe<he;++xe)pe[xe]=fe[xe][2];return pe}(M),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],$=0;$<M.length;++$)for(var H=M[$],X=0;X<3;++X)!isNaN(H[X])&&isFinite(H[X])&&(this.bounds[0][X]=Math.min(this.bounds[0][X],H[X]),this.bounds[1][X]=Math.max(this.bounds[1][X],H[X]));var K=0;e:for($=0;$<b.length;++$){var ue=b[$];if(3===ue.length){for(X=0;X<3;++X){H=M[ne=ue[X]];for(var ae=0;ae<3;++ae)if(isNaN(H[ae])||!isFinite(H[ae]))continue e}for(X=0;X<3;++X){var ne;H=M[ne=ue[2-X]],D.push(H[0],H[1],H[2],H[3]);var Q=m[ne];S.push(Q[0],Q[1],Q[2],Q[3]||0);var ie;O.push(F[0],F[1],F[2],3===F.length?1:F[3]),P.push((ie=B?[(B[ne]-J)/(z-J),0]:[(H[2]-J)/(z-J),0])[0],ie[1]),R.push($)}K+=1}}this.triangleCount=K,this.trianglePositions.update(D),this.triangleVectors.update(S),this.triangleColors.update(O),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(R))}},p.drawTransparent=p.draw=function(_){for(var x=this.gl,b=(_=_||{}).model||w,M=_.view||w,m=_.projection||w,D=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)D[0][S]=Math.max(D[0][S],this.clipBounds[0][S]),D[1][S]=Math.min(D[1][S],this.clipBounds[1][S]);var O={model:b,view:M,projection:m,inverseModel:w.slice(),clipBounds:D,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};O.inverseModel=d(O.inverseModel,O.model),x.disable(x.CULL_FACE),this.texture.bind(0);var P=new Array(16);for(u(P,O.view,O.model),u(P,O.projection,P),d(P,P),S=0;S<3;++S)O.eyePosition[S]=P[12+S]/P[15];var R=P[15];for(S=0;S<3;++S)R+=this.lightPosition[S]*P[4*S+3];for(S=0;S<3;++S){for(var F=P[12+S],B=0;B<3;++B)F+=P[4*B+S]*this.lightPosition[B];O.lightPosition[S]=F/R}if(this.triangleCount>0){var J=this.triShader;J.bind(),J.uniforms=O,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(_){for(var x=this.gl,b=(_=_||{}).model||w,M=_.view||w,m=_.projection||w,D=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)D[0][S]=Math.max(D[0][S],this.clipBounds[0][S]),D[1][S]=Math.min(D[1][S],this.clipBounds[1][S]);this._model=[].slice.call(b),this._view=[].slice.call(M),this._projection=[].slice.call(m),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var O={model:b,view:M,projection:m,clipBounds:D,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=O,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(_){if(!_||_.id!==this.pickId)return null;var x=_.value[0]+256*_.value[1]+65536*_.value[2],b=this.cells[x],M=this.positions[b[1]].slice(0,3),m={position:M,dataCoordinate:M,index:Math.floor(b[1]/48)};return"cone"===this.traceType?m.index=Math.floor(b[1]/48):"streamtube"===this.traceType&&(m.intensity=this.intensity[b[1]],m.velocity=this.vectors[b[1]].slice(0,3),m.divergence=this.vectors[b[1]][3],m.index=x),m},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},v.exports=function(_,x,b){var M=b.shaders;1===arguments.length&&(_=(x=_).gl);var $,G,m=((G=s(_,($=M).meshShader.vertex,$.meshShader.fragment,null,$.meshShader.attributes)).attributes.position.location=0,G.attributes.color.location=2,G.attributes.uv.location=3,G.attributes.vector.location=4,G),D=function(z,$){var G=s(z,$.pickShader.vertex,$.pickShader.fragment,null,$.pickShader.attributes);return G.attributes.position.location=0,G.attributes.id.location=1,G.attributes.vector.location=4,G}(_,M),S=l(_,g(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=_.LINEAR_MIPMAP_LINEAR,S.magFilter=_.LINEAR;var O=a(_),P=a(_),R=a(_),F=a(_),B=a(_),J=new y(_,S,m,D,O,P,B,R,F,o(_,[{buffer:O,type:_.FLOAT,size:4},{buffer:B,type:_.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:R,type:_.FLOAT,size:4},{buffer:F,type:_.FLOAT,size:2},{buffer:P,type:_.FLOAT,size:4}]),b.traceType||"cone");return J.update(x),J}},7234:function(v,c,i){var s=i(6832),a=s(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=s(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=s(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),u=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);c.meshShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},c.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(v){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(v,c,i){var s=i(1950);v.exports=function(a){return s[a]}},3110:function(v,c,i){"use strict";v.exports=function(y){var p=y.gl,_=s(p),x=a(p,[{buffer:_,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:_,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:_,type:p.FLOAT,size:3,offset:28,stride:40}]),b=o(p);b.attributes.position.location=0,b.attributes.color.location=1,b.attributes.offset.location=2;var M=new u(p,_,x,b);return M.update(y),M};var s=i(5827),a=i(2944),o=i(7667),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(y,p,_,x){this.gl=y,this.shader=x,this.buffer=p,this.vao=_,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=u.prototype;function g(y,p){for(var _=0;_<3;++_)y[0][_]=Math.min(y[0][_],p[_]),y[1][_]=Math.max(y[1][_],p[_])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(y){var p=this.gl,_=this.shader.uniforms;this.shader.bind();var x=_.view=y.view||l,b=_.projection=y.projection||l;_.model=y.model||l,_.clipBounds=this.clipBounds,_.opacity=this.opacity;var O=(y._ortho?2:1)*this.pixelRatio*(b[3]*x[12]+b[7]*x[13]+b[11]*x[14]+b[15]*x[15])/p.drawingBufferHeight;this.vao.bind();for(var P=0;P<3;++P)p.lineWidth(this.lineWidth[P]*this.pixelRatio),_.capSize=this.capSize[P]*O,this.lineCount[P]&&p.drawArrays(p.LINES,this.lineOffset[P],this.lineCount[P]);this.vao.unbind()};var h=function(){for(var y=new Array(3),p=0;p<3;++p){for(var _=[],x=1;x<=2;++x)for(var b=-1;b<=1;b+=2){var M=[0,0,0];M[(x+p)%3]=b,_.push(M)}y[p]=_}return y}();function w(y,p,_,x){for(var b=h[x],M=0;M<b.length;++M){var m=b[M];y.push(p[0],p[1],p[2],_[0],_[1],_[2],_[3],m[0],m[1],m[2])}return b.length}d.update=function(y){"lineWidth"in(y=y||{})&&(this.lineWidth=y.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in y&&(this.capSize=y.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in y&&(this.opacity=+y.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=y.color||[[0,0,0],[0,0,0],[0,0,0]],_=y.position,x=y.error;if(Array.isArray(p[0])||(p=[p,p,p]),_&&x){var b=[],M=_.length,m=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var D=0;D<3;++D){this.lineOffset[D]=m;e:for(var S=0;S<M;++S){for(var O=_[S],P=0;P<3;++P)if(isNaN(O[P])||!isFinite(O[P]))continue e;var R,F=x[S],B=p[D];Array.isArray(B[0])&&(B=p[S]),3===B.length?B=[B[0],B[1],B[2],1]:4===B.length&&(B=[B[0],B[1],B[2],B[3]],!this.hasAlpha&&B[3]<1&&(this.hasAlpha=!0)),isNaN(F[0][D])||isNaN(F[1][D])||(F[0][D]<0&&((R=O.slice())[D]+=F[0][D],b.push(O[0],O[1],O[2],B[0],B[1],B[2],B[3],0,0,0,R[0],R[1],R[2],B[0],B[1],B[2],B[3],0,0,0),g(this.bounds,R),m+=2+w(b,R,B,D)),F[1][D]>0&&((R=O.slice())[D]+=F[1][D],b.push(O[0],O[1],O[2],B[0],B[1],B[2],B[3],0,0,0,R[0],R[1],R[2],B[0],B[1],B[2],B[3],0,0,0),g(this.bounds,R),m+=2+w(b,R,B,D)))}this.lineCount[D]=m-this.lineOffset[D]}this.buffer.update(b)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(v,c,i){"use strict";var s=i(6832),a=i(5158),o=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);v.exports=function(u){return a(u,o,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(v,c,i){"use strict";var s=i(8931);v.exports=function(M,m,D,S){a||(a=M.FRAMEBUFFER_UNSUPPORTED,o=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var O=M.getExtension("WEBGL_draw_buffers");if(!d&&O&&function($,G){var H=$.getParameter(G.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(H+1);for(var X=0;X<=H;++X){for(var K=new Array(H),ue=0;ue<X;++ue)K[ue]=$.COLOR_ATTACHMENT0+ue;for(ue=X;ue<H;++ue)K[ue]=$.NONE;d[X]=K}}(M,O),Array.isArray(m)&&(S=D,D=0|m[1],m=0|m[0]),"number"!=typeof m)throw new Error("gl-fbo: Missing shape parameter");var P=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(m<0||m>P||D<0||D>P)throw new Error("gl-fbo: Parameters are too large for FBO");var R=1;if("color"in(S=S||{})){if((R=Math.max(0|S.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(R>1){if(!O)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(R>M.getParameter(O.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+R+" draw buffers")}}var F=M.UNSIGNED_BYTE,B=M.getExtension("OES_texture_float");if(S.float&&R>0){if(!B)throw new Error("gl-fbo: Context does not support floating point textures");F=M.FLOAT}else S.preferFloat&&R>0&&B&&(F=M.FLOAT);var J=!0;"depth"in S&&(J=!!S.depth);var z=!1;return"stencil"in S&&(z=!!S.stencil),new _(M,m,D,F,R,J,z,O)};var a,o,l,u,d=null;function g(M){return[M.getParameter(M.FRAMEBUFFER_BINDING),M.getParameter(M.RENDERBUFFER_BINDING),M.getParameter(M.TEXTURE_BINDING_2D)]}function h(M,m){M.bindFramebuffer(M.FRAMEBUFFER,m[0]),M.bindRenderbuffer(M.RENDERBUFFER,m[1]),M.bindTexture(M.TEXTURE_2D,m[2])}function w(M){switch(M){case a:throw new Error("gl-fbo: Framebuffer unsupported");case o:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function y(M,m,D,S,O,P){if(!S)return null;var R=s(M,m,D,O,S);return R.magFilter=M.NEAREST,R.minFilter=M.NEAREST,R.mipSamples=1,R.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,P,M.TEXTURE_2D,R.handle,0),R}function p(M,m,D,S,O){var P=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,P),M.renderbufferStorage(M.RENDERBUFFER,S,m,D),M.framebufferRenderbuffer(M.FRAMEBUFFER,O,M.RENDERBUFFER,P),P}function _(M,m,D,S,O,P,R,F){this.gl=M,this._shape=[0|m,0|D],this._destroyed=!1,this._ext=F,this.color=new Array(O);for(var B=0;B<O;++B)this.color[B]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=S,this._useDepth=P,this._useStencil=R;var J=this,z=[0|m,0|D];Object.defineProperties(z,{0:{get:function(){return J._shape[0]},set:function($){return J.width=$}},1:{get:function(){return J._shape[1]},set:function($){return J.height=$}}}),this._shapeVector=z,function($){var G=g($.gl),H=$.gl,X=$.handle=H.createFramebuffer(),K=$._shape[0],ue=$._shape[1],ae=$.color.length,ne=$._ext,Q=$._useStencil,ie=$._useDepth,le=$._colorType;H.bindFramebuffer(H.FRAMEBUFFER,X);for(var fe=0;fe<ae;++fe)$.color[fe]=y(H,K,ue,le,H.RGBA,H.COLOR_ATTACHMENT0+fe);0===ae?($._color_rb=p(H,K,ue,H.RGBA4,H.COLOR_ATTACHMENT0),ne&&ne.drawBuffersWEBGL(d[0])):ae>1&&ne.drawBuffersWEBGL(d[ae]);var he=H.getExtension("WEBGL_depth_texture");he?Q?$.depth=y(H,K,ue,he.UNSIGNED_INT_24_8_WEBGL,H.DEPTH_STENCIL,H.DEPTH_STENCIL_ATTACHMENT):ie&&($.depth=y(H,K,ue,H.UNSIGNED_SHORT,H.DEPTH_COMPONENT,H.DEPTH_ATTACHMENT)):ie&&Q?$._depth_rb=p(H,K,ue,H.DEPTH_STENCIL,H.DEPTH_STENCIL_ATTACHMENT):ie?$._depth_rb=p(H,K,ue,H.DEPTH_COMPONENT16,H.DEPTH_ATTACHMENT):Q&&($._depth_rb=p(H,K,ue,H.STENCIL_INDEX,H.STENCIL_ATTACHMENT));var pe=H.checkFramebufferStatus(H.FRAMEBUFFER);if(pe!==H.FRAMEBUFFER_COMPLETE){for($._destroyed=!0,H.bindFramebuffer(H.FRAMEBUFFER,null),H.deleteFramebuffer($.handle),$.handle=null,$.depth&&($.depth.dispose(),$.depth=null),$._depth_rb&&(H.deleteRenderbuffer($._depth_rb),$._depth_rb=null),fe=0;fe<$.color.length;++fe)$.color[fe].dispose(),$.color[fe]=null;$._color_rb&&(H.deleteRenderbuffer($._color_rb),$._color_rb=null),h(H,G),w(pe)}h(H,G)}(this)}var x=_.prototype;function b(M,m,D){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(M._shape[0]!==m||M._shape[1]!==D){var S=M.gl,O=S.getParameter(S.MAX_RENDERBUFFER_SIZE);if(m<0||m>O||D<0||D>O)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=m,M._shape[1]=D;for(var P=g(S),R=0;R<M.color.length;++R)M.color[R].shape=M._shape;M._color_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,M._color_rb),S.renderbufferStorage(S.RENDERBUFFER,S.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(S.bindRenderbuffer(S.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&S.renderbufferStorage(S.RENDERBUFFER,S.STENCIL_INDEX,M._shape[0],M._shape[1])),S.bindFramebuffer(S.FRAMEBUFFER,M.handle);var F=S.checkFramebufferStatus(S.FRAMEBUFFER);F!==S.FRAMEBUFFER_COMPLETE&&(M.dispose(),h(S,P),w(F)),h(S,P)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[0|M,0|M]),2!==M.length)throw new Error("gl-fbo: Shape vector must be length 2");var m=0|M[0],D=0|M[1];return b(this,m,D),[m,D]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return b(this,M|=0,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return b(this,this._shape[0],M|=0),M},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var m=0;m<this.color.length;++m)this.color[m].dispose(),this.color[m]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(v,c,i){var s=i(8974).sprintf,a=i(6603),o=i(9365),l=i(8008);v.exports=function(u,d,g){"use strict";var h=o(d)||"of unknown name (see npm glsl-shader-name)",w="unknown type";void 0!==g&&(w=g===a.FRAGMENT_SHADER?"fragment":"vertex");for(var y=s("Error compiling %s shader %s:\n",w,h),p=s("%s%s",y,u),_=u.split("\n"),x={},b=0;b<_.length;b++){var M=_[b];if(""!==M&&"\0"!==M){var m=parseInt(M.split(":")[2]);if(isNaN(m))throw new Error(s("Could not parse error: %s",M));x[m]=M}}var D=l(d).split("\n");for(b=0;b<D.length;b++)if((x[b+3]||x[b+2]||x[b+1])&&(y+=D[b]+"\n",x[b+1])){var S=x[b+1];S=S.substr(S.split(":",3).join(":").length+1).trim(),y+=s("^^^ %s\n\n",S)}return{long:y.trim(),short:p.trim()}}},6386:function(v,c,i){"use strict";v.exports=function(p,_){var x=p.gl,b=new g(p,l(x,d.vertex,d.fragment),l(x,d.pickVertex,d.pickFragment),u(x),u(x),u(x),u(x));return b.update(_),p.addObject(b),b};var s=i(5070),a=i(9560),o=i(5306),l=i(5158),u=i(5827),d=i(1292);function g(p,_,x,b,M,m,D){this.plot=p,this.shader=_,this.pickShader=x,this.positionBuffer=b,this.weightBuffer=M,this.colorBuffer=m,this.idBuffer=D,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var h,p,_,w=g.prototype,y=[0,0,1,0,0,1,1,0,1,1,0,1];w.draw=(h=[1,0,0,0,1,0,0,0,1],function(){var p=this.plot,_=this.shader,x=this.bounds,b=this.numVertices;if(!(b<=0)){var M=p.gl,m=p.dataBox,S=x[3]-x[1],O=m[2]-m[0],P=m[3]-m[1];h[0]=2*(x[2]-x[0])/O,h[4]=2*S/P,h[6]=2*(x[0]-m[0])/O-1,h[7]=2*(x[1]-m[1])/P-1,_.bind();var R=_.uniforms;R.viewTransform=h,R.shape=this.shape;var F=_.attributes;this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(M.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),F.color.pointer(M.UNSIGNED_BYTE,!0),M.drawArrays(M.TRIANGLES,0,b)}}),w.drawPick=(p=[1,0,0,0,1,0,0,0,1],_=[0,0,0,0],function(x){var b=this.plot,M=this.pickShader,m=this.bounds,D=this.numVertices;if(!(D<=0)){var S=b.gl,O=b.dataBox,R=m[3]-m[1],F=O[2]-O[0],B=O[3]-O[1];p[0]=2*(m[2]-m[0])/F,p[4]=2*R/B,p[6]=2*(m[0]-O[0])/F-1,p[7]=2*(m[1]-O[1])/B-1;for(var J=0;J<4;++J)_[J]=x>>8*J&255;this.pickOffset=x,M.bind();var z=M.uniforms;z.viewTransform=p,z.pickOffset=_,z.shape=this.shape;var $=M.attributes;return this.positionBuffer.bind(),$.position.pointer(),this.weightBuffer.bind(),$.weight.pointer(S.UNSIGNED_BYTE,!1),this.idBuffer.bind(),$.pickId.pointer(S.UNSIGNED_BYTE,!1),S.drawArrays(S.TRIANGLES,0,D),x+this.shape[0]*this.shape[1]}}),w.pick=function(p,_,x){var b=this.pickOffset;if(x<b||x>=b+this.shape[0]*this.shape[1])return null;var m=x-b;return{object:this,pointId:m,dataCoord:[this.xData[m%this.shape[0]],this.yData[m/this.shape[0]|0]]}},w.update=function(p){var _=(p=p||{}).shape||[0,0],x=p.x||a(_[0]),b=p.y||a(_[1]),M=p.z||new Float32Array(_[0]*_[1]),m=!1!==p.zsmooth;this.xData=x,this.yData=b;var D,S,O,P,R=p.colorLevels||[0],F=p.colorValues||[0,0,0,1],B=R.length,J=this.bounds;m?(D=J[0]=x[0],S=J[1]=b[0],O=J[2]=x[x.length-1],P=J[3]=b[b.length-1]):(D=J[0]=x[0]+(x[1]-x[0])/2,S=J[1]=b[0]+(b[1]-b[0])/2,O=J[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,P=J[3]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2);var z=1/(O-D),$=1/(P-S),G=_[0],H=_[1];this.shape=[G,H];var X=(m?(G-1)*(H-1):G*H)*(y.length>>>1);this.numVertices=X;for(var K=o.mallocUint8(4*X),ue=o.mallocFloat32(2*X),ae=o.mallocUint8(2*X),ne=o.mallocUint32(X),Q=0,ie=m?G-1:G,le=m?H-1:H,fe=0;fe<le;++fe){var he,pe;m?(he=$*(b[fe]-S),pe=$*(b[fe+1]-S)):(he=fe<H-1?$*(b[fe]-(b[fe+1]-b[fe])/2-S):$*(b[fe]-(b[fe]-b[fe-1])/2-S),pe=fe<H-1?$*(b[fe]+(b[fe+1]-b[fe])/2-S):$*(b[fe]+(b[fe]-b[fe-1])/2-S));for(var xe=0;xe<ie;++xe){var Ee,Re;m?(Ee=z*(x[xe]-D),Re=z*(x[xe+1]-D)):(Ee=xe<G-1?z*(x[xe]-(x[xe+1]-x[xe])/2-D):z*(x[xe]-(x[xe]-x[xe-1])/2-D),Re=xe<G-1?z*(x[xe]+(x[xe+1]-x[xe])/2-D):z*(x[xe]+(x[xe]-x[xe-1])/2-D));for(var ke=0;ke<y.length;ke+=2){var Te,we,je,Ce,Ie=y[ke],ge=y[ke+1],me=M[m?(fe+ge)*G+(xe+Ie):fe*G+xe],ce=s.le(R,me);if(ce<0)Te=F[0],we=F[1],je=F[2],Ce=F[3];else if(ce===B-1)Te=F[4*B-4],we=F[4*B-3],je=F[4*B-2],Ce=F[4*B-1];else{var Ae=(me-R[ce])/(R[ce+1]-R[ce]),Ne=1-Ae,De=4*ce,qe=4*(ce+1);Te=Ne*F[De]+Ae*F[qe],we=Ne*F[De+1]+Ae*F[qe+1],je=Ne*F[De+2]+Ae*F[qe+2],Ce=Ne*F[De+3]+Ae*F[qe+3]}K[4*Q]=255*Te,K[4*Q+1]=255*we,K[4*Q+2]=255*je,K[4*Q+3]=255*Ce,ue[2*Q]=.5*Ee+.5*Re,ue[2*Q+1]=.5*he+.5*pe,ae[2*Q]=Ie,ae[2*Q+1]=ge,ne[Q]=fe*G+xe,Q+=1}}}this.positionBuffer.update(ue),this.weightBuffer.update(ae),this.colorBuffer.update(K),this.idBuffer.update(ne),o.free(ue),o.free(K),o.free(ae),o.free(ne)},w.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(v,c,i){"use strict";var s=i(6832);v.exports={fragment:s(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:s(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},248:function(v,c,i){var s=i(6832),a=i(5158),o=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),u=s(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];c.createShader=function(g){return a(g,o,l,null,d)},c.createPickShader=function(g){return a(g,o,u,null,d)}},6086:function(v,c,i){"use strict";v.exports=function(D){var S=D.gl||D.scene&&D.scene.gl,O=w(S);O.attributes.position.location=0,O.attributes.nextPosition.location=1,O.attributes.arcLength.location=2,O.attributes.lineWidth.location=3,O.attributes.color.location=4;var P=y(S);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var R=s(S),F=a(S,[{buffer:R,size:3,offset:0,stride:48},{buffer:R,size:3,offset:12,stride:48},{buffer:R,size:1,offset:24,stride:48},{buffer:R,size:1,offset:28,stride:48},{buffer:R,size:4,offset:32,stride:48}]),B=g(new Array(1024),[256,1,4]),J=0;J<1024;++J)B.data[J]=255;var z=o(S,B);z.wrap=S.REPEAT;var $=new M(S,O,P,R,F,z);return $.update(D),$};var s=i(5827),a=i(2944),o=i(8931),l=new Uint8Array(4),u=new Float32Array(l.buffer),d=i(5070),g=i(5050),h=i(248),w=h.createShader,y=h.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function _(D,S){for(var O=0,P=0;P<3;++P){var R=D[P]-S[P];O+=R*R}return Math.sqrt(O)}function x(D){for(var S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],O=0;O<3;++O)S[0][O]=Math.max(D[0][O],S[0][O]),S[1][O]=Math.min(D[1][O],S[1][O]);return S}function b(D,S,O,P){this.arcLength=D,this.position=S,this.index=O,this.dataCoordinate=P}function M(D,S,O,P,R,F){this.gl=D,this.shader=S,this.pickShader=O,this.buffer=P,this.vao=R,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=F,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=M.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(D){this.pickId=D},m.drawTransparent=m.draw=function(D){if(this.vertexCount){var S=this.gl,O=this.shader,P=this.vao;O.bind(),O.uniforms={model:D.model||p,view:D.view||p,projection:D.projection||p,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(S.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},m.drawPick=function(D){if(this.vertexCount){var S=this.gl,O=this.pickShader,P=this.vao;O.bind(),O.uniforms={model:D.model||p,view:D.view||p,projection:D.projection||p,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(S.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},m.update=function(D){var S,O;this.dirty=!0;var P=!!D.connectGaps;"dashScale"in D&&(this.dashScale=D.dashScale),this.hasAlpha=!1,"opacity"in D&&(this.opacity=+D.opacity,this.opacity<1&&(this.hasAlpha=!0));var R=[],F=[],B=[],J=0,z=0,$=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],G=D.position||D.positions;if(G){var H=D.color||D.colors||[0,0,0,1],X=D.lineWidth||1,K=!1;e:for(S=1;S<G.length;++S){var ue,ae,ne,Q=G[S-1],ie=G[S];for(F.push(J),B.push(Q.slice()),O=0;O<3;++O){if(isNaN(Q[O])||isNaN(ie[O])||!isFinite(Q[O])||!isFinite(ie[O])){if(!P&&R.length>0){for(var le=0;le<24;++le)R.push(R[R.length-12]);z+=2,K=!0}continue e}$[0][O]=Math.min($[0][O],Q[O],ie[O]),$[1][O]=Math.max($[1][O],Q[O],ie[O])}Array.isArray(H[0])?(ue=H.length>S-1?H[S-1]:H.length>0?H[H.length-1]:[0,0,0,1],ae=H.length>S?H[S]:H.length>0?H[H.length-1]:[0,0,0,1]):ue=ae=H,3===ue.length&&(ue=[ue[0],ue[1],ue[2],1]),3===ae.length&&(ae=[ae[0],ae[1],ae[2],1]),!this.hasAlpha&&ue[3]<1&&(this.hasAlpha=!0),ne=Array.isArray(X)?X.length>S-1?X[S-1]:X.length>0?X[X.length-1]:[0,0,0,1]:X;var fe=J;if(J+=_(Q,ie),K){for(O=0;O<2;++O)R.push(Q[0],Q[1],Q[2],ie[0],ie[1],ie[2],fe,ne,ue[0],ue[1],ue[2],ue[3]);z+=2,K=!1}R.push(Q[0],Q[1],Q[2],ie[0],ie[1],ie[2],fe,ne,ue[0],ue[1],ue[2],ue[3],Q[0],Q[1],Q[2],ie[0],ie[1],ie[2],fe,-ne,ue[0],ue[1],ue[2],ue[3],ie[0],ie[1],ie[2],Q[0],Q[1],Q[2],J,-ne,ae[0],ae[1],ae[2],ae[3],ie[0],ie[1],ie[2],Q[0],Q[1],Q[2],J,ne,ae[0],ae[1],ae[2],ae[3]),z+=4}}if(this.buffer.update(R),F.push(J),B.push(G[G.length-1].slice()),this.bounds=$,this.vertexCount=z,this.points=B,this.arcLength=F,"dashes"in D){var he=D.dashes.slice();for(he.unshift(0),S=1;S<he.length;++S)he[S]=he[S-1]+he[S];var pe=g(new Array(1024),[256,1,4]);for(S=0;S<256;++S){for(O=0;O<4;++O)pe.set(S,0,O,0);1&d.le(he,he[he.length-1]*S/255)?pe.set(S,0,0,0):pe.set(S,0,0,255)}this.texture.setPixels(pe)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(D){if(!D||D.id!==this.pickId)return null;var G,H,X,S=(G=D.value[0],H=D.value[1],X=D.value[2],l[0]=0,l[1]=X,l[2]=H,l[3]=G,u[0]),O=d.le(this.arcLength,S);if(O<0)return null;if(O===this.arcLength.length-1)return new b(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),O);for(var P=this.points[O],R=this.points[Math.min(O+1,this.points.length-1)],F=(S-this.arcLength[O])/(this.arcLength[O+1]-this.arcLength[O]),B=1-F,J=[0,0,0],z=0;z<3;++z)J[z]=B*P[z]+F*R[z];var $=Math.min(F<.5?O:O+1,this.points.length-1);return new b(S,J,$,this.points[$])}},7332:function(v){v.exports=function(c){var i=new Float32Array(16);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i}},9823:function(v){v.exports=function(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},7787:function(v){v.exports=function(c){var i=c[0],s=c[1],a=c[2],o=c[3],l=c[4],u=c[5],d=c[6],g=c[7],h=c[8],w=c[9],y=c[10],p=c[11],_=c[12],x=c[13],b=c[14],M=c[15];return(i*u-s*l)*(y*M-p*b)-(i*d-a*l)*(w*M-p*x)+(i*g-o*l)*(w*b-y*x)+(s*d-a*u)*(h*M-p*_)-(s*g-o*u)*(h*b-y*_)+(a*g-o*d)*(h*x-w*_)}},5950:function(v){v.exports=function(c,i){var s=i[0],a=i[1],o=i[2],l=i[3],u=s+s,d=a+a,g=o+o,h=s*u,w=a*u,y=a*d,p=o*u,_=o*d,x=o*g,b=l*u,M=l*d,m=l*g;return c[0]=1-y-x,c[1]=w+m,c[2]=p-M,c[3]=0,c[4]=w-m,c[5]=1-h-x,c[6]=_+b,c[7]=0,c[8]=p+M,c[9]=_-b,c[10]=1-h-y,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},7280:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=i[3],d=a+a,g=o+o,h=l+l,w=a*d,y=a*g,p=a*h,_=o*g,x=o*h,b=l*h,M=u*d,m=u*g,D=u*h;return c[0]=1-(_+b),c[1]=y+D,c[2]=p-m,c[3]=0,c[4]=y-D,c[5]=1-(w+b),c[6]=x+M,c[7]=0,c[8]=p+m,c[9]=x-M,c[10]=1-(w+_),c[11]=0,c[12]=s[0],c[13]=s[1],c[14]=s[2],c[15]=1,c}},9947:function(v){v.exports=function(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},7437:function(v){v.exports=function(c,i){var s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],d=i[5],g=i[6],h=i[7],w=i[8],y=i[9],p=i[10],_=i[11],x=i[12],b=i[13],M=i[14],m=i[15],D=s*d-a*u,S=s*g-o*u,O=s*h-l*u,P=a*g-o*d,R=a*h-l*d,F=o*h-l*g,B=w*b-y*x,J=w*M-p*x,z=w*m-_*x,$=y*M-p*b,G=y*m-_*b,H=p*m-_*M,X=D*H-S*G+O*$+P*z-R*J+F*B;return X?(c[0]=(d*H-g*G+h*$)*(X=1/X),c[1]=(o*G-a*H-l*$)*X,c[2]=(b*F-M*R+m*P)*X,c[3]=(p*R-y*F-_*P)*X,c[4]=(g*z-u*H-h*J)*X,c[5]=(s*H-o*z+l*J)*X,c[6]=(M*O-x*F-m*S)*X,c[7]=(w*F-p*O+_*S)*X,c[8]=(u*G-d*z+h*B)*X,c[9]=(a*z-s*G-l*B)*X,c[10]=(x*R-b*O+m*D)*X,c[11]=(y*O-w*R-_*D)*X,c[12]=(d*J-u*$-g*B)*X,c[13]=(s*$-a*J+o*B)*X,c[14]=(b*S-x*P-M*D)*X,c[15]=(w*P-y*S+p*D)*X,c):null}},3012:function(v,c,i){var s=i(9947);v.exports=function(a,o,l,u){var d,g,h,w,y,p,_,x,b,M,m=o[0],D=o[1],S=o[2],O=u[0],P=u[1],R=u[2],F=l[0],B=l[1],J=l[2];return Math.abs(m-F)<1e-6&&Math.abs(D-B)<1e-6&&Math.abs(S-J)<1e-6?s(a):(_=m-F,x=D-B,b=S-J,d=P*(b*=M=1/Math.sqrt(_*_+x*x+b*b))-R*(x*=M),g=R*(_*=M)-O*b,h=O*x-P*_,(M=Math.sqrt(d*d+g*g+h*h))?(d*=M=1/M,g*=M,h*=M):(d=0,g=0,h=0),w=x*h-b*g,y=b*d-_*h,p=_*g-x*d,(M=Math.sqrt(w*w+y*y+p*p))?(w*=M=1/M,y*=M,p*=M):(w=0,y=0,p=0),a[0]=d,a[1]=w,a[2]=_,a[3]=0,a[4]=g,a[5]=y,a[6]=x,a[7]=0,a[8]=h,a[9]=p,a[10]=b,a[11]=0,a[12]=-(d*m+g*D+h*S),a[13]=-(w*m+y*D+p*S),a[14]=-(_*m+x*D+b*S),a[15]=1,a)}},104:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=i[3],d=i[4],g=i[5],h=i[6],w=i[7],y=i[8],p=i[9],_=i[10],x=i[11],b=i[12],M=i[13],m=i[14],D=i[15],S=s[0],O=s[1],P=s[2],R=s[3];return c[0]=S*a+O*d+P*y+R*b,c[1]=S*o+O*g+P*p+R*M,c[2]=S*l+O*h+P*_+R*m,c[3]=S*u+O*w+P*x+R*D,c[4]=(S=s[4])*a+(O=s[5])*d+(P=s[6])*y+(R=s[7])*b,c[5]=S*o+O*g+P*p+R*M,c[6]=S*l+O*h+P*_+R*m,c[7]=S*u+O*w+P*x+R*D,c[8]=(S=s[8])*a+(O=s[9])*d+(P=s[10])*y+(R=s[11])*b,c[9]=S*o+O*g+P*p+R*M,c[10]=S*l+O*h+P*_+R*m,c[11]=S*u+O*w+P*x+R*D,c[12]=(S=s[12])*a+(O=s[13])*d+(P=s[14])*y+(R=s[15])*b,c[13]=S*o+O*g+P*p+R*M,c[14]=S*l+O*h+P*_+R*m,c[15]=S*u+O*w+P*x+R*D,c}},5268:function(v){v.exports=function(c,i,s,a,o,l,u){var d=1/(i-s),g=1/(a-o),h=1/(l-u);return c[0]=-2*d,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*g,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*h,c[11]=0,c[12]=(i+s)*d,c[13]=(o+a)*g,c[14]=(u+l)*h,c[15]=1,c}},1120:function(v){v.exports=function(c,i,s,a,o){var l=1/Math.tan(i/2),u=1/(a-o);return c[0]=l/s,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=l,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(o+a)*u,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*o*a*u,c[15]=0,c}},4422:function(v){v.exports=function(c,i,s,a){var o,l,u,d,g,h,w,y,p,_,x,b,M,m,D,S,O,P,R,F,B,J,z,$,G=a[0],H=a[1],X=a[2],K=Math.sqrt(G*G+H*H+X*X);return Math.abs(K)<1e-6?null:(G*=K=1/K,H*=K,X*=K,o=Math.sin(s),u=1-(l=Math.cos(s)),g=i[1],h=i[2],w=i[3],p=i[5],_=i[6],x=i[7],M=i[9],m=i[10],D=i[11],R=G*H*u-X*o,F=H*H*u+l,B=X*H*u+G*o,J=G*X*u+H*o,z=H*X*u-G*o,$=X*X*u+l,c[0]=(d=i[0])*(S=G*G*u+l)+(y=i[4])*(O=H*G*u+X*o)+(b=i[8])*(P=X*G*u-H*o),c[1]=g*S+p*O+M*P,c[2]=h*S+_*O+m*P,c[3]=w*S+x*O+D*P,c[4]=d*R+y*F+b*B,c[5]=g*R+p*F+M*B,c[6]=h*R+_*F+m*B,c[7]=w*R+x*F+D*B,c[8]=d*J+y*z+b*$,c[9]=g*J+p*z+M*$,c[10]=h*J+_*z+m*$,c[11]=w*J+x*z+D*$,i!==c&&(c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c)}},6109:function(v){v.exports=function(c,i,s){var a=Math.sin(s),o=Math.cos(s),l=i[4],u=i[5],d=i[6],g=i[7],h=i[8],w=i[9],y=i[10],p=i[11];return i!==c&&(c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[4]=l*o+h*a,c[5]=u*o+w*a,c[6]=d*o+y*a,c[7]=g*o+p*a,c[8]=h*o-l*a,c[9]=w*o-u*a,c[10]=y*o-d*a,c[11]=p*o-g*a,c}},7115:function(v){v.exports=function(c,i,s){var a=Math.sin(s),o=Math.cos(s),l=i[0],u=i[1],d=i[2],g=i[3],h=i[8],w=i[9],y=i[10],p=i[11];return i!==c&&(c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=l*o-h*a,c[1]=u*o-w*a,c[2]=d*o-y*a,c[3]=g*o-p*a,c[8]=l*a+h*o,c[9]=u*a+w*o,c[10]=d*a+y*o,c[11]=g*a+p*o,c}},5240:function(v){v.exports=function(c,i,s){var a=Math.sin(s),o=Math.cos(s),l=i[0],u=i[1],d=i[2],g=i[3],h=i[4],w=i[5],y=i[6],p=i[7];return i!==c&&(c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=l*o+h*a,c[1]=u*o+w*a,c[2]=d*o+y*a,c[3]=g*o+p*a,c[4]=h*o-l*a,c[5]=w*o-u*a,c[6]=y*o-d*a,c[7]=p*o-g*a,c}},3668:function(v){v.exports=function(c,i,s){var a=s[0],o=s[1],l=s[2];return c[0]=i[0]*a,c[1]=i[1]*a,c[2]=i[2]*a,c[3]=i[3]*a,c[4]=i[4]*o,c[5]=i[5]*o,c[6]=i[6]*o,c[7]=i[7]*o,c[8]=i[8]*l,c[9]=i[9]*l,c[10]=i[10]*l,c[11]=i[11]*l,c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c}},998:function(v){v.exports=function(c,i,s){var a,o,l,u,d,g,h,w,y,p,_,x,b=s[0],M=s[1],m=s[2];return i===c?(c[12]=i[0]*b+i[4]*M+i[8]*m+i[12],c[13]=i[1]*b+i[5]*M+i[9]*m+i[13],c[14]=i[2]*b+i[6]*M+i[10]*m+i[14],c[15]=i[3]*b+i[7]*M+i[11]*m+i[15]):(o=i[1],l=i[2],u=i[3],d=i[4],g=i[5],h=i[6],w=i[7],y=i[8],p=i[9],_=i[10],x=i[11],c[0]=a=i[0],c[1]=o,c[2]=l,c[3]=u,c[4]=d,c[5]=g,c[6]=h,c[7]=w,c[8]=y,c[9]=p,c[10]=_,c[11]=x,c[12]=a*b+d*M+y*m+i[12],c[13]=o*b+g*M+p*m+i[13],c[14]=l*b+h*M+_*m+i[14],c[15]=u*b+w*M+x*m+i[15]),c}},2142:function(v){v.exports=function(c,i){if(c===i){var s=i[1],a=i[2],o=i[3],l=i[6],u=i[7],d=i[11];c[1]=i[4],c[2]=i[8],c[3]=i[12],c[4]=s,c[6]=i[9],c[7]=i[13],c[8]=a,c[9]=l,c[11]=i[14],c[12]=o,c[13]=u,c[14]=d}else c[0]=i[0],c[1]=i[4],c[2]=i[8],c[3]=i[12],c[4]=i[1],c[5]=i[5],c[6]=i[9],c[7]=i[13],c[8]=i[2],c[9]=i[6],c[10]=i[10],c[11]=i[14],c[12]=i[3],c[13]=i[7],c[14]=i[11],c[15]=i[15];return c}},4340:function(v,c,i){"use strict";var s=i(957),a=i(7309);function o(d,g){for(var h=[0,0,0,0],w=0;w<4;++w)for(var y=0;y<4;++y)h[y]+=d[4*w+y]*g[w];return h}function l(d,g,h,w,y){for(var p=o(w,o(h,o(g,[d[0],d[1],d[2],1]))),_=0;_<3;++_)p[_]/=p[3];return[.5*y[0]*(1+p[0]),.5*y[1]*(1-p[1])]}function u(d,g){for(var h=[0,0,0],w=0;w<d.length;++w)for(var y=d[w],p=g[w],_=0;_<3;++_)h[_]+=p*y[_];return h}v.exports=function(d,g,h,w,y,p){if(1===d.length)return[0,d[0].slice()];for(var _=new Array(d.length),x=0;x<d.length;++x)_[x]=l(d[x],h,w,y,p);var b=0,M=1/0;for(x=0;x<_.length;++x){for(var m=0,D=0;D<2;++D)m+=Math.pow(_[x][D]-g[D],2);m<M&&(M=m,b=x)}var S=function(P,R){if(2===P.length){for(var F=0,B=0,J=0;J<2;++J)F+=Math.pow(R[J]-P[0][J],2),B+=Math.pow(R[J]-P[1][J],2);return(F=Math.sqrt(F))+(B=Math.sqrt(B))<1e-6?[1,0]:[B/(F+B),F/(B+F)]}if(3===P.length){var z=[0,0];return a(P[0],P[1],P[2],R,z),s(P,z)}return[]}(_,g),O=0;for(x=0;x<3;++x){if(S[x]<-.001||S[x]>1.0001)return null;O+=S[x]}return Math.abs(O-1)>.001?null:[b,u(d,S),S]}},2056:function(v,c,i){var s=i(6832),a=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),o=s(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),u=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),g=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),h=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),w=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),y=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),_=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);c.meshShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.wireShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},c.pointShader={vertex:d,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},c.pickShader={vertex:h,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},c.pointPickShader={vertex:y,fragment:w,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},c.contourShader={vertex:p,fragment:_,attributes:[{name:"position",type:"vec3"}]}},8116:function(v,c,i){"use strict";var s=i(5158),a=i(5827),o=i(2944),l=i(8931),u=i(115),d=i(104),g=i(7437),h=i(5050),w=i(9156),y=i(7212),p=i(5306),_=i(2056),x=i(4340),b=_.meshShader,M=_.wireShader,m=_.pointShader,D=_.pickShader,S=_.pointPickShader,O=_.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function R(H,X,K,ue,ae,ne,Q,ie,le,fe,he,pe,xe,Ee,Re,ke,Te,we,je,Ce,Ie,ge,me,ce,Ae,Ne,De){this.gl=H,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=K,this.lineShader=ue,this.pointShader=ae,this.pickShader=ne,this.pointPickShader=Q,this.contourShader=ie,this.trianglePositions=le,this.triangleColors=he,this.triangleNormals=xe,this.triangleUVs=pe,this.triangleIds=fe,this.triangleVAO=Ee,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Re,this.edgeColors=Te,this.edgeUVs=we,this.edgeIds=ke,this.edgeVAO=je,this.edgeCount=0,this.pointPositions=Ce,this.pointColors=ge,this.pointUVs=me,this.pointSizes=ce,this.pointIds=Ie,this.pointVAO=Ae,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ne,this.contourVAO=De,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var F=R.prototype;function B(H,X){if(!X||!X.length)return 1;for(var K=0;K<X.length;++K){if(X.length<2)return 1;if(X[K][0]===H)return X[K][1];if(X[K][0]>H&&K>0){var ue=(X[K][0]-H)/(X[K][0]-X[K-1][0]);return X[K][1]*(1-ue)+ue*X[K-1][1]}}return 1}F.isOpaque=function(){return!this.hasAlpha},F.isTransparent=function(){return this.hasAlpha},F.pickSlots=1,F.setPickBase=function(H){this.pickId=H},F.highlight=function(H){if(H&&this.contourEnable){for(var X=y(this.cells,this.intensity,H.intensity),K=X.cells,ue=X.vertexIds,ae=X.vertexWeights,ne=K.length,Q=p.mallocFloat32(6*ne),ie=0,le=0;le<ne;++le)for(var fe=K[le],he=0;he<2;++he){var pe=fe[0];2===fe.length&&(pe=fe[he]);for(var Re=ae[pe],ke=1-Re,Te=this.positions[ue[pe][0]],we=this.positions[ue[pe][1]],je=0;je<3;++je)Q[ie++]=Re*Te[je]+ke*we[je]}this.contourCount=ie/3|0,this.contourPositions.update(Q.subarray(0,ie)),p.free(Q)}else this.contourCount=0},F.update=function(H){H=H||{};var X=this.gl;this.dirty=!0,"contourEnable"in H&&(this.contourEnable=H.contourEnable),"contourColor"in H&&(this.contourColor=H.contourColor),"lineWidth"in H&&(this.lineWidth=H.lineWidth),"lightPosition"in H&&(this.lightPosition=H.lightPosition),this.hasAlpha=!1,"opacity"in H&&(this.opacity=H.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in H&&(this.opacityscale=H.opacityscale,this.hasAlpha=!0),"ambient"in H&&(this.ambientLight=H.ambient),"diffuse"in H&&(this.diffuseLight=H.diffuse),"specular"in H&&(this.specularLight=H.specular),"roughness"in H&&(this.roughness=H.roughness),"fresnel"in H&&(this.fresnel=H.fresnel),H.texture?(this.texture.dispose(),this.texture=l(X,H.texture)):H.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(function(Rt,Wt){for(var Ht=w({colormap:Rt,nshades:256,format:"rgba"}),it=new Uint8Array(1024),st=0;st<256;++st){for(var Je=Ht[st],ot=0;ot<3;++ot)it[4*st+ot]=Je[ot];it[4*st+3]=Wt?255*B(st/255,Wt):255*Je[3]}return h(it,[256,256,4],[4,0,1])}(H.colormap,this.opacityscale)),this.texture.generateMipmap());var K=H.cells,ue=H.positions;if(ue&&K){var ae=[],ne=[],Q=[],ie=[],le=[],fe=[],he=[],pe=[],xe=[],Ee=[],Re=[],ke=[],Te=[],we=[];this.cells=K,this.positions=ue;var je=H.vertexNormals,Ce=H.cellNormals,Ie=void 0===H.vertexNormalsEpsilon?1e-6:H.vertexNormalsEpsilon;H.useFacetNormals&&!Ce&&(Ce=u.faceNormals(K,ue,void 0===H.faceNormalsEpsilon?1e-6:H.faceNormalsEpsilon)),Ce||je||(je=u.vertexNormals(K,ue,Ie));var me=H.vertexColors,ce=H.cellColors,Ae=H.meshColor||[1,1,1,1],Ne=H.vertexUVs,De=H.vertexIntensity,qe=H.cellUVs,Ke=H.cellIntensity,be=1/0,Oe=-1/0;if(!Ne&&!qe)if(De)if(H.vertexIntensityBounds)be=+H.vertexIntensityBounds[0],Oe=+H.vertexIntensityBounds[1];else for(var Le=0;Le<De.length;++Le){var Ue=De[Le];be=Math.min(be,Ue),Oe=Math.max(Oe,Ue)}else if(Ke)if(H.cellIntensityBounds)be=+H.cellIntensityBounds[0],Oe=+H.cellIntensityBounds[1];else for(Le=0;Le<Ke.length;++Le)Ue=Ke[Le],be=Math.min(be,Ue),Oe=Math.max(Oe,Ue);else for(Le=0;Le<ue.length;++Le)Ue=ue[Le][2],be=Math.min(be,Ue),Oe=Math.max(Oe,Ue);this.intensity=De||Ke||function(Rt){for(var Wt=Rt.length,Ht=new Array(Wt),it=0;it<Wt;++it)Ht[it]=Rt[it][2];return Ht}(ue),this.pickVertex=!(Ke||ce);var Ze=H.pointSizes,We=H.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Le=0;Le<ue.length;++Le)for(var et=ue[Le],nt=0;nt<3;++nt)!isNaN(et[nt])&&isFinite(et[nt])&&(this.bounds[0][nt]=Math.min(this.bounds[0][nt],et[nt]),this.bounds[1][nt]=Math.max(this.bounds[1][nt],et[nt]));var ct=0,yt=0,ut=0;e:for(Le=0;Le<K.length;++Le){var Ct=K[Le];switch(Ct.length){case 1:for(et=ue[vt=Ct[0]],nt=0;nt<3;++nt)if(isNaN(et[nt])||!isFinite(et[nt]))continue e;Ee.push(et[0],et[1],et[2]),mt=me?me[vt]:ce?ce[Le]:Ae,this.opacityscale&&De?ne.push(mt[0],mt[1],mt[2],this.opacity*B((De[vt]-be)/(Oe-be),this.opacityscale)):3===mt.length?Re.push(mt[0],mt[1],mt[2],this.opacity):(Re.push(mt[0],mt[1],mt[2],mt[3]*this.opacity),mt[3]<1&&(this.hasAlpha=!0)),ke.push((Lt=Ne?Ne[vt]:De?[(De[vt]-be)/(Oe-be),0]:qe?qe[Le]:Ke?[(Ke[Le]-be)/(Oe-be),0]:[(et[2]-be)/(Oe-be),0])[0],Lt[1]),Te.push(Ze?Ze[vt]:We),we.push(Le),ut+=1;break;case 2:for(nt=0;nt<2;++nt){et=ue[vt=Ct[nt]];for(var Dt=0;Dt<3;++Dt)if(isNaN(et[Dt])||!isFinite(et[Dt]))continue e}for(nt=0;nt<2;++nt)et=ue[vt=Ct[nt]],fe.push(et[0],et[1],et[2]),mt=me?me[vt]:ce?ce[Le]:Ae,this.opacityscale&&De?ne.push(mt[0],mt[1],mt[2],this.opacity*B((De[vt]-be)/(Oe-be),this.opacityscale)):3===mt.length?he.push(mt[0],mt[1],mt[2],this.opacity):(he.push(mt[0],mt[1],mt[2],mt[3]*this.opacity),mt[3]<1&&(this.hasAlpha=!0)),pe.push((Lt=Ne?Ne[vt]:De?[(De[vt]-be)/(Oe-be),0]:qe?qe[Le]:Ke?[(Ke[Le]-be)/(Oe-be),0]:[(et[2]-be)/(Oe-be),0])[0],Lt[1]),xe.push(Le);yt+=1;break;case 3:for(nt=0;nt<3;++nt)for(et=ue[vt=Ct[nt]],Dt=0;Dt<3;++Dt)if(isNaN(et[Dt])||!isFinite(et[Dt]))continue e;for(nt=0;nt<3;++nt){var vt,mt,Lt,Ft;et=ue[vt=Ct[2-nt]],ae.push(et[0],et[1],et[2]),(mt=me?me[vt]:ce?ce[Le]:Ae)?this.opacityscale&&De?ne.push(mt[0],mt[1],mt[2],this.opacity*B((De[vt]-be)/(Oe-be),this.opacityscale)):3===mt.length?ne.push(mt[0],mt[1],mt[2],this.opacity):(ne.push(mt[0],mt[1],mt[2],mt[3]*this.opacity),mt[3]<1&&(this.hasAlpha=!0)):ne.push(.5,.5,.5,1),ie.push((Lt=Ne?Ne[vt]:De?[(De[vt]-be)/(Oe-be),0]:qe?qe[Le]:Ke?[(Ke[Le]-be)/(Oe-be),0]:[(et[2]-be)/(Oe-be),0])[0],Lt[1]),Q.push((Ft=je?je[vt]:Ce[Le])[0],Ft[1],Ft[2]),le.push(Le)}ct+=1}}this.pointCount=ut,this.edgeCount=yt,this.triangleCount=ct,this.pointPositions.update(Ee),this.pointColors.update(Re),this.pointUVs.update(ke),this.pointSizes.update(Te),this.pointIds.update(new Uint32Array(we)),this.edgePositions.update(fe),this.edgeColors.update(he),this.edgeUVs.update(pe),this.edgeIds.update(new Uint32Array(xe)),this.trianglePositions.update(ae),this.triangleColors.update(ne),this.triangleUVs.update(ie),this.triangleNormals.update(Q),this.triangleIds.update(new Uint32Array(le))}},F.drawTransparent=F.draw=function(H){for(var X=this.gl,K=(H=H||{}).model||P,ue=H.view||P,ae=H.projection||P,ne=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)ne[0][Q]=Math.max(ne[0][Q],this.clipBounds[0][Q]),ne[1][Q]=Math.min(ne[1][Q],this.clipBounds[1][Q]);var ie={model:K,view:ue,projection:ae,inverseModel:P.slice(),clipBounds:ne,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};ie.inverseModel=g(ie.inverseModel,ie.model),X.disable(X.CULL_FACE),this.texture.bind(0);var le=new Array(16);for(d(le,ie.view,ie.model),d(le,ie.projection,le),g(le,le),Q=0;Q<3;++Q)ie.eyePosition[Q]=le[12+Q]/le[15];var fe,he=le[15];for(Q=0;Q<3;++Q)he+=this.lightPosition[Q]*le[4*Q+3];for(Q=0;Q<3;++Q){for(var pe=le[12+Q],xe=0;xe<3;++xe)pe+=le[4*xe+Q]*this.lightPosition[xe];ie.lightPosition[Q]=pe/he}this.triangleCount>0&&((fe=this.triShader).bind(),fe.uniforms=ie,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((fe=this.lineShader).bind(),fe.uniforms=ie,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((fe=this.pointShader).bind(),fe.uniforms=ie,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((fe=this.contourShader).bind(),fe.uniforms=ie,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind())},F.drawPick=function(H){for(var X=this.gl,K=(H=H||{}).model||P,ue=H.view||P,ae=H.projection||P,ne=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Q=0;Q<3;++Q)ne[0][Q]=Math.max(ne[0][Q],this.clipBounds[0][Q]),ne[1][Q]=Math.min(ne[1][Q],this.clipBounds[1][Q]);this._model=[].slice.call(K),this._view=[].slice.call(ue),this._projection=[].slice.call(ae),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var ie,le={model:K,view:ue,projection:ae,clipBounds:ne,pickId:this.pickId/255};(ie=this.pickShader).bind(),ie.uniforms=le,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointPickShader).bind(),ie.uniforms=le,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind())},F.pick=function(H){if(!H||H.id!==this.pickId)return null;for(var X=H.value[0]+256*H.value[1]+65536*H.value[2],K=this.cells[X],ue=this.positions,ae=new Array(K.length),ne=0;ne<K.length;++ne)ae[ne]=ue[K[ne]];var Q=H.coord[0],ie=H.coord[1];if(!this.pickVertex){var le=this.positions[K[0]],fe=this.positions[K[1]],he=this.positions[K[2]];return{_cellCenter:!0,position:[Q,ie],index:X,cell:K,cellId:X,intensity:this.intensity[X],dataCoordinate:[(le[0]+fe[0]+he[0])/3,(le[1]+fe[1]+he[1])/3,(le[2]+fe[2]+he[2])/3]}}var xe=x(ae,[Q*this.pixelRatio,this._resolution[1]-ie*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!xe)return null;var Ee=xe[2],Re=0;for(ne=0;ne<K.length;++ne)Re+=Ee[ne]*this.intensity[K[ne]];return{position:xe[1],index:K[xe[0]],cell:K,cellId:X,intensity:Re,dataCoordinate:this.positions[K[xe[0]]]}},F.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},v.exports=function(H,X){if(1===arguments.length&&(H=(X=H).gl),!(H.getExtension("OES_standard_derivatives")||H.getExtension("MOZ_OES_standard_derivatives")||H.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var be,K=((be=s(H,b.vertex,b.fragment)).attributes.position.location=0,be.attributes.color.location=2,be.attributes.uv.location=3,be.attributes.normal.location=4,be),ue=function(Ke){var be=s(Ke,M.vertex,M.fragment);return be.attributes.position.location=0,be.attributes.color.location=2,be.attributes.uv.location=3,be}(H),ae=function J(H){var X=s(H,m.vertex,m.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}(H),ne=function z(H){var X=s(H,D.vertex,D.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}(H),Q=function $(H){var X=s(H,S.vertex,S.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}(H),ie=function G(H){var X=s(H,O.vertex,O.fragment);return X.attributes.position.location=0,X}(H),le=l(H,h(new Uint8Array([255,255,255,255]),[1,1,4]));le.generateMipmap(),le.minFilter=H.LINEAR_MIPMAP_LINEAR,le.magFilter=H.LINEAR;var fe=a(H),he=a(H),pe=a(H),xe=a(H),Ee=a(H),Re=o(H,[{buffer:fe,type:H.FLOAT,size:3},{buffer:Ee,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:he,type:H.FLOAT,size:4},{buffer:pe,type:H.FLOAT,size:2},{buffer:xe,type:H.FLOAT,size:3}]),ke=a(H),Te=a(H),we=a(H),je=a(H),Ce=o(H,[{buffer:ke,type:H.FLOAT,size:3},{buffer:je,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Te,type:H.FLOAT,size:4},{buffer:we,type:H.FLOAT,size:2}]),Ie=a(H),ge=a(H),me=a(H),ce=a(H),Ae=a(H),Ne=o(H,[{buffer:Ie,type:H.FLOAT,size:3},{buffer:Ae,type:H.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ge,type:H.FLOAT,size:4},{buffer:me,type:H.FLOAT,size:2},{buffer:ce,type:H.FLOAT,size:1}]),De=a(H),qe=new R(H,le,K,ue,ae,ne,Q,ie,fe,Ee,he,pe,xe,Re,ke,je,Te,we,Ce,Ie,Ae,ge,me,ce,Ne,De,o(H,[{buffer:De,type:H.FLOAT,size:3}]));return qe.update(X),qe}},4554:function(v,c,i){"use strict";v.exports=function(h){var w=h.gl;return new l(h,s(w,[0,0,0,1,1,0,1,1]),a(w,o.boxVert,o.lineFrag))};var s=i(5827),a=i(5158),o=i(2709);function l(h,w,y){this.plot=h,this.vbo=w,this.shader=y}var u,d,g=l.prototype;g.bind=function(){var h=this.shader;this.vbo.bind(),this.shader.bind(),h.attributes.coord.pointer(),h.uniforms.screenBox=this.plot.screenBox},g.drawBox=(u=[0,0],d=[0,0],function(h,w,y,p,_){var b=this.shader,M=this.plot.gl;u[0]=h,u[1]=w,d[0]=y,d[1]=p,b.uniforms.lo=u,b.uniforms.hi=d,b.uniforms.color=_,M.drawArrays(M.TRIANGLE_STRIP,0,4)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(v,c,i){"use strict";v.exports=function(x){var b=x.gl;return new u(x,s(b),a(b,l.gridVert,l.gridFrag),a(b,l.tickVert,l.gridFrag))};var s=i(5827),a=i(5158),o=i(5070),l=i(2709);function u(x,b,M,m){this.plot=x,this.vbo=b,this.shader=M,this.tickShader=m,this.ticks=[[],[]]}function d(x,b){return x-b}var g,h,w,y,p,x,b,M,m,D,S,_=u.prototype;_.draw=(g=[0,0],h=[0,0],w=[0,0],function(){for(var x=this.plot,b=this.vbo,M=this.shader,m=this.ticks,D=x.gl,S=x._tickBounds,O=x.dataBox,P=x.viewBox,R=x.gridLineWidth,F=x.gridLineColor,B=x.gridLineEnable,J=x.pixelRatio,z=0;z<2;++z){var $=S[z],H=.5*(O[z+2]+O[z]),X=O[z+2]-O[z];h[z]=2*(S[z+2]-$)/X,g[z]=2*($-H)/X}M.bind(),b.bind(),M.attributes.dataCoord.pointer(),M.uniforms.dataShift=g,M.uniforms.dataScale=h;var K=0;for(z=0;z<2;++z){w[0]=w[1]=0,w[z]=1,M.uniforms.dataAxis=w,M.uniforms.lineWidth=R[z]/(P[z+2]-P[z])*J,M.uniforms.color=F[z];var ue=6*m[z].length;B[z]&&ue&&D.drawArrays(D.TRIANGLES,K,ue),K+=ue}}),_.drawTickMarks=(x=[0,0],b=[0,0],M=[1,0],m=[0,1],D=[0,0],S=[0,0],function(){for(var O=this.plot,P=this.vbo,R=this.tickShader,F=this.ticks,B=O.gl,J=O._tickBounds,z=O.dataBox,$=O.viewBox,G=O.pixelRatio,H=O.screenBox,X=H[2]-H[0],K=H[3]-H[1],ue=$[2]-$[0],ae=$[3]-$[1],ne=0;ne<2;++ne){var Q=J[ne],le=.5*(z[ne+2]+z[ne]),fe=z[ne+2]-z[ne];b[ne]=2*(J[ne+2]-Q)/fe,x[ne]=2*(Q-le)/fe}b[0]*=ue/X,x[0]*=ue/X,b[1]*=ae/K,x[1]*=ae/K,R.bind(),P.bind(),R.attributes.dataCoord.pointer();var he=R.uniforms;he.dataShift=x,he.dataScale=b;var pe=O.tickMarkLength,xe=O.tickMarkWidth,Ee=O.tickMarkColor,Re=6*F[0].length,ke=Math.min(o.ge(F[0],(z[0]-J[0])/(J[2]-J[0]),d),F[0].length),Te=Math.min(o.gt(F[0],(z[2]-J[0])/(J[2]-J[0]),d),F[0].length),we=0+6*ke,je=6*Math.max(0,Te-ke),Ce=Math.min(o.ge(F[1],(z[1]-J[1])/(J[3]-J[1]),d),F[1].length),Ie=Math.min(o.gt(F[1],(z[3]-J[1])/(J[3]-J[1]),d),F[1].length),ge=Re+6*Ce,me=6*Math.max(0,Ie-Ce);D[0]=2*($[0]-pe[1])/X-1,D[1]=($[3]+$[1])/K-1,S[0]=pe[1]*G/X,S[1]=xe[1]*G/K,me&&(he.color=Ee[1],he.tickScale=S,he.dataAxis=m,he.screenOffset=D,B.drawArrays(B.TRIANGLES,ge,me)),D[0]=($[2]+$[0])/X-1,D[1]=2*($[1]-pe[0])/K-1,S[0]=xe[0]*G/X,S[1]=pe[0]*G/K,je&&(he.color=Ee[0],he.tickScale=S,he.dataAxis=M,he.screenOffset=D,B.drawArrays(B.TRIANGLES,we,je)),D[0]=2*($[2]+pe[3])/X-1,D[1]=($[3]+$[1])/K-1,S[0]=pe[3]*G/X,S[1]=xe[3]*G/K,me&&(he.color=Ee[3],he.tickScale=S,he.dataAxis=m,he.screenOffset=D,B.drawArrays(B.TRIANGLES,ge,me)),D[0]=($[2]+$[0])/X-1,D[1]=2*($[3]+pe[2])/K-1,S[0]=xe[2]*G/X,S[1]=pe[2]*G/K,je&&(he.color=Ee[2],he.tickScale=S,he.dataAxis=M,he.screenOffset=D,B.drawArrays(B.TRIANGLES,we,je))}),_.update=(y=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(x){for(var b=x.ticks,M=x.bounds,m=new Float32Array(18*(b[0].length+b[1].length)),D=0,S=[[],[]],O=0;O<2;++O)for(var P=S[O],R=b[O],F=M[O],B=M[O+2],J=0;J<R.length;++J){var z=(R[J].x-F)/(B-F);P.push(z);for(var $=0;$<6;++$)m[D++]=z,m[D++]=y[$],m[D++]=p[$]}this.ticks=S,this.vbo.update(m)}),_.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(v,c,i){"use strict";v.exports=function(h){var w=h.gl;return new l(h,s(w,[-1,-1,-1,1,1,-1,1,1]),a(w,o.lineVert,o.lineFrag))};var s=i(5827),a=i(5158),o=i(2709);function l(h,w,y){this.plot=h,this.vbo=w,this.shader=y}var u,d,g=l.prototype;g.bind=function(){var h=this.shader;this.vbo.bind(),this.shader.bind(),h.attributes.coord.pointer(),h.uniforms.screenBox=this.plot.screenBox},g.drawLine=(u=[0,0],d=[0,0],function(h,w,y,p,_,x){var b=this.plot,M=this.shader,m=b.gl;u[0]=h,u[1]=w,d[0]=y,d[1]=p,M.uniforms.start=u,M.uniforms.end=d,M.uniforms.width=_*b.pixelRatio,M.uniforms.color=x,m.drawArrays(m.TRIANGLE_STRIP,0,4)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(v,c,i){"use strict";var s=i(6832),a=s(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);v.exports={lineVert:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:a,textVert:s(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:a,gridVert:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:a,boxVert:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},5613:function(v,c,i){"use strict";v.exports=function(b){var M=b.gl;return new d(b,s(M),a(M,u.textVert,u.textFrag))};var s=i(5827),a=i(5158),o=i(6946),l=i(5070),u=i(2709);function d(b,M,m){this.plot=b,this.vbo=M,this.shader=m,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var g,h,w,y,p,_,b,M,x=d.prototype;x.drawTicks=(g=[0,0],h=[0,0],w=[0,0],function(b){var M=this.plot,m=this.shader,D=this.tickX[b],S=this.tickOffset[b],O=M.gl,P=M.viewBox,R=M.dataBox,F=M.screenBox,B=M.pixelRatio,J=M.tickEnable,z=M.tickPad,$=M.tickColor,G=M.tickAngle,H=M.labelEnable,X=M.labelPad,K=M.labelColor,ue=M.labelAngle,ae=this.labelOffset[b],ne=this.labelCount[b],Q=l.lt(D,R[b]),ie=l.le(D,R[b+2]);g[0]=g[1]=0,g[b]=1,h[b]=(P[2+b]+P[b])/(F[2+b]-F[b])-1;var le=2/F[2+(1^b)]-F[1^b];h[1^b]=le*P[1^b]-1,J[b]&&(h[1^b]-=le*B*z[b],Q<ie&&S[ie]>S[Q]&&(m.uniforms.dataAxis=g,m.uniforms.screenOffset=h,m.uniforms.color=$[b],m.uniforms.angle=G[b],O.drawArrays(O.TRIANGLES,S[Q],S[ie]-S[Q]))),H[b]&&ne&&(h[1^b]-=le*B*X[b],m.uniforms.dataAxis=w,m.uniforms.screenOffset=h,m.uniforms.color=K[b],m.uniforms.angle=ue[b],O.drawArrays(O.TRIANGLES,ae,ne)),h[1^b]=le*P[2+(1^b)]-1,J[b+2]&&(h[1^b]+=le*B*z[b+2],Q<ie&&S[ie]>S[Q]&&(m.uniforms.dataAxis=g,m.uniforms.screenOffset=h,m.uniforms.color=$[b+2],m.uniforms.angle=G[b+2],O.drawArrays(O.TRIANGLES,S[Q],S[ie]-S[Q]))),H[b+2]&&ne&&(h[1^b]+=le*B*X[b+2],m.uniforms.dataAxis=w,m.uniforms.screenOffset=h,m.uniforms.color=K[b+2],m.uniforms.angle=ue[b+2],O.drawArrays(O.TRIANGLES,ae,ne))}),x.drawTitle=(b=[0,0],M=[0,0],function(){var m=this.plot,D=this.shader,S=m.gl,O=m.screenBox,P=m.titleCenter,R=m.titleAngle,F=m.titleColor,B=m.pixelRatio;if(this.titleCount){for(var J=0;J<2;++J)M[J]=2*(P[J]*B-O[J])/(O[2+J]-O[J])-1;D.bind(),D.uniforms.dataAxis=b,D.uniforms.screenOffset=M,D.uniforms.angle=R,D.uniforms.color=F,S.drawArrays(S.TRIANGLES,this.titleOffset,this.titleCount)}}),x.bind=(y=[0,0],p=[0,0],_=[0,0],function(){var b=this.plot,M=this.shader,m=b._tickBounds,D=b.dataBox,S=b.screenBox,O=b.viewBox;M.bind();for(var P=0;P<2;++P){var R=m[P],B=.5*(D[P+2]+D[P]),J=D[P+2]-D[P],$=O[P+2]-O[P],H=S[P+2]-S[P];p[P]=2*(m[P+2]-R)/J*$/H,y[P]=2*(R-B)/J*$/H}_[1]=2*b.pixelRatio/(S[3]-S[1]),_[0]=_[1]*(S[3]-S[1])/(S[2]-S[0]),M.uniforms.dataScale=p,M.uniforms.dataShift=y,M.uniforms.textScale=_,this.vbo.bind(),M.attributes.textCoordinate.pointer()}),x.update=function(b){var M,m,D,S,O,P=[],R=b.ticks,F=b.bounds;for(O=0;O<2;++O){var B=[Math.floor(P.length/3)],J=[-1/0],z=R[O];for(M=0;M<z.length;++M){var $=z[M],G=$.x,X=$.font||"sans-serif";S=$.fontSize||12;for(var K=1/(F[O+2]-F[O]),ue=F[O],ae=$.text.split("\n"),ne=0;ne<ae.length;ne++)for(D=o(X,ae[ne]).data,m=0;m<D.length;m+=2)P.push(D[m]*S,-D[m+1]*S-ne*S*1.2,(G-ue)*K);B.push(Math.floor(P.length/3)),J.push(G)}this.tickOffset[O]=B,this.tickX[O]=J}for(O=0;O<2;++O){for(this.labelOffset[O]=Math.floor(P.length/3),D=o(b.labelFont[O],b.labels[O],{textAlign:"center"}).data,S=b.labelSize[O],M=0;M<D.length;M+=2)P.push(D[M]*S,-D[M+1]*S,0);this.labelCount[O]=Math.floor(P.length/3)-this.labelOffset[O]}for(this.titleOffset=Math.floor(P.length/3),D=o(b.titleFont,b.title).data,S=b.titleSize,M=0;M<D.length;M+=2)P.push(D[M]*S,-D[M+1]*S,0);this.titleCount=Math.floor(P.length/3)-this.titleOffset,this.vbo.update(P)},x.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(v,c,i){"use strict";v.exports=function(y){var p=y.gl,_=new d(p,s(p,[p.drawingBufferWidth,p.drawingBufferHeight]));return _.grid=a(_),_.text=o(_),_.line=l(_),_.box=u(_),_.update(y),_};var s=i(2611),a=i(3016),o=i(5613),l=i(1154),u=i(4554);function d(y,p){this.gl=y,this.pickBuffer=p,this.screenBox=[0,0,y.drawingBufferWidth,y.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var g=d.prototype;function h(y){for(var p=y.slice(),_=0;_<p.length;++_)p[_]=p[_].slice();return p}function w(y,p){return y.x-p.x}g.setDirty=function(){this.dirty=this.pickDirty=!0},g.setOverlayDirty=function(){this.dirty=!0},g.nextDepthValue=function(){return this._depthCounter++/65536},g.draw=function(){var y=this.gl,p=this.screenBox,_=this.viewBox,x=this.dataBox,b=this.pixelRatio,M=this.grid,m=this.line,D=this.text,S=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,y.bindFramebuffer(y.FRAMEBUFFER,null),y.enable(y.SCISSOR_TEST),y.disable(y.DEPTH_TEST),y.depthFunc(y.LESS),y.depthMask(!1),y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD,y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),this.borderColor){y.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var O=this.borderColor;y.clearColor(O[0]*O[3],O[1]*O[3],O[2]*O[3],O[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)}y.scissor(_[0],_[1],_[2]-_[0],_[3]-_[1]),y.viewport(_[0],_[1],_[2]-_[0],_[3]-_[1]);var P=this.backgroundColor;y.clearColor(P[0]*P[3],P[1]*P[3],P[2]*P[3],P[3]),y.clear(y.COLOR_BUFFER_BIT),M.draw();var R=this.zeroLineEnable,F=this.zeroLineColor,B=this.zeroLineWidth;if(R[0]||R[1]){m.bind();for(var J=0;J<2;++J)if(R[J]&&x[J]<=0&&x[J+2]>=0){var z=p[J]-x[J]*(p[J+2]-p[J])/(x[J+2]-x[J]);0===J?m.drawLine(z,p[1],z,p[3],B[J],F[J]):m.drawLine(p[0],z,p[2],z,B[J],F[J])}}for(J=0;J<S.length;++J)S[J].draw();y.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),y.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),m.bind();var $=this.borderLineEnable,G=this.borderLineWidth,H=this.borderLineColor;for($[1]&&m.drawLine(_[0],_[1]-.5*G[1]*b,_[0],_[3]+.5*G[3]*b,G[1],H[1]),$[0]&&m.drawLine(_[0]-.5*G[0]*b,_[1],_[2]+.5*G[2]*b,_[1],G[0],H[0]),$[3]&&m.drawLine(_[2],_[1]-.5*G[1]*b,_[2],_[3]+.5*G[3]*b,G[3],H[3]),$[2]&&m.drawLine(_[0]-.5*G[0]*b,_[3],_[2]+.5*G[2]*b,_[3],G[2],H[2]),D.bind(),J=0;J<2;++J)D.drawTicks(J);this.titleEnable&&D.drawTitle();var X=this.overlays;for(J=0;J<X.length;++J)X[J].draw();y.disable(y.SCISSOR_TEST),y.disable(y.BLEND),y.depthMask(!0)}},g.drawPick=function(){if(!this.static){var y=this.pickBuffer;this._pickTimeout=null,y.begin();for(var p=1,_=this.objects,x=0;x<_.length;++x)p=_[x].drawPick(p);y.end()}},g.pick=function(y,p){if(!this.static){var _=this.pixelRatio,x=this.pickPixelRatio,b=this.viewBox,M=0|Math.round((y-b[0]/_)*x),m=0|Math.round((p-b[1]/_)*x),D=this.pickBuffer.query(M,m,this.pickRadius);if(!D)return null;for(var S=D.id+(D.value[0]<<8)+(D.value[1]<<16)+(D.value[2]<<24),O=this.objects,P=0;P<O.length;++P){var R=O[P].pick(M,m,S);if(R)return R}return null}},g.setScreenBox=function(y){var p=this.screenBox,_=this.pixelRatio;p[0]=0|Math.round(y[0]*_),p[1]=0|Math.round(y[1]*_),p[2]=0|Math.round(y[2]*_),p[3]=0|Math.round(y[3]*_),this.setDirty()},g.setDataBox=function(y){var p=this.dataBox;(p[0]!==y[0]||p[1]!==y[1]||p[2]!==y[2]||p[3]!==y[3])&&(p[0]=y[0],p[1]=y[1],p[2]=y[2],p[3]=y[3],this.setDirty())},g.setViewBox=function(y){var p=this.pixelRatio,_=this.viewBox;_[0]=0|Math.round(y[0]*p),_[1]=0|Math.round(y[1]*p),_[2]=0|Math.round(y[2]*p),_[3]=0|Math.round(y[3]*p);var x=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((y[2]-y[0])*x),0|Math.round((y[3]-y[1])*x)],this.setDirty()},g.update=function(y){var p=this.gl;this.pixelRatio=(y=y||{}).pixelRatio||1;var _=this.pixelRatio;this.pickPixelRatio=Math.max(_,1),this.setScreenBox(y.screenBox||[0,0,p.drawingBufferWidth/_,p.drawingBufferHeight/_]),this.setViewBox(y.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/_,.125*(this.screenBox[3]-this.screenBox[1])/_,.875*(this.screenBox[2]-this.screenBox[0])/_,.875*(this.screenBox[3]-this.screenBox[1])/_]);var x=this.viewBox,b=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(y.dataBox||[-10,-10/b,10,10/b]),this.borderColor=!1!==y.borderColor&&(y.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(y.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(y.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(y.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(y.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(y.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(y.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(y.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(y.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(y.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(y.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(y.titleCenter||[.5*(x[0]+x[2])/_,(x[3]+120)/_]).slice(),this.titleEnable=!("titleEnable"in y)||!!y.titleEnable,this.titleAngle=y.titleAngle||0,this.titleColor=(y.titleColor||[0,0,0,1]).slice(),this.labelPad=(y.labelPad||[15,15,15,15]).slice(),this.labelAngle=(y.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(y.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(y.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(y.tickPad||[15,15,15,15]).slice(),this.tickAngle=(y.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(y.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(y.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(y.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(y.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(y.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var M=y.ticks||[[],[]],m=this._tickBounds;m[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var D=0;D<2;++D){var S=M[D].slice(0);0!==S.length&&(S.sort(w),m[D]=Math.min(m[D],S[0].x),m[D+2]=Math.max(m[D+2],S[S.length-1].x))}this.grid.update({bounds:m,ticks:M}),this.text.update({bounds:m,ticks:M,labels:y.labels||["x","y"],labelSize:y.labelSize||[12,12],labelFont:y.labelFont||["sans-serif","sans-serif"],title:y.title||"",titleSize:y.titleSize||18,titleFont:y.titleFont||"sans-serif"}),this.static=!!y.static,this.setDirty()},g.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var y=this.objects.length-1;y>=0;--y)this.objects[y].dispose();for(this.objects.length=0,y=this.overlays.length-1;y>=0;--y)this.overlays[y].dispose();this.overlays.length=0,this.gl=null},g.addObject=function(y){this.objects.indexOf(y)<0&&(this.objects.push(y),this.setDirty())},g.removeObject=function(y){for(var p=this.objects,_=0;_<p.length;++_)if(p[_]===y){p.splice(_,1),this.setDirty();break}},g.addOverlay=function(y){this.overlays.indexOf(y)<0&&(this.overlays.push(y),this.setOverlayDirty())},g.removeOverlay=function(y){for(var p=this.overlays,_=0;_<p.length;++_)if(p[_]===y){p.splice(_,1),this.setOverlayDirty();break}}},4296:function(v,c,i){"use strict";v.exports=function(g,h){g=g||document.body;var w=[.01,1/0];"distanceLimits"in(h=h||{})&&(w[0]=h.distanceLimits[0],w[1]=h.distanceLimits[1]),"zoomMin"in h&&(w[0]=h.zoomMin),"zoomMax"in h&&(w[1]=h.zoomMax);var y=a({center:h.center||[0,0,0],up:h.up||[0,1,0],eye:h.eye||[0,0,10],mode:h.mode||"orbit",distanceLimits:w}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=0,x=g.clientWidth,b=g.clientHeight,M={keyBindingMode:"rotate",enableWheel:!0,view:y,element:g,delay:h.delay||16,rotateSpeed:h.rotateSpeed||1,zoomSpeed:h.zoomSpeed||1,translateSpeed:h.translateSpeed||1,flipX:!!h.flipX,flipY:!!h.flipY,modes:y.modes,_ortho:h._ortho||h.projection&&"orthographic"===h.projection.type||!1,tick:function(){var m=s(),D=this.delay,S=m-2*D;y.idle(m-D),y.recalcMatrix(S),y.flush(m-(100+2*D));for(var O=!0,P=y.computedMatrix,R=0;R<16;++R)O=O&&p[R]===P[R],p[R]=P[R];var F=g.clientWidth===x&&g.clientHeight===b;return x=g.clientWidth,b=g.clientHeight,O?!F:(_=Math.exp(y.computedRadius[0]),!0)},lookAt:function(m,D,S){y.lookAt(y.lastT(),m,D,S)},rotate:function(m,D,S){y.rotate(y.lastT(),m,D,S)},pan:function(m,D,S){y.pan(y.lastT(),m,D,S)},translate:function(m,D,S){y.translate(y.lastT(),m,D,S)}};return Object.defineProperties(M,{matrix:{get:function(){return y.computedMatrix},set:function(m){return y.setMatrix(y.lastT(),m),y.computedMatrix},enumerable:!0},mode:{get:function(){return y.getMode()},set:function(m){var D=y.computedUp.slice(),S=y.computedEye.slice(),O=y.computedCenter.slice();if(y.setMode(m),"turntable"===m){var P=s();y._active.lookAt(P,S,O,D),y._active.lookAt(P+500,S,O,[0,0,1]),y._active.flush(P)}return y.getMode()},enumerable:!0},center:{get:function(){return y.computedCenter},set:function(m){return y.lookAt(y.lastT(),null,m),y.computedCenter},enumerable:!0},eye:{get:function(){return y.computedEye},set:function(m){return y.lookAt(y.lastT(),m),y.computedEye},enumerable:!0},up:{get:function(){return y.computedUp},set:function(m){return y.lookAt(y.lastT(),null,null,m),y.computedUp},enumerable:!0},distance:{get:function(){return _},set:function(m){return y.setDistance(y.lastT(),m),m},enumerable:!0},distanceLimits:{get:function(){return y.getDistanceLimits(w)},set:function(m){return y.setDistanceLimits(m),m},enumerable:!0}}),g.addEventListener("contextmenu",function(m){return m.preventDefault(),!1}),M._lastX=-1,M._lastY=-1,M._lastMods={shift:!1,control:!1,alt:!1,meta:!1},M.enableMouseListeners=function(){function m(D,S,O,P){var R=M.keyBindingMode;if(!1!==R){var F="rotate"===R,B="pan"===R,J="zoom"===R,z=!!P.control,$=!!P.alt,G=!!P.shift,H=!!(1&D),X=!!(2&D),K=!!(4&D),ue=1/g.clientHeight,ae=ue*(S-M._lastX),ne=ue*(O-M._lastY),Q=M.flipX?1:-1,ie=M.flipY?1:-1,le=Math.PI*M.rotateSpeed,fe=s();if(-1!==M._lastX&&-1!==M._lastY&&((F&&H&&!z&&!$&&!G||H&&!z&&!$&&G)&&y.rotate(fe,Q*le*ae,-ie*le*ne,0),(B&&H&&!z&&!$&&!G||X||H&&z&&!$&&!G)&&y.pan(fe,-M.translateSpeed*ae*_,M.translateSpeed*ne*_,0),J&&H&&!z&&!$&&!G||K||H&&!z&&$&&!G)){var he=-M.zoomSpeed*ne/window.innerHeight*(fe-y.lastT())*100;y.pan(fe,0,0,_*(Math.exp(he)-1))}return M._lastX=S,M._lastY=O,M._lastMods=P,!0}}M.mouseListener=o(g,m),g.addEventListener("touchstart",function(D){var S=u(D.changedTouches[0],g);m(0,S[0],S[1],M._lastMods),m(1,S[0],S[1],M._lastMods)},!!d&&{passive:!0}),g.addEventListener("touchmove",function(D){var S=u(D.changedTouches[0],g);m(1,S[0],S[1],M._lastMods),D.preventDefault()},!!d&&{passive:!1}),g.addEventListener("touchend",function(D){m(0,M._lastX,M._lastY,M._lastMods)},!!d&&{passive:!0}),M.wheelListener=l(g,function(D,S){if(!1!==M.keyBindingMode&&M.enableWheel){var O=M.flipX?1:-1,P=M.flipY?1:-1,R=s();if(Math.abs(D)>Math.abs(S))y.rotate(R,0,0,-D*O*Math.PI*M.rotateSpeed/window.innerWidth);else if(!M._ortho){var F=-M.zoomSpeed*P*S/window.innerHeight*(R-y.lastT())/20;y.pan(R,0,0,_*(Math.exp(F)-1))}}},!0)},M.enableMouseListeners(),M};var s=i(8161),a=i(1152),o=i(6145),l=i(6475),u=i(2565),d=i(5233)},8245:function(v,c,i){var s=i(6832),a=i(5158),o=s(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=s(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);v.exports=function(u){return a(u,o,l,null,[{name:"position",type:"vec2"}])}},1059:function(v,c,i){"use strict";var s=i(4296),a=i(7453),o=i(2771),l=i(6496),u=i(2611),d=i(4234),g=i(8126),h=i(6145),w=i(1120),y=i(5268),p=i(8245),_=i(2321)({tablet:!0,featureDetect:!0});function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function b(m){var D=Math.round(Math.log(Math.abs(m))/Math.log(10));if(D<0){var S=Math.round(Math.pow(10,-D));return Math.ceil(m*S)/S}return D>0?(S=Math.round(Math.pow(10,D)),Math.ceil(m/S)*S):Math.ceil(m)}function M(m){return"boolean"!=typeof m||m}v.exports={createScene:function(m){(m=m||{}).camera=m.camera||{};var D=m.canvas;D||(D=document.createElement("canvas"),m.container?m.container.appendChild(D):document.body.appendChild(D));var S=m.gl;if(S||(m.glOptions&&(_=!!m.glOptions.preserveDrawingBuffer),S=function(je,Ce){var Ie=null;try{(Ie=je.getContext("webgl",Ce))||(Ie=je.getContext("experimental-webgl",Ce))}catch{return null}return Ie}(D,m.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:_})),!S)throw new Error("webgl not supported");var O=m.bounds||[[-10,-10,-10],[10,10,10]],P=new x,R=d(S,S.drawingBufferWidth,S.drawingBufferHeight,{preferFloat:!_}),F=p(S),B=m.cameraObject&&!0===m.cameraObject._ortho||m.camera.projection&&"orthographic"===m.camera.projection.type||!1,J={eye:m.camera.eye||[2,0,0],center:m.camera.center||[0,0,0],up:m.camera.up||[0,1,0],zoomMin:m.camera.zoomMax||.1,zoomMax:m.camera.zoomMin||100,mode:m.camera.mode||"turntable",_ortho:B},z=m.axes||{},$=a(S,z);$.enable=!z.disable;var H=l(S,m.spikes||{}),X=[],K=[],ue=[],ae=[],ne=!0,Q=!0,ie={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},le=(Q=!0,[S.drawingBufferWidth,S.drawingBufferHeight]),fe=m.cameraObject||s(D,J),he={gl:S,contextLost:!1,pixelRatio:m.pixelRatio||1,canvas:D,selection:P,camera:fe,axes:$,axesPixels:null,spikes:H,bounds:O,objects:X,shape:le,aspect:m.aspectRatio||[1,1,1],pickRadius:m.pickRadius||10,zNear:m.zNear||.01,zFar:m.zFar||1e3,fovy:m.fovy||Math.PI/4,clearColor:m.clearColor||[0,0,0,0],autoResize:M(m.autoResize),autoBounds:M(m.autoBounds),autoScale:!!m.autoScale,autoCenter:M(m.autoCenter),clipToBounds:M(m.clipToBounds),snapToData:!!m.snapToData,onselect:m.onselect||null,onrender:m.onrender||null,onclick:m.onclick||null,cameraParams:ie,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(je){this.aspect[0]=je.x,this.aspect[1]=je.y,this.aspect[2]=je.z,Q=!0},setBounds:function(je,Ce){this.bounds[0][je]=Ce.min,this.bounds[1][je]=Ce.max},setClearColor:function(je){this.clearColor=je},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},pe=[S.drawingBufferWidth/he.pixelRatio|0,S.drawingBufferHeight/he.pixelRatio|0];function xe(){if(!he._stopped&&he.autoResize){var je=D.parentNode,Ce=1,Ie=1;je&&je!==document.body?(Ce=je.clientWidth,Ie=je.clientHeight):(Ce=window.innerWidth,Ie=window.innerHeight);var ge=0|Math.ceil(Ce*he.pixelRatio),me=0|Math.ceil(Ie*he.pixelRatio);if(ge!==D.width||me!==D.height){D.width=ge,D.height=me;var ce=D.style;ce.position=ce.position||"absolute",ce.left="0px",ce.top="0px",ce.width=Ce+"px",ce.height=Ie+"px",ne=!0}}}function Ee(){for(var je=X.length,Ce=ae.length,Ie=0;Ie<Ce;++Ie)ue[Ie]=0;e:for(Ie=0;Ie<je;++Ie){var ge=X[Ie],me=ge.pickSlots;if(me){for(var ce=0;ce<Ce;++ce)if(ue[ce]+me<255){K[Ie]=ce,ge.setPickBase(ue[ce]+1),ue[ce]+=me;continue e}var Ae=u(S,le);K[Ie]=Ce,ae.push(Ae),ue.push(me),ge.setPickBase(1),Ce+=1}else K[Ie]=-1}for(;Ce>0&&0===ue[Ce-1];)ue.pop(),ae.pop().dispose()}function Re(){if(he.contextLost)return!0;S.isContextLost()&&(he.contextLost=!0,he.mouseListener.enabled=!1,he.selection.object=null,he.oncontextloss&&he.oncontextloss())}he.autoResize&&xe(),window.addEventListener("resize",xe),he.update=function(je){he._stopped||(je=je||{},ne=!0,Q=!0)},he.add=function(je){he._stopped||(je.axes=$,X.push(je),K.push(-1),ne=!0,Q=!0,Ee())},he.remove=function(je){if(!he._stopped){var Ce=X.indexOf(je);Ce<0||(X.splice(Ce,1),K.pop(),ne=!0,Q=!0,Ee())}},he.dispose=function(){if(!he._stopped&&(he._stopped=!0,window.removeEventListener("resize",xe),D.removeEventListener("webglcontextlost",Re),he.mouseListener.enabled=!1,!he.contextLost)){$.dispose(),H.dispose();for(var je=0;je<X.length;++je)X[je].dispose();for(R.dispose(),je=0;je<ae.length;++je)ae[je].dispose();F.dispose(),S=null,$=null,H=null,X=[]}},he._mouseRotating=!1,he._prevButtons=0,he.enableMouseListeners=function(){he.mouseListener=h(D,function(je,Ce,Ie){if(!he._stopped){var ge=ae.length,me=X.length,ce=P.object;P.distance=1/0,P.mouse[0]=Ce,P.mouse[1]=Ie,P.object=null,P.screen=null,P.dataCoordinate=P.dataPosition=null;var Ae=!1;if(je&&he._prevButtons)he._mouseRotating=!0;else{he._mouseRotating&&(Q=!0),he._mouseRotating=!1;for(var Ne=0;Ne<ge;++Ne){var De=ae[Ne].query(Ce,pe[1]-Ie-1,he.pickRadius);if(De){if(De.distance>P.distance)continue;for(var qe=0;qe<me;++qe){var Ke=X[qe];if(K[qe]===Ne){var be=Ke.pick(De);be&&(P.buttons=je,P.screen=De.coord,P.distance=De.distance,P.object=Ke,P.index=be.distance,P.dataPosition=be.position,P.dataCoordinate=be.dataCoordinate,P.data=be,Ae=!0)}}}}}ce&&ce!==P.object&&(ce.highlight&&ce.highlight(null),ne=!0),P.object&&(P.object.highlight&&P.object.highlight(P.data),ne=!0),(Ae=Ae||P.object!==ce)&&he.onselect&&he.onselect(P),1&je&&!(1&he._prevButtons)&&he.onclick&&he.onclick(P),he._prevButtons=je}})},D.addEventListener("webglcontextlost",Re);var ke=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Te=[ke[0].slice(),ke[1].slice()];function we(){if(!Re()){xe();var je=he.camera.tick();ie.view=he.camera.matrix,ne=ne||je,Q=Q||je,$.pixelRatio=he.pixelRatio,H.pixelRatio=he.pixelRatio;var Ce=X.length,Ie=ke[0],ge=ke[1];Ie[0]=Ie[1]=Ie[2]=1/0,ge[0]=ge[1]=ge[2]=-1/0;for(var me=0;me<Ce;++me){(We=X[me]).pixelRatio=he.pixelRatio,We.axes=he.axes,ne=ne||!!We.dirty,Q=Q||!!We.dirty;var ce=We.bounds;if(ce)for(var Ae=ce[0],Ne=ce[1],De=0;De<3;++De)Ie[De]=Math.min(Ie[De],Ae[De]),ge[De]=Math.max(ge[De],Ne[De])}var qe=he.bounds;if(he.autoBounds)for(De=0;De<3;++De){if(ge[De]<Ie[De])Ie[De]=-1,ge[De]=1;else{Ie[De]===ge[De]&&(Ie[De]-=1,ge[De]+=1);var Ke=.05*(ge[De]-Ie[De]);Ie[De]=Ie[De]-Ke,ge[De]=ge[De]+Ke}qe[0][De]=Ie[De],qe[1][De]=ge[De]}var be=!1;for(De=0;De<3;++De)be=be||Te[0][De]!==qe[0][De]||Te[1][De]!==qe[1][De],Te[0][De]=qe[0][De],Te[1][De]=qe[1][De];if(Q=Q||be,ne=ne||be){if(be){var Oe=[0,0,0];for(me=0;me<3;++me)Oe[me]=b((qe[1][me]-qe[0][me])/10);$.update($.autoTicks?{bounds:qe,tickSpacing:Oe}:{bounds:qe})}var Le=S.drawingBufferWidth,Ue=S.drawingBufferHeight;for(le[0]=Le,le[1]=Ue,pe[0]=0|Math.max(Le/he.pixelRatio,1),pe[1]=0|Math.max(Ue/he.pixelRatio,1),function(et,nt){var ct=et.bounds,yt=et.cameraParams,ut=yt.projection,Ct=yt.model,mt=et.zNear,Lt=et.zFar,Ft=et.fovy,Rt=et.gl.drawingBufferWidth/et.gl.drawingBufferHeight;nt?(y(ut,-Rt,Rt,-1,1,mt,Lt),yt._ortho=!0):(w(ut,Ft,Rt,mt,Lt),yt._ortho=!1);for(var Wt=0;Wt<16;++Wt)Ct[Wt]=0;Ct[15]=1;var Ht=0;for(Wt=0;Wt<3;++Wt)Ht=Math.max(Ht,ct[1][Wt]-ct[0][Wt]);for(Wt=0;Wt<3;++Wt)Ct[5*Wt]=et.autoScale?et.aspect[Wt]/(ct[1][Wt]-ct[0][Wt]):1/Ht,et.autoCenter&&(Ct[12+Wt]=.5*-Ct[5*Wt]*(ct[0][Wt]+ct[1][Wt]))}(he,B),me=0;me<Ce;++me)(We=X[me]).axesBounds=qe,he.clipToBounds&&(We.clipBounds=qe);P.object&&(H.position=he.snapToData?P.dataCoordinate:P.dataPosition,H.bounds=qe),Q&&(Q=!1,function(){if(!Re()){S.colorMask(!0,!0,!0,!0),S.depthMask(!0),S.disable(S.BLEND),S.enable(S.DEPTH_TEST),S.depthFunc(S.LEQUAL);for(var et=X.length,nt=ae.length,ct=0;ct<nt;++ct){var yt=ae[ct];yt.shape=pe,yt.begin();for(var ut=0;ut<et;++ut)if(K[ut]===ct){var Ct=X[ut];Ct.drawPick&&(Ct.pixelRatio=1,Ct.drawPick(ie))}yt.end()}}}()),he.axesPixels=o(he.axes,ie,Le,Ue),he.onrender&&he.onrender(),S.bindFramebuffer(S.FRAMEBUFFER,null),S.viewport(0,0,Le,Ue),he.clearRGBA(),S.depthMask(!0),S.colorMask(!0,!0,!0,!0),S.enable(S.DEPTH_TEST),S.depthFunc(S.LEQUAL),S.disable(S.BLEND),S.disable(S.CULL_FACE);var Ze=!1;for($.enable&&(Ze=Ze||$.isTransparent(),$.draw(ie)),H.axes=$,P.object&&H.draw(ie),S.disable(S.CULL_FACE),me=0;me<Ce;++me)(We=X[me]).axes=$,We.pixelRatio=he.pixelRatio,We.isOpaque&&We.isOpaque()&&We.draw(ie),We.isTransparent&&We.isTransparent()&&(Ze=!0);if(Ze){for(R.shape=le,R.bind(),S.clear(S.DEPTH_BUFFER_BIT),S.colorMask(!1,!1,!1,!1),S.depthMask(!0),S.depthFunc(S.LESS),$.enable&&$.isTransparent()&&$.drawTransparent(ie),me=0;me<Ce;++me)(We=X[me]).isOpaque&&We.isOpaque()&&We.draw(ie);for(S.enable(S.BLEND),S.blendEquation(S.FUNC_ADD),S.blendFunc(S.ONE,S.ONE_MINUS_SRC_ALPHA),S.colorMask(!0,!0,!0,!0),S.depthMask(!1),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),$.isTransparent()&&$.drawTransparent(ie),me=0;me<Ce;++me){var We;(We=X[me]).isTransparent&&We.isTransparent()&&We.drawTransparent(ie)}S.bindFramebuffer(S.FRAMEBUFFER,null),S.blendFunc(S.ONE,S.ONE_MINUS_SRC_ALPHA),S.disable(S.DEPTH_TEST),F.bind(),R.color[0].bind(0),F.uniforms.accumBuffer=0,g(S),S.disable(S.BLEND)}for(ne=!1,me=0;me<Ce;++me)X[me].dirty=!1}}}return he.enableMouseListeners(),function je(){he._stopped||he.contextLost||(we(),requestAnimationFrame(je))}(),he.redraw=function(){he._stopped||(ne=!0,we())},he},createCamera:s}},8023:function(v,c,i){var s=i(6832);c.pointVertex=s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),c.pointFragment=s(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),c.pickVertex=s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),c.pickFragment=s(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},8271:function(v,c,i){"use strict";var s=i(5158),a=i(5827),o=i(5306),l=i(8023);function u(w,y,p,_,x){this.plot=w,this.offsetBuffer=y,this.pickBuffer=p,this.shader=_,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}v.exports=function(w,y){var p=w.gl,_=new u(w,a(p),a(p),s(p,l.pointVertex,l.pointFragment),s(p,l.pickVertex,l.pickFragment));return _.update(y),w.addObject(_),_};var d,g,h=u.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(w){var y;function p(S,O){return S in w?w[S]:O}w=w||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var _=w.positions.length>>>1,x=w.positions instanceof Float32Array,b=w.idToIndex instanceof Int32Array&&w.idToIndex.length>=_,M=w.positions,m=x?M:o.mallocFloat32(M.length),D=b?w.idToIndex:o.mallocInt32(_);if(x||m.set(M),!b)for(m.set(M),y=0;y<_;y++)D[y]=y;this.points=M,this.offsetBuffer.update(m),this.pickBuffer.update(D),x||o.free(m),b||o.free(D),this.pointCount=_,this.pickOffset=0},h.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(w){var y=void 0!==w,p=y?this.pickShader:this.shader,_=this.plot.gl,x=this.plot.dataBox;if(0===this.pointCount)return w;var b=x[2]-x[0],M=x[3]-x[1],m=function(P,R){var F,B=0,J=P.length>>>1;for(F=0;F<J;F++){var z=P[2*F],$=P[2*F+1];z>=R[0]&&z<=R[2]&&$>=R[1]&&$<=R[3]&&B++}return B}(this.points,x),D=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(m,.33333)));d[0]=2/b,d[4]=2/M,d[6]=-2*x[0]/b-1,d[7]=-2*x[1]/M-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=d,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=D<5,p.uniforms.pointSize=D,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),y&&(g[0]=255&w,g[1]=w>>8&255,g[2]=w>>16&255,g[3]=w>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(_.UNSIGNED_BYTE),p.uniforms.pickOffset=g,this.pickOffset=w);var S=_.getParameter(_.BLEND),O=_.getParameter(_.DITHER);return S&&!this.blend&&_.disable(_.BLEND),O&&_.disable(_.DITHER),_.drawArrays(_.POINTS,0,this.pointCount),S&&!this.blend&&_.enable(_.BLEND),O&&_.enable(_.DITHER),w+this.pointCount}),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(w,y,p){var _=this.pickOffset;if(p<_||p>=_+this.pointCount)return null;var b=p-_,M=this.points;return{object:this,pointId:b,dataCoord:[M[2*b],M[2*b+1]]}}},6093:function(v){v.exports=function(c,i,s,a){var o,l,u,d,g,h=i[0],w=i[1],y=i[2],p=i[3],_=s[0],x=s[1],b=s[2],M=s[3];return(l=h*_+w*x+y*b+p*M)<0&&(l=-l,_=-_,x=-x,b=-b,M=-M),1-l>1e-6?(o=Math.acos(l),u=Math.sin(o),d=Math.sin((1-a)*o)/u,g=Math.sin(a*o)/u):(d=1-a,g=a),c[0]=d*h+g*_,c[1]=d*w+g*x,c[2]=d*y+g*b,c[3]=d*p+g*M,c}},8240:function(v){"use strict";v.exports=function(c){return c||0===c?c.toString():""}},4123:function(v,c,i){"use strict";var s=i(875);v.exports=function(o,l,u){var d=a[l];if(d||(d=a[l]={}),o in d)return d[o];var g={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},h=s(o,g);g.triangles=!1;var w,y,p=s(o,g);if(u&&1!==u){for(w=0;w<h.positions.length;++w)for(y=0;y<h.positions[w].length;++y)h.positions[w][y]/=u;for(w=0;w<p.positions.length;++w)for(y=0;y<p.positions[w].length;++y)p.positions[w][y]/=u}var _=[[1/0,1/0],[-1/0,-1/0]],x=p.positions.length;for(w=0;w<x;++w){var b=p.positions[w];for(y=0;y<2;++y)_[0][y]=Math.min(_[0][y],b[y]),_[1][y]=Math.max(_[1][y],b[y])}return d[o]=[h,p,_]};var a={}},9282:function(v,c,i){var s=i(5158),a=i(6832),o=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),d=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),g=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],w={vertex:o,fragment:d,attributes:h},y={vertex:l,fragment:d,attributes:h},p={vertex:u,fragment:d,attributes:h},_={vertex:o,fragment:g,attributes:h},x={vertex:l,fragment:g,attributes:h},b={vertex:u,fragment:g,attributes:h};function M(m,D){var S=s(m,D),O=S.attributes;return O.position.location=0,O.color.location=1,O.glyph.location=2,O.id.location=3,S}c.createPerspective=function(m){return M(m,w)},c.createOrtho=function(m){return M(m,y)},c.createProject=function(m){return M(m,p)},c.createPickPerspective=function(m){return M(m,_)},c.createPickOrtho=function(m){return M(m,x)},c.createPickProject=function(m){return M(m,b)}},2182:function(v,c,i){"use strict";var s=i(3596),a=i(5827),o=i(2944),l=i(5306),u=i(104),d=i(9282),g=i(4123),h=i(8240),w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(K,ue){var ae=K[0],ne=K[1],Q=K[2],ie=K[3];return K[0]=ue[0]*ae+ue[4]*ne+ue[8]*Q+ue[12]*ie,K[1]=ue[1]*ae+ue[5]*ne+ue[9]*Q+ue[13]*ie,K[2]=ue[2]*ae+ue[6]*ne+ue[10]*Q+ue[14]*ie,K[3]=ue[3]*ae+ue[7]*ne+ue[11]*Q+ue[15]*ie,K}function p(K,ue,ae,ne){return y(ne,ne),y(ne,ne),y(ne,ne)}function _(K,ue){this.index=K,this.dataCoordinate=this.position=ue}function x(K){return!0===K||K>1?1:K}function b(K,ue,ae,ne,Q,ie,le,fe,he,pe,xe,Ee){this.gl=K,this.pixelRatio=1,this.shader=ue,this.orthoShader=ae,this.projectShader=ne,this.pointBuffer=Q,this.colorBuffer=ie,this.glyphBuffer=le,this.idBuffer=fe,this.vao=he,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=pe,this.pickOrthoShader=xe,this.pickProjectShader=Ee,this.points=[],this._selectResult=new _(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}v.exports=function(K){var ue=K.gl,ae=d.createPerspective(ue),ne=d.createOrtho(ue),Q=d.createProject(ue),ie=d.createPickPerspective(ue),le=d.createPickOrtho(ue),fe=d.createPickProject(ue),he=a(ue),pe=a(ue),xe=a(ue),Ee=a(ue),Re=new b(ue,ae,ne,Q,he,pe,xe,Ee,o(ue,[{buffer:he,size:3,type:ue.FLOAT},{buffer:pe,size:4,type:ue.FLOAT},{buffer:xe,size:2,type:ue.FLOAT},{buffer:Ee,size:4,type:ue.UNSIGNED_BYTE,normalized:!0}]),ie,le,fe);return Re.update(K),Re};var M=b.prototype;M.pickSlots=1,M.setPickBase=function(K){this.pickId=K},M.isTransparent=function(){if(this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&this.projectHasAlpha)return!0;return!1},M.isOpaque=function(){if(!this.hasAlpha)return!0;for(var K=0;K<3;++K)if(this.axesProject[K]&&!this.projectHasAlpha)return!0;return!1};var m=[0,0],D=[0,0,0],S=[0,0,0],O=[0,0,0,1],P=[0,0,0,1],R=w.slice(),F=[0,0,0],B=[[0,0,0],[0,0,0]];function J(K){return K[0]=K[1]=K[2]=0,K}function z(K,ue){return K[0]=ue[0],K[1]=ue[1],K[2]=ue[2],K[3]=1,K}function $(K,ue,ae,ne){return K[0]=ue[0],K[1]=ue[1],K[2]=ue[2],K[ae]=ne,K}var G=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function H(K,ue,ae,ne,Q,ie,le){var fe=ae.gl;if((ie===ae.projectHasAlpha||le)&&function(pe,xe,Ee,Re){var ke,Te=xe.axesProject,we=xe.gl,je=pe.uniforms,Ce=Ee.model||w,Ie=Ee.view||w,ge=Ee.projection||w,me=xe.axesBounds,ce=function(ct){for(var yt=B,ut=0;ut<2;++ut)for(var Ct=0;Ct<3;++Ct)yt[ut][Ct]=Math.max(Math.min(ct[ut][Ct],1e8),-1e8);return yt}(xe.clipBounds);ke=xe.axes&&xe.axes.lastCubeProps?xe.axes.lastCubeProps.axis:[1,1,1],m[0]=2/we.drawingBufferWidth,m[1]=2/we.drawingBufferHeight,pe.bind(),je.view=Ie,je.projection=ge,je.screenSize=m,je.highlightId=xe.highlightId,je.highlightScale=xe.highlightScale,je.clipBounds=ce,je.pickGroup=xe.pickId/255,je.pixelRatio=Re;for(var Ae=0;Ae<3;++Ae)if(Te[Ae]){je.scale=xe.projectScale[Ae],je.opacity=xe.projectOpacity[Ae];for(var Ne=R,De=0;De<16;++De)Ne[De]=0;for(De=0;De<4;++De)Ne[5*De]=1;Ne[5*Ae]=0,Ne[12+Ae]=ke[Ae]<0?me[0][Ae]:me[1][Ae],u(Ne,Ce,Ne),je.model=Ne;var qe=(Ae+1)%3,Ke=(Ae+2)%3,be=J(D),Oe=J(S);be[qe]=1,Oe[Ke]=1;var Le=p(0,0,0,z(O,be)),Ue=p(0,0,0,z(P,Oe));if(Math.abs(Le[1])>Math.abs(Ue[1])){var Ze=Le;Le=Ue,Ue=Ze,Ze=be,be=Oe,Oe=Ze;var We=qe;qe=Ke,Ke=We}Le[0]<0&&(be[qe]=-1),Ue[1]>0&&(Oe[Ke]=-1);var et=0,nt=0;for(De=0;De<4;++De)et+=Math.pow(Ce[4*qe+De],2),nt+=Math.pow(Ce[4*Ke+De],2);be[qe]/=Math.sqrt(et),Oe[Ke]/=Math.sqrt(nt),je.axes[0]=be,je.axes[1]=Oe,je.fragClipBounds[0]=$(F,ce[0],Ae,-1e8),je.fragClipBounds[1]=$(F,ce[1],Ae,1e8),xe.vao.bind(),xe.vao.draw(we.TRIANGLES,xe.vertexCount),xe.lineWidth>0&&(we.lineWidth(xe.lineWidth*Re),xe.vao.draw(we.LINES,xe.lineVertexCount,xe.vertexCount)),xe.vao.unbind()}}(ue,ae,ne,Q),ie===ae.hasAlpha||le){K.bind();var he=K.uniforms;he.model=ne.model||w,he.view=ne.view||w,he.projection=ne.projection||w,m[0]=2/fe.drawingBufferWidth,m[1]=2/fe.drawingBufferHeight,he.screenSize=m,he.highlightId=ae.highlightId,he.highlightScale=ae.highlightScale,he.fragClipBounds=G,he.clipBounds=ae.axes.bounds,he.opacity=ae.opacity,he.pickGroup=ae.pickId/255,he.pixelRatio=Q,ae.vao.bind(),ae.vao.draw(fe.TRIANGLES,ae.vertexCount),ae.lineWidth>0&&(fe.lineWidth(ae.lineWidth*Q),ae.vao.draw(fe.LINES,ae.lineVertexCount,ae.vertexCount)),ae.vao.unbind()}}function X(K,ue,ae,ne){var Q;Q=Array.isArray(K)?ue<K.length?K[ue]:void 0:K,Q=h(Q);var ie=!0;s(Q)&&(Q="\u25bc",ie=!1);var le=g(Q,ae,ne);return{mesh:le[0],lines:le[1],bounds:le[2],visible:ie}}M.draw=function(K){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!1,!1)},M.drawTransparent=function(K){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,K,this.pixelRatio,!0,!1)},M.drawPick=function(K){H(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,K,1,!0,!0)},M.pick=function(K){if(!K||K.id!==this.pickId)return null;var ue=K.value[2]+(K.value[1]<<8)+(K.value[0]<<16);if(ue>=this.pointCount||ue<0)return null;var ae=this.points[ue],ne=this._selectResult;ne.index=ue;for(var Q=0;Q<3;++Q)ne.position[Q]=ne.dataCoordinate[Q]=ae[Q];return ne},M.highlight=function(K){if(K){var ue=K.index;this.highlightId=[(255&ue)/255,(ue>>8&255)/255,(ue>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},M.update=function(K){if("perspective"in(K=K||{})&&(this.useOrtho=!K.perspective),"orthographic"in K&&(this.useOrtho=!!K.orthographic),"lineWidth"in K&&(this.lineWidth=K.lineWidth),"project"in K)if(Array.isArray(K.project))this.axesProject=K.project;else{var ue=!!K.project;this.axesProject=[ue,ue,ue]}if("projectScale"in K)if(Array.isArray(K.projectScale))this.projectScale=K.projectScale.slice();else{var ae=+K.projectScale;this.projectScale=[ae,ae,ae]}if(this.projectHasAlpha=!1,"projectOpacity"in K){this.projectOpacity=Array.isArray(K.projectOpacity)?K.projectOpacity.slice():[ae=+K.projectOpacity,ae,ae];for(var ne=0;ne<3;++ne)this.projectOpacity[ne]=x(this.projectOpacity[ne]),this.projectOpacity[ne]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in K&&(this.opacity=x(K.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Q,ie,le=K.position,fe=K.font||"normal",he=K.alignment||[0,0];if(2===he.length)Q=he[0],ie=he[1];else for(Q=[],ie=[],ne=0;ne<he.length;++ne)Q[ne]=he[ne][0],ie[ne]=he[ne][1];var pe=[1/0,1/0,1/0],xe=[-1/0,-1/0,-1/0],Ee=K.glyph,Re=K.color,ke=K.size,Te=K.angle,we=K.lineColor,je=-1,Ce=0,Ie=0,ge=0;if(le.length){ge=le.length;e:for(ne=0;ne<ge;++ne){for(var me=le[ne],ce=0;ce<3;++ce)if(isNaN(me[ce])||!isFinite(me[ce]))continue e;var Ae=(yt=X(Ee,ne,fe,this.pixelRatio)).mesh,Ne=yt.lines,De=yt.bounds;Ce+=3*Ae.cells.length,Ie+=2*Ne.edges.length}}var qe=Ce+Ie,Ke=l.mallocFloat(3*qe),be=l.mallocFloat(4*qe),Oe=l.mallocFloat(2*qe),Le=l.mallocUint32(qe);if(qe>0){var Ue=0,Ze=Ce,We=[0,0,0,1],et=[0,0,0,1],nt=Array.isArray(Re)&&Array.isArray(Re[0]),ct=Array.isArray(we)&&Array.isArray(we[0]);e:for(ne=0;ne<ge;++ne){for(je+=1,me=le[ne],ce=0;ce<3;++ce){if(isNaN(me[ce])||!isFinite(me[ce]))continue e;xe[ce]=Math.max(xe[ce],me[ce]),pe[ce]=Math.min(pe[ce],me[ce])}Ae=(yt=X(Ee,ne,fe,this.pixelRatio)).mesh,Ne=yt.lines,De=yt.bounds;var yt,ut=yt.visible;if(ut)if(Array.isArray(Re)){if(3===(Ct=nt?ne<Re.length?Re[ne]:[0,0,0,0]:Re).length){for(ce=0;ce<3;++ce)We[ce]=Ct[ce];We[3]=1}else if(4===Ct.length){for(ce=0;ce<4;++ce)We[ce]=Ct[ce];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else We[0]=We[1]=We[2]=0,We[3]=1;else We=[1,1,1,0];if(ut)if(Array.isArray(we)){var Ct;if(3===(Ct=ct?ne<we.length?we[ne]:[0,0,0,0]:we).length){for(ce=0;ce<3;++ce)et[ce]=Ct[ce];et[ce]=1}else if(4===Ct.length){for(ce=0;ce<4;++ce)et[ce]=Ct[ce];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else et[0]=et[1]=et[2]=0,et[3]=1;else et=[1,1,1,0];var Dt=.5;ut?Array.isArray(ke)?Dt=ne<ke.length?+ke[ne]:12:ke?Dt=+ke:this.useOrtho&&(Dt=12):Dt=0;var vt=0;Array.isArray(Te)?vt=ne<Te.length?+Te[ne]:0:Te&&(vt=+Te);var mt=Math.cos(vt),Lt=Math.sin(vt);for(me=le[ne],ce=0;ce<3;++ce)xe[ce]=Math.max(xe[ce],me[ce]),pe[ce]=Math.min(pe[ce],me[ce]);var Ft=Q,Rt=ie;Ft=0,Array.isArray(Q)?Ft=ne<Q.length?Q[ne]:0:Q&&(Ft=Q),Rt=0,Array.isArray(ie)?Rt=ne<ie.length?ie[ne]:0:ie&&(Rt=ie);var Wt=[Ft*=Ft>0?1-De[0][0]:Ft<0?1+De[1][0]:1,Rt*=Rt>0?1-De[0][1]:Rt<0?1+De[1][1]:1],Ht=Ae.cells||[],it=Ae.positions||[];for(ce=0;ce<Ht.length;++ce)for(var st=Ht[ce],Je=0;Je<3;++Je){for(var ot=0;ot<3;++ot)Ke[3*Ue+ot]=me[ot];for(ot=0;ot<4;++ot)be[4*Ue+ot]=We[ot];Le[Ue]=je;var pt=it[st[Je]];Oe[2*Ue]=Dt*(mt*pt[0]-Lt*pt[1]+Wt[0]),Oe[2*Ue+1]=Dt*(Lt*pt[0]+mt*pt[1]+Wt[1]),Ue+=1}for(Ht=Ne.edges,it=Ne.positions,ce=0;ce<Ht.length;++ce)for(st=Ht[ce],Je=0;Je<2;++Je){for(ot=0;ot<3;++ot)Ke[3*Ze+ot]=me[ot];for(ot=0;ot<4;++ot)be[4*Ze+ot]=et[ot];Le[Ze]=je,Oe[2*Ze]=Dt*(mt*(pt=it[st[Je]])[0]-Lt*pt[1]+Wt[0]),Oe[2*Ze+1]=Dt*(Lt*pt[0]+mt*pt[1]+Wt[1]),Ze+=1}}}this.bounds=[pe,xe],this.points=le,this.pointCount=le.length,this.vertexCount=Ce,this.lineVertexCount=Ie,this.pointBuffer.update(Ke),this.colorBuffer.update(be),this.glyphBuffer.update(Oe),this.idBuffer.update(Le),l.free(Ke),l.free(be),l.free(Oe),l.free(Le)},M.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(v,c,i){"use strict";var s=i(6832);c.boxVertex=s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),c.boxFragment=s(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},6623:function(v,c,i){"use strict";var s=i(5158),a=i(5827),o=i(1884);function l(d,g,h){this.plot=d,this.boxBuffer=g,this.boxShader=h,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}v.exports=function(d,g){var h=d.gl,w=new l(d,a(h,[0,0,0,1,1,0,1,1]),s(h,o.boxVertex,o.boxFragment));return w.update(g),d.addOverlay(w),w};var u=l.prototype;u.draw=function(){if(this.enabled){var d=this.plot,g=this.selectBox,h=this.borderWidth,w=this.innerColor,y=this.outerColor,p=this.borderColor,_=d.box,x=d.screenBox,b=d.dataBox,M=d.viewBox,m=d.pixelRatio,D=(g[0]-b[0])*(M[2]-M[0])/(b[2]-b[0])+M[0],S=(g[1]-b[1])*(M[3]-M[1])/(b[3]-b[1])+M[1],O=(g[2]-b[0])*(M[2]-M[0])/(b[2]-b[0])+M[0],P=(g[3]-b[1])*(M[3]-M[1])/(b[3]-b[1])+M[1];if(D=Math.max(D,M[0]),S=Math.max(S,M[1]),O=Math.min(O,M[2]),P=Math.min(P,M[3]),!(O<D||P<S)){_.bind();var R=x[2]-x[0],F=x[3]-x[1];if(this.outerFill&&(_.drawBox(0,0,R,S,y),_.drawBox(0,S,D,P,y),_.drawBox(0,P,R,F,y),_.drawBox(O,S,R,P,y)),this.innerFill&&_.drawBox(D,S,O,P,w),h>0){var B=h*m;_.drawBox(D-B,S-B,O+B,S+B,p),_.drawBox(D-B,P-B,O+B,P+B,p),_.drawBox(D-B,S-B,D+B,P+B,p),_.drawBox(O-B,S-B,O+B,P+B,p)}}}},u.update=function(d){this.innerFill=!!(d=d||{}).innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},u.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(v,c,i){"use strict";v.exports=function(h,w){var y=w[0],p=w[1];return new d(h,s(h,y,p,{}),a.mallocUint8(y*p*4))};var s=i(4234),a=i(5306),o=i(5050),l=i(2288).nextPow2;function u(h,w,y,p,_){this.coord=[h,w],this.id=y,this.value=p,this.distance=_}function d(h,w,y){this.gl=h,this.fbo=w,this.buffer=y,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(w.bind(),h.readPixels(0,0,w.shape[0],w.shape[1],h.RGBA,h.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var g=d.prototype;Object.defineProperty(g,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(this.gl){this.fbo.shape=h;var w=this.fbo.shape[0],y=this.fbo.shape[1];if(y*w*4>this.buffer.length){a.free(this.buffer);for(var p=this.buffer=a.mallocUint8(l(y*w*4)),_=0;_<y*w*4;++_)p[_]=255}return h}}}),g.begin=function(){var h=this.gl;h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},g.end=function(){var h=this.gl;h&&(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},g.query=function(h,w,y){if(!this.gl)return null;var p=this.fbo.shape.slice();h|=0,w|=0,"number"!=typeof y&&(y=1);var _=0|Math.min(Math.max(h-y,0),p[0]),x=0|Math.min(Math.max(h+y,0),p[0]),b=0|Math.min(Math.max(w-y,0),p[1]),M=0|Math.min(Math.max(w+y,0),p[1]);if(x<=_||M<=b)return null;var m=[x-_,M-b],D=o(this.buffer,[m[0],m[1],4],[4,4*p[0],1],4*(_+p[0]*b)),S=function(R,F,B){for(var J=1e8,z=-1,$=-1,G=R.shape[0],H=R.shape[1],X=0;X<G;X++)for(var K=0;K<H;K++){var ue=R.get(X,K,0),ae=R.get(X,K,1),ne=R.get(X,K,2),Q=R.get(X,K,3);if(ue<255||ae<255||ne<255||Q<255){var ie=F-X,le=B-K,fe=ie*ie+le*le;fe<J&&(J=fe,z=X,$=K)}}return[z,$,J]}(D.hi(m[0],m[1],1),y,y),O=S[0],P=S[1];return O<0||Math.pow(this.radius,2)<S[2]?null:new u(O+_|0,P+b|0,D.get(O,P,0),[D.get(O,P,1),D.get(O,P,2),D.get(O,P,3)],Math.sqrt(S[2]))},g.dispose=function(){this.gl&&(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(v,c,i){"use strict";var s=i(9016),a=i(4280),o=i(3984),l=i(1628),u=i(2631),d=i(9068);function g(y){this.gl=y,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=g.prototype;function w(y,p){return y.name<p.name?-1:1}h.bind=function(){var y;this.program||this._relink();var p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),_=this.gl.lastAttribCount;if(p>_)for(y=_;y<p;y++)this.gl.enableVertexAttribArray(y);else if(_>p)for(y=p;y<_;y++)this.gl.disableVertexAttribArray(y);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},h.dispose=function(){for(var y=this.gl.lastAttribCount,p=0;p<y;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},h.update=function(y,p,_,x){if(!p||1===arguments.length){var b=y;y=b.vertex,p=b.fragment,_=b.uniforms,x=b.attributes}var M=this,m=M.gl,D=M._vref;M._vref=l.shader(m,m.VERTEX_SHADER,y),D&&D.dispose(),M.vertShader=M._vref.shader;var S=this._fref;if(M._fref=l.shader(m,m.FRAGMENT_SHADER,p),S&&S.dispose(),M.fragShader=M._fref.shader,!_||!x){var O=m.createProgram();if(m.attachShader(O,M.fragShader),m.attachShader(O,M.vertShader),m.linkProgram(O),!m.getProgramParameter(O,m.LINK_STATUS)){var P=m.getProgramInfoLog(O);throw new d(P,"Error linking program:"+P)}_=_||u.uniforms(m,O),x=x||u.attributes(m,O),m.deleteProgram(O)}(x=x.slice()).sort(w);var R,F=[],B=[],J=[];for(R=0;R<x.length;++R){var z=x[R];if(z.type.indexOf("mat")>=0){for(var $=0|z.type.charAt(z.type.length-1),G=new Array($),H=0;H<$;++H)G[H]=J.length,B.push(z.name+"["+H+"]"),"number"==typeof z.location?J.push(z.location+H):Array.isArray(z.location)&&z.location.length===$&&"number"==typeof z.location[H]?J.push(0|z.location[H]):J.push(-1);F.push({name:z.name,type:z.type,locations:G})}else F.push({name:z.name,type:z.type,locations:[J.length]}),B.push(z.name),J.push("number"==typeof z.location?0|z.location:-1)}var X=0;for(R=0;R<J.length;++R)if(J[R]<0){for(;J.indexOf(X)>=0;)X+=1;J[R]=X}var K=new Array(_.length);function ue(){M.program=l.program(m,M._vref,M._fref,B,J);for(var ae=0;ae<_.length;++ae)K[ae]=m.getUniformLocation(M.program,_[ae].name)}ue(),M._relink=ue,M.types={uniforms:o(_),attributes:o(x)},M.attributes=a(m,M,F,J),Object.defineProperty(M,"uniforms",s(m,M,_,K))},v.exports=function(y,p,_,x,b){var M=new g(y);return M.update(p,_,x,b),M}},9068:function(v){function c(i,s,a){this.shortMessage=s||"",this.longMessage=a||"",this.rawError=i||"",this.message="gl-shader: "+(s||i||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(c.prototype=new Error).name="GLError",c.prototype.constructor=c,v.exports=c},4280:function(v,c,i){"use strict";v.exports=function(g,h,w,y){for(var p={},_=0,x=w.length;_<x;++_){var b=w[_],M=b.name,m=b.type,D=b.locations;switch(m){case"bool":case"int":case"float":u(g,h,D[0],y,1,p,M);break;default:if(m.indexOf("vec")>=0){if((S=m.charCodeAt(m.length-1)-48)<2||S>4)throw new s("","Invalid data type for attribute "+M+": "+m);u(g,h,D[0],y,S,p,M)}else{if(!(m.indexOf("mat")>=0))throw new s("","Unknown data type for attribute "+M+": "+m);var S;if((S=m.charCodeAt(m.length-1)-48)<2||S>4)throw new s("","Invalid data type for attribute "+M+": "+m);d(g,h,D,y,S,p,M)}}}return p};var s=i(9068);function a(g,h,w,y,p,_){this._gl=g,this._wrapper=h,this._index=w,this._locations=y,this._dimension=p,this._constFunc=_}var o=a.prototype;o.pointer=function(g,h,w,y){var p=this,_=p._gl,x=p._locations[p._index];_.vertexAttribPointer(x,p._dimension,g||_.FLOAT,!!h,w||0,y||0),_.enableVertexAttribArray(x)},o.set=function(g,h,w,y){return this._constFunc(this._locations[this._index],g,h,w,y)},Object.defineProperty(o,"location",{get:function(){return this._locations[this._index]},set:function(g){return g!==this._locations[this._index]&&(this._locations[this._index]=0|g,this._wrapper.program=null),0|g}});var l=[function(g,h,w){return void 0===w.length?g.vertexAttrib1f(h,w):g.vertexAttrib1fv(h,w)},function(g,h,w,y){return void 0===w.length?g.vertexAttrib2f(h,w,y):g.vertexAttrib2fv(h,w)},function(g,h,w,y,p){return void 0===w.length?g.vertexAttrib3f(h,w,y,p):g.vertexAttrib3fv(h,w)},function(g,h,w,y,p,_){return void 0===w.length?g.vertexAttrib4f(h,w,y,p,_):g.vertexAttrib4fv(h,w)}];function u(g,h,w,y,p,_,x){var b=l[p],M=new a(g,h,w,y,p,b);Object.defineProperty(_,x,{set:function(m){return g.disableVertexAttribArray(y[w]),b(g,y[w],m),m},get:function(){return M},enumerable:!0})}function d(g,h,w,y,p,_,x){for(var b=new Array(p),M=new Array(p),m=0;m<p;++m)u(g,h,w[m],y,p,b,m),M[m]=b[m];Object.defineProperty(b,"location",{set:function(O){if(Array.isArray(O))for(var P=0;P<p;++P)M[P].location=O[P];else for(P=0;P<p;++P)M[P].location=O+P;return O},get:function(){for(var O=new Array(p),P=0;P<p;++P)O[P]=y[w[P]];return O},enumerable:!0}),b.pointer=function(O,P,R,F){O=O||g.FLOAT,P=!!P,R=R||p*p,F=F||0;for(var B=0;B<p;++B){var J=y[w[B]];g.vertexAttribPointer(J,p,O,P,R,F+B*p),g.enableVertexAttribArray(J)}};var D=new Array(p),S=g["vertexAttrib"+p+"fv"];Object.defineProperty(_,x,{set:function(O){for(var P=0;P<p;++P){var R=y[w[P]];if(g.disableVertexAttribArray(R),Array.isArray(O[0]))S.call(g,R,O[P]);else{for(var F=0;F<p;++F)D[F]=O[p*P+F];S.call(g,R,D)}}return O},get:function(){return b},enumerable:!0})}},9016:function(v,c,i){"use strict";var s=i(3984),a=i(9068);function o(u){return function(){return u}}function l(u,d){for(var g=new Array(u),h=0;h<u;++h)g[h]=d;return g}v.exports=function(u,d,g,h){function w(b){return function(M){for(var m=y("",b),D=0;D<m.length;++D){var S=m[D],O=S[0],P=S[1];if(h[P]){var R=M;if("string"==typeof O&&(0===O.indexOf(".")||0===O.indexOf("["))){var F=O;if(0===O.indexOf(".")&&(F=O.slice(1)),F.indexOf("]")===F.length-1){var B=F.indexOf("["),J=F.slice(0,B),z=F.slice(B+1,F.length-1);R=J?M[J][z]:M[z]}else R=M[F]}var $,G=g[P].type;switch(G){case"bool":case"int":case"sampler2D":case"samplerCube":u.uniform1i(h[P],R);break;case"float":u.uniform1f(h[P],R);break;default:var H=G.indexOf("vec");if(!(0<=H&&H<=1&&G.length===4+H)){if(0===G.indexOf("mat")&&4===G.length){if(($=G.charCodeAt(G.length-1)-48)<2||$>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+G);u["uniformMatrix"+$+"fv"](h[P],!1,R);break}throw new a("","Unknown uniform data type for "+name+": "+G)}if(($=G.charCodeAt(G.length-1)-48)<2||$>4)throw new a("","Invalid data type");switch(G.charAt(0)){case"b":case"i":u["uniform"+$+"iv"](h[P],R);break;case"v":u["uniform"+$+"fv"](h[P],R);break;default:throw new a("","Unrecognized data type for vector "+name+": "+G)}}}}}}function y(b,M){if("object"!=typeof M)return[[b,M]];var m=[];for(var D in M){var S=M[D],O=b;parseInt(D)+""===D?O+="["+D+"]":O+="."+D,"object"==typeof S?m.push.apply(m,y(O,S)):m.push([O,S])}return m}function p(b,M,m){if("object"==typeof m){var D=_(m);Object.defineProperty(b,M,{get:o(D),set:w(m),enumerable:!0,configurable:!1})}else h[m]?Object.defineProperty(b,M,{get:(S=m,function(O,P,R){return O.getUniform(P.program,R[S])}),set:w(m),enumerable:!0,configurable:!1}):b[M]=function(O){switch(O){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var P=O.indexOf("vec");if(0<=P&&P<=1&&O.length===4+P){if((R=O.charCodeAt(O.length-1)-48)<2||R>4)throw new a("","Invalid data type");return"b"===O.charAt(0)?l(R,!1):l(R,0)}if(0===O.indexOf("mat")&&4===O.length){var R;if((R=O.charCodeAt(O.length-1)-48)<2||R>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);return l(R*R,0)}throw new a("","Unknown uniform data type for "+name+": "+O)}}(g[m].type);var S}function _(b){var M;if(Array.isArray(b)){M=new Array(b.length);for(var m=0;m<b.length;++m)p(M,m,b[m])}else for(var D in M={},b)p(M,D,b[D]);return M}var x=s(g,!0);return{get:o(_(x)),set:w(x),enumerable:!0,configurable:!0}}},3984:function(v){"use strict";v.exports=function(c,i){for(var s={},a=0;a<c.length;++a)for(var o=c[a].name.split("."),l=s,u=0;u<o.length;++u){var d=o[u].split("[");if(d.length>1){d[0]in l||(l[d[0]]=[]),l=l[d[0]];for(var g=1;g<d.length;++g){var h=parseInt(d[g]);g<d.length-1||u<o.length-1?(h in l||(l[h]=g<d.length-1?[]:{}),l=l[h]):l[h]=i?a:c[a].type}}else u<o.length-1?(d[0]in l||(l[d[0]]={}),l=l[d[0]]):l[d[0]]=i?a:c[a].type}return s}},2631:function(v,c){"use strict";c.uniforms=function(o,l){for(var u=o.getProgramParameter(l,o.ACTIVE_UNIFORMS),d=[],g=0;g<u;++g){var h=o.getActiveUniform(l,g);if(h){var w=a(o,h.type);if(h.size>1)for(var y=0;y<h.size;++y)d.push({name:h.name.replace("[0]","["+y+"]"),type:w});else d.push({name:h.name,type:w})}}return d},c.attributes=function(o,l){for(var u=o.getProgramParameter(l,o.ACTIVE_ATTRIBUTES),d=[],g=0;g<u;++g){var h=o.getActiveAttrib(l,g);h&&d.push({name:h.name,type:a(o,h.type)})}return d};var i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},s=null;function a(o,l){if(!s){var u=Object.keys(i);s={};for(var d=0;d<u.length;++d){var g=u[d];s[o[g]]=i[g]}}return s[l]}},1628:function(v,c,i){"use strict";c.shader=function(w,y,p){return h(w).getShaderReference(y,p)},c.program=function(w,y,p,_,x){return h(w).getProgram(y,p,_,x)};var s=i(9068),a=i(3530),o=new(typeof WeakMap>"u"?i(4037):WeakMap),l=0;function u(w,y,p,_,x,b,M){this.id=w,this.src=y,this.type=p,this.shader=_,this.count=b,this.programs=[],this.cache=M}function d(w){this.gl=w,this.shaders=[{},{}],this.programs={}}u.prototype.dispose=function(){if(0==--this.count){for(var w=this.cache,y=w.gl,p=this.programs,_=0,x=p.length;_<x;++_){var b=w.programs[p[_]];b&&(delete w.programs[_],y.deleteProgram(b))}y.deleteShader(this.shader),delete w.shaders[this.type===y.FRAGMENT_SHADER|0][this.src]}};var g=d.prototype;function h(w){var y=o.get(w);return y||(y=new d(w),o.set(w,y)),y}g.getShaderReference=function(w,y){var p=this.gl,_=this.shaders[w===p.FRAGMENT_SHADER|0],x=_[y];if(x&&p.isShader(x.shader))x.count+=1;else{var b=function(M,m,D){var S=M.createShader(m);if(M.shaderSource(S,D),M.compileShader(S),!M.getShaderParameter(S,M.COMPILE_STATUS)){var O=M.getShaderInfoLog(S);try{var P=a(O,D,m)}catch(R){throw console.warn("Failed to format compiler error: "+R),new s(O,"Error compiling shader:\n"+O)}throw new s(O,P.short,P.long)}return S}(p,w,y);x=_[y]=new u(l++,y,w,b,[],1,this)}return x},g.getProgram=function(w,y,p,_){var x=[w.id,y.id,p.join(":"),_.join(":")].join("@"),b=this.programs[x];return b&&this.gl.isProgram(b)||(this.programs[x]=b=function(M,m,D,S,O){var P=M.createProgram();M.attachShader(P,m),M.attachShader(P,D);for(var R=0;R<S.length;++R)M.bindAttribLocation(P,O[R],S[R]);if(M.linkProgram(P),!M.getProgramParameter(P,M.LINK_STATUS)){var F=M.getProgramInfoLog(P);throw new s(F,"Error linking program: "+F)}return P}(this.gl,w.shader,y.shader,p,_),w.programs.push(x),y.programs.push(x)),b}},3050:function(v){"use strict";function c(s){this.plot=s,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}v.exports=function(s,a){var o=new c(s);return o.update(a),s.addOverlay(o),o};var i=c.prototype;i.update=function(s){this.enable=((s=s||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(s.width||[1,1,1,1]).slice(),this.color=(s.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(s.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var s=this.enable,a=this.width,o=this.color,l=this.center,u=this.plot,d=u.line,g=u.dataBox,h=u.viewBox;if(d.bind(),g[0]<=l[0]&&l[0]<=g[2]&&g[1]<=l[1]&&l[1]<=g[3]){var w=h[0]+(l[0]-g[0])/(g[2]-g[0])*(h[2]-h[0]),y=h[1]+(l[1]-g[1])/(g[3]-g[1])*(h[3]-h[1]);s[0]&&d.drawLine(w,y,h[0],y,a[0],o[0]),s[1]&&d.drawLine(w,y,w,h[1],a[1],o[1]),s[2]&&d.drawLine(w,y,h[2],y,a[2],o[2]),s[3]&&d.drawLine(w,y,w,h[3],a[3],o[3])}},i.dispose=function(){this.plot.removeOverlay(this)}},3540:function(v,c,i){"use strict";var s=i(6832),a=i(5158),o=s(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=s(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);v.exports=function(u){return a(u,o,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(v,c,i){"use strict";var s=i(5827),a=i(2944),o=i(3540);v.exports=function(y,p){var _=[];function x(S,O,P,R,F,B){var J=[S,O,P,0,0,0,1];J[R+3]=1,J[R]=F,_.push.apply(_,J),J[6]=-1,_.push.apply(_,J),J[R]=B,_.push.apply(_,J),_.push.apply(_,J),J[6]=1,_.push.apply(_,J),J[R]=F,_.push.apply(_,J)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var b=s(y,_),M=a(y,[{type:y.FLOAT,buffer:b,size:3,offset:0,stride:28},{type:y.FLOAT,buffer:b,size:3,offset:12,stride:28},{type:y.FLOAT,buffer:b,size:1,offset:24,stride:28}]),m=o(y);m.attributes.position.location=0,m.attributes.color.location=1,m.attributes.weight.location=2;var D=new u(y,b,M,m);return D.update(p),D};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function u(y,p,_,x){this.gl=y,this.buffer=p,this.vao=_,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=u.prototype,g=[0,0,0],h=[0,0,0],w=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(y){},d.draw=function(y){var p=this.gl,_=this.vao,x=this.shader;_.bind(),x.bind();var b,M=y.model||l,m=y.view||l,D=y.projection||l;this.axes&&(b=this.axes.lastCubeProps.axis);for(var S=g,O=h,P=0;P<3;++P)b&&b[P]<0?(S[P]=this.bounds[0][P],O[P]=this.bounds[1][P]):(S[P]=this.bounds[1][P],O[P]=this.bounds[0][P]);for(w[0]=p.drawingBufferWidth,w[1]=p.drawingBufferHeight,x.uniforms.model=M,x.uniforms.view=m,x.uniforms.projection=D,x.uniforms.coordinates=[this.position,S,O],x.uniforms.colors=this.colors,x.uniforms.screenShape=w,P=0;P<3;++P)x.uniforms.lineWidth=this.lineWidth[P]*this.pixelRatio,this.enabled[P]&&(_.draw(p.TRIANGLES,6,6*P),this.drawSides[P]&&_.draw(p.TRIANGLES,12,18+12*P));_.unbind()},d.update=function(y){y&&("bounds"in y&&(this.bounds=y.bounds),"position"in y&&(this.position=y.position),"lineWidth"in y&&(this.lineWidth=y.lineWidth),"colors"in y&&(this.colors=y.colors),"enabled"in y&&(this.enabled=y.enabled),"drawSides"in y&&(this.drawSides=y.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(v,c,i){var s=i(6832),a=s(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=s(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=s(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),u=s(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);c.meshShader={vertex:a,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},c.pickShader={vertex:l,fragment:u,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(v,c,i){"use strict";var s=i(2858),a=i(4020),o=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(w,y){var p,_=w.length;for(p=0;p<_;p++){var x=w[p];if(x===y)return p;if(x>y)return p-1}return p},u=function(w,y,p){return w<y?y:w>p?p:w},d=function(w){var y=1/0;w.sort(function(b,M){return b-M});for(var p=w.length,_=1;_<p;_++){var x=Math.abs(w[_]-w[_-1]);x<y&&(y=x)}return y};v.exports=function(w,y){var p=w.startingPositions,_=w.maxLength||1e3,x=w.tubeSize||1,b=w.absoluteTubeSize,M=w.gridFill||"+x+y+z",m={};-1!==M.indexOf("-x")&&(m.reversedX=!0),-1!==M.indexOf("-y")&&(m.reversedY=!0),-1!==M.indexOf("-z")&&(m.reversedZ=!0),m.filled=o.indexOf(M.replace(/-/g,"").replace(/\+/g,""));var we,je,Ce,Ie,D=w.getVelocity||function(we){return function(je,Ce,Ie){var ge=Ce.vectors,me=Ce.meshgrid,ce=je[0],Ae=je[1],Ne=je[2],De=me[0].length,qe=me[1].length,Ke=me[2].length,be=l(me[0],ce),Oe=l(me[1],Ae),Le=l(me[2],Ne),Ue=be+1,Ze=Oe+1,We=Le+1;if(be=u(be,0,De-1),Ue=u(Ue,0,De-1),Oe=u(Oe,0,qe-1),Ze=u(Ze,0,qe-1),Le=u(Le,0,Ke-1),We=u(We,0,Ke-1),be<0||Oe<0||Le<0||Ue>De-1||Ze>qe-1||We>Ke-1)return s.create();var et,nt,ct,yt,ut,Ct,Dt=me[0][be],mt=me[1][Oe],Ft=me[2][Le],Rt=(ce-Dt)/(me[0][Ue]-Dt),Wt=(Ae-mt)/(me[1][Ze]-mt),Ht=(Ne-Ft)/(me[2][We]-Ft);switch(isFinite(Rt)||(Rt=.5),isFinite(Wt)||(Wt=.5),isFinite(Ht)||(Ht=.5),Ie.reversedX&&(be=De-1-be,Ue=De-1-Ue),Ie.reversedY&&(Oe=qe-1-Oe,Ze=qe-1-Ze),Ie.reversedZ&&(Le=Ke-1-Le,We=Ke-1-We),Ie.filled){case 5:ut=Le,Ct=We,ct=Oe*Ke,yt=Ze*Ke,et=be*Ke*qe,nt=Ue*Ke*qe;break;case 4:ut=Le,Ct=We,et=be*Ke,nt=Ue*Ke,ct=Oe*Ke*De,yt=Ze*Ke*De;break;case 3:ct=Oe,yt=Ze,ut=Le*qe,Ct=We*qe,et=be*qe*Ke,nt=Ue*qe*Ke;break;case 2:ct=Oe,yt=Ze,et=be*qe,nt=Ue*qe,ut=Le*qe*De,Ct=We*qe*De;break;case 1:et=be,nt=Ue,ut=Le*De,Ct=We*De,ct=Oe*De*Ke,yt=Ze*De*Ke;break;default:et=be,nt=Ue,ct=Oe*De,yt=Ze*De,ut=Le*De*qe,Ct=We*De*qe}var it=ge[et+ct+ut],st=ge[et+ct+Ct],Je=ge[et+yt+ut],ot=ge[et+yt+Ct],pt=ge[nt+ct+ut],xt=ge[nt+ct+Ct],He=ge[nt+yt+ut],Ge=ge[nt+yt+Ct],dt=s.create(),ht=s.create(),kt=s.create(),St=s.create();s.lerp(dt,it,pt,Rt),s.lerp(ht,st,xt,Rt),s.lerp(kt,Je,He,Rt),s.lerp(St,ot,Ge,Rt);var Et=s.create(),wt=s.create();s.lerp(Et,dt,kt,Wt),s.lerp(wt,ht,St,Wt);var Nt=s.create();return s.lerp(Nt,Et,wt,Ht),Nt}(we,w,m)},S=w.getDivergence||function(we,je){var Ce=s.create(),Ie=1e-4;s.add(Ce,we,[Ie,0,0]);var ge=D(Ce);s.subtract(ge,ge,je),s.scale(ge,ge,1/Ie),s.add(Ce,we,[0,Ie,0]);var me=D(Ce);s.subtract(me,me,je),s.scale(me,me,1/Ie),s.add(Ce,we,[0,0,Ie]);var ce=D(Ce);return s.subtract(ce,ce,je),s.scale(ce,ce,1/Ie),s.add(Ce,ge,me),s.add(Ce,Ce,ce),Ce},O=[],P=y[0][0],R=y[0][1],F=y[0][2],B=y[1][0],J=y[1][1],z=y[1][2],G=10*s.distance(y[0],y[1])/_,H=G*G,X=1,K=0,ue=p.length;ue>1&&(X=function(we){for(var je=[],Ce=[],Ie=[],ge={},me={},ce={},Ae=we.length,Ne=0;Ne<Ae;Ne++){var De=we[Ne],qe=De[0],Ke=De[1],be=De[2];ge[qe]||(je.push(qe),ge[qe]=!0),me[Ke]||(Ce.push(Ke),me[Ke]=!0),ce[be]||(Ie.push(be),ce[be]=!0)}var Oe=d(je),Le=d(Ce),Ue=d(Ie),Ze=Math.min(Oe,Le,Ue);return isFinite(Ze)?Ze:1}(p));for(var ae=0;ae<ue;ae++){var ne=s.create();s.copy(ne,p[ae]);var Q=[ne],ie=[],le=D(ne),fe=ne;ie.push(le);var he=[],pe=S(ne,le),xe=s.length(pe);isFinite(xe)&&xe>K&&(K=xe),he.push(xe),O.push({points:Q,velocities:ie,divergences:he});for(var Ee=0;Ee<100*_&&Q.length<_&&(je=void 0,Ce=void 0,Ie=void 0,Ce=(we=ne)[1],Ie=we[2],!((je=we[0])<P||je>B||Ce<R||Ce>J||Ie<F||Ie>z));){Ee++;var Re=s.clone(le),ke=s.squaredLength(Re);if(0===ke)break;ke>H&&s.scale(Re,Re,G/Math.sqrt(ke)),s.add(Re,Re,ne),le=D(Re),s.squaredDistance(fe,Re)-H>-1e-4*H&&(Q.push(Re),fe=Re,ie.push(le),pe=S(Re,le),xe=s.length(pe),isFinite(xe)&&xe>K&&(K=xe),he.push(xe)),ne=Re}}var Te=function(we,je,Ce,Ie){for(var ge=0,me=0;me<we.length;me++)for(var ce=we[me].velocities,Ae=0;Ae<ce.length;Ae++)ge=Math.max(ge,s.length(ce[Ae]));var Ne=we.map(function(et){return function(nt,ct,yt,ut){for(var Ct=nt.points,Dt=nt.velocities,vt=nt.divergences,mt=[],Lt=[],Ft=[],Rt=[],Wt=[],Ht=[],it=0,st=0,Je=a.create(),ot=a.create(),pt=0;pt<Ct.length;pt++){var xt=Ct[pt],He=Dt[pt],Ge=vt[pt];0===ct&&(Ge=.05*yt),st=s.length(He)/ut,Je=a.create(),s.copy(Je,He),Je[3]=Ge;for(var dt=0;dt<8;dt++)Wt[dt]=[xt[0],xt[1],xt[2],dt];if(Rt.length>0)for(dt=0;dt<8;dt++){var ht=(dt+1)%8;mt.push(Rt[dt],Wt[dt],Wt[ht],Wt[ht],Rt[ht],Rt[dt]),Ft.push(ot,Je,Je,Je,ot,ot),Ht.push(it,st,st,st,it,it);var kt=mt.length;Lt.push([kt-6,kt-5,kt-4],[kt-3,kt-2,kt-1])}var St=Rt;Rt=Wt,Wt=St;var Et=ot;ot=Je,Je=Et;var wt=it;it=st,st=wt}return{positions:mt,cells:Lt,vectors:Ft,vertexIntensity:Ht}}(et,Ce,Ie,ge)}),De=[],qe=[],Ke=[],be=[];for(me=0;me<Ne.length;me++){var Oe=Ne[me],Le=De.length;for(De=De.concat(Oe.positions),Ke=Ke.concat(Oe.vectors),be=be.concat(Oe.vertexIntensity),Ae=0;Ae<Oe.cells.length;Ae++){var Ue=Oe.cells[Ae],Ze=[];qe.push(Ze);for(var We=0;We<Ue.length;We++)Ze.push(Ue[We]+Le)}}return{positions:De,cells:qe,vectors:Ke,vertexIntensity:be,colormap:je}}(O,w.colormap,K,X);return b?Te.tubeScale=b:(0===K&&(K=1),Te.tubeScale=.5*x*X/K),Te};var g=i(9578),h=i(1140).createMesh;v.exports.createTubeMesh=function(w,y){return h(w,y,{shaders:g,traceType:"streamtube"})}},9054:function(v,c,i){var s=i(5158),a=i(6832),o=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=a(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),u=a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),d=a(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);c.createShader=function(g){var h=s(g,o,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},c.createPickShader=function(g){var h=s(g,o,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},c.createContourShader=function(g){var h=s(g,u,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},c.createPickContourShader=function(g){var h=s(g,u,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},3754:function(v,c,i){"use strict";v.exports=function(pe){var xe=pe.gl,Ee=m(xe),Re=S(xe),ke=D(xe),Te=O(xe),we=a(xe),je=o(xe,[{buffer:we,size:4,stride:P,offset:0},{buffer:we,size:3,stride:P,offset:16},{buffer:we,size:3,stride:P,offset:28}]),Ce=a(xe),Ie=o(xe,[{buffer:Ce,size:4,stride:20,offset:0},{buffer:Ce,size:1,stride:20,offset:16}]),ge=a(xe),me=o(xe,[{buffer:ge,size:2,type:xe.FLOAT}]),ce=l(xe,1,z,xe.RGBA,xe.UNSIGNED_BYTE);ce.minFilter=xe.LINEAR,ce.magFilter=xe.LINEAR;var Ae=new $(xe,[0,0],[[0,0,0],[0,0,0]],Ee,Re,we,je,ce,ke,Te,Ce,Ie,ge,me,[0,0,0]),Ne={levels:[[],[],[]]};for(var De in pe)Ne[De]=pe[De];return Ne.colormap=Ne.colormap||"jet",Ae.update(Ne),Ae};var s=i(2288),a=i(5827),o=i(2944),l=i(8931),u=i(5306),d=i(9156),g=i(7498),h=i(7382),w=i(5050),y=i(4162),p=i(104),_=i(7437),x=i(5070),b=i(9144),M=i(9054),m=M.createShader,D=M.createContourShader,S=M.createPickShader,O=M.createPickContourShader,P=40,R=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],B=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function J(pe,xe,Ee,Re,ke){this.position=pe,this.index=xe,this.uv=Ee,this.level=Re,this.dataCoordinate=ke}!function(){for(var pe=0;pe<3;++pe){var xe=B[pe],Ee=(pe+2)%3;xe[(pe+1)%3+0]=1,xe[Ee+3]=1,xe[pe+6]=1}}();var z=256;function $(pe,xe,Ee,Re,ke,Te,we,je,Ce,Ie,ge,me,ce,Ae,Ne){this.gl=pe,this.shape=xe,this.bounds=Ee,this.objectOffset=Ne,this.intensityBounds=[],this._shader=Re,this._pickShader=ke,this._coordinateBuffer=Te,this._vao=we,this._colorMap=je,this._contourShader=Ce,this._contourPickShader=Ie,this._contourBuffer=ge,this._contourVAO=me,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new J([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ce,this._dynamicVAO=Ae,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[w(u.mallocFloat(1024),[0,0]),w(u.mallocFloat(1024),[0,0]),w(u.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var G=$.prototype;G.genColormap=function(pe,xe){var Ee=!1,Re=h([d({colormap:pe,nshades:z,format:"rgba"}).map(function(ke,Te){var we=xe?function(je,Ce){if(!Ce||!Ce.length)return 1;for(var Ie=0;Ie<Ce.length;++Ie){if(Ce.length<2)return 1;if(Ce[Ie][0]===je)return Ce[Ie][1];if(Ce[Ie][0]>je&&Ie>0){var ge=(Ce[Ie][0]-je)/(Ce[Ie][0]-Ce[Ie-1][0]);return Ce[Ie][1]*(1-ge)+ge*Ce[Ie-1][1]}}return 1}(Te/255,xe):ke[3];return we<1&&(Ee=!0),[ke[0],ke[1],ke[2],255*we]})]);return g.divseq(Re,255),this.hasAlphaScale=Ee,Re},G.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},G.isOpaque=function(){return!this.isTransparent()},G.pickSlots=1,G.setPickBase=function(pe){this.pickId=pe};var H=[0,0,0],X={showSurface:!1,showContour:!1,projections:[R.slice(),R.slice(),R.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function K(pe,xe){var Ee,Re,ke,Te=xe.axes&&xe.axes.lastCubeProps.axis||H,we=xe.showSurface,je=xe.showContour;for(Ee=0;Ee<3;++Ee)for(we=we||xe.surfaceProject[Ee],Re=0;Re<3;++Re)je=je||xe.contourProject[Ee][Re];for(Ee=0;Ee<3;++Ee){var Ce=X.projections[Ee];for(Re=0;Re<16;++Re)Ce[Re]=0;for(Re=0;Re<4;++Re)Ce[5*Re]=1;Ce[5*Ee]=0,Ce[12+Ee]=xe.axesBounds[+(Te[Ee]>0)][Ee],p(Ce,pe.model,Ce);var Ie=X.clipBounds[Ee];for(ke=0;ke<2;++ke)for(Re=0;Re<3;++Re)Ie[ke][Re]=pe.clipBounds[ke][Re];Ie[0][Ee]=-1e8,Ie[1][Ee]=1e8}return X.showSurface=we,X.showContour=je,X}var ue={model:R,view:R,projection:R,inverseModel:R.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},ae=R.slice(),ne=[1,0,0,0,1,0,0,0,1];function Q(pe,xe){pe=pe||{};var Ee=this.gl;Ee.disable(Ee.CULL_FACE),this._colorMap.bind(0);var Re=ue;Re.model=pe.model||R,Re.view=pe.view||R,Re.projection=pe.projection||R,Re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Re.objectOffset=this.objectOffset,Re.contourColor=this.contourColor[0],Re.inverseModel=_(Re.inverseModel,Re.model);for(var ke=0;ke<2;++ke)for(var Te=Re.clipBounds[ke],we=0;we<3;++we)Te[we]=Math.min(Math.max(this.clipBounds[ke][we],-1e8),1e8);Re.kambient=this.ambientLight,Re.kdiffuse=this.diffuseLight,Re.kspecular=this.specularLight,Re.roughness=this.roughness,Re.fresnel=this.fresnel,Re.opacity=this.opacity,Re.height=0,Re.permutation=ne,Re.vertexColor=this.vertexColor;var je=ae;for(p(je,Re.view,Re.model),p(je,Re.projection,je),_(je,je),ke=0;ke<3;++ke)Re.eyePosition[ke]=je[12+ke]/je[15];var Ce=je[15];for(ke=0;ke<3;++ke)Ce+=this.lightPosition[ke]*je[4*ke+3];for(ke=0;ke<3;++ke){var Ie=je[12+ke];for(we=0;we<3;++we)Ie+=je[4*we+ke]*this.lightPosition[we];Re.lightPosition[ke]=Ie/Ce}var ge=K(Re,this);if(ge.showSurface){for(this._shader.bind(),this._shader.uniforms=Re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(Ee.TRIANGLES,this._vertexCount),ke=0;ke<3;++ke)this.surfaceProject[ke]&&this.vertexCount&&(this._shader.uniforms.model=ge.projections[ke],this._shader.uniforms.clipBounds=ge.clipBounds[ke],this._vao.draw(Ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var me=this._contourShader;Re.kambient=1,Re.kdiffuse=0,Re.kspecular=0,Re.opacity=1,me.bind(),me.uniforms=Re;var ce=this._contourVAO;for(ce.bind(),ke=0;ke<3;++ke)for(me.uniforms.permutation=B[ke],Ee.lineWidth(this.contourWidth[ke]*this.pixelRatio),we=0;we<this.contourLevels[ke].length;++we)we===this.highlightLevel[ke]?(me.uniforms.contourColor=this.highlightColor[ke],me.uniforms.contourTint=this.highlightTint[ke]):0!==we&&we-1!==this.highlightLevel[ke]||(me.uniforms.contourColor=this.contourColor[ke],me.uniforms.contourTint=this.contourTint[ke]),this._contourCounts[ke][we]&&(me.uniforms.height=this.contourLevels[ke][we],ce.draw(Ee.LINES,this._contourCounts[ke][we],this._contourOffsets[ke][we]));for(ke=0;ke<3;++ke)for(me.uniforms.model=ge.projections[ke],me.uniforms.clipBounds=ge.clipBounds[ke],we=0;we<3;++we)if(this.contourProject[ke][we]){me.uniforms.permutation=B[we],Ee.lineWidth(this.contourWidth[we]*this.pixelRatio);for(var Ae=0;Ae<this.contourLevels[we].length;++Ae)Ae===this.highlightLevel[we]?(me.uniforms.contourColor=this.highlightColor[we],me.uniforms.contourTint=this.highlightTint[we]):0!==Ae&&Ae-1!==this.highlightLevel[we]||(me.uniforms.contourColor=this.contourColor[we],me.uniforms.contourTint=this.contourTint[we]),this._contourCounts[we][Ae]&&(me.uniforms.height=this.contourLevels[we][Ae],ce.draw(Ee.LINES,this._contourCounts[we][Ae],this._contourOffsets[we][Ae]))}for(ce.unbind(),(ce=this._dynamicVAO).bind(),ke=0;ke<3;++ke)if(0!==this._dynamicCounts[ke])for(me.uniforms.model=Re.model,me.uniforms.clipBounds=Re.clipBounds,me.uniforms.permutation=B[ke],Ee.lineWidth(this.dynamicWidth[ke]*this.pixelRatio),me.uniforms.contourColor=this.dynamicColor[ke],me.uniforms.contourTint=this.dynamicTint[ke],me.uniforms.height=this.dynamicLevel[ke],ce.draw(Ee.LINES,this._dynamicCounts[ke],this._dynamicOffsets[ke]),we=0;we<3;++we)this.contourProject[we][ke]&&(me.uniforms.model=ge.projections[we],me.uniforms.clipBounds=ge.clipBounds[we],ce.draw(Ee.LINES,this._dynamicCounts[ke],this._dynamicOffsets[ke]));ce.unbind()}}G.draw=function(pe){return Q.call(this,pe,!1)},G.drawTransparent=function(pe){return Q.call(this,pe,!0)};var ie={model:R,view:R,projection:R,inverseModel:R,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function le(pe,xe){return Array.isArray(pe)?[xe(pe[0]),xe(pe[1]),xe(pe[2])]:[xe(pe),xe(pe),xe(pe)]}function fe(pe){return Array.isArray(pe)?3===pe.length?[pe[0],pe[1],pe[2],1]:[pe[0],pe[1],pe[2],pe[3]]:[0,0,0,1]}function he(pe){if(Array.isArray(pe)){if(Array.isArray(pe))return[fe(pe[0]),fe(pe[1]),fe(pe[2])];var xe=fe(pe);return[xe.slice(),xe.slice(),xe.slice()]}}G.drawPick=function(pe){pe=pe||{};var xe=this.gl;xe.disable(xe.CULL_FACE);var Ee=ie;Ee.model=pe.model||R,Ee.view=pe.view||R,Ee.projection=pe.projection||R,Ee.shape=this._field[2].shape,Ee.pickId=this.pickId/255,Ee.lowerBound=this.bounds[0],Ee.upperBound=this.bounds[1],Ee.objectOffset=this.objectOffset,Ee.permutation=ne;for(var Re=0;Re<2;++Re)for(var ke=Ee.clipBounds[Re],Te=0;Te<3;++Te)ke[Te]=Math.min(Math.max(this.clipBounds[Re][Te],-1e8),1e8);var we=K(Ee,this);if(we.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=Ee,this._vao.bind(),this._vao.draw(xe.TRIANGLES,this._vertexCount),Re=0;Re<3;++Re)this.surfaceProject[Re]&&(this._pickShader.uniforms.model=we.projections[Re],this._pickShader.uniforms.clipBounds=we.clipBounds[Re],this._vao.draw(xe.TRIANGLES,this._vertexCount));this._vao.unbind()}if(we.showContour){var je=this._contourPickShader;je.bind(),je.uniforms=Ee;var Ce=this._contourVAO;for(Ce.bind(),Te=0;Te<3;++Te)for(xe.lineWidth(this.contourWidth[Te]*this.pixelRatio),je.uniforms.permutation=B[Te],Re=0;Re<this.contourLevels[Te].length;++Re)this._contourCounts[Te][Re]&&(je.uniforms.height=this.contourLevels[Te][Re],Ce.draw(xe.LINES,this._contourCounts[Te][Re],this._contourOffsets[Te][Re]));for(Re=0;Re<3;++Re)for(je.uniforms.model=we.projections[Re],je.uniforms.clipBounds=we.clipBounds[Re],Te=0;Te<3;++Te)if(this.contourProject[Re][Te]){je.uniforms.permutation=B[Te],xe.lineWidth(this.contourWidth[Te]*this.pixelRatio);for(var Ie=0;Ie<this.contourLevels[Te].length;++Ie)this._contourCounts[Te][Ie]&&(je.uniforms.height=this.contourLevels[Te][Ie],Ce.draw(xe.LINES,this._contourCounts[Te][Ie],this._contourOffsets[Te][Ie]))}Ce.unbind()}},G.pick=function(pe){if(!pe||pe.id!==this.pickId)return null;var xe=this._field[2].shape,Ee=this._pickResult,Re=xe[0]*(pe.value[0]+(pe.value[2]>>4)/16)/255,ke=Math.floor(Re),Te=Re-ke,we=xe[1]*(pe.value[1]+(15&pe.value[2])/16)/255,je=Math.floor(we),Ce=we-je;ke+=1,je+=1;var Ie=Ee.position;Ie[0]=Ie[1]=Ie[2]=0;for(var ge=0;ge<2;++ge)for(var me=ge?Te:1-Te,ce=0;ce<2;++ce)for(var Ae=ke+ge,Ne=je+ce,De=me*(ce?Ce:1-Ce),qe=0;qe<3;++qe)Ie[qe]+=this._field[qe].get(Ae,Ne)*De;for(var Ke=this._pickResult.level,be=0;be<3;++be)if(Ke[be]=x.le(this.contourLevels[be],Ie[be]),Ke[be]<0)this.contourLevels[be].length>0&&(Ke[be]=0);else if(Ke[be]<this.contourLevels[be].length-1){var Le=this.contourLevels[be][Ke[be]+1];Math.abs(this.contourLevels[be][Ke[be]]-Ie[be])>Math.abs(Le-Ie[be])&&(Ke[be]+=1)}for(Ee.index[0]=Te<.5?ke:ke+1,Ee.index[1]=Ce<.5?je:je+1,Ee.uv[0]=Re/xe[0],Ee.uv[1]=we/xe[1],qe=0;qe<3;++qe)Ee.dataCoordinate[qe]=this._field[qe].get(Ee.index[0],Ee.index[1]);return Ee},G.padField=function(pe,xe){var Ee=xe.shape.slice(),Re=pe.shape.slice();g.assign(pe.lo(1,1).hi(Ee[0],Ee[1]),xe),g.assign(pe.lo(1).hi(Ee[0],1),xe.hi(Ee[0],1)),g.assign(pe.lo(1,Re[1]-1).hi(Ee[0],1),xe.lo(0,Ee[1]-1).hi(Ee[0],1)),g.assign(pe.lo(0,1).hi(1,Ee[1]),xe.hi(1)),g.assign(pe.lo(Re[0]-1,1).hi(1,Ee[1]),xe.lo(Ee[0]-1)),pe.set(0,0,xe.get(0,0)),pe.set(0,Re[1]-1,xe.get(0,Ee[1]-1)),pe.set(Re[0]-1,0,xe.get(Ee[0]-1,0)),pe.set(Re[0]-1,Re[1]-1,xe.get(Ee[0]-1,Ee[1]-1))},G.update=function(pe){this.objectOffset=(pe=pe||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in pe&&(this.contourWidth=le(pe.contourWidth,Number)),"showContour"in pe&&(this.showContour=le(pe.showContour,Boolean)),"showSurface"in pe&&(this.showSurface=!!pe.showSurface),"contourTint"in pe&&(this.contourTint=le(pe.contourTint,Boolean)),"contourColor"in pe&&(this.contourColor=he(pe.contourColor)),"contourProject"in pe&&(this.contourProject=le(pe.contourProject,function(yn){return le(yn,Boolean)})),"surfaceProject"in pe&&(this.surfaceProject=pe.surfaceProject),"dynamicColor"in pe&&(this.dynamicColor=he(pe.dynamicColor)),"dynamicTint"in pe&&(this.dynamicTint=le(pe.dynamicTint,Number)),"dynamicWidth"in pe&&(this.dynamicWidth=le(pe.dynamicWidth,Number)),"opacity"in pe&&(this.opacity=pe.opacity),"opacityscale"in pe&&(this.opacityscale=pe.opacityscale),"colorBounds"in pe&&(this.colorBounds=pe.colorBounds),"vertexColor"in pe&&(this.vertexColor=pe.vertexColor?1:0),"colormap"in pe&&this._colorMap.setPixels(this.genColormap(pe.colormap,this.opacityscale));var xe=pe.field||pe.coords&&pe.coords[2]||null,Ee=!1;if(xe||(xe=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in pe||"coords"in pe){var Re=(xe.shape[0]+2)*(xe.shape[1]+2);Re>this._field[2].data.length&&(u.freeFloat(this._field[2].data),this._field[2].data=u.mallocFloat(s.nextPow2(Re))),this._field[2]=w(this._field[2].data,[xe.shape[0]+2,xe.shape[1]+2]),this.padField(this._field[2],xe),this.shape=xe.shape.slice();for(var ke=this.shape,Te=0;Te<2;++Te)this._field[2].size>this._field[Te].data.length&&(u.freeFloat(this._field[Te].data),this._field[Te].data=u.mallocFloat(this._field[2].size)),this._field[Te]=w(this._field[Te].data,[ke[0]+2,ke[1]+2]);if(pe.coords){var we=pe.coords;if(!Array.isArray(we)||3!==we.length)throw new Error("gl-surface: invalid coordinates for x/y");for(Te=0;Te<2;++Te){var je=we[Te];for(ce=0;ce<2;++ce)if(je.shape[ce]!==ke[ce])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Te],je)}}else if(pe.ticks){var Ce=pe.ticks;if(!Array.isArray(Ce)||2!==Ce.length)throw new Error("gl-surface: invalid ticks");for(Te=0;Te<2;++Te){var Ie=Ce[Te];if((Array.isArray(Ie)||Ie.length)&&(Ie=w(Ie)),Ie.shape[0]!==ke[Te])throw new Error("gl-surface: invalid tick length");var ge=w(Ie.data,ke);ge.stride[Te]=Ie.stride[0],ge.stride[1^Te]=0,this.padField(this._field[Te],ge)}}else{for(Te=0;Te<2;++Te){var me=[0,0];me[Te]=1,this._field[Te]=w(this._field[Te].data,[ke[0]+2,ke[1]+2],me,0)}this._field[0].set(0,0,0);for(var ce=0;ce<ke[0];++ce)this._field[0].set(ce+1,0,ce);for(this._field[0].set(ke[0]+1,0,ke[0]-1),this._field[1].set(0,0,0),ce=0;ce<ke[1];++ce)this._field[1].set(0,ce+1,ce);this._field[1].set(0,ke[1]+1,ke[1]-1)}var Ae=this._field,Ne=w(u.mallocFloat(3*Ae[2].size*2),[3,ke[0]+2,ke[1]+2,2]);for(Te=0;Te<3;++Te)b(Ne.pick(Te),Ae[Te],"mirror");var De=w(u.mallocFloat(3*Ae[2].size),[ke[0]+2,ke[1]+2,3]);for(Te=0;Te<ke[0]+2;++Te)for(ce=0;ce<ke[1]+2;++ce){var qe=Ne.get(0,Te,ce,0),Ke=Ne.get(0,Te,ce,1),be=Ne.get(1,Te,ce,0),Oe=Ne.get(1,Te,ce,1),Le=Ne.get(2,Te,ce,0),Ue=Ne.get(2,Te,ce,1),Ze=be*Ue-Oe*Le,We=Le*Ke-Ue*qe,et=qe*Oe-Ke*be,nt=Math.sqrt(Ze*Ze+We*We+et*et);nt<1e-8?(nt=Math.max(Math.abs(Ze),Math.abs(We),Math.abs(et)))<1e-8?(et=1,We=Ze=0,nt=1):nt=1/nt:nt=1/Math.sqrt(nt),De.set(Te,ce,0,Ze*nt),De.set(Te,ce,1,We*nt),De.set(Te,ce,2,et*nt)}u.free(Ne.data);var ct=[1/0,1/0,1/0],yt=[-1/0,-1/0,-1/0],ut=1/0,Ct=-1/0,vt=u.mallocFloat(s.nextPow2((ke[0]-1)*(ke[1]-1)*6*10)),mt=0,Lt=0;for(Te=0;Te<ke[0]-1;++Te)e:for(ce=0;ce<ke[1]-1;++ce){for(var Ft=0;Ft<2;++Ft)for(var Rt=0;Rt<2;++Rt)for(var Wt=0;Wt<3;++Wt){var Ht=this._field[Wt].get(1+Te+Ft,1+ce+Rt);if(isNaN(Ht)||!isFinite(Ht))continue e}for(Wt=0;Wt<6;++Wt){var it=Te+F[Wt][0],st=ce+F[Wt][1],Je=this._field[0].get(it+1,st+1),ot=this._field[1].get(it+1,st+1);Ht=this._field[2].get(it+1,st+1),Ze=De.get(it+1,st+1,0),We=De.get(it+1,st+1,1),et=De.get(it+1,st+1,2),pe.intensity&&(pt=pe.intensity.get(it,st));var pt=pe.intensity?pe.intensity.get(it,st):Ht+this.objectOffset[2];vt[mt++]=it,vt[mt++]=st,vt[mt++]=Je,vt[mt++]=ot,vt[mt++]=Ht,vt[mt++]=0,vt[mt++]=pt,vt[mt++]=Ze,vt[mt++]=We,vt[mt++]=et,ct[0]=Math.min(ct[0],Je+this.objectOffset[0]),ct[1]=Math.min(ct[1],ot+this.objectOffset[1]),ct[2]=Math.min(ct[2],Ht+this.objectOffset[2]),ut=Math.min(ut,pt),yt[0]=Math.max(yt[0],Je+this.objectOffset[0]),yt[1]=Math.max(yt[1],ot+this.objectOffset[1]),yt[2]=Math.max(yt[2],Ht+this.objectOffset[2]),Ct=Math.max(Ct,pt),Lt+=1}}for(pe.intensityBounds&&(ut=+pe.intensityBounds[0],Ct=+pe.intensityBounds[1]),Te=6;Te<mt;Te+=10)vt[Te]=(vt[Te]-ut)/(Ct-ut);this._vertexCount=Lt,this._coordinateBuffer.update(vt.subarray(0,mt)),u.freeFloat(vt),u.free(De.data),this.bounds=[ct,yt],this.intensity=pe.intensity||this._field[2],this.intensityBounds[0]===ut&&this.intensityBounds[1]===Ct||(Ee=!0),this.intensityBounds=[ut,Ct]}if("levels"in pe){var xt=pe.levels;for(xt=Array.isArray(xt[0])?xt.slice():[[],[],xt],Te=0;Te<3;++Te)xt[Te]=xt[Te].slice(),xt[Te].sort(function(yn,pn){return yn-pn});for(Te=0;Te<3;++Te)for(ce=0;ce<xt[Te].length;++ce)xt[Te][ce]-=this.objectOffset[Te];e:for(Te=0;Te<3;++Te){if(xt[Te].length!==this.contourLevels[Te].length){Ee=!0;break}for(ce=0;ce<xt[Te].length;++ce)if(xt[Te][ce]!==this.contourLevels[Te][ce]){Ee=!0;break e}}this.contourLevels=xt}if(Ee){Ae=this._field,ke=this.shape;for(var He=[],Ge=0;Ge<3;++Ge){var dt=this.contourLevels[Ge],ht=[],kt=[],St=[0,0,0];for(Te=0;Te<dt.length;++Te){var Et=y(this._field[Ge],dt[Te]);ht.push(He.length/5|0),Lt=0;e:for(ce=0;ce<Et.cells.length;++ce){var wt=Et.cells[ce];for(Wt=0;Wt<2;++Wt){var Nt=Et.positions[wt[Wt]],_t=Nt[0],Mt=0|Math.floor(_t),Pt=_t-Mt,Zt=Nt[1],$t=0|Math.floor(Zt),Xt=Zt-$t,dn=!1;t:for(var on=0;on<3;++on){St[on]=0;var cn=(Ge+on+1)%3;for(Ft=0;Ft<2;++Ft){var tn=Ft?Pt:1-Pt;for(it=0|Math.min(Math.max(Mt+Ft,0),ke[0]),Rt=0;Rt<2;++Rt){var Cn=Rt?Xt:1-Xt;if(st=0|Math.min(Math.max($t+Rt,0),ke[1]),Ht=on<2?this._field[cn].get(it,st):(this.intensity.get(it,st)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ht)||isNaN(Ht)){dn=!0;break t}St[on]+=tn*Cn*Ht}}}if(dn){if(Wt>0){for(var En=0;En<5;++En)He.pop();Lt-=1}continue e}He.push(St[0],St[1],Nt[0],Nt[1],St[2]),Lt+=1}}kt.push(Lt)}this._contourOffsets[Ge]=ht,this._contourCounts[Ge]=kt}var rn=u.mallocFloat(He.length);for(Te=0;Te<He.length;++Te)rn[Te]=He[Te];this._contourBuffer.update(rn),u.freeFloat(rn)}},G.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var pe=0;pe<3;++pe)u.freeFloat(this._field[pe].data)},G.highlight=function(pe){var xe,Ee;if(!pe)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(xe=0;xe<3;++xe)this.highlightLevel[xe]=this.enableHighlight[xe]?pe.level[xe]:-1;for(Ee=this.snapToData?pe.dataCoordinate:pe.position,xe=0;xe<3;++xe)Ee[xe]-=this.objectOffset[xe];if(this.enableDynamic[0]&&Ee[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&Ee[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Ee[2]!==this.dynamicLevel[2]){for(var Re=0,ke=this.shape,Te=u.mallocFloat(12*ke[0]*ke[1]),we=0;we<3;++we)if(this.enableDynamic[we]){this.dynamicLevel[we]=Ee[we];var ge=this._field[(we+1)%3],me=this._field[(we+2)%3],ce=y(this._field[we],Ee[we]),Ae=ce.cells,Ne=ce.positions;for(this._dynamicOffsets[we]=Re,xe=0;xe<Ae.length;++xe)for(var De=Ae[xe],qe=0;qe<2;++qe){var Ke=Ne[De[qe]],be=+Ke[0],Oe=0|be,Le=0|Math.min(Oe+1,ke[0]),Ue=be-Oe,Ze=1-Ue,We=+Ke[1],et=0|We,nt=0|Math.min(et+1,ke[1]),ct=We-et,yt=1-ct,ut=Ze*yt,Ct=Ze*ct,Dt=Ue*yt,vt=Ue*ct,mt=ut*ge.get(Oe,et)+Ct*ge.get(Oe,nt)+Dt*ge.get(Le,et)+vt*ge.get(Le,nt),Lt=ut*me.get(Oe,et)+Ct*me.get(Oe,nt)+Dt*me.get(Le,et)+vt*me.get(Le,nt);if(isNaN(mt)||isNaN(Lt)){qe&&(Re-=1);break}Te[2*Re+0]=mt,Te[2*Re+1]=Lt,Re+=1}this._dynamicCounts[we]=Re-this._dynamicOffsets[we]}else this.dynamicLevel[we]=NaN,this._dynamicCounts[we]=0;this._dynamicBuffer.update(Te.subarray(0,2*Re)),u.freeFloat(Te)}}},8931:function(v,c,i){"use strict";var s=i(5050),a=i(7498),o=i(5306);v.exports=function(M){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||(l=[(S=M).LINEAR,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_NEAREST],u=[S.NEAREST,S.LINEAR,S.NEAREST_MIPMAP_NEAREST,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_LINEAR],d=[S.REPEAT,S.CLAMP_TO_EDGE,S.MIRRORED_REPEAT]),"number"==typeof arguments[1])return b(M,arguments[1],arguments[2],arguments[3]||M.RGBA,arguments[4]||M.UNSIGNED_BYTE);var S;if(Array.isArray(arguments[1]))return b(M,0|arguments[1][0],0|arguments[1][1],arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var m=arguments[1],D=g(m)?m:m.raw;if(D)return function(S,O,P,R,F,B){var J=x(S);return S.texImage2D(S.TEXTURE_2D,0,F,F,B,O),new y(S,J,P,R,F,B)}(M,D,0|m.width,0|m.height,arguments[2]||M.RGBA,arguments[3]||M.UNSIGNED_BYTE);if(m.shape&&m.data&&m.stride)return function(S,O){var P=O.dtype,R=O.shape.slice(),F=S.getParameter(S.MAX_TEXTURE_SIZE);if(R[0]<0||R[0]>F||R[1]<0||R[1]>F)throw new Error("gl-texture2d: Invalid texture size");var B=_(R,O.stride.slice()),J=0;"float32"===P?J=S.FLOAT:"float64"===P?(J=S.FLOAT,B=!1,P="float32"):"uint8"===P?J=S.UNSIGNED_BYTE:(J=S.UNSIGNED_BYTE,B=!1,P="uint8");var z,$,G=0;if(2===R.length)G=S.LUMINANCE,O=s(O.data,R=[R[0],R[1],1],[O.stride[0],O.stride[1],1],O.offset);else{if(3!==R.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===R[2])G=S.ALPHA;else if(2===R[2])G=S.LUMINANCE_ALPHA;else if(3===R[2])G=S.RGB;else{if(4!==R[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");G=S.RGBA}}J!==S.FLOAT||S.getExtension("OES_texture_float")||(J=S.UNSIGNED_BYTE,B=!1);var H=O.size;if(B)z=0===O.offset&&O.data.length===H?O.data:O.data.subarray(O.offset,O.offset+H);else{var X=[R[2],R[2]*R[0],1];$=o.malloc(H,P);var K=s($,R,X,0);"float32"!==P&&"float64"!==P||J!==S.UNSIGNED_BYTE?a.assign(K,O):h(K,O),z=$.subarray(0,H)}var ue=x(S);return S.texImage2D(S.TEXTURE_2D,0,G,R[0],R[1],0,G,J,z),B||o.free($),new y(S,ue,R[0],R[1],G,J)}(M,m)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,u=null,d=null;function g(M){return typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&M instanceof HTMLVideoElement||typeof ImageData<"u"&&M instanceof ImageData}var h=function(M,m){a.muls(M,m,255)};function w(M,m,D){var S=M.gl,O=S.getParameter(S.MAX_TEXTURE_SIZE);if(m<0||m>O||D<0||D>O)throw new Error("gl-texture2d: Invalid texture size");return M._shape=[m,D],M.bind(),S.texImage2D(S.TEXTURE_2D,0,M.format,m,D,0,M.format,M.type,null),M._mipLevels=[0],M}function y(M,m,D,S,O,P){this.gl=M,this.handle=m,this.format=O,this.type=P,this._shape=[D,S],this._mipLevels=[0],this._magFilter=M.NEAREST,this._minFilter=M.NEAREST,this._wrapS=M.CLAMP_TO_EDGE,this._wrapT=M.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,F=[this._wrapS,this._wrapT];Object.defineProperties(F,[{get:function(){return R._wrapS},set:function(J){return R.wrapS=J}},{get:function(){return R._wrapT},set:function(J){return R.wrapT=J}}]),this._wrapVector=F;var B=[this._shape[0],this._shape[1]];Object.defineProperties(B,[{get:function(){return R._shape[0]},set:function(J){return R.width=J}},{get:function(){return R._shape[1]},set:function(J){return R.height=J}}]),this._shapeVector=B}var p=y.prototype;function _(M,m){return 3===M.length?1===m[2]&&m[1]===M[0]*M[2]&&m[0]===M[2]:1===m[0]&&m[1]===M[0]}function x(M){var m=M.createTexture();return M.bindTexture(M.TEXTURE_2D,m),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.NEAREST),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_S,M.CLAMP_TO_EDGE),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_WRAP_T,M.CLAMP_TO_EDGE),m}function b(M,m,D,S,O){var P=M.getParameter(M.MAX_TEXTURE_SIZE);if(m<0||m>P||D<0||D>P)throw new Error("gl-texture2d: Invalid texture shape");if(O===M.FLOAT&&!M.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=x(M);return M.texImage2D(M.TEXTURE_2D,0,S,m,D,0,S,O,null),new y(M,R,m,D,S,O)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(M){this.bind();var m=this.gl;if(this.type===m.FLOAT&&l.indexOf(M)>=0&&(m.getExtension("OES_texture_float_linear")||(M=m.NEAREST)),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,M),this._minFilter=M}},magFilter:{get:function(){return this._magFilter},set:function(M){this.bind();var m=this.gl;if(this.type===m.FLOAT&&l.indexOf(M)>=0&&(m.getExtension("OES_texture_float_linear")||(M=m.NEAREST)),u.indexOf(M)<0)throw new Error("gl-texture2d: Unknown filter mode "+M);return m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,M),this._magFilter=M}},mipSamples:{get:function(){return this._anisoSamples},set:function(M){var m=this._anisoSamples;if(this._anisoSamples=0|Math.max(M,1),m!==this._anisoSamples){var D=this.gl.getExtension("EXT_texture_filter_anisotropic");D&&this.gl.texParameterf(this.gl.TEXTURE_2D,D.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(M){if(this.bind(),d.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,M),this._wrapS=M}},wrapT:{get:function(){return this._wrapT},set:function(M){if(this.bind(),d.indexOf(M)<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,M),this._wrapT=M}},wrap:{get:function(){return this._wrapVector},set:function(M){if(Array.isArray(M)||(M=[M,M]),2!==M.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var m=0;m<2;++m)if(d.indexOf(M[m])<0)throw new Error("gl-texture2d: Unknown wrap mode "+M);this._wrapS=M[0],this._wrapT=M[1];var D=this.gl;return this.bind(),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,this._wrapS),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,this._wrapT),M}},shape:{get:function(){return this._shapeVector},set:function(M){if(Array.isArray(M)){if(2!==M.length)throw new Error("gl-texture2d: Invalid texture shape")}else M=[0|M,0|M];return w(this,0|M[0],0|M[1]),[0|M[0],0|M[1]]}},width:{get:function(){return this._shape[0]},set:function(M){return w(this,M|=0,this._shape[1]),M}},height:{get:function(){return this._shape[1]},set:function(M){return w(this,this._shape[0],M|=0),M}}}),p.bind=function(M){var m=this.gl;return void 0!==M&&m.activeTexture(m.TEXTURE0+(0|M)),m.bindTexture(m.TEXTURE_2D,this.handle),void 0!==M?0|M:m.getParameter(m.ACTIVE_TEXTURE)-m.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var M=Math.min(this._shape[0],this._shape[1]),m=0;M>0;++m,M>>>=1)this._mipLevels.indexOf(m)<0&&this._mipLevels.push(m)},p.setPixels=function(M,m,D,S){var O=this.gl;this.bind(),Array.isArray(m)?(S=D,D=0|m[1],m=0|m[0]):(m=m||0,D=D||0),S=S||0;var P=g(M)?M:M.raw;if(P)this._mipLevels.indexOf(S)<0?(O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):O.texSubImage2D(O.TEXTURE_2D,S,m,D,this.format,this.type,P);else{if(!(M.shape&&M.stride&&M.data))throw new Error("gl-texture2d: Unsupported data type");if(M.shape.length<2||m+M.shape[1]>this._shape[1]>>>S||D+M.shape[0]>this._shape[0]>>>S||m<0||D<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(R,F,B,J,z,$,G,H){var X=H.dtype,K=H.shape.slice();if(K.length<2||K.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var ue=0,ae=0,ne=_(K,H.stride.slice());if("float32"===X?ue=R.FLOAT:"float64"===X?(ue=R.FLOAT,ne=!1,X="float32"):"uint8"===X?ue=R.UNSIGNED_BYTE:(ue=R.UNSIGNED_BYTE,ne=!1,X="uint8"),2===K.length)ae=R.LUMINANCE,H=s(H.data,K=[K[0],K[1],1],[H.stride[0],H.stride[1],1],H.offset);else{if(3!==K.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===K[2])ae=R.ALPHA;else if(2===K[2])ae=R.LUMINANCE_ALPHA;else if(3===K[2])ae=R.RGB;else{if(4!==K[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");ae=R.RGBA}}if(ae!==R.LUMINANCE&&ae!==R.ALPHA||z!==R.LUMINANCE&&z!==R.ALPHA||(ae=z),ae!==z)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Q=H.size,ie=G.indexOf(J)<0;if(ie&&G.push(J),ue===$&&ne)0===H.offset&&H.data.length===Q?ie?R.texImage2D(R.TEXTURE_2D,J,z,K[0],K[1],0,z,$,H.data):R.texSubImage2D(R.TEXTURE_2D,J,F,B,K[0],K[1],z,$,H.data):ie?R.texImage2D(R.TEXTURE_2D,J,z,K[0],K[1],0,z,$,H.data.subarray(H.offset,H.offset+Q)):R.texSubImage2D(R.TEXTURE_2D,J,F,B,K[0],K[1],z,$,H.data.subarray(H.offset,H.offset+Q));else{var le;le=$===R.FLOAT?o.mallocFloat32(Q):o.mallocUint8(Q);var fe=s(le,K,[K[2],K[2]*K[0],1]);ue===R.FLOAT&&$===R.UNSIGNED_BYTE?h(fe,H):a.assign(fe,H),ie?R.texImage2D(R.TEXTURE_2D,J,z,K[0],K[1],0,z,$,le.subarray(0,Q)):R.texSubImage2D(R.TEXTURE_2D,J,F,B,K[0],K[1],z,$,le.subarray(0,Q)),$===R.FLOAT?o.freeFloat32(le):o.freeUint8(le)}}(O,m,D,S,this.format,this.type,this._mipLevels,M)}}},3056:function(v){"use strict";v.exports=function(c,i,s){i?i.bind():c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null);var a=0|c.getParameter(c.MAX_VERTEX_ATTRIBS);if(s){if(s.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var o=0;o<s.length;++o){var l=s[o];if(l.buffer){var d=l.size||4,g=l.type||c.FLOAT,h=!!l.normalized,w=l.stride||0,y=l.offset||0;l.buffer.bind(),c.enableVertexAttribArray(o),c.vertexAttribPointer(o,d,g,h,w,y)}else{if("number"==typeof l)c.vertexAttrib1f(o,l);else if(1===l.length)c.vertexAttrib1f(o,l[0]);else if(2===l.length)c.vertexAttrib2f(o,l[0],l[1]);else if(3===l.length)c.vertexAttrib3f(o,l[0],l[1],l[2]);else{if(4!==l.length)throw new Error("gl-vao: Invalid vertex attribute");c.vertexAttrib4f(o,l[0],l[1],l[2],l[3])}c.disableVertexAttribArray(o)}}for(;o<a;++o)c.disableVertexAttribArray(o)}else for(c.bindBuffer(c.ARRAY_BUFFER,null),o=0;o<a;++o)c.disableVertexAttribArray(o)}},7220:function(v,c,i){"use strict";var s=i(3056);function a(o){this.gl=o,this._elements=null,this._attributes=null,this._elementsType=o.UNSIGNED_SHORT}a.prototype.bind=function(){s(this.gl,this._elements,this._attributes)},a.prototype.update=function(o,l,u){this._elements=l,this._attributes=o,this._elementsType=u||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(o,l,u){u=u||0;var d=this.gl;this._elements?d.drawElements(o,l,this._elementsType,u):d.drawArrays(o,u,l)},v.exports=function(o){return new a(o)}},3778:function(v,c,i){"use strict";var s=i(3056);function a(l,u,d,g,h,w){this.location=l,this.dimension=u,this.a=d,this.b=g,this.c=h,this.d=w}function o(l,u,d){this.gl=l,this._ext=u,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}a.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},o.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},o.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},o.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},o.prototype.update=function(l,u,d){if(this.bind(),s(this.gl,u,l),this.unbind(),this._attribs.length=0,l)for(var g=0;g<l.length;++g){var h=l[g];"number"==typeof h?this._attribs.push(new a(g,1,h)):Array.isArray(h)&&this._attribs.push(new a(g,h.length,h[0],h[1],h[2],h[3]))}this._useElements=!!u,this._elementsType=d||this.gl.UNSIGNED_SHORT},o.prototype.draw=function(l,u,d){d=d||0;var g=this.gl;this._useElements?g.drawElements(l,u,this._elementsType,d):g.drawArrays(l,d,u)},v.exports=function(l,u){return new o(l,u,u.createVertexArrayOES())}},2944:function(v,c,i){"use strict";var s=i(3778),a=i(7220);function o(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}v.exports=function(l,u,d,g){var h,w=l.createVertexArray?new o(l):l.getExtension("OES_vertex_array_object");return(h=w?s(l,w):a(l)).update(u,d,g),h}},2598:function(v){v.exports=function(c,i,s){return c[0]=i[0]+s[0],c[1]=i[1]+s[1],c[2]=i[2]+s[2],c}},5879:function(v,c,i){v.exports=function(l,u){var d=s(l[0],l[1],l[2]),g=s(u[0],u[1],u[2]);a(d,d),a(g,g);var h=o(d,g);return h>1?0:Math.acos(h)};var s=i(5415),a=i(899),o=i(9305)},8827:function(v){v.exports=function(c,i){return c[0]=Math.ceil(i[0]),c[1]=Math.ceil(i[1]),c[2]=Math.ceil(i[2]),c}},7622:function(v){v.exports=function(c){var i=new Float32Array(3);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i}},8782:function(v){v.exports=function(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c}},8501:function(v){v.exports=function(){var c=new Float32Array(3);return c[0]=0,c[1]=0,c[2]=0,c}},903:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=s[0],d=s[1],g=s[2];return c[0]=o*g-l*d,c[1]=l*u-a*g,c[2]=a*d-o*u,c}},5981:function(v,c,i){v.exports=i(8288)},8288:function(v){v.exports=function(c,i){var s=i[0]-c[0],a=i[1]-c[1],o=i[2]-c[2];return Math.sqrt(s*s+a*a+o*o)}},8629:function(v,c,i){v.exports=i(7979)},7979:function(v){v.exports=function(c,i,s){return c[0]=i[0]/s[0],c[1]=i[1]/s[1],c[2]=i[2]/s[2],c}},9305:function(v){v.exports=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]}},154:function(v){v.exports=1e-6},4932:function(v,c,i){v.exports=function(a,o){var l=a[0],u=a[1],d=a[2],g=o[0],h=o[1],w=o[2];return Math.abs(l-g)<=s*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-h)<=s*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(d-w)<=s*Math.max(1,Math.abs(d),Math.abs(w))};var s=i(154)},5777:function(v){v.exports=function(c,i){return c[0]===i[0]&&c[1]===i[1]&&c[2]===i[2]}},3306:function(v){v.exports=function(c,i){return c[0]=Math.floor(i[0]),c[1]=Math.floor(i[1]),c[2]=Math.floor(i[2]),c}},7447:function(v,c,i){v.exports=function(a,o,l,u,d,g){var h,w;for(o||(o=3),l||(l=0),w=u?Math.min(u*o+l,a.length):a.length,h=l;h<w;h+=o)s[0]=a[h],s[1]=a[h+1],s[2]=a[h+2],d(s,s,g),a[h]=s[0],a[h+1]=s[1],a[h+2]=s[2];return a};var s=i(8501)()},5415:function(v){v.exports=function(c,i,s){var a=new Float32Array(3);return a[0]=c,a[1]=i,a[2]=s,a}},2858:function(v,c,i){v.exports={EPSILON:i(154),create:i(8501),clone:i(7622),angle:i(5879),fromValues:i(5415),copy:i(8782),set:i(831),equals:i(4932),exactEquals:i(5777),add:i(2598),subtract:i(911),sub:i(8921),multiply:i(105),mul:i(5733),divide:i(7979),div:i(8629),min:i(3605),max:i(1716),floor:i(3306),ceil:i(8827),round:i(1624),scale:i(5685),scaleAndAdd:i(6722),distance:i(8288),dist:i(5981),squaredDistance:i(6403),sqrDist:i(5294),length:i(4693),len:i(1468),squaredLength:i(4337),sqrLen:i(3303),negate:i(435),inverse:i(2073),normalize:i(899),dot:i(9305),cross:i(903),lerp:i(1868),random:i(6660),transformMat4:i(3255),transformMat3:i(9908),transformQuat:i(6568),rotateX:i(392),rotateY:i(3222),rotateZ:i(3388),forEach:i(7447)}},2073:function(v){v.exports=function(c,i){return c[0]=1/i[0],c[1]=1/i[1],c[2]=1/i[2],c}},1468:function(v,c,i){v.exports=i(4693)},4693:function(v){v.exports=function(c){var i=c[0],s=c[1],a=c[2];return Math.sqrt(i*i+s*s+a*a)}},1868:function(v){v.exports=function(c,i,s,a){var o=i[0],l=i[1],u=i[2];return c[0]=o+a*(s[0]-o),c[1]=l+a*(s[1]-l),c[2]=u+a*(s[2]-u),c}},1716:function(v){v.exports=function(c,i,s){return c[0]=Math.max(i[0],s[0]),c[1]=Math.max(i[1],s[1]),c[2]=Math.max(i[2],s[2]),c}},3605:function(v){v.exports=function(c,i,s){return c[0]=Math.min(i[0],s[0]),c[1]=Math.min(i[1],s[1]),c[2]=Math.min(i[2],s[2]),c}},5733:function(v,c,i){v.exports=i(105)},105:function(v){v.exports=function(c,i,s){return c[0]=i[0]*s[0],c[1]=i[1]*s[1],c[2]=i[2]*s[2],c}},435:function(v){v.exports=function(c,i){return c[0]=-i[0],c[1]=-i[1],c[2]=-i[2],c}},899:function(v){v.exports=function(c,i){var s=i[0],a=i[1],o=i[2],l=s*s+a*a+o*o;return l>0&&(l=1/Math.sqrt(l),c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l),c}},6660:function(v){v.exports=function(c,i){i=i||1;var s=2*Math.random()*Math.PI,a=2*Math.random()-1,o=Math.sqrt(1-a*a)*i;return c[0]=Math.cos(s)*o,c[1]=Math.sin(s)*o,c[2]=a*i,c}},392:function(v){v.exports=function(c,i,s,a){var o=s[1],l=s[2],u=i[1]-o,d=i[2]-l,g=Math.sin(a),h=Math.cos(a);return c[0]=i[0],c[1]=o+u*h-d*g,c[2]=l+u*g+d*h,c}},3222:function(v){v.exports=function(c,i,s,a){var o=s[0],l=s[2],u=i[0]-o,d=i[2]-l,g=Math.sin(a),h=Math.cos(a);return c[0]=o+d*g+u*h,c[1]=i[1],c[2]=l+d*h-u*g,c}},3388:function(v){v.exports=function(c,i,s,a){var o=s[0],l=s[1],u=i[0]-o,d=i[1]-l,g=Math.sin(a),h=Math.cos(a);return c[0]=o+u*h-d*g,c[1]=l+u*g+d*h,c[2]=i[2],c}},1624:function(v){v.exports=function(c,i){return c[0]=Math.round(i[0]),c[1]=Math.round(i[1]),c[2]=Math.round(i[2]),c}},5685:function(v){v.exports=function(c,i,s){return c[0]=i[0]*s,c[1]=i[1]*s,c[2]=i[2]*s,c}},6722:function(v){v.exports=function(c,i,s,a){return c[0]=i[0]+s[0]*a,c[1]=i[1]+s[1]*a,c[2]=i[2]+s[2]*a,c}},831:function(v){v.exports=function(c,i,s,a){return c[0]=i,c[1]=s,c[2]=a,c}},5294:function(v,c,i){v.exports=i(6403)},3303:function(v,c,i){v.exports=i(4337)},6403:function(v){v.exports=function(c,i){var s=i[0]-c[0],a=i[1]-c[1],o=i[2]-c[2];return s*s+a*a+o*o}},4337:function(v){v.exports=function(c){var i=c[0],s=c[1],a=c[2];return i*i+s*s+a*a}},8921:function(v,c,i){v.exports=i(911)},911:function(v){v.exports=function(c,i,s){return c[0]=i[0]-s[0],c[1]=i[1]-s[1],c[2]=i[2]-s[2],c}},9908:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2];return c[0]=a*s[0]+o*s[3]+l*s[6],c[1]=a*s[1]+o*s[4]+l*s[7],c[2]=a*s[2]+o*s[5]+l*s[8],c}},3255:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=s[3]*a+s[7]*o+s[11]*l+s[15];return c[0]=(s[0]*a+s[4]*o+s[8]*l+s[12])/(u=u||1),c[1]=(s[1]*a+s[5]*o+s[9]*l+s[13])/u,c[2]=(s[2]*a+s[6]*o+s[10]*l+s[14])/u,c}},6568:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=s[0],d=s[1],g=s[2],h=s[3],w=h*a+d*l-g*o,y=h*o+g*a-u*l,p=h*l+u*o-d*a,_=-u*a-d*o-g*l;return c[0]=w*h+_*-u+y*-g-p*-d,c[1]=y*h+_*-d+p*-u-w*-g,c[2]=p*h+_*-g+w*-d-y*-u,c}},3433:function(v){v.exports=function(c,i,s){return c[0]=i[0]+s[0],c[1]=i[1]+s[1],c[2]=i[2]+s[2],c[3]=i[3]+s[3],c}},1413:function(v){v.exports=function(c){var i=new Float32Array(4);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i}},3470:function(v){v.exports=function(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c}},5313:function(v){v.exports=function(){var c=new Float32Array(4);return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c}},5446:function(v){v.exports=function(c,i){var s=i[0]-c[0],a=i[1]-c[1],o=i[2]-c[2],l=i[3]-c[3];return Math.sqrt(s*s+a*a+o*o+l*l)}},205:function(v){v.exports=function(c,i,s){return c[0]=i[0]/s[0],c[1]=i[1]/s[1],c[2]=i[2]/s[2],c[3]=i[3]/s[3],c}},4242:function(v){v.exports=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]*i[3]}},5680:function(v){v.exports=function(c,i,s,a){var o=new Float32Array(4);return o[0]=c,o[1]=i,o[2]=s,o[3]=a,o}},4020:function(v,c,i){v.exports={create:i(5313),clone:i(1413),fromValues:i(5680),copy:i(3470),set:i(6453),add:i(3433),subtract:i(2705),multiply:i(746),divide:i(205),min:i(2170),max:i(3030),scale:i(5510),scaleAndAdd:i(4224),distance:i(5446),squaredDistance:i(1542),length:i(8177),squaredLength:i(9037),negate:i(6459),inverse:i(8057),normalize:i(381),dot:i(4242),lerp:i(8746),random:i(3770),transformMat4:i(6342),transformQuat:i(5022)}},8057:function(v){v.exports=function(c,i){return c[0]=1/i[0],c[1]=1/i[1],c[2]=1/i[2],c[3]=1/i[3],c}},8177:function(v){v.exports=function(c){var i=c[0],s=c[1],a=c[2],o=c[3];return Math.sqrt(i*i+s*s+a*a+o*o)}},8746:function(v){v.exports=function(c,i,s,a){var o=i[0],l=i[1],u=i[2],d=i[3];return c[0]=o+a*(s[0]-o),c[1]=l+a*(s[1]-l),c[2]=u+a*(s[2]-u),c[3]=d+a*(s[3]-d),c}},3030:function(v){v.exports=function(c,i,s){return c[0]=Math.max(i[0],s[0]),c[1]=Math.max(i[1],s[1]),c[2]=Math.max(i[2],s[2]),c[3]=Math.max(i[3],s[3]),c}},2170:function(v){v.exports=function(c,i,s){return c[0]=Math.min(i[0],s[0]),c[1]=Math.min(i[1],s[1]),c[2]=Math.min(i[2],s[2]),c[3]=Math.min(i[3],s[3]),c}},746:function(v){v.exports=function(c,i,s){return c[0]=i[0]*s[0],c[1]=i[1]*s[1],c[2]=i[2]*s[2],c[3]=i[3]*s[3],c}},6459:function(v){v.exports=function(c,i){return c[0]=-i[0],c[1]=-i[1],c[2]=-i[2],c[3]=-i[3],c}},381:function(v){v.exports=function(c,i){var s=i[0],a=i[1],o=i[2],l=i[3],u=s*s+a*a+o*o+l*l;return u>0&&(u=1/Math.sqrt(u),c[0]=s*u,c[1]=a*u,c[2]=o*u,c[3]=l*u),c}},3770:function(v,c,i){var s=i(381),a=i(5510);v.exports=function(o,l){return l=l||1,o[0]=Math.random(),o[1]=Math.random(),o[2]=Math.random(),o[3]=Math.random(),s(o,o),a(o,o,l),o}},5510:function(v){v.exports=function(c,i,s){return c[0]=i[0]*s,c[1]=i[1]*s,c[2]=i[2]*s,c[3]=i[3]*s,c}},4224:function(v){v.exports=function(c,i,s,a){return c[0]=i[0]+s[0]*a,c[1]=i[1]+s[1]*a,c[2]=i[2]+s[2]*a,c[3]=i[3]+s[3]*a,c}},6453:function(v){v.exports=function(c,i,s,a,o){return c[0]=i,c[1]=s,c[2]=a,c[3]=o,c}},1542:function(v){v.exports=function(c,i){var s=i[0]-c[0],a=i[1]-c[1],o=i[2]-c[2],l=i[3]-c[3];return s*s+a*a+o*o+l*l}},9037:function(v){v.exports=function(c){var i=c[0],s=c[1],a=c[2],o=c[3];return i*i+s*s+a*a+o*o}},2705:function(v){v.exports=function(c,i,s){return c[0]=i[0]-s[0],c[1]=i[1]-s[1],c[2]=i[2]-s[2],c[3]=i[3]-s[3],c}},6342:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=i[3];return c[0]=s[0]*a+s[4]*o+s[8]*l+s[12]*u,c[1]=s[1]*a+s[5]*o+s[9]*l+s[13]*u,c[2]=s[2]*a+s[6]*o+s[10]*l+s[14]*u,c[3]=s[3]*a+s[7]*o+s[11]*l+s[15]*u,c}},5022:function(v){v.exports=function(c,i,s){var a=i[0],o=i[1],l=i[2],u=s[0],d=s[1],g=s[2],h=s[3],w=h*a+d*l-g*o,y=h*o+g*a-u*l,p=h*l+u*o-d*a,_=-u*a-d*o-g*l;return c[0]=w*h+_*-u+y*-g-p*-d,c[1]=y*h+_*-d+p*-u-w*-g,c[2]=p*h+_*-g+w*-d-y*-u,c[3]=i[3],c}},9365:function(v,c,i){var s=i(8096),a=i(7896);v.exports=function(o){for(var l=Array.isArray(o)?o:s(o),u=0;u<l.length;u++){var d=l[u];if("preprocessor"===d.type){var g=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(g&&g[2]){var w=g[2];return(g[1]?a(w):w).trim()}}}}},3193:function(v,c,i){v.exports=function(R){var F,B,J,z=0,$=0,G=d,H=[],X=[],K=1,ue=0,ae=0,ne=!1,Q=!1,ie="",le=o,fe=s;"300 es"===(R=R||{}).version&&(le=u,fe=l);var he={},pe={};for(z=0;z<le.length;z++)he[le[z]]=!0;for(z=0;z<fe.length;z++)pe[fe[z]]=!0;return function(ce){return X=[],null!==ce?function(Ae){var Ne;for(z=0,Ae.toString&&(Ae=Ae.toString()),ie+=Ae.replace(/\r\n/g,"\n"),J=ie.length;F=ie[z],z<J;){switch(Ne=z,G){case h:z="/"===F&&"*"===B?(H.push(F),xe(H.join("")),G=d,z+1):(H.push(F),B=F,z+1);break;case w:case y:z="\r"!==F&&"\n"!==F||"\\"===B?(H.push(F),B=F,z+1):(xe(H.join("")),G=d,z);break;case p:z=we();break;case _:z="."===F||/[eE]/.test(F)?(H.push(F),G=x,B=F,z+1):"x"===F&&1===H.length&&"0"===H[0]?(G=O,H.push(F),B=F,z+1):/[^\d]/.test(F)?(xe(H.join("")),G=d,z):(H.push(F),B=F,z+1);break;case O:z=/[^a-fA-F0-9]/.test(F)?(xe(H.join("")),G=d,z):(H.push(F),B=F,z+1);break;case x:"f"===F&&(H.push(F),B=F,z+=1),z=/[eE]/.test(F)?(H.push(F),B=F,z+1):("-"!==F&&"+"!==F||!/[eE]/.test(B))&&/[^\d]/.test(F)?(xe(H.join("")),G=d,z):(H.push(F),B=F,z+1);break;case g:z=me();break;case D:z=/[^\s]/g.test(F)?(xe(H.join("")),G=d,z):(H.push(F),B=F,z+1);break;case d:H=H.length?[]:H,z="/"===B&&"*"===F?(ae=$+z-1,G=h,B=F,z+1):"/"===B&&"/"===F?(ae=$+z-1,G=w,B=F,z+1):"#"===F?(G=y,ae=$+z,z):/\s/.test(F)?(G=D,ae=$+z,z):(ne=/\d/.test(F),Q=/[^\w_]/.test(F),ae=$+z,G=ne?_:Q?p:g,z)}Ne!==z&&("\n"===ie[Ne]?(ue=0,++K):++ue)}return $+=z,ie=ie.slice(z),X}(ce):(H.length&&xe(H.join("")),G=S,xe("(eof)"),X)};function xe(ce){ce.length&&X.push({type:P[G],data:ce,position:ae,line:K,column:ue})}function we(){if("."===B&&/\d/.test(F))return G=x,z;if("/"===B&&"*"===F)return G=h,z;if("/"===B&&"/"===F)return G=w,z;if("."===F&&H.length){for(;je(H););return G=x,z}if(";"===F||")"===F||"("===F){if(H.length)for(;je(H););return xe(F),G=d,z+1}var ce=2===H.length&&"="!==F;if(/[\w_\d\s]/.test(F)||ce){for(;je(H););return G=d,z}return H.push(F),B=F,z+1}function je(ce){for(var Ae,Ne,De=0;;){if(Ae=a.indexOf(ce.slice(0,ce.length+De).join("")),Ne=a[Ae],-1===Ae){if(De--+ce.length>0)continue;Ne=ce.slice(0,1).join("")}return xe(Ne),ae+=Ne.length,(H=H.slice(Ne.length)).length}}function me(){if(/[^\d\w_]/.test(F)){var ce=H.join("");return G=pe[ce]?m:he[ce]?M:b,xe(H.join("")),G=d,z}return H.push(F),B=F,z+1}};var s=i(399),a=i(9746),o=i(9525),l=i(9458),u=i(3585),d=999,g=9999,h=0,w=1,y=2,p=3,_=4,x=5,b=6,M=7,m=8,D=9,S=10,O=11,P=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(v,c,i){var s=i(9525);s=s.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),v.exports=s.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(v){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(v,c,i){var s=i(399);v.exports=s.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(v){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(v){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(v,c,i){var s=i(3193);v.exports=function(a,o){var l=s(o),u=[];return(u=u.concat(l(a))).concat(l(null))}},6832:function(v){v.exports=function(c){"string"==typeof c&&(c=[c]);for(var i=[].slice.call(arguments,1),s=[],a=0;a<c.length-1;a++)s.push(c[a],i[a]||"");return s.push(c[a]),s.join("")}},5233:function(v,c,i){"use strict";var s=i(4846);v.exports=s&&function(){var a=!1;try{var o=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{a=!1}return a}()},2183:function(v,c,i){"use strict";v.exports=function(w,y){var p=w.length;if(0===p)throw new Error("Must have at least d+1 points");var _=w[0].length;if(p<=_)throw new Error("Must input at least d+1 points");var x=w.slice(0,_+1),b=s.apply(void 0,x);if(0===b)throw new Error("Input not in general position");for(var M=new Array(_+1),m=0;m<=_;++m)M[m]=m;b<0&&(M[0]=1,M[1]=0);var D=new o(M,new Array(_+1),!1),S=D.adjacent,O=new Array(_+2);for(m=0;m<=_;++m){for(var P=M.slice(),R=0;R<=_;++R)R===m&&(P[R]=-1);var F=P[0];P[0]=P[1],P[1]=F;var B=new o(P,new Array(_+1),!0);S[m]=B,O[m]=B}for(O[_+1]=D,m=0;m<=_;++m){P=S[m].vertices;var J=S[m].adjacent;for(R=0;R<=_;++R){var z=P[R];if(z<0)J[R]=D;else for(var $=0;$<=_;++$)S[$].vertices.indexOf(z)<0&&(J[R]=S[$])}}var G=new g(_,x,O),H=!!y;for(m=_+1;m<p;++m)G.insert(w[m],H);return G.boundary()};var s=i(417),a=i(8211).H;function o(w,y,p){this.vertices=w,this.adjacent=y,this.boundary=p,this.lastVisited=-1}function l(w,y,p){this.vertices=w,this.cell=y,this.index=p}function u(w,y){return a(w.vertices,y.vertices)}o.prototype.flip=function(){var w=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=w;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};var d=[];function g(w,y,p){this.dimension=w,this.vertices=y,this.simplices=p,this.interior=p.filter(function(M){return!M.boundary}),this.tuple=new Array(w+1);for(var _=0;_<=w;++_)this.tuple[_]=this.vertices[_];var x,M,b=d[w];b||(b=d[w]=((x=s[w+1])||(x=s),M=x,function(){return M.apply(this,this.tuple)})),this.orient=b}var h=g.prototype;h.handleBoundaryDegeneracy=function(w,y){var p=this.dimension,_=this.vertices.length-1,x=this.tuple,b=this.vertices,M=[w];for(w.lastVisited=-_;M.length>0;)for(var m=(w=M.pop()).adjacent,D=0;D<=p;++D){var S=m[D];if(S.boundary&&!(S.lastVisited<=-_)){for(var O=S.vertices,P=0;P<=p;++P){var R=O[P];x[P]=R<0?y:b[R]}var F=this.orient();if(F>0)return S;S.lastVisited=-_,0===F&&M.push(S)}}return null},h.walk=function(w,y){var p=this.vertices.length-1,_=this.dimension,x=this.vertices,b=this.tuple,M=y?this.interior.length*Math.random()|0:this.interior.length-1,m=this.interior[M];e:for(;!m.boundary;){for(var D=m.vertices,S=m.adjacent,O=0;O<=_;++O)b[O]=x[D[O]];for(m.lastVisited=p,O=0;O<=_;++O){var P=S[O];if(!(P.lastVisited>=p)){var R=b[O];b[O]=w;var F=this.orient();if(b[O]=R,F<0){m=P;continue e}P.lastVisited=P.boundary?-p:p}}return}return m},h.addPeaks=function(w,y){var p=this.vertices.length-1,_=this.dimension,x=this.vertices,b=this.tuple,M=this.interior,m=this.simplices,D=[y];y.lastVisited=p,y.vertices[y.vertices.indexOf(-1)]=p,y.boundary=!1,M.push(y);for(var S=[];D.length>0;){var O=(y=D.pop()).vertices,P=y.adjacent,R=O.indexOf(p);if(!(R<0))for(var F=0;F<=_;++F)if(F!==R){var B=P[F];if(B.boundary&&!(B.lastVisited>=p)){var J=B.vertices;if(B.lastVisited!==-p){for(var z=0,$=0;$<=_;++$)J[$]<0?(z=$,b[$]=w):b[$]=x[J[$]];if(this.orient()>0){J[z]=p,B.boundary=!1,M.push(B),D.push(B),B.lastVisited=p;continue}B.lastVisited=-p}var G=B.adjacent,H=O.slice(),X=P.slice(),K=new o(H,X,!0);m.push(K);var ue=G.indexOf(y);if(!(ue<0))for(G[ue]=K,X[R]=B,H[F]=-1,X[F]=y,P[F]=K,K.flip(),$=0;$<=_;++$){var ae=H[$];if(!(ae<0||ae===p)){for(var ne=new Array(_-1),Q=0,ie=0;ie<=_;++ie){var le=H[ie];le<0||ie===$||(ne[Q++]=le)}S.push(new l(ne,K,$))}}}}}for(S.sort(u),F=0;F+1<S.length;F+=2){var fe=S[F],he=S[F+1];fe.index<0||he.index<0||(fe.cell.adjacent[fe.index]=he.cell,he.cell.adjacent[he.index]=fe.cell)}},h.insert=function(w,y){var p=this.vertices;p.push(w);var _=this.walk(w,y);if(_){for(var x=this.dimension,b=this.tuple,M=0;M<=x;++M){var m=_.vertices[M];b[M]=m<0?w:p[m]}var D=this.orient(b);D<0||(0!==D||(_=this.handleBoundaryDegeneracy(_,w)))&&this.addPeaks(w,_)}},h.boundary=function(){for(var w=this.dimension,y=[],p=this.simplices,_=p.length,x=0;x<_;++x){var b=p[x];if(b.boundary){for(var M=new Array(w),m=b.vertices,D=0,S=0,O=0;O<=w;++O)m[O]>=0?M[D++]=m[O]:S=1&O;if(S===(1&w)){var P=M[0];M[0]=M[1],M[1]=P}y.push(M)}}return y}},9014:function(v,c,i){"use strict";var s=i(5070);function a(D,S,O,P,R){this.mid=D,this.left=S,this.right=O,this.leftPoints=P,this.rightPoints=R,this.count=(S?S.count:0)+(O?O.count:0)+P.length}v.exports=function(D){return new M(D&&0!==D.length?b(D):null)};var o=a.prototype;function l(D,S){D.mid=S.mid,D.left=S.left,D.right=S.right,D.leftPoints=S.leftPoints,D.rightPoints=S.rightPoints,D.count=S.count}function u(D,S){var O=b(S);D.mid=O.mid,D.left=O.left,D.right=O.right,D.leftPoints=O.leftPoints,D.rightPoints=O.rightPoints,D.count=O.count}function d(D,S){var O=D.intervals([]);O.push(S),u(D,O)}function g(D,S){var O=D.intervals([]),P=O.indexOf(S);return P<0?0:(O.splice(P,1),u(D,O),1)}function h(D,S,O){for(var P=0;P<D.length&&D[P][0]<=S;++P){var R=O(D[P]);if(R)return R}}function w(D,S,O){for(var P=D.length-1;P>=0&&D[P][1]>=S;--P){var R=O(D[P]);if(R)return R}}function y(D,S){for(var O=0;O<D.length;++O){var P=S(D[O]);if(P)return P}}function p(D,S){return D-S}function _(D,S){return D[0]-S[0]||D[1]-S[1]}function x(D,S){return D[1]-S[1]||D[0]-S[0]}function b(D){if(0===D.length)return null;for(var S=[],O=0;O<D.length;++O)S.push(D[O][0],D[O][1]);S.sort(p);var P=S[S.length>>1],R=[],F=[],B=[];for(O=0;O<D.length;++O){var J=D[O];J[1]<P?R.push(J):P<J[0]?F.push(J):B.push(J)}var z=B,$=B.slice();return z.sort(_),$.sort(x),new a(P,b(R),b(F),z,$)}function M(D){this.root=D}o.intervals=function(D){return D.push.apply(D,this.leftPoints),this.left&&this.left.intervals(D),this.right&&this.right.intervals(D),D},o.insert=function(D){var S=this.count-this.leftPoints.length;if(this.count+=1,D[1]<this.mid)this.left?4*(this.left.count+1)>3*(S+1)?d(this,D):this.left.insert(D):this.left=b([D]);else if(D[0]>this.mid)this.right?4*(this.right.count+1)>3*(S+1)?d(this,D):this.right.insert(D):this.right=b([D]);else{var O=s.ge(this.leftPoints,D,_),P=s.ge(this.rightPoints,D,x);this.leftPoints.splice(O,0,D),this.rightPoints.splice(P,0,D)}},o.remove=function(D){var S=this.count-this.leftPoints;if(D[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(S-1)?g(this,D):2===(F=this.left.remove(D))?(this.left=null,this.count-=1,1):(1===F&&(this.count-=1),F):0;if(D[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(S-1)?g(this,D):2===(F=this.right.remove(D))?(this.right=null,this.count-=1,1):(1===F&&(this.count-=1),F):0;if(1===this.count)return this.leftPoints[0]===D?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===D){if(this.left&&this.right){for(var O=this,P=this.left;P.right;)O=P,P=P.right;if(O===this)P.right=this.right;else{var R=this.left,F=this.right;O.count-=P.count,O.right=P.left,P.left=R,P.right=F}l(this,P),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(R=s.ge(this.leftPoints,D,_);R<this.leftPoints.length&&this.leftPoints[R][0]===D[0];++R)if(this.leftPoints[R]===D)for(this.count-=1,this.leftPoints.splice(R,1),F=s.ge(this.rightPoints,D,x);F<this.rightPoints.length&&this.rightPoints[F][1]===D[1];++F)if(this.rightPoints[F]===D)return this.rightPoints.splice(F,1),1;return 0},o.queryPoint=function(D,S){return D<this.mid?this.left&&(O=this.left.queryPoint(D,S))?O:h(this.leftPoints,D,S):D>this.mid?this.right&&(O=this.right.queryPoint(D,S))?O:w(this.rightPoints,D,S):y(this.leftPoints,S);var O},o.queryInterval=function(D,S,O){var P;return D<this.mid&&this.left&&(P=this.left.queryInterval(D,S,O))||S>this.mid&&this.right&&(P=this.right.queryInterval(D,S,O))?P:S<this.mid?h(this.leftPoints,S,O):D>this.mid?w(this.rightPoints,D,O):y(this.leftPoints,O)};var m=M.prototype;m.insert=function(D){this.root?this.root.insert(D):this.root=new a(D[0],null,null,[D],[D])},m.remove=function(D){if(this.root){var S=this.root.remove(D);return 2===S&&(this.root=null),0!==S}return!1},m.queryPoint=function(D,S){if(this.root)return this.root.queryPoint(D,S)},m.queryInterval=function(D,S,O){if(D<=S&&this.root)return this.root.queryInterval(D,S,O)},Object.defineProperty(m,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(m,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(v){"use strict";v.exports=function(c){for(var i=new Array(c),s=0;s<c;++s)i[s]=s;return i}},4846:function(v){v.exports=!0},4780:function(v){function c(i){return!!i.constructor&&"function"==typeof i.constructor.isBuffer&&i.constructor.isBuffer(i)}v.exports=function(i){return null!=i&&(c(i)||"function"==typeof(s=i).readFloatLE&&"function"==typeof s.slice&&c(s.slice(0,0))||!!i._isBuffer);var s}},3596:function(v){"use strict";v.exports=function(c){for(var i,s=c.length,a=0;a<s;a++)if(((i=c.charCodeAt(a))<9||i>13)&&32!==i&&133!==i&&160!==i&&5760!==i&&6158!==i&&(i<8192||i>8205)&&8232!==i&&8233!==i&&8239!==i&&8287!==i&&8288!==i&&12288!==i&&65279!==i)return!1;return!0}},3578:function(v){v.exports=function(c,i,s){return c*(1-s)+i*s}},7191:function(v,c,i){var s=i(4690),a=i(9823),o=i(7332),l=i(7787),u=i(7437),d=i(2142),g={length:i(4693),normalize:i(899),dot:i(9305),cross:i(903)},h=a(),w=a(),y=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],_=[0,0,0];function x(b,M,m,D,S){b[0]=M[0]*D+m[0]*S,b[1]=M[1]*D+m[1]*S,b[2]=M[2]*D+m[2]*S}v.exports=function(b,M,m,D,S,O){if(M||(M=[0,0,0]),m||(m=[0,0,0]),D||(D=[0,0,0]),S||(S=[0,0,0,1]),O||(O=[0,0,0,1]),!s(h,b)||(o(w,h),w[3]=0,w[7]=0,w[11]=0,w[15]=1,Math.abs(l(w)<1e-8)))return!1;var P,R,F,B,J,z,$,ie,le,G=h[3],H=h[7],X=h[11],K=h[12],ue=h[13],ae=h[14],ne=h[15];if(0!==G||0!==H||0!==X){if(y[0]=G,y[1]=H,y[2]=X,y[3]=ne,!u(w,w))return!1;d(w,w),B=(R=y)[0],(P=S)[0]=(F=w)[0]*B+F[4]*(J=R[1])+F[8]*(z=R[2])+F[12]*($=R[3]),P[1]=F[1]*B+F[5]*J+F[9]*z+F[13]*$,P[2]=F[2]*B+F[6]*J+F[10]*z+F[14]*$,P[3]=F[3]*B+F[7]*J+F[11]*z+F[15]*$}else S[0]=S[1]=S[2]=0,S[3]=1;if(M[0]=K,M[1]=ue,M[2]=ae,(ie=p)[0][0]=(le=h)[0],ie[0][1]=le[1],ie[0][2]=le[2],ie[1][0]=le[4],ie[1][1]=le[5],ie[1][2]=le[6],ie[2][0]=le[8],ie[2][1]=le[9],ie[2][2]=le[10],m[0]=g.length(p[0]),g.normalize(p[0],p[0]),D[0]=g.dot(p[0],p[1]),x(p[1],p[1],p[0],1,-D[0]),m[1]=g.length(p[1]),g.normalize(p[1],p[1]),D[0]/=m[1],D[1]=g.dot(p[0],p[2]),x(p[2],p[2],p[0],1,-D[1]),D[2]=g.dot(p[1],p[2]),x(p[2],p[2],p[1],1,-D[2]),m[2]=g.length(p[2]),g.normalize(p[2],p[2]),D[1]/=m[2],D[2]/=m[2],g.cross(_,p[1],p[2]),g.dot(p[0],_)<0)for(var Q=0;Q<3;Q++)m[Q]*=-1,p[Q][0]*=-1,p[Q][1]*=-1,p[Q][2]*=-1;return O[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),O[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),O[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),O[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(O[0]=-O[0]),p[0][2]>p[2][0]&&(O[1]=-O[1]),p[1][0]>p[0][1]&&(O[2]=-O[2]),!0}},4690:function(v){v.exports=function(c,i){var s=i[15];if(0===s)return!1;for(var a=1/s,o=0;o<16;o++)c[o]=i[o]*a;return!0}},7649:function(v,c,i){var s=i(1868),a=i(1102),o=i(7191),l=i(7787),u=i(1116),d=w(),g=w(),h=w();function w(){return{translate:y(),scale:y(1),skew:y(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function y(p){return[p||0,p||0,p||0]}v.exports=function(p,_,x,b){if(0===l(_)||0===l(x))return!1;var M=o(_,d.translate,d.scale,d.skew,d.perspective,d.quaternion),m=o(x,g.translate,g.scale,g.skew,g.perspective,g.quaternion);return!(!M||!m||(s(h.translate,d.translate,g.translate,b),s(h.skew,d.skew,g.skew,b),s(h.scale,d.scale,g.scale,b),s(h.perspective,d.perspective,g.perspective,b),u(h.quaternion,d.quaternion,g.quaternion,b),a(p,h.translate,h.scale,h.skew,h.perspective,h.quaternion),0))}},1102:function(v,c,i){var s={identity:i(9947),translate:i(998),multiply:i(104),create:i(9823),scale:i(3668),fromRotationTranslation:i(7280)},a=(s.create(),s.create());v.exports=function(o,l,u,d,g,h){return s.identity(o),s.fromRotationTranslation(o,h,l),o[3]=g[0],o[7]=g[1],o[11]=g[2],o[15]=g[3],s.identity(a),0!==d[2]&&(a[9]=d[2],s.multiply(o,o,a)),0!==d[1]&&(a[9]=0,a[8]=d[1],s.multiply(o,o,a)),0!==d[0]&&(a[8]=0,a[4]=d[0],s.multiply(o,o,a)),s.scale(o,o,u),o}},9298:function(v,c,i){"use strict";var s=i(5070),a=i(7649),o=i(7437),l=i(6109),u=i(7115),d=i(5240),g=i(3012),h=i(998),w=(i(3668),i(899)),y=[0,0,0];function p(b){this._components=b.slice(),this._time=[0],this.prevMatrix=b.slice(),this.nextMatrix=b.slice(),this.computedMatrix=b.slice(),this.computedInverse=b.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}v.exports=function(b){return new p((b=b||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var _=p.prototype;_.recalcMatrix=function(b){var M=this._time,m=s.le(M,b),D=this.computedMatrix;if(!(m<0)){var S=this._components;if(m===M.length-1)for(var O=16*m,P=0;P<16;++P)D[P]=S[O++];else{var R=M[m+1]-M[m],F=(O=16*m,this.prevMatrix),B=!0;for(P=0;P<16;++P)F[P]=S[O++];var J=this.nextMatrix;for(P=0;P<16;++P)J[P]=S[O++],B=B&&F[P]===J[P];if(R<1e-6||B)for(P=0;P<16;++P)D[P]=F[P];else a(D,F,J,(b-M[m])/R)}var z=this.computedUp;z[0]=D[1],z[1]=D[5],z[2]=D[9],w(z,z);var $=this.computedInverse;o($,D);var G=this.computedEye,H=$[15];G[0]=$[12]/H,G[1]=$[13]/H,G[2]=$[14]/H;var X=this.computedCenter,K=Math.exp(this.computedRadius[0]);for(P=0;P<3;++P)X[P]=G[P]-D[2+4*P]*K}},_.idle=function(b){if(!(b<this.lastT())){for(var M=this._components,m=M.length-16,D=0;D<16;++D)M.push(M[m++]);this._time.push(b)}},_.flush=function(b){var M=s.gt(this._time,b)-2;M<0||(this._time.splice(0,M),this._components.splice(0,16*M))},_.lastT=function(){return this._time[this._time.length-1]},_.lookAt=function(b,M,m,D){this.recalcMatrix(b),this.setMatrix(b,g(this.computedMatrix,M=M||this.computedEye,m=m||y,D=D||this.computedUp));for(var S=0,O=0;O<3;++O)S+=Math.pow(m[O]-M[O],2);S=Math.log(Math.sqrt(S)),this.computedRadius[0]=S},_.rotate=function(b,M,m,D){this.recalcMatrix(b);var S=this.computedInverse;M&&u(S,S,M),m&&l(S,S,m),D&&d(S,S,D),this.setMatrix(b,o(this.computedMatrix,S))};var x=[0,0,0];_.pan=function(b,M,m,D){x[0]=-(M||0),x[1]=-(m||0),x[2]=-(D||0),this.recalcMatrix(b);var S=this.computedInverse;h(S,S,x),this.setMatrix(b,o(S,S))},_.translate=function(b,M,m,D){x[0]=M||0,x[1]=m||0,x[2]=D||0,this.recalcMatrix(b);var S=this.computedMatrix;h(S,S,x),this.setMatrix(b,S)},_.setMatrix=function(b,M){if(!(b<this.lastT())){this._time.push(b);for(var m=0;m<16;++m)this._components.push(M[m])}},_.setDistance=function(b,M){this.computedRadius[0]=M},_.setDistanceLimits=function(b,M){var m=this._limits;m[0]=b,m[1]=M},_.getDistanceLimits=function(b){var M=this._limits;return b?(b[0]=M[0],b[1]=M[1],b):M}},3266:function(v,c,i){"use strict";v.exports=function(a){var o=a.length;if(o<3){for(var l=new Array(o),u=0;u<o;++u)l[u]=u;return 2===o&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:l}var d=new Array(o);for(u=0;u<o;++u)d[u]=u;d.sort(function(M,m){return a[M][0]-a[m][0]||a[M][1]-a[m][1]});var g=[d[0],d[1]],h=[d[0],d[1]];for(u=2;u<o;++u){for(var w=d[u],y=a[w],p=g.length;p>1&&s(a[g[p-2]],a[g[p-1]],y)<=0;)p-=1,g.pop();for(g.push(w),p=h.length;p>1&&s(a[h[p-2]],a[h[p-1]],y)>=0;)p-=1,h.pop();h.push(w)}l=new Array(h.length+g.length-2);for(var _=0,x=(u=0,g.length);u<x;++u)l[_++]=g[u];for(var b=h.length-2;b>0;--b)l[_++]=h[b];return l};var s=i(417)[3]},6145:function(v,c,i){"use strict";v.exports=function(a,o){o||(o=a,a=window);var l=0,u=0,d=0,g={shift:!1,alt:!1,control:!1,meta:!1},h=!1;function w(O){var P=!1;return"altKey"in O&&(P=P||O.altKey!==g.alt,g.alt=!!O.altKey),"shiftKey"in O&&(P=P||O.shiftKey!==g.shift,g.shift=!!O.shiftKey),"ctrlKey"in O&&(P=P||O.ctrlKey!==g.control,g.control=!!O.ctrlKey),"metaKey"in O&&(P=P||O.metaKey!==g.meta,g.meta=!!O.metaKey),P}function y(O,P){var R=s.x(P),F=s.y(P);"buttons"in P&&(O=0|P.buttons),(O!==l||R!==u||F!==d||w(P))&&(l=0|O,u=R||0,d=F||0,o&&o(l,u,d,g))}function p(O){y(0,O)}function _(){(l||u||d||g.shift||g.alt||g.meta||g.control)&&(u=d=0,l=0,g.shift=g.alt=g.control=g.meta=!1,o&&o(0,0,0,g))}function x(O){w(O)&&o&&o(l,u,d,g)}function b(O){0===s.buttons(O)?y(0,O):y(l,O)}function M(O){y(l|s.buttons(O),O)}function m(O){y(l&~s.buttons(O),O)}function D(){h||(h=!0,a.addEventListener("mousemove",b),a.addEventListener("mousedown",M),a.addEventListener("mouseup",m),a.addEventListener("mouseleave",p),a.addEventListener("mouseenter",p),a.addEventListener("mouseout",p),a.addEventListener("mouseover",p),a.addEventListener("blur",_),a.addEventListener("keyup",x),a.addEventListener("keydown",x),a.addEventListener("keypress",x),a!==window&&(window.addEventListener("blur",_),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}D();var S={element:a};return Object.defineProperties(S,{enabled:{get:function(){return h},set:function(O){O?D():h&&(h=!1,a.removeEventListener("mousemove",b),a.removeEventListener("mousedown",M),a.removeEventListener("mouseup",m),a.removeEventListener("mouseleave",p),a.removeEventListener("mouseenter",p),a.removeEventListener("mouseout",p),a.removeEventListener("mouseover",p),a.removeEventListener("blur",_),a.removeEventListener("keyup",x),a.removeEventListener("keydown",x),a.removeEventListener("keypress",x),a!==window&&(window.removeEventListener("blur",_),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return g},enumerable:!0}}),S};var s=i(4110)},2565:function(v){var c={left:0,top:0};v.exports=function(i,s,a){s=s||i.currentTarget||i.srcElement,Array.isArray(a)||(a=[0,0]);var o,l=i.clientX||0,u=i.clientY||0,d=(o=s)===window||o===document||o===document.body?c:o.getBoundingClientRect();return a[0]=l-d.left,a[1]=u-d.top,a}},4110:function(v,c){"use strict";function i(s){return s.target||s.srcElement||window}c.buttons=function(s){if("object"==typeof s){if("buttons"in s)return s.buttons;if("which"in s){if(2===(a=s.which))return 4;if(3===a)return 2;if(a>0)return 1<<a-1}else if("button"in s){var a;if(1===(a=s.button))return 4;if(2===a)return 2;if(a>=0)return 1<<a}}return 0},c.element=i,c.x=function(s){if("object"==typeof s){if("offsetX"in s)return s.offsetX;var a=i(s).getBoundingClientRect();return s.clientX-a.left}return 0},c.y=function(s){if("object"==typeof s){if("offsetY"in s)return s.offsetY;var a=i(s).getBoundingClientRect();return s.clientY-a.top}return 0}},6475:function(v,c,i){"use strict";var s=i(14);v.exports=function(a,o,l){"function"==typeof a&&(l=!!o,o=a,a=window);var u=s("ex",a),d=function(g){l&&g.preventDefault();var h=g.deltaX||0,w=g.deltaY||0,y=g.deltaZ||0,p=1;switch(g.deltaMode){case 1:p=u;break;case 2:p=window.innerHeight}if(w*=p,y*=p,(h*=p)||w||y)return o(h,w,y,g)};return a.addEventListener("wheel",d),d}},9284:function(v,c,i){"use strict";var s=i(5306);v.exports=function(o){function l(y){throw new Error("ndarray-extract-contour: "+y)}"object"!=typeof o&&l("Must specify arguments");var u=o.order;Array.isArray(u)||l("Must specify order");var y,p,_,m,d=o.arrayArguments||1;d<1&&l("Must have at least one array argument"),(o.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof o.vertex&&l("Must specify vertex creation function"),"function"!=typeof o.cell&&l("Must specify cell creation function"),"function"!=typeof o.phase&&l("Must specify phase function");for(var g=o.getters||[],h=new Array(d),w=0;w<d;++w)h[w]=g.indexOf(w)>=0;return y=o.vertex,p=o.cell,_=o.phase,m=[h,u].join(","),(0,a[m])(y,p,_,s.mallocUint32,s.freeUint32)};var a={"false,0,1":function(o,l,u,d,g){return function(h,w,y,p){var _,x=0|h.shape[0],b=0|h.shape[1],M=h.data,D=0|h.stride[0],S=0|h.stride[1],O=0|h.offset,P=0|-D,R=0,F=0|-S,B=0,J=-D-S|0,z=0,$=0|D,G=S-D*x|0,H=0,X=0,K=0,ue=2*x|0,ae=d(ue),ne=d(ue),Q=0,ie=0,le=-1,fe=-1,he=0,pe=0|-x,xe=0|x,Ee=0,Re=-x-1|0,ke=x-1|0,Te=0,we=0,je=0;for(H=0;H<x;++H)ae[Q++]=u(M[O],w,y,p),O+=$;if(O+=G,b>0){if(X=1,ae[Q++]=u(M[O],w,y,p),O+=$,x>0)for(H=1,ie=ae[Q]=u(_=M[O],w,y,p),Ee=ae[Q+pe],Te=ae[Q+Re],ie===(he=ae[Q+le])&&ie===Ee&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,he,Ee,Te,w,y,p),we=ne[Q]=K++),Q+=1,O+=$,H=2;H<x;++H)ie=ae[Q]=u(_=M[O],w,y,p),Ee=ae[Q+pe],Te=ae[Q+Re],ie===(he=ae[Q+le])&&ie===Ee&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,he,Ee,Te,w,y,p),we=ne[Q]=K++,Te!==he&&l(ne[Q+le],we,z,R,Te,he,w,y,p)),Q+=1,O+=$;for(O+=G,Q=0,je=le,le=fe,fe=je,je=pe,pe=xe,xe=je,je=Re,Re=ke,ke=je,X=2;X<b;++X){if(ae[Q++]=u(M[O],w,y,p),O+=$,x>0)for(H=1,ie=ae[Q]=u(_=M[O],w,y,p),Ee=ae[Q+pe],Te=ae[Q+Re],ie===(he=ae[Q+le])&&ie===Ee&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,he,Ee,Te,w,y,p),we=ne[Q]=K++,Te!==Ee&&l(ne[Q+pe],we,B,z,Ee,Te,w,y,p)),Q+=1,O+=$,H=2;H<x;++H)ie=ae[Q]=u(_=M[O],w,y,p),Ee=ae[Q+pe],Te=ae[Q+Re],ie===(he=ae[Q+le])&&ie===Ee&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,he,Ee,Te,w,y,p),we=ne[Q]=K++,Te!==Ee&&l(ne[Q+pe],we,B,z,Ee,Te,w,y,p),Te!==he&&l(ne[Q+le],we,z,R,Te,he,w,y,p)),Q+=1,O+=$;1&X&&(Q=0),je=le,le=fe,fe=je,je=pe,pe=xe,xe=je,je=Re,Re=ke,ke=je,O+=G}}g(ne),g(ae)}},"false,1,0":function(o,l,u,d,g){return function(h,w,y,p){var _,x=0|h.shape[0],b=0|h.shape[1],M=h.data,D=0|h.stride[0],S=0|h.stride[1],O=0|h.offset,P=0|-D,R=0,F=0|-S,B=0,J=-D-S|0,z=0,$=0|S,G=D-S*b|0,H=0,X=0,K=0,ue=2*b|0,ae=d(ue),ne=d(ue),Q=0,ie=0,le=-1,fe=-1,he=0,pe=0|-b,xe=0|b,Ee=0,Re=-b-1|0,ke=b-1|0,Te=0,we=0,je=0;for(X=0;X<b;++X)ae[Q++]=u(M[O],w,y,p),O+=$;if(O+=G,x>0){if(H=1,ae[Q++]=u(M[O],w,y,p),O+=$,b>0)for(X=1,ie=ae[Q]=u(_=M[O],w,y,p),he=ae[Q+le],Te=ae[Q+Re],ie===(Ee=ae[Q+pe])&&ie===he&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,Ee,he,Te,w,y,p),we=ne[Q]=K++),Q+=1,O+=$,X=2;X<b;++X)ie=ae[Q]=u(_=M[O],w,y,p),he=ae[Q+le],Te=ae[Q+Re],ie===(Ee=ae[Q+pe])&&ie===he&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,Ee,he,Te,w,y,p),we=ne[Q]=K++,Te!==he&&l(ne[Q+le],we,B,z,he,Te,w,y,p)),Q+=1,O+=$;for(O+=G,Q=0,je=pe,pe=xe,xe=je,je=le,le=fe,fe=je,je=Re,Re=ke,ke=je,H=2;H<x;++H){if(ae[Q++]=u(M[O],w,y,p),O+=$,b>0)for(X=1,ie=ae[Q]=u(_=M[O],w,y,p),he=ae[Q+le],Te=ae[Q+Re],ie===(Ee=ae[Q+pe])&&ie===he&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,Ee,he,Te,w,y,p),we=ne[Q]=K++,Te!==Ee&&l(ne[Q+pe],we,z,R,Te,Ee,w,y,p)),Q+=1,O+=$,X=2;X<b;++X)ie=ae[Q]=u(_=M[O],w,y,p),he=ae[Q+le],Te=ae[Q+Re],ie===(Ee=ae[Q+pe])&&ie===he&&ie===Te||(o(H,X,_,R=M[O+P],B=M[O+F],z=M[O+J],ie,Ee,he,Te,w,y,p),we=ne[Q]=K++,Te!==he&&l(ne[Q+le],we,B,z,he,Te,w,y,p),Te!==Ee&&l(ne[Q+pe],we,z,R,Te,Ee,w,y,p)),Q+=1,O+=$;1&H&&(Q=0),je=pe,pe=xe,xe=je,je=le,le=fe,fe=je,je=Re,Re=ke,ke=je,O+=G}}g(ne),g(ae)}}}},9144:function(v,c,i){"use strict";var s=i(3094),a={zero:function(x,b,M,m){var D=x[0];m|=0;var S=0,O=M[0];for(S=0;S<D;++S)b[m]=0,m+=O},fdTemplate1:function(x,b,M,m,D,S,O){var P=x[0],R=M[0],F=-1*R,B=R;m|=0,O|=0;var J=0,z=R,$=S[0];for(J=0;J<P;++J)D[O]=.5*(b[m+F]-b[m+B]),m+=z,O+=$},fdTemplate2:function(x,b,M,m,D,S,O,P,R,F){var B=x[0],J=x[1],z=M[0],$=M[1],H=S[1],K=R[1],ue=-1*z,ae=z,ne=-1*$,Q=$;m|=0,O|=0,F|=0;var ie=0,le=0,fe=$,he=z-J*$,pe=H,xe=S[0]-J*H,Ee=K,Re=R[0]-J*K;for(le=0;le<B;++le){for(ie=0;ie<J;++ie)D[O]=.5*(b[m+ue]-b[m+ae]),P[F]=.5*(b[m+ne]-b[m+Q]),m+=fe,O+=pe,F+=Ee;m+=he,O+=xe,F+=Re}}},o={cdiff:function(x){var b={};return function(M,m,D){var S=M.dtype,O=M.order,P=m.dtype,R=m.order,F=D.dtype,B=D.order,J=[S,O.join(),P,R.join(),F,B.join()].join(),z=b[J];return z||(b[J]=z=x([S,O,P,R,F,B])),z(M.shape.slice(0),M.data,M.stride,0|M.offset,m.data,m.stride,0|m.offset,D.data,D.stride,0|D.offset)}},zero:function(x){var b={};return function(M){var m=M.dtype,D=M.order,S=[m,D.join()].join(),O=b[S];return O||(b[S]=O=x([m,D])),O(M.shape.slice(0),M.data,M.stride,0|M.offset)}},fdTemplate1:function(x){var b={};return function(M,m){var D=M.dtype,S=M.order,O=m.dtype,P=m.order,R=[D,S.join(),O,P.join()].join(),F=b[R];return F||(b[R]=F=x([D,S,O,P])),F(M.shape.slice(0),M.data,M.stride,0|M.offset,m.data,m.stride,0|m.offset)}},fdTemplate2:function(x){var b={};return function(M,m,D){var S=M.dtype,O=M.order,P=m.dtype,R=m.order,F=D.dtype,B=D.order,J=[S,O.join(),P,R.join(),F,B.join()].join(),z=b[J];return z||(b[J]=z=x([S,O,P,R,F,B])),z(M.shape.slice(0),M.data,M.stride,0|M.offset,m.data,m.stride,0|m.offset,D.data,D.stride,0|D.offset)}}};function l(x){return(0,o[x.funcName])(u.bind(void 0,x))}function u(x){return a[x.funcName]}function d(x){return l({funcName:x.funcName})}var g={},h={},w=d({funcName:"cdiff"}),y=d({funcName:"zero"});function p(x){return x in g?g[x]:g[x]=d({funcName:"fdTemplate"+x})}function _(x,b,M,m){return function(D,S){var O=S.shape.slice();return O[0]>2&&O[1]>2&&m(S.pick(-1,-1).lo(1,1).hi(O[0]-2,O[1]-2),D.pick(-1,-1,0).lo(1,1).hi(O[0]-2,O[1]-2),D.pick(-1,-1,1).lo(1,1).hi(O[0]-2,O[1]-2)),O[1]>2&&(M(S.pick(0,-1).lo(1).hi(O[1]-2),D.pick(0,-1,1).lo(1).hi(O[1]-2)),b(D.pick(0,-1,0).lo(1).hi(O[1]-2))),O[1]>2&&(M(S.pick(O[0]-1,-1).lo(1).hi(O[1]-2),D.pick(O[0]-1,-1,1).lo(1).hi(O[1]-2)),b(D.pick(O[0]-1,-1,0).lo(1).hi(O[1]-2))),O[0]>2&&(M(S.pick(-1,0).lo(1).hi(O[0]-2),D.pick(-1,0,0).lo(1).hi(O[0]-2)),b(D.pick(-1,0,1).lo(1).hi(O[0]-2))),O[0]>2&&(M(S.pick(-1,O[1]-1).lo(1).hi(O[0]-2),D.pick(-1,O[1]-1,0).lo(1).hi(O[0]-2)),b(D.pick(-1,O[1]-1,1).lo(1).hi(O[0]-2))),D.set(0,0,0,0),D.set(0,0,1,0),D.set(O[0]-1,0,0,0),D.set(O[0]-1,0,1,0),D.set(0,O[1]-1,0,0),D.set(0,O[1]-1,1,0),D.set(O[0]-1,O[1]-1,0,0),D.set(O[0]-1,O[1]-1,1,0),D}}v.exports=function(x,b,M){return Array.isArray(M)||(M=s(b.dimension,"string"==typeof M?M:"clamp")),0===b.size?x:0===b.dimension?(x.set(0),x):function(m){var D=m.join();if(R=h[D])return R;for(var S=m.length,O=[w,y],P=1;P<=S;++P)O.push(p(P));var R=_.apply(void 0,O);return h[D]=R,R}(M)(x,b)}},3581:function(v){"use strict";function c(o,l){var u=Math.floor(l),d=l-u,h=0<=u+1&&u+1<o.shape[0];return(1-d)*(0<=u&&u<o.shape[0]?+o.get(u):0)+d*(h?+o.get(u+1):0)}function i(o,l,u){var d=Math.floor(l),g=l-d,h=0<=d&&d<o.shape[0],w=0<=d+1&&d+1<o.shape[0],y=Math.floor(u),p=u-y,_=0<=y&&y<o.shape[1],x=0<=y+1&&y+1<o.shape[1],b=h&&_?o.get(d,y):0,M=h&&x?o.get(d,y+1):0;return(1-p)*((1-g)*b+g*(w&&_?o.get(d+1,y):0))+p*((1-g)*M+g*(w&&x?o.get(d+1,y+1):0))}function s(o,l,u,d){var g=Math.floor(l),h=l-g,w=0<=g&&g<o.shape[0],y=0<=g+1&&g+1<o.shape[0],p=Math.floor(u),_=u-p,x=0<=p&&p<o.shape[1],b=0<=p+1&&p+1<o.shape[1],M=Math.floor(d),m=d-M,D=0<=M&&M<o.shape[2],S=0<=M+1&&M+1<o.shape[2],O=w&&x&&D?o.get(g,p,M):0,P=w&&b&&D?o.get(g,p+1,M):0,R=y&&x&&D?o.get(g+1,p,M):0,F=y&&b&&D?o.get(g+1,p+1,M):0,B=w&&x&&S?o.get(g,p,M+1):0,J=w&&b&&S?o.get(g,p+1,M+1):0;return(1-m)*((1-_)*((1-h)*O+h*R)+_*((1-h)*P+h*F))+m*((1-_)*((1-h)*B+h*(y&&x&&S?o.get(g+1,p,M+1):0))+_*((1-h)*J+h*(y&&b&&S?o.get(g+1,p+1,M+1):0)))}function a(o){var l,u,d=0|o.shape.length,g=new Array(d),h=new Array(d),w=new Array(d),y=new Array(d);for(l=0;l<d;++l)u=+arguments[l+1],g[l]=Math.floor(u),h[l]=u-g[l],w[l]=0<=g[l]&&g[l]<o.shape[l],y[l]=0<=g[l]+1&&g[l]+1<o.shape[l];var p,_,x,b=0;e:for(l=0;l<1<<d;++l){for(_=1,x=o.offset,p=0;p<d;++p)if(l&1<<p){if(!y[p])continue e;_*=h[p],x+=o.stride[p]*(g[p]+1)}else{if(!w[p])continue e;_*=1-h[p],x+=o.stride[p]*g[p]}b+=_*o.data[x]}return b}v.exports=function(o,l,u,d){switch(o.shape.length){case 0:return 0;case 1:return c(o,l);case 2:return i(o,l,u);case 3:return s(o,l,u,d);default:return a.apply(void 0,arguments)}},v.exports.d1=c,v.exports.d2=i,v.exports.d3=s},7498:function(v,c){"use strict";var i={"float64,2,1,0":function(){return function(u,d,g,h,w){var y=u[0],p=u[1],_=u[2],b=g[1],M=g[2];h|=0;var m=0,D=0,S=0,O=M,P=b-_*M,R=g[0]-p*b;for(S=0;S<y;++S){for(D=0;D<p;++D){for(m=0;m<_;++m)d[h]/=w,h+=O;h+=P}h+=R}}},"uint8,2,0,1,float64,2,1,0":function(){return function(u,d,g,h,w,y,p,_){for(var x=u[0],b=u[1],M=u[2],m=g[0],D=g[1],S=g[2],O=y[0],P=y[1],R=y[2],F=h|=0,B=p|=0,J=0|u[0];J>0;){J<64?(x=J,J=0):(x=64,J-=64);for(var z=0|u[1];z>0;){z<64?(b=z,z=0):(b=64,z-=64),h=F+J*m+z*D,p=B+J*O+z*P;var $=0,G=0,H=0,X=S,K=m-M*S,ue=D-x*m,ae=R,ne=O-M*R,Q=P-x*O;for(H=0;H<b;++H){for(G=0;G<x;++G){for($=0;$<M;++$)d[h]=w[p]*_,h+=X,p+=ae;h+=K,p+=ne}h+=ue,p+=Q}}}}},"float32,1,0,float32,1,0":function(){return function(u,d,g,h,w,y,p){var _=u[0],x=u[1],M=g[1],D=y[1];h|=0,p|=0;var S=0,O=0,P=M,R=g[0]-x*M,F=D,B=y[0]-x*D;for(O=0;O<_;++O){for(S=0;S<x;++S)d[h]=w[p],h+=P,p+=F;h+=R,p+=B}}},"float32,1,0,float32,0,1":function(){return function(u,d,g,h,w,y,p){for(var _=u[0],x=u[1],b=g[0],M=g[1],m=y[0],D=y[1],S=h|=0,O=p|=0,P=0|u[1];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var R=0|u[0];R>0;){R<64?(_=R,R=0):(_=64,R-=64),h=S+P*M+R*b,p=O+P*D+R*m;var F=0,B=0,J=M,z=b-x*M,$=D,G=m-x*D;for(B=0;B<_;++B){for(F=0;F<x;++F)d[h]=w[p],h+=J,p+=$;h+=z,p+=G}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(u,d,g,h,w,y,p){for(var _=u[0],x=u[1],b=u[2],M=g[0],m=g[1],D=g[2],S=y[0],O=y[1],P=y[2],R=h|=0,F=p|=0,B=0|u[2];B>0;){B<64?(b=B,B=0):(b=64,B-=64);for(var J=0|u[0];J>0;){J<64?(_=J,J=0):(_=64,J-=64);for(var z=0|u[1];z>0;){z<64?(x=z,z=0):(x=64,z-=64),h=R+B*D+J*M+z*m,p=F+B*P+J*S+z*O;var $=0,G=0,H=0,X=D,K=M-b*D,ue=m-_*M,ae=P,ne=S-b*P,Q=O-_*S;for(H=0;H<x;++H){for(G=0;G<_;++G){for($=0;$<b;++$)d[h]=w[p],h+=X,p+=ae;h+=K,p+=ne}h+=ue,p+=Q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(u,d,g,h,w,y,p){var _=u[0],x=u[1],b=u[2],M=g[0],D=g[2],S=y[0],P=y[2];h|=0,p|=0;var R=0,F=0,B=0,J=D,z=M-b*D,$=g[1]-_*M,G=P,H=S-b*P,X=y[1]-_*S;for(B=0;B<x;++B){for(F=0;F<_;++F){for(R=0;R<b;++R)d[h]=w[p],h+=J,p+=G;h+=z,p+=H}h+=$,p+=X}}}},s=function(u,d){var g=d.join(",");return(0,i[g])()},a={mul:function(u){var d={};return function(g,h,w){var y=g.dtype,p=g.order,_=h.dtype,x=h.order,b=w.dtype,M=w.order,m=[y,p.join(),_,x.join(),b,M.join()].join(),D=d[m];return D||(d[m]=D=u([y,p,_,x,b,M])),D(g.shape.slice(0),g.data,g.stride,0|g.offset,h.data,h.stride,0|h.offset,w.data,w.stride,0|w.offset)}},muls:function(u){var d={};return function(g,h,w){var y=g.dtype,p=g.order,_=h.dtype,x=h.order,b=[y,p.join(),_,x.join()].join(),M=d[b];return M||(d[b]=M=u([y,p,_,x])),M(g.shape.slice(0),g.data,g.stride,0|g.offset,h.data,h.stride,0|h.offset,w)}},mulseq:function(u){var d={};return function(g,h){var w=g.dtype,y=g.order,p=[w,y.join()].join(),_=d[p];return _||(d[p]=_=u([w,y])),_(g.shape.slice(0),g.data,g.stride,0|g.offset,h)}},div:function(u){var d={};return function(g,h,w){var y=g.dtype,p=g.order,_=h.dtype,x=h.order,b=w.dtype,M=w.order,m=[y,p.join(),_,x.join(),b,M.join()].join(),D=d[m];return D||(d[m]=D=u([y,p,_,x,b,M])),D(g.shape.slice(0),g.data,g.stride,0|g.offset,h.data,h.stride,0|h.offset,w.data,w.stride,0|w.offset)}},divs:function(u){var d={};return function(g,h,w){var y=g.dtype,p=g.order,_=h.dtype,x=h.order,b=[y,p.join(),_,x.join()].join(),M=d[b];return M||(d[b]=M=u([y,p,_,x])),M(g.shape.slice(0),g.data,g.stride,0|g.offset,h.data,h.stride,0|h.offset,w)}},divseq:function(u){var d={};return function(g,h){var w=g.dtype,y=g.order,p=[w,y.join()].join(),_=d[p];return _||(d[p]=_=u([w,y])),_(g.shape.slice(0),g.data,g.stride,0|g.offset,h)}},assign:function(u){var d={};return function(g,h){var w=g.dtype,y=g.order,p=h.dtype,_=h.order,x=[w,y.join(),p,_.join()].join(),b=d[x];return b||(d[x]=b=u([w,y,p,_])),b(g.shape.slice(0),g.data,g.stride,0|g.offset,h.data,h.stride,0|h.offset)}}};function o(u){return(0,a[(d={funcName:u.funcName}).funcName])(s.bind(void 0,d));var d}var l={mul:"*",div:"/"};(function(){for(var u in l)c[u]=o({funcName:u}),c[u+"s"]=o({funcName:u+"s"}),c[u+"seq"]=o({funcName:u+"seq"})})(),c.assign=o({funcName:"assign"})},7382:function(v,c,i){"use strict";var s=i(5050),a=i(9262);v.exports=function(o,l){for(var u=[],d=o,g=1;Array.isArray(d);)u.push(d.length),g*=d.length,d=d[0];return 0===u.length?s():(l||(l=s(new Float64Array(g),u)),a(l,o),l)}},9262:function(v){"use strict";var c,i;v.exports=(c=function(){return function(c,i,s,a,o){var l=c[0],u=c[1],d=c[2],h=s[1],w=s[2],y=[0,0,0];a|=0;var p=0,_=0,x=0,b=w,M=h-d*w,m=s[0]-u*h;for(x=0;x<l;++x){for(_=0;_<u;++_){for(p=0;p<d;++p){var D,S=o;for(D=0;D<y.length-1;++D)S=S[y[D]];i[a]=S[y[y.length-1]],a+=b,++y[2]}a+=M,y[2]-=d,++y[1]}a+=m,y[1]-=u,++y[0]}}}.bind(void 0,{funcName:"convert"}),i={},function(s,a){var o=s.dtype,l=s.order,u=[o,l.join()].join(),d=i[u];return d||(i[u]=d=c([o,l])),d(s.shape.slice(0),s.data,s.stride,0|s.offset,a)})},8139:function(v,c,i){"use strict";var s=i(5306);function a(d){return"uint32"===d?[s.mallocUint32,s.freeUint32]:null}var o={"uint32,1,0":function(d,g){return function(h,w,y,p,_,x,b,M,m,D,S){var O,P,R,F,B,J,z,$,G=h*_+p,H=d(M);for(O=h+1;O<=w;++O){for(P=O,R=G+=_,B=0,J=G,F=0;F<M;++F)H[B++]=y[J],J+=m;e:for(;P-- >h;){B=0,J=R-_;t:for(F=0;F<M;++F){if((z=y[J])<($=H[B]))break e;if(z>$)break t;J+=D,B+=S}for(B=R,J=R-_,F=0;F<M;++F)y[B]=y[J],B+=m,J+=m;R-=_}for(B=R,J=0,F=0;F<M;++F)y[B]=H[J++],B+=m}g(H)}}},l={"uint32,1,0":function(d,g,h){return function w(y,p,_,x,b,M,m,D,S,O,P){var R,F,J,z,$,G,H,X,K,ue,ae,ne,Q,ie,le,fe,he,pe,xe,Ee,Re,ke,Te,we,je=(p-y+1)/6|0,Ce=y+je,Ie=p-je,ge=y+p>>1,me=ge-je,ce=ge+je,Ae=Ce,Ne=me,De=ge,qe=ce,Ke=Ie,be=y+1,Oe=p-1,Le=!0,Ue=0,Ze=0,We=0,et=D,nt=g(et),ct=g(et);ue=b*Ae,ae=b*Ne,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ae,Ae=Ne,Ne=F;break e}if(We<0)break e;we+=O}ue=b*qe,ae=b*Ke,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=qe,qe=Ke,Ke=F;break e}if(We<0)break e;we+=O}ue=b*Ae,ae=b*De,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ae,Ae=De,De=F;break e}if(We<0)break e;we+=O}ue=b*Ne,ae=b*De,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ne,Ne=De,De=F;break e}if(We<0)break e;we+=O}ue=b*Ae,ae=b*qe,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ae,Ae=qe,qe=F;break e}if(We<0)break e;we+=O}ue=b*De,ae=b*qe,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=De,De=qe,qe=F;break e}if(We<0)break e;we+=O}ue=b*Ne,ae=b*Ke,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ne,Ne=Ke,Ke=F;break e}if(We<0)break e;we+=O}ue=b*Ne,ae=b*De,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=Ne,Ne=De,De=F;break e}if(We<0)break e;we+=O}ue=b*qe,ae=b*Ke,we=x;e:for(K=0;K<D;++K){if((We=_[G=ue+we]-_[H=ae+we])>0){F=qe,qe=Ke,Ke=F;break e}if(We<0)break e;we+=O}for(ue=b*Ae,ae=b*Ne,ne=b*De,Q=b*qe,ie=b*Ke,le=b*Ce,fe=b*ge,he=b*Ie,Te=0,we=x,K=0;K<D;++K)G=ue+we,X=ne+we,pe=Q+we,xe=ie+we,Ee=le+we,Re=fe+we,ke=he+we,nt[Te]=_[H=ae+we],ct[Te]=_[pe],Le=Le&&nt[Te]===ct[Te],J=_[X],z=_[xe],_[Ee]=_[G],_[Re]=J,_[ke]=z,++Te,we+=S;for(ue=b*me,ae=b*y,we=x,K=0;K<D;++K)_[G=ue+we]=_[H=ae+we],we+=S;for(ue=b*ce,ae=b*p,we=x,K=0;K<D;++K)_[G=ue+we]=_[H=ae+we],we+=S;if(Le)for($=be;$<=Oe;++$){for(G=x+$*b,Te=0,K=0;K<D&&0==(We=_[G]-nt[Te]);++K)Te+=P,G+=O;if(0!==We)if(We<0){if($!==be)for(ue=b*$,ae=b*be,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;++be}else for(;;){for(G=x+Oe*b,Te=0,K=0;K<D&&0==(We=_[G]-nt[Te]);++K)Te+=P,G+=O;if(!(We>0)){if(We<0){for(ue=b*$,ae=b*be,ne=b*Oe,we=x,K=0;K<D;++K)X=ne+we,R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=_[X],_[X]=R,we+=S;++be,--Oe;break}for(ue=b*$,ae=b*Oe,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;--Oe;break}Oe--}}else for($=be;$<=Oe;++$){for(G=x+$*b,Te=0,K=0;K<D&&0==(Ue=_[G]-nt[Te]);++K)Te+=P,G+=O;if(Ue<0){if($!==be)for(ue=b*$,ae=b*be,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;++be}else{for(G=x+$*b,Te=0,K=0;K<D&&0==(Ze=_[G]-ct[Te]);++K)Te+=P,G+=O;if(Ze>0)for(;;){for(G=x+Oe*b,Te=0,K=0;K<D&&0==(We=_[G]-ct[Te]);++K)Te+=P,G+=O;if(!(We>0)){for(G=x+Oe*b,Te=0,K=0;K<D&&0==(We=_[G]-nt[Te]);++K)Te+=P,G+=O;if(We<0){for(ue=b*$,ae=b*be,ne=b*Oe,we=x,K=0;K<D;++K)X=ne+we,R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=_[X],_[X]=R,we+=S;++be,--Oe}else{for(ue=b*$,ae=b*Oe,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;--Oe}break}if(--Oe<$)break}}}for(ue=b*y,ae=b*(be-1),Te=0,we=x,K=0;K<D;++K)_[G=ue+we]=_[H=ae+we],_[H]=nt[Te],++Te,we+=S;for(ue=b*p,ae=b*(Oe+1),Te=0,we=x,K=0;K<D;++K)_[G=ue+we]=_[H=ae+we],_[H]=ct[Te],++Te,we+=S;if(be-2-y<=32?d(y,be-2,_,x,b,M,m,D,S,O,P):w(y,be-2,_,x,b,M,m,D,S,O,P),p-(Oe+2)<=32?d(Oe+2,p,_,x,b,M,m,D,S,O,P):w(Oe+2,p,_,x,b,M,m,D,S,O,P),Le)return h(nt),void h(ct);if(be<Ce&&Oe>Ie){e:for(;;){for(G=x+be*b,Te=0,we=x,K=0;K<D;++K){if(_[G]!==nt[Te])break e;++Te,G+=S}++be}e:for(;;){for(G=x+Oe*b,Te=0,we=x,K=0;K<D;++K){if(_[G]!==ct[Te])break e;++Te,G+=S}--Oe}for($=be;$<=Oe;++$){for(G=x+$*b,Te=0,K=0;K<D&&0==(Ue=_[G]-nt[Te]);++K)Te+=P,G+=O;if(0===Ue){if($!==be)for(ue=b*$,ae=b*be,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;++be}else{for(G=x+$*b,Te=0,K=0;K<D&&0==(Ze=_[G]-ct[Te]);++K)Te+=P,G+=O;if(0===Ze)for(;;){for(G=x+Oe*b,Te=0,K=0;K<D&&0==(We=_[G]-ct[Te]);++K)Te+=P,G+=O;if(0!==We){for(G=x+Oe*b,Te=0,K=0;K<D&&0==(We=_[G]-nt[Te]);++K)Te+=P,G+=O;if(We<0){for(ue=b*$,ae=b*be,ne=b*Oe,we=x,K=0;K<D;++K)X=ne+we,R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=_[X],_[X]=R,we+=S;++be,--Oe}else{for(ue=b*$,ae=b*Oe,we=x,K=0;K<D;++K)R=_[G=ue+we],_[G]=_[H=ae+we],_[H]=R,we+=S;--Oe}break}if(--Oe<$)break}}}}h(nt),h(ct),Oe-be<=32?d(be,Oe,_,x,b,M,m,D,S,O,P):w(be,Oe,_,x,b,M,m,D,S,O,P)}}},u={"uint32,1,0":function(d,g){return function(h){var w=h.data,y=0|h.offset,p=h.shape,_=h.stride,x=0|_[0],b=0|p[0],M=0|_[1],m=0|p[1],D=M,S=M;b<=32?d(0,b-1,w,y,x,M,b,m,D,S,1):g(0,b-1,w,y,x,M,b,m,D,S,1)}}};v.exports=function(d,g){var _,x,b,M,m,h=[g,d].join(","),w=u[h],y=(_=d,b=a(x=g),M=[x,_].join(","),m=o[M],b?m(b[0],b[1]):m()),p=function(_,x,b){var M=a(x),m=[x,_].join(","),D=l[m];return _.length>1&&M?D(b,M[0],M[1]):D(b)}(d,g,y);return w(y,p)}},8729:function(v,c,i){"use strict";var s=i(8139),a={};v.exports=function(o){var l=o.order,u=o.dtype,d=[l,u].join(":"),g=a[d];return g||(a[d]=g=s(l,u)),g(o),o}},5050:function(v,c,i){var s=i(4780),a=typeof Float64Array<"u";function o(h,w){return h[0]-w[0]}function l(){var h,w=this.stride,y=new Array(w.length);for(h=0;h<y.length;++h)y[h]=[Math.abs(w[h]),h];y.sort(o);var p=new Array(y.length);for(h=0;h<p.length;++h)p[h]=y[h][1];return p}var u={T:function(h){function w(p){this.data=p}var y=w.prototype;return y.dtype=h,y.index=function(){return-1},y.size=0,y.dimension=-1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new w(this.data)},y.get=y.set=function(){},y.pick=function(){return null},function(p){return new w(p)}},0:function(h,w){function y(_,x){this.data=_,this.offset=x}var p=y.prototype;return p.dtype=h,p.index=function(){return this.offset},p.dimension=0,p.size=1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new y(this.data,this.offset)},p.pick=function(){return w(this.data)},p.valueOf=p.get=function(){return"generic"===h?this.data.get(this.offset):this.data[this.offset]},p.set=function(_){return"generic"===h?this.data.set(this.offset,_):this.data[this.offset]=_},function(_,x,b,M){return new y(_,M)}},1:function(h,w,y){function p(x,b,M,m){this.data=x,this.shape=[b],this.stride=[M],this.offset=0|m}var _=p.prototype;return _.dtype=h,_.dimension=1,Object.defineProperty(_,"size",{get:function(){return this.shape[0]}}),_.order=[0],_.set=function(x,b){return"generic"===h?this.data.set(this.offset+this.stride[0]*x,b):this.data[this.offset+this.stride[0]*x]=b},_.get=function(x){return"generic"===h?this.data.get(this.offset+this.stride[0]*x):this.data[this.offset+this.stride[0]*x]},_.index=function(x){return this.offset+this.stride[0]*x},_.hi=function(x){return new p(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,this.stride[0],this.offset)},_.lo=function(x){var b=this.offset,M=0,m=this.shape[0],D=this.stride[0];return"number"==typeof x&&x>=0&&(b+=D*(M=0|x),m-=M),new p(this.data,m,D,b)},_.step=function(x){var b=this.shape[0],M=this.stride[0],m=this.offset,D=0,S=Math.ceil;return"number"==typeof x&&((D=0|x)<0?(m+=M*(b-1),b=S(-b/D)):b=S(b/D),M*=D),new p(this.data,b,M,m)},_.transpose=function(x){return new p(this.data,this.shape[x=void 0===x?0:0|x],this.stride[x],this.offset)},_.pick=function(x){var b=[],M=[],m=this.offset;return"number"==typeof x&&x>=0?m=m+this.stride[0]*x|0:(b.push(this.shape[0]),M.push(this.stride[0])),(0,w[b.length+1])(this.data,b,M,m)},function(x,b,M,m){return new p(x,b[0],M[0],m)}},2:function(h,w,y){function p(x,b,M,m,D,S){this.data=x,this.shape=[b,M],this.stride=[m,D],this.offset=0|S}var _=p.prototype;return _.dtype=h,_.dimension=2,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(_,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),_.set=function(x,b,M){return"generic"===h?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*b,M):this.data[this.offset+this.stride[0]*x+this.stride[1]*b]=M},_.get=function(x,b){return"generic"===h?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*b):this.data[this.offset+this.stride[0]*x+this.stride[1]*b]},_.index=function(x,b){return this.offset+this.stride[0]*x+this.stride[1]*b},_.hi=function(x,b){return new p(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof b||b<0?this.shape[1]:0|b,this.stride[0],this.stride[1],this.offset)},_.lo=function(x,b){var M=this.offset,m=0,D=this.shape[0],S=this.shape[1],O=this.stride[0],P=this.stride[1];return"number"==typeof x&&x>=0&&(M+=O*(m=0|x),D-=m),"number"==typeof b&&b>=0&&(M+=P*(m=0|b),S-=m),new p(this.data,D,S,O,P,M)},_.step=function(x,b){var M=this.shape[0],m=this.shape[1],D=this.stride[0],S=this.stride[1],O=this.offset,P=0,R=Math.ceil;return"number"==typeof x&&((P=0|x)<0?(O+=D*(M-1),M=R(-M/P)):M=R(M/P),D*=P),"number"==typeof b&&((P=0|b)<0?(O+=S*(m-1),m=R(-m/P)):m=R(m/P),S*=P),new p(this.data,M,m,D,S,O)},_.transpose=function(x,b){var M=this.shape,m=this.stride;return new p(this.data,M[x=void 0===x?0:0|x],M[b=void 0===b?1:0|b],m[x],m[b],this.offset)},_.pick=function(x,b){var M=[],m=[],D=this.offset;return"number"==typeof x&&x>=0?D=D+this.stride[0]*x|0:(M.push(this.shape[0]),m.push(this.stride[0])),"number"==typeof b&&b>=0?D=D+this.stride[1]*b|0:(M.push(this.shape[1]),m.push(this.stride[1])),(0,w[M.length+1])(this.data,M,m,D)},function(x,b,M,m){return new p(x,b[0],b[1],M[0],M[1],m)}},3:function(h,w,y){function p(x,b,M,m,D,S,O,P){this.data=x,this.shape=[b,M,m],this.stride=[D,S,O],this.offset=0|P}var _=p.prototype;return _.dtype=h,_.dimension=3,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(_,"order",{get:function(){var x=Math.abs(this.stride[0]),b=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return x>b?b>M?[2,1,0]:x>M?[1,2,0]:[1,0,2]:x>M?[2,0,1]:M>b?[0,1,2]:[0,2,1]}}),_.set=function(x,b,M,m){return"generic"===h?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M,m):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M]=m},_.get=function(x,b,M){return"generic"===h?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M]},_.index=function(x,b,M){return this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M},_.hi=function(x,b,M){return new p(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof b||b<0?this.shape[1]:0|b,"number"!=typeof M||M<0?this.shape[2]:0|M,this.stride[0],this.stride[1],this.stride[2],this.offset)},_.lo=function(x,b,M){var m=this.offset,D=0,S=this.shape[0],O=this.shape[1],P=this.shape[2],R=this.stride[0],F=this.stride[1],B=this.stride[2];return"number"==typeof x&&x>=0&&(m+=R*(D=0|x),S-=D),"number"==typeof b&&b>=0&&(m+=F*(D=0|b),O-=D),"number"==typeof M&&M>=0&&(m+=B*(D=0|M),P-=D),new p(this.data,S,O,P,R,F,B,m)},_.step=function(x,b,M){var m=this.shape[0],D=this.shape[1],S=this.shape[2],O=this.stride[0],P=this.stride[1],R=this.stride[2],F=this.offset,B=0,J=Math.ceil;return"number"==typeof x&&((B=0|x)<0?(F+=O*(m-1),m=J(-m/B)):m=J(m/B),O*=B),"number"==typeof b&&((B=0|b)<0?(F+=P*(D-1),D=J(-D/B)):D=J(D/B),P*=B),"number"==typeof M&&((B=0|M)<0?(F+=R*(S-1),S=J(-S/B)):S=J(S/B),R*=B),new p(this.data,m,D,S,O,P,R,F)},_.transpose=function(x,b,M){var m=this.shape,D=this.stride;return new p(this.data,m[x=void 0===x?0:0|x],m[b=void 0===b?1:0|b],m[M=void 0===M?2:0|M],D[x],D[b],D[M],this.offset)},_.pick=function(x,b,M){var m=[],D=[],S=this.offset;return"number"==typeof x&&x>=0?S=S+this.stride[0]*x|0:(m.push(this.shape[0]),D.push(this.stride[0])),"number"==typeof b&&b>=0?S=S+this.stride[1]*b|0:(m.push(this.shape[1]),D.push(this.stride[1])),"number"==typeof M&&M>=0?S=S+this.stride[2]*M|0:(m.push(this.shape[2]),D.push(this.stride[2])),(0,w[m.length+1])(this.data,m,D,S)},function(x,b,M,m){return new p(x,b[0],b[1],b[2],M[0],M[1],M[2],m)}},4:function(h,w,y){function p(x,b,M,m,D,S,O,P,R,F){this.data=x,this.shape=[b,M,m,D],this.stride=[S,O,P,R],this.offset=0|F}var _=p.prototype;return _.dtype=h,_.dimension=4,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(_,"order",{get:y}),_.set=function(x,b,M,m,D){return"generic"===h?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m,D):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m]=D},_.get=function(x,b,M,m){return"generic"===h?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m]},_.index=function(x,b,M,m){return this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m},_.hi=function(x,b,M,m){return new p(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof b||b<0?this.shape[1]:0|b,"number"!=typeof M||M<0?this.shape[2]:0|M,"number"!=typeof m||m<0?this.shape[3]:0|m,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},_.lo=function(x,b,M,m){var D=this.offset,S=0,O=this.shape[0],P=this.shape[1],R=this.shape[2],F=this.shape[3],B=this.stride[0],J=this.stride[1],z=this.stride[2],$=this.stride[3];return"number"==typeof x&&x>=0&&(D+=B*(S=0|x),O-=S),"number"==typeof b&&b>=0&&(D+=J*(S=0|b),P-=S),"number"==typeof M&&M>=0&&(D+=z*(S=0|M),R-=S),"number"==typeof m&&m>=0&&(D+=$*(S=0|m),F-=S),new p(this.data,O,P,R,F,B,J,z,$,D)},_.step=function(x,b,M,m){var D=this.shape[0],S=this.shape[1],O=this.shape[2],P=this.shape[3],R=this.stride[0],F=this.stride[1],B=this.stride[2],J=this.stride[3],z=this.offset,$=0,G=Math.ceil;return"number"==typeof x&&(($=0|x)<0?(z+=R*(D-1),D=G(-D/$)):D=G(D/$),R*=$),"number"==typeof b&&(($=0|b)<0?(z+=F*(S-1),S=G(-S/$)):S=G(S/$),F*=$),"number"==typeof M&&(($=0|M)<0?(z+=B*(O-1),O=G(-O/$)):O=G(O/$),B*=$),"number"==typeof m&&(($=0|m)<0?(z+=J*(P-1),P=G(-P/$)):P=G(P/$),J*=$),new p(this.data,D,S,O,P,R,F,B,J,z)},_.transpose=function(x,b,M,m){var D=this.shape,S=this.stride;return new p(this.data,D[x=void 0===x?0:0|x],D[b=void 0===b?1:0|b],D[M=void 0===M?2:0|M],D[m=void 0===m?3:0|m],S[x],S[b],S[M],S[m],this.offset)},_.pick=function(x,b,M,m){var D=[],S=[],O=this.offset;return"number"==typeof x&&x>=0?O=O+this.stride[0]*x|0:(D.push(this.shape[0]),S.push(this.stride[0])),"number"==typeof b&&b>=0?O=O+this.stride[1]*b|0:(D.push(this.shape[1]),S.push(this.stride[1])),"number"==typeof M&&M>=0?O=O+this.stride[2]*M|0:(D.push(this.shape[2]),S.push(this.stride[2])),"number"==typeof m&&m>=0?O=O+this.stride[3]*m|0:(D.push(this.shape[3]),S.push(this.stride[3])),(0,w[D.length+1])(this.data,D,S,O)},function(x,b,M,m){return new p(x,b[0],b[1],b[2],b[3],M[0],M[1],M[2],M[3],m)}},5:function(h,w,y){function p(x,b,M,m,D,S,O,P,R,F,B,J){this.data=x,this.shape=[b,M,m,D,S],this.stride=[O,P,R,F,B],this.offset=0|J}var _=p.prototype;return _.dtype=h,_.dimension=5,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(_,"order",{get:y}),_.set=function(x,b,M,m,D,S){return"generic"===h?this.data.set(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m+this.stride[4]*D,S):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m+this.stride[4]*D]=S},_.get=function(x,b,M,m,D){return"generic"===h?this.data.get(this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m+this.stride[4]*D):this.data[this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m+this.stride[4]*D]},_.index=function(x,b,M,m,D){return this.offset+this.stride[0]*x+this.stride[1]*b+this.stride[2]*M+this.stride[3]*m+this.stride[4]*D},_.hi=function(x,b,M,m,D){return new p(this.data,"number"!=typeof x||x<0?this.shape[0]:0|x,"number"!=typeof b||b<0?this.shape[1]:0|b,"number"!=typeof M||M<0?this.shape[2]:0|M,"number"!=typeof m||m<0?this.shape[3]:0|m,"number"!=typeof D||D<0?this.shape[4]:0|D,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},_.lo=function(x,b,M,m,D){var S=this.offset,O=0,P=this.shape[0],R=this.shape[1],F=this.shape[2],B=this.shape[3],J=this.shape[4],z=this.stride[0],$=this.stride[1],G=this.stride[2],H=this.stride[3],X=this.stride[4];return"number"==typeof x&&x>=0&&(S+=z*(O=0|x),P-=O),"number"==typeof b&&b>=0&&(S+=$*(O=0|b),R-=O),"number"==typeof M&&M>=0&&(S+=G*(O=0|M),F-=O),"number"==typeof m&&m>=0&&(S+=H*(O=0|m),B-=O),"number"==typeof D&&D>=0&&(S+=X*(O=0|D),J-=O),new p(this.data,P,R,F,B,J,z,$,G,H,X,S)},_.step=function(x,b,M,m,D){var S=this.shape[0],O=this.shape[1],P=this.shape[2],R=this.shape[3],F=this.shape[4],B=this.stride[0],J=this.stride[1],z=this.stride[2],$=this.stride[3],G=this.stride[4],H=this.offset,X=0,K=Math.ceil;return"number"==typeof x&&((X=0|x)<0?(H+=B*(S-1),S=K(-S/X)):S=K(S/X),B*=X),"number"==typeof b&&((X=0|b)<0?(H+=J*(O-1),O=K(-O/X)):O=K(O/X),J*=X),"number"==typeof M&&((X=0|M)<0?(H+=z*(P-1),P=K(-P/X)):P=K(P/X),z*=X),"number"==typeof m&&((X=0|m)<0?(H+=$*(R-1),R=K(-R/X)):R=K(R/X),$*=X),"number"==typeof D&&((X=0|D)<0?(H+=G*(F-1),F=K(-F/X)):F=K(F/X),G*=X),new p(this.data,S,O,P,R,F,B,J,z,$,G,H)},_.transpose=function(x,b,M,m,D){var S=this.shape,O=this.stride;return new p(this.data,S[x=void 0===x?0:0|x],S[b=void 0===b?1:0|b],S[M=void 0===M?2:0|M],S[m=void 0===m?3:0|m],S[D=void 0===D?4:0|D],O[x],O[b],O[M],O[m],O[D],this.offset)},_.pick=function(x,b,M,m,D){var S=[],O=[],P=this.offset;return"number"==typeof x&&x>=0?P=P+this.stride[0]*x|0:(S.push(this.shape[0]),O.push(this.stride[0])),"number"==typeof b&&b>=0?P=P+this.stride[1]*b|0:(S.push(this.shape[1]),O.push(this.stride[1])),"number"==typeof M&&M>=0?P=P+this.stride[2]*M|0:(S.push(this.shape[2]),O.push(this.stride[2])),"number"==typeof m&&m>=0?P=P+this.stride[3]*m|0:(S.push(this.shape[3]),O.push(this.stride[3])),"number"==typeof D&&D>=0?P=P+this.stride[4]*D|0:(S.push(this.shape[4]),O.push(this.stride[4])),(0,w[S.length+1])(this.data,S,O,P)},function(x,b,M,m){return new p(x,b[0],b[1],b[2],b[3],b[4],M[0],M[1],M[2],M[3],M[4],m)}}};function d(h,w){var y=-1===w?"T":String(w),p=u[y];return-1===w?p(h):0===w?p(h,g[h][0]):p(h,g[h],l)}var g={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};v.exports=function(h,w,y,p){if(void 0===h)return(0,g.array[0])([]);"number"==typeof h&&(h=[h]),void 0===w&&(w=[h.length]);var _=w.length;if(void 0===y){y=new Array(_);for(var x=_-1,b=1;x>=0;--x)y[x]=b,b*=w[x]}if(void 0===p)for(p=0,x=0;x<_;++x)y[x]<0&&(p-=(w[x]-1)*y[x]);for(var M=function(D){if(s(D))return"buffer";if(a)switch(Object.prototype.toString.call(D)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(D)?"array":"generic"}(h),m=g[M];m.length<=_+1;)m.push(d(M,m.length-1));return(0,m[_+1])(h,w,y,p)}},8551:function(v,c,i){"use strict";var s=i(8362),a=Math.pow(2,-1074),o=-1>>>0;v.exports=function(l,u){if(isNaN(l)||isNaN(u))return NaN;if(l===u)return l;if(0===l)return u<0?-a:a;var d=s.hi(l),g=s.lo(l);return u>l==l>0?g===o?(d+=1,g=0):g+=1:0===g?(g=o,d-=1):g-=1,s.pack(g,d)}},115:function(v,c){c.vertexNormals=function(i,s,a){for(var o=s.length,l=new Array(o),u=void 0===a?1e-6:a,d=0;d<o;++d)l[d]=[0,0,0];for(d=0;d<i.length;++d)for(var g=i[d],w=g[g.length-1],y=g[0],p=0;p<g.length;++p){for(var _=s[w],x=s[w=y],b=s[y=g[(p+1)%g.length]],M=new Array(3),m=0,D=new Array(3),S=0,O=0;O<3;++O)M[O]=_[O]-x[O],m+=M[O]*M[O],D[O]=b[O]-x[O],S+=D[O]*D[O];if(m*S>u){var P=l[w],R=1/Math.sqrt(m*S);for(O=0;O<3;++O){var F=(O+1)%3,B=(O+2)%3;P[O]+=R*(D[F]*M[B]-D[B]*M[F])}}}for(d=0;d<o;++d){P=l[d];var J=0;for(O=0;O<3;++O)J+=P[O]*P[O];if(J>u)for(R=1/Math.sqrt(J),O=0;O<3;++O)P[O]*=R;else for(O=0;O<3;++O)P[O]=0}return l},c.faceNormals=function(i,s,a){for(var o=i.length,l=new Array(o),u=void 0===a?1e-6:a,d=0;d<o;++d){for(var g=i[d],h=new Array(3),w=0;w<3;++w)h[w]=s[g[w]];var y=new Array(3),p=new Array(3);for(w=0;w<3;++w)y[w]=h[1][w]-h[0][w],p[w]=h[2][w]-h[0][w];var _=new Array(3),x=0;for(w=0;w<3;++w){var b=(w+1)%3,M=(w+2)%3;_[w]=y[b]*p[M]-y[M]*p[b],x+=_[w]*_[w]}for(x=x>u?1/Math.sqrt(x):0,w=0;w<3;++w)_[w]*=x;l[d]=_}return l}},567:function(v){"use strict";v.exports=function(c,i,s,a,o,l,u,d,g,h){var w=i+l+h;if(y>0){var y=Math.sqrt(w+1);c[0]=.5*(u-g)/y,c[1]=.5*(d-a)/y,c[2]=.5*(s-l)/y,c[3]=.5*y}else{var p=Math.max(i,l,h);y=Math.sqrt(2*p-w+1),i>=p?(c[0]=.5*y,c[1]=.5*(o+s)/y,c[2]=.5*(d+a)/y,c[3]=.5*(u-g)/y):l>=p?(c[0]=.5*(s+o)/y,c[1]=.5*y,c[2]=.5*(g+u)/y,c[3]=.5*(d-a)/y):(c[0]=.5*(a+d)/y,c[1]=.5*(u+g)/y,c[2]=.5*y,c[3]=.5*(s-o)/y)}return c}},7774:function(v,c,i){"use strict";v.exports=function(p){var _=(p=p||{}).center||[0,0,0],x=p.rotation||[0,0,0,1],b=p.radius||1;_=[].slice.call(_,0,3),h(x=[].slice.call(x,0,4),x);var M=new w(x,_,Math.log(b));return M.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&M.lookAt(0,p.eye,p.center,p.up),M};var s=i(8444),a=i(3012),o=i(5950),l=i(7437),u=i(567);function d(p,_,x){return Math.sqrt(Math.pow(p,2)+Math.pow(_,2)+Math.pow(x,2))}function g(p,_,x,b){return Math.sqrt(Math.pow(p,2)+Math.pow(_,2)+Math.pow(x,2)+Math.pow(b,2))}function h(p,_){var x=_[0],b=_[1],M=_[2],m=_[3],D=g(x,b,M,m);D>1e-6?(p[0]=x/D,p[1]=b/D,p[2]=M/D,p[3]=m/D):(p[0]=p[1]=p[2]=0,p[3]=1)}function w(p,_,x){this.radius=s([x]),this.center=s(_),this.rotation=s(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var y=w.prototype;y.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},y.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var _=this.computedRotation;h(_,_);var x=this.computedMatrix;o(x,_);var b=this.computedCenter,M=this.computedEye,m=this.computedUp,D=Math.exp(this.computedRadius[0]);M[0]=b[0]+D*x[2],M[1]=b[1]+D*x[6],M[2]=b[2]+D*x[10],m[0]=x[1],m[1]=x[5],m[2]=x[9];for(var S=0;S<3;++S){for(var O=0,P=0;P<3;++P)O+=x[S+4*P]*M[P];x[12+S]=-O}},y.getMatrix=function(p,_){this.recalcMatrix(p);var x=this.computedMatrix;if(_){for(var b=0;b<16;++b)_[b]=x[b];return _}return x},y.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},y.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},y.pan=function(p,_,x,b){_=_||0,x=x||0,b=b||0,this.recalcMatrix(p);var M=this.computedMatrix,m=M[1],D=M[5],S=M[9],O=d(m,D,S),P=M[0],R=M[4],F=M[8],B=P*(m/=O)+R*(D/=O)+F*(S/=O),J=d(P-=m*B,R-=D*B,F-=S*B),z=M[2],$=M[6],G=M[10],H=z*m+$*D+G*S,X=z*(P/=J)+$*(R/=J)+G*(F/=J),K=d(z-=H*m+X*P,$-=H*D+X*R,G-=H*S+X*F);z/=K,$/=K,G/=K,this.center.move(p,P*_+m*x,R*_+D*x,F*_+S*x);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+b),this.radius.set(p,Math.log(Q))},y.rotate=function(p,_,x,b){this.recalcMatrix(p);var M=this.computedMatrix,F=M[2],B=M[6],J=M[10],z=(_=_||0)*M[0]+(x=x||0)*M[1],$=_*M[4]+x*M[5],G=_*M[8]+x*M[9],H=-(B*G-J*$),X=-(J*z-F*G),K=-(F*$-B*z),ue=Math.sqrt(Math.max(0,1-Math.pow(H,2)-Math.pow(X,2)-Math.pow(K,2))),ae=g(H,X,K,ue);ae>1e-6?(H/=ae,X/=ae,K/=ae,ue/=ae):(H=X=K=0,ue=1);var ne=this.computedRotation,Q=ne[0],ie=ne[1],le=ne[2],fe=ne[3],he=Q*ue+fe*H+ie*K-le*X,pe=ie*ue+fe*X+le*H-Q*K,xe=le*ue+fe*K+Q*X-ie*H,Ee=fe*ue-Q*H-ie*X-le*K;if(b){H=F,X=B,K=J;var Re=Math.sin(b)/d(H,X,K);H*=Re,X*=Re,K*=Re,Ee=Ee*(ue=Math.cos(_))-(he=he*ue+Ee*H+pe*K-xe*X)*H-(pe=pe*ue+Ee*X+xe*H-he*K)*X-(xe=xe*ue+Ee*K+he*X-pe*H)*K}var ke=g(he,pe,xe,Ee);ke>1e-6?(he/=ke,pe/=ke,xe/=ke,Ee/=ke):(he=pe=xe=0,Ee=1),this.rotation.set(p,he,pe,xe,Ee)},y.lookAt=function(p,_,x,b){this.recalcMatrix(p);var M=this.computedMatrix;a(M,_=_||this.computedEye,x=x||this.computedCenter,b=b||this.computedUp);var m=this.computedRotation;u(m,M[0],M[1],M[2],M[4],M[5],M[6],M[8],M[9],M[10]),h(m,m),this.rotation.set(p,m[0],m[1],m[2],m[3]);for(var D=0,S=0;S<3;++S)D+=Math.pow(x[S]-_[S],2);this.radius.set(p,.5*Math.log(Math.max(D,1e-6))),this.center.set(p,x[0],x[1],x[2])},y.translate=function(p,_,x,b){this.center.move(p,_||0,x||0,b||0)},y.setMatrix=function(p,_){var x=this.computedRotation;u(x,_[0],_[1],_[2],_[4],_[5],_[6],_[8],_[9],_[10]),h(x,x),this.rotation.set(p,x[0],x[1],x[2],x[3]);var b=this.computedMatrix;l(b,_);var M=b[15];if(Math.abs(M)>1e-6){var m=b[12]/M,D=b[13]/M,S=b[14]/M;this.recalcMatrix(p);var O=Math.exp(this.computedRadius[0]);this.center.set(p,m-b[2]*O,D-b[6]*O,S-b[10]*O),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},y.setDistance=function(p,_){_>0&&this.radius.set(p,Math.log(_))},y.setDistanceLimits=function(p,_){p=p>0?Math.log(p):-1/0,_=_>0?Math.log(_):1/0,_=Math.max(_,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=_},y.getDistanceLimits=function(p){var _=this.radius.bounds;return p?(p[0]=Math.exp(_[0][0]),p[1]=Math.exp(_[1][0]),p):[Math.exp(_[0][0]),Math.exp(_[1][0])]},y.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},y.fromJSON=function(p){var _=this.lastT(),x=p.center;x&&this.center.set(_,x[0],x[1],x[2]);var b=p.rotation;b&&this.rotation.set(_,b[0],b[1],b[2],b[3]);var M=p.distance;M&&M>0&&this.radius.set(_,Math.log(M)),this.setDistanceLimits(p.zoomMin,p.zoomMax)}},4930:function(v,c,i){"use strict";var s=i(6184);v.exports=function(a,o,l){return s(l=void 0!==l?l+"":" ",o)+a}},4405:function(v){v.exports=function(c,i){i||(i=[0,""]),c=String(c);var s=parseFloat(c,10);return i[0]=s,i[1]=c.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},4166:function(v,c,i){"use strict";v.exports=function(a,o){for(var l=0|o.length,u=a.length,d=[new Array(l),new Array(l)],g=0;g<l;++g)d[0][g]=[],d[1][g]=[];for(g=0;g<u;++g){var h=a[g];d[0][h[0]].push(h),d[1][h[1]].push(h)}var S,w=[];for(g=0;g<l;++g)d[0][g].length+d[1][g].length===0&&w.push([g]);function y(D,S){var O=d[S][D[S]];O.splice(O.indexOf(D),1)}function p(D,S,O){for(var P,R,F,B=0;B<2;++B)if(d[B][S].length>0){P=d[B][S][0],F=B;break}R=P[1^F];for(var J=0;J<2;++J)for(var z=d[J][S],$=0;$<z.length;++$){var G=z[$],H=G[1^J];s(o[D],o[S],o[R],o[H])>0&&(P=G,R=H,F=J)}return O||P&&y(P,F),R}function _(D,S){var O=d[S][D][0],P=[D];y(O,S);for(var R=O[1^S];;){for(;R!==D;)P.push(R),R=p(P[P.length-2],R,!1);if(d[0][D].length+d[1][D].length===0)break;var F=P[P.length-1],B=D,J=P[1],z=p(F,B,!0);if(s(o[F],o[B],o[J],o[z])<0)break;P.push(D),R=p(F,B)}return P}for(g=0;g<l;++g)for(var b=0;b<2;++b){for(var M=[];d[b][g].length>0;){var m=_(g,b);(S=m)[1]===S[S.length-1]?M.push.apply(M,m):(M.length>0&&w.push(M),M=m)}M.length>0&&w.push(M)}return w};var s=i(9398)},3959:function(v,c,i){"use strict";v.exports=function(a,o){for(var l=s(a,o.length),u=new Array(o.length),d=new Array(o.length),g=[],h=0;h<o.length;++h){var w=l[h].length;d[h]=w,u[h]=!0,w<=1&&g.push(h)}for(;g.length>0;){u[b=g.pop()]=!1;var y=l[b];for(h=0;h<y.length;++h){var p=y[h];0==--d[p]&&g.push(p)}}var _=new Array(o.length),x=[];for(h=0;h<o.length;++h)if(u[h]){var b=x.length;_[h]=b,x.push(o[h])}else _[h]=-1;var M=[];for(h=0;h<a.length;++h){var m=a[h];u[m[0]]&&u[m[1]]&&M.push([_[m[0]],_[m[1]]])}return[M,x]};var s=i(8348)},8040:function(v,c,i){"use strict";v.exports=function(w,y){for(var p=g(w,y),_=(y=p[1]).length,x=s(w=p[0],y.length),b=0;b<_;++b)if(x[b].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=a(w,y),m=(M=M.filter(function(je){for(var Ce=je.length,Ie=[0],ge=0;ge<Ce;++ge){var me=y[je[ge]],ce=y[je[(ge+1)%Ce]],Ae=l(-me[0],me[1]),Ne=l(-me[0],ce[1]),De=l(ce[0],me[1]),qe=l(ce[0],ce[1]);Ie=u(Ie,u(u(Ae,Ne),u(De,qe)))}return Ie[Ie.length-1]>0})).length,D=new Array(m),S=new Array(m);for(b=0;b<m;++b){D[b]=b;var O=new Array(m),P=M[b].map(function(je){return y[je]}),R=o([P]),F=0;e:for(var B=0;B<m;++B)if(O[B]=0,b!==B){for(var J=(Te=M[B]).length,z=0;z<J;++z){var $=R(y[Te[z]]);if(0!==$){$<0&&(O[B]=1,F+=1);continue e}}O[B]=1,F+=1}S[b]=[F,b,O]}for(S.sort(function(je,Ce){return Ce[0]-je[0]}),b=0;b<m;++b){var G=(O=S[b])[1],H=O[2];for(B=0;B<m;++B)H[B]&&(D[B]=G)}var X=function(je){for(var Ce=new Array(je),Ie=0;Ie<je;++Ie)Ce[Ie]=[];return Ce}(m);for(b=0;b<m;++b)X[b].push(D[b]),X[D[b]].push(b);var K={},ue=h(_,!1);for(b=0;b<m;++b)for(J=(Te=M[b]).length,B=0;B<J;++B){var ae=Te[B],ne=Te[(B+1)%J],Q=Math.min(ae,ne)+":"+Math.max(ae,ne);if(Q in K){var ie=K[Q];X[ie].push(b),X[b].push(ie),ue[ae]=ue[ne]=!0}else K[Q]=b}function le(je){for(var Ce=je.length,Ie=0;Ie<Ce;++Ie)if(!ue[je[Ie]])return!1;return!0}var fe=[],he=h(m,-1);for(b=0;b<m;++b)D[b]!==b||le(M[b])?he[b]=-1:(fe.push(b),he[b]=0);for(p=[];fe.length>0;){var pe=fe.pop(),xe=X[pe];d(xe,function(je,Ce){return je-Ce});var Ee,Re=xe.length,ke=he[pe];for(0===ke&&(Ee=[Te=M[pe]]),b=0;b<Re;++b){var Te,we=xe[b];he[we]>=0||(he[we]=1^ke,fe.push(we),0===ke&&(le(Te=M[we])||(Te.reverse(),Ee.push(Te))))}0===ke&&p.push(Ee)}return p};var s=i(8348),a=i(4166),o=i(211),l=i(9660),u=i(9662),d=i(1215),g=i(3959);function h(w,y){for(var p=new Array(w),_=0;_<w;++_)p[_]=y;return p}},211:function(v,c,i){v.exports=function(h){for(var w=h.length,y=[],p=[],_=0;_<w;++_)for(var x=h[_],b=x.length,M=b-1,m=0;m<b;M=m++){var D=x[M],S=x[m];D[0]===S[0]?p.push([D,S]):y.push([D,S])}if(0===y.length)return 0===p.length?g:(O=d(p),function(F){return O(F[0],F[1])?0:1});var O,F,B,P=a(y),R=(F=P.slabs,B=P.coordinates,function(J){var z=l.le(B,J[0]);if(z<0)return 1;var $=F[z];if(!$){if(!(z>0&&B[z]===J[0]))return 1;$=F[z-1]}for(var G=1;$;){var H=$.key,X=s(J,H[0],H[1]);if(H[0][0]<H[1][0])if(X<0)$=$.left;else{if(!(X>0))return 0;G=-1,$=$.right}else if(X>0)$=$.left;else{if(!(X<0))return 0;G=1,$=$.right}}return G});return 0===p.length?R:function(F,B){return function(J){return F(J[0],J[1])?0:B(J)}}(d(p),R)};var s=i(417)[3],a=i(4385),o=i(9014),l=i(5070);function u(){return!0}function d(h){for(var w={},y=0;y<h.length;++y){var p=h[y],_=p[0][0],x=p[0][1],b=p[1][1],M=[Math.min(x,b),Math.max(x,b)];_ in w?w[_].push(M):w[_]=[M]}var O,m={},D=Object.keys(w);for(y=0;y<D.length;++y)m[D[y]]=o(w[D[y]]);return O=m,function(P,R){var F=O[P];return!!F&&!!F.queryPoint(R,u)}}function g(h){return 1}},7309:function(v){"use strict";var c=new Float64Array(4),i=new Float64Array(4),s=new Float64Array(4);v.exports=function(a,o,l,u,d){c.length<u.length&&(c=new Float64Array(u.length),i=new Float64Array(u.length),s=new Float64Array(u.length));for(var g=0;g<u.length;++g)c[g]=a[g]-u[g],i[g]=o[g]-a[g],s[g]=l[g]-a[g];var h=0,w=0,y=0,p=0,_=0,x=0;for(g=0;g<u.length;++g){var b=i[g],M=s[g],m=c[g];h+=b*b,w+=b*M,y+=M*M,p+=m*b,_+=m*M,x+=m*m}var D,S,O,P,R,F=Math.abs(h*y-w*w),B=w*_-y*p,J=w*p-h*_;if(B+J<=F)if(B<0)J<0&&p<0?(J=0,-p>=h?(B=1,D=h+2*p+x):D=p*(B=-p/h)+x):(B=0,_>=0?(J=0,D=x):-_>=y?(J=1,D=y+2*_+x):D=_*(J=-_/y)+x);else if(J<0)J=0,p>=0?(B=0,D=x):-p>=h?(B=1,D=h+2*p+x):D=p*(B=-p/h)+x;else{var z=1/F;D=(B*=z)*(h*B+w*(J*=z)+2*p)+J*(w*B+y*J+2*_)+x}else B<0?(O=y+_)>(S=w+p)?(P=O-S)>=(R=h-2*w+y)?(B=1,J=0,D=h+2*p+x):D=(B=P/R)*(h*B+w*(J=1-B)+2*p)+J*(w*B+y*J+2*_)+x:(B=0,O<=0?(J=1,D=y+2*_+x):_>=0?(J=0,D=x):D=_*(J=-_/y)+x):J<0?(O=h+p)>(S=w+_)?(P=O-S)>=(R=h-2*w+y)?(J=1,B=0,D=y+2*_+x):D=(B=1-(J=P/R))*(h*B+w*J+2*p)+J*(w*B+y*J+2*_)+x:(J=0,O<=0?(B=1,D=h+2*p+x):p>=0?(B=0,D=x):D=p*(B=-p/h)+x):(P=y+_-w-p)<=0?(B=0,J=1,D=y+2*_+x):P>=(R=h-2*w+y)?(B=1,J=0,D=h+2*p+x):D=(B=P/R)*(h*B+w*(J=1-B)+2*p)+J*(w*B+y*J+2*_)+x;var $=1-B-J;for(g=0;g<u.length;++g)d[g]=$*a[g]+B*o[g]+J*l[g];return D<0?0:D}},1116:function(v,c,i){v.exports=i(6093)},7584:function(v,c,i){"use strict";var s=i(1539);v.exports=function(a,o){for(var l=a.length,u=new Array(l),d=0;d<l;++d)u[d]=s(a[d],o[d]);return u}},2826:function(v,c,i){"use strict";v.exports=function(a){for(var o=new Array(a.length),l=0;l<a.length;++l)o[l]=s(a[l]);return o};var s=i(5125)},4469:function(v,c,i){"use strict";var s=i(5125),a=i(3962);v.exports=function(o,l){for(var u=s(l),d=o.length,g=new Array(d),h=0;h<d;++h)g[h]=a(o[h],u);return g}},6695:function(v,c,i){"use strict";var s=i(4354);v.exports=function(a,o){for(var l=a.length,u=new Array(l),d=0;d<l;++d)u[d]=s(a[d],o[d]);return u}},7037:function(v,c,i){"use strict";var s=i(9209),a=i(1284),o=i(9887);v.exports=function(l){l.sort(a);for(var u=l.length,d=0,g=0;g<u;++g){var h=l[g],w=o(h);if(0!==w){if(d>0){var y=l[d-1];if(0===s(h,y)&&o(y)!==w){d-=1;continue}}l[d++]=h}}return l.length=d,l}},6184:function(v){"use strict";var c,i="";v.exports=function(s,a){if("string"!=typeof s)throw new TypeError("expected a string");if(1===a)return s;if(2===a)return s+s;var o=s.length*a;if(c!==s||void 0===c)c=s,i="";else if(i.length>=o)return i.substr(0,o);for(;o>i.length&&a>1;)1&a&&(i+=s),a>>=1,s+=s;return i=(i+=s).substr(0,o)}},8161:function(v,c,i){v.exports=i.g.performance&&i.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(v){"use strict";v.exports=function(c){for(var i=c.length,s=c[c.length-1],a=i,o=i-2;o>=0;--o){var l=s;(g=(d=c[o])-((s=l+d)-l))&&(c[--a]=s,s=g)}var u=0;for(o=a;o<i;++o){var d,g;(g=(d=s)-((s=(l=c[o])+d)-l))&&(c[u++]=g)}return c[u++]=s,c.length=u,c}},8167:function(v,c,i){"use strict";var s=i(9660),a=i(9662),o=i(8289),l=i(402);function u(_,x,b,M){return function(m){return M(_(b(m[0][0],m[1][1]),b(-m[0][1],m[1][0])))}}function d(_,x,b,M){return function(m){return M(_(x(_(b(m[1][1],m[2][2]),b(-m[1][2],m[2][1])),m[0][0]),_(x(_(b(m[1][0],m[2][2]),b(-m[1][2],m[2][0])),-m[0][1]),x(_(b(m[1][0],m[2][1]),b(-m[1][1],m[2][0])),m[0][2]))))}}function g(_,x,b,M){return function(m){return M(_(_(x(_(x(_(b(m[2][2],m[3][3]),b(-m[2][3],m[3][2])),m[1][1]),_(x(_(b(m[2][1],m[3][3]),b(-m[2][3],m[3][1])),-m[1][2]),x(_(b(m[2][1],m[3][2]),b(-m[2][2],m[3][1])),m[1][3]))),m[0][0]),x(_(x(_(b(m[2][2],m[3][3]),b(-m[2][3],m[3][2])),m[1][0]),_(x(_(b(m[2][0],m[3][3]),b(-m[2][3],m[3][0])),-m[1][2]),x(_(b(m[2][0],m[3][2]),b(-m[2][2],m[3][0])),m[1][3]))),-m[0][1])),_(x(_(x(_(b(m[2][1],m[3][3]),b(-m[2][3],m[3][1])),m[1][0]),_(x(_(b(m[2][0],m[3][3]),b(-m[2][3],m[3][0])),-m[1][1]),x(_(b(m[2][0],m[3][1]),b(-m[2][1],m[3][0])),m[1][3]))),m[0][2]),x(_(x(_(b(m[2][1],m[3][2]),b(-m[2][2],m[3][1])),m[1][0]),_(x(_(b(m[2][0],m[3][2]),b(-m[2][2],m[3][0])),-m[1][1]),x(_(b(m[2][0],m[3][1]),b(-m[2][1],m[3][0])),m[1][2]))),-m[0][3]))))}}function h(_,x,b,M){return function(m){return M(_(_(x(_(_(x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][2]),_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),-m[2][3]),x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][4]))),m[1][1]),x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][1]),_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),-m[2][3]),x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),m[2][4]))),-m[1][2])),_(x(_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),m[2][1]),_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),-m[2][2]),x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][4]))),m[1][3]),x(_(x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][1]),_(x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),-m[2][2]),x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][3]))),-m[1][4]))),m[0][0]),x(_(_(x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][2]),_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),-m[2][3]),x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][4]))),m[1][0]),x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][3]),x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),m[2][4]))),-m[1][2])),_(x(_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][2]),x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),m[2][4]))),m[1][3]),x(_(x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][0]),_(x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),-m[2][2]),x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),m[2][3]))),-m[1][4]))),-m[0][1])),_(x(_(_(x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][1]),_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),-m[2][3]),x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),m[2][4]))),m[1][0]),x(_(x(_(b(m[3][3],m[4][4]),b(-m[3][4],m[4][3])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][3]),x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),m[2][4]))),-m[1][1])),_(x(_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][4]))),m[1][3]),x(_(x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][3]))),-m[1][4]))),m[0][2]),_(x(_(_(x(_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),m[2][1]),_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),-m[2][2]),x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][4]))),m[1][0]),x(_(x(_(b(m[3][2],m[4][4]),b(-m[3][4],m[4][2])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][2]),x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),m[2][4]))),-m[1][1])),_(x(_(x(_(b(m[3][1],m[4][4]),b(-m[3][4],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][4]),b(-m[3][4],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][4]))),m[1][2]),x(_(x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][2]))),-m[1][4]))),-m[0][3]),x(_(_(x(_(x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][1]),_(x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),-m[2][2]),x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][3]))),m[1][0]),x(_(x(_(b(m[3][2],m[4][3]),b(-m[3][3],m[4][2])),m[2][0]),_(x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),-m[2][2]),x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),m[2][3]))),-m[1][1])),_(x(_(x(_(b(m[3][1],m[4][3]),b(-m[3][3],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][3]),b(-m[3][3],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][3]))),m[1][2]),x(_(x(_(b(m[3][1],m[4][2]),b(-m[3][2],m[4][1])),m[2][0]),_(x(_(b(m[3][0],m[4][2]),b(-m[3][2],m[4][0])),-m[2][1]),x(_(b(m[3][0],m[4][1]),b(-m[3][1],m[4][0])),m[2][2]))),-m[1][3]))),m[0][4])))))}}function w(_){return(2===_?u:3===_?d:4===_?g:5===_?h:void 0)(a,o,s,l)}var y=[function(){return[0]},function(_){return[_[0][0]]}];function p(_,x,b,M,m,D,S,O){return function(P){switch(P.length){case 0:return _(P);case 1:return x(P);case 2:return b(P);case 3:return M(P);case 4:return m(P);case 5:return D(P)}var R=S[P.length];return R||(R=S[P.length]=O(P.length)),R(P)}}!function(){for(;y.length<6;)y.push(w(y.length));v.exports=p.apply(void 0,y.concat([y,w]));for(var _=0;_<y.length;++_)v.exports[_]=y[_]}()},9130:function(v,c,i){"use strict";var s=i(9660),a=i(9662);v.exports=function(o,l){for(var u=s(o[0],l[0]),d=1;d<o.length;++d)u=a(u,s(o[d],l[d]));return u}},2227:function(v,c,i){"use strict";var s=i(9660),a=i(9662),o=i(4078),l=i(8289);function u(x){return(3===x?d:4===x?g:5===x?h:w)(a,o,s,l)}function d(x,b,M,m){return function(D,S,O){var P=M(D[0],D[0]),R=m(P,S[0]),F=m(P,O[0]),B=M(S[0],S[0]),J=m(B,D[0]),z=m(B,O[0]),$=M(O[0],O[0]),G=m($,D[0]),H=m($,S[0]),X=x(b(H,z),b(J,R)),K=b(G,F),ue=b(X,K);return ue[ue.length-1]}}function g(x,b,M,m){return function(D,S,O,P){var R=x(M(D[0],D[0]),M(D[1],D[1])),F=m(R,S[0]),B=m(R,O[0]),J=m(R,P[0]),z=x(M(S[0],S[0]),M(S[1],S[1])),$=m(z,D[0]),G=m(z,O[0]),H=m(z,P[0]),X=x(M(O[0],O[0]),M(O[1],O[1])),K=m(X,D[0]),ue=m(X,S[0]),ae=m(X,P[0]),ne=x(M(P[0],P[0]),M(P[1],P[1])),Q=m(ne,D[0]),ie=m(ne,S[0]),le=m(ne,O[0]),fe=x(x(m(b(le,ae),S[1]),x(m(b(ie,H),-O[1]),m(b(ue,G),P[1]))),x(m(b(ie,H),D[1]),x(m(b(Q,J),-S[1]),m(b($,F),P[1])))),he=x(x(m(b(le,ae),D[1]),x(m(b(Q,J),-O[1]),m(b(K,B),P[1]))),x(m(b(ue,G),D[1]),x(m(b(K,B),-S[1]),m(b($,F),O[1])))),pe=b(fe,he);return pe[pe.length-1]}}function h(x,b,M,m){return function(D,S,O,P,R){var F=x(M(D[0],D[0]),x(M(D[1],D[1]),M(D[2],D[2]))),B=m(F,S[0]),J=m(F,O[0]),z=m(F,P[0]),$=m(F,R[0]),G=x(M(S[0],S[0]),x(M(S[1],S[1]),M(S[2],S[2]))),H=m(G,D[0]),X=m(G,O[0]),K=m(G,P[0]),ue=m(G,R[0]),ae=x(M(O[0],O[0]),x(M(O[1],O[1]),M(O[2],O[2]))),ne=m(ae,D[0]),Q=m(ae,S[0]),ie=m(ae,P[0]),le=m(ae,R[0]),fe=x(M(P[0],P[0]),x(M(P[1],P[1]),M(P[2],P[2]))),he=m(fe,D[0]),pe=m(fe,S[0]),xe=m(fe,O[0]),Ee=m(fe,R[0]),Re=x(M(R[0],R[0]),x(M(R[1],R[1]),M(R[2],R[2]))),ke=m(Re,D[0]),Te=m(Re,S[0]),we=m(Re,O[0]),je=m(Re,P[0]),Ce=x(x(x(m(x(m(b(je,Ee),O[1]),x(m(b(we,le),-P[1]),m(b(xe,ie),R[1]))),S[2]),x(m(x(m(b(je,Ee),S[1]),x(m(b(Te,ue),-P[1]),m(b(pe,K),R[1]))),-O[2]),m(x(m(b(we,le),S[1]),x(m(b(Te,ue),-O[1]),m(b(Q,X),R[1]))),P[2]))),x(m(x(m(b(xe,ie),S[1]),x(m(b(pe,K),-O[1]),m(b(Q,X),P[1]))),-R[2]),x(m(x(m(b(je,Ee),S[1]),x(m(b(Te,ue),-P[1]),m(b(pe,K),R[1]))),D[2]),m(x(m(b(je,Ee),D[1]),x(m(b(ke,$),-P[1]),m(b(he,z),R[1]))),-S[2])))),x(x(m(x(m(b(Te,ue),D[1]),x(m(b(ke,$),-S[1]),m(b(H,B),R[1]))),P[2]),x(m(x(m(b(pe,K),D[1]),x(m(b(he,z),-S[1]),m(b(H,B),P[1]))),-R[2]),m(x(m(b(xe,ie),S[1]),x(m(b(pe,K),-O[1]),m(b(Q,X),P[1]))),D[2]))),x(m(x(m(b(xe,ie),D[1]),x(m(b(he,z),-O[1]),m(b(ne,J),P[1]))),-S[2]),x(m(x(m(b(pe,K),D[1]),x(m(b(he,z),-S[1]),m(b(H,B),P[1]))),O[2]),m(x(m(b(Q,X),D[1]),x(m(b(ne,J),-S[1]),m(b(H,B),O[1]))),-P[2]))))),Ie=x(x(x(m(x(m(b(je,Ee),O[1]),x(m(b(we,le),-P[1]),m(b(xe,ie),R[1]))),D[2]),m(x(m(b(je,Ee),D[1]),x(m(b(ke,$),-P[1]),m(b(he,z),R[1]))),-O[2])),x(m(x(m(b(we,le),D[1]),x(m(b(ke,$),-O[1]),m(b(ne,J),R[1]))),P[2]),m(x(m(b(xe,ie),D[1]),x(m(b(he,z),-O[1]),m(b(ne,J),P[1]))),-R[2]))),x(x(m(x(m(b(we,le),S[1]),x(m(b(Te,ue),-O[1]),m(b(Q,X),R[1]))),D[2]),m(x(m(b(we,le),D[1]),x(m(b(ke,$),-O[1]),m(b(ne,J),R[1]))),-S[2])),x(m(x(m(b(Te,ue),D[1]),x(m(b(ke,$),-S[1]),m(b(H,B),R[1]))),O[2]),m(x(m(b(Q,X),D[1]),x(m(b(ne,J),-S[1]),m(b(H,B),O[1]))),-R[2])))),ge=b(Ce,Ie);return ge[ge.length-1]}}function w(x,b,M,m){return function(D,S,O,P,R,F){var B=x(x(M(D[0],D[0]),M(D[1],D[1])),x(M(D[2],D[2]),M(D[3],D[3]))),J=m(B,S[0]),z=m(B,O[0]),$=m(B,P[0]),G=m(B,R[0]),H=m(B,F[0]),X=x(x(M(S[0],S[0]),M(S[1],S[1])),x(M(S[2],S[2]),M(S[3],S[3]))),K=m(X,D[0]),ue=m(X,O[0]),ae=m(X,P[0]),ne=m(X,R[0]),Q=m(X,F[0]),ie=x(x(M(O[0],O[0]),M(O[1],O[1])),x(M(O[2],O[2]),M(O[3],O[3]))),le=m(ie,D[0]),fe=m(ie,S[0]),he=m(ie,P[0]),pe=m(ie,R[0]),xe=m(ie,F[0]),Ee=x(x(M(P[0],P[0]),M(P[1],P[1])),x(M(P[2],P[2]),M(P[3],P[3]))),Re=m(Ee,D[0]),ke=m(Ee,S[0]),Te=m(Ee,O[0]),we=m(Ee,R[0]),je=m(Ee,F[0]),Ce=x(x(M(R[0],R[0]),M(R[1],R[1])),x(M(R[2],R[2]),M(R[3],R[3]))),Ie=m(Ce,D[0]),ge=m(Ce,S[0]),me=m(Ce,O[0]),ce=m(Ce,P[0]),Ae=m(Ce,F[0]),Ne=x(x(M(F[0],F[0]),M(F[1],F[1])),x(M(F[2],F[2]),M(F[3],F[3]))),De=m(Ne,D[0]),qe=m(Ne,S[0]),Ke=m(Ne,O[0]),be=m(Ne,P[0]),Oe=m(Ne,R[0]),Le=x(x(x(m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),O[2]),m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),-P[2])),x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),R[2]),m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),-F[2]))),S[3]),x(m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),S[2]),m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),-P[2])),x(m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),R[2]),m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),-F[2]))),-O[3]),m(x(x(m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),S[2]),m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),R[2]),m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),-F[2]))),P[3]))),x(x(m(x(x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),S[2]),m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),P[2]),m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),-F[2]))),-R[3]),m(x(x(m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),S[2]),m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),-O[2])),x(m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),P[2]),m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),-R[2]))),F[3])),x(m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),S[2]),m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),-P[2])),x(m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),R[2]),m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),-F[2]))),D[3]),m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-P[2])),x(m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),R[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-F[2]))),-S[3])))),x(x(x(m(x(x(m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),R[2]),m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),-F[2]))),P[3]),m(x(x(m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),D[2]),m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),P[2]),m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),-F[2]))),-R[3])),x(m(x(x(m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),D[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-S[2])),x(m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),P[2]),m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),-R[2]))),F[3]),m(x(x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),S[2]),m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),P[2]),m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),-F[2]))),D[3]))),x(x(m(x(x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),D[2]),m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),P[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-F[2]))),-S[3]),m(x(x(m(x(m(b(be,je),S[1]),x(m(b(qe,Q),-P[1]),m(b(ke,ae),F[1]))),D[2]),m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),P[2]),m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),-F[2]))),O[3])),x(m(x(x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),D[2]),m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-F[2]))),-P[3]),m(x(x(m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),D[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-S[2])),x(m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-P[2]))),F[3]))))),Ue=x(x(x(m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),O[2]),m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),-P[2])),x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),R[2]),m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),-F[2]))),D[3]),x(m(x(x(m(x(m(b(Oe,Ae),P[1]),x(m(b(be,je),-R[1]),m(b(ce,we),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-P[2])),x(m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),R[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-F[2]))),-O[3]),m(x(x(m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),R[2]),m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),-F[2]))),P[3]))),x(x(m(x(x(m(x(m(b(be,je),O[1]),x(m(b(Ke,xe),-P[1]),m(b(Te,he),F[1]))),D[2]),m(x(m(b(be,je),D[1]),x(m(b(De,H),-P[1]),m(b(Re,$),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),P[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-F[2]))),-R[3]),m(x(x(m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),D[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-O[2])),x(m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),P[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-R[2]))),F[3])),x(m(x(x(m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),S[2]),m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),R[2]),m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),-F[2]))),D[3]),m(x(x(m(x(m(b(Oe,Ae),O[1]),x(m(b(Ke,xe),-R[1]),m(b(me,pe),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-O[2])),x(m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),R[2]),m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),-F[2]))),-S[3])))),x(x(x(m(x(x(m(x(m(b(Oe,Ae),S[1]),x(m(b(qe,Q),-R[1]),m(b(ge,ne),F[1]))),D[2]),m(x(m(b(Oe,Ae),D[1]),x(m(b(De,H),-R[1]),m(b(Ie,G),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),R[2]),m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),-F[2]))),O[3]),m(x(x(m(x(m(b(Ke,xe),S[1]),x(m(b(qe,Q),-O[1]),m(b(fe,ue),F[1]))),D[2]),m(x(m(b(Ke,xe),D[1]),x(m(b(De,H),-O[1]),m(b(le,z),F[1]))),-S[2])),x(m(x(m(b(qe,Q),D[1]),x(m(b(De,H),-S[1]),m(b(K,J),F[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-F[2]))),-R[3])),x(m(x(x(m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),D[2]),m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),-S[2])),x(m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-R[2]))),F[3]),m(x(x(m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),S[2]),m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),-O[2])),x(m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),P[2]),m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),-R[2]))),D[3]))),x(x(m(x(x(m(x(m(b(ce,we),O[1]),x(m(b(me,pe),-P[1]),m(b(Te,he),R[1]))),D[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-O[2])),x(m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),P[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-R[2]))),-S[3]),m(x(x(m(x(m(b(ce,we),S[1]),x(m(b(ge,ne),-P[1]),m(b(ke,ae),R[1]))),D[2]),m(x(m(b(ce,we),D[1]),x(m(b(Ie,G),-P[1]),m(b(Re,$),R[1]))),-S[2])),x(m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),P[2]),m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),-R[2]))),O[3])),x(m(x(x(m(x(m(b(me,pe),S[1]),x(m(b(ge,ne),-O[1]),m(b(fe,ue),R[1]))),D[2]),m(x(m(b(me,pe),D[1]),x(m(b(Ie,G),-O[1]),m(b(le,z),R[1]))),-S[2])),x(m(x(m(b(ge,ne),D[1]),x(m(b(Ie,G),-S[1]),m(b(K,J),R[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-R[2]))),-P[3]),m(x(x(m(x(m(b(Te,he),S[1]),x(m(b(ke,ae),-O[1]),m(b(fe,ue),P[1]))),D[2]),m(x(m(b(Te,he),D[1]),x(m(b(Re,$),-O[1]),m(b(le,z),P[1]))),-S[2])),x(m(x(m(b(ke,ae),D[1]),x(m(b(Re,$),-S[1]),m(b(K,J),P[1]))),O[2]),m(x(m(b(fe,ue),D[1]),x(m(b(le,z),-S[1]),m(b(K,J),O[1]))),-P[2]))),R[3]))))),Ze=b(Le,Ue);return Ze[Ze.length-1]}}var y=[function(){return 0},function(){return 0},function(){return 0}];function p(x){var b=y[x.length];return b||(b=y[x.length]=u(x.length)),b.apply(void 0,x)}function _(x,b,M,m,D,S,O,P){return function(R,F,B,J,z,$){switch(arguments.length){case 0:case 1:return 0;case 2:return m(R,F);case 3:return D(R,F,B);case 4:return S(R,F,B,J);case 5:return O(R,F,B,J,z);case 6:return P(R,F,B,J,z,$)}for(var G=new Array(arguments.length),H=0;H<arguments.length;++H)G[H]=arguments[H];return x(G)}}!function(){for(;y.length<=6;)y.push(u(y.length));v.exports=_.apply(void 0,[p].concat(y));for(var x=0;x<=6;++x)v.exports[x]=y[x]}()},6606:function(v,c,i){"use strict";var s=i(8167);function a(y){return(2===y?o:3===y?l:4===y?u:5===y?d:g)(y<6?s[y]:s)}function o(y){return function(p,_){return[y([[+_[0],+p[0][1]],[+_[1],+p[1][1]]]),y([[+p[0][0],+_[0]],[+p[1][0],+_[1]]]),y(p)]}}function l(y){return function(p,_){return[y([[+_[0],+p[0][1],+p[0][2]],[+_[1],+p[1][1],+p[1][2]],[+_[2],+p[2][1],+p[2][2]]]),y([[+p[0][0],+_[0],+p[0][2]],[+p[1][0],+_[1],+p[1][2]],[+p[2][0],+_[2],+p[2][2]]]),y([[+p[0][0],+p[0][1],+_[0]],[+p[1][0],+p[1][1],+_[1]],[+p[2][0],+p[2][1],+_[2]]]),y(p)]}}function u(y){return function(p,_){return[y([[+_[0],+p[0][1],+p[0][2],+p[0][3]],[+_[1],+p[1][1],+p[1][2],+p[1][3]],[+_[2],+p[2][1],+p[2][2],+p[2][3]],[+_[3],+p[3][1],+p[3][2],+p[3][3]]]),y([[+p[0][0],+_[0],+p[0][2],+p[0][3]],[+p[1][0],+_[1],+p[1][2],+p[1][3]],[+p[2][0],+_[2],+p[2][2],+p[2][3]],[+p[3][0],+_[3],+p[3][2],+p[3][3]]]),y([[+p[0][0],+p[0][1],+_[0],+p[0][3]],[+p[1][0],+p[1][1],+_[1],+p[1][3]],[+p[2][0],+p[2][1],+_[2],+p[2][3]],[+p[3][0],+p[3][1],+_[3],+p[3][3]]]),y([[+p[0][0],+p[0][1],+p[0][2],+_[0]],[+p[1][0],+p[1][1],+p[1][2],+_[1]],[+p[2][0],+p[2][1],+p[2][2],+_[2]],[+p[3][0],+p[3][1],+p[3][2],+_[3]]]),y(p)]}}function d(y){return function(p,_){return[y([[+_[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4]],[+_[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4]],[+_[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4]],[+_[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4]],[+_[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4]]]),y([[+p[0][0],+_[0],+p[0][2],+p[0][3],+p[0][4]],[+p[1][0],+_[1],+p[1][2],+p[1][3],+p[1][4]],[+p[2][0],+_[2],+p[2][2],+p[2][3],+p[2][4]],[+p[3][0],+_[3],+p[3][2],+p[3][3],+p[3][4]],[+p[4][0],+_[4],+p[4][2],+p[4][3],+p[4][4]]]),y([[+p[0][0],+p[0][1],+_[0],+p[0][3],+p[0][4]],[+p[1][0],+p[1][1],+_[1],+p[1][3],+p[1][4]],[+p[2][0],+p[2][1],+_[2],+p[2][3],+p[2][4]],[+p[3][0],+p[3][1],+_[3],+p[3][3],+p[3][4]],[+p[4][0],+p[4][1],+_[4],+p[4][3],+p[4][4]]]),y([[+p[0][0],+p[0][1],+p[0][2],+_[0],+p[0][4]],[+p[1][0],+p[1][1],+p[1][2],+_[1],+p[1][4]],[+p[2][0],+p[2][1],+p[2][2],+_[2],+p[2][4]],[+p[3][0],+p[3][1],+p[3][2],+_[3],+p[3][4]],[+p[4][0],+p[4][1],+p[4][2],+_[4],+p[4][4]]]),y([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+_[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+_[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+_[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+_[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+_[4]]]),y(p)]}}function g(y){return function(p,_){return[y([[+_[0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+_[1],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+_[2],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+_[3],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+_[4],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+_[5],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),y([[+p[0][0],+_[0],+p[0][2],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+_[1],+p[1][2],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+_[2],+p[2][2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+_[3],+p[3][2],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+_[4],+p[4][2],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+_[5],+p[5][2],+p[5][3],+p[5][4],+p[5][5]]]),y([[+p[0][0],+p[0][1],+_[0],+p[0][3],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+_[1],+p[1][3],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+_[2],+p[2][3],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+_[3],+p[3][3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+_[4],+p[4][3],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+_[5],+p[5][3],+p[5][4],+p[5][5]]]),y([[+p[0][0],+p[0][1],+p[0][2],+_[0],+p[0][4],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+_[1],+p[1][4],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+_[2],+p[2][4],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+_[3],+p[3][4],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+_[4],+p[4][4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+_[5],+p[5][4],+p[5][5]]]),y([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+_[0],+p[0][5]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+_[1],+p[1][5]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+_[2],+p[2][5]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+_[3],+p[3][5]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+_[4],+p[4][5]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+_[5],+p[5][5]]]),y([[+p[0][0],+p[0][1],+p[0][2],+p[0][3],+p[0][4],+_[0]],[+p[1][0],+p[1][1],+p[1][2],+p[1][3],+p[1][4],+_[1]],[+p[2][0],+p[2][1],+p[2][2],+p[2][3],+p[2][4],+_[2]],[+p[3][0],+p[3][1],+p[3][2],+p[3][3],+p[3][4],+_[3]],[+p[4][0],+p[4][1],+p[4][2],+p[4][3],+p[4][4],+_[4]],[+p[5][0],+p[5][1],+p[5][2],+p[5][3],+p[5][4],+_[5]]]),y(p)]}}var h=[function(){return[[0]]},function(y,p){return[[p[0]],[y[0][0]]]}];function w(y,p,_,x,b,M,m,D){return function(S,O){switch(S.length){case 0:return y(S,O);case 1:return p(S,O);case 2:return _(S,O);case 3:return x(S,O);case 4:return b(S,O);case 5:return M(S,O)}var P=m[S.length];return P||(P=m[S.length]=D(S.length)),P(S,O)}}!function(){for(;h.length<6;)h.push(a(h.length));v.exports=w.apply(void 0,h.concat([h,a]));for(var y=0;y<6;++y)v.exports[y]=h[y]}()},417:function(v,c,i){"use strict";var s=i(9660),a=i(9662),o=i(8289),l=i(4078);function u(b,M,m,D){return function(S,O,P){var R=b(b(M(O[1],P[0]),M(-P[1],O[0])),b(M(S[1],O[0]),M(-O[1],S[0]))),F=b(M(S[1],P[0]),M(-P[1],S[0])),B=D(R,F);return B[B.length-1]}}function d(b,M,m,D){return function(S,O,P,R){var F=b(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),O[2]),b(m(b(M(O[1],R[0]),M(-R[1],O[0])),-P[2]),m(b(M(O[1],P[0]),M(-P[1],O[0])),R[2]))),b(m(b(M(O[1],R[0]),M(-R[1],O[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),R[2])))),B=b(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-P[2]),m(b(M(S[1],P[0]),M(-P[1],S[0])),R[2]))),b(m(b(M(O[1],P[0]),M(-P[1],O[0])),S[2]),b(m(b(M(S[1],P[0]),M(-P[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),P[2])))),J=D(F,B);return J[J.length-1]}}function g(b,M,m,D){return function(S,O,P,R,F){var B=b(b(b(m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),P[2]),b(m(b(M(P[1],F[0]),M(-F[1],P[0])),-R[2]),m(b(M(P[1],R[0]),M(-R[1],P[0])),F[2]))),O[3]),b(m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),O[2]),b(m(b(M(O[1],F[0]),M(-F[1],O[0])),-R[2]),m(b(M(O[1],R[0]),M(-R[1],O[0])),F[2]))),-P[3]),m(b(m(b(M(P[1],F[0]),M(-F[1],P[0])),O[2]),b(m(b(M(O[1],F[0]),M(-F[1],O[0])),-P[2]),m(b(M(O[1],P[0]),M(-P[1],O[0])),F[2]))),R[3]))),b(m(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),O[2]),b(m(b(M(O[1],R[0]),M(-R[1],O[0])),-P[2]),m(b(M(O[1],P[0]),M(-P[1],O[0])),R[2]))),-F[3]),b(m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),O[2]),b(m(b(M(O[1],F[0]),M(-F[1],O[0])),-R[2]),m(b(M(O[1],R[0]),M(-R[1],O[0])),F[2]))),S[3]),m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-R[2]),m(b(M(S[1],R[0]),M(-R[1],S[0])),F[2]))),-O[3])))),b(b(m(b(m(b(M(O[1],F[0]),M(-F[1],O[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),F[2]))),R[3]),b(m(b(m(b(M(O[1],R[0]),M(-R[1],O[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),R[2]))),-F[3]),m(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),O[2]),b(m(b(M(O[1],R[0]),M(-R[1],O[0])),-P[2]),m(b(M(O[1],P[0]),M(-P[1],O[0])),R[2]))),S[3]))),b(m(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-P[2]),m(b(M(S[1],P[0]),M(-P[1],S[0])),R[2]))),-O[3]),b(m(b(m(b(M(O[1],R[0]),M(-R[1],O[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),R[2]))),P[3]),m(b(m(b(M(O[1],P[0]),M(-P[1],O[0])),S[2]),b(m(b(M(S[1],P[0]),M(-P[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),P[2]))),-R[3]))))),J=b(b(b(m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),P[2]),b(m(b(M(P[1],F[0]),M(-F[1],P[0])),-R[2]),m(b(M(P[1],R[0]),M(-R[1],P[0])),F[2]))),S[3]),m(b(m(b(M(R[1],F[0]),M(-F[1],R[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-R[2]),m(b(M(S[1],R[0]),M(-R[1],S[0])),F[2]))),-P[3])),b(m(b(m(b(M(P[1],F[0]),M(-F[1],P[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-P[2]),m(b(M(S[1],P[0]),M(-P[1],S[0])),F[2]))),R[3]),m(b(m(b(M(P[1],R[0]),M(-R[1],P[0])),S[2]),b(m(b(M(S[1],R[0]),M(-R[1],S[0])),-P[2]),m(b(M(S[1],P[0]),M(-P[1],S[0])),R[2]))),-F[3]))),b(b(m(b(m(b(M(P[1],F[0]),M(-F[1],P[0])),O[2]),b(m(b(M(O[1],F[0]),M(-F[1],O[0])),-P[2]),m(b(M(O[1],P[0]),M(-P[1],O[0])),F[2]))),S[3]),m(b(m(b(M(P[1],F[0]),M(-F[1],P[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-P[2]),m(b(M(S[1],P[0]),M(-P[1],S[0])),F[2]))),-O[3])),b(m(b(m(b(M(O[1],F[0]),M(-F[1],O[0])),S[2]),b(m(b(M(S[1],F[0]),M(-F[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),F[2]))),P[3]),m(b(m(b(M(O[1],P[0]),M(-P[1],O[0])),S[2]),b(m(b(M(S[1],P[0]),M(-P[1],S[0])),-O[2]),m(b(M(S[1],O[0]),M(-O[1],S[0])),P[2]))),-F[3])))),z=D(B,J);return z[z.length-1]}}function h(b){return(3===b?u:4===b?d:g)(a,s,o,l)}var w=h(3),y=h(4),p=[function(){return 0},function(){return 0},function(b,M){return M[0]-b[0]},function(b,M,m){var D,S=(b[1]-m[1])*(M[0]-m[0]),O=(b[0]-m[0])*(M[1]-m[1]),P=S-O;if(S>0){if(O<=0)return P;D=S+O}else{if(!(S<0)||O>=0)return P;D=-(S+O)}var R=33306690738754716e-32*D;return P>=R||P<=-R?P:w(b,M,m)},function(b,M,m,D){var S=b[0]-D[0],O=M[0]-D[0],P=m[0]-D[0],R=b[1]-D[1],F=M[1]-D[1],B=m[1]-D[1],J=b[2]-D[2],z=M[2]-D[2],$=m[2]-D[2],G=O*B,H=P*F,X=P*R,K=S*B,ue=S*F,ae=O*R,ne=J*(G-H)+z*(X-K)+$*(ue-ae),Q=7771561172376103e-31*((Math.abs(G)+Math.abs(H))*Math.abs(J)+(Math.abs(X)+Math.abs(K))*Math.abs(z)+(Math.abs(ue)+Math.abs(ae))*Math.abs($));return ne>Q||-ne>Q?ne:y(b,M,m,D)}];function _(b){var M=p[b.length];return M||(M=p[b.length]=h(b.length)),M.apply(void 0,b)}function x(b,M,m,D,S,O,P){return function(R,F,B,J,z){switch(arguments.length){case 0:case 1:return 0;case 2:return D(R,F);case 3:return S(R,F,B);case 4:return O(R,F,B,J);case 5:return P(R,F,B,J,z)}for(var $=new Array(arguments.length),G=0;G<arguments.length;++G)$[G]=arguments[G];return b($)}}!function(){for(;p.length<=5;)p.push(h(p.length));v.exports=x.apply(void 0,[_].concat(p));for(var b=0;b<=5;++b)v.exports[b]=p[b]}()},2019:function(v,c,i){"use strict";var s=i(9662),a=i(8289);v.exports=function(o,l){if(1===o.length)return a(l,o[0]);if(1===l.length)return a(o,l[0]);if(0===o.length||0===l.length)return[0];var u=[0];if(o.length<l.length)for(var d=0;d<o.length;++d)u=s(u,a(l,o[d]));else for(d=0;d<l.length;++d)u=s(u,a(o,l[d]));return u}},8289:function(v,c,i){"use strict";var s=i(9660),a=i(87);v.exports=function(o,l){var u=o.length;if(1===u){var d=s(o[0],l);return d[0]?d:[d[1]]}var g=new Array(2*u),h=[.1,.1],w=[.1,.1],y=0;s(o[0],l,h),h[0]&&(g[y++]=h[0]);for(var p=1;p<u;++p){s(o[p],l,w),a(h[1],w[0],h),h[0]&&(g[y++]=h[0]);var x=w[1],b=h[1],M=x+b,m=b-(M-x);h[1]=M,m&&(g[y++]=m)}return h[1]&&(g[y++]=h[1]),0===y&&(g[y++]=0),g.length=y,g}},4434:function(v,c,i){"use strict";v.exports=function(a,o,l,u){var d=s(a,l,u),g=s(o,l,u);if(d>0&&g>0||d<0&&g<0)return!1;var h=s(l,a,o),w=s(u,a,o);return!(h>0&&w>0||h<0&&w<0)&&(0!==d||0!==g||0!==h||0!==w||function(y,p,_,x){for(var b=0;b<2;++b){var M=y[b],m=p[b],D=Math.min(M,m),S=Math.max(M,m),O=_[b],P=x[b],R=Math.min(O,P);if(Math.max(O,P)<D||S<R)return!1}return!0}(a,o,l,u))};var s=i(417)[3]},4078:function(v){"use strict";v.exports=function(c,i){var R,F,B,J,z,s=0|c.length,a=0|i.length;if(1===s&&1===a)return(z=(R=c[0])-((B=R+(F=-i[0]))-(J=B-R))+(F-J))?[z,B]:[B];var o,l,u=new Array(s+a),d=0,g=0,h=0,w=Math.abs,y=c[g],p=w(y),_=-i[h],x=w(_);p<x?(l=y,(g+=1)<s&&(p=w(y=c[g]))):(l=_,(h+=1)<a&&(x=w(_=-i[h]))),g<s&&p<x||h>=a?(o=y,(g+=1)<s&&(p=w(y=c[g]))):(o=_,(h+=1)<a&&(x=w(_=-i[h])));for(var b,M,m=o+l,D=m-o,S=l-D,O=S,P=m;g<s&&h<a;)p<x?(o=y,(g+=1)<s&&(p=w(y=c[g]))):(o=_,(h+=1)<a&&(x=w(_=-i[h]))),(S=(l=O)-(D=(m=o+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b;for(;g<s;)(S=(l=O)-(D=(m=(o=y)+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b,(g+=1)<s&&(y=c[g]);for(;h<a;)(S=(l=O)-(D=(m=(o=_)+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b,(h+=1)<a&&(_=-i[h]);return O&&(u[d++]=O),P&&(u[d++]=P),d||(u[d++]=0),u.length=d,u}},9662:function(v){"use strict";v.exports=function(c,i){var R,F,B,J,z,s=0|c.length,a=0|i.length;if(1===s&&1===a)return(z=(R=c[0])-((B=R+(F=i[0]))-(J=B-R))+(F-J))?[z,B]:[B];var o,l,u=new Array(s+a),d=0,g=0,h=0,w=Math.abs,y=c[g],p=w(y),_=i[h],x=w(_);p<x?(l=y,(g+=1)<s&&(p=w(y=c[g]))):(l=_,(h+=1)<a&&(x=w(_=i[h]))),g<s&&p<x||h>=a?(o=y,(g+=1)<s&&(p=w(y=c[g]))):(o=_,(h+=1)<a&&(x=w(_=i[h])));for(var b,M,m=o+l,D=m-o,S=l-D,O=S,P=m;g<s&&h<a;)p<x?(o=y,(g+=1)<s&&(p=w(y=c[g]))):(o=_,(h+=1)<a&&(x=w(_=i[h]))),(S=(l=O)-(D=(m=o+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b;for(;g<s;)(S=(l=O)-(D=(m=(o=y)+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b,(g+=1)<s&&(y=c[g]);for(;h<a;)(S=(l=O)-(D=(m=(o=_)+l)-o))&&(u[d++]=S),O=P-((b=P+m)-(M=b-P))+(m-M),P=b,(h+=1)<a&&(_=i[h]);return O&&(u[d++]=O),P&&(u[d++]=P),d||(u[d++]=0),u.length=d,u}},8691:function(v,c,i){"use strict";v.exports=function(o){return a(s(o))};var s=i(2692),a=i(7037)},7212:function(v,c,i){"use strict";v.exports=function(u,d,g,h){if(g=g||0,void 0===h&&(h=function(m){for(var D=m.length,S=0,O=0;O<D;++O)S=0|Math.max(S,m[O].length);return S-1}(u)),0===u.length||h<1)return{cells:[],vertexIds:[],vertexWeights:[]};var w=function(m,D){for(var S=m.length,O=a.mallocUint8(S),P=0;P<S;++P)O[P]=m[P]<D|0;return O}(d,+g),y=function(m,D){for(var S=m.length,P=a.mallocUint32(2*(D*(D+1)/2*S|0)),R=0,F=0;F<S;++F)for(var B=m[F],J=(D=B.length,0);J<D;++J)for(var z=0;z<J;++z){var $=B[z],G=B[J];P[R++]=0|Math.min($,G),P[R++]=0|Math.max($,G)}o(s(P,[R/2|0,2]));var H=2;for(F=2;F<R;F+=2)P[F-2]===P[F]&&P[F-1]===P[F+1]||(P[H++]=P[F],P[H++]=P[F+1]);return s(P,[H/2|0,2])}(u,h),p=function(m,D,S,O){for(var P=m.data,R=m.shape[0],F=a.mallocDouble(R),B=0,J=0;J<R;++J){var z=P[2*J],$=P[2*J+1];if(S[z]!==S[$]){var G=D[z],H=D[$];P[2*B]=z,P[2*B+1]=$,F[B++]=(H-O)/(H-G)}}return m.shape[0]=B,s(F,[B])}(y,d,w,+g),_=function(m,D){var S=a.mallocInt32(2*D),O=m.shape[0],P=m.data;S[0]=0;for(var R=0,F=0;F<O;++F){var B=P[2*F];if(B!==R){for(S[2*R+1]=F;++R<B;)S[2*R]=F,S[2*R+1]=F;S[2*R]=F}}for(S[2*R+1]=O;++R<D;)S[2*R]=S[2*R+1]=O;return S}(y,0|d.length),x=l(h)(u,y.data,_,w),b=function(m){for(var D=0|m.shape[0],S=m.data,O=new Array(D),P=0;P<D;++P)O[P]=[S[2*P],S[2*P+1]];return O}(y),M=[].slice.call(p.data,0,p.shape[0]);return a.free(w),a.free(y.data),a.free(p.data),a.free(_),{cells:x,vertexIds:b,vertexWeights:M}};var s=i(5050),a=i(5306),o=i(8729),l=i(1168)},1168:function(v){"use strict";v.exports=function(i){return c[i]()};var c=[function(){return function(i,s,a,o){for(var l=i.length,u=0;u<l;++u);return[]}},function(){function i(s,a,o,l){for(var u=0|Math.min(o,l),d=0|Math.max(o,l),g=s[2*u],h=s[2*u+1];g<h;){var w=g+h>>1,y=a[2*w+1];if(y===d)return w;d<y?h=w:g=w+1}return g}return function(s,a,o,l){for(var u=s.length,d=[],g=0;g<u;++g){var h=s[g];if(2===h.length){var w=(l[h[0]]<<0)+(l[h[1]]<<1);if(0===w||3===w)continue;switch(w){case 0:case 3:break;case 1:d.push([i(o,a,h[0],h[1])]);break;case 2:d.push([i(o,a,h[1],h[0])])}}}return d}},function(){function i(s,a,o,l){for(var u=0|Math.min(o,l),d=0|Math.max(o,l),g=s[2*u],h=s[2*u+1];g<h;){var w=g+h>>1,y=a[2*w+1];if(y===d)return w;d<y?h=w:g=w+1}return g}return function(s,a,o,l){for(var u=s.length,d=[],g=0;g<u;++g){var h=s[g],w=h.length;if(3===w){if(0==(y=(l[h[0]]<<0)+(l[h[1]]<<1)+(l[h[2]]<<2))||7===y)continue;switch(y){case 0:case 7:break;case 1:d.push([i(o,a,h[0],h[2]),i(o,a,h[0],h[1])]);break;case 2:d.push([i(o,a,h[1],h[0]),i(o,a,h[1],h[2])]);break;case 3:d.push([i(o,a,h[0],h[2]),i(o,a,h[1],h[2])]);break;case 4:d.push([i(o,a,h[2],h[1]),i(o,a,h[2],h[0])]);break;case 5:d.push([i(o,a,h[2],h[1]),i(o,a,h[0],h[1])]);break;case 6:d.push([i(o,a,h[1],h[0]),i(o,a,h[2],h[0])])}}else if(2===w){var y;if(0==(y=(l[h[0]]<<0)+(l[h[1]]<<1))||3===y)continue;switch(y){case 0:case 3:break;case 1:d.push([i(o,a,h[0],h[1])]);break;case 2:d.push([i(o,a,h[1],h[0])])}}}return d}},function(){function i(s,a,o,l){for(var u=0|Math.min(o,l),d=0|Math.max(o,l),g=s[2*u],h=s[2*u+1];g<h;){var w=g+h>>1,y=a[2*w+1];if(y===d)return w;d<y?h=w:g=w+1}return g}return function(s,a,o,l){for(var u=s.length,d=[],g=0;g<u;++g){var h=s[g],w=h.length;if(4===w){if(0==(y=(l[h[0]]<<0)+(l[h[1]]<<1)+(l[h[2]]<<2)+(l[h[3]]<<3))||15===y)continue;switch(y){case 0:case 15:break;case 1:d.push([i(o,a,h[0],h[1]),i(o,a,h[0],h[2]),i(o,a,h[0],h[3])]);break;case 2:d.push([i(o,a,h[1],h[2]),i(o,a,h[1],h[0]),i(o,a,h[1],h[3])]);break;case 3:d.push([i(o,a,h[1],h[2]),i(o,a,h[0],h[2]),i(o,a,h[0],h[3])],[i(o,a,h[1],h[3]),i(o,a,h[1],h[2]),i(o,a,h[0],h[3])]);break;case 4:d.push([i(o,a,h[2],h[0]),i(o,a,h[2],h[1]),i(o,a,h[2],h[3])]);break;case 5:d.push([i(o,a,h[0],h[1]),i(o,a,h[2],h[1]),i(o,a,h[0],h[3])],[i(o,a,h[2],h[1]),i(o,a,h[2],h[3]),i(o,a,h[0],h[3])]);break;case 6:d.push([i(o,a,h[2],h[0]),i(o,a,h[1],h[0]),i(o,a,h[1],h[3])],[i(o,a,h[2],h[3]),i(o,a,h[2],h[0]),i(o,a,h[1],h[3])]);break;case 7:d.push([i(o,a,h[0],h[3]),i(o,a,h[1],h[3]),i(o,a,h[2],h[3])]);break;case 8:d.push([i(o,a,h[3],h[1]),i(o,a,h[3],h[0]),i(o,a,h[3],h[2])]);break;case 9:d.push([i(o,a,h[3],h[1]),i(o,a,h[0],h[1]),i(o,a,h[0],h[2])],[i(o,a,h[3],h[2]),i(o,a,h[3],h[1]),i(o,a,h[0],h[2])]);break;case 10:d.push([i(o,a,h[1],h[0]),i(o,a,h[3],h[0]),i(o,a,h[1],h[2])],[i(o,a,h[3],h[0]),i(o,a,h[3],h[2]),i(o,a,h[1],h[2])]);break;case 11:d.push([i(o,a,h[1],h[2]),i(o,a,h[0],h[2]),i(o,a,h[3],h[2])]);break;case 12:d.push([i(o,a,h[3],h[0]),i(o,a,h[2],h[0]),i(o,a,h[2],h[1])],[i(o,a,h[3],h[1]),i(o,a,h[3],h[0]),i(o,a,h[2],h[1])]);break;case 13:d.push([i(o,a,h[0],h[1]),i(o,a,h[2],h[1]),i(o,a,h[3],h[1])]);break;case 14:d.push([i(o,a,h[2],h[0]),i(o,a,h[1],h[0]),i(o,a,h[3],h[0])])}}else if(3===w){if(0==(y=(l[h[0]]<<0)+(l[h[1]]<<1)+(l[h[2]]<<2))||7===y)continue;switch(y){case 0:case 7:break;case 1:d.push([i(o,a,h[0],h[2]),i(o,a,h[0],h[1])]);break;case 2:d.push([i(o,a,h[1],h[0]),i(o,a,h[1],h[2])]);break;case 3:d.push([i(o,a,h[0],h[2]),i(o,a,h[1],h[2])]);break;case 4:d.push([i(o,a,h[2],h[1]),i(o,a,h[2],h[0])]);break;case 5:d.push([i(o,a,h[2],h[1]),i(o,a,h[0],h[1])]);break;case 6:d.push([i(o,a,h[1],h[0]),i(o,a,h[2],h[0])])}}else if(2===w){var y;if(0==(y=(l[h[0]]<<0)+(l[h[1]]<<1))||3===y)continue;switch(y){case 0:case 3:break;case 1:d.push([i(o,a,h[0],h[1])]);break;case 2:d.push([i(o,a,h[1],h[0])])}}}return d}}]},8211:function(v,c,i){"use strict";i(2288),i(1731),c.H=function(s,a){var o=s.length,l=s.length-a.length,u=Math.min;if(l)return l;switch(o){case 0:return 0;case 1:return s[0]-a[0];case 2:return(h=s[0]+s[1]-a[0]-a[1])||u(s[0],s[1])-u(a[0],a[1]);case 3:var d=s[0]+s[1],g=a[0]+a[1];if(h=d+s[2]-(g+a[2]))return h;var h,w=u(s[0],s[1]),y=u(a[0],a[1]);return(h=u(w,s[2])-u(y,a[2]))||u(w+s[2],d)-u(y+a[2],g);default:var p=s.slice(0);p.sort();var _=a.slice(0);_.sort();for(var x=0;x<o;++x)if(l=p[x]-_[x])return l;return 0}}},9392:function(v,c){"use strict";function i(a){var o=32;return(a&=-a)&&o--,65535&a&&(o-=16),16711935&a&&(o-=8),252645135&a&&(o-=4),858993459&a&&(o-=2),1431655765&a&&(o-=1),o}c.INT_BITS=32,c.INT_MAX=2147483647,c.INT_MIN=-2147483648,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var o=a>>31;return(a^o)-o},c.min=function(a,o){return o^(a^o)&-(a<o)},c.max=function(a,o){return a^(a^o)&-(a<o)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var o,l;return o=(a>65535)<<4,o|=l=((a>>>=o)>255)<<3,o|=l=((a>>>=l)>15)<<2,(o|=l=((a>>>=l)>3)<<1)|(a>>>=l)>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},c.countTrailingZeros=i,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var s=new Array(256);(function(a){for(var o=0;o<256;++o){var l=o,u=o,d=7;for(l>>>=1;l;l>>>=1)u<<=1,u|=1&l,--d;a[o]=u<<d&255}})(s),c.reverse=function(a){return s[255&a]<<24|s[a>>>8&255]<<16|s[a>>>16&255]<<8|s[a>>>24&255]},c.interleave2=function(a,o){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o&=65535)|o<<8))|o<<4))|o<<2))|o<<1))<<1},c.deinterleave2=function(a,o){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>o&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},c.interleave3=function(a,o,l){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(o=1227133513&((o=3272356035&((o=251719695&((o=4278190335&((o&=1023)|o<<16))|o<<8))|o<<4))|o<<2))<<1)|(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<2},c.deinterleave3=function(a,o){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>o&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},c.nextCombination=function(a){var o=a|a-1;return o+1|(~o&-~o)-1>>>i(a)+1}},6656:function(v,c,i){"use strict";var s=i(9392),a=i(9521);function o(y,p){var _=y.length,x=y.length-p.length,b=Math.min;if(x)return x;switch(_){case 0:return 0;case 1:return y[0]-p[0];case 2:return(D=y[0]+y[1]-p[0]-p[1])||b(y[0],y[1])-b(p[0],p[1]);case 3:var M=y[0]+y[1],m=p[0]+p[1];if(D=M+y[2]-(m+p[2]))return D;var D,S=b(y[0],y[1]),O=b(p[0],p[1]);return(D=b(S,y[2])-b(O,p[2]))||b(S+y[2],M)-b(O+p[2],m);default:var P=y.slice(0);P.sort();var R=p.slice(0);R.sort();for(var F=0;F<_;++F)if(x=P[F]-R[F])return x;return 0}}function l(y,p){return o(y[0],p[0])}function u(y,p){if(p){for(var _=y.length,x=new Array(_),b=0;b<_;++b)x[b]=[y[b],p[b]];for(x.sort(l),b=0;b<_;++b)y[b]=x[b][0],p[b]=x[b][1];return y}return y.sort(o),y}function d(y){if(0===y.length)return[];for(var p=1,_=y.length,x=1;x<_;++x){var b=y[x];if(o(b,y[x-1])){if(x===p){p++;continue}y[p++]=b}}return y.length=p,y}function g(y,p){for(var _=0,x=y.length-1,b=-1;_<=x;){var M=_+x>>1,m=o(y[M],p);m<=0?(0===m&&(b=M),_=M+1):m>0&&(x=M-1)}return b}function h(y,p){for(var _=new Array(y.length),x=0,b=_.length;x<b;++x)_[x]=[];for(var M=[],m=(x=0,p.length);x<m;++x)for(var D=p[x],S=D.length,O=1,P=1<<S;O<P;++O){M.length=s.popCount(O);for(var R=0,F=0;F<S;++F)O&1<<F&&(M[R++]=D[F]);var B=g(y,M);if(!(B<0))for(;_[B++].push(x),!(B>=y.length||0!==o(y[B],M)););}return _}function w(y,p){if(p<0)return[];for(var _=[],x=(1<<p+1)-1,b=0;b<y.length;++b)for(var M=y[b],m=x;m<1<<M.length;m=s.nextCombination(m)){for(var D=new Array(p+1),S=0,O=0;O<M.length;++O)m&1<<O&&(D[S++]=M[O]);_.push(D)}return u(_)}c.dimension=function(y){for(var p=0,_=Math.max,x=0,b=y.length;x<b;++x)p=_(p,y[x].length);return p-1},c.countVertices=function(y){for(var p=-1,_=Math.max,x=0,b=y.length;x<b;++x)for(var M=y[x],m=0,D=M.length;m<D;++m)p=_(p,M[m]);return p+1},c.cloneCells=function(y){for(var p=new Array(y.length),_=0,x=y.length;_<x;++_)p[_]=y[_].slice(0);return p},c.compareCells=o,c.normalize=u,c.unique=d,c.findCell=g,c.incidence=h,c.dual=function(y,p){if(!p)return h(d(w(y,0)),y);for(var _=new Array(p),x=0;x<p;++x)_[x]=[];x=0;for(var b=y.length;x<b;++x)for(var M=y[x],m=0,D=M.length;m<D;++m)_[M[m]].push(x);return _},c.explode=function(y){for(var p=[],_=0,x=y.length;_<x;++_)for(var b=y[_],M=0|b.length,m=1,D=1<<M;m<D;++m){for(var S=[],O=0;O<M;++O)m>>>O&1&&S.push(b[O]);p.push(S)}return u(p)},c.skeleton=w,c.boundary=function(y){for(var p=[],_=0,x=y.length;_<x;++_)for(var b=y[_],M=0,m=b.length;M<m;++M){for(var D=new Array(b.length-1),S=0,O=0;S<m;++S)S!==M&&(D[O++]=b[S]);p.push(D)}return u(p)},c.connectedComponents=function(y,p){return p?function(_,x){for(var b=new a(x),M=0;M<_.length;++M)for(var m=_[M],D=0;D<m.length;++D)for(var S=D+1;S<m.length;++S)b.link(m[D],m[S]);var O=[],P=b.ranks;for(M=0;M<P.length;++M)P[M]=-1;for(M=0;M<_.length;++M){var R=b.find(_[M][0]);P[R]<0?(P[R]=O.length,O.push([_[M].slice(0)])):O[P[R]].push(_[M].slice(0))}return O}(y,p):function(_){for(var x=d(u(w(_,0))),b=new a(x.length),M=0;M<_.length;++M)for(var m=_[M],D=0;D<m.length;++D)for(var S=g(x,[m[D]]),O=D+1;O<m.length;++O)b.link(S,g(x,[m[O]]));var P=[],R=b.ranks;for(M=0;M<R.length;++M)R[M]=-1;for(M=0;M<_.length;++M){var F=b.find(g(x,[_[M][0]]));R[F]<0?(R[F]=P.length,P.push([_[M].slice(0)])):P[R[F]].push(_[M].slice(0))}return P}(y)}},9521:function(v){"use strict";function c(i){this.roots=new Array(i),this.ranks=new Array(i);for(var s=0;s<i;++s)this.roots[s]=s,this.ranks[s]=0}v.exports=c,c.prototype.length=function(){return this.roots.length},c.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},c.prototype.find=function(i){for(var s=this.roots;s[i]!==i;){var a=s[i];s[i]=s[a],i=a}return i},c.prototype.link=function(i,s){var a=this.find(i),o=this.find(s);if(a!==o){var l=this.ranks,u=this.roots,d=l[a],g=l[o];d<g?u[a]=o:g<d?u[o]=a:(u[o]=a,++l[a])}}},8243:function(v,c,i){"use strict";v.exports=function(o,l,u){for(var d=l.length,g=o.length,h=new Array(d),w=new Array(d),y=new Array(d),p=new Array(d),_=0;_<d;++_)h[_]=w[_]=-1,y[_]=1/0,p[_]=!1;for(_=0;_<g;++_){var x=o[_];if(2!==x.length)throw new Error("Input must be a graph");var b=x[1],M=x[0];w[M]=-1!==w[M]?-2:b,h[b]=-1!==h[b]?-2:M}function m(ae){if(p[ae])return 1/0;var Q,ie,le=h[ae],fe=w[ae];return le<0||fe<0?1/0:(Q=l[le],ie=l[fe],Math.abs(s(l[ae],Q,ie))/Math.sqrt(Math.pow(Q[0]-ie[0],2)+Math.pow(Q[1]-ie[1],2)))}function D(ae,ne){var Q=z[ae],ie=z[ne];z[ae]=ie,z[ne]=Q,$[Q]=ne,$[ie]=ae}function S(ae){return y[z[ae]]}function O(ae){return 1&ae?ae-1>>1:(ae>>1)-1}function P(ae){for(var ne=S(ae);;){var Q=ne,ie=2*ae+1,le=2*(ae+1),fe=ae;if(ie<G){var he=S(ie);he<Q&&(fe=ie,Q=he)}if(le<G&&S(le)<Q&&(fe=le),fe===ae)return ae;D(ae,fe),ae=fe}}function R(ae){for(var ne=S(ae);ae>0;){var Q=O(ae);if(!(Q>=0&&ne<S(Q)))return ae;D(ae,Q),ae=Q}}function F(){if(G>0){var ae=z[0];return D(0,G-1),G-=1,P(0),ae}return-1}function B(ae,ne){var Q=z[ae];return y[Q]===ne?ae:(y[Q]=-1/0,R(ae),F(),y[Q]=ne,R((G+=1)-1))}function J(ae){if(!p[ae]){p[ae]=!0;var ne=h[ae],Q=w[ae];h[Q]>=0&&(h[Q]=ne),w[ne]>=0&&(w[ne]=Q),$[ne]>=0&&B($[ne],m(ne)),$[Q]>=0&&B($[Q],m(Q))}}var z=[],$=new Array(d);for(_=0;_<d;++_)(y[_]=m(_))<1/0?($[_]=z.length,z.push(_)):$[_]=-1;var G=z.length;for(_=G>>1;_>=0;--_)P(_);for(;;){var H=F();if(H<0||y[H]>u)break;J(H)}var X=[];for(_=0;_<d;++_)p[_]||($[_]=X.length,X.push(l[_].slice()));function K(ae,ne){if(ae[ne]<0)return ne;var Q=ne,ie=ne;do{var le=ae[ie];if(!p[ie]||le<0||le===ie||(le=ae[ie=le],!p[ie]||le<0||le===ie))break;ie=le,Q=ae[Q]}while(Q!==ie);for(var fe=ne;fe!==ie;fe=ae[fe])ae[fe]=ie;return ie}var ue=[];return o.forEach(function(ae){var ne=K(h,ae[0]),Q=K(w,ae[1]);if(ne>=0&&Q>=0&&ne!==Q){var ie=$[ne],le=$[Q];ie!==le&&ue.push([ie,le])}}),a.unique(a.normalize(ue)),{positions:X,edges:ue}};var s=i(417),a=i(6656)},6638:function(v,c,i){"use strict";v.exports=function(o,l){var u,d,g,h;if(l[0][0]<l[1][0])u=l[0],d=l[1];else{if(!(l[0][0]>l[1][0]))return a(l,o);u=l[1],d=l[0]}if(o[0][0]<o[1][0])g=o[0],h=o[1];else{if(!(o[0][0]>o[1][0]))return-a(o,l);g=o[1],h=o[0]}var w=s(u,d,h),y=s(u,d,g);if(w<0){if(y<=0)return w}else if(w>0){if(y>=0)return w}else if(y)return y;if(w=s(h,g,d),y=s(h,g,u),w<0){if(y<=0)return w}else if(w>0){if(y>=0)return w}else if(y)return y;return d[0]-h[0]};var s=i(417);function a(o,l){var u,d,g,h;if(l[0][0]<l[1][0])u=l[0],d=l[1];else{if(!(l[0][0]>l[1][0])){var w=Math.min(o[0][1],o[1][1]),y=Math.max(o[0][1],o[1][1]),p=Math.min(l[0][1],l[1][1]),_=Math.max(l[0][1],l[1][1]);return y<p?y-p:w>_?w-_:y-_}u=l[1],d=l[0]}o[0][1]<o[1][1]?(g=o[0],h=o[1]):(g=o[1],h=o[0]);var x=s(d,u,g);return x||(x=s(d,u,h))||h-d}},4385:function(v,c,i){"use strict";v.exports=function(y){for(var p=y.length,_=2*p,x=new Array(_),b=0;b<p;++b){var M=y[b],m=M[0][0]<M[1][0];x[2*b]=new w(M[0][0],M,m,b),x[2*b+1]=new w(M[1][0],M,!m,b)}x.sort(function(J,z){var $=J.x-z.x;return $||($=J.create-z.create)||Math.min(J.segment[0][1],J.segment[1][1])-Math.min(z.segment[0][1],z.segment[1][1])});var D=a(l),S=[],O=[],P=[];for(b=0;b<_;){for(var R=x[b].x,F=[];b<_;){var B=x[b];if(B.x!==R)break;b+=1,B.segment[0][0]===B.x&&B.segment[1][0]===B.x?B.create&&(B.segment[0][1]<B.segment[1][1]?(F.push(new h(B.segment[0][1],B.index,!0,!0)),F.push(new h(B.segment[1][1],B.index,!1,!1))):(F.push(new h(B.segment[1][1],B.index,!0,!1)),F.push(new h(B.segment[0][1],B.index,!1,!0)))):D=B.create?D.insert(B.segment,B.index):D.remove(B.segment)}S.push(D.root),O.push(R),P.push(F)}return new u(S,O,P)};var s=i(5070),a=i(7080),o=i(417),l=i(6638);function u(y,p,_){this.slabs=y,this.coordinates=p,this.horizontal=_}function d(y,p){return y.y-p}function g(y,p){for(var _=null;y;){var x,b,M=y.key;M[0][0]<M[1][0]?(x=M[0],b=M[1]):(x=M[1],b=M[0]);var m=o(x,b,p);if(m<0)y=y.left;else if(m>0)if(p[0]!==M[1][0])_=y,y=y.right;else{if(D=g(y.right,p))return D;y=y.left}else{if(p[0]!==M[1][0])return y;var D;if(D=g(y.right,p))return D;y=y.left}}return _}function h(y,p,_,x){this.y=y,this.index=p,this.start=_,this.closed=x}function w(y,p,_,x){this.x=y,this.segment=p,this.create=_,this.index=x}u.prototype.castUp=function(y){var p=s.le(this.coordinates,y[0]);if(p<0)return-1;var _=g(this.slabs[p],y),x=-1;if(_&&(x=_.value),this.coordinates[p]===y[0]){var b=null;if(_&&(b=_.key),p>0){var M=g(this.slabs[p-1],y);M&&(b?l(M.key,b)>0&&(b=M.key,x=M.value):(x=M.value,b=M.key))}var m=this.horizontal[p];if(m.length>0){var D=s.ge(m,y[1],d);if(D<m.length){var S=m[D];if(y[1]===S.y){if(S.closed)return S.index;for(;D<m.length-1&&m[D+1].y===y[1];)if((S=m[D+=1]).closed)return S.index;if(S.y===y[1]&&!S.start){if((D+=1)>=m.length)return x;S=m[D]}}if(S.start)if(b){var O=o(b[0],b[1],[y[0],S.y]);b[0][0]>b[1][0]&&(O=-O),O>0&&(x=S.index)}else x=S.index;else S.y!==y[1]&&(x=S.index)}}}return x}},4670:function(v,c,i){"use strict";var s=i(9130),a=i(9662);function o(u,d){var g=a(s(u,d),[d[d.length-1]]);return g[g.length-1]}function l(u,d,g,h){var w=-d/(h-d);w<0?w=0:w>1&&(w=1);for(var y=1-w,p=u.length,_=new Array(p),x=0;x<p;++x)_[x]=w*u[x]+y*g[x];return _}v.exports=function(u,d){for(var g=[],h=[],w=o(u[u.length-1],d),y=u[u.length-1],p=u[0],_=0;_<u.length;++_,y=p){var x=o(p=u[_],d);if(w<0&&x>0||w>0&&x<0){var b=l(y,x,p,w);g.push(b),h.push(b.slice())}x<0?h.push(p.slice()):x>0?g.push(p.slice()):(g.push(p.slice()),h.push(p.slice())),w=x}return{positive:g,negative:h}},v.exports.positive=function(u,d){for(var g=[],h=o(u[u.length-1],d),w=u[u.length-1],y=u[0],p=0;p<u.length;++p,w=y){var _=o(y=u[p],d);(h<0&&_>0||h>0&&_<0)&&g.push(l(w,_,y,h)),_>=0&&g.push(y.slice()),h=_}return g},v.exports.negative=function(u,d){for(var g=[],h=o(u[u.length-1],d),w=u[u.length-1],y=u[0],p=0;p<u.length;++p,w=y){var _=o(y=u[p],d);(h<0&&_>0||h>0&&_<0)&&g.push(l(w,_,y,h)),_<=0&&g.push(y.slice()),h=_}return g}},8974:function(v,c,i){var s;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(d){return function(g,h){var w,y,p,_,x,b,M,m,D,S=1,O=g.length,P="";for(y=0;y<O;y++)if("string"==typeof g[y])P+=g[y];else if("object"==typeof g[y]){if((_=g[y]).keys)for(w=h[S],p=0;p<_.keys.length;p++){if(null==w)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[p],_.keys[p-1]));w=w[_.keys[p]]}else w=_.param_no?h[_.param_no]:h[S++];if(a.not_type.test(_.type)&&a.not_primitive.test(_.type)&&w instanceof Function&&(w=w()),a.numeric_arg.test(_.type)&&"number"!=typeof w&&isNaN(w))throw new TypeError(o("[sprintf] expecting number but found %T",w));switch(a.number.test(_.type)&&(m=w>=0),_.type){case"b":w=parseInt(w,10).toString(2);break;case"c":w=String.fromCharCode(parseInt(w,10));break;case"d":case"i":w=parseInt(w,10);break;case"j":w=JSON.stringify(w,null,_.width?parseInt(_.width):0);break;case"e":w=_.precision?parseFloat(w).toExponential(_.precision):parseFloat(w).toExponential();break;case"f":w=_.precision?parseFloat(w).toFixed(_.precision):parseFloat(w);break;case"g":w=_.precision?String(Number(w.toPrecision(_.precision))):parseFloat(w);break;case"o":w=(parseInt(w,10)>>>0).toString(8);break;case"s":w=String(w),w=_.precision?w.substring(0,_.precision):w;break;case"t":w=String(!!w),w=_.precision?w.substring(0,_.precision):w;break;case"T":w=Object.prototype.toString.call(w).slice(8,-1).toLowerCase(),w=_.precision?w.substring(0,_.precision):w;break;case"u":w=parseInt(w,10)>>>0;break;case"v":w=w.valueOf(),w=_.precision?w.substring(0,_.precision):w;break;case"x":w=(parseInt(w,10)>>>0).toString(16);break;case"X":w=(parseInt(w,10)>>>0).toString(16).toUpperCase()}a.json.test(_.type)?P+=w:(!a.number.test(_.type)||m&&!_.sign?D="":(D=m?"+":"-",w=w.toString().replace(a.sign,"")),b=_.pad_char?"0"===_.pad_char?"0":_.pad_char.charAt(1):" ",M=_.width-(D+w).length,x=_.width&&M>0?b.repeat(M):"",P+=_.align?D+w+x:"0"===b?D+x+w:x+D+w)}return P}(function(g){if(u[g])return u[g];for(var h,w=g,y=[],p=0;w;){if(null!==(h=a.text.exec(w)))y.push(h[0]);else if(null!==(h=a.modulo.exec(w)))y.push("%");else{if(null===(h=a.placeholder.exec(w)))throw new SyntaxError("[sprintf] unexpected placeholder");if(h[2]){p|=1;var _=[],x=h[2],b=[];if(null===(b=a.key.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(_.push(b[1]);""!==(x=x.substring(b[0].length));)if(null!==(b=a.key_access.exec(x)))_.push(b[1]);else{if(null===(b=a.index_access.exec(x)))throw new SyntaxError("[sprintf] failed to parse named argument key");_.push(b[1])}h[2]=_}else p|=2;if(3===p)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");y.push({placeholder:h[0],param_no:h[1],keys:h[2],sign:h[3],pad_char:h[4],align:h[5],width:h[6],precision:h[7],type:h[8]})}w=w.substring(h[0].length)}return u[g]=y}(d),arguments)}function l(d,g){return o.apply(null,[d].concat(g||[]))}var u=Object.create(null);c.sprintf=o,c.vsprintf=l,typeof window<"u"&&(window.sprintf=o,window.vsprintf=l,void 0===(s=function(){return{sprintf:o,vsprintf:l}}.call(c,i,c,v))||(v.exports=s))}()},4162:function(v,c,i){"use strict";v.exports=function(u,d){if(u.dimension<=0)return{positions:[],cells:[]};if(1===u.dimension)return function(w,y){for(var p=a(w,y),_=p.length,x=new Array(_),b=new Array(_),M=0;M<_;++M)x[M]=[p[M]],b[M]=[M];return{positions:x,cells:b}}(u,d);var g=u.order.join()+"-"+u.dtype,h=l[g];return d=+d||0,h||(h=l[g]=function(w,y){var _=o[w.length+"d"];if(_)return _(s,w,y)}(u.order,u.dtype)),h(u,d)};var s=i(9284),a=i(9584),o={"2d":function(u,d,g){var h=u({order:d,scalarArguments:3,getters:"generic"===g?[0]:void 0,phase:function(w,y,p,_){return w>_|0},vertex:function(w,y,p,_,x,b,M,m,D,S,O,P,R){var F=(M<<0)+(m<<1)+(D<<2)+(S<<3)|0;if(0!==F&&15!==F)switch(F){case 0:case 15:O.push([w-.5,y-.5]);break;case 1:O.push([w-.25-.25*(_+p-2*R)/(p-_),y-.25-.25*(x+p-2*R)/(p-x)]);break;case 2:O.push([w-.75-.25*(-_-p+2*R)/(_-p),y-.25-.25*(b+_-2*R)/(_-b)]);break;case 3:O.push([w-.5,y-.5-.5*(x+p+b+_-4*R)/(p-x+_-b)]);break;case 4:O.push([w-.25-.25*(b+x-2*R)/(x-b),y-.75-.25*(-x-p+2*R)/(x-p)]);break;case 5:O.push([w-.5-.5*(_+p+b+x-4*R)/(p-_+x-b),y-.5]);break;case 6:O.push([w-.5-.25*(-_-p+b+x)/(_-p+x-b),y-.5-.25*(-x-p+b+_)/(x-p+_-b)]);break;case 7:O.push([w-.75-.25*(b+x-2*R)/(x-b),y-.75-.25*(b+_-2*R)/(_-b)]);break;case 8:O.push([w-.75-.25*(-b-x+2*R)/(b-x),y-.75-.25*(-b-_+2*R)/(b-_)]);break;case 9:O.push([w-.5-.25*(_+p+-b-x)/(p-_+b-x),y-.5-.25*(x+p+-b-_)/(p-x+b-_)]);break;case 10:O.push([w-.5-.5*(-_-p-b-x+4*R)/(_-p+b-x),y-.5]);break;case 11:O.push([w-.25-.25*(-b-x+2*R)/(b-x),y-.75-.25*(x+p-2*R)/(p-x)]);break;case 12:O.push([w-.5,y-.5-.5*(-x-p-b-_+4*R)/(x-p+b-_)]);break;case 13:O.push([w-.75-.25*(_+p-2*R)/(p-_),y-.25-.25*(-b-_+2*R)/(b-_)]);break;case 14:O.push([w-.25-.25*(-_-p+2*R)/(_-p),y-.25-.25*(-x-p+2*R)/(x-p)])}},cell:function(w,y,p,_,x,b,M,m,D){m.push(x?[w,y]:[y,w])}});return function(w,y){var p=[],_=[];return h(w,p,_,y),{positions:p,cells:_}}}},l={}},6946:function(v,c,i){"use strict";v.exports=function l(u,d,g){g=g||{};var h=o[u];h||(h=o[u]={" ":{data:new Float32Array(0),shape:.2}});var w=h[d];if(!w)if(d.length<=1||!/\d/.test(d))w=h[d]=function(P){for(var R=P.cells,F=P.positions,B=new Float32Array(6*R.length),J=0,z=0,$=0;$<R.length;++$)for(var G=R[$],H=0;H<3;++H){var X=F[G[H]];B[J++]=X[0],B[J++]=X[1]+1.4,z=Math.max(X[0],z)}return{data:B,shape:z}}(s(d,{triangles:!0,font:u,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=d.split(/(\d|\s)/),p=new Array(y.length),_=0,x=0,b=0;b<y.length;++b)p[b]=l(u,y[b]),_+=p[b].data.length,x+=p[b].shape,b>0&&(x+=.02);var M=new Float32Array(_),m=0,D=-.5*x;for(b=0;b<p.length;++b){for(var S=p[b].data,O=0;O<S.length;O+=2)M[m++]=S[O]+D,M[m++]=S[O+1];D+=p[b].shape+.02}w=h[d]={data:M,shape:x}}return w};var s=i(875),a=window||C.global||{},o=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}},14:function(v,c,i){"use strict";var s=i(4405);v.exports=l;var a=96;function o(u,d){var g=s(getComputedStyle(u).getPropertyValue(d));return g[0]*l(g[1],u)}function l(u,d){switch(d=d||document.body,u=(u||"px").trim().toLowerCase(),d!==window&&d!==document||(d=document.body),u){case"%":return d.clientHeight/100;case"ch":case"ex":return function(g,h){var w=document.createElement("div");w.style["font-size"]="128"+g,h.appendChild(w);var y=o(w,"font-size")/128;return h.removeChild(w),y}(u,d);case"em":return o(d,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},3440:function(v,c,i){"use strict";v.exports=function(x){var b=(x=x||{}).center||[0,0,0],M=x.up||[0,1,0],m=x.right||w(M),D=x.radius||1,S=x.theta||0,O=x.phi||0;if(b=[].slice.call(b,0,3),M=[].slice.call(M,0,3),u(M,M),m=[].slice.call(m,0,3),u(m,m),"eye"in x){var P=x.eye,R=[P[0]-b[0],P[1]-b[1],P[2]-b[2]];l(m,R,M),g(m[0],m[1],m[2])<1e-6?m=w(M):u(m,m),D=g(R[0],R[1],R[2]);var F=d(M,R)/D,B=d(m,R)/D;O=Math.acos(F),S=Math.acos(B)}return D=Math.log(D),new y(x.zoomMin,x.zoomMax,b,M,m,D,S,O)};var s=i(8444),a=i(7437),o=i(4422),l=i(903),u=i(899),d=i(9305);function g(x,b,M){return Math.sqrt(Math.pow(x,2)+Math.pow(b,2)+Math.pow(M,2))}function h(x){return Math.min(1,Math.max(-1,x))}function w(x){var b=Math.abs(x[0]),M=Math.abs(x[1]),m=Math.abs(x[2]),D=[0,0,0];b>Math.max(M,m)?D[2]=1:M>Math.max(b,m)?D[0]=1:D[1]=1;for(var S=0,O=0,P=0;P<3;++P)S+=x[P]*x[P],O+=D[P]*x[P];for(P=0;P<3;++P)D[P]-=O/S*x[P];return u(D,D),D}function y(x,b,M,m,D,S,O,P){this.center=s(M),this.up=s(m),this.right=s(D),this.radius=s([S]),this.angle=s([O,P]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,b),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var R=0;R<16;++R)this.computedMatrix[R]=.5;this.recalcMatrix(0)}var p=y.prototype;p.setDistanceLimits=function(x,b){x=x>0?Math.log(x):-1/0,b=b>0?Math.log(b):1/0,b=Math.max(b,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=b},p.getDistanceLimits=function(x){var b=this.radius.bounds[0];return x?(x[0]=Math.exp(b[0][0]),x[1]=Math.exp(b[1][0]),x):[Math.exp(b[0][0]),Math.exp(b[1][0])]},p.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var b=this.computedUp,M=this.computedRight,m=0,D=0,S=0;S<3;++S)D+=b[S]*M[S],m+=b[S]*b[S];var O=Math.sqrt(m),P=0;for(S=0;S<3;++S)M[S]-=b[S]*D/m,P+=M[S]*M[S],b[S]/=O;var R=Math.sqrt(P);for(S=0;S<3;++S)M[S]/=R;var F=this.computedToward;l(F,b,M),u(F,F);var B=Math.exp(this.computedRadius[0]),J=this.computedAngle[0],z=this.computedAngle[1],$=Math.cos(J),G=Math.sin(J),H=Math.cos(z),X=Math.sin(z),K=this.computedCenter,ue=$*H,ae=G*H,ne=X,Q=-$*X,ie=-G*X,le=H,fe=this.computedEye,he=this.computedMatrix;for(S=0;S<3;++S){var pe=ue*M[S]+ae*F[S]+ne*b[S];he[4*S+1]=Q*M[S]+ie*F[S]+le*b[S],he[4*S+2]=pe,he[4*S+3]=0}var xe=he[1],Ee=he[5],Re=he[9],ke=he[2],Te=he[6],we=he[10],je=Ee*we-Re*Te,Ce=Re*ke-xe*we,Ie=xe*Te-Ee*ke,ge=g(je,Ce,Ie);for(Ce/=ge,Ie/=ge,he[0]=je/=ge,he[4]=Ce,he[8]=Ie,S=0;S<3;++S)fe[S]=K[S]+he[2+4*S]*B;for(S=0;S<3;++S){P=0;for(var me=0;me<3;++me)P+=he[S+4*me]*fe[me];he[12+S]=-P}he[15]=1},p.getMatrix=function(x,b){this.recalcMatrix(x);var M=this.computedMatrix;if(b){for(var m=0;m<16;++m)b[m]=M[m];return b}return M};var _=[0,0,0];p.rotate=function(x,b,M,m){if(this.angle.move(x,b,M),m){this.recalcMatrix(x);var D=this.computedMatrix;_[0]=D[2],_[1]=D[6],_[2]=D[10];for(var S=this.computedUp,O=this.computedRight,P=this.computedToward,R=0;R<3;++R)D[4*R]=S[R],D[4*R+1]=O[R],D[4*R+2]=P[R];for(o(D,D,m,_),R=0;R<3;++R)S[R]=D[4*R],O[R]=D[4*R+1];this.up.set(x,S[0],S[1],S[2]),this.right.set(x,O[0],O[1],O[2])}},p.pan=function(x,b,M,m){b=b||0,M=M||0,m=m||0,this.recalcMatrix(x);var D=this.computedMatrix,S=(Math.exp(this.computedRadius[0]),D[1]),O=D[5],P=D[9],R=g(S,O,P),F=D[0],B=D[4],J=D[8],z=F*(S/=R)+B*(O/=R)+J*(P/=R),$=g(F-=S*z,B-=O*z,J-=P*z),G=(F/=$)*b+S*M,H=(B/=$)*b+O*M,X=(J/=$)*b+P*M;this.center.move(x,G,H,X);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+m),this.radius.set(x,Math.log(K))},p.translate=function(x,b,M,m){this.center.move(x,b||0,M||0,m||0)},p.setMatrix=function(x,b,M,m){var D=1;"number"==typeof M&&(D=0|M),(D<0||D>3)&&(D=1);var S=(D+2)%3;b||(this.recalcMatrix(x),b=this.computedMatrix);var O=b[D],P=b[D+4],R=b[D+8];if(m){var F=Math.abs(O),B=Math.abs(P),J=Math.abs(R),z=Math.max(F,B,J);F===z?(O=O<0?-1:1,P=R=0):J===z?(R=R<0?-1:1,O=P=0):(P=P<0?-1:1,O=R=0)}else{var $=g(O,P,R);O/=$,P/=$,R/=$}var G,H,X=b[S],K=b[S+4],ue=b[S+8],ae=X*O+K*P+ue*R,ne=g(X-=O*ae,K-=P*ae,ue-=R*ae),Q=P*(ue/=ne)-R*(K/=ne),ie=R*(X/=ne)-O*ue,le=O*K-P*X,fe=g(Q,ie,le);if(Q/=fe,ie/=fe,le/=fe,this.center.jump(x,De,qe,Ke),this.radius.idle(x),this.up.jump(x,O,P,R),this.right.jump(x,X,K,ue),2===D){var he=b[1],pe=b[5],xe=b[9];G=je<0?-Math.PI/2:Math.PI/2,H=Math.atan2(he*Q+pe*ie+xe*le,he*X+pe*K+xe*ue)}else{var ke=b[2],Te=b[6],we=b[10],je=ke*O+Te*P+we*R,Ce=ke*X+Te*K+we*ue,Ie=ke*Q+Te*ie+we*le;G=Math.asin(h(je)),H=Math.atan2(Ie,Ce)}this.angle.jump(x,H,G),this.recalcMatrix(x);var ge=b[2],me=b[6],ce=b[10],Ae=this.computedMatrix;a(Ae,b);var Ne=Ae[15],De=Ae[12]/Ne,qe=Ae[13]/Ne,Ke=Ae[14]/Ne,be=Math.exp(this.computedRadius[0]);this.center.jump(x,De-ge*be,qe-me*be,Ke-ce*be)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},p.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},p.setDistance=function(x,b){b>0&&this.radius.set(x,Math.log(b))},p.lookAt=function(x,b,M,m){this.recalcMatrix(x),b=b||this.computedEye,M=M||this.computedCenter;var D=(m=m||this.computedUp)[0],S=m[1],O=m[2],P=g(D,S,O);if(!(P<1e-6)){D/=P,S/=P,O/=P;var R=b[0]-M[0],F=b[1]-M[1],B=b[2]-M[2],J=g(R,F,B);if(!(J<1e-6)){R/=J,F/=J,B/=J;var z=this.computedRight,$=z[0],G=z[1],H=z[2],X=D*$+S*G+O*H,K=g($-=X*D,G-=X*S,H-=X*O);if(!(K<.01&&(K=g($=S*B-O*F,G=O*R-D*B,H=D*F-S*R))<1e-6)){$/=K,G/=K,H/=K,this.up.set(x,D,S,O),this.right.set(x,$,G,H),this.center.set(x,M[0],M[1],M[2]),this.radius.set(x,Math.log(J));var ue=S*H-O*G,ae=O*$-D*H,ne=D*G-S*$,Q=g(ue,ae,ne),le=$*R+G*F+H*B,fe=(ue/=Q)*R+(ae/=Q)*F+(ne/=Q)*B,he=Math.asin(h(D*R+S*F+O*B)),pe=Math.atan2(fe,le),xe=this.angle._state,Ee=xe[xe.length-1],Re=xe[xe.length-2];Ee%=2*Math.PI;var ke=Math.abs(Ee+2*Math.PI-pe),Te=Math.abs(Ee-pe),we=Math.abs(Ee-2*Math.PI-pe);ke<Te&&(Ee+=2*Math.PI),we<Te&&(Ee-=2*Math.PI),this.angle.jump(this.angle.lastT(),Ee,Re),this.angle.set(x,pe,he)}}}}},9660:function(v){"use strict";v.exports=function(i,s,a){var o=i*s,l=c*i,u=l-(l-i),d=i-u,g=c*s,h=g-(g-s),w=s-h,y=d*w-(o-u*h-d*h-u*w);return a?(a[0]=y,a[1]=o,a):[y,o]};var c=+(Math.pow(2,27)+1)},87:function(v){"use strict";v.exports=function(c,i,s){var a=c+i,o=a-c,l=i-o,u=c-(a-o);return s?(s[0]=u+l,s[1]=a,s):[u+l,a]}},5306:function(v,c,i){"use strict";var s=i(2288),a=i(3094),o=i(2146).lW;i.g.__TYPEDARRAY_POOL||(i.g.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var l=typeof Uint8ClampedArray<"u",u=typeof BigUint64Array<"u",d=typeof BigInt64Array<"u",g=i.g.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=a([32,0])),g.BIGUINT64||(g.BIGUINT64=a([32,0])),g.BIGINT64||(g.BIGINT64=a([32,0])),g.BUFFER||(g.BUFFER=a([32,0]));var h=g.DATA,w=g.BUFFER;function y(z){if(z){var G=s.log2(z.length||z.byteLength);h[G].push(z)}}function p(z){z=s.nextPow2(z);var $=s.log2(z),G=h[$];return G.length>0?G.pop():new ArrayBuffer(z)}function _(z){return new Uint8Array(p(z),0,z)}function x(z){return new Uint16Array(p(2*z),0,z)}function b(z){return new Uint32Array(p(4*z),0,z)}function M(z){return new Int8Array(p(z),0,z)}function m(z){return new Int16Array(p(2*z),0,z)}function D(z){return new Int32Array(p(4*z),0,z)}function S(z){return new Float32Array(p(4*z),0,z)}function O(z){return new Float64Array(p(8*z),0,z)}function P(z){return l?new Uint8ClampedArray(p(z),0,z):_(z)}function R(z){return u?new BigUint64Array(p(8*z),0,z):null}function F(z){return d?new BigInt64Array(p(8*z),0,z):null}function B(z){return new DataView(p(z),0,z)}function J(z){z=s.nextPow2(z);var $=s.log2(z),G=w[$];return G.length>0?G.pop():new o(z)}c.free=function(z){if(o.isBuffer(z))w[s.log2(z.length)].push(z);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(z)&&(z=z.buffer),!z)return;var G=0|s.log2(z.length||z.byteLength);h[G].push(z)}},c.freeUint8=c.freeUint16=c.freeUint32=c.freeBigUint64=c.freeInt8=c.freeInt16=c.freeInt32=c.freeBigInt64=c.freeFloat32=c.freeFloat=c.freeFloat64=c.freeDouble=c.freeUint8Clamped=c.freeDataView=function(z){y(z.buffer)},c.freeArrayBuffer=y,c.freeBuffer=function(z){w[s.log2(z.length)].push(z)},c.malloc=function(z,$){if(void 0===$||"arraybuffer"===$)return p(z);switch($){case"uint8":return _(z);case"uint16":return x(z);case"uint32":return b(z);case"int8":return M(z);case"int16":return m(z);case"int32":return D(z);case"float":case"float32":return S(z);case"double":case"float64":return O(z);case"uint8_clamped":return P(z);case"bigint64":return F(z);case"biguint64":return R(z);case"buffer":return J(z);case"data":case"dataview":return B(z);default:return null}return null},c.mallocArrayBuffer=p,c.mallocUint8=_,c.mallocUint16=x,c.mallocUint32=b,c.mallocInt8=M,c.mallocInt16=m,c.mallocInt32=D,c.mallocFloat32=c.mallocFloat=S,c.mallocFloat64=c.mallocDouble=O,c.mallocUint8Clamped=P,c.mallocBigUint64=R,c.mallocBigInt64=F,c.mallocDataView=B,c.mallocBuffer=J,c.clearCache=function(){for(var z=0;z<32;++z)g.UINT8[z].length=0,g.UINT16[z].length=0,g.UINT32[z].length=0,g.INT8[z].length=0,g.INT16[z].length=0,g.INT32[z].length=0,g.FLOAT[z].length=0,g.DOUBLE[z].length=0,g.BIGUINT64[z].length=0,g.BIGINT64[z].length=0,g.UINT8C[z].length=0,h[z].length=0,w[z].length=0}},1731:function(v){"use strict";function c(s){this.roots=new Array(s),this.ranks=new Array(s);for(var a=0;a<s;++a)this.roots[a]=a,this.ranks[a]=0}v.exports=c;var i=c.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var s=this.roots.length;return this.roots.push(s),this.ranks.push(0),s},i.find=function(s){for(var a=s,o=this.roots;o[s]!==s;)s=o[s];for(;o[a]!==s;){var l=o[a];o[a]=s,a=l}return s},i.link=function(s,a){var o=this.find(s),l=this.find(a);if(o!==l){var u=this.ranks,d=this.roots,g=u[o],h=u[l];g<h?d[o]=l:h<g?d[l]=o:(d[l]=o,++u[o])}}},1215:function(v){"use strict";v.exports=function(c,i,s){return 0===c.length?c:i?(s||c.sort(i),function(a,o){for(var l=1,u=a.length,d=a[0],g=a[0],h=1;h<u;++h)if(g=d,o(d=a[h],g)){if(h===l){l++;continue}a[l++]=d}return a.length=l,a}(c,i)):(s||c.sort(),function(a){for(var o=1,l=a.length,u=a[0],d=a[0],g=1;g<l;++g,d=u)if(d=u,(u=a[g])!==d){if(g===o){o++;continue}a[o++]=u}return a.length=o,a}(c))}},875:function(v,c,i){"use strict";v.exports=function(l,u){return"object"==typeof u&&null!==u||(u={}),s(l,u.canvas||a,u.context||o,u)};var s=i(712),a=null,o=null;typeof document<"u"&&((a=document.createElement("canvas")).width=8192,a.height=1024,o=a.getContext("2d"))},712:function(v,c,i){v.exports=function(R,F,B,J){var z=64,$=1.25,G={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return J&&(J.size&&J.size>0&&(z=J.size),J.lineSpacing&&J.lineSpacing>0&&($=J.lineSpacing),J.styletags&&J.styletags.breaklines&&(G.breaklines=!!J.styletags.breaklines),J.styletags&&J.styletags.bolds&&(G.bolds=!!J.styletags.bolds),J.styletags&&J.styletags.italics&&(G.italics=!!J.styletags.italics),J.styletags&&J.styletags.subscripts&&(G.subscripts=!!J.styletags.subscripts),J.styletags&&J.styletags.superscripts&&(G.superscripts=!!J.styletags.superscripts)),B.font=[J.fontStyle,J.fontVariant,J.fontWeight,z+"px",J.font].filter(function(H){return H}).join(" "),B.textAlign="start",B.textBaseline="alphabetic",B.direction="ltr",P(function(H,X,K,ue,ae,ne){K=(K=K.replace(/\n/g,"")).replace(/\<br\>/g,!0===ne.breaklines?"\n":" ");var Q="",ie=[];for(pe=0;pe<K.length;++pe)ie[pe]=Q;!0===ne.bolds&&(ie=D(g,h,K,ie)),!0===ne.italics&&(ie=D(w,y,K,ie)),!0===ne.superscripts&&(ie=D(p,x,K,ie)),!0===ne.subscripts&&(ie=D(b,m,K,ie));var le=[],fe="";for(pe=0;pe<K.length;++pe)null!==ie[pe]&&(fe+=K[pe],le.push(ie[pe]));var he,pe,xe,Ee,Re,ke=fe.split("\n"),Te=ke.length,we=Math.round(ae*ue),je=ue,Ce=2*ue,Ie=0,ge=Te*we+Ce;H.height<ge&&(H.height=ge),X.fillStyle="#000",X.fillRect(0,0,H.width,H.height),X.fillStyle="#fff";var me=0,ce="";function Ae(){if(""!==ce){var Ue=X.measureText(ce).width;X.fillText(ce,je+xe,Ce+Ee),xe+=Ue}}function Ne(){return Math.round(Re)+"px "}function De(Ue,Ze){var We=""+X.font;if(!0===ne.subscripts){var et=Ue.indexOf(M),nt=Ze.indexOf(M),ct=et>-1?parseInt(Ue[1+et]):0,yt=nt>-1?parseInt(Ze[1+nt]):0;ct!==yt&&(We=We.replace(Ne(),"?px "),Re*=Math.pow(.75,yt-ct),We=We.replace("?px ",Ne())),Ee+=.25*we*(yt-ct)}if(!0===ne.superscripts){var ut=Ue.indexOf(_),Ct=Ze.indexOf(_),Dt=ut>-1?parseInt(Ue[1+ut]):0,vt=Ct>-1?parseInt(Ze[1+Ct]):0;Dt!==vt&&(We=We.replace(Ne(),"?px "),Re*=Math.pow(.75,vt-Dt),We=We.replace("?px ",Ne())),Ee-=.25*we*(vt-Dt)}if(!0===ne.bolds){var mt=Ue.indexOf(h)>-1,Lt=Ze.indexOf(h)>-1;!mt&&Lt&&(We=Ft?We.replace("italic ","italic bold "):"bold "+We),mt&&!Lt&&(We=We.replace("bold ",""))}if(!0===ne.italics){var Ft=Ue.indexOf(y)>-1,Rt=Ze.indexOf(y)>-1;!Ft&&Rt&&(We="italic "+We),Ft&&!Rt&&(We=We.replace("italic ",""))}X.font=We}for(he=0;he<Te;++he){var qe=ke[he]+"\n";for(xe=0,Ee=he*we,Re=ue,ce="",pe=0;pe<qe.length;++pe){var Ke=pe+me<le.length?le[pe+me]:le[le.length-1];Q===Ke?ce+=qe[pe]:(Ae(),ce=qe[pe],void 0!==Ke&&(De(Q,Ke),Q=Ke))}Ae(),me+=qe.length;var be=0|Math.round(xe+2*je);Ie<be&&(Ie=be)}var Oe=Ie,Le=Ce+we*Te;return a(X.getImageData(0,0,Oe,Le).data,[Le,Oe,4]).pick(-1,-1,0).transpose(1,0)}(F,B,R,z,$,G),J,z)},v.exports.processPixels=P;var s=i(4162),a=i(5050),o=i(8243),l=i(197),u=i(7761),d=i(8040),g="b",h="b|",w="i",y="i|",p="sup",_="+",x="+1",b="sub",M="-",m="-1";function D(R,F,B,J){for(var z="<"+R+">",$="</"+R+">",G=z.length,H=$.length,X=F[0]===_||F[0]===M,K=0,ue=-H;K>-1&&-1!==(K=B.indexOf(z,K))&&-1!==(ue=B.indexOf($,K+G))&&!(ue<=K);){for(var ae=K;ae<ue+H;++ae)if(ae<K+G||ae>=ue)J[ae]=null,B=B.substr(0,ae)+" "+B.substr(ae+1);else if(null!==J[ae]){var ne=J[ae].indexOf(F[0]);-1===ne?J[ae]+=F:X&&(J[ae]=J[ae].substr(0,ne+1)+(1+parseInt(J[ae][ne+1]))+J[ae].substr(ne+2))}var Q=K+G,ie=B.substr(Q,ue-Q).indexOf(z);K=-1!==ie?ie:ue+H}return J}function O(R,F,B,J){var z=function S(R,F){var B=s(R,128);return F?o(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions}}(R,J),$=function(he,pe,xe){for(var Ee=pe.textAlign||"start",Re=pe.textBaseline||"alphabetic",ke=[1<<30,1<<30],Te=[0,0],we=he.length,je=0;je<we;++je)for(var Ce=he[je],Ie=0;Ie<2;++Ie)ke[Ie]=0|Math.min(ke[Ie],Ce[Ie]),Te[Ie]=0|Math.max(Te[Ie],Ce[Ie]);var ge=0;switch(Ee){case"center":ge=-.5*(ke[0]+Te[0]);break;case"right":case"end":ge=-Te[0];break;case"left":case"start":ge=-ke[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Ee+"'")}var me=0;switch(Re){case"hanging":case"top":me=-ke[1];break;case"middle":me=-.5*(ke[1]+Te[1]);break;case"alphabetic":case"ideographic":me=-3*xe;break;case"bottom":me=-Te[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+Re+"'")}var ce=1/xe;return"lineHeight"in pe?ce*=+pe.lineHeight:"width"in pe?ce=pe.width/(Te[0]-ke[0]):"height"in pe&&(ce=pe.height/(Te[1]-ke[1])),he.map(function(Ae){return[ce*(Ae[0]+ge),ce*(Ae[1]+me)]})}(z.positions,F,B),G=z.edges,H="ccw"===F.orientation;if(l($,G),F.polygons||F.polygon||F.polyline){for(var X=d(G,$),K=new Array(X.length),ue=0;ue<X.length;++ue){for(var ae=X[ue],ne=new Array(ae.length),Q=0;Q<ae.length;++Q){for(var ie=ae[Q],le=new Array(ie.length),fe=0;fe<ie.length;++fe)le[fe]=$[ie[fe]].slice();H&&le.reverse(),ne[Q]=le}K[ue]=ne}return K}return F.triangles||F.triangulate||F.triangle?{cells:u($,G,{delaunay:!1,exterior:!1,interior:!0}),positions:$}:{edges:G,positions:$}}function P(R,F,B){try{return O(R,F,B,!0)}catch{}try{return O(R,F,B,!1)}catch{}return F.polygons||F.polyline||F.polygon?[]:F.triangles||F.triangulate||F.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(v){!function(){"use strict";if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=b);var c=!1;if("function"==typeof WeakMap){var i=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var s=new i,a=Object.freeze({});if(s.set(a,1),1===s.get(a))return void(v.exports=WeakMap);c=!0}}var o=Object.getOwnPropertyNames,l=Object.defineProperty,u=Object.isExtensible,d="weakmap:",g=d+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var h=new ArrayBuffer(25),w=new Uint8Array(h);crypto.getRandomValues(w),g=d+"rand:"+Array.prototype.map.call(w,function(O){return(O%36).toString(36)}).join("")+"___"}if(l(Object,"getOwnPropertyNames",{value:function(O){return o(O).filter(M)}}),"getPropertyNames"in Object){var y=Object.getPropertyNames;l(Object,"getPropertyNames",{value:function(O){return y(O).filter(M)}})}!function(){var O=Object.freeze;l(Object,"freeze",{value:function(F){return m(F),O(F)}});var P=Object.seal;l(Object,"seal",{value:function(F){return m(F),P(F)}});var R=Object.preventExtensions;l(Object,"preventExtensions",{value:function(F){return m(F),R(F)}})}();var p=!1,_=0,x=function(){this instanceof x||S();var O=[],P=[],R=_++;return Object.create(x.prototype,{get___:{value:D(function(F,B){var J,z=m(F);return z?R in z?z[R]:B:(J=O.indexOf(F))>=0?P[J]:B})},has___:{value:D(function(F){var B=m(F);return B?R in B:O.indexOf(F)>=0})},set___:{value:D(function(F,B){var J,z=m(F);return z?z[R]=B:(J=O.indexOf(F))>=0?P[J]=B:(P[J=O.length]=B,O[J]=F),this})},delete___:{value:D(function(F){var B,J,z=m(F);return z?R in z&&delete z[R]:!((B=O.indexOf(F))<0||(J=O.length-1,O[B]=void 0,P[B]=P[J],O[B]=O[J],O.length=J,P.length=J,0))})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(O,P){return this.get___(O,P)},writable:!0,configurable:!0},has:{value:function(O){return this.has___(O)},writable:!0,configurable:!0},set:{value:function(O,P){return this.set___(O,P)},writable:!0,configurable:!0},delete:{value:function(O){return this.delete___(O)},writable:!0,configurable:!0}}),"function"==typeof i?function(){function O(){this instanceof x||S();var P,R=new i,F=void 0,B=!1;return P=c?function(J,z){return R.set(J,z),R.has(J)||(F||(F=new x),F.set(J,z)),this}:function(J,z){if(B)try{R.set(J,z)}catch{F||(F=new x),F.set___(J,z)}else R.set(J,z);return this},Object.create(x.prototype,{get___:{value:D(function(J,z){return F?R.has(J)?R.get(J):F.get___(J,z):R.get(J,z)})},has___:{value:D(function(J){return R.has(J)||!!F&&F.has___(J)})},set___:{value:D(P)},delete___:{value:D(function(J){var z=!!R.delete(J);return F&&F.delete___(J)||z})},permitHostObjects___:{value:D(function(J){if(J!==b)throw new Error("bogus call to permitHostObjects___");B=!0})}})}c&&typeof Proxy<"u"&&(Proxy=void 0),O.prototype=x.prototype,v.exports=O,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=x)}function b(O){O.permitHostObjects___&&O.permitHostObjects___(b)}function M(O){return!(O.substr(0,8)==d&&"___"===O.substr(O.length-3))}function m(O){if(O!==Object(O))throw new TypeError("Not an object: "+O);var P=O[g];if(P&&P.key===O)return P;if(u(O)){P={key:O};try{return l(O,g,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch{return}}}function D(O){return O.prototype=null,Object.freeze(O)}function S(){p||typeof console>"u"||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},9222:function(v,c,i){var s=i(7178);v.exports=function(){var a={};return function(o){if(("object"!=typeof o||null===o)&&"function"!=typeof o)throw new Error("Weakmap-shim: Key must be object");var l=o.valueOf(a);return l&&l.identity===a?l:s(o,a)}}},7178:function(v){v.exports=function(c,i){var s={identity:i},a=c.valueOf;return Object.defineProperty(c,"valueOf",{value:function(o){return o!==i?a.apply(this,arguments):s},writable:!0}),s}},4037:function(v,c,i){var s=i(9222);v.exports=function(){var a=s();return{get:function(o,l){var u=a(o);return u.hasOwnProperty("value")?u.value:l},set:function(o,l){return a(o).value=l,this},has:function(o){return"value"in a(o)},delete:function(o){return delete a(o).value}}}},6183:function(v){"use strict";var c,i;v.exports=(c=function(){return function(c,i,s,a,o,l){var u=c[0],d=s[0],g=[0],h=d;a|=0;var w=0,y=d;for(w=0;w<u;++w){var p=i[a]-l,_=i[a+h]-l;p>=0!=_>=0&&o.push(g[0]+.5+.5*(p+_)/(p-_)),a+=y,++g[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),i={},function(s,a,o){var l=s.dtype,u=s.order,d=[l,u.join()].join(),g=i[d];return g||(i[d]=g=c([l,u])),g(s.shape.slice(0),s.data,s.stride,0|s.offset,a,o)})},9584:function(v,c,i){"use strict";v.exports=function(a,o){var l=[];return o=+o||0,s(a.hi(a.shape[0]-1),l,o),l};var s=i(6183)},6601:function(){}},k={};function T(v){var c=k[v];if(void 0!==c)return c.exports;var i=k[v]={id:v,loaded:!1,exports:{}};return f[v].call(i.exports,i,i.exports,T),i.loaded=!0,i.exports}return T.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),T.nmd=function(v){return v.paths=[],v.children||(v.children=[]),v},T(7386)}()},se.exports=I()},12856:function(se,U,r){"use strict";function C(ge,me){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ce,Ae){return ce.__proto__=Ae,ce})(ge,me)}function f(ge){if(void 0===ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge}function k(ge){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(me){return me.__proto__||Object.getPrototypeOf(me)})(ge)}function T(ge){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(me){return typeof me}:function(me){return me&&"function"==typeof Symbol&&me.constructor===Symbol&&me!==Symbol.prototype?"symbol":typeof me})(ge)}var v=r(95341),c=r(95280),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;U.Buffer=o,U.SlowBuffer=function(ge){return+ge!=ge&&(ge=0),o.alloc(+ge)},U.INSPECT_MAX_BYTES=50;var s=2147483647;function a(ge){if(ge>s)throw new RangeError('The value "'+ge+'" is invalid for option "size"');var me=new Uint8Array(ge);return Object.setPrototypeOf(me,o.prototype),me}function o(ge,me,ce){if("number"==typeof ge){if("string"==typeof me)throw new TypeError('The "string" argument must be of type string. Received type number');return d(ge)}return l(ge,me,ce)}function l(ge,me,ce){if("string"==typeof ge)return function(De,qe){if("string"==typeof qe&&""!==qe||(qe="utf8"),!o.isEncoding(qe))throw new TypeError("Unknown encoding: "+qe);var Ke=0|y(De,qe),be=a(Ke),Oe=be.write(De,qe);return Oe!==Ke&&(be=be.slice(0,Oe)),be}(ge,me);if(ArrayBuffer.isView(ge))return function(De){if(Te(De,Uint8Array)){var qe=new Uint8Array(De);return h(qe.buffer,qe.byteOffset,qe.byteLength)}return g(De)}(ge);if(null==ge)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+T(ge));if(Te(ge,ArrayBuffer)||ge&&Te(ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Te(ge,SharedArrayBuffer)||ge&&Te(ge.buffer,SharedArrayBuffer)))return h(ge,me,ce);if("number"==typeof ge)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ae=ge.valueOf&&ge.valueOf();if(null!=Ae&&Ae!==ge)return o.from(Ae,me,ce);var Ne=function(De){if(o.isBuffer(De)){var qe=0|w(De.length),Ke=a(qe);return 0===Ke.length||De.copy(Ke,0,0,qe),Ke}return void 0!==De.length?"number"!=typeof De.length||we(De.length)?a(0):g(De):"Buffer"===De.type&&Array.isArray(De.data)?g(De.data):void 0}(ge);if(Ne)return Ne;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ge[Symbol.toPrimitive])return o.from(ge[Symbol.toPrimitive]("string"),me,ce);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+T(ge))}function u(ge){if("number"!=typeof ge)throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function d(ge){return u(ge),a(ge<0?0:0|w(ge))}function g(ge){for(var me=ge.length<0?0:0|w(ge.length),ce=a(me),Ae=0;Ae<me;Ae+=1)ce[Ae]=255&ge[Ae];return ce}function h(ge,me,ce){if(me<0||ge.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<me+(ce||0))throw new RangeError('"length" is outside of buffer bounds');var Ae;return Ae=void 0===me&&void 0===ce?new Uint8Array(ge):void 0===ce?new Uint8Array(ge,me):new Uint8Array(ge,me,ce),Object.setPrototypeOf(Ae,o.prototype),Ae}function w(ge){if(ge>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|ge}function y(ge,me){if(o.isBuffer(ge))return ge.length;if(ArrayBuffer.isView(ge)||Te(ge,ArrayBuffer))return ge.byteLength;if("string"!=typeof ge)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+T(ge));var ce=ge.length,Ae=arguments.length>2&&!0===arguments[2];if(!Ae&&0===ce)return 0;for(var Ne=!1;;)switch(me){case"ascii":case"latin1":case"binary":return ce;case"utf8":case"utf-8":return Ee(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ce;case"hex":return ce>>>1;case"base64":return Re(ge).length;default:if(Ne)return Ae?-1:Ee(ge).length;me=(""+me).toLowerCase(),Ne=!0}}function p(ge,me,ce){var Ae=!1;if((void 0===me||me<0)&&(me=0),me>this.length||((void 0===ce||ce>this.length)&&(ce=this.length),ce<=0)||(ce>>>=0)<=(me>>>=0))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return z(this,me,ce);case"utf8":case"utf-8":return R(this,me,ce);case"ascii":return B(this,me,ce);case"latin1":case"binary":return J(this,me,ce);case"base64":return P(this,me,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,me,ce);default:if(Ae)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),Ae=!0}}function _(ge,me,ce){var Ae=ge[me];ge[me]=ge[ce],ge[ce]=Ae}function x(ge,me,ce,Ae,Ne){if(0===ge.length)return-1;if("string"==typeof ce?(Ae=ce,ce=0):ce>2147483647?ce=2147483647:ce<-2147483648&&(ce=-2147483648),we(ce=+ce)&&(ce=Ne?0:ge.length-1),ce<0&&(ce=ge.length+ce),ce>=ge.length){if(Ne)return-1;ce=ge.length-1}else if(ce<0){if(!Ne)return-1;ce=0}if("string"==typeof me&&(me=o.from(me,Ae)),o.isBuffer(me))return 0===me.length?-1:b(ge,me,ce,Ae,Ne);if("number"==typeof me)return me&=255,"function"==typeof Uint8Array.prototype.indexOf?Ne?Uint8Array.prototype.indexOf.call(ge,me,ce):Uint8Array.prototype.lastIndexOf.call(ge,me,ce):b(ge,[me],ce,Ae,Ne);throw new TypeError("val must be string, number or Buffer")}function b(ge,me,ce,Ae,Ne){var De,qe=1,Ke=ge.length,be=me.length;if(void 0!==Ae&&("ucs2"===(Ae=String(Ae).toLowerCase())||"ucs-2"===Ae||"utf16le"===Ae||"utf-16le"===Ae)){if(ge.length<2||me.length<2)return-1;qe=2,Ke/=2,be/=2,ce/=2}function Oe(We,et){return 1===qe?We[et]:We.readUInt16BE(et*qe)}if(Ne){var Le=-1;for(De=ce;De<Ke;De++)if(Oe(ge,De)===Oe(me,-1===Le?0:De-Le)){if(-1===Le&&(Le=De),De-Le+1===be)return Le*qe}else-1!==Le&&(De-=De-Le),Le=-1}else for(ce+be>Ke&&(ce=Ke-be),De=ce;De>=0;De--){for(var Ue=!0,Ze=0;Ze<be;Ze++)if(Oe(ge,De+Ze)!==Oe(me,Ze)){Ue=!1;break}if(Ue)return De}return-1}function M(ge,me,ce,Ae){ce=Number(ce)||0;var Ne=ge.length-ce;Ae?(Ae=Number(Ae))>Ne&&(Ae=Ne):Ae=Ne;var De,qe=me.length;for(Ae>qe/2&&(Ae=qe/2),De=0;De<Ae;++De){var Ke=parseInt(me.substr(2*De,2),16);if(we(Ke))return De;ge[ce+De]=Ke}return De}function m(ge,me,ce,Ae){return ke(Ee(me,ge.length-ce),ge,ce,Ae)}function D(ge,me,ce,Ae){return ke(function(Ne){for(var De=[],qe=0;qe<Ne.length;++qe)De.push(255&Ne.charCodeAt(qe));return De}(me),ge,ce,Ae)}function S(ge,me,ce,Ae){return ke(Re(me),ge,ce,Ae)}function O(ge,me,ce,Ae){return ke(function(Ne,De){for(var qe,Ke,Oe=[],Le=0;Le<Ne.length&&!((De-=2)<0);++Le)Ke=(qe=Ne.charCodeAt(Le))>>8,Oe.push(qe%256),Oe.push(Ke);return Oe}(me,ge.length-ce),ge,ce,Ae)}function P(ge,me,ce){return v.fromByteArray(0===me&&ce===ge.length?ge:ge.slice(me,ce))}function R(ge,me,ce){ce=Math.min(ge.length,ce);for(var Ae=[],Ne=me;Ne<ce;){var De=ge[Ne],qe=null,Ke=De>239?4:De>223?3:De>191?2:1;if(Ne+Ke<=ce){var be=void 0,Oe=void 0,Le=void 0,Ue=void 0;switch(Ke){case 1:De<128&&(qe=De);break;case 2:128==(192&(be=ge[Ne+1]))&&(Ue=(31&De)<<6|63&be)>127&&(qe=Ue);break;case 3:Oe=ge[Ne+2],128==(192&(be=ge[Ne+1]))&&128==(192&Oe)&&(Ue=(15&De)<<12|(63&be)<<6|63&Oe)>2047&&(Ue<55296||Ue>57343)&&(qe=Ue);break;case 4:Oe=ge[Ne+2],Le=ge[Ne+3],128==(192&(be=ge[Ne+1]))&&128==(192&Oe)&&128==(192&Le)&&(Ue=(15&De)<<18|(63&be)<<12|(63&Oe)<<6|63&Le)>65535&&Ue<1114112&&(qe=Ue)}}null===qe?(qe=65533,Ke=1):qe>65535&&(Ae.push((qe-=65536)>>>10&1023|55296),qe=56320|1023&qe),Ae.push(qe),Ne+=Ke}return function(Ze){var We=Ze.length;if(We<=F)return String.fromCharCode.apply(String,Ze);for(var et="",nt=0;nt<We;)et+=String.fromCharCode.apply(String,Ze.slice(nt,nt+=F));return et}(Ae)}U.kMaxLength=s,(o.TYPED_ARRAY_SUPPORT=function(){try{var ge=new Uint8Array(1),me={foo:function(){return 42}};return Object.setPrototypeOf(me,Uint8Array.prototype),Object.setPrototypeOf(ge,me),42===ge.foo()}catch{return!1}}())||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(ge,me,ce){return l(ge,me,ce)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(ge,me,ce){return Ne=me,De=ce,u(Ae=ge),Ae<=0?a(Ae):void 0!==Ne?"string"==typeof De?a(Ae).fill(Ne,De):a(Ae).fill(Ne):a(Ae);var Ae,Ne,De},o.allocUnsafe=function(ge){return d(ge)},o.allocUnsafeSlow=function(ge){return d(ge)},o.isBuffer=function(ge){return null!=ge&&!0===ge._isBuffer&&ge!==o.prototype},o.compare=function(ge,me){if(Te(ge,Uint8Array)&&(ge=o.from(ge,ge.offset,ge.byteLength)),Te(me,Uint8Array)&&(me=o.from(me,me.offset,me.byteLength)),!o.isBuffer(ge)||!o.isBuffer(me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ge===me)return 0;for(var ce=ge.length,Ae=me.length,Ne=0,De=Math.min(ce,Ae);Ne<De;++Ne)if(ge[Ne]!==me[Ne]){ce=ge[Ne],Ae=me[Ne];break}return ce<Ae?-1:Ae<ce?1:0},o.isEncoding=function(ge){switch(String(ge).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(ge,me){if(!Array.isArray(ge))throw new TypeError('"list" argument must be an Array of Buffers');if(0===ge.length)return o.alloc(0);var ce;if(void 0===me)for(me=0,ce=0;ce<ge.length;++ce)me+=ge[ce].length;var Ae=o.allocUnsafe(me),Ne=0;for(ce=0;ce<ge.length;++ce){var De=ge[ce];if(Te(De,Uint8Array))Ne+De.length>Ae.length?(o.isBuffer(De)||(De=o.from(De)),De.copy(Ae,Ne)):Uint8Array.prototype.set.call(Ae,De,Ne);else{if(!o.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(Ae,Ne)}Ne+=De.length}return Ae},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var ge=this.length;if(ge%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var me=0;me<ge;me+=2)_(this,me,me+1);return this},o.prototype.swap32=function(){var ge=this.length;if(ge%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var me=0;me<ge;me+=4)_(this,me,me+3),_(this,me+1,me+2);return this},o.prototype.swap64=function(){var ge=this.length;if(ge%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var me=0;me<ge;me+=8)_(this,me,me+7),_(this,me+1,me+6),_(this,me+2,me+5),_(this,me+3,me+4);return this},o.prototype.toString=function(){var ge=this.length;return 0===ge?"":0===arguments.length?R(this,0,ge):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(ge){if(!o.isBuffer(ge))throw new TypeError("Argument must be a Buffer");return this===ge||0===o.compare(this,ge)},o.prototype.inspect=function(){var ge="",me=U.INSPECT_MAX_BYTES;return ge=this.toString("hex",0,me).replace(/(.{2})/g,"$1 ").trim(),this.length>me&&(ge+=" ... "),"<Buffer "+ge+">"},i&&(o.prototype[i]=o.prototype.inspect),o.prototype.compare=function(ge,me,ce,Ae,Ne){if(Te(ge,Uint8Array)&&(ge=o.from(ge,ge.offset,ge.byteLength)),!o.isBuffer(ge))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+T(ge));if(void 0===me&&(me=0),void 0===ce&&(ce=ge?ge.length:0),void 0===Ae&&(Ae=0),void 0===Ne&&(Ne=this.length),me<0||ce>ge.length||Ae<0||Ne>this.length)throw new RangeError("out of range index");if(Ae>=Ne&&me>=ce)return 0;if(Ae>=Ne)return-1;if(me>=ce)return 1;if(this===ge)return 0;for(var De=(Ne>>>=0)-(Ae>>>=0),qe=(ce>>>=0)-(me>>>=0),Ke=Math.min(De,qe),be=this.slice(Ae,Ne),Oe=ge.slice(me,ce),Le=0;Le<Ke;++Le)if(be[Le]!==Oe[Le]){De=be[Le],qe=Oe[Le];break}return De<qe?-1:qe<De?1:0},o.prototype.includes=function(ge,me,ce){return-1!==this.indexOf(ge,me,ce)},o.prototype.indexOf=function(ge,me,ce){return x(this,ge,me,ce,!0)},o.prototype.lastIndexOf=function(ge,me,ce){return x(this,ge,me,ce,!1)},o.prototype.write=function(ge,me,ce,Ae){if(void 0===me)Ae="utf8",ce=this.length,me=0;else if(void 0===ce&&"string"==typeof me)Ae=me,ce=this.length,me=0;else{if(!isFinite(me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");me>>>=0,isFinite(ce)?(ce>>>=0,void 0===Ae&&(Ae="utf8")):(Ae=ce,ce=void 0)}var Ne=this.length-me;if((void 0===ce||ce>Ne)&&(ce=Ne),ge.length>0&&(ce<0||me<0)||me>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var De=!1;;)switch(Ae){case"hex":return M(this,ge,me,ce);case"utf8":case"utf-8":return m(this,ge,me,ce);case"ascii":case"latin1":case"binary":return D(this,ge,me,ce);case"base64":return S(this,ge,me,ce);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,ge,me,ce);default:if(De)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),De=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function B(ge,me,ce){var Ae="";ce=Math.min(ge.length,ce);for(var Ne=me;Ne<ce;++Ne)Ae+=String.fromCharCode(127&ge[Ne]);return Ae}function J(ge,me,ce){var Ae="";ce=Math.min(ge.length,ce);for(var Ne=me;Ne<ce;++Ne)Ae+=String.fromCharCode(ge[Ne]);return Ae}function z(ge,me,ce){var Ae=ge.length;(!me||me<0)&&(me=0),(!ce||ce<0||ce>Ae)&&(ce=Ae);for(var Ne="",De=me;De<ce;++De)Ne+=je[ge[De]];return Ne}function $(ge,me,ce){for(var Ae=ge.slice(me,ce),Ne="",De=0;De<Ae.length-1;De+=2)Ne+=String.fromCharCode(Ae[De]+256*Ae[De+1]);return Ne}function G(ge,me,ce){if(ge%1!=0||ge<0)throw new RangeError("offset is not uint");if(ge+me>ce)throw new RangeError("Trying to access beyond buffer length")}function H(ge,me,ce,Ae,Ne,De){if(!o.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>Ne||me<De)throw new RangeError('"value" argument is out of bounds');if(ce+Ae>ge.length)throw new RangeError("Index out of range")}function X(ge,me,ce,Ae,Ne){fe(me,Ae,Ne,ge,ce,7);var De=Number(me&BigInt(4294967295));ge[ce++]=De,ge[ce++]=De>>=8,ge[ce++]=De>>=8,ge[ce++]=De>>=8;var qe=Number(me>>BigInt(32)&BigInt(4294967295));return ge[ce++]=qe,ge[ce++]=qe>>=8,ge[ce++]=qe>>=8,ge[ce++]=qe>>=8,ce}function K(ge,me,ce,Ae,Ne){fe(me,Ae,Ne,ge,ce,7);var De=Number(me&BigInt(4294967295));ge[ce+7]=De,ge[ce+6]=De>>=8,ge[ce+5]=De>>=8,ge[ce+4]=De>>=8;var qe=Number(me>>BigInt(32)&BigInt(4294967295));return ge[ce+3]=qe,ge[ce+2]=qe>>=8,ge[ce+1]=qe>>=8,ge[ce]=qe>>=8,ce+8}function ue(ge,me,ce,Ae,Ne,De){if(ce+Ae>ge.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("Index out of range")}function ae(ge,me,ce,Ae,Ne){return me=+me,ce>>>=0,Ne||ue(ge,0,ce,4),c.write(ge,me,ce,Ae,23,4),ce+4}function ne(ge,me,ce,Ae,Ne){return me=+me,ce>>>=0,Ne||ue(ge,0,ce,8),c.write(ge,me,ce,Ae,52,8),ce+8}o.prototype.slice=function(ge,me){var ce=this.length;(ge=~~ge)<0?(ge+=ce)<0&&(ge=0):ge>ce&&(ge=ce),(me=void 0===me?ce:~~me)<0?(me+=ce)<0&&(me=0):me>ce&&(me=ce),me<ge&&(me=ge);var Ae=this.subarray(ge,me);return Object.setPrototypeOf(Ae,o.prototype),Ae},o.prototype.readUintLE=o.prototype.readUIntLE=function(ge,me,ce){ge>>>=0,me>>>=0,ce||G(ge,me,this.length);for(var Ae=this[ge],Ne=1,De=0;++De<me&&(Ne*=256);)Ae+=this[ge+De]*Ne;return Ae},o.prototype.readUintBE=o.prototype.readUIntBE=function(ge,me,ce){ge>>>=0,me>>>=0,ce||G(ge,me,this.length);for(var Ae=this[ge+--me],Ne=1;me>0&&(Ne*=256);)Ae+=this[ge+--me]*Ne;return Ae},o.prototype.readUint8=o.prototype.readUInt8=function(ge,me){return ge>>>=0,me||G(ge,1,this.length),this[ge]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(ge,me){return ge>>>=0,me||G(ge,2,this.length),this[ge]|this[ge+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(ge,me){return ge>>>=0,me||G(ge,2,this.length),this[ge]<<8|this[ge+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),(this[ge]|this[ge+1]<<8|this[ge+2]<<16)+16777216*this[ge+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),16777216*this[ge]+(this[ge+1]<<16|this[ge+2]<<8|this[ge+3])},o.prototype.readBigUInt64LE=Ce(function(ge){he(ge>>>=0,"offset");var me=this[ge],ce=this[ge+7];void 0!==me&&void 0!==ce||pe(ge,this.length-8);var Ae=me+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,24),Ne=this[++ge]+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+ce*Math.pow(2,24);return BigInt(Ae)+(BigInt(Ne)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ce(function(ge){he(ge>>>=0,"offset");var me=this[ge],ce=this[ge+7];void 0!==me&&void 0!==ce||pe(ge,this.length-8);var Ae=me*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+this[++ge],Ne=this[++ge]*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+ce;return(BigInt(Ae)<<BigInt(32))+BigInt(Ne)}),o.prototype.readIntLE=function(ge,me,ce){ge>>>=0,me>>>=0,ce||G(ge,me,this.length);for(var Ae=this[ge],Ne=1,De=0;++De<me&&(Ne*=256);)Ae+=this[ge+De]*Ne;return Ae>=(Ne*=128)&&(Ae-=Math.pow(2,8*me)),Ae},o.prototype.readIntBE=function(ge,me,ce){ge>>>=0,me>>>=0,ce||G(ge,me,this.length);for(var Ae=me,Ne=1,De=this[ge+--Ae];Ae>0&&(Ne*=256);)De+=this[ge+--Ae]*Ne;return De>=(Ne*=128)&&(De-=Math.pow(2,8*me)),De},o.prototype.readInt8=function(ge,me){return ge>>>=0,me||G(ge,1,this.length),128&this[ge]?-1*(255-this[ge]+1):this[ge]},o.prototype.readInt16LE=function(ge,me){ge>>>=0,me||G(ge,2,this.length);var ce=this[ge]|this[ge+1]<<8;return 32768&ce?4294901760|ce:ce},o.prototype.readInt16BE=function(ge,me){ge>>>=0,me||G(ge,2,this.length);var ce=this[ge+1]|this[ge]<<8;return 32768&ce?4294901760|ce:ce},o.prototype.readInt32LE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),this[ge]|this[ge+1]<<8|this[ge+2]<<16|this[ge+3]<<24},o.prototype.readInt32BE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),this[ge]<<24|this[ge+1]<<16|this[ge+2]<<8|this[ge+3]},o.prototype.readBigInt64LE=Ce(function(ge){he(ge>>>=0,"offset");var me=this[ge],ce=this[ge+7];void 0!==me&&void 0!==ce||pe(ge,this.length-8);var Ae=this[ge+4]+this[ge+5]*Math.pow(2,8)+this[ge+6]*Math.pow(2,16)+(ce<<24);return(BigInt(Ae)<<BigInt(32))+BigInt(me+this[++ge]*Math.pow(2,8)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,24))}),o.prototype.readBigInt64BE=Ce(function(ge){he(ge>>>=0,"offset");var me=this[ge],ce=this[ge+7];void 0!==me&&void 0!==ce||pe(ge,this.length-8);var Ae=(me<<24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+this[++ge];return(BigInt(Ae)<<BigInt(32))+BigInt(this[++ge]*Math.pow(2,24)+this[++ge]*Math.pow(2,16)+this[++ge]*Math.pow(2,8)+ce)}),o.prototype.readFloatLE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),c.read(this,ge,!0,23,4)},o.prototype.readFloatBE=function(ge,me){return ge>>>=0,me||G(ge,4,this.length),c.read(this,ge,!1,23,4)},o.prototype.readDoubleLE=function(ge,me){return ge>>>=0,me||G(ge,8,this.length),c.read(this,ge,!0,52,8)},o.prototype.readDoubleBE=function(ge,me){return ge>>>=0,me||G(ge,8,this.length),c.read(this,ge,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(ge,me,ce,Ae){ge=+ge,me>>>=0,ce>>>=0,Ae||H(this,ge,me,ce,Math.pow(2,8*ce)-1,0);var Ne=1,De=0;for(this[me]=255&ge;++De<ce&&(Ne*=256);)this[me+De]=ge/Ne&255;return me+ce},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(ge,me,ce,Ae){ge=+ge,me>>>=0,ce>>>=0,Ae||H(this,ge,me,ce,Math.pow(2,8*ce)-1,0);var Ne=ce-1,De=1;for(this[me+Ne]=255&ge;--Ne>=0&&(De*=256);)this[me+Ne]=ge/De&255;return me+ce},o.prototype.writeUint8=o.prototype.writeUInt8=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,1,255,0),this[me]=255&ge,me+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,2,65535,0),this[me]=255&ge,this[me+1]=ge>>>8,me+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,2,65535,0),this[me]=ge>>>8,this[me+1]=255&ge,me+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,4,4294967295,0),this[me+3]=ge>>>24,this[me+2]=ge>>>16,this[me+1]=ge>>>8,this[me]=255&ge,me+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,4,4294967295,0),this[me]=ge>>>24,this[me+1]=ge>>>16,this[me+2]=ge>>>8,this[me+3]=255&ge,me+4},o.prototype.writeBigUInt64LE=Ce(function(ge){return X(this,ge,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ce(function(ge){return K(this,ge,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(ge,me,ce,Ae){if(ge=+ge,me>>>=0,!Ae){var Ne=Math.pow(2,8*ce-1);H(this,ge,me,ce,Ne-1,-Ne)}var De=0,qe=1,Ke=0;for(this[me]=255&ge;++De<ce&&(qe*=256);)ge<0&&0===Ke&&0!==this[me+De-1]&&(Ke=1),this[me+De]=(ge/qe>>0)-Ke&255;return me+ce},o.prototype.writeIntBE=function(ge,me,ce,Ae){if(ge=+ge,me>>>=0,!Ae){var Ne=Math.pow(2,8*ce-1);H(this,ge,me,ce,Ne-1,-Ne)}var De=ce-1,qe=1,Ke=0;for(this[me+De]=255&ge;--De>=0&&(qe*=256);)ge<0&&0===Ke&&0!==this[me+De+1]&&(Ke=1),this[me+De]=(ge/qe>>0)-Ke&255;return me+ce},o.prototype.writeInt8=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,1,127,-128),ge<0&&(ge=255+ge+1),this[me]=255&ge,me+1},o.prototype.writeInt16LE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,2,32767,-32768),this[me]=255&ge,this[me+1]=ge>>>8,me+2},o.prototype.writeInt16BE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,2,32767,-32768),this[me]=ge>>>8,this[me+1]=255&ge,me+2},o.prototype.writeInt32LE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,4,2147483647,-2147483648),this[me]=255&ge,this[me+1]=ge>>>8,this[me+2]=ge>>>16,this[me+3]=ge>>>24,me+4},o.prototype.writeInt32BE=function(ge,me,ce){return ge=+ge,me>>>=0,ce||H(this,ge,me,4,2147483647,-2147483648),ge<0&&(ge=4294967295+ge+1),this[me]=ge>>>24,this[me+1]=ge>>>16,this[me+2]=ge>>>8,this[me+3]=255&ge,me+4},o.prototype.writeBigInt64LE=Ce(function(ge){return X(this,ge,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ce(function(ge){return K(this,ge,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(ge,me,ce){return ae(this,ge,me,!0,ce)},o.prototype.writeFloatBE=function(ge,me,ce){return ae(this,ge,me,!1,ce)},o.prototype.writeDoubleLE=function(ge,me,ce){return ne(this,ge,me,!0,ce)},o.prototype.writeDoubleBE=function(ge,me,ce){return ne(this,ge,me,!1,ce)},o.prototype.copy=function(ge,me,ce,Ae){if(!o.isBuffer(ge))throw new TypeError("argument should be a Buffer");if(ce||(ce=0),Ae||0===Ae||(Ae=this.length),me>=ge.length&&(me=ge.length),me||(me=0),Ae>0&&Ae<ce&&(Ae=ce),Ae===ce||0===ge.length||0===this.length)return 0;if(me<0)throw new RangeError("targetStart out of bounds");if(ce<0||ce>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),ge.length-me<Ae-ce&&(Ae=ge.length-me+ce);var Ne=Ae-ce;return this===ge&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(me,ce,Ae):Uint8Array.prototype.set.call(ge,this.subarray(ce,Ae),me),Ne},o.prototype.fill=function(ge,me,ce,Ae){if("string"==typeof ge){if("string"==typeof me?(Ae=me,me=0,ce=this.length):"string"==typeof ce&&(Ae=ce,ce=this.length),void 0!==Ae&&"string"!=typeof Ae)throw new TypeError("encoding must be a string");if("string"==typeof Ae&&!o.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(1===ge.length){var Ne=ge.charCodeAt(0);("utf8"===Ae&&Ne<128||"latin1"===Ae)&&(ge=Ne)}}else"number"==typeof ge?ge&=255:"boolean"==typeof ge&&(ge=Number(ge));if(me<0||this.length<me||this.length<ce)throw new RangeError("Out of range index");if(ce<=me)return this;var De;if(me>>>=0,ce=void 0===ce?this.length:ce>>>0,ge||(ge=0),"number"==typeof ge)for(De=me;De<ce;++De)this[De]=ge;else{var qe=o.isBuffer(ge)?ge:o.from(ge,Ae),Ke=qe.length;if(0===Ke)throw new TypeError('The value "'+ge+'" is invalid for argument "value"');for(De=0;De<ce-me;++De)this[De+me]=qe[De%Ke]}return this};var Q={};function ie(ge,me,ce){Q[ge]=function(Ae){!function(Le,Ue){if("function"!=typeof Ue&&null!==Ue)throw new TypeError("Super expression must either be null or a function");Le.prototype=Object.create(Ue&&Ue.prototype,{constructor:{value:Le,writable:!0,configurable:!0}}),Object.defineProperty(Le,"prototype",{writable:!1}),Ue&&C(Le,Ue)}(Oe,Ae);var Ne,De,qe,Ke,be=(qe=Oe,Ke=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Le,Ue=k(qe);if(Ke){var Ze=k(this).constructor;Le=Reflect.construct(Ue,arguments,Ze)}else Le=Ue.apply(this,arguments);return function(We,et){if(et&&("object"===T(et)||"function"==typeof et))return et;if(void 0!==et)throw new TypeError("Derived constructors may only return object or undefined");return f(We)}(this,Le)});function Oe(){var Le;return function(Ue,Ze){if(!(Ue instanceof Ze))throw new TypeError("Cannot call a class as a function")}(this,Oe),Le=be.call(this),Object.defineProperty(f(Le),"message",{value:me.apply(f(Le),arguments),writable:!0,configurable:!0}),Le.name="".concat(Le.name," [").concat(ge,"]"),delete Le.name,Le}return Ne=Oe,(De=[{key:"code",get:function(){return ge},set:function(Le){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Le,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ge,"]: ").concat(this.message)}}])&&function I(ge,me){for(var ce=0;ce<me.length;ce++){var Ae=me[ce];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(ge,Ae.key,Ae)}}(Ne.prototype,De),Object.defineProperty(Ne,"prototype",{writable:!1}),Oe}(ce)}function le(ge){for(var me="",ce=ge.length,Ae="-"===ge[0]?1:0;ce>=Ae+4;ce-=3)me="_".concat(ge.slice(ce-3,ce)).concat(me);return"".concat(ge.slice(0,ce)).concat(me)}function fe(ge,me,ce,Ae,Ne,De){if(ge>ce||ge<me){var qe,Ke="bigint"==typeof me?"n":"";throw qe=De>3?0===me||me===BigInt(0)?">= 0".concat(Ke," and < 2").concat(Ke," ** ").concat(8*(De+1)).concat(Ke):">= -(2".concat(Ke," ** ").concat(8*(De+1)-1).concat(Ke,") and < 2 ** ")+"".concat(8*(De+1)-1).concat(Ke):">= ".concat(me).concat(Ke," and <= ").concat(ce).concat(Ke),new Q.ERR_OUT_OF_RANGE("value",qe,ge)}var be,Oe,Le;be=Ae,Le=De,he(Oe=Ne,"offset"),void 0!==be[Oe]&&void 0!==be[Oe+Le]||pe(Oe,be.length-(Le+1))}function he(ge,me){if("number"!=typeof ge)throw new Q.ERR_INVALID_ARG_TYPE(me,"number",ge)}function pe(ge,me,ce){throw Math.floor(ge)!==ge?(he(ge,ce),new Q.ERR_OUT_OF_RANGE(ce||"offset","an integer",ge)):me<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(ce||"offset",">= ".concat(ce?1:0," and <= ").concat(me),ge)}ie("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?"".concat(ge," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),ie("ERR_INVALID_ARG_TYPE",function(ge,me){return'The "'.concat(ge,'" argument must be of type number. Received type ').concat(T(me))},TypeError),ie("ERR_OUT_OF_RANGE",function(ge,me,ce){var Ae='The value of "'.concat(ge,'" is out of range.'),Ne=ce;return Number.isInteger(ce)&&Math.abs(ce)>Math.pow(2,32)?Ne=le(String(ce)):"bigint"==typeof ce&&(Ne=String(ce),(ce>Math.pow(BigInt(2),BigInt(32))||ce<-Math.pow(BigInt(2),BigInt(32)))&&(Ne=le(Ne)),Ne+="n"),Ae+" It must be ".concat(me,". Received ").concat(Ne)},RangeError);var xe=/[^+/0-9A-Za-z-_]/g;function Ee(ge,me){var ce;me=me||1/0;for(var Ae=ge.length,Ne=null,De=[],qe=0;qe<Ae;++qe){if((ce=ge.charCodeAt(qe))>55295&&ce<57344){if(!Ne){if(ce>56319){(me-=3)>-1&&De.push(239,191,189);continue}if(qe+1===Ae){(me-=3)>-1&&De.push(239,191,189);continue}Ne=ce;continue}if(ce<56320){(me-=3)>-1&&De.push(239,191,189),Ne=ce;continue}ce=65536+(Ne-55296<<10|ce-56320)}else Ne&&(me-=3)>-1&&De.push(239,191,189);if(Ne=null,ce<128){if((me-=1)<0)break;De.push(ce)}else if(ce<2048){if((me-=2)<0)break;De.push(ce>>6|192,63&ce|128)}else if(ce<65536){if((me-=3)<0)break;De.push(ce>>12|224,ce>>6&63|128,63&ce|128)}else{if(!(ce<1114112))throw new Error("Invalid code point");if((me-=4)<0)break;De.push(ce>>18|240,ce>>12&63|128,ce>>6&63|128,63&ce|128)}}return De}function Re(ge){return v.toByteArray(function(me){if((me=(me=me.split("=")[0]).trim().replace(xe,"")).length<2)return"";for(;me.length%4!=0;)me+="=";return me}(ge))}function ke(ge,me,ce,Ae){var Ne;for(Ne=0;Ne<Ae&&!(Ne+ce>=me.length||Ne>=ge.length);++Ne)me[Ne+ce]=ge[Ne];return Ne}function Te(ge,me){return ge instanceof me||null!=ge&&null!=ge.constructor&&null!=ge.constructor.name&&ge.constructor.name===me.name}function we(ge){return ge!=ge}var je=function(){for(var ge="0123456789abcdef",me=new Array(256),ce=0;ce<16;++ce)for(var Ae=16*ce,Ne=0;Ne<16;++Ne)me[Ae+Ne]=ge[ce]+ge[Ne];return me}();function Ce(ge){return typeof BigInt>"u"?Ie:ge}function Ie(){throw new Error("BigInt not supported")}},35791:function(se){"use strict";se.exports=C,se.exports.isMobile=C,se.exports.default=C;var U=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,I=/android|ipad|playbook|silk/i;function C(f){f||(f={});var k=f.ua;if(k||typeof navigator>"u"||(k=navigator.userAgent),k&&k.headers&&"string"==typeof k.headers["user-agent"]&&(k=k.headers["user-agent"]),"string"!=typeof k)return!1;var T=U.test(k)&&!r.test(k)||!!f.tablet&&I.test(k);return!T&&f.tablet&&f.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==k.indexOf("Macintosh")&&-1!==k.indexOf("Safari")&&(T=!0),T}},86781:function(se,U,r){"use strict";r.r(U),r.d(U,{sankeyCenter:function(){return a},sankeyCircular:function(){return P},sankeyJustify:function(){return s},sankeyLeft:function(){return c},sankeyRight:function(){return i}});var I=r(33064),C=r(15140),f=r(45879),k=r(2502),T=r.n(k);function v(ke){return ke.target.depth}function c(ke){return ke.depth}function i(ke,Te){return Te-1-ke.height}function s(ke,Te){return ke.sourceLinks.length?ke.depth:Te-1}function a(ke){return ke.targetLinks.length?ke.depth:ke.sourceLinks.length?(0,I.VV)(ke.sourceLinks,v)-1:0}function o(ke){return function(){return ke}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ke){return typeof ke}:function(ke){return ke&&"function"==typeof Symbol&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke};function u(ke,Te){return g(ke.source,Te.source)||ke.index-Te.index}function d(ke,Te){return g(ke.target,Te.target)||ke.index-Te.index}function g(ke,Te){return ke.partOfCycle===Te.partOfCycle?ke.y0-Te.y0:"top"===ke.circularLinkType||"bottom"===Te.circularLinkType?-1:1}function h(ke){return ke.value}function w(ke){return(ke.y0+ke.y1)/2}function y(ke){return w(ke.source)}function p(ke){return w(ke.target)}function _(ke){return ke.index}function x(ke){return ke.nodes}function b(ke){return ke.links}function M(ke,Te){var we=ke.get(Te);if(!we)throw new Error("missing: "+Te);return we}function m(ke,Te){return Te(ke)}var D=25,S=10,O=.3;function P(){var ke,Te,we=0,je=0,Ce=1,Ie=1,ge=24,me=_,ce=s,Ae=x,Ne=b,De=32,qe=2,Ke=null;function be(){var Le={nodes:Ae.apply(null,arguments),links:Ne.apply(null,arguments)};(function(Ze){Ze.nodes.forEach(function(et,nt){et.index=nt,et.sourceLinks=[],et.targetLinks=[]});var We=(0,C.UI)(Ze.nodes,me);Ze.links.forEach(function(et,nt){et.index=nt;var ct=et.source,yt=et.target;"object"!==(void 0===ct?"undefined":l(ct))&&(ct=et.source=M(We,ct)),"object"!==(void 0===yt?"undefined":l(yt))&&(yt=et.target=M(We,yt)),ct.sourceLinks.push(et),yt.targetLinks.push(et)})})(Le),function(Ze,We,et){var nt=0;if(null===et){for(var ct=[],yt=0;yt<Ze.links.length;yt++){var ut=Ze.links[yt],Ct=ut.source.index,Dt=ut.target.index;ct[Ct]||(ct[Ct]=[]),ct[Dt]||(ct[Dt]=[]),-1===ct[Ct].indexOf(Dt)&&ct[Ct].push(Dt)}var vt=T()(ct);vt.sort(function(Ft,Rt){return Ft.length-Rt.length});var mt={};for(yt=0;yt<vt.length;yt++){var Lt=vt[yt].slice(-2);mt[Lt[0]]||(mt[Lt[0]]={}),mt[Lt[0]][Lt[1]]=!0}Ze.links.forEach(function(Ft){var Rt=Ft.target.index,Wt=Ft.source.index;Rt===Wt||mt[Wt]&&mt[Wt][Rt]?(Ft.circular=!0,Ft.circularLinkID=nt,nt+=1):Ft.circular=!1})}else Ze.links.forEach(function(Ft){Ft.source[et]<Ft.target[et]?Ft.circular=!1:(Ft.circular=!0,Ft.circularLinkID=nt,nt+=1)})}(Le,0,Ke),Le.nodes.forEach(function(We){We.partOfCycle=!1,We.value=Math.max((0,I.Sm)(We.sourceLinks,h),(0,I.Sm)(We.targetLinks,h)),We.sourceLinks.forEach(function(et){et.circular&&(We.partOfCycle=!0,We.circularLinkType=et.circularLinkType)}),We.targetLinks.forEach(function(et){et.circular&&(We.partOfCycle=!0,We.circularLinkType=et.circularLinkType)})}),function(Ze){var We,et,nt;for(We=Ze.nodes,et=[],nt=0;We.length;++nt,We=et,et=[])We.forEach(function(ct){ct.depth=nt,ct.sourceLinks.forEach(function(yt){et.indexOf(yt.target)<0&&!yt.circular&&et.push(yt.target)})});for(We=Ze.nodes,et=[],nt=0;We.length;++nt,We=et,et=[])We.forEach(function(ct){ct.height=nt,ct.targetLinks.forEach(function(yt){et.indexOf(yt.source)<0&&!yt.circular&&et.push(yt.source)})});Ze.nodes.forEach(function(ct){ct.column=Math.floor(ce.call(null,ct,nt))})}(Le),R(Le,me),function(Ze,We,et){var nt=(0,C.b1)().key(function(Dt){return Dt.column}).sortKeys(I.j2).entries(Ze.nodes).map(function(Dt){return Dt.values});(function(Dt){if(Te){var vt=1/0;nt.forEach(function(Rt){var Wt=Ie*Te/(Rt.length+1);vt=Wt<vt?Wt:vt}),ke=vt}var mt=(0,I.VV)(nt,function(Rt){return(Ie-je-(Rt.length-1)*ke)/(0,I.Sm)(Rt,h)});mt*=O,Ze.links.forEach(function(Rt){Rt.width=Rt.value*mt});var Rt,Wt,Ht,it,st,Je,Lt=(Wt=0,Ht=0,it=0,st=0,Je=(0,I.Fp)((Rt=Ze).nodes,function(ot){return ot.column}),Rt.links.forEach(function(ot){ot.circular&&("top"==ot.circularLinkType?Wt+=ot.width:Ht+=ot.width,0==ot.target.column&&(st+=ot.width),ot.source.column==Je&&(it+=ot.width))}),{top:Wt=Wt>0?Wt+D+S:Wt,bottom:Ht=Ht>0?Ht+D+S:Ht,left:st=st>0?st+D+S:st,right:it=it>0?it+D+S:it}),Ft=function(Rt,Wt){var Ht=(0,I.Fp)(Rt.nodes,function(pt){return pt.column}),it=Ce-we,st=Ie-je,Je=it/(it+Wt.right+Wt.left),ot=st/(st+Wt.top+Wt.bottom);return we=we*Je+Wt.left,Ce=0==Wt.right?Ce:Ce*Je,je=je*ot+Wt.top,Ie*=ot,Rt.nodes.forEach(function(pt){pt.x0=we+pt.column*((Ce-we-ge)/Ht),pt.x1=pt.x0+ge}),ot}(Ze,Lt);mt*=Ft,Ze.links.forEach(function(Rt){Rt.width=Rt.value*mt}),nt.forEach(function(Rt){var Wt=Rt.length;Rt.forEach(function(Ht,it){Ht.depth==nt.length-1&&1==Wt||0==Ht.depth&&1==Wt?(Ht.y0=Ie/2-Ht.value*mt,Ht.y1=Ht.y0+Ht.value*mt):Ht.partOfCycle?0==B(Ht,Dt)?(Ht.y0=Ie/2+it,Ht.y1=Ht.y0+Ht.value*mt):"top"==Ht.circularLinkType?(Ht.y0=je+it,Ht.y1=Ht.y0+Ht.value*mt):(Ht.y0=Ie-Ht.value*mt-it,Ht.y1=Ht.y0+Ht.value*mt):0==Lt.top||0==Lt.bottom?(Ht.y0=(Ie-je)/Wt*it,Ht.y1=Ht.y0+Ht.value*mt):(Ht.y0=(Ie-je)/2-Wt/2+it,Ht.y1=Ht.y0+Ht.value*mt)})})})(et),Ct();for(var ct=1,yt=We;yt>0;--yt)ut(ct*=.99,et),Ct();function ut(Dt,vt){var mt=nt.length;nt.forEach(function(Lt){var Ft=Lt.length,Rt=Lt[0].depth;Lt.forEach(function(Wt){var Ht;if((Wt.sourceLinks.length||Wt.targetLinks.length)&&!(Wt.partOfCycle&&B(Wt,vt)>0))if(0==Rt&&1==Ft)Wt.y0=Ie/2-(Ht=Wt.y1-Wt.y0)/2,Wt.y1=Ie/2+Ht/2;else if(Rt==mt-1&&1==Ft)Wt.y0=Ie/2-(Ht=Wt.y1-Wt.y0)/2,Wt.y1=Ie/2+Ht/2;else{var it=(0,I.J6)(Wt.sourceLinks,p),st=(0,I.J6)(Wt.targetLinks,y),Je=((it&&st?(it+st)/2:it||st)-w(Wt))*Dt;Wt.y0+=Je,Wt.y1+=Je}})})}function Ct(){nt.forEach(function(Dt){var vt,mt,Lt,Ft=je,Rt=Dt.length;for(Dt.sort(g),Lt=0;Lt<Rt;++Lt)(mt=Ft-(vt=Dt[Lt]).y0)>0&&(vt.y0+=mt,vt.y1+=mt),Ft=vt.y1+ke;if((mt=Ft-ke-Ie)>0)for(Ft=vt.y0-=mt,vt.y1-=mt,Lt=Rt-2;Lt>=0;--Lt)(mt=(vt=Dt[Lt]).y1+ke-Ft)>0&&(vt.y0-=mt,vt.y1-=mt),Ft=vt.y0})}}(Le,De,me),Oe(Le);for(var Ue=0;Ue<4;Ue++)he(Le,Ie,me),pe(Le,0,me),le(Le,je,Ie,me),he(Le,Ie,me),pe(Le,0,me);return function(Ze,We,et){var nt=Ze.nodes,ct=Ze.links,yt=!1,ut=!1;if(ct.forEach(function(vt){"top"==vt.circularLinkType?yt=!0:"bottom"==vt.circularLinkType&&(ut=!0)}),0==yt||0==ut){var Ct=(0,I.VV)(nt,function(vt){return vt.y0}),Dt=(et-We)/((0,I.Fp)(nt,function(vt){return vt.y1})-Ct);nt.forEach(function(vt){var mt=(vt.y1-vt.y0)*Dt;vt.y0=(vt.y0-Ct)*Dt,vt.y1=vt.y0+mt}),ct.forEach(function(vt){vt.y0=(vt.y0-Ct)*Dt,vt.y1=(vt.y1-Ct)*Dt,vt.width=vt.width*Dt})}}(Le,je,Ie),$(Le,qe,Ie,me),Le}function Oe(Le){Le.nodes.forEach(function(Ue){Ue.sourceLinks.sort(d),Ue.targetLinks.sort(u)}),Le.nodes.forEach(function(Ue){var Ze=Ue.y0,We=Ze,et=Ue.y1,nt=et;Ue.sourceLinks.forEach(function(ct){ct.circular?(ct.y0=et-ct.width/2,et-=ct.width):(ct.y0=Ze+ct.width/2,Ze+=ct.width)}),Ue.targetLinks.forEach(function(ct){ct.circular?(ct.y1=nt-ct.width/2,nt-=ct.width):(ct.y1=We+ct.width/2,We+=ct.width)})})}return be.nodeId=function(Le){return arguments.length?(me="function"==typeof Le?Le:o(Le),be):me},be.nodeAlign=function(Le){return arguments.length?(ce="function"==typeof Le?Le:o(Le),be):ce},be.nodeWidth=function(Le){return arguments.length?(ge=+Le,be):ge},be.nodePadding=function(Le){return arguments.length?(ke=+Le,be):ke},be.nodes=function(Le){return arguments.length?(Ae="function"==typeof Le?Le:o(Le),be):Ae},be.links=function(Le){return arguments.length?(Ne="function"==typeof Le?Le:o(Le),be):Ne},be.size=function(Le){return arguments.length?(we=je=0,Ce=+Le[0],Ie=+Le[1],be):[Ce-we,Ie-je]},be.extent=function(Le){return arguments.length?(we=+Le[0][0],Ce=+Le[1][0],je=+Le[0][1],Ie=+Le[1][1],be):[[we,je],[Ce,Ie]]},be.iterations=function(Le){return arguments.length?(De=+Le,be):De},be.circularLinkGap=function(Le){return arguments.length?(qe=+Le,be):qe},be.nodePaddingRatio=function(Le){return arguments.length?(Te=+Le,be):Te},be.sortNodes=function(Le){return arguments.length?(Ke=Le,be):Ke},be.update=function(Le){return R(Le,me),Oe(Le),Le.links.forEach(function(Ue){Ue.circular&&(Ue.circularLinkType=Ue.y0+Ue.y1<Ie?"top":"bottom",Ue.source.circularLinkType=Ue.circularLinkType,Ue.target.circularLinkType=Ue.circularLinkType)}),he(Le,Ie,me,!1),pe(Le,0,me),$(Le,qe,Ie,me),Le},be}function R(ke,Te){var we=0,je=0;ke.links.forEach(function(Ce){Ce.circular&&(Ce.circularLinkType=Ce.source.circularLinkType||Ce.target.circularLinkType?Ce.source.circularLinkType?Ce.source.circularLinkType:Ce.target.circularLinkType:we<je?"top":"bottom","top"==Ce.circularLinkType?we+=1:je+=1,ke.nodes.forEach(function(Ie){m(Ie,Te)!=m(Ce.source,Te)&&m(Ie,Te)!=m(Ce.target,Te)||(Ie.circularLinkType=Ce.circularLinkType)}))}),ke.links.forEach(function(Ce){Ce.circular&&(Ce.source.circularLinkType==Ce.target.circularLinkType&&(Ce.circularLinkType=Ce.source.circularLinkType),Re(Ce,Te)&&(Ce.circularLinkType=Ce.source.circularLinkType))})}function F(ke){var Te=Math.abs(ke.y1-ke.y0),we=Math.abs(ke.target.x0-ke.source.x1);return Math.atan(we/Te)}function B(ke,Te){var we=0;ke.sourceLinks.forEach(function(Ce){we=Ce.circular&&!Re(Ce,Te)?we+1:we});var je=0;return ke.targetLinks.forEach(function(Ce){je=Ce.circular&&!Re(Ce,Te)?je+1:je}),we+je}function J(ke){var we=0;ke.source.sourceLinks.forEach(function(Ie){we=Ie.circular?we+1:we});var Ce=0;return ke.target.targetLinks.forEach(function(Ie){Ce=Ie.circular?Ce+1:Ce}),!(we>1||Ce>1)}function z(ke,Te,we){return ke.sort(G),ke.forEach(function(je,Ce){var Ie,ge,me=0;if(Re(je,we)&&J(je))je.circularPathData.verticalBuffer=me+je.width/2;else{for(var ce=0;ce<Ce;ce++)if(!((Ie=ke[Ce]).source.column<(ge=ke[ce]).target.column||Ie.target.column>ge.source.column)){var Ae=ke[ce].circularPathData.verticalBuffer+ke[ce].width/2+Te;me=Ae>me?Ae:me}je.circularPathData.verticalBuffer=me+je.width/2}}),ke}function $(ke,Te,we,je){var Ce=(0,I.VV)(ke.links,function(Ie){return Ie.source.y0});ke.links.forEach(function(Ie){Ie.circular&&(Ie.circularPathData={})}),z(ke.links.filter(function(Ie){return"top"==Ie.circularLinkType}),Te,je),z(ke.links.filter(function(Ie){return"bottom"==Ie.circularLinkType}),Te,je),ke.links.forEach(function(Ie){if(Ie.circular){if(Ie.circularPathData.arcRadius=Ie.width+S,Ie.circularPathData.leftNodeBuffer=5,Ie.circularPathData.rightNodeBuffer=5,Ie.circularPathData.sourceWidth=Ie.source.x1-Ie.source.x0,Ie.circularPathData.sourceX=Ie.source.x0+Ie.circularPathData.sourceWidth,Ie.circularPathData.targetX=Ie.target.x0,Ie.circularPathData.sourceY=Ie.y0,Ie.circularPathData.targetY=Ie.y1,Re(Ie,je)&&J(Ie))Ie.circularPathData.leftSmallArcRadius=S+Ie.width/2,Ie.circularPathData.leftLargeArcRadius=S+Ie.width/2,Ie.circularPathData.rightSmallArcRadius=S+Ie.width/2,Ie.circularPathData.rightLargeArcRadius=S+Ie.width/2,"bottom"==Ie.circularLinkType?(Ie.circularPathData.verticalFullExtent=Ie.source.y1+D+Ie.circularPathData.verticalBuffer,Ie.circularPathData.verticalLeftInnerExtent=Ie.circularPathData.verticalFullExtent-Ie.circularPathData.leftLargeArcRadius,Ie.circularPathData.verticalRightInnerExtent=Ie.circularPathData.verticalFullExtent-Ie.circularPathData.rightLargeArcRadius):(Ie.circularPathData.verticalFullExtent=Ie.source.y0-D-Ie.circularPathData.verticalBuffer,Ie.circularPathData.verticalLeftInnerExtent=Ie.circularPathData.verticalFullExtent+Ie.circularPathData.leftLargeArcRadius,Ie.circularPathData.verticalRightInnerExtent=Ie.circularPathData.verticalFullExtent+Ie.circularPathData.rightLargeArcRadius);else{var ge=Ie.source.column,me=Ie.circularLinkType,ce=ke.links.filter(function(De){return De.source.column==ge&&De.circularLinkType==me});ce.sort("bottom"==Ie.circularLinkType?X:H);var Ae=0;ce.forEach(function(De,qe){De.circularLinkID==Ie.circularLinkID&&(Ie.circularPathData.leftSmallArcRadius=S+Ie.width/2+Ae,Ie.circularPathData.leftLargeArcRadius=S+Ie.width/2+qe*Te+Ae),Ae+=De.width}),ge=Ie.target.column,(ce=ke.links.filter(function(De){return De.target.column==ge&&De.circularLinkType==me})).sort("bottom"==Ie.circularLinkType?ue:K),Ae=0,ce.forEach(function(De,qe){De.circularLinkID==Ie.circularLinkID&&(Ie.circularPathData.rightSmallArcRadius=S+Ie.width/2+Ae,Ie.circularPathData.rightLargeArcRadius=S+Ie.width/2+qe*Te+Ae),Ae+=De.width}),"bottom"==Ie.circularLinkType?(Ie.circularPathData.verticalFullExtent=Math.max(we,Ie.source.y1,Ie.target.y1)+D+Ie.circularPathData.verticalBuffer,Ie.circularPathData.verticalLeftInnerExtent=Ie.circularPathData.verticalFullExtent-Ie.circularPathData.leftLargeArcRadius,Ie.circularPathData.verticalRightInnerExtent=Ie.circularPathData.verticalFullExtent-Ie.circularPathData.rightLargeArcRadius):(Ie.circularPathData.verticalFullExtent=Ce-D-Ie.circularPathData.verticalBuffer,Ie.circularPathData.verticalLeftInnerExtent=Ie.circularPathData.verticalFullExtent+Ie.circularPathData.leftLargeArcRadius,Ie.circularPathData.verticalRightInnerExtent=Ie.circularPathData.verticalFullExtent+Ie.circularPathData.rightLargeArcRadius)}Ie.circularPathData.leftInnerExtent=Ie.circularPathData.sourceX+Ie.circularPathData.leftNodeBuffer,Ie.circularPathData.rightInnerExtent=Ie.circularPathData.targetX-Ie.circularPathData.rightNodeBuffer,Ie.circularPathData.leftFullExtent=Ie.circularPathData.sourceX+Ie.circularPathData.leftLargeArcRadius+Ie.circularPathData.leftNodeBuffer,Ie.circularPathData.rightFullExtent=Ie.circularPathData.targetX-Ie.circularPathData.rightLargeArcRadius-Ie.circularPathData.rightNodeBuffer}if(Ie.circular)Ie.path="top"==(De=Ie).circularLinkType?"M"+De.circularPathData.sourceX+" "+De.circularPathData.sourceY+" L"+De.circularPathData.leftInnerExtent+" "+De.circularPathData.sourceY+" A"+De.circularPathData.leftLargeArcRadius+" "+De.circularPathData.leftSmallArcRadius+" 0 0 0 "+De.circularPathData.leftFullExtent+" "+(De.circularPathData.sourceY-De.circularPathData.leftSmallArcRadius)+" L"+De.circularPathData.leftFullExtent+" "+De.circularPathData.verticalLeftInnerExtent+" A"+De.circularPathData.leftLargeArcRadius+" "+De.circularPathData.leftLargeArcRadius+" 0 0 0 "+De.circularPathData.leftInnerExtent+" "+De.circularPathData.verticalFullExtent+" L"+De.circularPathData.rightInnerExtent+" "+De.circularPathData.verticalFullExtent+" A"+De.circularPathData.rightLargeArcRadius+" "+De.circularPathData.rightLargeArcRadius+" 0 0 0 "+De.circularPathData.rightFullExtent+" "+De.circularPathData.verticalRightInnerExtent+" L"+De.circularPathData.rightFullExtent+" "+(De.circularPathData.targetY-De.circularPathData.rightSmallArcRadius)+" A"+De.circularPathData.rightLargeArcRadius+" "+De.circularPathData.rightSmallArcRadius+" 0 0 0 "+De.circularPathData.rightInnerExtent+" "+De.circularPathData.targetY+" L"+De.circularPathData.targetX+" "+De.circularPathData.targetY:"M"+De.circularPathData.sourceX+" "+De.circularPathData.sourceY+" L"+De.circularPathData.leftInnerExtent+" "+De.circularPathData.sourceY+" A"+De.circularPathData.leftLargeArcRadius+" "+De.circularPathData.leftSmallArcRadius+" 0 0 1 "+De.circularPathData.leftFullExtent+" "+(De.circularPathData.sourceY+De.circularPathData.leftSmallArcRadius)+" L"+De.circularPathData.leftFullExtent+" "+De.circularPathData.verticalLeftInnerExtent+" A"+De.circularPathData.leftLargeArcRadius+" "+De.circularPathData.leftLargeArcRadius+" 0 0 1 "+De.circularPathData.leftInnerExtent+" "+De.circularPathData.verticalFullExtent+" L"+De.circularPathData.rightInnerExtent+" "+De.circularPathData.verticalFullExtent+" A"+De.circularPathData.rightLargeArcRadius+" "+De.circularPathData.rightLargeArcRadius+" 0 0 1 "+De.circularPathData.rightFullExtent+" "+De.circularPathData.verticalRightInnerExtent+" L"+De.circularPathData.rightFullExtent+" "+(De.circularPathData.targetY+De.circularPathData.rightSmallArcRadius)+" A"+De.circularPathData.rightLargeArcRadius+" "+De.circularPathData.rightSmallArcRadius+" 0 0 1 "+De.circularPathData.rightInnerExtent+" "+De.circularPathData.targetY+" L"+De.circularPathData.targetX+" "+De.circularPathData.targetY;else{var Ne=(0,f.h5)().source(function(De){return[De.source.x0+(De.source.x1-De.source.x0),De.y0]}).target(function(De){return[De.target.x0,De.y1]});Ie.path=Ne(Ie)}var De})}function G(ke,Te){return ae(ke)==ae(Te)?"bottom"==ke.circularLinkType?X(ke,Te):H(ke,Te):ae(Te)-ae(ke)}function H(ke,Te){return ke.y0-Te.y0}function X(ke,Te){return Te.y0-ke.y0}function K(ke,Te){return ke.y1-Te.y1}function ue(ke,Te){return Te.y1-ke.y1}function ae(ke){return ke.target.column-ke.source.column}function ne(ke){return ke.target.x0-ke.source.x1}function Q(ke,Te){var we=F(ke),je=ne(Te)/Math.tan(we);return"up"==Ee(ke)?ke.y1+je:ke.y1-je}function ie(ke,Te){var we=F(ke),je=ne(Te)/Math.tan(we);return"up"==Ee(ke)?ke.y1-je:ke.y1+je}function le(ke,Te,we,je){ke.links.forEach(function(Ce){if(!Ce.circular&&Ce.target.column-Ce.source.column>1){var Ie=Ce.source.column+1,ge=Ce.target.column-1,me=1,ce=ge-Ie+1;for(me=1;Ie<=ge;Ie++,me++)ke.nodes.forEach(function(Ae){if(Ae.column==Ie){var Ne,De=me/(ce+1),qe=Math.pow(1-De,3),Ke=3*De*Math.pow(1-De,2),be=3*Math.pow(De,2)*(1-De),Oe=Math.pow(De,3),Le=qe*Ce.y0+Ke*Ce.y0+be*Ce.y1+Oe*Ce.y1,Ue=Le-Ce.width/2,Ze=Le+Ce.width/2;Ue>Ae.y0&&Ue<Ae.y1?(Ne=Ae.y1-Ue+10,Ae=fe(Ae,Ne="bottom"==Ae.circularLinkType?Ne:-Ne,Te,we),ke.nodes.forEach(function(We){var et,nt;m(We,je)!=m(Ae,je)&&We.column==Ae.column&&((et=Ae).y0>(nt=We).y0&&et.y0<nt.y1||et.y1>nt.y0&&et.y1<nt.y1||et.y0<nt.y0&&et.y1>nt.y1)&&fe(We,Ne,Te,we)})):(Ze>Ae.y0&&Ze<Ae.y1||Ue<Ae.y0&&Ze>Ae.y1)&&(Ae=fe(Ae,Ne=Ze-Ae.y0+10,Te,we),ke.nodes.forEach(function(We){m(We,je)!=m(Ae,je)&&We.column==Ae.column&&We.y0<Ae.y1&&We.y1>Ae.y1&&fe(We,Ne,Te,we)}))}})}})}function fe(ke,Te,we,je){return ke.y0+Te>=we&&ke.y1+Te<=je&&(ke.y0=ke.y0+Te,ke.y1=ke.y1+Te,ke.targetLinks.forEach(function(Ce){Ce.y1=Ce.y1+Te}),ke.sourceLinks.forEach(function(Ce){Ce.y0=Ce.y0+Te})),ke}function he(ke,Te,we,je){ke.nodes.forEach(function(Ce){je&&Ce.y+(Ce.y1-Ce.y0)>Te&&(Ce.y=Ce.y-(Ce.y+(Ce.y1-Ce.y0)-Te));var Ie=ke.links.filter(function(ce){return m(ce.source,we)==m(Ce,we)}),ge=Ie.length;ge>1&&Ie.sort(function(ce,Ae){if(!ce.circular&&!Ae.circular){if(ce.target.column==Ae.target.column||!xe(ce,Ae))return ce.y1-Ae.y1;if(ce.target.column>Ae.target.column){var Ne=ie(Ae,ce);return ce.y1-Ne}if(Ae.target.column>ce.target.column)return ie(ce,Ae)-Ae.y1}return ce.circular&&!Ae.circular?"top"==ce.circularLinkType?-1:1:Ae.circular&&!ce.circular?"top"==Ae.circularLinkType?1:-1:ce.circular&&Ae.circular?ce.circularLinkType===Ae.circularLinkType&&"top"==ce.circularLinkType?ce.target.column===Ae.target.column?ce.target.y1-Ae.target.y1:Ae.target.column-ce.target.column:ce.circularLinkType===Ae.circularLinkType&&"bottom"==ce.circularLinkType?ce.target.column===Ae.target.column?Ae.target.y1-ce.target.y1:ce.target.column-Ae.target.column:"top"==ce.circularLinkType?-1:1:void 0});var me=Ce.y0;Ie.forEach(function(ce){ce.y0=me+ce.width/2,me+=ce.width}),Ie.forEach(function(ce,Ae){if("bottom"==ce.circularLinkType){for(var Ne=Ae+1,De=0;Ne<ge;Ne++)De+=Ie[Ne].width;ce.y0=Ce.y1-De-ce.width/2}})})}function pe(ke,Te,we){ke.nodes.forEach(function(je){var Ce=ke.links.filter(function(me){return m(me.target,we)==m(je,we)}),Ie=Ce.length;Ie>1&&Ce.sort(function(me,ce){if(!me.circular&&!ce.circular){if(me.source.column==ce.source.column||!xe(me,ce))return me.y0-ce.y0;if(ce.source.column<me.source.column){var Ae=Q(ce,me);return me.y0-Ae}if(me.source.column<ce.source.column)return Q(me,ce)-ce.y0}return me.circular&&!ce.circular?"top"==me.circularLinkType?-1:1:ce.circular&&!me.circular?"top"==ce.circularLinkType?1:-1:me.circular&&ce.circular?me.circularLinkType===ce.circularLinkType&&"top"==me.circularLinkType?me.source.column===ce.source.column?me.source.y1-ce.source.y1:me.source.column-ce.source.column:me.circularLinkType===ce.circularLinkType&&"bottom"==me.circularLinkType?me.source.column===ce.source.column?me.source.y1-ce.source.y1:ce.source.column-me.source.column:"top"==me.circularLinkType?-1:1:void 0});var ge=je.y0;Ce.forEach(function(me){me.y1=ge+me.width/2,ge+=me.width}),Ce.forEach(function(me,ce){if("bottom"==me.circularLinkType){for(var Ae=ce+1,Ne=0;Ae<Ie;Ae++)Ne+=Ce[Ae].width;me.y1=je.y1-Ne-me.width/2}})})}function xe(ke,Te){return Ee(ke)==Ee(Te)}function Ee(ke){return ke.y0-ke.y1>0?"up":"down"}function Re(ke,Te){return m(ke.source,Te)==m(ke.target,Te)}},30838:function(se,U,r){"use strict";r.r(U),r.d(U,{sankey:function(){return _},sankeyCenter:function(){return c},sankeyJustify:function(){return v},sankeyLeft:function(){return k},sankeyLinkHorizontal:function(){return m},sankeyRight:function(){return T}});var I=r(33064),C=r(15140);function f(D){return D.target.depth}function k(D){return D.depth}function T(D,S){return S-1-D.height}function v(D,S){return D.sourceLinks.length?D.depth:S-1}function c(D){return D.targetLinks.length?D.depth:D.sourceLinks.length?(0,I.VV)(D.sourceLinks,f)-1:0}function i(D){return function(){return D}}function s(D,S){return o(D.source,S.source)||D.index-S.index}function a(D,S){return o(D.target,S.target)||D.index-S.index}function o(D,S){return D.y0-S.y0}function l(D){return D.value}function u(D){return(D.y0+D.y1)/2}function d(D){return u(D.source)*D.value}function g(D){return u(D.target)*D.value}function h(D){return D.index}function w(D){return D.nodes}function y(D){return D.links}function p(D,S){var O=D.get(S);if(!O)throw new Error("missing: "+S);return O}function _(){var D=0,S=0,O=1,P=1,R=24,F=8,B=h,J=v,z=w,$=y,G=32;function H(){var K={nodes:z.apply(null,arguments),links:$.apply(null,arguments)};return function(ue){ue.nodes.forEach(function(ne,Q){ne.index=Q,ne.sourceLinks=[],ne.targetLinks=[]});var ae=(0,C.UI)(ue.nodes,B);ue.links.forEach(function(ne,Q){ne.index=Q;var ie=ne.source,le=ne.target;"object"!=typeof ie&&(ie=ne.source=p(ae,ie)),"object"!=typeof le&&(le=ne.target=p(ae,le)),ie.sourceLinks.push(ne),le.targetLinks.push(ne)})}(K),K.nodes.forEach(function(ae){ae.value=Math.max((0,I.Sm)(ae.sourceLinks,l),(0,I.Sm)(ae.targetLinks,l))}),function(ue){var ae,ne,Q;for(ae=ue.nodes,ne=[],Q=0;ae.length;++Q,ae=ne,ne=[])ae.forEach(function(le){le.depth=Q,le.sourceLinks.forEach(function(fe){ne.indexOf(fe.target)<0&&ne.push(fe.target)})});for(ae=ue.nodes,ne=[],Q=0;ae.length;++Q,ae=ne,ne=[])ae.forEach(function(le){le.height=Q,le.targetLinks.forEach(function(fe){ne.indexOf(fe.source)<0&&ne.push(fe.source)})});var ie=(O-D-R)/(Q-1);ue.nodes.forEach(function(le){le.x1=(le.x0=D+Math.max(0,Math.min(Q-1,Math.floor(J.call(null,le,Q))))*ie)+R})}(K),function(ue){var ae=(0,C.b1)().key(function(he){return he.x0}).sortKeys(I.j2).entries(ue.nodes).map(function(he){return he.values});(function(){var he=(0,I.Fp)(ae,function(Ee){return Ee.length}),pe=.6666666666666666*(P-S)/(he-1);F>pe&&(F=pe);var xe=(0,I.VV)(ae,function(Ee){return(P-S-(Ee.length-1)*F)/(0,I.Sm)(Ee,l)});ae.forEach(function(Ee){Ee.forEach(function(Re,ke){Re.y1=(Re.y0=ke)+Re.value*xe})}),ue.links.forEach(function(Ee){Ee.width=Ee.value*xe})})(),fe();for(var ne=1,Q=G;Q>0;--Q)le(ne*=.99),fe(),ie(ne),fe();function ie(he){ae.forEach(function(pe){pe.forEach(function(xe){if(xe.targetLinks.length){var Ee=((0,I.Sm)(xe.targetLinks,d)/(0,I.Sm)(xe.targetLinks,l)-u(xe))*he;xe.y0+=Ee,xe.y1+=Ee}})})}function le(he){ae.slice().reverse().forEach(function(pe){pe.forEach(function(xe){if(xe.sourceLinks.length){var Ee=((0,I.Sm)(xe.sourceLinks,g)/(0,I.Sm)(xe.sourceLinks,l)-u(xe))*he;xe.y0+=Ee,xe.y1+=Ee}})})}function fe(){ae.forEach(function(he){var pe,xe,Ee,Re=S,ke=he.length;for(he.sort(o),Ee=0;Ee<ke;++Ee)(xe=Re-(pe=he[Ee]).y0)>0&&(pe.y0+=xe,pe.y1+=xe),Re=pe.y1+F;if((xe=Re-F-P)>0)for(Re=pe.y0-=xe,pe.y1-=xe,Ee=ke-2;Ee>=0;--Ee)(xe=(pe=he[Ee]).y1+F-Re)>0&&(pe.y0-=xe,pe.y1-=xe),Re=pe.y0})}}(K),X(K),K}function X(K){K.nodes.forEach(function(ue){ue.sourceLinks.sort(a),ue.targetLinks.sort(s)}),K.nodes.forEach(function(ue){var ae=ue.y0,ne=ae;ue.sourceLinks.forEach(function(Q){Q.y0=ae+Q.width/2,ae+=Q.width}),ue.targetLinks.forEach(function(Q){Q.y1=ne+Q.width/2,ne+=Q.width})})}return H.update=function(K){return X(K),K},H.nodeId=function(K){return arguments.length?(B="function"==typeof K?K:i(K),H):B},H.nodeAlign=function(K){return arguments.length?(J="function"==typeof K?K:i(K),H):J},H.nodeWidth=function(K){return arguments.length?(R=+K,H):R},H.nodePadding=function(K){return arguments.length?(F=+K,H):F},H.nodes=function(K){return arguments.length?(z="function"==typeof K?K:i(K),H):z},H.links=function(K){return arguments.length?($="function"==typeof K?K:i(K),H):$},H.size=function(K){return arguments.length?(D=S=0,O=+K[0],P=+K[1],H):[O-D,P-S]},H.extent=function(K){return arguments.length?(D=+K[0][0],O=+K[1][0],S=+K[0][1],P=+K[1][1],H):[[D,S],[O,P]]},H.iterations=function(K){return arguments.length?(G=+K,H):G},H}var x=r(45879);function b(D){return[D.source.x1,D.y0]}function M(D){return[D.target.x0,D.y1]}function m(){return(0,x.h5)().source(b).target(M)}},39898:function(se,U,r){var I,C;(function(){var f={version:"3.8.0"},k=[].slice,T=function(q){return k.call(q)},v=self.document;function c(q){return q&&(q.ownerDocument||q.document||q).documentElement}function i(q){return q&&(q.ownerDocument&&q.ownerDocument.defaultView||q.document&&q||q.defaultView)}if(v)try{T(v.documentElement.childNodes)}catch{T=function(oe){for(var de=oe.length,Me=new Array(de);de--;)Me[de]=oe[de];return Me}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch{var s=this.Element.prototype,a=s.setAttribute,o=s.setAttributeNS,l=this.CSSStyleDeclaration.prototype,u=l.setProperty;s.setAttribute=function(oe,de){a.call(this,oe,de+"")},s.setAttributeNS=function(oe,de,Me){o.call(this,oe,de,Me+"")},l.setProperty=function(oe,de,Me){u.call(this,oe,de+"",Me)}}function d(q,oe){return q<oe?-1:q>oe?1:q>=oe?0:NaN}function g(q){return null===q?NaN:+q}function h(q){return!isNaN(q)}function w(q){return{left:function(oe,de,Me,Se){for(arguments.length<3&&(Me=0),arguments.length<4&&(Se=oe.length);Me<Se;){var ze=Me+Se>>>1;q(oe[ze],de)<0?Me=ze+1:Se=ze}return Me},right:function(oe,de,Me,Se){for(arguments.length<3&&(Me=0),arguments.length<4&&(Se=oe.length);Me<Se;){var ze=Me+Se>>>1;q(oe[ze],de)>0?Se=ze:Me=ze+1}return Me}}}f.ascending=d,f.descending=function(q,oe){return oe<q?-1:oe>q?1:oe>=q?0:NaN},f.min=function(q,oe){var de,Me,Se=-1,ze=q.length;if(1===arguments.length){for(;++Se<ze;)if(null!=(Me=q[Se])&&Me>=Me){de=Me;break}for(;++Se<ze;)null!=(Me=q[Se])&&de>Me&&(de=Me)}else{for(;++Se<ze;)if(null!=(Me=oe.call(q,q[Se],Se))&&Me>=Me){de=Me;break}for(;++Se<ze;)null!=(Me=oe.call(q,q[Se],Se))&&de>Me&&(de=Me)}return de},f.max=function(q,oe){var de,Me,Se=-1,ze=q.length;if(1===arguments.length){for(;++Se<ze;)if(null!=(Me=q[Se])&&Me>=Me){de=Me;break}for(;++Se<ze;)null!=(Me=q[Se])&&Me>de&&(de=Me)}else{for(;++Se<ze;)if(null!=(Me=oe.call(q,q[Se],Se))&&Me>=Me){de=Me;break}for(;++Se<ze;)null!=(Me=oe.call(q,q[Se],Se))&&Me>de&&(de=Me)}return de},f.extent=function(q,oe){var de,Me,Se,ze=-1,Ye=q.length;if(1===arguments.length){for(;++ze<Ye;)if(null!=(Me=q[ze])&&Me>=Me){de=Se=Me;break}for(;++ze<Ye;)null!=(Me=q[ze])&&(de>Me&&(de=Me),Se<Me&&(Se=Me))}else{for(;++ze<Ye;)if(null!=(Me=oe.call(q,q[ze],ze))&&Me>=Me){de=Se=Me;break}for(;++ze<Ye;)null!=(Me=oe.call(q,q[ze],ze))&&(de>Me&&(de=Me),Se<Me&&(Se=Me))}return[de,Se]},f.sum=function(q,oe){var de,Me=0,Se=q.length,ze=-1;if(1===arguments.length)for(;++ze<Se;)h(de=+q[ze])&&(Me+=de);else for(;++ze<Se;)h(de=+oe.call(q,q[ze],ze))&&(Me+=de);return Me},f.mean=function(q,oe){var de,Me=0,Se=q.length,ze=-1,Ye=Se;if(1===arguments.length)for(;++ze<Se;)h(de=g(q[ze]))?Me+=de:--Ye;else for(;++ze<Se;)h(de=g(oe.call(q,q[ze],ze)))?Me+=de:--Ye;if(Ye)return Me/Ye},f.quantile=function(q,oe){var de=(q.length-1)*oe+1,Me=Math.floor(de),Se=+q[Me-1],ze=de-Me;return ze?Se+ze*(q[Me]-Se):Se},f.median=function(q,oe){var de,Me=[],Se=q.length,ze=-1;if(1===arguments.length)for(;++ze<Se;)h(de=g(q[ze]))&&Me.push(de);else for(;++ze<Se;)h(de=g(oe.call(q,q[ze],ze)))&&Me.push(de);if(Me.length)return f.quantile(Me.sort(d),.5)},f.variance=function(q,oe){var de,Me,Se=q.length,ze=0,Ye=0,Xe=-1,tt=0;if(1===arguments.length)for(;++Xe<Se;)h(de=g(q[Xe]))&&(Ye+=(Me=de-ze)*(de-(ze+=Me/++tt)));else for(;++Xe<Se;)h(de=g(oe.call(q,q[Xe],Xe)))&&(Ye+=(Me=de-ze)*(de-(ze+=Me/++tt)));if(tt>1)return Ye/(tt-1)},f.deviation=function(){var q=f.variance.apply(this,arguments);return q&&Math.sqrt(q)};var y=w(d);function p(q){return q.length}f.bisectLeft=y.left,f.bisect=f.bisectRight=y.right,f.bisector=function(q){return w(1===q.length?function(oe,de){return d(q(oe),de)}:q)},f.shuffle=function(q,oe,de){(ze=arguments.length)<3&&(de=q.length,ze<2&&(oe=0));for(var Me,Se,ze=de-oe;ze;)Se=Math.random()*ze--|0,Me=q[ze+oe],q[ze+oe]=q[Se+oe],q[Se+oe]=Me;return q},f.permute=function(q,oe){for(var de=oe.length,Me=new Array(de);de--;)Me[de]=q[oe[de]];return Me},f.pairs=function(q){for(var oe=0,de=q.length-1,Me=q[0],Se=new Array(de<0?0:de);oe<de;)Se[oe]=[Me,Me=q[++oe]];return Se},f.transpose=function(q){if(!(Se=q.length))return[];for(var oe=-1,de=f.min(q,p),Me=new Array(de);++oe<de;)for(var Se,ze=-1,Ye=Me[oe]=new Array(Se);++ze<Se;)Ye[ze]=q[ze][oe];return Me},f.zip=function(){return f.transpose(arguments)},f.keys=function(q){var oe=[];for(var de in q)oe.push(de);return oe},f.values=function(q){var oe=[];for(var de in q)oe.push(q[de]);return oe},f.entries=function(q){var oe=[];for(var de in q)oe.push({key:de,value:q[de]});return oe},f.merge=function(q){for(var oe,de,Me,Se=q.length,ze=-1,Ye=0;++ze<Se;)Ye+=q[ze].length;for(de=new Array(Ye);--Se>=0;)for(oe=(Me=q[Se]).length;--oe>=0;)de[--Ye]=Me[oe];return de};var _=Math.abs;function x(q,oe){for(var de in oe)Object.defineProperty(q.prototype,de,{value:oe[de],enumerable:!1})}function b(){this._=Object.create(null)}f.range=function(q,oe,de){if(arguments.length<3&&(de=1,arguments.length<2&&(oe=q,q=0)),(oe-q)/de==1/0)throw new Error("infinite range");var Me,Se=[],ze=function(Xe){for(var tt=1;Xe*tt%1;)tt*=10;return tt}(_(de)),Ye=-1;if(q*=ze,oe*=ze,(de*=ze)<0)for(;(Me=q+de*++Ye)>oe;)Se.push(Me/ze);else for(;(Me=q+de*++Ye)<oe;)Se.push(Me/ze);return Se},f.map=function(q,oe){var de=new b;if(q instanceof b)q.forEach(function(Xe,tt){de.set(Xe,tt)});else if(Array.isArray(q)){var Me,Se=-1,ze=q.length;if(1===arguments.length)for(;++Se<ze;)de.set(Se,q[Se]);else for(;++Se<ze;)de.set(oe.call(q,Me=q[Se],Se),Me)}else for(var Ye in q)de.set(Ye,q[Ye]);return de};var M="__proto__",m="\0";function D(q){return(q+="")===M||q[0]===m?m+q:q}function S(q){return(q+="")[0]===m?q.slice(1):q}function O(q){return D(q)in this._}function P(q){return(q=D(q))in this._&&delete this._[q]}function R(){var q=[];for(var oe in this._)q.push(S(oe));return q}function F(){var q=0;for(var oe in this._)++q;return q}function B(){for(var q in this._)return!1;return!0}function J(){this._=Object.create(null)}function z(q){return q}function $(q,oe,de){return function(){var Me=de.apply(oe,arguments);return Me===oe?q:Me}}function G(q,oe){if(oe in q)return oe;oe=oe.charAt(0).toUpperCase()+oe.slice(1);for(var de=0,Me=H.length;de<Me;++de){var Se=H[de]+oe;if(Se in q)return Se}}x(b,{has:O,get:function(q){return this._[D(q)]},set:function(q,oe){return this._[D(q)]=oe},remove:P,keys:R,values:function(){var q=[];for(var oe in this._)q.push(this._[oe]);return q},entries:function(){var q=[];for(var oe in this._)q.push({key:S(oe),value:this._[oe]});return q},size:F,empty:B,forEach:function(q){for(var oe in this._)q.call(this,S(oe),this._[oe])}}),f.nest=function(){var q,oe,de={},Me=[],Se=[];function ze(Xe,tt,rt){if(rt>=Me.length)return oe?oe.call(de,tt):q?tt.sort(q):tt;for(var ft,bt,At,Ut,qt=-1,jt=tt.length,Kt=Me[rt++],Vt=new b;++qt<jt;)(Ut=Vt.get(ft=Kt(bt=tt[qt])))?Ut.push(bt):Vt.set(ft,[bt]);return Xe?(bt=Xe(),At=function(gn,ln){bt.set(gn,ze(Xe,ln,rt))}):(bt={},At=function(gn,ln){bt[gn]=ze(Xe,ln,rt)}),Vt.forEach(At),bt}function Ye(Xe,tt){if(tt>=Me.length)return Xe;var rt=[],ft=Se[tt++];return Xe.forEach(function(bt,At){rt.push({key:bt,values:Ye(At,tt)})}),ft?rt.sort(function(bt,At){return ft(bt.key,At.key)}):rt}return de.map=function(Xe,tt){return ze(tt,Xe,0)},de.entries=function(Xe){return Ye(ze(f.map,Xe,0),0)},de.key=function(Xe){return Me.push(Xe),de},de.sortKeys=function(Xe){return Se[Me.length-1]=Xe,de},de.sortValues=function(Xe){return q=Xe,de},de.rollup=function(Xe){return oe=Xe,de},de},f.set=function(q){var oe=new J;if(q)for(var de=0,Me=q.length;de<Me;++de)oe.add(q[de]);return oe},x(J,{has:O,add:function(q){return this._[D(q+="")]=!0,q},remove:P,values:R,size:F,empty:B,forEach:function(q){for(var oe in this._)q.call(this,S(oe))}}),f.behavior={},f.rebind=function(q,oe){for(var de,Me=1,Se=arguments.length;++Me<Se;)q[de=arguments[Me]]=$(q,oe,oe[de]);return q};var H=["webkit","ms","moz","Moz","o","O"];function X(){}function K(){}function ue(q){var oe=[],de=new b;function Me(){for(var Se,ze=oe,Ye=-1,Xe=ze.length;++Ye<Xe;)(Se=ze[Ye].on)&&Se.apply(this,arguments);return q}return Me.on=function(Se,ze){var Ye,Xe=de.get(Se);return arguments.length<2?Xe&&Xe.on:(Xe&&(Xe.on=null,oe=oe.slice(0,Ye=oe.indexOf(Xe)).concat(oe.slice(Ye+1)),de.remove(Se)),ze&&oe.push(de.set(Se,{on:ze})),q)},Me}function ae(){f.event.preventDefault()}function ne(){for(var q,oe=f.event;q=oe.sourceEvent;)oe=q;return oe}function Q(q){for(var oe=new K,de=0,Me=arguments.length;++de<Me;)oe[arguments[de]]=ue(oe);return oe.of=function(Se,ze){return function(Ye){try{var Xe=Ye.sourceEvent=f.event;Ye.target=q,f.event=Ye,oe[Ye.type].apply(Se,ze)}finally{f.event=Xe}}},oe}f.dispatch=function(){for(var q=new K,oe=-1,de=arguments.length;++oe<de;)q[arguments[oe]]=ue(q);return q},K.prototype.on=function(q,oe){var de=q.indexOf("."),Me="";if(de>=0&&(Me=q.slice(de+1),q=q.slice(0,de)),q)return arguments.length<2?this[q].on(Me):this[q].on(Me,oe);if(2===arguments.length){if(null==oe)for(q in this)this.hasOwnProperty(q)&&this[q].on(Me,null);return this}},f.event=null,f.requote=function(q){return q.replace(ie,"\\$&")};var ie=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,le={}.__proto__?function(q,oe){q.__proto__=oe}:function(q,oe){for(var de in oe)q[de]=oe[de]};function fe(q){return le(q,Ee),q}var he=function(q,oe){return oe.querySelector(q)},pe=function(q,oe){return oe.querySelectorAll(q)},xe=function(q,oe){var de=q.matches||q[G(q,"matchesSelector")];return(xe=function(Me,Se){return de.call(Me,Se)})(q,oe)};"function"==typeof Sizzle&&(he=function(q,oe){return Sizzle(q,oe)[0]||null},pe=Sizzle,xe=Sizzle.matchesSelector),f.selection=function(){return f.select(v.documentElement)};var Ee=f.selection.prototype=[];function Re(q){return"function"==typeof q?q:function(){return he(q,this)}}function ke(q){return"function"==typeof q?q:function(){return pe(q,this)}}Ee.select=function(q){var oe,de,Me,Se,ze=[];q=Re(q);for(var Ye=-1,Xe=this.length;++Ye<Xe;){ze.push(oe=[]),oe.parentNode=(Me=this[Ye]).parentNode;for(var tt=-1,rt=Me.length;++tt<rt;)(Se=Me[tt])?(oe.push(de=q.call(Se,Se.__data__,tt,Ye)),de&&"__data__"in Se&&(de.__data__=Se.__data__)):oe.push(null)}return fe(ze)},Ee.selectAll=function(q){var oe,de,Me=[];q=ke(q);for(var Se=-1,ze=this.length;++Se<ze;)for(var Ye=this[Se],Xe=-1,tt=Ye.length;++Xe<tt;)(de=Ye[Xe])&&(Me.push(oe=T(q.call(de,de.__data__,Xe,Se))),oe.parentNode=de);return fe(Me)};var Te="http://www.w3.org/1999/xhtml",we={svg:"http://www.w3.org/2000/svg",xhtml:Te,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function je(q,oe){return q=f.ns.qualify(q),null==oe?q.local?function(){this.removeAttributeNS(q.space,q.local)}:function(){this.removeAttribute(q)}:"function"==typeof oe?q.local?function(){var de=oe.apply(this,arguments);null==de?this.removeAttributeNS(q.space,q.local):this.setAttributeNS(q.space,q.local,de)}:function(){var de=oe.apply(this,arguments);null==de?this.removeAttribute(q):this.setAttribute(q,de)}:q.local?function(){this.setAttributeNS(q.space,q.local,oe)}:function(){this.setAttribute(q,oe)}}function Ce(q){return q.trim().replace(/\s+/g," ")}function Ie(q){return new RegExp("(?:^|\\s+)"+f.requote(q)+"(?:\\s+|$)","g")}function ge(q){return(q+"").trim().split(/^|\s+/)}function me(q,oe){var de=(q=ge(q).map(ce)).length;return"function"==typeof oe?function(){for(var Me=-1,Se=oe.apply(this,arguments);++Me<de;)q[Me](this,Se)}:function(){for(var Me=-1;++Me<de;)q[Me](this,oe)}}function ce(q){var oe=Ie(q);return function(de,Me){if(Se=de.classList)return Me?Se.add(q):Se.remove(q);var Se=de.getAttribute("class")||"";Me?(oe.lastIndex=0,oe.test(Se)||de.setAttribute("class",Ce(Se+" "+q))):de.setAttribute("class",Ce(Se.replace(oe," ")))}}function Ae(q,oe,de){return null==oe?function(){this.style.removeProperty(q)}:"function"==typeof oe?function(){var Me=oe.apply(this,arguments);null==Me?this.style.removeProperty(q):this.style.setProperty(q,Me,de)}:function(){this.style.setProperty(q,oe,de)}}function Ne(q,oe){return null==oe?function(){delete this[q]}:"function"==typeof oe?function(){var de=oe.apply(this,arguments);null==de?delete this[q]:this[q]=de}:function(){this[q]=oe}}function De(q){return"function"==typeof q?q:(q=f.ns.qualify(q)).local?function(){return this.ownerDocument.createElementNS(q.space,q.local)}:function(){var oe=this.ownerDocument,de=this.namespaceURI;return de===Te&&oe.documentElement.namespaceURI===Te?oe.createElement(q):oe.createElementNS(de,q)}}function qe(){var q=this.parentNode;q&&q.removeChild(this)}function Ke(q){return{__data__:q}}function be(q){return function(){return xe(this,q)}}function Oe(q){return arguments.length||(q=d),function(oe,de){return oe&&de?q(oe.__data__,de.__data__):!oe-!de}}function Le(q,oe){for(var de=0,Me=q.length;de<Me;de++)for(var Se,ze=q[de],Ye=0,Xe=ze.length;Ye<Xe;Ye++)(Se=ze[Ye])&&oe(Se,Ye,de);return q}function Ue(q){return le(q,Ze),q}f.ns={prefix:we,qualify:function(q){var oe=q.indexOf(":"),de=q;return oe>=0&&"xmlns"!==(de=q.slice(0,oe))&&(q=q.slice(oe+1)),we.hasOwnProperty(de)?{space:we[de],local:q}:q}},Ee.attr=function(q,oe){if(arguments.length<2){if("string"==typeof q){var de=this.node();return(q=f.ns.qualify(q)).local?de.getAttributeNS(q.space,q.local):de.getAttribute(q)}for(oe in q)this.each(je(oe,q[oe]));return this}return this.each(je(q,oe))},Ee.classed=function(q,oe){if(arguments.length<2){if("string"==typeof q){var de=this.node(),Me=(q=ge(q)).length,Se=-1;if(oe=de.classList){for(;++Se<Me;)if(!oe.contains(q[Se]))return!1}else for(oe=de.getAttribute("class");++Se<Me;)if(!Ie(q[Se]).test(oe))return!1;return!0}for(oe in q)this.each(me(oe,q[oe]));return this}return this.each(me(q,oe))},Ee.style=function(q,oe,de){var Me=arguments.length;if(Me<3){if("string"!=typeof q){for(de in Me<2&&(oe=""),q)this.each(Ae(de,q[de],oe));return this}if(Me<2){var Se=this.node();return i(Se).getComputedStyle(Se,null).getPropertyValue(q)}de=""}return this.each(Ae(q,oe,de))},Ee.property=function(q,oe){if(arguments.length<2){if("string"==typeof q)return this.node()[q];for(oe in q)this.each(Ne(oe,q[oe]));return this}return this.each(Ne(q,oe))},Ee.text=function(q){return arguments.length?this.each("function"==typeof q?function(){var oe=q.apply(this,arguments);this.textContent=oe??""}:null==q?function(){this.textContent=""}:function(){this.textContent=q}):this.node().textContent},Ee.html=function(q){return arguments.length?this.each("function"==typeof q?function(){var oe=q.apply(this,arguments);this.innerHTML=oe??""}:null==q?function(){this.innerHTML=""}:function(){this.innerHTML=q}):this.node().innerHTML},Ee.append=function(q){return q=De(q),this.select(function(){return this.appendChild(q.apply(this,arguments))})},Ee.insert=function(q,oe){return q=De(q),oe=Re(oe),this.select(function(){return this.insertBefore(q.apply(this,arguments),oe.apply(this,arguments)||null)})},Ee.remove=function(){return this.each(qe)},Ee.data=function(q,oe){var de,Me,Se=-1,ze=this.length;if(!arguments.length){for(q=new Array(ze=(de=this[0]).length);++Se<ze;)(Me=de[Se])&&(q[Se]=Me.__data__);return q}function Ye(ft,bt){var At,Ut,qt,jt=ft.length,Kt=bt.length,Vt=Math.min(jt,Kt),gn=new Array(Kt),ln=new Array(Kt),nn=new Array(jt);if(oe){var On,Pn=new b,tr=new Array(jt);for(At=-1;++At<jt;)(Ut=ft[At])&&(Pn.has(On=oe.call(Ut,Ut.__data__,At))?nn[At]=Ut:Pn.set(On,Ut),tr[At]=On);for(At=-1;++At<Kt;)(Ut=Pn.get(On=oe.call(bt,qt=bt[At],At)))?!0!==Ut&&(gn[At]=Ut,Ut.__data__=qt):ln[At]=Ke(qt),Pn.set(On,!0);for(At=-1;++At<jt;)At in tr&&!0!==Pn.get(tr[At])&&(nn[At]=ft[At])}else{for(At=-1;++At<Vt;)qt=bt[At],(Ut=ft[At])?(Ut.__data__=qt,gn[At]=Ut):ln[At]=Ke(qt);for(;At<Kt;++At)ln[At]=Ke(bt[At]);for(;At<jt;++At)nn[At]=ft[At]}ln.update=gn,ln.parentNode=gn.parentNode=nn.parentNode=ft.parentNode,Xe.push(ln),tt.push(gn),rt.push(nn)}var Xe=Ue([]),tt=fe([]),rt=fe([]);if("function"==typeof q)for(;++Se<ze;)Ye(de=this[Se],q.call(de,de.parentNode.__data__,Se));else for(;++Se<ze;)Ye(de=this[Se],q);return tt.enter=function(){return Xe},tt.exit=function(){return rt},tt},Ee.datum=function(q){return arguments.length?this.property("__data__",q):this.property("__data__")},Ee.filter=function(q){var oe,de,Me,Se=[];"function"!=typeof q&&(q=be(q));for(var ze=0,Ye=this.length;ze<Ye;ze++){Se.push(oe=[]),oe.parentNode=(de=this[ze]).parentNode;for(var Xe=0,tt=de.length;Xe<tt;Xe++)(Me=de[Xe])&&q.call(Me,Me.__data__,Xe,ze)&&oe.push(Me)}return fe(Se)},Ee.order=function(){for(var q=-1,oe=this.length;++q<oe;)for(var de,Me=this[q],Se=Me.length-1,ze=Me[Se];--Se>=0;)(de=Me[Se])&&(ze&&ze!==de.nextSibling&&ze.parentNode.insertBefore(de,ze),ze=de);return this},Ee.sort=function(q){q=Oe.apply(this,arguments);for(var oe=-1,de=this.length;++oe<de;)this[oe].sort(q);return this.order()},Ee.each=function(q){return Le(this,function(oe,de,Me){q.call(oe,oe.__data__,de,Me)})},Ee.call=function(q){var oe=T(arguments);return q.apply(oe[0]=this,oe),this},Ee.empty=function(){return!this.node()},Ee.node=function(){for(var q=0,oe=this.length;q<oe;q++)for(var de=this[q],Me=0,Se=de.length;Me<Se;Me++){var ze=de[Me];if(ze)return ze}return null},Ee.size=function(){var q=0;return Le(this,function(){++q}),q};var Ze=[];function We(q,oe,de){var Me="__on"+q,Se=q.indexOf("."),ze=nt;Se>0&&(q=q.slice(0,Se));var Ye=et.get(q);function Xe(){var tt=this[Me];tt&&(this.removeEventListener(q,tt,tt.$),delete this[Me])}return Ye&&(q=Ye,ze=ct),Se?oe?function(){var tt=ze(oe,T(arguments));Xe.call(this),this.addEventListener(q,this[Me]=tt,tt.$=de),tt._=oe}:Xe:oe?X:function(){var tt,rt=new RegExp("^__on([^.]+)"+f.requote(q)+"$");for(var ft in this)if(tt=ft.match(rt)){var bt=this[ft];this.removeEventListener(tt[1],bt,bt.$),delete this[ft]}}}f.selection.enter=Ue,f.selection.enter.prototype=Ze,Ze.append=Ee.append,Ze.empty=Ee.empty,Ze.node=Ee.node,Ze.call=Ee.call,Ze.size=Ee.size,Ze.select=function(q){for(var oe,de,Me,Se,ze,Ye=[],Xe=-1,tt=this.length;++Xe<tt;){Me=(Se=this[Xe]).update,Ye.push(oe=[]),oe.parentNode=Se.parentNode;for(var rt=-1,ft=Se.length;++rt<ft;)(ze=Se[rt])?(oe.push(Me[rt]=de=q.call(Se.parentNode,ze.__data__,rt,Xe)),de.__data__=ze.__data__):oe.push(null)}return fe(Ye)},Ze.insert=function(q,oe){var de,Me,Se;return arguments.length<2&&(de=this,oe=function(ze,Ye,Xe){var tt,rt=de[Xe].update,ft=rt.length;for(Xe!=Se&&(Se=Xe,Me=0),Ye>=Me&&(Me=Ye+1);!(tt=rt[Me])&&++Me<ft;);return tt}),Ee.insert.call(this,q,oe)},f.select=function(q){var oe;return"string"==typeof q?(oe=[he(q,v)]).parentNode=v.documentElement:(oe=[q]).parentNode=c(q),fe([oe])},f.selectAll=function(q){var oe;return"string"==typeof q?(oe=T(pe(q,v))).parentNode=v.documentElement:(oe=T(q)).parentNode=null,fe([oe])},Ee.on=function(q,oe,de){var Me=arguments.length;if(Me<3){if("string"!=typeof q){for(de in Me<2&&(oe=!1),q)this.each(We(de,q[de],oe));return this}if(Me<2)return(Me=this.node()["__on"+q])&&Me._;de=!1}return this.each(We(q,oe,de))};var et=f.map({mouseenter:"mouseover",mouseleave:"mouseout"});function nt(q,oe){return function(de){var Me=f.event;f.event=de,oe[0]=this.__data__;try{q.apply(this,oe)}finally{f.event=Me}}}function ct(q,oe){var de=nt(q,oe);return function(Me){var ze=Me.relatedTarget;ze&&(ze===this||8&ze.compareDocumentPosition(this))||de.call(this,Me)}}v&&et.forEach(function(q){"on"+q in v&&et.remove(q)});var yt,ut=0;function Ct(q){var oe=".dragsuppress-"+ ++ut,de="click"+oe,Me=f.select(i(q)).on("touchmove"+oe,ae).on("dragstart"+oe,ae).on("selectstart"+oe,ae);if(null==yt&&(yt=!("onselectstart"in q)&&G(q.style,"userSelect")),yt){var Se=c(q).style,ze=Se[yt];Se[yt]="none"}return function(Ye){if(Me.on(oe,null),yt&&(Se[yt]=ze),Ye){var Xe=function(){Me.on(de,null)};Me.on(de,function(){ae(),Xe()},!0),setTimeout(Xe,0)}}}f.mouse=function(q){return vt(q,ne())};var Dt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function vt(q,oe){oe.changedTouches&&(oe=oe.changedTouches[0]);var de=q.ownerSVGElement||q;if(de.createSVGPoint){var Me=de.createSVGPoint();if(Dt<0){var Se=i(q);if(Se.scrollX||Se.scrollY){var ze=(de=f.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Dt=!(ze.f||ze.e),de.remove()}}return Dt?(Me.x=oe.pageX,Me.y=oe.pageY):(Me.x=oe.clientX,Me.y=oe.clientY),[(Me=Me.matrixTransform(q.getScreenCTM().inverse())).x,Me.y]}var Ye=q.getBoundingClientRect();return[oe.clientX-Ye.left-q.clientLeft,oe.clientY-Ye.top-q.clientTop]}function mt(){return f.event.changedTouches[0].identifier}f.touch=function(q,oe,de){if(arguments.length<3&&(de=oe,oe=ne().changedTouches),oe)for(var Me,Se=0,ze=oe.length;Se<ze;++Se)if((Me=oe[Se]).identifier===de)return vt(q,Me)},f.behavior.drag=function(){var q=Q(Se,"drag","dragstart","dragend"),oe=null,de=ze(X,f.mouse,i,"mousemove","mouseup"),Me=ze(mt,f.touch,z,"touchmove","touchend");function Se(){this.on("mousedown.drag",de).on("touchstart.drag",Me)}function ze(Ye,Xe,tt,rt,ft){return function(){var bt,Ut=f.event.target.correspondingElement||f.event.target,qt=this.parentNode,jt=q.of(this,arguments),Kt=0,Vt=Ye(),gn=".drag"+(null==Vt?"":"-"+Vt),ln=f.select(tt(Ut)).on(rt+gn,function(){var Pn,tr,Jn=Xe(qt,Vt);Jn&&(Kt|=(Pn=Jn[0]-On[0])|(tr=Jn[1]-On[1]),On=Jn,jt({type:"drag",x:Jn[0]+bt[0],y:Jn[1]+bt[1],dx:Pn,dy:tr}))}).on(ft+gn,function(){Xe(qt,Vt)&&(ln.on(rt+gn,null).on(ft+gn,null),nn(Kt),jt({type:"dragend"}))}),nn=Ct(Ut),On=Xe(qt,Vt);bt=oe?[(bt=oe.apply(this,arguments)).x-On[0],bt.y-On[1]]:[0,0],jt({type:"dragstart"})}}return Se.origin=function(Ye){return arguments.length?(oe=Ye,Se):oe},f.rebind(Se,q,"on")},f.touches=function(q,oe){return arguments.length<2&&(oe=ne().touches),oe?T(oe).map(function(de){var Me=vt(q,de);return Me.identifier=de.identifier,Me}):[]};var Lt=1e-6,Ft=Lt*Lt,Rt=Math.PI,Wt=2*Rt,Ht=Wt-Lt,it=Rt/2,st=Rt/180,Je=180/Rt;function ot(q){return q>1?it:q<-1?-it:Math.asin(q)}function pt(q){return((q=Math.exp(q))+1/q)/2}var xt=Math.SQRT2;f.interpolateZoom=function(q,oe){var de,Me,Se=q[0],ze=q[1],Ye=q[2],rt=oe[2],ft=oe[0]-Se,bt=oe[1]-ze,At=ft*ft+bt*bt;if(At<Ft)Me=Math.log(rt/Ye)/xt,de=function(gn){return[Se+gn*ft,ze+gn*bt,Ye*Math.exp(xt*gn*Me)]};else{var Ut=Math.sqrt(At),qt=(rt*rt-Ye*Ye+4*At)/(2*Ye*2*Ut),jt=(rt*rt-Ye*Ye-4*At)/(2*rt*2*Ut),Kt=Math.log(Math.sqrt(qt*qt+1)-qt),Vt=Math.log(Math.sqrt(jt*jt+1)-jt);Me=(Vt-Kt)/xt,de=function(gn){var ln,tr,nn=gn*Me,On=pt(Kt),Pn=Ye/(2*Ut)*(On*(ln=xt*nn+Kt,((ln=Math.exp(2*ln))-1)/(ln+1))-(tr=Kt,((tr=Math.exp(tr))-1/tr)/2));return[Se+Pn*ft,ze+Pn*bt,Ye*On/pt(xt*nn+Kt)]}}return de.duration=1e3*Me,de},f.behavior.zoom=function(){var q,oe,de,Me,Se,ze,Ye,Xe,tt,rt={x:0,y:0,k:1},ft=[960,500],bt=dt,At=250,Ut=0,qt="mousedown.zoom",jt="mousemove.zoom",Kt="mouseup.zoom",Vt="touchstart.zoom",gn=Q(ln,"zoomstart","zoom","zoomend");function ln(ir){ir.on(qt,Cr).on(Ge+".zoom",Rr).on("dblclick.zoom",si).on(Vt,Or)}function nn(ir){return[(ir[0]-rt.x)/rt.k,(ir[1]-rt.y)/rt.k]}function On(ir){rt.k=Math.max(bt[0],Math.min(bt[1],ir))}function Pn(ir,Ar){var Lr;rt.x+=ir[0]-(Ar=[(Lr=Ar)[0]*rt.k+rt.x,Lr[1]*rt.k+rt.y])[0],rt.y+=ir[1]-Ar[1]}function tr(ir,Ar,Lr,qr){ir.__chart__={x:rt.x,y:rt.y,k:rt.k},On(Math.pow(2,qr)),Pn(oe=Ar,Lr),ir=f.select(ir),At>0&&(ir=ir.transition().duration(At)),ir.call(ln.event)}function Jn(){Ye&&Ye.domain(ze.range().map(function(ir){return(ir-rt.x)/rt.k}).map(ze.invert)),tt&&tt.domain(Xe.range().map(function(ir){return(ir-rt.y)/rt.k}).map(Xe.invert))}function ur(ir){Ut++||ir({type:"zoomstart"})}function vr(ir){Jn(),ir({type:"zoom",scale:rt.k,translate:[rt.x,rt.y]})}function wr(ir){--Ut||(ir({type:"zoomend"}),oe=null)}function Cr(){var ir=this,Ar=gn.of(ir,arguments),Lr=0,qr=f.select(i(ir)).on(jt,function(){Lr=1,Pn(f.mouse(ir),ni),vr(Ar)}).on(Kt,function(){qr.on(jt,null).on(Kt,null),gi(Lr),wr(Ar)}),ni=nn(f.mouse(ir)),gi=Ct(ir);ya.call(ir),ur(Ar)}function Or(){var ir,Ar=this,Lr=gn.of(Ar,arguments),qr={},ni=0,gi=".zoom-"+f.event.changedTouches[0].identifier,Ai="touchmove"+gi,Yi="touchend"+gi,xo=[],mo=f.select(Ar),$i=Ct(Ar);function Do(){var Xi=f.touches(Ar);return ir=rt.k,Xi.forEach(function(Oi){Oi.identifier in qr&&(qr[Oi.identifier]=nn(Oi))}),Xi}function aa(){var Xi=f.event.target;f.select(Xi).on(Ai,$r).on(Yi,Zo),xo.push(Xi);for(var Oi=f.event.changedTouches,bo=0,uo=Oi.length;bo<uo;++bo)qr[Oi[bo].identifier]=null;var _o=Do(),na=Date.now();if(1===_o.length){if(na-Se<500){var Io=_o[0];tr(Ar,Io,qr[Io.identifier],Math.floor(Math.log(rt.k)/Math.LN2)+1),ae()}Se=na}else if(_o.length>1){var eo=_o[1],Il=(Io=_o[0])[0]-eo[0],Wa=Io[1]-eo[1];ni=Il*Il+Wa*Wa}}function $r(){var Xi,Oi,bo,uo,_o=f.touches(Ar);ya.call(Ar);for(var na=0,Io=_o.length;na<Io;++na,uo=null)if(uo=qr[(bo=_o[na]).identifier]){if(Oi)break;Xi=bo,Oi=uo}if(uo){var eo=(eo=bo[0]-Xi[0])*eo+(eo=bo[1]-Xi[1])*eo,Il=ni&&Math.sqrt(eo/ni);Xi=[(Xi[0]+bo[0])/2,(Xi[1]+bo[1])/2],Oi=[(Oi[0]+uo[0])/2,(Oi[1]+uo[1])/2],On(Il*ir)}Se=null,Pn(Xi,Oi),vr(Lr)}function Zo(){if(f.event.touches.length){for(var Xi=f.event.changedTouches,Oi=0,bo=Xi.length;Oi<bo;++Oi)delete qr[Xi[Oi].identifier];for(var uo in qr)return void Do()}f.selectAll(xo).on(gi,null),mo.on(qt,Cr).on(Vt,Or),$i(),wr(Lr)}aa(),ur(Lr),mo.on(qt,null).on(Vt,aa)}function Rr(){var ir=gn.of(this,arguments);Me?clearTimeout(Me):(ya.call(this),q=nn(oe=de||f.mouse(this)),ur(ir)),Me=setTimeout(function(){Me=null,wr(ir)},50),ae(),On(Math.pow(2,.002*He())*rt.k),Pn(oe,q),vr(ir)}function si(){var ir=f.mouse(this),Ar=Math.log(rt.k)/Math.LN2;tr(this,ir,nn(ir),f.event.shiftKey?Math.ceil(Ar)-1:Math.floor(Ar)+1)}return Ge||(Ge="onwheel"in v?(He=function(){return-f.event.deltaY*(f.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(He=function(){return f.event.wheelDelta},"mousewheel"):(He=function(){return-f.event.detail},"MozMousePixelScroll")),ln.event=function(ir){ir.each(function(){var Ar=gn.of(this,arguments),Lr=rt;qa?f.select(this).transition().each("start.zoom",function(){rt=this.__chart__||{x:0,y:0,k:1},ur(Ar)}).tween("zoom:zoom",function(){var qr=ft[0],gi=oe?oe[0]:qr/2,Ai=oe?oe[1]:ft[1]/2,Yi=f.interpolateZoom([(gi-rt.x)/rt.k,(Ai-rt.y)/rt.k,qr/rt.k],[(gi-Lr.x)/Lr.k,(Ai-Lr.y)/Lr.k,qr/Lr.k]);return function(xo){var mo=Yi(xo),$i=qr/mo[2];this.__chart__=rt={x:gi-mo[0]*$i,y:Ai-mo[1]*$i,k:$i},vr(Ar)}}).each("interrupt.zoom",function(){wr(Ar)}).each("end.zoom",function(){wr(Ar)}):(this.__chart__=rt,ur(Ar),vr(Ar),wr(Ar))})},ln.translate=function(ir){return arguments.length?(rt={x:+ir[0],y:+ir[1],k:rt.k},Jn(),ln):[rt.x,rt.y]},ln.scale=function(ir){return arguments.length?(rt={x:rt.x,y:rt.y,k:null},On(+ir),Jn(),ln):rt.k},ln.scaleExtent=function(ir){return arguments.length?(bt=null==ir?dt:[+ir[0],+ir[1]],ln):bt},ln.center=function(ir){return arguments.length?(de=ir&&[+ir[0],+ir[1]],ln):de},ln.size=function(ir){return arguments.length?(ft=ir&&[+ir[0],+ir[1]],ln):ft},ln.duration=function(ir){return arguments.length?(At=+ir,ln):At},ln.x=function(ir){return arguments.length?(Ye=ir,ze=ir.copy(),rt={x:0,y:0,k:1},ln):Ye},ln.y=function(ir){return arguments.length?(tt=ir,Xe=ir.copy(),rt={x:0,y:0,k:1},ln):tt},f.rebind(ln,gn,"on")};var He,Ge,dt=[0,1/0];function ht(){}function kt(q,oe,de){return this instanceof kt?(this.h=+q,this.s=+oe,void(this.l=+de)):arguments.length<2?q instanceof kt?new kt(q.h,q.s,q.l):bn(""+q,In,kt):new kt(q,oe,de)}f.color=ht,ht.prototype.toString=function(){return this.rgb()+""},f.hsl=kt;var St=kt.prototype=new ht;function Et(q,oe,de){var Me,Se;function ze(Ye){return Math.round(255*((Xe=Ye)>360?Xe-=360:Xe<0&&(Xe+=360),Xe<60?Me+(Se-Me)*Xe/60:Xe<180?Se:Xe<240?Me+(Se-Me)*(240-Xe)/60:Me));var Xe}return q=isNaN(q)?0:(q%=360)<0?q+360:q,oe=isNaN(oe)||oe<0?0:oe>1?1:oe,Me=2*(de=de<0?0:de>1?1:de)-(Se=de<=.5?de*(1+oe):de+oe-de*oe),new Fn(ze(q+120),ze(q),ze(q-120))}function wt(q,oe,de){return this instanceof wt?(this.h=+q,this.c=+oe,void(this.l=+de)):arguments.length<2?q instanceof wt?new wt(q.h,q.c,q.l):(Me=q instanceof Mt?q.l:(q=_n((q=f.rgb(q)).r,q.g,q.b)).l,Se=q.a,ze=q.b,Me>0?new wt(Math.atan2(ze,Se)*Je,Math.sqrt(Se*Se+ze*ze),Me):new wt(NaN,NaN,Me)):new wt(q,oe,de);var Me,Se,ze}St.brighter=function(q){return q=Math.pow(.7,arguments.length?q:1),new kt(this.h,this.s,this.l/q)},St.darker=function(q){return q=Math.pow(.7,arguments.length?q:1),new kt(this.h,this.s,q*this.l)},St.rgb=function(){return Et(this.h,this.s,this.l)},f.hcl=wt;var Nt=wt.prototype=new ht;function _t(q,oe,de){return isNaN(q)&&(q=0),isNaN(oe)&&(oe=0),new Mt(de,Math.cos(q*=st)*oe,Math.sin(q)*oe)}function Mt(q,oe,de){return this instanceof Mt?(this.l=+q,this.a=+oe,void(this.b=+de)):arguments.length<2?q instanceof Mt?new Mt(q.l,q.a,q.b):q instanceof wt?_t(q.h,q.c,q.l):_n((q=Fn(q)).r,q.g,q.b):new Mt(q,oe,de)}Nt.brighter=function(q){return new wt(this.h,this.c,Math.min(100,this.l+Pt*(arguments.length?q:1)))},Nt.darker=function(q){return new wt(this.h,this.c,Math.max(0,this.l-Pt*(arguments.length?q:1)))},Nt.rgb=function(){return _t(this.h,this.c,this.l).rgb()},f.lab=Mt;var Pt=18,Zt=.95047,$t=1,Xt=1.08883,dn=Mt.prototype=new ht;function on(q,oe,de){var Me=(q+16)/116,Se=Me+oe/500,ze=Me-de/200;return new Fn(Cn(3.2404542*(Se=cn(Se)*Zt)-1.5371385*(Me=cn(Me)*$t)-.4985314*(ze=cn(ze)*Xt)),Cn(-.969266*Se+1.8760108*Me+.041556*ze),Cn(.0556434*Se-.2040259*Me+1.0572252*ze))}function cn(q){return q>.206893034?q*q*q:(q-.13793103448275862)/7.787037}function tn(q){return q>.008856?Math.pow(q,.3333333333333333):7.787037*q+.13793103448275862}function Cn(q){return Math.round(255*(q<=.00304?12.92*q:1.055*Math.pow(q,.4166666666666667)-.055))}function Fn(q,oe,de){return this instanceof Fn?(this.r=~~q,this.g=~~oe,void(this.b=~~de)):arguments.length<2?q instanceof Fn?new Fn(q.r,q.g,q.b):bn(""+q,Fn,Et):new Fn(q,oe,de)}function En(q){return new Fn(q>>16,q>>8&255,255&q)}function rn(q){return En(q)+""}dn.brighter=function(q){return new Mt(Math.min(100,this.l+Pt*(arguments.length?q:1)),this.a,this.b)},dn.darker=function(q){return new Mt(Math.max(0,this.l-Pt*(arguments.length?q:1)),this.a,this.b)},dn.rgb=function(){return on(this.l,this.a,this.b)},f.rgb=Fn;var yn=Fn.prototype=new ht;function pn(q){return q<16?"0"+Math.max(0,q).toString(16):Math.min(255,q).toString(16)}function bn(q,oe,de){var Me,Se,ze,Ye=0,Xe=0,tt=0;if(Me=/([a-z]+)\((.*)\)/.exec(q=q.toLowerCase()))switch(Se=Me[2].split(","),Me[1]){case"hsl":return de(parseFloat(Se[0]),parseFloat(Se[1])/100,parseFloat(Se[2])/100);case"rgb":return oe(Wn(Se[0]),Wn(Se[1]),Wn(Se[2]))}return(ze=Nn.get(q))?oe(ze.r,ze.g,ze.b):(null==q||"#"!==q.charAt(0)||isNaN(ze=parseInt(q.slice(1),16))||(4===q.length?(Ye=(3840&ze)>>4,Ye|=Ye>>4,Xe=240&ze,Xe|=Xe>>4,tt=15&ze,tt|=tt<<4):7===q.length&&(Ye=(16711680&ze)>>16,Xe=(65280&ze)>>8,tt=255&ze)),oe(Ye,Xe,tt))}function In(q,oe,de){var Me,Se,ze=Math.min(q/=255,oe/=255,de/=255),Ye=Math.max(q,oe,de),Xe=Ye-ze,tt=(Ye+ze)/2;return Xe?(Se=tt<.5?Xe/(Ye+ze):Xe/(2-Ye-ze),Me=q==Ye?(oe-de)/Xe+(oe<de?6:0):oe==Ye?(de-q)/Xe+2:(q-oe)/Xe+4,Me*=60):(Me=NaN,Se=tt>0&&tt<1?0:Me),new kt(Me,Se,tt)}function _n(q,oe,de){var Me=tn((.4124564*(q=qn(q))+.3575761*(oe=qn(oe))+.1804375*(de=qn(de)))/Zt),Se=tn((.2126729*q+.7151522*oe+.072175*de)/$t);return Mt(116*Se-16,500*(Me-Se),200*(Se-tn((.0193339*q+.119192*oe+.9503041*de)/Xt)))}function qn(q){return(q/=255)<=.04045?q/12.92:Math.pow((q+.055)/1.055,2.4)}function Wn(q){var oe=parseFloat(q);return"%"===q.charAt(q.length-1)?Math.round(2.55*oe):oe}yn.brighter=function(q){q=Math.pow(.7,arguments.length?q:1);var oe=this.r,de=this.g,Me=this.b;return oe||de||Me?(oe&&oe<30&&(oe=30),de&&de<30&&(de=30),Me&&Me<30&&(Me=30),new Fn(Math.min(255,oe/q),Math.min(255,de/q),Math.min(255,Me/q))):new Fn(30,30,30)},yn.darker=function(q){return new Fn((q=Math.pow(.7,arguments.length?q:1))*this.r,q*this.g,q*this.b)},yn.hsl=function(){return In(this.r,this.g,this.b)},yn.toString=function(){return"#"+pn(this.r)+pn(this.g)+pn(this.b)};var Nn=f.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Xn(q){return"function"==typeof q?q:function(){return q}}function yr(q){return function(oe,de,Me){return 2===arguments.length&&"function"==typeof de&&(Me=de,de=null),fr(oe,de,q,Me)}}function fr(q,oe,de,Me){var ft,Se={},ze=f.dispatch("beforesend","progress","load","error"),Ye={},Xe=new XMLHttpRequest,tt=null;function rt(){var ft,At,Ut,bt=Xe.status;if(!bt&&((Ut=(At=Xe).responseType)&&"text"!==Ut?At.response:At.responseText)||bt>=200&&bt<300||304===bt){try{ft=de.call(Se,Xe)}catch(At){return void ze.error.call(Se,At)}ze.load.call(Se,ft)}else ze.error.call(Se,Xe)}return self.XDomainRequest&&!("withCredentials"in Xe)&&/^(http(s)?:)?\/\//.test(q)&&(Xe=new XDomainRequest),"onload"in Xe?Xe.onload=Xe.onerror=rt:Xe.onreadystatechange=function(){Xe.readyState>3&&rt()},Xe.onprogress=function(ft){var bt=f.event;f.event=ft;try{ze.progress.call(Se,Xe)}finally{f.event=bt}},Se.header=function(ft,bt){return ft=(ft+"").toLowerCase(),arguments.length<2?Ye[ft]:(null==bt?delete Ye[ft]:Ye[ft]=bt+"",Se)},Se.mimeType=function(ft){return arguments.length?(oe=null==ft?null:ft+"",Se):oe},Se.responseType=function(ft){return arguments.length?(tt=ft,Se):tt},Se.response=function(ft){return de=ft,Se},["get","post"].forEach(function(ft){Se[ft]=function(){return Se.send.apply(Se,[ft].concat(T(arguments)))}}),Se.send=function(ft,bt,At){if(2===arguments.length&&"function"==typeof bt&&(At=bt,bt=null),Xe.open(ft,q,!0),null==oe||"accept"in Ye||(Ye.accept=oe+",*/*"),Xe.setRequestHeader)for(var Ut in Ye)Xe.setRequestHeader(Ut,Ye[Ut]);return null!=oe&&Xe.overrideMimeType&&Xe.overrideMimeType(oe),null!=tt&&(Xe.responseType=tt),null!=At&&Se.on("error",At).on("load",function(qt){At(null,qt)}),ze.beforesend.call(Se,Xe),Xe.send(bt??null),Se},Se.abort=function(){return Xe.abort(),Se},f.rebind(Se,ze,"on"),null==Me?Se:Se.get(1===(ft=Me).length?function(bt,At){ft(null==bt?At:null)}:ft)}Nn.forEach(function(q,oe){Nn.set(q,En(oe))}),f.functor=Xn,f.xhr=yr(z),f.dsv=function(q,oe){var de=new RegExp('["'+q+"\n]"),Me=q.charCodeAt(0);function Se(rt,ft,bt){arguments.length<3&&(bt=ft,ft=null);var At=fr(rt,oe,null==ft?ze:Ye(ft),bt);return At.row=function(Ut){return arguments.length?At.response(null==(ft=Ut)?ze:Ye(Ut)):ft},At}function ze(rt){return Se.parse(rt.responseText)}function Ye(rt){return function(ft){return Se.parse(ft.responseText,rt)}}function Xe(rt){return rt.map(tt).join(q)}function tt(rt){return de.test(rt)?'"'+rt.replace(/\"/g,'""')+'"':rt}return Se.parse=function(rt,ft){var bt;return Se.parseRows(rt,function(At,Ut){if(bt)return bt(At,Ut-1);var qt=function(jt){for(var Kt={},Vt=At.length,gn=0;gn<Vt;++gn)Kt[At[gn]]=jt[gn];return Kt};bt=ft?function(jt,Kt){return ft(qt(jt),Kt)}:qt})},Se.parseRows=function(rt,ft){var bt,At,Ut={},qt={},jt=[],Kt=rt.length,Vt=0,gn=0;function ln(){if(Vt>=Kt)return qt;if(At)return At=!1,Ut;var On=Vt;if(34===rt.charCodeAt(On)){for(var Pn=On;Pn++<Kt;)if(34===rt.charCodeAt(Pn)){if(34!==rt.charCodeAt(Pn+1))break;++Pn}return Vt=Pn+2,13===(tr=rt.charCodeAt(Pn+1))?(At=!0,10===rt.charCodeAt(Pn+2)&&++Vt):10===tr&&(At=!0),rt.slice(On+1,Pn).replace(/""/g,'"')}for(;Vt<Kt;){var tr,Jn=1;if(10===(tr=rt.charCodeAt(Vt++)))At=!0;else if(13===tr)At=!0,10===rt.charCodeAt(Vt)&&(++Vt,++Jn);else if(tr!==Me)continue;return rt.slice(On,Vt-Jn)}return rt.slice(On)}for(;(bt=ln())!==qt;){for(var nn=[];bt!==Ut&&bt!==qt;)nn.push(bt),bt=ln();ft&&null==(nn=ft(nn,gn++))||jt.push(nn)}return jt},Se.format=function(rt){if(Array.isArray(rt[0]))return Se.formatRows(rt);var ft=new J,bt=[];return rt.forEach(function(At){for(var Ut in At)ft.has(Ut)||bt.push(ft.add(Ut))}),[bt.map(tt).join(q)].concat(rt.map(function(At){return bt.map(function(Ut){return tt(At[Ut])}).join(q)})).join("\n")},Se.formatRows=function(rt){return rt.map(Xe).join("\n")},Se},f.csv=f.dsv(",","text/csv"),f.tsv=f.dsv("\t","text/tab-separated-values");var Er,gr,mr,zr,Jt=this[G(this,"requestAnimationFrame")]||function(q){setTimeout(q,17)};function an(q,oe,de){var Me=arguments.length;Me<2&&(oe=0),Me<3&&(de=Date.now());var Se={c:q,t:de+oe,n:null};return gr?gr.n=Se:Er=Se,gr=Se,mr||(zr=clearTimeout(zr),mr=1,Jt(Sn)),Se}function Sn(){var q=Ln(),oe=Vn()-q;oe>24?(isFinite(oe)&&(clearTimeout(zr),zr=setTimeout(Sn,oe)),mr=0):(mr=1,Jt(Sn))}function Ln(){for(var q=Date.now(),oe=Er;oe;)q>=oe.t&&oe.c(q-oe.t)&&(oe.c=null),oe=oe.n;return q}function Vn(){for(var q,oe=Er,de=1/0;oe;)oe.c?(oe.t<de&&(de=oe.t),oe=(q=oe).n):oe=q?q.n=oe.n:Er=oe.n;return gr=q,de}function cr(q){return q[0]}function xn(q){return q[1]}function Qn(q){for(var oe,de,Me,Se=q.length,ze=[0,1],Ye=2,Xe=2;Xe<Se;Xe++){for(;Ye>1&&((de=q[ze[Ye-1]])[0]-(oe=q[ze[Ye-2]])[0])*((Me=q[Xe])[1]-oe[1])-(de[1]-oe[1])*(Me[0]-oe[0])<=0;)--Ye;ze[Ye++]=Xe}return ze.slice(0,Ye)}function er(q,oe){return q[0]-oe[0]||q[1]-oe[1]}f.timer=function(){an.apply(this,arguments)},f.timer.flush=function(){Ln(),Vn()},f.round=function(q,oe){return oe?Math.round(q*(oe=Math.pow(10,oe)))/oe:Math.round(q)},f.geom={},f.geom.hull=function(q){var oe=cr,de=xn;if(arguments.length)return Me(q);function Me(Se){if(Se.length<3)return[];var ze,Ye=Xn(oe),Xe=Xn(de),tt=Se.length,rt=[],ft=[];for(ze=0;ze<tt;ze++)rt.push([+Ye.call(this,Se[ze],ze),+Xe.call(this,Se[ze],ze),ze]);for(rt.sort(er),ze=0;ze<tt;ze++)ft.push([rt[ze][0],-rt[ze][1]]);var bt=Qn(rt),At=Qn(ft),Ut=At[0]===bt[0],qt=At[At.length-1]===bt[bt.length-1],jt=[];for(ze=bt.length-1;ze>=0;--ze)jt.push(Se[rt[bt[ze]][2]]);for(ze=+Ut;ze<At.length-qt;++ze)jt.push(Se[rt[At[ze]][2]]);return jt}return Me.x=function(Se){return arguments.length?(oe=Se,Me):oe},Me.y=function(Se){return arguments.length?(de=Se,Me):de},Me},f.geom.polygon=function(q){return le(q,Qt),q};var Qt=f.geom.polygon.prototype=[];function zn(q,oe,de){return(de[0]-oe[0])*(q[1]-oe[1])<(de[1]-oe[1])*(q[0]-oe[0])}function zt(q,oe,de,Me){var Se=q[0],ze=de[0],Ye=oe[0]-Se,Xe=Me[0]-ze,tt=q[1],rt=de[1],ft=oe[1]-tt,bt=Me[1]-rt,At=(Xe*(tt-rt)-bt*(Se-ze))/(bt*Ye-Xe*ft);return[Se+At*Ye,tt+At*ft]}function sn(q){var oe=q[0],de=q[q.length-1];return!(oe[0]-de[0]||oe[1]-de[1])}Qt.area=function(){for(var q,oe=-1,de=this.length,Me=this[de-1],Se=0;++oe<de;)Se+=(q=Me)[1]*(Me=this[oe])[0]-q[0]*Me[1];return.5*Se},Qt.centroid=function(q){var oe,de,Me=-1,Se=this.length,ze=0,Ye=0,Xe=this[Se-1];for(arguments.length||(q=-1/(6*this.area()));++Me<Se;)ze+=((oe=Xe)[0]+(Xe=this[Me])[0])*(de=oe[0]*Xe[1]-Xe[0]*oe[1]),Ye+=(oe[1]+Xe[1])*de;return[ze*q,Ye*q]},Qt.clip=function(q){for(var oe,de,Me,Se,ze,Ye,Xe=sn(q),tt=-1,rt=this.length-sn(this),ft=this[rt-1];++tt<rt;){for(oe=q.slice(),q.length=0,Se=this[tt],ze=oe[(Me=oe.length-Xe)-1],de=-1;++de<Me;)zn(Ye=oe[de],ft,Se)?(zn(ze,ft,Se)||q.push(zt(ze,Ye,ft,Se)),q.push(Ye)):zn(ze,ft,Se)&&q.push(zt(ze,Ye,ft,Se)),ze=Ye;Xe&&q.push(q[0]),ft=Se}return q};var hn,Dn,Rn,Hn,Mn,un=[],fn=[];function Tn(){vo(this),this.edge=this.site=this.circle=null}function An(q){var oe=un.pop()||new Tn;return oe.site=q,oe}function Gn(q){Pr(q),Rn.remove(q),un.push(q),vo(q)}function Zn(q){var oe=q.circle,de=oe.x,Me=oe.cy,Se={x:de,y:Me},ze=q.P,Ye=q.N,Xe=[q];Gn(q);for(var tt=ze;tt.circle&&_(de-tt.circle.x)<Lt&&_(Me-tt.circle.cy)<Lt;)ze=tt.P,Xe.unshift(tt),Gn(tt),tt=ze;Xe.unshift(tt),Pr(tt);for(var rt=Ye;rt.circle&&_(de-rt.circle.x)<Lt&&_(Me-rt.circle.cy)<Lt;)Ye=rt.N,Xe.push(rt),Gn(rt),rt=Ye;Xe.push(rt),Pr(rt);var ft,bt=Xe.length;for(ft=1;ft<bt;++ft)Nr((rt=Xe[ft]).edge,(tt=Xe[ft-1]).site,rt.site,Se);(rt=Xe[bt-1]).edge=ar((tt=Xe[0]).site,rt.site,null,Se),Sr(tt),Sr(rt)}function lr(q){for(var oe,de,Me,Se,ze=q.x,Ye=q.y,Xe=Rn._;Xe;)if((Me=nr(Xe,Ye)-ze)>Lt)Xe=Xe.L;else{if(!((Se=ze-br(Xe,Ye))>Lt)){Me>-Lt?(oe=Xe.P,de=Xe):Se>-Lt?(oe=Xe,de=Xe.N):oe=de=Xe;break}if(!Xe.R){oe=Xe;break}Xe=Xe.R}var tt=An(q);if(Rn.insert(oe,tt),oe||de){if(oe===de)return Pr(oe),de=An(oe.site),Rn.insert(tt,de),tt.edge=de.edge=ar(oe.site,tt.site),Sr(oe),void Sr(de);if(de){Pr(oe),Pr(de);var rt=oe.site,ft=rt.x,bt=rt.y,At=q.x-ft,Ut=q.y-bt,qt=de.site,jt=qt.x-ft,Kt=qt.y-bt,Vt=2*(At*Kt-Ut*jt),gn=At*At+Ut*Ut,ln=jt*jt+Kt*Kt,nn={x:(Kt*gn-Ut*ln)/Vt+ft,y:(At*ln-jt*gn)/Vt+bt};Nr(de.edge,rt,qt,nn),tt.edge=ar(rt,q,null,nn),de.edge=ar(q,qt,null,nn),Sr(oe),Sr(de)}else tt.edge=ar(oe.site,tt.site)}}function nr(q,oe){var de=q.site,Me=de.x,Se=de.y,ze=Se-oe;if(!ze)return Me;var Ye=q.P;if(!Ye)return-1/0;var Xe=(de=Ye.site).x,tt=de.y,rt=tt-oe;if(!rt)return Xe;var ft=Xe-Me,bt=1/ze-1/rt,At=ft/rt;return bt?(-At+Math.sqrt(At*At-2*bt*(ft*ft/(-2*rt)-tt+rt/2+Se-ze/2)))/bt+Me:(Me+Xe)/2}function br(q,oe){var de=q.N;if(de)return nr(de,oe);var Me=q.site;return Me.y===oe?Me.x:1/0}function or(q){this.site=q,this.edges=[]}function dr(q,oe){return oe.angle-q.angle}function kr(){vo(this),this.x=this.y=this.arc=this.site=this.cy=null}function Sr(q){var oe=q.P,de=q.N;if(oe&&de){var Me=oe.site,Se=q.site,ze=de.site;if(Me!==ze){var Ye=Se.x,Xe=Se.y,tt=Me.x-Ye,rt=Me.y-Xe,ft=ze.x-Ye,bt=2*(tt*(Kt=ze.y-Xe)-rt*ft);if(!(bt>=-Ft)){var At=tt*tt+rt*rt,Ut=ft*ft+Kt*Kt,qt=(Kt*At-rt*Ut)/bt,jt=(tt*Ut-ft*At)/bt,Kt=jt+Xe,Vt=fn.pop()||new kr;Vt.arc=q,Vt.site=Se,Vt.x=qt+Ye,Vt.y=Kt+Math.sqrt(qt*qt+jt*jt),Vt.cy=Kt,q.circle=Vt;for(var gn=null,ln=Mn._;ln;)if(Vt.y<ln.y||Vt.y===ln.y&&Vt.x<=ln.x){if(!ln.L){gn=ln.P;break}ln=ln.L}else{if(!ln.R){gn=ln;break}ln=ln.R}Mn.insert(gn,Vt),gn||(Hn=Vt)}}}}function Pr(q){var oe=q.circle;oe&&(oe.P||(Hn=oe.N),Mn.remove(oe),fn.push(oe),vo(oe),q.circle=null)}function rr(q,oe){var de=q.b;if(de)return!0;var Me,Se,ze=q.a,Ye=oe[0][0],Xe=oe[1][0],tt=oe[0][1],rt=oe[1][1],ft=q.l,bt=q.r,At=ft.x,Ut=ft.y,qt=bt.x,jt=bt.y,Kt=(At+qt)/2;if(jt===Ut){if(Kt<Ye||Kt>=Xe)return;if(At>qt){if(ze){if(ze.y>=rt)return}else ze={x:Kt,y:tt};de={x:Kt,y:rt}}else{if(ze){if(ze.y<tt)return}else ze={x:Kt,y:rt};de={x:Kt,y:tt}}}else if(Se=(Ut+jt)/2-(Me=(At-qt)/(jt-Ut))*Kt,Me<-1||Me>1)if(At>qt){if(ze){if(ze.y>=rt)return}else ze={x:(tt-Se)/Me,y:tt};de={x:(rt-Se)/Me,y:rt}}else{if(ze){if(ze.y<tt)return}else ze={x:(rt-Se)/Me,y:rt};de={x:(tt-Se)/Me,y:tt}}else if(Ut<jt){if(ze){if(ze.x>=Xe)return}else ze={x:Ye,y:Me*Ye+Se};de={x:Xe,y:Me*Xe+Se}}else{if(ze){if(ze.x<Ye)return}else ze={x:Xe,y:Me*Xe+Se};de={x:Ye,y:Me*Ye+Se}}return q.a=ze,q.b=de,!0}function Zr(q,oe){this.l=q,this.r=oe,this.a=this.b=null}function ar(q,oe,de,Me){var Se=new Zr(q,oe);return hn.push(Se),de&&Nr(Se,q,oe,de),Me&&Nr(Se,oe,q,Me),Dn[q.i].edges.push(new ii(Se,q,oe)),Dn[oe.i].edges.push(new ii(Se,oe,q)),Se}function Nr(q,oe,de,Me){q.a||q.b?q.l===de?q.b=Me:q.a=Me:(q.a=Me,q.l=oe,q.r=de)}function ii(q,oe,de){var Me=q.a,Se=q.b;this.edge=q,this.site=oe,this.angle=de?Math.atan2(de.y-oe.y,de.x-oe.x):q.l===oe?Math.atan2(Se.x-Me.x,Me.y-Se.y):Math.atan2(Me.x-Se.x,Se.y-Me.y)}function Gi(){this._=null}function vo(q){q.U=q.C=q.L=q.R=q.P=q.N=null}function so(q,oe){var de=oe,Me=oe.R,Se=de.U;Se?Se.L===de?Se.L=Me:Se.R=Me:q._=Me,Me.U=Se,de.U=Me,de.R=Me.L,de.R&&(de.R.U=de),Me.L=de}function lo(q,oe){var de=oe,Me=oe.L,Se=de.U;Se?Se.L===de?Se.L=Me:Se.R=Me:q._=Me,Me.U=Se,de.U=Me,de.L=Me.R,de.L&&(de.L.U=de),Me.R=de}function Qi(q){for(;q.L;)q=q.L;return q}function Co(q,oe){var de,Me,Se,ze=q.sort(Rs).pop();for(hn=[],Dn=new Array(q.length),Rn=new Gi,Mn=new Gi;;)if(Se=Hn,ze&&(!Se||ze.y<Se.y||ze.y===Se.y&&ze.x<Se.x))ze.x===de&&ze.y===Me||(Dn[ze.i]=new or(ze),lr(ze),de=ze.x,Me=ze.y),ze=q.pop();else{if(!Se)break;Zn(Se.arc)}oe&&(function(Xe){for(var tt,rt,ft,bt,At,Ut=hn,qt=(rt=Xe[0][0],ft=Xe[0][1],bt=Xe[1][0],At=Xe[1][1],function(Kt){var Vt,gn=Kt.a,ln=Kt.b,nn=gn.x,On=gn.y,Pn=0,tr=1,Jn=ln.x-nn,ur=ln.y-On;if(Vt=rt-nn,Jn||!(Vt>0)){if(Vt/=Jn,Jn<0){if(Vt<Pn)return;Vt<tr&&(tr=Vt)}else if(Jn>0){if(Vt>tr)return;Vt>Pn&&(Pn=Vt)}if(Vt=bt-nn,Jn||!(Vt<0)){if(Vt/=Jn,Jn<0){if(Vt>tr)return;Vt>Pn&&(Pn=Vt)}else if(Jn>0){if(Vt<Pn)return;Vt<tr&&(tr=Vt)}if(Vt=ft-On,ur||!(Vt>0)){if(Vt/=ur,ur<0){if(Vt<Pn)return;Vt<tr&&(tr=Vt)}else if(ur>0){if(Vt>tr)return;Vt>Pn&&(Pn=Vt)}if(Vt=At-On,ur||!(Vt<0)){if(Vt/=ur,ur<0){if(Vt>tr)return;Vt>Pn&&(Pn=Vt)}else if(ur>0){if(Vt<Pn)return;Vt<tr&&(tr=Vt)}return Pn>0&&(Kt.a={x:nn+Pn*Jn,y:On+Pn*ur}),tr<1&&(Kt.b={x:nn+tr*Jn,y:On+tr*ur}),Kt}}}}}),jt=Ut.length;jt--;)(!rr(tt=Ut[jt],Xe)||!qt(tt)||_(tt.a.x-tt.b.x)<Lt&&_(tt.a.y-tt.b.y)<Lt)&&(tt.a=tt.b=null,Ut.splice(jt,1))}(oe),function(Xe){for(var tt,rt,ft,bt,At,Ut,qt,jt,Kt,Vt,gn=Xe[0][0],ln=Xe[1][0],nn=Xe[0][1],On=Xe[1][1],Pn=Dn,tr=Pn.length;tr--;)if((At=Pn[tr])&&At.prepare())for(jt=(qt=At.edges).length,Ut=0;Ut<jt;)ft=(Vt=qt[Ut].end()).x,bt=Vt.y,tt=(Kt=qt[++Ut%jt].start()).x,rt=Kt.y,(_(ft-tt)>Lt||_(bt-rt)>Lt)&&(qt.splice(Ut,0,new ii((Jn=At.site,ur=Vt,vr=_(ft-gn)<Lt&&On-bt>Lt?{x:gn,y:_(tt-gn)<Lt?rt:On}:_(bt-On)<Lt&&ln-ft>Lt?{x:_(rt-On)<Lt?tt:ln,y:On}:_(ft-ln)<Lt&&bt-nn>Lt?{x:ln,y:_(tt-ln)<Lt?rt:nn}:_(bt-nn)<Lt&&ft-gn>Lt?{x:_(rt-nn)<Lt?tt:gn,y:nn}:null,wr=void 0,(wr=new Zr(Jn,null)).a=ur,wr.b=vr,hn.push(wr),wr),At.site,null)),++jt);var Jn,ur,vr,wr}(oe));var Ye={cells:Dn,edges:hn};return Rn=Mn=hn=Dn=null,Ye}function Rs(q,oe){return oe.y-q.y||oe.x-q.x}or.prototype.prepare=function(){for(var q,oe=this.edges,de=oe.length;de--;)(q=oe[de].edge).b&&q.a||oe.splice(de,1);return oe.sort(dr),oe.length},ii.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gi.prototype={insert:function(q,oe){var de,Me,Se;if(q){if(oe.P=q,oe.N=q.N,q.N&&(q.N.P=oe),q.N=oe,q.R){for(q=q.R;q.L;)q=q.L;q.L=oe}else q.R=oe;de=q}else this._?(q=Qi(this._),oe.P=null,oe.N=q,q.P=q.L=oe,de=q):(oe.P=oe.N=null,this._=oe,de=null);for(oe.L=oe.R=null,oe.U=de,oe.C=!0,q=oe;de&&de.C;)de===(Me=de.U).L?(Se=Me.R)&&Se.C?(de.C=Se.C=!1,Me.C=!0,q=Me):(q===de.R&&(so(this,de),de=(q=de).U),de.C=!1,Me.C=!0,lo(this,Me)):(Se=Me.L)&&Se.C?(de.C=Se.C=!1,Me.C=!0,q=Me):(q===de.L&&(lo(this,de),de=(q=de).U),de.C=!1,Me.C=!0,so(this,Me)),de=q.U;this._.C=!1},remove:function(q){q.N&&(q.N.P=q.P),q.P&&(q.P.N=q.N),q.N=q.P=null;var oe,de,Me,Se=q.U,ze=q.L,Ye=q.R;if(de=ze?Ye?Qi(Ye):ze:Ye,Se?Se.L===q?Se.L=de:Se.R=de:this._=de,ze&&Ye?(Me=de.C,de.C=q.C,de.L=ze,ze.U=de,de!==Ye?(Se=de.U,de.U=q.U,Se.L=q=de.R,de.R=Ye,Ye.U=de):(de.U=Se,Se=de,q=de.R)):(Me=q.C,q=de),q&&(q.U=Se),!Me)if(q&&q.C)q.C=!1;else{do{if(q===this._)break;if(q===Se.L){if((oe=Se.R).C&&(oe.C=!1,Se.C=!0,so(this,Se),oe=Se.R),oe.L&&oe.L.C||oe.R&&oe.R.C){oe.R&&oe.R.C||(oe.L.C=!1,oe.C=!0,lo(this,oe),oe=Se.R),oe.C=Se.C,Se.C=oe.R.C=!1,so(this,Se),q=this._;break}}else if((oe=Se.L).C&&(oe.C=!1,Se.C=!0,lo(this,Se),oe=Se.L),oe.L&&oe.L.C||oe.R&&oe.R.C){oe.L&&oe.L.C||(oe.R.C=!1,oe.C=!0,so(this,oe),oe=Se.L),oe.C=Se.C,Se.C=oe.L.C=!1,lo(this,Se),q=this._;break}oe.C=!0,q=Se,Se=Se.U}while(!q.C);q&&(q.C=!1)}}},f.geom.voronoi=function(q){var oe=cr,de=xn,Me=oe,Se=de,ze=Qr;if(q)return Ye(q);function Ye(tt){var rt=new Array(tt.length),ft=ze[0][0],bt=ze[0][1],At=ze[1][0],Ut=ze[1][1];return Co(Xe(tt),ze).cells.forEach(function(qt,jt){var Kt=qt.edges,Vt=qt.site;(rt[jt]=Kt.length?Kt.map(function(gn){var ln=gn.start();return[ln.x,ln.y]}):Vt.x>=ft&&Vt.x<=At&&Vt.y>=bt&&Vt.y<=Ut?[[ft,Ut],[At,Ut],[At,bt],[ft,bt]]:[]).point=tt[jt]}),rt}function Xe(tt){return tt.map(function(rt,ft){return{x:Math.round(Me(rt,ft)/Lt)*Lt,y:Math.round(Se(rt,ft)/Lt)*Lt,i:ft}})}return Ye.links=function(tt){return Co(Xe(tt)).edges.filter(function(rt){return rt.l&&rt.r}).map(function(rt){return{source:tt[rt.l.i],target:tt[rt.r.i]}})},Ye.triangles=function(tt){var rt=[];return Co(Xe(tt)).cells.forEach(function(ft,bt){for(var At,Ut,qt,jt,Kt=ft.site,Vt=ft.edges.sort(dr),gn=-1,ln=Vt.length,nn=Vt[ln-1].edge,On=nn.l===Kt?nn.r:nn.l;++gn<ln;)At=On,On=(nn=Vt[gn].edge).l===Kt?nn.r:nn.l,bt<At.i&&bt<On.i&&((Ut=Kt).x-(jt=On).x)*((qt=At).y-Ut.y)-(Ut.x-qt.x)*(jt.y-Ut.y)<0&&rt.push([tt[bt],tt[At.i],tt[On.i]])}),rt},Ye.x=function(tt){return arguments.length?(Me=Xn(oe=tt),Ye):oe},Ye.y=function(tt){return arguments.length?(Se=Xn(de=tt),Ye):de},Ye.clipExtent=function(tt){return arguments.length?(ze=tt??Qr,Ye):ze===Qr?null:ze},Ye.size=function(tt){return arguments.length?Ye.clipExtent(tt&&[[0,0],tt]):ze===Qr?null:ze&&ze[1]},Ye};var Qr=[[-1e6,-1e6],[1e6,1e6]];function _s(q){return q.x}function Iu(q){return q.y}function Xo(q,oe,de,Me,Se,ze){if(!q(oe,de,Me,Se,ze)){var Ye=.5*(de+Se),Xe=.5*(Me+ze),tt=oe.nodes;tt[0]&&Xo(q,tt[0],de,Me,Ye,Xe),tt[1]&&Xo(q,tt[1],Ye,Me,Se,Xe),tt[2]&&Xo(q,tt[2],de,Xe,Ye,ze),tt[3]&&Xo(q,tt[3],Ye,Xe,Se,ze)}}function jl(q,oe){q=f.rgb(q),oe=f.rgb(oe);var de=q.r,Me=q.g,Se=q.b,ze=oe.r-de,Ye=oe.g-Me,Xe=oe.b-Se;return function(tt){return"#"+pn(Math.round(de+ze*tt))+pn(Math.round(Me+Ye*tt))+pn(Math.round(Se+Xe*tt))}}function xc(q,oe){var de,Me={},Se={};for(de in q)de in oe?Me[de]=ja(q[de],oe[de]):Se[de]=q[de];for(de in oe)de in q||(Se[de]=oe[de]);return function(ze){for(de in Me)Se[de]=Me[de](ze);return Se}}function Bi(q,oe){return q=+q,oe=+oe,function(de){return q*(1-de)+oe*de}}function Wc(q,oe){var de,Me,Se,ze=Ul.lastIndex=Vl.lastIndex=0,Ye=-1,Xe=[],tt=[];for(q+="",oe+="";(de=Ul.exec(q))&&(Me=Vl.exec(oe));)(Se=Me.index)>ze&&(Se=oe.slice(ze,Se),Xe[Ye]?Xe[Ye]+=Se:Xe[++Ye]=Se),(de=de[0])===(Me=Me[0])?Xe[Ye]?Xe[Ye]+=Me:Xe[++Ye]=Me:(Xe[++Ye]=null,tt.push({i:Ye,x:Bi(de,Me)})),ze=Vl.lastIndex;return ze<oe.length&&(Se=oe.slice(ze),Xe[Ye]?Xe[Ye]+=Se:Xe[++Ye]=Se),Xe.length<2?tt[0]?(oe=tt[0].x,function(rt){return oe(rt)+""}):function(){return oe}:(oe=tt.length,function(rt){for(var ft,bt=0;bt<oe;++bt)Xe[(ft=tt[bt]).i]=ft.x(rt);return Xe.join("")})}f.geom.delaunay=function(q){return f.geom.voronoi().triangles(q)},f.geom.quadtree=function(q,oe,de,Me,Se){var ze,Ye=cr,Xe=xn;if(ze=arguments.length)return Ye=_s,Xe=Iu,3===ze&&(Se=de,Me=oe,de=oe=0),tt(q);function tt(rt){var ft,bt,At,Ut,qt,jt,Kt,Vt,gn,ln=Xn(Ye),nn=Xn(Xe);if(null!=oe)jt=oe,Kt=de,Vt=Me,gn=Se;else if(Vt=gn=-(jt=Kt=1/0),bt=[],At=[],qt=rt.length,ze)for(Ut=0;Ut<qt;++Ut)(ft=rt[Ut]).x<jt&&(jt=ft.x),ft.y<Kt&&(Kt=ft.y),ft.x>Vt&&(Vt=ft.x),ft.y>gn&&(gn=ft.y),bt.push(ft.x),At.push(ft.y);else for(Ut=0;Ut<qt;++Ut){var On=+ln(ft=rt[Ut],Ut),Pn=+nn(ft,Ut);On<jt&&(jt=On),Pn<Kt&&(Kt=Pn),On>Vt&&(Vt=On),Pn>gn&&(gn=Pn),bt.push(On),At.push(Pn)}var tr=Vt-jt,Jn=gn-Kt;function ur(Cr,Or,Rr,si,ir,Ar,Lr,qr){if(!isNaN(Rr)&&!isNaN(si))if(Cr.leaf){var ni=Cr.x,gi=Cr.y;if(null!=ni)if(_(ni-Rr)+_(gi-si)<.01)vr(Cr,Or,Rr,si,ir,Ar,Lr,qr);else{var Ai=Cr.point;Cr.x=Cr.y=Cr.point=null,vr(Cr,Ai,ni,gi,ir,Ar,Lr,qr),vr(Cr,Or,Rr,si,ir,Ar,Lr,qr)}else Cr.x=Rr,Cr.y=si,Cr.point=Or}else vr(Cr,Or,Rr,si,ir,Ar,Lr,qr)}function vr(Cr,Or,Rr,si,ir,Ar,Lr,qr){var ni=.5*(ir+Lr),gi=.5*(Ar+qr),Ai=Rr>=ni,Yi=si>=gi,xo=Yi<<1|Ai;Cr.leaf=!1,Ai?ir=ni:Lr=ni,Yi?Ar=gi:qr=gi,ur(Cr=Cr.nodes[xo]||(Cr.nodes[xo]={leaf:!0,nodes:[],point:null,x:null,y:null}),Or,Rr,si,ir,Ar,Lr,qr)}tr>Jn?gn=Kt+tr:Vt=jt+Jn;var wr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Cr){ur(wr,Cr,+ln(Cr,++Ut),+nn(Cr,Ut),jt,Kt,Vt,gn)},visit:function(Cr){Xo(Cr,wr,jt,Kt,Vt,gn)},find:function(Cr){return Rr=Cr[0],si=Cr[1],gi=1/0,function Ai(Yi,xo,mo,$i,Do){if(!(xo>Lr||mo>qr||$i<ir||Do<Ar)){if(aa=Yi.point){var aa,$r=Rr-Yi.x,Zo=si-Yi.y,Xi=$r*$r+Zo*Zo;if(Xi<gi){var Oi=Math.sqrt(gi=Xi);ir=Rr-Oi,Ar=si-Oi,Lr=Rr+Oi,qr=si+Oi,ni=aa}}for(var bo=Yi.nodes,uo=.5*(xo+$i),_o=.5*(mo+Do),na=(si>=_o)<<1|Rr>=uo,Io=na+4;na<Io;++na)if(Yi=bo[3&na])switch(3&na){case 0:Ai(Yi,xo,mo,uo,_o);break;case 1:Ai(Yi,uo,mo,$i,_o);break;case 2:Ai(Yi,xo,_o,uo,Do);break;case 3:Ai(Yi,uo,_o,$i,Do)}}}(wr,ir=jt,Ar=Kt,Lr=Vt,qr=gn),ni;var Rr,si,ir,Ar,Lr,qr,ni,gi}};if(Ut=-1,null==oe){for(;++Ut<qt;)ur(wr,rt[Ut],bt[Ut],At[Ut],jt,Kt,Vt,gn);--Ut}else rt.forEach(wr.add);return bt=At=rt=ft=null,wr}return tt.x=function(rt){return arguments.length?(Ye=rt,tt):Ye},tt.y=function(rt){return arguments.length?(Xe=rt,tt):Xe},tt.extent=function(rt){return arguments.length?(null==rt?oe=de=Me=Se=null:(oe=+rt[0][0],de=+rt[0][1],Me=+rt[1][0],Se=+rt[1][1]),tt):null==oe?null:[[oe,de],[Me,Se]]},tt.size=function(rt){return arguments.length?(null==rt?oe=de=Me=Se=null:(oe=de=0,Me=+rt[0],Se=+rt[1]),tt):null==oe?null:[Me-oe,Se-de]},tt},f.interpolateRgb=jl,f.interpolateObject=xc,f.interpolateNumber=Bi,f.interpolateString=Wc;var Ul=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(Ul.source,"g");function ja(q,oe){for(var de,Me=f.interpolators.length;--Me>=0&&!(de=f.interpolators[Me](q,oe)););return de}function Ro(q,oe){var de,Me=[],Se=[],ze=q.length,Ye=oe.length,Xe=Math.min(q.length,oe.length);for(de=0;de<Xe;++de)Me.push(ja(q[de],oe[de]));for(;de<ze;++de)Se[de]=q[de];for(;de<Ye;++de)Se[de]=oe[de];return function(tt){for(de=0;de<Xe;++de)Se[de]=Me[de](tt);return Se}}f.interpolate=ja,f.interpolators=[function(q,oe){var de=typeof oe;return("string"===de?Nn.has(oe.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(oe)?jl:Wc:oe instanceof ht?jl:Array.isArray(oe)?Ro:"object"===de&&isNaN(oe)?xc:Bi)(q,oe)}],f.interpolateArray=Ro;var cl=function(){return z},Wi=f.map({linear:cl,poly:function(q){return function(oe){return Math.pow(oe,q)}},quad:function(){return Ea},cubic:function(){return fl},sin:function(){return Xs},exp:function(){return Br},circle:function(){return Zu},elastic:function(q,oe){var de;return arguments.length<2&&(oe=.45),arguments.length?de=oe/Wt*Math.asin(1/q):(q=1,de=oe/4),function(Me){return 1+q*Math.pow(2,-10*Me)*Math.sin((Me-de)*Wt/oe)}},back:function(q){return q||(q=1.70158),function(oe){return oe*oe*((q+1)*oe-q)}},bounce:function(){return Vr}}),Fs=f.map({in:z,out:Ka,"in-out":Ns,"out-in":function(q){return Ns(Ka(q))}});function Ka(q){return function(oe){return 1-q(1-oe)}}function Ns(q){return function(oe){return.5*(oe<.5?q(2*oe):2-q(2-2*oe))}}function Ea(q){return q*q}function fl(q){return q*q*q}function Ca(q){if(q<=0)return 0;if(q>=1)return 1;var oe=q*q,de=oe*q;return 4*(q<.5?de:3*(q-oe)+de-.75)}function Xs(q){return 1-Math.cos(q*it)}function Br(q){return Math.pow(2,10*(q-1))}function Zu(q){return 1-Math.sqrt(1-q*q)}function Vr(q){return q<.36363636363636365?7.5625*q*q:q<.7272727272727273?7.5625*(q-=.5454545454545454)*q+.75:q<.9090909090909091?7.5625*(q-=.8181818181818182)*q+.9375:7.5625*(q-=.9545454545454546)*q+.984375}function su(q,oe){return oe-=q,function(de){return Math.round(q+oe*de)}}function lu(q){var oe,de,Me,Se=[q.a,q.b],ze=[q.c,q.d],Ye=Yu(Se),Xe=Hl(Se,ze),tt=Yu(((oe=ze)[0]+=(Me=-Xe)*(de=Se)[0],oe[1]+=Me*de[1],oe))||0;Se[0]*ze[1]<ze[0]*Se[1]&&(Se[0]*=-1,Se[1]*=-1,Ye*=-1,Xe*=-1),this.rotate=(Ye?Math.atan2(Se[1],Se[0]):Math.atan2(-ze[0],ze[1]))*Je,this.translate=[q.e,q.f],this.scale=[Ye,tt],this.skew=tt?Math.atan2(Xe,tt)*Je:0}function Hl(q,oe){return q[0]*oe[0]+q[1]*oe[1]}function Yu(q){var oe=Math.sqrt(Hl(q,q));return oe&&(q[0]/=oe,q[1]/=oe),oe}f.ease=function(q){var oe,de=q.indexOf("-"),Me=de>=0?q.slice(0,de):q,Se=de>=0?q.slice(de+1):"in";return Me=Wi.get(Me)||cl,Se=Fs.get(Se)||z,oe=Se(Me.apply(null,k.call(arguments,1))),function(ze){return ze<=0?0:ze>=1?1:oe(ze)}},f.interpolateHcl=function(q,oe){q=f.hcl(q),oe=f.hcl(oe);var de=q.h,Me=q.c,Se=q.l,ze=oe.h-de,Ye=oe.c-Me,Xe=oe.l-Se;return isNaN(Ye)&&(Ye=0,Me=isNaN(Me)?oe.c:Me),isNaN(ze)?(ze=0,de=isNaN(de)?oe.h:de):ze>180?ze-=360:ze<-180&&(ze+=360),function(tt){return _t(de+ze*tt,Me+Ye*tt,Se+Xe*tt)+""}},f.interpolateHsl=function(q,oe){q=f.hsl(q),oe=f.hsl(oe);var de=q.h,Me=q.s,Se=q.l,ze=oe.h-de,Ye=oe.s-Me,Xe=oe.l-Se;return isNaN(Ye)&&(Ye=0,Me=isNaN(Me)?oe.s:Me),isNaN(ze)?(ze=0,de=isNaN(de)?oe.h:de):ze>180?ze-=360:ze<-180&&(ze+=360),function(tt){return Et(de+ze*tt,Me+Ye*tt,Se+Xe*tt)+""}},f.interpolateLab=function(q,oe){q=f.lab(q),oe=f.lab(oe);var de=q.l,Me=q.a,Se=q.b,ze=oe.l-de,Ye=oe.a-Me,Xe=oe.b-Se;return function(tt){return on(de+ze*tt,Me+Ye*tt,Se+Xe*tt)+""}},f.interpolateRound=su,f.transform=function(q){var oe=v.createElementNS(f.ns.prefix.svg,"g");return(f.transform=function(de){if(null!=de){oe.setAttribute("transform",de);var Me=oe.transform.baseVal.consolidate()}return new lu(Me?Me.matrix:bc)})(q)},lu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bc={a:1,b:0,c:0,d:1,e:0,f:0};function ql(q){return q.length?q.pop()+",":""}function Da(q,oe){var Se,ze,Ye,de=[],Me=[];return q=f.transform(q),oe=f.transform(oe),function(Se,ze,Ye,Xe){if(Se[0]!==ze[0]||Se[1]!==ze[1]){var tt=Ye.push("translate(",null,",",null,")");Xe.push({i:tt-4,x:Bi(Se[0],ze[0])},{i:tt-2,x:Bi(Se[1],ze[1])})}else(ze[0]||ze[1])&&Ye.push("translate("+ze+")")}(q.translate,oe.translate,de,Me),Ye=de,(Se=q.rotate)!==(ze=oe.rotate)?(Se-ze>180?ze+=360:ze-Se>180&&(Se+=360),Me.push({i:Ye.push(ql(Ye)+"rotate(",null,")")-2,x:Bi(Se,ze)})):ze&&Ye.push(ql(Ye)+"rotate("+ze+")"),function(Se,ze,Ye,Xe){Se!==ze?Xe.push({i:Ye.push(ql(Ye)+"skewX(",null,")")-2,x:Bi(Se,ze)}):ze&&Ye.push(ql(Ye)+"skewX("+ze+")")}(q.skew,oe.skew,de,Me),function(Se,ze,Ye,Xe){if(Se[0]!==ze[0]||Se[1]!==ze[1]){var tt=Ye.push(ql(Ye)+"scale(",null,",",null,")");Xe.push({i:tt-4,x:Bi(Se[0],ze[0])},{i:tt-2,x:Bi(Se[1],ze[1])})}else 1===ze[0]&&1===ze[1]||Ye.push(ql(Ye)+"scale("+ze+")")}(q.scale,oe.scale,de,Me),q=oe=null,function(Se){for(var ze,Ye=-1,Xe=Me.length;++Ye<Xe;)de[(ze=Me[Ye]).i]=ze.x(Se);return de.join("")}}function Ia(q,oe){return oe=(oe-=q=+q)||1/oe,function(de){return(de-q)/oe}}function oa(q,oe){return oe=(oe-=q=+q)||1/oe,function(de){return Math.max(0,Math.min(1,(de-q)/oe))}}function Ja(q){for(var oe=q.source,de=q.target,Me=function(Ye,Xe){if(Ye===Xe)return Ye;for(var tt=Vi(Ye),rt=Vi(Xe),ft=tt.pop(),bt=rt.pop(),At=null;ft===bt;)At=ft,ft=tt.pop(),bt=rt.pop();return At}(oe,de),Se=[oe];oe!==Me;)Se.push(oe=oe.parent);for(var ze=Se.length;de!==Me;)Se.splice(ze,0,de),de=de.parent;return Se}function Vi(q){for(var oe=[],de=q.parent;null!=de;)oe.push(q),q=de,de=de.parent;return oe.push(q),oe}function Gl(q){q.fixed|=2}function Ua(q){q.fixed&=-7}function Ks(q){q.fixed|=4,q.px=q.x,q.py=q.y}function ws(q){q.fixed&=-5}function ha(q,oe,de){var Me=0,Se=0;if(q.charge=0,!q.leaf)for(var ze,Ye=q.nodes,Xe=Ye.length,tt=-1;++tt<Xe;)null!=(ze=Ye[tt])&&(ha(ze,oe,de),q.charge+=ze.charge,Me+=ze.charge*ze.cx,Se+=ze.charge*ze.cy);if(q.point){q.leaf||(q.point.x+=Math.random()-.5,q.point.y+=Math.random()-.5);var rt=oe*de[q.point.index];q.charge+=q.pointCharge=rt,Me+=rt*q.point.x,Se+=rt*q.point.y}q.cx=Me/q.charge,q.cy=Se/q.charge}f.interpolateTransform=Da,f.layout={},f.layout.bundle=function(){return function(q){for(var oe=[],de=-1,Me=q.length;++de<Me;)oe.push(Ja(q[de]));return oe}},f.layout.chord=function(){var q,oe,de,Me,Se,ze,Ye,Xe={},tt=0;function rt(){var bt,At,Ut,qt,jt,Kt={},Vt=[],gn=f.range(Me),ln=[];for(q=[],oe=[],bt=0,qt=-1;++qt<Me;){for(At=0,jt=-1;++jt<Me;)At+=de[qt][jt];Vt.push(At),ln.push(f.range(Me)),bt+=At}for(Se&&gn.sort(function(wr,Cr){return Se(Vt[wr],Vt[Cr])}),ze&&ln.forEach(function(wr,Cr){wr.sort(function(Or,Rr){return ze(de[Cr][Or],de[Cr][Rr])})}),bt=(Wt-tt*Me)/bt,At=0,qt=-1;++qt<Me;){for(Ut=At,jt=-1;++jt<Me;){var nn=gn[qt],On=ln[nn][jt],Pn=de[nn][On],tr=At,Jn=At+=Pn*bt;Kt[nn+"-"+On]={index:nn,subindex:On,startAngle:tr,endAngle:Jn,value:Pn}}oe[nn]={index:nn,startAngle:Ut,endAngle:At,value:Vt[nn]},At+=tt}for(qt=-1;++qt<Me;)for(jt=qt-1;++jt<Me;){var ur=Kt[qt+"-"+jt],vr=Kt[jt+"-"+qt];(ur.value||vr.value)&&q.push(ur.value<vr.value?{source:vr,target:ur}:{source:ur,target:vr})}Ye&&ft()}function ft(){q.sort(function(bt,At){return Ye((bt.source.value+bt.target.value)/2,(At.source.value+At.target.value)/2)})}return Xe.matrix=function(bt){return arguments.length?(Me=(de=bt)&&de.length,q=oe=null,Xe):de},Xe.padding=function(bt){return arguments.length?(tt=bt,q=oe=null,Xe):tt},Xe.sortGroups=function(bt){return arguments.length?(Se=bt,q=oe=null,Xe):Se},Xe.sortSubgroups=function(bt){return arguments.length?(ze=bt,q=null,Xe):ze},Xe.sortChords=function(bt){return arguments.length?(Ye=bt,q&&ft(),Xe):Ye},Xe.chords=function(){return q||rt(),q},Xe.groups=function(){return oe||rt(),oe},Xe},f.layout.force=function(){var q,oe,de,Me,Se,ze,Ye={},Xe=f.dispatch("start","tick","end"),tt=[1,1],rt=.9,ft=Wl,bt=Js,At=-30,Ut=no,qt=.1,jt=.64,Kt=[],Vt=[];function gn(nn){return function(On,Pn,tr,Jn){if(On.point!==nn){var ur=On.cx-nn.x,vr=On.cy-nn.y,wr=Jn-Pn,Cr=ur*ur+vr*vr;if(wr*wr/jt<Cr){if(Cr<Ut){var Or=On.charge/Cr;nn.px-=ur*Or,nn.py-=vr*Or}return!0}On.point&&Cr&&Cr<Ut&&(nn.px-=ur*(Or=On.pointCharge/Cr),nn.py-=vr*Or)}return!On.charge}}function ln(nn){nn.px=f.event.x,nn.py=f.event.y,Ye.resume()}return Ye.tick=function(){if((de*=.99)<.005)return q=null,Xe.end({type:"end",alpha:de=0}),!0;var nn,On,Pn,tr,Jn,ur,vr,wr,Cr,Or=Kt.length,Rr=Vt.length;for(On=0;On<Rr;++On)tr=(Pn=Vt[On]).source,(ur=(wr=(Jn=Pn.target).x-tr.x)*wr+(Cr=Jn.y-tr.y)*Cr)&&(wr*=ur=de*Se[On]*((ur=Math.sqrt(ur))-Me[On])/ur,Cr*=ur,Jn.x-=wr*(vr=tr.weight+Jn.weight?tr.weight/(tr.weight+Jn.weight):.5),Jn.y-=Cr*vr,tr.x+=wr*(vr=1-vr),tr.y+=Cr*vr);if((vr=de*qt)&&(wr=tt[0]/2,Cr=tt[1]/2,On=-1,vr))for(;++On<Or;)(Pn=Kt[On]).x+=(wr-Pn.x)*vr,Pn.y+=(Cr-Pn.y)*vr;if(At)for(ha(nn=f.geom.quadtree(Kt),de,ze),On=-1;++On<Or;)(Pn=Kt[On]).fixed||nn.visit(gn(Pn));for(On=-1;++On<Or;)(Pn=Kt[On]).fixed?(Pn.x=Pn.px,Pn.y=Pn.py):(Pn.x-=(Pn.px-(Pn.px=Pn.x))*rt,Pn.y-=(Pn.py-(Pn.py=Pn.y))*rt);Xe.tick({type:"tick",alpha:de})},Ye.nodes=function(nn){return arguments.length?(Kt=nn,Ye):Kt},Ye.links=function(nn){return arguments.length?(Vt=nn,Ye):Vt},Ye.size=function(nn){return arguments.length?(tt=nn,Ye):tt},Ye.linkDistance=function(nn){return arguments.length?(ft="function"==typeof nn?nn:+nn,Ye):ft},Ye.distance=Ye.linkDistance,Ye.linkStrength=function(nn){return arguments.length?(bt="function"==typeof nn?nn:+nn,Ye):bt},Ye.friction=function(nn){return arguments.length?(rt=+nn,Ye):rt},Ye.charge=function(nn){return arguments.length?(At="function"==typeof nn?nn:+nn,Ye):At},Ye.chargeDistance=function(nn){return arguments.length?(Ut=nn*nn,Ye):Math.sqrt(Ut)},Ye.gravity=function(nn){return arguments.length?(qt=+nn,Ye):qt},Ye.theta=function(nn){return arguments.length?(jt=nn*nn,Ye):Math.sqrt(jt)},Ye.alpha=function(nn){return arguments.length?(nn=+nn,de?nn>0?de=nn:(q.c=null,q.t=NaN,q=null,Xe.end({type:"end",alpha:de=0})):nn>0&&(Xe.start({type:"start",alpha:de=nn}),q=an(Ye.tick)),Ye):de},Ye.start=function(){var nn,On,Pn,tr=Kt.length,Jn=Vt.length,ur=tt[0],vr=tt[1];for(nn=0;nn<tr;++nn)(Pn=Kt[nn]).index=nn,Pn.weight=0;for(nn=0;nn<Jn;++nn)"number"==typeof(Pn=Vt[nn]).source&&(Pn.source=Kt[Pn.source]),"number"==typeof Pn.target&&(Pn.target=Kt[Pn.target]),++Pn.source.weight,++Pn.target.weight;for(nn=0;nn<tr;++nn)Pn=Kt[nn],isNaN(Pn.x)&&(Pn.x=wr("x",ur)),isNaN(Pn.y)&&(Pn.y=wr("y",vr)),isNaN(Pn.px)&&(Pn.px=Pn.x),isNaN(Pn.py)&&(Pn.py=Pn.y);if(Me=[],"function"==typeof ft)for(nn=0;nn<Jn;++nn)Me[nn]=+ft.call(this,Vt[nn],nn);else for(nn=0;nn<Jn;++nn)Me[nn]=ft;if(Se=[],"function"==typeof bt)for(nn=0;nn<Jn;++nn)Se[nn]=+bt.call(this,Vt[nn],nn);else for(nn=0;nn<Jn;++nn)Se[nn]=bt;if(ze=[],"function"==typeof At)for(nn=0;nn<tr;++nn)ze[nn]=+At.call(this,Kt[nn],nn);else for(nn=0;nn<tr;++nn)ze[nn]=At;function wr(Cr,Or){if(!On){for(On=new Array(tr),Ar=0;Ar<tr;++Ar)On[Ar]=[];for(Ar=0;Ar<Jn;++Ar){var Rr=Vt[Ar];On[Rr.source.index].push(Rr.target),On[Rr.target.index].push(Rr.source)}}for(var si,ir=On[nn],Ar=-1,Lr=ir.length;++Ar<Lr;)if(!isNaN(si=ir[Ar][Cr]))return si;return Math.random()*Or}return Ye.resume()},Ye.resume=function(){return Ye.alpha(.1)},Ye.stop=function(){return Ye.alpha(0)},Ye.drag=function(){if(oe||(oe=f.behavior.drag().origin(z).on("dragstart.force",Gl).on("drag.force",ln).on("dragend.force",Ua)),!arguments.length)return oe;this.on("mouseover.force",Ks).on("mouseout.force",ws).call(oe)},f.rebind(Ye,Xe,"on")};var Wl=20,Js=1,no=1/0;function Qa(q,oe){return f.rebind(q,oe,"sort","children","value"),q.nodes=q,q.links=wc,q}function Zl(q,oe){for(var de=[q];null!=(q=de.pop());)if(oe(q),(Se=q.children)&&(Me=Se.length))for(var Me,Se;--Me>=0;)de.push(Se[Me])}function es(q,oe){for(var de=[q],Me=[];null!=(q=de.pop());)if(Me.push(q),(ze=q.children)&&(Se=ze.length))for(var Se,ze,Ye=-1;++Ye<Se;)de.push(ze[Ye]);for(;null!=(q=Me.pop());)oe(q)}function Ts(q){return q.children}function _c(q){return q.value}function uu(q,oe){return oe.value-q.value}function wc(q){return f.merge(q.map(function(oe){return(oe.children||[]).map(function(de){return{source:oe,target:de}})}))}f.layout.hierarchy=function(){var q=uu,oe=Ts,de=_c;function Me(Se){var ze,Ye=[Se],Xe=[];for(Se.depth=0;null!=(ze=Ye.pop());)if(Xe.push(ze),(rt=oe.call(Me,ze,ze.depth))&&(tt=rt.length)){for(var tt,rt,ft;--tt>=0;)Ye.push(ft=rt[tt]),ft.parent=ze,ft.depth=ze.depth+1;de&&(ze.value=0),ze.children=rt}else de&&(ze.value=+de.call(Me,ze,ze.depth)||0),delete ze.children;return es(Se,function(bt){var At,Ut;q&&(At=bt.children)&&At.sort(q),de&&(Ut=bt.parent)&&(Ut.value+=bt.value)}),Xe}return Me.sort=function(Se){return arguments.length?(q=Se,Me):q},Me.children=function(Se){return arguments.length?(oe=Se,Me):oe},Me.value=function(Se){return arguments.length?(de=Se,Me):de},Me.revalue=function(Se){return de&&(Zl(Se,function(ze){ze.children&&(ze.value=0)}),es(Se,function(ze){var Ye;ze.children||(ze.value=+de.call(Me,ze,ze.depth)||0),(Ye=ze.parent)&&(Ye.value+=ze.value)})),Se},Me},f.layout.partition=function(){var q=f.layout.hierarchy(),oe=[1,1];function de(ze,Ye,Xe,tt){var rt=ze.children;if(ze.x=Ye,ze.y=ze.depth*tt,ze.dx=Xe,ze.dy=tt,rt&&(ft=rt.length)){var ft,bt,At,Ut=-1;for(Xe=ze.value?Xe/ze.value:0;++Ut<ft;)de(bt=rt[Ut],Ye,At=bt.value*Xe,tt),Ye+=At}}function Me(ze){var Ye=ze.children,Xe=0;if(Ye&&(tt=Ye.length))for(var tt,rt=-1;++rt<tt;)Xe=Math.max(Xe,Me(Ye[rt]));return 1+Xe}function Se(ze,Ye){var Xe=q.call(this,ze,Ye);return de(Xe[0],0,oe[0],oe[1]/Me(Xe[0])),Xe}return Se.size=function(ze){return arguments.length?(oe=ze,Se):oe},Qa(Se,q)},f.layout.pie=function(){var q=Number,oe=$u,de=0,Me=Wt,Se=0;function ze(Ye){var Xe,tt=Ye.length,rt=Ye.map(function(gn,ln){return+q.call(ze,gn,ln)}),ft=+("function"==typeof de?de.apply(this,arguments):de),bt=("function"==typeof Me?Me.apply(this,arguments):Me)-ft,At=Math.min(Math.abs(bt)/tt,+("function"==typeof Se?Se.apply(this,arguments):Se)),Ut=At*(bt<0?-1:1),qt=f.sum(rt),jt=qt?(bt-tt*Ut)/qt:0,Kt=f.range(tt),Vt=[];return null!=oe&&Kt.sort(oe===$u?function(gn,ln){return rt[ln]-rt[gn]}:function(gn,ln){return oe(Ye[gn],Ye[ln])}),Kt.forEach(function(gn){Vt[gn]={data:Ye[gn],value:Xe=rt[gn],startAngle:ft,endAngle:ft+=Xe*jt+Ut,padAngle:At}}),Vt}return ze.value=function(Ye){return arguments.length?(q=Ye,ze):q},ze.sort=function(Ye){return arguments.length?(oe=Ye,ze):oe},ze.startAngle=function(Ye){return arguments.length?(de=Ye,ze):de},ze.endAngle=function(Ye){return arguments.length?(Me=Ye,ze):Me},ze.padAngle=function(Ye){return arguments.length?(Se=Ye,ze):Se},ze};var $u={};function cu(q){return q.x}function Yl(q){return q.y}function Ra(q,oe,de){q.y0=oe,q.y=de}f.layout.stack=function(){var q=z,oe=hl,de=Qs,Me=Ra,Se=cu,ze=Yl;function Ye(Xe,tt){if(!(At=Xe.length))return Xe;var rt=Xe.map(function(gn,ln){return q.call(Ye,gn,ln)}),ft=rt.map(function(gn){return gn.map(function(ln,nn){return[Se.call(Ye,ln,nn),ze.call(Ye,ln,nn)]})}),bt=oe.call(Ye,ft,tt);rt=f.permute(rt,bt),ft=f.permute(ft,bt);var At,Ut,qt,jt,Kt=de.call(Ye,ft,tt),Vt=rt[0].length;for(qt=0;qt<Vt;++qt)for(Me.call(Ye,rt[0][qt],jt=Kt[qt],ft[0][qt][1]),Ut=1;Ut<At;++Ut)Me.call(Ye,rt[Ut][qt],jt+=ft[Ut-1][qt][1],ft[Ut][qt][1]);return Xe}return Ye.values=function(Xe){return arguments.length?(q=Xe,Ye):q},Ye.order=function(Xe){return arguments.length?(oe="function"==typeof Xe?Xe:dl.get(Xe)||hl,Ye):oe},Ye.offset=function(Xe){return arguments.length?(de="function"==typeof Xe?Xe:zs.get(Xe)||Qs,Ye):de},Ye.x=function(Xe){return arguments.length?(Se=Xe,Ye):Se},Ye.y=function(Xe){return arguments.length?(ze=Xe,Ye):ze},Ye.out=function(Xe){return arguments.length?(Me=Xe,Ye):Me},Ye};var dl=f.map({"inside-out":function(q){var oe,de,Me=q.length,Se=q.map(Lu),ze=q.map(Ms),Ye=f.range(Me).sort(function(bt,At){return Se[bt]-Se[At]}),Xe=0,tt=0,rt=[],ft=[];for(oe=0;oe<Me;++oe)de=Ye[oe],Xe<tt?(Xe+=ze[de],rt.push(de)):(tt+=ze[de],ft.push(de));return ft.reverse().concat(rt)},reverse:function(q){return f.range(q.length).reverse()},default:hl}),zs=f.map({silhouette:function(q){var oe,de,Me,Se=q.length,ze=q[0].length,Ye=[],Xe=0,tt=[];for(de=0;de<ze;++de){for(oe=0,Me=0;oe<Se;oe++)Me+=q[oe][de][1];Me>Xe&&(Xe=Me),Ye.push(Me)}for(de=0;de<ze;++de)tt[de]=(Xe-Ye[de])/2;return tt},wiggle:function(q){var oe,de,Me,Se,ze,Ye,Xe,tt,rt,ft=q.length,bt=q[0],At=bt.length,Ut=[];for(Ut[0]=tt=rt=0,de=1;de<At;++de){for(oe=0,Se=0;oe<ft;++oe)Se+=q[oe][de][1];for(oe=0,ze=0,Xe=bt[de][0]-bt[de-1][0];oe<ft;++oe){for(Me=0,Ye=(q[oe][de][1]-q[oe][de-1][1])/(2*Xe);Me<oe;++Me)Ye+=(q[Me][de][1]-q[Me][de-1][1])/Xe;ze+=Ye*q[oe][de][1]}Ut[de]=tt-=Se?ze/Se*Xe:0,tt<rt&&(rt=tt)}for(de=0;de<At;++de)Ut[de]-=rt;return Ut},expand:function(q){var oe,de,Me,Se=q.length,ze=q[0].length,Ye=1/Se,Xe=[];for(de=0;de<ze;++de){for(oe=0,Me=0;oe<Se;oe++)Me+=q[oe][de][1];if(Me)for(oe=0;oe<Se;oe++)q[oe][de][1]/=Me;else for(oe=0;oe<Se;oe++)q[oe][de][1]=Ye}for(de=0;de<ze;++de)Xe[de]=0;return Xe},zero:Qs});function hl(q){return f.range(q.length)}function Qs(q){for(var oe=-1,de=q[0].length,Me=[];++oe<de;)Me[oe]=0;return Me}function Lu(q){for(var oe,de=1,Me=0,Se=q[0][1],ze=q.length;de<ze;++de)(oe=q[de][1])>Se&&(Me=de,Se=oe);return Me}function Ms(q){return q.reduce(Xu,0)}function Xu(q,oe){return q+oe[1]}function Tc(q,oe){return Ou(q,Math.ceil(Math.log(oe.length)/Math.LN2+1))}function Ou(q,oe){for(var de=-1,Me=+q[0],Se=(q[1]-Me)/oe,ze=[];++de<=oe;)ze[de]=Se*de+Me;return ze}function pl(q){return[f.min(q),f.max(q)]}function As(q,oe){return q.value-oe.value}function Al(q,oe){var de=q._pack_next;q._pack_next=oe,oe._pack_prev=q,oe._pack_next=de,de._pack_prev=oe}function Ku(q,oe){q._pack_next=oe,oe._pack_prev=q}function $l(q,oe){var de=oe.x-q.x,Me=oe.y-q.y,Se=q.r+oe.r;return.999*Se*Se>de*de+Me*Me}function zo(q){if((oe=q.children)&&(tt=oe.length)){var oe,de,Me,Se,ze,Ye,Xe,tt,rt=1/0,ft=-1/0,bt=1/0,At=-1/0;if(oe.forEach(fu),(de=oe[0]).x=-de.r,de.y=0,ln(de),tt>1&&((Me=oe[1]).x=Me.r,Me.y=0,ln(Me),tt>2))for(Go(de,Me,Se=oe[2]),ln(Se),Al(de,Se),de._pack_prev=Se,Al(Se,Me),Me=de._pack_next,ze=3;ze<tt;ze++){Go(de,Me,Se=oe[ze]);var Ut=0,qt=1,jt=1;for(Ye=Me._pack_next;Ye!==Me;Ye=Ye._pack_next,qt++)if($l(Ye,Se)){Ut=1;break}if(1==Ut)for(Xe=de._pack_prev;Xe!==Ye._pack_prev&&!$l(Xe,Se);Xe=Xe._pack_prev,jt++);Ut?(qt<jt||qt==jt&&Me.r<de.r?Ku(de,Me=Ye):Ku(de=Xe,Me),ze--):(Al(de,Se),Me=Se,ln(Se))}var Kt=(rt+ft)/2,Vt=(bt+At)/2,gn=0;for(ze=0;ze<tt;ze++)(Se=oe[ze]).x-=Kt,Se.y-=Vt,gn=Math.max(gn,Se.r+Math.sqrt(Se.x*Se.x+Se.y*Se.y));q.r=gn,oe.forEach(kl)}function ln(nn){rt=Math.min(nn.x-nn.r,rt),ft=Math.max(nn.x+nn.r,ft),bt=Math.min(nn.y-nn.r,bt),At=Math.max(nn.y+nn.r,At)}}function fu(q){q._pack_next=q._pack_prev=q}function kl(q){delete q._pack_next,delete q._pack_prev}function bi(q,oe,de,Me){var Se=q.children;if(q.x=oe+=Me*q.x,q.y=de+=Me*q.y,q.r*=Me,Se)for(var ze=-1,Ye=Se.length;++ze<Ye;)bi(Se[ze],oe,de,Me)}function Go(q,oe,de){var Me=q.r+de.r,Se=oe.x-q.x,ze=oe.y-q.y;if(Me&&(Se||ze)){var Ye=oe.r+de.r,Xe=Se*Se+ze*ze,tt=.5+((Me*=Me)-(Ye*=Ye))/(2*Xe),rt=Math.sqrt(Math.max(0,2*Ye*(Me+Xe)-(Me-=Xe)*Me-Ye*Ye))/(2*Xe);de.x=q.x+tt*Se+rt*ze,de.y=q.y+tt*ze-rt*Se}else de.x=q.x+Me,de.y=q.y}function Li(q,oe){return q.parent==oe.parent?1:2}function Hi(q){var oe=q.children;return oe.length?oe[0]:q.t}function vi(q){var oe,de=q.children;return(oe=de.length)?de[oe-1]:q.t}function Pi(q,oe,de){var Me=de/(oe.i-q.i);oe.c-=Me,oe.s+=de,q.c+=Me,oe.z+=de,oe.m+=de}function Ko(q,oe,de){return q.a.parent===oe.parent?q.a:de}function Bs(q){var oe=q.children;return oe&&oe.length?Bs(oe[0]):q}function Pu(q){var oe,de=q.children;return de&&(oe=de.length)?Pu(de[oe-1]):q}function ml(q){return{x:q.x,y:q.y,dx:q.dx,dy:q.dy}}function vl(q,oe){var de=q.x+oe[3],Me=q.y+oe[0],Se=q.dx-oe[1]-oe[3],ze=q.dy-oe[0]-oe[2];return Se<0&&(de+=Se/2,Se=0),ze<0&&(Me+=ze/2,ze=0),{x:de,y:Me,dx:Se,dy:ze}}function du(q){var oe=q[0],de=q[q.length-1];return oe<de?[oe,de]:[de,oe]}function yo(q){return q.rangeExtent?q.rangeExtent():du(q.range())}function Gr(q,oe,de,Me){var Se=de(q[0],q[1]),ze=Me(oe[0],oe[1]);return function(Ye){return ze(Se(Ye))}}function pi(q,oe){var de,Me=0,Se=q.length-1,ze=q[Me],Ye=q[Se];return Ye<ze&&(de=Me,Me=Se,Se=de,de=ze,ze=Ye,Ye=de),q[Me]=oe.floor(ze),q[Se]=oe.ceil(Ye),q}function xi(q){return q?{floor:function(oe){return Math.floor(oe/q)*q},ceil:function(oe){return Math.ceil(oe/q)*q}}:pa}f.layout.histogram=function(){var q=!0,oe=Number,de=pl,Me=Tc;function Se(ze,Ye){for(var Xe,tt,rt=[],ft=ze.map(oe,this),bt=de.call(this,ft,Ye),At=Me.call(this,bt,ft,Ye),Ut=(Ye=-1,ft.length),qt=At.length-1,jt=q?1:1/Ut;++Ye<qt;)(Xe=rt[Ye]=[]).dx=At[Ye+1]-(Xe.x=At[Ye]),Xe.y=0;if(qt>0)for(Ye=-1;++Ye<Ut;)(tt=ft[Ye])>=bt[0]&&tt<=bt[1]&&((Xe=rt[f.bisect(At,tt,1,qt)-1]).y+=jt,Xe.push(ze[Ye]));return rt}return Se.value=function(ze){return arguments.length?(oe=ze,Se):oe},Se.range=function(ze){return arguments.length?(de=Xn(ze),Se):de},Se.bins=function(ze){return arguments.length?(Me="number"==typeof ze?function(Ye){return Ou(Ye,ze)}:Xn(ze),Se):Me},Se.frequency=function(ze){return arguments.length?(q=!!ze,Se):q},Se},f.layout.pack=function(){var q,oe=f.layout.hierarchy().sort(As),de=0,Me=[1,1];function Se(ze,Ye){var Xe=oe.call(this,ze,Ye),tt=Xe[0],rt=Me[0],ft=Me[1],bt=null==q?Math.sqrt:"function"==typeof q?q:function(){return q};if(tt.x=tt.y=0,es(tt,function(Ut){Ut.r=+bt(Ut.value)}),es(tt,zo),de){var At=de*(q?1:Math.max(2*tt.r/rt,2*tt.r/ft))/2;es(tt,function(Ut){Ut.r+=At}),es(tt,zo),es(tt,function(Ut){Ut.r-=At})}return bi(tt,rt/2,ft/2,q?1:1/Math.max(2*tt.r/rt,2*tt.r/ft)),Xe}return Se.size=function(ze){return arguments.length?(Me=ze,Se):Me},Se.radius=function(ze){return arguments.length?(q=null==ze||"function"==typeof ze?ze:+ze,Se):q},Se.padding=function(ze){return arguments.length?(de=+ze,Se):de},Qa(Se,oe)},f.layout.tree=function(){var q=f.layout.hierarchy().sort(null).value(null),oe=Li,de=[1,1],Me=null;function Se(tt,rt){var ft=q.call(this,tt,rt),bt=ft[0],At=function(ln){for(var nn,On={A:null,children:[ln]},Pn=[On];null!=(nn=Pn.pop());)for(var tr,Jn=nn.children,ur=0,vr=Jn.length;ur<vr;++ur)Pn.push((Jn[ur]=tr={_:Jn[ur],parent:nn,children:(tr=Jn[ur].children)&&tr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:ur}).a=tr);return On.children[0]}(bt);if(es(At,ze),At.parent.m=-At.z,Zl(At,Ye),Me)Zl(bt,Xe);else{var Ut=bt,qt=bt,jt=bt;Zl(bt,function(ln){ln.x<Ut.x&&(Ut=ln),ln.x>qt.x&&(qt=ln),ln.depth>jt.depth&&(jt=ln)});var Kt=oe(Ut,qt)/2-Ut.x,Vt=de[0]/(qt.x+oe(qt,Ut)/2+Kt),gn=de[1]/(jt.depth||1);Zl(bt,function(ln){ln.x=(ln.x+Kt)*Vt,ln.y=ln.depth*gn})}return ft}function ze(tt){var rt=tt.children,ft=tt.parent.children,bt=tt.i?ft[tt.i-1]:null;if(rt.length){!function(Ut){for(var qt,jt=0,Kt=0,Vt=Ut.children,gn=Vt.length;--gn>=0;)(qt=Vt[gn]).z+=jt,qt.m+=jt,jt+=qt.s+(Kt+=qt.c)}(tt);var At=(rt[0].z+rt[rt.length-1].z)/2;bt?(tt.z=bt.z+oe(tt._,bt._),tt.m=tt.z-At):tt.z=At}else bt&&(tt.z=bt.z+oe(tt._,bt._));tt.parent.A=function(Ut,qt,jt){if(qt){for(var Kt,Vt=Ut,gn=Ut,ln=qt,nn=Vt.parent.children[0],On=Vt.m,Pn=gn.m,tr=ln.m,Jn=nn.m;ln=vi(ln),Vt=Hi(Vt),ln&&Vt;)nn=Hi(nn),(gn=vi(gn)).a=Ut,(Kt=ln.z+tr-Vt.z-On+oe(ln._,Vt._))>0&&(Pi(Ko(ln,Ut,jt),Ut,Kt),On+=Kt,Pn+=Kt),tr+=ln.m,On+=Vt.m,Jn+=nn.m,Pn+=gn.m;ln&&!vi(gn)&&(gn.t=ln,gn.m+=tr-Pn),Vt&&!Hi(nn)&&(nn.t=Vt,nn.m+=On-Jn,jt=Ut)}return jt}(tt,bt,tt.parent.A||ft[0])}function Ye(tt){tt._.x=tt.z+tt.parent.m,tt.m+=tt.parent.m}function Xe(tt){tt.x*=de[0],tt.y=tt.depth*de[1]}return Se.separation=function(tt){return arguments.length?(oe=tt,Se):oe},Se.size=function(tt){return arguments.length?(Me=null==(de=tt)?Xe:null,Se):Me?null:de},Se.nodeSize=function(tt){return arguments.length?(Me=null==(de=tt)?null:Xe,Se):Me?de:null},Qa(Se,q)},f.layout.cluster=function(){var q=f.layout.hierarchy().sort(null).value(null),oe=Li,de=[1,1],Me=!1;function Se(ze,Ye){var Xe,tt=q.call(this,ze,Ye),rt=tt[0],ft=0;es(rt,function(jt){var Vt,Kt=jt.children;Kt&&Kt.length?(jt.x=(Vt=Kt).reduce(function(gn,ln){return gn+ln.x},0)/Vt.length,jt.y=function(Vt){return 1+f.max(Vt,function(gn){return gn.y})}(Kt)):(jt.x=Xe?ft+=oe(jt,Xe):0,jt.y=0,Xe=jt)});var bt=Bs(rt),At=Pu(rt),Ut=bt.x-oe(bt,At)/2,qt=At.x+oe(At,bt)/2;return es(rt,Me?function(jt){jt.x=(jt.x-rt.x)*de[0],jt.y=(rt.y-jt.y)*de[1]}:function(jt){jt.x=(jt.x-Ut)/(qt-Ut)*de[0],jt.y=(1-(rt.y?jt.y/rt.y:1))*de[1]}),tt}return Se.separation=function(ze){return arguments.length?(oe=ze,Se):oe},Se.size=function(ze){return arguments.length?(Me=null==(de=ze),Se):Me?null:de},Se.nodeSize=function(ze){return arguments.length?(Me=null!=(de=ze),Se):Me?de:null},Qa(Se,q)},f.layout.treemap=function(){var q,oe=f.layout.hierarchy(),de=Math.round,Me=[1,1],Se=null,ze=ml,Ye=!1,Xe="squarify",tt=.5*(1+Math.sqrt(5));function rt(jt,Kt){for(var Vt,gn,ln=-1,nn=jt.length;++ln<nn;)gn=(Vt=jt[ln]).value*(Kt<0?0:Kt),Vt.area=isNaN(gn)||gn<=0?0:gn}function ft(jt){var Kt=jt.children;if(Kt&&Kt.length){var Vt,gn,ln,nn=ze(jt),On=[],Pn=Kt.slice(),tr=1/0,Jn="slice"===Xe?nn.dx:"dice"===Xe?nn.dy:"slice-dice"===Xe?1&jt.depth?nn.dy:nn.dx:Math.min(nn.dx,nn.dy);for(rt(Pn,nn.dx*nn.dy/jt.value),On.area=0;(ln=Pn.length)>0;)On.push(Vt=Pn[ln-1]),On.area+=Vt.area,"squarify"!==Xe||(gn=At(On,Jn))<=tr?(Pn.pop(),tr=gn):(On.area-=On.pop().area,Ut(On,Jn,nn,!1),Jn=Math.min(nn.dx,nn.dy),On.length=On.area=0,tr=1/0);On.length&&(Ut(On,Jn,nn,!0),On.length=On.area=0),Kt.forEach(ft)}}function bt(jt){var Kt=jt.children;if(Kt&&Kt.length){var Vt,gn=ze(jt),ln=Kt.slice(),nn=[];for(rt(ln,gn.dx*gn.dy/jt.value),nn.area=0;Vt=ln.pop();)nn.push(Vt),nn.area+=Vt.area,null!=Vt.z&&(Ut(nn,Vt.z?gn.dx:gn.dy,gn,!ln.length),nn.length=nn.area=0);Kt.forEach(bt)}}function At(jt,Kt){for(var Vt,gn=jt.area,ln=0,nn=1/0,On=-1,Pn=jt.length;++On<Pn;)(Vt=jt[On].area)&&(Vt<nn&&(nn=Vt),Vt>ln&&(ln=Vt));return Kt*=Kt,(gn*=gn)?Math.max(Kt*ln*tt/gn,gn/(Kt*nn*tt)):1/0}function Ut(jt,Kt,Vt,gn){var ln,nn=-1,On=jt.length,Pn=Vt.x,tr=Vt.y,Jn=Kt?de(jt.area/Kt):0;if(Kt==Vt.dx){for((gn||Jn>Vt.dy)&&(Jn=Vt.dy);++nn<On;)(ln=jt[nn]).x=Pn,ln.y=tr,ln.dy=Jn,Pn+=ln.dx=Math.min(Vt.x+Vt.dx-Pn,Jn?de(ln.area/Jn):0);ln.z=!0,ln.dx+=Vt.x+Vt.dx-Pn,Vt.y+=Jn,Vt.dy-=Jn}else{for((gn||Jn>Vt.dx)&&(Jn=Vt.dx);++nn<On;)(ln=jt[nn]).x=Pn,ln.y=tr,ln.dx=Jn,tr+=ln.dy=Math.min(Vt.y+Vt.dy-tr,Jn?de(ln.area/Jn):0);ln.z=!1,ln.dy+=Vt.y+Vt.dy-tr,Vt.x+=Jn,Vt.dx-=Jn}}function qt(jt){var Kt=q||oe(jt),Vt=Kt[0];return Vt.x=Vt.y=0,Vt.value?(Vt.dx=Me[0],Vt.dy=Me[1]):Vt.dx=Vt.dy=0,q&&oe.revalue(Vt),rt([Vt],Vt.dx*Vt.dy/Vt.value),(q?bt:ft)(Vt),Ye&&(q=Kt),Kt}return qt.size=function(jt){return arguments.length?(Me=jt,qt):Me},qt.padding=function(jt){if(!arguments.length)return Se;var Vt;return ze=null==(Se=jt)?ml:"function"==(Vt=typeof jt)?function(gn){var ln=jt.call(qt,gn,gn.depth);return null==ln?ml(gn):vl(gn,"number"==typeof ln?[ln,ln,ln,ln]:ln)}:("number"===Vt&&(jt=[jt,jt,jt,jt]),function Kt(gn){return vl(gn,jt)}),qt},qt.round=function(jt){return arguments.length?(de=jt?Math.round:Number,qt):de!=Number},qt.sticky=function(jt){return arguments.length?(Ye=jt,q=null,qt):Ye},qt.ratio=function(jt){return arguments.length?(tt=jt,qt):tt},qt.mode=function(jt){return arguments.length?(Xe=jt+"",qt):Xe},Qa(qt,oe)},f.random={normal:function(q,oe){var de=arguments.length;return de<2&&(oe=1),de<1&&(q=0),function(){var Me,Se,ze;do{ze=(Me=2*Math.random()-1)*Me+(Se=2*Math.random()-1)*Se}while(!ze||ze>1);return q+oe*Me*Math.sqrt(-2*Math.log(ze)/ze)}},logNormal:function(){var q=f.random.normal.apply(f,arguments);return function(){return Math.exp(q())}},bates:function(q){var oe=f.random.irwinHall(q);return function(){return oe()/q}},irwinHall:function(q){return function(){for(var oe=0,de=0;de<q;de++)oe+=Math.random();return oe}}},f.scale={};var pa={floor:z,ceil:z};function ks(q,oe,de,Me){var Se=[],ze=[],Ye=0,Xe=Math.min(q.length,oe.length)-1;for(q[Xe]<q[0]&&(q=q.slice().reverse(),oe=oe.slice().reverse());++Ye<=Xe;)Se.push(de(q[Ye-1],q[Ye])),ze.push(Me(oe[Ye-1],oe[Ye]));return function(tt){var rt=f.bisect(q,tt,1,Xe)-1;return ze[rt](Se[rt](tt))}}function ji(q,oe,de,Me){var Se,ze;function Ye(){var tt=Math.min(q.length,oe.length)>2?ks:Gr,rt=Me?oa:Ia;return Se=tt(q,oe,rt,de),ze=tt(oe,q,rt,ja),Xe}function Xe(tt){return Se(tt)}return Xe.invert=function(tt){return ze(tt)},Xe.domain=function(tt){return arguments.length?(q=tt.map(Number),Ye()):q},Xe.range=function(tt){return arguments.length?(oe=tt,Ye()):oe},Xe.rangeRound=function(tt){return Xe.range(tt).interpolate(su)},Xe.clamp=function(tt){return arguments.length?(Me=tt,Ye()):Me},Xe.interpolate=function(tt){return arguments.length?(de=tt,Ye()):de},Xe.ticks=function(tt){return jo(q,tt)},Xe.tickFormat=function(tt,rt){return d3_scale_linearTickFormat(q,tt,rt)},Xe.nice=function(tt){return Fi(q,tt),Ye()},Xe.copy=function(){return ji(q,oe,de,Me)},Ye()}function Bo(q,oe){return f.rebind(q,oe,"range","rangeRound","interpolate","clamp")}function Fi(q,oe){return pi(q,xi(So(q,oe)[2])),pi(q,xi(So(q,oe)[2])),q}function So(q,oe){null==oe&&(oe=10);var de=du(q),Me=de[1]-de[0],Se=Math.pow(10,Math.floor(Math.log(Me/oe)/Math.LN10)),ze=oe/Me*Se;return ze<=.15?Se*=10:ze<=.35?Se*=5:ze<=.75&&(Se*=2),de[0]=Math.ceil(de[0]/Se)*Se,de[1]=Math.floor(de[1]/Se)*Se+.5*Se,de[2]=Se,de}function jo(q,oe){return f.range.apply(f,So(q,oe))}function mi(q,oe,de,Me){function Se(Xe){return(de?Math.log(Xe<0?0:Xe):-Math.log(Xe>0?0:-Xe))/Math.log(oe)}function ze(Xe){return de?Math.pow(oe,Xe):-Math.pow(oe,-Xe)}function Ye(Xe){return q(Se(Xe))}return Ye.invert=function(Xe){return ze(q.invert(Xe))},Ye.domain=function(Xe){return arguments.length?(de=Xe[0]>=0,q.domain((Me=Xe.map(Number)).map(Se)),Ye):Me},Ye.base=function(Xe){return arguments.length?(oe=+Xe,q.domain(Me.map(Se)),Ye):oe},Ye.nice=function(){var Xe=pi(Me.map(Se),de?Math:Fa);return q.domain(Xe),Me=Xe.map(ze),Ye},Ye.ticks=function(){var Xe=du(Me),tt=[],rt=Xe[0],ft=Xe[1],bt=Math.floor(Se(rt)),At=Math.ceil(Se(ft)),Ut=oe%1?2:oe;if(isFinite(At-bt)){if(de){for(;bt<At;bt++)for(var qt=1;qt<Ut;qt++)tt.push(ze(bt)*qt);tt.push(ze(bt))}else for(tt.push(ze(bt));bt++<At;)for(qt=Ut-1;qt>0;qt--)tt.push(ze(bt)*qt);for(bt=0;tt[bt]<rt;bt++);for(At=tt.length;tt[At-1]>ft;At--);tt=tt.slice(bt,At)}return tt},Ye.copy=function(){return mi(q.copy(),oe,de,Me)},Bo(Ye,q)}f.scale.linear=function(){return ji([0,1],[0,1],ja,!1)},f.scale.log=function(){return mi(f.scale.linear().domain([0,1]),10,!0,[1,10])};var Fa={floor:function(q){return-Math.ceil(-q)},ceil:function(q){return-Math.floor(-q)}};function Jo(q,oe,de){var Me=la(oe),Se=la(1/oe);function ze(Ye){return q(Me(Ye))}return ze.invert=function(Ye){return Se(q.invert(Ye))},ze.domain=function(Ye){return arguments.length?(q.domain((de=Ye.map(Number)).map(Me)),ze):de},ze.ticks=function(Ye){return jo(de,Ye)},ze.tickFormat=function(Ye,Xe){return d3_scale_linearTickFormat(de,Ye,Xe)},ze.nice=function(Ye){return ze.domain(Fi(de,Ye))},ze.exponent=function(Ye){return arguments.length?(Me=la(oe=Ye),Se=la(1/oe),q.domain(de.map(Me)),ze):oe},ze.copy=function(){return Jo(q.copy(),oe,de)},Bo(ze,q)}function la(q){return function(oe){return oe<0?-Math.pow(-oe,q):Math.pow(oe,q)}}function ro(q,oe){var de,Me,Se;function ze(Xe){return Me[((de.get(Xe)||("range"===oe.t?de.set(Xe,q.push(Xe)):NaN))-1)%Me.length]}function Ye(Xe,tt){return f.range(q.length).map(function(rt){return Xe+tt*rt})}return ze.domain=function(Xe){if(!arguments.length)return q;q=[],de=new b;for(var tt,rt=-1,ft=Xe.length;++rt<ft;)de.has(tt=Xe[rt])||de.set(tt,q.push(tt));return ze[oe.t].apply(ze,oe.a)},ze.range=function(Xe){return arguments.length?(Me=Xe,Se=0,oe={t:"range",a:arguments},ze):Me},ze.rangePoints=function(Xe,tt){arguments.length<2&&(tt=0);var rt=Xe[0],ft=Xe[1],bt=q.length<2?(rt=(rt+ft)/2,0):(ft-rt)/(q.length-1+tt);return Me=Ye(rt+bt*tt/2,bt),Se=0,oe={t:"rangePoints",a:arguments},ze},ze.rangeRoundPoints=function(Xe,tt){arguments.length<2&&(tt=0);var rt=Xe[0],ft=Xe[1],bt=q.length<2?(rt=ft=Math.round((rt+ft)/2),0):(ft-rt)/(q.length-1+tt)|0;return Me=Ye(rt+Math.round(bt*tt/2+(ft-rt-(q.length-1+tt)*bt)/2),bt),Se=0,oe={t:"rangeRoundPoints",a:arguments},ze},ze.rangeBands=function(Xe,tt,rt){arguments.length<2&&(tt=0),arguments.length<3&&(rt=tt);var ft=Xe[1]<Xe[0],bt=Xe[ft-0],At=(Xe[1-ft]-bt)/(q.length-tt+2*rt);return Me=Ye(bt+At*rt,At),ft&&Me.reverse(),Se=At*(1-tt),oe={t:"rangeBands",a:arguments},ze},ze.rangeRoundBands=function(Xe,tt,rt){arguments.length<2&&(tt=0),arguments.length<3&&(rt=tt);var ft=Xe[1]<Xe[0],bt=Xe[ft-0],At=Xe[1-ft],Ut=Math.floor((At-bt)/(q.length-tt+2*rt));return Me=Ye(bt+Math.round((At-bt-(q.length-tt)*Ut)/2),Ut),ft&&Me.reverse(),Se=Math.round(Ut*(1-tt)),oe={t:"rangeRoundBands",a:arguments},ze},ze.rangeBand=function(){return Se},ze.rangeExtent=function(){return du(oe.a[0])},ze.copy=function(){return ro(q,oe)},ze.domain(q)}f.scale.pow=function(){return Jo(f.scale.linear(),1,[0,1])},f.scale.sqrt=function(){return f.scale.pow().exponent(.5)},f.scale.ordinal=function(){return ro([],{t:"range",a:[[]]})},f.scale.category10=function(){return f.scale.ordinal().range(yl)},f.scale.category20=function(){return f.scale.ordinal().range(ma)},f.scale.category20b=function(){return f.scale.ordinal().range(ho)},f.scale.category20c=function(){return f.scale.ordinal().range(Hr)};var yl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(rn),ma=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(rn),ho=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(rn),Hr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(rn);function ua(q,oe){var de;function Me(){var ze=0,Ye=oe.length;for(de=[];++ze<Ye;)de[ze-1]=f.quantile(q,ze/Ye);return Se}function Se(ze){if(!isNaN(ze=+ze))return oe[f.bisect(de,ze)]}return Se.domain=function(ze){return arguments.length?(q=ze.map(g).filter(h).sort(d),Me()):q},Se.range=function(ze){return arguments.length?(oe=ze,Me()):oe},Se.quantiles=function(){return de},Se.invertExtent=function(ze){return(ze=oe.indexOf(ze))<0?[NaN,NaN]:[ze>0?de[ze-1]:q[0],ze<de.length?de[ze]:q[q.length-1]]},Se.copy=function(){return ua(q,oe)},Me()}function ls(q,oe,de){var Me,Se;function ze(Xe){return de[Math.max(0,Math.min(Se,Math.floor(Me*(Xe-q))))]}function Ye(){return Me=de.length/(oe-q),Se=de.length-1,ze}return ze.domain=function(Xe){return arguments.length?(q=+Xe[0],oe=+Xe[Xe.length-1],Ye()):[q,oe]},ze.range=function(Xe){return arguments.length?(de=Xe,Ye()):de},ze.invertExtent=function(Xe){return[Xe=(Xe=de.indexOf(Xe))<0?NaN:Xe/Me+q,Xe+1/Me]},ze.copy=function(){return ls(q,oe,de)},Ye()}function us(q,oe){function de(Me){if(Me<=Me)return oe[f.bisect(q,Me)]}return de.domain=function(Me){return arguments.length?(q=Me,de):q},de.range=function(Me){return arguments.length?(oe=Me,de):oe},de.invertExtent=function(Me){return Me=oe.indexOf(Me),[q[Me-1],q[Me]]},de.copy=function(){return us(q,oe)},de}function js(q){function oe(de){return+de}return oe.invert=oe,oe.domain=oe.range=function(de){return arguments.length?(q=de.map(oe),oe):q},oe.ticks=function(de){return jo(q,de)},oe.tickFormat=function(de,Me){return d3_scale_linearTickFormat(q,de,Me)},oe.copy=function(){return js(q)},oe}function Us(){return 0}f.scale.quantile=function(){return ua([],[])},f.scale.quantize=function(){return ls(0,1,[0,1])},f.scale.threshold=function(){return us([.5],[0,1])},f.scale.identity=function(){return js([0,1])},f.svg={},f.svg.arc=function(){var q=Ur,oe=ts,de=Us,Me=Mi,Se=Sl,ze=Va,Ye=Qo;function Xe(){var rt=Math.max(0,+q.apply(this,arguments)),ft=Math.max(0,+oe.apply(this,arguments)),bt=Se.apply(this,arguments)-it,At=ze.apply(this,arguments)-it,Ut=Math.abs(At-bt),qt=bt>At?0:1;if(ft<rt&&(jt=ft,ft=rt,rt=jt),Ut>=Ht)return tt(ft,qt)+(rt?tt(rt,1-qt):"")+"Z";var jt,Kt,Vt,gn,ln,nn,On,Pn,tr,Jn,ur,vr,wr=0,Cr=0,Or=[];if((gn=(+Ye.apply(this,arguments)||0)/2)&&(Vt=Me===Mi?Math.sqrt(rt*rt+ft*ft):+Me.apply(this,arguments),qt||(Cr*=-1),ft&&(Cr=ot(Vt/ft*Math.sin(gn))),rt&&(wr=ot(Vt/rt*Math.sin(gn)))),ft){ln=ft*Math.cos(bt+Cr),nn=ft*Math.sin(bt+Cr),On=ft*Math.cos(At-Cr),Pn=ft*Math.sin(At-Cr);var Rr=Math.abs(At-bt-2*Cr)<=Rt?0:1;if(Cr&&La(ln,nn,On,Pn)===qt^Rr){var si=(bt+At)/2;ln=ft*Math.cos(si),nn=ft*Math.sin(si),On=Pn=null}}else ln=nn=0;if(rt){tr=rt*Math.cos(At-wr),Jn=rt*Math.sin(At-wr),ur=rt*Math.cos(bt+wr),vr=rt*Math.sin(bt+wr);var ir=Math.abs(bt-At+2*wr)<=Rt?0:1;if(wr&&La(tr,Jn,ur,vr)===1-qt^ir){var Ar=(bt+At)/2;tr=rt*Math.cos(Ar),Jn=rt*Math.sin(Ar),ur=vr=null}}else tr=Jn=0;if(Ut>Lt&&(jt=Math.min(Math.abs(ft-rt)/2,+de.apply(this,arguments)))>.001){Kt=rt<ft^qt?0:1;var Lr=jt,qr=jt;if(Ut<Rt){var ni=null==ur?[tr,Jn]:null==On?[ln,nn]:zt([ln,nn],[ur,vr],[On,Pn],[tr,Jn]),gi=ln-ni[0],Ai=nn-ni[1],Yi=On-ni[0],xo=Pn-ni[1],mo=1/Math.sin(Math.acos((gi*Yi+Ai*xo)/(Math.sqrt(gi*gi+Ai*Ai)*Math.sqrt(Yi*Yi+xo*xo)))/2),$i=Math.sqrt(ni[0]*ni[0]+ni[1]*ni[1]);qr=Math.min(jt,(rt-$i)/(mo-1)),Lr=Math.min(jt,(ft-$i)/(mo+1))}if(null!=On){var Do=Oa(null==ur?[tr,Jn]:[ur,vr],[ln,nn],ft,Lr,qt),aa=Oa([On,Pn],[tr,Jn],ft,Lr,qt);jt===Lr?Or.push("M",Do[0],"A",Lr,",",Lr," 0 0,",Kt," ",Do[1],"A",ft,",",ft," 0 ",1-qt^La(Do[1][0],Do[1][1],aa[1][0],aa[1][1]),",",qt," ",aa[1],"A",Lr,",",Lr," 0 0,",Kt," ",aa[0]):Or.push("M",Do[0],"A",Lr,",",Lr," 0 1,",Kt," ",aa[0])}else Or.push("M",ln,",",nn);if(null!=ur){var $r=Oa([ln,nn],[ur,vr],rt,-qr,qt),Zo=Oa([tr,Jn],null==On?[ln,nn]:[On,Pn],rt,-qr,qt);jt===qr?Or.push("L",Zo[0],"A",qr,",",qr," 0 0,",Kt," ",Zo[1],"A",rt,",",rt," 0 ",qt^La(Zo[1][0],Zo[1][1],$r[1][0],$r[1][1]),",",1-qt," ",$r[1],"A",qr,",",qr," 0 0,",Kt," ",$r[0]):Or.push("L",Zo[0],"A",qr,",",qr," 0 0,",Kt," ",$r[0])}else Or.push("L",tr,",",Jn)}else Or.push("M",ln,",",nn),null!=On&&Or.push("A",ft,",",ft," 0 ",Rr,",",qt," ",On,",",Pn),Or.push("L",tr,",",Jn),null!=ur&&Or.push("A",rt,",",rt," 0 ",ir,",",1-qt," ",ur,",",vr);return Or.push("Z"),Or.join("")}function tt(rt,ft){return"M0,"+rt+"A"+rt+","+rt+" 0 1,"+ft+" 0,"+-rt+"A"+rt+","+rt+" 0 1,"+ft+" 0,"+rt}return Xe.innerRadius=function(rt){return arguments.length?(q=Xn(rt),Xe):q},Xe.outerRadius=function(rt){return arguments.length?(oe=Xn(rt),Xe):oe},Xe.cornerRadius=function(rt){return arguments.length?(de=Xn(rt),Xe):de},Xe.padRadius=function(rt){return arguments.length?(Me=rt==Mi?Mi:Xn(rt),Xe):Me},Xe.startAngle=function(rt){return arguments.length?(Se=Xn(rt),Xe):Se},Xe.endAngle=function(rt){return arguments.length?(ze=Xn(rt),Xe):ze},Xe.padAngle=function(rt){return arguments.length?(Ye=Xn(rt),Xe):Ye},Xe.centroid=function(){var rt=(+q.apply(this,arguments)+ +oe.apply(this,arguments))/2,ft=(+Se.apply(this,arguments)+ +ze.apply(this,arguments))/2-it;return[Math.cos(ft)*rt,Math.sin(ft)*rt]},Xe};var Mi="auto";function Ur(q){return q.innerRadius}function ts(q){return q.outerRadius}function Sl(q){return q.startAngle}function Va(q){return q.endAngle}function Qo(q){return q&&q.padAngle}function La(q,oe,de,Me){return(q-de)*oe-(oe-Me)*q>0?0:1}function Oa(q,oe,de,Me,Se){var ze=q[0]-oe[0],Ye=q[1]-oe[1],Xe=(Se?Me:-Me)/Math.sqrt(ze*ze+Ye*Ye),tt=Xe*Ye,rt=-Xe*ze,ft=q[0]+tt,bt=q[1]+rt,At=oe[0]+tt,Ut=oe[1]+rt,qt=(ft+At)/2,jt=(bt+Ut)/2,Kt=At-ft,Vt=Ut-bt,gn=Kt*Kt+Vt*Vt,ln=de-Me,nn=ft*Ut-At*bt,On=(Vt<0?-1:1)*Math.sqrt(Math.max(0,ln*ln*gn-nn*nn)),Pn=(nn*Vt-Kt*On)/gn,tr=(-nn*Kt-Vt*On)/gn,Jn=(nn*Vt+Kt*On)/gn,ur=(-nn*Kt+Vt*On)/gn,vr=Pn-qt,wr=tr-jt,Cr=Jn-qt,Or=ur-jt;return vr*vr+wr*wr>Cr*Cr+Or*Or&&(Pn=Jn,tr=ur),[[Pn-tt,tr-rt],[Pn*de/ln,tr*de/ln]]}function po(){return!0}function el(q){var oe=cr,de=xn,Me=po,Se=Zi,ze=Se.key,Ye=.7;function Xe(tt){var rt,ft=[],bt=[],At=-1,Ut=tt.length,qt=Xn(oe),jt=Xn(de);function Kt(){ft.push("M",Se(q(bt),Ye))}for(;++At<Ut;)Me.call(this,rt=tt[At],At)?bt.push([+qt.call(this,rt,At),+jt.call(this,rt,At)]):bt.length&&(Kt(),bt=[]);return bt.length&&Kt(),ft.length?ft.join(""):null}return Xe.x=function(tt){return arguments.length?(oe=tt,Xe):oe},Xe.y=function(tt){return arguments.length?(de=tt,Xe):de},Xe.defined=function(tt){return arguments.length?(Me=tt,Xe):Me},Xe.interpolate=function(tt){return arguments.length?(ze="function"==typeof tt?Se=tt:(Se=Wo.get(tt)||Zi).key,Xe):ze},Xe.tension=function(tt){return arguments.length?(Ye=tt,Xe):Ye},Xe}f.svg.line=function(){return el(z)};var Wo=f.map({linear:Zi,"linear-closed":tl,step:function(q){for(var oe=0,de=q.length,Me=q[0],Se=[Me[0],",",Me[1]];++oe<de;)Se.push("H",(Me[0]+(Me=q[oe])[0])/2,"V",Me[1]);return de>1&&Se.push("H",Me[0]),Se.join("")},"step-before":cs,"step-after":Uo,basis:Ha,"basis-open":function(q){if(q.length<4)return Zi(q);for(var oe,de=[],Me=-1,Se=q.length,ze=[0],Ye=[0];++Me<3;)ze.push((oe=q[Me])[0]),Ye.push(oe[1]);for(de.push(ea(Fo,ze)+","+ea(Fo,Ye)),--Me;++Me<Se;)oe=q[Me],ze.shift(),ze.push(oe[0]),Ye.shift(),Ye.push(oe[1]),oo(de,ze,Ye);return de.join("")},"basis-closed":function(q){for(var oe,de,Me=-1,Se=q.length,ze=Se+4,Ye=[],Xe=[];++Me<4;)Ye.push((de=q[Me%Se])[0]),Xe.push(de[1]);for(oe=[ea(Fo,Ye),",",ea(Fo,Xe)],--Me;++Me<ze;)de=q[Me%Se],Ye.shift(),Ye.push(de[0]),Xe.shift(),Xe.push(de[1]),oo(oe,Ye,Xe);return oe.join("")},bundle:function(q,oe){var de=q.length-1;if(de)for(var Me,Se,ze=q[0][0],Ye=q[0][1],Xe=q[de][0]-ze,tt=q[de][1]-Ye,rt=-1;++rt<=de;)(Me=q[rt])[0]=oe*Me[0]+(1-oe)*(ze+(Se=rt/de)*Xe),Me[1]=oe*Me[1]+(1-oe)*(Ye+Se*tt);return Ha(q)},cardinal:function(q,oe){return q.length<3?Zi(q):q[0]+Ii(q,El(q,oe))},"cardinal-open":function(q,oe){return q.length<4?Zi(q):q[1]+Ii(q.slice(1,-1),El(q,oe))},"cardinal-closed":function(q,oe){return q.length<3?tl(q):q[0]+Ii((q.push(q[0]),q),El([q[q.length-2]].concat(q,[q[1]]),oe))},monotone:function(q){return q.length<3?Zi(q):q[0]+Ii(q,function(oe){for(var de,Me,Se,ze,Ye=[],Xe=function(ft){for(var bt=0,At=ft.length-1,Ut=[],qt=ft[0],jt=ft[1],Kt=Ut[0]=fs(qt,jt);++bt<At;)Ut[bt]=(Kt+(Kt=fs(qt=jt,jt=ft[bt+1])))/2;return Ut[bt]=Kt,Ut}(oe),tt=-1,rt=oe.length-1;++tt<rt;)de=fs(oe[tt],oe[tt+1]),_(de)<Lt?Xe[tt]=Xe[tt+1]=0:(ze=(Me=Xe[tt]/de)*Me+(Se=Xe[tt+1]/de)*Se)>9&&(ze=3*de/Math.sqrt(ze),Xe[tt]=ze*Me,Xe[tt+1]=ze*Se);for(tt=-1;++tt<=rt;)ze=(oe[Math.min(rt,tt+1)][0]-oe[Math.max(0,tt-1)][0])/(6*(1+Xe[tt]*Xe[tt])),Ye.push([ze||0,Xe[tt]*ze||0]);return Ye}(q))}});function Zi(q){return q.length>1?q.join("L"):q+"Z"}function tl(q){return q.join("L")+"Z"}function cs(q){for(var oe=0,de=q.length,Me=q[0],Se=[Me[0],",",Me[1]];++oe<de;)Se.push("V",(Me=q[oe])[1],"H",Me[0]);return Se.join("")}function Uo(q){for(var oe=0,de=q.length,Me=q[0],Se=[Me[0],",",Me[1]];++oe<de;)Se.push("H",(Me=q[oe])[0],"V",Me[1]);return Se.join("")}function Ii(q,oe){if(oe.length<1||q.length!=oe.length&&q.length!=oe.length+2)return Zi(q);var de=q.length!=oe.length,Me="",Se=q[0],ze=q[1],Ye=oe[0],Xe=Ye,tt=1;if(de&&(Me+="Q"+(ze[0]-2*Ye[0]/3)+","+(ze[1]-2*Ye[1]/3)+","+ze[0]+","+ze[1],Se=q[1],tt=2),oe.length>1){ze=q[tt],tt++,Me+="C"+(Se[0]+Ye[0])+","+(Se[1]+Ye[1])+","+(ze[0]-(Xe=oe[1])[0])+","+(ze[1]-Xe[1])+","+ze[0]+","+ze[1];for(var rt=2;rt<oe.length;rt++,tt++)Me+="S"+((ze=q[tt])[0]-(Xe=oe[rt])[0])+","+(ze[1]-Xe[1])+","+ze[0]+","+ze[1]}if(de){var ft=q[tt];Me+="Q"+(ze[0]+2*Xe[0]/3)+","+(ze[1]+2*Xe[1]/3)+","+ft[0]+","+ft[1]}return Me}function El(q,oe){for(var de,Me=[],Se=(1-oe)/2,ze=q[0],Ye=q[1],Xe=1,tt=q.length;++Xe<tt;)de=ze,ze=Ye,Me.push([Se*((Ye=q[Xe])[0]-de[0]),Se*(Ye[1]-de[1])]);return Me}function Ha(q){if(q.length<3)return Zi(q);var oe=1,de=q.length,Me=q[0],Se=Me[0],ze=Me[1],Ye=[Se,Se,Se,(Me=q[1])[0]],Xe=[ze,ze,ze,Me[1]],tt=[Se,",",ze,"L",ea(Fo,Ye),",",ea(Fo,Xe)];for(q.push(q[de-1]);++oe<=de;)Me=q[oe],Ye.shift(),Ye.push(Me[0]),Xe.shift(),Xe.push(Me[1]),oo(tt,Ye,Xe);return q.pop(),tt.push("L",Me),tt.join("")}function ea(q,oe){return q[0]*oe[0]+q[1]*oe[1]+q[2]*oe[2]+q[3]*oe[3]}Wo.forEach(function(q,oe){oe.key=q,oe.closed=/-closed$/.test(q)});var nl=[0,2/3,1/3,0],Ju=[0,1/3,2/3,0],Fo=[0,1/6,2/3,1/6];function oo(q,oe,de){q.push("C",ea(nl,oe),",",ea(nl,de),",",ea(Ju,oe),",",ea(Ju,de),",",ea(Fo,oe),",",ea(Fo,de))}function fs(q,oe){return(oe[1]-q[1])/(oe[0]-q[0])}function rl(q){for(var oe,de,Me,Se=-1,ze=q.length;++Se<ze;)de=(oe=q[Se])[0],Me=oe[1]-it,oe[0]=de*Math.cos(Me),oe[1]=de*Math.sin(Me);return q}function Vs(q){var oe=cr,de=cr,Me=0,Se=xn,ze=po,Ye=Zi,Xe=Ye.key,tt=Ye,rt="L",ft=.7;function bt(At){var Ut,qt,jt,Kt=[],Vt=[],gn=[],ln=-1,nn=At.length,On=Xn(oe),Pn=Xn(Me),tr=oe===de?function(){return qt}:Xn(de),Jn=Me===Se?function(){return jt}:Xn(Se);function ur(){Kt.push("M",Ye(q(gn),ft),rt,tt(q(Vt.reverse()),ft),"Z")}for(;++ln<nn;)ze.call(this,Ut=At[ln],ln)?(Vt.push([qt=+On.call(this,Ut,ln),jt=+Pn.call(this,Ut,ln)]),gn.push([+tr.call(this,Ut,ln),+Jn.call(this,Ut,ln)])):Vt.length&&(ur(),Vt=[],gn=[]);return Vt.length&&ur(),Kt.length?Kt.join(""):null}return bt.x=function(At){return arguments.length?(oe=de=At,bt):de},bt.x0=function(At){return arguments.length?(oe=At,bt):oe},bt.x1=function(At){return arguments.length?(de=At,bt):de},bt.y=function(At){return arguments.length?(Me=Se=At,bt):Se},bt.y0=function(At){return arguments.length?(Me=At,bt):Me},bt.y1=function(At){return arguments.length?(Se=At,bt):Se},bt.defined=function(At){return arguments.length?(ze=At,bt):ze},bt.interpolate=function(At){return arguments.length?(Xe="function"==typeof At?Ye=At:(Ye=Wo.get(At)||Zi).key,tt=Ye.reverse||Ye,rt=Ye.closed?"M":"L",bt):Xe},bt.tension=function(At){return arguments.length?(ft=At,bt):ft},bt}function Qu(q){return q.source}function Cl(q){return q.target}function Xl(q){return q.radius}function ta(q){return[q.x,q.y]}function ga(){return 64}function Kr(){return"circle"}function ti(q){var oe=Math.sqrt(q/Rt);return"M0,"+oe+"A"+oe+","+oe+" 0 1,1 0,"+-oe+"A"+oe+","+oe+" 0 1,1 0,"+oe+"Z"}f.svg.line.radial=function(){var q=el(rl);return q.radius=q.x,delete q.x,q.angle=q.y,delete q.y,q},cs.reverse=Uo,Uo.reverse=cs,f.svg.area=function(){return Vs(z)},f.svg.area.radial=function(){var q=Vs(rl);return q.radius=q.x,delete q.x,q.innerRadius=q.x0,delete q.x0,q.outerRadius=q.x1,delete q.x1,q.angle=q.y,delete q.y,q.startAngle=q.y0,delete q.y0,q.endAngle=q.y1,delete q.y1,q},f.svg.chord=function(){var q=Qu,oe=Cl,de=Xl,Me=Sl,Se=Va;function ze(rt,ft){var bt,At,Ut=Ye(this,q,rt,ft),qt=Ye(this,oe,rt,ft);return"M"+Ut.p0+Xe(Ut.r,Ut.p1,Ut.a1-Ut.a0)+((bt=Ut).a0==(At=qt).a0&&bt.a1==At.a1?tt(0,0,0,Ut.p0):tt(0,0,0,qt.p0)+Xe(qt.r,qt.p1,qt.a1-qt.a0)+tt(0,0,0,Ut.p0))+"Z"}function Ye(rt,ft,bt,At){var Ut=ft.call(rt,bt,At),qt=de.call(rt,Ut,At),jt=Me.call(rt,Ut,At)-it,Kt=Se.call(rt,Ut,At)-it;return{r:qt,a0:jt,a1:Kt,p0:[qt*Math.cos(jt),qt*Math.sin(jt)],p1:[qt*Math.cos(Kt),qt*Math.sin(Kt)]}}function Xe(rt,ft,bt){return"A"+rt+","+rt+" 0 "+ +(bt>Rt)+",1 "+ft}function tt(rt,ft,bt,At){return"Q 0,0 "+At}return ze.radius=function(rt){return arguments.length?(de=Xn(rt),ze):de},ze.source=function(rt){return arguments.length?(q=Xn(rt),ze):q},ze.target=function(rt){return arguments.length?(oe=Xn(rt),ze):oe},ze.startAngle=function(rt){return arguments.length?(Me=Xn(rt),ze):Me},ze.endAngle=function(rt){return arguments.length?(Se=Xn(rt),ze):Se},ze},f.svg.diagonal=function(){var q=Qu,oe=Cl,de=ta;function Me(Se,ze){var Ye=q.call(this,Se,ze),Xe=oe.call(this,Se,ze),tt=(Ye.y+Xe.y)/2,rt=[Ye,{x:Ye.x,y:tt},{x:Xe.x,y:tt},Xe];return"M"+(rt=rt.map(de))[0]+"C"+rt[1]+" "+rt[2]+" "+rt[3]}return Me.source=function(Se){return arguments.length?(q=Xn(Se),Me):q},Me.target=function(Se){return arguments.length?(oe=Xn(Se),Me):oe},Me.projection=function(Se){return arguments.length?(de=Se,Me):de},Me},f.svg.diagonal.radial=function(){var q=f.svg.diagonal(),oe=ta,de=q.projection;return q.projection=function(Me){return arguments.length?de((Se=oe=Me,function(){var ze=Se.apply(this,arguments),Ye=ze[0],Xe=ze[1]-it;return[Ye*Math.cos(Xe),Ye*Math.sin(Xe)]})):oe;var Se},q},f.svg.symbol=function(){var q=Kr,oe=ga;function de(Me,Se){return(hu.get(q.call(this,Me,Se))||ti)(oe.call(this,Me,Se))}return de.type=function(Me){return arguments.length?(q=Xn(Me),de):q},de.size=function(Me){return arguments.length?(oe=Xn(Me),de):oe},de};var hu=f.map({circle:ti,cross:function(q){var oe=Math.sqrt(q/5)/2;return"M"+-3*oe+","+-oe+"H"+-oe+"V"+-3*oe+"H"+oe+"V"+-oe+"H"+3*oe+"V"+oe+"H"+oe+"V"+3*oe+"H"+-oe+"V"+oe+"H"+-3*oe+"Z"},diamond:function(q){var oe=Math.sqrt(q/(2*il)),de=oe*il;return"M0,"+-oe+"L"+de+",0 0,"+oe+" "+-de+",0Z"},square:function(q){var oe=Math.sqrt(q)/2;return"M"+-oe+","+-oe+"L"+oe+","+-oe+" "+oe+","+oe+" "+-oe+","+oe+"Z"},"triangle-down":function(q){var oe=Math.sqrt(q/va),de=oe*va/2;return"M0,"+de+"L"+oe+","+-de+" "+-oe+","+-de+"Z"},"triangle-up":function(q){var oe=Math.sqrt(q/va),de=oe*va/2;return"M0,"+-de+"L"+oe+","+de+" "+-oe+","+de+"Z"}});f.svg.symbolTypes=hu.keys();var va=Math.sqrt(3),il=Math.tan(30*st);Ee.transition=function(q){for(var oe,de,Me=qa||++Vo,Se=Dl(q),ze=[],Ye=ol||{time:Date.now(),ease:Ca,delay:0,duration:250},Xe=-1,tt=this.length;++Xe<tt;){ze.push(oe=[]);for(var rt=this[Xe],ft=-1,bt=rt.length;++ft<bt;)(de=rt[ft])&&Kl(de,ft,Se,Me,Ye),oe.push(de)}return xa(ze,Se,Me)},Ee.interrupt=function(q){return this.each(null==q?ya:pu(Dl(q)))};var ya=pu(Dl());function pu(q){return function(){var oe,de,Me;(oe=this[q])&&(Me=oe[de=oe.active])&&(Me.timer.c=null,Me.timer.t=NaN,--oe.count?delete oe[de]:delete this[q],oe.active+=.5,Me.event&&Me.event.interrupt.call(this,this.__data__,Me.index))}}function xa(q,oe,de){return le(q,ui),q.namespace=oe,q.id=de,q}var qa,ol,ui=[],Vo=0;function Ss(q,oe,de,Me){var Se=q.id,ze=q.namespace;return Le(q,"function"==typeof de?function(Ye,Xe,tt){Ye[ze][Se].tween.set(oe,Me(de.call(Ye,Ye.__data__,Xe,tt)))}:(de=Me(de),function(Ye){Ye[ze][Se].tween.set(oe,de)}))}function Ga(q){return null==q&&(q=""),function(){this.textContent=q}}function Dl(q){return null==q?"__transition__":"__transition_"+q+"__"}function Kl(q,oe,de,Me,Se){var ze,Ye,Xe,tt,rt,ft=q[de]||(q[de]={active:0,count:0}),bt=ft[Me];function At(qt){var jt=ft.active,Kt=ft[jt];for(var Vt in Kt&&(Kt.timer.c=null,Kt.timer.t=NaN,--ft.count,delete ft[jt],Kt.event&&Kt.event.interrupt.call(q,q.__data__,Kt.index)),ft)if(+Vt<Me){var gn=ft[Vt];gn.timer.c=null,gn.timer.t=NaN,--ft.count,delete ft[Vt]}Ye.c=Ut,an(function(){return Ye.c&&Ut(qt||1)&&(Ye.c=null,Ye.t=NaN),1},0,ze),ft.active=Me,bt.event&&bt.event.start.call(q,q.__data__,oe),rt=[],bt.tween.forEach(function(ln,nn){(nn=nn.call(q,q.__data__,oe))&&rt.push(nn)}),tt=bt.ease,Xe=bt.duration}function Ut(qt){for(var jt=qt/Xe,Kt=tt(jt),Vt=rt.length;Vt>0;)rt[--Vt].call(q,Kt);if(jt>=1)return bt.event&&bt.event.end.call(q,q.__data__,oe),--ft.count?delete ft[Me]:delete q[de],1}bt||(Ye=an(function(qt){var jt=bt.delay;if(Ye.t=jt+ze,jt<=qt)return At(qt-jt);Ye.c=At},0,ze=Se.time),bt=ft[Me]={tween:new b,time:ze,timer:Ye,delay:Se.delay,duration:Se.duration,ease:Se.ease,index:oe},Se=null,++ft.count)}ui.call=Ee.call,ui.empty=Ee.empty,ui.node=Ee.node,ui.size=Ee.size,f.transition=function(q,oe){return q&&q.transition?qa?q.transition(oe):q:f.selection().transition(q)},f.transition.prototype=ui,ui.select=function(q){var oe,de,Me,Se=this.id,ze=this.namespace,Ye=[];q=Re(q);for(var Xe=-1,tt=this.length;++Xe<tt;){Ye.push(oe=[]);for(var rt=this[Xe],ft=-1,bt=rt.length;++ft<bt;)(Me=rt[ft])&&(de=q.call(Me,Me.__data__,ft,Xe))?("__data__"in Me&&(de.__data__=Me.__data__),Kl(de,ft,ze,Se,Me[ze][Se]),oe.push(de)):oe.push(null)}return xa(Ye,ze,Se)},ui.selectAll=function(q){var oe,de,Me,Se,ze,Ye=this.id,Xe=this.namespace,tt=[];q=ke(q);for(var rt=-1,ft=this.length;++rt<ft;)for(var bt=this[rt],At=-1,Ut=bt.length;++At<Ut;)if(Me=bt[At]){ze=Me[Xe][Ye],de=q.call(Me,Me.__data__,At,rt),tt.push(oe=[]);for(var qt=-1,jt=de.length;++qt<jt;)(Se=de[qt])&&Kl(Se,qt,Xe,Ye,ze),oe.push(Se)}return xa(tt,Xe,Ye)},ui.filter=function(q){var oe,de,Me=[];"function"!=typeof q&&(q=be(q));for(var Se=0,ze=this.length;Se<ze;Se++){Me.push(oe=[]);for(var Ye,Xe=0,tt=(Ye=this[Se]).length;Xe<tt;Xe++)(de=Ye[Xe])&&q.call(de,de.__data__,Xe,Se)&&oe.push(de)}return xa(Me,this.namespace,this.id)},ui.tween=function(q,oe){var de=this.id,Me=this.namespace;return arguments.length<2?this.node()[Me][de].tween.get(q):Le(this,null==oe?function(Se){Se[Me][de].tween.remove(q)}:function(Se){Se[Me][de].tween.set(q,oe)})},ui.attr=function(q,oe){if(arguments.length<2){for(oe in q)this.attr(oe,q[oe]);return this}var de="transform"==q?Da:ja,Me=f.ns.qualify(q);function Se(){this.removeAttribute(Me)}function ze(){this.removeAttributeNS(Me.space,Me.local)}return Ss(this,"attr."+q,oe,Me.local?function(Ye){return null==Ye?ze:(Ye+="",function(){var Xe,tt=this.getAttributeNS(Me.space,Me.local);return tt!==Ye&&(Xe=de(tt,Ye),function(rt){this.setAttributeNS(Me.space,Me.local,Xe(rt))})})}:function(Ye){return null==Ye?Se:(Ye+="",function(){var Xe,tt=this.getAttribute(Me);return tt!==Ye&&(Xe=de(tt,Ye),function(rt){this.setAttribute(Me,Xe(rt))})})})},ui.attrTween=function(q,oe){var de=f.ns.qualify(q);return this.tween("attr."+q,de.local?function(Me,Se){var ze=oe.call(this,Me,Se,this.getAttributeNS(de.space,de.local));return ze&&function(Ye){this.setAttributeNS(de.space,de.local,ze(Ye))}}:function(Me,Se){var ze=oe.call(this,Me,Se,this.getAttribute(de));return ze&&function(Ye){this.setAttribute(de,ze(Ye))}})},ui.style=function(q,oe,de){var Me=arguments.length;if(Me<3){if("string"!=typeof q){for(de in Me<2&&(oe=""),q)this.style(de,q[de],oe);return this}de=""}function Se(){this.style.removeProperty(q)}return Ss(this,"style."+q,oe,function(ze){return null==ze?Se:(ze+="",function(){var Ye,Xe=i(this).getComputedStyle(this,null).getPropertyValue(q);return Xe!==ze&&(Ye=ja(Xe,ze),function(tt){this.style.setProperty(q,Ye(tt),de)})})})},ui.styleTween=function(q,oe,de){return arguments.length<3&&(de=""),this.tween("style."+q,function(Me,Se){var ze=oe.call(this,Me,Se,i(this).getComputedStyle(this,null).getPropertyValue(q));return ze&&function(Ye){this.style.setProperty(q,ze(Ye),de)}})},ui.text=function(q){return Ss(this,"text",q,Ga)},ui.remove=function(){var q=this.namespace;return this.each("end.transition",function(){var oe;this[q].count<2&&(oe=this.parentNode)&&oe.removeChild(this)})},ui.ease=function(q){var oe=this.id,de=this.namespace;return arguments.length<1?this.node()[de][oe].ease:("function"!=typeof q&&(q=f.ease.apply(f,arguments)),Le(this,function(Me){Me[de][oe].ease=q}))},ui.delay=function(q){var oe=this.id,de=this.namespace;return arguments.length<1?this.node()[de][oe].delay:Le(this,"function"==typeof q?function(Me,Se,ze){Me[de][oe].delay=+q.call(Me,Me.__data__,Se,ze)}:(q=+q,function(Me){Me[de][oe].delay=q}))},ui.duration=function(q){var oe=this.id,de=this.namespace;return arguments.length<1?this.node()[de][oe].duration:Le(this,"function"==typeof q?function(Me,Se,ze){Me[de][oe].duration=Math.max(1,q.call(Me,Me.__data__,Se,ze))}:(q=Math.max(1,q),function(Me){Me[de][oe].duration=q}))},ui.each=function(q,oe){var de=this.id,Me=this.namespace;if(arguments.length<2){var Se=ol,ze=qa;try{qa=de,Le(this,function(Ye,Xe,tt){ol=Ye[Me][de],q.call(Ye,Ye.__data__,Xe,tt)})}finally{ol=Se,qa=ze}}else Le(this,function(Ye){var Xe=Ye[Me][de];(Xe.event||(Xe.event=f.dispatch("start","end","interrupt"))).on(q,oe)});return this},ui.transition=function(){for(var q,oe,de,Me=this.id,Se=++Vo,ze=this.namespace,Ye=[],Xe=0,tt=this.length;Xe<tt;Xe++){Ye.push(q=[]);for(var rt,ft=0,bt=(rt=this[Xe]).length;ft<bt;ft++)(oe=rt[ft])&&Kl(oe,ft,ze,Se,{time:(de=oe[ze][Me]).time,ease:de.ease,delay:de.delay+de.duration,duration:de.duration}),q.push(oe)}return xa(Ye,ze,Se)},f.svg.axis=function(){var q,oe=f.scale.linear(),de=Jl,Me=6,Se=6,ze=3,Ye=[10],Xe=null;function tt(rt){rt.each(function(){var ft,bt=f.select(this),At=this.__chart__||oe,Ut=this.__chart__=oe.copy(),qt=Xe??(Ut.ticks?Ut.ticks.apply(Ut,Ye):Ut.domain()),jt=q??(Ut.tickFormat?Ut.tickFormat.apply(Ut,Ye):z),Kt=bt.selectAll(".tick").data(qt,Ut),Vt=Kt.enter().insert("g",".domain").attr("class","tick").style("opacity",Lt),gn=f.transition(Kt.exit()).style("opacity",Lt).remove(),ln=f.transition(Kt.order()).style("opacity",1),nn=Math.max(Me,0)+ze,On=yo(Ut),Pn=bt.selectAll(".domain").data([0]),tr=(Pn.enter().append("path").attr("class","domain"),f.transition(Pn));Vt.append("line"),Vt.append("text");var Jn,ur,vr,wr,Cr=Vt.select("line"),Or=ln.select("line"),Rr=Kt.select("text").text(jt),si=Vt.select("text"),ir=ln.select("text"),Ar="top"===de||"left"===de?-1:1;if("bottom"===de||"top"===de?(ft=V,Jn="x",vr="y",ur="x2",wr="y2",Rr.attr("dy",Ar<0?"0em":".71em").style("text-anchor","middle"),tr.attr("d","M"+On[0]+","+Ar*Se+"V0H"+On[1]+"V"+Ar*Se)):(ft=Y,Jn="y",vr="x",ur="y2",wr="x2",Rr.attr("dy",".32em").style("text-anchor",Ar<0?"end":"start"),tr.attr("d","M"+Ar*Se+","+On[0]+"H0V"+On[1]+"H"+Ar*Se)),Cr.attr(wr,Ar*Me),si.attr(vr,Ar*nn),Or.attr(ur,0).attr(wr,Ar*Me),ir.attr(Jn,0).attr(vr,Ar*nn),Ut.rangeBand){var Lr=Ut,qr=Lr.rangeBand()/2;At=Ut=function(ni){return Lr(ni)+qr}}else At.rangeBand?At=Ut:gn.call(ft,Ut,At);Vt.call(ft,At,Ut),ln.call(ft,Ut,Ut)})}return tt.scale=function(rt){return arguments.length?(oe=rt,tt):oe},tt.orient=function(rt){return arguments.length?(de=rt in al?rt+"":Jl,tt):de},tt.ticks=function(){return arguments.length?(Ye=T(arguments),tt):Ye},tt.tickValues=function(rt){return arguments.length?(Xe=rt,tt):Xe},tt.tickFormat=function(rt){return arguments.length?(q=rt,tt):q},tt.tickSize=function(rt){var ft=arguments.length;return ft?(Me=+rt,Se=+arguments[ft-1],tt):Me},tt.innerTickSize=function(rt){return arguments.length?(Me=+rt,tt):Me},tt.outerTickSize=function(rt){return arguments.length?(Se=+rt,tt):Se},tt.tickPadding=function(rt){return arguments.length?(ze=+rt,tt):ze},tt.tickSubdivide=function(){return arguments.length&&tt},tt};var Jl="bottom",al={top:1,right:1,bottom:1,left:1};function V(q,oe,de){q.attr("transform",function(Me){var Se=oe(Me);return"translate("+(isFinite(Se)?Se:de(Me))+",0)"})}function Y(q,oe,de){q.attr("transform",function(Me){var Se=oe(Me);return"translate(0,"+(isFinite(Se)?Se:de(Me))+")"})}f.svg.brush=function(){var q,oe,de=Q(ft,"brushstart","brush","brushend"),Me=null,Se=null,ze=[0,0],Ye=[0,0],Xe=!0,tt=!0,rt=re[0];function ft(jt){jt.each(function(){var Kt=f.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",qt).on("touchstart.brush",qt),Vt=Kt.selectAll(".background").data([0]);Vt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Kt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var gn=Kt.selectAll(".resize").data(rt,z);gn.exit().remove(),gn.enter().append("g").attr("class",function(Pn){return"resize "+Pn}).style("cursor",function(Pn){return W[Pn]}).append("rect").attr("x",function(Pn){return/[ew]$/.test(Pn)?-3:null}).attr("y",function(Pn){return/^[ns]/.test(Pn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),gn.style("display",ft.empty()?"none":null);var ln,nn=f.transition(Kt),On=f.transition(Vt);Me&&(ln=yo(Me),On.attr("x",ln[0]).attr("width",ln[1]-ln[0]),At(nn)),Se&&(ln=yo(Se),On.attr("y",ln[0]).attr("height",ln[1]-ln[0]),Ut(nn)),bt(nn)})}function bt(jt){jt.selectAll(".resize").attr("transform",function(Kt){return"translate("+ze[+/e$/.test(Kt)]+","+Ye[+/^s/.test(Kt)]+")"})}function At(jt){jt.select(".extent").attr("x",ze[0]),jt.selectAll(".extent,.n>rect,.s>rect").attr("width",ze[1]-ze[0])}function Ut(jt){jt.select(".extent").attr("y",Ye[0]),jt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ye[1]-Ye[0])}function qt(){var jt,Kt,Vt=this,gn=f.select(f.event.target),ln=de.of(Vt,arguments),nn=f.select(Vt),On=gn.datum(),Pn=!/^(n|s)$/.test(On)&&Me,tr=!/^(e|w)$/.test(On)&&Se,Jn=gn.classed("extent"),ur=Ct(Vt),vr=f.mouse(Vt),wr=f.select(i(Vt)).on("keydown.brush",function(){32==f.event.keyCode&&(Jn||(jt=null,vr[0]-=ze[1],vr[1]-=Ye[1],Jn=2),ae())}).on("keyup.brush",function(){32==f.event.keyCode&&2==Jn&&(vr[0]+=ze[1],vr[1]+=Ye[1],Jn=0,ae())});if(f.event.changedTouches?wr.on("touchmove.brush",Rr).on("touchend.brush",ir):wr.on("mousemove.brush",Rr).on("mouseup.brush",ir),nn.interrupt().selectAll("*").interrupt(),Jn)vr[0]=ze[0]-vr[0],vr[1]=Ye[0]-vr[1];else if(On){var Cr=+/w$/.test(On),Or=+/^n/.test(On);Kt=[ze[1-Cr]-vr[0],Ye[1-Or]-vr[1]],vr[0]=ze[Cr],vr[1]=Ye[Or]}else f.event.altKey&&(jt=vr.slice());function Rr(){var Ar=f.mouse(Vt),Lr=!1;Kt&&(Ar[0]+=Kt[0],Ar[1]+=Kt[1]),Jn||(f.event.altKey?(jt||(jt=[(ze[0]+ze[1])/2,(Ye[0]+Ye[1])/2]),vr[0]=ze[+(Ar[0]<jt[0])],vr[1]=Ye[+(Ar[1]<jt[1])]):jt=null),Pn&&si(Ar,Me,0)&&(At(nn),Lr=!0),tr&&si(Ar,Se,1)&&(Ut(nn),Lr=!0),Lr&&(bt(nn),ln({type:"brush",mode:Jn?"move":"resize"}))}function si(Ar,Lr,qr){var ni,gi,Ai=yo(Lr),Yi=Ai[0],xo=Ai[1],mo=vr[qr],$i=qr?Ye:ze,Do=$i[1]-$i[0];if(Jn&&(Yi-=mo,xo-=Do+mo),ni=(qr?tt:Xe)?Math.max(Yi,Math.min(xo,Ar[qr])):Ar[qr],Jn?gi=(ni+=mo)+Do:(jt&&(mo=Math.max(Yi,Math.min(xo,2*jt[qr]-ni))),mo<ni?(gi=ni,ni=mo):gi=mo),$i[0]!=ni||$i[1]!=gi)return qr?oe=null:q=null,$i[0]=ni,$i[1]=gi,!0}function ir(){Rr(),nn.style("pointer-events","all").selectAll(".resize").style("display",ft.empty()?"none":null),f.select("body").style("cursor",null),wr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ur(),ln({type:"brushend"})}nn.style("pointer-events","none").selectAll(".resize").style("display",null),f.select("body").style("cursor",gn.style("cursor")),ln({type:"brushstart"}),Rr()}return ft.event=function(jt){jt.each(function(){var Kt=de.of(this,arguments),Vt={x:ze,y:Ye,i:q,j:oe},gn=this.__chart__||Vt;this.__chart__=Vt,qa?f.select(this).transition().each("start.brush",function(){q=gn.i,oe=gn.j,ze=gn.x,Ye=gn.y,Kt({type:"brushstart"})}).tween("brush:brush",function(){var ln=Ro(ze,Vt.x),nn=Ro(Ye,Vt.y);return q=oe=null,function(On){ze=Vt.x=ln(On),Ye=Vt.y=nn(On),Kt({type:"brush",mode:"resize"})}}).each("end.brush",function(){q=Vt.i,oe=Vt.j,Kt({type:"brush",mode:"resize"}),Kt({type:"brushend"})}):(Kt({type:"brushstart"}),Kt({type:"brush",mode:"resize"}),Kt({type:"brushend"}))})},ft.x=function(jt){return arguments.length?(rt=re[!(Me=jt)<<1|!Se],ft):Me},ft.y=function(jt){return arguments.length?(rt=re[!Me<<1|!(Se=jt)],ft):Se},ft.clamp=function(jt){return arguments.length?(Me&&Se?(Xe=!!jt[0],tt=!!jt[1]):Me?Xe=!!jt:Se&&(tt=!!jt),ft):Me&&Se?[Xe,tt]:Me?Xe:Se?tt:null},ft.extent=function(jt){var Kt,Vt,gn,ln,nn;return arguments.length?(Me&&(Kt=jt[0],Vt=jt[1],Se&&(Kt=Kt[0],Vt=Vt[0]),q=[Kt,Vt],Me.invert&&(Kt=Me(Kt),Vt=Me(Vt)),Vt<Kt&&(nn=Kt,Kt=Vt,Vt=nn),Kt==ze[0]&&Vt==ze[1]||(ze=[Kt,Vt])),Se&&(gn=jt[0],ln=jt[1],Me&&(gn=gn[1],ln=ln[1]),oe=[gn,ln],Se.invert&&(gn=Se(gn),ln=Se(ln)),ln<gn&&(nn=gn,gn=ln,ln=nn),gn==Ye[0]&&ln==Ye[1]||(Ye=[gn,ln])),ft):(Me&&(q?(Kt=q[0],Vt=q[1]):(Kt=ze[0],Vt=ze[1],Me.invert&&(Kt=Me.invert(Kt),Vt=Me.invert(Vt)),Vt<Kt&&(nn=Kt,Kt=Vt,Vt=nn))),Se&&(oe?(gn=oe[0],ln=oe[1]):(gn=Ye[0],ln=Ye[1],Se.invert&&(gn=Se.invert(gn),ln=Se.invert(ln)),ln<gn&&(nn=gn,gn=ln,ln=nn))),Me&&Se?[[Kt,gn],[Vt,ln]]:Me?[Kt,Vt]:Se&&[gn,ln])},ft.clear=function(){return ft.empty()||(ze=[0,0],Ye=[0,0],q=oe=null),ft},ft.empty=function(){return!!Me&&ze[0]==ze[1]||!!Se&&Ye[0]==Ye[1]},f.rebind(ft,de,"on")};var W={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},re=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function _e(q){return JSON.parse(q.responseText)}function Pe(q){var oe=v.createRange();return oe.selectNode(v.body),oe.createContextualFragment(q.responseText)}f.text=yr(function(q){return q.responseText}),f.json=function(q,oe){return fr(q,"application/json",_e,oe)},f.html=function(q,oe){return fr(q,"text/html",Pe,oe)},f.xml=yr(function(q){return q.responseXML}),void 0===(C="function"==typeof(I=f)?I.call(U,r,U,se):I)||(se.exports=C)}).apply(self)},88294:function(se,U,r){"use strict";se.exports=r(62849)},62849:function(se,U,r){"use strict";var I=r(91358),C=r(53435),f=r(18863),k=r(21527),T=r(71299),v=r(46775),c=r(30120),i=r(64941),s=r(90660),a=r(27084);function o(l,u){for(var d=u[0],g=u[1],h=1/(u[2]-d),w=1/(u[3]-g),y=new Array(l.length),p=0,_=l.length/2;p<_;p++)y[2*p]=C((l[2*p]-d)*h,0,1),y[2*p+1]=C((l[2*p+1]-g)*w,0,1);return y}se.exports=function(l,u){u||(u={}),l=c(l,"float64"),u=T(u,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var d=v(u.maxDepth,255),g=v(u.bounds,k(l,2));g[0]===g[2]&&g[2]++,g[1]===g[3]&&g[3]++;var h,w=o(l,g),y=l.length>>>1;u.dtype||(u.dtype="array"),"string"==typeof u.dtype?h=new(s(u.dtype))(y):u.dtype&&(h=u.dtype,Array.isArray(h)&&(h.length=y));for(var p=0;p<y;++p)h[p]=p;var _=[],x=[],b=[],M=[];!function B(J,z,$,G,H,X){if(!G.length)return null;var K=_[H]||(_[H]=[]),ue=b[H]||(b[H]=[]),ae=x[H]||(x[H]=[]),ne=K.length;if(++H>d||X>1073741824){for(var Q=0;Q<G.length;Q++)K.push(G[Q]),ue.push(X),ae.push(null,null,null,null);return ne}if(K.push(G[0]),ue.push(X),G.length<=1)return ae.push(null,null,null,null),ne;for(var ie=.5*$,le=J+ie,fe=z+ie,he=[],pe=[],xe=[],Ee=[],Re=1,ke=G.length;Re<ke;Re++){var Te=G[Re],je=w[2*Te+1];w[2*Te]<le?je<fe?he.push(Te):pe.push(Te):je<fe?xe.push(Te):Ee.push(Te)}return ae.push(B(J,z,ie,he,H,X<<=2),B(J,fe,ie,pe,H,X+1),B(le,z,ie,xe,H,X+2),B(le,fe,ie,Ee,H,X+3)),ne}(0,0,1,h,0,1);for(var m=0,D=0;D<_.length;D++){var S=_[D];if(h.set)h.set(S,m);else for(var O=0,P=S.length;O<P;O++)h[O+m]=S[O];var R=m+_[D].length;M[D]=[m,R],m=R}return h.range=function(){for(var B,J=[],z=arguments.length;z--;)J[z]=arguments[z];if(i(J[J.length-1])){var $=J.pop();J.length||null==$.x&&null==$.l&&null==$.left||(J=[$],B={}),B=T($,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else B={};J.length||(J=g);var G,H=f.apply(void 0,J),X=[Math.min(H.x,H.x+H.width),Math.min(H.y,H.y+H.height),Math.max(H.x,H.x+H.width),Math.max(H.y,H.y+H.height)],K=X[0],ue=X[1],ae=X[2],ne=X[3],Q=o([K,ue,ae,ne],g),ie=Q[0],le=Q[1],fe=Q[2],he=Q[3],pe=v(B.level,_.length);if(null!=B.d&&("number"==typeof B.d?G=[B.d,B.d]:B.d.length&&(G=B.d),pe=Math.min(Math.max(Math.ceil(-a(Math.abs(G[0])/(g[2]-g[0]))),Math.ceil(-a(Math.abs(G[1])/(g[3]-g[1])))),pe)),pe=Math.min(pe,_.length),B.lod)return function(Ee,Re,ke,Te,we){for(var je=[],Ce=0;Ce<we;Ce++){var Ie=b[Ce],ge=M[Ce][0],me=F(Ee,Re,Ce),ce=F(ke,Te,Ce),Ae=I.ge(Ie,me),Ne=I.gt(Ie,ce,Ae,Ie.length-1);je[Ce]=[Ae+ge,Ne+ge]}return je}(ie,le,fe,he,pe);var xe=[];return function Ee(Re,ke,Te,we,je,Ce){if(null!==je&&null!==Ce&&!(ie>Re+Te||le>ke+Te||fe<Re||he<ke||we>=pe||je===Ce)){var Ie=_[we];void 0===Ce&&(Ce=Ie.length);for(var ge=je;ge<Ce;ge++){var me=Ie[ge],ce=l[2*me],Ae=l[2*me+1];ce>=K&&ce<=ae&&Ae>=ue&&Ae<=ne&&xe.push(me)}var Ne=x[we],De=Ne[4*je+0],qe=Ne[4*je+1],Ke=Ne[4*je+2],be=Ne[4*je+3],Oe=function(Ze,We){for(var et=null,nt=0;null===et;)if(et=Ze[4*We+nt],++nt>Ze.length)return null;return et}(Ne,je+1),Le=.5*Te,Ue=we+1;Ee(Re,ke,Le,Ue,De,qe||Ke||be||Oe),Ee(Re,ke+Le,Le,Ue,qe,Ke||be||Oe),Ee(Re+Le,ke,Le,Ue,Ke,be||Oe),Ee(Re+Le,ke+Le,Le,Ue,be,Oe)}}(0,0,1,0,0,1),xe},h;function F(B,J,z){for(var $=1,G=.5,H=.5,X=.5,K=0;K<z;K++)$<<=2,$+=B<G?J<H?0:1:J<H?2:3,X*=.5,G+=B<G?-X:X,H+=J<H?-X:X;return $}}},30774:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(60302),C=6378137;function f(v){var c=0;if(v&&v.length>0){c+=Math.abs(k(v[0]));for(var i=1;i<v.length;i++)c-=Math.abs(k(v[i]))}return c}function k(v){var c,i,s,a,o,l,u=0,d=v.length;if(d>2){for(l=0;l<d;l++)l===d-2?(s=d-2,a=d-1,o=0):l===d-1?(s=d-1,a=0,o=1):(s=l,a=l+1,o=l+2),c=v[s],i=v[a],u+=(T(v[o][0])-T(c[0]))*Math.sin(T(i[1]));u=u*C*C/2}return u}function T(v){return v*Math.PI/180}U.default=function(v){return I.geomReduce(v,function(c,i){return c+function(s){var a,o=0;switch(s.type){case"Polygon":return f(s.coordinates);case"MultiPolygon":for(a=0;a<s.coordinates.length;a++)o+=f(s.coordinates[a]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(i)},0)}},23132:function(se,U){"use strict";function r(l,u,d){void 0===d&&(d={});var g={type:"Feature"};return(0===d.id||d.id)&&(g.id=d.id),d.bbox&&(g.bbox=d.bbox),g.properties=u||{},g.geometry=l,g}function I(l,u,d){if(void 0===d&&(d={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(l[0])||!o(l[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:l},u,d)}function C(l,u,d){void 0===d&&(d={});for(var g=0,h=l;g<h.length;g++){var w=h[g];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<w[w.length-1].length;y++)if(w[w.length-1][y]!==w[0][y])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:l},u,d)}function f(l,u,d){if(void 0===d&&(d={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:l},u,d)}function k(l,u){void 0===u&&(u={});var d={type:"FeatureCollection"};return u.id&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.features=l,d}function T(l,u,d){return void 0===d&&(d={}),r({type:"MultiLineString",coordinates:l},u,d)}function v(l,u,d){return void 0===d&&(d={}),r({type:"MultiPoint",coordinates:l},u,d)}function c(l,u,d){return void 0===d&&(d={}),r({type:"MultiPolygon",coordinates:l},u,d)}function i(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l*d}function s(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l/d}function a(l){return l%(2*Math.PI)*180/Math.PI}function o(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)}Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=6371008.8,U.factors={centimeters:100*U.earthRadius,centimetres:100*U.earthRadius,degrees:U.earthRadius/111325,feet:3.28084*U.earthRadius,inches:39.37*U.earthRadius,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:1e3*U.earthRadius,millimetres:1e3*U.earthRadius,nauticalmiles:U.earthRadius/1852,radians:1,yards:1.0936*U.earthRadius},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},U.feature=r,U.geometry=function(l,u,d){switch(void 0===d&&(d={}),l){case"Point":return I(u).geometry;case"LineString":return f(u).geometry;case"Polygon":return C(u).geometry;case"MultiPoint":return v(u).geometry;case"MultiLineString":return T(u).geometry;case"MultiPolygon":return c(u).geometry;default:throw new Error(l+" is invalid")}},U.point=I,U.points=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return I(g,u)}),d)},U.polygon=C,U.polygons=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return C(g,u)}),d)},U.lineString=f,U.lineStrings=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return f(g,u)}),d)},U.featureCollection=k,U.multiLineString=T,U.multiPoint=v,U.multiPolygon=c,U.geometryCollection=function(l,u,d){return void 0===d&&(d={}),r({type:"GeometryCollection",geometries:l},u,d)},U.round=function(l,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var d=Math.pow(10,u||0);return Math.round(l*d)/d},U.radiansToLength=i,U.lengthToRadians=s,U.lengthToDegrees=function(l,u){return a(s(l,u))},U.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},U.radiansToDegrees=a,U.degreesToRadians=function(l){return l%360*Math.PI/180},U.convertLength=function(l,u,d){if(void 0===u&&(u="kilometers"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("length must be a positive number");return i(s(l,u),d)},U.convertArea=function(l,u,d){if(void 0===u&&(u="meters"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=U.areaFactors[u];if(!g)throw new Error("invalid original units");var h=U.areaFactors[d];if(!h)throw new Error("invalid final units");return l/g*h},U.isNumber=o,U.isObject=function(l){return!!l&&l.constructor===Object},U.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!o(u))throw new Error("bbox must only contain numbers")})},U.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")}},60302:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(23132);function C(s,a,o){if(null!==s)for(var l,u,d,g,h,w,y,p,_=0,x=0,b=s.type,M="FeatureCollection"===b,m="Feature"===b,D=M?s.features.length:1,S=0;S<D;S++){h=(p=!!(y=M?s.features[S].geometry:m?s.geometry:s)&&"GeometryCollection"===y.type)?y.geometries.length:1;for(var O=0;O<h;O++){var P=0,R=0;if(null!==(g=p?y.geometries[O]:y)){w=g.coordinates;var F=g.type;switch(_=!o||"Polygon"!==F&&"MultiPolygon"!==F?0:1,F){case null:break;case"Point":if(!1===a(w,x,S,P,R))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<w.length;l++){if(!1===a(w[l],x,S,P,R))return!1;x++,"MultiPoint"===F&&P++}"LineString"===F&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<w.length;l++){for(u=0;u<w[l].length-_;u++){if(!1===a(w[l][u],x,S,P,R))return!1;x++}"MultiLineString"===F&&P++,"Polygon"===F&&R++}"Polygon"===F&&P++;break;case"MultiPolygon":for(l=0;l<w.length;l++){for(R=0,u=0;u<w[l].length;u++){for(d=0;d<w[l][u].length-_;d++){if(!1===a(w[l][u][d],x,S,P,R))return!1;x++}R++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(!1===C(g.geometries[l],a,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(s,a){var o;switch(s.type){case"FeatureCollection":for(o=0;o<s.features.length&&!1!==a(s.features[o].properties,o);o++);break;case"Feature":a(s.properties,0)}}function k(s,a){if("Feature"===s.type)a(s,0);else if("FeatureCollection"===s.type)for(var o=0;o<s.features.length&&!1!==a(s.features[o],o);o++);}function T(s,a){var o,l,u,d,g,h,w,y,p,_,x=0,b="FeatureCollection"===s.type,M="Feature"===s.type,m=b?s.features.length:1;for(o=0;o<m;o++){for(y=b?s.features[o].properties:M?s.properties:{},p=b?s.features[o].bbox:M?s.bbox:void 0,_=b?s.features[o].id:M?s.id:void 0,g=(w=!!(h=b?s.features[o].geometry:M?s.geometry:s)&&"GeometryCollection"===h.type)?h.geometries.length:1,u=0;u<g;u++)if(null!==(d=w?h.geometries[u]:h))switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===a(d,x,y,p,_))return!1;break;case"GeometryCollection":for(l=0;l<d.geometries.length;l++)if(!1===a(d.geometries[l],x,y,p,_))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===a(null,x,y,p,_))return!1;x++}}function v(s,a){T(s,function(o,l,u,d,g){var h,w=null===o?null:o.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==a(I.feature(o,u,{bbox:d,id:g}),l,0)&&void 0}switch(w){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var y=0;y<o.coordinates.length;y++)if(!1===a(I.feature({type:h,coordinates:o.coordinates[y]},u),l,y))return!1})}function c(s,a){v(s,function(o,l,u){var d=0;if(o.geometry){var g=o.geometry.type;if("Point"!==g&&"MultiPoint"!==g){var h,w=0,y=0,p=0;return!1!==C(o,function(_,x,b,M,m){if(void 0===h||l>w||M>y||m>p)return h=_,w=l,y=M,p=m,void(d=0);var D=I.lineString([h,_],o.properties);if(!1===a(D,l,u,m,d))return!1;d++,h=_})&&void 0}}})}function i(s,a){if(!s)throw new Error("geojson is required");v(s,function(o,l,u){if(null!==o.geometry){var g=o.geometry.coordinates;switch(o.geometry.type){case"LineString":if(!1===a(o,l,u,0,0))return!1;break;case"Polygon":for(var h=0;h<g.length;h++)if(!1===a(I.lineString(g[h],o.properties),l,u,h))return!1}}})}U.coordEach=C,U.coordReduce=function(s,a,o,l){var u=o;return C(s,function(d,g,h,w,y){u=0===g&&void 0===o?d:a(u,d,g,h,w,y)},l),u},U.propEach=f,U.propReduce=function(s,a,o){var l=o;return f(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.featureEach=k,U.featureReduce=function(s,a,o){var l=o;return k(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.coordAll=function(s){var a=[];return C(s,function(o){a.push(o)}),a},U.geomEach=T,U.geomReduce=function(s,a,o){var l=o;return T(s,function(u,d,g,h,w){l=0===d&&void 0===o?u:a(l,u,d,g,h,w)}),l},U.flattenEach=v,U.flattenReduce=function(s,a,o){var l=o;return v(s,function(u,d,g){l=0===d&&0===g&&void 0===o?u:a(l,u,d,g)}),l},U.segmentEach=c,U.segmentReduce=function(s,a,o){var l=o,u=!1;return c(s,function(d,g,h,w,y){l=!1===u&&void 0===o?d:a(l,d,g,h,w,y),u=!0}),l},U.lineEach=i,U.lineReduce=function(s,a,o){var l=o;return i(s,function(u,d,g,h){l=0===d&&void 0===o?u:a(l,u,d,g,h)}),l},U.findSegment=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.segmentIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=w.length+g-1),I.lineString([w[g],w[g+1]],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g-1),I.lineString([w[d][g],w[d][g+1]],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g-1),I.lineString([w[u][g],w[u][g+1]],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g-1),I.lineString([w[u][d][g],w[u][d][g+1]],h,a)}throw new Error("geojson is invalid")},U.findPoint=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.coordIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":return I.point(w,h,a);case"MultiPoint":return u<0&&(u=w.length+u),I.point(w[u],h,a);case"LineString":return g<0&&(g=w.length+g),I.point(w[g],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g),I.point(w[d][g],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g),I.point(w[u][g],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g),I.point(w[u][d][g],h,a)}throw new Error("geojson is invalid")}},85268:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(27138);function C(f){var k=[1/0,1/0,-1/0,-1/0];return I.coordEach(f,function(T){k[0]>T[0]&&(k[0]=T[0]),k[1]>T[1]&&(k[1]=T[1]),k[2]<T[0]&&(k[2]=T[0]),k[3]<T[1]&&(k[3]=T[1])}),k}C.default=C,U.default=C},94228:function(se,U){"use strict";function r(l,u,d){void 0===d&&(d={});var g={type:"Feature"};return(0===d.id||d.id)&&(g.id=d.id),d.bbox&&(g.bbox=d.bbox),g.properties=u||{},g.geometry=l,g}function I(l,u,d){if(void 0===d&&(d={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o(l[0])||!o(l[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:l},u,d)}function C(l,u,d){void 0===d&&(d={});for(var g=0,h=l;g<h.length;g++){var w=h[g];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<w[w.length-1].length;y++)if(w[w.length-1][y]!==w[0][y])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:l},u,d)}function f(l,u,d){if(void 0===d&&(d={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:l},u,d)}function k(l,u){void 0===u&&(u={});var d={type:"FeatureCollection"};return u.id&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.features=l,d}function T(l,u,d){return void 0===d&&(d={}),r({type:"MultiLineString",coordinates:l},u,d)}function v(l,u,d){return void 0===d&&(d={}),r({type:"MultiPoint",coordinates:l},u,d)}function c(l,u,d){return void 0===d&&(d={}),r({type:"MultiPolygon",coordinates:l},u,d)}function i(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l*d}function s(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l/d}function a(l){return l%(2*Math.PI)*180/Math.PI}function o(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)}Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=6371008.8,U.factors={centimeters:100*U.earthRadius,centimetres:100*U.earthRadius,degrees:U.earthRadius/111325,feet:3.28084*U.earthRadius,inches:39.37*U.earthRadius,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:1e3*U.earthRadius,millimetres:1e3*U.earthRadius,nauticalmiles:U.earthRadius/1852,radians:1,yards:1.0936*U.earthRadius},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},U.feature=r,U.geometry=function(l,u,d){switch(void 0===d&&(d={}),l){case"Point":return I(u).geometry;case"LineString":return f(u).geometry;case"Polygon":return C(u).geometry;case"MultiPoint":return v(u).geometry;case"MultiLineString":return T(u).geometry;case"MultiPolygon":return c(u).geometry;default:throw new Error(l+" is invalid")}},U.point=I,U.points=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return I(g,u)}),d)},U.polygon=C,U.polygons=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return C(g,u)}),d)},U.lineString=f,U.lineStrings=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return f(g,u)}),d)},U.featureCollection=k,U.multiLineString=T,U.multiPoint=v,U.multiPolygon=c,U.geometryCollection=function(l,u,d){return void 0===d&&(d={}),r({type:"GeometryCollection",geometries:l},u,d)},U.round=function(l,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var d=Math.pow(10,u||0);return Math.round(l*d)/d},U.radiansToLength=i,U.lengthToRadians=s,U.lengthToDegrees=function(l,u){return a(s(l,u))},U.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},U.radiansToDegrees=a,U.degreesToRadians=function(l){return l%360*Math.PI/180},U.convertLength=function(l,u,d){if(void 0===u&&(u="kilometers"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("length must be a positive number");return i(s(l,u),d)},U.convertArea=function(l,u,d){if(void 0===u&&(u="meters"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=U.areaFactors[u];if(!g)throw new Error("invalid original units");var h=U.areaFactors[d];if(!h)throw new Error("invalid final units");return l/g*h},U.isNumber=o,U.isObject=function(l){return!!l&&l.constructor===Object},U.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!o(u))throw new Error("bbox must only contain numbers")})},U.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")}},27138:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(94228);function C(s,a,o){if(null!==s)for(var l,u,d,g,h,w,y,p,_=0,x=0,b=s.type,M="FeatureCollection"===b,m="Feature"===b,D=M?s.features.length:1,S=0;S<D;S++){h=(p=!!(y=M?s.features[S].geometry:m?s.geometry:s)&&"GeometryCollection"===y.type)?y.geometries.length:1;for(var O=0;O<h;O++){var P=0,R=0;if(null!==(g=p?y.geometries[O]:y)){w=g.coordinates;var F=g.type;switch(_=!o||"Polygon"!==F&&"MultiPolygon"!==F?0:1,F){case null:break;case"Point":if(!1===a(w,x,S,P,R))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<w.length;l++){if(!1===a(w[l],x,S,P,R))return!1;x++,"MultiPoint"===F&&P++}"LineString"===F&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<w.length;l++){for(u=0;u<w[l].length-_;u++){if(!1===a(w[l][u],x,S,P,R))return!1;x++}"MultiLineString"===F&&P++,"Polygon"===F&&R++}"Polygon"===F&&P++;break;case"MultiPolygon":for(l=0;l<w.length;l++){for(R=0,u=0;u<w[l].length;u++){for(d=0;d<w[l][u].length-_;d++){if(!1===a(w[l][u][d],x,S,P,R))return!1;x++}R++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(!1===C(g.geometries[l],a,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(s,a){var o;switch(s.type){case"FeatureCollection":for(o=0;o<s.features.length&&!1!==a(s.features[o].properties,o);o++);break;case"Feature":a(s.properties,0)}}function k(s,a){if("Feature"===s.type)a(s,0);else if("FeatureCollection"===s.type)for(var o=0;o<s.features.length&&!1!==a(s.features[o],o);o++);}function T(s,a){var o,l,u,d,g,h,w,y,p,_,x=0,b="FeatureCollection"===s.type,M="Feature"===s.type,m=b?s.features.length:1;for(o=0;o<m;o++){for(y=b?s.features[o].properties:M?s.properties:{},p=b?s.features[o].bbox:M?s.bbox:void 0,_=b?s.features[o].id:M?s.id:void 0,g=(w=!!(h=b?s.features[o].geometry:M?s.geometry:s)&&"GeometryCollection"===h.type)?h.geometries.length:1,u=0;u<g;u++)if(null!==(d=w?h.geometries[u]:h))switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===a(d,x,y,p,_))return!1;break;case"GeometryCollection":for(l=0;l<d.geometries.length;l++)if(!1===a(d.geometries[l],x,y,p,_))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===a(null,x,y,p,_))return!1;x++}}function v(s,a){T(s,function(o,l,u,d,g){var h,w=null===o?null:o.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==a(I.feature(o,u,{bbox:d,id:g}),l,0)&&void 0}switch(w){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var y=0;y<o.coordinates.length;y++)if(!1===a(I.feature({type:h,coordinates:o.coordinates[y]},u),l,y))return!1})}function c(s,a){v(s,function(o,l,u){var d=0;if(o.geometry){var g=o.geometry.type;if("Point"!==g&&"MultiPoint"!==g){var h,w=0,y=0,p=0;return!1!==C(o,function(_,x,b,M,m){if(void 0===h||l>w||M>y||m>p)return h=_,w=l,y=M,p=m,void(d=0);var D=I.lineString([h,_],o.properties);if(!1===a(D,l,u,m,d))return!1;d++,h=_})&&void 0}}})}function i(s,a){if(!s)throw new Error("geojson is required");v(s,function(o,l,u){if(null!==o.geometry){var g=o.geometry.coordinates;switch(o.geometry.type){case"LineString":if(!1===a(o,l,u,0,0))return!1;break;case"Polygon":for(var h=0;h<g.length;h++)if(!1===a(I.lineString(g[h],o.properties),l,u,h))return!1}}})}U.coordEach=C,U.coordReduce=function(s,a,o,l){var u=o;return C(s,function(d,g,h,w,y){u=0===g&&void 0===o?d:a(u,d,g,h,w,y)},l),u},U.propEach=f,U.propReduce=function(s,a,o){var l=o;return f(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.featureEach=k,U.featureReduce=function(s,a,o){var l=o;return k(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.coordAll=function(s){var a=[];return C(s,function(o){a.push(o)}),a},U.geomEach=T,U.geomReduce=function(s,a,o){var l=o;return T(s,function(u,d,g,h,w){l=0===d&&void 0===o?u:a(l,u,d,g,h,w)}),l},U.flattenEach=v,U.flattenReduce=function(s,a,o){var l=o;return v(s,function(u,d,g){l=0===d&&0===g&&void 0===o?u:a(l,u,d,g)}),l},U.segmentEach=c,U.segmentReduce=function(s,a,o){var l=o,u=!1;return c(s,function(d,g,h,w,y){l=!1===u&&void 0===o?d:a(l,d,g,h,w,y),u=!0}),l},U.lineEach=i,U.lineReduce=function(s,a,o){var l=o;return i(s,function(u,d,g,h){l=0===d&&void 0===o?u:a(l,u,d,g,h)}),l},U.findSegment=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.segmentIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=w.length+g-1),I.lineString([w[g],w[g+1]],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g-1),I.lineString([w[d][g],w[d][g+1]],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g-1),I.lineString([w[u][g],w[u][g+1]],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g-1),I.lineString([w[u][d][g],w[u][d][g+1]],h,a)}throw new Error("geojson is invalid")},U.findPoint=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.coordIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":return I.point(w,h,a);case"MultiPoint":return u<0&&(u=w.length+u),I.point(w[u],h,a);case"LineString":return g<0&&(g=w.length+g),I.point(w[g],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g),I.point(w[d][g],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g),I.point(w[u][g],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g),I.point(w[u][d][g],h,a)}throw new Error("geojson is invalid")}},29261:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(88553),C=r(64182);U.default=function(f,k){void 0===k&&(k={});var T=0,v=0,c=0;return I.coordEach(f,function(i){T+=i[0],v+=i[1],c++}),C.point([T/c,v/c],k.properties)}},64182:function(se,U){"use strict";function r(l,u,d){void 0===d&&(d={});var g={type:"Feature"};return(0===d.id||d.id)&&(g.id=d.id),d.bbox&&(g.bbox=d.bbox),g.properties=u||{},g.geometry=l,g}function I(l,u,d){return void 0===d&&(d={}),r({type:"Point",coordinates:l},u,d)}function C(l,u,d){void 0===d&&(d={});for(var g=0,h=l;g<h.length;g++){var w=h[g];if(w.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var y=0;y<w[w.length-1].length;y++)if(w[w.length-1][y]!==w[0][y])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:l},u,d)}function f(l,u,d){if(void 0===d&&(d={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:l},u,d)}function k(l,u){void 0===u&&(u={});var d={type:"FeatureCollection"};return u.id&&(d.id=u.id),u.bbox&&(d.bbox=u.bbox),d.features=l,d}function T(l,u,d){return void 0===d&&(d={}),r({type:"MultiLineString",coordinates:l},u,d)}function v(l,u,d){return void 0===d&&(d={}),r({type:"MultiPoint",coordinates:l},u,d)}function c(l,u,d){return void 0===d&&(d={}),r({type:"MultiPolygon",coordinates:l},u,d)}function i(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l*d}function s(l,u){void 0===u&&(u="kilometers");var d=U.factors[u];if(!d)throw new Error(u+" units is invalid");return l/d}function a(l){return l%(2*Math.PI)*180/Math.PI}function o(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=6371008.8,U.factors={centimeters:100*U.earthRadius,centimetres:100*U.earthRadius,degrees:U.earthRadius/111325,feet:3.28084*U.earthRadius,inches:39.37*U.earthRadius,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:1e3*U.earthRadius,millimetres:1e3*U.earthRadius,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius/1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:.91441111923921},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},U.feature=r,U.geometry=function(l,u,d){switch(void 0===d&&(d={}),l){case"Point":return I(u).geometry;case"LineString":return f(u).geometry;case"Polygon":return C(u).geometry;case"MultiPoint":return v(u).geometry;case"MultiLineString":return T(u).geometry;case"MultiPolygon":return c(u).geometry;default:throw new Error(l+" is invalid")}},U.point=I,U.points=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return I(g,u)}),d)},U.polygon=C,U.polygons=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return C(g,u)}),d)},U.lineString=f,U.lineStrings=function(l,u,d){return void 0===d&&(d={}),k(l.map(function(g){return f(g,u)}),d)},U.featureCollection=k,U.multiLineString=T,U.multiPoint=v,U.multiPolygon=c,U.geometryCollection=function(l,u,d){return void 0===d&&(d={}),r({type:"GeometryCollection",geometries:l},u,d)},U.round=function(l,u){if(void 0===u&&(u=0),u&&!(u>=0))throw new Error("precision must be a positive number");var d=Math.pow(10,u||0);return Math.round(l*d)/d},U.radiansToLength=i,U.lengthToRadians=s,U.lengthToDegrees=function(l,u){return a(s(l,u))},U.bearingToAzimuth=function(l){var u=l%360;return u<0&&(u+=360),u},U.radiansToDegrees=a,U.degreesToRadians=function(l){return l%360*Math.PI/180},U.convertLength=function(l,u,d){if(void 0===u&&(u="kilometers"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("length must be a positive number");return i(s(l,u),d)},U.convertArea=function(l,u,d){if(void 0===u&&(u="meters"),void 0===d&&(d="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=U.areaFactors[u];if(!g)throw new Error("invalid original units");var h=U.areaFactors[d];if(!h)throw new Error("invalid final units");return l/g*h},U.isNumber=o,U.isObject=function(l){return!!l&&l.constructor===Object},U.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(u){if(!o(u))throw new Error("bbox must only contain numbers")})},U.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")},U.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},U.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},U.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},U.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},U.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},U.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},U.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function(se,U,r){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var I=r(64182);function C(s,a,o){if(null!==s)for(var l,u,d,g,h,w,y,p,_=0,x=0,b=s.type,M="FeatureCollection"===b,m="Feature"===b,D=M?s.features.length:1,S=0;S<D;S++){h=(p=!!(y=M?s.features[S].geometry:m?s.geometry:s)&&"GeometryCollection"===y.type)?y.geometries.length:1;for(var O=0;O<h;O++){var P=0,R=0;if(null!==(g=p?y.geometries[O]:y)){w=g.coordinates;var F=g.type;switch(_=!o||"Polygon"!==F&&"MultiPolygon"!==F?0:1,F){case null:break;case"Point":if(!1===a(w,x,S,P,R))return!1;x++,P++;break;case"LineString":case"MultiPoint":for(l=0;l<w.length;l++){if(!1===a(w[l],x,S,P,R))return!1;x++,"MultiPoint"===F&&P++}"LineString"===F&&P++;break;case"Polygon":case"MultiLineString":for(l=0;l<w.length;l++){for(u=0;u<w[l].length-_;u++){if(!1===a(w[l][u],x,S,P,R))return!1;x++}"MultiLineString"===F&&P++,"Polygon"===F&&R++}"Polygon"===F&&P++;break;case"MultiPolygon":for(l=0;l<w.length;l++){for(R=0,u=0;u<w[l].length;u++){for(d=0;d<w[l][u].length-_;d++){if(!1===a(w[l][u][d],x,S,P,R))return!1;x++}R++}P++}break;case"GeometryCollection":for(l=0;l<g.geometries.length;l++)if(!1===C(g.geometries[l],a,o))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function f(s,a){var o;switch(s.type){case"FeatureCollection":for(o=0;o<s.features.length&&!1!==a(s.features[o].properties,o);o++);break;case"Feature":a(s.properties,0)}}function k(s,a){if("Feature"===s.type)a(s,0);else if("FeatureCollection"===s.type)for(var o=0;o<s.features.length&&!1!==a(s.features[o],o);o++);}function T(s,a){var o,l,u,d,g,h,w,y,p,_,x=0,b="FeatureCollection"===s.type,M="Feature"===s.type,m=b?s.features.length:1;for(o=0;o<m;o++){for(y=b?s.features[o].properties:M?s.properties:{},p=b?s.features[o].bbox:M?s.bbox:void 0,_=b?s.features[o].id:M?s.id:void 0,g=(w=!!(h=b?s.features[o].geometry:M?s.geometry:s)&&"GeometryCollection"===h.type)?h.geometries.length:1,u=0;u<g;u++)if(null!==(d=w?h.geometries[u]:h))switch(d.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===a(d,x,y,p,_))return!1;break;case"GeometryCollection":for(l=0;l<d.geometries.length;l++)if(!1===a(d.geometries[l],x,y,p,_))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===a(null,x,y,p,_))return!1;x++}}function v(s,a){T(s,function(o,l,u,d,g){var h,w=null===o?null:o.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return!1!==a(I.feature(o,u,{bbox:d,id:g}),l,0)&&void 0}switch(w){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon"}for(var y=0;y<o.coordinates.length;y++)if(!1===a(I.feature({type:h,coordinates:o.coordinates[y]},u),l,y))return!1})}function c(s,a){v(s,function(o,l,u){var d=0;if(o.geometry){var g=o.geometry.type;if("Point"!==g&&"MultiPoint"!==g){var h,w=0,y=0,p=0;return!1!==C(o,function(_,x,b,M,m){if(void 0===h||l>w||M>y||m>p)return h=_,w=l,y=M,p=m,void(d=0);var D=I.lineString([h,_],o.properties);if(!1===a(D,l,u,m,d))return!1;d++,h=_})&&void 0}}})}function i(s,a){if(!s)throw new Error("geojson is required");v(s,function(o,l,u){if(null!==o.geometry){var g=o.geometry.coordinates;switch(o.geometry.type){case"LineString":if(!1===a(o,l,u,0,0))return!1;break;case"Polygon":for(var h=0;h<g.length;h++)if(!1===a(I.lineString(g[h],o.properties),l,u,h))return!1}}})}U.coordEach=C,U.coordReduce=function(s,a,o,l){var u=o;return C(s,function(d,g,h,w,y){u=0===g&&void 0===o?d:a(u,d,g,h,w,y)},l),u},U.propEach=f,U.propReduce=function(s,a,o){var l=o;return f(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.featureEach=k,U.featureReduce=function(s,a,o){var l=o;return k(s,function(u,d){l=0===d&&void 0===o?u:a(l,u,d)}),l},U.coordAll=function(s){var a=[];return C(s,function(o){a.push(o)}),a},U.geomEach=T,U.geomReduce=function(s,a,o){var l=o;return T(s,function(u,d,g,h,w){l=0===d&&void 0===o?u:a(l,u,d,g,h,w)}),l},U.flattenEach=v,U.flattenReduce=function(s,a,o){var l=o;return v(s,function(u,d,g){l=0===d&&0===g&&void 0===o?u:a(l,u,d,g)}),l},U.segmentEach=c,U.segmentReduce=function(s,a,o){var l=o,u=!1;return c(s,function(d,g,h,w,y){l=!1===u&&void 0===o?d:a(l,d,g,h,w,y),u=!0}),l},U.lineEach=i,U.lineReduce=function(s,a,o){var l=o;return i(s,function(u,d,g,h){l=0===d&&void 0===o?u:a(l,u,d,g,h)}),l},U.findSegment=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.segmentIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return g<0&&(g=w.length+g-1),I.lineString([w[g],w[g+1]],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g-1),I.lineString([w[d][g],w[d][g+1]],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g-1),I.lineString([w[u][g],w[u][g+1]],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g-1),I.lineString([w[u][d][g],w[u][d][g+1]],h,a)}throw new Error("geojson is invalid")},U.findPoint=function(s,a){if(!I.isObject(a=a||{}))throw new Error("options is invalid");var o,l=a.featureIndex||0,u=a.multiFeatureIndex||0,d=a.geometryIndex||0,g=a.coordIndex||0,h=a.properties;switch(s.type){case"FeatureCollection":l<0&&(l=s.features.length+l),h=h||s.features[l].properties,o=s.features[l].geometry;break;case"Feature":h=h||s.properties,o=s.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=s;break;default:throw new Error("geojson is invalid")}if(null===o)return null;var w=o.coordinates;switch(o.type){case"Point":return I.point(w,h,a);case"MultiPoint":return u<0&&(u=w.length+u),I.point(w[u],h,a);case"LineString":return g<0&&(g=w.length+g),I.point(w[g],h,a);case"Polygon":return d<0&&(d=w.length+d),g<0&&(g=w[d].length+g),I.point(w[d][g],h,a);case"MultiLineString":return u<0&&(u=w.length+u),g<0&&(g=w[u].length+g),I.point(w[u][g],h,a);case"MultiPolygon":return u<0&&(u=w.length+u),d<0&&(d=w[u].length+d),g<0&&(g=w[u][d].length-g),I.point(w[u][d][g],h,a)}throw new Error("geojson is invalid")}},65185:function(se){se.exports=function(U){var r=0,I=0,C=0,f=0;return U.map(function(k){var T=(k=k.slice())[0],v=T.toUpperCase();if(T!=v)switch(k[0]=v,T){case"a":k[6]+=C,k[7]+=f;break;case"v":k[1]+=f;break;case"h":k[1]+=C;break;default:for(var c=1;c<k.length;)k[c++]+=C,k[c++]+=f}switch(v){case"Z":C=r,f=I;break;case"H":C=k[1];break;case"V":f=k[1];break;case"M":C=r=k[1],f=I=k[2];break;default:C=k[k.length-2],f=k[k.length-1]}return k})}},21527:function(se){"use strict";se.exports=function(U,r){if(!U||null==U.length)throw Error("Argument should be an array");r=null==r?1:Math.floor(r);for(var I=Array(2*r),C=0;C<r;C++){for(var f=-1/0,k=1/0,T=C,v=U.length;T<v;T+=r)U[T]>f&&(f=U[T]),U[T]<k&&(k=U[T]);I[C]=k,I[r+C]=f}return I}},6851:function(se){"use strict";se.exports=function(U,r,I){if("function"==typeof Array.prototype.findIndex)return U.findIndex(r,I);if("function"!=typeof r)throw new TypeError("predicate must be a function");var C=Object(U),f=C.length;if(0===f)return-1;for(var k=0;k<f;k++)if(r.call(I,C[k],k,C))return k;return-1}},54:function(se,U,r){"use strict";var I=r(21527);se.exports=function(C,f,k){if(!C||null==C.length)throw Error("Argument should be an array");null==f&&(f=1),null==k&&(k=I(C,f));for(var T=0;T<f;T++){var v=k[f+T],c=k[T],i=T,s=C.length;if(v===1/0&&c===-1/0)for(i=T;i<s;i+=f)C[i]=C[i]===v?1:C[i]===c?0:.5;else if(v===1/0)for(i=T;i<s;i+=f)C[i]=C[i]===v?1:0;else if(c===-1/0)for(i=T;i<s;i+=f)C[i]=C[i]===c?0:1;else{var a=v-c;for(i=T;i<s;i+=f)isNaN(C[i])||(C[i]=0===a?.5:(C[i]-c)/a)}}return C}},57471:function(se){se.exports=function(U,r){var I="number"==typeof U,C="number"==typeof r;I&&!C?(r=U,U=0):I||C||(U=0,r=0);var f=(r|=0)-(U|=0);if(f<0)throw new Error("array length must be positive");for(var k=new Array(f),T=0,v=U;T<f;T++,v++)k[T]=v;return k}},32791:function(se,U,r){"use strict";var I=r(90386);function C(z){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(z)}var f,k,T=r(79616).codes,v=T.ERR_AMBIGUOUS_ARGUMENT,c=T.ERR_INVALID_ARG_TYPE,i=T.ERR_INVALID_ARG_VALUE,s=T.ERR_INVALID_RETURN_VALUE,a=T.ERR_MISSING_ARGS,o=r(73894),l=r(43827).inspect,u=r(43827).types,d=u.isPromise,g=u.isRegExp,h=Object.assign?Object.assign:r(73523).assign,w=Object.is?Object.is:r(64003);function y(){var z=r(74061);f=z.isDeepEqual,k=z.isDeepStrictEqual}var p=!1,_=se.exports=m,x={};function b(z){throw z.message instanceof Error?z.message:new o(z)}function M(z,$,G,H){if(!G){var X=!1;if(0===$)X=!0,H="No value argument passed to `assert.ok()`";else if(H instanceof Error)throw H;var K=new o({actual:G,expected:!0,message:H,operator:"==",stackStartFn:z});throw K.generatedMessage=X,K}}function m(){for(var z=arguments.length,$=new Array(z),G=0;G<z;G++)$[G]=arguments[G];M.apply(void 0,[m,$.length].concat($))}_.fail=function z($,G,H,X,K){var ue,ae=arguments.length;if(0===ae?ue="Failed":1===ae?(H=$,$=void 0):(!1===p&&(p=!0,(I.emitWarning?I.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===ae&&(X="!=")),H instanceof Error)throw H;var ne={actual:$,expected:G,operator:void 0===X?"fail":X,stackStartFn:K||z};void 0!==H&&(ne.message=H);var Q=new o(ne);throw ue&&(Q.message=ue,Q.generatedMessage=!0),Q},_.AssertionError=o,_.ok=m,_.equal=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");$!=G&&b({actual:$,expected:G,message:H,operator:"==",stackStartFn:z})},_.notEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");$==G&&b({actual:$,expected:G,message:H,operator:"!=",stackStartFn:z})},_.deepEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");void 0===f&&y(),f($,G)||b({actual:$,expected:G,message:H,operator:"deepEqual",stackStartFn:z})},_.notDeepEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");void 0===f&&y(),f($,G)&&b({actual:$,expected:G,message:H,operator:"notDeepEqual",stackStartFn:z})},_.deepStrictEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");void 0===f&&y(),k($,G)||b({actual:$,expected:G,message:H,operator:"deepStrictEqual",stackStartFn:z})},_.notDeepStrictEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");void 0===f&&y(),k($,G)&&b({actual:$,expected:G,message:H,operator:"notDeepStrictEqual",stackStartFn:z})},_.strictEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");w($,G)||b({actual:$,expected:G,message:H,operator:"strictEqual",stackStartFn:z})},_.notStrictEqual=function z($,G,H){if(arguments.length<2)throw new a("actual","expected");w($,G)&&b({actual:$,expected:G,message:H,operator:"notStrictEqual",stackStartFn:z})};var D=function z($,G,H){var X=this;(function(K,ue){if(!(K instanceof ue))throw new TypeError("Cannot call a class as a function")})(this,z),G.forEach(function(K){K in $&&(X[K]=void 0!==H&&"string"==typeof H[K]&&g($[K])&&$[K].test(H[K])?H[K]:$[K])})};function S(z,$,G,H){if("function"!=typeof $){if(g($))return $.test(z);if(2===arguments.length)throw new c("expected",["Function","RegExp"],$);if("object"!==C(z)||null===z){var X=new o({actual:z,expected:$,message:G,operator:"deepStrictEqual",stackStartFn:H});throw X.operator=H.name,X}var K=Object.keys($);if($ instanceof Error)K.push("name","message");else if(0===K.length)throw new i("error",$,"may not be an empty object");return void 0===f&&y(),K.forEach(function(ue){"string"==typeof z[ue]&&g($[ue])&&$[ue].test(z[ue])||function(ae,ne,Q,ie,le,fe){if(!(Q in ae)||!k(ae[Q],ne[Q])){if(!ie){var he=new D(ae,le),pe=new D(ne,le,ae),xe=new o({actual:he,expected:pe,operator:"deepStrictEqual",stackStartFn:fe});throw xe.actual=ae,xe.expected=ne,xe.operator=fe.name,xe}b({actual:ae,expected:ne,message:ie,operator:fe.name,stackStartFn:fe})}}(z,$,ue,G,K,H)}),!0}return void 0!==$.prototype&&z instanceof $||!Error.isPrototypeOf($)&&!0===$.call({},z)}function O(z){if("function"!=typeof z)throw new c("fn","Function",z);try{z()}catch($){return $}return x}function P(z){return d(z)||null!==z&&"object"===C(z)&&"function"==typeof z.then&&"function"==typeof z.catch}function R(z){return Promise.resolve().then(function(){var $;if("function"==typeof z){if(!P($=z()))throw new s("instance of Promise","promiseFn",$)}else{if(!P(z))throw new c("promiseFn",["Function","Promise"],z);$=z}return Promise.resolve().then(function(){return $}).then(function(){return x}).catch(function(G){return G})})}function F(z,$,G,H){if("string"==typeof G){if(4===arguments.length)throw new c("error",["Object","Error","Function","RegExp"],G);if("object"===C($)&&null!==$){if($.message===G)throw new v("error/message",'The error message "'.concat($.message,'" is identical to the message.'))}else if($===G)throw new v("error/message",'The error "'.concat($,'" is identical to the message.'));H=G,G=void 0}else if(null!=G&&"object"!==C(G)&&"function"!=typeof G)throw new c("error",["Object","Error","Function","RegExp"],G);if($===x){var X="";G&&G.name&&(X+=" (".concat(G.name,")")),X+=H?": ".concat(H):".",b({actual:void 0,expected:G,operator:z.name,message:"Missing expected ".concat("rejects"===z.name?"rejection":"exception").concat(X),stackStartFn:z})}if(G&&!S($,G,H,z))throw $}function B(z,$,G,H){if($!==x){if("string"==typeof G&&(H=G,G=void 0),!G||S($,G)){var X=H?": ".concat(H):".";b({actual:$,expected:G,operator:z.name,message:"Got unwanted ".concat("doesNotReject"===z.name?"rejection":"exception").concat(X,"\n")+'Actual message: "'.concat($&&$.message,'"'),stackStartFn:z})}throw $}}function J(){for(var z=arguments.length,$=new Array(z),G=0;G<z;G++)$[G]=arguments[G];M.apply(void 0,[J,$.length].concat($))}_.throws=function z($){for(var G=arguments.length,H=new Array(G>1?G-1:0),X=1;X<G;X++)H[X-1]=arguments[X];F.apply(void 0,[z,O($)].concat(H))},_.rejects=function z($){for(var G=arguments.length,H=new Array(G>1?G-1:0),X=1;X<G;X++)H[X-1]=arguments[X];return R($).then(function(K){return F.apply(void 0,[z,K].concat(H))})},_.doesNotThrow=function z($){for(var G=arguments.length,H=new Array(G>1?G-1:0),X=1;X<G;X++)H[X-1]=arguments[X];B.apply(void 0,[z,O($)].concat(H))},_.doesNotReject=function z($){for(var G=arguments.length,H=new Array(G>1?G-1:0),X=1;X<G;X++)H[X-1]=arguments[X];return R($).then(function(K){return B.apply(void 0,[z,K].concat(H))})},_.ifError=function z($){if(null!=$){var G="ifError got unwanted exception: ";"object"===C($)&&"string"==typeof $.message?G+=0===$.message.length&&$.constructor?$.constructor.name:$.message:G+=l($);var H=new o({actual:$,expected:null,operator:"ifError",message:G,stackStartFn:z}),X=$.stack;if("string"==typeof X){var K=X.split("\n");K.shift();for(var ue=H.stack.split("\n"),ae=0;ae<K.length;ae++){var ne=ue.indexOf(K[ae]);if(-1!==ne){ue=ue.slice(0,ne);break}}H.stack="".concat(ue.join("\n"),"\n").concat(K.join("\n"))}throw H}},_.strict=h(J,_,{equal:_.strictEqual,deepEqual:_.deepStrictEqual,notEqual:_.notStrictEqual,notDeepEqual:_.notDeepStrictEqual}),_.strict.strict=_.strict},73894:function(se,U,r){"use strict";var I=r(90386);function C(b,M,m){return M in b?Object.defineProperty(b,M,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[M]=m,b}function k(b,M){return!M||"object"!==a(M)&&"function"!=typeof M?T(b):M}function T(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}function v(b){var M="function"==typeof Map?new Map:void 0;return v=function(m){if(null===m||-1===Function.toString.call(m).indexOf("[native code]"))return m;if("function"!=typeof m)throw new TypeError("Super expression must either be null or a function");if(void 0!==M){if(M.has(m))return M.get(m);M.set(m,S)}function S(){return c(m,arguments,s(this).constructor)}return S.prototype=Object.create(m.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),i(S,m)},v(b)}function c(b,M,m){return(c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(D,S,O){var P=[null];P.push.apply(P,S);var R=new(Function.bind.apply(D,P));return O&&i(R,O.prototype),R}).apply(null,arguments)}function i(b,M){return(i=Object.setPrototypeOf||function(m,D){return m.__proto__=D,m})(b,M)}function s(b){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(b)}function a(b){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(M){return typeof M}:function(M){return M&&"function"==typeof Symbol&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(b)}var o=r(43827).inspect,l=r(79616).codes.ERR_INVALID_ARG_TYPE;function u(b,M,m){return(void 0===m||m>b.length)&&(m=b.length),b.substring(m-M.length,m)===M}var d="",g="",h="",w="",y={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function p(b){var M=Object.keys(b),m=Object.create(Object.getPrototypeOf(b));return M.forEach(function(D){m[D]=b[D]}),Object.defineProperty(m,"message",{value:b.message}),m}function _(b){return o(b,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var x=function(b){function M(S){var O;if(function(ue,ae){if(!(ue instanceof ae))throw new TypeError("Cannot call a class as a function")}(this,M),"object"!==a(S)||null===S)throw new l("options","Object",S);var P=S.message,R=S.operator,F=S.stackStartFn,B=S.actual,J=S.expected,z=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=P)O=k(this,s(M).call(this,String(P)));else if(I.stderr&&I.stderr.isTTY&&(I.stderr&&I.stderr.getColorDepth&&1!==I.stderr.getColorDepth()?(d="\x1b[34m",g="\x1b[32m",w="\x1b[39m",h="\x1b[31m"):(d="",g="",w="",h="")),"object"===a(B)&&null!==B&&"object"===a(J)&&null!==J&&"stack"in B&&B instanceof Error&&"stack"in J&&J instanceof Error&&(B=p(B),J=p(J)),"deepStrictEqual"===R||"strictEqual"===R)O=k(this,s(M).call(this,function(ue,ae,ne){var Q="",ie="",le=0,fe="",he=!1,pe=_(ue),xe=pe.split("\n"),Ee=_(ae).split("\n"),Re=0,ke="";if("strictEqual"===ne&&"object"===a(ue)&&"object"===a(ae)&&null!==ue&&null!==ae&&(ne="strictEqualObject"),1===xe.length&&1===Ee.length&&xe[0]!==Ee[0]){var Te=xe[0].length+Ee[0].length;if(Te<=10){if(!("object"===a(ue)&&null!==ue||"object"===a(ae)&&null!==ae||0===ue&&0===ae))return"".concat(y[ne],"\n\n")+"".concat(xe[0]," !== ").concat(Ee[0],"\n")}else if("strictEqualObject"!==ne&&Te<(I.stderr&&I.stderr.isTTY?I.stderr.columns:80)){for(;xe[0][Re]===Ee[0][Re];)Re++;Re>2&&(ke="\n  ".concat(function(Ke,be){if(be=Math.floor(be),0==Ke.length||0==be)return"";var Oe=Ke.length*be;for(be=Math.floor(Math.log(be)/Math.log(2));be;)Ke+=Ke,be--;return Ke+Ke.substring(0,Oe-Ke.length)}(" ",Re),"^"),Re=0)}}for(var we=xe[xe.length-1],je=Ee[Ee.length-1];we===je&&(Re++<2?fe="\n  ".concat(we).concat(fe):Q=we,xe.pop(),Ee.pop(),0!==xe.length&&0!==Ee.length);)we=xe[xe.length-1],je=Ee[Ee.length-1];var Ce=Math.max(xe.length,Ee.length);if(0===Ce){var Ie=pe.split("\n");if(Ie.length>30)for(Ie[26]="".concat(d,"...").concat(w);Ie.length>27;)Ie.pop();return"".concat(y.notIdentical,"\n\n").concat(Ie.join("\n"),"\n")}Re>3&&(fe="\n".concat(d,"...").concat(w).concat(fe),he=!0),""!==Q&&(fe="\n  ".concat(Q).concat(fe),Q="");var ge=0,me=y[ne]+"\n".concat(g,"+ actual").concat(w," ").concat(h,"- expected").concat(w),ce=" ".concat(d,"...").concat(w," Lines skipped");for(Re=0;Re<Ce;Re++){var Ae=Re-le;if(xe.length<Re+1)Ae>1&&Re>2&&(Ae>4?(ie+="\n".concat(d,"...").concat(w),he=!0):Ae>3&&(ie+="\n  ".concat(Ee[Re-2]),ge++),ie+="\n  ".concat(Ee[Re-1]),ge++),le=Re,Q+="\n".concat(h,"-").concat(w," ").concat(Ee[Re]),ge++;else if(Ee.length<Re+1)Ae>1&&Re>2&&(Ae>4?(ie+="\n".concat(d,"...").concat(w),he=!0):Ae>3&&(ie+="\n  ".concat(xe[Re-2]),ge++),ie+="\n  ".concat(xe[Re-1]),ge++),le=Re,ie+="\n".concat(g,"+").concat(w," ").concat(xe[Re]),ge++;else{var Ne=Ee[Re],De=xe[Re],qe=De!==Ne&&(!u(De,",")||De.slice(0,-1)!==Ne);qe&&u(Ne,",")&&Ne.slice(0,-1)===De&&(qe=!1,De+=","),qe?(Ae>1&&Re>2&&(Ae>4?(ie+="\n".concat(d,"...").concat(w),he=!0):Ae>3&&(ie+="\n  ".concat(xe[Re-2]),ge++),ie+="\n  ".concat(xe[Re-1]),ge++),le=Re,ie+="\n".concat(g,"+").concat(w," ").concat(De),Q+="\n".concat(h,"-").concat(w," ").concat(Ne),ge+=2):(ie+=Q,Q="",1!==Ae&&0!==Re||(ie+="\n  ".concat(De),ge++))}if(ge>20&&Re<Ce-2)return"".concat(me).concat(ce,"\n").concat(ie,"\n").concat(d,"...").concat(w).concat(Q,"\n")+"".concat(d,"...").concat(w)}return"".concat(me).concat(he?ce:"","\n").concat(ie).concat(Q).concat(fe).concat(ke)}(B,J,R)));else if("notDeepStrictEqual"===R||"notStrictEqual"===R){var $=y[R],G=_(B).split("\n");if("notStrictEqual"===R&&"object"===a(B)&&null!==B&&($=y.notStrictEqualObject),G.length>30)for(G[26]="".concat(d,"...").concat(w);G.length>27;)G.pop();O=k(this,1===G.length?s(M).call(this,"".concat($," ").concat(G[0])):s(M).call(this,"".concat($,"\n\n").concat(G.join("\n"),"\n")))}else{var H=_(B),X="",K=y[R];"notDeepEqual"===R||"notEqual"===R?(H="".concat(y[R],"\n\n").concat(H)).length>1024&&(H="".concat(H.slice(0,1021),"...")):(X="".concat(_(J)),H.length>512&&(H="".concat(H.slice(0,509),"...")),X.length>512&&(X="".concat(X.slice(0,509),"...")),"deepEqual"===R||"equal"===R?H="".concat(K,"\n\n").concat(H,"\n\nshould equal\n\n"):X=" ".concat(R," ").concat(X)),O=k(this,s(M).call(this,"".concat(H).concat(X)))}return Error.stackTraceLimit=z,O.generatedMessage=!P,Object.defineProperty(T(O),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),O.code="ERR_ASSERTION",O.actual=B,O.expected=J,O.operator=R,Error.captureStackTrace&&Error.captureStackTrace(T(O),F),O.name="AssertionError",k(O)}var D;return function(S,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),O&&i(S,O)}(M,b),D=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:o.custom,value:function(S,O){return o(this,function(P){for(var R=1;R<arguments.length;R++){var F=null!=arguments[R]?arguments[R]:{},B=Object.keys(F);"function"==typeof Object.getOwnPropertySymbols&&(B=B.concat(Object.getOwnPropertySymbols(F).filter(function(J){return Object.getOwnPropertyDescriptor(F,J).enumerable}))),B.forEach(function(J){C(P,J,F[J])})}return P}({},O,{customInspect:!1,depth:0}))}}],D&&function f(b,M){for(var m=0;m<M.length;m++){var D=M[m];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(b,D.key,D)}}(M.prototype,D),M}(v(Error));se.exports=x},79616:function(se,U,r){"use strict";function I(s){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(s)}function C(s){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(s)}function f(s,a){return(f=Object.setPrototypeOf||function(o,l){return o.__proto__=l,o})(s,a)}var k,T,v={};function c(s,a,o){o||(o=Error);var l=function(u){function d(g,h,w){var y,p,_,x;return function(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}(this,d),(y=function(p,_){return!_||"object"!==I(_)&&"function"!=typeof _?function(x){if(void 0===x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}(p):_}(this,C(d).call(this,(p=g,_=h,x=w,"string"==typeof a?a:a(p,_,x))))).code=s,y}return function(g,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(h&&h.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),h&&f(g,h)}(d,u),d}(o);v[s]=l}function i(s,a){if(Array.isArray(s)){var o=s.length;return s=s.map(function(l){return String(l)}),o>2?"one of ".concat(a," ").concat(s.slice(0,o-1).join(", "),", or ")+s[o-1]:2===o?"one of ".concat(a," ").concat(s[0]," or ").concat(s[1]):"of ".concat(a," ").concat(s[0])}return"of ".concat(a," ").concat(String(s))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",function(s,a,o){var l,d,g,h,y,_;if(void 0===k&&(k=r(32791)),k("string"==typeof s,"'name' must be a string"),"string"==typeof a&&("not ","not "===a.substr(0,4))?(l="must not be",a=a.replace(/^not /,"")):l="must be",y=s," argument",(void 0===_||_>y.length)&&(_=y.length)," argument"===y.substring(_-9,_))d="The ".concat(s," ").concat(l," ").concat(i(a,"type"));else{var w=("number"!=typeof h&&(h=0),h+1>(g=s).length||-1===g.indexOf(".",h)?"argument":"property");d='The "'.concat(s,'" ').concat(w," ").concat(l," ").concat(i(a,"type"))}return d+". Received type ".concat(I(o))},TypeError),c("ERR_INVALID_ARG_VALUE",function(s,a){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===T&&(T=r(43827));var l=T.inspect(a);return l.length>128&&(l="".concat(l.slice(0,128),"...")),"The argument '".concat(s,"' ").concat(o,". Received ").concat(l)},TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",function(s,a,o){var l;return l=o&&o.constructor&&o.constructor.name?"instance of ".concat(o.constructor.name):"type ".concat(I(o)),"Expected ".concat(s,' to be returned from the "').concat(a,'"')+" function but got ".concat(l,".")},TypeError),c("ERR_MISSING_ARGS",function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];void 0===k&&(k=r(32791)),k(a.length>0,"At least one arg needs to be specified");var l="The ",u=a.length;switch(a=a.map(function(d){return'"'.concat(d,'"')}),u){case 1:l+="".concat(a[0]," argument");break;case 2:l+="".concat(a[0]," and ").concat(a[1]," arguments");break;default:l+=a.slice(0,u-1).join(", "),l+=", and ".concat(a[u-1]," arguments")}return"".concat(l," must be specified")},TypeError),se.exports.codes=v},74061:function(se,U,r){"use strict";function I(le,fe){return function(he){if(Array.isArray(he))return he}(le)||function(he,pe){var xe=[],Ee=!0,Re=!1,ke=void 0;try{for(var Te,we=he[Symbol.iterator]();!(Ee=(Te=we.next()).done)&&(xe.push(Te.value),!pe||xe.length!==pe);Ee=!0);}catch(je){Re=!0,ke=je}finally{try{Ee||null==we.return||we.return()}finally{if(Re)throw ke}}return xe}(le,fe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function C(le){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(le)}var f=void 0!==/a/g.flags,k=function(le){var fe=[];return le.forEach(function(he){return fe.push(he)}),fe},T=function(le){var fe=[];return le.forEach(function(he,pe){return fe.push([pe,he])}),fe},v=Object.is?Object.is:r(64003),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},i=Number.isNaN?Number.isNaN:r(15567);function s(le){return le.call.bind(le)}var a=s(Object.prototype.hasOwnProperty),o=s(Object.prototype.propertyIsEnumerable),l=s(Object.prototype.toString),u=r(43827).types,d=u.isAnyArrayBuffer,g=u.isArrayBufferView,h=u.isDate,w=u.isMap,y=u.isRegExp,p=u.isSet,_=u.isNativeError,x=u.isBoxedPrimitive,b=u.isNumberObject,M=u.isStringObject,m=u.isBooleanObject,D=u.isBigIntObject,S=u.isSymbolObject,O=u.isFloat32Array,P=u.isFloat64Array;function R(le){if(0===le.length||le.length>10)return!0;for(var fe=0;fe<le.length;fe++){var he=le.charCodeAt(fe);if(he<48||he>57)return!0}return 10===le.length&&le>=Math.pow(2,32)}function F(le){return Object.keys(le).filter(R).concat(c(le).filter(Object.prototype.propertyIsEnumerable.bind(le)))}function B(le,fe){if(le===fe)return 0;for(var he=le.length,pe=fe.length,xe=0,Ee=Math.min(he,pe);xe<Ee;++xe)if(le[xe]!==fe[xe]){he=le[xe],pe=fe[xe];break}return he<pe?-1:pe<he?1:0}var J=0,z=1,$=2,G=3;function H(le,fe,he,pe){if(le===fe)return 0!==le||!he||v(le,fe);if(he){if("object"!==C(le))return"number"==typeof le&&i(le)&&i(fe);if("object"!==C(fe)||null===le||null===fe||Object.getPrototypeOf(le)!==Object.getPrototypeOf(fe))return!1}else{if(null===le||"object"!==C(le))return(null===fe||"object"!==C(fe))&&le==fe;if(null===fe||"object"!==C(fe))return!1}var xe,Ee,Re,ke,ge,me,Te=l(le);if(Te!==l(fe))return!1;if(Array.isArray(le)){if(le.length!==fe.length)return!1;var we=F(le),je=F(fe);return we.length===je.length&&K(le,fe,he,pe,z,we)}if("[object Object]"===Te&&(!w(le)&&w(fe)||!p(le)&&p(fe)))return!1;if(h(le)){if(!h(fe)||Date.prototype.getTime.call(le)!==Date.prototype.getTime.call(fe))return!1}else if(y(le)){if(!y(fe)||(Re=le,ke=fe,!(f?Re.source===ke.source&&Re.flags===ke.flags:RegExp.prototype.toString.call(Re)===RegExp.prototype.toString.call(ke))))return!1}else if(_(le)||le instanceof Error){if(le.message!==fe.message||le.name!==fe.name)return!1}else{if(g(le)){if(he||!O(le)&&!P(le)){if((ge=le).byteLength!==(me=fe).byteLength||0!==B(new Uint8Array(ge.buffer,ge.byteOffset,ge.byteLength),new Uint8Array(me.buffer,me.byteOffset,me.byteLength)))return!1}else if(!function(ge,me){if(ge.byteLength!==me.byteLength)return!1;for(var ce=0;ce<ge.byteLength;ce++)if(ge[ce]!==me[ce])return!1;return!0}(le,fe))return!1;var Ce=F(le),Ie=F(fe);return Ce.length===Ie.length&&K(le,fe,he,pe,J,Ce)}if(p(le))return!(!p(fe)||le.size!==fe.size)&&K(le,fe,he,pe,$);if(w(le))return!(!w(fe)||le.size!==fe.size)&&K(le,fe,he,pe,G);if(d(le)){if((xe=le).byteLength!==(Ee=fe).byteLength||0!==B(new Uint8Array(xe),new Uint8Array(Ee)))return!1}else if(x(le)&&!function(ge,me){return b(ge)?b(me)&&v(Number.prototype.valueOf.call(ge),Number.prototype.valueOf.call(me)):M(ge)?M(me)&&String.prototype.valueOf.call(ge)===String.prototype.valueOf.call(me):m(ge)?m(me)&&Boolean.prototype.valueOf.call(ge)===Boolean.prototype.valueOf.call(me):D(ge)?D(me)&&BigInt.prototype.valueOf.call(ge)===BigInt.prototype.valueOf.call(me):S(me)&&Symbol.prototype.valueOf.call(ge)===Symbol.prototype.valueOf.call(me)}(le,fe))return!1}return K(le,fe,he,pe,J)}function X(le,fe){return fe.filter(function(he){return o(le,he)})}function K(le,fe,he,pe,xe,Ee){if(5===arguments.length){Ee=Object.keys(le);var Re=Object.keys(fe);if(Ee.length!==Re.length)return!1}for(var ke=0;ke<Ee.length;ke++)if(!a(fe,Ee[ke]))return!1;if(he&&5===arguments.length){var Te=c(le);if(0!==Te.length){var we=0;for(ke=0;ke<Te.length;ke++){var je=Te[ke];if(o(le,je)){if(!o(fe,je))return!1;Ee.push(je),we++}else if(o(fe,je))return!1}var Ce=c(fe);if(Te.length!==Ce.length&&X(fe,Ce).length!==we)return!1}else{var Ie=c(fe);if(0!==Ie.length&&0!==X(fe,Ie).length)return!1}}if(0===Ee.length&&(xe===J||xe===z&&0===le.length||0===le.size))return!0;if(void 0===pe)pe={val1:new Map,val2:new Map,position:0};else{var ge=pe.val1.get(le);if(void 0!==ge){var me=pe.val2.get(fe);if(void 0!==me)return ge===me}pe.position++}pe.val1.set(le,pe.position),pe.val2.set(fe,pe.position);var ce=function(Ae,Ne,De,qe,Ke,be){var Oe=0;if(be===$){if(!function(We,et,nt,ct){for(var yt=null,ut=k(We),Ct=0;Ct<ut.length;Ct++){var Dt=ut[Ct];if("object"===C(Dt)&&null!==Dt)null===yt&&(yt=new Set),yt.add(Dt);else if(!et.has(Dt)){if(nt||!ne(We,et,Dt))return!1;null===yt&&(yt=new Set),yt.add(Dt)}}if(null!==yt){for(var vt=k(et),mt=0;mt<vt.length;mt++){var Lt=vt[mt];if("object"===C(Lt)&&null!==Lt){if(!ue(yt,Lt,nt,ct))return!1}else if(!nt&&!We.has(Lt)&&!ue(yt,Lt,nt,ct))return!1}return 0===yt.size}return!0}(Ae,Ne,De,Ke))return!1}else if(be===G){if(!function(We,et,nt,ct){for(var yt=null,ut=T(We),Ct=0;Ct<ut.length;Ct++){var Dt=I(ut[Ct],2),vt=Dt[0],mt=Dt[1];if("object"===C(vt)&&null!==vt)null===yt&&(yt=new Set),yt.add(vt);else{var Lt=et.get(vt);if(void 0===Lt&&!et.has(vt)||!H(mt,Lt,nt,ct)){if(nt||!Q(We,et,vt,mt,ct))return!1;null===yt&&(yt=new Set),yt.add(vt)}}}if(null!==yt){for(var Ft=T(et),Rt=0;Rt<Ft.length;Rt++){var Wt=I(Ft[Rt],2),Ht=(vt=Wt[0],Wt[1]);if("object"===C(vt)&&null!==vt){if(!ie(yt,We,vt,Ht,nt,ct))return!1}else if(!(nt||We.has(vt)&&H(We.get(vt),Ht,!1,ct)||ie(yt,We,vt,Ht,!1,ct)))return!1}return 0===yt.size}return!0}(Ae,Ne,De,Ke))return!1}else if(be===z)for(;Oe<Ae.length;Oe++){if(!a(Ae,Oe)){if(a(Ne,Oe))return!1;for(var Le=Object.keys(Ae);Oe<Le.length;Oe++){var Ue=Le[Oe];if(!a(Ne,Ue)||!H(Ae[Ue],Ne[Ue],De,Ke))return!1}return Le.length===Object.keys(Ne).length}if(!a(Ne,Oe)||!H(Ae[Oe],Ne[Oe],De,Ke))return!1}for(Oe=0;Oe<qe.length;Oe++){var Ze=qe[Oe];if(!H(Ae[Ze],Ne[Ze],De,Ke))return!1}return!0}(le,fe,he,Ee,pe,xe);return pe.val1.delete(le),pe.val2.delete(fe),ce}function ue(le,fe,he,pe){for(var xe=k(le),Ee=0;Ee<xe.length;Ee++){var Re=xe[Ee];if(H(fe,Re,he,pe))return le.delete(Re),!0}return!1}function ae(le){switch(C(le)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":le=+le;case"number":if(i(le))return!1}return!0}function ne(le,fe,he){var pe=ae(he);return pe??(fe.has(pe)&&!le.has(pe))}function Q(le,fe,he,pe,xe){var Ee=ae(he);if(null!=Ee)return Ee;var Re=fe.get(Ee);return!(void 0===Re&&!fe.has(Ee)||!H(pe,Re,!1,xe))&&!le.has(Ee)&&H(pe,Re,!1,xe)}function ie(le,fe,he,pe,xe,Ee){for(var Re=k(le),ke=0;ke<Re.length;ke++){var Te=Re[ke];if(H(he,Te,xe,Ee)&&H(pe,fe.get(Te),xe,Ee))return le.delete(Te),!0}return!1}se.exports={isDeepEqual:function(le,fe){return H(le,fe,!1)},isDeepStrictEqual:function(le,fe){return H(le,fe,!0)}}},95341:function(se,U){"use strict";U.byteLength=function(c){var i=T(c),a=i[1];return 3*(i[0]+a)/4-a},U.toByteArray=function(c){var i,s,y,a=T(c),o=a[0],l=a[1],u=new C(3*(o+(y=l))/4-y),d=0,g=l>0?o-4:o;for(s=0;s<g;s+=4)i=I[c.charCodeAt(s)]<<18|I[c.charCodeAt(s+1)]<<12|I[c.charCodeAt(s+2)]<<6|I[c.charCodeAt(s+3)],u[d++]=i>>16&255,u[d++]=i>>8&255,u[d++]=255&i;return 2===l&&(i=I[c.charCodeAt(s)]<<2|I[c.charCodeAt(s+1)]>>4,u[d++]=255&i),1===l&&(i=I[c.charCodeAt(s)]<<10|I[c.charCodeAt(s+1)]<<4|I[c.charCodeAt(s+2)]>>2,u[d++]=i>>8&255,u[d++]=255&i),u},U.fromByteArray=function(c){for(var i,s=c.length,a=s%3,o=[],l=16383,u=0,d=s-a;u<d;u+=l)o.push(v(c,u,u+l>d?d:u+l));return 1===a?o.push(r[(i=c[s-1])>>2]+r[i<<4&63]+"=="):2===a&&o.push(r[(i=(c[s-2]<<8)+c[s-1])>>10]+r[i>>4&63]+r[i<<2&63]+"="),o.join("")};for(var r=[],I=[],C=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=0;k<64;++k)r[k]=f[k],I[f.charCodeAt(k)]=k;function T(c){var i=c.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=c.indexOf("=");return-1===s&&(s=i),[s,s===i?0:4-s%4]}function v(c,i,s){for(var o,l=[],u=i;u<s;u+=3)l.push(r[(o=(c[u]<<16&16711680)+(c[u+1]<<8&65280)+(255&c[u+2]))>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return l.join("")}I["-".charCodeAt(0)]=62,I["_".charCodeAt(0)]=63},91358:function(se){"use strict";function U(T,v,c,i,s){for(var a=s+1;i<=s;){var o=i+s>>>1,l=T[o];(void 0!==c?c(l,v):l-v)>=0?(a=o,s=o-1):i=o+1}return a}function r(T,v,c,i,s){for(var a=s+1;i<=s;){var o=i+s>>>1,l=T[o];(void 0!==c?c(l,v):l-v)>0?(a=o,s=o-1):i=o+1}return a}function I(T,v,c,i,s){for(var a=i-1;i<=s;){var o=i+s>>>1,l=T[o];(void 0!==c?c(l,v):l-v)<0?(a=o,i=o+1):s=o-1}return a}function C(T,v,c,i,s){for(var a=i-1;i<=s;){var o=i+s>>>1,l=T[o];(void 0!==c?c(l,v):l-v)<=0?(a=o,i=o+1):s=o-1}return a}function f(T,v,c,i,s){for(;i<=s;){var a=i+s>>>1,o=T[a],l=void 0!==c?c(o,v):o-v;if(0===l)return a;l<=0?i=a+1:s=a-1}return-1}function k(T,v,c,i,s,a){return"function"==typeof c?a(T,v,c,void 0===i?0:0|i,void 0===s?T.length-1:0|s):a(T,v,void 0,void 0===c?0:0|c,void 0===i?T.length-1:0|i)}se.exports={ge:function(T,v,c,i,s){return k(T,v,c,i,s,U)},gt:function(T,v,c,i,s){return k(T,v,c,i,s,r)},lt:function(T,v,c,i,s){return k(T,v,c,i,s,I)},le:function(T,v,c,i,s){return k(T,v,c,i,s,C)},eq:function(T,v,c,i,s){return k(T,v,c,i,s,f)}}},13547:function(se,U){"use strict";function r(C){var f=32;return(C&=-C)&&f--,65535&C&&(f-=16),16711935&C&&(f-=8),252645135&C&&(f-=4),858993459&C&&(f-=2),1431655765&C&&(f-=1),f}U.INT_BITS=32,U.INT_MAX=2147483647,U.INT_MIN=-2147483648,U.sign=function(C){return(C>0)-(C<0)},U.abs=function(C){var f=C>>31;return(C^f)-f},U.min=function(C,f){return f^(C^f)&-(C<f)},U.max=function(C,f){return C^(C^f)&-(C<f)},U.isPow2=function(C){return!(C&C-1||!C)},U.log2=function(C){var f,k;return f=(C>65535)<<4,f|=k=((C>>>=f)>255)<<3,f|=k=((C>>>=k)>15)<<2,(f|=k=((C>>>=k)>3)<<1)|(C>>>=k)>>1},U.log10=function(C){return C>=1e9?9:C>=1e8?8:C>=1e7?7:C>=1e6?6:C>=1e5?5:C>=1e4?4:C>=1e3?3:C>=100?2:C>=10?1:0},U.popCount=function(C){return 16843009*((C=(858993459&(C-=C>>>1&1431655765))+(C>>>2&858993459))+(C>>>4)&252645135)>>>24},U.countTrailingZeros=r,U.nextPow2=function(C){return C+=0===C,--C,C|=C>>>1,C|=C>>>2,C|=C>>>4,1+((C|=C>>>8)|C>>>16)},U.prevPow2=function(C){return C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,(C|=C>>>16)-(C>>>1)},U.parity=function(C){return C^=C>>>16,C^=C>>>8,C^=C>>>4,27030>>>(C&=15)&1};var I=new Array(256);(function(C){for(var f=0;f<256;++f){var k=f,T=f,v=7;for(k>>>=1;k;k>>>=1)T<<=1,T|=1&k,--v;C[f]=T<<v&255}})(I),U.reverse=function(C){return I[255&C]<<24|I[C>>>8&255]<<16|I[C>>>16&255]<<8|I[C>>>24&255]},U.interleave2=function(C,f){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C&=65535)|C<<8))|C<<4))|C<<2))|C<<1))|(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f&=65535)|f<<8))|f<<4))|f<<2))|f<<1))<<1},U.deinterleave2=function(C,f){return(C=65535&((C=16711935&((C=252645135&((C=858993459&((C=C>>>f&1431655765)|C>>>1))|C>>>2))|C>>>4))|C>>>16))<<16>>16},U.interleave3=function(C,f,k){return C=1227133513&((C=3272356035&((C=251719695&((C=4278190335&((C&=1023)|C<<16))|C<<8))|C<<4))|C<<2),(C|=(f=1227133513&((f=3272356035&((f=251719695&((f=4278190335&((f&=1023)|f<<16))|f<<8))|f<<4))|f<<2))<<1)|(k=1227133513&((k=3272356035&((k=251719695&((k=4278190335&((k&=1023)|k<<16))|k<<8))|k<<4))|k<<2))<<2},U.deinterleave3=function(C,f){return(C=1023&((C=4278190335&((C=251719695&((C=3272356035&((C=C>>>f&1227133513)|C>>>2))|C>>>4))|C>>>8))|C>>>16))<<22>>22},U.nextCombination=function(C){var f=C|C-1;return f+1|(~f&-~f)-1>>>r(C)+1}},44781:function(se,U,r){"use strict";var I=r(53435);se.exports=function(T,v){v||(v={});var c,i,s,a,o,l,d,h,w,y=null==v.cutoff?.25:v.cutoff,p=null==v.radius?8:v.radius,_=v.channel||0;if(ArrayBuffer.isView(T)||Array.isArray(T)){if(!v.width||!v.height)throw Error("For raw data width and height should be provided by options");c=v.width,i=v.height,a=T,l=v.stride?v.stride:Math.floor(T.length/c/i)}else window.HTMLCanvasElement&&T instanceof window.HTMLCanvasElement?(a=(d=T).getContext("2d").getImageData(0,0,c=d.width,i=d.height).data,l=4):window.CanvasRenderingContext2D&&T instanceof window.CanvasRenderingContext2D?(c=(d=T.canvas).width,a=T.getImageData(0,0,c,i=d.height).data,l=4):window.ImageData&&T instanceof window.ImageData&&(c=T.width,i=T.height,a=T.data,l=4);if(s=Math.max(c,i),window.Uint8ClampedArray&&a instanceof window.Uint8ClampedArray||window.Uint8Array&&a instanceof window.Uint8Array)for(o=a,a=Array(c*i),h=0,w=o.length;h<w;h++)a[h]=o[h*l+_]/255;else if(1!==l)throw Error("Raw data can have only 1 value per pixel");var x=Array(c*i),b=Array(c*i),M=Array(s),m=Array(s),D=Array(s+1),S=Array(s);for(h=0,w=c*i;h<w;h++){var O=a[h];x[h]=1===O?0:0===O?C:Math.pow(Math.max(0,.5-O),2),b[h]=1===O?C:0===O?0:Math.pow(Math.max(0,O-.5),2)}f(x,c,i,M,m,S,D),f(b,c,i,M,m,S,D);var P=window.Float32Array?new Float32Array(c*i):new Array(c*i);for(h=0,w=c*i;h<w;h++)P[h]=I(1-((x[h]-b[h])/p+y),0,1);return P};var C=1e20;function f(T,v,c,i,s,a,o){for(var l=0;l<v;l++){for(var u=0;u<c;u++)i[u]=T[u*v+l];for(k(i,s,a,o,c),u=0;u<c;u++)T[u*v+l]=s[u]}for(u=0;u<c;u++){for(l=0;l<v;l++)i[l]=T[u*v+l];for(k(i,s,a,o,v),l=0;l<v;l++)T[u*v+l]=Math.sqrt(s[l])}}function k(T,v,c,i,s){c[0]=0,i[0]=-C,i[1]=+C;for(var a=1,o=0;a<s;a++){for(var l=(T[a]+a*a-(T[c[o]]+c[o]*c[o]))/(2*a-2*c[o]);l<=i[o];)o--,l=(T[a]+a*a-(T[c[o]]+c[o]*c[o]))/(2*a-2*c[o]);c[++o]=a,i[o]=l,i[o+1]=+C}for(a=0,o=0;a<s;a++){for(;i[o+1]<a;)o++;v[a]=(a-c[o])*(a-c[o])+T[c[o]]}}},6614:function(se,U,r){"use strict";var I=r(68318),C=r(68222),f=C(I("String.prototype.indexOf"));se.exports=function(k,T){var v=I(k,!!T);return"function"==typeof v&&f(k,".prototype.")>-1?C(v):v}},68222:function(se,U,r){"use strict";var I=r(77575),C=r(68318),f=C("%Function.prototype.apply%"),k=C("%Function.prototype.call%"),T=C("%Reflect.apply%",!0)||I.call(k,f),v=C("%Object.getOwnPropertyDescriptor%",!0),c=C("%Object.defineProperty%",!0),i=C("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}se.exports=function(a){var o=T(I,k,arguments);return v&&c&&v(o,"length").configurable&&c(o,"length",{value:1+i(0,a.length-(arguments.length-1))}),o};var s=function(){return T(I,f,arguments)};c?c(se.exports,"apply",{value:s}):se.exports.apply=s},53435:function(se){se.exports=function(U,r,I){return r<I?U<r?r:U>I?I:U:U<I?I:U>r?r:U}},6475:function(se,U,r){"use strict";var I=r(53435);function C(f,k){null==k&&(k=!0);var T=f[0],v=f[1],c=f[2],i=f[3];return null==i&&(i=k?1:255),k&&(T*=255,v*=255,c*=255,i*=255),16777216*(T=255&I(T,0,255))+((v=255&I(v,0,255))<<16)+((c=255&I(c,0,255))<<8)+(255&I(i,0,255))}se.exports=C,se.exports.to=C,se.exports.from=function(f,k){var T=(f=+f)>>>24,v=(16711680&f)>>>16,c=(65280&f)>>>8,i=255&f;return!1===k?[T,v,c,i]:[T/255,v/255,c/255,i/255]}},76857:function(se){"use strict";se.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function(se,U,r){"use strict";var I=r(36652),C=r(53435),f=r(90660);se.exports=function(k,T){"float"!==T&&T||(T="array"),"uint"===T&&(T="uint8"),"uint_clamped"===T&&(T="uint8_clamped");var i,v=new(f(T))(4),c="uint8"!==T&&"uint8_clamped"!==T;return k.length&&"string"!=typeof k||((k=I(k))[0]/=255,k[1]/=255,k[2]/=255),(i=k)instanceof Uint8Array||i instanceof Uint8ClampedArray||Array.isArray(i)&&(i[0]>1||0===i[0])&&(i[1]>1||0===i[1])&&(i[2]>1||0===i[2])&&(!i[3]||i[3]>1)?(v[0]=k[0],v[1]=k[1],v[2]=k[2],v[3]=null!=k[3]?k[3]:255,c&&(v[0]/=255,v[1]/=255,v[2]/=255,v[3]/=255),v):(c?(v[0]=k[0],v[1]=k[1],v[2]=k[2],v[3]=null!=k[3]?k[3]:1):(v[0]=C(Math.floor(255*k[0]),0,255),v[1]=C(Math.floor(255*k[1]),0,255),v[2]=C(Math.floor(255*k[2]),0,255),v[3]=null==k[3]?255:C(Math.floor(255*k[3]),0,255)),v)}},90736:function(se,U,r){"use strict";var I=r(76857),C=r(10973),f=r(46775);se.exports=function(T){var v,c,i=[],s=1;if("string"==typeof T)if(I[T])i=I[T].slice(),c="rgb";else if("transparent"===T)s=0,c="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(T)){var a=T.slice(1);s=1,(u=a.length)<=4?(i=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===u&&(s=parseInt(a[3]+a[3],16)/255)):(i=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===u&&(s=parseInt(a[6]+a[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),c="rgb"}else if(v=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(T)){var o=v[1],l="rgb"===o;c=a=o.replace(/a$/,"");var u="cmyk"===a?4:"gray"===a?1:3;i=v[2].trim().split(/\s*,\s*/).map(function(g,h){if(/%$/.test(g))return h===u?parseFloat(g)/100:"rgb"===a?255*parseFloat(g)/100:parseFloat(g);if("h"===a[h]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==k[g])return k[g]}return parseFloat(g)}),o===a&&i.push(1),s=l||void 0===i[u]?1:i[u],i=i.slice(0,u)}else T.length>10&&/[0-9](?:\s|\/)/.test(T)&&(i=T.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),c=T.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(T))if(C(T)){var d=f(T.r,T.red,T.R,null);null!==d?(c="rgb",i=[d,f(T.g,T.green,T.G),f(T.b,T.blue,T.B)]):(c="hsl",i=[f(T.h,T.hue,T.H),f(T.s,T.saturation,T.S),f(T.l,T.lightness,T.L,T.b,T.brightness)]),s=f(T.a,T.alpha,T.opacity,1),null!=T.opacity&&(s/=100)}else(Array.isArray(T)||r.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(T))&&(i=[T[0],T[1],T[2]],c="rgb",s=4===T.length?T[3]:1);else c="rgb",i=[T>>>16,(65280&T)>>>8,255&T];return{space:c,values:i,alpha:s}};var k={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function(se,U,r){"use strict";var I=r(90736),C=r(80009),f=r(53435);se.exports=function(k){var T,v=I(k);return v.space?((T=Array(3))[0]=f(v.values[0],0,255),T[1]=f(v.values[1],0,255),T[2]=f(v.values[2],0,255),"h"===v.space[0]&&(T=C.rgb(T)),T.push(f(v.alpha,0,1)),T):[]}},80009:function(se,U,r){"use strict";var I=r(6866);se.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(C){var f,k,T,v,c,i=C[0]/360,s=C[1]/100,a=C[2]/100;if(0===s)return[c=255*a,c,c];f=2*a-(k=a<.5?a*(1+s):a+s-a*s),v=[0,0,0];for(var o=0;o<3;o++)(T=i+.3333333333333333*-(o-1))<0?T++:T>1&&T--,v[o]=255*(c=6*T<1?f+6*(k-f)*T:2*T<1?k:3*T<2?f+(k-f)*(.6666666666666666-T)*6:f);return v}},I.hsl=function(C){var f,k,T=C[0]/255,v=C[1]/255,c=C[2]/255,i=Math.min(T,v,c),s=Math.max(T,v,c),a=s-i;return s===i?f=0:T===s?f=(v-c)/a:v===s?f=2+(c-T)/a:c===s&&(f=4+(T-v)/a),(f=Math.min(60*f,360))<0&&(f+=360),k=(i+s)/2,[f,100*(s===i?0:k<=.5?a/(s+i):a/(2-s-i)),100*k]}},6866:function(se){"use strict";se.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function(se){se.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function(se,U,r){"use strict";se.exports={parse:r(41004),stringify:r(53313)}},63625:function(se,U,r){"use strict";var I=r(40402);se.exports={isSize:function(C){return/^[\d\.]/.test(C)||-1!==C.indexOf("/")||-1!==I.indexOf(C)}}},41004:function(se,U,r){"use strict";var I=r(90448),C=r(38732),f=r(41901),k=r(15659),T=r(96209),v=r(83794),c=r(99011),i=r(63625).isSize;se.exports=a;var s=a.cache={};function a(l){if("string"!=typeof l)throw new Error("Font argument must be a string.");if(s[l])return s[l];if(""===l)throw new Error("Cannot parse an empty string.");if(-1!==f.indexOf(l))return s[l]={system:l};for(var u,d={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=c(l,/\s+/);u=g.shift();){if(-1!==C.indexOf(u))return["style","variant","weight","stretch"].forEach(function(w){d[w]=u}),s[l]=d;if(-1===T.indexOf(u))if("normal"!==u&&"small-caps"!==u)if(-1===v.indexOf(u)){if(-1===k.indexOf(u)){if(i(u)){var h=c(u,"/");if(d.size=h[0],null!=h[1]?d.lineHeight=o(h[1]):"/"===g[0]&&(g.shift(),d.lineHeight=o(g.shift())),!g.length)throw new Error("Missing required font-family.");return d.family=c(g.join(" "),/\s*,\s*/).map(I),s[l]=d}throw new Error("Unknown or unsupported font token: "+u)}d.weight=u}else d.stretch=u;else d.variant=u;else d.style=u}throw new Error("Missing required font-size.")}function o(l){var u=parseFloat(l);return u.toString()===l?u:l}},53313:function(se,U,r){"use strict";var I=r(71299),C=r(63625).isSize,f=l(r(38732)),k=l(r(41901)),T=l(r(15659)),v=l(r(96209)),c=l(r(83794)),i={normal:1,"small-caps":1},s={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},a="serif";function o(u,d){if(u&&!d[u]&&!f[u])throw Error("Unknown keyword `"+u+"`");return u}function l(u){for(var d={},g=0;g<u.length;g++)d[u[g]]=1;return d}se.exports=function(u){if((u=I(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return u.system&&o(u.system,k),u.system;if(o(u.style,v),o(u.variant,i),o(u.weight,T),o(u.stretch,c),null==u.size&&(u.size="1rem"),"number"==typeof u.size&&(u.size+="px"),!C)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=a),Array.isArray(u.family)&&(u.family.length||(u.family=[a]),u.family=u.family.map(function(g){return s[g]?g:'"'+g+'"'}).join(", "));var d=[];return d.push(u.style),u.variant!==u.style&&d.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&d.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&d.push(u.stretch),d.push(u.size+(null==u.lineHeight||"normal"===u.lineHeight||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),d.push(u.family),d.filter(Boolean).join(" ")}},55174:function(se,U,r){"use strict";var I,C=r(24582),f=r(10424),k=r(82527),T=r(19012),v=r(21780),c=r(16906),i=Function.prototype.bind,s=Object.defineProperty,a=Object.prototype.hasOwnProperty;I=function(o,l,u){var d,g=f(l)&&k(l.value);return delete(d=T(l)).writable,delete d.value,d.get=function(){return!u.overwriteDefinition&&a.call(this,o)?g:(l.value=i.call(g,u.resolveContext?u.resolveContext(this):this),s(this,o,l),this[o])},d},se.exports=function(o){var l=v(arguments[1]);return C(l.resolveContext)&&k(l.resolveContext),c(o,function(u,d){return I(d,u,l)})}},62072:function(se,U,r){"use strict";var I=r(24582),C=r(84985),f=r(95879),k=r(21780),T=r(66741),v=se.exports=function(c,i){var s,a,o,l,u;return arguments.length<2||"string"!=typeof c?(l=i,i=c,c=null):l=arguments[2],I(c)?(s=T.call(c,"c"),a=T.call(c,"e"),o=T.call(c,"w")):(s=o=!0,a=!1),u={value:i,configurable:s,enumerable:a,writable:o},l?f(k(l),u):u};v.gs=function(c,i,s){var a,o,l,u;return"string"!=typeof c?(l=s,s=i,i=c,c=null):l=arguments[3],I(i)?C(i)?I(s)?C(s)||(l=s,s=void 0):s=void 0:(l=i,i=s=void 0):i=void 0,I(c)?(a=T.call(c,"c"),o=T.call(c,"e")):(a=!0,o=!1),u={get:i,set:s,configurable:a,enumerable:o},l?f(k(l),u):u}},33064:function(se,U,r){"use strict";function I(l,u){return l<u?-1:l>u?1:l>=u?0:NaN}var C,f;function T(l,u){var d,g,h=l.length,w=-1;if(null==u){for(;++w<h;)if(null!=(d=l[w])&&d>=d)for(g=d;++w<h;)null!=(d=l[w])&&d>g&&(g=d)}else for(;++w<h;)if(null!=(d=u(l[w],w,l))&&d>=d)for(g=d;++w<h;)null!=(d=u(l[w],w,l))&&d>g&&(g=d);return g}function v(l){return null===l?NaN:+l}function c(l,u){var d,g=l.length,h=g,w=-1,y=0;if(null==u)for(;++w<g;)isNaN(d=v(l[w]))?--h:y+=d;else for(;++w<g;)isNaN(d=v(u(l[w],w,l)))?--h:y+=d;if(h)return y/h}function i(l){for(var u,d,g,h=l.length,w=-1,y=0;++w<h;)y+=l[w].length;for(d=new Array(y);--h>=0;)for(u=(g=l[h]).length;--u>=0;)d[--y]=g[u];return d}function s(l,u){var d,g,h=l.length,w=-1;if(null==u){for(;++w<h;)if(null!=(d=l[w])&&d>=d)for(g=d;++w<h;)null!=(d=l[w])&&g>d&&(g=d)}else for(;++w<h;)if(null!=(d=u(l[w],w,l))&&d>=d)for(g=d;++w<h;)null!=(d=u(l[w],w,l))&&g>d&&(g=d);return g}function a(l,u,d){l=+l,u=+u,d=(h=arguments.length)<2?(u=l,l=0,1):h<3?1:+d;for(var g=-1,h=0|Math.max(0,Math.ceil((u-l)/d)),w=new Array(h);++g<h;)w[g]=l+g*d;return w}function o(l,u){var d,g=l.length,h=-1,w=0;if(null==u)for(;++h<g;)(d=+l[h])&&(w+=d);else for(;++h<g;)(d=+u(l[h],h,l))&&(w+=d);return w}r.d(U,{j2:function(){return I},Fp:function(){return T},J6:function(){return c},TS:function(){return i},VV:function(){return s},w6:function(){return a},Sm:function(){return o}}),1===(C=I).length&&(f=C,C=function(l,u){return I(f(l),u)}),Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},15140:function(se,U,r){"use strict";r.d(U,{UI:function(){return k},b1:function(){return T}});var I="$";function C(){}function f(l,u){var d=new C;if(l instanceof C)l.each(function(p,_){d.set(_,p)});else if(Array.isArray(l)){var g,h=-1,w=l.length;if(null==u)for(;++h<w;)d.set(h,l[h]);else for(;++h<w;)d.set(u(g=l[h],h,l),g)}else if(l)for(var y in l)d.set(y,l[y]);return d}C.prototype=f.prototype={constructor:C,has:function(l){return I+l in this},get:function(l){return this[I+l]},set:function(l,u){return this[I+l]=u,this},remove:function(l){var u=I+l;return u in this&&delete this[u]},clear:function(){for(var l in this)l[0]===I&&delete this[l]},keys:function(){var l=[];for(var u in this)u[0]===I&&l.push(u.slice(1));return l},values:function(){var l=[];for(var u in this)u[0]===I&&l.push(this[u]);return l},entries:function(){var l=[];for(var u in this)u[0]===I&&l.push({key:u.slice(1),value:this[u]});return l},size:function(){var l=0;for(var u in this)u[0]===I&&++l;return l},empty:function(){for(var l in this)if(l[0]===I)return!1;return!0},each:function(l){for(var u in this)u[0]===I&&l(this[u],u.slice(1),this)}};var k=f;function T(){var l,u,d,g=[],h=[];function w(p,_,x,b){if(_>=g.length)return null!=l&&p.sort(l),null!=u?u(p):p;for(var M,m,D,S=-1,O=p.length,P=g[_++],R=k(),F=x();++S<O;)(D=R.get(M=P(m=p[S])+""))?D.push(m):R.set(M,[m]);return R.each(function(B,J){b(F,J,w(B,_,x,b))}),F}function y(p,_){if(++_>g.length)return p;var x,b=h[_-1];return null!=u&&_>=g.length?x=p.entries():(x=[],p.each(function(M,m){x.push({key:m,values:y(M,_)})})),null!=b?x.sort(function(M,m){return b(M.key,m.key)}):x}return d={object:function(p){return w(p,0,v,c)},map:function(p){return w(p,0,i,s)},entries:function(p){return y(w(p,0,i,s),0)},key:function(p){return g.push(p),d},sortKeys:function(p){return h[g.length-1]=p,d},sortValues:function(p){return l=p,d},rollup:function(p){return u=p,d}}}function v(){return{}}function c(l,u,d){l[u]=d}function i(){return k()}function s(l,u,d){l.set(u,d)}function a(){}var o=k.prototype;a.prototype=function(l,u){var d=new a;if(l instanceof a)l.each(function(w){d.add(w)});else if(l){var g=-1,h=l.length;if(null==u)for(;++g<h;)d.add(l[g]);else for(;++g<h;)d.add(u(l[g],g,l))}return d}.prototype={constructor:a,has:o.has,add:function(l){return this[I+(l+="")]=l,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each}},49887:function(se,U,r){"use strict";function I(Te,we){var je;function Ce(){var Ie,ge,me=je.length,ce=0,Ae=0;for(Ie=0;Ie<me;++Ie)ce+=(ge=je[Ie]).x,Ae+=ge.y;for(ce=ce/me-Te,Ae=Ae/me-we,Ie=0;Ie<me;++Ie)(ge=je[Ie]).x-=ce,ge.y-=Ae}return null==Te&&(Te=0),null==we&&(we=0),Ce.initialize=function(Ie){je=Ie},Ce.x=function(Ie){return arguments.length?(Te=+Ie,Ce):Te},Ce.y=function(Ie){return arguments.length?(we=+Ie,Ce):we},Ce}function C(Te){return function(){return Te}}function f(){return 1e-6*(Math.random()-.5)}function k(Te,we,je,Ce){if(isNaN(we)||isNaN(je))return Te;var Ie,ge,me,ce,Ae,Ne,De,qe,Ke,be=Te._root,Oe={data:Ce},Le=Te._x0,Ue=Te._y0,Ze=Te._x1,We=Te._y1;if(!be)return Te._root=Oe,Te;for(;be.length;)if((Ne=we>=(ge=(Le+Ze)/2))?Le=ge:Ze=ge,(De=je>=(me=(Ue+We)/2))?Ue=me:We=me,Ie=be,!(be=be[qe=De<<1|Ne]))return Ie[qe]=Oe,Te;if(ce=+Te._x.call(null,be.data),Ae=+Te._y.call(null,be.data),we===ce&&je===Ae)return Oe.next=be,Ie?Ie[qe]=Oe:Te._root=Oe,Te;do{Ie=Ie?Ie[qe]=new Array(4):Te._root=new Array(4),(Ne=we>=(ge=(Le+Ze)/2))?Le=ge:Ze=ge,(De=je>=(me=(Ue+We)/2))?Ue=me:We=me}while((qe=De<<1|Ne)==(Ke=(Ae>=me)<<1|ce>=ge));return Ie[Ke]=be,Ie[qe]=Oe,Te}function T(Te,we,je,Ce,Ie){this.node=Te,this.x0=we,this.y0=je,this.x1=Ce,this.y1=Ie}function v(Te){return Te[0]}function c(Te){return Te[1]}function i(Te,we,je){var Ce=new s(we??v,je??c,NaN,NaN,NaN,NaN);return null==Te?Ce:Ce.addAll(Te)}function s(Te,we,je,Ce,Ie,ge){this._x=Te,this._y=we,this._x0=je,this._y0=Ce,this._x1=Ie,this._y1=ge,this._root=void 0}function a(Te){for(var we={data:Te.data},je=we;Te=Te.next;)je=je.next={data:Te.data};return we}r.r(U),r.d(U,{forceCenter:function(){return I},forceCollide:function(){return d},forceLink:function(){return y},forceManyBody:function(){return xe},forceRadial:function(){return Ee},forceSimulation:function(){return pe},forceX:function(){return Re},forceY:function(){return ke}});var o=i.prototype=s.prototype;function l(Te){return Te.x+Te.vx}function u(Te){return Te.y+Te.vy}function d(Te){var we,je,Ce=1,Ie=1;function ge(){for(var Ae,Ne,De,qe,Ke,be,Oe,Le=we.length,Ue=0;Ue<Ie;++Ue)for(Ne=i(we,l,u).visitAfter(me),Ae=0;Ae<Le;++Ae)Oe=(be=je[(De=we[Ae]).index])*be,qe=De.x+De.vx,Ke=De.y+De.vy,Ne.visit(Ze);function Ze(We,et,nt,ct,yt){var ut=We.data,Ct=We.r,Dt=be+Ct;if(!ut)return et>qe+Dt||ct<qe-Dt||nt>Ke+Dt||yt<Ke-Dt;if(ut.index>De.index){var vt=qe-ut.x-ut.vx,mt=Ke-ut.y-ut.vy,Lt=vt*vt+mt*mt;Lt<Dt*Dt&&(0===vt&&(Lt+=(vt=f())*vt),0===mt&&(Lt+=(mt=f())*mt),Lt=(Dt-(Lt=Math.sqrt(Lt)))/Lt*Ce,De.vx+=(vt*=Lt)*(Dt=(Ct*=Ct)/(Oe+Ct)),De.vy+=(mt*=Lt)*Dt,ut.vx-=vt*(Dt=1-Dt),ut.vy-=mt*Dt)}}}function me(Ae){if(Ae.data)return Ae.r=je[Ae.data.index];for(var Ne=Ae.r=0;Ne<4;++Ne)Ae[Ne]&&Ae[Ne].r>Ae.r&&(Ae.r=Ae[Ne].r)}function ce(){if(we){var Ae,Ne,De=we.length;for(je=new Array(De),Ae=0;Ae<De;++Ae)je[(Ne=we[Ae]).index]=+Te(Ne,Ae,we)}}return"function"!=typeof Te&&(Te=C(null==Te?1:+Te)),ge.initialize=function(Ae){we=Ae,ce()},ge.iterations=function(Ae){return arguments.length?(Ie=+Ae,ge):Ie},ge.strength=function(Ae){return arguments.length?(Ce=+Ae,ge):Ce},ge.radius=function(Ae){return arguments.length?(Te="function"==typeof Ae?Ae:C(+Ae),ce(),ge):Te},ge}o.copy=function(){var Te,we,je=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ce=this._root;if(!Ce)return je;if(!Ce.length)return je._root=a(Ce),je;for(Te=[{source:Ce,target:je._root=new Array(4)}];Ce=Te.pop();)for(var Ie=0;Ie<4;++Ie)(we=Ce.source[Ie])&&(we.length?Te.push({source:we,target:Ce.target[Ie]=new Array(4)}):Ce.target[Ie]=a(we));return je},o.add=function(Te){var we=+this._x.call(null,Te),je=+this._y.call(null,Te);return k(this.cover(we,je),we,je,Te)},o.addAll=function(Te){var we,je,Ce,Ie,ge=Te.length,me=new Array(ge),ce=new Array(ge),Ae=1/0,Ne=1/0,De=-1/0,qe=-1/0;for(je=0;je<ge;++je)isNaN(Ce=+this._x.call(null,we=Te[je]))||isNaN(Ie=+this._y.call(null,we))||(me[je]=Ce,ce[je]=Ie,Ce<Ae&&(Ae=Ce),Ce>De&&(De=Ce),Ie<Ne&&(Ne=Ie),Ie>qe&&(qe=Ie));if(Ae>De||Ne>qe)return this;for(this.cover(Ae,Ne).cover(De,qe),je=0;je<ge;++je)k(this,me[je],ce[je],Te[je]);return this},o.cover=function(Te,we){if(isNaN(Te=+Te)||isNaN(we=+we))return this;var je=this._x0,Ce=this._y0,Ie=this._x1,ge=this._y1;if(isNaN(je))Ie=(je=Math.floor(Te))+1,ge=(Ce=Math.floor(we))+1;else{for(var me,ce,Ae=Ie-je,Ne=this._root;je>Te||Te>=Ie||Ce>we||we>=ge;)switch(ce=(we<Ce)<<1|Te<je,(me=new Array(4))[ce]=Ne,Ne=me,Ae*=2,ce){case 0:Ie=je+Ae,ge=Ce+Ae;break;case 1:je=Ie-Ae,ge=Ce+Ae;break;case 2:Ie=je+Ae,Ce=ge-Ae;break;case 3:je=Ie-Ae,Ce=ge-Ae}this._root&&this._root.length&&(this._root=Ne)}return this._x0=je,this._y0=Ce,this._x1=Ie,this._y1=ge,this},o.data=function(){var Te=[];return this.visit(function(we){if(!we.length)do{Te.push(we.data)}while(we=we.next)}),Te},o.extent=function(Te){return arguments.length?this.cover(+Te[0][0],+Te[0][1]).cover(+Te[1][0],+Te[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},o.find=function(Te,we,je){var Ce,Ie,ge,me,ce,Ae,Ne,De=this._x0,qe=this._y0,Ke=this._x1,be=this._y1,Oe=[],Le=this._root;for(Le&&Oe.push(new T(Le,De,qe,Ke,be)),null==je?je=1/0:(De=Te-je,qe=we-je,Ke=Te+je,be=we+je,je*=je);Ae=Oe.pop();)if(!(!(Le=Ae.node)||(Ie=Ae.x0)>Ke||(ge=Ae.y0)>be||(me=Ae.x1)<De||(ce=Ae.y1)<qe))if(Le.length){var Ue=(Ie+me)/2,Ze=(ge+ce)/2;Oe.push(new T(Le[3],Ue,Ze,me,ce),new T(Le[2],Ie,Ze,Ue,ce),new T(Le[1],Ue,ge,me,Ze),new T(Le[0],Ie,ge,Ue,Ze)),(Ne=(we>=Ze)<<1|Te>=Ue)&&(Ae=Oe[Oe.length-1],Oe[Oe.length-1]=Oe[Oe.length-1-Ne],Oe[Oe.length-1-Ne]=Ae)}else{var We=Te-+this._x.call(null,Le.data),et=we-+this._y.call(null,Le.data),nt=We*We+et*et;if(nt<je){var ct=Math.sqrt(je=nt);De=Te-ct,qe=we-ct,Ke=Te+ct,be=we+ct,Ce=Le.data}}return Ce},o.remove=function(Te){if(isNaN(ge=+this._x.call(null,Te))||isNaN(me=+this._y.call(null,Te)))return this;var we,je,Ce,Ie,ge,me,ce,Ae,Ne,De,qe,Ke,be=this._root,Oe=this._x0,Le=this._y0,Ue=this._x1,Ze=this._y1;if(!be)return this;if(be.length)for(;;){if((Ne=ge>=(ce=(Oe+Ue)/2))?Oe=ce:Ue=ce,(De=me>=(Ae=(Le+Ze)/2))?Le=Ae:Ze=Ae,we=be,!(be=be[qe=De<<1|Ne]))return this;if(!be.length)break;(we[qe+1&3]||we[qe+2&3]||we[qe+3&3])&&(je=we,Ke=qe)}for(;be.data!==Te;)if(Ce=be,!(be=be.next))return this;return(Ie=be.next)&&delete be.next,Ce?(Ie?Ce.next=Ie:delete Ce.next,this):we?(Ie?we[qe]=Ie:delete we[qe],(be=we[0]||we[1]||we[2]||we[3])&&be===(we[3]||we[2]||we[1]||we[0])&&!be.length&&(je?je[Ke]=be:this._root=be),this):(this._root=Ie,this)},o.removeAll=function(Te){for(var we=0,je=Te.length;we<je;++we)this.remove(Te[we]);return this},o.root=function(){return this._root},o.size=function(){var Te=0;return this.visit(function(we){if(!we.length)do{++Te}while(we=we.next)}),Te},o.visit=function(Te){var we,je,Ce,Ie,ge,me,ce=[],Ae=this._root;for(Ae&&ce.push(new T(Ae,this._x0,this._y0,this._x1,this._y1));we=ce.pop();)if(!Te(Ae=we.node,Ce=we.x0,Ie=we.y0,ge=we.x1,me=we.y1)&&Ae.length){var Ne=(Ce+ge)/2,De=(Ie+me)/2;(je=Ae[3])&&ce.push(new T(je,Ne,De,ge,me)),(je=Ae[2])&&ce.push(new T(je,Ce,De,Ne,me)),(je=Ae[1])&&ce.push(new T(je,Ne,Ie,ge,De)),(je=Ae[0])&&ce.push(new T(je,Ce,Ie,Ne,De))}return this},o.visitAfter=function(Te){var we,je=[],Ce=[];for(this._root&&je.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));we=je.pop();){var Ie=we.node;if(Ie.length){var ge,me=we.x0,ce=we.y0,Ae=we.x1,Ne=we.y1,De=(me+Ae)/2,qe=(ce+Ne)/2;(ge=Ie[0])&&je.push(new T(ge,me,ce,De,qe)),(ge=Ie[1])&&je.push(new T(ge,De,ce,Ae,qe)),(ge=Ie[2])&&je.push(new T(ge,me,qe,De,Ne)),(ge=Ie[3])&&je.push(new T(ge,De,qe,Ae,Ne))}Ce.push(we)}for(;we=Ce.pop();)Te(we.node,we.x0,we.y0,we.x1,we.y1);return this},o.x=function(Te){return arguments.length?(this._x=Te,this):this._x},o.y=function(Te){return arguments.length?(this._y=Te,this):this._y};var g=r(15140);function h(Te){return Te.index}function w(Te,we){var je=Te.get(we);if(!je)throw new Error("missing: "+we);return je}function y(Te){var we,je,Ce,Ie,ge,me=h,ce=function(Oe){return 1/Math.min(Ie[Oe.source.index],Ie[Oe.target.index])},Ae=C(30),Ne=1;function De(Oe){for(var Le=0,Ue=Te.length;Le<Ne;++Le)for(var Ze,We,et,nt,ct,yt,ut,Ct=0;Ct<Ue;++Ct)We=(Ze=Te[Ct]).source,nt=(et=Ze.target).x+et.vx-We.x-We.vx||f(),ct=et.y+et.vy-We.y-We.vy||f(),nt*=yt=((yt=Math.sqrt(nt*nt+ct*ct))-je[Ct])/yt*Oe*we[Ct],ct*=yt,et.vx-=nt*(ut=ge[Ct]),et.vy-=ct*ut,We.vx+=nt*(ut=1-ut),We.vy+=ct*ut}function qe(){if(Ce){var Oe,Le,Ue=Ce.length,Ze=Te.length,We=(0,g.UI)(Ce,me);for(Oe=0,Ie=new Array(Ue);Oe<Ze;++Oe)(Le=Te[Oe]).index=Oe,"object"!=typeof Le.source&&(Le.source=w(We,Le.source)),"object"!=typeof Le.target&&(Le.target=w(We,Le.target)),Ie[Le.source.index]=(Ie[Le.source.index]||0)+1,Ie[Le.target.index]=(Ie[Le.target.index]||0)+1;for(Oe=0,ge=new Array(Ze);Oe<Ze;++Oe)ge[Oe]=Ie[(Le=Te[Oe]).source.index]/(Ie[Le.source.index]+Ie[Le.target.index]);we=new Array(Ze),Ke(),je=new Array(Ze),be()}}function Ke(){if(Ce)for(var Oe=0,Le=Te.length;Oe<Le;++Oe)we[Oe]=+ce(Te[Oe],Oe,Te)}function be(){if(Ce)for(var Oe=0,Le=Te.length;Oe<Le;++Oe)je[Oe]=+Ae(Te[Oe],Oe,Te)}return null==Te&&(Te=[]),De.initialize=function(Oe){Ce=Oe,qe()},De.links=function(Oe){return arguments.length?(Te=Oe,qe(),De):Te},De.id=function(Oe){return arguments.length?(me=Oe,De):me},De.iterations=function(Oe){return arguments.length?(Ne=+Oe,De):Ne},De.strength=function(Oe){return arguments.length?(ce="function"==typeof Oe?Oe:C(+Oe),Ke(),De):ce},De.distance=function(Oe){return arguments.length?(Ae="function"==typeof Oe?Oe:C(+Oe),be(),De):Ae},De}var p={value:function(){}};function _(){for(var Te,we=0,je=arguments.length,Ce={};we<je;++we){if(!(Te=arguments[we]+"")||Te in Ce||/[\s.]/.test(Te))throw new Error("illegal type: "+Te);Ce[Te]=[]}return new x(Ce)}function x(Te){this._=Te}function b(Te,we){for(var je,Ce=0,Ie=Te.length;Ce<Ie;++Ce)if((je=Te[Ce]).name===we)return je.value}function M(Te,we,je){for(var Ce=0,Ie=Te.length;Ce<Ie;++Ce)if(Te[Ce].name===we){Te[Ce]=p,Te=Te.slice(0,Ce).concat(Te.slice(Ce+1));break}return null!=je&&Te.push({name:we,value:je}),Te}x.prototype=_.prototype={constructor:x,on:function(Te,we){var je,Ce,Ie=this._,ge=(Ce=Ie,(Te+"").trim().split(/^|\s+/).map(function(Ae){var Ne="",De=Ae.indexOf(".");if(De>=0&&(Ne=Ae.slice(De+1),Ae=Ae.slice(0,De)),Ae&&!Ce.hasOwnProperty(Ae))throw new Error("unknown type: "+Ae);return{type:Ae,name:Ne}})),me=-1,ce=ge.length;if(!(arguments.length<2)){if(null!=we&&"function"!=typeof we)throw new Error("invalid callback: "+we);for(;++me<ce;)if(je=(Te=ge[me]).type)Ie[je]=M(Ie[je],Te.name,we);else if(null==we)for(je in Ie)Ie[je]=M(Ie[je],Te.name,null);return this}for(;++me<ce;)if((je=(Te=ge[me]).type)&&(je=b(Ie[je],Te.name)))return je},copy:function(){var Te={},we=this._;for(var je in we)Te[je]=we[je].slice();return new x(Te)},call:function(Te,we){if((je=arguments.length-2)>0)for(var je,Ce,Ie=new Array(je),ge=0;ge<je;++ge)Ie[ge]=arguments[ge+2];if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(ge=0,je=(Ce=this._[Te]).length;ge<je;++ge)Ce[ge].value.apply(we,Ie)},apply:function(Te,we,je){if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(var Ce=this._[Te],Ie=0,ge=Ce.length;Ie<ge;++Ie)Ce[Ie].value.apply(we,je)}};var m,D,S=_,O=0,P=0,R=0,F=1e3,B=0,J=0,z=0,$="object"==typeof performance&&performance.now?performance:Date,G="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Te){setTimeout(Te,17)};function H(){return J||(G(X),J=$.now()+z)}function X(){J=0}function K(){this._call=this._time=this._next=null}function ue(Te,we,je){var Ce=new K;return Ce.restart(Te,we,je),Ce}function ae(){J=(B=$.now())+z,O=P=0;try{!function(){H(),++O;for(var Te,we=m;we;)(Te=J-we._time)>=0&&we._call.call(null,Te),we=we._next;--O}()}finally{O=0,function(){for(var Te,we,je=m,Ce=1/0;je;)je._call?(Ce>je._time&&(Ce=je._time),Te=je,je=je._next):(we=je._next,je._next=null,je=Te?Te._next=we:m=we);D=Te,Q(Ce)}(),J=0}}function ne(){var Te=$.now(),we=Te-B;we>F&&(z-=we,B=Te)}function Q(Te){O||(P&&(P=clearTimeout(P)),Te-J>24?(Te<1/0&&(P=setTimeout(ae,Te-$.now()-z)),R&&(R=clearInterval(R))):(R||(B=$.now(),R=setInterval(ne,F)),O=1,G(ae)))}function ie(Te){return Te.x}function le(Te){return Te.y}K.prototype=ue.prototype={constructor:K,restart:function(Te,we,je){if("function"!=typeof Te)throw new TypeError("callback is not a function");je=(null==je?H():+je)+(null==we?0:+we),this._next||D===this||(D?D._next=this:m=this,D=this),this._call=Te,this._time=je,Q()},stop:function(){this._call&&(this._call=null,this._time=1/0,Q())}};var fe=10,he=Math.PI*(3-Math.sqrt(5));function pe(Te){var we,je=1,Ce=.001,Ie=1-Math.pow(Ce,1/300),ge=0,me=.6,ce=(0,g.UI)(),Ae=ue(De),Ne=S("tick","end");function De(){qe(),Ne.call("tick",we),je<Ce&&(Ae.stop(),Ne.call("end",we))}function qe(Oe){var Le,Ue,Ze=Te.length;void 0===Oe&&(Oe=1);for(var We=0;We<Oe;++We)for(je+=(ge-je)*Ie,ce.each(function(et){et(je)}),Le=0;Le<Ze;++Le)null==(Ue=Te[Le]).fx?Ue.x+=Ue.vx*=me:(Ue.x=Ue.fx,Ue.vx=0),null==Ue.fy?Ue.y+=Ue.vy*=me:(Ue.y=Ue.fy,Ue.vy=0);return we}function Ke(){for(var Oe,Le=0,Ue=Te.length;Le<Ue;++Le){if((Oe=Te[Le]).index=Le,null!=Oe.fx&&(Oe.x=Oe.fx),null!=Oe.fy&&(Oe.y=Oe.fy),isNaN(Oe.x)||isNaN(Oe.y)){var Ze=fe*Math.sqrt(Le),We=Le*he;Oe.x=Ze*Math.cos(We),Oe.y=Ze*Math.sin(We)}(isNaN(Oe.vx)||isNaN(Oe.vy))&&(Oe.vx=Oe.vy=0)}}function be(Oe){return Oe.initialize&&Oe.initialize(Te),Oe}return null==Te&&(Te=[]),Ke(),we={tick:qe,restart:function(){return Ae.restart(De),we},stop:function(){return Ae.stop(),we},nodes:function(Oe){return arguments.length?(Te=Oe,Ke(),ce.each(be),we):Te},alpha:function(Oe){return arguments.length?(je=+Oe,we):je},alphaMin:function(Oe){return arguments.length?(Ce=+Oe,we):Ce},alphaDecay:function(Oe){return arguments.length?(Ie=+Oe,we):+Ie},alphaTarget:function(Oe){return arguments.length?(ge=+Oe,we):ge},velocityDecay:function(Oe){return arguments.length?(me=1-Oe,we):1-me},force:function(Oe,Le){return arguments.length>1?(null==Le?ce.remove(Oe):ce.set(Oe,be(Le)),we):ce.get(Oe)},find:function(Oe,Le,Ue){var Ze,We,et,nt,ct,yt=0,ut=Te.length;for(null==Ue?Ue=1/0:Ue*=Ue,yt=0;yt<ut;++yt)(et=(Ze=Oe-(nt=Te[yt]).x)*Ze+(We=Le-nt.y)*We)<Ue&&(ct=nt,Ue=et);return ct},on:function(Oe,Le){return arguments.length>1?(Ne.on(Oe,Le),we):Ne.on(Oe)}}}function xe(){var Te,we,je,Ce,Ie=C(-30),ge=1,me=1/0,ce=.81;function Ae(Ke){var be,Oe=Te.length,Le=i(Te,ie,le).visitAfter(De);for(je=Ke,be=0;be<Oe;++be)we=Te[be],Le.visit(qe)}function Ne(){if(Te){var Ke,be,Oe=Te.length;for(Ce=new Array(Oe),Ke=0;Ke<Oe;++Ke)Ce[(be=Te[Ke]).index]=+Ie(be,Ke,Te)}}function De(Ke){var be,Oe,Le,Ue,Ze,We=0,et=0;if(Ke.length){for(Le=Ue=Ze=0;Ze<4;++Ze)(be=Ke[Ze])&&(Oe=Math.abs(be.value))&&(We+=be.value,et+=Oe,Le+=Oe*be.x,Ue+=Oe*be.y);Ke.x=Le/et,Ke.y=Ue/et}else{(be=Ke).x=be.data.x,be.y=be.data.y;do{We+=Ce[be.data.index]}while(be=be.next)}Ke.value=We}function qe(Ke,be,Oe,Le){if(!Ke.value)return!0;var Ue=Ke.x-we.x,Ze=Ke.y-we.y,We=Le-be,et=Ue*Ue+Ze*Ze;if(We*We/ce<et)return et<me&&(0===Ue&&(et+=(Ue=f())*Ue),0===Ze&&(et+=(Ze=f())*Ze),et<ge&&(et=Math.sqrt(ge*et)),we.vx+=Ue*Ke.value*je/et,we.vy+=Ze*Ke.value*je/et),!0;if(!(Ke.length||et>=me)){(Ke.data!==we||Ke.next)&&(0===Ue&&(et+=(Ue=f())*Ue),0===Ze&&(et+=(Ze=f())*Ze),et<ge&&(et=Math.sqrt(ge*et)));do{Ke.data!==we&&(we.vx+=Ue*(We=Ce[Ke.data.index]*je/et),we.vy+=Ze*We)}while(Ke=Ke.next)}}return Ae.initialize=function(Ke){Te=Ke,Ne()},Ae.strength=function(Ke){return arguments.length?(Ie="function"==typeof Ke?Ke:C(+Ke),Ne(),Ae):Ie},Ae.distanceMin=function(Ke){return arguments.length?(ge=Ke*Ke,Ae):Math.sqrt(ge)},Ae.distanceMax=function(Ke){return arguments.length?(me=Ke*Ke,Ae):Math.sqrt(me)},Ae.theta=function(Ke){return arguments.length?(ce=Ke*Ke,Ae):Math.sqrt(ce)},Ae}function Ee(Te,we,je){var Ce,Ie,ge,me=C(.1);function ce(Ne){for(var De=0,qe=Ce.length;De<qe;++De){var Ke=Ce[De],be=Ke.x-we||1e-6,Oe=Ke.y-je||1e-6,Le=Math.sqrt(be*be+Oe*Oe),Ue=(ge[De]-Le)*Ie[De]*Ne/Le;Ke.vx+=be*Ue,Ke.vy+=Oe*Ue}}function Ae(){if(Ce){var Ne,De=Ce.length;for(Ie=new Array(De),ge=new Array(De),Ne=0;Ne<De;++Ne)ge[Ne]=+Te(Ce[Ne],Ne,Ce),Ie[Ne]=isNaN(ge[Ne])?0:+me(Ce[Ne],Ne,Ce)}}return"function"!=typeof Te&&(Te=C(+Te)),null==we&&(we=0),null==je&&(je=0),ce.initialize=function(Ne){Ce=Ne,Ae()},ce.strength=function(Ne){return arguments.length?(me="function"==typeof Ne?Ne:C(+Ne),Ae(),ce):me},ce.radius=function(Ne){return arguments.length?(Te="function"==typeof Ne?Ne:C(+Ne),Ae(),ce):Te},ce.x=function(Ne){return arguments.length?(we=+Ne,ce):we},ce.y=function(Ne){return arguments.length?(je=+Ne,ce):je},ce}function Re(Te){var we,je,Ce,Ie=C(.1);function ge(ce){for(var Ae,Ne=0,De=we.length;Ne<De;++Ne)(Ae=we[Ne]).vx+=(Ce[Ne]-Ae.x)*je[Ne]*ce}function me(){if(we){var ce,Ae=we.length;for(je=new Array(Ae),Ce=new Array(Ae),ce=0;ce<Ae;++ce)je[ce]=isNaN(Ce[ce]=+Te(we[ce],ce,we))?0:+Ie(we[ce],ce,we)}}return"function"!=typeof Te&&(Te=C(null==Te?0:+Te)),ge.initialize=function(ce){we=ce,me()},ge.strength=function(ce){return arguments.length?(Ie="function"==typeof ce?ce:C(+ce),me(),ge):Ie},ge.x=function(ce){return arguments.length?(Te="function"==typeof ce?ce:C(+ce),me(),ge):Te},ge}function ke(Te){var we,je,Ce,Ie=C(.1);function ge(ce){for(var Ae,Ne=0,De=we.length;Ne<De;++Ne)(Ae=we[Ne]).vy+=(Ce[Ne]-Ae.y)*je[Ne]*ce}function me(){if(we){var ce,Ae=we.length;for(je=new Array(Ae),Ce=new Array(Ae),ce=0;ce<Ae;++ce)je[ce]=isNaN(Ce[ce]=+Te(we[ce],ce,we))?0:+Ie(we[ce],ce,we)}}return"function"!=typeof Te&&(Te=C(null==Te?0:+Te)),ge.initialize=function(ce){we=ce,me()},ge.strength=function(ce){return arguments.length?(Ie="function"==typeof ce?ce:C(+ce),me(),ge):Ie},ge.y=function(ce){return arguments.length?(Te="function"==typeof ce?ce:C(+ce),me(),ge):Te},ge}},60721:function(se,U,r){"use strict";function I(d,g){if((h=(d=g?d.toExponential(g-1):d.toExponential()).indexOf("e"))<0)return null;var h,w=d.slice(0,h);return[w.length>1?w[0]+w.slice(2):w,+d.slice(h+1)]}r.d(U,{WU:function(){return a},FF:function(){return u}});var C,f=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function k(d){if(!(g=f.exec(d)))throw new Error("invalid format: "+d);var g;return new T({fill:g[1],align:g[2],sign:g[3],symbol:g[4],zero:g[5],width:g[6],comma:g[7],precision:g[8]&&g[8].slice(1),trim:g[9],type:g[10]})}function T(d){this.fill=void 0===d.fill?" ":d.fill+"",this.align=void 0===d.align?">":d.align+"",this.sign=void 0===d.sign?"-":d.sign+"",this.symbol=void 0===d.symbol?"":d.symbol+"",this.zero=!!d.zero,this.width=void 0===d.width?void 0:+d.width,this.comma=!!d.comma,this.precision=void 0===d.precision?void 0:+d.precision,this.trim=!!d.trim,this.type=void 0===d.type?"":d.type+""}function v(d,g){var h=I(d,g);if(!h)return d+"";var w=h[0],y=h[1];return y<0?"0."+new Array(-y).join("0")+w:w.length>y+1?w.slice(0,y+1)+"."+w.slice(y+1):w+new Array(y-w.length+2).join("0")}k.prototype=T.prototype,T.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var c={"%":function(d,g){return(100*d).toFixed(g)},b:function(d){return Math.round(d).toString(2)},c:function(d){return d+""},d:function(d){return Math.abs(d=Math.round(d))>=1e21?d.toLocaleString("en").replace(/,/g,""):d.toString(10)},e:function(d,g){return d.toExponential(g)},f:function(d,g){return d.toFixed(g)},g:function(d,g){return d.toPrecision(g)},o:function(d){return Math.round(d).toString(8)},p:function(d,g){return v(100*d,g)},r:v,s:function(d,g){var h=I(d,g);if(!h)return d+"";var w=h[0],y=h[1],p=y-(C=3*Math.max(-8,Math.min(8,Math.floor(y/3))))+1,_=w.length;return p===_?w:p>_?w+new Array(p-_+1).join("0"):p>0?w.slice(0,p)+"."+w.slice(p):"0."+new Array(1-p).join("0")+I(d,Math.max(0,g+p-1))[0]},X:function(d){return Math.round(d).toString(16).toUpperCase()},x:function(d){return Math.round(d).toString(16)}};function i(d){return d}var s,a,o=Array.prototype.map,l=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function u(d){var g,h,S,w=void 0===d.grouping||void 0===d.thousands?i:(g=o.call(d.grouping,Number),h=d.thousands+"",function(S,O){for(var P=S.length,R=[],F=0,B=g[0],J=0;P>0&&B>0&&(J+B+1>O&&(B=Math.max(1,O-J)),R.push(S.substring(P-=B,P+B)),!((J+=B+1)>O));)B=g[F=(F+1)%g.length];return R.reverse().join(h)}),y=void 0===d.currency?"":d.currency[0]+"",p=void 0===d.currency?"":d.currency[1]+"",_=void 0===d.decimal?".":d.decimal+"",x=void 0===d.numerals?i:(S=o.call(d.numerals,String),function(O){return O.replace(/[0-9]/g,function(P){return S[+P]})}),b=void 0===d.percent?"%":d.percent+"",M=void 0===d.minus?"-":d.minus+"",m=void 0===d.nan?"NaN":d.nan+"";function D(S){var O=(S=k(S)).fill,P=S.align,R=S.sign,F=S.symbol,B=S.zero,J=S.width,z=S.comma,$=S.precision,G=S.trim,H=S.type;"n"===H?(z=!0,H="g"):c[H]||(void 0===$&&($=12),G=!0,H="g"),(B||"0"===O&&"="===P)&&(B=!0,O="0",P="=");var X="$"===F?y:"#"===F&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",K="$"===F?p:/[%p]/.test(H)?b:"",ue=c[H],ae=/[defgprs%]/.test(H);function ne(Q){var ie,le,fe,he=X,pe=K;if("c"===H)pe=ue(Q)+pe,Q="";else{var xe=(Q=+Q)<0||1/Q<0;if(Q=isNaN(Q)?m:ue(Math.abs(Q),$),G&&(Q=function(ke){e:for(var Te,we=ke.length,je=1,Ce=-1;je<we;++je)switch(ke[je]){case".":Ce=Te=je;break;case"0":0===Ce&&(Ce=je),Te=je;break;default:if(!+ke[je])break e;Ce>0&&(Ce=0)}return Ce>0?ke.slice(0,Ce)+ke.slice(Te+1):ke}(Q)),xe&&0==+Q&&"+"!==R&&(xe=!1),he=(xe?"("===R?R:M:"-"===R||"("===R?"":R)+he,pe=("s"===H?l[8+C/3]:"")+pe+(xe&&"("===R?")":""),ae)for(ie=-1,le=Q.length;++ie<le;)if(48>(fe=Q.charCodeAt(ie))||fe>57){pe=(46===fe?_+Q.slice(ie+1):Q.slice(ie))+pe,Q=Q.slice(0,ie);break}}z&&!B&&(Q=w(Q,1/0));var Ee=he.length+Q.length+pe.length,Re=Ee<J?new Array(J-Ee+1).join(O):"";switch(z&&B&&(Q=w(Re+Q,Re.length?J-pe.length:1/0),Re=""),P){case"<":Q=he+Q+pe+Re;break;case"=":Q=he+Re+Q+pe;break;case"^":Q=Re.slice(0,Ee=Re.length>>1)+he+Q+pe+Re.slice(Ee);break;default:Q=Re+he+Q+pe}return x(Q)}return $=void 0===$?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$)),ne.toString=function(){return S+""},ne}return{format:D,formatPrefix:function(S,O){var P,R=D(((S=k(S)).type="f",S)),F=3*Math.max(-8,Math.min(8,Math.floor((P=O,((P=I(Math.abs(P)))?P[1]:NaN)/3)))),B=Math.pow(10,-F),J=l[8+F/3];return function(z){return R(B*z)+J}}}}s=u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),a=s.format},65704:function(se,U,r){"use strict";r.r(U),r.d(U,{geoAiry:function(){return z},geoAiryRaw:function(){return J},geoAitoff:function(){return G},geoAitoffRaw:function(){return $},geoArmadillo:function(){return X},geoArmadilloRaw:function(){return H},geoAugust:function(){return ue},geoAugustRaw:function(){return K},geoBaker:function(){return ie},geoBakerRaw:function(){return Q},geoBerghaus:function(){return he},geoBerghausRaw:function(){return fe},geoBertin1953:function(){return je},geoBertin1953Raw:function(){return we},geoBoggs:function(){return De},geoBoggsRaw:function(){return Ne},geoBonne:function(){return Le},geoBonneRaw:function(){return Oe},geoBottomley:function(){return Ze},geoBottomleyRaw:function(){return Ue},geoBromley:function(){return et},geoBromleyRaw:function(){return We},geoChamberlin:function(){return Lt},geoChamberlinAfrica:function(){return mt},geoChamberlinRaw:function(){return Dt},geoCollignon:function(){return Rt},geoCollignonRaw:function(){return Ft},geoCraig:function(){return Ht},geoCraigRaw:function(){return Wt},geoCraster:function(){return Je},geoCrasterRaw:function(){return st},geoCylindricalEqualArea:function(){return pt},geoCylindricalEqualAreaRaw:function(){return ot},geoCylindricalStereographic:function(){return He},geoCylindricalStereographicRaw:function(){return xt},geoEckert1:function(){return dt},geoEckert1Raw:function(){return Ge},geoEckert2:function(){return kt},geoEckert2Raw:function(){return ht},geoEckert3:function(){return Et},geoEckert3Raw:function(){return St},geoEckert4:function(){return Nt},geoEckert4Raw:function(){return wt},geoEckert5:function(){return Mt},geoEckert5Raw:function(){return _t},geoEckert6:function(){return Zt},geoEckert6Raw:function(){return Pt},geoEisenlohr:function(){return dn},geoEisenlohrRaw:function(){return Xt},geoFahey:function(){return tn},geoFaheyRaw:function(){return cn},geoFoucaut:function(){return Fn},geoFoucautRaw:function(){return Cn},geoFoucautSinusoidal:function(){return rn},geoFoucautSinusoidalRaw:function(){return En},geoGilbert:function(){return _n},geoGingery:function(){return Xn},geoGingeryRaw:function(){return qn},geoGinzburg4:function(){return Er},geoGinzburg4Raw:function(){return fr},geoGinzburg5:function(){return mr},geoGinzburg5Raw:function(){return gr},geoGinzburg6:function(){return Jt},geoGinzburg6Raw:function(){return zr},geoGinzburg8:function(){return Sn},geoGinzburg8Raw:function(){return an},geoGinzburg9:function(){return Vn},geoGinzburg9Raw:function(){return Ln},geoGringorten:function(){return Qn},geoGringortenQuincuncial:function(){return ro},geoGringortenRaw:function(){return xn},geoGuyou:function(){return zt},geoGuyouRaw:function(){return zn},geoHammer:function(){return Re},geoHammerRaw:function(){return xe},geoHammerRetroazimuthal:function(){return Rn},geoHammerRetroazimuthalRaw:function(){return hn},geoHealpix:function(){return lr},geoHealpixRaw:function(){return Tn},geoHill:function(){return br},geoHillRaw:function(){return nr},geoHomolosine:function(){return rr},geoHomolosineRaw:function(){return Pr},geoHufnagel:function(){return ar},geoHufnagelRaw:function(){return Zr},geoHyperelliptical:function(){return vo},geoHyperellipticalRaw:function(){return Gi},geoInterrupt:function(){return Qi},geoInterruptedBoggs:function(){return Rs},geoInterruptedHomolosine:function(){return _s},geoInterruptedMollweide:function(){return Xo},geoInterruptedMollweideHemispheres:function(){return xc},geoInterruptedQuarticAuthalic:function(){return cu},geoInterruptedSinuMollweide:function(){return Wc},geoInterruptedSinusoidal:function(){return Vl},geoKavrayskiy7:function(){return Ro},geoKavrayskiy7Raw:function(){return ja},geoLagrange:function(){return Wi},geoLagrangeRaw:function(){return cl},geoLarrivee:function(){return Ns},geoLarriveeRaw:function(){return Ka},geoLaskowski:function(){return fl},geoLaskowskiRaw:function(){return Ea},geoLittrow:function(){return Xs},geoLittrowRaw:function(){return Ca},geoLoximuthal:function(){return Zu},geoLoximuthalRaw:function(){return Br},geoMiller:function(){return su},geoMillerRaw:function(){return Vr},geoModifiedStereographic:function(){return Ua},geoModifiedStereographicAlaska:function(){return Ia},geoModifiedStereographicGs48:function(){return oa},geoModifiedStereographicGs50:function(){return Ja},geoModifiedStereographicLee:function(){return Gl},geoModifiedStereographicMiller:function(){return Vi},geoModifiedStereographicRaw:function(){return lu},geoMollweide:function(){return me},geoMollweideRaw:function(){return ge},geoMtFlatPolarParabolic:function(){return Wl},geoMtFlatPolarParabolicRaw:function(){return ha},geoMtFlatPolarQuartic:function(){return no},geoMtFlatPolarQuarticRaw:function(){return Js},geoMtFlatPolarSinusoidal:function(){return Zl},geoMtFlatPolarSinusoidalRaw:function(){return Qa},geoNaturalEarth:function(){return es.Z},geoNaturalEarth2:function(){return _c},geoNaturalEarth2Raw:function(){return Ts},geoNaturalEarthRaw:function(){return es.K},geoNellHammer:function(){return wc},geoNellHammerRaw:function(){return uu},geoNicolosi:function(){return Ra},geoNicolosiRaw:function(){return Yl},geoPatterson:function(){return As},geoPattersonRaw:function(){return pl},geoPeirceQuincuncial:function(){return yl},geoPierceQuincuncial:function(){return yl},geoPolyconic:function(){return Ku},geoPolyconicRaw:function(){return Al},geoPolyhedral:function(){return Go},geoPolyhedralButterfly:function(){return Pu},geoPolyhedralCollignon:function(){return du},geoPolyhedralWaterman:function(){return yo},geoProject:function(){return ks},geoQuantize:function(){return ma},geoQuincuncial:function(){return la},geoRectangularPolyconic:function(){return Hr},geoRectangularPolyconicRaw:function(){return ho},geoRobinson:function(){return us},geoRobinsonRaw:function(){return ls},geoSatellite:function(){return Us},geoSatelliteRaw:function(){return js},geoSinuMollweide:function(){return Sr},geoSinuMollweideRaw:function(){return kr},geoSinusoidal:function(){return be},geoSinusoidalRaw:function(){return Ke},geoStitch:function(){return ea},geoTimes:function(){return Ju},geoTimesRaw:function(){return nl},geoTwoPointAzimuthal:function(){return rl},geoTwoPointAzimuthalRaw:function(){return oo},geoTwoPointAzimuthalUsa:function(){return fs},geoTwoPointEquidistant:function(){return Cl},geoTwoPointEquidistantRaw:function(){return Vs},geoTwoPointEquidistantUsa:function(){return Qu},geoVanDerGrinten:function(){return ta},geoVanDerGrinten2:function(){return Kr},geoVanDerGrinten2Raw:function(){return ga},geoVanDerGrinten3:function(){return hu},geoVanDerGrinten3Raw:function(){return ti},geoVanDerGrinten4:function(){return il},geoVanDerGrinten4Raw:function(){return va},geoVanDerGrintenRaw:function(){return Xl},geoWagner:function(){return pu},geoWagner4:function(){return Vo},geoWagner4Raw:function(){return ui},geoWagner6:function(){return Ga},geoWagner6Raw:function(){return Ss},geoWagner7:function(){return xa},geoWagnerRaw:function(){return ya},geoWiechel:function(){return Kl},geoWiechelRaw:function(){return Dl},geoWinkel3:function(){return al},geoWinkel3Raw:function(){return Jl}});var I=r(15002),C=Math.abs,f=Math.atan,k=Math.atan2,T=Math.cos,v=Math.exp,c=Math.floor,i=Math.log,s=Math.max,a=Math.min,o=Math.pow,l=Math.round,u=Math.sign||function(V){return V>0?1:V<0?-1:0},d=Math.sin,g=Math.tan,h=1e-6,w=1e-12,y=Math.PI,p=y/2,_=y/4,x=Math.SQRT1_2,b=R(2),M=R(y),m=2*y,D=180/y,S=y/180;function O(V){return V>1?p:V<-1?-p:Math.asin(V)}function P(V){return V>1?0:V<-1?y:Math.acos(V)}function R(V){return V>0?Math.sqrt(V):0}function F(V){return(v(V)-v(-V))/2}function B(V){return(v(V)+v(-V))/2}function J(V){var Y=g(V/2),W=2*i(T(V/2))/(Y*Y);function re(_e,Pe){var q=T(_e),oe=T(Pe),de=d(Pe),Me=oe*q,Se=-((1-Me?i((1+Me)/2)/(1-Me):-.5)+W/(1+Me));return[Se*oe*d(_e),Se*de]}return re.invert=function(_e,Pe){var q,oe=R(_e*_e+Pe*Pe),de=-V/2,Me=50;if(!oe)return[0,0];do{var Se=de/2,ze=T(Se),Ye=d(Se),Xe=Ye/ze,tt=-i(C(ze));de-=q=(2/Xe*tt-W*Xe-oe)/(-tt/(Ye*Ye)+1-W/(2*ze*ze))*(ze<0?.7:1)}while(C(q)>h&&--Me>0);var rt=d(de);return[k(_e*rt,oe*T(de)),O(Pe*rt/oe)]},re}function z(){var V=p,Y=(0,I.r)(J),W=Y(V);return W.radius=function(re){return arguments.length?Y(V=re*S):V*D},W.scale(179.976).clipAngle(147)}function $(V,Y){var _e,W=T(Y),re=(_e=P(W*T(V/=2)))?_e/Math.sin(_e):1;return[2*W*d(V)*re,d(Y)*re]}function G(){return(0,I.Z)($).scale(152.63)}function H(V){var Y=d(V),W=T(V),re=V>=0?1:-1,_e=g(re*V),Pe=(1+Y-W)/2;function q(oe,de){var Me=T(de),Se=T(oe/=2);return[(1+Me)*d(oe),(re*de>-k(Se,_e)-.001?0:10*-re)+Pe+d(de)*W-(1+Me)*Y*Se]}return q.invert=function(oe,de){var Me=0,Se=0,ze=50;do{var Ye=T(Me),Xe=d(Me),tt=T(Se),rt=d(Se),ft=1+tt,bt=ft*Xe-oe,At=Pe+rt*W-ft*Y*Ye-de,Ut=ft*Ye/2,qt=-Xe*rt,jt=Y*ft*Xe/2,Kt=W*tt+Y*Ye*rt,Vt=qt*jt-Kt*Ut,gn=(At*qt-bt*Kt)/Vt/2,ln=(bt*jt-At*Ut)/Vt;C(ln)>2&&(ln/=2),Me-=gn,Se-=ln}while((C(gn)>h||C(ln)>h)&&--ze>0);return re*Se>-k(T(Me),_e)-.001?[2*Me,Se]:null},q}function X(){var V=20*S,Y=V>=0?1:-1,W=g(Y*V),re=(0,I.r)(H),_e=re(V),Pe=_e.stream;return _e.parallel=function(q){return arguments.length?(W=g((Y=(V=q*S)>=0?1:-1)*V),re(V)):V*D},_e.stream=function(q){var oe=_e.rotate(),de=Pe(q),Me=(_e.rotate([0,0]),Pe(q)),Se=_e.precision();return _e.rotate(oe),de.sphere=function(){Me.polygonStart(),Me.lineStart();for(var ze=-180*Y;Y*ze<180;ze+=90*Y)Me.point(ze,90*Y);if(V)for(;Y*(ze-=3*Y*Se)>=-180;)Me.point(ze,Y*-k(T(ze*S/2),W)*D);Me.lineEnd(),Me.polygonEnd()},de},_e.scale(218.695).center([0,28.0974])}function K(V,Y){var W=g(Y/2),re=R(1-W*W),_e=1+re*T(V/=2),Pe=d(V)*re/_e,q=W/_e,oe=Pe*Pe,de=q*q;return[1.3333333333333333*Pe*(3+oe-3*de),1.3333333333333333*q*(3+3*oe-de)]}function ue(){return(0,I.Z)(K).scale(66.1603)}$.invert=function(V,Y){if(!(V*V+4*Y*Y>y*y+h)){var W=V,re=Y,_e=25;do{var Pe,q=d(W),oe=d(W/2),de=T(W/2),Me=d(re),Se=T(re),ze=d(2*re),Ye=Me*Me,Xe=Se*Se,tt=oe*oe,rt=1-Xe*de*de,ft=rt?P(Se*de)*R(Pe=1/rt):Pe=0,bt=2*ft*Se*oe-V,At=ft*Me-Y,Ut=Pe*(Xe*tt+ft*Se*de*Ye),qt=Pe*(.5*q*ze-2*ft*Me*oe),jt=.25*Pe*(ze*oe-ft*Me*Xe*q),Kt=Pe*(Ye*de+ft*tt*Se),Vt=qt*jt-Kt*Ut;if(!Vt)break;var gn=(At*qt-bt*Kt)/Vt,ln=(bt*jt-At*Ut)/Vt;W-=gn,re-=ln}while((C(gn)>h||C(ln)>h)&&--_e>0);return[W,re]}},K.invert=function(V,Y){if(Y*=.375,!(V*=.375)&&C(Y)>1)return null;var Me,W=1+V*V+Y*Y,re=R((W-R(W*W-4*Y*Y))/2),_e=O(re)/3,Pe=re?(Me=C(Y/re),i(Me+R(Me*Me-1))/3):function(Me){return i(Me+R(Me*Me+1))}(C(V))/3,q=T(_e),oe=B(Pe),de=oe*oe-q*q;return[2*u(V)*k(F(Pe)*q,.25-de),2*u(Y)*k(oe*d(_e),.25+de)]};var ae=R(8),ne=i(1+b);function Q(V,Y){var W=C(Y);return W<_?[V,i(g(_+Y/2))]:[V*T(W)*(2*b-1/d(W)),u(Y)*(2*b*(W-_)-i(g(W/2)))]}function ie(){return(0,I.Z)(Q).scale(112.314)}Q.invert=function(V,Y){if((re=C(Y))<ne)return[V,2*f(v(Y))-p];var W,re,_e=_,Pe=25;do{var q=T(_e/2),oe=g(_e/2);_e-=W=(ae*(_e-_)-i(oe)-re)/(ae-q*q/(2*oe))}while(C(W)>w&&--Pe>0);return[V/(T(_e)*(ae-1/d(_e))),u(Y)*_e]};var le=r(17889);function fe(V){var Y=2*y/V;function W(re,_e){var Pe=(0,le.N)(re,_e);if(C(re)>p){var q=k(Pe[1],Pe[0]),oe=R(Pe[0]*Pe[0]+Pe[1]*Pe[1]),de=Y*l((q-p)/Y)+p,Me=k(d(q-=de),2-T(q));q=de+O(y/oe*d(Me))-Me,Pe[0]=oe*T(q),Pe[1]=oe*d(q)}return Pe}return W.invert=function(re,_e){var Pe=R(re*re+_e*_e);if(Pe>p){var q=k(_e,re),oe=Y*l((q-p)/Y)+p,de=q>oe?-1:1,Me=Pe*T(oe-q),Se=1/g(de*P((Me-y)/R(y*(y-2*Me)+Pe*Pe)));q=oe+2*f((Se+de*R(Se*Se-3))/3),re=Pe*T(q),_e=Pe*d(q)}return le.N.invert(re,_e)},W}function he(){var V=5,Y=(0,I.r)(fe),W=Y(V),re=W.stream,_e=.01,Pe=-T(_e*S),q=d(_e*S);return W.lobes=function(oe){return arguments.length?Y(V=+oe):V},W.stream=function(oe){var de=W.rotate(),Me=re(oe),Se=(W.rotate([0,0]),re(oe));return W.rotate(de),Me.sphere=function(){Se.polygonStart(),Se.lineStart();for(var ze=0,Ye=360/V,Xe=2*y/V,tt=90-180/V,rt=p;ze<V;++ze,tt-=Ye,rt-=Xe)Se.point(k(q*T(rt),Pe)*D,O(q*d(rt))*D),tt<-90?(Se.point(-90,-180-tt-_e),Se.point(-90,-180-tt+_e)):(Se.point(90,tt+_e),Se.point(90,tt-_e));Se.lineEnd(),Se.polygonEnd()},Me},W.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var pe=r(12956);function xe(V,Y){if(arguments.length<2&&(Y=V),1===Y)return pe.l;if(Y===1/0)return Ee;function W(re,_e){var Pe=(0,pe.l)(re/Y,_e);return Pe[0]*=V,Pe}return W.invert=function(re,_e){var Pe=pe.l.invert(re/V,_e);return Pe[0]*=Y,Pe},W}function Ee(V,Y){return[V*T(Y)/T(Y/=2),2*d(Y)]}function Re(){var V=2,Y=(0,I.r)(xe),W=Y(V);return W.coefficient=function(re){return arguments.length?Y(V=+re):V},W.scale(169.529)}function ke(V,Y,W){var re,_e,Pe,q=100;W=void 0===W?0:+W,Y=+Y;do{(_e=V(W))===(Pe=V(W+h))&&(Pe=_e+h),W-=re=-1*h*(_e-Y)/(_e-Pe)}while(q-- >0&&C(re)>h);return q<0?NaN:W}function Te(V,Y,W){return void 0===Y&&(Y=40),void 0===W&&(W=w),function(re,_e,Pe,q){var oe,de,Me;Pe=void 0===Pe?0:+Pe,q=void 0===q?0:+q;for(var Se=0;Se<Y;Se++){var ze=V(Pe,q),Ye=ze[0]-re,Xe=ze[1]-_e;if(C(Ye)<W&&C(Xe)<W)break;var tt=Ye*Ye+Xe*Xe;if(tt>oe)Pe-=de/=2,q-=Me/=2;else{oe=tt;var rt=(Pe>0?-1:1)*W,ft=(q>0?-1:1)*W,bt=V(Pe+rt,q),At=V(Pe,q+ft),Ut=(bt[0]-ze[0])/rt,qt=(bt[1]-ze[1])/rt,jt=(At[0]-ze[0])/ft,Kt=(At[1]-ze[1])/ft,Vt=Kt*Ut-qt*jt,gn=(C(Vt)<.5?.5:1)/Vt;if(Pe+=de=(Xe*jt-Ye*Kt)*gn,q+=Me=(Ye*qt-Xe*Ut)*gn,C(de)<W&&C(Me)<W)break}}return[Pe,q]}}function we(){var V=xe(1.68,2);function Y(W,re){if(W+re<-1.4){var _e=(W-re+1.6)*(W+re+1.4)/8;W+=_e,re-=.8*_e*d(re+y/2)}var Pe=V(W,re),q=(1-T(W*re))/12;return Pe[1]<0&&(Pe[0]*=1+q),Pe[1]>0&&(Pe[1]*=1+q/1.5*Pe[0]*Pe[0]),Pe}return Y.invert=Te(Y),Y}function je(){return(0,I.Z)(we()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ce(V,Y){var W,re=V*d(Y),_e=30;do{Y-=W=(Y+d(Y)-re)/(1+T(Y))}while(C(W)>h&&--_e>0);return Y/2}function Ie(V,Y,W){function re(_e,Pe){return[V*_e*T(Pe=Ce(W,Pe)),Y*d(Pe)]}return re.invert=function(_e,Pe){return Pe=O(Pe/Y),[_e/(V*T(Pe)),O((2*Pe+d(2*Pe))/W)]},re}Ee.invert=function(V,Y){var W=2*O(Y/2);return[V*T(W/2)/T(W),W]};var ge=Ie(b/p,b,y);function me(){return(0,I.Z)(ge).scale(169.529)}var ce=2.00276,Ae=1.11072;function Ne(V,Y){var W=Ce(y,Y);return[ce*V/(1/T(Y)+Ae/T(W)),(Y+b*d(W))/ce]}function De(){return(0,I.Z)(Ne).scale(160.857)}function qe(V){var Y=0,W=(0,I.r)(V),re=W(Y);return re.parallel=function(_e){return arguments.length?W(Y=_e*S):Y*D},re}function Ke(V,Y){return[V*T(Y),Y]}function be(){return(0,I.Z)(Ke).scale(152.63)}function Oe(V){if(!V)return Ke;var Y=1/g(V);function W(re,_e){var Pe=Y+V-_e,q=Pe&&re*T(_e)/Pe;return[Pe*d(q),Y-Pe*T(q)]}return W.invert=function(re,_e){var Pe=R(re*re+(_e=Y-_e)*_e),q=Y+V-Pe;return[Pe/T(q)*k(re,_e),q]},W}function Le(){return qe(Oe).scale(123.082).center([0,26.1441]).parallel(45)}function Ue(V){function Y(W,re){var _e=p-re,Pe=_e&&W*V*d(_e)/_e;return[_e*d(Pe)/V,p-_e*T(Pe)]}return Y.invert=function(W,re){var _e=W*V,Pe=p-re,q=R(_e*_e+Pe*Pe),oe=k(_e,Pe);return[(q?q/d(q):1)*oe/V,p-q]},Y}function Ze(){var V=.5,Y=(0,I.r)(Ue),W=Y(V);return W.fraction=function(re){return arguments.length?Y(V=+re):V},W.scale(158.837)}Ne.invert=function(V,Y){var W,re,_e=ce*Y,Pe=Y<0?-_:_,q=25;do{re=_e-b*d(Pe),Pe-=W=(d(2*Pe)+2*Pe-y*d(re))/(2*T(2*Pe)+2+y*T(re)*b*T(Pe))}while(C(W)>h&&--q>0);return re=_e-b*d(Pe),[V*(1/T(re)+Ae/T(Pe))/ce,re]},Ke.invert=function(V,Y){return[V/T(Y),Y]};var We=Ie(1,4/y,y);function et(){return(0,I.Z)(We).scale(152.63)}var nt=r(66624),ct=r(49386);function yt(V,Y,W,re,_e,Pe){var q,oe=T(Pe);if(C(V)>1||C(Pe)>1)q=P(W*_e+Y*re*oe);else{var de=d(V/2),Me=d(Pe/2);q=2*O(R(de*de+Y*re*Me*Me))}return C(q)>h?[q,k(re*d(Pe),Y*_e-W*re*oe)]:[0,0]}function ut(V,Y,W){return P((V*V+Y*Y-W*W)/(2*V*Y))}function Ct(V){return V-2*y*c((V+y)/(2*y))}function Dt(V,Y,W){for(var re,_e=[[V[0],V[1],d(V[1]),T(V[1])],[Y[0],Y[1],d(Y[1]),T(Y[1])],[W[0],W[1],d(W[1]),T(W[1])]],Pe=_e[2],q=0;q<3;++q,Pe=re)Pe.v=yt((re=_e[q])[1]-Pe[1],Pe[3],Pe[2],re[3],re[2],re[0]-Pe[0]),Pe.point=[0,0];var oe=ut(_e[0].v[0],_e[2].v[0],_e[1].v[0]),de=ut(_e[0].v[0],_e[1].v[0],_e[2].v[0]),Me=y-oe;_e[2].point[1]=0,_e[0].point[0]=-(_e[1].point[0]=_e[0].v[0]/2);var Se=[_e[2].point[0]=_e[0].point[0]+_e[2].v[0]*T(oe),2*(_e[0].point[1]=_e[1].point[1]=_e[2].v[0]*d(oe))];return function(ze,Ye){var Xe,tt=d(Ye),rt=T(Ye),ft=new Array(3);for(Xe=0;Xe<3;++Xe){var bt=_e[Xe];if(ft[Xe]=yt(Ye-bt[1],bt[3],bt[2],rt,tt,ze-bt[0]),!ft[Xe][0])return bt.point;ft[Xe][1]=Ct(ft[Xe][1]-bt.v[1])}var At=Se.slice();for(Xe=0;Xe<3;++Xe){var qt=ut(_e[Xe].v[0],ft[Xe][0],ft[2==Xe?0:Xe+1][0]);ft[Xe][1]<0&&(qt=-qt),Xe?1==Xe?(At[0]-=ft[Xe][0]*T(qt=de-qt),At[1]-=ft[Xe][0]*d(qt)):(At[0]+=ft[Xe][0]*T(qt=Me-qt),At[1]+=ft[Xe][0]*d(qt)):(At[0]+=ft[Xe][0]*T(qt),At[1]-=ft[Xe][0]*d(qt))}return At[0]/=3,At[1]/=3,At}}function vt(V){return V[0]*=S,V[1]*=S,V}function mt(){return Lt([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Lt(V,Y,W){var re=(0,nt.Z)({type:"MultiPoint",coordinates:[V,Y,W]}),_e=[-re[0],-re[1]],Pe=(0,ct.Z)(_e),q=Dt(vt(Pe(V)),vt(Pe(Y)),vt(Pe(W)));q.invert=Te(q);var oe=(0,I.Z)(q).rotate(_e),de=oe.center;return delete oe.rotate,oe.center=function(Me){return arguments.length?de(Pe(Me)):Pe.invert(de())},oe.clipAngle(90)}function Ft(V,Y){var W=R(1-d(Y));return[2/M*V*W,M*(1-W)]}function Rt(){return(0,I.Z)(Ft).scale(95.6464).center([0,30])}function Wt(V){var Y=g(V);function W(re,_e){return[re,(re?re/d(re):1)*(d(_e)*T(re)-Y*T(_e))]}return W.invert=Y?function(re,_e){re&&(_e*=d(re)/re);var Pe=T(re);return[re,2*k(R(Pe*Pe+Y*Y-_e*_e)-Pe,Y-_e)]}:function(re,_e){return[re,O(re?_e*g(re)/re:_e)]},W}function Ht(){return qe(Wt).scale(249.828).clipAngle(90)}Ft.invert=function(V,Y){var W=(W=Y/M-1)*W;return[W>0?V*R(y/W)/2:0,O(1-W)]};var it=R(3);function st(V,Y){return[it*V*(2*T(2*Y/3)-1)/M,it*M*d(Y/3)]}function Je(){return(0,I.Z)(st).scale(156.19)}function ot(V){var Y=T(V);function W(re,_e){return[re*Y,d(_e)/Y]}return W.invert=function(re,_e){return[re/Y,O(_e*Y)]},W}function pt(){return qe(ot).parallel(38.58).scale(195.044)}function xt(V){var Y=T(V);function W(re,_e){return[re*Y,(1+Y)*g(_e/2)]}return W.invert=function(re,_e){return[re/Y,2*f(_e/(1+Y))]},W}function He(){return qe(xt).scale(124.75)}function Ge(V,Y){var W=R(8/(3*y));return[W*V*(1-C(Y)/y),W*Y]}function dt(){return(0,I.Z)(Ge).scale(165.664)}function ht(V,Y){var W=R(4-3*d(C(Y)));return[2/R(6*y)*V*W,u(Y)*R(2*y/3)*(2-W)]}function kt(){return(0,I.Z)(ht).scale(165.664)}function St(V,Y){var W=R(y*(4+y));return[2/W*V*(1+R(1-4*Y*Y/(y*y))),4/W*Y]}function Et(){return(0,I.Z)(St).scale(180.739)}function wt(V,Y){var W=(2+p)*d(Y);Y/=2;for(var re=0,_e=1/0;re<10&&C(_e)>h;re++){var Pe=T(Y);Y-=_e=(Y+d(Y)*(Pe+2)-W)/(2*Pe*(1+Pe))}return[2/R(y*(4+y))*V*(1+T(Y)),2*R(y/(4+y))*d(Y)]}function Nt(){return(0,I.Z)(wt).scale(180.739)}function _t(V,Y){return[V*(1+T(Y))/R(2+y),2*Y/R(2+y)]}function Mt(){return(0,I.Z)(_t).scale(173.044)}function Pt(V,Y){for(var W=(1+p)*d(Y),re=0,_e=1/0;re<10&&C(_e)>h;re++)Y-=_e=(Y+d(Y)-W)/(1+T(Y));return W=R(2+y),[V*(1+T(Y))/W,2*Y/W]}function Zt(){return(0,I.Z)(Pt).scale(173.044)}st.invert=function(V,Y){var W=3*O(Y/(it*M));return[M*V/(it*(2*T(2*W/3)-1)),W]},Ge.invert=function(V,Y){var W=R(8/(3*y)),re=Y/W;return[V/(W*(1-C(re)/y)),re]},ht.invert=function(V,Y){var W=2-C(Y)/R(2*y/3);return[V*R(6*y)/(2*W),u(Y)*O((4-W*W)/3)]},St.invert=function(V,Y){var W=R(y*(4+y))/2;return[V*W/(1+R(1-Y*Y*(4+y)/(4*y))),Y*W/2]},wt.invert=function(V,Y){var W=Y*R((4+y)/y)/2,re=O(W),_e=T(re);return[V/(2/R(y*(4+y))*(1+_e)),O((re+W*(_e+2))/(2+p))]},_t.invert=function(V,Y){var W=R(2+y),re=Y*W/2;return[W*V/(1+T(re)),re]},Pt.invert=function(V,Y){var W=1+p,re=R(W/2);return[2*V*re/(1+T(Y*=re)),O((Y+d(Y))/W)]};var $t=3+2*b;function Xt(V,Y){var W=d(V/=2),re=T(V),_e=R(T(Y)),Pe=T(Y/=2),q=d(Y)/(Pe+b*re*_e),oe=R(2/(1+q*q)),de=R((b*Pe+(re+W)*_e)/(b*Pe+(re-W)*_e));return[$t*(oe*(de-1/de)-2*i(de)),$t*(oe*q*(de+1/de)-2*f(q))]}function dn(){return(0,I.Z)(Xt).scale(62.5271)}Xt.invert=function(V,Y){if(!(W=K.invert(V/1.2,1.065*Y)))return null;var W,re=W[0],_e=W[1],Pe=20;V/=$t,Y/=$t;do{var q=re/2,oe=_e/2,de=d(q),Me=T(q),Se=d(oe),ze=T(oe),Ye=T(_e),Xe=R(Ye),tt=Se/(ze+b*Me*Xe),rt=tt*tt,ft=R(2/(1+rt)),bt=(b*ze+(Me+de)*Xe)/(b*ze+(Me-de)*Xe),At=R(bt),Ut=At-1/At,qt=At+1/At,jt=ft*Ut-2*i(At)-V,Kt=ft*tt*qt-2*f(tt)-Y,Vt=Se&&x*Xe*de*rt/Se,gn=(b*Me*ze+Xe)/(2*(ze+b*Me*Xe)*(ze+b*Me*Xe)*Xe),ln=-.5*tt*ft*ft*ft,nn=ln*Vt,On=ln*gn,Pn=(Pn=2*ze+b*Xe*(Me-de))*Pn*At,tr=(b*Me*ze*Xe+Ye)/Pn,Jn=-b*de*Se/(Xe*Pn),ur=Ut*nn-2*tr/At+ft*(tr+tr/bt),vr=Ut*On-2*Jn/At+ft*(Jn+Jn/bt),wr=tt*qt*nn-2*Vt/(1+rt)+ft*qt*Vt+ft*tt*(tr-tr/bt),Cr=tt*qt*On-2*gn/(1+rt)+ft*qt*gn+ft*tt*(Jn-Jn/bt),Or=vr*wr-Cr*ur;if(!Or)break;var Rr=(Kt*vr-jt*Cr)/Or,si=(jt*wr-Kt*ur)/Or;re-=Rr,_e=s(-p,a(p,_e-si))}while((C(Rr)>h||C(si)>h)&&--Pe>0);return C(C(_e)-p)<h?[0,_e]:Pe&&[re,_e]};var on=T(35*S);function cn(V,Y){var W=g(Y/2);return[V*on*R(1-W*W),(1+on)*W]}function tn(){return(0,I.Z)(cn).scale(137.152)}function Cn(V,Y){var W=Y/2,re=T(W);return[2*V/M*T(Y)*re*re,M*g(W)]}function Fn(){return(0,I.Z)(Cn).scale(135.264)}function En(V){var Y=1-V,W=_e(y,0)[0]-_e(-y,0)[0],re=R(2*(_e(0,p)[1]-_e(0,-p)[1])/W);function _e(oe,de){var Me=T(de),Se=d(de);return[Me/(Y+V*Me)*oe,Y*de+V*Se]}function Pe(oe,de){var Me=_e(oe,de);return[Me[0]*re,Me[1]/re]}function q(oe){return Pe(0,oe)[1]}return Pe.invert=function(oe,de){var Me=ke(q,de);return[oe/re*(V+Y/T(Me)),Me]},Pe}function rn(){var V=.5,Y=(0,I.r)(En),W=Y(V);return W.alpha=function(re){return arguments.length?Y(V=+re):V},W.scale(168.725)}cn.invert=function(V,Y){var W=Y/(1+on);return[V&&V/(on*R(1-W*W)),2*f(W)]},Cn.invert=function(V,Y){var W=f(Y/M),re=T(W),_e=2*W;return[V*M/2/(T(_e)*re*re),_e]};var yn=r(57962),pn=r(97492);function bn(V){return[V[0]/2,O(g(V[1]/2*S))*D]}function In(V){return[2*V[0],2*f(d(V[1]*S))*D]}function _n(V){null==V&&(V=yn.Z);var Y=V(),W=(0,pn.Z)().scale(D).precision(0).clipAngle(null).translate([0,0]);function re(Pe){return Y(bn(Pe))}function _e(Pe){re[Pe]=function(){return arguments.length?(Y[Pe].apply(Y,arguments),re):Y[Pe]()}}return Y.invert&&(re.invert=function(Pe){return In(Y.invert(Pe))}),re.stream=function(Pe){var q=Y.stream(Pe),oe=W.stream({point:function(de,Me){q.point(de/2,O(g(-Me/2*S))*D)},lineStart:function(){q.lineStart()},lineEnd:function(){q.lineEnd()},polygonStart:function(){q.polygonStart()},polygonEnd:function(){q.polygonEnd()}});return oe.sphere=q.sphere,oe},re.rotate=function(Pe){return arguments.length?(W.rotate(Pe),re):W.rotate()},re.center=function(Pe){return arguments.length?(Y.center(bn(Pe)),re):In(Y.center())},_e("angle"),_e("clipAngle"),_e("clipExtent"),_e("fitExtent"),_e("fitHeight"),_e("fitSize"),_e("fitWidth"),_e("scale"),_e("translate"),_e("precision"),re.scale(249.5)}function qn(V,Y){var W=2*y/Y,re=V*V;function _e(Pe,q){var oe=(0,le.N)(Pe,q),de=oe[0],Me=oe[1],Se=de*de+Me*Me;if(Se>re){var ze=R(Se),Ye=k(Me,de),Xe=W*l(Ye/W),tt=Ye-Xe,rt=V*T(tt),ft=(V*d(tt)-tt*d(rt))/(p-rt),bt=Wn(tt,ft),At=(y-V)/Nn(bt,rt,y);de=ze;var Ut,qt=50;do{de-=Ut=(V+Nn(bt,rt,de)*At-ze)/(bt(de)*At)}while(C(Ut)>h&&--qt>0);Me=tt*d(de),de<p&&(Me-=ft*(de-p));var jt=d(Xe),Kt=T(Xe);oe[0]=de*Kt-Me*jt,oe[1]=de*jt+Me*Kt}return oe}return _e.invert=function(Pe,q){var oe=Pe*Pe+q*q;if(oe>re){var de=R(oe),Me=k(q,Pe),Se=W*l(Me/W),ze=Me-Se;Pe=de*T(ze),q=de*d(ze);for(var Ye=Pe-p,Xe=d(Pe),tt=q/Xe,rt=Pe<p?1/0:0,ft=10;;){var bt=V*d(tt),At=V*T(tt),Ut=d(At),qt=p-At,jt=(bt-tt*Ut)/qt,Kt=Wn(tt,jt);if(C(rt)<w||!--ft)break;tt-=rt=(tt*Xe-jt*Ye-q)/(Xe-2*Ye*(qt*(At+tt*bt*T(At)-Ut)-bt*(bt-tt*Ut))/(qt*qt))}Pe=(de=V+Nn(Kt,At,Pe)*(y-V)/Nn(Kt,At,y))*T(Me=Se+tt),q=de*d(Me)}return le.N.invert(Pe,q)},_e}function Wn(V,Y){return function(W){var re=V*T(W);return W<p&&(re-=Y),R(1+re*re)}}function Nn(V,Y,W){for(var re=(W-Y)/50,_e=V(Y)+V(W),Pe=1,q=Y;Pe<50;++Pe)_e+=2*V(q+=re);return.5*_e*re}function Xn(){var V=6,Y=30*S,W=T(Y),re=d(Y),_e=(0,I.r)(qn),Pe=_e(Y,V),q=Pe.stream,oe=-T(.01*S),de=d(.01*S);return Pe.radius=function(Me){return arguments.length?(W=T(Y=Me*S),re=d(Y),_e(Y,V)):Y*D},Pe.lobes=function(Me){return arguments.length?_e(Y,V=+Me):V},Pe.stream=function(Me){var Se=Pe.rotate(),ze=q(Me),Ye=(Pe.rotate([0,0]),q(Me));return Pe.rotate(Se),ze.sphere=function(){Ye.polygonStart(),Ye.lineStart();for(var Xe=0,tt=2*y/V,rt=0;Xe<V;++Xe,rt-=tt)Ye.point(k(de*T(rt),oe)*D,O(de*d(rt))*D),Ye.point(k(re*T(rt-tt/2),W)*D,O(re*d(rt-tt/2))*D);Ye.lineEnd(),Ye.polygonEnd()},ze},Pe.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function yr(V,Y,W,re,_e,Pe,q,oe){function de(Me,Se){if(!Se)return[V*Me/y,0];var ze=Se*Se,Ye=V+ze*(Y+ze*(W+ze*re)),Xe=Se*(_e-1+ze*(Pe-oe+ze*q)),tt=(Ye*Ye+Xe*Xe)/(2*Xe),rt=Me*O(Ye/tt)/y;return[tt*d(rt),Se*(1+ze*oe)+tt*(1-T(rt))]}return arguments.length<8&&(oe=0),de.invert=function(Me,Se){var ze,Ye,Xe=y*Me/V,tt=Se,rt=50;do{var ft=tt*tt,bt=V+ft*(Y+ft*(W+ft*re)),At=tt*(_e-1+ft*(Pe-oe+ft*q)),Ut=bt*bt+At*At,qt=2*At,jt=Ut/qt,Kt=jt*jt,Vt=O(bt/jt)/y,gn=Xe*Vt,ln=bt*bt,nn=(2*Y+ft*(4*W+6*ft*re))*tt,On=_e+ft*(3*Pe+5*ft*q),Pn=(2*(bt*nn+At*(On-1))*qt-Ut*(2*(On-1)))/(qt*qt),tr=T(gn),Jn=d(gn),ur=jt*tr,vr=jt*Jn,wr=Xe/y*(1/R(1-ln/Kt))*(nn*jt-bt*Pn)/Kt,Cr=vr-Me,Or=tt*(1+ft*oe)+jt-ur-Se,Rr=Pn*Jn+ur*wr,si=ur*Vt,ir=1+Pn-(Pn*tr-vr*wr),Ar=vr*Vt,Lr=Rr*Ar-ir*si;if(!Lr)break;Xe-=ze=(Or*Rr-Cr*ir)/Lr,tt-=Ye=(Cr*Ar-Or*si)/Lr}while((C(ze)>h||C(Ye)>h)&&--rt>0);return[Xe,tt]},de}var fr=yr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Er(){return(0,I.Z)(fr).scale(149.995)}var gr=yr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function mr(){return(0,I.Z)(gr).scale(153.93)}var zr=yr(5/6*y,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Jt(){return(0,I.Z)(zr).scale(130.945)}function an(V,Y){var W=V*V,re=Y*Y;return[V*(1-.162388*re)*(.87-952426e-9*W*W),Y*(1+re/12)]}function Sn(){return(0,I.Z)(an).scale(131.747)}an.invert=function(V,Y){var W,re=V,_e=Y,Pe=50;do{var q=_e*_e;_e-=W=(_e*(1+q/12)-Y)/(1+q/4)}while(C(W)>h&&--Pe>0);Pe=50,V/=1-.162388*q;do{var oe=(oe=re*re)*oe;re-=W=(re*(.87-952426e-9*oe)-V)/(.87-.00476213*oe)}while(C(W)>h&&--Pe>0);return[re,_e]};var Ln=yr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Vn(){return(0,I.Z)(Ln).scale(131.087)}function cr(V){var Y=V(p,0)[0]-V(-p,0)[0];function W(re,_e){var Pe=re>0?-.5:.5,q=V(re+Pe*y,_e);return q[0]-=Pe*Y,q}return V.invert&&(W.invert=function(re,_e){var Pe=re>0?-.5:.5,q=V.invert(re+Pe*Y,_e),oe=q[0]-Pe*y;return oe<-y?oe+=2*y:oe>y&&(oe-=2*y),q[0]=oe,q}),W}function xn(V,Y){var W=u(V),re=u(Y),_e=T(Y),Pe=T(V)*_e,q=d(V)*_e,oe=d(re*Y);V=C(k(q,oe)),Y=O(Pe),C(V-p)>h&&(V%=p);var de=function(Me,Se){if(Se===p)return[0,0];var ze,Ye,Xe=d(Se),tt=Xe*Xe,rt=tt*tt,ft=1+rt,bt=1+3*rt,At=1-rt,Ut=O(1/R(ft)),qt=At+tt*ft*Ut,jt=(1-Xe)/qt,Kt=R(jt),Vt=jt*ft,gn=R(Vt),ln=Kt*At;if(0===Me)return[0,-(ln+tt*gn)];var nn,On=T(Se),Pn=1/On,tr=2*Xe*On,Jn=(-qt*On-(-3*tt+Ut*bt)*tr*(1-Xe))/(qt*qt),ur=-Pn*tr,vr=-Pn*(tt*ft*Jn+jt*bt*tr),wr=-2*Pn*(At*(.5*Jn/Kt)-2*tt*Kt*tr),Cr=4*Me/y;if(Me>.222*y||Se<y/4&&Me>.175*y){if(ze=(ln+tt*R(Vt*(1+rt)-ln*ln))/(1+rt),Me>y/4)return[ze,ze];var Or=ze,Rr=.5*ze;ze=.5*(Rr+Or),Ye=50;do{var si=ze*(wr+ur*R(Vt-ze*ze))+vr*O(ze/gn)-Cr;if(!si)break;si<0?Rr=ze:Or=ze,ze=.5*(Rr+Or)}while(C(Or-Rr)>h&&--Ye>0)}else{ze=h,Ye=25;do{var ir=ze*ze,Ar=R(Vt-ir),Lr=wr+ur*Ar,qr=ze*Lr+vr*O(ze/gn)-Cr;ze-=nn=Ar?qr/(Lr+(vr-ur*ir)/Ar):0}while(C(nn)>h&&--Ye>0)}return[ze,-ln-tt*R(Vt-ze*ze)]}(V>y/4?p-V:V,Y);return V>y/4&&(oe=de[0],de[0]=-de[1],de[1]=-oe),de[0]*=W,de[1]*=-re,de}function Qn(){return(0,I.Z)(cr(xn)).scale(239.75)}function er(V,Y){var W,re,_e,Pe,q,oe;if(Y<h)return[(Pe=d(V))-(W=Y*(V-Pe*(re=T(V)))/4)*re,re+W*Pe,1-Y*Pe*Pe/2,V-W];if(Y>=1-h)return W=(1-Y)/4,_e=1/(re=B(V)),[(Pe=((oe=v(2*(oe=V)))-1)/(oe+1))+W*((q=re*F(V))-V)/(re*re),_e-W*Pe*_e*(q-V),_e+W*Pe*_e*(q+V),2*f(v(V))-p+W*(q-V)/re];var de=[1,0,0,0,0,0,0,0,0],Me=[R(Y),0,0,0,0,0,0,0,0],Se=0;for(re=R(1-Y),q=1;C(Me[Se]/de[Se])>h&&Se<8;)W=de[Se++],Me[Se]=(W-re)/2,de[Se]=(W+re)/2,re=R(W*re),q*=2;_e=q*de[Se]*V;do{_e=(O(Pe=Me[Se]*d(re=_e)/de[Se])+_e)/2}while(--Se);return[d(_e),Pe=T(_e),Pe/T(_e-re),_e]}function Qt(V,Y){if(!Y)return V;if(1===Y)return i(g(V/2+_));for(var W=1,re=R(1-Y),_e=R(Y),Pe=0;C(_e)>h;Pe++){if(V%y){var q=f(re*g(V)/W);q<0&&(q+=y),V+=q+~~(V/y)*y}else V+=V;_e=(W+re)/2,re=R(W*re),_e=((W=_e)-re)/2}return V/(o(2,Pe)*W)}function zn(V,Y){var Me,Se,ze,Ye,Xe,W=(b-1)/(b+1),re=R(1-W*W),_e=Qt(p,re*re),Pe=i(g(y/4+C(Y)/2)),q=v(-1*Pe)/R(W),oe=(Me=q*T(-1*V),Ye=(Se=q*d(-1*V))+1,[.5*((Me>=0?p:-p)-k(Xe=1-(ze=Me*Me)-Se*Se,2*Me)),-.25*i(Xe*Xe+4*ze)+.5*i(Ye*Ye+ze)]),de=function(Me,Se,ze){var Ye=C(Me),Xe=F(C(Se));if(Ye){var tt=1/d(Ye),rt=1/(g(Ye)*g(Ye)),ft=-(rt+ze*(Xe*Xe*tt*tt)-1+ze),bt=(-ft+R(ft*ft-(ze-1)*rt*4))/2;return[Qt(f(1/R(bt)),ze)*u(Me),Qt(f(R((bt/rt-1)/ze)),1-ze)*u(Se)]}return[0,Qt(f(Xe),1-ze)*u(Se)]}(oe[0],oe[1],re*re);return[-de[1],(Y>=0?1:-1)*(.5*_e-de[0])]}function zt(){return(0,I.Z)(cr(zn)).scale(151.496)}xn.invert=function(V,Y){C(V)>1&&(V=2*u(V)-V),C(Y)>1&&(Y=2*u(Y)-Y);var W=u(V),re=u(Y),_e=-W*V,Pe=-re*Y,q=Pe/_e<1,oe=function(ze,Ye){for(var Xe=0,tt=1,rt=.5,ft=50;;){var bt=rt*rt,At=R(rt),Ut=O(1/R(1+bt)),qt=1-bt+rt*(1+bt)*Ut,jt=(1-At)/qt,Kt=R(jt),Vt=jt*(1+bt),gn=Kt*(1-bt),ln=R(Vt-ze*ze),nn=Ye+gn+rt*ln;if(C(tt-Xe)<w||0==--ft||0===nn)break;nn>0?Xe=rt:tt=rt,rt=.5*(Xe+tt)}if(!ft)return null;var On=O(At),Pn=T(On),tr=1/Pn,Jn=2*At*Pn,ur=(-qt*Pn-(-3*rt+Ut*(1+3*bt))*Jn*(1-At))/(qt*qt);return[y/4*(ze*(-2*tr*(.5*ur/Kt*(1-bt)-2*rt*Kt*Jn)+-tr*Jn*ln)+-tr*(rt*(1+bt)*ur+jt*(1+3*bt)*Jn)*O(ze/R(Vt))),On]}(q?Pe:_e,q?_e:Pe),de=oe[0],Me=oe[1],Se=T(Me);return q&&(de=-p-de),[W*(k(d(de)*Se,-d(Me))+y),re*O(T(de)*Se)]},zn.invert=function(V,Y){var W,re,_e,Pe,q,oe,Ye,Xe,tt,de=(b-1)/(b+1),Me=R(1-de*de),Se=(re=-V,_e=Me*Me,(W=.5*Qt(p,Me*Me)-Y)?(Pe=er(W,_e),re?(oe=(q=er(re,1-_e))[1]*q[1]+_e*Pe[0]*Pe[0]*q[0]*q[0],[[Pe[0]*q[2]/oe,Pe[1]*Pe[2]*q[0]*q[1]/oe],[Pe[1]*q[1]/oe,-Pe[0]*Pe[2]*q[0]*q[2]/oe],[Pe[2]*q[1]*q[2]/oe,-_e*Pe[0]*Pe[1]*q[0]/oe]]):[[Pe[0],0],[Pe[1],0],[Pe[2],0]]):[[0,(q=er(re,1-_e))[0]/q[1]],[1/q[1],0],[q[2]/q[1],0]]),ze=[((Ye=Se[0])[0]*(Xe=Se[1])[0]+Ye[1]*Xe[1])/(tt=Xe[0]*Xe[0]+Xe[1]*Xe[1]),(Ye[1]*Xe[0]-Ye[0]*Xe[1])/tt];return[k(ze[1],ze[0])/-1,2*f(v(-.5*i(de*ze[0]*ze[0]+de*ze[1]*ze[1])))-p]};var sn=r(7613);function hn(V){var Y=d(V),W=T(V),re=Dn(V);function _e(Pe,q){var oe=re(Pe,q);Pe=oe[0];var de=d(q=oe[1]),Me=T(q),Se=T(Pe),ze=P(Y*de+W*Me*Se),Ye=d(ze),Xe=C(Ye)>h?ze/Ye:1;return[Xe*W*d(Pe),(C(Pe)>p?Xe:-Xe)*(Y*Me-W*de*Se)]}return re.invert=Dn(-V),_e.invert=function(Pe,q){var oe=R(Pe*Pe+q*q),de=-d(oe),Me=T(oe),Se=oe*Me,ze=-q*de,Ye=oe*Y,Xe=R(Se*Se+ze*ze-Ye*Ye),tt=k(Se*Ye+ze*Xe,ze*Ye-Se*Xe),rt=(oe>p?-1:1)*k(Pe*de,oe*T(tt)*Me+q*d(tt)*de);return re.invert(rt,tt)},_e}function Dn(V){var Y=d(V),W=T(V);return function(re,_e){var Pe=T(_e),q=T(re)*Pe,oe=d(re)*Pe,de=d(_e);return[k(oe,q*W-de*Y),O(de*W+q*Y)]}}function Rn(){var V=0,Y=(0,I.r)(hn),W=Y(V),re=W.rotate,_e=W.stream,Pe=(0,sn.Z)();return W.parallel=function(q){if(!arguments.length)return V*D;var oe=W.rotate();return Y(V=q*S).rotate(oe)},W.rotate=function(q){return arguments.length?(re.call(W,[q[0],q[1]-V*D]),Pe.center([-q[0],-q[1]]),W):((q=re.call(W))[1]+=V*D,q)},W.stream=function(q){return(q=_e(q)).sphere=function(){q.polygonStart();var oe,de=Pe.radius(89.99)().coordinates[0],Me=de.length-1,Se=-1;for(q.lineStart();++Se<Me;)q.point((oe=de[Se])[0],oe[1]);for(q.lineEnd(),Me=(de=Pe.radius(90.01)().coordinates[0]).length-1,q.lineStart();--Se>=0;)q.point((oe=de[Se])[0],oe[1]);q.lineEnd(),q.polygonEnd()},q},W.scale(79.4187).parallel(45).clipAngle(179.999)}var Hn=r(33064),Mn=r(72736),un=O(1-1/3)*D,fn=ot(0);function Tn(V){var Y=un*S,W=Ft(y,Y)[0]-Ft(-y,Y)[0],re=fn(0,Y)[1],_e=Ft(0,Y)[1],Pe=M-_e,q=m/V,oe=4/m,de=re+Pe*Pe*4/m;function Me(Se,ze){var Ye,Xe=C(ze);if(Xe>Y){var tt=a(V-1,s(0,c((Se+y)/q)));(Ye=Ft(Se+=y*(V-1)/V-tt*q,Xe))[0]=Ye[0]*m/W-m*(V-1)/(2*V)+tt*m/V,Ye[1]=re+4*(Ye[1]-_e)*Pe/m,ze<0&&(Ye[1]=-Ye[1])}else Ye=fn(Se,ze);return Ye[0]*=oe,Ye[1]/=de,Ye}return Me.invert=function(Se,ze){Se/=oe;var Ye=C(ze*=de);if(Ye>re){var Xe=a(V-1,s(0,c((Se+y)/q))),tt=Ft.invert(Se=(Se+y*(V-1)/V-Xe*q)*W/m,.25*(Ye-re)*m/Pe+_e);return tt[0]-=y*(V-1)/V-Xe*q,ze<0&&(tt[1]=-tt[1]),tt}return fn.invert(Se,ze)},Me}function An(V,Y){return[V,1&Y?90-h:un]}function Gn(V,Y){return[V,1&Y?-90+h:-un]}function Zn(V){return[V[0]*(1-h),V[1]]}function lr(){var V=4,Y=(0,I.r)(Tn),W=Y(V),re=W.stream;return W.lobes=function(_e){return arguments.length?Y(V=+_e):V},W.stream=function(_e){var Pe=W.rotate(),q=re(_e),oe=(W.rotate([0,0]),re(_e));return W.rotate(Pe),q.sphere=function(){var de,Me;(0,Mn.Z)((Me=[].concat((0,Hn.w6)(-180,180+(de=180/V)/2,de).map(An),(0,Hn.w6)(180,-180-de/2,-de).map(Gn)),{type:"Polygon",coordinates:[180===de?Me.map(Zn):Me]}),oe)},q},W.scale(239.75)}function nr(V){var Y,W=1+V,re=O(d(1/W)),_e=2*R(y/(Y=y+4*re*W)),Pe=.5*_e*(W+R(V*(2+V))),q=V*V,oe=W*W;function de(Me,Se){var ze,Ye,Xe=1-d(Se);if(Xe&&Xe<2){var tt,rt=p-Se,ft=25;do{var bt=d(rt),At=T(rt),Ut=re+k(bt,W-At),qt=1+oe-2*W*At;rt-=tt=(rt-q*re-W*bt+qt*Ut-.5*Xe*Y)/(2*W*bt*Ut)}while(C(tt)>w&&--ft>0);ze=_e*R(qt),Ye=Me*Ut/y}else ze=_e*(V+Xe),Ye=Me*re/y;return[ze*d(Ye),Pe-ze*T(Ye)]}return de.invert=function(Me,Se){var ze=Me*Me+(Se-=Pe)*Se,Ye=(1+oe-ze/(_e*_e))/(2*W),Xe=P(Ye),tt=d(Xe),rt=re+k(tt,W-Ye);return[O(Me/R(ze))*y/rt,O(1-2*(Xe-q*re-W*tt+(1+oe-2*W*Ye)*rt)/Y)]},de}function br(){var V=1,Y=(0,I.r)(nr),W=Y(V);return W.ratio=function(re){return arguments.length?Y(V=+re):V},W.scale(167.774).center([0,18.67])}var or=.7109889596207567,dr=.0528035274542;function kr(V,Y){return Y>-or?((V=ge(V,Y))[1]+=dr,V):Ke(V,Y)}function Sr(){return(0,I.Z)(kr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Pr(V,Y){return C(Y)>or?((V=ge(V,Y))[1]-=Y>0?dr:-dr,V):Ke(V,Y)}function rr(){return(0,I.Z)(Pr).scale(152.63)}function Zr(V,Y,W,re){var _e=R(4*y/(2*W+(1+V-Y/2)*d(2*W)+(V+Y)/2*d(4*W)+Y/2*d(6*W))),Pe=R(re*d(W)*R((1+V*T(2*W)+Y*T(4*W))/(1+V+Y))),q=W*de(1);function oe(ze){return R(1+V*T(2*ze)+Y*T(4*ze))}function de(ze){var Ye=ze*W;return(2*Ye+(1+V-Y/2)*d(2*Ye)+(V+Y)/2*d(4*Ye)+Y/2*d(6*Ye))/W}function Me(ze){return oe(ze)*d(ze)}var Se=function(ze,Ye){var Xe=W*ke(de,q*d(Ye)/W,Ye/y);isNaN(Xe)&&(Xe=W*u(Ye));var tt=_e*oe(Xe);return[tt*Pe*ze/y*T(Xe),tt/Pe*d(Xe)]};return Se.invert=function(ze,Ye){var Xe=ke(Me,Ye*Pe/_e);return[ze*y/(T(Xe)*_e*Pe*oe(Xe)),O(W*de(Xe/W)/q)]},0===W&&(_e=R(re/y),(Se=function(ze,Ye){return[ze*_e,d(Ye)/_e]}).invert=function(ze,Ye){return[ze/_e,O(Ye*_e)]}),Se}function ar(){var V=1,Y=0,W=45*S,re=2,_e=(0,I.r)(Zr),Pe=_e(V,Y,W,re);return Pe.a=function(q){return arguments.length?_e(V=+q,Y,W,re):V},Pe.b=function(q){return arguments.length?_e(V,Y=+q,W,re):Y},Pe.psiMax=function(q){return arguments.length?_e(V,Y,W=+q*S,re):W*D},Pe.ratio=function(q){return arguments.length?_e(V,Y,W,re=+q):re},Pe.scale(180.739)}function Nr(V,Y,W,re,_e,Pe,q,oe,de,Me,Se){if(Se.nanEncountered)return NaN;var ze,Ye,Xe,tt,rt,ft,bt,At,Ut,qt;if(Ye=V(Y+.25*(ze=W-Y)),Xe=V(W-.25*ze),isNaN(Ye))Se.nanEncountered=!0;else{if(!isNaN(Xe))return qt=((ft=(tt=ze*(re+4*Ye+_e)/12)+(rt=ze*(_e+4*Xe+Pe)/12))-q)/15,Me>de?(Se.maxDepthCount++,ft+qt):Math.abs(qt)<oe?ft+qt:(At=Nr(V,Y,bt=Y+.5*ze,re,Ye,_e,tt,.5*oe,de,Me+1,Se),isNaN(At)?(Se.nanEncountered=!0,NaN):(Ut=Nr(V,bt,W,_e,Xe,Pe,rt,.5*oe,de,Me+1,Se),isNaN(Ut)?(Se.nanEncountered=!0,NaN):At+Ut));Se.nanEncountered=!0}}function ii(V,Y,W,re,_e){void 0===re&&(re=1e-8),void 0===_e&&(_e=20);var Pe=V(Y),q=V(.5*(Y+W)),oe=V(W);return Nr(V,Y,W,Pe,q,oe,(Pe+4*q+oe)*(W-Y)/6,re,_e,1,{maxDepthCount:0,nanEncountered:!1})}function Gi(V,Y,W){function re(Xe){return V+(1-V)*o(1-o(Xe,Y),1/Y)}function _e(Xe){return ii(re,0,Xe,1e-4)}for(var Pe=1/_e(1),q=1e3,oe=1.00000001*Pe,de=[],Me=0;Me<=q;Me++)de.push(_e(Me/q)*oe);function Se(Xe){var tt=0,rt=q,ft=500;do{de[ft]>Xe?rt=ft:tt=ft,ft=tt+rt>>1}while(ft>tt);var bt=de[ft+1]-de[ft];return bt&&(bt=(Xe-de[ft+1])/bt),(ft+1+bt)/q}var ze=2*Se(1)/y*Pe/W,Ye=function(Xe,tt){var rt=Se(C(d(tt))),ft=re(rt)*Xe;return rt/=ze,[ft,tt>=0?rt:-rt]};return Ye.invert=function(Xe,tt){var rt;return C(tt*=ze)<1&&(rt=u(tt)*O(_e(C(tt))*Pe)),[Xe/re(C(tt)),rt]},Ye}function vo(){var V=0,Y=2.5,W=1.183136,re=(0,I.r)(Gi),_e=re(V,Y,W);return _e.alpha=function(Pe){return arguments.length?re(V=+Pe,Y,W):V},_e.k=function(Pe){return arguments.length?re(V,Y=+Pe,W):Y},_e.gamma=function(Pe){return arguments.length?re(V,Y,W=+Pe):W},_e.scale(152.63)}function so(V,Y){return C(V[0]-Y[0])<h&&C(V[1]-Y[1])<h}function lo(V,Y){for(var W,re,_e,Pe=-1,q=V.length,oe=V[0],de=[];++Pe<q;){re=((W=V[Pe])[0]-oe[0])/Y,_e=(W[1]-oe[1])/Y;for(var Me=0;Me<Y;++Me)de.push([oe[0]+Me*re,oe[1]+Me*_e]);oe=W}return de.push(W),de}function Qi(V,Y,W){var re,_e;function Pe(de,Me){for(var Se=Me<0?-1:1,ze=Y[+(Me<0)],Ye=0,Xe=ze.length-1;Ye<Xe&&de>ze[Ye][2][0];++Ye);var tt=V(de-ze[Ye][1][0],Me);return tt[0]+=V(ze[Ye][1][0],Se*Me>Se*ze[Ye][0][1]?ze[Ye][0][1]:Me)[0],tt}W?Pe.invert=W(Pe):V.invert&&(Pe.invert=function(de,Me){for(var Se=_e[+(Me<0)],ze=Y[+(Me<0)],Ye=0,Xe=Se.length;Ye<Xe;++Ye){var tt=Se[Ye];if(tt[0][0]<=de&&de<tt[1][0]&&tt[0][1]<=Me&&Me<tt[1][1]){var rt=V.invert(de-V(ze[Ye][1][0],0)[0],Me);return rt[0]+=ze[Ye][1][0],so(Pe(rt[0],rt[1]),[de,Me])?rt:null}}});var q=(0,I.Z)(Pe),oe=q.stream;return q.stream=function(de){var Me=q.rotate(),Se=oe(de),ze=(q.rotate([0,0]),oe(de));return q.rotate(Me),Se.sphere=function(){(0,Mn.Z)(re,ze)},Se},q.lobes=function(de){return arguments.length?(re=function(Me){var Se,ze,Xe,tt,ft,bt=[],At=Me[0].length;for(ft=0;ft<At;++ft)ze=(Se=Me[0][ft])[0][0],bt.push(lo([[ze+h,Se[0][1]+h],[ze+h,(Xe=Se[1][1])-h],[(tt=Se[2][0])-h,Xe-h],[tt-h,Se[2][1]+h]],30));for(ft=Me[1].length-1;ft>=0;--ft)ze=(Se=Me[1][ft])[0][0],bt.push(lo([[(tt=Se[2][0])-h,Se[2][1]-h],[tt-h,(Xe=Se[1][1])+h],[ze+h,Xe+h],[ze+h,Se[0][1]-h]],30));return{type:"Polygon",coordinates:[(0,Hn.TS)(bt)]}}(de),Y=de.map(function(Me){return Me.map(function(Se){return[[Se[0][0]*S,Se[0][1]*S],[Se[1][0]*S,Se[1][1]*S],[Se[2][0]*S,Se[2][1]*S]]})}),_e=Y.map(function(Me){return Me.map(function(Se){var ze,Ye=V(Se[0][0],Se[0][1])[0],Xe=V(Se[2][0],Se[2][1])[0],tt=V(Se[1][0],Se[0][1])[1],rt=V(Se[1][0],Se[1][1])[1];return tt>rt&&(ze=tt,tt=rt,rt=ze),[[Ye,tt],[Xe,rt]]})}),q):Y.map(function(Me){return Me.map(function(Se){return[[Se[0][0]*D,Se[0][1]*D],[Se[1][0]*D,Se[1][1]*D],[Se[2][0]*D,Se[2][1]*D]]})})},null!=Y&&q.lobes(Y),q}kr.invert=function(V,Y){return Y>-or?ge.invert(V,Y-dr):Ke.invert(V,Y)},Pr.invert=function(V,Y){return C(Y)>or?ge.invert(V,Y+(Y>0?dr:-dr)):Ke.invert(V,Y)};var Co=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Rs(){return Qi(Ne,Co).scale(160.857)}var Qr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function _s(){return Qi(Pr,Qr).scale(152.63)}var Iu=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Xo(){return Qi(ge,Iu).scale(169.529)}var jl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function xc(){return Qi(ge,jl).scale(169.529).rotate([20,0])}var Bi=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Wc(){return Qi(kr,Bi,Te).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Ul=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vl(){return Qi(Ke,Ul).scale(152.63).rotate([-20,0])}function ja(V,Y){return[3/m*V*R(y*y/3-Y*Y),Y]}function Ro(){return(0,I.Z)(ja).scale(158.837)}function cl(V){function Y(W,re){if(C(C(re)-p)<h)return[0,re<0?-2:2];var _e=d(re),Pe=o((1+_e)/(1-_e),V/2),q=.5*(Pe+1/Pe)+T(W*=V);return[2*d(W)/q,(Pe-1/Pe)/q]}return Y.invert=function(W,re){var _e=C(re);if(C(_e-2)<h)return W?null:[0,u(re)*p];if(_e>2)return null;var Pe=(W/=2)*W,q=(re/=2)*re,oe=2*re/(1+Pe+q);return oe=o((1+oe)/(1-oe),1/V),[k(2*W,1-Pe-q)/V,O((oe-1)/(oe+1))]},Y}function Wi(){var V=.5,Y=(0,I.r)(cl),W=Y(V);return W.spacing=function(re){return arguments.length?Y(V=+re):V},W.scale(124.75)}ja.invert=function(V,Y){return[m/3*V/R(y*y/3-Y*Y),Y]};var Fs=y/b;function Ka(V,Y){return[V*(1+R(T(Y)))/2,Y/(T(Y/2)*T(V/6))]}function Ns(){return(0,I.Z)(Ka).scale(97.2672)}function Ea(V,Y){var W=V*V,re=Y*Y;return[V*(.975534+re*(-.0143059*W-.119161+-.0547009*re)),Y*(1.00384+W*(.0802894+-.02855*re+199025e-9*W)+re*(.0998909+-.0491032*re))]}function fl(){return(0,I.Z)(Ea).scale(139.98)}function Ca(V,Y){return[d(V)/T(Y),g(Y)*T(V)]}function Xs(){return(0,I.Z)(Ca).scale(144.049).clipAngle(89.999)}function Br(V){var Y=T(V),W=g(_+V/2);function re(_e,Pe){var q=Pe-V,oe=C(q)<h?_e*Y:C(oe=_+Pe/2)<h||C(C(oe)-p)<h?0:_e*q/i(g(oe)/W);return[oe,q]}return re.invert=function(_e,Pe){var q,oe=Pe+V;return[C(Pe)<h?_e/Y:C(q=_+oe/2)<h||C(C(q)-p)<h?0:_e*i(g(q)/W)/Pe,oe]},re}function Zu(){return qe(Br).parallel(40).scale(158.837)}function Vr(V,Y){return[V,1.25*i(g(_+.4*Y))]}function su(){return(0,I.Z)(Vr).scale(108.318)}function lu(V){var Y=V.length-1;function W(re,_e){for(var Pe,q=T(_e),oe=2/(1+q*T(re)),de=oe*q*d(re),Me=oe*d(_e),Se=Y,ze=V[Se],Ye=ze[0],Xe=ze[1];--Se>=0;)Ye=(ze=V[Se])[0]+de*(Pe=Ye)-Me*Xe,Xe=ze[1]+de*Xe+Me*Pe;return[Ye=de*(Pe=Ye)-Me*Xe,Xe=de*Xe+Me*Pe]}return W.invert=function(re,_e){var Pe=20,q=re,oe=_e;do{for(var de,Me=Y,Se=V[Me],ze=Se[0],Ye=Se[1],Xe=0,tt=0;--Me>=0;)Xe=ze+q*(de=Xe)-oe*tt,tt=Ye+q*tt+oe*de,ze=(Se=V[Me])[0]+q*(de=ze)-oe*Ye,Ye=Se[1]+q*Ye+oe*de;var rt,ft,bt=(Xe=ze+q*(de=Xe)-oe*tt)*Xe+(tt=Ye+q*tt+oe*de)*tt;q-=rt=((ze=q*(de=ze)-oe*Ye-re)*Xe+(Ye=q*Ye+oe*de-_e)*tt)/bt,oe-=ft=(Ye*Xe-ze*tt)/bt}while(C(rt)+C(ft)>h*h&&--Pe>0);if(Pe){var At=R(q*q+oe*oe),Ut=2*f(.5*At),qt=d(Ut);return[k(q*qt,At*T(Ut)),At?O(oe*qt/At):0]}},W}Ka.invert=function(V,Y){var W=C(V),re=C(Y),_e=h,Pe=p;re<Fs?Pe*=re/Fs:_e+=6*P(Fs/re);for(var q=0;q<25;q++){var oe=d(Pe),de=R(T(Pe)),Me=d(Pe/2),Se=T(Pe/2),ze=d(_e/6),Ye=T(_e/6),Xe=.5*_e*(1+de)-W,tt=Pe/(Se*Ye)-re,rt=de?-.25*_e*oe/de:0,ft=.5*(1+de),bt=(1+.5*Pe*Me/Se)/(Se*Ye),At=Pe/Se*(ze/6)/(Ye*Ye),Ut=rt*At-bt*ft,qt=(Xe*At-tt*ft)/Ut,jt=(tt*rt-Xe*bt)/Ut;if(Pe-=qt,_e-=jt,C(qt)<h&&C(jt)<h)break}return[V<0?-_e:_e,Y<0?-Pe:Pe]},Ea.invert=function(V,Y){var W=u(V)*y,re=Y/2,_e=50;do{var Pe=W*W,q=re*re,oe=W*re,de=W*(.975534+q*(-.0143059*Pe-.119161+-.0547009*q))-V,Me=re*(1.00384+Pe*(.0802894+-.02855*q+199025e-9*Pe)+q*(.0998909+-.0491032*q))-Y,Se=.975534-q*(.119161+3*Pe*.0143059+.0547009*q),ze=-oe*(.238322+.2188036*q+.0286118*Pe),Ye=oe*(.1605788+7961e-7*Pe+-.0571*q),Xe=1.00384+Pe*(.0802894+199025e-9*Pe)+q*(3*(.0998909-.02855*Pe)-.245516*q),tt=ze*Ye-Xe*Se,rt=(Me*ze-de*Xe)/tt,ft=(de*Ye-Me*Se)/tt;W-=rt,re-=ft}while((C(rt)>h||C(ft)>h)&&--_e>0);return _e&&[W,re]},Ca.invert=function(V,Y){var W=V*V,re=Y*Y+1,_e=W+re,Pe=V?x*R((_e-R(_e*_e-4*W))/W):1/R(re);return[O(V*Pe),u(Y)*P(Pe)]},Vr.invert=function(V,Y){return[V,2.5*f(v(.8*Y))-.625*y]};var Hl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Yu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],bc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ql=[[.9245,0],[0,0],[.01943,0]],Da=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ia(){return Ua(Hl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function oa(){return Ua(Yu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ja(){return Ua(bc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Vi(){return Ua(ql,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Gl(){return Ua(Da,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ua(V,Y){var W=(0,I.Z)(lu(V)).rotate(Y).clipAngle(90),re=(0,ct.Z)(Y),_e=W.center;return delete W.rotate,W.center=function(Pe){return arguments.length?_e(re(Pe)):re.invert(_e())},W}var Ks=R(6),ws=R(7);function ha(V,Y){var W=O(7*d(Y)/(3*Ks));return[Ks*V*(2*T(2*W/3)-1)/ws,9*d(W/3)/ws]}function Wl(){return(0,I.Z)(ha).scale(164.859)}function Js(V,Y){for(var W,re=(1+x)*d(Y),_e=Y,Pe=0;Pe<25&&(_e-=W=(d(_e/2)+d(_e)-re)/(.5*T(_e/2)+T(_e)),!(C(W)<h));Pe++);return[V*(1+2*T(_e)/T(_e/2))/(3*b),2*R(3)*d(_e/2)/R(2+b)]}function no(){return(0,I.Z)(Js).scale(188.209)}function Qa(V,Y){for(var W,re=R(6/(4+y)),_e=(1+y/4)*d(Y),Pe=Y/2,q=0;q<25&&(Pe-=W=(Pe/2+d(Pe)-_e)/(.5+T(Pe)),!(C(W)<h));q++);return[re*(.5+T(Pe))*V/1.5,re*Pe]}function Zl(){return(0,I.Z)(Qa).scale(166.518)}ha.invert=function(V,Y){var W=3*O(Y*ws/9);return[V*ws/(Ks*(2*T(2*W/3)-1)),O(3*d(W)*Ks/7)]},Js.invert=function(V,Y){var W=Y*R(2+b)/(2*R(3)),re=2*O(W);return[3*b*V/(1+2*T(re)/T(re/2)),O((W+d(re))/(1+x))]},Qa.invert=function(V,Y){var W=R(6/(4+y)),re=Y/W;return C(C(re)-p)<h&&(re=re<0?-p:p),[1.5*V/(W*(.5+T(re))),O((re/2+d(re))/(1+y/4))]};var es=r(26867);function Ts(V,Y){var W=Y*Y,re=W*W,_e=W*re;return[V*(.84719-.13063*W+_e*_e*(.05494*W-.04515-.02326*re+.00331*_e)),Y*(1.01183+re*re*(.01926*W-.02625-.00396*re))]}function _c(){return(0,I.Z)(Ts).scale(175.295)}function uu(V,Y){return[V*(1+T(Y))/2,2*(Y-g(Y/2))]}function wc(){return(0,I.Z)(uu).scale(152.63)}Ts.invert=function(V,Y){var W,re,_e,Pe,q=Y,oe=25;do{q-=W=(q*(1.01183+(_e=(re=q*q)*re)*_e*(.01926*re-.02625-.00396*_e))-Y)/(1.01183+_e*_e*(.21186*re-.23625+-.05148*_e))}while(C(W)>w&&--oe>0);return[V/(.84719-.13063*(re=q*q)+(Pe=re*(_e=re*re))*Pe*(.05494*re-.04515-.02326*_e+.00331*Pe)),q]},uu.invert=function(V,Y){for(var W=Y/2,re=0,_e=1/0;re<10&&C(_e)>h;++re){var Pe=T(Y/2);Y-=_e=(Y-g(Y/2)-W)/(1-.5/(Pe*Pe))}return[2*V/(1+T(Y)),Y]};var $u=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function cu(){return Qi(xe(1/0),$u).rotate([20,0]).scale(152.63)}function Yl(V,Y){var W=d(Y),re=T(Y),_e=u(V);if(0===V||C(Y)===p)return[0,Y];if(0===Y)return[V,0];if(C(V)===p)return[V*re,p*W];var Pe=y/(2*V)-2*V/y,q=2*Y/y,oe=(1-q*q)/(W-q),de=Pe*Pe,Me=oe*oe,Se=1+de/Me,ze=1+Me/de,Ye=(Pe*W/oe-Pe/2)/Se,Xe=(Me*W/de+oe/2)/ze,tt=Xe*Xe-(Me*W*W/de+oe*W-1)/ze;return[p*(Ye+R(Ye*Ye+re*re/Se)*_e),p*(Xe+R(tt<0?0:tt)*u(-Y*Pe)*_e)]}function Ra(){return(0,I.Z)(Yl).scale(127.267)}Yl.invert=function(V,Y){var W=(V/=p)*V,re=W+(Y/=p)*Y,_e=y*y;return[V?(re-1+R((1-re)*(1-re)+4*W))/(2*V)*p:0,ke(function(Pe){return re*(y*d(Pe)-2*Pe)*y+4*Pe*Pe*(Y-d(Pe))+2*y*Pe-_e*Y},0)]};var dl=1.0148,zs=.23185,hl=-.14499,Qs=.02406,Lu=dl,Ms=5*zs,Xu=7*hl,Tc=9*Qs,Ou=1.790857183;function pl(V,Y){var W=Y*Y;return[V,Y*(dl+W*W*(zs+W*(hl+Qs*W)))]}function As(){return(0,I.Z)(pl).scale(139.319)}function Al(V,Y){if(C(Y)<h)return[V,0];var W=g(Y),re=V*d(Y);return[d(re)/W,Y+(1-T(re))/W]}function Ku(){return(0,I.Z)(Al).scale(103.74)}pl.invert=function(V,Y){Y>Ou?Y=Ou:Y<-1.790857183&&(Y=-1.790857183);var W,re=Y;do{var _e=re*re;re-=W=(re*(dl+_e*_e*(zs+_e*(hl+Qs*_e)))-Y)/(Lu+_e*_e*(Ms+_e*(Xu+Tc*_e)))}while(C(W)>h);return[V,re]},Al.invert=function(V,Y){if(C(Y)<h)return[V,0];var W,re=V*V+Y*Y,_e=.5*Y,Pe=10;do{var q=g(_e),oe=1/T(_e),de=re-2*Y*_e+_e*_e;_e-=W=(q*de+2*(_e-Y))/(2+de*oe*oe+2*(_e-Y)*q)}while(C(W)>h&&--Pe>0);return q=g(_e),[(C(Y)<C(_e+1/q)?O(V*q):u(Y)*u(V)*(P(C(V*q))+p))/d(_e),_e]};var $l=r(77338),zo=r(83074);function fu(V,Y){return[V[0]*Y[0]+V[1]*Y[3],V[0]*Y[1]+V[1]*Y[4],V[0]*Y[2]+V[1]*Y[5]+V[2],V[3]*Y[0]+V[4]*Y[3],V[3]*Y[1]+V[4]*Y[4],V[3]*Y[2]+V[4]*Y[5]+V[5]]}function kl(V,Y){return[V[0]-Y[0],V[1]-Y[1]]}function bi(V){return R(V[0]*V[0]+V[1]*V[1])}function Go(V,Y,W){function re(oe,de){var Me,Se=Y(oe,de),ze=Se.project([oe*D,de*D]);return(Me=Se.transform)?[Me[0]*ze[0]+Me[1]*ze[1]+Me[2],-(Me[3]*ze[0]+Me[4]*ze[1]+Me[5])]:(ze[1]=-ze[1],ze)}function _e(oe,de){var ft,bt,Me=oe.project.invert,Se=oe.transform,ze=de;if(Se&&(ze=[(Se=[(bt=1/((ft=Se)[0]*ft[4]-ft[1]*ft[3]))*ft[4],-bt*ft[1],bt*(ft[1]*ft[5]-ft[2]*ft[4]),-bt*ft[3],bt*ft[0],bt*(ft[2]*ft[3]-ft[0]*ft[5])])[0]*ze[0]+Se[1]*ze[1]+Se[2],Se[3]*ze[0]+Se[4]*ze[1]+Se[5]]),Me&&oe===function(ft){return Y(ft[0]*S,ft[1]*S)}(Ye=Me(ze)))return Ye;for(var Ye,Xe=oe.children,tt=0,rt=Xe&&Xe.length;tt<rt;++tt)if(Ye=_e(Xe[tt],de))return Ye}(function oe(de,Me){if(de.edges=function(jt){for(var Kt=jt.length,Vt=[],gn=jt[Kt-1],ln=0;ln<Kt;++ln)Vt.push([gn,gn=jt[ln]]);return Vt}(de.face),Me.face){var Se=de.shared=function(jt,Kt){for(var Vt,gn,ln=jt.length,nn=null,On=0;On<ln;++On){Vt=jt[On];for(var Pn=Kt.length;--Pn>=0;)if(Vt[0]===(gn=Kt[Pn])[0]&&Vt[1]===gn[1]){if(nn)return[nn,Vt];nn=Vt}}}(de.face,Me.face),ze=(rt=Se.map(Me.project),ft=Se.map(de.project),bt=kl(rt[1],rt[0]),At=kl(ft[1],ft[0]),Ut=k((jt=bt)[0]*(Kt=At)[1]-jt[1]*Kt[0],jt[0]*Kt[0]+jt[1]*Kt[1]),qt=bi(bt)/bi(At),fu([1,0,rt[0][0],0,1,rt[0][1]],fu([qt,0,0,0,qt,0],fu([T(Ut),d(Ut),0,-d(Ut),T(Ut),0],[1,0,-ft[0][0],0,1,-ft[0][1]]))));de.transform=Me.transform?fu(Me.transform,ze):ze;for(var Ye=Me.edges,Xe=0,tt=Ye.length;Xe<tt;++Xe)Hi(Se[0],Ye[Xe][1])&&Hi(Se[1],Ye[Xe][0])&&(Ye[Xe]=de),Hi(Se[0],Ye[Xe][0])&&Hi(Se[1],Ye[Xe][1])&&(Ye[Xe]=de);for(Xe=0,tt=(Ye=de.edges).length;Xe<tt;++Xe)Hi(Se[0],Ye[Xe][0])&&Hi(Se[1],Ye[Xe][1])&&(Ye[Xe]=Me),Hi(Se[0],Ye[Xe][1])&&Hi(Se[1],Ye[Xe][0])&&(Ye[Xe]=Me)}else de.transform=Me.transform;var jt,Kt,rt,ft,bt,At,Ut,qt;return de.children&&de.children.forEach(function(jt){oe(jt,de)}),de})(V,{transform:null}),vi(V)&&(re.invert=function(oe,de){var Me=_e(V,[oe,-de]);return Me&&(Me[0]*=S,Me[1]*=S,Me)});var Pe=(0,I.Z)(re),q=Pe.stream;return Pe.stream=function(oe){var de=Pe.rotate(),Me=q(oe),Se=(Pe.rotate([0,0]),q(oe));return Pe.rotate(de),Me.sphere=function(){Se.polygonStart(),Se.lineStart(),Li(Se,V),Se.lineEnd(),Se.polygonEnd()},Me},Pe.angle(null==W?-30:W*D)}function Li(V,Y,W){var re,_e,Pe=Y.edges,q=Pe.length,oe={type:"MultiPoint",coordinates:Y.face},de=Y.face.filter(function(rt){return 90!==C(rt[1])}),Me=(0,$l.Z)({type:"MultiPoint",coordinates:de}),Se=!1,ze=-1,Ye=Me[1][0]-Me[0][0],Xe=180===Ye||360===Ye?[(Me[0][0]+Me[1][0])/2,(Me[0][1]+Me[1][1])/2]:(0,nt.Z)(oe);if(W)for(;++ze<q&&Pe[ze]!==W;);++ze;for(var tt=0;tt<q;++tt)_e=Pe[(tt+ze)%q],Array.isArray(_e)?(Se||(V.point((re=(0,zo.Z)(_e[0],Xe)(h))[0],re[1]),Se=!0),V.point((re=(0,zo.Z)(_e[1],Xe)(h))[0],re[1])):(Se=!1,_e!==W&&Li(V,_e,Y))}function Hi(V,Y){return V&&Y&&V[0]===Y[0]&&V[1]===Y[1]}function vi(V){return V.project.invert||V.children&&V.children.some(vi)}var Pi=r(98936),Ko=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Bs=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(V){return V.map(function(Y){return Ko[Y]})});function Pu(V){V=V||function(W){var re=(0,nt.Z)({type:"MultiPoint",coordinates:W});return(0,Pi.Z)().scale(1).translate([0,0]).rotate([-re[0],-re[1]])};var Y=Bs.map(function(W){return{face:W,project:V(W)}});return[-1,0,0,1,0,1,4,5].forEach(function(W,re){var _e=Y[W];_e&&(_e.children||(_e.children=[])).push(Y[re])}),Go(Y[0],function(W,re){return Y[W<-y/2?re<0?6:4:W<0?re<0?2:0:W<y/2?re<0?3:1:re<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var ml=2/R(3);function vl(V,Y){var W=Ft(V,Y);return[W[0]*ml,W[1]]}function du(V){V=V||function(W){var re=(0,nt.Z)({type:"MultiPoint",coordinates:W});return(0,I.Z)(vl).translate([0,0]).scale(1).rotate(re[1]>0?[-re[0],0]:[180-re[0],180])};var Y=Bs.map(function(W){return{face:W,project:V(W)}});return[-1,0,0,1,0,1,4,5].forEach(function(W,re){var _e=Y[W];_e&&(_e.children||(_e.children=[])).push(Y[re])}),Go(Y[0],function(W,re){return Y[W<-y/2?re<0?6:4:W<0?re<0?2:0:W<y/2?re<0?3:1:re<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function yo(V){V=V||function(Pe){var q=6===Pe.length?(0,nt.Z)({type:"MultiPoint",coordinates:Pe}):Pe[0];return(0,Pi.Z)().scale(1).translate([0,0]).rotate([-q[0],-q[1]])};var Y=Bs.map(function(Pe){for(var q,oe=Pe.map(xi),de=oe.length,Me=oe[de-1],Se=[],ze=0;ze<de;++ze)Se.push(pi([.9486832980505138*Me[0]+.31622776601683794*(q=oe[ze])[0],.9486832980505138*Me[1]+.31622776601683794*q[1],.9486832980505138*Me[2]+.31622776601683794*q[2]]),pi([.9486832980505138*q[0]+.31622776601683794*Me[0],.9486832980505138*q[1]+.31622776601683794*Me[1],.9486832980505138*q[2]+.31622776601683794*Me[2]])),Me=q;return Se}),W=[],re=[-1,0,0,1,0,1,4,5];Y.forEach(function(Pe,q){for(var oe,de,Me=Bs[q],Se=Me.length,ze=W[q]=[],Ye=0;Ye<Se;++Ye)Y.push([Me[Ye],Pe[(2*Ye+2)%(2*Se)],Pe[(2*Ye+1)%(2*Se)]]),re.push(q),ze.push((oe=xi(Pe[(2*Ye+2)%(2*Se)]),de=xi(Pe[(2*Ye+1)%(2*Se)]),[oe[1]*de[2]-oe[2]*de[1],oe[2]*de[0]-oe[0]*de[2],oe[0]*de[1]-oe[1]*de[0]]))});var _e=Y.map(function(Pe){return{project:V(Pe),face:Pe}});return re.forEach(function(Pe,q){var oe=_e[Pe];oe&&(oe.children||(oe.children=[])).push(_e[q])}),Go(_e[0],function(Pe,q){var oe=T(q),de=[oe*T(Pe),oe*d(Pe),d(q)],Me=Pe<-y/2?q<0?6:4:Pe<0?q<0?2:0:Pe<y/2?q<0?3:1:q<0?7:5,Se=W[Me];return _e[Gr(Se[0],de)<0?8+3*Me:Gr(Se[1],de)<0?8+3*Me+1:Gr(Se[2],de)<0?8+3*Me+2:Me]}).angle(-30).scale(110.625).center([0,45])}function Gr(V,Y){for(var W=0,re=V.length,_e=0;W<re;++W)_e+=V[W]*Y[W];return _e}function pi(V){return[k(V[1],V[0])*D,O(s(-1,a(1,V[2])))*D]}function xi(V){var Y=V[0]*S,W=V[1]*S,re=T(W);return[re*T(Y),re*d(Y),d(W)]}function pa(){}function ks(V,Y){var W,re=Y.stream;if(!re)throw new Error("invalid projection");switch(V&&V.type){case"Feature":W=Bo;break;case"FeatureCollection":W=ji;break;default:W=Fi}return W(V,re)}function ji(V,Y){return{type:"FeatureCollection",features:V.features.map(function(W){return Bo(W,Y)})}}function Bo(V,Y){return{type:"Feature",id:V.id,properties:V.properties,geometry:Fi(V.geometry,Y)}}function Fi(V,Y){if(!V)return null;if("GeometryCollection"===V.type)return _e=Y,{type:"GeometryCollection",geometries:V.geometries.map(function(Pe){return Fi(Pe,_e)})};var _e,W;switch(V.type){case"Point":case"MultiPoint":W=mi;break;case"LineString":case"MultiLineString":W=Fa;break;case"Polygon":case"MultiPolygon":case"Sphere":W=Jo;break;default:return null}return(0,Mn.Z)(V,Y(W)),W.result()}vl.invert=function(V,Y){return Ft.invert(V/ml,Y)};var So=[],jo=[],mi={point:function(V,Y){So.push([V,Y])},result:function(){var V=So.length?So.length<2?{type:"Point",coordinates:So[0]}:{type:"MultiPoint",coordinates:So}:null;return So=[],V}},Fa={lineStart:pa,point:function(V,Y){So.push([V,Y])},lineEnd:function(){So.length&&(jo.push(So),So=[])},result:function(){var V=jo.length?jo.length<2?{type:"LineString",coordinates:jo[0]}:{type:"MultiLineString",coordinates:jo}:null;return jo=[],V}},Jo={polygonStart:pa,lineStart:pa,point:function(V,Y){So.push([V,Y])},lineEnd:function(){var V=So.length;if(V){do{So.push(So[0].slice())}while(++V<4);jo.push(So),So=[]}},polygonEnd:pa,result:function(){if(!jo.length)return null;var V=[],Y=[];return jo.forEach(function(W){!function(re){if((_e=re.length)<4)return!1;for(var _e,Pe=0,q=re[_e-1][1]*re[0][0]-re[_e-1][0]*re[0][1];++Pe<_e;)q+=re[Pe-1][1]*re[Pe][0]-re[Pe-1][0]*re[Pe][1];return q<=0}(W)?Y.push(W):V.push([W])}),Y.forEach(function(W){var re=W[0];V.some(function(_e){if(function(Pe,q){for(var oe=q[0],de=q[1],Me=!1,Se=0,ze=Pe.length,Ye=ze-1;Se<ze;Ye=Se++){var Xe=Pe[Se],tt=Xe[0],rt=Xe[1],ft=Pe[Ye],At=ft[1];rt>de^At>de&&oe<(ft[0]-tt)*(de-rt)/(At-rt)+tt&&(Me=!Me)}return Me}(_e[0],re))return _e.push(W),!0})||V.push([W])}),jo=[],V.length?V.length>1?{type:"MultiPolygon",coordinates:V}:{type:"Polygon",coordinates:V[0]}:null}};function la(V){var Y=V(p,0)[0]-V(-p,0)[0];function W(re,_e){var Pe=C(re)<p,q=V(Pe?re:re>0?re-y:re+y,_e),oe=(q[0]-q[1])*x,de=(q[0]+q[1])*x;if(Pe)return[oe,de];var Me=Y*x,Se=oe>0^de>0?-1:1;return[Se*oe-u(de)*Me,Se*de-u(oe)*Me]}return V.invert&&(W.invert=function(re,_e){var Pe=(re+_e)*x,q=(_e-re)*x,oe=C(Pe)<.5*Y&&C(q)<.5*Y;if(!oe){var de=Y*x,Me=Pe>0^q>0?-1:1,Se=-Me*re+(q>0?1:-1)*de,ze=-Me*_e+(Pe>0?1:-1)*de;Pe=(-Se-ze)*x,q=(Se-ze)*x}var Ye=V.invert(Pe,q);return oe||(Ye[0]+=Pe>0?y:-y),Ye}),(0,I.Z)(W).rotate([-90,-90,45]).clipAngle(179.999)}function ro(){return la(xn).scale(176.423)}function yl(){return la(zn).scale(111.48)}function ma(V,Y){if(!(0<=(Y=+Y)&&Y<=20))throw new Error("invalid digits");function W(Me){var Se=Me.length,ze=2,Ye=new Array(Se);for(Ye[0]=+Me[0].toFixed(Y),Ye[1]=+Me[1].toFixed(Y);ze<Se;)Ye[ze]=Me[ze],++ze;return Ye}function re(Me){return Me.map(W)}function _e(Me){for(var Se=W(Me[0]),ze=[Se],Ye=1;Ye<Me.length;Ye++){var Xe=W(Me[Ye]);(Xe.length>2||Xe[0]!=Se[0]||Xe[1]!=Se[1])&&(ze.push(Xe),Se=Xe)}return 1===ze.length&&Me.length>1&&ze.push(W(Me[Me.length-1])),ze}function Pe(Me){return Me.map(_e)}function q(Me){if(null==Me)return Me;var Se;switch(Me.type){case"GeometryCollection":Se={type:"GeometryCollection",geometries:Me.geometries.map(q)};break;case"Point":Se={type:"Point",coordinates:W(Me.coordinates)};break;case"MultiPoint":Se={type:Me.type,coordinates:re(Me.coordinates)};break;case"LineString":Se={type:Me.type,coordinates:_e(Me.coordinates)};break;case"MultiLineString":case"Polygon":Se={type:Me.type,coordinates:Pe(Me.coordinates)};break;case"MultiPolygon":Se={type:"MultiPolygon",coordinates:Me.coordinates.map(Pe)};break;default:return Me}return null!=Me.bbox&&(Se.bbox=Me.bbox),Se}function oe(Me){var Se={type:"Feature",properties:Me.properties,geometry:q(Me.geometry)};return null!=Me.id&&(Se.id=Me.id),null!=Me.bbox&&(Se.bbox=Me.bbox),Se}if(null!=V)switch(V.type){case"Feature":return oe(V);case"FeatureCollection":var de={type:"FeatureCollection",features:V.features.map(oe)};return null!=V.bbox&&(de.bbox=V.bbox),de;default:return q(V)}return V}function ho(V){var Y=d(V);function W(re,_e){var Pe=Y?g(re*Y/2)/Y:re/2;if(!_e)return[2*Pe,-V];var q=2*f(Pe*d(_e)),oe=1/g(_e);return[d(q)*oe,_e+(1-T(q))*oe-V]}return W.invert=function(re,_e){if(C(_e+=V)<h)return[Y?2*f(Y*re/2)/Y:re,0];var Pe,q=re*re+_e*_e,oe=0,de=10;do{var Me=g(oe),Se=1/T(oe),ze=q-2*_e*oe+oe*oe;oe-=Pe=(Me*ze+2*(oe-_e))/(2+ze*Se*Se+2*(oe-_e)*Me)}while(C(Pe)>h&&--de>0);var Ye=re*(Me=g(oe)),Xe=g(C(_e)<C(oe+1/Me)?.5*O(Ye):.5*P(Ye)+y/4)/d(oe);return[Y?2*f(Y*Xe)/Y:2*Xe,oe]},W}function Hr(){return qe(ho).scale(131.215)}var ua=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function ls(V,Y){var W,re=a(18,36*C(Y)/y),_e=c(re),Pe=re-_e,q=(W=ua[_e])[0],oe=W[1],de=(W=ua[++_e])[0],Me=W[1],Se=(W=ua[a(19,++_e)])[0],ze=W[1];return[V*(de+Pe*(Se-q)/2+Pe*Pe*(Se-2*de+q)/2),(Y>0?p:-p)*(Me+Pe*(ze-oe)/2+Pe*Pe*(ze-2*Me+oe)/2)]}function us(){return(0,I.Z)(ls).scale(152.63)}function js(V,Y){var W=function(q){function oe(de,Me){var Se=T(Me),ze=(q-1)/(q-Se*T(de));return[ze*Se*d(de),ze*d(Me)]}return oe.invert=function(de,Me){var Se=de*de+Me*Me,ze=R(Se),Ye=(q-R(1-Se*(q+1)/(q-1)))/((q-1)/ze+ze/(q-1));return[k(de*Ye,ze*R(1-Ye*Ye)),ze?O(Me*Ye/ze):0]},oe}(V);if(!Y)return W;var re=T(Y),_e=d(Y);function Pe(q,oe){var de=W(q,oe),Me=de[1],Se=Me*_e/(V-1)+re;return[de[0]*re/Se,Me/Se]}return Pe.invert=function(q,oe){var de=(V-1)/(V-1-oe*_e);return W.invert(de*q,de*oe*re)},Pe}function Us(){var V=2,Y=0,W=(0,I.r)(js),re=W(V,Y);return re.distance=function(_e){return arguments.length?W(V=+_e,Y):V},re.tilt=function(_e){return arguments.length?W(V,Y=_e*S):Y*D},re.scale(432.147).clipAngle(P(1/V)*D-1e-6)}ua.forEach(function(V){V[1]*=1.0144}),ls.invert=function(V,Y){var W=Y/p,re=90*W,_e=a(18,C(re/5)),Pe=s(0,c(_e));do{var q=ua[Pe][1],oe=ua[Pe+1][1],de=ua[a(19,Pe+2)][1],Me=de-q,Se=de-2*oe+q,ze=2*(C(W)-oe)/Me,Ye=Se/Me,Xe=ze*(1-Ye*ze*(1-2*Ye*ze));if(Xe>=0||1===Pe){re=(Y>=0?5:-5)*(Xe+_e);var tt,rt=50;do{Xe=(_e=a(18,C(re)/5))-(Pe=c(_e)),q=ua[Pe][1],oe=ua[Pe+1][1],de=ua[a(19,Pe+2)][1],re-=(tt=(Y>=0?p:-p)*(oe+Xe*(de-q)/2+Xe*Xe*(de-2*oe+q)/2)-Y)*D}while(C(tt)>w&&--rt>0);break}}while(--Pe>=0);var ft=ua[Pe][0],bt=ua[Pe+1][0],At=ua[a(19,Pe+2)][0];return[V/(bt+Xe*(At-ft)/2+Xe*Xe*(At-2*bt+ft)/2),re*S]};var Mi=1e-4,Ur=1e4,ts=-180,Sl=ts+Mi,Va=180,Qo=Va-Mi,La=-90,Oa=La+Mi,po=90,el=po-Mi;function Wo(V){return V.length>0}function Zi(V){return V===La||V===po?[0,V]:[ts,(Y=V,Math.floor(Y*Ur)/Ur)];var Y}function tl(V){var Y=V[0],W=V[1],re=!1;return Y<=Sl?(Y=ts,re=!0):Y>=Qo&&(Y=Va,re=!0),W<=Oa?(W=La,re=!0):W>=el&&(W=po,re=!0),re?[Y,W]:V}function cs(V){return V.map(tl)}function Uo(V,Y,W){for(var re=0,_e=V.length;re<_e;++re){var Pe=V[re].slice();W.push({index:-1,polygon:Y,ring:Pe});for(var q=0,oe=Pe.length;q<oe;++q){var de=Pe[q],Me=de[0],Se=de[1];if(Me<=Sl||Me>=Qo||Se<=Oa||Se>=el){Pe[q]=tl(de);for(var ze=q+1;ze<oe;++ze){var Ye=Pe[ze],Xe=Ye[0],tt=Ye[1];if(Xe>Sl&&Xe<Qo&&tt>Oa&&tt<el)break}if(ze===q+1)continue;if(q){var rt={index:-1,polygon:Y,ring:Pe.slice(0,q+1)};rt.ring[rt.ring.length-1]=Zi(Se),W[W.length-1]=rt}else W.pop();if(ze>=oe)break;W.push({index:-1,polygon:Y,ring:Pe=Pe.slice(ze-1)}),Pe[0]=Zi(Pe[0][1]),q=-1,oe=Pe.length}}}}function Ii(V){var Y,W,re,_e,Pe,q,oe=V.length,de={},Me={};for(Y=0;Y<oe;++Y)(re=(W=V[Y]).ring[0])[0]!==(Pe=W.ring[W.ring.length-1])[0]||re[1]!==Pe[1]?(W.index=Y,de[re]=Me[Pe]=W):(W.polygon.push(W.ring),V[Y]=null);for(Y=0;Y<oe;++Y)if(W=V[Y]){if(_e=Me[re=W.ring[0]],q=de[Pe=W.ring[W.ring.length-1]],delete de[re],delete Me[Pe],re[0]===Pe[0]&&re[1]===Pe[1]){W.polygon.push(W.ring);continue}_e?(delete Me[re],delete de[_e.ring[0]],_e.ring.pop(),V[_e.index]=null,W={index:-1,polygon:_e.polygon,ring:_e.ring.concat(W.ring)},_e===q?W.polygon.push(W.ring):(W.index=oe++,V.push(de[W.ring[0]]=Me[W.ring[W.ring.length-1]]=W))):q?(delete de[Pe],delete Me[q.ring[q.ring.length-1]],W.ring.pop(),W={index:oe++,polygon:q.polygon,ring:W.ring.concat(q.ring)},V[q.index]=null,V.push(de[W.ring[0]]=Me[W.ring[W.ring.length-1]]=W)):(W.ring.push(W.ring[0]),W.polygon.push(W.ring))}}function El(V){var Y={type:"Feature",geometry:Ha(V.geometry)};return null!=V.id&&(Y.id=V.id),null!=V.bbox&&(Y.bbox=V.bbox),null!=V.properties&&(Y.properties=V.properties),Y}function Ha(V){if(null==V)return V;var Y,W,re,_e;switch(V.type){case"GeometryCollection":Y={type:"GeometryCollection",geometries:V.geometries.map(Ha)};break;case"Point":Y={type:"Point",coordinates:tl(V.coordinates)};break;case"MultiPoint":case"LineString":Y={type:V.type,coordinates:cs(V.coordinates)};break;case"MultiLineString":Y={type:"MultiLineString",coordinates:V.coordinates.map(cs)};break;case"Polygon":var Pe=[];Uo(V.coordinates,Pe,W=[]),Ii(W),Y={type:"Polygon",coordinates:Pe};break;case"MultiPolygon":W=[],re=-1,_e=V.coordinates.length;for(var q=new Array(_e);++re<_e;)Uo(V.coordinates[re],q[re]=[],W);Ii(W),Y={type:"MultiPolygon",coordinates:q.filter(Wo)};break;default:return V}return null!=V.bbox&&(Y.bbox=V.bbox),Y}function ea(V){if(null==V)return V;switch(V.type){case"Feature":return El(V);case"FeatureCollection":var Y={type:"FeatureCollection",features:V.features.map(El)};return null!=V.bbox&&(Y.bbox=V.bbox),Y;default:return Ha(V)}}function nl(V,Y){var W=g(Y/2),re=d(_*W);return[V*(.74482-.34588*re*re),1.70711*W]}function Ju(){return(0,I.Z)(nl).scale(146.153)}function Fo(V,Y,W){var re=(0,zo.Z)(Y,W),_e=re(.5),Pe=(0,ct.Z)([-_e[0],-_e[1]])(Y),q=re.distance/2,oe=-O(d(Pe[1]*S)/d(q)),de=[-_e[0],-_e[1],-(Pe[0]>0?y-oe:oe)*D],Me=(0,I.Z)(V(q)).rotate(de),Se=(0,ct.Z)(de),ze=Me.center;return delete Me.rotate,Me.center=function(Ye){return arguments.length?ze(Se(Ye)):Se.invert(ze())},Me.clipAngle(90)}function oo(V){var Y=T(V);function W(re,_e){var Pe=(0,Pi.M)(re,_e);return Pe[0]*=Y,Pe}return W.invert=function(re,_e){return Pi.M.invert(re/Y,_e)},W}function fs(){return rl([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function rl(V,Y){return Fo(oo,V,Y)}function Vs(V){if(!(V*=2))return le.N;var Y=-V/2,W=-Y,re=V*V,_e=g(W),Pe=.5/d(W);function q(oe,de){var Me=P(T(de)*T(oe-Y)),Se=P(T(de)*T(oe-W));return[((Me*=Me)-(Se*=Se))/(2*V),(de<0?-1:1)*R(4*re*Se-(re-Me+Se)*(re-Me+Se))/(2*V)]}return q.invert=function(oe,de){var Me,Se,ze=de*de,Ye=T(R(ze+(Me=oe+Y)*Me)),Xe=T(R(ze+(Me=oe+W)*Me));return[k(Se=Ye-Xe,Me=(Ye+Xe)*_e),(de<0?-1:1)*P(R(Me*Me+Se*Se)*Pe)]},q}function Qu(){return Cl([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Cl(V,Y){return Fo(Vs,V,Y)}function Xl(V,Y){if(C(Y)<h)return[V,0];var W=C(Y/p),re=O(W);if(C(V)<h||C(C(Y)-p)<h)return[0,u(Y)*y*g(re/2)];var _e=T(re),Pe=C(y/V-V/y)/2,q=Pe*Pe,oe=_e/(W+_e-1),de=oe*(2/W-1),Me=de*de,Se=Me+q,ze=oe-Me,Ye=q+oe;return[u(V)*y*(Pe*ze+R(q*ze*ze-Se*(oe*oe-Me)))/Se,u(Y)*y*(de*Ye-Pe*R((q+1)*Se-Ye*Ye))/Se]}function ta(){return(0,I.Z)(Xl).scale(79.4183)}function ga(V,Y){if(C(Y)<h)return[V,0];var W=C(Y/p),re=O(W);if(C(V)<h||C(C(Y)-p)<h)return[0,u(Y)*y*g(re/2)];var _e=T(re),Pe=C(y/V-V/y)/2,q=Pe*Pe,oe=_e*(R(1+q)-Pe*_e)/(1+q*W*W);return[u(V)*y*oe,u(Y)*y*R(1-oe*(2*Pe+oe))]}function Kr(){return(0,I.Z)(ga).scale(79.4183)}function ti(V,Y){if(C(Y)<h)return[V,0];var W=Y/p,re=O(W);if(C(V)<h||C(C(Y)-p)<h)return[0,y*g(re/2)];var _e=(y/V-V/y)/2,Pe=W/(1+T(re));return[y*(u(V)*R(_e*_e+1-Pe*Pe)-_e),y*Pe]}function hu(){return(0,I.Z)(ti).scale(79.4183)}function va(V,Y){if(!Y)return[V,0];var W=C(Y);if(!V||W===p)return[0,Y];var re=W/p,_e=re*re,Pe=(8*re-_e*(_e+2)-5)/(2*_e*(re-1)),q=Pe*Pe,oe=re*Pe,de=_e+q+2*oe,Me=re+3*Pe,Se=V/p,ze=Se+1/Se,Ye=u(C(V)-p)*R(ze*ze-4),Xe=Ye*Ye,tt=(Ye*(de+q-1)+2*R(de*(_e+q*Xe-1)+(1-_e)*(_e*(Me*Me+4*q)+12*oe*q+4*q*q)))/(4*de+Xe);return[u(V)*p*tt,u(Y)*p*R(1+Ye*C(tt)-tt*tt)]}function il(){return(0,I.Z)(va).scale(127.16)}function ya(V,Y,W,re){var _e=y/3;V=s(V,h),Y=s(Y,h),V=a(V,p),Y=a(Y,y-h),W=s(W,0),W=a(W,100-h);var Pe=(re=s(re,h))/100,q=P((W/100+1)*T(_e))/_e,oe=d(V)/d(q*p),de=Y/y,Me=R(Pe*d(V/2)/d(Y/2));return function(Se,ze,Ye,Xe,tt){function rt(ft,bt){var At=Ye*d(Xe*bt),Ut=R(1-At*At),qt=R(2/(1+Ut*T(ft*=tt)));return[Se*Ut*qt*d(ft),ze*At*qt]}return rt.invert=function(ft,bt){var At=ft/Se,Ut=bt/ze,qt=R(At*At+Ut*Ut),jt=2*O(qt/2);return[k(ft*g(jt),Se*qt)/tt,qt&&O(bt*d(jt)/(ze*Ye*qt))/Xe]},rt}(Me/R(de*oe*q),1/(Me*R(de*oe*q)),oe,q,de)}function pu(){var V=65*S,Y=60*S,W=20,re=200,_e=(0,I.r)(ya),Pe=_e(V,Y,W,re);return Pe.poleline=function(q){return arguments.length?_e(V=+q*S,Y,W,re):V*D},Pe.parallels=function(q){return arguments.length?_e(V,Y=+q*S,W,re):Y*D},Pe.inflation=function(q){return arguments.length?_e(V,Y,W=+q,re):W},Pe.ratio=function(q){return arguments.length?_e(V,Y,W,re=+q):re},Pe.scale(163.775)}function xa(){return pu().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}nl.invert=function(V,Y){var W=Y/1.70711,re=d(_*W);return[V/(.74482-.34588*re*re),2*f(W)]},Xl.invert=function(V,Y){if(C(Y)<h)return[V,0];if(C(V)<h)return[0,p*d(2*f(Y/y))];var W=(V/=y)*V,re=(Y/=y)*Y,_e=W+re,Pe=_e*_e,q=-C(Y)*(1+_e),oe=q-2*re+W,de=-2*q+1+2*re+Pe,Me=re/de+(2*oe*oe*oe/(de*de*de)-9*q*oe/(de*de))/27,Se=(q-oe*oe/(3*de))/de,ze=2*R(-Se/3),Ye=P(3*Me/(Se*ze))/3;return[y*(_e-1+R(1+2*(W-re)+Pe))/(2*V),u(Y)*y*(-ze*T(Ye+y/3)-oe/(3*de))]},ga.invert=function(V,Y){if(!V)return[0,p*d(2*f(Y/y))];var W=C(V/y),re=(1-W*W-(Y/=y)*Y)/(2*W),_e=R(re*re+1);return[u(V)*y*(_e-re),u(Y)*p*d(2*k(R((1-2*re*W)*(re+_e)-W),R(_e+re+W)))]},ti.invert=function(V,Y){if(!Y)return[V,0];var W=Y/y,re=(y*y*(1-W*W)-V*V)/(2*y*V);return[V?y*(u(V)*R(re*re+1)-re):0,p*d(2*f(W))]},va.invert=function(V,Y){var W;if(!V||!Y)return[V,Y];Y/=y;var re=u(V)*V/p,_e=(re*re-1+4*Y*Y)/C(re),Pe=_e*_e,q=2*Y,oe=50;do{var de=q*q,Me=(8*q-de*(de+2)-5)/(2*de*(q-1)),Se=(3*q-de*q-10)/(2*de*q),ze=Me*Me,Ye=q*Me,Xe=q+Me,tt=Xe*Xe,rt=q+3*Me,ft=-2*Xe*(4*Ye*ze+(1-4*de+3*de*de)*(1+Se)+ze*(14*de-6-Pe+(8*de-8-2*Pe)*Se)+Ye*(12*de-8+(10*de-10-Pe)*Se)),bt=R(tt*(de+ze*Pe-1)+(1-de)*(de*(rt*rt+4*ze)+ze*(12*Ye+4*ze)));q-=W=(_e*(tt+ze-1)+2*bt-re*(4*tt+Pe))/(_e*(2*Me*Se+2*Xe*(1+Se))+ft/bt-8*Xe*(_e*(-1+ze+tt)+2*bt)*(1+Se)/(Pe+4*tt))}while(W>h&&--oe>0);return[u(V)*(R(_e*_e+4)+_e)*y/4,p*q]};var qa=4*y+3*R(3),ol=2*R(2*y*R(3)/qa),ui=Ie(ol*R(3)/y,ol,qa/6);function Vo(){return(0,I.Z)(ui).scale(176.84)}function Ss(V,Y){return[V*R(1-3*Y*Y/(y*y)),Y]}function Ga(){return(0,I.Z)(Ss).scale(152.63)}function Dl(V,Y){var W=T(Y),re=T(V)*W,_e=1-re,Pe=T(V=k(d(V)*W,-d(Y))),q=d(V);return[q*(W=R(1-re*re))-Pe*_e,-Pe*W-q*_e]}function Kl(){return(0,I.Z)(Dl).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function Jl(V,Y){var W=$(V,Y);return[(W[0]+V/p)/2,(W[1]+Y)/2]}function al(){return(0,I.Z)(Jl).scale(158.837)}Ss.invert=function(V,Y){return[V/R(1-3*Y*Y/(y*y)),Y]},Dl.invert=function(V,Y){var W=(V*V+Y*Y)/-2,re=R(-W*(2+W)),_e=Y*W+V*re,Pe=V*W-Y*re,q=R(Pe*Pe+_e*_e);return[k(re*_e,q*(1+W)),q?-O(re*Pe/q):0]},Jl.invert=function(V,Y){var W=V,re=Y,_e=25;do{var Pe,q=T(re),oe=d(re),de=d(2*re),Me=oe*oe,Se=q*q,ze=d(W),Ye=T(W/2),Xe=d(W/2),tt=Xe*Xe,rt=1-Se*Ye*Ye,ft=rt?P(q*Ye)*R(Pe=1/rt):Pe=0,bt=.5*(2*ft*q*Xe+W/p)-V,At=.5*(ft*oe+re)-Y,Ut=.5*Pe*(Se*tt+ft*q*Ye*Me)+.5/p,qt=Pe*(ze*de/4-ft*oe*Xe),jt=.125*Pe*(de*Xe-ft*oe*Se*ze),Kt=.5*Pe*(Me*Ye+ft*tt*q)+.5,Vt=qt*jt-Kt*Ut,gn=(At*qt-bt*Kt)/Vt,ln=(bt*jt-At*Ut)/Vt;W-=gn,re-=ln}while((C(gn)>h||C(ln)>h)&&--_e>0);return[W,re]}},33940:function(se,U,r){"use strict";function I(){return new C}function C(){this.reset()}r.d(U,{Z:function(){return I}}),C.prototype={constructor:C,reset:function(){this.s=this.t=0},add:function(T){k(f,T,this.t),k(this,f.s,this.s),this.s?this.t+=f.t:this.s=f.t},valueOf:function(){return this.s}};var f=new C;function k(T,v,c){var i=T.s=v+c,s=i-v;T.t=v-(i-s)+(c-s)}},97860:function(se,U,r){"use strict";r.d(U,{L9:function(){return a},ZP:function(){return w},gL:function(){return l}});var I,C,f,k,T,v=r(33940),c=r(39695),i=r(73182),s=r(72736),a=(0,v.Z)(),o=(0,v.Z)(),l={point:i.Z,lineStart:i.Z,lineEnd:i.Z,polygonStart:function(){a.reset(),l.lineStart=u,l.lineEnd=d},polygonEnd:function(){var y=+a;o.add(y<0?c.BZ+y:y),this.lineStart=this.lineEnd=this.point=i.Z},sphere:function(){o.add(c.BZ)}};function u(){l.point=g}function d(){h(I,C)}function g(y,p){l.point=h,I=y,C=p,f=y*=c.uR,k=(0,c.mC)(p=(p*=c.uR)/2+c.pu),T=(0,c.O$)(p)}function h(y,p){p=(p*=c.uR)/2+c.pu;var _=(y*=c.uR)-f,x=_>=0?1:-1,b=x*_,M=(0,c.mC)(p),m=(0,c.O$)(p),D=T*m,S=k*M+D*(0,c.mC)(b),O=D*x*(0,c.O$)(b);a.add((0,c.fv)(O,S)),f=y,k=M,T=m}function w(y){return o.reset(),(0,s.Z)(y,l),2*o}},77338:function(se,U,r){"use strict";r.d(U,{Z:function(){return P}});var I,C,f,k,T,v,c,i,s,a,o=r(33940),l=r(97860),u=r(7620),d=r(39695),g=r(72736),h=(0,o.Z)(),w={point:y,lineStart:_,lineEnd:x,polygonStart:function(){w.point=b,w.lineStart=M,w.lineEnd=m,h.reset(),l.gL.polygonStart()},polygonEnd:function(){l.gL.polygonEnd(),w.point=y,w.lineStart=_,w.lineEnd=x,l.L9<0?(I=-(f=180),C=-(k=90)):h>d.Ho?k=90:h<-d.Ho&&(C=-90),a[0]=I,a[1]=f},sphere:function(){I=-(f=180),C=-(k=90)}};function y(R,F){s.push(a=[I=R,f=R]),F<C&&(C=F),F>k&&(k=F)}function p(R,F){var B=(0,u.Og)([R*d.uR,F*d.uR]);if(i){var J=(0,u.T5)(i,B),$=(0,u.T5)([J[1],-J[0],0],J);(0,u.iJ)($),$=(0,u.Y1)($);var G,H=R-T,X=H>0?1:-1,K=$[0]*d.RW*X,ue=(0,d.Wn)(H)>180;ue^(X*T<K&&K<X*R)?(G=$[1]*d.RW)>k&&(k=G):ue^(X*T<(K=(K+360)%360-180)&&K<X*R)?(G=-$[1]*d.RW)<C&&(C=G):(F<C&&(C=F),F>k&&(k=F)),ue?R<T?D(I,R)>D(I,f)&&(f=R):D(R,f)>D(I,f)&&(I=R):f>=I?(R<I&&(I=R),R>f&&(f=R)):R>T?D(I,R)>D(I,f)&&(f=R):D(R,f)>D(I,f)&&(I=R)}else s.push(a=[I=R,f=R]);F<C&&(C=F),F>k&&(k=F),i=B,T=R}function _(){w.point=p}function x(){a[0]=I,a[1]=f,w.point=y,i=null}function b(R,F){if(i){var B=R-T;h.add((0,d.Wn)(B)>180?B+(B>0?360:-360):B)}else v=R,c=F;l.gL.point(R,F),p(R,F)}function M(){l.gL.lineStart()}function m(){b(v,c),l.gL.lineEnd(),(0,d.Wn)(h)>d.Ho&&(I=-(f=180)),a[0]=I,a[1]=f,i=null}function D(R,F){return(F-=R)<0?F+360:F}function S(R,F){return R[0]-F[0]}function O(R,F){return R[0]<=R[1]?R[0]<=F&&F<=R[1]:F<R[0]||R[1]<F}function P(R){var F,B,J,z,$,G,H;if(k=f=-(I=C=1/0),s=[],(0,g.Z)(R,w),B=s.length){for(s.sort(S),F=1,$=[J=s[0]];F<B;++F)O(J,(z=s[F])[0])||O(J,z[1])?(D(J[0],z[1])>D(J[0],J[1])&&(J[1]=z[1]),D(z[0],J[1])>D(J[0],J[1])&&(J[0]=z[0])):$.push(J=z);for(G=-1/0,F=0,J=$[B=$.length-1];F<=B;J=z,++F)(H=D(J[1],(z=$[F])[0]))>G&&(G=H,I=z[0],f=J[1])}return s=a=null,I===1/0||C===1/0?[[NaN,NaN],[NaN,NaN]]:[[I,C],[f,k]]}},7620:function(se,U,r){"use strict";r.d(U,{Og:function(){return f},T:function(){return c},T5:function(){return T},Y1:function(){return C},iJ:function(){return i},j9:function(){return k},s0:function(){return v}});var I=r(39695);function C(s){return[(0,I.fv)(s[1],s[0]),(0,I.ZR)(s[2])]}function f(s){var a=s[0],o=s[1],l=(0,I.mC)(o);return[l*(0,I.mC)(a),l*(0,I.O$)(a),(0,I.O$)(o)]}function k(s,a){return s[0]*a[0]+s[1]*a[1]+s[2]*a[2]}function T(s,a){return[s[1]*a[2]-s[2]*a[1],s[2]*a[0]-s[0]*a[2],s[0]*a[1]-s[1]*a[0]]}function v(s,a){s[0]+=a[0],s[1]+=a[1],s[2]+=a[2]}function c(s,a){return[s[0]*a,s[1]*a,s[2]*a]}function i(s){var a=(0,I._b)(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);s[0]/=a,s[1]/=a,s[2]/=a}},66624:function(se,U,r){"use strict";r.d(U,{Z:function(){return B}});var I,C,f,k,T,v,c,i,s,a,o,l,u,d,g,h,w=r(39695),y=r(73182),p=r(72736),_={sphere:y.Z,point:x,lineStart:M,lineEnd:S,polygonStart:function(){_.lineStart=O,_.lineEnd=P},polygonEnd:function(){_.lineStart=M,_.lineEnd=S}};function x(J,z){J*=w.uR;var $=(0,w.mC)(z*=w.uR);b($*(0,w.mC)(J),$*(0,w.O$)(J),(0,w.O$)(z))}function b(J,z,$){++I,f+=(J-f)/I,k+=(z-k)/I,T+=($-T)/I}function M(){_.point=m}function m(J,z){J*=w.uR;var $=(0,w.mC)(z*=w.uR);d=$*(0,w.mC)(J),g=$*(0,w.O$)(J),h=(0,w.O$)(z),_.point=D,b(d,g,h)}function D(J,z){J*=w.uR;var $=(0,w.mC)(z*=w.uR),G=$*(0,w.mC)(J),H=$*(0,w.O$)(J),X=(0,w.O$)(z),K=(0,w.fv)((0,w._b)((K=g*X-h*H)*K+(K=h*G-d*X)*K+(K=d*H-g*G)*K),d*G+g*H+h*X);C+=K,v+=K*(d+(d=G)),c+=K*(g+(g=H)),i+=K*(h+(h=X)),b(d,g,h)}function S(){_.point=x}function O(){_.point=R}function P(){F(l,u),_.point=x}function R(J,z){l=J,u=z,J*=w.uR,z*=w.uR,_.point=F;var $=(0,w.mC)(z);d=$*(0,w.mC)(J),g=$*(0,w.O$)(J),h=(0,w.O$)(z),b(d,g,h)}function F(J,z){J*=w.uR;var $=(0,w.mC)(z*=w.uR),G=$*(0,w.mC)(J),H=$*(0,w.O$)(J),X=(0,w.O$)(z),K=g*X-h*H,ue=h*G-d*X,ae=d*H-g*G,ne=(0,w._b)(K*K+ue*ue+ae*ae),Q=(0,w.ZR)(ne),ie=ne&&-Q/ne;s+=ie*K,a+=ie*ue,o+=ie*ae,C+=Q,v+=Q*(d+(d=G)),c+=Q*(g+(g=H)),i+=Q*(h+(h=X)),b(d,g,h)}function B(J){I=C=f=k=T=v=c=i=s=a=o=0,(0,p.Z)(J,_);var z=s,$=a,G=o,H=z*z+$*$+G*G;return H<w.aW&&(z=v,$=c,G=i,C<w.Ho&&(z=f,$=k,G=T),(H=z*z+$*$+G*G)<w.aW)?[NaN,NaN]:[(0,w.fv)($,z)*w.RW,(0,w.ZR)(G/(0,w._b)(H))*w.RW]}},7613:function(se,U,r){"use strict";r.d(U,{m:function(){return T},Z:function(){return c}});var I=r(7620);function C(i){return function(){return i}}var f=r(39695),k=r(49386);function T(i,s,a,o,l,u){if(a){var d=(0,f.mC)(s),g=(0,f.O$)(s),h=o*a;null==l?(l=s+o*f.BZ,u=s-h/2):(l=v(d,l),u=v(d,u),(o>0?l<u:l>u)&&(l+=o*f.BZ));for(var w,y=l;o>0?y>u:y<u;y-=h)w=(0,I.Y1)([d,-g*(0,f.mC)(y),-g*(0,f.O$)(y)]),i.point(w[0],w[1])}}function v(i,s){(s=(0,I.Og)(s))[0]-=i,(0,I.iJ)(s);var a=(0,f.Kh)(-s[1]);return((-s[2]<0?-a:a)+f.BZ-f.Ho)%f.BZ}function c(){var i,s,a=C([0,0]),o=C(90),l=C(6),u={point:function(g,h){i.push(g=s(g,h)),g[0]*=f.RW,g[1]*=f.RW}};function d(){var g=a.apply(this,arguments),h=o.apply(this,arguments)*f.uR,w=l.apply(this,arguments)*f.uR;return i=[],s=(0,k.I)(-g[0]*f.uR,-g[1]*f.uR,0).invert,T(u,h,w,1),g={type:"Polygon",coordinates:[i]},i=s=null,g}return d.center=function(g){return arguments.length?(a="function"==typeof g?g:C([+g[0],+g[1]]),d):a},d.radius=function(g){return arguments.length?(o="function"==typeof g?g:C(+g),d):o},d.precision=function(g){return arguments.length?(l="function"==typeof g?g:C(+g),d):l},d}},87070:function(se,U,r){"use strict";var I=r(97023),C=r(39695);U.Z=(0,I.Z)(function(){return!0},function(f){var k,T=NaN,v=NaN,c=NaN;return{lineStart:function(){f.lineStart(),k=1},point:function(i,s){var l,u,d,g,h,w,y,a=i>0?C.pi:-C.pi,o=(0,C.Wn)(i-T);(0,C.Wn)(o-C.pi)<C.Ho?(f.point(T,v=(v+s)/2>0?C.ou:-C.ou),f.point(c,v),f.lineEnd(),f.lineStart(),f.point(a,v),f.point(i,v),k=0):c!==a&&o>=C.pi&&((0,C.Wn)(T-c)<C.Ho&&(T-=c*C.Ho),(0,C.Wn)(i-a)<C.Ho&&(i-=a*C.Ho),u=v,g=s,y=(0,C.O$)((l=T)-(d=i)),v=(0,C.Wn)(y)>C.Ho?(0,C.z4)(((0,C.O$)(u)*(w=(0,C.mC)(g))*(0,C.O$)(d)-(0,C.O$)(g)*(h=(0,C.mC)(u))*(0,C.O$)(l))/(h*w*y)):(u+g)/2,f.point(c,v),f.lineEnd(),f.lineStart(),f.point(a,v),k=0),f.point(T=i,v=s),c=a},lineEnd:function(){f.lineEnd(),T=v=NaN},clean:function(){return 2-k}}},function(f,k,T,v){var c;if(null==f)v.point(-C.pi,c=T*C.ou),v.point(0,c),v.point(C.pi,c),v.point(C.pi,0),v.point(C.pi,-c),v.point(0,-c),v.point(-C.pi,-c),v.point(-C.pi,0),v.point(-C.pi,c);else if((0,C.Wn)(f[0]-k[0])>C.Ho){var i=f[0]<k[0]?C.pi:-C.pi;v.point(-i,c=T*i/2),v.point(0,c),v.point(i,c)}else v.point(k[0],k[1])},[-C.pi,-C.ou])},85272:function(se,U,r){"use strict";r.d(U,{Z:function(){return C}});var I=r(73182);function C(){var f,k=[];return{point:function(T,v,c){f.push([T,v,c])},lineStart:function(){k.push(f=[])},lineEnd:I.Z,rejoin:function(){k.length>1&&k.push(k.pop().concat(k.shift()))},result:function(){var T=k;return k=[],f=null,T}}}},1457:function(se,U,r){"use strict";r.d(U,{Z:function(){return v}});var I=r(7620),C=r(7613),f=r(39695),k=r(67108),T=r(97023);function v(c){var i=(0,f.mC)(c),s=6*f.uR,a=i>0,o=(0,f.Wn)(i)>f.Ho;function l(g,h){return(0,f.mC)(g)*(0,f.mC)(h)>i}function u(g,h,w){var y=(0,I.Og)(g),p=(0,I.Og)(h),_=[1,0,0],x=(0,I.T5)(y,p),b=(0,I.j9)(x,x),M=x[0],m=b-M*M;if(!m)return!w&&g;var D=i*b/m,S=-i*M/m,O=(0,I.T5)(_,x),P=(0,I.T)(_,D),R=(0,I.T)(x,S);(0,I.s0)(P,R);var F=O,B=(0,I.j9)(P,F),J=(0,I.j9)(F,F),z=B*B-J*((0,I.j9)(P,P)-1);if(!(z<0)){var $=(0,f._b)(z),G=(0,I.T)(F,(-B-$)/J);if((0,I.s0)(G,P),G=(0,I.Y1)(G),!w)return G;var H,X=g[0],K=h[0],ue=g[1],ae=h[1];K<X&&(H=X,X=K,K=H);var ne=K-X,Q=(0,f.Wn)(ne-f.pi)<f.Ho;if(!Q&&ae<ue&&(H=ue,ue=ae,ae=H),Q||ne<f.Ho?Q?ue+ae>0^G[1]<((0,f.Wn)(G[0]-X)<f.Ho?ue:ae):ue<=G[1]&&G[1]<=ae:ne>f.pi^(X<=G[0]&&G[0]<=K)){var ie=(0,I.T)(F,(-B+$)/J);return(0,I.s0)(ie,P),[G,(0,I.Y1)(ie)]}}}function d(g,h){var w=a?c:f.pi-c,y=0;return g<-w?y|=1:g>w&&(y|=2),h<-w?y|=4:h>w&&(y|=8),y}return(0,T.Z)(l,function(g){var h,w,y,p,_;return{lineStart:function(){p=y=!1,_=1},point:function(x,b){var M,m=[x,b],D=l(x,b),S=a?D?0:d(x,b):D?d(x+(x<0?f.pi:-f.pi),b):0;if(!h&&(p=y=D)&&g.lineStart(),D!==y&&(!(M=u(h,m))||(0,k.Z)(h,M)||(0,k.Z)(m,M))&&(m[2]=1),D!==y)_=0,D?(g.lineStart(),M=u(m,h),g.point(M[0],M[1])):(M=u(h,m),g.point(M[0],M[1],2),g.lineEnd()),h=M;else if(o&&h&&a^D){var O;S&w||!(O=u(m,h,!0))||(_=0,a?(g.lineStart(),g.point(O[0][0],O[0][1]),g.point(O[1][0],O[1][1]),g.lineEnd()):(g.point(O[1][0],O[1][1]),g.lineEnd(),g.lineStart(),g.point(O[0][0],O[0][1],3)))}!D||h&&(0,k.Z)(h,m)||g.point(m[0],m[1]),h=m,y=D,w=S},lineEnd:function(){y&&g.lineEnd(),h=null},clean:function(){return _|(p&&y)<<1}}},function(g,h,w,y){(0,C.m)(y,c,s,w,g,h)},a?[0,-c]:[-f.pi,c-f.pi])}},97023:function(se,U,r){"use strict";r.d(U,{Z:function(){return v}});var I=r(85272),C=r(46225),f=r(39695),k=r(23071),T=r(33064);function v(s,a,o,l){return function(u){var d,g,h,w=a(u),y=(0,I.Z)(),p=a(y),_=!1,x={point:b,lineStart:m,lineEnd:D,polygonStart:function(){x.point=S,x.lineStart=O,x.lineEnd=P,g=[],d=[]},polygonEnd:function(){x.point=b,x.lineStart=m,x.lineEnd=D,g=(0,T.TS)(g);var R=(0,k.Z)(d,l);g.length?(_||(u.polygonStart(),_=!0),(0,C.Z)(g,i,R,o,u)):R&&(_||(u.polygonStart(),_=!0),u.lineStart(),o(null,null,1,u),u.lineEnd()),_&&(u.polygonEnd(),_=!1),g=d=null},sphere:function(){u.polygonStart(),u.lineStart(),o(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function b(R,F){s(R,F)&&u.point(R,F)}function M(R,F){w.point(R,F)}function m(){x.point=M,w.lineStart()}function D(){x.point=b,w.lineEnd()}function S(R,F){h.push([R,F]),p.point(R,F)}function O(){p.lineStart(),h=[]}function P(){S(h[0][0],h[0][1]),p.lineEnd();var R,F,B,J,z=p.clean(),$=y.result(),G=$.length;if(h.pop(),d.push(h),h=null,G)if(1&z){if((F=(B=$[0]).length-1)>0){for(_||(u.polygonStart(),_=!0),u.lineStart(),R=0;R<F;++R)u.point((J=B[R])[0],J[1]);u.lineEnd()}}else G>1&&2&z&&$.push($.pop().concat($.shift())),g.push($.filter(c))}return x}}function c(s){return s.length>1}function i(s,a){return((s=s.x)[0]<0?s[1]-f.ou-f.Ho:f.ou-s[1])-((a=a.x)[0]<0?a[1]-f.ou-f.Ho:f.ou-a[1])}},87605:function(se,U,r){"use strict";r.d(U,{Z:function(){return c}});var I=r(39695),C=r(85272),f=r(46225),k=r(33064),T=1e9,v=-T;function c(i,s,a,o){function l(w,y){return i<=w&&w<=a&&s<=y&&y<=o}function u(w,y,p,_){var x=0,b=0;if(null==w||(x=d(w,p))!==(b=d(y,p))||h(w,y)<0^p>0)do{_.point(0===x||3===x?i:a,x>1?o:s)}while((x=(x+p+4)%4)!==b);else _.point(y[0],y[1])}function d(w,y){return(0,I.Wn)(w[0]-i)<I.Ho?y>0?0:3:(0,I.Wn)(w[0]-a)<I.Ho?y>0?2:1:(0,I.Wn)(w[1]-s)<I.Ho?y>0?1:0:y>0?3:2}function g(w,y){return h(w.x,y.x)}function h(w,y){var p=d(w,1),_=d(y,1);return p!==_?p-_:0===p?y[1]-w[1]:1===p?w[0]-y[0]:2===p?w[1]-y[1]:y[0]-w[0]}return function(w){var y,p,_,x,b,M,m,D,S,O,P,R=w,F=(0,C.Z)(),B={point:J,lineStart:function(){B.point=z,p&&p.push(_=[]),O=!0,S=!1,m=D=NaN},lineEnd:function(){y&&(z(x,b),M&&S&&F.rejoin(),y.push(F.result())),B.point=J,S&&R.lineEnd()},polygonStart:function(){R=F,y=[],p=[],P=!0},polygonEnd:function(){var $=function(){for(var X=0,K=0,ue=p.length;K<ue;++K)for(var ae,ne,Q=p[K],ie=1,le=Q.length,fe=Q[0],he=fe[0],pe=fe[1];ie<le;++ie)ae=he,ne=pe,he=(fe=Q[ie])[0],pe=fe[1],ne<=o?pe>o&&(he-ae)*(o-ne)>(pe-ne)*(i-ae)&&++X:pe<=o&&(he-ae)*(o-ne)<(pe-ne)*(i-ae)&&--X;return X}(),G=P&&$,H=(y=(0,k.TS)(y)).length;(G||H)&&(w.polygonStart(),G&&(w.lineStart(),u(null,null,1,w),w.lineEnd()),H&&(0,f.Z)(y,g,$,u,w),w.polygonEnd()),R=w,y=p=_=null}};function J($,G){l($,G)&&R.point($,G)}function z($,G){var H=l($,G);if(p&&_.push([$,G]),O)x=$,b=G,M=H,O=!1,H&&(R.lineStart(),R.point($,G));else if(H&&S)R.point($,G);else{var X=[m=Math.max(v,Math.min(T,m)),D=Math.max(v,Math.min(T,D))],K=[$=Math.max(v,Math.min(T,$)),G=Math.max(v,Math.min(T,G))];!function(ue,ae,ne,Q,ie,le){var fe,he=ue[0],pe=ue[1],xe=0,Ee=1,Re=ae[0]-he,ke=ae[1]-pe;if(fe=ne-he,Re||!(fe>0)){if(fe/=Re,Re<0){if(fe<xe)return;fe<Ee&&(Ee=fe)}else if(Re>0){if(fe>Ee)return;fe>xe&&(xe=fe)}if(fe=ie-he,Re||!(fe<0)){if(fe/=Re,Re<0){if(fe>Ee)return;fe>xe&&(xe=fe)}else if(Re>0){if(fe<xe)return;fe<Ee&&(Ee=fe)}if(fe=Q-pe,ke||!(fe>0)){if(fe/=ke,ke<0){if(fe<xe)return;fe<Ee&&(Ee=fe)}else if(ke>0){if(fe>Ee)return;fe>xe&&(xe=fe)}if(fe=le-pe,ke||!(fe<0)){if(fe/=ke,ke<0){if(fe>Ee)return;fe>xe&&(xe=fe)}else if(ke>0){if(fe<xe)return;fe<Ee&&(Ee=fe)}return xe>0&&(ue[0]=he+xe*Re,ue[1]=pe+xe*ke),Ee<1&&(ae[0]=he+Ee*Re,ae[1]=pe+Ee*ke),!0}}}}}(X,K,i,s,a,o)?H&&(R.lineStart(),R.point($,G),P=!1):(S||(R.lineStart(),R.point(X[0],X[1])),R.point(K[0],K[1]),H||R.lineEnd(),P=!1)}m=$,D=G,S=H}return B}}},46225:function(se,U,r){"use strict";r.d(U,{Z:function(){return k}});var I=r(67108),C=r(39695);function f(v,c,i,s){this.x=v,this.z=c,this.o=i,this.e=s,this.v=!1,this.n=this.p=null}function k(v,c,i,s,a){var o,l,u=[],d=[];if(v.forEach(function(_){if(!((x=_.length-1)<=0)){var x,b,M=_[0],m=_[x];if((0,I.Z)(M,m)){if(!M[2]&&!m[2]){for(a.lineStart(),o=0;o<x;++o)a.point((M=_[o])[0],M[1]);return void a.lineEnd()}m[0]+=2*C.Ho}u.push(b=new f(M,_,null,!0)),d.push(b.o=new f(M,null,b,!1)),u.push(b=new f(m,_,null,!1)),d.push(b.o=new f(m,null,b,!0))}}),u.length){for(d.sort(c),T(u),T(d),o=0,l=d.length;o<l;++o)d[o].e=i=!i;for(var g,h,w=u[0];;){for(var y=w,p=!0;y.v;)if((y=y.n)===w)return;g=y.z,a.lineStart();do{if(y.v=y.o.v=!0,y.e){if(p)for(o=0,l=g.length;o<l;++o)a.point((h=g[o])[0],h[1]);else s(y.x,y.n.x,1,a);y=y.n}else{if(p)for(o=(g=y.p.z).length-1;o>=0;--o)a.point((h=g[o])[0],h[1]);else s(y.x,y.p.x,-1,a);y=y.p}g=(y=y.o).z,p=!p}while(!y.v);a.lineEnd()}}}function T(v){if(c=v.length){for(var c,i,s=0,a=v[0];++s<c;)a.n=i=v[s],i.p=a,a=i;a.n=i=v[0],i.p=a}}},96059:function(se,U,r){"use strict";function I(C,f){function k(T,v){return T=C(T,v),f(T[0],T[1])}return C.invert&&f.invert&&(k.invert=function(T,v){return(T=f.invert(T,v))&&C.invert(T[0],T[1])}),k}r.d(U,{Z:function(){return I}})},8593:function(se,U,r){"use strict";function I(C){return C}r.d(U,{Z:function(){return I}})},27362:function(se,U,r){"use strict";r.r(U),r.d(U,{geoAlbers:function(){return Et},geoAlbersUsa:function(){return Nt},geoArea:function(){return I.ZP},geoAzimuthalEqualArea:function(){return _t.Z},geoAzimuthalEqualAreaRaw:function(){return _t.l},geoAzimuthalEquidistant:function(){return Mt.Z},geoAzimuthalEquidistantRaw:function(){return Mt.N},geoBounds:function(){return C.Z},geoCentroid:function(){return f.Z},geoCircle:function(){return k.Z},geoClipAntimeridian:function(){return T.Z},geoClipCircle:function(){return v.Z},geoClipExtent:function(){return i},geoClipRectangle:function(){return c.Z},geoConicConformal:function(){return cn},geoConicConformalRaw:function(){return on},geoConicEqualArea:function(){return St},geoConicEqualAreaRaw:function(){return kt},geoConicEquidistant:function(){return Fn},geoConicEquidistantRaw:function(){return Cn},geoContains:function(){return $},geoDistance:function(){return D},geoEqualEarth:function(){return _n},geoEqualEarthRaw:function(){return In},geoEquirectangular:function(){return tn.Z},geoEquirectangularRaw:function(){return tn.k},geoGnomonic:function(){return qn.Z},geoGnomonicRaw:function(){return qn.M},geoGraticule:function(){return K},geoGraticule10:function(){return ue},geoIdentity:function(){return Nn},geoInterpolate:function(){return le.Z},geoLength:function(){return b},geoMercator:function(){return $t},geoMercatorRaw:function(){return Zt},geoNaturalEarth1:function(){return Xn.Z},geoNaturalEarth1Raw:function(){return Xn.K},geoOrthographic:function(){return yr.Z},geoOrthographicRaw:function(){return yr.I},geoPath:function(){return Ge},geoProjection:function(){return dt.Z},geoProjectionMutator:function(){return dt.r},geoRotation:function(){return Pt.Z},geoStereographic:function(){return gr},geoStereographicRaw:function(){return Er},geoStream:function(){return h.Z},geoTransform:function(){return Wn.Z},geoTransverseMercator:function(){return zr},geoTransverseMercatorRaw:function(){return mr}});var I=r(97860),C=r(77338),f=r(66624),k=r(7613),T=r(87070),v=r(1457),c=r(87605);function i(){var Jt,an,Sn,Ln=0,Vn=0,cr=960,xn=500;return Sn={stream:function(Qn){return Jt&&an===Qn?Jt:Jt=(0,c.Z)(Ln,Vn,cr,xn)(an=Qn)},extent:function(Qn){return arguments.length?(Ln=+Qn[0][0],Vn=+Qn[0][1],cr=+Qn[1][0],xn=+Qn[1][1],Jt=an=null,Sn):[[Ln,Vn],[cr,xn]]}}}var s,a,o,l=r(23071),u=r(33940),d=r(39695),g=r(73182),h=r(72736),w=(0,u.Z)(),y={sphere:g.Z,point:g.Z,lineStart:function(){y.point=_,y.lineEnd=p},lineEnd:g.Z,polygonStart:g.Z,polygonEnd:g.Z};function p(){y.point=y.lineEnd=g.Z}function _(Jt,an){s=Jt*=d.uR,a=(0,d.O$)(an*=d.uR),o=(0,d.mC)(an),y.point=x}function x(Jt,an){Jt*=d.uR;var Sn=(0,d.O$)(an*=d.uR),Ln=(0,d.mC)(an),Vn=(0,d.Wn)(Jt-s),cr=(0,d.mC)(Vn),xn=Ln*(0,d.O$)(Vn),Qn=o*Sn-a*Ln*cr,er=a*Sn+o*Ln*cr;w.add((0,d.fv)((0,d._b)(xn*xn+Qn*Qn),er)),s=Jt,a=Sn,o=Ln}function b(Jt){return w.reset(),(0,h.Z)(Jt,y),+w}var M=[null,null],m={type:"LineString",coordinates:M};function D(Jt,an){return M[0]=Jt,M[1]=an,b(m)}var S={Feature:function(Jt,an){return P(Jt.geometry,an)},FeatureCollection:function(Jt,an){for(var Sn=Jt.features,Ln=-1,Vn=Sn.length;++Ln<Vn;)if(P(Sn[Ln].geometry,an))return!0;return!1}},O={Sphere:function(){return!0},Point:function(Jt,an){return R(Jt.coordinates,an)},MultiPoint:function(Jt,an){for(var Sn=Jt.coordinates,Ln=-1,Vn=Sn.length;++Ln<Vn;)if(R(Sn[Ln],an))return!0;return!1},LineString:function(Jt,an){return F(Jt.coordinates,an)},MultiLineString:function(Jt,an){for(var Sn=Jt.coordinates,Ln=-1,Vn=Sn.length;++Ln<Vn;)if(F(Sn[Ln],an))return!0;return!1},Polygon:function(Jt,an){return B(Jt.coordinates,an)},MultiPolygon:function(Jt,an){for(var Sn=Jt.coordinates,Ln=-1,Vn=Sn.length;++Ln<Vn;)if(B(Sn[Ln],an))return!0;return!1},GeometryCollection:function(Jt,an){for(var Sn=Jt.geometries,Ln=-1,Vn=Sn.length;++Ln<Vn;)if(P(Sn[Ln],an))return!0;return!1}};function P(Jt,an){return!(!Jt||!O.hasOwnProperty(Jt.type))&&O[Jt.type](Jt,an)}function R(Jt,an){return 0===D(Jt,an)}function F(Jt,an){for(var Sn,Ln,Vn,cr=0,xn=Jt.length;cr<xn;cr++){if(0===(Ln=D(Jt[cr],an))||cr>0&&(Vn=D(Jt[cr],Jt[cr-1]))>0&&Sn<=Vn&&Ln<=Vn&&(Sn+Ln-Vn)*(1-Math.pow((Sn-Ln)/Vn,2))<d.aW*Vn)return!0;Sn=Ln}return!1}function B(Jt,an){return!!(0,l.Z)(Jt.map(J),z(an))}function J(Jt){return(Jt=Jt.map(z)).pop(),Jt}function z(Jt){return[Jt[0]*d.uR,Jt[1]*d.uR]}function $(Jt,an){return(Jt&&S.hasOwnProperty(Jt.type)?S[Jt.type]:P)(Jt,an)}var G=r(33064);function H(Jt,an,Sn){var Ln=(0,G.w6)(Jt,an-d.Ho,Sn).concat(an);return function(Vn){return Ln.map(function(cr){return[Vn,cr]})}}function X(Jt,an,Sn){var Ln=(0,G.w6)(Jt,an-d.Ho,Sn).concat(an);return function(Vn){return Ln.map(function(cr){return[cr,Vn]})}}function K(){var Jt,an,Sn,Ln,Vn,cr,xn,Qn,er,Qt,zn,zt,sn=10,hn=sn,Dn=90,Rn=360,Hn=2.5;function Mn(){return{type:"MultiLineString",coordinates:un()}}function un(){return(0,G.w6)((0,d.mD)(Ln/Dn)*Dn,Sn,Dn).map(zn).concat((0,G.w6)((0,d.mD)(Qn/Rn)*Rn,xn,Rn).map(zt)).concat((0,G.w6)((0,d.mD)(an/sn)*sn,Jt,sn).filter(function(fn){return(0,d.Wn)(fn%Dn)>d.Ho}).map(er)).concat((0,G.w6)((0,d.mD)(cr/hn)*hn,Vn,hn).filter(function(fn){return(0,d.Wn)(fn%Rn)>d.Ho}).map(Qt))}return Mn.lines=function(){return un().map(function(fn){return{type:"LineString",coordinates:fn}})},Mn.outline=function(){return{type:"Polygon",coordinates:[zn(Ln).concat(zt(xn).slice(1),zn(Sn).reverse().slice(1),zt(Qn).reverse().slice(1))]}},Mn.extent=function(fn){return arguments.length?Mn.extentMajor(fn).extentMinor(fn):Mn.extentMinor()},Mn.extentMajor=function(fn){return arguments.length?(Qn=+fn[0][1],xn=+fn[1][1],(Ln=+fn[0][0])>(Sn=+fn[1][0])&&(fn=Ln,Ln=Sn,Sn=fn),Qn>xn&&(fn=Qn,Qn=xn,xn=fn),Mn.precision(Hn)):[[Ln,Qn],[Sn,xn]]},Mn.extentMinor=function(fn){return arguments.length?(cr=+fn[0][1],Vn=+fn[1][1],(an=+fn[0][0])>(Jt=+fn[1][0])&&(fn=an,an=Jt,Jt=fn),cr>Vn&&(fn=cr,cr=Vn,Vn=fn),Mn.precision(Hn)):[[an,cr],[Jt,Vn]]},Mn.step=function(fn){return arguments.length?Mn.stepMajor(fn).stepMinor(fn):Mn.stepMinor()},Mn.stepMajor=function(fn){return arguments.length?(Dn=+fn[0],Rn=+fn[1],Mn):[Dn,Rn]},Mn.stepMinor=function(fn){return arguments.length?(sn=+fn[0],hn=+fn[1],Mn):[sn,hn]},Mn.precision=function(fn){return arguments.length?(Hn=+fn,er=H(cr,Vn,90),Qt=X(an,Jt,Hn),zn=H(Qn,xn,90),zt=X(Ln,Sn,Hn),Mn):Hn},Mn.extentMajor([[-180,-90+d.Ho],[180,90-d.Ho]]).extentMinor([[-180,-80-d.Ho],[180,80+d.Ho]])}function ue(){return K()()}var ae,ne,Q,ie,le=r(83074),fe=r(8593),he=(0,u.Z)(),pe=(0,u.Z)(),xe={point:g.Z,lineStart:g.Z,lineEnd:g.Z,polygonStart:function(){xe.lineStart=Ee,xe.lineEnd=Te},polygonEnd:function(){xe.lineStart=xe.lineEnd=xe.point=g.Z,he.add((0,d.Wn)(pe)),pe.reset()},result:function(){var Jt=he/2;return he.reset(),Jt}};function Ee(){xe.point=Re}function Re(Jt,an){xe.point=ke,ae=Q=Jt,ne=ie=an}function ke(Jt,an){pe.add(ie*Jt-Q*an),Q=Jt,ie=an}function Te(){ke(ae,ne)}var we,je,Ce,Ie,ge=xe,me=r(3559),ce=0,Ae=0,Ne=0,De=0,qe=0,Ke=0,be=0,Oe=0,Le=0,Ue={point:Ze,lineStart:We,lineEnd:ct,polygonStart:function(){Ue.lineStart=yt,Ue.lineEnd=ut},polygonEnd:function(){Ue.point=Ze,Ue.lineStart=We,Ue.lineEnd=ct},result:function(){var Jt=Le?[be/Le,Oe/Le]:Ke?[De/Ke,qe/Ke]:Ne?[ce/Ne,Ae/Ne]:[NaN,NaN];return ce=Ae=Ne=De=qe=Ke=be=Oe=Le=0,Jt}};function Ze(Jt,an){ce+=Jt,Ae+=an,++Ne}function We(){Ue.point=et}function et(Jt,an){Ue.point=nt,Ze(Ce=Jt,Ie=an)}function nt(Jt,an){var Sn=Jt-Ce,Ln=an-Ie,Vn=(0,d._b)(Sn*Sn+Ln*Ln);De+=Vn*(Ce+Jt)/2,qe+=Vn*(Ie+an)/2,Ke+=Vn,Ze(Ce=Jt,Ie=an)}function ct(){Ue.point=Ze}function yt(){Ue.point=Ct}function ut(){Dt(we,je)}function Ct(Jt,an){Ue.point=Dt,Ze(we=Ce=Jt,je=Ie=an)}function Dt(Jt,an){var Sn=Jt-Ce,Ln=an-Ie,Vn=(0,d._b)(Sn*Sn+Ln*Ln);De+=Vn*(Ce+Jt)/2,qe+=Vn*(Ie+an)/2,Ke+=Vn,be+=(Vn=Ie*Jt-Ce*an)*(Ce+Jt),Oe+=Vn*(Ie+an),Le+=3*Vn,Ze(Ce=Jt,Ie=an)}var vt=Ue;function mt(Jt){this._context=Jt}mt.prototype={_radius:4.5,pointRadius:function(Jt){return this._radius=Jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(Jt,an){switch(this._point){case 0:this._context.moveTo(Jt,an),this._point=1;break;case 1:this._context.lineTo(Jt,an);break;default:this._context.moveTo(Jt+this._radius,an),this._context.arc(Jt,an,this._radius,0,d.BZ)}},result:g.Z};var Lt,Ft,Rt,Wt,Ht,it=(0,u.Z)(),st={point:g.Z,lineStart:function(){st.point=Je},lineEnd:function(){Lt&&ot(Ft,Rt),st.point=g.Z},polygonStart:function(){Lt=!0},polygonEnd:function(){Lt=null},result:function(){var Jt=+it;return it.reset(),Jt}};function Je(Jt,an){st.point=ot,Ft=Wt=Jt,Rt=Ht=an}function ot(Jt,an){it.add((0,d._b)((Wt-=Jt)*Wt+(Ht-=an)*Ht)),Wt=Jt,Ht=an}var pt=st;function xt(){this._string=[]}function He(Jt){return"m0,"+Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+-2*Jt+"a"+Jt+","+Jt+" 0 1,1 0,"+2*Jt+"z"}function Ge(Jt,an){var Sn,Ln,Vn=4.5;function cr(xn){return xn&&("function"==typeof Vn&&Ln.pointRadius(+Vn.apply(this,arguments)),(0,h.Z)(xn,Sn(Ln))),Ln.result()}return cr.area=function(xn){return(0,h.Z)(xn,Sn(ge)),ge.result()},cr.measure=function(xn){return(0,h.Z)(xn,Sn(pt)),pt.result()},cr.bounds=function(xn){return(0,h.Z)(xn,Sn(me.Z)),me.Z.result()},cr.centroid=function(xn){return(0,h.Z)(xn,Sn(vt)),vt.result()},cr.projection=function(xn){return arguments.length?(Sn=null==xn?(Jt=null,fe.Z):(Jt=xn).stream,cr):Jt},cr.context=function(xn){return arguments.length?(Ln=null==xn?(an=null,new xt):new mt(an=xn),"function"!=typeof Vn&&Ln.pointRadius(Vn),cr):an},cr.pointRadius=function(xn){return arguments.length?(Vn="function"==typeof xn?xn:(Ln.pointRadius(+xn),+xn),cr):Vn},cr.projection(Jt).context(an)}xt.prototype={_radius:4.5,_circle:He(4.5),pointRadius:function(Jt){return(Jt=+Jt)!==this._radius&&(this._radius=Jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(Jt,an){switch(this._point){case 0:this._string.push("M",Jt,",",an),this._point=1;break;case 1:this._string.push("L",Jt,",",an);break;default:null==this._circle&&(this._circle=He(this._radius)),this._string.push("M",Jt,",",an,this._circle)}},result:function(){if(this._string.length){var Jt=this._string.join("");return this._string=[],Jt}return null}};var dt=r(15002);function ht(Jt){var an=0,Sn=d.pi/3,Ln=(0,dt.r)(Jt),Vn=Ln(an,Sn);return Vn.parallels=function(cr){return arguments.length?Ln(an=cr[0]*d.uR,Sn=cr[1]*d.uR):[an*d.RW,Sn*d.RW]},Vn}function kt(Jt,an){var Sn=(0,d.O$)(Jt),Ln=(Sn+(0,d.O$)(an))/2;if((0,d.Wn)(Ln)<d.Ho)return function(Qn){var er=(0,d.mC)(Qn);function Qt(zn,zt){return[zn*er,(0,d.O$)(zt)/er]}return Qt.invert=function(zn,zt){return[zn/er,(0,d.ZR)(zt*er)]},Qt}(Jt);var Vn=1+Sn*(2*Ln-Sn),cr=(0,d._b)(Vn)/Ln;function xn(Qn,er){var Qt=(0,d._b)(Vn-2*Ln*(0,d.O$)(er))/Ln;return[Qt*(0,d.O$)(Qn*=Ln),cr-Qt*(0,d.mC)(Qn)]}return xn.invert=function(Qn,er){var Qt=cr-er,zn=(0,d.fv)(Qn,(0,d.Wn)(Qt))*(0,d.Xx)(Qt);return Qt*Ln<0&&(zn-=d.pi*(0,d.Xx)(Qn)*(0,d.Xx)(Qt)),[zn/Ln,(0,d.ZR)((Vn-(Qn*Qn+Qt*Qt)*Ln*Ln)/(2*Ln))]},xn}function St(){return ht(kt).scale(155.424).center([0,33.6442])}function Et(){return St().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var wt=r(47589);function Nt(){var Jt,an,Sn,Ln,Vn,cr,xn=Et(),Qn=St().rotate([154,0]).center([-2,58.5]).parallels([55,65]),er=St().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Qt={point:function(sn,hn){cr=[sn,hn]}};function zn(sn){var hn=sn[0],Dn=sn[1];return cr=null,Sn.point(hn,Dn),cr||(Ln.point(hn,Dn),cr)||(Vn.point(hn,Dn),cr)}function zt(){return Jt=an=null,zn}return zn.invert=function(sn){var hn=xn.scale(),Dn=xn.translate(),Rn=(sn[0]-Dn[0])/hn,Hn=(sn[1]-Dn[1])/hn;return(Hn>=.12&&Hn<.234&&Rn>=-.425&&Rn<-.214?Qn:Hn>=.166&&Hn<.234&&Rn>=-.214&&Rn<-.115?er:xn).invert(sn)},zn.stream=function(sn){return Jt&&an===sn?Jt:(hn=[xn.stream(an=sn),Qn.stream(sn),er.stream(sn)],Dn=hn.length,Jt={point:function(Rn,Hn){for(var Mn=-1;++Mn<Dn;)hn[Mn].point(Rn,Hn)},sphere:function(){for(var Rn=-1;++Rn<Dn;)hn[Rn].sphere()},lineStart:function(){for(var Rn=-1;++Rn<Dn;)hn[Rn].lineStart()},lineEnd:function(){for(var Rn=-1;++Rn<Dn;)hn[Rn].lineEnd()},polygonStart:function(){for(var Rn=-1;++Rn<Dn;)hn[Rn].polygonStart()},polygonEnd:function(){for(var Rn=-1;++Rn<Dn;)hn[Rn].polygonEnd()}});var hn,Dn},zn.precision=function(sn){return arguments.length?(xn.precision(sn),Qn.precision(sn),er.precision(sn),zt()):xn.precision()},zn.scale=function(sn){return arguments.length?(xn.scale(sn),Qn.scale(.35*sn),er.scale(sn),zn.translate(xn.translate())):xn.scale()},zn.translate=function(sn){if(!arguments.length)return xn.translate();var hn=xn.scale(),Dn=+sn[0],Rn=+sn[1];return Sn=xn.translate(sn).clipExtent([[Dn-.455*hn,Rn-.238*hn],[Dn+.455*hn,Rn+.238*hn]]).stream(Qt),Ln=Qn.translate([Dn-.307*hn,Rn+.201*hn]).clipExtent([[Dn-.425*hn+d.Ho,Rn+.12*hn+d.Ho],[Dn-.214*hn-d.Ho,Rn+.234*hn-d.Ho]]).stream(Qt),Vn=er.translate([Dn-.205*hn,Rn+.212*hn]).clipExtent([[Dn-.214*hn+d.Ho,Rn+.166*hn+d.Ho],[Dn-.115*hn-d.Ho,Rn+.234*hn-d.Ho]]).stream(Qt),zt()},zn.fitExtent=function(sn,hn){return(0,wt.qg)(zn,sn,hn)},zn.fitSize=function(sn,hn){return(0,wt.mF)(zn,sn,hn)},zn.fitWidth=function(sn,hn){return(0,wt.V6)(zn,sn,hn)},zn.fitHeight=function(sn,hn){return(0,wt.rf)(zn,sn,hn)},zn.scale(1070)}var _t=r(12956),Mt=r(17889),Pt=r(49386);function Zt(Jt,an){return[Jt,(0,d.cM)((0,d.OR)((d.ou+an)/2))]}function $t(){return Xt(Zt).scale(961/d.BZ)}function Xt(Jt){var an,Sn,Ln,Vn=(0,dt.Z)(Jt),cr=Vn.center,xn=Vn.scale,Qn=Vn.translate,er=Vn.clipExtent,Qt=null;function zn(){var zt=d.pi*xn(),sn=Vn((0,Pt.Z)(Vn.rotate()).invert([0,0]));return er(null==Qt?[[sn[0]-zt,sn[1]-zt],[sn[0]+zt,sn[1]+zt]]:Jt===Zt?[[Math.max(sn[0]-zt,Qt),an],[Math.min(sn[0]+zt,Sn),Ln]]:[[Qt,Math.max(sn[1]-zt,an)],[Sn,Math.min(sn[1]+zt,Ln)]])}return Vn.scale=function(zt){return arguments.length?(xn(zt),zn()):xn()},Vn.translate=function(zt){return arguments.length?(Qn(zt),zn()):Qn()},Vn.center=function(zt){return arguments.length?(cr(zt),zn()):cr()},Vn.clipExtent=function(zt){return arguments.length?(null==zt?Qt=an=Sn=Ln=null:(Qt=+zt[0][0],an=+zt[0][1],Sn=+zt[1][0],Ln=+zt[1][1]),zn()):null==Qt?null:[[Qt,an],[Sn,Ln]]},zn()}function dn(Jt){return(0,d.OR)((d.ou+Jt)/2)}function on(Jt,an){var Sn=(0,d.mC)(Jt),Ln=Jt===an?(0,d.O$)(Jt):(0,d.cM)(Sn/(0,d.mC)(an))/(0,d.cM)(dn(an)/dn(Jt)),Vn=Sn*(0,d.sQ)(dn(Jt),Ln)/Ln;if(!Ln)return Zt;function cr(xn,Qn){Vn>0?Qn<-d.ou+d.Ho&&(Qn=-d.ou+d.Ho):Qn>d.ou-d.Ho&&(Qn=d.ou-d.Ho);var er=Vn/(0,d.sQ)(dn(Qn),Ln);return[er*(0,d.O$)(Ln*xn),Vn-er*(0,d.mC)(Ln*xn)]}return cr.invert=function(xn,Qn){var er=Vn-Qn,Qt=(0,d.Xx)(Ln)*(0,d._b)(xn*xn+er*er),zn=(0,d.fv)(xn,(0,d.Wn)(er))*(0,d.Xx)(er);return er*Ln<0&&(zn-=d.pi*(0,d.Xx)(xn)*(0,d.Xx)(er)),[zn/Ln,2*(0,d.z4)((0,d.sQ)(Vn/Qt,1/Ln))-d.ou]},cr}function cn(){return ht(on).scale(109.5).parallels([30,30])}Zt.invert=function(Jt,an){return[Jt,2*(0,d.z4)((0,d.Qq)(an))-d.ou]};var tn=r(97492);function Cn(Jt,an){var Sn=(0,d.mC)(Jt),Ln=Jt===an?(0,d.O$)(Jt):(Sn-(0,d.mC)(an))/(an-Jt),Vn=Sn/Ln+Jt;if((0,d.Wn)(Ln)<d.Ho)return tn.k;function cr(xn,Qn){var er=Vn-Qn,Qt=Ln*xn;return[er*(0,d.O$)(Qt),Vn-er*(0,d.mC)(Qt)]}return cr.invert=function(xn,Qn){var er=Vn-Qn,Qt=(0,d.fv)(xn,(0,d.Wn)(er))*(0,d.Xx)(er);return er*Ln<0&&(Qt-=d.pi*(0,d.Xx)(xn)*(0,d.Xx)(er)),[Qt/Ln,Vn-(0,d.Xx)(Ln)*(0,d._b)(xn*xn+er*er)]},cr}function Fn(){return ht(Cn).scale(131.154).center([0,13.9389])}var En=1.340264,rn=-.081106,yn=893e-6,pn=.003796,bn=(0,d._b)(3)/2;function In(Jt,an){var Sn=(0,d.ZR)(bn*(0,d.O$)(an)),Ln=Sn*Sn,Vn=Ln*Ln*Ln;return[Jt*(0,d.mC)(Sn)/(bn*(En+3*rn*Ln+Vn*(7*yn+9*pn*Ln))),Sn*(En+rn*Ln+Vn*(yn+pn*Ln))]}function _n(){return(0,dt.Z)(In).scale(177.158)}In.invert=function(Jt,an){for(var Sn,Ln=an,Vn=Ln*Ln,cr=Vn*Vn*Vn,xn=0;xn<12&&(cr=(Vn=(Ln-=Sn=(Ln*(En+rn*Vn+cr*(yn+pn*Vn))-an)/(En+3*rn*Vn+cr*(7*yn+9*pn*Vn)))*Ln)*Vn*Vn,!((0,d.Wn)(Sn)<d.aW));++xn);return[bn*Jt*(En+3*rn*Vn+cr*(7*yn+9*pn*Vn))/(0,d.mC)(Ln),(0,d.ZR)((0,d.O$)(Ln)/bn)]};var qn=r(98936),Wn=r(64684);function Nn(){var Jt,an,Sn,Ln,Vn,cr,xn,Qn=1,er=0,Qt=0,zn=1,zt=1,sn=0,hn=null,Dn=1,Rn=1,Hn=(0,Wn.l)({point:function(Tn,An){var Gn=fn([Tn,An]);this.stream.point(Gn[0],Gn[1])}}),Mn=fe.Z;function un(){return Dn=Qn*zn,Rn=Qn*zt,cr=xn=null,fn}function fn(Tn){var An=Tn[0]*Dn,Gn=Tn[1]*Rn;if(sn){var Zn=Gn*Jt-An*an;An=An*Jt+Gn*an,Gn=Zn}return[An+er,Gn+Qt]}return fn.invert=function(Tn){var An=Tn[0]-er,Gn=Tn[1]-Qt;if(sn){var Zn=Gn*Jt+An*an;An=An*Jt-Gn*an,Gn=Zn}return[An/Dn,Gn/Rn]},fn.stream=function(Tn){return cr&&xn===Tn?cr:cr=Hn(Mn(xn=Tn))},fn.postclip=function(Tn){return arguments.length?(Mn=Tn,hn=Sn=Ln=Vn=null,un()):Mn},fn.clipExtent=function(Tn){return arguments.length?(Mn=null==Tn?(hn=Sn=Ln=Vn=null,fe.Z):(0,c.Z)(hn=+Tn[0][0],Sn=+Tn[0][1],Ln=+Tn[1][0],Vn=+Tn[1][1]),un()):null==hn?null:[[hn,Sn],[Ln,Vn]]},fn.scale=function(Tn){return arguments.length?(Qn=+Tn,un()):Qn},fn.translate=function(Tn){return arguments.length?(er=+Tn[0],Qt=+Tn[1],un()):[er,Qt]},fn.angle=function(Tn){return arguments.length?(an=(0,d.O$)(sn=Tn%360*d.uR),Jt=(0,d.mC)(sn),un()):sn*d.RW},fn.reflectX=function(Tn){return arguments.length?(zn=Tn?-1:1,un()):zn<0},fn.reflectY=function(Tn){return arguments.length?(zt=Tn?-1:1,un()):zt<0},fn.fitExtent=function(Tn,An){return(0,wt.qg)(fn,Tn,An)},fn.fitSize=function(Tn,An){return(0,wt.mF)(fn,Tn,An)},fn.fitWidth=function(Tn,An){return(0,wt.V6)(fn,Tn,An)},fn.fitHeight=function(Tn,An){return(0,wt.rf)(fn,Tn,An)},fn}var Xn=r(26867),yr=r(57962),fr=r(25382);function Er(Jt,an){var Sn=(0,d.mC)(an),Ln=1+(0,d.mC)(Jt)*Sn;return[Sn*(0,d.O$)(Jt)/Ln,(0,d.O$)(an)/Ln]}function gr(){return(0,dt.Z)(Er).scale(250).clipAngle(142)}function mr(Jt,an){return[(0,d.cM)((0,d.OR)((d.ou+an)/2)),-Jt]}function zr(){var Jt=Xt(mr),an=Jt.center,Sn=Jt.rotate;return Jt.center=function(Ln){return arguments.length?an([-Ln[1],Ln[0]]):[(Ln=an())[1],-Ln[0]]},Jt.rotate=function(Ln){return arguments.length?Sn([Ln[0],Ln[1],Ln.length>2?Ln[2]+90:90]):[(Ln=Sn())[0],Ln[1],Ln[2]-90]},Sn([0,0,90]).scale(159.155)}Er.invert=(0,fr.O)(function(Jt){return 2*(0,d.z4)(Jt)}),mr.invert=function(Jt,an){return[-an,2*(0,d.z4)((0,d.Qq)(Jt))-d.ou]}},83074:function(se,U,r){"use strict";r.d(U,{Z:function(){return C}});var I=r(39695);function C(f,k){var T=f[0]*I.uR,v=f[1]*I.uR,c=k[0]*I.uR,i=k[1]*I.uR,s=(0,I.mC)(v),a=(0,I.O$)(v),o=(0,I.mC)(i),l=(0,I.O$)(i),u=s*(0,I.mC)(T),d=s*(0,I.O$)(T),g=o*(0,I.mC)(c),h=o*(0,I.O$)(c),w=2*(0,I.ZR)((0,I._b)((0,I.Jy)(i-v)+s*o*(0,I.Jy)(c-T))),y=(0,I.O$)(w),p=w?function(_){var x=(0,I.O$)(_*=w)/y,b=(0,I.O$)(w-_)/y,M=b*u+x*g,m=b*d+x*h,D=b*a+x*l;return[(0,I.fv)(m,M)*I.RW,(0,I.fv)(D,(0,I._b)(M*M+m*m))*I.RW]}:function(){return[T*I.RW,v*I.RW]};return p.distance=w,p}},39695:function(se,U,r){"use strict";r.d(U,{BZ:function(){return v},Ho:function(){return I},Jy:function(){return M},Kh:function(){return x},O$:function(){return w},OR:function(){return _},Qq:function(){return d},RW:function(){return c},Wn:function(){return s},Xx:function(){return y},ZR:function(){return b},_b:function(){return p},aW:function(){return C},cM:function(){return g},fv:function(){return o},mC:function(){return l},mD:function(){return u},ou:function(){return k},pi:function(){return f},pu:function(){return T},sQ:function(){return h},uR:function(){return i},z4:function(){return a}});var I=1e-6,C=1e-12,f=Math.PI,k=f/2,T=f/4,v=2*f,c=180/f,i=f/180,s=Math.abs,a=Math.atan,o=Math.atan2,l=Math.cos,u=Math.ceil,d=Math.exp,g=Math.log,h=Math.pow,w=Math.sin,y=Math.sign||function(m){return m>0?1:m<0?-1:0},p=Math.sqrt,_=Math.tan;function x(m){return m>1?0:m<-1?f:Math.acos(m)}function b(m){return m>1?k:m<-1?-k:Math.asin(m)}function M(m){return(m=w(m/2))*m}},73182:function(se,U,r){"use strict";function I(){}r.d(U,{Z:function(){return I}})},3559:function(se,U,r){"use strict";var I=r(73182),C=1/0,f=C,k=-C,T=k;U.Z={point:function(c,i){c<C&&(C=c),c>k&&(k=c),i<f&&(f=i),i>T&&(T=i)},lineStart:I.Z,lineEnd:I.Z,polygonStart:I.Z,polygonEnd:I.Z,result:function(){var c=[[C,f],[k,T]];return k=T=-(f=C=1/0),c}}},67108:function(se,U,r){"use strict";r.d(U,{Z:function(){return C}});var I=r(39695);function C(f,k){return(0,I.Wn)(f[0]-k[0])<I.Ho&&(0,I.Wn)(f[1]-k[1])<I.Ho}},23071:function(se,U,r){"use strict";r.d(U,{Z:function(){return v}});var I=r(33940),C=r(7620),f=r(39695),k=(0,I.Z)();function T(c){return(0,f.Wn)(c[0])<=f.pi?c[0]:(0,f.Xx)(c[0])*(((0,f.Wn)(c[0])+f.pi)%f.BZ-f.pi)}function v(c,i){var s=T(i),a=i[1],o=(0,f.O$)(a),l=[(0,f.O$)(s),-(0,f.mC)(s),0],u=0,d=0;k.reset(),1===o?a=f.ou+f.Ho:-1===o&&(a=-f.ou-f.Ho);for(var g=0,h=c.length;g<h;++g)if(y=(w=c[g]).length)for(var w,y,p=w[y-1],_=T(p),x=p[1]/2+f.pu,b=(0,f.O$)(x),M=(0,f.mC)(x),m=0;m<y;++m,_=S,b=P,M=R,p=D){var D=w[m],S=T(D),O=D[1]/2+f.pu,P=(0,f.O$)(O),R=(0,f.mC)(O),F=S-_,B=F>=0?1:-1,J=B*F,z=J>f.pi,$=b*P;if(k.add((0,f.fv)($*B*(0,f.O$)(J),M*R+$*(0,f.mC)(J))),u+=z?F+B*f.BZ:F,z^_>=s^S>=s){var G=(0,C.T5)((0,C.Og)(p),(0,C.Og)(D));(0,C.iJ)(G);var H=(0,C.T5)(l,G);(0,C.iJ)(H);var X=(z^F>=0?-1:1)*(0,f.ZR)(H[2]);(a>X||a===X&&(G[0]||G[1]))&&(d+=z^F>=0?1:-1)}}return(u<-f.Ho||u<f.Ho&&k<-f.Ho)^1&d}},25382:function(se,U,r){"use strict";r.d(U,{O:function(){return f},W:function(){return C}});var I=r(39695);function C(k){return function(T,v){var c=(0,I.mC)(T),i=(0,I.mC)(v),s=k(c*i);return[s*i*(0,I.O$)(T),s*(0,I.O$)(v)]}}function f(k){return function(T,v){var c=(0,I._b)(T*T+v*v),i=k(c),s=(0,I.O$)(i),a=(0,I.mC)(i);return[(0,I.fv)(T*s,c*a),(0,I.ZR)(c&&v*s/c)]}}},12956:function(se,U,r){"use strict";r.d(U,{Z:function(){return T},l:function(){return k}});var I=r(39695),C=r(25382),f=r(15002),k=(0,C.W)(function(v){return(0,I._b)(2/(1+v))});function T(){return(0,f.Z)(k).scale(124.75).clipAngle(179.999)}k.invert=(0,C.O)(function(v){return 2*(0,I.ZR)(v/2)})},17889:function(se,U,r){"use strict";r.d(U,{N:function(){return k},Z:function(){return T}});var I=r(39695),C=r(25382),f=r(15002),k=(0,C.W)(function(v){return(v=(0,I.Kh)(v))&&v/(0,I.O$)(v)});function T(){return(0,f.Z)(k).scale(79.4188).clipAngle(179.999)}k.invert=(0,C.O)(function(v){return v})},97492:function(se,U,r){"use strict";r.d(U,{Z:function(){return f},k:function(){return C}});var I=r(15002);function C(k,T){return[k,T]}function f(){return(0,I.Z)(C).scale(152.63)}C.invert=C},47589:function(se,U,r){"use strict";r.d(U,{V6:function(){return v},mF:function(){return T},qg:function(){return k},rf:function(){return c}});var I=r(72736),C=r(3559);function f(i,s,a){var o=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),null!=o&&i.clipExtent(null),(0,I.Z)(a,i.stream(C.Z)),s(C.Z.result()),null!=o&&i.clipExtent(o),i}function k(i,s,a){return f(i,function(o){var l=s[1][0]-s[0][0],u=s[1][1]-s[0][1],d=Math.min(l/(o[1][0]-o[0][0]),u/(o[1][1]-o[0][1])),g=+s[0][0]+(l-d*(o[1][0]+o[0][0]))/2,h=+s[0][1]+(u-d*(o[1][1]+o[0][1]))/2;i.scale(150*d).translate([g,h])},a)}function T(i,s,a){return k(i,[[0,0],s],a)}function v(i,s,a){return f(i,function(o){var l=+s,u=l/(o[1][0]-o[0][0]),d=(l-u*(o[1][0]+o[0][0]))/2,g=-u*o[0][1];i.scale(150*u).translate([d,g])},a)}function c(i,s,a){return f(i,function(o){var l=+s,u=l/(o[1][1]-o[0][1]),d=-u*o[0][0],g=(l-u*(o[1][1]+o[0][1]))/2;i.scale(150*u).translate([d,g])},a)}},98936:function(se,U,r){"use strict";r.d(U,{M:function(){return k},Z:function(){return T}});var I=r(39695),C=r(25382),f=r(15002);function k(v,c){var i=(0,I.mC)(c),s=(0,I.mC)(v)*i;return[i*(0,I.O$)(v)/s,(0,I.O$)(c)/s]}function T(){return(0,f.Z)(k).scale(144.049).clipAngle(60)}k.invert=(0,C.O)(I.z4)},15002:function(se,U,r){"use strict";r.d(U,{Z:function(){return w},r:function(){return y}});var I=r(87070),C=r(1457),f=r(87605),k=r(96059),T=r(8593),v=r(39695),c=r(49386),i=r(64684),s=r(47589),a=r(7620),o=16,l=(0,v.mC)(30*v.uR);function u(p,_){return+_?function(x,b){function M(m,D,S,O,P,R,F,B,J,z,$,G,H,X){var K=F-m,ue=B-D,ae=K*K+ue*ue;if(ae>4*b&&H--){var ne=O+z,Q=P+$,ie=R+G,le=(0,v._b)(ne*ne+Q*Q+ie*ie),fe=(0,v.ZR)(ie/=le),he=(0,v.Wn)((0,v.Wn)(ie)-1)<v.Ho||(0,v.Wn)(S-J)<v.Ho?(S+J)/2:(0,v.fv)(Q,ne),pe=x(he,fe),xe=pe[0],Ee=pe[1],Re=xe-m,ke=Ee-D,Te=ue*Re-K*ke;(Te*Te/ae>b||(0,v.Wn)((K*Re+ue*ke)/ae-.5)>.3||O*z+P*$+R*G<l)&&(M(m,D,S,O,P,R,xe,Ee,he,ne/=le,Q/=le,ie,H,X),X.point(xe,Ee),M(xe,Ee,he,ne,Q,ie,F,B,J,z,$,G,H,X))}}return function(m){var D,S,O,P,R,F,B,J,z,$,G,H,X={point:K,lineStart:ue,lineEnd:ne,polygonStart:function(){m.polygonStart(),X.lineStart=Q},polygonEnd:function(){m.polygonEnd(),X.lineStart=ue}};function K(fe,he){fe=x(fe,he),m.point(fe[0],fe[1])}function ue(){J=NaN,X.point=ae,m.lineStart()}function ae(fe,he){var pe=(0,a.Og)([fe,he]),xe=x(fe,he);M(J,z,B,$,G,H,J=xe[0],z=xe[1],B=fe,$=pe[0],G=pe[1],H=pe[2],o,m),m.point(J,z)}function ne(){X.point=K,m.lineEnd()}function Q(){ue(),X.point=ie,X.lineEnd=le}function ie(fe,he){ae(D=fe,he),S=J,O=z,P=$,R=G,F=H,X.point=ae}function le(){M(J,z,B,$,G,H,S,O,D,P,R,F,o,m),X.lineEnd=ne,ne()}return X}}(p,_):(x=p,(0,i.l)({point:function(b,M){b=x(b,M),this.stream.point(b[0],b[1])}}));var x}var d=(0,i.l)({point:function(p,_){this.stream.point(p*v.uR,_*v.uR)}});function g(p,_,x,b,M){function m(D,S){return[_+p*(D*=b),x-p*(S*=M)]}return m.invert=function(D,S){return[(D-_)/p*b,(x-S)/p*M]},m}function h(p,_,x,b,M,m){var D=(0,v.mC)(m),S=(0,v.O$)(m),O=D*p,P=S*p,R=D/p,F=S/p,B=(S*x-D*_)/p,J=(S*_+D*x)/p;function z($,G){return[O*($*=b)-P*(G*=M)+_,x-P*$-O*G]}return z.invert=function($,G){return[b*(R*$-F*G+B),M*(J-F*$-R*G)]},z}function w(p){return y(function(){return p})()}function y(p){var _,x,b,M,m,D,S,O,P,R,F=150,B=480,J=250,z=0,$=0,G=0,H=0,X=0,K=0,ue=1,ae=1,ne=null,Q=I.Z,ie=null,le=T.Z,fe=.5;function he(Re){return O(Re[0]*v.uR,Re[1]*v.uR)}function pe(Re){return(Re=O.invert(Re[0],Re[1]))&&[Re[0]*v.RW,Re[1]*v.RW]}function xe(){var Re=h(F,0,0,ue,ae,K).apply(null,_(z,$)),ke=(K?h:g)(F,B-Re[0],J-Re[1],ue,ae,K);return x=(0,c.I)(G,H,X),S=(0,k.Z)(_,ke),O=(0,k.Z)(x,S),D=u(S,fe),Ee()}function Ee(){return P=R=null,he}return he.stream=function(Re){return P&&R===Re?P:P=d((ke=x,(0,i.l)({point:function(Te,we){var je=ke(Te,we);return this.stream.point(je[0],je[1])}}))(Q(D(le(R=Re)))));var ke},he.preclip=function(Re){return arguments.length?(Q=Re,ne=void 0,Ee()):Q},he.postclip=function(Re){return arguments.length?(le=Re,ie=b=M=m=null,Ee()):le},he.clipAngle=function(Re){return arguments.length?(Q=+Re?(0,C.Z)(ne=Re*v.uR):(ne=null,I.Z),Ee()):ne*v.RW},he.clipExtent=function(Re){return arguments.length?(le=null==Re?(ie=b=M=m=null,T.Z):(0,f.Z)(ie=+Re[0][0],b=+Re[0][1],M=+Re[1][0],m=+Re[1][1]),Ee()):null==ie?null:[[ie,b],[M,m]]},he.scale=function(Re){return arguments.length?(F=+Re,xe()):F},he.translate=function(Re){return arguments.length?(B=+Re[0],J=+Re[1],xe()):[B,J]},he.center=function(Re){return arguments.length?(z=Re[0]%360*v.uR,$=Re[1]%360*v.uR,xe()):[z*v.RW,$*v.RW]},he.rotate=function(Re){return arguments.length?(G=Re[0]%360*v.uR,H=Re[1]%360*v.uR,X=Re.length>2?Re[2]%360*v.uR:0,xe()):[G*v.RW,H*v.RW,X*v.RW]},he.angle=function(Re){return arguments.length?(K=Re%360*v.uR,xe()):K*v.RW},he.reflectX=function(Re){return arguments.length?(ue=Re?-1:1,xe()):ue<0},he.reflectY=function(Re){return arguments.length?(ae=Re?-1:1,xe()):ae<0},he.precision=function(Re){return arguments.length?(D=u(S,fe=Re*Re),Ee()):(0,v._b)(fe)},he.fitExtent=function(Re,ke){return(0,s.qg)(he,Re,ke)},he.fitSize=function(Re,ke){return(0,s.mF)(he,Re,ke)},he.fitWidth=function(Re,ke){return(0,s.V6)(he,Re,ke)},he.fitHeight=function(Re,ke){return(0,s.rf)(he,Re,ke)},function(){return _=p.apply(this,arguments),he.invert=_.invert&&pe,xe()}}},26867:function(se,U,r){"use strict";r.d(U,{K:function(){return f},Z:function(){return k}});var I=r(15002),C=r(39695);function f(T,v){var c=v*v,i=c*c;return[T*(.8707-.131979*c+i*(i*(.003971*c-.001529*i)-.013791)),v*(1.007226+c*(.015085+i*(.028874*c-.044475-.005916*i)))]}function k(){return(0,I.Z)(f).scale(175.295)}f.invert=function(T,v){var c,i=v,s=25;do{var a=i*i,o=a*a;i-=c=(i*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-v)/(1.007226+a*(.045255+o*(.259866*a-.311325-.06507600000000001*o)))}while((0,C.Wn)(c)>C.Ho&&--s>0);return[T/(.8707+(a=i*i)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),i]}},57962:function(se,U,r){"use strict";r.d(U,{I:function(){return k},Z:function(){return T}});var I=r(39695),C=r(25382),f=r(15002);function k(v,c){return[(0,I.mC)(c)*(0,I.O$)(v),(0,I.O$)(c)]}function T(){return(0,f.Z)(k).scale(249.5).clipAngle(90+I.Ho)}k.invert=(0,C.O)(I.ZR)},49386:function(se,U,r){"use strict";r.d(U,{I:function(){return k},Z:function(){return i}});var I=r(96059),C=r(39695);function f(s,a){return[(0,C.Wn)(s)>C.pi?s+Math.round(-s/C.BZ)*C.BZ:s,a]}function k(s,a,o){return(s%=C.BZ)?a||o?(0,I.Z)(v(s),c(a,o)):v(s):a||o?c(a,o):f}function T(s){return function(a,o){return[(a+=s)>C.pi?a-C.BZ:a<-C.pi?a+C.BZ:a,o]}}function v(s){var a=T(s);return a.invert=T(-s),a}function c(s,a){var o=(0,C.mC)(s),l=(0,C.O$)(s),u=(0,C.mC)(a),d=(0,C.O$)(a);function g(h,w){var y=(0,C.mC)(w),p=(0,C.mC)(h)*y,_=(0,C.O$)(h)*y,x=(0,C.O$)(w),b=x*o+p*l;return[(0,C.fv)(_*u-b*d,p*o-x*l),(0,C.ZR)(b*u+_*d)]}return g.invert=function(h,w){var y=(0,C.mC)(w),p=(0,C.mC)(h)*y,_=(0,C.O$)(h)*y,x=(0,C.O$)(w),b=x*u-_*d;return[(0,C.fv)(_*u+x*d,p*o+b*l),(0,C.ZR)(b*o-p*l)]},g}function i(s){function a(o){return(o=s(o[0]*C.uR,o[1]*C.uR))[0]*=C.RW,o[1]*=C.RW,o}return s=k(s[0]*C.uR,s[1]*C.uR,s.length>2?s[2]*C.uR:0),a.invert=function(o){return(o=s.invert(o[0]*C.uR,o[1]*C.uR))[0]*=C.RW,o[1]*=C.RW,o},a}f.invert=f},72736:function(se,U,r){"use strict";function I(c,i){c&&f.hasOwnProperty(c.type)&&f[c.type](c,i)}r.d(U,{Z:function(){return v}});var C={Feature:function(c,i){I(c.geometry,i)},FeatureCollection:function(c,i){for(var s=c.features,a=-1,o=s.length;++a<o;)I(s[a].geometry,i)}},f={Sphere:function(c,i){i.sphere()},Point:function(c,i){i.point((c=c.coordinates)[0],c[1],c[2])},MultiPoint:function(c,i){for(var s=c.coordinates,a=-1,o=s.length;++a<o;)i.point((c=s[a])[0],c[1],c[2])},LineString:function(c,i){k(c.coordinates,i,0)},MultiLineString:function(c,i){for(var s=c.coordinates,a=-1,o=s.length;++a<o;)k(s[a],i,0)},Polygon:function(c,i){T(c.coordinates,i)},MultiPolygon:function(c,i){for(var s=c.coordinates,a=-1,o=s.length;++a<o;)T(s[a],i)},GeometryCollection:function(c,i){for(var s=c.geometries,a=-1,o=s.length;++a<o;)I(s[a],i)}};function k(c,i,s){var a,o=-1,l=c.length-s;for(i.lineStart();++o<l;)i.point((a=c[o])[0],a[1],a[2]);i.lineEnd()}function T(c,i){var s=-1,a=c.length;for(i.polygonStart();++s<a;)k(c[s],i,1);i.polygonEnd()}function v(c,i){c&&C.hasOwnProperty(c.type)?C[c.type](c,i):I(c,i)}},64684:function(se,U,r){"use strict";function I(k){return{stream:C(k)}}function C(k){return function(T){var v=new f;for(var c in k)v[c]=k[c];return v.stream=T,v}}function f(){}r.d(U,{Z:function(){return I},l:function(){return C}}),f.prototype={constructor:f,point:function(k,T){this.stream.point(k,T)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function(se,U,r){"use strict";function I(me,ce){return me.parent===ce.parent?1:2}function C(me,ce){return me+ce.x}function f(me,ce){return Math.max(me,ce.y)}function k(){var me=I,ce=1,Ae=1,Ne=!1;function De(qe){var Ke,be=0;qe.eachAfter(function(We){var nt,et=We.children;et?(We.x=(nt=et).reduce(C,0)/nt.length,We.y=function(nt){return 1+nt.reduce(f,0)}(et)):(We.x=Ke?be+=me(We,Ke):0,We.y=0,Ke=We)});var Oe=function(We){for(var et;et=We.children;)We=et[0];return We}(qe),Le=function(We){for(var et;et=We.children;)We=et[et.length-1];return We}(qe),Ue=Oe.x-me(Oe,Le)/2,Ze=Le.x+me(Le,Oe)/2;return qe.eachAfter(Ne?function(We){We.x=(We.x-qe.x)*ce,We.y=(qe.y-We.y)*Ae}:function(We){We.x=(We.x-Ue)/(Ze-Ue)*ce,We.y=(1-(qe.y?We.y/qe.y:1))*Ae})}return De.separation=function(qe){return arguments.length?(me=qe,De):me},De.size=function(qe){return arguments.length?(Ne=!1,ce=+qe[0],Ae=+qe[1],De):Ne?null:[ce,Ae]},De.nodeSize=function(qe){return arguments.length?(Ne=!0,ce=+qe[0],Ae=+qe[1],De):Ne?[ce,Ae]:null},De}function T(me){var ce=0,Ae=me.children,Ne=Ae&&Ae.length;if(Ne)for(;--Ne>=0;)ce+=Ae[Ne].value;else ce=1;me.value=ce}function v(me,ce){var Ae,Ne,De,qe,Ke,be=new a(me),Oe=+me.value&&(be.value=me.value),Le=[be];for(null==ce&&(ce=c);Ae=Le.pop();)if(Oe&&(Ae.value=+Ae.data.value),(De=ce(Ae.data))&&(Ke=De.length))for(Ae.children=new Array(Ke),qe=Ke-1;qe>=0;--qe)Le.push(Ne=Ae.children[qe]=new a(De[qe])),Ne.parent=Ae,Ne.depth=Ae.depth+1;return be.eachBefore(s)}function c(me){return me.children}function i(me){me.data=me.data.data}function s(me){var ce=0;do{me.height=ce}while((me=me.parent)&&me.height<++ce)}function a(me){this.data=me,this.depth=this.height=0,this.parent=null}r.r(U),r.d(U,{cluster:function(){return k},hierarchy:function(){return v},pack:function(){return F},packEnclose:function(){return l},packSiblings:function(){return D},partition:function(){return H},stratify:function(){return Q},tree:function(){return Ee},treemap:function(){return je},treemapBinary:function(){return Ce},treemapDice:function(){return G},treemapResquarify:function(){return ge},treemapSlice:function(){return Re},treemapSliceDice:function(){return Ie},treemapSquarify:function(){return we}}),a.prototype=v.prototype={constructor:a,count:function(){return this.eachAfter(T)},each:function(me){var ce,Ae,Ne,De,qe=this,Ke=[qe];do{for(ce=Ke.reverse(),Ke=[];qe=ce.pop();)if(me(qe),Ae=qe.children)for(Ne=0,De=Ae.length;Ne<De;++Ne)Ke.push(Ae[Ne])}while(Ke.length);return this},eachAfter:function(me){for(var ce,Ae,Ne,De=this,qe=[De],Ke=[];De=qe.pop();)if(Ke.push(De),ce=De.children)for(Ae=0,Ne=ce.length;Ae<Ne;++Ae)qe.push(ce[Ae]);for(;De=Ke.pop();)me(De);return this},eachBefore:function(me){for(var ce,Ae,Ne=this,De=[Ne];Ne=De.pop();)if(me(Ne),ce=Ne.children)for(Ae=ce.length-1;Ae>=0;--Ae)De.push(ce[Ae]);return this},sum:function(me){return this.eachAfter(function(ce){for(var Ae=+me(ce.data)||0,Ne=ce.children,De=Ne&&Ne.length;--De>=0;)Ae+=Ne[De].value;ce.value=Ae})},sort:function(me){return this.eachBefore(function(ce){ce.children&&ce.children.sort(me)})},path:function(me){for(var ce=this,Ae=function(qe,Ke){if(qe===Ke)return qe;var be=qe.ancestors(),Oe=Ke.ancestors(),Le=null;for(qe=be.pop(),Ke=Oe.pop();qe===Ke;)Le=qe,qe=be.pop(),Ke=Oe.pop();return Le}(ce,me),Ne=[ce];ce!==Ae;)Ne.push(ce=ce.parent);for(var De=Ne.length;me!==Ae;)Ne.splice(De,0,me),me=me.parent;return Ne},ancestors:function(){for(var me=this,ce=[me];me=me.parent;)ce.push(me);return ce},descendants:function(){var me=[];return this.each(function(ce){me.push(ce)}),me},leaves:function(){var me=[];return this.eachBefore(function(ce){ce.children||me.push(ce)}),me},links:function(){var me=this,ce=[];return me.each(function(Ae){Ae!==me&&ce.push({source:Ae.parent,target:Ae})}),ce},copy:function(){return v(this).eachBefore(i)}};var o=Array.prototype.slice;function l(me){for(var ce,Ae,Ne=0,De=(me=function(Ke){for(var be,Oe,Le=Ke.length;Le;)Oe=Math.random()*Le--|0,be=Ke[Le],Ke[Le]=Ke[Oe],Ke[Oe]=be;return Ke}(o.call(me))).length,qe=[];Ne<De;)ce=me[Ne],Ae&&g(Ae,ce)?++Ne:(Ae=w(qe=u(qe,ce)),Ne=0);return Ae}function u(me,ce){var Ae,Ne;if(h(ce,me))return[ce];for(Ae=0;Ae<me.length;++Ae)if(d(ce,me[Ae])&&h(y(me[Ae],ce),me))return[me[Ae],ce];for(Ae=0;Ae<me.length-1;++Ae)for(Ne=Ae+1;Ne<me.length;++Ne)if(d(y(me[Ae],me[Ne]),ce)&&d(y(me[Ae],ce),me[Ne])&&d(y(me[Ne],ce),me[Ae])&&h(p(me[Ae],me[Ne],ce),me))return[me[Ae],me[Ne],ce];throw new Error}function d(me,ce){var Ae=me.r-ce.r,Ne=ce.x-me.x,De=ce.y-me.y;return Ae<0||Ae*Ae<Ne*Ne+De*De}function g(me,ce){var Ae=me.r-ce.r+1e-6,Ne=ce.x-me.x,De=ce.y-me.y;return Ae>0&&Ae*Ae>Ne*Ne+De*De}function h(me,ce){for(var Ae=0;Ae<ce.length;++Ae)if(!g(me,ce[Ae]))return!1;return!0}function w(me){switch(me.length){case 1:return{x:(ce=me[0]).x,y:ce.y,r:ce.r};case 2:return y(me[0],me[1]);case 3:return p(me[0],me[1],me[2])}var ce}function y(me,ce){var Ae=me.x,Ne=me.y,De=me.r,qe=ce.x,Ke=ce.y,be=ce.r,Oe=qe-Ae,Le=Ke-Ne,Ue=be-De,Ze=Math.sqrt(Oe*Oe+Le*Le);return{x:(Ae+qe+Oe/Ze*Ue)/2,y:(Ne+Ke+Le/Ze*Ue)/2,r:(Ze+De+be)/2}}function p(me,ce,Ae){var Ne=me.x,De=me.y,qe=me.r,Ke=ce.x,be=ce.y,Oe=ce.r,Le=Ae.x,Ue=Ae.y,Ze=Ae.r,We=Ne-Ke,et=Ne-Le,nt=De-be,ct=De-Ue,yt=Oe-qe,ut=Ze-qe,Ct=Ne*Ne+De*De-qe*qe,Dt=Ct-Ke*Ke-be*be+Oe*Oe,vt=Ct-Le*Le-Ue*Ue+Ze*Ze,mt=et*nt-We*ct,Lt=(nt*vt-ct*Dt)/(2*mt)-Ne,Ft=(ct*yt-nt*ut)/mt,Rt=(et*Dt-We*vt)/(2*mt)-De,Wt=(We*ut-et*yt)/mt,Ht=Ft*Ft+Wt*Wt-1,it=2*(qe+Lt*Ft+Rt*Wt),st=Lt*Lt+Rt*Rt-qe*qe,Je=-(Ht?(it+Math.sqrt(it*it-4*Ht*st))/(2*Ht):st/it);return{x:Ne+Lt+Ft*Je,y:De+Rt+Wt*Je,r:Je}}function _(me,ce,Ae){var Ne,De,qe,Ke,be=me.x-ce.x,Oe=me.y-ce.y,Le=be*be+Oe*Oe;Le?(De=ce.r+Ae.r,Ke=me.r+Ae.r,(De*=De)>(Ke*=Ke)?(Ne=(Le+Ke-De)/(2*Le),qe=Math.sqrt(Math.max(0,Ke/Le-Ne*Ne)),Ae.x=me.x-Ne*be-qe*Oe,Ae.y=me.y-Ne*Oe+qe*be):(Ne=(Le+De-Ke)/(2*Le),qe=Math.sqrt(Math.max(0,De/Le-Ne*Ne)),Ae.x=ce.x+Ne*be-qe*Oe,Ae.y=ce.y+Ne*Oe+qe*be)):(Ae.x=ce.x+Ae.r,Ae.y=ce.y)}function x(me,ce){var Ae=me.r+ce.r-1e-6,Ne=ce.x-me.x,De=ce.y-me.y;return Ae>0&&Ae*Ae>Ne*Ne+De*De}function b(me){var ce=me._,Ae=me.next._,Ne=ce.r+Ae.r,De=(ce.x*Ae.r+Ae.x*ce.r)/Ne,qe=(ce.y*Ae.r+Ae.y*ce.r)/Ne;return De*De+qe*qe}function M(me){this._=me,this.next=null,this.previous=null}function m(me){if(!(De=me.length))return 0;var ce,Ae,Ne,De,qe,Ke,be,Oe,Le,Ue,Ze;if((ce=me[0]).x=0,ce.y=0,!(De>1))return ce.r;if(ce.x=-(Ae=me[1]).r,Ae.x=ce.r,Ae.y=0,!(De>2))return ce.r+Ae.r;_(Ae,ce,Ne=me[2]),ce=new M(ce),Ae=new M(Ae),Ne=new M(Ne),ce.next=Ne.previous=Ae,Ae.next=ce.previous=Ne,Ne.next=Ae.previous=ce;e:for(be=3;be<De;++be){_(ce._,Ae._,Ne=me[be]),Ne=new M(Ne),Oe=Ae.next,Le=ce.previous,Ue=Ae._.r,Ze=ce._.r;do{if(Ue<=Ze){if(x(Oe._,Ne._)){ce.next=Ae=Oe,Ae.previous=ce,--be;continue e}Ue+=Oe._.r,Oe=Oe.next}else{if(x(Le._,Ne._)){(ce=Le).next=Ae,Ae.previous=ce,--be;continue e}Ze+=Le._.r,Le=Le.previous}}while(Oe!==Le.next);for(Ne.previous=ce,Ne.next=Ae,ce.next=Ae.previous=Ae=Ne,qe=b(ce);(Ne=Ne.next)!==Ae;)(Ke=b(Ne))<qe&&(ce=Ne,qe=Ke);Ae=ce.next}for(ce=[Ae._],Ne=Ae;(Ne=Ne.next)!==Ae;)ce.push(Ne._);for(Ne=l(ce),be=0;be<De;++be)(ce=me[be]).x-=Ne.x,ce.y-=Ne.y;return Ne.r}function D(me){return m(me),me}function S(me){if("function"!=typeof me)throw new Error;return me}function O(){return 0}function P(me){return function(){return me}}function R(me){return Math.sqrt(me.value)}function F(){var me=null,ce=1,Ae=1,Ne=O;function De(qe){return qe.x=ce/2,qe.y=Ae/2,me?qe.eachBefore(B(me)).eachAfter(J(Ne,.5)).eachBefore(z(1)):qe.eachBefore(B(R)).eachAfter(J(O,1)).eachAfter(J(Ne,qe.r/Math.min(ce,Ae))).eachBefore(z(Math.min(ce,Ae)/(2*qe.r))),qe}return De.radius=function(qe){return arguments.length?(me=null==(Ke=qe)?null:S(Ke),De):me;var Ke},De.size=function(qe){return arguments.length?(ce=+qe[0],Ae=+qe[1],De):[ce,Ae]},De.padding=function(qe){return arguments.length?(Ne="function"==typeof qe?qe:P(+qe),De):Ne},De}function B(me){return function(ce){ce.children||(ce.r=Math.max(0,+me(ce)||0))}}function J(me,ce){return function(Ae){if(Ne=Ae.children){var Ne,De,qe,Ke=Ne.length,be=me(Ae)*ce||0;if(be)for(De=0;De<Ke;++De)Ne[De].r+=be;if(qe=m(Ne),be)for(De=0;De<Ke;++De)Ne[De].r-=be;Ae.r=qe+be}}}function z(me){return function(ce){var Ae=ce.parent;ce.r*=me,Ae&&(ce.x=Ae.x+me*ce.x,ce.y=Ae.y+me*ce.y)}}function $(me){me.x0=Math.round(me.x0),me.y0=Math.round(me.y0),me.x1=Math.round(me.x1),me.y1=Math.round(me.y1)}function G(me,ce,Ae,Ne,De){for(var qe,Ke=me.children,be=-1,Oe=Ke.length,Le=me.value&&(Ne-ce)/me.value;++be<Oe;)(qe=Ke[be]).y0=Ae,qe.y1=De,qe.x0=ce,qe.x1=ce+=qe.value*Le}function H(){var me=1,ce=1,Ae=0,Ne=!1;function De(qe){var be,Oe,Ke=qe.height+1;return qe.x0=qe.y0=Ae,qe.x1=me,qe.y1=ce/Ke,qe.eachBefore((be=ce,Oe=Ke,function(Le){Le.children&&G(Le,Le.x0,be*(Le.depth+1)/Oe,Le.x1,be*(Le.depth+2)/Oe);var Ue=Le.x0,Ze=Le.y0,We=Le.x1-Ae,et=Le.y1-Ae;We<Ue&&(Ue=We=(Ue+We)/2),et<Ze&&(Ze=et=(Ze+et)/2),Le.x0=Ue,Le.y0=Ze,Le.x1=We,Le.y1=et})),Ne&&qe.eachBefore($),qe}return De.round=function(qe){return arguments.length?(Ne=!!qe,De):Ne},De.size=function(qe){return arguments.length?(me=+qe[0],ce=+qe[1],De):[me,ce]},De.padding=function(qe){return arguments.length?(Ae=+qe,De):Ae},De}var X="$",K={depth:-1},ue={};function ae(me){return me.id}function ne(me){return me.parentId}function Q(){var me=ae,ce=ne;function Ae(Ne){var De,qe,Ke,be,Oe,Le,Ue,Ze=Ne.length,We=new Array(Ze),et={};for(qe=0;qe<Ze;++qe)Oe=We[qe]=new a(De=Ne[qe]),null!=(Le=me(De,qe,Ne))&&(Le+="")&&(et[Ue=X+(Oe.id=Le)]=Ue in et?ue:Oe);for(qe=0;qe<Ze;++qe)if(Oe=We[qe],null!=(Le=ce(Ne[qe],qe,Ne))&&(Le+="")){if(!(be=et[X+Le]))throw new Error("missing: "+Le);if(be===ue)throw new Error("ambiguous: "+Le);be.children?be.children.push(Oe):be.children=[Oe],Oe.parent=be}else{if(Ke)throw new Error("multiple roots");Ke=Oe}if(!Ke)throw new Error("no root");if(Ke.parent=K,Ke.eachBefore(function(nt){nt.depth=nt.parent.depth+1,--Ze}).eachBefore(s),Ke.parent=null,Ze>0)throw new Error("cycle");return Ke}return Ae.id=function(Ne){return arguments.length?(me=S(Ne),Ae):me},Ae.parentId=function(Ne){return arguments.length?(ce=S(Ne),Ae):ce},Ae}function ie(me,ce){return me.parent===ce.parent?1:2}function le(me){var ce=me.children;return ce?ce[0]:me.t}function fe(me){var ce=me.children;return ce?ce[ce.length-1]:me.t}function he(me,ce,Ae){var Ne=Ae/(ce.i-me.i);ce.c-=Ne,ce.s+=Ae,me.c+=Ne,ce.z+=Ae,ce.m+=Ae}function pe(me,ce,Ae){return me.a.parent===ce.parent?me.a:Ae}function xe(me,ce){this._=me,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ce}function Ee(){var me=ie,ce=1,Ae=1,Ne=null;function De(Oe){var Le=function(ut){for(var Ct,Dt,vt,mt,Lt,Ft=new xe(ut,0),Rt=[Ft];Ct=Rt.pop();)if(vt=Ct._.children)for(Ct.children=new Array(Lt=vt.length),mt=Lt-1;mt>=0;--mt)Rt.push(Dt=Ct.children[mt]=new xe(vt[mt],mt)),Dt.parent=Ct;return(Ft.parent=new xe(null,0)).children=[Ft],Ft}(Oe);if(Le.eachAfter(qe),Le.parent.m=-Le.z,Le.eachBefore(Ke),Ne)Oe.eachBefore(be);else{var Ue=Oe,Ze=Oe,We=Oe;Oe.eachBefore(function(ut){ut.x<Ue.x&&(Ue=ut),ut.x>Ze.x&&(Ze=ut),ut.depth>We.depth&&(We=ut)});var et=Ue===Ze?1:me(Ue,Ze)/2,nt=et-Ue.x,ct=ce/(Ze.x+et+nt),yt=Ae/(We.depth||1);Oe.eachBefore(function(ut){ut.x=(ut.x+nt)*ct,ut.y=ut.depth*yt})}return Oe}function qe(Oe){var Le=Oe.children,Ue=Oe.parent.children,Ze=Oe.i?Ue[Oe.i-1]:null;if(Le){!function(et){for(var nt,ct=0,yt=0,ut=et.children,Ct=ut.length;--Ct>=0;)(nt=ut[Ct]).z+=ct,nt.m+=ct,ct+=nt.s+(yt+=nt.c)}(Oe);var We=(Le[0].z+Le[Le.length-1].z)/2;Ze?(Oe.z=Ze.z+me(Oe._,Ze._),Oe.m=Oe.z-We):Oe.z=We}else Ze&&(Oe.z=Ze.z+me(Oe._,Ze._));Oe.parent.A=function(et,nt,ct){if(nt){for(var yt,ut=et,Ct=et,Dt=nt,vt=ut.parent.children[0],mt=ut.m,Lt=Ct.m,Ft=Dt.m,Rt=vt.m;Dt=fe(Dt),ut=le(ut),Dt&&ut;)vt=le(vt),(Ct=fe(Ct)).a=et,(yt=Dt.z+Ft-ut.z-mt+me(Dt._,ut._))>0&&(he(pe(Dt,et,ct),et,yt),mt+=yt,Lt+=yt),Ft+=Dt.m,mt+=ut.m,Rt+=vt.m,Lt+=Ct.m;Dt&&!fe(Ct)&&(Ct.t=Dt,Ct.m+=Ft-Lt),ut&&!le(vt)&&(vt.t=ut,vt.m+=mt-Rt,ct=et)}return ct}(Oe,Ze,Oe.parent.A||Ue[0])}function Ke(Oe){Oe._.x=Oe.z+Oe.parent.m,Oe.m+=Oe.parent.m}function be(Oe){Oe.x*=ce,Oe.y=Oe.depth*Ae}return De.separation=function(Oe){return arguments.length?(me=Oe,De):me},De.size=function(Oe){return arguments.length?(Ne=!1,ce=+Oe[0],Ae=+Oe[1],De):Ne?null:[ce,Ae]},De.nodeSize=function(Oe){return arguments.length?(Ne=!0,ce=+Oe[0],Ae=+Oe[1],De):Ne?[ce,Ae]:null},De}function Re(me,ce,Ae,Ne,De){for(var qe,Ke=me.children,be=-1,Oe=Ke.length,Le=me.value&&(De-Ae)/me.value;++be<Oe;)(qe=Ke[be]).x0=ce,qe.x1=Ne,qe.y0=Ae,qe.y1=Ae+=qe.value*Le}xe.prototype=Object.create(a.prototype);var ke=(1+Math.sqrt(5))/2;function Te(me,ce,Ae,Ne,De,qe){for(var Ke,be,Oe,Le,Ue,Ze,We,et,nt,ct,yt,ut=[],Ct=ce.children,Dt=0,vt=0,mt=Ct.length,Lt=ce.value;Dt<mt;){Oe=De-Ae,Le=qe-Ne;do{Ue=Ct[vt++].value}while(!Ue&&vt<mt);for(Ze=We=Ue,yt=Ue*Ue*(ct=Math.max(Le/Oe,Oe/Le)/(Lt*me)),nt=Math.max(We/yt,yt/Ze);vt<mt;++vt){if(Ue+=be=Ct[vt].value,be<Ze&&(Ze=be),be>We&&(We=be),yt=Ue*Ue*ct,(et=Math.max(We/yt,yt/Ze))>nt){Ue-=be;break}nt=et}ut.push(Ke={value:Ue,dice:Oe<Le,children:Ct.slice(Dt,vt)}),Ke.dice?G(Ke,Ae,Ne,De,Lt?Ne+=Le*Ue/Lt:qe):Re(Ke,Ae,Ne,Lt?Ae+=Oe*Ue/Lt:De,qe),Lt-=Ue,Dt=vt}return ut}var we=function me(ce){function Ae(Ne,De,qe,Ke,be){Te(ce,Ne,De,qe,Ke,be)}return Ae.ratio=function(Ne){return me((Ne=+Ne)>1?Ne:1)},Ae}(ke);function je(){var me=we,ce=!1,Ae=1,Ne=1,De=[0],qe=O,Ke=O,be=O,Oe=O,Le=O;function Ue(We){return We.x0=We.y0=0,We.x1=Ae,We.y1=Ne,We.eachBefore(Ze),De=[0],ce&&We.eachBefore($),We}function Ze(We){var et=De[We.depth],nt=We.x0+et,ct=We.y0+et,yt=We.x1-et,ut=We.y1-et;yt<nt&&(nt=yt=(nt+yt)/2),ut<ct&&(ct=ut=(ct+ut)/2),We.x0=nt,We.y0=ct,We.x1=yt,We.y1=ut,We.children&&(et=De[We.depth+1]=qe(We)/2,nt+=Le(We)-et,ct+=Ke(We)-et,(yt-=be(We)-et)<nt&&(nt=yt=(nt+yt)/2),(ut-=Oe(We)-et)<ct&&(ct=ut=(ct+ut)/2),me(We,nt,ct,yt,ut))}return Ue.round=function(We){return arguments.length?(ce=!!We,Ue):ce},Ue.size=function(We){return arguments.length?(Ae=+We[0],Ne=+We[1],Ue):[Ae,Ne]},Ue.tile=function(We){return arguments.length?(me=S(We),Ue):me},Ue.padding=function(We){return arguments.length?Ue.paddingInner(We).paddingOuter(We):Ue.paddingInner()},Ue.paddingInner=function(We){return arguments.length?(qe="function"==typeof We?We:P(+We),Ue):qe},Ue.paddingOuter=function(We){return arguments.length?Ue.paddingTop(We).paddingRight(We).paddingBottom(We).paddingLeft(We):Ue.paddingTop()},Ue.paddingTop=function(We){return arguments.length?(Ke="function"==typeof We?We:P(+We),Ue):Ke},Ue.paddingRight=function(We){return arguments.length?(be="function"==typeof We?We:P(+We),Ue):be},Ue.paddingBottom=function(We){return arguments.length?(Oe="function"==typeof We?We:P(+We),Ue):Oe},Ue.paddingLeft=function(We){return arguments.length?(Le="function"==typeof We?We:P(+We),Ue):Le},Ue}function Ce(me,ce,Ae,Ne,De){var qe,Ke,be=me.children,Oe=be.length,Le=new Array(Oe+1);for(Le[0]=Ke=qe=0;qe<Oe;++qe)Le[qe+1]=Ke+=be[qe].value;!function Ue(Ze,We,et,nt,ct,yt,ut){if(Ze>=We-1){var Ct=be[Ze];return Ct.x0=nt,Ct.y0=ct,Ct.x1=yt,void(Ct.y1=ut)}for(var Dt=Le[Ze],vt=et/2+Dt,mt=Ze+1,Lt=We-1;mt<Lt;){var Ft=mt+Lt>>>1;Le[Ft]<vt?mt=Ft+1:Lt=Ft}vt-Le[mt-1]<Le[mt]-vt&&Ze+1<mt&&--mt;var Rt=Le[mt]-Dt,Wt=et-Rt;if(yt-nt>ut-ct){var Ht=(nt*Wt+yt*Rt)/et;Ue(Ze,mt,Rt,nt,ct,Ht,ut),Ue(mt,We,Wt,Ht,ct,yt,ut)}else{var it=(ct*Wt+ut*Rt)/et;Ue(Ze,mt,Rt,nt,ct,yt,it),Ue(mt,We,Wt,nt,it,yt,ut)}}(0,Oe,me.value,ce,Ae,Ne,De)}function Ie(me,ce,Ae,Ne,De){(1&me.depth?Re:G)(me,ce,Ae,Ne,De)}var ge=function me(ce){function Ae(Ne,De,qe,Ke,be){if((Oe=Ne._squarify)&&Oe.ratio===ce)for(var Oe,Le,Ue,Ze,We,et=-1,nt=Oe.length,ct=Ne.value;++et<nt;){for(Ue=(Le=Oe[et]).children,Ze=Le.value=0,We=Ue.length;Ze<We;++Ze)Le.value+=Ue[Ze].value;Le.dice?G(Le,De,qe,Ke,qe+=(be-qe)*Le.value/ct):Re(Le,De,qe,De+=(Ke-De)*Le.value/ct,be),ct-=Le.value}else Ne._squarify=Oe=Te(ce,Ne,De,qe,Ke,be),Oe.ratio=ce}return Ae.ratio=function(Ne){return me((Ne=+Ne)>1?Ne:1)},Ae}(ke)},45879:function(se,U,r){"use strict";r.d(U,{h5:function(){return g}});var I=Math.PI,C=2*I,f=1e-6,k=C-f;function T(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new T}T.prototype=v.prototype={constructor:T,moveTo:function(h,w){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+w)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(h,w){this._+="L"+(this._x1=+h)+","+(this._y1=+w)},quadraticCurveTo:function(h,w,y,p){this._+="Q"+ +h+","+ +w+","+(this._x1=+y)+","+(this._y1=+p)},bezierCurveTo:function(h,w,y,p,_,x){this._+="C"+ +h+","+ +w+","+ +y+","+ +p+","+(this._x1=+_)+","+(this._y1=+x)},arcTo:function(h,w,y,p,_){var x=this._x1,b=this._y1,M=(y=+y)-(h=+h),m=(p=+p)-(w=+w),D=x-h,S=b-w,O=D*D+S*S;if((_=+_)<0)throw new Error("negative radius: "+_);if(null===this._x1)this._+="M"+(this._x1=h)+","+(this._y1=w);else if(O>f)if(Math.abs(S*M-m*D)>f&&_){var P=y-x,R=p-b,F=M*M+m*m,B=P*P+R*R,J=Math.sqrt(F),z=Math.sqrt(O),$=_*Math.tan((I-Math.acos((F+O-B)/(2*J*z)))/2),G=$/z,H=$/J;Math.abs(G-1)>f&&(this._+="L"+(h+G*D)+","+(w+G*S)),this._+="A"+_+","+_+",0,0,"+ +(S*P>D*R)+","+(this._x1=h+H*M)+","+(this._y1=w+H*m)}else this._+="L"+(this._x1=h)+","+(this._y1=w)},arc:function(h,w,y,p,_,x){h=+h,w=+w,x=!!x;var b=(y=+y)*Math.cos(p),M=y*Math.sin(p),m=h+b,D=w+M,S=1^x,O=x?p-_:_-p;if(y<0)throw new Error("negative radius: "+y);null===this._x1?this._+="M"+m+","+D:(Math.abs(this._x1-m)>f||Math.abs(this._y1-D)>f)&&(this._+="L"+m+","+D),y&&(O<0&&(O=O%C+C),O>k?this._+="A"+y+","+y+",0,1,"+S+","+(h-b)+","+(w-M)+"A"+y+","+y+",0,1,"+S+","+(this._x1=m)+","+(this._y1=D):O>f&&(this._+="A"+y+","+y+",0,"+ +(O>=I)+","+S+","+(this._x1=h+y*Math.cos(_))+","+(this._y1=w+y*Math.sin(_))))},rect:function(h,w,y,p){this._+="M"+(this._x0=this._x1=+h)+","+(this._y0=this._y1=+w)+"h"+ +y+"v"+ +p+"h"+-y+"Z"},toString:function(){return this._}};var c=v,i=Array.prototype.slice;function s(h){return function(){return h}}function a(h){return h[0]}function o(h){return h[1]}function l(h){return h.source}function u(h){return h.target}function d(h,w,y,p,_){h.moveTo(w,y),h.bezierCurveTo(w=(w+p)/2,y,w,_,p,_)}function g(){return function(h){var w=l,y=u,p=a,_=o,x=null;function b(){var M,m=i.call(arguments),D=w.apply(this,m),S=y.apply(this,m);if(x||(x=M=c()),h(x,+p.apply(this,(m[0]=D,m)),+_.apply(this,m),+p.apply(this,(m[0]=S,m)),+_.apply(this,m)),M)return x=null,M+""||null}return b.source=function(M){return arguments.length?(w=M,b):w},b.target=function(M){return arguments.length?(y=M,b):y},b.x=function(M){return arguments.length?(p="function"==typeof M?M:s(+M),b):p},b.y=function(M){return arguments.length?(_="function"==typeof M?M:s(+M),b):_},b.context=function(M){return arguments.length?(x=M??null,b):x},b}(d)}},84096:function(se,U,r){"use strict";r.d(U,{i$:function(){return l},Dq:function(){return a},g0:function(){return u}});var I=r(58176),C=r(48480),f=r(59879),k=r(82301),T=r(34823),v=r(79791);function c(mt){if(0<=mt.y&&mt.y<100){var Lt=new Date(-1,mt.m,mt.d,mt.H,mt.M,mt.S,mt.L);return Lt.setFullYear(mt.y),Lt}return new Date(mt.y,mt.m,mt.d,mt.H,mt.M,mt.S,mt.L)}function i(mt){if(0<=mt.y&&mt.y<100){var Lt=new Date(Date.UTC(-1,mt.m,mt.d,mt.H,mt.M,mt.S,mt.L));return Lt.setUTCFullYear(mt.y),Lt}return new Date(Date.UTC(mt.y,mt.m,mt.d,mt.H,mt.M,mt.S,mt.L))}function s(mt,Lt,Ft){return{y:mt,m:Lt,d:Ft,H:0,M:0,S:0,L:0}}function a(mt){var Lt=mt.dateTime,Ft=mt.date,Rt=mt.time,Wt=mt.periods,Ht=mt.days,it=mt.shortDays,st=mt.months,Je=mt.shortMonths,ot=_(Wt),pt=x(Wt),xt=_(Ht),He=x(Ht),Ge=_(it),dt=x(it),ht=_(st),kt=x(st),St=_(Je),Et=x(Je),wt={a:function($t){return it[$t.getDay()]},A:function($t){return Ht[$t.getDay()]},b:function($t){return Je[$t.getMonth()]},B:function($t){return st[$t.getMonth()]},c:null,d:Q,e:Q,f:pe,H:ie,I:le,j:fe,L:he,m:xe,M:Ee,p:function($t){return Wt[+($t.getHours()>=12)]},q:function($t){return 1+~~($t.getMonth()/3)},Q:Dt,s:vt,S:Re,u:ke,U:Te,V:we,w:je,W:Ce,x:null,X:null,y:Ie,Y:ge,Z:me,"%":Ct},Nt={a:function($t){return it[$t.getUTCDay()]},A:function($t){return Ht[$t.getUTCDay()]},b:function($t){return Je[$t.getUTCMonth()]},B:function($t){return st[$t.getUTCMonth()]},c:null,d:ce,e:ce,f:Ke,H:Ae,I:Ne,j:De,L:qe,m:be,M:Oe,p:function($t){return Wt[+($t.getUTCHours()>=12)]},q:function($t){return 1+~~($t.getUTCMonth()/3)},Q:Dt,s:vt,S:Le,u:Ue,U:Ze,V:We,w:et,W:nt,x:null,X:null,y:ct,Y:yt,Z:ut,"%":Ct},_t={a:function($t,Xt,dn){var on=Ge.exec(Xt.slice(dn));return on?($t.w=dt[on[0].toLowerCase()],dn+on[0].length):-1},A:function($t,Xt,dn){var on=xt.exec(Xt.slice(dn));return on?($t.w=He[on[0].toLowerCase()],dn+on[0].length):-1},b:function($t,Xt,dn){var on=St.exec(Xt.slice(dn));return on?($t.m=Et[on[0].toLowerCase()],dn+on[0].length):-1},B:function($t,Xt,dn){var on=ht.exec(Xt.slice(dn));return on?($t.m=kt[on[0].toLowerCase()],dn+on[0].length):-1},c:function($t,Xt,dn){return Zt($t,Lt,Xt,dn)},d:J,e:J,f:K,H:$,I:$,j:z,L:X,m:B,M:G,p:function($t,Xt,dn){var on=ot.exec(Xt.slice(dn));return on?($t.p=pt[on[0].toLowerCase()],dn+on[0].length):-1},q:F,Q:ae,s:ne,S:H,u:M,U:m,V:D,w:b,W:S,x:function($t,Xt,dn){return Zt($t,Ft,Xt,dn)},X:function($t,Xt,dn){return Zt($t,Rt,Xt,dn)},y:P,Y:O,Z:R,"%":ue};function Mt($t,Xt){return function(dn){var on,cn,tn,Cn=[],Fn=-1,En=0,rn=$t.length;for(dn instanceof Date||(dn=new Date(+dn));++Fn<rn;)37===$t.charCodeAt(Fn)&&(Cn.push($t.slice(En,Fn)),null!=(cn=d[on=$t.charAt(++Fn)])?on=$t.charAt(++Fn):cn="e"===on?" ":"0",(tn=Xt[on])&&(on=tn(dn,cn)),Cn.push(on),En=Fn+1);return Cn.push($t.slice(En,Fn)),Cn.join("")}}function Pt($t,Xt){return function(dn){var on,cn,tn=s(1900,void 0,1);if(Zt(tn,$t,dn+="",0)!=dn.length)return null;if("Q"in tn)return new Date(tn.Q);if("s"in tn)return new Date(1e3*tn.s+("L"in tn?tn.L:0));if(Xt&&!("Z"in tn)&&(tn.Z=0),"p"in tn&&(tn.H=tn.H%12+12*tn.p),void 0===tn.m&&(tn.m="q"in tn?tn.q:0),"V"in tn){if(tn.V<1||tn.V>53)return null;"w"in tn||(tn.w=1),"Z"in tn?(cn=(on=i(s(tn.y,0,1))).getUTCDay(),on=cn>4||0===cn?I.l6.ceil(on):(0,I.l6)(on),on=C.Z.offset(on,7*(tn.V-1)),tn.y=on.getUTCFullYear(),tn.m=on.getUTCMonth(),tn.d=on.getUTCDate()+(tn.w+6)%7):(cn=(on=c(s(tn.y,0,1))).getDay(),on=cn>4||0===cn?f.wA.ceil(on):(0,f.wA)(on),on=k.Z.offset(on,7*(tn.V-1)),tn.y=on.getFullYear(),tn.m=on.getMonth(),tn.d=on.getDate()+(tn.w+6)%7)}else("W"in tn||"U"in tn)&&("w"in tn||(tn.w="u"in tn?tn.u%7:"W"in tn?1:0),cn="Z"in tn?i(s(tn.y,0,1)).getUTCDay():c(s(tn.y,0,1)).getDay(),tn.m=0,tn.d="W"in tn?(tn.w+6)%7+7*tn.W-(cn+5)%7:tn.w+7*tn.U-(cn+6)%7);return"Z"in tn?(tn.H+=tn.Z/100|0,tn.M+=tn.Z%100,i(tn)):c(tn)}}function Zt($t,Xt,dn,on){for(var cn,tn,Cn=0,Fn=Xt.length,En=dn.length;Cn<Fn;){if(on>=En)return-1;if(37===(cn=Xt.charCodeAt(Cn++))){if(cn=Xt.charAt(Cn++),!(tn=_t[cn in d?Xt.charAt(Cn++):cn])||(on=tn($t,dn,on))<0)return-1}else if(cn!=dn.charCodeAt(on++))return-1}return on}return wt.x=Mt(Ft,wt),wt.X=Mt(Rt,wt),wt.c=Mt(Lt,wt),Nt.x=Mt(Ft,Nt),Nt.X=Mt(Rt,Nt),Nt.c=Mt(Lt,Nt),{format:function($t){var Xt=Mt($t+="",wt);return Xt.toString=function(){return $t},Xt},parse:function($t){var Xt=Pt($t+="",!1);return Xt.toString=function(){return $t},Xt},utcFormat:function($t){var Xt=Mt($t+="",Nt);return Xt.toString=function(){return $t},Xt},utcParse:function($t){var Xt=Pt($t+="",!0);return Xt.toString=function(){return $t},Xt}}}var o,l,u,d={"-":"",_:" ",0:"0"},g=/^\s*\d+/,h=/^%/,w=/[\\^$*+?|[\]().{}]/g;function y(mt,Lt,Ft){var Rt=mt<0?"-":"",Wt=(Rt?-mt:mt)+"",Ht=Wt.length;return Rt+(Ht<Ft?new Array(Ft-Ht+1).join(Lt)+Wt:Wt)}function p(mt){return mt.replace(w,"\\$&")}function _(mt){return new RegExp("^(?:"+mt.map(p).join("|")+")","i")}function x(mt){for(var Lt={},Ft=-1,Rt=mt.length;++Ft<Rt;)Lt[mt[Ft].toLowerCase()]=Ft;return Lt}function b(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+1));return Rt?(mt.w=+Rt[0],Ft+Rt[0].length):-1}function M(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+1));return Rt?(mt.u=+Rt[0],Ft+Rt[0].length):-1}function m(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.U=+Rt[0],Ft+Rt[0].length):-1}function D(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.V=+Rt[0],Ft+Rt[0].length):-1}function S(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.W=+Rt[0],Ft+Rt[0].length):-1}function O(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+4));return Rt?(mt.y=+Rt[0],Ft+Rt[0].length):-1}function P(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.y=+Rt[0]+(+Rt[0]>68?1900:2e3),Ft+Rt[0].length):-1}function R(mt,Lt,Ft){var Rt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Lt.slice(Ft,Ft+6));return Rt?(mt.Z=Rt[1]?0:-(Rt[2]+(Rt[3]||"00")),Ft+Rt[0].length):-1}function F(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+1));return Rt?(mt.q=3*Rt[0]-3,Ft+Rt[0].length):-1}function B(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.m=Rt[0]-1,Ft+Rt[0].length):-1}function J(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.d=+Rt[0],Ft+Rt[0].length):-1}function z(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+3));return Rt?(mt.m=0,mt.d=+Rt[0],Ft+Rt[0].length):-1}function $(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.H=+Rt[0],Ft+Rt[0].length):-1}function G(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.M=+Rt[0],Ft+Rt[0].length):-1}function H(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+2));return Rt?(mt.S=+Rt[0],Ft+Rt[0].length):-1}function X(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+3));return Rt?(mt.L=+Rt[0],Ft+Rt[0].length):-1}function K(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft,Ft+6));return Rt?(mt.L=Math.floor(Rt[0]/1e3),Ft+Rt[0].length):-1}function ue(mt,Lt,Ft){var Rt=h.exec(Lt.slice(Ft,Ft+1));return Rt?Ft+Rt[0].length:-1}function ae(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft));return Rt?(mt.Q=+Rt[0],Ft+Rt[0].length):-1}function ne(mt,Lt,Ft){var Rt=g.exec(Lt.slice(Ft));return Rt?(mt.s=+Rt[0],Ft+Rt[0].length):-1}function Q(mt,Lt){return y(mt.getDate(),Lt,2)}function ie(mt,Lt){return y(mt.getHours(),Lt,2)}function le(mt,Lt){return y(mt.getHours()%12||12,Lt,2)}function fe(mt,Lt){return y(1+k.Z.count((0,T.Z)(mt),mt),Lt,3)}function he(mt,Lt){return y(mt.getMilliseconds(),Lt,3)}function pe(mt,Lt){return he(mt,Lt)+"000"}function xe(mt,Lt){return y(mt.getMonth()+1,Lt,2)}function Ee(mt,Lt){return y(mt.getMinutes(),Lt,2)}function Re(mt,Lt){return y(mt.getSeconds(),Lt,2)}function ke(mt){var Lt=mt.getDay();return 0===Lt?7:Lt}function Te(mt,Lt){return y(f.OM.count((0,T.Z)(mt)-1,mt),Lt,2)}function we(mt,Lt){var Ft=mt.getDay();return mt=Ft>=4||0===Ft?(0,f.bL)(mt):f.bL.ceil(mt),y(f.bL.count((0,T.Z)(mt),mt)+(4===(0,T.Z)(mt).getDay()),Lt,2)}function je(mt){return mt.getDay()}function Ce(mt,Lt){return y(f.wA.count((0,T.Z)(mt)-1,mt),Lt,2)}function Ie(mt,Lt){return y(mt.getFullYear()%100,Lt,2)}function ge(mt,Lt){return y(mt.getFullYear()%1e4,Lt,4)}function me(mt){var Lt=mt.getTimezoneOffset();return(Lt>0?"-":(Lt*=-1,"+"))+y(Lt/60|0,"0",2)+y(Lt%60,"0",2)}function ce(mt,Lt){return y(mt.getUTCDate(),Lt,2)}function Ae(mt,Lt){return y(mt.getUTCHours(),Lt,2)}function Ne(mt,Lt){return y(mt.getUTCHours()%12||12,Lt,2)}function De(mt,Lt){return y(1+C.Z.count((0,v.Z)(mt),mt),Lt,3)}function qe(mt,Lt){return y(mt.getUTCMilliseconds(),Lt,3)}function Ke(mt,Lt){return qe(mt,Lt)+"000"}function be(mt,Lt){return y(mt.getUTCMonth()+1,Lt,2)}function Oe(mt,Lt){return y(mt.getUTCMinutes(),Lt,2)}function Le(mt,Lt){return y(mt.getUTCSeconds(),Lt,2)}function Ue(mt){var Lt=mt.getUTCDay();return 0===Lt?7:Lt}function Ze(mt,Lt){return y(I.Ox.count((0,v.Z)(mt)-1,mt),Lt,2)}function We(mt,Lt){var Ft=mt.getUTCDay();return mt=Ft>=4||0===Ft?(0,I.hB)(mt):I.hB.ceil(mt),y(I.hB.count((0,v.Z)(mt),mt)+(4===(0,v.Z)(mt).getUTCDay()),Lt,2)}function et(mt){return mt.getUTCDay()}function nt(mt,Lt){return y(I.l6.count((0,v.Z)(mt)-1,mt),Lt,2)}function ct(mt,Lt){return y(mt.getUTCFullYear()%100,Lt,2)}function yt(mt,Lt){return y(mt.getUTCFullYear()%1e4,Lt,4)}function ut(){return"+0000"}function Ct(){return"%"}function Dt(mt){return+mt}function vt(mt){return Math.floor(+mt/1e3)}o=a({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),l=o.format,u=o.utcFormat},82301:function(se,U,r){"use strict";r.d(U,{a:function(){return k}});var I=r(30052),C=r(54263),f=(0,I.Z)(function(T){T.setHours(0,0,0,0)},function(T,v){T.setDate(T.getDate()+v)},function(T,v){return(v-T-(v.getTimezoneOffset()-T.getTimezoneOffset())*C.yB)/C.UD},function(T){return T.getDate()-1});U.Z=f;var k=f.range},54263:function(se,U,r){"use strict";r.d(U,{UD:function(){return k},Y2:function(){return f},Ym:function(){return I},iM:function(){return T},yB:function(){return C}});var I=1e3,C=6e4,f=36e5,k=864e5,T=6048e5},81041:function(se,U,r){"use strict";r.r(U),r.d(U,{timeDay:function(){return g.Z},timeDays:function(){return g.a},timeFriday:function(){return h.mC},timeFridays:function(){return h.b$},timeHour:function(){return u},timeHours:function(){return d},timeInterval:function(){return I.Z},timeMillisecond:function(){return f},timeMilliseconds:function(){return k},timeMinute:function(){return a},timeMinutes:function(){return o},timeMonday:function(){return h.wA},timeMondays:function(){return h.bJ},timeMonth:function(){return y},timeMonths:function(){return p},timeSaturday:function(){return h.EY},timeSaturdays:function(){return h.Ff},timeSecond:function(){return c},timeSeconds:function(){return i},timeSunday:function(){return h.OM},timeSundays:function(){return h.vm},timeThursday:function(){return h.bL},timeThursdays:function(){return h.$t},timeTuesday:function(){return h.sy},timeTuesdays:function(){return h.aU},timeWednesday:function(){return h.zg},timeWednesdays:function(){return h.Ld},timeWeek:function(){return h.OM},timeWeeks:function(){return h.vm},timeYear:function(){return _.Z},timeYears:function(){return _.g},utcDay:function(){return O.Z},utcDays:function(){return O.y},utcFriday:function(){return P.QQ},utcFridays:function(){return P.fz},utcHour:function(){return D},utcHours:function(){return S},utcMillisecond:function(){return f},utcMilliseconds:function(){return k},utcMinute:function(){return b},utcMinutes:function(){return M},utcMonday:function(){return P.l6},utcMondays:function(){return P.$3},utcMonth:function(){return F},utcMonths:function(){return B},utcSaturday:function(){return P.g4},utcSaturdays:function(){return P.Q_},utcSecond:function(){return c},utcSeconds:function(){return i},utcSunday:function(){return P.Ox},utcSundays:function(){return P.SU},utcThursday:function(){return P.hB},utcThursdays:function(){return P.xj},utcTuesday:function(){return P.J1},utcTuesdays:function(){return P.DK},utcWednesday:function(){return P.b3},utcWednesdays:function(){return P.uy},utcWeek:function(){return P.Ox},utcWeeks:function(){return P.SU},utcYear:function(){return J.Z},utcYears:function(){return J.D}});var I=r(30052),C=(0,I.Z)(function(){},function(z,$){z.setTime(+z+$)},function(z,$){return $-z});C.every=function(z){return z=Math.floor(z),isFinite(z)&&z>0?z>1?(0,I.Z)(function($){$.setTime(Math.floor($/z)*z)},function($,G){$.setTime(+$+G*z)},function($,G){return(G-$)/z}):C:null};var f=C,k=C.range,T=r(54263),v=(0,I.Z)(function(z){z.setTime(z-z.getMilliseconds())},function(z,$){z.setTime(+z+$*T.Ym)},function(z,$){return($-z)/T.Ym},function(z){return z.getUTCSeconds()}),c=v,i=v.range,s=(0,I.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*T.Ym)},function(z,$){z.setTime(+z+$*T.yB)},function(z,$){return($-z)/T.yB},function(z){return z.getMinutes()}),a=s,o=s.range,l=(0,I.Z)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*T.Ym-z.getMinutes()*T.yB)},function(z,$){z.setTime(+z+$*T.Y2)},function(z,$){return($-z)/T.Y2},function(z){return z.getHours()}),u=l,d=l.range,g=r(82301),h=r(59879),w=(0,I.Z)(function(z){z.setDate(1),z.setHours(0,0,0,0)},function(z,$){z.setMonth(z.getMonth()+$)},function(z,$){return $.getMonth()-z.getMonth()+12*($.getFullYear()-z.getFullYear())},function(z){return z.getMonth()}),y=w,p=w.range,_=r(34823),x=(0,I.Z)(function(z){z.setUTCSeconds(0,0)},function(z,$){z.setTime(+z+$*T.yB)},function(z,$){return($-z)/T.yB},function(z){return z.getUTCMinutes()}),b=x,M=x.range,m=(0,I.Z)(function(z){z.setUTCMinutes(0,0,0)},function(z,$){z.setTime(+z+$*T.Y2)},function(z,$){return($-z)/T.Y2},function(z){return z.getUTCHours()}),D=m,S=m.range,O=r(48480),P=r(58176),R=(0,I.Z)(function(z){z.setUTCDate(1),z.setUTCHours(0,0,0,0)},function(z,$){z.setUTCMonth(z.getUTCMonth()+$)},function(z,$){return $.getUTCMonth()-z.getUTCMonth()+12*($.getUTCFullYear()-z.getUTCFullYear())},function(z){return z.getUTCMonth()}),F=R,B=R.range,J=r(79791)},30052:function(se,U,r){"use strict";r.d(U,{Z:function(){return f}});var I=new Date,C=new Date;function f(k,T,v,c){function i(s){return k(s=0===arguments.length?new Date:new Date(+s)),s}return i.floor=function(s){return k(s=new Date(+s)),s},i.ceil=function(s){return k(s=new Date(s-1)),T(s,1),k(s),s},i.round=function(s){var a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=function(s,a){return T(s=new Date(+s),null==a?1:Math.floor(a)),s},i.range=function(s,a,o){var l,u=[];if(s=i.ceil(s),o=null==o?1:Math.floor(o),!(s<a&&o>0))return u;do{u.push(l=new Date(+s)),T(s,o),k(s)}while(l<s&&s<a);return u},i.filter=function(s){return f(function(a){if(a>=a)for(;k(a),!s(a);)a.setTime(a-1)},function(a,o){if(a>=a)if(o<0)for(;++o<=0;)for(;T(a,-1),!s(a););else for(;--o>=0;)for(;T(a,1),!s(a););})},v&&(i.count=function(s,a){return I.setTime(+s),C.setTime(+a),k(I),k(C),Math.floor(v(I,C))},i.every=function(s){return s=Math.floor(s),isFinite(s)&&s>0?s>1?i.filter(c?function(a){return c(a)%s==0}:function(a){return i.count(0,a)%s==0}):i:null}),i}},48480:function(se,U,r){"use strict";r.d(U,{y:function(){return k}});var I=r(30052),C=r(54263),f=(0,I.Z)(function(T){T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCDate(T.getUTCDate()+v)},function(T,v){return(v-T)/C.UD},function(T){return T.getUTCDate()-1});U.Z=f;var k=f.range},58176:function(se,U,r){"use strict";r.d(U,{$3:function(){return l},DK:function(){return u},J1:function(){return v},Ox:function(){return k},QQ:function(){return s},Q_:function(){return w},SU:function(){return o},b3:function(){return c},fz:function(){return h},g4:function(){return a},hB:function(){return i},l6:function(){return T},uy:function(){return d},xj:function(){return g}});var I=r(30052),C=r(54263);function f(y){return(0,I.Z)(function(p){p.setUTCDate(p.getUTCDate()-(p.getUTCDay()+7-y)%7),p.setUTCHours(0,0,0,0)},function(p,_){p.setUTCDate(p.getUTCDate()+7*_)},function(p,_){return(_-p)/C.iM})}var k=f(0),T=f(1),v=f(2),c=f(3),i=f(4),s=f(5),a=f(6),o=k.range,l=T.range,u=v.range,d=c.range,g=i.range,h=s.range,w=a.range},79791:function(se,U,r){"use strict";r.d(U,{D:function(){return f}});var I=r(30052),C=(0,I.Z)(function(k){k.setUTCMonth(0,1),k.setUTCHours(0,0,0,0)},function(k,T){k.setUTCFullYear(k.getUTCFullYear()+T)},function(k,T){return T.getUTCFullYear()-k.getUTCFullYear()},function(k){return k.getUTCFullYear()});C.every=function(k){return isFinite(k=Math.floor(k))&&k>0?(0,I.Z)(function(T){T.setUTCFullYear(Math.floor(T.getUTCFullYear()/k)*k),T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCFullYear(T.getUTCFullYear()+v*k)}):null},U.Z=C;var f=C.range},59879:function(se,U,r){"use strict";r.d(U,{$t:function(){return g},EY:function(){return a},Ff:function(){return w},Ld:function(){return d},OM:function(){return k},aU:function(){return u},b$:function(){return h},bJ:function(){return l},bL:function(){return i},mC:function(){return s},sy:function(){return v},vm:function(){return o},wA:function(){return T},zg:function(){return c}});var I=r(30052),C=r(54263);function f(y){return(0,I.Z)(function(p){p.setDate(p.getDate()-(p.getDay()+7-y)%7),p.setHours(0,0,0,0)},function(p,_){p.setDate(p.getDate()+7*_)},function(p,_){return(_-p-(_.getTimezoneOffset()-p.getTimezoneOffset())*C.yB)/C.iM})}var k=f(0),T=f(1),v=f(2),c=f(3),i=f(4),s=f(5),a=f(6),o=k.range,l=T.range,u=v.range,d=c.range,g=i.range,h=s.range,w=a.range},34823:function(se,U,r){"use strict";r.d(U,{g:function(){return f}});var I=r(30052),C=(0,I.Z)(function(k){k.setMonth(0,1),k.setHours(0,0,0,0)},function(k,T){k.setFullYear(k.getFullYear()+T)},function(k,T){return T.getFullYear()-k.getFullYear()},function(k){return k.getFullYear()});C.every=function(k){return isFinite(k=Math.floor(k))&&k>0?(0,I.Z)(function(T){T.setFullYear(Math.floor(T.getFullYear()/k)*k),T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,v){T.setFullYear(T.getFullYear()+v*k)}):null},U.Z=C;var f=C.range},17045:function(se,U,r){"use strict";var I=r(8709),C="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),f=Object.prototype.toString,k=Array.prototype.concat,T=Object.defineProperty,v=r(55622)(),c=T&&v,i=function(a,o,l,u){if(o in a)if(!0===u){if(a[o]===l)return}else if("function"!=typeof(d=u)||"[object Function]"!==f.call(d)||!u())return;var d;c?T(a,o,{configurable:!0,enumerable:!1,value:l,writable:!0}):a[o]=l},s=function(a,o){var l=arguments.length>2?arguments[2]:{},u=I(o);C&&(u=k.call(u,Object.getOwnPropertySymbols(o)));for(var d=0;d<u.length;d+=1)i(a,u[d],o[u[d]],l[u[d]])};s.supportsDescriptors=!!c,se.exports=s},46775:function(se){se.exports=function(){for(var U=0;U<arguments.length;U++)if(void 0!==arguments[U])return arguments[U]}},53545:function(se){"use strict";se.exports=I;var U=(I.canvas=document.createElement("canvas")).getContext("2d"),r=C([32,126]);function I(f,k){Array.isArray(f)&&(f=f.join(", "));var T,v={},c=16,i=.05;k&&(2===k.length&&"number"==typeof k[0]?T=C(k):Array.isArray(k)?T=k:(k.o?T=C(k.o):k.pairs&&(T=k.pairs),k.fontSize&&(c=k.fontSize),null!=k.threshold&&(i=k.threshold))),T||(T=r),U.font=c+"px "+f;for(var s=0;s<T.length;s++){var a=T[s],o=U.measureText(a[0]).width+U.measureText(a[1]).width,l=U.measureText(a).width;Math.abs(o-l)>c*i&&(v[a]=(l-o)/c*1e3)}return v}function C(f){for(var k=[],T=f[0];T<=f[1];T++)for(var v=String.fromCharCode(T),c=f[0];c<f[1];c++){var i=v+String.fromCharCode(c);k.push(i)}return k}I.createPairs=C,I.ascii=r},31457:function(se,U,r){var I=r(65185),C=r(18625),f={M:"moveTo",C:"bezierCurveTo"};se.exports=function(k,T){k.beginPath(),C(I(T)).forEach(function(v){var c=v[0],i=v.slice(1);k[f[c]].apply(k,i)}),k.closePath()}},90660:function(se){se.exports=function(U){switch(U){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function(se){"use strict";function U(r,I,C){var f=0|r[C];if(f<=0)return[];var k,T=new Array(f);if(C===r.length-1)for(k=0;k<f;++k)T[k]=I;else for(k=0;k<f;++k)T[k]=U(r,I,C+1);return T}se.exports=function(r,I){switch(void 0===I&&(I=0),typeof r){case"number":if(r>0)return function(C,f){var k,T;for(k=new Array(C),T=0;T<C;++T)k[T]=f;return k}(0|r,I);break;case"object":if("number"==typeof r.length)return U(r,I,0)}return[]}},11474:function(se){"use strict";function U(D,S,O){O=O||2;var P,R,F,B,J,z,$,G=S&&S.length,H=G?S[0]*O:D.length,X=r(D,0,H,O,!0),K=[];if(!X||X.next===X.prev)return K;if(G&&(X=function(ae,ne,Q,ie){var le,fe,he,pe=[];for(le=0,fe=ne.length;le<fe;le++)(he=r(ae,ne[le]*ie,le<fe-1?ne[le+1]*ie:ae.length,ie,!1))===he.next&&(he.steiner=!0),pe.push(o(he));for(pe.sort(c),le=0;le<pe.length;le++)i(pe[le],Q),Q=I(Q,Q.next);return Q}(D,S,X,O)),D.length>80*O){P=F=D[0],R=B=D[1];for(var ue=O;ue<H;ue+=O)(J=D[ue])<P&&(P=J),(z=D[ue+1])<R&&(R=z),J>F&&(F=J),z>B&&(B=z);$=0!==($=Math.max(F-P,B-R))?1/$:0}return C(X,K,O,P,R,$),K}function r(D,S,O,P,R){var F,B;if(R===m(D,S,O,P)>0)for(F=S;F<O;F+=P)B=x(F,D[F],D[F+1],B);else for(F=O-P;F>=S;F-=P)B=x(F,D[F],D[F+1],B);return B&&g(B,B.next)&&(b(B),B=B.next),B}function I(D,S){if(!D)return D;S||(S=D);var O,P=D;do{if(O=!1,P.steiner||!g(P,P.next)&&0!==d(P.prev,P,P.next))P=P.next;else{if(b(P),(P=S=P.prev)===P.next)break;O=!0}}while(O||P!==S);return S}function C(D,S,O,P,R,F,B){if(D){!B&&F&&function(G,H,X,K){var ue=G;do{null===ue.z&&(ue.z=a(ue.x,ue.y,H,X,K)),ue.prevZ=ue.prev,ue.nextZ=ue.next,ue=ue.next}while(ue!==G);ue.prevZ.nextZ=null,ue.prevZ=null,function(ae){var ne,Q,ie,le,fe,he,pe,xe,Ee=1;do{for(Q=ae,ae=null,fe=null,he=0;Q;){for(he++,ie=Q,pe=0,ne=0;ne<Ee&&(pe++,ie=ie.nextZ);ne++);for(xe=Ee;pe>0||xe>0&&ie;)0!==pe&&(0===xe||!ie||Q.z<=ie.z)?(le=Q,Q=Q.nextZ,pe--):(le=ie,ie=ie.nextZ,xe--),fe?fe.nextZ=le:ae=le,le.prevZ=fe,fe=le;Q=ie}fe.nextZ=null,Ee*=2}while(he>1)}(ue)}(D,P,R,F);for(var J,z,$=D;D.prev!==D.next;)if(J=D.prev,z=D.next,F?k(D,P,R,F):f(D))S.push(J.i/O),S.push(D.i/O),S.push(z.i/O),b(D),D=z.next,$=z.next;else if((D=z)===$){B?1===B?C(D=T(I(D),S,O),S,O,P,R,F,2):2===B&&v(D,S,O,P,R,F):C(I(D),S,O,P,R,F,1);break}}}function f(D){var S=D.prev,O=D,P=D.next;if(d(S,O,P)>=0)return!1;for(var R=D.next.next;R!==D.prev;){if(l(S.x,S.y,O.x,O.y,P.x,P.y,R.x,R.y)&&d(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function k(D,S,O,P){var R=D.prev,F=D,B=D.next;if(d(R,F,B)>=0)return!1;for(var $=R.x>F.x?R.x>B.x?R.x:B.x:F.x>B.x?F.x:B.x,G=R.y>F.y?R.y>B.y?R.y:B.y:F.y>B.y?F.y:B.y,H=a(R.x<F.x?R.x<B.x?R.x:B.x:F.x<B.x?F.x:B.x,R.y<F.y?R.y<B.y?R.y:B.y:F.y<B.y?F.y:B.y,S,O,P),X=a($,G,S,O,P),K=D.prevZ,ue=D.nextZ;K&&K.z>=H&&ue&&ue.z<=X;){if(K!==D.prev&&K!==D.next&&l(R.x,R.y,F.x,F.y,B.x,B.y,K.x,K.y)&&d(K.prev,K,K.next)>=0||(K=K.prevZ,ue!==D.prev&&ue!==D.next&&l(R.x,R.y,F.x,F.y,B.x,B.y,ue.x,ue.y)&&d(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;K&&K.z>=H;){if(K!==D.prev&&K!==D.next&&l(R.x,R.y,F.x,F.y,B.x,B.y,K.x,K.y)&&d(K.prev,K,K.next)>=0)return!1;K=K.prevZ}for(;ue&&ue.z<=X;){if(ue!==D.prev&&ue!==D.next&&l(R.x,R.y,F.x,F.y,B.x,B.y,ue.x,ue.y)&&d(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function T(D,S,O){var P=D;do{var R=P.prev,F=P.next.next;!g(R,F)&&h(R,P,P.next,F)&&p(R,F)&&p(F,R)&&(S.push(R.i/O),S.push(P.i/O),S.push(F.i/O),b(P),b(P.next),P=D=F),P=P.next}while(P!==D);return I(P)}function v(D,S,O,P,R,F){var B=D;do{for(var J=B.next.next;J!==B.prev;){if(B.i!==J.i&&u(B,J)){var z=_(B,J);return B=I(B,B.next),z=I(z,z.next),C(B,S,O,P,R,F),void C(z,S,O,P,R,F)}J=J.next}B=B.next}while(B!==D)}function c(D,S){return D.x-S.x}function i(D,S){if(S=function(P,R){var F,B=R,J=P.x,z=P.y,$=-1/0;do{if(z<=B.y&&z>=B.next.y&&B.next.y!==B.y){var G=B.x+(z-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(G<=J&&G>$){if($=G,G===J){if(z===B.y)return B;if(z===B.next.y)return B.next}F=B.x<B.next.x?B:B.next}}B=B.next}while(B!==R);if(!F)return null;if(J===$)return F;var H,X=F,K=F.x,ue=F.y,ae=1/0;B=F;do{J>=B.x&&B.x>=K&&J!==B.x&&l(z<ue?J:$,z,K,ue,z<ue?$:J,z,B.x,B.y)&&(H=Math.abs(z-B.y)/(J-B.x),p(B,P)&&(H<ae||H===ae&&(B.x>F.x||B.x===F.x&&s(F,B)))&&(F=B,ae=H)),B=B.next}while(B!==X);return F}(D,S)){var O=_(S,D);I(S,S.next),I(O,O.next)}}function s(D,S){return d(D.prev,D,S.prev)<0&&d(S.next,D,D.next)<0}function a(D,S,O,P,R){return(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-O)*R)|D<<8))|D<<4))|D<<2))|D<<1))|(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-P)*R)|S<<8))|S<<4))|S<<2))|S<<1))<<1}function o(D){var S=D,O=D;do{(S.x<O.x||S.x===O.x&&S.y<O.y)&&(O=S),S=S.next}while(S!==D);return O}function l(D,S,O,P,R,F,B,J){return(R-B)*(S-J)-(D-B)*(F-J)>=0&&(D-B)*(P-J)-(O-B)*(S-J)>=0&&(O-B)*(F-J)-(R-B)*(P-J)>=0}function u(D,S){return D.next.i!==S.i&&D.prev.i!==S.i&&!function(O,P){var R=O;do{if(R.i!==O.i&&R.next.i!==O.i&&R.i!==P.i&&R.next.i!==P.i&&h(R,R.next,O,P))return!0;R=R.next}while(R!==O);return!1}(D,S)&&(p(D,S)&&p(S,D)&&function(O,P){var R=O,F=!1,B=(O.x+P.x)/2,J=(O.y+P.y)/2;do{R.y>J!=R.next.y>J&&R.next.y!==R.y&&B<(R.next.x-R.x)*(J-R.y)/(R.next.y-R.y)+R.x&&(F=!F),R=R.next}while(R!==O);return F}(D,S)&&(d(D.prev,D,S.prev)||d(D,S.prev,S))||g(D,S)&&d(D.prev,D,D.next)>0&&d(S.prev,S,S.next)>0)}function d(D,S,O){return(S.y-D.y)*(O.x-S.x)-(S.x-D.x)*(O.y-S.y)}function g(D,S){return D.x===S.x&&D.y===S.y}function h(D,S,O,P){var R=y(d(D,S,O)),F=y(d(D,S,P)),B=y(d(O,P,D)),J=y(d(O,P,S));return R!==F&&B!==J||!(0!==R||!w(D,O,S))||!(0!==F||!w(D,P,S))||!(0!==B||!w(O,D,P))||!(0!==J||!w(O,S,P))}function w(D,S,O){return S.x<=Math.max(D.x,O.x)&&S.x>=Math.min(D.x,O.x)&&S.y<=Math.max(D.y,O.y)&&S.y>=Math.min(D.y,O.y)}function y(D){return D>0?1:D<0?-1:0}function p(D,S){return d(D.prev,D,D.next)<0?d(D,S,D.next)>=0&&d(D,D.prev,S)>=0:d(D,S,D.prev)<0||d(D,D.next,S)<0}function _(D,S){var O=new M(D.i,D.x,D.y),P=new M(S.i,S.x,S.y),R=D.next,F=S.prev;return D.next=S,S.prev=D,O.next=R,R.prev=O,P.next=O,O.prev=P,F.next=P,P.prev=F,P}function x(D,S,O,P){var R=new M(D,S,O);return P?(R.next=P.next,R.prev=P,P.next.prev=R,P.next=R):(R.prev=R,R.next=R),R}function b(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function M(D,S,O){this.i=D,this.x=S,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m(D,S,O,P){for(var R=0,F=S,B=O-P;F<O;F+=P)R+=(D[B]-D[F])*(D[F+1]+D[B+1]),B=F;return R}se.exports=U,se.exports.default=U,U.deviation=function(D,S,O,P){var R=S&&S.length,B=Math.abs(m(D,0,R?S[0]*O:D.length,O));if(R)for(var J=0,z=S.length;J<z;J++)B-=Math.abs(m(D,S[J]*O,J<z-1?S[J+1]*O:D.length,O));var H=0;for(J=0;J<P.length;J+=3){var X=P[J]*O,K=P[J+1]*O,ue=P[J+2]*O;H+=Math.abs((D[X]-D[ue])*(D[K+1]-D[X+1])-(D[X]-D[K])*(D[ue+1]-D[X+1]))}return 0===B&&0===H?0:Math.abs((H-B)/B)},U.flatten=function(D){for(var S=D[0][0].length,O={vertices:[],holes:[],dimensions:S},P=0,R=0;R<D.length;R++){for(var F=0;F<D[R].length;F++)for(var B=0;B<S;B++)O.vertices.push(D[R][F][B]);R>0&&O.holes.push(P+=D[R-1].length)}return O}},2502:function(se,U,r){var I=r(68664);se.exports=function(C,f){var k,T=[],v=[],c=[],i={},s=[];function a(p){c[p]=!1,i.hasOwnProperty(p)&&Object.keys(i[p]).forEach(function(_){delete i[p][_],c[_]&&a(_)})}function o(p){var _,x,b=!1;for(v.push(p),c[p]=!0,_=0;_<s[p].length;_++)(x=s[p][_])===k?(l(k,v),b=!0):c[x]||(b=o(x));if(b)a(p);else for(_=0;_<s[p].length;_++){var M=i[x=s[p][_]];M||(i[x]=M={}),M[x]=!0}return v.pop(),b}function l(p,_){var x=[].concat(_).concat(p);f?f(o):T.push(x)}function u(p){!function(O){for(var P=0;P<C.length;P++)P<O&&(C[P]=[]),C[P]=C[P].filter(function(R){return R>=O})}(p);for(var _,x=I(C).components.filter(function(O){return O.length>1}),b=1/0,M=0;M<x.length;M++)for(var m=0;m<x[M].length;m++)x[M][m]<b&&(b=x[M][m],_=M);var D=x[_];return!!D&&{leastVertex:b,adjList:C.map(function(O,P){return-1===D.indexOf(P)?[]:O.filter(function(R){return-1!==D.indexOf(R)})})}}k=0;for(var d=C.length;k<d;){var g=u(k);if(k=g.leastVertex,s=g.adjList){for(var h=0;h<s.length;h++)for(var w=0;w<s[h].length;w++){var y=s[h][w];c[+y]=!1,i[y]={}}o(k),k+=1}else k=d}return f?void 0:T}},16134:function(se,U,r){"use strict";var I=r(36672);se.exports=function(){return I(this).length=0,this}},4892:function(se,U,r){"use strict";se.exports=r(64404)()?Array.from:r(49441)},64404:function(se){"use strict";se.exports=function(){var U,r,I=Array.from;return"function"==typeof I&&!(!(r=I(U=["raz","dwa"]))||r===U||"dwa"!==r[1])}},49441:function(se,U,r){"use strict";var I=r(8260).iterator,C=r(73051),f=r(33717),k=r(35976),T=r(78513),v=r(36672),c=r(95296),i=r(87963),s=Array.isArray,a=Function.prototype.call,o={configurable:!0,enumerable:!0,writable:!0,value:null},l=Object.defineProperty;se.exports=function(u){var d,g,h,w,y,p,_,x,b,M,m=arguments[1],D=arguments[2];if(u=Object(v(u)),c(m)&&T(m),this&&this!==Array&&f(this))d=this;else{if(!m){if(C(u))return 1!==(y=u.length)?Array.apply(null,u):((w=new Array(1))[0]=u[0],w);if(s(u)){for(w=new Array(y=u.length),g=0;g<y;++g)w[g]=u[g];return w}}w=[]}if(!s(u))if(void 0!==(b=u[I])){for(_=T(b).call(u),d&&(w=new d),x=_.next(),g=0;!x.done;)M=m?a.call(m,D,x.value,g):x.value,d?(o.value=M,l(w,g,o)):w[g]=M,x=_.next(),++g;y=g}else if(i(u)){for(y=u.length,d&&(w=new d),g=0,h=0;g<y;++g)M=u[g],g+1<y&&(p=M.charCodeAt(0))>=55296&&p<=56319&&(M+=u[++g]),M=m?a.call(m,D,M,h):M,d?(o.value=M,l(w,h,o)):w[h]=M,++h;y=h}if(void 0===y)for(y=k(u.length),d&&(w=new d(y)),g=0;g<y;++g)M=m?a.call(m,D,u[g],g):u[g],d?(o.value=M,l(w,g,o)):w[g]=M;return d&&(o.value=null,w.length=y),w}},73051:function(se){"use strict";var U=Object.prototype.toString,r=U.call(function(){return arguments}());se.exports=function(I){return U.call(I)===r}},33717:function(se){"use strict";var U=Object.prototype.toString,r=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);se.exports=function(I){return"function"==typeof I&&r(U.call(I))}},52345:function(se){"use strict";se.exports=function(){}},9953:function(se,U,r){"use strict";se.exports=r(90436)()?Math.sign:r(6069)},90436:function(se){"use strict";se.exports=function(){var U=Math.sign;return"function"==typeof U&&1===U(10)&&-1===U(-20)}},6069:function(se){"use strict";se.exports=function(U){return U=Number(U),isNaN(U)||0===U?U:U>0?1:-1}},56247:function(se,U,r){"use strict";var I=r(9953),C=Math.abs,f=Math.floor;se.exports=function(k){return isNaN(k)?0:0!==(k=Number(k))&&isFinite(k)?I(k)*f(C(k)):k}},35976:function(se,U,r){"use strict";var I=r(56247),C=Math.max;se.exports=function(f){return C(0,I(f))}},67260:function(se,U,r){"use strict";var I=r(78513),C=r(36672),f=Function.prototype.bind,k=Function.prototype.call,T=Object.keys,v=Object.prototype.propertyIsEnumerable;se.exports=function(c,i){return function(s,a){var o,l=arguments[2],u=arguments[3];return s=Object(C(s)),I(a),o=T(s),u&&o.sort("function"==typeof u?f.call(u,s):void 0),"function"!=typeof c&&(c=o[c]),k.call(c,o,function(d,g){return v.call(s,d)?k.call(a,l,s[d],d,s,g):i})}}},95879:function(se,U,r){"use strict";se.exports=r(73583)()?Object.assign:r(34205)},73583:function(se){"use strict";se.exports=function(){var U,r=Object.assign;return"function"==typeof r&&(r(U={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),U.foo+U.bar+U.trzy==="razdwatrzy")}},34205:function(se,U,r){"use strict";var I=r(68700),C=r(36672),f=Math.max;se.exports=function(k,T){var v,c,i,s=f(arguments.length,2);for(k=Object(C(k)),i=function(a){try{k[a]=T[a]}catch(o){v||(v=o)}},c=1;c<s;++c)I(T=arguments[c]).forEach(i);if(void 0!==v)throw v;return k}},19012:function(se,U,r){"use strict";var I=r(4892),C=r(95879),f=r(36672);se.exports=function(k){var T=Object(f(k)),v=arguments[1],c=Object(arguments[2]);if(T!==k&&!v)return T;var i={};return v?I(v,function(s){(c.ensure||s in k)&&(i[s]=k[s])}):C(i,k),i}},52818:function(se,U,r){"use strict";var I,C,f,k,T=Object.create;r(33247)()||(I=r(51882)),se.exports=I?1!==I.level?T:(C={},f={},k={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(v){f[v]="__proto__"!==v?k:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(C,f),Object.defineProperty(I,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:C}),function(v,c){return T(null===v?C:v,c)}):T},96437:function(se,U,r){"use strict";se.exports=r(67260)("forEach")},99611:function(se,U,r){"use strict";var I=r(95296),C={function:!0,object:!0};se.exports=function(f){return I(f)&&C[typeof f]||!1}},95296:function(se,U,r){"use strict";var I=r(52345)();se.exports=function(C){return C!==I&&null!==C}},68700:function(se,U,r){"use strict";se.exports=r(13895)()?Object.keys:r(25217)},13895:function(se){"use strict";se.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function(se,U,r){"use strict";var I=r(95296),C=Object.keys;se.exports=function(f){return C(I(f)?Object(f):f)}},16906:function(se,U,r){"use strict";var I=r(78513),C=r(96437),f=Function.prototype.call;se.exports=function(k,T){var v={},c=arguments[2];return I(T),C(k,function(i,s,a,o){v[s]=f.call(T,c,i,s,a,o)}),v}},21780:function(se,U,r){"use strict";var I=r(95296),C=Array.prototype.forEach,f=Object.create;se.exports=function(k){var T=f(null);return C.call(arguments,function(v){I(v)&&function(c,i){var s;for(s in c)i[s]=c[s]}(Object(v),T)}),T}},1496:function(se,U,r){"use strict";se.exports=r(33247)()?Object.setPrototypeOf:r(51882)},33247:function(se){"use strict";var U=Object.create,r=Object.getPrototypeOf,I={};se.exports=function(){var C=Object.setPrototypeOf;return"function"==typeof C&&r(C((arguments[0]||U)(null),I))===I}},51882:function(se,U,r){"use strict";var I,C,f,k,T=r(99611),v=r(36672),c=Object.prototype.isPrototypeOf,i=Object.defineProperty,s={configurable:!0,enumerable:!1,writable:!0,value:void 0};I=function(a,o){if(v(a),null===o||T(o))return a;throw new TypeError("Prototype must be null or an object")},se.exports=(C=function(){var a,o=Object.create(null),l={},u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(u){try{(a=u.set).call(o,l)}catch{}if(Object.getPrototypeOf(o)===l)return{set:a,level:2}}return o.__proto__=l,Object.getPrototypeOf(o)===l?{level:2}:((o={}).__proto__=l,Object.getPrototypeOf(o)===l&&{level:1})}())?(2===C.level?C.set?(k=C.set,f=function(a,o){return k.call(I(a,o),o),a}):f=function(a,o){return I(a,o).__proto__=o,a}:f=function a(o,l){var u;return I(o,l),(u=c.call(a.nullPolyfill,o))&&delete a.nullPolyfill.__proto__,null===l&&(l=a.nullPolyfill),o.__proto__=l,u&&i(a.nullPolyfill,"__proto__",s),o},Object.defineProperty(f,"level",{configurable:!1,enumerable:!1,writable:!1,value:C.level})):null,r(52818)},78513:function(se){"use strict";se.exports=function(U){if("function"!=typeof U)throw new TypeError(U+" is not a function");return U}},98976:function(se,U,r){"use strict";var I=r(99611);se.exports=function(C){if(!I(C))throw new TypeError(C+" is not an Object");return C}},36672:function(se,U,r){"use strict";var I=r(95296);se.exports=function(C){if(!I(C))throw new TypeError("Cannot use null or undefined");return C}},66741:function(se,U,r){"use strict";se.exports=r(17557)()?String.prototype.contains:r(60381)},17557:function(se){"use strict";var U="razdwatrzy";se.exports=function(){return"function"==typeof U.contains&&!0===U.contains("dwa")&&!1===U.contains("foo")}},60381:function(se){"use strict";var U=String.prototype.indexOf;se.exports=function(r){return U.call(this,r,arguments[1])>-1}},87963:function(se){"use strict";var U=Object.prototype.toString,r=U.call("");se.exports=function(I){return"string"==typeof I||I&&"object"==typeof I&&(I instanceof String||U.call(I)===r)||!1}},43043:function(se){"use strict";var U=Object.create(null),r=Math.random;se.exports=function(){var I;do{I=r().toString(36).slice(2)}while(U[I]);return I}},32411:function(se,U,r){"use strict";var I,C=r(1496),f=r(66741),k=r(62072),T=r(8260),v=r(95426),c=Object.defineProperty;I=se.exports=function(i,s){if(!(this instanceof I))throw new TypeError("Constructor requires 'new'");v.call(this,i),s=s?f.call(s,"key+value")?"key+value":f.call(s,"key")?"key":"value":"value",c(this,"__kind__",k("",s))},C&&C(I,v),delete I.prototype.constructor,I.prototype=Object.create(v.prototype,{_resolve:k(function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i})}),c(I.prototype,T.toStringTag,k("c","Array Iterator"))},27515:function(se,U,r){"use strict";var I=r(73051),C=r(78513),f=r(87963),k=r(66661),T=Array.isArray,v=Function.prototype.call,c=Array.prototype.some;se.exports=function(i,s){var a,o,l,u,d,g,h,w,y=arguments[2];if(T(i)||I(i)?a="array":f(i)?a="string":i=k(i),C(s),l=function(){u=!0},"array"!==a)if("string"!==a)for(o=i.next();!o.done;){if(v.call(s,y,o.value,l),u)return;o=i.next()}else for(g=i.length,d=0;d<g&&(h=i[d],d+1<g&&(w=h.charCodeAt(0))>=55296&&w<=56319&&(h+=i[++d]),v.call(s,y,h,l),!u);++d);else c.call(i,function(p){return v.call(s,y,p,l),u})}},66661:function(se,U,r){"use strict";var I=r(73051),C=r(87963),f=r(32411),k=r(259),T=r(58095),v=r(8260).iterator;se.exports=function(c){return"function"==typeof T(c)[v]?c[v]():I(c)?new f(c):C(c)?new k(c):new f(c)}},95426:function(se,U,r){"use strict";var I,C=r(16134),f=r(95879),k=r(78513),T=r(36672),v=r(62072),c=r(55174),i=r(8260),s=Object.defineProperty,a=Object.defineProperties;se.exports=I=function(o,l){if(!(this instanceof I))throw new TypeError("Constructor requires 'new'");a(this,{__list__:v("w",T(o)),__context__:v("w",l),__nextIndex__:v("w",0)}),l&&(k(l.on),l.on("_add",this._onAdd),l.on("_delete",this._onDelete),l.on("_clear",this._onClear))},delete I.prototype.constructor,a(I.prototype,f({_next:v(function(){var o;if(this.__list__)return this.__redo__&&void 0!==(o=this.__redo__.shift())?o:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:v(function(){return this._createResult(this._next())}),_createResult:v(function(o){return void 0===o?{done:!0,value:void 0}:{done:!1,value:this._resolve(o)}}),_resolve:v(function(o){return this.__list__[o]}),_unBind:v(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:v(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},c({_onAdd:v(function(o){o>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(l,u){l>=o&&(this.__redo__[u]=++l)},this),this.__redo__.push(o)):s(this,"__redo__",v("c",[o])))}),_onDelete:v(function(o){var l;o>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(l=this.__redo__.indexOf(o))&&this.__redo__.splice(l,1),this.__redo__.forEach(function(u,d){u>o&&(this.__redo__[d]=--u)},this)))}),_onClear:v(function(){this.__redo__&&C.call(this.__redo__),this.__nextIndex__=0})}))),s(I.prototype,i.iterator,v(function(){return this}))},35940:function(se,U,r){"use strict";var I=r(73051),C=r(95296),f=r(87963),k=r(8260).iterator,T=Array.isArray;se.exports=function(v){return!(!C(v)||!T(v)&&!f(v)&&!I(v)&&"function"!=typeof v[k])}},259:function(se,U,r){"use strict";var I,C=r(1496),f=r(62072),k=r(8260),T=r(95426),v=Object.defineProperty;I=se.exports=function(c){if(!(this instanceof I))throw new TypeError("Constructor requires 'new'");c=String(c),T.call(this,c),v(this,"__length__",f("",c.length))},C&&C(I,T),delete I.prototype.constructor,I.prototype=Object.create(T.prototype,{_next:f(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:f(function(c){var i,s=this.__list__[c];return this.__nextIndex__===this.__length__?s:(i=s.charCodeAt(0))>=55296&&i<=56319?s+this.__list__[this.__nextIndex__++]:s})}),v(I.prototype,k.toStringTag,f("c","String Iterator"))},58095:function(se,U,r){"use strict";var I=r(35940);se.exports=function(C){if(!I(C))throw new TypeError(C+" is not iterable");return C}},73523:function(se){"use strict";function U(r,I){if(null==r)throw new TypeError("Cannot convert first argument to object");for(var C=Object(r),f=1;f<arguments.length;f++){var k=arguments[f];if(null!=k)for(var T=Object.keys(Object(k)),v=0,c=T.length;v<c;v++){var i=T[v],s=Object.getOwnPropertyDescriptor(k,i);void 0!==s&&s.enumerable&&(C[i]=k[i])}}return C}se.exports={assign:U,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:U})}}},8260:function(se,U,r){"use strict";se.exports=r(69711)()?r(94908).Symbol:r(18415)},69711:function(se,U,r){"use strict";var I=r(94908),C={object:!0,symbol:!0};se.exports=function(){var f,k=I.Symbol;if("function"!=typeof k)return!1;f=k("test symbol");try{String(f)}catch{return!1}return!!C[typeof k.iterator]&&!!C[typeof k.toPrimitive]&&!!C[typeof k.toStringTag]}},82276:function(se){"use strict";se.exports=function(U){return!!U&&("symbol"==typeof U||!!U.constructor&&"Symbol"===U.constructor.name&&"Symbol"===U[U.constructor.toStringTag])}},29366:function(se,U,r){"use strict";var I=r(62072),f=Object.defineProperty,k=Object.prototype,T=(0,Object.create)(null);se.exports=function(v){for(var c,i,s=0;T[v+(s||"")];)++s;return T[v+=s||""]=!0,f(k,c="@@"+v,I.gs(null,function(a){i||(i=!0,f(this,c,I(a)),i=!1)})),c}},92842:function(se,U,r){"use strict";var I=r(62072),C=r(94908).Symbol;se.exports=function(f){return Object.defineProperties(f,{hasInstance:I("",C&&C.hasInstance||f("hasInstance")),isConcatSpreadable:I("",C&&C.isConcatSpreadable||f("isConcatSpreadable")),iterator:I("",C&&C.iterator||f("iterator")),match:I("",C&&C.match||f("match")),replace:I("",C&&C.replace||f("replace")),search:I("",C&&C.search||f("search")),species:I("",C&&C.species||f("species")),split:I("",C&&C.split||f("split")),toPrimitive:I("",C&&C.toPrimitive||f("toPrimitive")),toStringTag:I("",C&&C.toStringTag||f("toStringTag")),unscopables:I("",C&&C.unscopables||f("unscopables"))})}},13304:function(se,U,r){"use strict";var I=r(62072),C=r(53308),f=Object.create(null);se.exports=function(k){return Object.defineProperties(k,{for:I(function(T){return f[T]?f[T]:f[T]=k(String(T))}),keyFor:I(function(T){var v;for(v in C(T),f)if(f[v]===T)return v})})}},18415:function(se,U,r){"use strict";var I,C,f,k=r(62072),T=r(53308),v=r(94908).Symbol,c=r(29366),i=r(92842),s=r(13304),a=Object.create,o=Object.defineProperties,l=Object.defineProperty;if("function"==typeof v)try{String(v()),f=!0}catch{}else v=null;C=function(u){if(this instanceof C)throw new TypeError("Symbol is not a constructor");return I(u)},se.exports=I=function u(d){var g;if(this instanceof u)throw new TypeError("Symbol is not a constructor");return f?v(d):(g=a(C.prototype),d=void 0===d?"":String(d),o(g,{__description__:k("",d),__name__:k("",c(d))}))},i(I),s(I),o(C.prototype,{constructor:k(I),toString:k("",function(){return this.__name__})}),o(I.prototype,{toString:k(function(){return"Symbol ("+T(this).__description__+")"}),valueOf:k(function(){return T(this)})}),l(I.prototype,I.toPrimitive,k("",function(){var u=T(this);return"symbol"==typeof u?u:u.toString()})),l(I.prototype,I.toStringTag,k("c","Symbol")),l(C.prototype,I.toStringTag,k("c",I.prototype[I.toStringTag])),l(C.prototype,I.toPrimitive,k("c",I.prototype[I.toPrimitive]))},53308:function(se,U,r){"use strict";var I=r(82276);se.exports=function(C){if(!I(C))throw new TypeError(C+" is not a symbol");return C}},83522:function(se,U,r){"use strict";se.exports=r(96402)()?WeakMap:r(329)},96402:function(se){"use strict";se.exports=function(){var U,r;if("function"!=typeof WeakMap)return!1;try{U=new WeakMap([[r={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return"[object WeakMap]"===String(U)&&"function"==typeof U.set&&U.set({},1)===U&&"function"==typeof U.delete&&"function"==typeof U.has&&"one"===U.get(r)}},96416:function(se){"use strict";se.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},329:function(se,U,r){"use strict";var I,C=r(95296),f=r(1496),k=r(98976),T=r(36672),v=r(43043),c=r(62072),i=r(66661),s=r(27515),a=r(8260).toStringTag,o=r(96416),l=Array.isArray,u=Object.defineProperty,d=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;se.exports=I=function(){var h,w=arguments[0];if(!(this instanceof I))throw new TypeError("Constructor requires 'new'");return h=o&&f&&WeakMap!==I?f(new WeakMap,g(this)):this,C(w)&&(l(w)||(w=i(w))),u(h,"__weakMapData__",c("c","$weakMap$"+v())),w&&s(w,function(y){T(y),h.set(y[0],y[1])}),h},o&&(f&&f(I,WeakMap),I.prototype=Object.create(WeakMap.prototype,{constructor:c(I)})),Object.defineProperties(I.prototype,{delete:c(function(h){return!!d.call(k(h),this.__weakMapData__)&&(delete h[this.__weakMapData__],!0)}),get:c(function(h){if(d.call(k(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:c(function(h){return d.call(k(h),this.__weakMapData__)}),set:c(function(h,w){return u(k(h),this.__weakMapData__,c("c",w)),this}),toString:c(function(){return"[object WeakMap]"})}),u(I.prototype,a,c("c","WeakMap"))},15398:function(se){"use strict";var U,r="object"==typeof Reflect?Reflect:null,I=r&&"function"==typeof r.apply?r.apply:function(d,g,h){return Function.prototype.apply.call(d,g,h)};U=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:function(d){return Object.getOwnPropertyNames(d)};var C=Number.isNaN||function(d){return d!=d};function f(){f.init.call(this)}se.exports=f,se.exports.once=function(d,g){return new Promise(function(h,w){function y(_){d.removeListener(g,p),w(_)}function p(){"function"==typeof d.removeListener&&d.removeListener("error",y),h([].slice.call(arguments))}var _;u(d,g,p,{once:!0}),"error"!==g&&("function"==typeof(_=d).on&&u(_,"error",y,{once:!0}))})},f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var k=10;function T(d){if("function"!=typeof d)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof d)}function v(d){return void 0===d._maxListeners?f.defaultMaxListeners:d._maxListeners}function c(d,g,h,w){var y,p,_;if(T(h),void 0===(p=d._events)?(p=d._events=Object.create(null),d._eventsCount=0):(void 0!==p.newListener&&(d.emit("newListener",g,h.listener?h.listener:h),p=d._events),_=p[g]),void 0===_)_=p[g]=h,++d._eventsCount;else if("function"==typeof _?_=p[g]=w?[h,_]:[_,h]:w?_.unshift(h):_.push(h),(y=v(d))>0&&_.length>y&&!_.warned){_.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=d,b.type=g,b.count=_.length,console&&console.warn&&console.warn(b)}return d}function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(d,g,h){var w={fired:!1,wrapFn:void 0,target:d,type:g,listener:h},y=i.bind(w);return y.listener=h,w.wrapFn=y,y}function a(d,g,h){var w=d._events;if(void 0===w)return[];var y=w[g];return void 0===y?[]:"function"==typeof y?h?[y.listener||y]:[y]:h?function(p){for(var _=new Array(p.length),x=0;x<_.length;++x)_[x]=p[x].listener||p[x];return _}(y):l(y,y.length)}function o(d){var g=this._events;if(void 0!==g){var h=g[d];if("function"==typeof h)return 1;if(void 0!==h)return h.length}return 0}function l(d,g){for(var h=new Array(g),w=0;w<g;++w)h[w]=d[w];return h}function u(d,g,h,w){if("function"==typeof d.on)w.once?d.once(g,h):d.on(g,h);else{if("function"!=typeof d.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof d);d.addEventListener(g,function y(p){w.once&&d.removeEventListener(g,y),h(p)})}}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(d){if("number"!=typeof d||d<0||C(d))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+d+".");k=d}}),f.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(d){if("number"!=typeof d||d<0||C(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this},f.prototype.getMaxListeners=function(){return v(this)},f.prototype.emit=function(d){for(var g=[],h=1;h<arguments.length;h++)g.push(arguments[h]);var w="error"===d,y=this._events;if(void 0!==y)w=w&&void 0===y.error;else if(!w)return!1;if(w){var p;if(g.length>0&&(p=g[0]),p instanceof Error)throw p;var _=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw _.context=p,_}var x=y[d];if(void 0===x)return!1;if("function"==typeof x)I(x,this,g);else{var b=x.length,M=l(x,b);for(h=0;h<b;++h)I(M[h],this,g)}return!0},f.prototype.on=f.prototype.addListener=function(d,g){return c(this,d,g,!1)},f.prototype.prependListener=function(d,g){return c(this,d,g,!0)},f.prototype.once=function(d,g){return T(g),this.on(d,s(this,d,g)),this},f.prototype.prependOnceListener=function(d,g){return T(g),this.prependListener(d,s(this,d,g)),this},f.prototype.off=f.prototype.removeListener=function(d,g){var h,w,y,p,_;if(T(g),void 0===(w=this._events))return this;if(void 0===(h=w[d]))return this;if(h===g||h.listener===g)0==--this._eventsCount?this._events=Object.create(null):(delete w[d],w.removeListener&&this.emit("removeListener",d,h.listener||g));else if("function"!=typeof h){for(y=-1,p=h.length-1;p>=0;p--)if(h[p]===g||h[p].listener===g){_=h[p].listener,y=p;break}if(y<0)return this;0===y?h.shift():function(x,b){for(;b+1<x.length;b++)x[b]=x[b+1];x.pop()}(h,y),1===h.length&&(w[d]=h[0]),void 0!==w.removeListener&&this.emit("removeListener",d,_||g)}return this},f.prototype.removeAllListeners=function(d){var g,h,w;if(void 0===(h=this._events))return this;if(void 0===h.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==h[d]&&(0==--this._eventsCount?this._events=Object.create(null):delete h[d]),this;if(0===arguments.length){var y,p=Object.keys(h);for(w=0;w<p.length;++w)"removeListener"!==(y=p[w])&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=h[d]))this.removeListener(d,g);else if(void 0!==g)for(w=g.length-1;w>=0;w--)this.removeListener(d,g[w]);return this},f.prototype.listeners=function(d){return a(this,d,!0)},f.prototype.rawListeners=function(d){return a(this,d,!1)},f.listenerCount=function(d,g){return"function"==typeof d.listenerCount?d.listenerCount(g):o.call(d,g)},f.prototype.listenerCount=o,f.prototype.eventNames=function(){return this._eventsCount>0?U(this._events):[]}},60774:function(se){var U=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};se.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return U()}try{return __global__||U()}finally{delete Object.prototype.__global__}}()},94908:function(se,U,r){"use strict";se.exports=r(51152)()?globalThis:r(60774)},51152:function(se){"use strict";se.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},92770:function(se,U,r){"use strict";var I=r(18546);se.exports=function(C){var f=typeof C;if("string"===f){var k=C;if(0==(C=+C)&&I(k))return!1}else if("number"!==f)return!1;return C-C<1}},30120:function(se,U,r){var I=r(90660);se.exports=function(C,f,k){if(!C)throw new TypeError("must specify data as first parameter");if(k=0|+(k||0),Array.isArray(C)&&C[0]&&"number"==typeof C[0][0]){var T,v,c,i,s=C[0].length,a=C.length*s;f&&"string"!=typeof f||(f=new(I(f||"float32"))(a+k));var o=f.length-k;if(a!==o)throw new Error("source length "+a+" ("+s+"x"+C.length+") does not match destination length "+o);for(T=0,c=k;T<C.length;T++)for(v=0;v<s;v++)f[c++]=null===C[T][v]?NaN:C[T][v]}else if(f&&"string"!=typeof f)f.set(C,k);else{var l=I(f||"float32");if(Array.isArray(C)||"array"===f)for(T=0,c=k,i=(f=new l(C.length+k)).length;c<i;c++,T++)f[c]=null===C[T]?NaN:C[T];else 0===k?f=new l(C):(f=new l(C.length+k)).set(C,k)}return f}},68016:function(se,U,r){"use strict";var I=r(53313),C=[32,126];se.exports=function(f){var k=(f=f||{}).shape?f.shape:f.canvas?[f.canvas.width,f.canvas.height]:[512,512],T=f.canvas||document.createElement("canvas"),v=f.font,c="number"==typeof f.step?[f.step,f.step]:f.step||[32,32],i=f.chars||C;if(v&&"string"!=typeof v&&(v=I(v)),Array.isArray(i)){if(2===i.length&&"number"==typeof i[0]&&"number"==typeof i[1]){for(var s=[],a=i[0],o=0;a<=i[1];a++)s[o++]=String.fromCharCode(a);i=s}}else i=String(i).split("");k=k.slice(),T.width=k[0],T.height=k[1];var l=T.getContext("2d");l.fillStyle="#000",l.fillRect(0,0,T.width,T.height),l.font=v,l.textAlign="center",l.textBaseline="middle",l.fillStyle="#fff";var u=c[0]/2,d=c[1]/2;for(a=0;a<i.length;a++)l.fillText(i[a],u,d),(u+=c[0])>k[0]-c[0]/2&&(u=c[0]/2,d+=c[1]);return T}},32879:function(se){"use strict";function U(f,k){k||(k={}),("string"==typeof f||Array.isArray(f))&&(k.family=f);var T=Array.isArray(k.family)?k.family.join(", "):k.family;if(!T)throw Error("`family` must be defined");var v=k.size||k.fontSize||k.em||48,i=(f=[k.style||k.fontStyle||"",k.weight||k.fontWeight||"",v].join(" ")+"px "+T,k.origin||"top");if(U.cache[T]&&v<=U.cache[T].em)return r(U.cache[T],i);var s=k.canvas||U.canvas,a=s.getContext("2d"),o={upper:void 0!==k.upper?k.upper:"H",lower:void 0!==k.lower?k.lower:"x",descent:void 0!==k.descent?k.descent:"p",ascent:void 0!==k.ascent?k.ascent:"h",tittle:void 0!==k.tittle?k.tittle:"i",overshoot:void 0!==k.overshoot?k.overshoot:"O"},l=Math.ceil(1.5*v);s.height=l,s.width=.5*l,a.font=f;var u="H",d={top:0};a.clearRect(0,0,l,l),a.textBaseline="top",a.fillStyle="black",a.fillText(u,0,0);var g=I(a.getImageData(0,0,l,l));a.clearRect(0,0,l,l),a.textBaseline="bottom",a.fillText(u,0,l);var h=I(a.getImageData(0,0,l,l));d.lineHeight=d.bottom=l-h+g,a.clearRect(0,0,l,l),a.textBaseline="alphabetic",a.fillText(u,0,l);var w=l-I(a.getImageData(0,0,l,l))-1+g;d.baseline=d.alphabetic=w,a.clearRect(0,0,l,l),a.textBaseline="middle",a.fillText(u,0,.5*l);var y=I(a.getImageData(0,0,l,l));d.median=d.middle=l-y-1+g-.5*l,a.clearRect(0,0,l,l),a.textBaseline="hanging",a.fillText(u,0,.5*l);var p=I(a.getImageData(0,0,l,l));d.hanging=l-p-1+g-.5*l,a.clearRect(0,0,l,l),a.textBaseline="ideographic",a.fillText(u,0,l);var _=I(a.getImageData(0,0,l,l));if(d.ideographic=l-_-1+g,o.upper&&(a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.upper,0,0),d.upper=I(a.getImageData(0,0,l,l)),d.capHeight=d.baseline-d.upper),o.lower&&(a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.lower,0,0),d.lower=I(a.getImageData(0,0,l,l)),d.xHeight=d.baseline-d.lower),o.tittle&&(a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.tittle,0,0),d.tittle=I(a.getImageData(0,0,l,l))),o.ascent&&(a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.ascent,0,0),d.ascent=I(a.getImageData(0,0,l,l))),o.descent&&(a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.descent,0,0),d.descent=C(a.getImageData(0,0,l,l))),o.overshoot){a.clearRect(0,0,l,l),a.textBaseline="top",a.fillText(o.overshoot,0,0);var x=C(a.getImageData(0,0,l,l));d.overshoot=x-w}for(var b in d)d[b]/=v;return d.em=v,U.cache[T]=d,r(d,i)}function r(f,k){var T={};for(var v in"string"==typeof k&&(k=f[k]),f)"em"!==v&&(T[v]=f[v]-k);return T}function I(f){for(var k=f.height,T=f.data,v=3;v<T.length;v+=4)if(0!==T[v])return Math.floor(.25*(v-3)/k)}function C(f){for(var k=f.height,T=f.data,v=T.length-1;v>0;v-=4)if(0!==T[v])return Math.floor(.25*(v-3)/k)}se.exports=U,U.canvas=document.createElement("canvas"),U.cache={}},31353:function(se,U,r){"use strict";var I=r(85395),C=Object.prototype.toString,f=Object.prototype.hasOwnProperty;se.exports=function(k,T,v){if(!I(T))throw new TypeError("iterator must be a function");var c;arguments.length>=3&&(c=v),"[object Array]"===C.call(k)?function(i,s,a){for(var o=0,l=i.length;o<l;o++)f.call(i,o)&&(null==a?s(i[o],o,i):s.call(a,i[o],o,i))}(k,T,c):"string"==typeof k?function(i,s,a){for(var o=0,l=i.length;o<l;o++)null==a?s(i.charAt(o),o,i):s.call(a,i.charAt(o),o,i)}(k,T,c):function(i,s,a){for(var o in i)f.call(i,o)&&(null==a?s(i[o],o,i):s.call(a,i[o],o,i))}(k,T,c)}},73047:function(se){"use strict";var U=Array.prototype.slice,r=Object.prototype.toString;se.exports=function(I){var C=this;if("function"!=typeof C||"[object Function]"!==r.call(C))throw new TypeError("Function.prototype.bind called on incompatible "+C);for(var f,k=U.call(arguments,1),T=Math.max(0,C.length-k.length),v=[],c=0;c<T;c++)v.push("$"+c);if(f=Function("binder","return function ("+v.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof f){var s=C.apply(this,k.concat(U.call(arguments)));return Object(s)===s?s:this}return C.apply(I,k.concat(U.call(arguments)))}),C.prototype){var i=function(){};i.prototype=C.prototype,f.prototype=new i,i.prototype=null}return f}},77575:function(se,U,r){"use strict";var I=r(73047);se.exports=Function.prototype.bind||I},86249:function(se){se.exports=function(U,r){if("string"!=typeof U)throw new TypeError("must specify type string");if(r=r||{},typeof document>"u"&&!r.canvas)return null;var I=r.canvas||document.createElement("canvas");"number"==typeof r.width&&(I.width=r.width),"number"==typeof r.height&&(I.height=r.height);var C,f=r;try{var k=[U];0===U.indexOf("webgl")&&k.push("experimental-"+U);for(var T=0;T<k.length;T++)if(C=I.getContext(k[T],f))return C}catch{C=null}return C||null}},68318:function(se,U,r){"use strict";var I,C=SyntaxError,f=Function,k=TypeError,T=function(O){try{return f('"use strict"; return ('+O+").constructor;")()}catch{}},v=Object.getOwnPropertyDescriptor;if(v)try{v({},"")}catch{v=null}var c=function(){throw new k},i=v?function(){try{return c}catch{try{return v(arguments,"callee").get}catch{return c}}}():c,s=r(57877)(),a=Object.getPrototypeOf||function(O){return O.__proto__},o={},l=typeof Uint8Array>"u"?I:a(Uint8Array),u={"%AggregateError%":typeof AggregateError>"u"?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?I:ArrayBuffer,"%ArrayIteratorPrototype%":s?a([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":o,"%AsyncGenerator%":o,"%AsyncGeneratorFunction%":o,"%AsyncIteratorPrototype%":o,"%Atomics%":typeof Atomics>"u"?I:Atomics,"%BigInt%":typeof BigInt>"u"?I:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?I:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?I:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?I:Float32Array,"%Float64Array%":typeof Float64Array>"u"?I:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?I:FinalizationRegistry,"%Function%":f,"%GeneratorFunction%":o,"%Int8Array%":typeof Int8Array>"u"?I:Int8Array,"%Int16Array%":typeof Int16Array>"u"?I:Int16Array,"%Int32Array%":typeof Int32Array>"u"?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":s?a(a([][Symbol.iterator]())):I,"%JSON%":"object"==typeof JSON?JSON:I,"%Map%":typeof Map>"u"?I:Map,"%MapIteratorPrototype%":typeof Map<"u"&&s?a((new Map)[Symbol.iterator]()):I,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?I:Promise,"%Proxy%":typeof Proxy>"u"?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?I:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?I:Set,"%SetIteratorPrototype%":typeof Set<"u"&&s?a((new Set)[Symbol.iterator]()):I,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":s?a(""[Symbol.iterator]()):I,"%Symbol%":s?Symbol:I,"%SyntaxError%":C,"%ThrowTypeError%":i,"%TypedArray%":l,"%TypeError%":k,"%Uint8Array%":typeof Uint8Array>"u"?I:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?I:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?I:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?I:WeakMap,"%WeakRef%":typeof WeakRef>"u"?I:WeakRef,"%WeakSet%":typeof WeakSet>"u"?I:WeakSet};try{null.error}catch(O){var d=a(a(O));u["%Error.prototype%"]=d}var g=function O(P){var R;if("%AsyncFunction%"===P)R=T("async function () {}");else if("%GeneratorFunction%"===P)R=T("function* () {}");else if("%AsyncGeneratorFunction%"===P)R=T("async function* () {}");else if("%AsyncGenerator%"===P){var F=O("%AsyncGeneratorFunction%");F&&(R=F.prototype)}else if("%AsyncIteratorPrototype%"===P){var B=O("%AsyncGenerator%");B&&(R=a(B.prototype))}return u[P]=R,R},h={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=r(77575),y=r(35065),p=w.call(Function.call,Array.prototype.concat),_=w.call(Function.apply,Array.prototype.splice),x=w.call(Function.call,String.prototype.replace),b=w.call(Function.call,String.prototype.slice),M=w.call(Function.call,RegExp.prototype.exec),m=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,S=function(O,P){var R,F=O;if(y(h,F)&&(F="%"+(R=h[F])[0]+"%"),y(u,F)){var B=u[F];if(B===o&&(B=g(F)),void 0===B&&!P)throw new k("intrinsic "+O+" exists, but is not available. Please file an issue!");return{alias:R,name:F,value:B}}throw new C("intrinsic "+O+" does not exist!")};se.exports=function(O,P){if("string"!=typeof O||0===O.length)throw new k("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof P)throw new k('"allowMissing" argument must be a boolean');if(null===M(/^%?[^%]*%?$/,O))throw new C("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var R=function(Q){var ie=b(Q,0,1),le=b(Q,-1);if("%"===ie&&"%"!==le)throw new C("invalid intrinsic syntax, expected closing `%`");if("%"===le&&"%"!==ie)throw new C("invalid intrinsic syntax, expected opening `%`");var fe=[];return x(Q,m,function(he,pe,xe,Ee){fe[fe.length]=xe?x(Ee,D,"$1"):pe||he}),fe}(O),F=R.length>0?R[0]:"",B=S("%"+F+"%",P),J=B.name,z=B.value,$=!1,G=B.alias;G&&(F=G[0],_(R,p([0,1],G)));for(var H=1,X=!0;H<R.length;H+=1){var K=R[H],ue=b(K,0,1),ae=b(K,-1);if(('"'===ue||"'"===ue||"`"===ue||'"'===ae||"'"===ae||"`"===ae)&&ue!==ae)throw new C("property names with quotes must have matching quotes");if("constructor"!==K&&X||($=!0),y(u,J="%"+(F+="."+K)+"%"))z=u[J];else if(null!=z){if(!(K in z)){if(!P)throw new k("base intrinsic for "+O+" exists, but the property is not available.");return}if(v&&H+1>=R.length){var ne=v(z,K);z=(X=!!ne)&&"get"in ne&&!("originalValue"in ne.get)?ne.get:z[K]}else X=y(z,K),z=z[K];X&&!$&&(u[J]=z)}}return z}},85400:function(se){se.exports=function(U,r){var I=r[0],C=r[1],f=r[2],k=r[3],T=r[4],v=r[5],c=r[6],i=r[7],s=r[8],a=r[9],o=r[10],l=r[11],u=r[12],d=r[13],g=r[14],h=r[15];return U[0]=v*(o*h-l*g)-a*(c*h-i*g)+d*(c*l-i*o),U[1]=-(C*(o*h-l*g)-a*(f*h-k*g)+d*(f*l-k*o)),U[2]=C*(c*h-i*g)-v*(f*h-k*g)+d*(f*i-k*c),U[3]=-(C*(c*l-i*o)-v*(f*l-k*o)+a*(f*i-k*c)),U[4]=-(T*(o*h-l*g)-s*(c*h-i*g)+u*(c*l-i*o)),U[5]=I*(o*h-l*g)-s*(f*h-k*g)+u*(f*l-k*o),U[6]=-(I*(c*h-i*g)-T*(f*h-k*g)+u*(f*i-k*c)),U[7]=I*(c*l-i*o)-T*(f*l-k*o)+s*(f*i-k*c),U[8]=T*(a*h-l*d)-s*(v*h-i*d)+u*(v*l-i*a),U[9]=-(I*(a*h-l*d)-s*(C*h-k*d)+u*(C*l-k*a)),U[10]=I*(v*h-i*d)-T*(C*h-k*d)+u*(C*i-k*v),U[11]=-(I*(v*l-i*a)-T*(C*l-k*a)+s*(C*i-k*v)),U[12]=-(T*(a*g-o*d)-s*(v*g-c*d)+u*(v*o-c*a)),U[13]=I*(a*g-o*d)-s*(C*g-f*d)+u*(C*o-f*a),U[14]=-(I*(v*g-c*d)-T*(C*g-f*d)+u*(C*c-f*v)),U[15]=I*(v*o-c*a)-T*(C*o-f*a)+s*(C*c-f*v),U}},42331:function(se){se.exports=function(U){var r=new Float32Array(16);return r[0]=U[0],r[1]=U[1],r[2]=U[2],r[3]=U[3],r[4]=U[4],r[5]=U[5],r[6]=U[6],r[7]=U[7],r[8]=U[8],r[9]=U[9],r[10]=U[10],r[11]=U[11],r[12]=U[12],r[13]=U[13],r[14]=U[14],r[15]=U[15],r}},31042:function(se){se.exports=function(U,r){return U[0]=r[0],U[1]=r[1],U[2]=r[2],U[3]=r[3],U[4]=r[4],U[5]=r[5],U[6]=r[6],U[7]=r[7],U[8]=r[8],U[9]=r[9],U[10]=r[10],U[11]=r[11],U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15],U}},11902:function(se){se.exports=function(){var U=new Float32Array(16);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},89887:function(se){se.exports=function(U){var r=U[0],I=U[1],C=U[2],f=U[3],k=U[4],T=U[5],v=U[6],c=U[7],i=U[8],s=U[9],a=U[10],o=U[11],l=U[12],u=U[13],d=U[14],g=U[15];return(r*T-I*k)*(a*g-o*d)-(r*v-C*k)*(s*g-o*u)+(r*c-f*k)*(s*d-a*u)+(I*v-C*T)*(i*g-o*l)-(I*c-f*T)*(i*d-a*l)+(C*c-f*v)*(i*u-s*l)}},27812:function(se){se.exports=function(U,r){var I=r[0],C=r[1],f=r[2],k=r[3],T=I+I,v=C+C,c=f+f,i=I*T,s=C*T,a=C*v,o=f*T,l=f*v,u=f*c,d=k*T,g=k*v,h=k*c;return U[0]=1-a-u,U[1]=s+h,U[2]=o-g,U[3]=0,U[4]=s-h,U[5]=1-i-u,U[6]=l+d,U[7]=0,U[8]=o+g,U[9]=l-d,U[10]=1-i-a,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},34045:function(se){se.exports=function(U,r,I){var C,f,k,T=I[0],v=I[1],c=I[2],i=Math.sqrt(T*T+v*v+c*c);return Math.abs(i)<1e-6?null:(T*=i=1/i,v*=i,c*=i,C=Math.sin(r),k=1-(f=Math.cos(r)),U[0]=T*T*k+f,U[1]=v*T*k+c*C,U[2]=c*T*k-v*C,U[3]=0,U[4]=T*v*k-c*C,U[5]=v*v*k+f,U[6]=c*v*k+T*C,U[7]=0,U[8]=T*c*k+v*C,U[9]=v*c*k-T*C,U[10]=c*c*k+f,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U)}},45973:function(se){se.exports=function(U,r,I){var C=r[0],f=r[1],k=r[2],T=r[3],v=C+C,c=f+f,i=k+k,s=C*v,a=C*c,o=C*i,l=f*c,u=f*i,d=k*i,g=T*v,h=T*c,w=T*i;return U[0]=1-(l+d),U[1]=a+w,U[2]=o-h,U[3]=0,U[4]=a-w,U[5]=1-(s+d),U[6]=u+g,U[7]=0,U[8]=o+h,U[9]=u-g,U[10]=1-(s+l),U[11]=0,U[12]=I[0],U[13]=I[1],U[14]=I[2],U[15]=1,U}},81472:function(se){se.exports=function(U,r){return U[0]=r[0],U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=r[1],U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=r[2],U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},14669:function(se){se.exports=function(U,r){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=r[0],U[13]=r[1],U[14]=r[2],U[15]=1,U}},75262:function(se){se.exports=function(U,r){var I=Math.sin(r),C=Math.cos(r);return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=C,U[6]=I,U[7]=0,U[8]=0,U[9]=-I,U[10]=C,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},331:function(se){se.exports=function(U,r){var I=Math.sin(r),C=Math.cos(r);return U[0]=C,U[1]=0,U[2]=-I,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=I,U[9]=0,U[10]=C,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},11049:function(se){se.exports=function(U,r){var I=Math.sin(r),C=Math.cos(r);return U[0]=C,U[1]=I,U[2]=0,U[3]=0,U[4]=-I,U[5]=C,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},75195:function(se){se.exports=function(U,r,I,C,f,k,T){var v=1/(I-r),c=1/(f-C),i=1/(k-T);return U[0]=2*k*v,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=2*k*c,U[6]=0,U[7]=0,U[8]=(I+r)*v,U[9]=(f+C)*c,U[10]=(T+k)*i,U[11]=-1,U[12]=0,U[13]=0,U[14]=T*k*2*i,U[15]=0,U}},71551:function(se){se.exports=function(U){return U[0]=1,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=1,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=1,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,U}},79576:function(se,U,r){se.exports={create:r(11902),clone:r(42331),copy:r(31042),identity:r(71551),transpose:r(88654),invert:r(95874),adjoint:r(85400),determinant:r(89887),multiply:r(91362),translate:r(31283),scale:r(10789),rotate:r(65074),rotateX:r(35545),rotateY:r(94918),rotateZ:r(15692),fromRotation:r(34045),fromRotationTranslation:r(45973),fromScaling:r(81472),fromTranslation:r(14669),fromXRotation:r(75262),fromYRotation:r(331),fromZRotation:r(11049),fromQuat:r(27812),frustum:r(75195),perspective:r(7864),perspectiveFromFieldOfView:r(35279),ortho:r(60378),lookAt:r(65551),str:r(6726)}},95874:function(se){se.exports=function(U,r){var I=r[0],C=r[1],f=r[2],k=r[3],T=r[4],v=r[5],c=r[6],i=r[7],s=r[8],a=r[9],o=r[10],l=r[11],u=r[12],d=r[13],g=r[14],h=r[15],w=I*v-C*T,y=I*c-f*T,p=I*i-k*T,_=C*c-f*v,x=C*i-k*v,b=f*i-k*c,M=s*d-a*u,m=s*g-o*u,D=s*h-l*u,S=a*g-o*d,O=a*h-l*d,P=o*h-l*g,R=w*P-y*O+p*S+_*D-x*m+b*M;return R?(U[0]=(v*P-c*O+i*S)*(R=1/R),U[1]=(f*O-C*P-k*S)*R,U[2]=(d*b-g*x+h*_)*R,U[3]=(o*x-a*b-l*_)*R,U[4]=(c*D-T*P-i*m)*R,U[5]=(I*P-f*D+k*m)*R,U[6]=(g*p-u*b-h*y)*R,U[7]=(s*b-o*p+l*y)*R,U[8]=(T*O-v*D+i*M)*R,U[9]=(C*D-I*O-k*M)*R,U[10]=(u*x-d*p+h*w)*R,U[11]=(a*p-s*x-l*w)*R,U[12]=(v*m-T*S-c*M)*R,U[13]=(I*S-C*m+f*M)*R,U[14]=(d*y-u*_-g*w)*R,U[15]=(s*_-a*y+o*w)*R,U):null}},65551:function(se,U,r){var I=r(71551);se.exports=function(C,f,k,T){var v,c,i,s,a,o,l,u,d,g,h=f[0],w=f[1],y=f[2],p=T[0],_=T[1],x=T[2],b=k[0],M=k[1],m=k[2];return Math.abs(h-b)<1e-6&&Math.abs(w-M)<1e-6&&Math.abs(y-m)<1e-6?I(C):(l=h-b,u=w-M,d=y-m,v=_*(d*=g=1/Math.sqrt(l*l+u*u+d*d))-x*(u*=g),c=x*(l*=g)-p*d,i=p*u-_*l,(g=Math.sqrt(v*v+c*c+i*i))?(v*=g=1/g,c*=g,i*=g):(v=0,c=0,i=0),s=u*i-d*c,a=d*v-l*i,o=l*c-u*v,(g=Math.sqrt(s*s+a*a+o*o))?(s*=g=1/g,a*=g,o*=g):(s=0,a=0,o=0),C[0]=v,C[1]=s,C[2]=l,C[3]=0,C[4]=c,C[5]=a,C[6]=u,C[7]=0,C[8]=i,C[9]=o,C[10]=d,C[11]=0,C[12]=-(v*h+c*w+i*y),C[13]=-(s*h+a*w+o*y),C[14]=-(l*h+u*w+d*y),C[15]=1,C)}},91362:function(se){se.exports=function(U,r,I){var C=r[0],f=r[1],k=r[2],T=r[3],v=r[4],c=r[5],i=r[6],s=r[7],a=r[8],o=r[9],l=r[10],u=r[11],d=r[12],g=r[13],h=r[14],w=r[15],y=I[0],p=I[1],_=I[2],x=I[3];return U[0]=y*C+p*v+_*a+x*d,U[1]=y*f+p*c+_*o+x*g,U[2]=y*k+p*i+_*l+x*h,U[3]=y*T+p*s+_*u+x*w,U[4]=(y=I[4])*C+(p=I[5])*v+(_=I[6])*a+(x=I[7])*d,U[5]=y*f+p*c+_*o+x*g,U[6]=y*k+p*i+_*l+x*h,U[7]=y*T+p*s+_*u+x*w,U[8]=(y=I[8])*C+(p=I[9])*v+(_=I[10])*a+(x=I[11])*d,U[9]=y*f+p*c+_*o+x*g,U[10]=y*k+p*i+_*l+x*h,U[11]=y*T+p*s+_*u+x*w,U[12]=(y=I[12])*C+(p=I[13])*v+(_=I[14])*a+(x=I[15])*d,U[13]=y*f+p*c+_*o+x*g,U[14]=y*k+p*i+_*l+x*h,U[15]=y*T+p*s+_*u+x*w,U}},60378:function(se){se.exports=function(U,r,I,C,f,k,T){var v=1/(r-I),c=1/(C-f),i=1/(k-T);return U[0]=-2*v,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=-2*c,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=2*i,U[11]=0,U[12]=(r+I)*v,U[13]=(f+C)*c,U[14]=(T+k)*i,U[15]=1,U}},7864:function(se){se.exports=function(U,r,I,C,f){var k=1/Math.tan(r/2),T=1/(C-f);return U[0]=k/I,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=k,U[6]=0,U[7]=0,U[8]=0,U[9]=0,U[10]=(f+C)*T,U[11]=-1,U[12]=0,U[13]=0,U[14]=2*f*C*T,U[15]=0,U}},35279:function(se){se.exports=function(U,r,I,C){var f=Math.tan(r.upDegrees*Math.PI/180),k=Math.tan(r.downDegrees*Math.PI/180),T=Math.tan(r.leftDegrees*Math.PI/180),v=Math.tan(r.rightDegrees*Math.PI/180),c=2/(T+v),i=2/(f+k);return U[0]=c,U[1]=0,U[2]=0,U[3]=0,U[4]=0,U[5]=i,U[6]=0,U[7]=0,U[8]=-(T-v)*c*.5,U[9]=(f-k)*i*.5,U[10]=C/(I-C),U[11]=-1,U[12]=0,U[13]=0,U[14]=C*I/(I-C),U[15]=0,U}},65074:function(se){se.exports=function(U,r,I,C){var f,k,T,v,c,i,s,a,o,l,u,d,g,h,w,y,p,_,x,b,M,m,D,S,O=C[0],P=C[1],R=C[2],F=Math.sqrt(O*O+P*P+R*R);return Math.abs(F)<1e-6?null:(O*=F=1/F,P*=F,R*=F,f=Math.sin(I),T=1-(k=Math.cos(I)),c=r[1],i=r[2],s=r[3],o=r[5],l=r[6],u=r[7],g=r[9],h=r[10],w=r[11],x=O*P*T-R*f,b=P*P*T+k,M=R*P*T+O*f,m=O*R*T+P*f,D=P*R*T-O*f,S=R*R*T+k,U[0]=(v=r[0])*(y=O*O*T+k)+(a=r[4])*(p=P*O*T+R*f)+(d=r[8])*(_=R*O*T-P*f),U[1]=c*y+o*p+g*_,U[2]=i*y+l*p+h*_,U[3]=s*y+u*p+w*_,U[4]=v*x+a*b+d*M,U[5]=c*x+o*b+g*M,U[6]=i*x+l*b+h*M,U[7]=s*x+u*b+w*M,U[8]=v*m+a*D+d*S,U[9]=c*m+o*D+g*S,U[10]=i*m+l*D+h*S,U[11]=s*m+u*D+w*S,r!==U&&(U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15]),U)}},35545:function(se){se.exports=function(U,r,I){var C=Math.sin(I),f=Math.cos(I),k=r[4],T=r[5],v=r[6],c=r[7],i=r[8],s=r[9],a=r[10],o=r[11];return r!==U&&(U[0]=r[0],U[1]=r[1],U[2]=r[2],U[3]=r[3],U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15]),U[4]=k*f+i*C,U[5]=T*f+s*C,U[6]=v*f+a*C,U[7]=c*f+o*C,U[8]=i*f-k*C,U[9]=s*f-T*C,U[10]=a*f-v*C,U[11]=o*f-c*C,U}},94918:function(se){se.exports=function(U,r,I){var C=Math.sin(I),f=Math.cos(I),k=r[0],T=r[1],v=r[2],c=r[3],i=r[8],s=r[9],a=r[10],o=r[11];return r!==U&&(U[4]=r[4],U[5]=r[5],U[6]=r[6],U[7]=r[7],U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15]),U[0]=k*f-i*C,U[1]=T*f-s*C,U[2]=v*f-a*C,U[3]=c*f-o*C,U[8]=k*C+i*f,U[9]=T*C+s*f,U[10]=v*C+a*f,U[11]=c*C+o*f,U}},15692:function(se){se.exports=function(U,r,I){var C=Math.sin(I),f=Math.cos(I),k=r[0],T=r[1],v=r[2],c=r[3],i=r[4],s=r[5],a=r[6],o=r[7];return r!==U&&(U[8]=r[8],U[9]=r[9],U[10]=r[10],U[11]=r[11],U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15]),U[0]=k*f+i*C,U[1]=T*f+s*C,U[2]=v*f+a*C,U[3]=c*f+o*C,U[4]=i*f-k*C,U[5]=s*f-T*C,U[6]=a*f-v*C,U[7]=o*f-c*C,U}},10789:function(se){se.exports=function(U,r,I){var C=I[0],f=I[1],k=I[2];return U[0]=r[0]*C,U[1]=r[1]*C,U[2]=r[2]*C,U[3]=r[3]*C,U[4]=r[4]*f,U[5]=r[5]*f,U[6]=r[6]*f,U[7]=r[7]*f,U[8]=r[8]*k,U[9]=r[9]*k,U[10]=r[10]*k,U[11]=r[11]*k,U[12]=r[12],U[13]=r[13],U[14]=r[14],U[15]=r[15],U}},6726:function(se){se.exports=function(U){return"mat4("+U[0]+", "+U[1]+", "+U[2]+", "+U[3]+", "+U[4]+", "+U[5]+", "+U[6]+", "+U[7]+", "+U[8]+", "+U[9]+", "+U[10]+", "+U[11]+", "+U[12]+", "+U[13]+", "+U[14]+", "+U[15]+")"}},31283:function(se){se.exports=function(U,r,I){var C,f,k,T,v,c,i,s,a,o,l,u,d=I[0],g=I[1],h=I[2];return r===U?(U[12]=r[0]*d+r[4]*g+r[8]*h+r[12],U[13]=r[1]*d+r[5]*g+r[9]*h+r[13],U[14]=r[2]*d+r[6]*g+r[10]*h+r[14],U[15]=r[3]*d+r[7]*g+r[11]*h+r[15]):(f=r[1],k=r[2],T=r[3],v=r[4],c=r[5],i=r[6],s=r[7],a=r[8],o=r[9],l=r[10],u=r[11],U[0]=C=r[0],U[1]=f,U[2]=k,U[3]=T,U[4]=v,U[5]=c,U[6]=i,U[7]=s,U[8]=a,U[9]=o,U[10]=l,U[11]=u,U[12]=C*d+v*g+a*h+r[12],U[13]=f*d+c*g+o*h+r[13],U[14]=k*d+i*g+l*h+r[14],U[15]=T*d+s*g+u*h+r[15]),U}},88654:function(se){se.exports=function(U,r){if(U===r){var I=r[1],C=r[2],f=r[3],k=r[6],T=r[7],v=r[11];U[1]=r[4],U[2]=r[8],U[3]=r[12],U[4]=I,U[6]=r[9],U[7]=r[13],U[8]=C,U[9]=k,U[11]=r[14],U[12]=f,U[13]=T,U[14]=v}else U[0]=r[0],U[1]=r[4],U[2]=r[8],U[3]=r[12],U[4]=r[1],U[5]=r[5],U[6]=r[9],U[7]=r[13],U[8]=r[2],U[9]=r[6],U[10]=r[10],U[11]=r[14],U[12]=r[3],U[13]=r[7],U[14]=r[11],U[15]=r[15];return U}},42505:function(se,U,r){"use strict";var I=r(72791),C=r(71299),f=r(98580),k=r(12018),T=r(83522),v=r(25075),c=r(68016),i=r(58404),s=r(18863),a=r(10973),o=r(25677),l=r(75686),u=r(53545),d=r(56131),g=r(32879),h=r(30120),w=r(13547).nextPow2,y=new T,p=!1;if(document.body){var _=document.body.appendChild(document.createElement("div"));_.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(_).fontStretch&&(p=!0),document.body.removeChild(_)}var x=function(b){var M;this.gl="function"==typeof(M=b)&&M._gl&&M.prop&&M.texture&&M.buffer?(b={regl:b}).regl._gl:k(b),this.shader=y.get(this.gl),this.regl=this.shader?this.shader.regl:b.regl||f({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),y.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(a(b)?b:{})};x.prototype.createShader=function(){var b=this.regl,M=b({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:b.prop("count"),offset:b.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:b.this("sizeBuffer")},width:{offset:0,stride:8,buffer:b.this("sizeBuffer")},char:b.this("charBuffer"),position:b.this("position")},uniforms:{atlasSize:function(m,D){return[D.atlas.width,D.atlas.height]},atlasDim:function(m,D){return[D.atlas.cols,D.atlas.rows]},atlas:function(m,D){return D.atlas.texture},charStep:function(m,D){return D.atlas.step},em:function(m,D){return D.atlas.em},color:b.prop("color"),opacity:b.prop("opacity"),viewport:b.this("viewportArray"),scale:b.this("scale"),align:b.prop("align"),baseline:b.prop("baseline"),translate:b.this("translate"),positionOffset:b.prop("positionOffset")},primitive:"points",viewport:b.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:b,draw:M,atlas:{}}},x.prototype.update=function(b){var M=this;if("string"==typeof b)b={text:b};else if(!b)return;null!=(b=C(b,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(b.opacity)?b.opacity.map(function(ce){return parseFloat(ce)}):parseFloat(b.opacity)),null!=b.viewport&&(this.viewport=s(b.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=b.kerning&&(this.kerning=b.kerning),null!=b.offset&&("number"==typeof b.offset&&(b.offset=[b.offset,0]),this.positionOffset=h(b.offset)),b.direction&&(this.direction=b.direction),b.range&&(this.range=b.range,this.scale=[1/(b.range[2]-b.range[0]),1/(b.range[3]-b.range[1])],this.translate=[-b.range[0],-b.range[1]]),b.scale&&(this.scale=b.scale),b.translate&&(this.translate=b.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||b.font||(b.font=x.baseFontSize+"px sans-serif");var m,D=!1,S=!1;if(b.font&&(Array.isArray(b.font)?b.font:[b.font]).forEach(function(ce,Ae){if("string"==typeof ce)try{ce=I.parse(ce)}catch{ce=I.parse(x.baseFontSize+"px "+ce)}else ce=I.parse(I.stringify(ce));var Ne=I.stringify({size:x.baseFontSize,family:ce.family,stretch:p?ce.stretch:void 0,variant:ce.variant,weight:ce.weight,style:ce.style}),De=o(ce.size),qe=Math.round(De[0]*l(De[1]));if(qe!==M.fontSize[Ae]&&(S=!0,M.fontSize[Ae]=qe),!(M.font[Ae]&&Ne==M.font[Ae].baseString||(D=!0,M.font[Ae]=x.fonts[Ne],M.font[Ae]))){var Ke=ce.family.join(", "),be=[ce.style];ce.style!=ce.variant&&be.push(ce.variant),ce.variant!=ce.weight&&be.push(ce.weight),p&&ce.weight!=ce.stretch&&be.push(ce.stretch),M.font[Ae]={baseString:Ne,family:Ke,weight:ce.weight,stretch:ce.stretch,style:ce.style,variant:ce.variant,width:{},kerning:{},metrics:g(Ke,{origin:"top",fontSize:x.baseFontSize,fontStyle:be.join(" ")})},x.fonts[Ne]=M.font[Ae]}}),(D||S)&&this.font.forEach(function(ce,Ae){var Ne=I.stringify({size:M.fontSize[Ae],family:ce.family,stretch:p?ce.stretch:void 0,variant:ce.variant,weight:ce.weight,style:ce.style});M.fontAtlas[Ae]=M.shader.atlas[Ne],M.fontAtlas[Ae]||(M.shader.atlas[Ne]=M.fontAtlas[Ae]={fontString:Ne,step:2*Math.ceil(M.fontSize[Ae]*ce.metrics.bottom*.5),em:M.fontSize[Ae],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:M.regl.texture()}),null==b.text&&(b.text=M.text)}),"string"==typeof b.text&&b.position&&b.position.length>2){for(var O=Array(.5*b.position.length),P=0;P<O.length;P++)O[P]=b.text;b.text=O}if(null!=b.text||D){if(this.textOffsets=[0],Array.isArray(b.text)){this.count=b.text[0].length,this.counts=[this.count];for(var R=1;R<b.text.length;R++)this.textOffsets[R]=this.textOffsets[R-1]+b.text[R-1].length,this.count+=b.text[R].length,this.counts.push(b.text[R].length);this.text=b.text.join("")}else this.text=b.text,this.count=this.text.length,this.counts=[this.count];m=[],this.font.forEach(function(ce,Ae){x.atlasContext.font=ce.baseString;for(var Ne=M.fontAtlas[Ae],De=0;De<M.text.length;De++){var qe=M.text.charAt(De);if(null==Ne.ids[qe]&&(Ne.ids[qe]=Ne.chars.length,Ne.chars.push(qe),m.push(qe)),null==ce.width[qe]&&(ce.width[qe]=x.atlasContext.measureText(qe).width/x.baseFontSize,M.kerning)){var Ke=[];for(var be in ce.width)Ke.push(be+qe,qe+be);d(ce.kerning,u(ce.family,{pairs:Ke}))}}})}if(b.position)if(b.position.length>2){for(var F=!b.position[0].length,B=i.mallocFloat(2*this.count),J=0,z=0;J<this.counts.length;J++){var $=this.counts[J];if(F)for(var G=0;G<$;G++)B[z++]=b.position[2*J],B[z++]=b.position[2*J+1];else for(var H=0;H<$;H++)B[z++]=b.position[J][0],B[z++]=b.position[J][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),i.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:b.position};if(b.text||D){var X=i.mallocUint8(this.count),K=i.mallocFloat(2*this.count);this.textWidth=[];for(var ue=0,ae=0;ue<this.counts.length;ue++){for(var ne=this.counts[ue],Q=this.font[ue]||this.font[0],ie=this.fontAtlas[ue]||this.fontAtlas[0],le=0;le<ne;le++){var fe=this.text.charAt(ae),he=this.text.charAt(ae-1);if(X[ae]=ie.ids[fe],K[2*ae]=Q.width[fe],le){var Ee=K[2*ae-1]+.5*K[2*ae-2]+.5*K[2*ae];if(this.kerning){var Re=Q.kerning[he+fe];Re&&(Ee+=.001*Re)}K[2*ae+1]=Ee}else K[2*ae+1]=.5*K[2*ae];ae++}this.textWidth.push(K.length?.5*K[2*ae-2]+K[2*ae-1]:0)}b.align||(b.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),i.freeUint8(X),i.freeFloat(K),m.length&&this.font.forEach(function(ce,Ae){var Ne=M.fontAtlas[Ae],De=Ne.step,qe=Math.floor(x.maxAtlasSize/De),Ke=Math.min(qe,Ne.chars.length),be=Math.ceil(Ne.chars.length/Ke),Oe=w(Ke*De),Le=w(be*De);Ne.width=Oe,Ne.height=Le,Ne.rows=be,Ne.cols=Ke,Ne.em&&Ne.texture({data:c({canvas:x.atlasCanvas,font:Ne.fontString,chars:Ne.chars,shape:[Oe,Le],step:[De,De]})})})}if(b.align&&(this.align=b.align,this.alignOffset=this.textWidth.map(function(ce,Ae){var Ne=Array.isArray(M.align)?M.align.length>1?M.align[Ae]:M.align[0]:M.align;if("number"==typeof Ne)return Ne;switch(Ne){case"right":case"end":return-ce;case"center":case"centre":case"middle":return.5*-ce}return 0})),null==this.baseline&&null==b.baseline&&(b.baseline=0),null!=b.baseline&&(this.baseline=b.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(ce,Ae){var Ne=(M.font[Ae]||M.font[0]).metrics,De=0;return-1*((De+=.5*Ne.bottom)+("number"==typeof ce?ce-Ne.baseline:-Ne[ce]))})),null!=b.color)if(b.color||(b.color="transparent"),"string"!=typeof b.color&&isNaN(b.color)){var ke;if("number"==typeof b.color[0]&&b.color.length>this.counts.length){var Te=b.color.length;ke=i.mallocUint8(Te);for(var we=(b.color.subarray||b.color.slice).bind(b.color),je=0;je<Te;je+=4)ke.set(v(we(je,je+4),"uint8"),je)}else{var Ce=b.color.length;ke=i.mallocUint8(4*Ce);for(var Ie=0;Ie<Ce;Ie++)ke.set(v(b.color[Ie]||0,"uint8"),4*Ie)}this.color=ke}else this.color=v(b.color,"uint8");if(b.position||b.text||b.color||b.baseline||b.align||b.font||b.offset||b.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var ge=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(ge);for(var me=0;me<this.batch.length;me++)this.batch[me]={count:this.counts.length>1?this.counts[me]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[me]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*me,4*me+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[me]:this.opacity,baseline:null!=this.baselineOffset[me]?this.baselineOffset[me]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[me]?this.alignOffset[me]:this.alignOffset[0]:0,atlas:this.fontAtlas[me]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*me,2*me+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},x.prototype.destroy=function(){},x.prototype.kerning=!0,x.prototype.position={constant:new Float32Array(2)},x.prototype.translate=null,x.prototype.scale=null,x.prototype.font=null,x.prototype.text="",x.prototype.positionOffset=[0,0],x.prototype.opacity=1,x.prototype.color=new Uint8Array([0,0,0,255]),x.prototype.alignOffset=[0,0],x.maxAtlasSize=1024,x.atlasCanvas=document.createElement("canvas"),x.atlasContext=x.atlasCanvas.getContext("2d",{alpha:!1}),x.baseFontSize=64,x.fonts={},se.exports=x},12018:function(se,U,r){"use strict";var I=r(71299);function C(T){if(T.container)if(T.container==document.body)document.body.style.width||(T.canvas.width=T.width||T.pixelRatio*r.g.innerWidth),document.body.style.height||(T.canvas.height=T.height||T.pixelRatio*r.g.innerHeight);else{var v=T.container.getBoundingClientRect();T.canvas.width=T.width||v.right-v.left,T.canvas.height=T.height||v.bottom-v.top}}function f(T){return"function"==typeof T.getContext&&"width"in T&&"height"in T}function k(){var T=document.createElement("canvas");return T.style.position="absolute",T.style.top=0,T.style.left=0,T}se.exports=function(T){var v,i;if(T?"string"==typeof T&&(T={container:T}):T={},(T=f(T)||"string"==typeof(v=T).nodeName&&"function"==typeof v.appendChild&&"function"==typeof v.getBoundingClientRect?{container:T}:(i=T,"function"==typeof i.drawArrays||"function"==typeof i.drawElements?{gl:T}:I(T,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0))).pixelRatio||(T.pixelRatio=r.g.pixelRatio||1),T.gl)return T.gl;if(T.canvas&&(T.container=T.canvas.parentNode),T.container){if("string"==typeof T.container){var c=document.querySelector(T.container);if(!c)throw Error("Element "+T.container+" is not found");T.container=c}f(T.container)?(T.canvas=T.container,T.container=T.canvas.parentNode):T.canvas||(T.canvas=k(),T.container.appendChild(T.canvas),C(T))}else if(!T.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");T.container=document.body||document.documentElement,T.canvas=k(),T.container.appendChild(T.canvas),C(T)}return T.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{T.gl=T.canvas.getContext(i,T.attrs)}catch{}return T.gl}),T.gl}},56068:function(se){se.exports=function(U){"string"==typeof U&&(U=[U]);for(var r=[].slice.call(arguments,1),I=[],C=0;C<U.length-1;C++)I.push(U[C],r[C]||"");return I.push(U[C]),I.join("")}},40383:function(se,U,r){"use strict";var I=r(68318)("%Object.getOwnPropertyDescriptor%",!0);if(I)try{I([],"length")}catch{I=null}se.exports=I},57035:function(se,U,r){"use strict";var I,C=r(54404);I="function"==typeof r.g.matchMedia?!r.g.matchMedia("(hover: none)").matches:C,se.exports=I},38520:function(se,U,r){"use strict";var I=r(54404);se.exports=I&&function(){var C=!1;try{var f=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("test",null,f),window.removeEventListener("test",null,f)}catch{C=!1}return C}()},55622:function(se,U,r){"use strict";var I=r(68318)("%Object.defineProperty%",!0),C=function(){if(I)try{return I({},"a",{value:1}),!0}catch{return!1}return!1};C.hasArrayLengthDefineBug=function(){if(!C())return null;try{return 1!==I([],"length",{value:1}).length}catch{return!0}},se.exports=C},57877:function(se,U,r){"use strict";var I=typeof Symbol<"u"&&Symbol,C=r(35638);se.exports=function(){return"function"==typeof I&&"function"==typeof Symbol&&"symbol"==typeof I("foo")&&"symbol"==typeof Symbol("bar")&&C()}},35638:function(se){"use strict";se.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var U={},r=Symbol("test"),I=Object(r);if("string"==typeof r||"[object Symbol]"!==Object.prototype.toString.call(r)||"[object Symbol]"!==Object.prototype.toString.call(I))return!1;for(r in U[r]=42,U)return!1;if("function"==typeof Object.keys&&0!==Object.keys(U).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(U).length)return!1;var C=Object.getOwnPropertySymbols(U);if(1!==C.length||C[0]!==r||!Object.prototype.propertyIsEnumerable.call(U,r))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var f=Object.getOwnPropertyDescriptor(U,r);if(42!==f.value||!0!==f.enumerable)return!1}return!0}},84543:function(se,U,r){"use strict";var I=r(35638);se.exports=function(){return I()&&!!Symbol.toStringTag}},35065:function(se,U,r){"use strict";var I=r(77575);se.exports=I.call(Function.call,Object.prototype.hasOwnProperty)},95280:function(se,U){U.read=function(r,I,C,f,k){var T,v,c=8*k-f-1,i=(1<<c)-1,s=i>>1,a=-7,o=C?k-1:0,l=C?-1:1,u=r[I+o];for(o+=l,T=u&(1<<-a)-1,u>>=-a,a+=c;a>0;T=256*T+r[I+o],o+=l,a-=8);for(v=T&(1<<-a)-1,T>>=-a,a+=f;a>0;v=256*v+r[I+o],o+=l,a-=8);if(0===T)T=1-s;else{if(T===i)return v?NaN:1/0*(u?-1:1);v+=Math.pow(2,f),T-=s}return(u?-1:1)*v*Math.pow(2,T-f)},U.write=function(r,I,C,f,k,T){var v,c,i,s=8*T-k-1,a=(1<<s)-1,o=a>>1,l=23===k?Math.pow(2,-24)-Math.pow(2,-77):0,u=f?0:T-1,d=f?1:-1,g=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(c=isNaN(I)?1:0,v=a):(v=Math.floor(Math.log(I)/Math.LN2),I*(i=Math.pow(2,-v))<1&&(v--,i*=2),(I+=v+o>=1?l/i:l*Math.pow(2,1-o))*i>=2&&(v++,i/=2),v+o>=a?(c=0,v=a):v+o>=1?(c=(I*i-1)*Math.pow(2,k),v+=o):(c=I*Math.pow(2,o-1)*Math.pow(2,k),v=0));k>=8;r[C+u]=255&c,u+=d,c/=256,k-=8);for(v=v<<k|c,s+=k;s>0;r[C+u]=255&v,u+=d,v/=256,s-=8);r[C+u-d]|=128*g}},42018:function(se){se.exports="function"==typeof Object.create?function(U,r){r&&(U.super_=r,U.prototype=Object.create(r.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}))}:function(U,r){if(r){U.super_=r;var I=function(){};I.prototype=r.prototype,U.prototype=new I,U.prototype.constructor=U}}},47216:function(se,U,r){"use strict";var I=r(84543)(),C=r(6614)("Object.prototype.toString"),f=function(v){return!(I&&v&&"object"==typeof v&&Symbol.toStringTag in v)&&"[object Arguments]"===C(v)},k=function(v){return!!f(v)||null!==v&&"object"==typeof v&&"number"==typeof v.length&&v.length>=0&&"[object Array]"!==C(v)&&"[object Function]"===C(v.callee)},T=function(){return f(arguments)}();f.isLegacyArguments=k,se.exports=T?f:k},54404:function(se){se.exports=!0},85395:function(se){"use strict";var U,r,I=Function.prototype.toString,C="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof C&&"function"==typeof Object.defineProperty)try{U=Object.defineProperty({},"length",{get:function(){throw r}}),r={},C(function(){throw 42},null,U)}catch(o){o!==r&&(C=null)}else C=null;var f=/^\s*class\b/,k=function(o){try{var l=I.call(o);return f.test(l)}catch{return!1}},T=function(o){try{return!k(o)&&(I.call(o),!0)}catch{return!1}},v=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,i=!(0 in[,]),s=function(){return!1};if("object"==typeof document){var a=document.all;v.call(a)===v.call(document.all)&&(s=function(o){if((i||!o)&&(void 0===o||"object"==typeof o))try{var l=v.call(o);return("[object HTMLAllCollection]"===l||"[object HTML document.all class]"===l||"[object HTMLCollection]"===l||"[object Object]"===l)&&null==o("")}catch{}return!1})}se.exports=C?function(o){if(s(o))return!0;if(!o||"function"!=typeof o&&"object"!=typeof o)return!1;try{C(o,null,U)}catch(l){if(l!==r)return!1}return!k(o)&&T(o)}:function(o){if(s(o))return!0;if(!o||"function"!=typeof o&&"object"!=typeof o)return!1;if(c)return T(o);if(k(o))return!1;var l=v.call(o);return!("[object Function]"!==l&&"[object GeneratorFunction]"!==l&&!/^\[object HTML/.test(l))&&T(o)}},65481:function(se,U,r){"use strict";var I,C=Object.prototype.toString,f=Function.prototype.toString,k=/^\s*(?:function)?\*/,T=r(84543)(),v=Object.getPrototypeOf;se.exports=function(c){if("function"!=typeof c)return!1;if(k.test(f.call(c)))return!0;if(!T)return"[object GeneratorFunction]"===C.call(c);if(!v)return!1;if(void 0===I){var i=function(){if(!T)return!1;try{return Function("return function*() {}")()}catch{}}();I=!!i&&v(i)}return v(c)===I}},62683:function(se){"use strict";se.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function(se){"use strict";se.exports=function(U){return U!=U}},15567:function(se,U,r){"use strict";var I=r(68222),C=r(17045),f=r(64274),k=r(14922),T=r(22442),v=I(k(),Number);C(v,{getPolyfill:k,implementation:f,shim:T}),se.exports=v},14922:function(se,U,r){"use strict";var I=r(64274);se.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:I}},22442:function(se,U,r){"use strict";var I=r(17045),C=r(14922);se.exports=function(){var f=C();return I(Number,{isNaN:f},{isNaN:function(){return Number.isNaN!==f}}),f}},64941:function(se){"use strict";se.exports=function(U){var r=typeof U;return null!==U&&("object"===r||"function"===r)}},10973:function(se){"use strict";var U=Object.prototype.toString;se.exports=function(r){var I;return"[object Object]"===U.call(r)&&(null===(I=Object.getPrototypeOf(r))||I===Object.getPrototypeOf({}))}},18546:function(se){"use strict";se.exports=function(U){for(var r,I=U.length,C=0;C<I;C++)if(((r=U.charCodeAt(C))<9||r>13)&&32!==r&&133!==r&&160!==r&&5760!==r&&6158!==r&&(r<8192||r>8205)&&8232!==r&&8233!==r&&8239!==r&&8287!==r&&8288!==r&&12288!==r&&65279!==r)return!1;return!0}},89546:function(se){"use strict";se.exports=function(U){return"string"==typeof U&&(U=U.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(U)&&/[\dz]$/i.test(U)&&U.length>4))}},9187:function(se,U,r){"use strict";var I=r(31353),C=r(72077),f=r(6614),k=f("Object.prototype.toString"),T=r(84543)(),v=r(40383),c=typeof globalThis>"u"?r.g:globalThis,i=C(),s=f("Array.prototype.indexOf",!0)||function(u,d){for(var g=0;g<u.length;g+=1)if(u[g]===d)return g;return-1},a=f("String.prototype.slice"),o={},l=Object.getPrototypeOf;T&&v&&l&&I(i,function(u){var d=new c[u];if(Symbol.toStringTag in d){var g=l(d),h=v(g,Symbol.toStringTag);if(!h){var w=l(g);h=v(w,Symbol.toStringTag)}o[u]=h.get}}),se.exports=function(u){if(!u||"object"!=typeof u)return!1;if(!T||!(Symbol.toStringTag in u)){var d=a(k(u),8,-1);return s(i,d)>-1}return!!v&&(g=u,h=!1,I(o,function(w,y){if(!h)try{h=w.call(g)===y}catch{}}),h);var g,h}},44517:function(se){se.exports=function(){"use strict";var U,r,I;function C(f,k){if(U)if(r){var T="var sharedChunk = {}; ("+U+")(sharedChunk); ("+r+")(sharedChunk);",v={};U(v),(I=k(v)).workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))}else r=k;else U=k}return C(0,function(f){function k(L,N){return L(N={exports:{}},N.exports),N.exports}var T="1.10.1",v=c;function c(L,N,ee,ye){this.cx=3*L,this.bx=3*(ee-L)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*N,this.by=3*(ye-N)-this.cy,this.ay=1-this.cy-this.by,this.p1x=L,this.p1y=ye,this.p2x=ee,this.p2y=ye}c.prototype.sampleCurveX=function(L){return((this.ax*L+this.bx)*L+this.cx)*L},c.prototype.sampleCurveY=function(L){return((this.ay*L+this.by)*L+this.cy)*L},c.prototype.sampleCurveDerivativeX=function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},c.prototype.solveCurveX=function(L,N){var ee,ye,Fe,Ve,$e;for(void 0===N&&(N=1e-6),Fe=L,$e=0;$e<8;$e++){if(Ve=this.sampleCurveX(Fe)-L,Math.abs(Ve)<N)return Fe;var lt=this.sampleCurveDerivativeX(Fe);if(Math.abs(lt)<1e-6)break;Fe-=Ve/lt}if((Fe=L)<(ee=0))return ee;if(Fe>(ye=1))return ye;for(;ee<ye;){if(Ve=this.sampleCurveX(Fe),Math.abs(Ve-L)<N)return Fe;L>Ve?ee=Fe:ye=Fe,Fe=.5*(ye-ee)+ee}return Fe},c.prototype.solve=function(L,N){return this.sampleCurveY(this.solveCurveX(L,N))};var i=s;function s(L,N){this.x=L,this.y=N}function a(L,N,ee,ye){var Fe=new v(L,N,ee,ye);return function(Ve){return Fe.solve(Ve)}}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,N){return this.clone()._rotateAround(L,N)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var N=L.x-this.x,ee=L.y-this.y;return N*N+ee*ee},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,N){return Math.atan2(this.x*N-this.y*L,this.x*L+this.y*N)},_matMult:function(L){var ee=L[2]*this.x+L[3]*this.y;return this.x=L[0]*this.x+L[1]*this.y,this.y=ee,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var N=Math.cos(L),ee=Math.sin(L),Fe=ee*this.x+N*this.y;return this.x=N*this.x-ee*this.y,this.y=Fe,this},_rotateAround:function(L,N){var ee=Math.cos(L),ye=Math.sin(L),Ve=N.y+ye*(this.x-N.x)+ee*(this.y-N.y);return this.x=N.x+ee*(this.x-N.x)-ye*(this.y-N.y),this.y=Ve,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(L){return L instanceof s?L:Array.isArray(L)?new s(L[0],L[1]):L};var o=a(.25,.1,.25,1);function l(L,N,ee){return Math.min(ee,Math.max(N,L))}function u(L,N,ee){var ye=ee-N,Fe=((L-N)%ye+ye)%ye+N;return Fe===N?ee:Fe}function d(L){for(var N=[],ee=arguments.length-1;ee-- >0;)N[ee]=arguments[ee+1];for(var ye=0,Fe=N;ye<Fe.length;ye+=1){var Ve=Fe[ye];for(var $e in Ve)L[$e]=Ve[$e]}return L}var g=1;function h(){return g++}function w(){return function L(N){return N?(N^16*Math.random()>>N/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,L)}()}function y(L){return!!L&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L)}function p(L,N){L.forEach(function(ee){N[ee]&&(N[ee]=N[ee].bind(N))})}function _(L,N){return-1!==L.indexOf(N,L.length-N.length)}function x(L,N,ee){var ye={};for(var Fe in L)ye[Fe]=N.call(ee||this,L[Fe],Fe,L);return ye}function b(L,N,ee){var ye={};for(var Fe in L)N.call(ee||this,L[Fe],Fe,L)&&(ye[Fe]=L[Fe]);return ye}function M(L){return Array.isArray(L)?L.map(M):"object"==typeof L&&L?x(L,M):L}var m={};function D(L){m[L]||(typeof console<"u"&&console.warn(L),m[L]=!0)}function S(L,N,ee){return(ee.y-L.y)*(N.x-L.x)>(N.y-L.y)*(ee.x-L.x)}function O(L){for(var N=0,ee=0,ye=L.length,Fe=ye-1,Ve=void 0,$e=void 0;ee<ye;Fe=ee++)N+=(($e=L[Fe]).x-(Ve=L[ee]).x)*(Ve.y+$e.y);return N}function P(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function R(L){var N={};if(L.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ye,Fe,Ve,$e){var lt=Ve||$e;return N[Fe]=!lt||lt.toLowerCase(),""}),N["max-age"]){var ee=parseInt(N["max-age"],10);isNaN(ee)?delete N["max-age"]:N["max-age"]=ee}return N}var F=null;function B(L){if(null==F){var N=L.navigator?L.navigator.userAgent:null;F=!!L.safari||!(!N||!(/\b(iPad|iPhone|iPod)\b/.test(N)||N.match("Safari")&&!N.match("Chrome")))}return F}function J(L){try{var N=self[L];return N.setItem("_mapbox_test_",1),N.removeItem("_mapbox_test_"),!0}catch{return!1}}var z,$,G,H,X=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),K=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ue=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ae={now:X,frame:function(L){var N=K(L);return{cancel:function(){return ue(N)}}},getImageData:function(L,N){void 0===N&&(N=0);var ee=self.document.createElement("canvas"),ye=ee.getContext("2d");if(!ye)throw new Error("failed to create canvas 2d context");return ee.width=L.width,ee.height=L.height,ye.drawImage(L,0,0,L.width,L.height),ye.getImageData(-N,-N,L.width+2*N,L.height+2*N)},resolveURL:function(L){return z||(z=self.document.createElement("a")),z.href=L,z.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==$&&($=self.matchMedia("(prefers-reduced-motion: reduce)")),$.matches)}},ne={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Q={supported:!1,testSupport:function(L){!ie&&H&&(le?fe(L):G=L)}},ie=!1,le=!1;function fe(L){var N=L.createTexture();L.bindTexture(L.TEXTURE_2D,N);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,H),L.isContextLost())return;Q.supported=!0}catch{}L.deleteTexture(N),ie=!0}self.document&&((H=self.document.createElement("img")).onload=function(){G&&fe(G),G=null,le=!0},H.onerror=function(){ie=!0,G=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var he="01",pe=function(L,N){this._transformRequestFn=L,this._customAccessToken=N,this._createSkuToken()};function xe(L){return 0===L.indexOf("mapbox:")}pe.prototype._createSkuToken=function(){var L=function(){for(var N="",ee=0;ee<10;ee++)N+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",he,N].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=L.token,this._skuTokenExpiresAt=L.tokenExpiresAt},pe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},pe.prototype.transformRequest=function(L,N){return this._transformRequestFn&&this._transformRequestFn(L,N)||{url:L}},pe.prototype.normalizeStyleURL=function(L,N){if(!xe(L))return L;var ee=Te(L);return ee.path="/styles/v1"+ee.path,this._makeAPIURL(ee,this._customAccessToken||N)},pe.prototype.normalizeGlyphsURL=function(L,N){if(!xe(L))return L;var ee=Te(L);return ee.path="/fonts/v1"+ee.path,this._makeAPIURL(ee,this._customAccessToken||N)},pe.prototype.normalizeSourceURL=function(L,N){if(!xe(L))return L;var ee=Te(L);return ee.path="/v4/"+ee.authority+".json",ee.params.push("secure"),this._makeAPIURL(ee,this._customAccessToken||N)},pe.prototype.normalizeSpriteURL=function(L,N,ee,ye){var Fe=Te(L);return xe(L)?(Fe.path="/styles/v1"+Fe.path+"/sprite"+N+ee,this._makeAPIURL(Fe,this._customAccessToken||ye)):(Fe.path+=""+N+ee,we(Fe))},pe.prototype.normalizeTileURL=function(L,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),L&&!xe(L))return L;var ee=Te(L);ee.path=ee.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ae.devicePixelRatio>=2||512===N?"@2x":"")+(Q.supported?".webp":"$1")),ee.path=ee.path.replace(/^.+\/v4\//,"/"),ee.path="/v4"+ee.path;var Ve=this._customAccessToken||function($e){for(var lt=0,gt=$e;lt<gt.length;lt+=1){var It=gt[lt].match(/^access_token=(.*)$/);if(It)return It[1]}return null}(ee.params)||ne.ACCESS_TOKEN;return ne.REQUIRE_ACCESS_TOKEN&&Ve&&this._skuToken&&ee.params.push("sku="+this._skuToken),this._makeAPIURL(ee,Ve)},pe.prototype.canonicalizeTileURL=function(L,N){var ee=Te(L);if(!ee.path.match(/(^\/v4\/)/)||!ee.path.match(/\.[\w]+$/))return L;var ye="mapbox://tiles/";ye+=ee.path.replace("/v4/","");var Fe=ee.params;return N&&(Fe=Fe.filter(function(Ve){return!Ve.match(/^access_token=/)})),Fe.length&&(ye+="?"+Fe.join("&")),ye},pe.prototype.canonicalizeTileset=function(L,N){for(var ee=!!N&&xe(N),ye=[],Fe=0,Ve=L.tiles||[];Fe<Ve.length;Fe+=1){var $e=Ve[Fe];Re($e)?ye.push(this.canonicalizeTileURL($e,ee)):ye.push($e)}return ye},pe.prototype._makeAPIURL=function(L,N){var ee="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ye=Te(ne.API_URL);if(L.protocol=ye.protocol,L.authority=ye.authority,"/"!==ye.path&&(L.path=""+ye.path+L.path),!ne.REQUIRE_ACCESS_TOKEN)return we(L);if(!(N=N||ne.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+ee);if("s"===N[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+ee);return L.params=L.params.filter(function(Fe){return-1===Fe.indexOf("access_token")}),L.params.push("access_token="+N),we(L)};var Ee=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Re(L){return Ee.test(L)}var ke=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(L){var N=L.match(ke);if(!N)throw new Error("Unable to parse URL object");return{protocol:N[1],authority:N[2],path:N[3]||"/",params:N[4]?N[4].split("&"):[]}}function we(L){var N=L.params.length?"?"+L.params.join("&"):"";return L.protocol+"://"+L.authority+L.path+N}var je="mapbox.eventData";function Ce(L){if(!L)return null;var ee=L.split(".");if(!ee||3!==ee.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(ee[1]).split("").map(function(ye){return"%"+("00"+ye.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ie=function(L){this.type=L,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ie.prototype.getStorageKey=function(L){var N,ye=Ce(ne.ACCESS_TOKEN);return N=ye&&ye.u?self.btoa(encodeURIComponent(ye.u).replace(/%([0-9A-F]{2})/g,function(Fe,Ve){return String.fromCharCode(+("0x"+Ve))})):ne.ACCESS_TOKEN||"",L?je+"."+L+":"+N:je+":"+N},Ie.prototype.fetchEventData=function(){var L=J("localStorage"),N=this.getStorageKey(),ee=this.getStorageKey("uuid");if(L)try{var ye=self.localStorage.getItem(N);ye&&(this.eventData=JSON.parse(ye));var Fe=self.localStorage.getItem(ee);Fe&&(this.anonId=Fe)}catch{D("Unable to read from LocalStorage")}},Ie.prototype.saveEventData=function(){var L=J("localStorage"),N=this.getStorageKey(),ee=this.getStorageKey("uuid");if(L)try{self.localStorage.setItem(ee,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{D("Unable to write to LocalStorage")}},Ie.prototype.processRequests=function(L){},Ie.prototype.postEvent=function(L,N,ee,ye){var Fe=this;if(ne.EVENTS_URL){var Ve=Te(ne.EVENTS_URL);Ve.params.push("access_token="+(ye||ne.ACCESS_TOKEN||""));var $e={event:this.type,created:new Date(L).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:T,skuId:he,userId:this.anonId},lt=N?d($e,N):$e,gt={url:we(Ve),headers:{"Content-Type":"text/plain"},body:JSON.stringify([lt])};this.pendingRequest=Rt(gt,function(It){Fe.pendingRequest=null,ee(It),Fe.saveEventData(),Fe.processRequests(ye)})}},Ie.prototype.queueRequest=function(L,N){this.queue.push(L),this.processRequests(N)};var ge,me,ce=function(L){function N(){L.call(this,"map.load"),this.success={},this.skuToken=""}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.postMapLoadEvent=function(ee,ye,Fe,Ve){this.skuToken=Fe,(ne.EVENTS_URL&&Ve||ne.ACCESS_TOKEN&&Array.isArray(ee)&&ee.some(function($e){return xe($e)||Re($e)}))&&this.queueRequest({id:ye,timestamp:Date.now()},Ve)},N.prototype.processRequests=function(ee){var ye=this;if(!this.pendingRequest&&0!==this.queue.length){var Fe=this.queue.shift(),Ve=Fe.id,$e=Fe.timestamp;Ve&&this.success[Ve]||(this.anonId||this.fetchEventData(),y(this.anonId)||(this.anonId=w()),this.postEvent($e,{skuToken:this.skuToken},function(lt){lt||Ve&&(ye.success[Ve]=!0)},ee))}},N}(Ie),Ae=function(L){function N(ee){L.call(this,"appUserTurnstile"),this._customAccessToken=ee}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.postTurnstileEvent=function(ee,ye){ne.EVENTS_URL&&ne.ACCESS_TOKEN&&Array.isArray(ee)&&ee.some(function(Fe){return xe(Fe)||Re(Fe)})&&this.queueRequest(Date.now(),ye)},N.prototype.processRequests=function(ee){var ye=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Fe=Ce(ne.ACCESS_TOKEN),Ve=Fe?Fe.u:ne.ACCESS_TOKEN,$e=Ve!==this.eventData.tokenU;y(this.anonId)||(this.anonId=w(),$e=!0);var lt=this.queue.shift();if(this.eventData.lastSuccess){var gt=new Date(this.eventData.lastSuccess),It=new Date(lt),Ot=(lt-this.eventData.lastSuccess)/864e5;$e=$e||Ot>=1||Ot<-1||gt.getDate()!==It.getDate()}else $e=!0;if(!$e)return this.processRequests();this.postEvent(lt,{"enabled.telemetry":!1},function(Gt){Gt||(ye.eventData.lastSuccess=lt,ye.eventData.tokenU=Ve)},ee)}},N}(Ie),Ne=new Ae,De=Ne.postTurnstileEvent.bind(Ne),qe=new ce,Ke=qe.postMapLoadEvent.bind(qe),be="mapbox-tiles",Oe=500,Le=50,Ue=42e4;function Ze(){self.caches&&!ge&&(ge=self.caches.open(be))}function et(L){var N=L.indexOf("?");return N<0?L:L.slice(0,N)}var ct,yt=1/0;function ut(){return null==ct&&(ct=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),ct}var Ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ct);var Dt=function(L){function N(ee,ye,Fe){401===ye&&Re(Fe)&&(ee+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),L.call(this,ee),this.status=ye,this.url=Fe,this.name=this.constructor.name,this.message=ee}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},N}(Error),vt=P()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function mt(L,N){var ee,ye=new self.AbortController,Fe=new self.Request(L.url,{method:L.method||"GET",body:L.body,credentials:L.credentials,headers:L.headers,referrer:vt(),signal:ye.signal}),Ve=!1,$e=!1,lt=(ee=Fe.url).indexOf("sku=")>0&&Re(ee);"json"===L.type&&Fe.headers.set("Accept","application/json");var gt=function(Ot,Gt,en){if(!$e){if(Ot&&"SecurityError"!==Ot.message&&D(Ot),Gt&&en)return It(Gt);var Yt=Date.now();self.fetch(Fe).then(function(mn){if(mn.ok){var wn=lt?mn.clone():null;return It(mn,wn,Yt)}return N(new Dt(mn.statusText,mn.status,L.url))}).catch(function(mn){20!==mn.code&&N(new Error(mn.message))})}},It=function(Ot,Gt,en){("arrayBuffer"===L.type?Ot.arrayBuffer():"json"===L.type?Ot.json():Ot.text()).then(function(Yt){$e||(Gt&&en&&function We(L,N,ee){if(Ze(),ge){var ye={status:N.status,statusText:N.statusText,headers:new self.Headers};N.headers.forEach(function(Ve,$e){return ye.headers.set($e,Ve)});var Fe=R(N.headers.get("Cache-Control")||"");Fe["no-store"]||(Fe["max-age"]&&ye.headers.set("Expires",new Date(ee+1e3*Fe["max-age"]).toUTCString()),new Date(ye.headers.get("Expires")).getTime()-ee<Ue||function(Ve,$e){if(void 0===me)try{new Response(new ReadableStream),me=!0}catch{me=!1}me?$e(Ve.body):Ve.blob().then($e)}(N,function(Ve){var $e=new self.Response(Ve,ye);Ze(),ge&&ge.then(function(lt){return lt.put(et(L.url),$e)}).catch(function(lt){return D(lt.message)})}))}}(Fe,Gt,en),Ve=!0,N(null,Yt,Ot.headers.get("Cache-Control"),Ot.headers.get("Expires")))}).catch(function(Yt){$e||N(new Error(Yt.message))})};return lt?function nt(L,N){if(Ze(),!ge)return N(null);var ee=et(L.url);ge.then(function(ye){ye.match(ee).then(function(Fe){var Ve=function($e){if(!$e)return!1;var lt=new Date($e.headers.get("Expires")||0),gt=R($e.headers.get("Cache-Control")||"");return lt>Date.now()&&!gt["no-cache"]}(Fe);ye.delete(ee),Ve&&ye.put(ee,Fe.clone()),N(null,Fe,Ve)}).catch(N)}).catch(N)}(Fe,gt):gt(null,null),{cancel:function(){$e=!0,Ve||ye.abort()}}}var Wt,Ht,Lt=function(L,N){if(!(/^file:/.test(ee=L.url)||/^file:/.test(vt())&&!/^\w+:/.test(ee))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return mt(L,N);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",L,N,void 0,!0)}var ee;return function(ye,Fe){var Ve=new self.XMLHttpRequest;for(var $e in Ve.open(ye.method||"GET",ye.url,!0),"arrayBuffer"===ye.type&&(Ve.responseType="arraybuffer"),ye.headers)Ve.setRequestHeader($e,ye.headers[$e]);return"json"===ye.type&&(Ve.responseType="text",Ve.setRequestHeader("Accept","application/json")),Ve.withCredentials="include"===ye.credentials,Ve.onerror=function(){Fe(new Error(Ve.statusText))},Ve.onload=function(){if((Ve.status>=200&&Ve.status<300||0===Ve.status)&&null!==Ve.response){var lt=Ve.response;if("json"===ye.type)try{lt=JSON.parse(Ve.response)}catch(gt){return Fe(gt)}Fe(null,lt,Ve.getResponseHeader("Cache-Control"),Ve.getResponseHeader("Expires"))}else Fe(new Dt(Ve.statusText,Ve.status,ye.url))},Ve.send(ye.body),{cancel:function(){return Ve.abort()}}}(L,N)},Ft=function(L,N){return Lt(d(L,{type:"arrayBuffer"}),N)},Rt=function(L,N){return Lt(d(L,{method:"POST"}),N)};Wt=[],Ht=0;var it=function(L,N){if(Q.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),Ht>=ne.MAX_PARALLEL_IMAGE_REQUESTS){var ee={requestParameters:L,callback:N,cancelled:!1,cancel:function(){this.cancelled=!0}};return Wt.push(ee),ee}Ht++;var ye=!1,Fe=function(){if(!ye)for(ye=!0,Ht--;Wt.length&&Ht<ne.MAX_PARALLEL_IMAGE_REQUESTS;){var $e=Wt.shift();$e.cancelled||($e.cancel=it($e.requestParameters,$e.callback).cancel)}},Ve=Ft(L,function($e,lt,gt,It){var Gt,en;Fe(),$e?N($e):lt&&(ut()?(Gt=N,en=new self.Blob([new Uint8Array(lt)],{type:"image/png"}),self.createImageBitmap(en).then(function(Yt){Gt(null,Yt)}).catch(function(Yt){Gt(new Error("Could not load image because of "+Yt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Ot,Gt,en,Yt){var mn=new self.Image,wn=self.URL;mn.onload=function(){Gt(null,mn),wn.revokeObjectURL(mn.src)},mn.onerror=function(){return Gt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Bn=new self.Blob([new Uint8Array(Ot)],{type:"image/png"});mn.cacheControl=en,mn.expires=Yt,mn.src=Ot.byteLength?wn.createObjectURL(Bn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(lt,N,gt,It))});return{cancel:function(){Ve.cancel(),Fe()}}};function st(L,N,ee){ee[L]&&-1!==ee[L].indexOf(N)||(ee[L]=ee[L]||[],ee[L].push(N))}function Je(L,N,ee){if(ee&&ee[L]){var ye=ee[L].indexOf(N);-1!==ye&&ee[L].splice(ye,1)}}var ot=function(L,N){void 0===N&&(N={}),d(this,N),this.type=L},pt=function(L){function N(ee,ye){void 0===ye&&(ye={}),L.call(this,"error",d({error:ee},ye))}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N}(ot),xt=function(){};xt.prototype.on=function(L,N){return this._listeners=this._listeners||{},st(L,N,this._listeners),this},xt.prototype.off=function(L,N){return Je(L,N,this._listeners),Je(L,N,this._oneTimeListeners),this},xt.prototype.once=function(L,N){return this._oneTimeListeners=this._oneTimeListeners||{},st(L,N,this._oneTimeListeners),this},xt.prototype.fire=function(L,N){"string"==typeof L&&(L=new ot(L,N||{}));var ee=L.type;if(this.listens(ee)){L.target=this;for(var ye=0,Fe=this._listeners&&this._listeners[ee]?this._listeners[ee].slice():[];ye<Fe.length;ye+=1)Fe[ye].call(this,L);for(var Ve=0,$e=this._oneTimeListeners&&this._oneTimeListeners[ee]?this._oneTimeListeners[ee].slice():[];Ve<$e.length;Ve+=1){var lt=$e[Ve];Je(ee,lt,this._oneTimeListeners),lt.call(this,L)}var gt=this._eventedParent;gt&&(d(L,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),gt.fire(L))}else L instanceof pt&&console.error(L.error);return this},xt.prototype.listens=function(L){return this._listeners&&this._listeners[L]&&this._listeners[L].length>0||this._oneTimeListeners&&this._oneTimeListeners[L]&&this._oneTimeListeners[L].length>0||this._eventedParent&&this._eventedParent.listens(L)},xt.prototype.setEventedParent=function(L,N){return this._eventedParent=L,this._eventedParentData=N,this};var He={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ge=function(L,N,ee,ye){this.message=(L?L+": ":"")+ee,ye&&(this.identifier=ye),null!=N&&N.__line__&&(this.line=N.__line__)};function dt(L){var ee=L.value;return ee?[new Ge(L.key,ee,"constants have been deprecated as of v8")]:[]}function ht(L){for(var N=[],ee=arguments.length-1;ee-- >0;)N[ee]=arguments[ee+1];for(var ye=0,Fe=N;ye<Fe.length;ye+=1){var Ve=Fe[ye];for(var $e in Ve)L[$e]=Ve[$e]}return L}function kt(L){return L instanceof Number||L instanceof String||L instanceof Boolean?L.valueOf():L}function St(L){if(Array.isArray(L))return L.map(St);if(L instanceof Object&&!(L instanceof Number||L instanceof String||L instanceof Boolean)){var N={};for(var ee in L)N[ee]=St(L[ee]);return N}return kt(L)}var Et=function(L){function N(ee,ye){L.call(this,ye),this.message=ye,this.key=ee}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N}(Error),wt=function(L,N){void 0===N&&(N=[]),this.parent=L,this.bindings={};for(var ee=0,ye=N;ee<ye.length;ee+=1){var Fe=ye[ee];this.bindings[Fe[0]]=Fe[1]}};wt.prototype.concat=function(L){return new wt(this,L)},wt.prototype.get=function(L){if(this.bindings[L])return this.bindings[L];if(this.parent)return this.parent.get(L);throw new Error(L+" not found in scope.")},wt.prototype.has=function(L){return!!this.bindings[L]||!!this.parent&&this.parent.has(L)};var Nt={kind:"null"},_t={kind:"number"},Mt={kind:"string"},Pt={kind:"boolean"},Zt={kind:"color"},$t={kind:"object"},Xt={kind:"value"},dn={kind:"collator"},on={kind:"formatted"},cn={kind:"resolvedImage"};function tn(L,N){return{kind:"array",itemType:L,N}}function Cn(L){if("array"===L.kind){var N=Cn(L.itemType);return"number"==typeof L.N?"array<"+N+", "+L.N+">":"value"===L.itemType.kind?"array":"array<"+N+">"}return L.kind}var Fn=[Nt,_t,Mt,Pt,Zt,on,$t,tn(Xt),cn];function En(L,N){if("error"===N.kind)return null;if("array"===L.kind){if("array"===N.kind&&(0===N.N&&"value"===N.itemType.kind||!En(L.itemType,N.itemType))&&("number"!=typeof L.N||L.N===N.N))return null}else{if(L.kind===N.kind)return null;if("value"===L.kind)for(var ee=0,ye=Fn;ee<ye.length;ee+=1)if(!En(ye[ee],N))return null}return"Expected "+Cn(L)+" but found "+Cn(N)+" instead."}function rn(L,N){return N.some(function(ee){return ee.kind===L.kind})}function yn(L,N){return N.some(function(ee){return"null"===ee?null===L:"array"===ee?Array.isArray(L):"object"===ee?L&&!Array.isArray(L)&&"object"==typeof L:ee===typeof L})}var bn=k(function(L,N){var ee={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ye(gt){return(gt=Math.round(gt))<0?0:gt>255?255:gt}function Ve(gt){return ye("%"===gt[gt.length-1]?parseFloat(gt)/100*255:parseInt(gt))}function $e(gt){return function Fe(gt){return gt<0?0:gt>1?1:gt}("%"===gt[gt.length-1]?parseFloat(gt)/100:parseFloat(gt))}function lt(gt,It,Ot){return Ot<0?Ot+=1:Ot>1&&(Ot-=1),6*Ot<1?gt+(It-gt)*Ot*6:2*Ot<1?It:3*Ot<2?gt+(It-gt)*(2/3-Ot)*6:gt}try{N.parseCSSColor=function(gt){var It,Ot=gt.replace(/ /g,"").toLowerCase();if(Ot in ee)return ee[Ot].slice();if("#"===Ot[0])return 4===Ot.length?(It=parseInt(Ot.substr(1),16))>=0&&It<=4095?[(3840&It)>>4|(3840&It)>>8,240&It|(240&It)>>4,15&It|(15&It)<<4,1]:null:7===Ot.length&&(It=parseInt(Ot.substr(1),16))>=0&&It<=16777215?[(16711680&It)>>16,(65280&It)>>8,255&It,1]:null;var Gt=Ot.indexOf("("),en=Ot.indexOf(")");if(-1!==Gt&&en+1===Ot.length){var Yt=Ot.substr(0,Gt),mn=Ot.substr(Gt+1,en-(Gt+1)).split(","),wn=1;switch(Yt){case"rgba":if(4!==mn.length)return null;wn=$e(mn.pop());case"rgb":return 3!==mn.length?null:[Ve(mn[0]),Ve(mn[1]),Ve(mn[2]),wn];case"hsla":if(4!==mn.length)return null;wn=$e(mn.pop());case"hsl":if(3!==mn.length)return null;var Bn=(parseFloat(mn[0])%360+360)%360/360,jn=$e(mn[1]),Yn=$e(mn[2]),Kn=Yn<=.5?Yn*(jn+1):Yn+jn-Yn*jn,sr=2*Yn-Kn;return[ye(255*lt(sr,Kn,Bn+1/3)),ye(255*lt(sr,Kn,Bn)),ye(255*lt(sr,Kn,Bn-1/3)),wn];default:return null}}return null}}catch{}}).parseCSSColor,In=function(L,N,ee,ye){void 0===ye&&(ye=1),this.r=L,this.g=N,this.b=ee,this.a=ye};In.parse=function(L){if(L){if(L instanceof In)return L;if("string"==typeof L){var N=bn(L);if(N)return new In(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},In.prototype.toString=function(){var L=this.toArray(),ee=L[1],ye=L[2],Fe=L[3];return"rgba("+Math.round(L[0])+","+Math.round(ee)+","+Math.round(ye)+","+Fe+")"},In.prototype.toArray=function(){var L=this,Fe=L.a;return 0===Fe?[0,0,0,0]:[255*L.r/Fe,255*L.g/Fe,255*L.b/Fe,Fe]},In.black=new In(0,0,0,1),In.white=new In(1,1,1,1),In.transparent=new In(0,0,0,0),In.red=new In(1,0,0,1);var _n=function(L,N,ee){this.sensitivity=L?N?"variant":"case":N?"accent":"base",this.locale=ee,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_n.prototype.compare=function(L,N){return this.collator.compare(L,N)},_n.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var qn=function(L,N,ee,ye,Fe){this.text=L,this.image=N,this.scale=ee,this.fontStack=ye,this.textColor=Fe},Wn=function(L){this.sections=L};Wn.fromString=function(L){return new Wn([new qn(L,null,null,null,null)])},Wn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(L){return 0!==L.text.length||L.image&&0!==L.image.name.length})},Wn.factory=function(L){return L instanceof Wn?L:Wn.fromString(L)},Wn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(L){return L.text}).join("")},Wn.prototype.serialize=function(){for(var L=["format"],N=0,ee=this.sections;N<ee.length;N+=1){var ye=ee[N];if(ye.image)L.push(["image",ye.image.name]);else{L.push(ye.text);var Fe={};ye.fontStack&&(Fe["text-font"]=["literal",ye.fontStack.split(",")]),ye.scale&&(Fe["font-scale"]=ye.scale),ye.textColor&&(Fe["text-color"]=["rgba"].concat(ye.textColor.toArray())),L.push(Fe)}}return L};var Nn=function(L){this.name=L.name,this.available=L.available};function Xn(L,N,ee,ye){return"number"==typeof L&&L>=0&&L<=255&&"number"==typeof N&&N>=0&&N<=255&&"number"==typeof ee&&ee>=0&&ee<=255?void 0===ye||"number"==typeof ye&&ye>=0&&ye<=1?null:"Invalid rgba value ["+[L,N,ee,ye].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ye?[L,N,ee,ye]:[L,N,ee]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function yr(L){if(null===L||"string"==typeof L||"boolean"==typeof L||"number"==typeof L||L instanceof In||L instanceof _n||L instanceof Wn||L instanceof Nn)return!0;if(Array.isArray(L)){for(var N=0,ee=L;N<ee.length;N+=1)if(!yr(ee[N]))return!1;return!0}if("object"==typeof L){for(var ye in L)if(!yr(L[ye]))return!1;return!0}return!1}function fr(L){if(null===L)return Nt;if("string"==typeof L)return Mt;if("boolean"==typeof L)return Pt;if("number"==typeof L)return _t;if(L instanceof In)return Zt;if(L instanceof _n)return dn;if(L instanceof Wn)return on;if(L instanceof Nn)return cn;if(Array.isArray(L)){for(var N,ee=L.length,ye=0,Fe=L;ye<Fe.length;ye+=1){var Ve=fr(Fe[ye]);if(N){if(N===Ve)continue;N=Xt;break}N=Ve}return tn(N||Xt,ee)}return $t}function Er(L){var N=typeof L;return null===L?"":"string"===N||"number"===N||"boolean"===N?String(L):L instanceof In||L instanceof Wn||L instanceof Nn?L.toString():JSON.stringify(L)}Nn.prototype.toString=function(){return this.name},Nn.fromString=function(L){return L?new Nn({name:L,available:!1}):null},Nn.prototype.serialize=function(){return["image",this.name]};var gr=function(L,N){this.type=L,this.value=N};gr.parse=function(L,N){if(2!==L.length)return N.error("'literal' expression requires exactly one argument, but found "+(L.length-1)+" instead.");if(!yr(L[1]))return N.error("invalid value");var ee=L[1],ye=fr(ee),Fe=N.expectedType;return"array"!==ye.kind||0!==ye.N||!Fe||"array"!==Fe.kind||"number"==typeof Fe.N&&0!==Fe.N||(ye=Fe),new gr(ye,ee)},gr.prototype.evaluate=function(){return this.value},gr.prototype.eachChild=function(){},gr.prototype.outputDefined=function(){return!0},gr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof In?["rgba"].concat(this.value.toArray()):this.value instanceof Wn?this.value.serialize():this.value};var mr=function(L){this.name="ExpressionEvaluationError",this.message=L};mr.prototype.toJSON=function(){return this.message};var zr={string:Mt,number:_t,boolean:Pt,object:$t},Jt=function(L,N){this.type=L,this.args=N};Jt.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var ee,ye=1,Fe=L[0];if("array"===Fe){var Ve,$e;if(L.length>2){var lt=L[1];if("string"!=typeof lt||!(lt in zr)||"object"===lt)return N.error('The item type argument of "array" must be one of string, number, boolean',1);Ve=zr[lt],ye++}else Ve=Xt;if(L.length>3){if(null!==L[2]&&("number"!=typeof L[2]||L[2]<0||L[2]!==Math.floor(L[2])))return N.error('The length argument to "array" must be a positive integer literal',2);$e=L[2],ye++}ee=tn(Ve,$e)}else ee=zr[Fe];for(var gt=[];ye<L.length;ye++){var It=N.parse(L[ye],ye,Xt);if(!It)return null;gt.push(It)}return new Jt(ee,gt)},Jt.prototype.evaluate=function(L){for(var N=0;N<this.args.length;N++){var ee=this.args[N].evaluate(L);if(!En(this.type,fr(ee)))return ee;if(N===this.args.length-1)throw new mr("Expected value to be of type "+Cn(this.type)+", but found "+Cn(fr(ee))+" instead.")}return null},Jt.prototype.eachChild=function(L){this.args.forEach(L)},Jt.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Jt.prototype.serialize=function(){var L=this.type,N=[L.kind];if("array"===L.kind){var ee=L.itemType;if("string"===ee.kind||"number"===ee.kind||"boolean"===ee.kind){N.push(ee.kind);var ye=L.N;("number"==typeof ye||this.args.length>1)&&N.push(ye)}}return N.concat(this.args.map(function(Fe){return Fe.serialize()}))};var an=function(L){this.type=on,this.sections=L};an.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var ee=L[1];if(!Array.isArray(ee)&&"object"==typeof ee)return N.error("First argument must be an image or text section.");for(var ye=[],Fe=!1,Ve=1;Ve<=L.length-1;++Ve){var $e=L[Ve];if(Fe&&"object"==typeof $e&&!Array.isArray($e)){Fe=!1;var lt=null;if($e["font-scale"]&&!(lt=N.parse($e["font-scale"],1,_t)))return null;var gt=null;if($e["text-font"]&&!(gt=N.parse($e["text-font"],1,tn(Mt))))return null;var It=null;if($e["text-color"]&&!(It=N.parse($e["text-color"],1,Zt)))return null;var Ot=ye[ye.length-1];Ot.scale=lt,Ot.font=gt,Ot.textColor=It}else{var Gt=N.parse(L[Ve],1,Xt);if(!Gt)return null;var en=Gt.type.kind;if("string"!==en&&"value"!==en&&"null"!==en&&"resolvedImage"!==en)return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Fe=!0,ye.push({content:Gt,scale:null,font:null,textColor:null})}}return new an(ye)},an.prototype.evaluate=function(L){return new Wn(this.sections.map(function(N){var ee=N.content.evaluate(L);return fr(ee)===cn?new qn("",ee,null,null,null):new qn(Er(ee),null,N.scale?N.scale.evaluate(L):null,N.font?N.font.evaluate(L).join(","):null,N.textColor?N.textColor.evaluate(L):null)}))},an.prototype.eachChild=function(L){for(var N=0,ee=this.sections;N<ee.length;N+=1){var ye=ee[N];L(ye.content),ye.scale&&L(ye.scale),ye.font&&L(ye.font),ye.textColor&&L(ye.textColor)}},an.prototype.outputDefined=function(){return!1},an.prototype.serialize=function(){for(var L=["format"],N=0,ee=this.sections;N<ee.length;N+=1){var ye=ee[N];L.push(ye.content.serialize());var Fe={};ye.scale&&(Fe["font-scale"]=ye.scale.serialize()),ye.font&&(Fe["text-font"]=ye.font.serialize()),ye.textColor&&(Fe["text-color"]=ye.textColor.serialize()),L.push(Fe)}return L};var Sn=function(L){this.type=cn,this.input=L};Sn.parse=function(L,N){if(2!==L.length)return N.error("Expected two arguments.");var ee=N.parse(L[1],1,Mt);return ee?new Sn(ee):N.error("No image name provided.")},Sn.prototype.evaluate=function(L){var N=this.input.evaluate(L),ee=Nn.fromString(N);return ee&&L.availableImages&&(ee.available=L.availableImages.indexOf(N)>-1),ee},Sn.prototype.eachChild=function(L){L(this.input)},Sn.prototype.outputDefined=function(){return!1},Sn.prototype.serialize=function(){return["image",this.input.serialize()]};var Ln={"to-boolean":Pt,"to-color":Zt,"to-number":_t,"to-string":Mt},Vn=function(L,N){this.type=L,this.args=N};Vn.parse=function(L,N){if(L.length<2)return N.error("Expected at least one argument.");var ee=L[0];if(("to-boolean"===ee||"to-string"===ee)&&2!==L.length)return N.error("Expected one argument.");for(var ye=Ln[ee],Fe=[],Ve=1;Ve<L.length;Ve++){var $e=N.parse(L[Ve],Ve,Xt);if(!$e)return null;Fe.push($e)}return new Vn(ye,Fe)},Vn.prototype.evaluate=function(L){if("boolean"===this.type.kind)return!!this.args[0].evaluate(L);if("color"===this.type.kind){for(var N,ee,ye=0,Fe=this.args;ye<Fe.length;ye+=1){if(ee=null,(N=Fe[ye].evaluate(L))instanceof In)return N;if("string"==typeof N){var Ve=L.parseColor(N);if(Ve)return Ve}else if(Array.isArray(N)&&!(ee=N.length<3||N.length>4?"Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":Xn(N[0],N[1],N[2],N[3])))return new In(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new mr(ee||"Could not parse color from value '"+("string"==typeof N?N:String(JSON.stringify(N)))+"'")}if("number"===this.type.kind){for(var $e=null,lt=0,gt=this.args;lt<gt.length;lt+=1){if(null===($e=gt[lt].evaluate(L)))return 0;var It=Number($e);if(!isNaN(It))return It}throw new mr("Could not convert "+JSON.stringify($e)+" to number.")}return"formatted"===this.type.kind?Wn.fromString(Er(this.args[0].evaluate(L))):"resolvedImage"===this.type.kind?Nn.fromString(Er(this.args[0].evaluate(L))):Er(this.args[0].evaluate(L))},Vn.prototype.eachChild=function(L){this.args.forEach(L)},Vn.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Vn.prototype.serialize=function(){if("formatted"===this.type.kind)return new an([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Sn(this.args[0]).serialize();var L=["to-"+this.type.kind];return this.eachChild(function(N){L.push(N.serialize())}),L};var cr=["Unknown","Point","LineString","Polygon"],xn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};xn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},xn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?cr[this.feature.type]:this.feature.type:null},xn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},xn.prototype.canonicalID=function(){return this.canonical},xn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},xn.prototype.parseColor=function(L){var N=this._parseColorCache[L];return N||(N=this._parseColorCache[L]=In.parse(L)),N};var Qn=function(L,N,ee,ye){this.name=L,this.type=N,this._evaluate=ee,this.args=ye};Qn.prototype.evaluate=function(L){return this._evaluate(L,this.args)},Qn.prototype.eachChild=function(L){this.args.forEach(L)},Qn.prototype.outputDefined=function(){return!1},Qn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(L){return L.serialize()}))},Qn.parse=function(L,N){var ee,ye=L[0],Fe=Qn.definitions[ye];if(!Fe)return N.error('Unknown expression "'+ye+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ve=Array.isArray(Fe)?Fe[0]:Fe.type,$e=Array.isArray(Fe)?[[Fe[1],Fe[2]]]:Fe.overloads,lt=$e.filter(function(yi){var Xr=yi[0];return!Array.isArray(Xr)||Xr.length===L.length-1}),gt=null,It=0,Ot=lt;It<Ot.length;It+=1){var Gt=Ot[It],en=Gt[0],Yt=Gt[1];gt=new Sr(N.registry,N.path,null,N.scope);for(var mn=[],wn=!1,Bn=1;Bn<L.length;Bn++){var jn=L[Bn],Yn=Array.isArray(en)?en[Bn-1]:en.type,Kn=gt.parse(jn,1+mn.length,Yn);if(!Kn){wn=!0;break}mn.push(Kn)}if(!wn)if(Array.isArray(en)&&en.length!==mn.length)gt.error("Expected "+en.length+" arguments, but found "+mn.length+" instead.");else{for(var sr=0;sr<mn.length;sr++){var pr=Array.isArray(en)?en[sr]:en.type,_r=mn[sr];gt.concat(sr+1).checkSubtype(pr,_r.type)}if(0===gt.errors.length)return new Qn(ye,Ve,Yt,mn)}}if(1===lt.length)(ee=N.errors).push.apply(ee,gt.errors);else{for(var Fr=(lt.length?lt:$e).map(function(yi){return Xr=yi[0],Array.isArray(Xr)?"("+Xr.map(Cn).join(", ")+")":"("+Cn(Xr.type)+"...)";var Xr}).join(" | "),Dr=[],jr=1;jr<L.length;jr++){var Yr=N.parse(L[jr],1+Dr.length);if(!Yr)return null;Dr.push(Cn(Yr.type))}N.error("Expected arguments of type "+Fr+", but found ("+Dr.join(", ")+") instead.")}return null},Qn.register=function(L,N){for(var ee in Qn.definitions=N,N)L[ee]=Qn};var er=function(L,N,ee){this.type=dn,this.locale=ee,this.caseSensitive=L,this.diacriticSensitive=N};er.parse=function(L,N){if(2!==L.length)return N.error("Expected one argument.");var ee=L[1];if("object"!=typeof ee||Array.isArray(ee))return N.error("Collator options argument must be an object.");var ye=N.parse(void 0!==ee["case-sensitive"]&&ee["case-sensitive"],1,Pt);if(!ye)return null;var Fe=N.parse(void 0!==ee["diacritic-sensitive"]&&ee["diacritic-sensitive"],1,Pt);if(!Fe)return null;var Ve=null;return ee.locale&&!(Ve=N.parse(ee.locale,1,Mt))?null:new er(ye,Fe,Ve)},er.prototype.evaluate=function(L){return new _n(this.caseSensitive.evaluate(L),this.diacriticSensitive.evaluate(L),this.locale?this.locale.evaluate(L):null)},er.prototype.eachChild=function(L){L(this.caseSensitive),L(this.diacriticSensitive),this.locale&&L(this.locale)},er.prototype.outputDefined=function(){return!1},er.prototype.serialize=function(){var L={};return L["case-sensitive"]=this.caseSensitive.serialize(),L["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(L.locale=this.locale.serialize()),["collator",L]};var Qt=8192;function zn(L,N){L[0]=Math.min(L[0],N[0]),L[1]=Math.min(L[1],N[1]),L[2]=Math.max(L[2],N[0]),L[3]=Math.max(L[3],N[1])}function zt(L,N){return!(L[0]<=N[0]||L[2]>=N[2]||L[1]<=N[1]||L[3]>=N[3])}function sn(L,N){var ye=(180+L[0])/360,Fe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L[1]*Math.PI/360)))/360,Ve=Math.pow(2,N.z);return[Math.round(ye*Ve*Qt),Math.round(Fe*Ve*Qt)]}function hn(L,N,ee){return N[1]>L[1]!=ee[1]>L[1]&&L[0]<(ee[0]-N[0])*(L[1]-N[1])/(ee[1]-N[1])+N[0]}function Dn(L,N){for(var ee=!1,ye=0,Fe=N.length;ye<Fe;ye++)for(var Ve=N[ye],$e=0,lt=Ve.length;$e<lt-1;$e++){if(void 0,void 0,void 0,void 0,(Gt=(gt=L)[0]-(It=Ve[$e])[0])*(mn=gt[1]-(Ot=Ve[$e+1])[1])-(Yt=gt[0]-Ot[0])*(en=gt[1]-It[1])==0&&Gt*Yt<=0&&en*mn<=0)return!1;hn(L,Ve[$e],Ve[$e+1])&&(ee=!ee)}var gt,It,Ot,Gt,en,Yt,mn;return ee}function Rn(L,N){for(var ee=0;ee<N.length;ee++)if(Dn(L,N[ee]))return!0;return!1}function Hn(L,N,ee,ye){var gt=ye[0]-ee[0],It=ye[1]-ee[1],Ot=(L[0]-ee[0])*It-gt*(L[1]-ee[1]),Gt=(N[0]-ee[0])*It-gt*(N[1]-ee[1]);return Ot>0&&Gt<0||Ot<0&&Gt>0}function Mn(L,N,ee){for(var ye=0,Fe=ee;ye<Fe.length;ye+=1)for(var Ve=Fe[ye],$e=0;$e<Ve.length-1;++$e)if(void 0,void 0,(Gt=[(Ot=Ve[$e+1])[0]-(It=Ve[$e])[0],Ot[1]-It[1]])[0]*(en=[(gt=N)[0]-(lt=L)[0],gt[1]-lt[1]])[1]-Gt[1]*en[0]!=0&&Hn(lt,gt,It,Ot)&&Hn(It,Ot,lt,gt))return!0;var lt,gt,It,Ot,Gt,en;return!1}function un(L,N){for(var ee=0;ee<L.length;++ee)if(!Dn(L[ee],N))return!1;for(var ye=0;ye<L.length-1;++ye)if(Mn(L[ye],L[ye+1],N))return!1;return!0}function fn(L,N){for(var ee=0;ee<N.length;ee++)if(un(L,N[ee]))return!0;return!1}function Tn(L,N,ee){for(var ye=[],Fe=0;Fe<L.length;Fe++){for(var Ve=[],$e=0;$e<L[Fe].length;$e++){var lt=sn(L[Fe][$e],ee);zn(N,lt),Ve.push(lt)}ye.push(Ve)}return ye}function An(L,N,ee){for(var ye=[],Fe=0;Fe<L.length;Fe++){var Ve=Tn(L[Fe],N,ee);ye.push(Ve)}return ye}function Gn(L,N,ee,ye){if(L[0]<ee[0]||L[0]>ee[2]){var Fe=.5*ye,Ve=L[0]-ee[0]>Fe?-ye:ee[0]-L[0]>Fe?ye:0;0===Ve&&(Ve=L[0]-ee[2]>Fe?-ye:ee[2]-L[0]>Fe?ye:0),L[0]+=Ve}zn(N,L)}function Zn(L,N,ee,ye){for(var Fe=Math.pow(2,ye.z)*Qt,Ve=[ye.x*Qt,ye.y*Qt],$e=[],lt=0,gt=L;lt<gt.length;lt+=1)for(var It=0,Ot=gt[lt];It<Ot.length;It+=1){var Gt=Ot[It],en=[Gt.x+Ve[0],Gt.y+Ve[1]];Gn(en,N,ee,Fe),$e.push(en)}return $e}function lr(L,N,ee,ye){for(var Fe=Math.pow(2,ye.z)*Qt,Ve=[ye.x*Qt,ye.y*Qt],$e=[],lt=0,gt=L;lt<gt.length;lt+=1){for(var It=[],Ot=0,Gt=gt[lt];Ot<Gt.length;Ot+=1){var en=Gt[Ot],Yt=[en.x+Ve[0],en.y+Ve[1]];zn(N,Yt),It.push(Yt)}$e.push(It)}if(N[2]-N[0]<=Fe/2){(Yn=N)[0]=Yn[1]=1/0,Yn[2]=Yn[3]=-1/0;for(var mn=0,wn=$e;mn<wn.length;mn+=1)for(var Bn=0,jn=wn[mn];Bn<jn.length;Bn+=1)Gn(jn[Bn],N,ee,Fe)}var Yn;return $e}var nr=function(L,N){this.type=Pt,this.geojson=L,this.geometries=N};function br(L){if(L instanceof Qn&&("get"===L.name&&1===L.args.length||"feature-state"===L.name||"has"===L.name&&1===L.args.length||"properties"===L.name||"geometry-type"===L.name||"id"===L.name||/^filter-/.test(L.name))||L instanceof nr)return!1;var N=!0;return L.eachChild(function(ee){N&&!br(ee)&&(N=!1)}),N}function or(L){if(L instanceof Qn&&"feature-state"===L.name)return!1;var N=!0;return L.eachChild(function(ee){N&&!or(ee)&&(N=!1)}),N}function dr(L,N){if(L instanceof Qn&&N.indexOf(L.name)>=0)return!1;var ee=!0;return L.eachChild(function(ye){ee&&!dr(ye,N)&&(ee=!1)}),ee}nr.parse=function(L,N){if(2!==L.length)return N.error("'within' expression requires exactly one argument, but found "+(L.length-1)+" instead.");if(yr(L[1])){var ee=L[1];if("FeatureCollection"===ee.type)for(var ye=0;ye<ee.features.length;++ye){var Fe=ee.features[ye].geometry.type;if("Polygon"===Fe||"MultiPolygon"===Fe)return new nr(ee,ee.features[ye].geometry)}else if("Feature"===ee.type){var Ve=ee.geometry.type;if("Polygon"===Ve||"MultiPolygon"===Ve)return new nr(ee,ee.geometry)}else if("Polygon"===ee.type||"MultiPolygon"===ee.type)return new nr(ee,ee)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},nr.prototype.evaluate=function(L){if(null!=L.geometry()&&null!=L.canonicalID()){if("Point"===L.geometryType())return function(N,ee){var ye=[1/0,1/0,-1/0,-1/0],Fe=[1/0,1/0,-1/0,-1/0],Ve=N.canonicalID();if("Polygon"===ee.type){var $e=Tn(ee.coordinates,Fe,Ve),lt=Zn(N.geometry(),ye,Fe,Ve);if(!zt(ye,Fe))return!1;for(var gt=0,It=lt;gt<It.length;gt+=1)if(!Dn(It[gt],$e))return!1}if("MultiPolygon"===ee.type){var Ot=An(ee.coordinates,Fe,Ve),Gt=Zn(N.geometry(),ye,Fe,Ve);if(!zt(ye,Fe))return!1;for(var en=0,Yt=Gt;en<Yt.length;en+=1)if(!Rn(Yt[en],Ot))return!1}return!0}(L,this.geometries);if("LineString"===L.geometryType())return function(N,ee){var ye=[1/0,1/0,-1/0,-1/0],Fe=[1/0,1/0,-1/0,-1/0],Ve=N.canonicalID();if("Polygon"===ee.type){var $e=Tn(ee.coordinates,Fe,Ve),lt=lr(N.geometry(),ye,Fe,Ve);if(!zt(ye,Fe))return!1;for(var gt=0,It=lt;gt<It.length;gt+=1)if(!un(It[gt],$e))return!1}if("MultiPolygon"===ee.type){var Ot=An(ee.coordinates,Fe,Ve),Gt=lr(N.geometry(),ye,Fe,Ve);if(!zt(ye,Fe))return!1;for(var en=0,Yt=Gt;en<Yt.length;en+=1)if(!fn(Yt[en],Ot))return!1}return!0}(L,this.geometries)}return!1},nr.prototype.eachChild=function(){},nr.prototype.outputDefined=function(){return!0},nr.prototype.serialize=function(){return["within",this.geojson]};var kr=function(L,N){this.type=N.type,this.name=L,this.boundExpression=N};kr.parse=function(L,N){if(2!==L.length||"string"!=typeof L[1])return N.error("'var' expression requires exactly one string literal argument.");var ee=L[1];return N.scope.has(ee)?new kr(ee,N.scope.get(ee)):N.error('Unknown variable "'+ee+'". Make sure "'+ee+'" has been bound in an enclosing "let" expression before using it.',1)},kr.prototype.evaluate=function(L){return this.boundExpression.evaluate(L)},kr.prototype.eachChild=function(){},kr.prototype.outputDefined=function(){return!1},kr.prototype.serialize=function(){return["var",this.name]};var Sr=function(L,N,ee,ye,Fe){void 0===N&&(N=[]),void 0===ye&&(ye=new wt),void 0===Fe&&(Fe=[]),this.registry=L,this.path=N,this.key=N.map(function(Ve){return"["+Ve+"]"}).join(""),this.scope=ye,this.errors=Fe,this.expectedType=ee};function Pr(L){if(L instanceof kr)return Pr(L.boundExpression);if(L instanceof Qn&&"error"===L.name||L instanceof er||L instanceof nr)return!1;var N=L instanceof Vn||L instanceof Jt,ee=!0;return L.eachChild(function(ye){ee=N?ee&&Pr(ye):ee&&ye instanceof gr}),!!ee&&br(L)&&dr(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function rr(L,N){for(var ee,Fe=L.length-1,Ve=0,$e=Fe,lt=0;Ve<=$e;)if((ee=L[lt=Math.floor((Ve+$e)/2)])<=N){if(lt===Fe||N<L[lt+1])return lt;Ve=lt+1}else{if(!(ee>N))throw new mr("Input is not a number.");$e=lt-1}return 0}Sr.prototype.parse=function(L,N,ee,ye,Fe){return void 0===Fe&&(Fe={}),N?this.concat(N,ee,ye)._parse(L,Fe):this._parse(L,Fe)},Sr.prototype._parse=function(L,N){function ee(It,Ot,Gt){return"assert"===Gt?new Jt(Ot,[It]):"coerce"===Gt?new Vn(Ot,[It]):It}if(null!==L&&"string"!=typeof L&&"boolean"!=typeof L&&"number"!=typeof L||(L=["literal",L]),Array.isArray(L)){if(0===L.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ye=L[0];if("string"!=typeof ye)return this.error("Expression name must be a string, but found "+typeof ye+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Fe=this.registry[ye];if(Fe){var Ve=Fe.parse(L,this);if(!Ve)return null;if(this.expectedType){var $e=this.expectedType,lt=Ve.type;if("string"!==$e.kind&&"number"!==$e.kind&&"boolean"!==$e.kind&&"object"!==$e.kind&&"array"!==$e.kind||"value"!==lt.kind)if("color"!==$e.kind&&"formatted"!==$e.kind&&"resolvedImage"!==$e.kind||"value"!==lt.kind&&"string"!==lt.kind){if(this.checkSubtype($e,lt))return null}else Ve=ee(Ve,$e,N.typeAnnotation||"coerce");else Ve=ee(Ve,$e,N.typeAnnotation||"assert")}if(!(Ve instanceof gr)&&"resolvedImage"!==Ve.type.kind&&Pr(Ve)){var gt=new xn;try{Ve=new gr(Ve.type,Ve.evaluate(gt))}catch(It){return this.error(It.message),null}}return Ve}return this.error('Unknown expression "'+ye+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===L?"'undefined' value invalid. Use null instead.":"object"==typeof L?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof L+" instead.")},Sr.prototype.concat=function(L,N,ee){var ye="number"==typeof L?this.path.concat(L):this.path,Fe=ee?this.scope.concat(ee):this.scope;return new Sr(this.registry,ye,N||null,Fe,this.errors)},Sr.prototype.error=function(L){for(var N=[],ee=arguments.length-1;ee-- >0;)N[ee]=arguments[ee+1];var ye=""+this.key+N.map(function(Fe){return"["+Fe+"]"}).join("");this.errors.push(new Et(ye,L))},Sr.prototype.checkSubtype=function(L,N){var ee=En(L,N);return ee&&this.error(ee),ee};var Zr=function(L,N,ee){this.type=L,this.input=N,this.labels=[],this.outputs=[];for(var ye=0,Fe=ee;ye<Fe.length;ye+=1){var Ve=Fe[ye],lt=Ve[1];this.labels.push(Ve[0]),this.outputs.push(lt)}};function ar(L,N,ee){return L*(1-ee)+N*ee}Zr.parse=function(L,N){if(L.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if((L.length-1)%2!=0)return N.error("Expected an even number of arguments.");var ee=N.parse(L[1],1,_t);if(!ee)return null;var ye=[],Fe=null;N.expectedType&&"value"!==N.expectedType.kind&&(Fe=N.expectedType);for(var Ve=1;Ve<L.length;Ve+=2){var $e=1===Ve?-1/0:L[Ve],lt=L[Ve+1],gt=Ve,It=Ve+1;if("number"!=typeof $e)return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',gt);if(ye.length&&ye[ye.length-1][0]>=$e)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',gt);var Ot=N.parse(lt,It,Fe);if(!Ot)return null;Fe=Fe||Ot.type,ye.push([$e,Ot])}return new Zr(Fe,ee,ye)},Zr.prototype.evaluate=function(L){var N=this.labels,ee=this.outputs;if(1===N.length)return ee[0].evaluate(L);var ye=this.input.evaluate(L);if(ye<=N[0])return ee[0].evaluate(L);var Fe=N.length;return ye>=N[Fe-1]?ee[Fe-1].evaluate(L):ee[rr(N,ye)].evaluate(L)},Zr.prototype.eachChild=function(L){L(this.input);for(var N=0,ee=this.outputs;N<ee.length;N+=1)L(ee[N])},Zr.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})},Zr.prototype.serialize=function(){for(var L=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&L.push(this.labels[N]),L.push(this.outputs[N].serialize());return L};var Nr=Object.freeze({__proto__:null,number:ar,color:function(L,N,ee){return new In(ar(L.r,N.r,ee),ar(L.g,N.g,ee),ar(L.b,N.b,ee),ar(L.a,N.a,ee))},array:function(L,N,ee){return L.map(function(ye,Fe){return ar(ye,N[Fe],ee)})}}),so=4/29,lo=6/29,Qi=3*lo*lo,Co=lo*lo*lo,Rs=Math.PI/180,Qr=180/Math.PI;function _s(L){return L>Co?Math.pow(L,.3333333333333333):L/Qi+so}function Iu(L){return L>lo?L*L*L:Qi*(L-so)}function Xo(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,.4166666666666667)-.055)}function jl(L){return(L/=255)<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function xc(L){var N=jl(L.r),ee=jl(L.g),ye=jl(L.b),Fe=_s((.4124564*N+.3575761*ee+.1804375*ye)/.95047),Ve=_s((.2126729*N+.7151522*ee+.072175*ye)/1);return{l:116*Ve-16,a:500*(Fe-Ve),b:200*(Ve-_s((.0193339*N+.119192*ee+.9503041*ye)/1.08883)),alpha:L.a}}function Bi(L){var N=(L.l+16)/116,ee=isNaN(L.a)?N:N+L.a/500,ye=isNaN(L.b)?N:N-L.b/200;return N=1*Iu(N),ee=.95047*Iu(ee),ye=1.08883*Iu(ye),new In(Xo(3.2404542*ee-1.5371385*N-.4985314*ye),Xo(-.969266*ee+1.8760108*N+.041556*ye),Xo(.0556434*ee-.2040259*N+1.0572252*ye),L.alpha)}function Wc(L,N,ee){var ye=N-L;return L+ee*(ye>180||ye<-180?ye-360*Math.round(ye/360):ye)}var Ul={forward:xc,reverse:Bi,interpolate:function(L,N,ee){return{l:ar(L.l,N.l,ee),a:ar(L.a,N.a,ee),b:ar(L.b,N.b,ee),alpha:ar(L.alpha,N.alpha,ee)}}},Vl={forward:function(L){var N=xc(L),ee=N.l,ye=N.a,Fe=N.b,Ve=Math.atan2(Fe,ye)*Qr;return{h:Ve<0?Ve+360:Ve,c:Math.sqrt(ye*ye+Fe*Fe),l:ee,alpha:L.a}},reverse:function(L){var N=L.h*Rs,ee=L.c;return Bi({l:L.l,a:Math.cos(N)*ee,b:Math.sin(N)*ee,alpha:L.alpha})},interpolate:function(L,N,ee){return{h:Wc(L.h,N.h,ee),c:ar(L.c,N.c,ee),l:ar(L.l,N.l,ee),alpha:ar(L.alpha,N.alpha,ee)}}},ja=Object.freeze({__proto__:null,lab:Ul,hcl:Vl}),Ro=function(L,N,ee,ye,Fe){this.type=L,this.operator=N,this.interpolation=ee,this.input=ye,this.labels=[],this.outputs=[];for(var Ve=0,$e=Fe;Ve<$e.length;Ve+=1){var lt=$e[Ve],It=lt[1];this.labels.push(lt[0]),this.outputs.push(It)}};function cl(L,N,ee,ye){var Fe=ye-ee,Ve=L-ee;return 0===Fe?0:1===N?Ve/Fe:(Math.pow(N,Ve)-1)/(Math.pow(N,Fe)-1)}Ro.interpolationFactor=function(L,N,ee,ye){var Fe=0;if("exponential"===L.name)Fe=cl(N,L.base,ee,ye);else if("linear"===L.name)Fe=cl(N,1,ee,ye);else if("cubic-bezier"===L.name){var Ve=L.controlPoints;Fe=new v(Ve[0],Ve[1],Ve[2],Ve[3]).solve(cl(N,1,ee,ye))}return Fe},Ro.parse=function(L,N){var ee=L[0],ye=L[1],Fe=L[2],Ve=L.slice(3);if(!Array.isArray(ye)||0===ye.length)return N.error("Expected an interpolation type expression.",1);if("linear"===ye[0])ye={name:"linear"};else if("exponential"===ye[0]){var $e=ye[1];if("number"!=typeof $e)return N.error("Exponential interpolation requires a numeric base.",1,1);ye={name:"exponential",base:$e}}else{if("cubic-bezier"!==ye[0])return N.error("Unknown interpolation type "+String(ye[0]),1,0);var lt=ye.slice(1);if(4!==lt.length||lt.some(function(Bn){return"number"!=typeof Bn||Bn<0||Bn>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ye={name:"cubic-bezier",controlPoints:lt}}if(L.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if((L.length-1)%2!=0)return N.error("Expected an even number of arguments.");if(!(Fe=N.parse(Fe,2,_t)))return null;var gt=[],It=null;"interpolate-hcl"===ee||"interpolate-lab"===ee?It=Zt:N.expectedType&&"value"!==N.expectedType.kind&&(It=N.expectedType);for(var Ot=0;Ot<Ve.length;Ot+=2){var Gt=Ve[Ot],en=Ve[Ot+1],Yt=Ot+3,mn=Ot+4;if("number"!=typeof Gt)return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Yt);if(gt.length&&gt[gt.length-1][0]>=Gt)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Yt);var wn=N.parse(en,mn,It);if(!wn)return null;It=It||wn.type,gt.push([Gt,wn])}return"number"===It.kind||"color"===It.kind||"array"===It.kind&&"number"===It.itemType.kind&&"number"==typeof It.N?new Ro(It,ee,ye,Fe,gt):N.error("Type "+Cn(It)+" is not interpolatable.")},Ro.prototype.evaluate=function(L){var N=this.labels,ee=this.outputs;if(1===N.length)return ee[0].evaluate(L);var ye=this.input.evaluate(L);if(ye<=N[0])return ee[0].evaluate(L);var Fe=N.length;if(ye>=N[Fe-1])return ee[Fe-1].evaluate(L);var Ve=rr(N,ye),gt=Ro.interpolationFactor(this.interpolation,ye,N[Ve],N[Ve+1]),It=ee[Ve].evaluate(L),Ot=ee[Ve+1].evaluate(L);return"interpolate"===this.operator?Nr[this.type.kind.toLowerCase()](It,Ot,gt):"interpolate-hcl"===this.operator?Vl.reverse(Vl.interpolate(Vl.forward(It),Vl.forward(Ot),gt)):Ul.reverse(Ul.interpolate(Ul.forward(It),Ul.forward(Ot),gt))},Ro.prototype.eachChild=function(L){L(this.input);for(var N=0,ee=this.outputs;N<ee.length;N+=1)L(ee[N])},Ro.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})},Ro.prototype.serialize=function(){var L;L="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,L,this.input.serialize()],ee=0;ee<this.labels.length;ee++)N.push(this.labels[ee],this.outputs[ee].serialize());return N};var Wi=function(L,N){this.type=L,this.args=N};Wi.parse=function(L,N){if(L.length<2)return N.error("Expectected at least one argument.");var ee=null,ye=N.expectedType;ye&&"value"!==ye.kind&&(ee=ye);for(var Fe=[],Ve=0,$e=L.slice(1);Ve<$e.length;Ve+=1){var gt=N.parse($e[Ve],1+Fe.length,ee,void 0,{typeAnnotation:"omit"});if(!gt)return null;ee=ee||gt.type,Fe.push(gt)}var It=ye&&Fe.some(function(Ot){return En(ye,Ot.type)});return new Wi(It?Xt:ee,Fe)},Wi.prototype.evaluate=function(L){for(var N,ee=null,ye=0,Fe=0,Ve=this.args;Fe<Ve.length&&(ye++,(ee=Ve[Fe].evaluate(L))&&ee instanceof Nn&&!ee.available&&(N||(N=ee.name),ee=null,ye===this.args.length&&(ee=N)),null===ee);Fe+=1);return ee},Wi.prototype.eachChild=function(L){this.args.forEach(L)},Wi.prototype.outputDefined=function(){return this.args.every(function(L){return L.outputDefined()})},Wi.prototype.serialize=function(){var L=["coalesce"];return this.eachChild(function(N){L.push(N.serialize())}),L};var Fs=function(L,N){this.type=N.type,this.bindings=[].concat(L),this.result=N};Fs.prototype.evaluate=function(L){return this.result.evaluate(L)},Fs.prototype.eachChild=function(L){for(var N=0,ee=this.bindings;N<ee.length;N+=1)L(ee[N][1]);L(this.result)},Fs.parse=function(L,N){if(L.length<4)return N.error("Expected at least 3 arguments, but found "+(L.length-1)+" instead.");for(var ee=[],ye=1;ye<L.length-1;ye+=2){var Fe=L[ye];if("string"!=typeof Fe)return N.error("Expected string, but found "+typeof Fe+" instead.",ye);if(/[^a-zA-Z0-9_]/.test(Fe))return N.error("Variable names must contain only alphanumeric characters or '_'.",ye);var Ve=N.parse(L[ye+1],ye+1);if(!Ve)return null;ee.push([Fe,Ve])}var $e=N.parse(L[L.length-1],L.length-1,N.expectedType,ee);return $e?new Fs(ee,$e):null},Fs.prototype.outputDefined=function(){return this.result.outputDefined()},Fs.prototype.serialize=function(){for(var L=["let"],N=0,ee=this.bindings;N<ee.length;N+=1){var ye=ee[N];L.push(ye[0],ye[1].serialize())}return L.push(this.result.serialize()),L};var Ka=function(L,N,ee){this.type=L,this.index=N,this.input=ee};Ka.parse=function(L,N){if(3!==L.length)return N.error("Expected 2 arguments, but found "+(L.length-1)+" instead.");var ee=N.parse(L[1],1,_t),ye=N.parse(L[2],2,tn(N.expectedType||Xt));return ee&&ye?new Ka(ye.type.itemType,ee,ye):null},Ka.prototype.evaluate=function(L){var N=this.index.evaluate(L),ee=this.input.evaluate(L);if(N<0)throw new mr("Array index out of bounds: "+N+" < 0.");if(N>=ee.length)throw new mr("Array index out of bounds: "+N+" > "+(ee.length-1)+".");if(N!==Math.floor(N))throw new mr("Array index must be an integer, but found "+N+" instead.");return ee[N]},Ka.prototype.eachChild=function(L){L(this.index),L(this.input)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ns=function(L,N){this.type=Pt,this.needle=L,this.haystack=N};Ns.parse=function(L,N){if(3!==L.length)return N.error("Expected 2 arguments, but found "+(L.length-1)+" instead.");var ee=N.parse(L[1],1,Xt),ye=N.parse(L[2],2,Xt);return ee&&ye?rn(ee.type,[Pt,Mt,_t,Nt,Xt])?new Ns(ee,ye):N.error("Expected first argument to be of type boolean, string, number or null, but found "+Cn(ee.type)+" instead"):null},Ns.prototype.evaluate=function(L){var N=this.needle.evaluate(L),ee=this.haystack.evaluate(L);if(!ee)return!1;if(!yn(N,["boolean","string","number","null"]))throw new mr("Expected first argument to be of type boolean, string, number or null, but found "+Cn(fr(N))+" instead.");if(!yn(ee,["string","array"]))throw new mr("Expected second argument to be of type array or string, but found "+Cn(fr(ee))+" instead.");return ee.indexOf(N)>=0},Ns.prototype.eachChild=function(L){L(this.needle),L(this.haystack)},Ns.prototype.outputDefined=function(){return!0},Ns.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ea=function(L,N,ee){this.type=_t,this.needle=L,this.haystack=N,this.fromIndex=ee};Ea.parse=function(L,N){if(L.length<=2||L.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(L.length-1)+" instead.");var ee=N.parse(L[1],1,Xt),ye=N.parse(L[2],2,Xt);if(!ee||!ye)return null;if(!rn(ee.type,[Pt,Mt,_t,Nt,Xt]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+Cn(ee.type)+" instead");if(4===L.length){var Fe=N.parse(L[3],3,_t);return Fe?new Ea(ee,ye,Fe):null}return new Ea(ee,ye)},Ea.prototype.evaluate=function(L){var N=this.needle.evaluate(L),ee=this.haystack.evaluate(L);if(!yn(N,["boolean","string","number","null"]))throw new mr("Expected first argument to be of type boolean, string, number or null, but found "+Cn(fr(N))+" instead.");if(!yn(ee,["string","array"]))throw new mr("Expected second argument to be of type array or string, but found "+Cn(fr(ee))+" instead.");if(this.fromIndex){var ye=this.fromIndex.evaluate(L);return ee.indexOf(N,ye)}return ee.indexOf(N)},Ea.prototype.eachChild=function(L){L(this.needle),L(this.haystack),this.fromIndex&&L(this.fromIndex)},Ea.prototype.outputDefined=function(){return!1},Ea.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var L=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),L]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fl=function(L,N,ee,ye,Fe,Ve){this.inputType=L,this.type=N,this.input=ee,this.cases=ye,this.outputs=Fe,this.otherwise=Ve};fl.parse=function(L,N){if(L.length<5)return N.error("Expected at least 4 arguments, but found only "+(L.length-1)+".");if(L.length%2!=1)return N.error("Expected an even number of arguments.");var ee,ye;N.expectedType&&"value"!==N.expectedType.kind&&(ye=N.expectedType);for(var Fe={},Ve=[],$e=2;$e<L.length-1;$e+=2){var lt=L[$e],gt=L[$e+1];Array.isArray(lt)||(lt=[lt]);var It=N.concat($e);if(0===lt.length)return It.error("Expected at least one branch label.");for(var Ot=0,Gt=lt;Ot<Gt.length;Ot+=1){var en=Gt[Ot];if("number"!=typeof en&&"string"!=typeof en)return It.error("Branch labels must be numbers or strings.");if("number"==typeof en&&Math.abs(en)>Number.MAX_SAFE_INTEGER)return It.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof en&&Math.floor(en)!==en)return It.error("Numeric branch labels must be integer values.");if(ee){if(It.checkSubtype(ee,fr(en)))return null}else ee=fr(en);if(void 0!==Fe[String(en)])return It.error("Branch labels must be unique.");Fe[String(en)]=Ve.length}var Yt=N.parse(gt,$e,ye);if(!Yt)return null;ye=ye||Yt.type,Ve.push(Yt)}var mn=N.parse(L[1],1,Xt);if(!mn)return null;var wn=N.parse(L[L.length-1],L.length-1,ye);return wn?"value"!==mn.type.kind&&N.concat(1).checkSubtype(ee,mn.type)?null:new fl(ee,ye,mn,Fe,Ve,wn):null},fl.prototype.evaluate=function(L){var N=this.input.evaluate(L);return(fr(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise).evaluate(L)},fl.prototype.eachChild=function(L){L(this.input),this.outputs.forEach(L),L(this.otherwise)},fl.prototype.outputDefined=function(){return this.outputs.every(function(L){return L.outputDefined()})&&this.otherwise.outputDefined()},fl.prototype.serialize=function(){for(var L=this,N=["match",this.input.serialize()],ee=[],ye={},Fe=0,Ve=Object.keys(this.cases).sort();Fe<Ve.length;Fe+=1){var $e=Ve[Fe];void 0===(Gt=ye[this.cases[$e]])?(ye[this.cases[$e]]=ee.length,ee.push([this.cases[$e],[$e]])):ee[Gt][1].push($e)}for(var lt=function(Yt){return"number"===L.inputType.kind?Number(Yt):Yt},gt=0,It=ee;gt<It.length;gt+=1){var Ot=It[gt],Gt=Ot[0],en=Ot[1];N.push(1===en.length?lt(en[0]):en.map(lt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Ca=function(L,N,ee){this.type=L,this.branches=N,this.otherwise=ee};Ca.parse=function(L,N){if(L.length<4)return N.error("Expected at least 3 arguments, but found only "+(L.length-1)+".");if(L.length%2!=0)return N.error("Expected an odd number of arguments.");var ee;N.expectedType&&"value"!==N.expectedType.kind&&(ee=N.expectedType);for(var ye=[],Fe=1;Fe<L.length-1;Fe+=2){var Ve=N.parse(L[Fe],Fe,Pt);if(!Ve)return null;var $e=N.parse(L[Fe+1],Fe+1,ee);if(!$e)return null;ye.push([Ve,$e]),ee=ee||$e.type}var lt=N.parse(L[L.length-1],L.length-1,ee);return lt?new Ca(ee,ye,lt):null},Ca.prototype.evaluate=function(L){for(var N=0,ee=this.branches;N<ee.length;N+=1){var ye=ee[N],Ve=ye[1];if(ye[0].evaluate(L))return Ve.evaluate(L)}return this.otherwise.evaluate(L)},Ca.prototype.eachChild=function(L){for(var N=0,ee=this.branches;N<ee.length;N+=1){var ye=ee[N],Ve=ye[1];L(ye[0]),L(Ve)}L(this.otherwise)},Ca.prototype.outputDefined=function(){return this.branches.every(function(L){return L[1].outputDefined()})&&this.otherwise.outputDefined()},Ca.prototype.serialize=function(){var L=["case"];return this.eachChild(function(N){L.push(N.serialize())}),L};var Xs=function(L,N,ee,ye){this.type=L,this.input=N,this.beginIndex=ee,this.endIndex=ye};function Br(L,N){return"=="===L||"!="===L?"boolean"===N.kind||"string"===N.kind||"number"===N.kind||"null"===N.kind||"value"===N.kind:"string"===N.kind||"number"===N.kind||"value"===N.kind}function Zu(L,N,ee,ye){return 0===ye.compare(N,ee)}function Vr(L,N,ee){var ye="=="!==L&&"!="!==L;return function(){function Fe(Ve,$e,lt){this.type=Pt,this.lhs=Ve,this.rhs=$e,this.collator=lt,this.hasUntypedArgument="value"===Ve.type.kind||"value"===$e.type.kind}return Fe.parse=function(Ve,$e){if(3!==Ve.length&&4!==Ve.length)return $e.error("Expected two or three arguments.");var lt=Ve[0],gt=$e.parse(Ve[1],1,Xt);if(!gt)return null;if(!Br(lt,gt.type))return $e.concat(1).error('"'+lt+"\" comparisons are not supported for type '"+Cn(gt.type)+"'.");var It=$e.parse(Ve[2],2,Xt);if(!It)return null;if(!Br(lt,It.type))return $e.concat(2).error('"'+lt+"\" comparisons are not supported for type '"+Cn(It.type)+"'.");if(gt.type.kind!==It.type.kind&&"value"!==gt.type.kind&&"value"!==It.type.kind)return $e.error("Cannot compare types '"+Cn(gt.type)+"' and '"+Cn(It.type)+"'.");ye&&("value"===gt.type.kind&&"value"!==It.type.kind?gt=new Jt(It.type,[gt]):"value"!==gt.type.kind&&"value"===It.type.kind&&(It=new Jt(gt.type,[It])));var Ot=null;if(4===Ve.length){if("string"!==gt.type.kind&&"string"!==It.type.kind&&"value"!==gt.type.kind&&"value"!==It.type.kind)return $e.error("Cannot use collator to compare non-string types.");if(!(Ot=$e.parse(Ve[3],3,dn)))return null}return new Fe(gt,It,Ot)},Fe.prototype.evaluate=function(Ve){var $e=this.lhs.evaluate(Ve),lt=this.rhs.evaluate(Ve);if(ye&&this.hasUntypedArgument){var gt=fr($e),It=fr(lt);if(gt.kind!==It.kind||"string"!==gt.kind&&"number"!==gt.kind)throw new mr('Expected arguments for "'+L+'" to be (string, string) or (number, number), but found ('+gt.kind+", "+It.kind+") instead.")}if(this.collator&&!ye&&this.hasUntypedArgument){var Ot=fr($e),Gt=fr(lt);if("string"!==Ot.kind||"string"!==Gt.kind)return N(Ve,$e,lt)}return this.collator?ee(Ve,$e,lt,this.collator.evaluate(Ve)):N(Ve,$e,lt)},Fe.prototype.eachChild=function(Ve){Ve(this.lhs),Ve(this.rhs),this.collator&&Ve(this.collator)},Fe.prototype.outputDefined=function(){return!0},Fe.prototype.serialize=function(){var Ve=[L];return this.eachChild(function($e){Ve.push($e.serialize())}),Ve},Fe}()}Xs.parse=function(L,N){if(L.length<=2||L.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(L.length-1)+" instead.");var ee=N.parse(L[1],1,Xt),ye=N.parse(L[2],2,_t);if(!ee||!ye)return null;if(!rn(ee.type,[tn(Xt),Mt,Xt]))return N.error("Expected first argument to be of type array or string, but found "+Cn(ee.type)+" instead");if(4===L.length){var Fe=N.parse(L[3],3,_t);return Fe?new Xs(ee.type,ee,ye,Fe):null}return new Xs(ee.type,ee,ye)},Xs.prototype.evaluate=function(L){var N=this.input.evaluate(L),ee=this.beginIndex.evaluate(L);if(!yn(N,["string","array"]))throw new mr("Expected first argument to be of type array or string, but found "+Cn(fr(N))+" instead.");if(this.endIndex){var ye=this.endIndex.evaluate(L);return N.slice(ee,ye)}return N.slice(ee)},Xs.prototype.eachChild=function(L){L(this.input),L(this.beginIndex),this.endIndex&&L(this.endIndex)},Xs.prototype.outputDefined=function(){return!1},Xs.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var L=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),L]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var su=Vr("==",function(L,N,ee){return N===ee},Zu),lu=Vr("!=",function(L,N,ee){return N!==ee},function(L,N,ee,ye){return!Zu(0,N,ee,ye)}),Hl=Vr("<",function(L,N,ee){return N<ee},function(L,N,ee,ye){return ye.compare(N,ee)<0}),Yu=Vr(">",function(L,N,ee){return N>ee},function(L,N,ee,ye){return ye.compare(N,ee)>0}),bc=Vr("<=",function(L,N,ee){return N<=ee},function(L,N,ee,ye){return ye.compare(N,ee)<=0}),ql=Vr(">=",function(L,N,ee){return N>=ee},function(L,N,ee,ye){return ye.compare(N,ee)>=0}),Da=function(L,N,ee,ye,Fe){this.type=Mt,this.number=L,this.locale=N,this.currency=ee,this.minFractionDigits=ye,this.maxFractionDigits=Fe};Da.parse=function(L,N){if(3!==L.length)return N.error("Expected two arguments.");var ee=N.parse(L[1],1,_t);if(!ee)return null;var ye=L[2];if("object"!=typeof ye||Array.isArray(ye))return N.error("NumberFormat options argument must be an object.");var Fe=null;if(ye.locale&&!(Fe=N.parse(ye.locale,1,Mt)))return null;var Ve=null;if(ye.currency&&!(Ve=N.parse(ye.currency,1,Mt)))return null;var $e=null;if(ye["min-fraction-digits"]&&!($e=N.parse(ye["min-fraction-digits"],1,_t)))return null;var lt=null;return ye["max-fraction-digits"]&&!(lt=N.parse(ye["max-fraction-digits"],1,_t))?null:new Da(ee,Fe,Ve,$e,lt)},Da.prototype.evaluate=function(L){return new Intl.NumberFormat(this.locale?this.locale.evaluate(L):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(L):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(L):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(L):void 0}).format(this.number.evaluate(L))},Da.prototype.eachChild=function(L){L(this.number),this.locale&&L(this.locale),this.currency&&L(this.currency),this.minFractionDigits&&L(this.minFractionDigits),this.maxFractionDigits&&L(this.maxFractionDigits)},Da.prototype.outputDefined=function(){return!1},Da.prototype.serialize=function(){var L={};return this.locale&&(L.locale=this.locale.serialize()),this.currency&&(L.currency=this.currency.serialize()),this.minFractionDigits&&(L["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(L["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),L]};var Ia=function(L){this.type=_t,this.input=L};Ia.parse=function(L,N){if(2!==L.length)return N.error("Expected 1 argument, but found "+(L.length-1)+" instead.");var ee=N.parse(L[1],1);return ee?"array"!==ee.type.kind&&"string"!==ee.type.kind&&"value"!==ee.type.kind?N.error("Expected argument of type string or array, but found "+Cn(ee.type)+" instead."):new Ia(ee):null},Ia.prototype.evaluate=function(L){var N=this.input.evaluate(L);if("string"==typeof N||Array.isArray(N))return N.length;throw new mr("Expected value to be of type string or array, but found "+Cn(fr(N))+" instead.")},Ia.prototype.eachChild=function(L){L(this.input)},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){var L=["length"];return this.eachChild(function(N){L.push(N.serialize())}),L};var oa={"==":su,"!=":lu,">":Yu,"<":Hl,">=":ql,"<=":bc,array:Jt,at:Ka,boolean:Jt,case:Ca,coalesce:Wi,collator:er,format:an,image:Sn,in:Ns,"index-of":Ea,interpolate:Ro,"interpolate-hcl":Ro,"interpolate-lab":Ro,length:Ia,let:Fs,literal:gr,match:fl,number:Jt,"number-format":Da,object:Jt,slice:Xs,step:Zr,string:Jt,"to-boolean":Vn,"to-color":Vn,"to-number":Vn,"to-string":Vn,var:kr,within:nr};function Ja(L,N){var ee=N[0],ye=N[1],Fe=N[2],Ve=N[3];ee=ee.evaluate(L),ye=ye.evaluate(L),Fe=Fe.evaluate(L);var $e=Ve?Ve.evaluate(L):1,lt=Xn(ee,ye,Fe,$e);if(lt)throw new mr(lt);return new In(ee/255*$e,ye/255*$e,Fe/255*$e,$e)}function Vi(L,N){return L in N}function Gl(L,N){var ee=N[L];return void 0===ee?null:ee}function Ua(L){return{type:L}}function Ks(L){return{result:"success",value:L}}function ws(L){return{result:"error",value:L}}function ha(L){return"data-driven"===L["property-type"]||"cross-faded-data-driven"===L["property-type"]}function Wl(L){return!!L.expression&&L.expression.parameters.indexOf("zoom")>-1}function Js(L){return!!L.expression&&L.expression.interpolated}function no(L){return L instanceof Number?"number":L instanceof String?"string":L instanceof Boolean?"boolean":Array.isArray(L)?"array":null===L?"null":typeof L}function Qa(L){return"object"==typeof L&&null!==L&&!Array.isArray(L)}function Zl(L){return L}function es(L,N){var ee,ye,Fe,Ve="color"===N.type,$e=L.stops&&"object"==typeof L.stops[0][0],gt=$e||!($e||void 0!==L.property),It=L.type||(Js(N)?"exponential":"interval");if(Ve&&((L=ht({},L)).stops&&(L.stops=L.stops.map(function(Dr){return[Dr[0],In.parse(Dr[1])]})),L.default=In.parse(L.default?L.default:N.default)),L.colorSpace&&"rgb"!==L.colorSpace&&!ja[L.colorSpace])throw new Error("Unknown color space: "+L.colorSpace);if("exponential"===It)ee=wc;else if("interval"===It)ee=uu;else if("categorical"===It){ee=_c,ye=Object.create(null);for(var Ot=0,Gt=L.stops;Ot<Gt.length;Ot+=1){var en=Gt[Ot];ye[en[0]]=en[1]}Fe=typeof L.stops[0][0]}else{if("identity"!==It)throw new Error('Unknown function type "'+It+'"');ee=$u}if($e){for(var Yt={},mn=[],wn=0;wn<L.stops.length;wn++){var Bn=L.stops[wn],jn=Bn[0].zoom;void 0===Yt[jn]&&(Yt[jn]={zoom:jn,type:L.type,property:L.property,default:L.default,stops:[]},mn.push(jn)),Yt[jn].stops.push([Bn[0].value,Bn[1]])}for(var Yn=[],Kn=0,sr=mn;Kn<sr.length;Kn+=1){var pr=sr[Kn];Yn.push([Yt[pr].zoom,es(Yt[pr],N)])}var _r={name:"linear"};return{kind:"composite",interpolationType:_r,interpolationFactor:Ro.interpolationFactor.bind(void 0,_r),zoomStops:Yn.map(function(Dr){return Dr[0]}),evaluate:function(Dr,jr){var Yr=Dr.zoom;return wc({stops:Yn,base:L.base},N,Yr).evaluate(Yr,jr)}}}if(gt){var Fr="exponential"===It?{name:"exponential",base:void 0!==L.base?L.base:1}:null;return{kind:"camera",interpolationType:Fr,interpolationFactor:Ro.interpolationFactor.bind(void 0,Fr),zoomStops:L.stops.map(function(Dr){return Dr[0]}),evaluate:function(Dr){return ee(L,N,Dr.zoom,ye,Fe)}}}return{kind:"source",evaluate:function(Dr,jr){var Yr=jr&&jr.properties?jr.properties[L.property]:void 0;return void 0===Yr?Ts(L.default,N.default):ee(L,N,Yr,ye,Fe)}}}function Ts(L,N,ee){return void 0!==L?L:void 0!==N?N:void 0!==ee?ee:void 0}function _c(L,N,ee,ye,Fe){return Ts(typeof ee===Fe?ye[ee]:void 0,L.default,N.default)}function uu(L,N,ee){if("number"!==no(ee))return Ts(L.default,N.default);var ye=L.stops.length;if(1===ye||ee<=L.stops[0][0])return L.stops[0][1];if(ee>=L.stops[ye-1][0])return L.stops[ye-1][1];var Fe=rr(L.stops.map(function(Ve){return Ve[0]}),ee);return L.stops[Fe][1]}function wc(L,N,ee){var ye=void 0!==L.base?L.base:1;if("number"!==no(ee))return Ts(L.default,N.default);var Fe=L.stops.length;if(1===Fe||ee<=L.stops[0][0])return L.stops[0][1];if(ee>=L.stops[Fe-1][0])return L.stops[Fe-1][1];var en,Yt,wn,Bn,Ve=rr(L.stops.map(function(Gt){return Gt[0]}),ee),$e=(en=ye,Bn=ee-(Yt=L.stops[Ve][0]),0==(wn=L.stops[Ve+1][0]-Yt)?0:1===en?Bn/wn:(Math.pow(en,Bn)-1)/(Math.pow(en,wn)-1)),lt=L.stops[Ve][1],gt=L.stops[Ve+1][1],It=Nr[N.type]||Zl;if(L.colorSpace&&"rgb"!==L.colorSpace){var Ot=ja[L.colorSpace];It=function(Gt,en){return Ot.reverse(Ot.interpolate(Ot.forward(Gt),Ot.forward(en),$e))}}return"function"==typeof lt.evaluate?{evaluate:function(){for(var Gt=[],en=arguments.length;en--;)Gt[en]=arguments[en];var Yt=lt.evaluate.apply(void 0,Gt),mn=gt.evaluate.apply(void 0,Gt);if(void 0!==Yt&&void 0!==mn)return It(Yt,mn,$e)}}:It(lt,gt,$e)}function $u(L,N,ee){return"color"===N.type?ee=In.parse(ee):"formatted"===N.type?ee=Wn.fromString(ee.toString()):"resolvedImage"===N.type?ee=Nn.fromString(ee.toString()):no(ee)===N.type||"enum"===N.type&&N.values[ee]||(ee=void 0),Ts(ee,L.default,N.default)}Qn.register(oa,{error:[{kind:"error"},[Mt],function(L,N){throw new mr(N[0].evaluate(L))}],typeof:[Mt,[Xt],function(L,N){return Cn(fr(N[0].evaluate(L)))}],"to-rgba":[tn(_t,4),[Zt],function(L,N){return N[0].evaluate(L).toArray()}],rgb:[Zt,[_t,_t,_t],Ja],rgba:[Zt,[_t,_t,_t,_t],Ja],has:{type:Pt,overloads:[[[Mt],function(L,N){return Vi(N[0].evaluate(L),L.properties())}],[[Mt,$t],function(L,N){var ye=N[1];return Vi(N[0].evaluate(L),ye.evaluate(L))}]]},get:{type:Xt,overloads:[[[Mt],function(L,N){return Gl(N[0].evaluate(L),L.properties())}],[[Mt,$t],function(L,N){var ye=N[1];return Gl(N[0].evaluate(L),ye.evaluate(L))}]]},"feature-state":[Xt,[Mt],function(L,N){return Gl(N[0].evaluate(L),L.featureState||{})}],properties:[$t,[],function(L){return L.properties()}],"geometry-type":[Mt,[],function(L){return L.geometryType()}],id:[Xt,[],function(L){return L.id()}],zoom:[_t,[],function(L){return L.globals.zoom}],"heatmap-density":[_t,[],function(L){return L.globals.heatmapDensity||0}],"line-progress":[_t,[],function(L){return L.globals.lineProgress||0}],accumulated:[Xt,[],function(L){return void 0===L.globals.accumulated?null:L.globals.accumulated}],"+":[_t,Ua(_t),function(L,N){for(var ee=0,ye=0,Fe=N;ye<Fe.length;ye+=1)ee+=Fe[ye].evaluate(L);return ee}],"*":[_t,Ua(_t),function(L,N){for(var ee=1,ye=0,Fe=N;ye<Fe.length;ye+=1)ee*=Fe[ye].evaluate(L);return ee}],"-":{type:_t,overloads:[[[_t,_t],function(L,N){var ye=N[1];return N[0].evaluate(L)-ye.evaluate(L)}],[[_t],function(L,N){return-N[0].evaluate(L)}]]},"/":[_t,[_t,_t],function(L,N){var ye=N[1];return N[0].evaluate(L)/ye.evaluate(L)}],"%":[_t,[_t,_t],function(L,N){var ye=N[1];return N[0].evaluate(L)%ye.evaluate(L)}],ln2:[_t,[],function(){return Math.LN2}],pi:[_t,[],function(){return Math.PI}],e:[_t,[],function(){return Math.E}],"^":[_t,[_t,_t],function(L,N){var ye=N[1];return Math.pow(N[0].evaluate(L),ye.evaluate(L))}],sqrt:[_t,[_t],function(L,N){return Math.sqrt(N[0].evaluate(L))}],log10:[_t,[_t],function(L,N){return Math.log(N[0].evaluate(L))/Math.LN10}],ln:[_t,[_t],function(L,N){return Math.log(N[0].evaluate(L))}],log2:[_t,[_t],function(L,N){return Math.log(N[0].evaluate(L))/Math.LN2}],sin:[_t,[_t],function(L,N){return Math.sin(N[0].evaluate(L))}],cos:[_t,[_t],function(L,N){return Math.cos(N[0].evaluate(L))}],tan:[_t,[_t],function(L,N){return Math.tan(N[0].evaluate(L))}],asin:[_t,[_t],function(L,N){return Math.asin(N[0].evaluate(L))}],acos:[_t,[_t],function(L,N){return Math.acos(N[0].evaluate(L))}],atan:[_t,[_t],function(L,N){return Math.atan(N[0].evaluate(L))}],min:[_t,Ua(_t),function(L,N){return Math.min.apply(Math,N.map(function(ee){return ee.evaluate(L)}))}],max:[_t,Ua(_t),function(L,N){return Math.max.apply(Math,N.map(function(ee){return ee.evaluate(L)}))}],abs:[_t,[_t],function(L,N){return Math.abs(N[0].evaluate(L))}],round:[_t,[_t],function(L,N){var ee=N[0].evaluate(L);return ee<0?-Math.round(-ee):Math.round(ee)}],floor:[_t,[_t],function(L,N){return Math.floor(N[0].evaluate(L))}],ceil:[_t,[_t],function(L,N){return Math.ceil(N[0].evaluate(L))}],"filter-==":[Pt,[Mt,Xt],function(L,N){var ee=N[0],ye=N[1];return L.properties()[ee.value]===ye.value}],"filter-id-==":[Pt,[Xt],function(L,N){var ee=N[0];return L.id()===ee.value}],"filter-type-==":[Pt,[Mt],function(L,N){var ee=N[0];return L.geometryType()===ee.value}],"filter-<":[Pt,[Mt,Xt],function(L,N){var ee=N[0],ye=N[1],Fe=L.properties()[ee.value],Ve=ye.value;return typeof Fe==typeof Ve&&Fe<Ve}],"filter-id-<":[Pt,[Xt],function(L,N){var ee=N[0],ye=L.id(),Fe=ee.value;return typeof ye==typeof Fe&&ye<Fe}],"filter->":[Pt,[Mt,Xt],function(L,N){var ee=N[0],ye=N[1],Fe=L.properties()[ee.value],Ve=ye.value;return typeof Fe==typeof Ve&&Fe>Ve}],"filter-id->":[Pt,[Xt],function(L,N){var ee=N[0],ye=L.id(),Fe=ee.value;return typeof ye==typeof Fe&&ye>Fe}],"filter-<=":[Pt,[Mt,Xt],function(L,N){var ee=N[0],ye=N[1],Fe=L.properties()[ee.value],Ve=ye.value;return typeof Fe==typeof Ve&&Fe<=Ve}],"filter-id-<=":[Pt,[Xt],function(L,N){var ee=N[0],ye=L.id(),Fe=ee.value;return typeof ye==typeof Fe&&ye<=Fe}],"filter->=":[Pt,[Mt,Xt],function(L,N){var ee=N[0],ye=N[1],Fe=L.properties()[ee.value],Ve=ye.value;return typeof Fe==typeof Ve&&Fe>=Ve}],"filter-id->=":[Pt,[Xt],function(L,N){var ee=N[0],ye=L.id(),Fe=ee.value;return typeof ye==typeof Fe&&ye>=Fe}],"filter-has":[Pt,[Xt],function(L,N){return N[0].value in L.properties()}],"filter-has-id":[Pt,[],function(L){return null!==L.id()&&void 0!==L.id()}],"filter-type-in":[Pt,[tn(Mt)],function(L,N){return N[0].value.indexOf(L.geometryType())>=0}],"filter-id-in":[Pt,[tn(Xt)],function(L,N){return N[0].value.indexOf(L.id())>=0}],"filter-in-small":[Pt,[Mt,tn(Xt)],function(L,N){var ee=N[0];return N[1].value.indexOf(L.properties()[ee.value])>=0}],"filter-in-large":[Pt,[Mt,tn(Xt)],function(L,N){var ee=N[0],ye=N[1];return function(Fe,Ve,$e,lt){for(;$e<=lt;){var gt=$e+lt>>1;if(Ve[gt]===Fe)return!0;Ve[gt]>Fe?lt=gt-1:$e=gt+1}return!1}(L.properties()[ee.value],ye.value,0,ye.value.length-1)}],all:{type:Pt,overloads:[[[Pt,Pt],function(L,N){var ye=N[1];return N[0].evaluate(L)&&ye.evaluate(L)}],[Ua(Pt),function(L,N){for(var ee=0,ye=N;ee<ye.length;ee+=1)if(!ye[ee].evaluate(L))return!1;return!0}]]},any:{type:Pt,overloads:[[[Pt,Pt],function(L,N){var ye=N[1];return N[0].evaluate(L)||ye.evaluate(L)}],[Ua(Pt),function(L,N){for(var ee=0,ye=N;ee<ye.length;ee+=1)if(ye[ee].evaluate(L))return!0;return!1}]]},"!":[Pt,[Pt],function(L,N){return!N[0].evaluate(L)}],"is-supported-script":[Pt,[Mt],function(L,N){var ye=L.globals&&L.globals.isSupportedScript;return!ye||ye(N[0].evaluate(L))}],upcase:[Mt,[Mt],function(L,N){return N[0].evaluate(L).toUpperCase()}],downcase:[Mt,[Mt],function(L,N){return N[0].evaluate(L).toLowerCase()}],concat:[Mt,Ua(Xt),function(L,N){return N.map(function(ee){return Er(ee.evaluate(L))}).join("")}],"resolved-locale":[Mt,[dn],function(L,N){return N[0].evaluate(L).resolvedLocale()}]});var cu=function(L,N){var ee;this.expression=L,this._warningHistory={},this._evaluator=new xn,this._defaultValue=N?"color"===(ee=N).type&&Qa(ee.default)?new In(0,0,0,0):"color"===ee.type?In.parse(ee.default)||null:void 0===ee.default?null:ee.default:null,this._enumValues=N&&"enum"===N.type?N.values:null};function Yl(L){return Array.isArray(L)&&L.length>0&&"string"==typeof L[0]&&L[0]in oa}function Ra(L,N){var Fe,Ve,ee=new Sr(oa,[],N?(Ve={color:Zt,string:Mt,number:_t,enum:Mt,boolean:Pt,formatted:on,resolvedImage:cn},"array"===(Fe=N).type?tn(Ve[Fe.value]||Xt,Fe.length):Ve[Fe.type]):void 0),ye=ee.parse(L,void 0,void 0,void 0,N&&"string"===N.type?{typeAnnotation:"coerce"}:void 0);return ye?Ks(new cu(ye,N)):ws(ee.errors)}cu.prototype.evaluateWithoutErrorHandling=function(L,N,ee,ye,Fe,Ve){return this._evaluator.globals=L,this._evaluator.feature=N,this._evaluator.featureState=ee,this._evaluator.canonical=ye,this._evaluator.availableImages=Fe||null,this._evaluator.formattedSection=Ve,this.expression.evaluate(this._evaluator)},cu.prototype.evaluate=function(L,N,ee,ye,Fe,Ve){this._evaluator.globals=L,this._evaluator.feature=N||null,this._evaluator.featureState=ee||null,this._evaluator.canonical=ye,this._evaluator.availableImages=Fe||null,this._evaluator.formattedSection=Ve||null;try{var $e=this.expression.evaluate(this._evaluator);if(null==$e||"number"==typeof $e&&$e!=$e)return this._defaultValue;if(this._enumValues&&!($e in this._enumValues))throw new mr("Expected value to be one of "+Object.keys(this._enumValues).map(function(lt){return JSON.stringify(lt)}).join(", ")+", but found "+JSON.stringify($e)+" instead.");return $e}catch(lt){return this._warningHistory[lt.message]||(this._warningHistory[lt.message]=!0,typeof console<"u"&&console.warn(lt.message)),this._defaultValue}};var dl=function(L,N){this.kind=L,this._styleExpression=N,this.isStateDependent="constant"!==L&&!or(N.expression)};dl.prototype.evaluateWithoutErrorHandling=function(L,N,ee,ye,Fe,Ve){return this._styleExpression.evaluateWithoutErrorHandling(L,N,ee,ye,Fe,Ve)},dl.prototype.evaluate=function(L,N,ee,ye,Fe,Ve){return this._styleExpression.evaluate(L,N,ee,ye,Fe,Ve)};var zs=function(L,N,ee,ye){this.kind=L,this.zoomStops=ee,this._styleExpression=N,this.isStateDependent="camera"!==L&&!or(N.expression),this.interpolationType=ye};function hl(L,N){if("error"===(L=Ra(L,N)).result)return L;var ee=L.value.expression,ye=br(ee);if(!ye&&!ha(N))return ws([new Et("","data expressions not supported")]);var Fe=dr(ee,["zoom"]);if(!Fe&&!Wl(N))return ws([new Et("","zoom expressions not supported")]);var Ve=Lu(ee);return Ve||Fe?Ve instanceof Et?ws([Ve]):Ve instanceof Ro&&!Js(N)?ws([new Et("",'"interpolate" expressions cannot be used with this property')]):Ks(Ve?new zs(ye?"camera":"composite",L.value,Ve.labels,Ve instanceof Ro?Ve.interpolation:void 0):new dl(ye?"constant":"source",L.value)):ws([new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}zs.prototype.evaluateWithoutErrorHandling=function(L,N,ee,ye,Fe,Ve){return this._styleExpression.evaluateWithoutErrorHandling(L,N,ee,ye,Fe,Ve)},zs.prototype.evaluate=function(L,N,ee,ye,Fe,Ve){return this._styleExpression.evaluate(L,N,ee,ye,Fe,Ve)},zs.prototype.interpolationFactor=function(L,N,ee){return this.interpolationType?Ro.interpolationFactor(this.interpolationType,L,N,ee):0};var Qs=function(L,N){this._parameters=L,this._specification=N,ht(this,es(this._parameters,this._specification))};function Lu(L){var N=null;if(L instanceof Fs)N=Lu(L.result);else if(L instanceof Wi)for(var ee=0,ye=L.args;ee<ye.length&&!(N=Lu(ye[ee]));ee+=1);else(L instanceof Zr||L instanceof Ro)&&L.input instanceof Qn&&"zoom"===L.input.name&&(N=L);return N instanceof Et||L.eachChild(function(Ve){var $e=Lu(Ve);$e instanceof Et?N=$e:!N&&$e?N=new Et("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):N&&$e&&N!==$e&&(N=new Et("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),N}function Ms(L){var N=L.key,ee=L.value,ye=L.valueSpec||{},Fe=L.objectElementValidators||{},Ve=L.style,$e=L.styleSpec,lt=[],gt=no(ee);if("object"!==gt)return[new Ge(N,ee,"object expected, "+gt+" found")];for(var It in ee){var Ot=It.split(".")[0],Gt=ye[Ot]||ye["*"],en=void 0;if(Fe[Ot])en=Fe[Ot];else if(ye[Ot])en=xi;else if(Fe["*"])en=Fe["*"];else{if(!ye["*"]){lt.push(new Ge(N,ee[It],'unknown property "'+It+'"'));continue}en=xi}lt=lt.concat(en({key:(N&&N+".")+It,value:ee[It],valueSpec:Gt,style:Ve,styleSpec:$e,object:ee,objectKey:It},ee))}for(var Yt in ye)Fe[Yt]||ye[Yt].required&&void 0===ye[Yt].default&&void 0===ee[Yt]&&lt.push(new Ge(N,ee,'missing required property "'+Yt+'"'));return lt}function Xu(L){var N=L.value,ee=L.valueSpec,ye=L.style,Fe=L.styleSpec,Ve=L.key,$e=L.arrayElementValidator||xi;if("array"!==no(N))return[new Ge(Ve,N,"array expected, "+no(N)+" found")];if(ee.length&&N.length!==ee.length)return[new Ge(Ve,N,"array length "+ee.length+" expected, length "+N.length+" found")];if(ee["min-length"]&&N.length<ee["min-length"])return[new Ge(Ve,N,"array length at least "+ee["min-length"]+" expected, length "+N.length+" found")];var lt={type:ee.value,values:ee.values};Fe.$version<7&&(lt.function=ee.function),"object"===no(ee.value)&&(lt=ee.value);for(var gt=[],It=0;It<N.length;It++)gt=gt.concat($e({array:N,arrayIndex:It,value:N[It],valueSpec:lt,style:ye,styleSpec:Fe,key:Ve+"["+It+"]"}));return gt}function Tc(L){var N=L.key,ee=L.value,ye=L.valueSpec,Fe=no(ee);return"number"===Fe&&ee!=ee&&(Fe="NaN"),"number"!==Fe?[new Ge(N,ee,"number expected, "+Fe+" found")]:"minimum"in ye&&ee<ye.minimum?[new Ge(N,ee,ee+" is less than the minimum value "+ye.minimum)]:"maximum"in ye&&ee>ye.maximum?[new Ge(N,ee,ee+" is greater than the maximum value "+ye.maximum)]:[]}function Ou(L){var N,ee,ye,Fe=L.valueSpec,Ve=kt(L.value.type),$e={},lt="categorical"!==Ve&&void 0===L.value.property,gt=!lt,It="array"===no(L.value.stops)&&"array"===no(L.value.stops[0])&&"object"===no(L.value.stops[0][0]),Ot=Ms({key:L.key,value:L.value,valueSpec:L.styleSpec.function,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{stops:function(Yt){if("identity"===Ve)return[new Ge(Yt.key,Yt.value,'identity function may not have a "stops" property')];var mn=[],wn=Yt.value;return mn=mn.concat(Xu({key:Yt.key,value:wn,valueSpec:Yt.valueSpec,style:Yt.style,styleSpec:Yt.styleSpec,arrayElementValidator:Gt})),"array"===no(wn)&&0===wn.length&&mn.push(new Ge(Yt.key,wn,"array must have at least one stop")),mn},default:function(Yt){return xi({key:Yt.key,value:Yt.value,valueSpec:Fe,style:Yt.style,styleSpec:Yt.styleSpec})}}});return"identity"===Ve&&lt&&Ot.push(new Ge(L.key,L.value,'missing required property "property"')),"identity"===Ve||L.value.stops||Ot.push(new Ge(L.key,L.value,'missing required property "stops"')),"exponential"===Ve&&L.valueSpec.expression&&!Js(L.valueSpec)&&Ot.push(new Ge(L.key,L.value,"exponential functions not supported")),L.styleSpec.$version>=8&&(gt&&!ha(L.valueSpec)?Ot.push(new Ge(L.key,L.value,"property functions not supported")):lt&&!Wl(L.valueSpec)&&Ot.push(new Ge(L.key,L.value,"zoom functions not supported"))),"categorical"!==Ve&&!It||void 0!==L.value.property||Ot.push(new Ge(L.key,L.value,'"property" property is required')),Ot;function Gt(Yt){var mn=[],wn=Yt.value,Bn=Yt.key;if("array"!==no(wn))return[new Ge(Bn,wn,"array expected, "+no(wn)+" found")];if(2!==wn.length)return[new Ge(Bn,wn,"array length 2 expected, length "+wn.length+" found")];if(It){if("object"!==no(wn[0]))return[new Ge(Bn,wn,"object expected, "+no(wn[0])+" found")];if(void 0===wn[0].zoom)return[new Ge(Bn,wn,"object stop key must have zoom")];if(void 0===wn[0].value)return[new Ge(Bn,wn,"object stop key must have value")];if(ye&&ye>kt(wn[0].zoom))return[new Ge(Bn,wn[0].zoom,"stop zoom values must appear in ascending order")];kt(wn[0].zoom)!==ye&&(ye=kt(wn[0].zoom),ee=void 0,$e={}),mn=mn.concat(Ms({key:Bn+"[0]",value:wn[0],valueSpec:{zoom:{}},style:Yt.style,styleSpec:Yt.styleSpec,objectElementValidators:{zoom:Tc,value:en}}))}else mn=mn.concat(en({key:Bn+"[0]",value:wn[0],valueSpec:{},style:Yt.style,styleSpec:Yt.styleSpec},wn));return Yl(St(wn[1]))?mn.concat([new Ge(Bn+"[1]",wn[1],"expressions are not allowed in function stops.")]):mn.concat(xi({key:Bn+"[1]",value:wn[1],valueSpec:Fe,style:Yt.style,styleSpec:Yt.styleSpec}))}function en(Yt,mn){var wn=no(Yt.value),Bn=kt(Yt.value),jn=null!==Yt.value?Yt.value:mn;if(N){if(wn!==N)return[new Ge(Yt.key,jn,wn+" stop domain type must match previous stop domain type "+N)]}else N=wn;if("number"!==wn&&"string"!==wn&&"boolean"!==wn)return[new Ge(Yt.key,jn,"stop domain value must be a number, string, or boolean")];if("number"!==wn&&"categorical"!==Ve){var Yn="number expected, "+wn+" found";return ha(Fe)&&void 0===Ve&&(Yn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Yt.key,jn,Yn)]}return"categorical"!==Ve||"number"!==wn||isFinite(Bn)&&Math.floor(Bn)===Bn?"categorical"!==Ve&&"number"===wn&&void 0!==ee&&Bn<ee?[new Ge(Yt.key,jn,"stop domain values must appear in ascending order")]:(ee=Bn,"categorical"===Ve&&Bn in $e?[new Ge(Yt.key,jn,"stop domain values must be unique")]:($e[Bn]=!0,[])):[new Ge(Yt.key,jn,"integer expected, found "+Bn)]}}function pl(L){var N=("property"===L.expressionContext?hl:Ra)(St(L.value),L.valueSpec);if("error"===N.result)return N.value.map(function(ye){return new Ge(""+L.key+ye.key,L.value,ye.message)});var ee=N.value.expression||N.value._styleExpression.expression;if("property"===L.expressionContext&&"text-font"===L.propertyKey&&!ee.outputDefined())return[new Ge(L.key,L.value,'Invalid data expression for "'+L.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===L.expressionContext&&"layout"===L.propertyType&&!or(ee))return[new Ge(L.key,L.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===L.expressionContext&&!or(ee))return[new Ge(L.key,L.value,'"feature-state" data expressions are not supported with filters.')];if(L.expressionContext&&0===L.expressionContext.indexOf("cluster")){if(!dr(ee,["zoom","feature-state"]))return[new Ge(L.key,L.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===L.expressionContext&&!br(ee))return[new Ge(L.key,L.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(L){var N=L.key,ee=L.value,ye=L.valueSpec,Fe=[];return Array.isArray(ye.values)?-1===ye.values.indexOf(kt(ee))&&Fe.push(new Ge(N,ee,"expected one of ["+ye.values.join(", ")+"], "+JSON.stringify(ee)+" found")):-1===Object.keys(ye.values).indexOf(kt(ee))&&Fe.push(new Ge(N,ee,"expected one of ["+Object.keys(ye.values).join(", ")+"], "+JSON.stringify(ee)+" found")),Fe}function Al(L){if(!0===L||!1===L)return!0;if(!Array.isArray(L)||0===L.length)return!1;switch(L[0]){case"has":return L.length>=2&&"$id"!==L[1]&&"$type"!==L[1];case"in":return L.length>=3&&("string"!=typeof L[1]||Array.isArray(L[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==L.length||Array.isArray(L[1])||Array.isArray(L[2]);case"any":case"all":for(var N=0,ee=L.slice(1);N<ee.length;N+=1){var ye=ee[N];if(!Al(ye)&&"boolean"!=typeof ye)return!1}return!0;default:return!0}}Qs.deserialize=function(L){return new Qs(L._parameters,L._specification)},Qs.serialize=function(L){return{_parameters:L._parameters,_specification:L._specification}};var Ku={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function $l(L){if(null==L)return{filter:function(){return!0},needGeometry:!1};Al(L)||(L=kl(L));var N=Ra(L,Ku);if("error"===N.result)throw new Error(N.value.map(function(ee){return ee.key+": "+ee.message}).join(", "));return{filter:function(ee,ye,Fe){return N.value.evaluate(ee,ye,{},Fe)},needGeometry:fu(L)}}function zo(L,N){return L<N?-1:L>N?1:0}function fu(L){if(!Array.isArray(L))return!1;if("within"===L[0])return!0;for(var N=1;N<L.length;N++)if(fu(L[N]))return!0;return!1}function kl(L){if(!L)return!0;var N,ee=L[0];return L.length<=1?"any"!==ee:"=="===ee?bi(L[1],L[2],"=="):"!="===ee?Hi(bi(L[1],L[2],"==")):"<"===ee||">"===ee||"<="===ee||">="===ee?bi(L[1],L[2],ee):"any"===ee?(N=L.slice(1),["any"].concat(N.map(kl))):"all"===ee?["all"].concat(L.slice(1).map(kl)):"none"===ee?["all"].concat(L.slice(1).map(kl).map(Hi)):"in"===ee?Go(L[1],L.slice(2)):"!in"===ee?Hi(Go(L[1],L.slice(2))):"has"===ee?Li(L[1]):"!has"===ee?Hi(Li(L[1])):"within"!==ee||L}function bi(L,N,ee){switch(L){case"$type":return["filter-type-"+ee,N];case"$id":return["filter-id-"+ee,N];default:return["filter-"+ee,L,N]}}function Go(L,N){if(0===N.length)return!1;switch(L){case"$type":return["filter-type-in",["literal",N]];case"$id":return["filter-id-in",["literal",N]];default:return N.length>200&&!N.some(function(ee){return typeof ee!=typeof N[0]})?["filter-in-large",L,["literal",N.sort(zo)]]:["filter-in-small",L,["literal",N]]}}function Li(L){switch(L){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",L]}}function Hi(L){return["!",L]}function vi(L){return Al(St(L.value))?pl(ht({},L,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pi(L)}function Pi(L){var N=L.value,ee=L.key;if("array"!==no(N))return[new Ge(ee,N,"array expected, "+no(N)+" found")];var ye,Fe=L.styleSpec,Ve=[];if(N.length<1)return[new Ge(ee,N,"filter array must have at least 1 element")];switch(Ve=Ve.concat(As({key:ee+"[0]",value:N[0],valueSpec:Fe.filter_operator,style:L.style,styleSpec:L.styleSpec})),kt(N[0])){case"<":case"<=":case">":case">=":N.length>=2&&"$type"===kt(N[1])&&Ve.push(new Ge(ee,N,'"$type" cannot be use with operator "'+N[0]+'"'));case"==":case"!=":3!==N.length&&Ve.push(new Ge(ee,N,'filter array for operator "'+N[0]+'" must have 3 elements'));case"in":case"!in":N.length>=2&&"string"!==(ye=no(N[1]))&&Ve.push(new Ge(ee+"[1]",N[1],"string expected, "+ye+" found"));for(var $e=2;$e<N.length;$e++)ye=no(N[$e]),"$type"===kt(N[1])?Ve=Ve.concat(As({key:ee+"["+$e+"]",value:N[$e],valueSpec:Fe.geometry_type,style:L.style,styleSpec:L.styleSpec})):"string"!==ye&&"number"!==ye&&"boolean"!==ye&&Ve.push(new Ge(ee+"["+$e+"]",N[$e],"string, number, or boolean expected, "+ye+" found"));break;case"any":case"all":case"none":for(var lt=1;lt<N.length;lt++)Ve=Ve.concat(Pi({key:ee+"["+lt+"]",value:N[lt],style:L.style,styleSpec:L.styleSpec}));break;case"has":case"!has":ye=no(N[1]),2!==N.length?Ve.push(new Ge(ee,N,'filter array for "'+N[0]+'" operator must have 2 elements')):"string"!==ye&&Ve.push(new Ge(ee+"[1]",N[1],"string expected, "+ye+" found"));break;case"within":ye=no(N[1]),2!==N.length?Ve.push(new Ge(ee,N,'filter array for "'+N[0]+'" operator must have 2 elements')):"object"!==ye&&Ve.push(new Ge(ee+"[1]",N[1],"object expected, "+ye+" found"))}return Ve}function Ko(L,N){var ee=L.key,ye=L.style,Fe=L.styleSpec,Ve=L.value,$e=L.objectKey,lt=Fe[N+"_"+L.layerType];if(!lt)return[];var gt=$e.match(/^(.*)-transition$/);if("paint"===N&&gt&&lt[gt[1]]&&lt[gt[1]].transition)return xi({key:ee,value:Ve,valueSpec:Fe.transition,style:ye,styleSpec:Fe});var It,Ot=L.valueSpec||lt[$e];if(!Ot)return[new Ge(ee,Ve,'unknown property "'+$e+'"')];if("string"===no(Ve)&&ha(Ot)&&!Ot.tokens&&(It=/^{([^}]+)}$/.exec(Ve)))return[new Ge(ee,Ve,'"'+$e+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(It[1])+" }`.")];var Gt=[];return"symbol"===L.layerType&&("text-field"===$e&&ye&&!ye.glyphs&&Gt.push(new Ge(ee,Ve,'use of "text-field" requires a style "glyphs" property')),"text-font"===$e&&Qa(St(Ve))&&"identity"===kt(Ve.type)&&Gt.push(new Ge(ee,Ve,'"text-font" does not support identity functions'))),Gt.concat(xi({key:L.key,value:Ve,valueSpec:Ot,style:ye,styleSpec:Fe,expressionContext:"property",propertyType:N,propertyKey:$e}))}function Bs(L){return Ko(L,"paint")}function Pu(L){return Ko(L,"layout")}function ml(L){var N=[],ee=L.value,ye=L.key,Fe=L.style,Ve=L.styleSpec;ee.type||ee.ref||N.push(new Ge(ye,ee,'either "type" or "ref" is required'));var $e,lt=kt(ee.type),gt=kt(ee.ref);if(ee.id)for(var It=kt(ee.id),Ot=0;Ot<L.arrayIndex;Ot++){var Gt=Fe.layers[Ot];kt(Gt.id)===It&&N.push(new Ge(ye,ee.id,'duplicate layer id "'+ee.id+'", previously used at line '+Gt.id.__line__))}if("ref"in ee)["type","source","source-layer","filter","layout"].forEach(function(mn){mn in ee&&N.push(new Ge(ye,ee[mn],'"'+mn+'" is prohibited for ref layers'))}),Fe.layers.forEach(function(mn){kt(mn.id)===gt&&($e=mn)}),$e?$e.ref?N.push(new Ge(ye,ee.ref,"ref cannot reference another ref layer")):lt=kt($e.type):N.push(new Ge(ye,ee.ref,'ref layer "'+gt+'" not found'));else if("background"!==lt)if(ee.source){var en=Fe.sources&&Fe.sources[ee.source],Yt=en&&kt(en.type);en?"vector"===Yt&&"raster"===lt?N.push(new Ge(ye,ee.source,'layer "'+ee.id+'" requires a raster source')):"raster"===Yt&&"raster"!==lt?N.push(new Ge(ye,ee.source,'layer "'+ee.id+'" requires a vector source')):"vector"!==Yt||ee["source-layer"]?"raster-dem"===Yt&&"hillshade"!==lt?N.push(new Ge(ye,ee.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==lt||!ee.paint||!ee.paint["line-gradient"]||"geojson"===Yt&&en.lineMetrics||N.push(new Ge(ye,ee,'layer "'+ee.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):N.push(new Ge(ye,ee,'layer "'+ee.id+'" must specify a "source-layer"')):N.push(new Ge(ye,ee.source,'source "'+ee.source+'" not found'))}else N.push(new Ge(ye,ee,'missing required property "source"'));return N=N.concat(Ms({key:ye,value:ee,valueSpec:Ve.layer,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xi({key:ye+".type",value:ee.type,valueSpec:Ve.layer.type,style:L.style,styleSpec:L.styleSpec,object:ee,objectKey:"type"})},filter:vi,layout:function(mn){return Ms({layer:ee,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(wn){return Pu(ht({layerType:lt},wn))}}})},paint:function(mn){return Ms({layer:ee,key:mn.key,value:mn.value,style:mn.style,styleSpec:mn.styleSpec,objectElementValidators:{"*":function(wn){return Bs(ht({layerType:lt},wn))}}})}}}))}function vl(L){var N=L.value,ee=L.key,ye=no(N);return"string"!==ye?[new Ge(ee,N,"string expected, "+ye+" found")]:[]}var du={promoteId:function(L){var N=L.key,ee=L.value;if("string"===no(ee))return vl({key:N,value:ee});var ye=[];for(var Fe in ee)ye.push.apply(ye,vl({key:N+"."+Fe,value:ee[Fe]}));return ye}};function yo(L){var N=L.value,ee=L.key,ye=L.styleSpec,Fe=L.style;if(!N.type)return[new Ge(ee,N,'"type" is required')];var Ve,$e=kt(N.type);switch($e){case"vector":case"raster":case"raster-dem":return Ms({key:ee,value:N,valueSpec:ye["source_"+$e.replace("-","_")],style:L.style,styleSpec:ye,objectElementValidators:du});case"geojson":if(Ve=Ms({key:ee,value:N,valueSpec:ye.source_geojson,style:Fe,styleSpec:ye,objectElementValidators:du}),N.cluster)for(var lt in N.clusterProperties){var gt=N.clusterProperties[lt],It=gt[0],Gt="string"==typeof It?[It,["accumulated"],["get",lt]]:It;Ve.push.apply(Ve,pl({key:ee+"."+lt+".map",value:gt[1],expressionContext:"cluster-map"})),Ve.push.apply(Ve,pl({key:ee+"."+lt+".reduce",value:Gt,expressionContext:"cluster-reduce"}))}return Ve;case"video":return Ms({key:ee,value:N,valueSpec:ye.source_video,style:Fe,styleSpec:ye});case"image":return Ms({key:ee,value:N,valueSpec:ye.source_image,style:Fe,styleSpec:ye});case"canvas":return[new Ge(ee,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return As({key:ee+".type",value:N.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Fe,styleSpec:ye})}}function Gr(L){var N=L.value,ee=L.styleSpec,ye=ee.light,Fe=L.style,Ve=[],$e=no(N);if(void 0===N)return Ve;if("object"!==$e)return Ve.concat([new Ge("light",N,"object expected, "+$e+" found")]);for(var lt in N){var gt=lt.match(/^(.*)-transition$/);Ve=Ve.concat(gt&&ye[gt[1]]&&ye[gt[1]].transition?xi({key:lt,value:N[lt],valueSpec:ee.transition,style:Fe,styleSpec:ee}):ye[lt]?xi({key:lt,value:N[lt],valueSpec:ye[lt],style:Fe,styleSpec:ee}):[new Ge(lt,N[lt],'unknown property "'+lt+'"')])}return Ve}var pi={"*":function(){return[]},array:Xu,boolean:function(L){var N=L.value,ee=L.key,ye=no(N);return"boolean"!==ye?[new Ge(ee,N,"boolean expected, "+ye+" found")]:[]},number:Tc,color:function(L){var N=L.key,ee=L.value,ye=no(ee);return"string"!==ye?[new Ge(N,ee,"color expected, "+ye+" found")]:null===bn(ee)?[new Ge(N,ee,'color expected, "'+ee+'" found')]:[]},constants:dt,enum:As,filter:vi,function:Ou,layer:ml,object:Ms,source:yo,light:Gr,string:vl,formatted:function(L){return 0===vl(L).length?[]:pl(L)},resolvedImage:function(L){return 0===vl(L).length?[]:pl(L)}};function xi(L){var N=L.value,ee=L.valueSpec,ye=L.styleSpec;return ee.expression&&Qa(kt(N))?Ou(L):ee.expression&&Yl(St(N))?pl(L):ee.type&&pi[ee.type]?pi[ee.type](L):Ms(ht({},L,{valueSpec:ee.type?ye[ee.type]:ee}))}function pa(L){var N=L.value,ee=L.key,ye=vl(L);return ye.length||(-1===N.indexOf("{fontstack}")&&ye.push(new Ge(ee,N,'"glyphs" url must include a "{fontstack}" token')),-1===N.indexOf("{range}")&&ye.push(new Ge(ee,N,'"glyphs" url must include a "{range}" token'))),ye}function ks(L,N){void 0===N&&(N=He);var ee=[];return ee=ee.concat(xi({key:"",value:L,valueSpec:N.$root,styleSpec:N,style:L,objectElementValidators:{glyphs:pa,"*":function(){return[]}}})),L.constants&&(ee=ee.concat(dt({key:"constants",value:L.constants,style:L,styleSpec:N}))),ji(ee)}function ji(L){return[].concat(L).sort(function(N,ee){return N.line-ee.line})}function Bo(L){return function(){for(var N=[],ee=arguments.length;ee--;)N[ee]=arguments[ee];return ji(L.apply(this,N))}}ks.source=Bo(yo),ks.light=Bo(Gr),ks.layer=Bo(ml),ks.filter=Bo(vi),ks.paintProperty=Bo(Bs),ks.layoutProperty=Bo(Pu);var Fi=ks,So=Fi.light,jo=Fi.paintProperty,mi=Fi.layoutProperty;function Fa(L,N){var ee=!1;if(N&&N.length)for(var ye=0,Fe=N;ye<Fe.length;ye+=1)L.fire(new pt(new Error(Fe[ye].message))),ee=!0;return ee}var Jo=ro,la=3;function ro(L,N,ee){var ye=this.cells=[];if(L instanceof ArrayBuffer){this.arrayBuffer=L;var Fe=new Int32Array(this.arrayBuffer);L=Fe[0],this.d=(N=Fe[1])+2*(ee=Fe[2]);for(var Ve=0;Ve<this.d*this.d;Ve++){var $e=Fe[la+Ve],lt=Fe[la+Ve+1];ye.push($e===lt?null:Fe.subarray($e,lt))}var It=Fe[la+ye.length+1];this.keys=Fe.subarray(Fe[la+ye.length],It),this.bboxes=Fe.subarray(It),this.insert=this._insertReadonly}else{this.d=N+2*ee;for(var Ot=0;Ot<this.d*this.d;Ot++)ye.push([]);this.keys=[],this.bboxes=[]}this.n=N,this.extent=L,this.padding=ee,this.scale=N/L,this.uid=0;var Gt=ee/N*L;this.min=-Gt,this.max=L+Gt}ro.prototype.insert=function(L,N,ee,ye,Fe){this._forEachCell(N,ee,ye,Fe,this._insertCell,this.uid++),this.keys.push(L),this.bboxes.push(N),this.bboxes.push(ee),this.bboxes.push(ye),this.bboxes.push(Fe)},ro.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ro.prototype._insertCell=function(L,N,ee,ye,Fe,Ve){this.cells[Fe].push(Ve)},ro.prototype.query=function(L,N,ee,ye,Fe){var Ve=this.min,$e=this.max;if(L<=Ve&&N<=Ve&&$e<=ee&&$e<=ye&&!Fe)return Array.prototype.slice.call(this.keys);var lt=[];return this._forEachCell(L,N,ee,ye,this._queryCell,lt,{},Fe),lt},ro.prototype._queryCell=function(L,N,ee,ye,Fe,Ve,$e,lt){var gt=this.cells[Fe];if(null!==gt)for(var It=this.keys,Ot=this.bboxes,Gt=0;Gt<gt.length;Gt++){var en=gt[Gt];if(void 0===$e[en]){var Yt=4*en;(lt?lt(Ot[Yt+0],Ot[Yt+1],Ot[Yt+2],Ot[Yt+3]):L<=Ot[Yt+2]&&N<=Ot[Yt+3]&&ee>=Ot[Yt+0]&&ye>=Ot[Yt+1])?($e[en]=!0,Ve.push(It[en])):$e[en]=!1}}},ro.prototype._forEachCell=function(L,N,ee,ye,Fe,Ve,$e,lt){for(var gt=this._convertToCellCoord(L),It=this._convertToCellCoord(N),Ot=this._convertToCellCoord(ee),Gt=this._convertToCellCoord(ye),en=gt;en<=Ot;en++)for(var Yt=It;Yt<=Gt;Yt++){var mn=this.d*Yt+en;if((!lt||lt(this._convertFromCellCoord(en),this._convertFromCellCoord(Yt),this._convertFromCellCoord(en+1),this._convertFromCellCoord(Yt+1)))&&Fe.call(this,L,N,ee,ye,mn,Ve,$e,lt))return}},ro.prototype._convertFromCellCoord=function(L){return(L-this.padding)/this.scale},ro.prototype._convertToCellCoord=function(L){return Math.max(0,Math.min(this.d-1,Math.floor(L*this.scale)+this.padding))},ro.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var L=this.cells,N=la+this.cells.length+1+1,ee=0,ye=0;ye<this.cells.length;ye++)ee+=this.cells[ye].length;var Fe=new Int32Array(N+ee+this.keys.length+this.bboxes.length);Fe[0]=this.extent,Fe[1]=this.n,Fe[2]=this.padding;for(var Ve=N,$e=0;$e<L.length;$e++){var lt=L[$e];Fe[la+$e]=Ve,Fe.set(lt,Ve),Ve+=lt.length}return Fe[la+L.length]=Ve,Fe.set(this.keys,Ve),Fe[la+L.length+1]=Ve+=this.keys.length,Fe.set(this.bboxes,Ve),Ve+=this.bboxes.length,Fe.buffer};var yl=self.ImageData,ma=self.ImageBitmap,ho={};function Hr(L,N,ee){void 0===ee&&(ee={}),Object.defineProperty(N,"_classRegistryKey",{value:L,writeable:!1}),ho[L]={klass:N,omit:ee.omit||[],shallow:ee.shallow||[]}}for(var ua in Hr("Object",Object),Jo.serialize=function(L,N){var ee=L.toArrayBuffer();return N&&N.push(ee),{buffer:ee}},Jo.deserialize=function(L){return new Jo(L.buffer)},Hr("Grid",Jo),Hr("Color",In),Hr("Error",Error),Hr("ResolvedImage",Nn),Hr("StylePropertyFunction",Qs),Hr("StyleExpression",cu,{omit:["_evaluator"]}),Hr("ZoomDependentExpression",zs),Hr("ZoomConstantExpression",dl),Hr("CompoundExpression",Qn,{omit:["_evaluate"]}),oa)oa[ua]._classRegistryKey||Hr("Expression_"+ua,oa[ua]);function ls(L){return L&&typeof ArrayBuffer<"u"&&(L instanceof ArrayBuffer||L.constructor&&"ArrayBuffer"===L.constructor.name)}function us(L){return ma&&L instanceof ma}function js(L,N){if(null==L||"boolean"==typeof L||"number"==typeof L||"string"==typeof L||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp)return L;if(ls(L)||us(L))return N&&N.push(L),L;if(ArrayBuffer.isView(L)){var ee=L;return N&&N.push(ee.buffer),ee}if(L instanceof yl)return N&&N.push(L.data.buffer),L;if(Array.isArray(L)){for(var ye=[],Fe=0,Ve=L;Fe<Ve.length;Fe+=1)ye.push(js(Ve[Fe],N));return ye}if("object"==typeof L){var lt=L.constructor,gt=lt._classRegistryKey;if(!gt)throw new Error("can't serialize object of unregistered class");var It=lt.serialize?lt.serialize(L,N):{};if(!lt.serialize){for(var Ot in L)if(L.hasOwnProperty(Ot)&&!(ho[gt].omit.indexOf(Ot)>=0)){var Gt=L[Ot];It[Ot]=ho[gt].shallow.indexOf(Ot)>=0?Gt:js(Gt,N)}L instanceof Error&&(It.message=L.message)}if(It.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==gt&&(It.$name=gt),It}throw new Error("can't serialize object of type "+typeof L)}function Us(L){if(null==L||"boolean"==typeof L||"number"==typeof L||"string"==typeof L||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp||ls(L)||us(L)||ArrayBuffer.isView(L)||L instanceof yl)return L;if(Array.isArray(L))return L.map(Us);if("object"==typeof L){var N=L.$name||"Object",ee=ho[N].klass;if(!ee)throw new Error("can't deserialize unregistered class "+N);if(ee.deserialize)return ee.deserialize(L);for(var ye=Object.create(ee.prototype),Fe=0,Ve=Object.keys(L);Fe<Ve.length;Fe+=1){var $e=Ve[Fe];if("$name"!==$e){var lt=L[$e];ye[$e]=ho[N].shallow.indexOf($e)>=0?lt:Us(lt)}}return ye}throw new Error("can't deserialize object of type "+typeof L)}var Mi=function(){this.first=!0};Mi.prototype.update=function(L,N){var ee=Math.floor(L);return this.first?(this.first=!1,this.lastIntegerZoom=ee,this.lastIntegerZoomTime=0,this.lastZoom=L,this.lastFloorZoom=ee,!0):(this.lastFloorZoom>ee?(this.lastIntegerZoom=ee+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<ee&&(this.lastIntegerZoom=ee,this.lastIntegerZoomTime=N),L!==this.lastZoom&&(this.lastZoom=L,this.lastFloorZoom=ee,!0))};var Ur={"Latin-1 Supplement":function(L){return L>=128&&L<=255},Arabic:function(L){return L>=1536&&L<=1791},"Arabic Supplement":function(L){return L>=1872&&L<=1919},"Arabic Extended-A":function(L){return L>=2208&&L<=2303},"Hangul Jamo":function(L){return L>=4352&&L<=4607},"Unified Canadian Aboriginal Syllabics":function(L){return L>=5120&&L<=5759},Khmer:function(L){return L>=6016&&L<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(L){return L>=6320&&L<=6399},"General Punctuation":function(L){return L>=8192&&L<=8303},"Letterlike Symbols":function(L){return L>=8448&&L<=8527},"Number Forms":function(L){return L>=8528&&L<=8591},"Miscellaneous Technical":function(L){return L>=8960&&L<=9215},"Control Pictures":function(L){return L>=9216&&L<=9279},"Optical Character Recognition":function(L){return L>=9280&&L<=9311},"Enclosed Alphanumerics":function(L){return L>=9312&&L<=9471},"Geometric Shapes":function(L){return L>=9632&&L<=9727},"Miscellaneous Symbols":function(L){return L>=9728&&L<=9983},"Miscellaneous Symbols and Arrows":function(L){return L>=11008&&L<=11263},"CJK Radicals Supplement":function(L){return L>=11904&&L<=12031},"Kangxi Radicals":function(L){return L>=12032&&L<=12255},"Ideographic Description Characters":function(L){return L>=12272&&L<=12287},"CJK Symbols and Punctuation":function(L){return L>=12288&&L<=12351},Hiragana:function(L){return L>=12352&&L<=12447},Katakana:function(L){return L>=12448&&L<=12543},Bopomofo:function(L){return L>=12544&&L<=12591},"Hangul Compatibility Jamo":function(L){return L>=12592&&L<=12687},Kanbun:function(L){return L>=12688&&L<=12703},"Bopomofo Extended":function(L){return L>=12704&&L<=12735},"CJK Strokes":function(L){return L>=12736&&L<=12783},"Katakana Phonetic Extensions":function(L){return L>=12784&&L<=12799},"Enclosed CJK Letters and Months":function(L){return L>=12800&&L<=13055},"CJK Compatibility":function(L){return L>=13056&&L<=13311},"CJK Unified Ideographs Extension A":function(L){return L>=13312&&L<=19903},"Yijing Hexagram Symbols":function(L){return L>=19904&&L<=19967},"CJK Unified Ideographs":function(L){return L>=19968&&L<=40959},"Yi Syllables":function(L){return L>=40960&&L<=42127},"Yi Radicals":function(L){return L>=42128&&L<=42191},"Hangul Jamo Extended-A":function(L){return L>=43360&&L<=43391},"Hangul Syllables":function(L){return L>=44032&&L<=55215},"Hangul Jamo Extended-B":function(L){return L>=55216&&L<=55295},"Private Use Area":function(L){return L>=57344&&L<=63743},"CJK Compatibility Ideographs":function(L){return L>=63744&&L<=64255},"Arabic Presentation Forms-A":function(L){return L>=64336&&L<=65023},"Vertical Forms":function(L){return L>=65040&&L<=65055},"CJK Compatibility Forms":function(L){return L>=65072&&L<=65103},"Small Form Variants":function(L){return L>=65104&&L<=65135},"Arabic Presentation Forms-B":function(L){return L>=65136&&L<=65279},"Halfwidth and Fullwidth Forms":function(L){return L>=65280&&L<=65519}};function ts(L){for(var N=0,ee=L;N<ee.length;N+=1)if(Sl(ee[N].charCodeAt(0)))return!0;return!1}function Sl(L){return!(746!==L&&747!==L&&(L<4352||!(Ur["Bopomofo Extended"](L)||Ur.Bopomofo(L)||Ur["CJK Compatibility Forms"](L)&&!(L>=65097&&L<=65103)||Ur["CJK Compatibility Ideographs"](L)||Ur["CJK Compatibility"](L)||Ur["CJK Radicals Supplement"](L)||Ur["CJK Strokes"](L)||!(!Ur["CJK Symbols and Punctuation"](L)||L>=12296&&L<=12305||L>=12308&&L<=12319||12336===L)||Ur["CJK Unified Ideographs Extension A"](L)||Ur["CJK Unified Ideographs"](L)||Ur["Enclosed CJK Letters and Months"](L)||Ur["Hangul Compatibility Jamo"](L)||Ur["Hangul Jamo Extended-A"](L)||Ur["Hangul Jamo Extended-B"](L)||Ur["Hangul Jamo"](L)||Ur["Hangul Syllables"](L)||Ur.Hiragana(L)||Ur["Ideographic Description Characters"](L)||Ur.Kanbun(L)||Ur["Kangxi Radicals"](L)||Ur["Katakana Phonetic Extensions"](L)||Ur.Katakana(L)&&12540!==L||!(!Ur["Halfwidth and Fullwidth Forms"](L)||65288===L||65289===L||65293===L||L>=65306&&L<=65310||65339===L||65341===L||65343===L||L>=65371&&L<=65503||65507===L||L>=65512&&L<=65519)||!(!Ur["Small Form Variants"](L)||L>=65112&&L<=65118||L>=65123&&L<=65126)||Ur["Unified Canadian Aboriginal Syllabics"](L)||Ur["Unified Canadian Aboriginal Syllabics Extended"](L)||Ur["Vertical Forms"](L)||Ur["Yijing Hexagram Symbols"](L)||Ur["Yi Syllables"](L)||Ur["Yi Radicals"](L))))}function Va(L){return!(Sl(L)||(N=L,Ur["Latin-1 Supplement"](N)&&(167===N||169===N||174===N||177===N||188===N||189===N||190===N||215===N||247===N)||Ur["General Punctuation"](N)&&(8214===N||8224===N||8225===N||8240===N||8241===N||8251===N||8252===N||8258===N||8263===N||8264===N||8265===N||8273===N)||Ur["Letterlike Symbols"](N)||Ur["Number Forms"](N)||Ur["Miscellaneous Technical"](N)&&(N>=8960&&N<=8967||N>=8972&&N<=8991||N>=8996&&N<=9e3||9003===N||N>=9085&&N<=9114||N>=9150&&N<=9165||9167===N||N>=9169&&N<=9179||N>=9186&&N<=9215)||Ur["Control Pictures"](N)&&9251!==N||Ur["Optical Character Recognition"](N)||Ur["Enclosed Alphanumerics"](N)||Ur["Geometric Shapes"](N)||Ur["Miscellaneous Symbols"](N)&&!(N>=9754&&N<=9759)||Ur["Miscellaneous Symbols and Arrows"](N)&&(N>=11026&&N<=11055||N>=11088&&N<=11097||N>=11192&&N<=11243)||Ur["CJK Symbols and Punctuation"](N)||Ur.Katakana(N)||Ur["Private Use Area"](N)||Ur["CJK Compatibility Forms"](N)||Ur["Small Form Variants"](N)||Ur["Halfwidth and Fullwidth Forms"](N)||8734===N||8756===N||8757===N||N>=9984&&N<=10087||N>=10102&&N<=10131||65532===N||65533===N));var N}function Qo(L){return Ur.Arabic(L)||Ur["Arabic Supplement"](L)||Ur["Arabic Extended-A"](L)||Ur["Arabic Presentation Forms-A"](L)||Ur["Arabic Presentation Forms-B"](L)}function La(L){return L>=1424&&L<=2303||Ur["Arabic Presentation Forms-A"](L)||Ur["Arabic Presentation Forms-B"](L)}function Oa(L,N){return!(!N&&La(L)||L>=2304&&L<=3583||L>=3840&&L<=4255||Ur.Khmer(L))}function po(L){for(var N=0,ee=L;N<ee.length;N+=1)if(La(ee[N].charCodeAt(0)))return!0;return!1}var el="deferred",Wo="loading",Zi="loaded",cs=null,Uo="unavailable",Ii=null,El=function(L){L&&"string"==typeof L&&L.indexOf("NetworkError")>-1&&(Uo="error"),cs&&cs(L)};function Ha(){ea.fire(new ot("pluginStateChange",{pluginStatus:Uo,pluginURL:Ii}))}var ea=new xt,nl=function(){return Uo},Ju=function(){if(Uo!==el||!Ii)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Uo=Wo,Ha(),Ii&&Ft({url:Ii},function(L){L?El(L):(Uo=Zi,Ha())})},Fo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Uo===Zi||null!=Fo.applyArabicShaping},isLoading:function(){return Uo===Wo},setState:function(L){Uo=L.pluginStatus,Ii=L.pluginURL},isParsed:function(){return null!=Fo.applyArabicShaping&&null!=Fo.processBidirectionalText&&null!=Fo.processStyledBidirectionalText},getPluginURL:function(){return Ii}},oo=function(L,N){this.zoom=L,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mi,this.transition={})};oo.prototype.isSupportedScript=function(L){return function(N,ee){for(var ye=0,Fe=N;ye<Fe.length;ye+=1)if(!Oa(Fe[ye].charCodeAt(0),ee))return!1;return!0}(L,Fo.isLoaded())},oo.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},oo.prototype.getCrossfadeParameters=function(){var L=this.zoom,N=L-Math.floor(L),ee=this.crossFadingFactor();return L>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*ee}:{fromScale:.5,toScale:1,t:1-(1-ee)*N}};var fs=function(L,N){this.property=L,this.value=N,this.expression=function(ee,ye){if(Qa(ee))return new Qs(ee,ye);if(Yl(ee)){var Fe=hl(ee,ye);if("error"===Fe.result)throw new Error(Fe.value.map(function($e){return $e.key+": "+$e.message}).join(", "));return Fe.value}var Ve=ee;return"string"==typeof ee&&"color"===ye.type&&(Ve=In.parse(ee)),{kind:"constant",evaluate:function(){return Ve}}}(void 0===N?L.specification.default:N,L.specification)};fs.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},fs.prototype.possiblyEvaluate=function(L,N,ee){return this.property.possiblyEvaluate(this,L,N,ee)};var rl=function(L){this.property=L,this.value=new fs(L,void 0)};rl.prototype.transitioned=function(L,N){return new Qu(this.property,this.value,N,d({},L.transition,this.transition),L.now)},rl.prototype.untransitioned=function(){return new Qu(this.property,this.value,null,{},0)};var Vs=function(L){this._properties=L,this._values=Object.create(L.defaultTransitionablePropertyValues)};Vs.prototype.getValue=function(L){return M(this._values[L].value.value)},Vs.prototype.setValue=function(L,N){this._values.hasOwnProperty(L)||(this._values[L]=new rl(this._values[L].property)),this._values[L].value=new fs(this._values[L].property,null===N?void 0:M(N))},Vs.prototype.getTransition=function(L){return M(this._values[L].transition)},Vs.prototype.setTransition=function(L,N){this._values.hasOwnProperty(L)||(this._values[L]=new rl(this._values[L].property)),this._values[L].transition=M(N)||void 0},Vs.prototype.serialize=function(){for(var L={},N=0,ee=Object.keys(this._values);N<ee.length;N+=1){var ye=ee[N],Fe=this.getValue(ye);void 0!==Fe&&(L[ye]=Fe);var Ve=this.getTransition(ye);void 0!==Ve&&(L[ye+"-transition"]=Ve)}return L},Vs.prototype.transitioned=function(L,N){for(var ee=new Cl(this._properties),ye=0,Fe=Object.keys(this._values);ye<Fe.length;ye+=1){var Ve=Fe[ye];ee._values[Ve]=this._values[Ve].transitioned(L,N._values[Ve])}return ee},Vs.prototype.untransitioned=function(){for(var L=new Cl(this._properties),N=0,ee=Object.keys(this._values);N<ee.length;N+=1){var ye=ee[N];L._values[ye]=this._values[ye].untransitioned()}return L};var Qu=function(L,N,ee,ye,Fe){this.property=L,this.value=N,this.begin=Fe+ye.delay||0,this.end=this.begin+ye.duration||0,L.specification.transition&&(ye.delay||ye.duration)&&(this.prior=ee)};Qu.prototype.possiblyEvaluate=function(L,N,ee){var ye=L.now||0,Fe=this.value.possiblyEvaluate(L,N,ee),Ve=this.prior;if(Ve){if(ye>this.end)return this.prior=null,Fe;if(this.value.isDataDriven())return this.prior=null,Fe;if(ye<this.begin)return Ve.possiblyEvaluate(L,N,ee);var $e=(ye-this.begin)/(this.end-this.begin);return this.property.interpolate(Ve.possiblyEvaluate(L,N,ee),Fe,function(lt){if(lt<=0)return 0;if(lt>=1)return 1;var gt=lt*lt,It=gt*lt;return 4*(lt<.5?It:3*(lt-gt)+It-.75)}($e))}return Fe};var Cl=function(L){this._properties=L,this._values=Object.create(L.defaultTransitioningPropertyValues)};Cl.prototype.possiblyEvaluate=function(L,N,ee){for(var ye=new ga(this._properties),Fe=0,Ve=Object.keys(this._values);Fe<Ve.length;Fe+=1){var $e=Ve[Fe];ye._values[$e]=this._values[$e].possiblyEvaluate(L,N,ee)}return ye},Cl.prototype.hasTransition=function(){for(var L=0,N=Object.keys(this._values);L<N.length;L+=1)if(this._values[N[L]].prior)return!0;return!1};var Xl=function(L){this._properties=L,this._values=Object.create(L.defaultPropertyValues)};Xl.prototype.getValue=function(L){return M(this._values[L].value)},Xl.prototype.setValue=function(L,N){this._values[L]=new fs(this._values[L].property,null===N?void 0:M(N))},Xl.prototype.serialize=function(){for(var L={},N=0,ee=Object.keys(this._values);N<ee.length;N+=1){var ye=ee[N],Fe=this.getValue(ye);void 0!==Fe&&(L[ye]=Fe)}return L},Xl.prototype.possiblyEvaluate=function(L,N,ee){for(var ye=new ga(this._properties),Fe=0,Ve=Object.keys(this._values);Fe<Ve.length;Fe+=1){var $e=Ve[Fe];ye._values[$e]=this._values[$e].possiblyEvaluate(L,N,ee)}return ye};var ta=function(L,N,ee){this.property=L,this.value=N,this.parameters=ee};ta.prototype.isConstant=function(){return"constant"===this.value.kind},ta.prototype.constantOr=function(L){return"constant"===this.value.kind?this.value.value:L},ta.prototype.evaluate=function(L,N,ee,ye){return this.property.evaluate(this.value,this.parameters,L,N,ee,ye)};var ga=function(L){this._properties=L,this._values=Object.create(L.defaultPossiblyEvaluatedValues)};ga.prototype.get=function(L){return this._values[L]};var Kr=function(L){this.specification=L};Kr.prototype.possiblyEvaluate=function(L,N){return L.expression.evaluate(N)},Kr.prototype.interpolate=function(L,N,ee){var ye=Nr[this.specification.type];return ye?ye(L,N,ee):L};var ti=function(L,N){this.specification=L,this.overrides=N};ti.prototype.possiblyEvaluate=function(L,N,ee,ye){return new ta(this,"constant"===L.expression.kind||"camera"===L.expression.kind?{kind:"constant",value:L.expression.evaluate(N,null,{},ee,ye)}:L.expression,N)},ti.prototype.interpolate=function(L,N,ee){if("constant"!==L.value.kind||"constant"!==N.value.kind)return L;if(void 0===L.value.value||void 0===N.value.value)return new ta(this,{kind:"constant",value:void 0},L.parameters);var ye=Nr[this.specification.type];return ye?new ta(this,{kind:"constant",value:ye(L.value.value,N.value.value,ee)},L.parameters):L},ti.prototype.evaluate=function(L,N,ee,ye,Fe,Ve){return"constant"===L.kind?L.value:L.evaluate(N,ee,ye,Fe,Ve)};var hu=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.possiblyEvaluate=function(ee,ye,Fe,Ve){if(void 0===ee.value)return new ta(this,{kind:"constant",value:void 0},ye);if("constant"===ee.expression.kind){var $e=ee.expression.evaluate(ye,null,{},Fe,Ve),lt="resolvedImage"===ee.property.specification.type&&"string"!=typeof $e?$e.name:$e,gt=this._calculate(lt,lt,lt,ye);return new ta(this,{kind:"constant",value:gt},ye)}if("camera"===ee.expression.kind){var It=this._calculate(ee.expression.evaluate({zoom:ye.zoom-1}),ee.expression.evaluate({zoom:ye.zoom}),ee.expression.evaluate({zoom:ye.zoom+1}),ye);return new ta(this,{kind:"constant",value:It},ye)}return new ta(this,ee.expression,ye)},N.prototype.evaluate=function(ee,ye,Fe,Ve,$e,lt){if("source"===ee.kind){var gt=ee.evaluate(ye,Fe,Ve,$e,lt);return this._calculate(gt,gt,gt,ye)}return"composite"===ee.kind?this._calculate(ee.evaluate({zoom:Math.floor(ye.zoom)-1},Fe,Ve),ee.evaluate({zoom:Math.floor(ye.zoom)},Fe,Ve),ee.evaluate({zoom:Math.floor(ye.zoom)+1},Fe,Ve),ye):ee.value},N.prototype._calculate=function(ee,ye,Fe,Ve){return Ve.zoom>Ve.zoomHistory.lastIntegerZoom?{from:ee,to:ye}:{from:Fe,to:ye}},N.prototype.interpolate=function(ee){return ee},N}(ti),va=function(L){this.specification=L};va.prototype.possiblyEvaluate=function(L,N,ee,ye){if(void 0!==L.value){if("constant"===L.expression.kind){var Fe=L.expression.evaluate(N,null,{},ee,ye);return this._calculate(Fe,Fe,Fe,N)}return this._calculate(L.expression.evaluate(new oo(Math.floor(N.zoom-1),N)),L.expression.evaluate(new oo(Math.floor(N.zoom),N)),L.expression.evaluate(new oo(Math.floor(N.zoom+1),N)),N)}},va.prototype._calculate=function(L,N,ee,ye){return ye.zoom>ye.zoomHistory.lastIntegerZoom?{from:L,to:N}:{from:ee,to:N}},va.prototype.interpolate=function(L){return L};var il=function(L){this.specification=L};il.prototype.possiblyEvaluate=function(L,N,ee,ye){return!!L.expression.evaluate(N,null,{},ee,ye)},il.prototype.interpolate=function(){return!1};var ya=function(L){for(var N in this.properties=L,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],L){var ee=L[N];ee.specification.overridable&&this.overridableProperties.push(N);var ye=this.defaultPropertyValues[N]=new fs(ee,void 0),Fe=this.defaultTransitionablePropertyValues[N]=new rl(ee);this.defaultTransitioningPropertyValues[N]=Fe.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=ye.possiblyEvaluate({})}};Hr("DataDrivenProperty",ti),Hr("DataConstantProperty",Kr),Hr("CrossFadedDataDrivenProperty",hu),Hr("CrossFadedProperty",va),Hr("ColorRampProperty",il);var pu="-transition",xa=function(L){function N(ee,ye){if(L.call(this),this.id=ee.id,this.type=ee.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==ee.type&&(this.metadata=ee.metadata,this.minzoom=ee.minzoom,this.maxzoom=ee.maxzoom,"background"!==ee.type&&(this.source=ee.source,this.sourceLayer=ee["source-layer"],this.filter=ee.filter),ye.layout&&(this._unevaluatedLayout=new Xl(ye.layout)),ye.paint)){for(var Fe in this._transitionablePaint=new Vs(ye.paint),ee.paint)this.setPaintProperty(Fe,ee.paint[Fe],{validate:!1});for(var Ve in ee.layout)this.setLayoutProperty(Ve,ee.layout[Ve],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ga(ye.paint)}}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},N.prototype.getLayoutProperty=function(ee){return"visibility"===ee?this.visibility:this._unevaluatedLayout.getValue(ee)},N.prototype.setLayoutProperty=function(ee,ye,Fe){void 0===Fe&&(Fe={}),null!=ye&&this._validate(mi,"layers."+this.id+".layout."+ee,ee,ye,Fe)||("visibility"!==ee?this._unevaluatedLayout.setValue(ee,ye):this.visibility=ye)},N.prototype.getPaintProperty=function(ee){return _(ee,pu)?this._transitionablePaint.getTransition(ee.slice(0,-11)):this._transitionablePaint.getValue(ee)},N.prototype.setPaintProperty=function(ee,ye,Fe){if(void 0===Fe&&(Fe={}),null!=ye&&this._validate(jo,"layers."+this.id+".paint."+ee,ee,ye,Fe))return!1;if(_(ee,pu))return this._transitionablePaint.setTransition(ee.slice(0,-11),ye||void 0),!1;var $e=this._transitionablePaint._values[ee],lt="cross-faded-data-driven"===$e.property.specification["property-type"],gt=$e.value.isDataDriven(),It=$e.value;this._transitionablePaint.setValue(ee,ye),this._handleSpecialPaintPropertyUpdate(ee);var Ot=this._transitionablePaint._values[ee].value;return Ot.isDataDriven()||gt||lt||this._handleOverridablePaintPropertyUpdate(ee,It,Ot)},N.prototype._handleSpecialPaintPropertyUpdate=function(ee){},N.prototype._handleOverridablePaintPropertyUpdate=function(ee,ye,Fe){return!1},N.prototype.isHidden=function(ee){return!!(this.minzoom&&ee<this.minzoom)||!!(this.maxzoom&&ee>=this.maxzoom)||"none"===this.visibility},N.prototype.updateTransitions=function(ee){this._transitioningPaint=this._transitionablePaint.transitioned(ee,this._transitioningPaint)},N.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},N.prototype.recalculate=function(ee,ye){ee.getCrossfadeParameters&&(this._crossfadeParameters=ee.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(ee,void 0,ye)),this.paint=this._transitioningPaint.possiblyEvaluate(ee,void 0,ye)},N.prototype.serialize=function(){var ee={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(ee.layout=ee.layout||{},ee.layout.visibility=this.visibility),b(ee,function(ye,Fe){return!(void 0===ye||"layout"===Fe&&!Object.keys(ye).length||"paint"===Fe&&!Object.keys(ye).length)})},N.prototype._validate=function(ee,ye,Fe,Ve,$e){return void 0===$e&&($e={}),(!$e||!1!==$e.validate)&&Fa(this,ee.call(Fi,{key:ye,layerType:this.type,objectKey:Fe,value:Ve,styleSpec:He,style:{glyphs:!0,sprite:!0}}))},N.prototype.is3D=function(){return!1},N.prototype.isTileClipped=function(){return!1},N.prototype.hasOffscreenPass=function(){return!1},N.prototype.resize=function(){},N.prototype.isStateDependent=function(){for(var ee in this.paint._values){var ye=this.paint.get(ee);if(ye instanceof ta&&ha(ye.property.specification)&&("source"===ye.value.kind||"composite"===ye.value.kind)&&ye.value.isStateDependent)return!0}return!1},N}(xt),qa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ol=function(L,N){this._structArray=L,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ui=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Vo(L,N){void 0===N&&(N=1);var ee=0,ye=0;return{members:L.map(function(Fe){var $e=qa[Fe.type].BYTES_PER_ELEMENT,lt=ee=Ss(ee,Math.max(N,$e)),gt=Fe.components||1;return ye=Math.max(ye,$e),ee+=$e*gt,{name:Fe.name,type:Fe.type,components:gt,offset:lt}}),size:Ss(ee,Math.max(ye,N)),alignment:N}}function Ss(L,N){return Math.ceil(L/N)*N}ui.serialize=function(L,N){return L._trim(),N&&(L.isTransferred=!0,N.push(L.arrayBuffer)),{length:L.length,arrayBuffer:L.arrayBuffer}},ui.deserialize=function(L){var N=Object.create(this.prototype);return N.arrayBuffer=L.arrayBuffer,N.length=L.length,N.capacity=L.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},ui.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ui.prototype.clear=function(){this.length=0},ui.prototype.resize=function(L){this.reserve(L),this.length=L},ui.prototype.reserve=function(L){if(L>this.capacity){this.capacity=Math.max(L,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},ui.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ga=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,ee,ye)},N.prototype.emplace=function(ee,ye,Fe){var Ve=2*ee;return this.int16[Ve+0]=ye,this.int16[Ve+1]=Fe,ee},N}(ui);Ga.prototype.bytesPerElement=4,Hr("StructArrayLayout2i4",Ga);var Dl=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve){var $e=this.length;return this.resize($e+1),this.emplace($e,ee,ye,Fe,Ve)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e){var lt=4*ee;return this.int16[lt+0]=ye,this.int16[lt+1]=Fe,this.int16[lt+2]=Ve,this.int16[lt+3]=$e,ee},N}(ui);Dl.prototype.bytesPerElement=8,Hr("StructArrayLayout4i8",Dl);var Kl=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,ee,ye,Fe,Ve,$e,lt)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt){var It=6*ee;return this.int16[It+0]=ye,this.int16[It+1]=Fe,this.int16[It+2]=Ve,this.int16[It+3]=$e,this.int16[It+4]=lt,this.int16[It+5]=gt,ee},N}(ui);Kl.prototype.bytesPerElement=12,Hr("StructArrayLayout2i4i12",Kl);var Jl=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,ee,ye,Fe,Ve,$e,lt)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt){var It=4*ee,Ot=8*ee;return this.int16[It+0]=ye,this.int16[It+1]=Fe,this.uint8[Ot+4]=Ve,this.uint8[Ot+5]=$e,this.uint8[Ot+6]=lt,this.uint8[Ot+7]=gt,ee},N}(ui);Jl.prototype.bytesPerElement=8,Hr("StructArrayLayout2i4ub8",Jl);var al=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt){var en=this.length;return this.resize(en+1),this.emplace(en,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en){var Yt=9*ee,mn=18*ee;return this.uint16[Yt+0]=ye,this.uint16[Yt+1]=Fe,this.uint16[Yt+2]=Ve,this.uint16[Yt+3]=$e,this.uint16[Yt+4]=lt,this.uint16[Yt+5]=gt,this.uint16[Yt+6]=It,this.uint16[Yt+7]=Ot,this.uint8[mn+16]=Gt,this.uint8[mn+17]=en,ee},N}(ui);al.prototype.bytesPerElement=18,Hr("StructArrayLayout8ui2ub18",al);var V=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt){var mn=this.length;return this.resize(mn+1),this.emplace(mn,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn){var wn=12*ee;return this.int16[wn+0]=ye,this.int16[wn+1]=Fe,this.int16[wn+2]=Ve,this.int16[wn+3]=$e,this.uint16[wn+4]=lt,this.uint16[wn+5]=gt,this.uint16[wn+6]=It,this.uint16[wn+7]=Ot,this.int16[wn+8]=Gt,this.int16[wn+9]=en,this.int16[wn+10]=Yt,this.int16[wn+11]=mn,ee},N}(ui);V.prototype.bytesPerElement=24,Hr("StructArrayLayout4i4ui4i24",V);var Y=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,ee,ye,Fe)},N.prototype.emplace=function(ee,ye,Fe,Ve){var $e=3*ee;return this.float32[$e+0]=ye,this.float32[$e+1]=Fe,this.float32[$e+2]=Ve,ee},N}(ui);Y.prototype.bytesPerElement=12,Hr("StructArrayLayout3f12",Y);var W=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee){var ye=this.length;return this.resize(ye+1),this.emplace(ye,ee)},N.prototype.emplace=function(ee,ye){return this.uint32[1*ee+0]=ye,ee},N}(ui);W.prototype.bytesPerElement=4,Hr("StructArrayLayout1ul4",W);var re=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot){var Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,ee,ye,Fe,Ve,$e,lt,gt,It,Ot)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt){var en=10*ee,Yt=5*ee;return this.int16[en+0]=ye,this.int16[en+1]=Fe,this.int16[en+2]=Ve,this.int16[en+3]=$e,this.int16[en+4]=lt,this.int16[en+5]=gt,this.uint32[Yt+3]=It,this.uint16[en+8]=Ot,this.uint16[en+9]=Gt,ee},N}(ui);re.prototype.bytesPerElement=20,Hr("StructArrayLayout6i1ul2ui20",re);var _e=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,ee,ye,Fe,Ve,$e,lt)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt){var It=6*ee;return this.int16[It+0]=ye,this.int16[It+1]=Fe,this.int16[It+2]=Ve,this.int16[It+3]=$e,this.int16[It+4]=lt,this.int16[It+5]=gt,ee},N}(ui);_e.prototype.bytesPerElement=12,Hr("StructArrayLayout2i2i2i12",_e);var Pe=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e){var lt=this.length;return this.resize(lt+1),this.emplace(lt,ee,ye,Fe,Ve,$e)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt){var gt=4*ee,It=8*ee;return this.float32[gt+0]=ye,this.float32[gt+1]=Fe,this.float32[gt+2]=Ve,this.int16[It+6]=$e,this.int16[It+7]=lt,ee},N}(ui);Pe.prototype.bytesPerElement=16,Hr("StructArrayLayout2f1f2i16",Pe);var q=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve){var $e=this.length;return this.resize($e+1),this.emplace($e,ee,ye,Fe,Ve)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e){var lt=12*ee,gt=3*ee;return this.uint8[lt+0]=ye,this.uint8[lt+1]=Fe,this.float32[gt+1]=Ve,this.float32[gt+2]=$e,ee},N}(ui);q.prototype.bytesPerElement=12,Hr("StructArrayLayout2ub2f12",q);var oe=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,ee,ye,Fe)},N.prototype.emplace=function(ee,ye,Fe,Ve){var $e=3*ee;return this.uint16[$e+0]=ye,this.uint16[$e+1]=Fe,this.uint16[$e+2]=Ve,ee},N}(ui);oe.prototype.bytesPerElement=6,Hr("StructArrayLayout3ui6",oe);var de=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn){var Kn=this.length;return this.resize(Kn+1),this.emplace(Kn,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn,Kn){var sr=24*ee,pr=12*ee,_r=48*ee;return this.int16[sr+0]=ye,this.int16[sr+1]=Fe,this.uint16[sr+2]=Ve,this.uint16[sr+3]=$e,this.uint32[pr+2]=lt,this.uint32[pr+3]=gt,this.uint32[pr+4]=It,this.uint16[sr+10]=Ot,this.uint16[sr+11]=Gt,this.uint16[sr+12]=en,this.float32[pr+7]=Yt,this.float32[pr+8]=mn,this.uint8[_r+36]=wn,this.uint8[_r+37]=Bn,this.uint8[_r+38]=jn,this.uint32[pr+10]=Yn,this.int16[sr+22]=Kn,ee},N}(ui);de.prototype.bytesPerElement=48,Hr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",de);var Me=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn,Kn,sr,pr,_r,Fr,Dr,jr,Yr,yi,Xr,di){var oi=this.length;return this.resize(oi+1),this.emplace(oi,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn,Kn,sr,pr,_r,Fr,Dr,jr,Yr,yi,Xr,di)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn,Bn,jn,Yn,Kn,sr,pr,_r,Fr,Dr,jr,Yr,yi,Xr,di,oi){var Wr=34*ee,Ri=17*ee;return this.int16[Wr+0]=ye,this.int16[Wr+1]=Fe,this.int16[Wr+2]=Ve,this.int16[Wr+3]=$e,this.int16[Wr+4]=lt,this.int16[Wr+5]=gt,this.int16[Wr+6]=It,this.int16[Wr+7]=Ot,this.uint16[Wr+8]=Gt,this.uint16[Wr+9]=en,this.uint16[Wr+10]=Yt,this.uint16[Wr+11]=mn,this.uint16[Wr+12]=wn,this.uint16[Wr+13]=Bn,this.uint16[Wr+14]=jn,this.uint16[Wr+15]=Yn,this.uint16[Wr+16]=Kn,this.uint16[Wr+17]=sr,this.uint16[Wr+18]=pr,this.uint16[Wr+19]=_r,this.uint16[Wr+20]=Fr,this.uint16[Wr+21]=Dr,this.uint16[Wr+22]=jr,this.uint32[Ri+12]=Yr,this.float32[Ri+13]=yi,this.float32[Ri+14]=Xr,this.float32[Ri+15]=di,this.float32[Ri+16]=oi,ee},N}(ui);Me.prototype.bytesPerElement=68,Hr("StructArrayLayout8i15ui1ul4f68",Me);var Se=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee){var ye=this.length;return this.resize(ye+1),this.emplace(ye,ee)},N.prototype.emplace=function(ee,ye){return this.float32[1*ee+0]=ye,ee},N}(ui);Se.prototype.bytesPerElement=4,Hr("StructArrayLayout1f4",Se);var ze=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,ee,ye,Fe)},N.prototype.emplace=function(ee,ye,Fe,Ve){var $e=3*ee;return this.int16[$e+0]=ye,this.int16[$e+1]=Fe,this.int16[$e+2]=Ve,ee},N}(ui);ze.prototype.bytesPerElement=6,Hr("StructArrayLayout3i6",ze);var Ye=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,ee,ye,Fe)},N.prototype.emplace=function(ee,ye,Fe,Ve){var lt=4*ee;return this.uint32[2*ee+0]=ye,this.uint16[lt+2]=Fe,this.uint16[lt+3]=Ve,ee},N}(ui);Ye.prototype.bytesPerElement=8,Hr("StructArrayLayout1ul2ui8",Ye);var Xe=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,ee,ye)},N.prototype.emplace=function(ee,ye,Fe){var Ve=2*ee;return this.uint16[Ve+0]=ye,this.uint16[Ve+1]=Fe,ee},N}(ui);Xe.prototype.bytesPerElement=4,Hr("StructArrayLayout2ui4",Xe);var tt=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee){var ye=this.length;return this.resize(ye+1),this.emplace(ye,ee)},N.prototype.emplace=function(ee,ye){return this.uint16[1*ee+0]=ye,ee},N}(ui);tt.prototype.bytesPerElement=2,Hr("StructArrayLayout1ui2",tt);var rt=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,ee,ye)},N.prototype.emplace=function(ee,ye,Fe){var Ve=2*ee;return this.float32[Ve+0]=ye,this.float32[Ve+1]=Fe,ee},N}(ui);rt.prototype.bytesPerElement=8,Hr("StructArrayLayout2f8",rt);var ft=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},N.prototype.emplaceBack=function(ee,ye,Fe,Ve){var $e=this.length;return this.resize($e+1),this.emplace($e,ee,ye,Fe,Ve)},N.prototype.emplace=function(ee,ye,Fe,Ve,$e){var lt=4*ee;return this.float32[lt+0]=ye,this.float32[lt+1]=Fe,this.float32[lt+2]=Ve,this.float32[lt+3]=$e,ee},N}(ui);ft.prototype.bytesPerElement=16,Hr("StructArrayLayout4f16",ft);var bt=function(L){function N(){L.apply(this,arguments)}L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N;var ee={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return ee.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},ee.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},ee.x1.get=function(){return this._structArray.int16[this._pos2+2]},ee.y1.get=function(){return this._structArray.int16[this._pos2+3]},ee.x2.get=function(){return this._structArray.int16[this._pos2+4]},ee.y2.get=function(){return this._structArray.int16[this._pos2+5]},ee.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},ee.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},ee.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},ee.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(N.prototype,ee),N}(ol);bt.prototype.size=20;var At=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.get=function(ee){return new bt(this,ee)},N}(re);Hr("CollisionBoxArray",At);var Ut=function(L){function N(){L.apply(this,arguments)}L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N;var ee={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return ee.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},ee.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},ee.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},ee.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},ee.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},ee.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},ee.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},ee.segment.get=function(){return this._structArray.uint16[this._pos2+10]},ee.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},ee.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},ee.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},ee.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},ee.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},ee.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},ee.placedOrientation.set=function(ye){this._structArray.uint8[this._pos1+37]=ye},ee.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},ee.hidden.set=function(ye){this._structArray.uint8[this._pos1+38]=ye},ee.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},ee.crossTileID.set=function(ye){this._structArray.uint32[this._pos4+10]=ye},ee.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(N.prototype,ee),N}(ol);Ut.prototype.size=48;var qt=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.get=function(ee){return new Ut(this,ee)},N}(de);Hr("PlacedSymbolArray",qt);var jt=function(L){function N(){L.apply(this,arguments)}L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N;var ee={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return ee.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},ee.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},ee.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},ee.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},ee.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},ee.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},ee.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},ee.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},ee.key.get=function(){return this._structArray.uint16[this._pos2+8]},ee.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},ee.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},ee.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},ee.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},ee.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},ee.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},ee.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},ee.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},ee.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},ee.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},ee.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},ee.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},ee.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},ee.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},ee.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},ee.crossTileID.set=function(ye){this._structArray.uint32[this._pos4+12]=ye},ee.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},ee.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},ee.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},ee.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(N.prototype,ee),N}(ol);jt.prototype.size=68;var Kt=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.get=function(ee){return new jt(this,ee)},N}(Me);Hr("SymbolInstanceArray",Kt);var Vt=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.getoffsetX=function(ee){return this.float32[1*ee+0]},N}(Se);Hr("GlyphOffsetArray",Vt);var gn=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.getx=function(ee){return this.int16[3*ee+0]},N.prototype.gety=function(ee){return this.int16[3*ee+1]},N.prototype.gettileUnitDistanceFromAnchor=function(ee){return this.int16[3*ee+2]},N}(ze);Hr("SymbolLineVertexArray",gn);var ln=function(L){function N(){L.apply(this,arguments)}L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N;var ee={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return ee.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},ee.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},ee.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(N.prototype,ee),N}(ol);ln.prototype.size=8;var nn=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.get=function(ee){return new ln(this,ee)},N}(Ye);Hr("FeatureIndexArray",nn);var On=Vo([{name:"a_pos",components:2,type:"Int16"}],4).members,Pn=function(L){void 0===L&&(L=[]),this.segments=L};function tr(L,N){return 256*(L=l(Math.floor(L),0,255))+l(Math.floor(N),0,255)}Pn.prototype.prepareSegment=function(L,N,ee,ye){var Fe=this.segments[this.segments.length-1];return L>Pn.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Pn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+L),(!Fe||Fe.vertexLength+L>Pn.MAX_VERTEX_ARRAY_LENGTH||Fe.sortKey!==ye)&&(Fe={vertexOffset:N.length,primitiveOffset:ee.length,vertexLength:0,primitiveLength:0},void 0!==ye&&(Fe.sortKey=ye),this.segments.push(Fe)),Fe},Pn.prototype.get=function(){return this.segments},Pn.prototype.destroy=function(){for(var L=0,N=this.segments;L<N.length;L+=1){var ee=N[L];for(var ye in ee.vaos)ee.vaos[ye].destroy()}},Pn.simpleSegment=function(L,N,ee,ye){return new Pn([{vertexOffset:L,primitiveOffset:N,vertexLength:ee,primitiveLength:ye,vaos:{},sortKey:0}])},Pn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Hr("SegmentVector",Pn);var Jn=Vo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ur=k(function(L){L.exports=function(N,ee){var ye,Fe,Ve,$e,lt,gt,It,Ot;for(Fe=N.length-(ye=3&N.length),Ve=ee,lt=3432918353,gt=461845907,Ot=0;Ot<Fe;)It=255&N.charCodeAt(Ot)|(255&N.charCodeAt(++Ot))<<8|(255&N.charCodeAt(++Ot))<<16|(255&N.charCodeAt(++Ot))<<24,++Ot,Ve=27492+(65535&($e=5*(65535&(Ve=(Ve^=It=(65535&(It=(It=(65535&It)*lt+(((It>>>16)*lt&65535)<<16)&4294967295)<<15|It>>>17))*gt+(((It>>>16)*gt&65535)<<16)&4294967295)<<13|Ve>>>19))+((5*(Ve>>>16)&65535)<<16)&4294967295))+((58964+($e>>>16)&65535)<<16);switch(It=0,ye){case 3:It^=(255&N.charCodeAt(Ot+2))<<16;case 2:It^=(255&N.charCodeAt(Ot+1))<<8;case 1:Ve^=It=(65535&(It=(It=(65535&(It^=255&N.charCodeAt(Ot)))*lt+(((It>>>16)*lt&65535)<<16)&4294967295)<<15|It>>>17))*gt+(((It>>>16)*gt&65535)<<16)&4294967295}return Ve^=N.length,Ve=2246822507*(65535&(Ve^=Ve>>>16))+((2246822507*(Ve>>>16)&65535)<<16)&4294967295,Ve=3266489909*(65535&(Ve^=Ve>>>13))+((3266489909*(Ve>>>16)&65535)<<16)&4294967295,(Ve^=Ve>>>16)>>>0}}),vr=k(function(L){L.exports=function(N,ee){for(var ye,Fe=N.length,Ve=ee^Fe,$e=0;Fe>=4;)ye=1540483477*(65535&(ye=255&N.charCodeAt($e)|(255&N.charCodeAt(++$e))<<8|(255&N.charCodeAt(++$e))<<16|(255&N.charCodeAt(++$e))<<24))+((1540483477*(ye>>>16)&65535)<<16),Ve=1540483477*(65535&Ve)+((1540483477*(Ve>>>16)&65535)<<16)^(ye=1540483477*(65535&(ye^=ye>>>24))+((1540483477*(ye>>>16)&65535)<<16)),Fe-=4,++$e;switch(Fe){case 3:Ve^=(255&N.charCodeAt($e+2))<<16;case 2:Ve^=(255&N.charCodeAt($e+1))<<8;case 1:Ve=1540483477*(65535&(Ve^=255&N.charCodeAt($e)))+((1540483477*(Ve>>>16)&65535)<<16)}return Ve=1540483477*(65535&(Ve^=Ve>>>13))+((1540483477*(Ve>>>16)&65535)<<16),(Ve^=Ve>>>15)>>>0}}),wr=ur,Or=vr;wr.murmur3=ur,wr.murmur2=Or;var Rr=function(){this.ids=[],this.positions=[],this.indexed=!1};Rr.prototype.add=function(L,N,ee,ye){this.ids.push(ir(L)),this.positions.push(N,ee,ye)},Rr.prototype.getPositions=function(L){for(var N=ir(L),ee=0,ye=this.ids.length-1;ee<ye;){var Fe=ee+ye>>1;this.ids[Fe]>=N?ye=Fe:ee=Fe+1}for(var Ve=[];this.ids[ee]===N;)Ve.push({index:this.positions[3*ee],start:this.positions[3*ee+1],end:this.positions[3*ee+2]}),ee++;return Ve},Rr.serialize=function(L,N){var ee=new Float64Array(L.ids),ye=new Uint32Array(L.positions);return Ar(ee,ye,0,ee.length-1),N&&N.push(ee.buffer,ye.buffer),{ids:ee,positions:ye}},Rr.deserialize=function(L){var N=new Rr;return N.ids=L.ids,N.positions=L.positions,N.indexed=!0,N};var si=Math.pow(2,53)-1;function ir(L){var N=+L;return!isNaN(N)&&N<=si?N:wr(String(L))}function Ar(L,N,ee,ye){for(;ee<ye;){for(var Fe=L[ee+ye>>1],Ve=ee-1,$e=ye+1;;){do{Ve++}while(L[Ve]<Fe);do{$e--}while(L[$e]>Fe);if(Ve>=$e)break;Lr(L,Ve,$e),Lr(N,3*Ve,3*$e),Lr(N,3*Ve+1,3*$e+1),Lr(N,3*Ve+2,3*$e+2)}$e-ee<ye-$e?(Ar(L,N,ee,$e),ee=$e+1):(Ar(L,N,$e+1,ye),ye=$e)}}function Lr(L,N,ee){var ye=L[N];L[N]=L[ee],L[ee]=ye}Hr("FeaturePositionMap",Rr);var qr=function(L,N){this.gl=L.gl,this.location=N},ni=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=0}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){this.current!==ee&&(this.current=ee,this.gl.uniform1i(this.location,ee))},N}(qr),gi=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=0}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){this.current!==ee&&(this.current=ee,this.gl.uniform1f(this.location,ee))},N}(qr),Ai=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=[0,0]}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){ee[0]===this.current[0]&&ee[1]===this.current[1]||(this.current=ee,this.gl.uniform2f(this.location,ee[0],ee[1]))},N}(qr),Yi=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=[0,0,0]}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){ee[0]===this.current[0]&&ee[1]===this.current[1]&&ee[2]===this.current[2]||(this.current=ee,this.gl.uniform3f(this.location,ee[0],ee[1],ee[2]))},N}(qr),xo=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=[0,0,0,0]}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){ee[0]===this.current[0]&&ee[1]===this.current[1]&&ee[2]===this.current[2]&&ee[3]===this.current[3]||(this.current=ee,this.gl.uniform4f(this.location,ee[0],ee[1],ee[2],ee[3]))},N}(qr),mo=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=In.transparent}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){ee.r===this.current.r&&ee.g===this.current.g&&ee.b===this.current.b&&ee.a===this.current.a||(this.current=ee,this.gl.uniform4f(this.location,ee.r,ee.g,ee.b,ee.a))},N}(qr),$i=new Float32Array(16),Do=function(L){function N(ee,ye){L.call(this,ee,ye),this.current=$i}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.set=function(ee){if(ee[12]!==this.current[12]||ee[0]!==this.current[0])return this.current=ee,void this.gl.uniformMatrix4fv(this.location,!1,ee);for(var ye=1;ye<16;ye++)if(ee[ye]!==this.current[ye]){this.current=ee,this.gl.uniformMatrix4fv(this.location,!1,ee);break}},N}(qr);function aa(L){return[tr(255*L.r,255*L.g),tr(255*L.b,255*L.a)]}var $r=function(L,N,ee){this.value=L,this.uniformNames=N.map(function(ye){return"u_"+ye}),this.type=ee};$r.prototype.setUniform=function(L,N,ee){L.set(ee.constantOr(this.value))},$r.prototype.getBinding=function(L,N,ee){return"color"===this.type?new mo(L,N):new gi(L,N)};var Zo=function(L,N){this.uniformNames=N.map(function(ee){return"u_"+ee}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Zo.prototype.setConstantPatternPositions=function(L,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=L.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=L.tlbr},Zo.prototype.setUniform=function(L,N,ee,ye){var Fe="u_pattern_to"===ye?this.patternTo:"u_pattern_from"===ye?this.patternFrom:"u_pixel_ratio_to"===ye?this.pixelRatioTo:"u_pixel_ratio_from"===ye?this.pixelRatioFrom:null;Fe&&L.set(Fe)},Zo.prototype.getBinding=function(L,N,ee){return"u_pattern"===ee.substr(0,9)?new xo(L,N):new gi(L,N)};var Xi=function(L,N,ee,ye){this.expression=L,this.type=ee,this.maxValue=0,this.paintVertexAttributes=N.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:"color"===ee?2:1,offset:0}}),this.paintVertexArray=new ye};Xi.prototype.populatePaintArray=function(L,N,ee,ye,Fe){var Ve=this.paintVertexArray.length,$e=this.expression.evaluate(new oo(0),N,{},ye,[],Fe);this.paintVertexArray.resize(L),this._setPaintValue(Ve,L,$e)},Xi.prototype.updatePaintArray=function(L,N,ee,ye){var Fe=this.expression.evaluate({zoom:0},ee,ye);this._setPaintValue(L,N,Fe)},Xi.prototype._setPaintValue=function(L,N,ee){if("color"===this.type)for(var ye=aa(ee),Fe=L;Fe<N;Fe++)this.paintVertexArray.emplace(Fe,ye[0],ye[1]);else{for(var Ve=L;Ve<N;Ve++)this.paintVertexArray.emplace(Ve,ee);this.maxValue=Math.max(this.maxValue,Math.abs(ee))}},Xi.prototype.upload=function(L){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=L.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Xi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Oi=function(L,N,ee,ye,Fe,Ve){this.expression=L,this.uniformNames=N.map(function($e){return"u_"+$e+"_t"}),this.type=ee,this.useIntegerZoom=ye,this.zoom=Fe,this.maxValue=0,this.paintVertexAttributes=N.map(function($e){return{name:"a_"+$e,type:"Float32",components:"color"===ee?4:2,offset:0}}),this.paintVertexArray=new Ve};Oi.prototype.populatePaintArray=function(L,N,ee,ye,Fe){var Ve=this.expression.evaluate(new oo(this.zoom),N,{},ye,[],Fe),$e=this.expression.evaluate(new oo(this.zoom+1),N,{},ye,[],Fe),lt=this.paintVertexArray.length;this.paintVertexArray.resize(L),this._setPaintValue(lt,L,Ve,$e)},Oi.prototype.updatePaintArray=function(L,N,ee,ye){var Fe=this.expression.evaluate({zoom:this.zoom},ee,ye),Ve=this.expression.evaluate({zoom:this.zoom+1},ee,ye);this._setPaintValue(L,N,Fe,Ve)},Oi.prototype._setPaintValue=function(L,N,ee,ye){if("color"===this.type)for(var Fe=aa(ee),Ve=aa(ye),$e=L;$e<N;$e++)this.paintVertexArray.emplace($e,Fe[0],Fe[1],Ve[0],Ve[1]);else{for(var lt=L;lt<N;lt++)this.paintVertexArray.emplace(lt,ee,ye);this.maxValue=Math.max(this.maxValue,Math.abs(ee),Math.abs(ye))}},Oi.prototype.upload=function(L){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=L.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Oi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Oi.prototype.setUniform=function(L,N){var ee=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,ye=l(this.expression.interpolationFactor(ee,this.zoom,this.zoom+1),0,1);L.set(ye)},Oi.prototype.getBinding=function(L,N,ee){return new gi(L,N)};var bo=function(L,N,ee,ye,Fe,Ve){this.expression=L,this.type=N,this.useIntegerZoom=ee,this.zoom=ye,this.layerId=Ve,this.zoomInPaintVertexArray=new Fe,this.zoomOutPaintVertexArray=new Fe};bo.prototype.populatePaintArray=function(L,N,ee){var ye=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(L),this.zoomOutPaintVertexArray.resize(L),this._setPaintValues(ye,L,N.patterns&&N.patterns[this.layerId],ee)},bo.prototype.updatePaintArray=function(L,N,ee,ye,Fe){this._setPaintValues(L,N,ee.patterns&&ee.patterns[this.layerId],Fe)},bo.prototype._setPaintValues=function(L,N,ee,ye){if(ye&&ee){var lt=ye[ee.min],gt=ye[ee.mid],It=ye[ee.max];if(lt&&gt&&It)for(var Ot=L;Ot<N;Ot++)this.zoomInPaintVertexArray.emplace(Ot,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],lt.tl[0],lt.tl[1],lt.br[0],lt.br[1],gt.pixelRatio,lt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ot,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],It.tl[0],It.tl[1],It.br[0],It.br[1],gt.pixelRatio,It.pixelRatio)}},bo.prototype.upload=function(L){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=L.createVertexBuffer(this.zoomInPaintVertexArray,Jn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=L.createVertexBuffer(this.zoomOutPaintVertexArray,Jn.members,this.expression.isStateDependent))},bo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var uo=function(L,N,ee,ye){this.binders={},this.layoutAttributes=ye,this._buffers=[];var Fe=[];for(var Ve in L.paint._values)if(ee(Ve)){var $e=L.paint.get(Ve);if($e instanceof ta&&ha($e.property.specification)){var lt=na(Ve,L.type),gt=$e.value,It=$e.property.specification.type,Ot=$e.property.useIntegerZoom,Gt=$e.property.specification["property-type"],en="cross-faded"===Gt||"cross-faded-data-driven"===Gt;if("constant"===gt.kind)this.binders[Ve]=en?new Zo(gt.value,lt):new $r(gt.value,lt,It),Fe.push("/u_"+Ve);else if("source"===gt.kind||en){var Yt=Io(Ve,It,"source");this.binders[Ve]=en?new bo(gt,It,Ot,N,Yt,L.id):new Xi(gt,lt,It,Yt),Fe.push("/a_"+Ve)}else{var mn=Io(Ve,It,"composite");this.binders[Ve]=new Oi(gt,lt,It,Ot,N,mn),Fe.push("/z_"+Ve)}}}this.cacheKey=Fe.sort().join("")};uo.prototype.getMaxValue=function(L){var N=this.binders[L];return N instanceof Xi||N instanceof Oi?N.maxValue:0},uo.prototype.populatePaintArrays=function(L,N,ee,ye,Fe){for(var Ve in this.binders){var $e=this.binders[Ve];($e instanceof Xi||$e instanceof Oi||$e instanceof bo)&&$e.populatePaintArray(L,N,ee,ye,Fe)}},uo.prototype.setConstantPatternPositions=function(L,N){for(var ee in this.binders){var ye=this.binders[ee];ye instanceof Zo&&ye.setConstantPatternPositions(L,N)}},uo.prototype.updatePaintArrays=function(L,N,ee,ye,Fe){var Ve=!1;for(var $e in L)for(var lt=0,gt=N.getPositions($e);lt<gt.length;lt+=1){var It=gt[lt],Ot=ee.feature(It.index);for(var Gt in this.binders){var en=this.binders[Gt];if((en instanceof Xi||en instanceof Oi||en instanceof bo)&&!0===en.expression.isStateDependent){var Yt=ye.paint.get(Gt);en.expression=Yt.value,en.updatePaintArray(It.start,It.end,Ot,L[$e],Fe),Ve=!0}}}return Ve},uo.prototype.defines=function(){var L=[];for(var N in this.binders){var ee=this.binders[N];(ee instanceof $r||ee instanceof Zo)&&L.push.apply(L,ee.uniformNames.map(function(ye){return"#define HAS_UNIFORM_"+ye}))}return L},uo.prototype.getPaintVertexBuffers=function(){return this._buffers},uo.prototype.getUniforms=function(L,N){var ee=[];for(var ye in this.binders){var Fe=this.binders[ye];if(Fe instanceof $r||Fe instanceof Zo||Fe instanceof Oi)for(var Ve=0,$e=Fe.uniformNames;Ve<$e.length;Ve+=1){var lt=$e[Ve];if(N[lt]){var gt=Fe.getBinding(L,N[lt],lt);ee.push({name:lt,property:ye,binding:gt})}}}return ee},uo.prototype.setUniforms=function(L,N,ee,ye){for(var Fe=0,Ve=N;Fe<Ve.length;Fe+=1){var $e=Ve[Fe],lt=$e.name,gt=$e.property;this.binders[gt].setUniform($e.binding,ye,ee.get(gt),lt)}},uo.prototype.updatePaintBuffers=function(L){for(var N in this._buffers=[],this.binders){var ee=this.binders[N];if(L&&ee instanceof bo){var ye=2===L.fromScale?ee.zoomInPaintVertexBuffer:ee.zoomOutPaintVertexBuffer;ye&&this._buffers.push(ye)}else(ee instanceof Xi||ee instanceof Oi)&&ee.paintVertexBuffer&&this._buffers.push(ee.paintVertexBuffer)}},uo.prototype.upload=function(L){for(var N in this.binders){var ee=this.binders[N];(ee instanceof Xi||ee instanceof Oi||ee instanceof bo)&&ee.upload(L)}this.updatePaintBuffers()},uo.prototype.destroy=function(){for(var L in this.binders){var N=this.binders[L];(N instanceof Xi||N instanceof Oi||N instanceof bo)&&N.destroy()}};var _o=function(L,N,ee,ye){void 0===ye&&(ye=function(){return!0}),this.programConfigurations={};for(var Fe=0,Ve=N;Fe<Ve.length;Fe+=1){var $e=Ve[Fe];this.programConfigurations[$e.id]=new uo($e,ee,ye,L)}this.needsUpload=!1,this._featureMap=new Rr,this._bufferOffset=0};function na(L,N){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[L]||[L.replace(N+"-","").replace(/-/g,"_")]}function Io(L,N,ee){var Fe={"line-pattern":{source:al,composite:al},"fill-pattern":{source:al,composite:al},"fill-extrusion-pattern":{source:al,composite:al}}[L];return Fe&&Fe[ee]||{color:{source:rt,composite:ft},number:{source:Se,composite:rt}}[N][ee]}_o.prototype.populatePaintArrays=function(L,N,ee,ye,Fe,Ve){for(var $e in this.programConfigurations)this.programConfigurations[$e].populatePaintArrays(L,N,ye,Fe,Ve);void 0!==N.id&&this._featureMap.add(N.id,ee,this._bufferOffset,L),this._bufferOffset=L,this.needsUpload=!0},_o.prototype.updatePaintArrays=function(L,N,ee,ye){for(var Fe=0,Ve=ee;Fe<Ve.length;Fe+=1){var $e=Ve[Fe];this.needsUpload=this.programConfigurations[$e.id].updatePaintArrays(L,this._featureMap,N,$e,ye)||this.needsUpload}},_o.prototype.get=function(L){return this.programConfigurations[L]},_o.prototype.upload=function(L){if(this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(L);this.needsUpload=!1}},_o.prototype.destroy=function(){for(var L in this.programConfigurations)this.programConfigurations[L].destroy()},Hr("ConstantBinder",$r),Hr("CrossFadedConstantBinder",Zo),Hr("SourceExpressionBinder",Xi),Hr("CrossFadedCompositeBinder",bo),Hr("CompositeExpressionBinder",Oi),Hr("ProgramConfiguration",uo,{omit:["_buffers"]}),Hr("ProgramConfigurationSet",_o);var eo=8192,Wa=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function ds(L){for(var N=eo/L.extent,ee=L.loadGeometry(),ye=0;ye<ee.length;ye++)for(var Fe=ee[ye],Ve=0;Ve<Fe.length;Ve++){var $e=Fe[Ve];$e.x=Math.round($e.x*N),$e.y=Math.round($e.y*N),($e.x<Wa.min||$e.x>Wa.max||$e.y<Wa.min||$e.y>Wa.max)&&(D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),$e.x=l($e.x,Wa.min,Wa.max),$e.y=l($e.y,Wa.min,Wa.max))}return ee}function Tr(L,N,ee,ye,Fe){L.emplaceBack(2*N+(ye+1)/2,2*ee+(Fe+1)/2)}var hi=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.layoutVertexArray=new Ga,this.indexArray=new oe,this.segments=new Pn,this.programConfigurations=new _o(On,L.layers,L.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function Es(L,N){for(var ee=0;ee<L.length;ee++)if(Yc(N,L[ee]))return!0;for(var ye=0;ye<N.length;ye++)if(Yc(L,N[ye]))return!0;return!!ec(L,N)}function Mf(L,N,ee){return!!Yc(L,N)||!!Zc(N,L,ee)}function Za(L,N){if(1===L.length)return gh(N,L[0]);for(var ee=0;ee<N.length;ee++)for(var ye=N[ee],Fe=0;Fe<ye.length;Fe++)if(Yc(L,ye[Fe]))return!0;for(var Ve=0;Ve<L.length;Ve++)if(gh(N,L[Ve]))return!0;for(var $e=0;$e<N.length;$e++)if(ec(L,N[$e]))return!0;return!1}function mh(L,N,ee){if(L.length>1){if(ec(L,N))return!0;for(var ye=0;ye<N.length;ye++)if(Zc(N[ye],L,ee))return!0}for(var Fe=0;Fe<L.length;Fe++)if(Zc(L[Fe],N,ee))return!0;return!1}function ec(L,N){if(0===L.length||0===N.length)return!1;for(var ee=0;ee<L.length-1;ee++)for(var ye=L[ee],Fe=L[ee+1],Ve=0;Ve<N.length-1;Ve++)if(sl(ye,Fe,N[Ve],N[Ve+1]))return!0;return!1}function sl(L,N,ee,ye){return S(L,ee,ye)!==S(N,ee,ye)&&S(L,N,ee)!==S(L,N,ye)}function Zc(L,N,ee){var ye=ee*ee;if(1===N.length)return L.distSqr(N[0])<ye;for(var Fe=1;Fe<N.length;Fe++)if(tc(L,N[Fe-1],N[Fe])<ye)return!0;return!1}function tc(L,N,ee){var ye=N.distSqr(ee);if(0===ye)return L.distSqr(N);var Fe=((L.x-N.x)*(ee.x-N.x)+(L.y-N.y)*(ee.y-N.y))/ye;return L.distSqr(Fe<0?N:Fe>1?ee:ee.sub(N)._mult(Fe)._add(N))}function gh(L,N){for(var ee,ye,Fe,Ve=!1,$e=0;$e<L.length;$e++)for(var lt=0,gt=(ee=L[$e]).length-1;lt<ee.length;gt=lt++)(ye=ee[lt]).y>N.y!=(Fe=ee[gt]).y>N.y&&N.x<(Fe.x-ye.x)*(N.y-ye.y)/(Fe.y-ye.y)+ye.x&&(Ve=!Ve);return Ve}function Yc(L,N){for(var ee=!1,ye=0,Fe=L.length-1;ye<L.length;Fe=ye++){var Ve=L[ye],$e=L[Fe];Ve.y>N.y!=$e.y>N.y&&N.x<($e.x-Ve.x)*(N.y-Ve.y)/($e.y-Ve.y)+Ve.x&&(ee=!ee)}return ee}function Af(L,N,ee){var ye=ee[0],Fe=ee[2];if(L.x<ye.x&&N.x<ye.x||L.x>Fe.x&&N.x>Fe.x||L.y<ye.y&&N.y<ye.y||L.y>Fe.y&&N.y>Fe.y)return!1;var Ve=S(L,N,ee[0]);return Ve!==S(L,N,ee[1])||Ve!==S(L,N,ee[2])||Ve!==S(L,N,ee[3])}function ns(L,N,ee){var ye=N.paint.get(L).value;return"constant"===ye.kind?ye.value:ee.programConfigurations.get(N.id).getMaxValue(L)}function Ql(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function _d(L,N,ee,ye,Fe){if(!N[0]&&!N[1])return L;var Ve=i.convert(N)._mult(Fe);"viewport"===ee&&Ve._rotate(-ye);for(var $e=[],lt=0;lt<L.length;lt++)$e.push(L[lt].sub(Ve));return $e}hi.prototype.populate=function(L,N,ee){var ye=this.layers[0],Fe=[],Ve=null;"circle"===ye.type&&(Ve=ye.layout.get("circle-sort-key"));for(var $e=0,lt=L;$e<lt.length;$e+=1){var gt=lt[$e],It=gt.feature,Ot=gt.id,Gt=gt.index,en=gt.sourceLayerIndex,Yt=this.layers[0]._featureFilter.needGeometry,mn={type:It.type,id:Ot,properties:It.properties,geometry:Yt?ds(It):[]};if(this.layers[0]._featureFilter.filter(new oo(this.zoom),mn,ee)){Yt||(mn.geometry=ds(It));var wn=Ve?Ve.evaluate(mn,{},ee):void 0;Fe.push({id:Ot,properties:It.properties,type:It.type,sourceLayerIndex:en,index:Gt,geometry:mn.geometry,patterns:{},sortKey:wn})}}Ve&&Fe.sort(function(jr,Yr){return jr.sortKey-Yr.sortKey});for(var jn=0,Yn=Fe;jn<Yn.length;jn+=1){var Kn=Yn[jn],pr=Kn.geometry,_r=Kn.index,Fr=Kn.sourceLayerIndex,Dr=L[_r].feature;this.addFeature(Kn,pr,_r,ee),N.featureIndex.insert(Dr,pr,_r,Fr,this.index)}},hi.prototype.update=function(L,N,ee){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,ee)},hi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},hi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hi.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,On),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},hi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hi.prototype.addFeature=function(L,N,ee,ye){for(var Fe=0,Ve=N;Fe<Ve.length;Fe+=1)for(var $e=0,lt=Ve[Fe];$e<lt.length;$e+=1){var gt=lt[$e],It=gt.x,Ot=gt.y;if(!(It<0||It>=eo||Ot<0||Ot>=eo)){var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,L.sortKey),en=Gt.vertexLength;Tr(this.layoutVertexArray,It,Ot,-1,-1),Tr(this.layoutVertexArray,It,Ot,1,-1),Tr(this.layoutVertexArray,It,Ot,1,1),Tr(this.layoutVertexArray,It,Ot,-1,1),this.indexArray.emplaceBack(en,en+1,en+2),this.indexArray.emplaceBack(en,en+3,en+2),Gt.vertexLength+=4,Gt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,ee,{},ye)},Hr("CircleBucket",hi,{omit:["layers"]});var kf=new ya({"circle-sort-key":new ti(He.layout_circle["circle-sort-key"])}),nc={paint:new ya({"circle-radius":new ti(He.paint_circle["circle-radius"]),"circle-color":new ti(He.paint_circle["circle-color"]),"circle-blur":new ti(He.paint_circle["circle-blur"]),"circle-opacity":new ti(He.paint_circle["circle-opacity"]),"circle-translate":new Kr(He.paint_circle["circle-translate"]),"circle-translate-anchor":new Kr(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kr(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kr(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ti(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ti(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ti(He.paint_circle["circle-stroke-opacity"])}),layout:kf},xl=typeof Float32Array<"u"?Float32Array:Array;function vh(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function og(L,N,ee){var ye=N[0],Fe=N[1],Ve=N[2],$e=N[3],lt=N[4],gt=N[5],It=N[6],Ot=N[7],Gt=N[8],en=N[9],Yt=N[10],mn=N[11],wn=N[12],Bn=N[13],jn=N[14],Yn=N[15],Kn=ee[0],sr=ee[1],pr=ee[2],_r=ee[3];return L[0]=Kn*ye+sr*lt+pr*Gt+_r*wn,L[1]=Kn*Fe+sr*gt+pr*en+_r*Bn,L[2]=Kn*Ve+sr*It+pr*Yt+_r*jn,L[3]=Kn*$e+sr*Ot+pr*mn+_r*Yn,L[4]=(Kn=ee[4])*ye+(sr=ee[5])*lt+(pr=ee[6])*Gt+(_r=ee[7])*wn,L[5]=Kn*Fe+sr*gt+pr*en+_r*Bn,L[6]=Kn*Ve+sr*It+pr*Yt+_r*jn,L[7]=Kn*$e+sr*Ot+pr*mn+_r*Yn,L[8]=(Kn=ee[8])*ye+(sr=ee[9])*lt+(pr=ee[10])*Gt+(_r=ee[11])*wn,L[9]=Kn*Fe+sr*gt+pr*en+_r*Bn,L[10]=Kn*Ve+sr*It+pr*Yt+_r*jn,L[11]=Kn*$e+sr*Ot+pr*mn+_r*Yn,L[12]=(Kn=ee[12])*ye+(sr=ee[13])*lt+(pr=ee[14])*Gt+(_r=ee[15])*wn,L[13]=Kn*Fe+sr*gt+pr*en+_r*Bn,L[14]=Kn*Ve+sr*It+pr*Yt+_r*jn,L[15]=Kn*$e+sr*Ot+pr*mn+_r*Yn,L}Math.hypot||(Math.hypot=function(){for(var L=arguments,N=0,ee=arguments.length;ee--;)N+=L[ee]*L[ee];return Math.sqrt(N)});var Sf,L,Ay=og;function wd(L,N,ee){var ye=N[0],Fe=N[1],Ve=N[2],$e=N[3];return L[0]=ee[0]*ye+ee[4]*Fe+ee[8]*Ve+ee[12]*$e,L[1]=ee[1]*ye+ee[5]*Fe+ee[9]*Ve+ee[13]*$e,L[2]=ee[2]*ye+ee[6]*Fe+ee[10]*Ve+ee[14]*$e,L[3]=ee[3]*ye+ee[7]*Fe+ee[11]*Ve+ee[15]*$e,L}Sf=new xl(3),xl!=Float32Array&&(Sf[0]=0,Sf[1]=0,Sf[2]=0),L=new xl(4),xl!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0);var ky=(function(){var L=new xl(2);xl!=Float32Array&&(L[0]=0,L[1]=0)}(),function(L){function N(ee){L.call(this,ee,nc)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.createBucket=function(ee){return new hi(ee)},N.prototype.queryRadius=function(ee){var ye=ee;return ns("circle-radius",this,ye)+ns("circle-stroke-width",this,ye)+Ql(this.paint.get("circle-translate"))},N.prototype.queryIntersectsFeature=function(ee,ye,Fe,Ve,$e,lt,gt,It){for(var Ot=_d(ee,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),lt.angle,gt),Gt=this.paint.get("circle-radius").evaluate(ye,Fe)+this.paint.get("circle-stroke-width").evaluate(ye,Fe),en="map"===this.paint.get("circle-pitch-alignment"),Yt=en?Ot:function(Fr,Dr){return Fr.map(function(jr){return l0(jr,Dr)})}(Ot,It),mn=en?Gt*gt:Gt,wn=0,Bn=Ve;wn<Bn.length;wn+=1)for(var jn=0,Yn=Bn[wn];jn<Yn.length;jn+=1){var Kn=Yn[jn],sr=en?Kn:l0(Kn,It),pr=mn,_r=wd([],[Kn.x,Kn.y,0,1],It);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?pr*=_r[3]/lt.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(pr*=lt.cameraToCenterDistance/_r[3]),Mf(Yt,sr,pr))return!0}return!1},N}(xa));function l0(L,N){var ee=wd([],[L.x,L.y,0,1],N);return new i(ee[0]/ee[3],ee[1]/ee[3])}var yh=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N}(hi);function xh(L,N,ee,ye){var Fe=N.width,Ve=N.height;if(ye){if(ye instanceof Uint8ClampedArray)ye=new Uint8Array(ye.buffer);else if(ye.length!==Fe*Ve*ee)throw new RangeError("mismatched image size")}else ye=new Uint8Array(Fe*Ve*ee);return L.width=Fe,L.height=Ve,L.data=ye,L}function u0(L,N,ee){var ye=N.width,Fe=N.height;if(ye!==L.width||Fe!==L.height){var Ve=xh({},{width:ye,height:Fe},ee);bh(L,Ve,{x:0,y:0},{x:0,y:0},{width:Math.min(L.width,ye),height:Math.min(L.height,Fe)},ee),L.width=ye,L.height=Fe,L.data=Ve.data}}function bh(L,N,ee,ye,Fe,Ve){if(0===Fe.width||0===Fe.height)return N;if(Fe.width>L.width||Fe.height>L.height||ee.x>L.width-Fe.width||ee.y>L.height-Fe.height)throw new RangeError("out of range source coordinates for image copy");if(Fe.width>N.width||Fe.height>N.height||ye.x>N.width-Fe.width||ye.y>N.height-Fe.height)throw new RangeError("out of range destination coordinates for image copy");for(var $e=L.data,lt=N.data,gt=0;gt<Fe.height;gt++)for(var It=((ee.y+gt)*L.width+ee.x)*Ve,Ot=((ye.y+gt)*N.width+ye.x)*Ve,Gt=0;Gt<Fe.width*Ve;Gt++)lt[Ot+Gt]=$e[It+Gt];return N}Hr("HeatmapBucket",yh,{omit:["layers"]});var Mc=function(L,N){xh(this,L,1,N)};Mc.prototype.resize=function(L){u0(this,L,1)},Mc.prototype.clone=function(){return new Mc({width:this.width,height:this.height},new Uint8Array(this.data))},Mc.copy=function(L,N,ee,ye,Fe){bh(L,N,ee,ye,Fe,1)};var hs=function(L,N){xh(this,L,4,N)};hs.prototype.resize=function(L){u0(this,L,4)},hs.prototype.replace=function(L,N){N?this.data.set(L):this.data=L instanceof Uint8ClampedArray?new Uint8Array(L.buffer):L},hs.prototype.clone=function(){return new hs({width:this.width,height:this.height},new Uint8Array(this.data))},hs.copy=function(L,N,ee,ye,Fe){bh(L,N,ee,ye,Fe,4)},Hr("AlphaImage",Mc),Hr("RGBAImage",hs);var Sy={paint:new ya({"heatmap-radius":new ti(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ti(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kr(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new il(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kr(He.paint_heatmap["heatmap-opacity"])})};function ag(L,N){for(var ee=new Uint8Array(1024),ye={},Fe=0,Ve=0;Fe<256;Fe++,Ve+=4){ye[N]=Fe/255;var $e=L.evaluate(ye);ee[Ve+0]=Math.floor(255*$e.r/$e.a),ee[Ve+1]=Math.floor(255*$e.g/$e.a),ee[Ve+2]=Math.floor(255*$e.b/$e.a),ee[Ve+3]=Math.floor(255*$e.a)}return new hs({width:256,height:1},ee)}var ll=function(L){function N(ee){L.call(this,ee,Sy),this._updateColorRamp()}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.createBucket=function(ee){return new yh(ee)},N.prototype._handleSpecialPaintPropertyUpdate=function(ee){"heatmap-color"===ee&&this._updateColorRamp()},N.prototype._updateColorRamp=function(){this.colorRamp=ag(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},N.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},N.prototype.queryRadius=function(){return 0},N.prototype.queryIntersectsFeature=function(){return!1},N.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},N}(xa),$c={paint:new ya({"hillshade-illumination-direction":new Kr(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kr(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kr(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kr(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kr(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kr(He.paint_hillshade["hillshade-accent-color"])})},ba=function(L){function N(ee){L.call(this,ee,$c)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},N}(xa),sg=Vo([{name:"a_pos",components:2,type:"Int16"}],4).members,c0=_h,Ey=_h;function _h(L,N,ee){ee=ee||2;var ye,Fe,Ve,$e,lt,gt,It,Ot=N&&N.length,Gt=Ot?N[0]*ee:L.length,en=f0(L,0,Gt,ee,!0),Yt=[];if(!en||en.next===en.prev)return Yt;if(Ot&&(en=function(wn,Bn,jn,Yn){var Kn,sr,pr,_r=[];for(Kn=0,sr=Bn.length;Kn<sr;Kn++)(pr=f0(wn,Bn[Kn]*Yn,Kn<sr-1?Bn[Kn+1]*Yn:wn.length,Yn,!1))===pr.next&&(pr.steiner=!0),_r.push(Dy(pr));for(_r.sort(Mh),Kn=0;Kn<_r.length;Kn++)d0(_r[Kn],jn),jn=rc(jn,jn.next);return jn}(L,N,en,ee)),L.length>80*ee){ye=Ve=L[0],Fe=$e=L[1];for(var mn=ee;mn<Gt;mn+=ee)(lt=L[mn])<ye&&(ye=lt),(gt=L[mn+1])<Fe&&(Fe=gt),lt>Ve&&(Ve=lt),gt>$e&&($e=gt);It=0!==(It=Math.max(Ve-ye,$e-Fe))?1/It:0}return Ac(en,Yt,ee,ye,Fe,It),Yt}function f0(L,N,ee,ye,Fe){var Ve,$e;if(Fe===m0(L,N,ee,ye)>0)for(Ve=N;Ve<ee;Ve+=ye)$e=Ly(Ve,L[Ve],L[Ve+1],$e);else for(Ve=ee-ye;Ve>=N;Ve-=ye)$e=Ly(Ve,L[Ve],L[Ve+1],$e);return $e&&h0($e,$e.next)&&(Ef($e),$e=$e.next),$e}function rc(L,N){if(!L)return L;N||(N=L);var ee,ye=L;do{if(ee=!1,ye.steiner||!h0(ye,ye.next)&&0!==_a(ye.prev,ye,ye.next))ye=ye.next;else{if(Ef(ye),(ye=N=ye.prev)===ye.next)break;ee=!0}}while(ee||ye!==N);return N}function Ac(L,N,ee,ye,Fe,Ve,$e){if(L){!$e&&Ve&&function(Ot,Gt,en,Yt){var mn=Ot;do{null===mn.z&&(mn.z=Ah(mn.x,mn.y,Gt,en,Yt)),mn.prevZ=mn.prev,mn.nextZ=mn.next,mn=mn.next}while(mn!==Ot);mn.prevZ.nextZ=null,mn.prevZ=null,function(wn){var Bn,jn,Yn,Kn,sr,pr,_r,Fr,Dr=1;do{for(jn=wn,wn=null,sr=null,pr=0;jn;){for(pr++,Yn=jn,_r=0,Bn=0;Bn<Dr&&(_r++,Yn=Yn.nextZ);Bn++);for(Fr=Dr;_r>0||Fr>0&&Yn;)0!==_r&&(0===Fr||!Yn||jn.z<=Yn.z)?(Kn=jn,jn=jn.nextZ,_r--):(Kn=Yn,Yn=Yn.nextZ,Fr--),sr?sr.nextZ=Kn:wn=Kn,Kn.prevZ=sr,sr=Kn;jn=Yn}sr.nextZ=null,Dr*=2}while(pr>1)}(mn)}(L,ye,Fe,Ve);for(var lt,gt,It=L;L.prev!==L.next;)if(lt=L.prev,gt=L.next,Ve?Cy(L,ye,Fe,Ve):kc(L))N.push(lt.i/ee),N.push(L.i/ee),N.push(gt.i/ee),Ef(L),L=gt.next,It=gt.next;else if((L=gt)===It){$e?1===$e?Ac(L=wh(rc(L),N,ee),N,ee,ye,Fe,Ve,2):2===$e&&Th(L,N,ee,ye,Fe,Ve):Ac(rc(L),N,ee,ye,Fe,Ve,1);break}}}function kc(L){var N=L.prev,ee=L,ye=L.next;if(_a(N,ee,ye)>=0)return!1;for(var Fe=L.next.next;Fe!==L.prev;){if(mu(N.x,N.y,ee.x,ee.y,ye.x,ye.y,Fe.x,Fe.y)&&_a(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function Cy(L,N,ee,ye){var Fe=L.prev,Ve=L,$e=L.next;if(_a(Fe,Ve,$e)>=0)return!1;for(var It=Fe.x>Ve.x?Fe.x>$e.x?Fe.x:$e.x:Ve.x>$e.x?Ve.x:$e.x,Ot=Fe.y>Ve.y?Fe.y>$e.y?Fe.y:$e.y:Ve.y>$e.y?Ve.y:$e.y,Gt=Ah(Fe.x<Ve.x?Fe.x<$e.x?Fe.x:$e.x:Ve.x<$e.x?Ve.x:$e.x,Fe.y<Ve.y?Fe.y<$e.y?Fe.y:$e.y:Ve.y<$e.y?Ve.y:$e.y,N,ee,ye),en=Ah(It,Ot,N,ee,ye),Yt=L.prevZ,mn=L.nextZ;Yt&&Yt.z>=Gt&&mn&&mn.z<=en;){if(Yt!==L.prev&&Yt!==L.next&&mu(Fe.x,Fe.y,Ve.x,Ve.y,$e.x,$e.y,Yt.x,Yt.y)&&_a(Yt.prev,Yt,Yt.next)>=0||(Yt=Yt.prevZ,mn!==L.prev&&mn!==L.next&&mu(Fe.x,Fe.y,Ve.x,Ve.y,$e.x,$e.y,mn.x,mn.y)&&_a(mn.prev,mn,mn.next)>=0))return!1;mn=mn.nextZ}for(;Yt&&Yt.z>=Gt;){if(Yt!==L.prev&&Yt!==L.next&&mu(Fe.x,Fe.y,Ve.x,Ve.y,$e.x,$e.y,Yt.x,Yt.y)&&_a(Yt.prev,Yt,Yt.next)>=0)return!1;Yt=Yt.prevZ}for(;mn&&mn.z<=en;){if(mn!==L.prev&&mn!==L.next&&mu(Fe.x,Fe.y,Ve.x,Ve.y,$e.x,$e.y,mn.x,mn.y)&&_a(mn.prev,mn,mn.next)>=0)return!1;mn=mn.nextZ}return!0}function wh(L,N,ee){var ye=L;do{var Fe=ye.prev,Ve=ye.next.next;!h0(Fe,Ve)&&kh(Fe,ye,ye.next,Ve)&&Md(Fe,Ve)&&Md(Ve,Fe)&&(N.push(Fe.i/ee),N.push(ye.i/ee),N.push(Ve.i/ee),Ef(ye),Ef(ye.next),ye=L=Ve),ye=ye.next}while(ye!==L);return rc(ye)}function Th(L,N,ee,ye,Fe,Ve){var $e=L;do{for(var lt=$e.next.next;lt!==$e.prev;){if($e.i!==lt.i&&Td($e,lt)){var gt=Iy($e,lt);return $e=rc($e,$e.next),gt=rc(gt,gt.next),Ac($e,N,ee,ye,Fe,Ve),void Ac(gt,N,ee,ye,Fe,Ve)}lt=lt.next}$e=$e.next}while($e!==L)}function Mh(L,N){return L.x-N.x}function d0(L,N){if(N=function(ye,Fe){var Ve,$e=Fe,lt=ye.x,gt=ye.y,It=-1/0;do{if(gt<=$e.y&&gt>=$e.next.y&&$e.next.y!==$e.y){var Ot=$e.x+(gt-$e.y)*($e.next.x-$e.x)/($e.next.y-$e.y);if(Ot<=lt&&Ot>It){if(It=Ot,Ot===lt){if(gt===$e.y)return $e;if(gt===$e.next.y)return $e.next}Ve=$e.x<$e.next.x?$e:$e.next}}$e=$e.next}while($e!==Fe);if(!Ve)return null;if(lt===It)return Ve;var Gt,en=Ve,Yt=Ve.x,mn=Ve.y,wn=1/0;$e=Ve;do{lt>=$e.x&&$e.x>=Yt&&lt!==$e.x&&mu(gt<mn?lt:It,gt,Yt,mn,gt<mn?It:lt,gt,$e.x,$e.y)&&(Gt=Math.abs(gt-$e.y)/(lt-$e.x),Md($e,ye)&&(Gt<wn||Gt===wn&&($e.x>Ve.x||$e.x===Ve.x&&lg(Ve,$e)))&&(Ve=$e,wn=Gt)),$e=$e.next}while($e!==en);return Ve}(L,N)){var ee=Iy(N,L);rc(N,N.next),rc(ee,ee.next)}}function lg(L,N){return _a(L.prev,L,N.prev)<0&&_a(N.next,L,L.next)<0}function Ah(L,N,ee,ye,Fe){return(L=1431655765&((L=858993459&((L=252645135&((L=16711935&((L=32767*(L-ee)*Fe)|L<<8))|L<<4))|L<<2))|L<<1))|(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-ye)*Fe)|N<<8))|N<<4))|N<<2))|N<<1))<<1}function Dy(L){var N=L,ee=L;do{(N.x<ee.x||N.x===ee.x&&N.y<ee.y)&&(ee=N),N=N.next}while(N!==L);return ee}function mu(L,N,ee,ye,Fe,Ve,$e,lt){return(Fe-$e)*(N-lt)-(L-$e)*(Ve-lt)>=0&&(L-$e)*(ye-lt)-(ee-$e)*(N-lt)>=0&&(ee-$e)*(Ve-lt)-(Fe-$e)*(ye-lt)>=0}function Td(L,N){return L.next.i!==N.i&&L.prev.i!==N.i&&!function(ee,ye){var Fe=ee;do{if(Fe.i!==ee.i&&Fe.next.i!==ee.i&&Fe.i!==ye.i&&Fe.next.i!==ye.i&&kh(Fe,Fe.next,ee,ye))return!0;Fe=Fe.next}while(Fe!==ee);return!1}(L,N)&&(Md(L,N)&&Md(N,L)&&function(ee,ye){var Fe=ee,Ve=!1,$e=(ee.x+ye.x)/2,lt=(ee.y+ye.y)/2;do{Fe.y>lt!=Fe.next.y>lt&&Fe.next.y!==Fe.y&&$e<(Fe.next.x-Fe.x)*(lt-Fe.y)/(Fe.next.y-Fe.y)+Fe.x&&(Ve=!Ve),Fe=Fe.next}while(Fe!==ee);return Ve}(L,N)&&(_a(L.prev,L,N.prev)||_a(L,N.prev,N))||h0(L,N)&&_a(L.prev,L,L.next)>0&&_a(N.prev,N,N.next)>0)}function _a(L,N,ee){return(N.y-L.y)*(ee.x-N.x)-(N.x-L.x)*(ee.y-N.y)}function h0(L,N){return L.x===N.x&&L.y===N.y}function kh(L,N,ee,ye){var Fe=Sh(_a(L,N,ee)),Ve=Sh(_a(L,N,ye)),$e=Sh(_a(ee,ye,L)),lt=Sh(_a(ee,ye,N));return Fe!==Ve&&$e!==lt||!(0!==Fe||!p0(L,ee,N))||!(0!==Ve||!p0(L,ye,N))||!(0!==$e||!p0(ee,L,ye))||!(0!==lt||!p0(ee,N,ye))}function p0(L,N,ee){return N.x<=Math.max(L.x,ee.x)&&N.x>=Math.min(L.x,ee.x)&&N.y<=Math.max(L.y,ee.y)&&N.y>=Math.min(L.y,ee.y)}function Sh(L){return L>0?1:L<0?-1:0}function Md(L,N){return _a(L.prev,L,L.next)<0?_a(L,N,L.next)>=0&&_a(L,L.prev,N)>=0:_a(L,N,L.prev)<0||_a(L,L.next,N)<0}function Iy(L,N){var ee=new Cf(L.i,L.x,L.y),ye=new Cf(N.i,N.x,N.y),Fe=L.next,Ve=N.prev;return L.next=N,N.prev=L,ee.next=Fe,Fe.prev=ee,ye.next=ee,ee.prev=ye,Ve.next=ye,ye.prev=Ve,ye}function Ly(L,N,ee,ye){var Fe=new Cf(L,N,ee);return ye?(Fe.next=ye.next,Fe.prev=ye,ye.next.prev=Fe,ye.next=Fe):(Fe.prev=Fe,Fe.next=Fe),Fe}function Ef(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function Cf(L,N,ee){this.i=L,this.x=N,this.y=ee,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function m0(L,N,ee,ye){for(var Fe=0,Ve=N,$e=ee-ye;Ve<ee;Ve+=ye)Fe+=(L[$e]-L[Ve])*(L[Ve+1]+L[$e+1]),$e=Ve;return Fe}function Eh(L,N,ee,ye,Fe){Ch(L,N,ee||0,ye||L.length-1,Fe||d_)}function Ch(L,N,ee,ye,Fe){for(;ye>ee;){if(ye-ee>600){var Ve=ye-ee+1,$e=N-ee+1,lt=Math.log(Ve),gt=.5*Math.exp(2*lt/3),It=.5*Math.sqrt(lt*gt*(Ve-gt)/Ve)*($e-Ve/2<0?-1:1);Ch(L,N,Math.max(ee,Math.floor(N-$e*gt/Ve+It)),Math.min(ye,Math.floor(N+(Ve-$e)*gt/Ve+It)),Fe)}var Ot=L[N],Gt=ee,en=ye;for(Sc(L,ee,N),Fe(L[ye],Ot)>0&&Sc(L,ee,ye);Gt<en;){for(Sc(L,Gt,en),Gt++,en--;Fe(L[Gt],Ot)<0;)Gt++;for(;Fe(L[en],Ot)>0;)en--}0===Fe(L[ee],Ot)?Sc(L,ee,en):Sc(L,++en,ye),en<=N&&(ee=en+1),N<=en&&(ye=en-1)}}function Sc(L,N,ee){var ye=L[N];L[N]=L[ee],L[ee]=ye}function d_(L,N){return L<N?-1:L>N?1:0}function Dh(L,N){var ee=L.length;if(ee<=1)return[L];for(var ye,Fe,Ve=[],$e=0;$e<ee;$e++){var lt=O(L[$e]);0!==lt&&(L[$e].area=Math.abs(lt),void 0===Fe&&(Fe=lt<0),Fe===lt<0?(ye&&Ve.push(ye),ye=[L[$e]]):ye.push(L[$e]))}if(ye&&Ve.push(ye),N>1)for(var gt=0;gt<Ve.length;gt++)Ve[gt].length<=N||(Eh(Ve[gt],N,1,Ve[gt].length-1,ug),Ve[gt]=Ve[gt].slice(0,N));return Ve}function ug(L,N){return N.area-L.area}function g0(L,N,ee){for(var ye=ee.patternDependencies,Fe=!1,Ve=0,$e=N;Ve<$e.length;Ve+=1){var lt=$e[Ve].paint.get(L+"-pattern");lt.isConstant()||(Fe=!0);var gt=lt.constantOr(null);gt&&(Fe=!0,ye[gt.to]=!0,ye[gt.from]=!0)}return Fe}function eu(L,N,ee,ye,Fe){for(var Ve=Fe.patternDependencies,$e=0,lt=N;$e<lt.length;$e+=1){var gt=lt[$e],It=gt.paint.get(L+"-pattern").value;if("constant"!==It.kind){var Ot=It.evaluate({zoom:ye-1},ee,{},Fe.availableImages),Gt=It.evaluate({zoom:ye},ee,{},Fe.availableImages),en=It.evaluate({zoom:ye+1},ee,{},Fe.availableImages);Gt=Gt&&Gt.name?Gt.name:Gt,en=en&&en.name?en.name:en,Ve[Ot=Ot&&Ot.name?Ot.name:Ot]=!0,Ve[Gt]=!0,Ve[en]=!0,ee.patterns[gt.id]={min:Ot,mid:Gt,max:en}}}return ee}_h.deviation=function(L,N,ee,ye){var Fe=N&&N.length,$e=Math.abs(m0(L,0,Fe?N[0]*ee:L.length,ee));if(Fe)for(var lt=0,gt=N.length;lt<gt;lt++)$e-=Math.abs(m0(L,N[lt]*ee,lt<gt-1?N[lt+1]*ee:L.length,ee));var Gt=0;for(lt=0;lt<ye.length;lt+=3){var en=ye[lt]*ee,Yt=ye[lt+1]*ee,mn=ye[lt+2]*ee;Gt+=Math.abs((L[en]-L[mn])*(L[Yt+1]-L[en+1])-(L[en]-L[Yt])*(L[mn+1]-L[en+1]))}return 0===$e&&0===Gt?0:Math.abs((Gt-$e)/$e)},_h.flatten=function(L){for(var N=L[0][0].length,ee={vertices:[],holes:[],dimensions:N},ye=0,Fe=0;Fe<L.length;Fe++){for(var Ve=0;Ve<L[Fe].length;Ve++)for(var $e=0;$e<N;$e++)ee.vertices.push(L[Fe][Ve][$e]);Fe>0&&ee.holes.push(ye+=L[Fe-1].length)}return ee},c0.default=Ey;var gu=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ga,this.indexArray=new oe,this.indexArray2=new Xe,this.programConfigurations=new _o(sg,L.layers,L.zoom),this.segments=new Pn,this.segments2=new Pn,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};gu.prototype.populate=function(L,N,ee){this.hasPattern=g0("fill",this.layers,N);for(var ye=this.layers[0].layout.get("fill-sort-key"),Fe=[],Ve=0,$e=L;Ve<$e.length;Ve+=1){var lt=$e[Ve],gt=lt.feature,It=lt.id,Ot=lt.index,Gt=lt.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,Yt={type:gt.type,id:It,properties:gt.properties,geometry:en?ds(gt):[]};if(this.layers[0]._featureFilter.filter(new oo(this.zoom),Yt,ee)){en||(Yt.geometry=ds(gt));var mn=ye?ye.evaluate(Yt,{},ee,N.availableImages):void 0;Fe.push({id:It,properties:gt.properties,type:gt.type,sourceLayerIndex:Gt,index:Ot,geometry:Yt.geometry,patterns:{},sortKey:mn})}}ye&&Fe.sort(function(jr,Yr){return jr.sortKey-Yr.sortKey});for(var Bn=0,jn=Fe;Bn<jn.length;Bn+=1){var Yn=jn[Bn],sr=Yn.geometry,pr=Yn.index,_r=Yn.sourceLayerIndex;if(this.hasPattern){var Fr=eu("fill",this.layers,Yn,this.zoom,N);this.patternFeatures.push(Fr)}else this.addFeature(Yn,sr,pr,ee,{});N.featureIndex.insert(L[pr].feature,sr,pr,_r,this.index)}},gu.prototype.update=function(L,N,ee){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,ee)},gu.prototype.addFeatures=function(L,N,ee){for(var ye=0,Fe=this.patternFeatures;ye<Fe.length;ye+=1){var Ve=Fe[ye];this.addFeature(Ve,Ve.geometry,Ve.index,N,ee)}},gu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},gu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},gu.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,sg),this.indexBuffer=L.createIndexBuffer(this.indexArray),this.indexBuffer2=L.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(L),this.uploaded=!0},gu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},gu.prototype.addFeature=function(L,N,ee,ye,Fe){for(var Ve=0,$e=Dh(N,500);Ve<$e.length;Ve+=1){for(var lt=$e[Ve],gt=0,It=0,Ot=lt;It<Ot.length;It+=1)gt+=Ot[It].length;for(var Gt=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray),en=Gt.vertexLength,Yt=[],mn=[],wn=0,Bn=lt;wn<Bn.length;wn+=1){var jn=Bn[wn];if(0!==jn.length){jn!==lt[0]&&mn.push(Yt.length/2);var Yn=this.segments2.prepareSegment(jn.length,this.layoutVertexArray,this.indexArray2),Kn=Yn.vertexLength;this.layoutVertexArray.emplaceBack(jn[0].x,jn[0].y),this.indexArray2.emplaceBack(Kn+jn.length-1,Kn),Yt.push(jn[0].x),Yt.push(jn[0].y);for(var sr=1;sr<jn.length;sr++)this.layoutVertexArray.emplaceBack(jn[sr].x,jn[sr].y),this.indexArray2.emplaceBack(Kn+sr-1,Kn+sr),Yt.push(jn[sr].x),Yt.push(jn[sr].y);Yn.vertexLength+=jn.length,Yn.primitiveLength+=jn.length}}for(var pr=c0(Yt,mn),_r=0;_r<pr.length;_r+=3)this.indexArray.emplaceBack(en+pr[_r],en+pr[_r+1],en+pr[_r+2]);Gt.vertexLength+=gt,Gt.primitiveLength+=pr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,ee,Fe,ye)},Hr("FillBucket",gu,{omit:["layers","patternFeatures"]});var Ih=new ya({"fill-sort-key":new ti(He.layout_fill["fill-sort-key"])}),v0={paint:new ya({"fill-antialias":new Kr(He.paint_fill["fill-antialias"]),"fill-opacity":new ti(He.paint_fill["fill-opacity"]),"fill-color":new ti(He.paint_fill["fill-color"]),"fill-outline-color":new ti(He.paint_fill["fill-outline-color"]),"fill-translate":new Kr(He.paint_fill["fill-translate"]),"fill-translate-anchor":new Kr(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new hu(He.paint_fill["fill-pattern"])}),layout:Ih},cg=function(L){function N(ee){L.call(this,ee,v0)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.recalculate=function(ee,ye){L.prototype.recalculate.call(this,ee,ye);var Fe=this.paint._values["fill-outline-color"];"constant"===Fe.value.kind&&void 0===Fe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},N.prototype.createBucket=function(ee){return new gu(ee)},N.prototype.queryRadius=function(){return Ql(this.paint.get("fill-translate"))},N.prototype.queryIntersectsFeature=function(ee,ye,Fe,Ve,$e,lt,gt){return Za(_d(ee,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),lt.angle,gt),Ve)},N.prototype.isTileClipped=function(){return!0},N}(xa),Lh=Vo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Oh=Df;function Df(L,N,ee,ye,Fe){this.properties={},this.extent=ee,this.type=0,this._pbf=L,this._geometry=-1,this._keys=ye,this._values=Fe,L.readFields(fg,this,N)}function fg(L,N,ee){1==L?N.id=ee.readVarint():2==L?function(ye,Fe){for(var Ve=ye.readVarint()+ye.pos;ye.pos<Ve;){var $e=Fe._keys[ye.readVarint()],lt=Fe._values[ye.readVarint()];Fe.properties[$e]=lt}}(ee,N):3==L?N.type=ee.readVarint():4==L&&(N._geometry=ee.pos)}function dg(L){for(var N,ee,ye=0,Fe=0,Ve=L.length,$e=Ve-1;Fe<Ve;$e=Fe++)ye+=((ee=L[$e]).x-(N=L[Fe]).x)*(N.y+ee.y);return ye}Df.types=["Unknown","Point","LineString","Polygon"],Df.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var N,ee=L.readVarint()+L.pos,ye=1,Fe=0,Ve=0,$e=0,lt=[];L.pos<ee;){if(Fe<=0){var gt=L.readVarint();ye=7&gt,Fe=gt>>3}if(Fe--,1===ye||2===ye)Ve+=L.readSVarint(),$e+=L.readSVarint(),1===ye&&(N&&lt.push(N),N=[]),N.push(new i(Ve,$e));else{if(7!==ye)throw new Error("unknown command "+ye);N&&N.push(N[0].clone())}}return N&&lt.push(N),lt},Df.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var N=L.readVarint()+L.pos,ee=1,ye=0,Fe=0,Ve=0,$e=1/0,lt=-1/0,gt=1/0,It=-1/0;L.pos<N;){if(ye<=0){var Ot=L.readVarint();ee=7&Ot,ye=Ot>>3}if(ye--,1===ee||2===ee)(Fe+=L.readSVarint())<$e&&($e=Fe),Fe>lt&&(lt=Fe),(Ve+=L.readSVarint())<gt&&(gt=Ve),Ve>It&&(It=Ve);else if(7!==ee)throw new Error("unknown command "+ee)}return[$e,gt,lt,It]},Df.prototype.toGeoJSON=function(L,N,ee){var ye,Fe,Ve=this.extent*Math.pow(2,ee),$e=this.extent*L,lt=this.extent*N,gt=this.loadGeometry(),It=Df.types[this.type];function Ot(Yt){for(var mn=0;mn<Yt.length;mn++){var wn=Yt[mn];Yt[mn]=[360*(wn.x+$e)/Ve-180,360/Math.PI*Math.atan(Math.exp((180-360*(wn.y+lt)/Ve)*Math.PI/180))-90]}}switch(this.type){case 1:var Gt=[];for(ye=0;ye<gt.length;ye++)Gt[ye]=gt[ye][0];Ot(gt=Gt);break;case 2:for(ye=0;ye<gt.length;ye++)Ot(gt[ye]);break;case 3:for(gt=function(Yt){var mn=Yt.length;if(mn<=1)return[Yt];for(var wn,Bn,jn=[],Yn=0;Yn<mn;Yn++){var Kn=dg(Yt[Yn]);0!==Kn&&(void 0===Bn&&(Bn=Kn<0),Bn===Kn<0?(wn&&jn.push(wn),wn=[Yt[Yn]]):wn.push(Yt[Yn]))}return wn&&jn.push(wn),jn}(gt),ye=0;ye<gt.length;ye++)for(Fe=0;Fe<gt[ye].length;Fe++)Ot(gt[ye][Fe])}1===gt.length?gt=gt[0]:It="Multi"+It;var en={type:"Feature",geometry:{type:It,coordinates:gt},properties:this.properties};return"id"in this&&(en.id=this.id),en};var y0=x0;function x0(L,N){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=L,this._keys=[],this._values=[],this._features=[],L.readFields(Oy,this,N),this.length=this._features.length}function Oy(L,N,ee){15===L?N.version=ee.readVarint():1===L?N.name=ee.readString():5===L?N.extent=ee.readVarint():2===L?N._features.push(ee.pos):3===L?N._keys.push(ee.readString()):4===L&&N._values.push(function(ye){for(var Fe=null,Ve=ye.readVarint()+ye.pos;ye.pos<Ve;){var $e=ye.readVarint()>>3;Fe=1===$e?ye.readString():2===$e?ye.readFloat():3===$e?ye.readDouble():4===$e?ye.readVarint64():5===$e?ye.readVarint():6===$e?ye.readSVarint():7===$e?ye.readBoolean():null}return Fe}(ee))}function Ph(L,N,ee){if(3===L){var ye=new y0(ee,ee.readVarint()+ee.pos);ye.length&&(N[ye.name]=ye)}}x0.prototype.feature=function(L){if(L<0||L>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[L];var N=this._pbf.readVarint()+this._pbf.pos;return new Oh(this._pbf,N,this.extent,this._keys,this._values)};var tu={VectorTile:function(L,N){this.layers=L.readFields(Ph,{},N)},VectorTileFeature:Oh,VectorTileLayer:y0},Py=tu.VectorTileFeature.types,Rh=Math.pow(2,13);function If(L,N,ee,ye,Fe,Ve,$e,lt){L.emplaceBack(N,ee,2*Math.floor(ye*Rh)+$e,Fe*Rh*2,Ve*Rh*2,Math.round(lt))}var Hs=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.layoutVertexArray=new Kl,this.indexArray=new oe,this.programConfigurations=new _o(Lh,L.layers,L.zoom),this.segments=new Pn,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};function Ry(L,N){return L.x===N.x&&(L.x<0||L.x>eo)||L.y===N.y&&(L.y<0||L.y>eo)}Hs.prototype.populate=function(L,N,ee){this.features=[],this.hasPattern=g0("fill-extrusion",this.layers,N);for(var ye=0,Fe=L;ye<Fe.length;ye+=1){var Ve=Fe[ye],$e=Ve.feature,lt=Ve.id,gt=Ve.index,It=Ve.sourceLayerIndex,Ot=this.layers[0]._featureFilter.needGeometry,Gt={type:$e.type,id:lt,properties:$e.properties,geometry:Ot?ds($e):[]};if(this.layers[0]._featureFilter.filter(new oo(this.zoom),Gt,ee)){var en={id:lt,sourceLayerIndex:It,index:gt,geometry:Ot?Gt.geometry:ds($e),properties:$e.properties,type:$e.type,patterns:{}};void 0!==$e.id&&(en.id=$e.id),this.hasPattern?this.features.push(eu("fill-extrusion",this.layers,en,this.zoom,N)):this.addFeature(en,en.geometry,gt,ee,{}),N.featureIndex.insert($e,en.geometry,gt,It,this.index,!0)}}},Hs.prototype.addFeatures=function(L,N,ee){for(var ye=0,Fe=this.features;ye<Fe.length;ye+=1){var Ve=Fe[ye];this.addFeature(Ve,Ve.geometry,Ve.index,N,ee)}},Hs.prototype.update=function(L,N,ee){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,ee)},Hs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Hs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Hs.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,Lh),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},Hs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Hs.prototype.addFeature=function(L,N,ee,ye,Fe){for(var Ve=0,$e=Dh(N,500);Ve<$e.length;Ve+=1){for(var lt=$e[Ve],gt=0,It=0,Ot=lt;It<Ot.length;It+=1)gt+=Ot[It].length;for(var Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),en=0,Yt=lt;en<Yt.length;en+=1){var mn=Yt[en];if(0!==mn.length&&!((Ri=mn).every(function(_i){return _i.x<0})||Ri.every(function(_i){return _i.x>eo})||Ri.every(function(_i){return _i.y<0})||Ri.every(function(_i){return _i.y>eo})))for(var wn=0,Bn=0;Bn<mn.length;Bn++){var jn=mn[Bn];if(Bn>=1){var Yn=mn[Bn-1];if(!Ry(jn,Yn)){Gt.vertexLength+4>Pn.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Kn=jn.sub(Yn)._perp()._unit(),sr=Yn.dist(jn);wn+sr>32768&&(wn=0),If(this.layoutVertexArray,jn.x,jn.y,Kn.x,Kn.y,0,0,wn),If(this.layoutVertexArray,jn.x,jn.y,Kn.x,Kn.y,0,1,wn),If(this.layoutVertexArray,Yn.x,Yn.y,Kn.x,Kn.y,0,0,wn+=sr),If(this.layoutVertexArray,Yn.x,Yn.y,Kn.x,Kn.y,0,1,wn);var pr=Gt.vertexLength;this.indexArray.emplaceBack(pr,pr+2,pr+1),this.indexArray.emplaceBack(pr+1,pr+2,pr+3),Gt.vertexLength+=4,Gt.primitiveLength+=2}}}}if(Gt.vertexLength+gt>Pn.MAX_VERTEX_ARRAY_LENGTH&&(Gt=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray)),"Polygon"===Py[L.type]){for(var _r=[],Fr=[],Dr=Gt.vertexLength,jr=0,Yr=lt;jr<Yr.length;jr+=1){var yi=Yr[jr];if(0!==yi.length){yi!==lt[0]&&Fr.push(_r.length/2);for(var Xr=0;Xr<yi.length;Xr++){var di=yi[Xr];If(this.layoutVertexArray,di.x,di.y,0,0,1,1,0),_r.push(di.x),_r.push(di.y)}}}for(var oi=c0(_r,Fr),Wr=0;Wr<oi.length;Wr+=3)this.indexArray.emplaceBack(Dr+oi[Wr],Dr+oi[Wr+2],Dr+oi[Wr+1]);Gt.primitiveLength+=oi.length/3,Gt.vertexLength+=gt}}var Ri;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,ee,Fe,ye)},Hr("FillExtrusionBucket",Hs,{omit:["layers","features"]});var hg={paint:new ya({"fill-extrusion-opacity":new Kr(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ti(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kr(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kr(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new hu(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ti(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ti(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kr(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},b0=function(L){function N(ee){L.call(this,ee,hg)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.createBucket=function(ee){return new Hs(ee)},N.prototype.queryRadius=function(){return Ql(this.paint.get("fill-extrusion-translate"))},N.prototype.is3D=function(){return!0},N.prototype.queryIntersectsFeature=function(ee,ye,Fe,Ve,$e,lt,gt,It){var Ot=_d(ee,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),lt.angle,gt),Gt=this.paint.get("fill-extrusion-height").evaluate(ye,Fe),en=this.paint.get("fill-extrusion-base").evaluate(ye,Fe),Yt=function(wn,Bn,jn,Yn){for(var Kn=[],sr=0,pr=wn;sr<pr.length;sr+=1){var _r=pr[sr],Fr=[_r.x,_r.y,0,1];wd(Fr,Fr,Bn),Kn.push(new i(Fr[0]/Fr[3],Fr[1]/Fr[3]))}return Kn}(Ot,It),mn=function(wn,Bn,jn,Yn){for(var Kn=[],sr=[],pr=Yn[8]*Bn,_r=Yn[9]*Bn,Fr=Yn[10]*Bn,Dr=Yn[11]*Bn,jr=Yn[8]*jn,Yr=Yn[9]*jn,yi=Yn[10]*jn,Xr=Yn[11]*jn,di=0,oi=wn;di<oi.length;di+=1){for(var Wr=[],Ri=[],_i=0,wo=oi[di];_i<wo.length;_i+=1){var ci=wo[_i],co=ci.x,Mo=ci.y,Lo=Yn[0]*co+Yn[4]*Mo+Yn[12],Oo=Yn[1]*co+Yn[5]*Mo+Yn[13],Ao=Yn[2]*co+Yn[6]*Mo+Yn[14],Ta=Yn[3]*co+Yn[7]*Mo+Yn[15],Ho=Ao+Fr,qo=Ta+Dr,Ma=Lo+jr,Ya=Oo+Yr,Ws=Ao+yi,rs=Ta+Xr,Na=new i((Lo+pr)/qo,(Oo+_r)/qo);Na.z=Ho/qo,Wr.push(Na);var is=new i(Ma/rs,Ya/rs);is.z=Ws/rs,Ri.push(is)}Kn.push(Wr),sr.push(Ri)}return[Kn,sr]}(Ve,en,Gt,It);return function(wn,Bn,jn){var Yn=1/0;Za(jn,Bn)&&(Yn=_0(jn,Bn[0]));for(var Kn=0;Kn<Bn.length;Kn++)for(var sr=Bn[Kn],pr=wn[Kn],_r=0;_r<sr.length-1;_r++){var Fr=sr[_r],Yr=[Fr,sr[_r+1],pr[_r+1],pr[_r],Fr];Es(jn,Yr)&&(Yn=Math.min(Yn,_0(jn,Yr)))}return Yn!==1/0&&Yn}(mn[0],mn[1],Yt)},N}(xa);function Ad(L,N){return L.x*N.x+L.y*N.y}function _0(L,N){if(1===L.length){for(var ee,ye=0,Fe=N[ye++];!ee||Fe.equals(ee);)if(!(ee=N[ye++]))return 1/0;for(;ye<N.length;ye++){var Ve=N[ye],$e=L[0],lt=ee.sub(Fe),gt=Ve.sub(Fe),It=$e.sub(Fe),Ot=Ad(lt,lt),Gt=Ad(lt,gt),en=Ad(gt,gt),Yt=Ad(It,lt),mn=Ad(It,gt),wn=Ot*en-Gt*Gt,Bn=(en*Yt-Gt*mn)/wn,jn=(Ot*mn-Gt*Yt)/wn,Kn=Fe.z*(1-Bn-jn)+ee.z*Bn+Ve.z*jn;if(isFinite(Kn))return Kn}return 1/0}for(var sr=1/0,pr=0,_r=N;pr<_r.length;pr+=1)sr=Math.min(sr,_r[pr].z);return sr}var kd=Vo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Lf=tu.VectorTileFeature.types,Of=Math.cos(Math.PI/180*37.5),Xc=Math.pow(2,14)/.5,Cs=function(L){this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=L.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Jl,this.indexArray=new oe,this.programConfigurations=new _o(kd,L.layers,L.zoom),this.segments=new Pn,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Cs.prototype.populate=function(L,N,ee){this.hasPattern=g0("line",this.layers,N);for(var ye=this.layers[0].layout.get("line-sort-key"),Fe=[],Ve=0,$e=L;Ve<$e.length;Ve+=1){var lt=$e[Ve],gt=lt.feature,It=lt.id,Ot=lt.index,Gt=lt.sourceLayerIndex,en=this.layers[0]._featureFilter.needGeometry,Yt={type:gt.type,id:It,properties:gt.properties,geometry:en?ds(gt):[]};if(this.layers[0]._featureFilter.filter(new oo(this.zoom),Yt,ee)){en||(Yt.geometry=ds(gt));var mn=ye?ye.evaluate(Yt,{},ee):void 0;Fe.push({id:It,properties:gt.properties,type:gt.type,sourceLayerIndex:Gt,index:Ot,geometry:Yt.geometry,patterns:{},sortKey:mn})}}ye&&Fe.sort(function(jr,Yr){return jr.sortKey-Yr.sortKey});for(var Bn=0,jn=Fe;Bn<jn.length;Bn+=1){var Yn=jn[Bn],sr=Yn.geometry,pr=Yn.index,_r=Yn.sourceLayerIndex;if(this.hasPattern){var Fr=eu("line",this.layers,Yn,this.zoom,N);this.patternFeatures.push(Fr)}else this.addFeature(Yn,sr,pr,ee,{});N.featureIndex.insert(L[pr].feature,sr,pr,_r,this.index)}},Cs.prototype.update=function(L,N,ee){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(L,N,this.stateDependentLayers,ee)},Cs.prototype.addFeatures=function(L,N,ee){for(var ye=0,Fe=this.patternFeatures;ye<Fe.length;ye+=1){var Ve=Fe[ye];this.addFeature(Ve,Ve.geometry,Ve.index,N,ee)}},Cs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Cs.prototype.upload=function(L){this.uploaded||(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,kd),this.indexBuffer=L.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(L),this.uploaded=!0},Cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Cs.prototype.addFeature=function(L,N,ee,ye,Fe){for(var Ve=this.layers[0].layout,$e=Ve.get("line-join").evaluate(L,{}),lt=Ve.get("line-cap"),gt=Ve.get("line-miter-limit"),It=Ve.get("line-round-limit"),Ot=0,Gt=N;Ot<Gt.length;Ot+=1)this.addLine(Gt[Ot],L,$e,lt,gt,It);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,L,ee,Fe,ye)},Cs.prototype.addLine=function(L,N,ee,ye,Fe,Ve){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var $e=0;$e<L.length-1;$e++)this.totalDistance+=L[$e].dist(L[$e+1]);this.updateScaledDistance()}for(var lt="Polygon"===Lf[N.type],gt=L.length;gt>=2&&L[gt-1].equals(L[gt-2]);)gt--;for(var It=0;It<gt-1&&L[It].equals(L[It+1]);)It++;if(!(gt<(lt?3:2))){"bevel"===ee&&(Fe=1.05);var Ot,Gt=this.overscaling<=16?15*eo/(512*this.overscaling):0,en=this.segments.prepareSegment(10*gt,this.layoutVertexArray,this.indexArray),Yt=void 0,mn=void 0,wn=void 0,Bn=void 0;this.e1=this.e2=-1,lt&&(Bn=L[It].sub(Ot=L[gt-2])._unit()._perp());for(var jn=It;jn<gt;jn++)if(!(mn=jn===gt-1?lt?L[It+1]:void 0:L[jn+1])||!L[jn].equals(mn)){Bn&&(wn=Bn),Ot&&(Yt=Ot),Ot=L[jn],Bn=mn?mn.sub(Ot)._unit()._perp():wn;var Yn=(wn=wn||Bn).add(Bn);0===Yn.x&&0===Yn.y||Yn._unit();var Kn=wn.x*Bn.x+wn.y*Bn.y,sr=Yn.x*Bn.x+Yn.y*Bn.y,pr=0!==sr?1/sr:1/0,_r=2*Math.sqrt(2-2*sr),Fr=sr<Of&&Yt&&mn,Dr=wn.x*Bn.y-wn.y*Bn.x>0;if(Fr&&jn>It){var jr=Ot.dist(Yt);if(jr>2*Gt){var Yr=Ot.sub(Ot.sub(Yt)._mult(Gt/jr)._round());this.updateDistance(Yt,Yr),this.addCurrentVertex(Yr,wn,0,0,en),Yt=Yr}}var yi=Yt&&mn,Xr=yi?ee:lt?"butt":ye;if(yi&&"round"===Xr&&(pr<Ve?Xr="miter":pr<=2&&(Xr="fakeround")),"miter"===Xr&&pr>Fe&&(Xr="bevel"),"bevel"===Xr&&(pr>2&&(Xr="flipbevel"),pr<Fe&&(Xr="miter")),Yt&&this.updateDistance(Yt,Ot),"miter"===Xr)Yn._mult(pr),this.addCurrentVertex(Ot,Yn,0,0,en);else if("flipbevel"===Xr){if(pr>100)Yn=Bn.mult(-1);else{var di=pr*wn.add(Bn).mag()/wn.sub(Bn).mag();Yn._perp()._mult(di*(Dr?-1:1))}this.addCurrentVertex(Ot,Yn,0,0,en),this.addCurrentVertex(Ot,Yn.mult(-1),0,0,en)}else if("bevel"===Xr||"fakeround"===Xr){var oi=-Math.sqrt(pr*pr-1),Wr=Dr?oi:0,Ri=Dr?0:oi;if(Yt&&this.addCurrentVertex(Ot,wn,Wr,Ri,en),"fakeround"===Xr)for(var _i=Math.round(180*_r/Math.PI/20),wo=1;wo<_i;wo++){var ci=wo/_i;if(.5!==ci){var co=ci-.5;ci+=ci*co*(ci-1)*((1.0904+Kn*(Kn*(3.55645-1.43519*Kn)-3.2452))*co*co+(.848013+Kn*(.215638*Kn-1.06021)))}var Mo=Bn.sub(wn)._mult(ci)._add(wn)._unit()._mult(Dr?-1:1);this.addHalfVertex(Ot,Mo.x,Mo.y,!1,Dr,0,en)}mn&&this.addCurrentVertex(Ot,Bn,-Wr,-Ri,en)}else if("butt"===Xr)this.addCurrentVertex(Ot,Yn,0,0,en);else if("square"===Xr){var Lo=Yt?1:-1;this.addCurrentVertex(Ot,Yn,Lo,Lo,en)}else"round"===Xr&&(Yt&&(this.addCurrentVertex(Ot,wn,0,0,en),this.addCurrentVertex(Ot,wn,1,1,en,!0)),mn&&(this.addCurrentVertex(Ot,Bn,-1,-1,en,!0),this.addCurrentVertex(Ot,Bn,0,0,en)));if(Fr&&jn<gt-1){var Oo=Ot.dist(mn);if(Oo>2*Gt){var Ao=Ot.add(mn.sub(Ot)._mult(Gt/Oo)._round());this.updateDistance(Ot,Ao),this.addCurrentVertex(Ao,Bn,0,0,en),Ot=Ao}}}}},Cs.prototype.addCurrentVertex=function(L,N,ee,ye,Fe,Ve){void 0===Ve&&(Ve=!1);var gt=N.y*ye-N.x,It=-N.y-N.x*ye;this.addHalfVertex(L,N.x+N.y*ee,N.y-N.x*ee,Ve,!1,ee,Fe),this.addHalfVertex(L,gt,It,Ve,!0,-ye,Fe),this.distance>Xc/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(L,N,ee,ye,Fe,Ve))},Cs.prototype.addHalfVertex=function(L,N,ee,ye,Fe,Ve,$e){var It=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((L.x<<1)+(ye?1:0),(L.y<<1)+(Fe?1:0),Math.round(63*N)+128,Math.round(63*ee)+128,1+(0===Ve?0:Ve<0?-1:1)|(63&It)<<2,It>>6);var Ot=$e.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ot),$e.primitiveLength++),Fe?this.e2=Ot:this.e1=Ot},Cs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Xc-1):this.distance},Cs.prototype.updateDistance=function(L,N){this.distance+=L.dist(N),this.updateScaledDistance()},Hr("LineBucket",Cs,{omit:["layers","patternFeatures"]});var w0=new ya({"line-cap":new Kr(He.layout_line["line-cap"]),"line-join":new ti(He.layout_line["line-join"]),"line-miter-limit":new Kr(He.layout_line["line-miter-limit"]),"line-round-limit":new Kr(He.layout_line["line-round-limit"]),"line-sort-key":new ti(He.layout_line["line-sort-key"])}),Kc={paint:new ya({"line-opacity":new ti(He.paint_line["line-opacity"]),"line-color":new ti(He.paint_line["line-color"]),"line-translate":new Kr(He.paint_line["line-translate"]),"line-translate-anchor":new Kr(He.paint_line["line-translate-anchor"]),"line-width":new ti(He.paint_line["line-width"]),"line-gap-width":new ti(He.paint_line["line-gap-width"]),"line-offset":new ti(He.paint_line["line-offset"]),"line-blur":new ti(He.paint_line["line-blur"]),"line-dasharray":new va(He.paint_line["line-dasharray"]),"line-pattern":new hu(He.paint_line["line-pattern"]),"line-gradient":new il(He.paint_line["line-gradient"])}),layout:w0},h_=function(L){function N(){L.apply(this,arguments)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.possiblyEvaluate=function(ee,ye){return ye=new oo(Math.floor(ye.zoom),{now:ye.now,fadeDuration:ye.fadeDuration,zoomHistory:ye.zoomHistory,transition:ye.transition}),L.prototype.possiblyEvaluate.call(this,ee,ye)},N.prototype.evaluate=function(ee,ye,Fe,Ve){return ye=d({},ye,{zoom:Math.floor(ye.zoom)}),L.prototype.evaluate.call(this,ee,ye,Fe,Ve)},N}(ti),pg=new h_(Kc.paint.properties["line-width"].specification);pg.useIntegerZoom=!0;var p_=function(L){function N(ee){L.call(this,ee,Kc)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype._handleSpecialPaintPropertyUpdate=function(ee){"line-gradient"===ee&&this._updateGradient()},N.prototype._updateGradient=function(){this.gradient=ag(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},N.prototype.recalculate=function(ee,ye){L.prototype.recalculate.call(this,ee,ye),this.paint._values["line-floorwidth"]=pg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ee)},N.prototype.createBucket=function(ee){return new Cs(ee)},N.prototype.queryRadius=function(ee){var ye=ee,Fe=Fy(ns("line-width",this,ye),ns("line-gap-width",this,ye)),Ve=ns("line-offset",this,ye);return Fe/2+Math.abs(Ve)+Ql(this.paint.get("line-translate"))},N.prototype.queryIntersectsFeature=function(ee,ye,Fe,Ve,$e,lt,gt){var It=_d(ee,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),lt.angle,gt),Ot=gt/2*Fy(this.paint.get("line-width").evaluate(ye,Fe),this.paint.get("line-gap-width").evaluate(ye,Fe)),Gt=this.paint.get("line-offset").evaluate(ye,Fe);return Gt&&(Ve=function(en,Yt){for(var mn=[],wn=new i(0,0),Bn=0;Bn<en.length;Bn++){for(var jn=en[Bn],Yn=[],Kn=0;Kn<jn.length;Kn++){var pr=jn[Kn],_r=jn[Kn+1],Fr=0===Kn?wn:pr.sub(jn[Kn-1])._unit()._perp(),Dr=Kn===jn.length-1?wn:_r.sub(pr)._unit()._perp(),jr=Fr._add(Dr)._unit();jr._mult(1/(jr.x*Dr.x+jr.y*Dr.y)),Yn.push(jr._mult(Yt)._add(pr))}mn.push(Yn)}return mn}(Ve,Gt*gt)),function(en,Yt,mn){for(var wn=0;wn<Yt.length;wn++){var Bn=Yt[wn];if(en.length>=3)for(var jn=0;jn<Bn.length;jn++)if(Yc(en,Bn[jn]))return!0;if(mh(en,Bn,mn))return!0}return!1}(It,Ve,Ot)},N.prototype.isTileClipped=function(){return!0},N}(xa);function Fy(L,N){return N>0?N+2*L:L}var mg=Vo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),m_=Vo([{name:"a_projected_pos",components:3,type:"Float32"}],4),g_=(Vo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Vo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Ny=(Vo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Vo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Sd=Vo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function v_(L,N,ee){return L.sections.forEach(function(ye){var Fe,$e,lt;ye.text=(Fe=ye.text,$e=ee,"uppercase"===(lt=N.layout.get("text-transform").evaluate($e,{}))?Fe=Fe.toLocaleUpperCase():"lowercase"===lt&&(Fe=Fe.toLocaleLowerCase()),Fo.applyArabicShaping&&(Fe=Fo.applyArabicShaping(Fe)),Fe)}),L}Vo([{name:"triangle",components:3,type:"Uint16"}]),Vo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Vo([{type:"Float32",name:"offsetX"}]),Vo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},to=24,gg=function(L,N,ee,ye,Fe){var Ve,$e,lt=8*Fe-ye-1,gt=(1<<lt)-1,It=gt>>1,Ot=-7,Gt=ee?Fe-1:0,en=ee?-1:1,Yt=L[N+Gt];for(Gt+=en,Ve=Yt&(1<<-Ot)-1,Yt>>=-Ot,Ot+=lt;Ot>0;Ve=256*Ve+L[N+Gt],Gt+=en,Ot-=8);for($e=Ve&(1<<-Ot)-1,Ve>>=-Ot,Ot+=ye;Ot>0;$e=256*$e+L[N+Gt],Gt+=en,Ot-=8);if(0===Ve)Ve=1-It;else{if(Ve===gt)return $e?NaN:1/0*(Yt?-1:1);$e+=Math.pow(2,ye),Ve-=It}return(Yt?-1:1)*$e*Math.pow(2,Ve-ye)},Pf=function(L,N,ee,ye,Fe,Ve){var $e,lt,gt,It=8*Ve-Fe-1,Ot=(1<<It)-1,Gt=Ot>>1,en=23===Fe?Math.pow(2,-24)-Math.pow(2,-77):0,Yt=ye?0:Ve-1,mn=ye?1:-1,wn=N<0||0===N&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(lt=isNaN(N)?1:0,$e=Ot):($e=Math.floor(Math.log(N)/Math.LN2),N*(gt=Math.pow(2,-$e))<1&&($e--,gt*=2),(N+=$e+Gt>=1?en/gt:en*Math.pow(2,1-Gt))*gt>=2&&($e++,gt/=2),$e+Gt>=Ot?(lt=0,$e=Ot):$e+Gt>=1?(lt=(N*gt-1)*Math.pow(2,Fe),$e+=Gt):(lt=N*Math.pow(2,Gt-1)*Math.pow(2,Fe),$e=0));Fe>=8;L[ee+Yt]=255&lt,Yt+=mn,lt/=256,Fe-=8);for($e=$e<<Fe|lt,It+=Fe;It>0;L[ee+Yt]=255&$e,Yt+=mn,$e/=256,It-=8);L[ee+Yt-mn]|=128*wn},Nh=Ni;function Ni(L){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(L)?L:new Uint8Array(L||0),this.pos=0,this.type=0,this.length=this.buf.length}Ni.Varint=0,Ni.Fixed64=1,Ni.Bytes=2,Ni.Fixed32=5;var Jc=4294967296,T0=1/Jc,Ed=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ll(L){return L.type===Ni.Bytes?L.readVarint()+L.pos:L.pos+1}function zy(L,N,ee){var ye=N<=16383?1:N<=2097151?2:N<=268435455?3:Math.floor(Math.log(N)/(7*Math.LN2));ee.realloc(ye);for(var Fe=ee.pos-1;Fe>=L;Fe--)ee.buf[Fe+ye]=ee.buf[Fe]}function By(L,N){for(var ee=0;ee<L.length;ee++)N.writeVarint(L[ee])}function y_(L,N){for(var ee=0;ee<L.length;ee++)N.writeSVarint(L[ee])}function Ol(L,N){for(var ee=0;ee<L.length;ee++)N.writeFloat(L[ee])}function M0(L,N){for(var ee=0;ee<L.length;ee++)N.writeDouble(L[ee])}function Ff(L,N){for(var ee=0;ee<L.length;ee++)N.writeBoolean(L[ee])}function x_(L,N){for(var ee=0;ee<L.length;ee++)N.writeFixed32(L[ee])}function vg(L,N){for(var ee=0;ee<L.length;ee++)N.writeSFixed32(L[ee])}function jy(L,N){for(var ee=0;ee<L.length;ee++)N.writeFixed64(L[ee])}function Uy(L,N){for(var ee=0;ee<L.length;ee++)N.writeSFixed64(L[ee])}function zh(L,N){return(L[N]|L[N+1]<<8|L[N+2]<<16)+16777216*L[N+3]}function Nf(L,N,ee){L[ee]=N,L[ee+1]=N>>>8,L[ee+2]=N>>>16,L[ee+3]=N>>>24}function yg(L,N){return(L[N]|L[N+1]<<8|L[N+2]<<16)+(L[N+3]<<24)}Ni.prototype={destroy:function(){this.buf=null},readFields:function(L,N,ee){for(ee=ee||this.length;this.pos<ee;){var ye=this.readVarint(),Fe=ye>>3,Ve=this.pos;this.type=7&ye,L(Fe,N,this),this.pos===Ve&&this.skip(ye)}return N},readMessage:function(L,N){return this.readFields(L,N,this.readVarint()+this.pos)},readFixed32:function(){var L=zh(this.buf,this.pos);return this.pos+=4,L},readSFixed32:function(){var L=yg(this.buf,this.pos);return this.pos+=4,L},readFixed64:function(){var L=zh(this.buf,this.pos)+zh(this.buf,this.pos+4)*Jc;return this.pos+=8,L},readSFixed64:function(){var L=zh(this.buf,this.pos)+yg(this.buf,this.pos+4)*Jc;return this.pos+=8,L},readFloat:function(){var L=gg(this.buf,this.pos,!0,23,4);return this.pos+=4,L},readDouble:function(){var L=gg(this.buf,this.pos,!0,52,8);return this.pos+=8,L},readVarint:function(L){var N,ee,ye=this.buf;return N=127&(ee=ye[this.pos++]),ee<128?N:(N|=(127&(ee=ye[this.pos++]))<<7,ee<128?N:(N|=(127&(ee=ye[this.pos++]))<<14,ee<128?N:(N|=(127&(ee=ye[this.pos++]))<<21,ee<128?N:function(Fe,Ve,$e){var lt,gt,It=$e.buf;if(lt=(112&(gt=It[$e.pos++]))>>4,gt<128||(lt|=(127&(gt=It[$e.pos++]))<<3,gt<128)||(lt|=(127&(gt=It[$e.pos++]))<<10,gt<128)||(lt|=(127&(gt=It[$e.pos++]))<<17,gt<128)||(lt|=(127&(gt=It[$e.pos++]))<<24,gt<128)||(lt|=(1&(gt=It[$e.pos++]))<<31,gt<128))return function Rf(L,N,ee){return ee?4294967296*N+(L>>>0):4294967296*(N>>>0)+(L>>>0)}(Fe,lt,Ve);throw new Error("Expected varint not more than 10 bytes")}(N|=(15&(ee=ye[this.pos]))<<28,L,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var L=this.readVarint();return L%2==1?(L+1)/-2:L/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var L=this.readVarint()+this.pos,N=this.pos;return this.pos=L,L-N>=12&&Ed?Ed.decode(this.buf.subarray(N,L)):function(ee,ye,Fe){for(var Ve="",$e=ye;$e<Fe;){var lt,gt,It,Ot=ee[$e],Gt=null,en=Ot>239?4:Ot>223?3:Ot>191?2:1;if($e+en>Fe)break;1===en?Ot<128&&(Gt=Ot):2===en?128==(192&(lt=ee[$e+1]))&&(Gt=(31&Ot)<<6|63&lt)<=127&&(Gt=null):3===en?(gt=ee[$e+2],128==(192&(lt=ee[$e+1]))&&128==(192&gt)&&((Gt=(15&Ot)<<12|(63&lt)<<6|63&gt)<=2047||Gt>=55296&&Gt<=57343)&&(Gt=null)):4===en&&(gt=ee[$e+2],It=ee[$e+3],128==(192&(lt=ee[$e+1]))&&128==(192&gt)&&128==(192&It)&&((Gt=(15&Ot)<<18|(63&lt)<<12|(63&gt)<<6|63&It)<=65535||Gt>=1114112)&&(Gt=null)),null===Gt?(Gt=65533,en=1):Gt>65535&&(Gt-=65536,Ve+=String.fromCharCode(Gt>>>10&1023|55296),Gt=56320|1023&Gt),Ve+=String.fromCharCode(Gt),$e+=en}return Ve}(this.buf,N,L)},readBytes:function(){var L=this.readVarint()+this.pos,N=this.buf.subarray(this.pos,L);return this.pos=L,N},readPackedVarint:function(L,N){if(this.type!==Ni.Bytes)return L.push(this.readVarint(N));var ee=Ll(this);for(L=L||[];this.pos<ee;)L.push(this.readVarint(N));return L},readPackedSVarint:function(L){if(this.type!==Ni.Bytes)return L.push(this.readSVarint());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readSVarint());return L},readPackedBoolean:function(L){if(this.type!==Ni.Bytes)return L.push(this.readBoolean());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readBoolean());return L},readPackedFloat:function(L){if(this.type!==Ni.Bytes)return L.push(this.readFloat());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readFloat());return L},readPackedDouble:function(L){if(this.type!==Ni.Bytes)return L.push(this.readDouble());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readDouble());return L},readPackedFixed32:function(L){if(this.type!==Ni.Bytes)return L.push(this.readFixed32());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readFixed32());return L},readPackedSFixed32:function(L){if(this.type!==Ni.Bytes)return L.push(this.readSFixed32());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readSFixed32());return L},readPackedFixed64:function(L){if(this.type!==Ni.Bytes)return L.push(this.readFixed64());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readFixed64());return L},readPackedSFixed64:function(L){if(this.type!==Ni.Bytes)return L.push(this.readSFixed64());var N=Ll(this);for(L=L||[];this.pos<N;)L.push(this.readSFixed64());return L},skip:function(L){var N=7&L;if(N===Ni.Varint)for(;this.buf[this.pos++]>127;);else if(N===Ni.Bytes)this.pos=this.readVarint()+this.pos;else if(N===Ni.Fixed32)this.pos+=4;else{if(N!==Ni.Fixed64)throw new Error("Unimplemented type: "+N);this.pos+=8}},writeTag:function(L,N){this.writeVarint(L<<3|N)},realloc:function(L){for(var N=this.length||16;N<this.pos+L;)N*=2;if(N!==this.length){var ee=new Uint8Array(N);ee.set(this.buf),this.buf=ee,this.length=N}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(L){this.realloc(4),Nf(this.buf,L,this.pos),this.pos+=4},writeSFixed32:function(L){this.realloc(4),Nf(this.buf,L,this.pos),this.pos+=4},writeFixed64:function(L){this.realloc(8),Nf(this.buf,-1&L,this.pos),Nf(this.buf,Math.floor(L*T0),this.pos+4),this.pos+=8},writeSFixed64:function(L){this.realloc(8),Nf(this.buf,-1&L,this.pos),Nf(this.buf,Math.floor(L*T0),this.pos+4),this.pos+=8},writeVarint:function(L){(L=+L||0)>268435455||L<0?function(N,ee){var ye,Fe,Ve,lt;if(N>=0?(ye=N%4294967296|0,Fe=N/4294967296|0):(Fe=~(-N/4294967296),4294967295^(ye=~(-N%4294967296))?ye=ye+1|0:(ye=0,Fe=Fe+1|0)),N>=0x10000000000000000||N<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");ee.realloc(10),Ve=ye,(lt=ee).buf[lt.pos++]=127&Ve|128,Ve>>>=7,lt.buf[lt.pos++]=127&Ve|128,Ve>>>=7,lt.buf[lt.pos++]=127&Ve|128,Ve>>>=7,lt.buf[lt.pos++]=127&Ve|128,lt.buf[lt.pos]=127&(Ve>>>=7),function(Ve,$e){var lt=(7&Ve)<<4;$e.buf[$e.pos++]|=lt|((Ve>>>=3)?128:0),Ve&&($e.buf[$e.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&($e.buf[$e.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&($e.buf[$e.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&($e.buf[$e.pos++]=127&Ve|((Ve>>>=7)?128:0),Ve&&($e.buf[$e.pos++]=127&Ve)))))}(Fe,ee)}(L,this):(this.realloc(4),this.buf[this.pos++]=127&L|(L>127?128:0),L<=127||(this.buf[this.pos++]=127&(L>>>=7)|(L>127?128:0),L<=127||(this.buf[this.pos++]=127&(L>>>=7)|(L>127?128:0),L<=127||(this.buf[this.pos++]=L>>>7&127))))},writeSVarint:function(L){this.writeVarint(L<0?2*-L-1:2*L)},writeBoolean:function(L){this.writeVarint(!!L)},writeString:function(L){L=String(L),this.realloc(4*L.length),this.pos++;var N=this.pos;this.pos=function(ye,Fe,Ve){for(var $e,lt,gt=0;gt<Fe.length;gt++){if(($e=Fe.charCodeAt(gt))>55295&&$e<57344){if(!lt){$e>56319||gt+1===Fe.length?(ye[Ve++]=239,ye[Ve++]=191,ye[Ve++]=189):lt=$e;continue}if($e<56320){ye[Ve++]=239,ye[Ve++]=191,ye[Ve++]=189,lt=$e;continue}$e=lt-55296<<10|$e-56320|65536,lt=null}else lt&&(ye[Ve++]=239,ye[Ve++]=191,ye[Ve++]=189,lt=null);$e<128?ye[Ve++]=$e:($e<2048?ye[Ve++]=$e>>6|192:($e<65536?ye[Ve++]=$e>>12|224:(ye[Ve++]=$e>>18|240,ye[Ve++]=$e>>12&63|128),ye[Ve++]=$e>>6&63|128),ye[Ve++]=63&$e|128)}return Ve}(this.buf,L,this.pos);var ee=this.pos-N;ee>=128&&zy(N,ee,this),this.pos=N-1,this.writeVarint(ee),this.pos+=ee},writeFloat:function(L){this.realloc(4),Pf(this.buf,L,this.pos,!0,23,4),this.pos+=4},writeDouble:function(L){this.realloc(8),Pf(this.buf,L,this.pos,!0,52,8),this.pos+=8},writeBytes:function(L){var N=L.length;this.writeVarint(N),this.realloc(N);for(var ee=0;ee<N;ee++)this.buf[this.pos++]=L[ee]},writeRawMessage:function(L,N){this.pos++;var ee=this.pos;L(N,this);var ye=this.pos-ee;ye>=128&&zy(ee,ye,this),this.pos=ee-1,this.writeVarint(ye),this.pos+=ye},writeMessage:function(L,N,ee){this.writeTag(L,Ni.Bytes),this.writeRawMessage(N,ee)},writePackedVarint:function(L,N){N.length&&this.writeMessage(L,By,N)},writePackedSVarint:function(L,N){N.length&&this.writeMessage(L,y_,N)},writePackedBoolean:function(L,N){N.length&&this.writeMessage(L,Ff,N)},writePackedFloat:function(L,N){N.length&&this.writeMessage(L,Ol,N)},writePackedDouble:function(L,N){N.length&&this.writeMessage(L,M0,N)},writePackedFixed32:function(L,N){N.length&&this.writeMessage(L,x_,N)},writePackedSFixed32:function(L,N){N.length&&this.writeMessage(L,vg,N)},writePackedFixed64:function(L,N){N.length&&this.writeMessage(L,jy,N)},writePackedSFixed64:function(L,N){N.length&&this.writeMessage(L,Uy,N)},writeBytesField:function(L,N){this.writeTag(L,Ni.Bytes),this.writeBytes(N)},writeFixed32Field:function(L,N){this.writeTag(L,Ni.Fixed32),this.writeFixed32(N)},writeSFixed32Field:function(L,N){this.writeTag(L,Ni.Fixed32),this.writeSFixed32(N)},writeFixed64Field:function(L,N){this.writeTag(L,Ni.Fixed64),this.writeFixed64(N)},writeSFixed64Field:function(L,N){this.writeTag(L,Ni.Fixed64),this.writeSFixed64(N)},writeVarintField:function(L,N){this.writeTag(L,Ni.Varint),this.writeVarint(N)},writeSVarintField:function(L,N){this.writeTag(L,Ni.Varint),this.writeSVarint(N)},writeStringField:function(L,N){this.writeTag(L,Ni.Bytes),this.writeString(N)},writeFloatField:function(L,N){this.writeTag(L,Ni.Fixed32),this.writeFloat(N)},writeDoubleField:function(L,N){this.writeTag(L,Ni.Fixed64),this.writeDouble(N)},writeBooleanField:function(L,N){this.writeVarintField(L,!!N)}};var A0=3;function k0(L,N,ee){1===L&&ee.readMessage(Bh,N)}function Bh(L,N,ee){if(3===L){var ye=ee.readMessage(Vy,{}),$e=ye.width,lt=ye.height,gt=ye.left,It=ye.top,Ot=ye.advance;N.push({id:ye.id,bitmap:new Mc({width:$e+2*A0,height:lt+2*A0},ye.bitmap),metrics:{width:$e,height:lt,left:gt,top:It,advance:Ot}})}}function Vy(L,N,ee){1===L?N.id=ee.readVarint():2===L?N.bitmap=ee.readBytes():3===L?N.width=ee.readVarint():4===L?N.height=ee.readVarint():5===L?N.left=ee.readSVarint():6===L?N.top=ee.readSVarint():7===L&&(N.advance=ee.readVarint())}var Cd=A0;function xg(L){for(var N=0,ee=0,ye=0,Fe=L;ye<Fe.length;ye+=1){var Ve=Fe[ye];N+=Ve.w*Ve.h,ee=Math.max(ee,Ve.w)}L.sort(function(wn,Bn){return Bn.h-wn.h});for(var $e=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(N/.95)),ee),h:1/0}],lt=0,gt=0,It=0,Ot=L;It<Ot.length;It+=1)for(var Gt=Ot[It],en=$e.length-1;en>=0;en--){var Yt=$e[en];if(!(Gt.w>Yt.w||Gt.h>Yt.h)){if(Gt.x=Yt.x,Gt.y=Yt.y,gt=Math.max(gt,Gt.y+Gt.h),lt=Math.max(lt,Gt.x+Gt.w),Gt.w===Yt.w&&Gt.h===Yt.h){var mn=$e.pop();en<$e.length&&($e[en]=mn)}else Gt.h===Yt.h?(Yt.x+=Gt.w,Yt.w-=Gt.w):Gt.w===Yt.w?(Yt.y+=Gt.h,Yt.h-=Gt.h):($e.push({x:Yt.x+Gt.w,y:Yt.y,w:Yt.w-Gt.w,h:Gt.h}),Yt.y+=Gt.h,Yt.h-=Gt.h);break}}return{w:lt,h:gt,fill:N/(lt*gt)||0}}var jh=function(L,N){var ee=N.pixelRatio,ye=N.version,Fe=N.stretchX,Ve=N.stretchY,$e=N.content;this.paddedRect=L,this.pixelRatio=ee,this.stretchX=Fe,this.stretchY=Ve,this.content=$e,this.version=ye},zf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};zf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},zf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},zf.tlbr.get=function(){return this.tl.concat(this.br)},zf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(jh.prototype,zf);var Qc=function(L,N){var ee={},ye={};this.haveRenderCallbacks=[];var Fe=[];this.addImages(L,ee,Fe),this.addImages(N,ye,Fe);var Ve=xg(Fe),gt=new hs({width:Ve.w||1,height:Ve.h||1});for(var It in L){var Ot=L[It],Gt=ee[It].paddedRect;hs.copy(Ot.data,gt,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},Ot.data)}for(var en in N){var Yt=N[en],mn=ye[en].paddedRect,wn=mn.x+1,Bn=mn.y+1,jn=Yt.data.width,Yn=Yt.data.height;hs.copy(Yt.data,gt,{x:0,y:0},{x:wn,y:Bn},Yt.data),hs.copy(Yt.data,gt,{x:0,y:Yn-1},{x:wn,y:Bn-1},{width:jn,height:1}),hs.copy(Yt.data,gt,{x:0,y:0},{x:wn,y:Bn+Yn},{width:jn,height:1}),hs.copy(Yt.data,gt,{x:jn-1,y:0},{x:wn-1,y:Bn},{width:1,height:Yn}),hs.copy(Yt.data,gt,{x:0,y:0},{x:wn+jn,y:Bn},{width:1,height:Yn})}this.image=gt,this.iconPositions=ee,this.patternPositions=ye};Qc.prototype.addImages=function(L,N,ee){for(var ye in L){var Fe=L[ye],Ve={x:0,y:0,w:Fe.data.width+2,h:Fe.data.height+2};ee.push(Ve),N[ye]=new jh(Ve,Fe),Fe.hasRenderCallback&&this.haveRenderCallbacks.push(ye)}},Qc.prototype.patchUpdatedImages=function(L,N){for(var ee in L.dispatchRenderCallbacks(this.haveRenderCallbacks),L.updatedImages)this.patchUpdatedImage(this.iconPositions[ee],L.getImage(ee),N),this.patchUpdatedImage(this.patternPositions[ee],L.getImage(ee),N)},Qc.prototype.patchUpdatedImage=function(L,N,ee){if(L&&N&&L.version!==N.version){L.version=N.version;var ye=L.tl;ee.update(N.data,void 0,{x:ye[0],y:ye[1]})}},Hr("ImagePosition",jh),Hr("ImageAtlas",Qc);var Ds={horizontal:1,vertical:2,horizontalOnly:3},jf=function(){this.scale=1,this.fontStack="",this.imageName=null};jf.forText=function(L,N){var ee=new jf;return ee.scale=L||1,ee.fontStack=N,ee},jf.forImage=function(L){var N=new jf;return N.imageName=L,N};var ms=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ic(L,N,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn){var Bn,jn=ms.fromFeature(L,Fe);Gt===Ds.vertical&&jn.verticalizePunctuation();var Yn=Fo.processBidirectionalText,Kn=Fo.processStyledBidirectionalText;if(Yn&&1===jn.sections.length){Bn=[];for(var sr=0,pr=Yn(jn.toString(),E0(jn,It,Ve,N,ye,Yt,mn));sr<pr.length;sr+=1){var _r=pr[sr],Fr=new ms;Fr.text=_r,Fr.sections=jn.sections;for(var Dr=0;Dr<_r.length;Dr++)Fr.sectionIndex.push(0);Bn.push(Fr)}}else if(Kn){Bn=[];for(var jr=0,Yr=Kn(jn.text,jn.sectionIndex,E0(jn,It,Ve,N,ye,Yt,mn));jr<Yr.length;jr+=1){var yi=Yr[jr],Xr=new ms;Xr.text=yi[0],Xr.sectionIndex=yi[1],Xr.sections=jn.sections,Bn.push(Xr)}}else Bn=function(Wr,Ri){for(var _i=[],wo=Wr.text,ci=0,co=0,Mo=Ri;co<Mo.length;co+=1){var Lo=Mo[co];_i.push(Wr.substring(ci,Lo)),ci=Lo}return ci<wo.length&&_i.push(Wr.substring(ci,wo.length)),_i}(jn,E0(jn,It,Ve,N,ye,Yt,mn));var di=[],oi={positionedLines:di,text:jn.toString(),top:Ot[1],bottom:Ot[1],left:Ot[0],right:Ot[0],writingMode:Gt,iconsInText:!1,verticalizable:!1};return function(Wr,Ri,_i,wo,ci,co,Mo,Lo,Oo,Ao,Ta,Ho){for(var qo=0,Ma=-17,Ya=0,Ws=0,rs="right"===Lo?1:"left"===Lo?0:.5,Na=0,is=0,$a=ci;is<$a.length;is+=1){var Aa=$a[is];Aa.trim();var Si=Aa.getMaxScale(),Ki=(Si-1)*to,ra={positionedGlyphs:[],lineOffset:0};Wr.positionedLines[Na]=ra;var To=ra.positionedGlyphs,No=0;if(Aa.length()){for(var io=0;io<Aa.length();io++){var Ui=Aa.getSection(io),Yo=Aa.getSectionIndex(io),gs=Aa.getCharCode(io),Zs=0,Is=null,Ru=null,Lc=null,ka=to,Pl=!(Oo===Ds.horizontal||!Ta&&!Sl(gs)||Ta&&(Ec[gs]||Qo(gs)));if(Ui.imageName){var bu=wo[Ui.imageName];if(!bu)continue;Lc=Ui.imageName,Wr.iconsInText=Wr.iconsInText||!0,Ru=bu.paddedRect;var _u=bu.displaySize;Ui.scale=Ui.scale*to/Ho,Zs=Ki+(to-_u[1]*Ui.scale),ka=(Is={width:_u[0],height:_u[1],left:1,top:-Cd,advance:Pl?_u[1]:_u[0]}).advance;var Oc=Pl?_u[0]*Ui.scale-to*Si:_u[1]*Ui.scale-to*Si;Oc>0&&Oc>No&&(No=Oc)}else{var Xh=_i[Ui.fontStack],sf=Xh&&Xh[gs];if(sf&&sf.rect)Ru=sf.rect,Is=sf.metrics;else{var Kh=Ri[Ui.fontStack],zd=Kh&&Kh[gs];if(!zd)continue;Is=zd.metrics}Zs=(Si-Ui.scale)*to}Pl?(Wr.verticalizable=!0,To.push({glyph:gs,imageName:Lc,x:qo,y:Ma+Zs,vertical:Pl,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Yo,metrics:Is,rect:Ru}),qo+=ka*Ui.scale+Ao):(To.push({glyph:gs,imageName:Lc,x:qo,y:Ma+Zs,vertical:Pl,scale:Ui.scale,fontStack:Ui.fontStack,sectionIndex:Yo,metrics:Is,rect:Ru}),qo+=Is.advance*Ui.scale+Ao)}0!==To.length&&(Ya=Math.max(qo-Ao,Ya),Uh(To,0,To.length-1,rs,No)),qo=0;var lf=co*Si+No;ra.lineOffset=Math.max(No,Ki),Ma+=lf,Ws=Math.max(lf,Ws),++Na}else Ma+=co,++Na}var $f=Ma- -17,Xf=C0(Mo),Qh=Xf.horizontalAlign,fa=Xf.verticalAlign;(function(V0,Bd,Pc,uf,ep,tp,Kf,np,jd){var ip,rp=(Bd-Pc)*ep;ip=tp!==Kf?-np*uf- -17:(-uf*jd+.5)*Kf;for(var wu=0,Jr=V0;wu<Jr.length;wu+=1)for(var Tu=0,Jf=Jr[wu].positionedGlyphs;Tu<Jf.length;Tu+=1){var Qf=Jf[Tu];Qf.x+=rp,Qf.y+=ip}})(Wr.positionedLines,rs,Qh,fa,Ya,Ws,co,$f,ci.length),Wr.top+=-fa*$f,Wr.bottom=Wr.top+$f,Wr.left+=-Qh*Ya,Wr.right=Wr.left+Ya}(oi,N,ee,ye,Bn,$e,lt,gt,Gt,It,en,wn),!function(Wr){for(var Ri=0,_i=Wr;Ri<_i.length;Ri+=1)if(0!==_i[Ri].positionedGlyphs.length)return!1;return!0}(di)&&oi}ms.fromFeature=function(L,N){for(var ee=new ms,ye=0;ye<L.sections.length;ye++){var Fe=L.sections[ye];Fe.image?ee.addImageSection(Fe):ee.addTextSection(Fe,N)}return ee},ms.prototype.length=function(){return this.text.length},ms.prototype.getSection=function(L){return this.sections[this.sectionIndex[L]]},ms.prototype.getSectionIndex=function(L){return this.sectionIndex[L]},ms.prototype.getCharCode=function(L){return this.text.charCodeAt(L)},ms.prototype.verticalizePunctuation=function(){this.text=function(L){for(var N="",ee=0;ee<L.length;ee++){var ye=L.charCodeAt(ee+1)||null,Fe=L.charCodeAt(ee-1)||null;ye&&Va(ye)&&!Fh[L[ee+1]]||Fe&&Va(Fe)&&!Fh[L[ee-1]]||!Fh[L[ee]]?N+=L[ee]:N+=Fh[L[ee]]}return N}(this.text)},ms.prototype.trim=function(){for(var L=0,N=0;N<this.text.length&&Ec[this.text.charCodeAt(N)];N++)L++;for(var ee=this.text.length,ye=this.text.length-1;ye>=0&&ye>=L&&Ec[this.text.charCodeAt(ye)];ye--)ee--;this.text=this.text.substring(L,ee),this.sectionIndex=this.sectionIndex.slice(L,ee)},ms.prototype.substring=function(L,N){var ee=new ms;return ee.text=this.text.substring(L,N),ee.sectionIndex=this.sectionIndex.slice(L,N),ee.sections=this.sections,ee},ms.prototype.toString=function(){return this.text},ms.prototype.getMaxScale=function(){var L=this;return this.sectionIndex.reduce(function(N,ee){return Math.max(N,L.sections[ee].scale)},0)},ms.prototype.addTextSection=function(L,N){this.text+=L.text,this.sections.push(jf.forText(L.scale,L.fontStack||N));for(var ee=this.sections.length-1,ye=0;ye<L.text.length;++ye)this.sectionIndex.push(ee)},ms.prototype.addImageSection=function(L){var N=L.image?L.image.name:"";if(0!==N.length){var ee=this.getNextImageSectionCharCode();ee?(this.text+=String.fromCharCode(ee),this.sections.push(jf.forImage(N)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},ms.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Ec={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ul={};function Hy(L,N,ee,ye,Fe,Ve){if(N.imageName){var $e=ye[N.imageName];return $e?$e.displaySize[0]*N.scale*to/Ve+Fe:0}var lt=ee[N.fontStack],gt=lt&&lt[L];return gt?gt.metrics.advance*N.scale+Fe:0}function S0(L,N,ee,ye){var Fe=Math.pow(L-N,2);return ye?L<N?Fe/2:2*Fe:Fe+Math.abs(ee)*ee}function qy(L,N,ee){var ye=0;return 10===L&&(ye-=1e4),ee&&(ye+=150),40!==L&&65288!==L||(ye+=50),41!==N&&65289!==N||(ye+=50),ye}function Gy(L,N,ee,ye,Fe,Ve){for(var $e=null,lt=S0(N,ee,Fe,Ve),gt=0,It=ye;gt<It.length;gt+=1){var Ot=It[gt],Gt=S0(N-Ot.x,ee,Fe,Ve)+Ot.badness;Gt<=lt&&($e=Ot,lt=Gt)}return{index:L,x:N,priorBreak:$e,badness:lt}}function bg(L){return L?bg(L.priorBreak).concat(L.index):[]}function E0(L,N,ee,ye,Fe,Ve,$e){if("point"!==Ve)return[];if(!L)return[];for(var lt=[],gt=function(Bn,jn,Yn,Kn,sr,pr){for(var _r=0,Fr=0;Fr<Bn.length();Fr++){var Dr=Bn.getSection(Fr);_r+=Hy(Bn.getCharCode(Fr),Dr,Kn,sr,jn,pr)}return _r/Math.max(1,Math.ceil(_r/Yn))}(L,N,ee,ye,Fe,$e),It=L.text.indexOf("\u200b")>=0,Ot=0,Gt=0;Gt<L.length();Gt++){var en=L.getSection(Gt),Yt=L.getCharCode(Gt);if(Ec[Yt]||(Ot+=Hy(Yt,en,ye,Fe,N,$e)),Gt<L.length()-1){var mn=!((wn=Yt)<11904||!(Ur["Bopomofo Extended"](wn)||Ur.Bopomofo(wn)||Ur["CJK Compatibility Forms"](wn)||Ur["CJK Compatibility Ideographs"](wn)||Ur["CJK Compatibility"](wn)||Ur["CJK Radicals Supplement"](wn)||Ur["CJK Strokes"](wn)||Ur["CJK Symbols and Punctuation"](wn)||Ur["CJK Unified Ideographs Extension A"](wn)||Ur["CJK Unified Ideographs"](wn)||Ur["Enclosed CJK Letters and Months"](wn)||Ur["Halfwidth and Fullwidth Forms"](wn)||Ur.Hiragana(wn)||Ur["Ideographic Description Characters"](wn)||Ur["Kangxi Radicals"](wn)||Ur["Katakana Phonetic Extensions"](wn)||Ur.Katakana(wn)||Ur["Vertical Forms"](wn)||Ur["Yi Radicals"](wn)||Ur["Yi Syllables"](wn)));(ul[Yt]||mn||en.imageName)&&lt.push(Gy(Gt+1,Ot,gt,lt,qy(Yt,L.getCharCode(Gt+1),mn&&It),!1))}}var wn;return bg(Gy(L.length(),Ot,gt,lt,0,!0))}function C0(L){var N=.5,ee=.5;switch(L){case"right":case"top-right":case"bottom-right":N=1;break;case"left":case"top-left":case"bottom-left":N=0}switch(L){case"bottom":case"bottom-right":case"bottom-left":ee=1;break;case"top":case"top-right":case"top-left":ee=0}return{horizontalAlign:N,verticalAlign:ee}}function Uh(L,N,ee,ye,Fe){if(ye||Fe)for(var Ve=L[ee],lt=(L[ee].x+Ve.metrics.advance*Ve.scale)*ye,gt=N;gt<=ee;gt++)L[gt].x-=lt,L[gt].y+=Fe}function D0(L,N,ee,ye,Fe,Ve){var $e,lt=L.image;if(lt.content){var gt=lt.content,It=lt.pixelRatio||1;$e=[gt[0]/It,gt[1]/It,lt.displaySize[0]-gt[2]/It,lt.displaySize[1]-gt[3]/It]}var Ot,Gt,en,Yt,mn=N.left*Ve,wn=N.right*Ve;"width"===ee||"both"===ee?(Yt=Fe[0]+mn-ye[3],Gt=Fe[0]+wn+ye[1]):Gt=(Yt=Fe[0]+(mn+wn-lt.displaySize[0])/2)+lt.displaySize[0];var Bn=N.top*Ve,jn=N.bottom*Ve;return"height"===ee||"both"===ee?(Ot=Fe[1]+Bn-ye[0],en=Fe[1]+jn+ye[2]):en=(Ot=Fe[1]+(Bn+jn-lt.displaySize[1])/2)+lt.displaySize[1],{image:lt,top:Ot,right:Gt,bottom:en,left:Yt,collisionPadding:$e}}ul[10]=!0,ul[32]=!0,ul[38]=!0,ul[40]=!0,ul[41]=!0,ul[43]=!0,ul[45]=!0,ul[47]=!0,ul[173]=!0,ul[183]=!0,ul[8203]=!0,ul[8208]=!0,ul[8211]=!0,ul[8231]=!0;var Uf=function(L){function N(ee,ye,Fe,Ve){L.call(this,ee,ye),this.angle=Fe,void 0!==Ve&&(this.segment=Ve)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.clone=function(){return new N(this.x,this.y,this.angle,this.segment)},N}(i);Hr("Anchor",Uf);var nu=128;function _g(L,N){var ee=N.expression;if("constant"===ee.kind)return{kind:"constant",layoutSize:ee.evaluate(new oo(L+1))};if("source"===ee.kind)return{kind:"source"};for(var ye=ee.zoomStops,Fe=ee.interpolationType,Ve=0;Ve<ye.length&&ye[Ve]<=L;)Ve++;for(var $e=Ve=Math.max(0,Ve-1);$e<ye.length&&ye[$e]<L+1;)$e++;$e=Math.min(ye.length-1,$e);var lt=ye[Ve],gt=ye[$e];return"composite"===ee.kind?{kind:"composite",minZoom:lt,maxZoom:gt,interpolationType:Fe}:{kind:"camera",minZoom:lt,maxZoom:gt,minSize:ee.evaluate(new oo(lt)),maxSize:ee.evaluate(new oo(gt)),interpolationType:Fe}}function I0(L,N,ee){var ye=N.uSize,Ve=ee.lowerSize;return"source"===L.kind?Ve/nu:"composite"===L.kind?ar(Ve/nu,ee.upperSize/nu,N.uSizeT):ye}function Wy(L,N){var ee=0,ye=0;if("constant"===L.kind)ye=L.layoutSize;else if("source"!==L.kind){var Fe=L.interpolationType,lt=Fe?l(Ro.interpolationFactor(Fe,N,L.minZoom,L.maxZoom),0,1):0;"camera"===L.kind?ye=ar(L.minSize,L.maxSize,lt):ee=lt}return{uSizeT:ee,uSize:ye}}var Zy=Object.freeze({__proto__:null,getSizeData:_g,evaluateSizeForFeature:I0,evaluateSizeForZoom:Wy,SIZE_PACK_FACTOR:nu});function wg(L,N,ee,ye,Fe){if(void 0===N.segment)return!0;for(var Ve=N,$e=N.segment+1,lt=0;lt>-ee/2;){if(--$e<0)return!1;lt-=L[$e].dist(Ve),Ve=L[$e]}lt+=L[$e].dist(L[$e+1]),$e++;for(var gt=[],It=0;lt<ee/2;){var Gt=L[$e],en=L[$e+1];if(!en)return!1;var Yt=L[$e-1].angleTo(Gt)-Gt.angleTo(en);for(Yt=Math.abs((Yt+3*Math.PI)%(2*Math.PI)-Math.PI),gt.push({distance:lt,angleDelta:Yt}),It+=Yt;lt-gt[0].distance>ye;)It-=gt.shift().angleDelta;if(It>Fe)return!1;$e++,lt+=Gt.dist(en)}return!0}function Vh(L){for(var N=0,ee=0;ee<L.length-1;ee++)N+=L[ee].dist(L[ee+1]);return N}function Yy(L,N,ee){return L?.6*N*ee:0}function $y(L,N){return Math.max(L?L.right-L.left:0,N?N.right-N.left:0)}function L0(L,N,ee,ye,Fe,Ve){for(var $e=Yy(ee,Fe,Ve),lt=$y(ee,ye)*Ve,gt=0,It=Vh(L)/2,Ot=0;Ot<L.length-1;Ot++){var Gt=L[Ot],en=L[Ot+1],Yt=Gt.dist(en);if(gt+Yt>It){var mn=(It-gt)/Yt,wn=ar(Gt.x,en.x,mn),Bn=ar(Gt.y,en.y,mn),jn=new Uf(wn,Bn,en.angleTo(Gt),Ot);return jn._round(),!$e||wg(L,jn,lt,$e,N)?jn:void 0}gt+=Yt}}function b_(L,N,ee,ye,Fe,Ve,$e,lt,gt){var It=Yy(ye,Ve,$e),Ot=$y(ye,Fe),Gt=Ot*$e,en=0===L[0].x||L[0].x===gt||0===L[0].y||L[0].y===gt;return N-Gt<N/4&&(N=Gt+N/4),Xy(L,en?N/2*lt%N:(Ot/2+2*Ve)*$e*lt%N,N,It,ee,Gt,en,!1,gt)}function Xy(L,N,ee,ye,Fe,Ve,$e,lt,gt){for(var It=Ve/2,Ot=Vh(L),Gt=0,en=N-ee,Yt=[],mn=0;mn<L.length-1;mn++){for(var wn=L[mn],Bn=L[mn+1],jn=wn.dist(Bn),Yn=Bn.angleTo(wn);en+ee<Gt+jn;){var Kn=((en+=ee)-Gt)/jn,sr=ar(wn.x,Bn.x,Kn),pr=ar(wn.y,Bn.y,Kn);if(sr>=0&&sr<gt&&pr>=0&&pr<gt&&en-It>=0&&en+It<=Ot){var _r=new Uf(sr,pr,Yn,mn);_r._round(),ye&&!wg(L,_r,Ve,ye,Fe)||Yt.push(_r)}}Gt+=jn}return lt||Yt.length||$e||(Yt=Xy(L,Gt/2,ee,ye,Fe,Ve,$e,!0,gt)),Yt}function Ky(L,N,ee,ye,Fe){for(var Ve=[],$e=0;$e<L.length;$e++)for(var lt=L[$e],gt=void 0,It=0;It<lt.length-1;It++){var Ot=lt[It],Gt=lt[It+1];Ot.x<N&&Gt.x<N||(Ot.x<N?Ot=new i(N,Ot.y+(N-Ot.x)/(Gt.x-Ot.x)*(Gt.y-Ot.y))._round():Gt.x<N&&(Gt=new i(N,Ot.y+(N-Ot.x)/(Gt.x-Ot.x)*(Gt.y-Ot.y))._round()),Ot.y<ee&&Gt.y<ee||(Ot.y<ee?Ot=new i(Ot.x+(ee-Ot.y)/(Gt.y-Ot.y)*(Gt.x-Ot.x),ee)._round():Gt.y<ee&&(Gt=new i(Ot.x+(ee-Ot.y)/(Gt.y-Ot.y)*(Gt.x-Ot.x),ee)._round()),Ot.x>=ye&&Gt.x>=ye||(Ot.x>=ye?Ot=new i(ye,Ot.y+(ye-Ot.x)/(Gt.x-Ot.x)*(Gt.y-Ot.y))._round():Gt.x>=ye&&(Gt=new i(ye,Ot.y+(ye-Ot.x)/(Gt.x-Ot.x)*(Gt.y-Ot.y))._round()),Ot.y>=Fe&&Gt.y>=Fe||(Ot.y>=Fe?Ot=new i(Ot.x+(Fe-Ot.y)/(Gt.y-Ot.y)*(Gt.x-Ot.x),Fe)._round():Gt.y>=Fe&&(Gt=new i(Ot.x+(Fe-Ot.y)/(Gt.y-Ot.y)*(Gt.x-Ot.x),Fe)._round()),gt&&Ot.equals(gt[gt.length-1])||Ve.push(gt=[Ot]),gt.push(Gt)))))}return Ve}var Dd=1;function Jy(L,N,ee,ye){var Fe=[],Ve=L.image,$e=Ve.pixelRatio,lt=Ve.paddedRect.w-2*Dd,gt=Ve.paddedRect.h-2*Dd,It=L.right-L.left,Ot=L.bottom-L.top,Gt=Ve.stretchX||[[0,lt]],en=Ve.stretchY||[[0,gt]],Yt=function(co,Mo){return co+Mo[1]-Mo[0]},mn=Gt.reduce(Yt,0),wn=en.reduce(Yt,0),Bn=lt-mn,jn=gt-wn,Yn=0,Kn=mn,sr=0,pr=wn,_r=0,Fr=Bn,Dr=0,jr=jn;if(Ve.content&&ye){var Yr=Ve.content;Yn=Hh(Gt,0,Yr[0]),sr=Hh(en,0,Yr[1]),Kn=Hh(Gt,Yr[0],Yr[2]),pr=Hh(en,Yr[1],Yr[3]),_r=Yr[0]-Yn,Dr=Yr[1]-sr,Fr=Yr[2]-Yr[0]-Kn,jr=Yr[3]-Yr[1]-pr}var yi=function(co,Mo,Lo,Oo){var Ao=Vf(co.stretch-Yn,Kn,It,L.left),Ta=Ld(co.fixed-_r,Fr,co.stretch,mn),Ho=Vf(Mo.stretch-sr,pr,Ot,L.top),qo=Ld(Mo.fixed-Dr,jr,Mo.stretch,wn),Ma=Vf(Lo.stretch-Yn,Kn,It,L.left),Ya=Ld(Lo.fixed-_r,Fr,Lo.stretch,mn),Ws=Vf(Oo.stretch-sr,pr,Ot,L.top),rs=Ld(Oo.fixed-Dr,jr,Oo.stretch,wn),Na=new i(Ao,Ho),is=new i(Ma,Ho),$a=new i(Ma,Ws),Aa=new i(Ao,Ws),Si=new i(Ta/$e,qo/$e),Ki=new i(Ya/$e,rs/$e),ra=N*Math.PI/180;if(ra){var To=Math.sin(ra),No=Math.cos(ra),io=[No,-To,To,No];Na._matMult(io),is._matMult(io),Aa._matMult(io),$a._matMult(io)}var Ui=co.stretch+co.fixed,gs=Mo.stretch+Mo.fixed;return{tl:Na,tr:is,bl:Aa,br:$a,tex:{x:Ve.paddedRect.x+Dd+Ui,y:Ve.paddedRect.y+Dd+gs,w:Lo.stretch+Lo.fixed-Ui,h:Oo.stretch+Oo.fixed-gs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Si,pixelOffsetBR:Ki,minFontScaleX:Fr/$e/It,minFontScaleY:jr/$e/Ot,isSDF:ee}};if(ye&&(Ve.stretchX||Ve.stretchY))for(var Xr=Id(Gt,Bn,mn),di=Id(en,jn,wn),oi=0;oi<Xr.length-1;oi++)for(var Wr=Xr[oi],Ri=Xr[oi+1],_i=0;_i<di.length-1;_i++)Fe.push(yi(Wr,di[_i],Ri,di[_i+1]));else Fe.push(yi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:lt+1},{fixed:0,stretch:gt+1}));return Fe}function Hh(L,N,ee){for(var ye=0,Fe=0,Ve=L;Fe<Ve.length;Fe+=1){var $e=Ve[Fe];ye+=Math.max(N,Math.min(ee,$e[1]))-Math.max(N,Math.min(ee,$e[0]))}return ye}function Id(L,N,ee){for(var ye=[{fixed:-Dd,stretch:0}],Fe=0,Ve=L;Fe<Ve.length;Fe+=1){var $e=Ve[Fe],lt=$e[0],gt=$e[1],It=ye[ye.length-1];ye.push({fixed:lt-It.stretch,stretch:It.stretch}),ye.push({fixed:lt-It.stretch,stretch:It.stretch+(gt-lt)})}return ye.push({fixed:N+Dd,stretch:ee}),ye}function Vf(L,N,ee,ye){return L/N*ee+ye}function Ld(L,N,ee,ye){return L-N*ee/ye}var Od=function(L,N,ee,ye,Fe,Ve,$e,lt,gt,It){if(this.boxStartIndex=L.length,gt){var Ot=Ve.top,Gt=Ve.bottom,en=Ve.collisionPadding;en&&(Ot-=en[1],Gt+=en[3]);var Yt=Gt-Ot;Yt>0&&(Yt=Math.max(10,Yt),this.circleDiameter=Yt)}else{var mn=Ve.top*$e-lt,wn=Ve.bottom*$e+lt,Bn=Ve.left*$e-lt,jn=Ve.right*$e+lt,Yn=Ve.collisionPadding;if(Yn&&(Bn-=Yn[0]*$e,mn-=Yn[1]*$e,jn+=Yn[2]*$e,wn+=Yn[3]*$e),It){var Kn=new i(Bn,mn),sr=new i(jn,mn),pr=new i(Bn,wn),_r=new i(jn,wn),Fr=It*Math.PI/180;Kn._rotate(Fr),sr._rotate(Fr),pr._rotate(Fr),_r._rotate(Fr),Bn=Math.min(Kn.x,sr.x,pr.x,_r.x),jn=Math.max(Kn.x,sr.x,pr.x,_r.x),mn=Math.min(Kn.y,sr.y,pr.y,_r.y),wn=Math.max(Kn.y,sr.y,pr.y,_r.y)}L.emplaceBack(N.x,N.y,Bn,mn,jn,wn,ee,ye,Fe)}this.boxEndIndex=L.length},ef=function(L,N){if(void 0===L&&(L=[]),void 0===N&&(N=Hf),this.data=L,this.length=this.data.length,this.compare=N,this.length>0)for(var ee=(this.length>>1)-1;ee>=0;ee--)this._down(ee)};function Hf(L,N){return L<N?-1:L>N?1:0}function Tg(L,N,ee){void 0===N&&(N=1),void 0===ee&&(ee=!1);for(var ye=1/0,Fe=1/0,Ve=-1/0,$e=-1/0,lt=L[0],gt=0;gt<lt.length;gt++){var It=lt[gt];(!gt||It.x<ye)&&(ye=It.x),(!gt||It.y<Fe)&&(Fe=It.y),(!gt||It.x>Ve)&&(Ve=It.x),(!gt||It.y>$e)&&($e=It.y)}var en=Math.min(Ve-ye,$e-Fe),Yt=en/2,mn=new ef([],Mg);if(0===en)return new i(ye,Fe);for(var wn=ye;wn<Ve;wn+=en)for(var Bn=Fe;Bn<$e;Bn+=en)mn.push(new oc(wn+Yt,Bn+Yt,Yt,L));for(var jn=function(sr){for(var pr=0,_r=0,Fr=0,Dr=sr[0],jr=0,Yr=Dr.length,yi=Yr-1;jr<Yr;yi=jr++){var Xr=Dr[jr],di=Dr[yi],oi=Xr.x*di.y-di.x*Xr.y;_r+=(Xr.x+di.x)*oi,Fr+=(Xr.y+di.y)*oi,pr+=3*oi}return new oc(_r/pr,Fr/pr,0,sr)}(L),Yn=mn.length;mn.length;){var Kn=mn.pop();(Kn.d>jn.d||!jn.d)&&(jn=Kn,ee&&console.log("found best %d after %d probes",Math.round(1e4*Kn.d)/1e4,Yn)),Kn.max-jn.d<=N||(mn.push(new oc(Kn.p.x-(Yt=Kn.h/2),Kn.p.y-Yt,Yt,L)),mn.push(new oc(Kn.p.x+Yt,Kn.p.y-Yt,Yt,L)),mn.push(new oc(Kn.p.x-Yt,Kn.p.y+Yt,Yt,L)),mn.push(new oc(Kn.p.x+Yt,Kn.p.y+Yt,Yt,L)),Yn+=4)}return ee&&(console.log("num probes: "+Yn),console.log("best distance: "+jn.d)),jn.p}function Mg(L,N){return N.max-L.max}function oc(L,N,ee,ye){this.p=new i(L,N),this.h=ee,this.d=function(Fe,Ve){for(var $e=!1,lt=1/0,gt=0;gt<Ve.length;gt++)for(var It=Ve[gt],Ot=0,Gt=It.length,en=Gt-1;Ot<Gt;en=Ot++){var Yt=It[Ot],mn=It[en];Yt.y>Fe.y!=mn.y>Fe.y&&Fe.x<(mn.x-Yt.x)*(Fe.y-Yt.y)/(mn.y-Yt.y)+Yt.x&&($e=!$e),lt=Math.min(lt,tc(Fe,Yt,mn))}return($e?1:-1)*Math.sqrt(lt)}(this.p,ye),this.max=this.d+this.h*Math.SQRT2}ef.prototype.push=function(L){this.data.push(L),this.length++,this._up(this.length-1)},ef.prototype.pop=function(){if(0!==this.length){var L=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),L}},ef.prototype.peek=function(){return this.data[0]},ef.prototype._up=function(L){for(var N=this.data,ee=this.compare,ye=N[L];L>0;){var Fe=L-1>>1,Ve=N[Fe];if(ee(ye,Ve)>=0)break;N[L]=Ve,L=Fe}N[L]=ye},ef.prototype._down=function(L){for(var N=this.data,ee=this.compare,ye=this.length>>1,Fe=N[L];L<ye;){var Ve=1+(L<<1),$e=N[Ve],lt=Ve+1;if(lt<this.length&&ee(N[lt],$e)<0&&(Ve=lt,$e=N[lt]),ee($e,Fe)>=0)break;N[L]=$e,L=Ve}N[L]=Fe};var qs=Number.POSITIVE_INFINITY;function Ag(L,N){return N[1]!==qs?function(ee,ye,Fe){var Ve=0,$e=0;switch(ye=Math.abs(ye),Fe=Math.abs(Fe),ee){case"top-right":case"top-left":case"top":$e=Fe-7;break;case"bottom-right":case"bottom-left":case"bottom":$e=7-Fe}switch(ee){case"top-right":case"bottom-right":case"right":Ve=-ye;break;case"top-left":case"bottom-left":case"left":Ve=ye}return[Ve,$e]}(L,N[0],N[1]):function(ee,ye){var Fe=0,Ve=0;ye<0&&(ye=0);var $e=ye/Math.sqrt(2);switch(ee){case"top-right":case"top-left":Ve=$e-7;break;case"bottom-right":case"bottom-left":Ve=7-$e;break;case"bottom":Ve=7-ye;break;case"top":Ve=ye-7}switch(ee){case"top-right":case"bottom-right":Fe=-$e;break;case"top-left":case"bottom-left":Fe=$e;break;case"left":Fe=ye;break;case"right":Fe=-ye}return[Fe,Ve]}(L,N[0])}function O0(L){switch(L){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var sc=32640;function qh(L,N,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn){var wn=function(sr,pr,_r,Fr,Dr,jr,Yr,yi){for(var Xr=Fr.layout.get("text-rotate").evaluate(jr,{})*Math.PI/180,di=[],oi=0,Wr=pr.positionedLines;oi<Wr.length;oi+=1)for(var Ri=Wr[oi],_i=0,wo=Ri.positionedGlyphs;_i<wo.length;_i+=1){var ci=wo[_i];if(ci.rect){var co=ci.rect||{},Mo=Cd+1,Lo=!0,Oo=1,Ao=0,Ta=(Dr||yi)&&ci.vertical,Ho=ci.metrics.advance*ci.scale/2;if(yi&&pr.verticalizable&&(Ao=Ri.lineOffset/2-(ci.imageName?-(to-ci.metrics.width*ci.scale)/2:(ci.scale-1)*to)),ci.imageName){var Ya=Yr[ci.imageName];Lo=Ya.sdf,Mo=1/(Oo=Ya.pixelRatio)}var Ws=Dr?[ci.x+Ho,ci.y]:[0,0],rs=Dr?[0,0]:[ci.x+Ho+_r[0],ci.y+_r[1]-Ao],Na=[0,0];Ta&&(Na=rs,rs=[0,0]);var is=(ci.metrics.left-Mo)*ci.scale-Ho+rs[0],$a=(-ci.metrics.top-Mo)*ci.scale+rs[1],Aa=is+co.w*ci.scale/Oo,Si=$a+co.h*ci.scale/Oo,Ki=new i(is,$a),ra=new i(Aa,$a),To=new i(is,Si),No=new i(Aa,Si);if(Ta){var io=new i(-Ho,Ho- -17),Ui=-Math.PI/2,Yo=to/2-Ho,Zs=new i(22-Yo,-(ci.imageName?Yo:0)),Is=new(Function.prototype.bind.apply(i,[null].concat(Na)));Ki._rotateAround(Ui,io)._add(Zs)._add(Is),ra._rotateAround(Ui,io)._add(Zs)._add(Is),To._rotateAround(Ui,io)._add(Zs)._add(Is),No._rotateAround(Ui,io)._add(Zs)._add(Is)}if(Xr){var Ru=Math.sin(Xr),Lc=Math.cos(Xr),ka=[Lc,-Ru,Ru,Lc];Ki._matMult(ka),ra._matMult(ka),To._matMult(ka),No._matMult(ka)}var Pl=new i(0,0),bu=new i(0,0);di.push({tl:Ki,tr:ra,bl:To,br:No,tex:co,writingMode:pr.writingMode,glyphOffset:Ws,sectionIndex:ci.sectionIndex,isSDF:Lo,pixelOffsetTL:Pl,pixelOffsetBR:bu,minFontScaleX:0,minFontScaleY:0})}}return di}(0,ee,lt,Fe,Ve,$e,ye,L.allowVerticalPlacement),Bn=L.textSizeData,jn=null;"source"===Bn.kind?(jn=[nu*Fe.layout.get("text-size").evaluate($e,{})])[0]>sc&&D(L.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Bn.kind&&((jn=[nu*Yt.compositeTextSizes[0].evaluate($e,{},mn),nu*Yt.compositeTextSizes[1].evaluate($e,{},mn)])[0]>sc||jn[1]>sc)&&D(L.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),L.addSymbols(L.text,wn,jn,lt,Ve,$e,It,N,gt.lineStartIndex,gt.lineLength,en,mn);for(var Yn=0,Kn=Ot;Yn<Kn.length;Yn+=1)Gt[Kn[Yn]]=L.text.placedSymbolArray.length-1;return 4*wn.length}function kg(L){for(var N in L)return L[N];return null}function Qy(L,N,ee,ye){var Fe=L.compareText;if(N in Fe){for(var Ve=Fe[N],$e=Ve.length-1;$e>=0;$e--)if(ye.dist(Ve[$e])<ee)return!0}else Fe[N]=[];return Fe[N].push(ye),!1}var e1=tu.VectorTileFeature.types,Sg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Gh(L,N,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en){var Yt=lt?Math.min(sc,Math.round(lt[0])):0,mn=lt?Math.min(sc,Math.round(lt[1])):0;L.emplaceBack(N,ee,Math.round(32*ye),Math.round(32*Fe),Ve,$e,(Yt<<1)+(gt?1:0),mn,16*It,16*Ot,256*Gt,256*en)}function P0(L,N,ee){L.emplaceBack(N.x,N.y,ee),L.emplaceBack(N.x,N.y,ee),L.emplaceBack(N.x,N.y,ee),L.emplaceBack(N.x,N.y,ee)}function bl(L){for(var N=0,ee=L.sections;N<ee.length;N+=1)if(po(ee[N].text))return!0;return!1}var Cc=function(L){this.layoutVertexArray=new V,this.indexArray=new oe,this.programConfigurations=L,this.segments=new Pn,this.dynamicLayoutVertexArray=new Y,this.opacityVertexArray=new W,this.placedSymbolArray=new qt};Cc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Cc.prototype.upload=function(L,N,ee,ye){this.isEmpty()||(ee&&(this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,mg.members),this.indexBuffer=L.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=L.createVertexBuffer(this.dynamicLayoutVertexArray,m_.members,!0),this.opacityVertexBuffer=L.createVertexBuffer(this.opacityVertexArray,Sg,!0),this.opacityVertexBuffer.itemSize=1),(ee||ye)&&this.programConfigurations.upload(L))},Cc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Hr("SymbolBuffers",Cc);var qf=function(L,N,ee){this.layoutVertexArray=new L,this.layoutAttributes=N,this.indexArray=new ee,this.segments=new Pn,this.collisionVertexArray=new q};qf.prototype.upload=function(L){this.layoutVertexBuffer=L.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=L.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=L.createVertexBuffer(this.collisionVertexArray,g_.members,!0)},qf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Hr("CollisionBuffers",qf);var ao=function(L){this.collisionBoxArray=L.collisionBoxArray,this.zoom=L.zoom,this.overscaling=L.overscaling,this.layers=L.layers,this.layerIds=this.layers.map(function($e){return $e.id}),this.index=L.index,this.pixelRatio=L.pixelRatio,this.sourceLayerIndex=L.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=vh([]),this.placementViewportMatrix=vh([]);var N=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_g(this.zoom,N["text-size"]),this.iconSizeData=_g(this.zoom,N["icon-size"]);var ee=this.layers[0].layout,ye=ee.get("symbol-sort-key"),Fe=ee.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==Fe&&void 0!==ye.constantOr(1),this.sortFeaturesByY=("viewport-y"===Fe||"auto"===Fe&&!this.sortFeaturesByKey)&&(ee.get("text-allow-overlap")||ee.get("icon-allow-overlap")||ee.get("text-ignore-placement")||ee.get("icon-ignore-placement")),"point"===ee.get("symbol-placement")&&(this.writingModes=ee.get("text-writing-mode").map(function($e){return Ds[$e]})),this.stateDependentLayerIds=this.layers.filter(function($e){return $e.isStateDependent()}).map(function($e){return $e.id}),this.sourceID=L.sourceID};ao.prototype.createArrays=function(){this.text=new Cc(new _o(mg.members,this.layers,this.zoom,function(L){return/^text/.test(L)})),this.icon=new Cc(new _o(mg.members,this.layers,this.zoom,function(L){return/^icon/.test(L)})),this.glyphOffsetArray=new Vt,this.lineVertexArray=new gn,this.symbolInstances=new Kt},ao.prototype.calculateGlyphDependencies=function(L,N,ee,ye,Fe){for(var Ve=0;Ve<L.length;Ve++)if(N[L.charCodeAt(Ve)]=!0,(ee||ye)&&Fe){var $e=Fh[L.charAt(Ve)];$e&&(N[$e.charCodeAt(0)]=!0)}},ao.prototype.populate=function(L,N,ee){var ye=this.layers[0],Fe=ye.layout,Ve=Fe.get("text-font"),$e=Fe.get("text-field"),lt=Fe.get("icon-image"),gt=("constant"!==$e.value.kind||$e.value.value instanceof Wn&&!$e.value.value.isEmpty()||$e.value.value.toString().length>0)&&("constant"!==Ve.value.kind||Ve.value.value.length>0),It="constant"!==lt.value.kind||!!lt.value.value||Object.keys(lt.parameters).length>0,Ot=Fe.get("symbol-sort-key");if(this.features=[],gt||It){for(var Gt=N.iconDependencies,en=N.glyphDependencies,Yt=N.availableImages,mn=new oo(this.zoom),wn=0,Bn=L;wn<Bn.length;wn+=1){var jn=Bn[wn],Yn=jn.feature,Kn=jn.id,sr=jn.index,pr=jn.sourceLayerIndex,_r=ye._featureFilter.needGeometry,Fr={type:Yn.type,id:Kn,properties:Yn.properties,geometry:_r?ds(Yn):[]};if(ye._featureFilter.filter(mn,Fr,ee)){_r||(Fr.geometry=ds(Yn));var Dr=void 0;if(gt){var jr=ye.getValueAndResolveTokens("text-field",Fr,ee,Yt),Yr=Wn.factory(jr);bl(Yr)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===nl()||this.hasRTLText&&Fo.isParsed())&&(Dr=v_(Yr,ye,Fr))}var yi=void 0;if(It){var Xr=ye.getValueAndResolveTokens("icon-image",Fr,ee,Yt);yi=Xr instanceof Nn?Xr:Nn.fromString(Xr)}if(Dr||yi){var di=this.sortFeaturesByKey?Ot.evaluate(Fr,{},ee):void 0,oi={id:Kn,text:Dr,icon:yi,index:sr,sourceLayerIndex:pr,geometry:ds(Yn),properties:Yn.properties,type:e1[Yn.type],sortKey:di};if(this.features.push(oi),yi&&(Gt[yi.name]=!0),Dr){var Wr=Ve.evaluate(Fr,{},ee).join(","),Ri="map"===Fe.get("text-rotation-alignment")&&"point"!==Fe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ds.vertical)>=0;for(var _i=0,wo=Dr.sections;_i<wo.length;_i+=1){var ci=wo[_i];if(ci.image)Gt[ci.image.name]=!0;else{var co=ts(Dr.toString()),Mo=ci.fontStack||Wr,Lo=en[Mo]=en[Mo]||{};this.calculateGlyphDependencies(ci.text,Lo,Ri,this.allowVerticalPlacement,co)}}}}}}"line"===Fe.get("symbol-placement")&&(this.features=function(Oo){var Ao={},Ta={},Ho=[],qo=0;function Ma(No){Ho.push(Oo[No]),qo++}function Ya(No,io,Ui){var Yo=Ta[No];return delete Ta[No],Ta[io]=Yo,Ho[Yo].geometry[0].pop(),Ho[Yo].geometry[0]=Ho[Yo].geometry[0].concat(Ui[0]),Yo}function Ws(No,io,Ui){var Yo=Ao[io];return delete Ao[io],Ao[No]=Yo,Ho[Yo].geometry[0].shift(),Ho[Yo].geometry[0]=Ui[0].concat(Ho[Yo].geometry[0]),Yo}function rs(No,io,Ui){var Yo=Ui?io[0][io[0].length-1]:io[0][0];return No+":"+Yo.x+":"+Yo.y}for(var Na=0;Na<Oo.length;Na++){var is=Oo[Na],$a=is.geometry,Aa=is.text?is.text.toString():null;if(Aa){var Si=rs(Aa,$a),Ki=rs(Aa,$a,!0);if(Si in Ta&&Ki in Ao&&Ta[Si]!==Ao[Ki]){var ra=Ws(Si,Ki,$a),To=Ya(Si,Ki,Ho[ra].geometry);delete Ao[Si],delete Ta[Ki],Ta[rs(Aa,Ho[To].geometry,!0)]=To,Ho[ra].geometry=null}else Si in Ta?Ya(Si,Ki,$a):Ki in Ao?Ws(Si,Ki,$a):(Ma(Na),Ao[Si]=qo-1,Ta[Ki]=qo-1)}else Ma(Na)}return Ho.filter(function(No){return No.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oo,Ao){return Oo.sortKey-Ao.sortKey})}},ao.prototype.update=function(L,N,ee){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(L,N,this.layers,ee),this.icon.programConfigurations.updatePaintArrays(L,N,this.layers,ee))},ao.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},ao.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ao.prototype.upload=function(L){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(L),this.iconCollisionBox.upload(L)),this.text.upload(L,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(L,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ao.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ao.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ao.prototype.addToLineVertexArray=function(L,N){var ee=this.lineVertexArray.length;if(void 0!==L.segment){for(var ye=L.dist(N[L.segment+1]),Fe=L.dist(N[L.segment]),Ve={},$e=L.segment+1;$e<N.length;$e++)Ve[$e]={x:N[$e].x,y:N[$e].y,tileUnitDistanceFromAnchor:ye},$e<N.length-1&&(ye+=N[$e+1].dist(N[$e]));for(var lt=L.segment||0;lt>=0;lt--)Ve[lt]={x:N[lt].x,y:N[lt].y,tileUnitDistanceFromAnchor:Fe},lt>0&&(Fe+=N[lt-1].dist(N[lt]));for(var gt=0;gt<N.length;gt++){var It=Ve[gt];this.lineVertexArray.emplaceBack(It.x,It.y,It.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ee,lineLength:this.lineVertexArray.length-ee}},ao.prototype.addSymbols=function(L,N,ee,ye,Fe,Ve,$e,lt,gt,It,Ot,Gt){for(var en=L.indexArray,Yt=L.layoutVertexArray,mn=L.segments.prepareSegment(4*N.length,Yt,en,Ve.sortKey),wn=this.glyphOffsetArray.length,Bn=mn.vertexLength,jn=this.allowVerticalPlacement&&$e===Ds.vertical?Math.PI/2:0,Yn=Ve.text&&Ve.text.sections,Kn=0;Kn<N.length;Kn++){var sr=N[Kn],pr=sr.tl,_r=sr.tr,Fr=sr.bl,Dr=sr.br,jr=sr.tex,Yr=sr.pixelOffsetTL,yi=sr.pixelOffsetBR,Xr=sr.minFontScaleX,di=sr.minFontScaleY,oi=sr.glyphOffset,Wr=sr.isSDF,Ri=sr.sectionIndex,_i=mn.vertexLength,wo=oi[1];Gh(Yt,lt.x,lt.y,pr.x,wo+pr.y,jr.x,jr.y,ee,Wr,Yr.x,Yr.y,Xr,di),Gh(Yt,lt.x,lt.y,_r.x,wo+_r.y,jr.x+jr.w,jr.y,ee,Wr,yi.x,Yr.y,Xr,di),Gh(Yt,lt.x,lt.y,Fr.x,wo+Fr.y,jr.x,jr.y+jr.h,ee,Wr,Yr.x,yi.y,Xr,di),Gh(Yt,lt.x,lt.y,Dr.x,wo+Dr.y,jr.x+jr.w,jr.y+jr.h,ee,Wr,yi.x,yi.y,Xr,di),P0(L.dynamicLayoutVertexArray,lt,jn),en.emplaceBack(_i,_i+1,_i+2),en.emplaceBack(_i+1,_i+2,_i+3),mn.vertexLength+=4,mn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(oi[0]),Kn!==N.length-1&&Ri===N[Kn+1].sectionIndex||L.programConfigurations.populatePaintArrays(Yt.length,Ve,Ve.index,{},Gt,Yn&&Yn[Ri])}L.placedSymbolArray.emplaceBack(lt.x,lt.y,wn,this.glyphOffsetArray.length-wn,Bn,gt,It,lt.segment,ee?ee[0]:0,ee?ee[1]:0,ye[0],ye[1],$e,0,!1,0,Ot)},ao.prototype._addCollisionDebugVertex=function(L,N,ee,ye,Fe,Ve){return N.emplaceBack(0,0),L.emplaceBack(ee.x,ee.y,ye,Fe,Math.round(Ve.x),Math.round(Ve.y))},ao.prototype.addCollisionDebugVertices=function(L,N,ee,ye,Fe,Ve,$e){var lt=Fe.segments.prepareSegment(4,Fe.layoutVertexArray,Fe.indexArray),gt=lt.vertexLength,It=Fe.layoutVertexArray,Ot=Fe.collisionVertexArray,Gt=$e.anchorX,en=$e.anchorY;this._addCollisionDebugVertex(It,Ot,Ve,Gt,en,new i(L,N)),this._addCollisionDebugVertex(It,Ot,Ve,Gt,en,new i(ee,N)),this._addCollisionDebugVertex(It,Ot,Ve,Gt,en,new i(ee,ye)),this._addCollisionDebugVertex(It,Ot,Ve,Gt,en,new i(L,ye)),lt.vertexLength+=4;var Yt=Fe.indexArray;Yt.emplaceBack(gt,gt+1),Yt.emplaceBack(gt+1,gt+2),Yt.emplaceBack(gt+2,gt+3),Yt.emplaceBack(gt+3,gt),lt.primitiveLength+=4},ao.prototype.addDebugCollisionBoxes=function(L,N,ee,ye){for(var Fe=L;Fe<N;Fe++){var Ve=this.collisionBoxArray.get(Fe);this.addCollisionDebugVertices(Ve.x1,Ve.y1,Ve.x2,Ve.y2,ye?this.textCollisionBox:this.iconCollisionBox,Ve.anchorPoint,ee)}},ao.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qf(_e,Ny.members,Xe),this.iconCollisionBox=new qf(_e,Ny.members,Xe);for(var L=0;L<this.symbolInstances.length;L++){var N=this.symbolInstances.get(L);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},ao.prototype._deserializeCollisionBoxesForSymbol=function(L,N,ee,ye,Fe,Ve,$e,lt,gt){for(var It={},Ot=N;Ot<ee;Ot++){var Gt=L.get(Ot);It.textBox={x1:Gt.x1,y1:Gt.y1,x2:Gt.x2,y2:Gt.y2,anchorPointX:Gt.anchorPointX,anchorPointY:Gt.anchorPointY},It.textFeatureIndex=Gt.featureIndex;break}for(var en=ye;en<Fe;en++){var Yt=L.get(en);It.verticalTextBox={x1:Yt.x1,y1:Yt.y1,x2:Yt.x2,y2:Yt.y2,anchorPointX:Yt.anchorPointX,anchorPointY:Yt.anchorPointY},It.verticalTextFeatureIndex=Yt.featureIndex;break}for(var mn=Ve;mn<$e;mn++){var wn=L.get(mn);It.iconBox={x1:wn.x1,y1:wn.y1,x2:wn.x2,y2:wn.y2,anchorPointX:wn.anchorPointX,anchorPointY:wn.anchorPointY},It.iconFeatureIndex=wn.featureIndex;break}for(var Bn=lt;Bn<gt;Bn++){var jn=L.get(Bn);It.verticalIconBox={x1:jn.x1,y1:jn.y1,x2:jn.x2,y2:jn.y2,anchorPointX:jn.anchorPointX,anchorPointY:jn.anchorPointY},It.verticalIconFeatureIndex=jn.featureIndex;break}return It},ao.prototype.deserializeCollisionBoxes=function(L){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var ee=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(L,ee.textBoxStartIndex,ee.textBoxEndIndex,ee.verticalTextBoxStartIndex,ee.verticalTextBoxEndIndex,ee.iconBoxStartIndex,ee.iconBoxEndIndex,ee.verticalIconBoxStartIndex,ee.verticalIconBoxEndIndex))}},ao.prototype.hasTextData=function(){return this.text.segments.get().length>0},ao.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ao.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ao.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ao.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ao.prototype.addIndicesForPlacedSymbol=function(L,N){for(var ee=L.placedSymbolArray.get(N),ye=ee.vertexStartIndex+4*ee.numGlyphs,Fe=ee.vertexStartIndex;Fe<ye;Fe+=4)L.indexArray.emplaceBack(Fe,Fe+1,Fe+2),L.indexArray.emplaceBack(Fe+1,Fe+2,Fe+3)},ao.prototype.getSortedSymbolIndexes=function(L){if(this.sortedAngle===L&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var N=Math.sin(L),ee=Math.cos(L),ye=[],Fe=[],Ve=[],$e=0;$e<this.symbolInstances.length;++$e){Ve.push($e);var lt=this.symbolInstances.get($e);ye.push(0|Math.round(N*lt.anchorX+ee*lt.anchorY)),Fe.push(lt.featureIndex)}return Ve.sort(function(gt,It){return ye[gt]-ye[It]||Fe[It]-Fe[gt]}),Ve},ao.prototype.addToSortKeyRanges=function(L,N){var ee=this.sortKeyRanges[this.sortKeyRanges.length-1];ee&&ee.sortKey===N?ee.symbolInstanceEnd=L+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:L,symbolInstanceEnd:L+1})},ao.prototype.sortFeatures=function(L){var N=this;if(this.sortFeaturesByY&&this.sortedAngle!==L&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(L),this.sortedAngle=L,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var ee=0,ye=this.symbolInstanceIndexes;ee<ye.length;ee+=1){var Ve=this.symbolInstances.get(ye[ee]);this.featureSortOrder.push(Ve.featureIndex),[Ve.rightJustifiedTextSymbolIndex,Ve.centerJustifiedTextSymbolIndex,Ve.leftJustifiedTextSymbolIndex].forEach(function($e,lt,gt){$e>=0&&gt.indexOf($e)===lt&&N.addIndicesForPlacedSymbol(N.text,$e)}),Ve.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ve.verticalPlacedTextSymbolIndex),Ve.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ve.placedIconSymbolIndex),Ve.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ve.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Hr("SymbolBucket",ao,{omit:["layers","collisionBoxArray","features","compareText"]}),ao.MAX_GLYPHS=65535,ao.addDynamicAttributes=P0;var Gs=new ya({"symbol-placement":new Kr(He.layout_symbol["symbol-placement"]),"symbol-spacing":new Kr(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kr(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ti(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kr(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kr(He.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Kr(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kr(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kr(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new ti(He.layout_symbol["icon-size"]),"icon-text-fit":new Kr(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kr(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new ti(He.layout_symbol["icon-image"]),"icon-rotate":new ti(He.layout_symbol["icon-rotate"]),"icon-padding":new Kr(He.layout_symbol["icon-padding"]),"icon-keep-upright":new Kr(He.layout_symbol["icon-keep-upright"]),"icon-offset":new ti(He.layout_symbol["icon-offset"]),"icon-anchor":new ti(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kr(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kr(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kr(He.layout_symbol["text-rotation-alignment"]),"text-field":new ti(He.layout_symbol["text-field"]),"text-font":new ti(He.layout_symbol["text-font"]),"text-size":new ti(He.layout_symbol["text-size"]),"text-max-width":new ti(He.layout_symbol["text-max-width"]),"text-line-height":new Kr(He.layout_symbol["text-line-height"]),"text-letter-spacing":new ti(He.layout_symbol["text-letter-spacing"]),"text-justify":new ti(He.layout_symbol["text-justify"]),"text-radial-offset":new ti(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kr(He.layout_symbol["text-variable-anchor"]),"text-anchor":new ti(He.layout_symbol["text-anchor"]),"text-max-angle":new Kr(He.layout_symbol["text-max-angle"]),"text-writing-mode":new Kr(He.layout_symbol["text-writing-mode"]),"text-rotate":new ti(He.layout_symbol["text-rotate"]),"text-padding":new Kr(He.layout_symbol["text-padding"]),"text-keep-upright":new Kr(He.layout_symbol["text-keep-upright"]),"text-transform":new ti(He.layout_symbol["text-transform"]),"text-offset":new ti(He.layout_symbol["text-offset"]),"text-allow-overlap":new Kr(He.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Kr(He.layout_symbol["text-ignore-placement"]),"text-optional":new Kr(He.layout_symbol["text-optional"])}),tf={paint:new ya({"icon-opacity":new ti(He.paint_symbol["icon-opacity"]),"icon-color":new ti(He.paint_symbol["icon-color"]),"icon-halo-color":new ti(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new ti(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ti(He.paint_symbol["icon-halo-blur"]),"icon-translate":new Kr(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kr(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new ti(He.paint_symbol["text-opacity"]),"text-color":new ti(He.paint_symbol["text-color"],{runtimeType:Zt,getOverride:function(L){return L.textColor},hasOverride:function(L){return!!L.textColor}}),"text-halo-color":new ti(He.paint_symbol["text-halo-color"]),"text-halo-width":new ti(He.paint_symbol["text-halo-width"]),"text-halo-blur":new ti(He.paint_symbol["text-halo-blur"]),"text-translate":new Kr(He.paint_symbol["text-translate"]),"text-translate-anchor":new Kr(He.paint_symbol["text-translate-anchor"])}),layout:Gs},nf=function(L){this.type=L.property.overrides?L.property.overrides.runtimeType:Nt,this.defaultValue=L};nf.prototype.evaluate=function(L){if(L.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(L.formattedSection))return N.getOverride(L.formattedSection)}return L.feature&&L.featureState?this.defaultValue.evaluate(L.feature,L.featureState):this.defaultValue.property.specification.default},nf.prototype.eachChild=function(L){this.defaultValue.isConstant()||L(this.defaultValue.value._styleExpression.expression)},nf.prototype.outputDefined=function(){return!1},nf.prototype.serialize=function(){return null},Hr("FormatSectionOverride",nf,{omit:["defaultValue"]});var Eg=function(L){function N(ee){L.call(this,ee,tf)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.recalculate=function(ee,ye){if(L.prototype.recalculate.call(this,ee,ye),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var Fe=this.layout.get("text-writing-mode");if(Fe){for(var Ve=[],$e=0,lt=Fe;$e<lt.length;$e+=1){var gt=lt[$e];Ve.indexOf(gt)<0&&Ve.push(gt)}this.layout._values["text-writing-mode"]=Ve}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},N.prototype.getValueAndResolveTokens=function(ee,ye,Fe,Ve){var gt,$e=this.layout.get(ee).evaluate(ye,{},Fe,Ve),lt=this._unevaluatedLayout._values[ee];return lt.isDataDriven()||Yl(lt.value)||!$e?$e:(gt=ye.properties,$e.replace(/{([^{}]+)}/g,function(Ot,Gt){return Gt in gt?String(gt[Gt]):""}))},N.prototype.createBucket=function(ee){return new ao(ee)},N.prototype.queryRadius=function(){return 0},N.prototype.queryIntersectsFeature=function(){return!1},N.prototype._setPaintOverrides=function(){for(var ee=0,ye=tf.paint.overridableProperties;ee<ye.length;ee+=1){var Fe=ye[ee];if(N.hasPaintOverride(this.layout,Fe)){var Ve,$e=this.paint.get(Fe),lt=new nf($e),gt=new cu(lt,$e.property.specification);Ve="constant"===$e.value.kind||"source"===$e.value.kind?new dl("source",gt):new zs("composite",gt,$e.value.zoomStops,$e.value._interpolationType),this.paint._values[Fe]=new ta($e.property,Ve,$e.parameters)}}},N.prototype._handleOverridablePaintPropertyUpdate=function(ee,ye,Fe){return!(!this.layout||ye.isDataDriven()||Fe.isDataDriven())&&N.hasPaintOverride(this.layout,ee)},N.hasPaintOverride=function(ee,ye){var Fe=ee.get("text-field"),Ve=tf.paint.properties[ye],$e=!1,lt=function(Ot){for(var Gt=0,en=Ot;Gt<en.length;Gt+=1)if(Ve.overrides&&Ve.overrides.hasOverride(en[Gt]))return void($e=!0)};if("constant"===Fe.value.kind&&Fe.value.value instanceof Wn)lt(Fe.value.value.sections);else if("source"===Fe.value.kind){var gt=function(Ot){$e||(Ot instanceof gr&&fr(Ot.value)===on?lt(Ot.value.sections):Ot instanceof an?lt(Ot.sections):Ot.eachChild(gt))},It=Fe.value;It._styleExpression&&gt(It._styleExpression.expression)}return $e},N}(xa),t1={paint:new ya({"background-color":new Kr(He.paint_background["background-color"]),"background-pattern":new va(He.paint_background["background-pattern"]),"background-opacity":new Kr(He.paint_background["background-opacity"])})},Cg=function(L){function N(ee){L.call(this,ee,t1)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N}(xa),n1={paint:new ya({"raster-opacity":new Kr(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kr(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kr(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kr(He.paint_raster["raster-brightness-max"]),"raster-saturation":new Kr(He.paint_raster["raster-saturation"]),"raster-contrast":new Kr(He.paint_raster["raster-contrast"]),"raster-resampling":new Kr(He.paint_raster["raster-resampling"]),"raster-fade-duration":new Kr(He.paint_raster["raster-fade-duration"])})},Dg=function(L){function N(ee){L.call(this,ee,n1)}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N}(xa),r1=function(L){function N(ee){L.call(this,ee,{}),this.implementation=ee}return L&&(N.__proto__=L),(N.prototype=Object.create(L&&L.prototype)).constructor=N,N.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},N.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},N.prototype.recalculate=function(){},N.prototype.updateTransitions=function(){},N.prototype.hasTransition=function(){},N.prototype.serialize=function(){},N.prototype.onAdd=function(ee){this.implementation.onAdd&&this.implementation.onAdd(ee,ee.painter.context.gl)},N.prototype.onRemove=function(ee){this.implementation.onRemove&&this.implementation.onRemove(ee,ee.painter.context.gl)},N}(xa),Ig={circle:ky,heatmap:ll,hillshade:ba,fill:cg,"fill-extrusion":b0,line:p_,symbol:Eg,background:Cg,raster:Dg},Lg=self.HTMLImageElement,Og=self.HTMLCanvasElement,Wh=self.HTMLVideoElement,Zh=self.ImageData,Yh=self.ImageBitmap,vu=function(L,N,ee,ye){this.context=L,this.format=ee,this.texture=L.gl.createTexture(),this.update(N,ye)};vu.prototype.update=function(L,N,ee){var ye=L.width,Fe=L.height,Ve=!(this.size&&this.size[0]===ye&&this.size[1]===Fe||ee),$e=this.context,lt=$e.gl;if(this.useMipmap=!(!N||!N.useMipmap),lt.bindTexture(lt.TEXTURE_2D,this.texture),$e.pixelStoreUnpackFlipY.set(!1),$e.pixelStoreUnpack.set(1),$e.pixelStoreUnpackPremultiplyAlpha.set(this.format===lt.RGBA&&(!N||!1!==N.premultiply)),Ve)this.size=[ye,Fe],L instanceof Lg||L instanceof Og||L instanceof Wh||L instanceof Zh||Yh&&L instanceof Yh?lt.texImage2D(lt.TEXTURE_2D,0,this.format,this.format,lt.UNSIGNED_BYTE,L):lt.texImage2D(lt.TEXTURE_2D,0,this.format,ye,Fe,0,this.format,lt.UNSIGNED_BYTE,L.data);else{var gt=ee||{x:0,y:0},It=gt.x,Ot=gt.y;L instanceof Lg||L instanceof Og||L instanceof Wh||L instanceof Zh||Yh&&L instanceof Yh?lt.texSubImage2D(lt.TEXTURE_2D,0,It,Ot,lt.RGBA,lt.UNSIGNED_BYTE,L):lt.texSubImage2D(lt.TEXTURE_2D,0,It,Ot,ye,Fe,lt.RGBA,lt.UNSIGNED_BYTE,L.data)}this.useMipmap&&this.isSizePowerOfTwo()&&lt.generateMipmap(lt.TEXTURE_2D)},vu.prototype.bind=function(L,N,ee){var ye=this.context.gl;ye.bindTexture(ye.TEXTURE_2D,this.texture),ee!==ye.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(ee=ye.LINEAR),L!==this.filter&&(ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MAG_FILTER,L),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ee||L),this.filter=L),N!==this.wrap&&(ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,N),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,N),this.wrap=N)},vu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},vu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var R0=function(L){var N=this;this._callback=L,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};R0.prototype.trigger=function(){var L=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){L._triggered=!1,L._callback()},0))},R0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Gf=function(L,N,ee){this.target=L,this.parent=N,this.mapId=ee,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},p(["receive","process"],this),this.invoker=new R0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?L:self};function F0(L,N,ee){var ye=2*Math.PI*6378137/256/Math.pow(2,ee);return[L*ye-2*Math.PI*6378137/2,N*ye-2*Math.PI*6378137/2]}Gf.prototype.send=function(L,N,ee,ye,Fe){var Ve=this;void 0===Fe&&(Fe=!1);var $e=Math.round(1e18*Math.random()).toString(36).substring(0,10);ee&&(this.callbacks[$e]=ee);var lt=B(this.globalScope)?void 0:[];return this.target.postMessage({id:$e,type:L,hasCallback:!!ee,targetMapId:ye,mustQueue:Fe,sourceMapId:this.mapId,data:js(N,lt)},lt),{cancel:function(){ee&&delete Ve.callbacks[$e],Ve.target.postMessage({id:$e,type:"<cancel>",targetMapId:ye,sourceMapId:Ve.mapId})}}},Gf.prototype.receive=function(L){var N=L.data,ee=N.id;if(ee&&(!N.targetMapId||this.mapId===N.targetMapId))if("<cancel>"===N.type){delete this.tasks[ee];var ye=this.cancelCallbacks[ee];delete this.cancelCallbacks[ee],ye&&ye()}else P()||N.mustQueue?(this.tasks[ee]=N,this.taskQueue.push(ee),this.invoker.trigger()):this.processTask(ee,N)},Gf.prototype.process=function(){if(this.taskQueue.length){var L=this.taskQueue.shift(),N=this.tasks[L];delete this.tasks[L],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(L,N)}},Gf.prototype.processTask=function(L,N){var ee=this;if("<response>"===N.type){var ye=this.callbacks[L];delete this.callbacks[L],ye&&(N.error?ye(Us(N.error)):ye(null,Us(N.data)))}else{var Fe=!1,Ve=B(this.globalScope)?void 0:[],$e=N.hasCallback?function(Ot,Gt){Fe=!0,delete ee.cancelCallbacks[L],ee.target.postMessage({id:L,type:"<response>",sourceMapId:ee.mapId,error:Ot?js(Ot):null,data:js(Gt,Ve)},Ve)}:function(Ot){Fe=!0},lt=null,gt=Us(N.data);if(this.parent[N.type])lt=this.parent[N.type](N.sourceMapId,gt,$e);else if(this.parent.getWorkerSource){var It=N.type.split(".");lt=this.parent.getWorkerSource(N.sourceMapId,It[0],gt.source)[It[1]](gt,$e)}else $e(new Error("Could not find function "+N.type));!Fe&&lt&&lt.cancel&&(this.cancelCallbacks[L]=lt.cancel)}},Gf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ca=function(L,N){L&&(N?this.setSouthWest(L).setNorthEast(N):4===L.length?this.setSouthWest([L[0],L[1]]).setNorthEast([L[2],L[3]]):this.setSouthWest(L[0]).setNorthEast(L[1]))};ca.prototype.setNorthEast=function(L){return this._ne=L instanceof go?new go(L.lng,L.lat):go.convert(L),this},ca.prototype.setSouthWest=function(L){return this._sw=L instanceof go?new go(L.lng,L.lat):go.convert(L),this},ca.prototype.extend=function(L){var N,ee,ye=this._sw,Fe=this._ne;if(L instanceof go)N=L,ee=L;else{if(!(L instanceof ca))return Array.isArray(L)?4===L.length||L.every(Array.isArray)?this.extend(ca.convert(L)):this.extend(go.convert(L)):this;if(ee=L._ne,!(N=L._sw)||!ee)return this}return ye||Fe?(ye.lng=Math.min(N.lng,ye.lng),ye.lat=Math.min(N.lat,ye.lat),Fe.lng=Math.max(ee.lng,Fe.lng),Fe.lat=Math.max(ee.lat,Fe.lat)):(this._sw=new go(N.lng,N.lat),this._ne=new go(ee.lng,ee.lat)),this},ca.prototype.getCenter=function(){return new go((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ca.prototype.getSouthWest=function(){return this._sw},ca.prototype.getNorthEast=function(){return this._ne},ca.prototype.getNorthWest=function(){return new go(this.getWest(),this.getNorth())},ca.prototype.getSouthEast=function(){return new go(this.getEast(),this.getSouth())},ca.prototype.getWest=function(){return this._sw.lng},ca.prototype.getSouth=function(){return this._sw.lat},ca.prototype.getEast=function(){return this._ne.lng},ca.prototype.getNorth=function(){return this._ne.lat},ca.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ca.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ca.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ca.prototype.contains=function(L){var N=go.convert(L),ee=N.lng,ye=N.lat,Ve=this._sw.lng<=ee&&ee<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ve=this._sw.lng>=ee&&ee>=this._ne.lng),this._sw.lat<=ye&&ye<=this._ne.lat&&Ve},ca.convert=function(L){return!L||L instanceof ca?L:new ca(L)};var N0=6371008.8,go=function(L,N){if(isNaN(L)||isNaN(N))throw new Error("Invalid LngLat object: ("+L+", "+N+")");if(this.lng=+L,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};go.prototype.wrap=function(){return new go(u(this.lng,-180,180),this.lat)},go.prototype.toArray=function(){return[this.lng,this.lat]},go.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},go.prototype.distanceTo=function(L){var N=Math.PI/180,ee=this.lat*N,ye=L.lat*N,Fe=Math.sin(ee)*Math.sin(ye)+Math.cos(ee)*Math.cos(ye)*Math.cos((L.lng-this.lng)*N);return N0*Math.acos(Math.min(Fe,1))},go.prototype.toBounds=function(L){void 0===L&&(L=0);var N=360*L/40075017,ee=N/Math.cos(Math.PI/180*this.lat);return new ca(new go(this.lng-ee,this.lat-N),new go(this.lng+ee,this.lat+N))},go.convert=function(L){if(L instanceof go)return L;if(Array.isArray(L)&&(2===L.length||3===L.length))return new go(Number(L[0]),Number(L[1]));if(!Array.isArray(L)&&"object"==typeof L&&null!==L)return new go(Number("lng"in L?L.lng:L.lon),Number(L.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Rd=2*Math.PI*N0;function z0(L){return Rd*Math.cos(L*Math.PI/180)}function $h(L){return(180+L)/360}function Fd(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function Pg(L,N){return L/z0(N)}function B0(L){return 360/Math.PI*Math.atan(Math.exp((180-360*L)*Math.PI/180))-90}var rf=function(L,N,ee){void 0===ee&&(ee=0),this.x=+L,this.y=+N,this.z=+ee};rf.fromLngLat=function(L,N){void 0===N&&(N=0);var ee=go.convert(L);return new rf($h(ee.lng),Fd(ee.lat),Pg(N,ee.lat))},rf.prototype.toLngLat=function(){return new go(360*this.x-180,B0(this.y))},rf.prototype.toAltitude=function(){return this.z*z0(B0(this.y))},rf.prototype.meterInMercatorCoordinateUnits=function(){return 1/Rd*(L=B0(this.y),1/Math.cos(L*Math.PI/180));var L};var af=function(L,N,ee){this.z=L,this.x=N,this.y=ee,this.key=Wf(0,L,L,N,ee)};af.prototype.equals=function(L){return this.z===L.z&&this.x===L.x&&this.y===L.y},af.prototype.url=function(L,N){var ee,ye,Fe,Ve,$e,lt=(ye=this.y,Fe=this.z,Ve=F0(256*(ee=this.x),256*(ye=Math.pow(2,Fe)-ye-1),Fe),$e=F0(256*(ee+1),256*(ye+1),Fe),Ve[0]+","+Ve[1]+","+$e[0]+","+$e[1]),gt=function(It,Ot,Gt){for(var en,Yt="",mn=It;mn>0;mn--)Yt+=(Ot&(en=1<<mn-1)?1:0)+(Gt&en?2:0);return Yt}(this.z,this.x,this.y);return L[(this.x+this.y)%L.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===N?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",gt).replace("{bbox-epsg-3857}",lt)},af.prototype.getTilePoint=function(L){var N=Math.pow(2,this.z);return new i((L.x*N-this.x)*eo,(L.y*N-this.y)*eo)},af.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Rg=function(L,N){this.wrap=L,this.canonical=N,this.key=Wf(L,N.z,N.z,N.x,N.y)},wa=function(L,N,ee,ye,Fe){this.overscaledZ=L,this.wrap=N,this.canonical=new af(ee,+ye,+Fe),this.key=Wf(N,L,ee,ye,Fe)};function Wf(L,N,ee,ye,Fe){(L*=2)<0&&(L=-1*L-1);var Ve=1<<ee;return(Ve*Ve*L+Ve*Fe+ye).toString(36)+ee.toString(36)+N.toString(36)}wa.prototype.equals=function(L){return this.overscaledZ===L.overscaledZ&&this.wrap===L.wrap&&this.canonical.equals(L.canonical)},wa.prototype.scaledTo=function(L){var N=this.canonical.z-L;return L>this.canonical.z?new wa(L,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wa(L,this.wrap,L,this.canonical.x>>N,this.canonical.y>>N)},wa.prototype.calculateScaledKey=function(L,N){var ee=this.canonical.z-L;return L>this.canonical.z?Wf(this.wrap*+N,L,this.canonical.z,this.canonical.x,this.canonical.y):Wf(this.wrap*+N,L,L,this.canonical.x>>ee,this.canonical.y>>ee)},wa.prototype.isChildOf=function(L){if(L.wrap!==this.wrap)return!1;var N=this.canonical.z-L.canonical.z;return 0===L.overscaledZ||L.overscaledZ<this.overscaledZ&&L.canonical.x===this.canonical.x>>N&&L.canonical.y===this.canonical.y>>N},wa.prototype.children=function(L){if(this.overscaledZ>=L)return[new wa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,ee=2*this.canonical.x,ye=2*this.canonical.y;return[new wa(N,this.wrap,N,ee,ye),new wa(N,this.wrap,N,ee+1,ye),new wa(N,this.wrap,N,ee,ye+1),new wa(N,this.wrap,N,ee+1,ye+1)]},wa.prototype.isLessThan=function(L){return this.wrap<L.wrap||!(this.wrap>L.wrap)&&(this.overscaledZ<L.overscaledZ||!(this.overscaledZ>L.overscaledZ)&&(this.canonical.x<L.canonical.x||!(this.canonical.x>L.canonical.x)&&this.canonical.y<L.canonical.y))},wa.prototype.wrapped=function(){return new wa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},wa.prototype.unwrapTo=function(L){return new wa(this.overscaledZ,L,this.canonical.z,this.canonical.x,this.canonical.y)},wa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},wa.prototype.toUnwrapped=function(){return new Rg(this.wrap,this.canonical)},wa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},wa.prototype.getTilePoint=function(L){return this.canonical.getTilePoint(new rf(L.x-this.wrap,L.y))},Hr("CanonicalTileID",af),Hr("OverscaledTileID",wa,{omit:["posMatrix"]});var yu=function(L,N,ee){if(this.uid=L,N.height!==N.width)throw new RangeError("DEM tiles must be square");if(ee&&"mapbox"!==ee&&"terrarium"!==ee)return D('"'+ee+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var ye=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=ee||"mapbox";for(var Fe=0;Fe<ye;Fe++)this.data[this._idx(-1,Fe)]=this.data[this._idx(0,Fe)],this.data[this._idx(ye,Fe)]=this.data[this._idx(ye-1,Fe)],this.data[this._idx(Fe,-1)]=this.data[this._idx(Fe,0)],this.data[this._idx(Fe,ye)]=this.data[this._idx(Fe,ye-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ye,-1)]=this.data[this._idx(ye-1,0)],this.data[this._idx(-1,ye)]=this.data[this._idx(0,ye-1)],this.data[this._idx(ye,ye)]=this.data[this._idx(ye-1,ye-1)]};yu.prototype.get=function(L,N){var ee=new Uint8Array(this.data.buffer),ye=4*this._idx(L,N);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(ee[ye],ee[ye+1],ee[ye+2])},yu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},yu.prototype._idx=function(L,N){if(L<-1||L>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(L+1)},yu.prototype._unpackMapbox=function(L,N,ee){return(256*L*256+256*N+ee)/10-1e4},yu.prototype._unpackTerrarium=function(L,N,ee){return 256*L+N+ee/256-32768},yu.prototype.getPixels=function(){return new hs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yu.prototype.backfillBorder=function(L,N,ee){if(this.dim!==L.dim)throw new Error("dem dimension mismatch");var ye=N*this.dim,Fe=N*this.dim+this.dim,Ve=ee*this.dim,$e=ee*this.dim+this.dim;switch(N){case-1:ye=Fe-1;break;case 1:Fe=ye+1}switch(ee){case-1:Ve=$e-1;break;case 1:$e=Ve+1}for(var lt=-N*this.dim,gt=-ee*this.dim,It=Ve;It<$e;It++)for(var Ot=ye;Ot<Fe;Ot++)this.data[this._idx(Ot,It)]=L.data[this._idx(Ot+lt,It+gt)]},Hr("DEMData",yu);var Nd=function(L){this._stringToNumber={},this._numberToString=[];for(var N=0;N<L.length;N++){var ee=L[N];this._stringToNumber[ee]=N,this._numberToString[N]=ee}};Nd.prototype.encode=function(L){return this._stringToNumber[L]},Nd.prototype.decode=function(L){return this._numberToString[L]};var Zf=function(L,N,ee,ye,Fe){this.type="Feature",this._vectorTileFeature=L,L._z=N,L._x=ee,L._y=ye,this.properties=L.properties,this.id=Fe},j0={geometry:{configurable:!0}};j0.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},j0.geometry.set=function(L){this._geometry=L},Zf.prototype.toJSON=function(){var L={geometry:this.geometry};for(var N in this)"_geometry"!==N&&"_vectorTileFeature"!==N&&(L[N]=this[N]);return L},Object.defineProperties(Zf.prototype,j0);var Yf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yf.prototype.updateState=function(L,N,ee){var ye=String(N);if(this.stateChanges[L]=this.stateChanges[L]||{},this.stateChanges[L][ye]=this.stateChanges[L][ye]||{},d(this.stateChanges[L][ye],ee),null===this.deletedStates[L])for(var Fe in this.deletedStates[L]={},this.state[L])Fe!==ye&&(this.deletedStates[L][Fe]=null);else if(this.deletedStates[L]&&null===this.deletedStates[L][ye])for(var Ve in this.deletedStates[L][ye]={},this.state[L][ye])ee[Ve]||(this.deletedStates[L][ye][Ve]=null);else for(var $e in ee)this.deletedStates[L]&&this.deletedStates[L][ye]&&null===this.deletedStates[L][ye][$e]&&delete this.deletedStates[L][ye][$e]},Yf.prototype.removeFeatureState=function(L,N,ee){if(null!==this.deletedStates[L]){var ye=String(N);if(this.deletedStates[L]=this.deletedStates[L]||{},ee&&void 0!==N)null!==this.deletedStates[L][ye]&&(this.deletedStates[L][ye]=this.deletedStates[L][ye]||{},this.deletedStates[L][ye][ee]=null);else if(void 0!==N)if(this.stateChanges[L]&&this.stateChanges[L][ye])for(ee in this.deletedStates[L][ye]={},this.stateChanges[L][ye])this.deletedStates[L][ye][ee]=null;else this.deletedStates[L][ye]=null;else this.deletedStates[L]=null}},Yf.prototype.getState=function(L,N){var ee=String(N),Ve=d({},(this.state[L]||{})[ee],(this.stateChanges[L]||{})[ee]);if(null===this.deletedStates[L])return{};if(this.deletedStates[L]){var $e=this.deletedStates[L][N];if(null===$e)return{};for(var lt in $e)delete Ve[lt]}return Ve},Yf.prototype.initializeTileState=function(L,N){L.setFeatureState(this.state,N)},Yf.prototype.coalesceChanges=function(L,N){var ee={};for(var ye in this.stateChanges){this.state[ye]=this.state[ye]||{};var Fe={};for(var Ve in this.stateChanges[ye])this.state[ye][Ve]||(this.state[ye][Ve]={}),d(this.state[ye][Ve],this.stateChanges[ye][Ve]),Fe[Ve]=this.state[ye][Ve];ee[ye]=Fe}for(var $e in this.deletedStates){this.state[$e]=this.state[$e]||{};var lt={};if(null===this.deletedStates[$e])for(var gt in this.state[$e])lt[gt]={},this.state[$e][gt]={};else for(var It in this.deletedStates[$e]){if(null===this.deletedStates[$e][It])this.state[$e][It]={};else for(var Ot=0,Gt=Object.keys(this.deletedStates[$e][It]);Ot<Gt.length;Ot+=1)delete this.state[$e][It][Gt[Ot]];lt[It]=this.state[$e][It]}ee[$e]=ee[$e]||{},d(ee[$e],lt)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(ee).length)for(var Yt in L)L[Yt].setFeatureState(ee,N)};var xu=function(L,N){this.tileID=L,this.x=L.canonical.x,this.y=L.canonical.y,this.z=L.canonical.z,this.grid=new Jo(eo,16,0),this.grid3D=new Jo(eo,16,0),this.featureIndexArray=new nn,this.promoteId=N};function U0(L,N,ee,ye,Fe){return x(L,function(Ve,$e){var lt=N instanceof ga?N.get($e):null;return lt&&lt.evaluate?lt.evaluate(ee,ye,Fe):lt})}function Dc(L){for(var N=1/0,ee=1/0,ye=-1/0,Fe=-1/0,Ve=0,$e=L;Ve<$e.length;Ve+=1){var lt=$e[Ve];N=Math.min(N,lt.x),ee=Math.min(ee,lt.y),ye=Math.max(ye,lt.x),Fe=Math.max(Fe,lt.y)}return{minX:N,minY:ee,maxX:ye,maxY:Fe}}function Fg(L,N){return N-L}xu.prototype.insert=function(L,N,ee,ye,Fe,Ve){var $e=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ee,ye,Fe);for(var lt=Ve?this.grid3D:this.grid,gt=0;gt<N.length;gt++){for(var It=N[gt],Ot=[1/0,1/0,-1/0,-1/0],Gt=0;Gt<It.length;Gt++){var en=It[Gt];Ot[0]=Math.min(Ot[0],en.x),Ot[1]=Math.min(Ot[1],en.y),Ot[2]=Math.max(Ot[2],en.x),Ot[3]=Math.max(Ot[3],en.y)}Ot[0]<eo&&Ot[1]<eo&&Ot[2]>=0&&Ot[3]>=0&&lt.insert($e,Ot[0],Ot[1],Ot[2],Ot[3])}},xu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new tu.VectorTile(new Nh(this.rawTileData)).layers,this.sourceLayerCoder=new Nd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},xu.prototype.query=function(L,N,ee,ye){var Fe=this;this.loadVTLayers();for(var Ve=L.params||{},$e=eo/L.tileSize/L.scale,lt=$l(Ve.filter),gt=L.queryGeometry,It=L.queryPadding*$e,Ot=Dc(gt),Gt=this.grid.query(Ot.minX-It,Ot.minY-It,Ot.maxX+It,Ot.maxY+It),en=Dc(L.cameraQueryGeometry),Yt=0,mn=this.grid3D.query(en.minX-It,en.minY-It,en.maxX+It,en.maxY+It,function(sr,pr,_r,Fr){return function(Dr,jr,Yr,yi,Xr){for(var di=0,oi=Dr;di<oi.length;di+=1){var Wr=oi[di];if(jr<=Wr.x&&Yr<=Wr.y&&yi>=Wr.x&&Xr>=Wr.y)return!0}var Ri=[new i(jr,Yr),new i(jr,Xr),new i(yi,Xr),new i(yi,Yr)];if(Dr.length>2)for(var _i=0,wo=Ri;_i<wo.length;_i+=1)if(Yc(Dr,wo[_i]))return!0;for(var ci=0;ci<Dr.length-1;ci++)if(Af(Dr[ci],Dr[ci+1],Ri))return!0;return!1}(L.cameraQueryGeometry,sr-It,pr-It,_r+It,Fr+It)});Yt<mn.length;Yt+=1)Gt.push(mn[Yt]);Gt.sort(Fg);for(var Bn,jn={},Yn=function(sr){var pr=Gt[sr];if(pr!==Bn){Bn=pr;var _r=Fe.featureIndexArray.get(pr),Fr=null;Fe.loadMatchingFeature(jn,_r.bucketIndex,_r.sourceLayerIndex,_r.featureIndex,lt,Ve.layers,Ve.availableImages,N,ee,ye,function(Dr,jr,Yr){return Fr||(Fr=ds(Dr)),jr.queryIntersectsFeature(gt,Dr,Yr,Fr,Fe.z,L.transform,$e,L.pixelPosMatrix)})}},Kn=0;Kn<Gt.length;Kn++)Yn(Kn);return jn},xu.prototype.loadMatchingFeature=function(L,N,ee,ye,Fe,Ve,$e,lt,gt,It,Ot){var Gt=this.bucketLayerIDs[N];if(!Ve||function(Fr,Dr){for(var jr=0;jr<Fr.length;jr++)if(Dr.indexOf(Fr[jr])>=0)return!0;return!1}(Ve,Gt)){var en=this.sourceLayerCoder.decode(ee),Yt=this.vtLayers[en].feature(ye);if(Fe.filter(new oo(this.tileID.overscaledZ),Yt))for(var mn=this.getId(Yt,en),wn=0;wn<Gt.length;wn++){var Bn=Gt[wn];if(!(Ve&&Ve.indexOf(Bn)<0)){var jn=lt[Bn];if(jn){var Yn={};void 0!==mn&&It&&(Yn=It.getState(jn.sourceLayer||"_geojsonTileLayer",mn));var Kn=gt[Bn];Kn.paint=U0(Kn.paint,jn.paint,Yt,Yn,$e),Kn.layout=U0(Kn.layout,jn.layout,Yt,Yn,$e);var sr=!Ot||Ot(Yt,jn,Yn);if(sr){var pr=new Zf(Yt,this.z,this.x,this.y,mn);pr.layer=Kn;var _r=L[Bn];void 0===_r&&(_r=L[Bn]=[]),_r.push({featureIndex:ye,feature:pr,intersectionZ:sr})}}}}}},xu.prototype.lookupSymbolFeatures=function(L,N,ee,ye,Fe,Ve,$e,lt){var gt={};this.loadVTLayers();for(var It=$l(Fe),Ot=0,Gt=L;Ot<Gt.length;Ot+=1)this.loadMatchingFeature(gt,ee,ye,Gt[Ot],It,Ve,$e,lt,N);return gt},xu.prototype.hasLayer=function(L){for(var N=0,ee=this.bucketLayerIDs;N<ee.length;N+=1)for(var ye=0,Fe=ee[N];ye<Fe.length;ye+=1)if(L===Fe[ye])return!0;return!1},xu.prototype.getId=function(L,N){var ee=L.id;return this.promoteId&&"boolean"==typeof(ee=L.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[N]])&&(ee=Number(ee)),ee},Hr("FeatureIndex",xu,{omit:["rawTileData","sourceLayerCoder"]});var Pa=function(L,N){this.tileID=L,this.uid=h(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Pa.prototype.registerFadeDuration=function(L){var N=L+this.timeAdded;N<ae.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},Pa.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Pa.prototype.loadVectorData=function(L,N,ee){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",L){for(var ye in L.featureIndex&&(this.latestFeatureIndex=L.featureIndex,L.rawTileData?(this.latestRawTileData=L.rawTileData,this.latestFeatureIndex.rawTileData=L.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=L.collisionBoxArray,this.buckets=function(It,Ot){var Gt={};if(!Ot)return Gt;for(var en=function(){var wn=mn[Yt],Bn=wn.layerIds.map(function(sr){return Ot.getLayer(sr)}).filter(Boolean);if(0!==Bn.length){wn.layers=Bn,wn.stateDependentLayerIds&&(wn.stateDependentLayers=wn.stateDependentLayerIds.map(function(sr){return Bn.filter(function(pr){return pr.id===sr})[0]}));for(var jn=0,Yn=Bn;jn<Yn.length;jn+=1)Gt[Yn[jn].id]=wn}},Yt=0,mn=It;Yt<mn.length;Yt+=1)en();return Gt}(L.buckets,N.style),this.hasSymbolBuckets=!1,this.buckets){var Fe=this.buckets[ye];if(Fe instanceof ao){if(this.hasSymbolBuckets=!0,!ee)break;Fe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ve in this.buckets){var $e=this.buckets[Ve];if($e instanceof ao&&$e.hasRTLText){this.hasRTLText=!0,Fo.isLoading()||Fo.isLoaded()||"deferred"!==nl()||Ju();break}}for(var lt in this.queryPadding=0,this.buckets){var gt=this.buckets[lt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(lt).queryRadius(gt))}L.imageAtlas&&(this.imageAtlas=L.imageAtlas),L.glyphAtlasImage&&(this.glyphAtlasImage=L.glyphAtlasImage)}else this.collisionBoxArray=new At},Pa.prototype.unloadVectorData=function(){for(var L in this.buckets)this.buckets[L].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Pa.prototype.getBucket=function(L){return this.buckets[L.id]},Pa.prototype.upload=function(L){for(var N in this.buckets){var ee=this.buckets[N];ee.uploadPending()&&ee.upload(L)}var ye=L.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new vu(L,this.imageAtlas.image,ye.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new vu(L,this.glyphAtlasImage,ye.ALPHA),this.glyphAtlasImage=null)},Pa.prototype.prepare=function(L){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(L,this.imageAtlasTexture)},Pa.prototype.queryRenderedFeatures=function(L,N,ee,ye,Fe,Ve,$e,lt,gt,It){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ye,cameraQueryGeometry:Fe,scale:Ve,tileSize:this.tileSize,pixelPosMatrix:It,transform:lt,params:$e,queryPadding:this.queryPadding*gt},L,N,ee):{}},Pa.prototype.querySourceFeatures=function(L,N){var ee=this.latestFeatureIndex;if(ee&&ee.rawTileData){var ye=ee.loadVTLayers(),Fe=N?N.sourceLayer:"",Ve=ye._geojsonTileLayer||ye[Fe];if(Ve)for(var $e=$l(N&&N.filter),lt=this.tileID.canonical,gt=lt.z,It=lt.x,Ot=lt.y,Gt={z:gt,x:It,y:Ot},en=0;en<Ve.length;en++){var Yt=Ve.feature(en);if($e.filter(new oo(this.tileID.overscaledZ),Yt)){var mn=ee.getId(Yt,Fe),wn=new Zf(Yt,gt,It,Ot,mn);wn.tile=Gt,L.push(wn)}}}},Pa.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Pa.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Pa.prototype.setExpiryData=function(L){var N=this.expirationTime;if(L.cacheControl){var ee=R(L.cacheControl);ee["max-age"]&&(this.expirationTime=Date.now()+1e3*ee["max-age"])}else L.expires&&(this.expirationTime=new Date(L.expires).getTime());if(this.expirationTime){var ye=Date.now(),Fe=!1;if(this.expirationTime>ye)Fe=!1;else if(N)if(this.expirationTime<N)Fe=!0;else{var Ve=this.expirationTime-N;Ve?this.expirationTime=ye+Math.max(Ve,3e4):Fe=!0}else Fe=!0;Fe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Pa.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Pa.prototype.setFeatureState=function(L,N){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(L).length){var ee=this.latestFeatureIndex.loadVTLayers();for(var ye in this.buckets)if(N.style.hasLayer(ye)){var Fe=this.buckets[ye],Ve=Fe.layers[0].sourceLayer||"_geojsonTileLayer",$e=ee[Ve],lt=L[Ve];if($e&&lt&&0!==Object.keys(lt).length){Fe.update(lt,$e,this.imageAtlas&&this.imageAtlas.patternPositions||{});var gt=N&&N.style&&N.style.getLayer(ye);gt&&(this.queryPadding=Math.max(this.queryPadding,gt.queryRadius(Fe)))}}}},Pa.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Pa.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ae.now()},Pa.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Pa.prototype.setHoldDuration=function(L){this.symbolFadeHoldUntil=ae.now()+L},Pa.prototype.setDependencies=function(L,N){for(var ee={},ye=0,Fe=N;ye<Fe.length;ye+=1)ee[Fe[ye]]=!0;this.dependencies[L]=ee},Pa.prototype.hasDependency=function(L,N){for(var ee=0,ye=L;ee<ye.length;ee+=1){var Ve=this.dependencies[ye[ee]];if(Ve)for(var $e=0,lt=N;$e<lt.length;$e+=1)if(Ve[lt[$e]])return!0}return!1};var Ic=self.performance,o1=function(L){this._marks={start:[L.url,"start"].join("#"),end:[L.url,"end"].join("#"),measure:L.url.toString()},Ic.mark(this._marks.start)};o1.prototype.finish=function(){Ic.mark(this._marks.end);var L=Ic.getEntriesByName(this._marks.measure);return 0===L.length&&(Ic.measure(this._marks.measure,this._marks.start,this._marks.end),L=Ic.getEntriesByName(this._marks.measure),Ic.clearMarks(this._marks.start),Ic.clearMarks(this._marks.end),Ic.clearMeasures(this._marks.measure)),L},f.Actor=Gf,f.AlphaImage=Mc,f.CanonicalTileID=af,f.CollisionBoxArray=At,f.Color=In,f.DEMData=yu,f.DataConstantProperty=Kr,f.DictionaryCoder=Nd,f.EXTENT=eo,f.ErrorEvent=pt,f.EvaluationParameters=oo,f.Event=ot,f.Evented=xt,f.FeatureIndex=xu,f.FillBucket=gu,f.FillExtrusionBucket=Hs,f.ImageAtlas=Qc,f.ImagePosition=jh,f.LineBucket=Cs,f.LngLat=go,f.LngLatBounds=ca,f.MercatorCoordinate=rf,f.ONE_EM=to,f.OverscaledTileID=wa,f.Point=i,f.Point$1=i,f.Properties=ya,f.Protobuf=Nh,f.RGBAImage=hs,f.RequestManager=pe,f.RequestPerformance=o1,f.ResourceType=Ct,f.SegmentVector=Pn,f.SourceFeatureState=Yf,f.StructArrayLayout1ui2=tt,f.StructArrayLayout2f1f2i16=Pe,f.StructArrayLayout2i4=Ga,f.StructArrayLayout3ui6=oe,f.StructArrayLayout4i8=Dl,f.SymbolBucket=ao,f.Texture=vu,f.Tile=Pa,f.Transitionable=Vs,f.Uniform1f=gi,f.Uniform1i=ni,f.Uniform2f=Ai,f.Uniform3f=Yi,f.Uniform4f=xo,f.UniformColor=mo,f.UniformMatrix4f=Do,f.UnwrappedTileID=Rg,f.ValidationError=Ge,f.WritingMode=Ds,f.ZoomHistory=Mi,f.add=function(L,N,ee){return L[0]=N[0]+ee[0],L[1]=N[1]+ee[1],L[2]=N[2]+ee[2],L},f.addDynamicAttributes=P0,f.asyncAll=function(L,N,ee){if(!L.length)return ee(null,[]);var ye=L.length,Fe=new Array(L.length),Ve=null;L.forEach(function($e,lt){N($e,function(gt,It){gt&&(Ve=gt),Fe[lt]=It,0==--ye&&ee(Ve,Fe)})})},f.bezier=a,f.bindAll=p,f.browser=ae,f.cacheEntryPossiblyAdded=function(L){++yt>Le&&(L.getActor().send("enforceCacheSizeLimit",Oe),yt=0)},f.clamp=l,f.clearTileCache=function(L){var N=self.caches.delete(be);L&&N.catch(L).then(function(){return L()})},f.clipLine=Ky,f.clone=function(L){var N=new xl(16);return N[0]=L[0],N[1]=L[1],N[2]=L[2],N[3]=L[3],N[4]=L[4],N[5]=L[5],N[6]=L[6],N[7]=L[7],N[8]=L[8],N[9]=L[9],N[10]=L[10],N[11]=L[11],N[12]=L[12],N[13]=L[13],N[14]=L[14],N[15]=L[15],N},f.clone$1=M,f.clone$2=function(L){var N=new xl(3);return N[0]=L[0],N[1]=L[1],N[2]=L[2],N},f.collisionCircleLayout=Sd,f.config=ne,f.create=function(){var L=new xl(16);return xl!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L},f.create$1=function(){var L=new xl(9);return xl!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L},f.create$2=function(){var L=new xl(4);return xl!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L},f.createCommonjsModule=k,f.createExpression=Ra,f.createLayout=Vo,f.createStyleLayer=function(L){return"custom"===L.type?new r1(L):new Ig[L.type](L)},f.cross=function(L,N,ee){var ye=N[0],Fe=N[1],Ve=N[2],$e=ee[0],lt=ee[1],gt=ee[2];return L[0]=Fe*gt-Ve*lt,L[1]=Ve*$e-ye*gt,L[2]=ye*lt-Fe*$e,L},f.deepEqual=function L(N,ee){if(Array.isArray(N)){if(!Array.isArray(ee)||N.length!==ee.length)return!1;for(var ye=0;ye<N.length;ye++)if(!L(N[ye],ee[ye]))return!1;return!0}if("object"==typeof N&&null!==N&&null!==ee){if("object"!=typeof ee||Object.keys(N).length!==Object.keys(ee).length)return!1;for(var Fe in N)if(!L(N[Fe],ee[Fe]))return!1;return!0}return N===ee},f.dot=function(L,N){return L[0]*N[0]+L[1]*N[1]+L[2]*N[2]},f.dot$1=function(L,N){return L[0]*N[0]+L[1]*N[1]+L[2]*N[2]+L[3]*N[3]},f.ease=o,f.emitValidationErrors=Fa,f.endsWith=_,f.enforceCacheSizeLimit=function(L){Ze(),ge&&ge.then(function(N){N.keys().then(function(ee){for(var ye=0;ye<ee.length-L;ye++)N.delete(ee[ye])})})},f.evaluateSizeForFeature=I0,f.evaluateSizeForZoom=Wy,f.evaluateVariableOffset=Ag,f.evented=ea,f.extend=d,f.featureFilter=$l,f.filterObject=b,f.fromRotation=function(L,N){var ee=Math.sin(N),ye=Math.cos(N);return L[0]=ye,L[1]=ee,L[2]=0,L[3]=-ee,L[4]=ye,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L},f.getAnchorAlignment=C0,f.getAnchorJustification=O0,f.getArrayBuffer=Ft,f.getImage=it,f.getJSON=function(L,N){return Lt(d(L,{type:"json"}),N)},f.getRTLTextPluginStatus=nl,f.getReferrer=vt,f.getVideo=function(L,N){var ee,ye,Fe=self.document.createElement("video");Fe.muted=!0,Fe.onloadstart=function(){N(null,Fe)};for(var Ve=0;Ve<L.length;Ve++){var $e=self.document.createElement("source");ee=L[Ve],ye=void 0,(ye=self.document.createElement("a")).href=ee,ye.protocol===self.document.location.protocol&&ye.host===self.document.location.host||(Fe.crossOrigin="Anonymous"),$e.src=L[Ve],Fe.appendChild($e)}return{cancel:function(){}}},f.identity=vh,f.invert=function(L,N){var ee=N[0],ye=N[1],Fe=N[2],Ve=N[3],$e=N[4],lt=N[5],gt=N[6],It=N[7],Ot=N[8],Gt=N[9],en=N[10],Yt=N[11],mn=N[12],wn=N[13],Bn=N[14],jn=N[15],Yn=ee*lt-ye*$e,Kn=ee*gt-Fe*$e,sr=ee*It-Ve*$e,pr=ye*gt-Fe*lt,_r=ye*It-Ve*lt,Fr=Fe*It-Ve*gt,Dr=Ot*wn-Gt*mn,jr=Ot*Bn-en*mn,Yr=Ot*jn-Yt*mn,yi=Gt*Bn-en*wn,Xr=Gt*jn-Yt*wn,di=en*jn-Yt*Bn,oi=Yn*di-Kn*Xr+sr*yi+pr*Yr-_r*jr+Fr*Dr;return oi?(L[0]=(lt*di-gt*Xr+It*yi)*(oi=1/oi),L[1]=(Fe*Xr-ye*di-Ve*yi)*oi,L[2]=(wn*Fr-Bn*_r+jn*pr)*oi,L[3]=(en*_r-Gt*Fr-Yt*pr)*oi,L[4]=(gt*Yr-$e*di-It*jr)*oi,L[5]=(ee*di-Fe*Yr+Ve*jr)*oi,L[6]=(Bn*sr-mn*Fr-jn*Kn)*oi,L[7]=(Ot*Fr-en*sr+Yt*Kn)*oi,L[8]=($e*Xr-lt*Yr+It*Dr)*oi,L[9]=(ye*Yr-ee*Xr-Ve*Dr)*oi,L[10]=(mn*_r-wn*sr+jn*Yn)*oi,L[11]=(Gt*sr-Ot*_r-Yt*Yn)*oi,L[12]=(lt*jr-$e*yi-gt*Dr)*oi,L[13]=(ee*yi-ye*jr+Fe*Dr)*oi,L[14]=(wn*Kn-mn*pr-Bn*Yn)*oi,L[15]=(Ot*pr-Gt*Kn+en*Yn)*oi,L):null},f.isChar=Ur,f.isMapboxURL=xe,f.keysDifference=function(L,N){var ee=[];for(var ye in L)ye in N||ee.push(ye);return ee},f.makeRequest=Lt,f.mapObject=x,f.mercatorXfromLng=$h,f.mercatorYfromLat=Fd,f.mercatorZfromAltitude=Pg,f.mul=Ay,f.multiply=og,f.mvt=tu,f.normalize=function(L,N){var ee=N[0],ye=N[1],Fe=N[2],Ve=ee*ee+ye*ye+Fe*Fe;return Ve>0&&(Ve=1/Math.sqrt(Ve)),L[0]=N[0]*Ve,L[1]=N[1]*Ve,L[2]=N[2]*Ve,L},f.number=ar,f.offscreenCanvasSupported=ut,f.ortho=function(L,N,ee,ye,Fe,Ve,$e){var lt=1/(N-ee),gt=1/(ye-Fe),It=1/(Ve-$e);return L[0]=-2*lt,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*gt,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*It,L[11]=0,L[12]=(N+ee)*lt,L[13]=(Fe+ye)*gt,L[14]=($e+Ve)*It,L[15]=1,L},f.parseGlyphPBF=function(L){return new Nh(L).readFields(k0,[])},f.pbf=Nh,f.performSymbolLayout=function(L,N,ee,ye,Fe,Ve,$e){L.createArrays(),L.tilePixelRatio=eo/(512*L.overscaling),L.compareText={},L.iconsNeedLinear=!1;var gt=L.layers[0].layout,It=L.layers[0]._unevaluatedLayout._values,Ot={};if("composite"===L.textSizeData.kind){var Gt=L.textSizeData,Yt=Gt.maxZoom;Ot.compositeTextSizes=[It["text-size"].possiblyEvaluate(new oo(Gt.minZoom),$e),It["text-size"].possiblyEvaluate(new oo(Yt),$e)]}if("composite"===L.iconSizeData.kind){var mn=L.iconSizeData,Bn=mn.maxZoom;Ot.compositeIconSizes=[It["icon-size"].possiblyEvaluate(new oo(mn.minZoom),$e),It["icon-size"].possiblyEvaluate(new oo(Bn),$e)]}Ot.layoutTextSize=It["text-size"].possiblyEvaluate(new oo(L.zoom+1),$e),Ot.layoutIconSize=It["icon-size"].possiblyEvaluate(new oo(L.zoom+1),$e),Ot.textMaxSize=It["text-size"].possiblyEvaluate(new oo(18));for(var jn=gt.get("text-line-height")*to,Yn="map"===gt.get("text-rotation-alignment")&&"point"!==gt.get("symbol-placement"),Kn=gt.get("text-keep-upright"),sr=gt.get("text-size"),pr=function(){var Dr=Fr[_r],jr=gt.get("text-font").evaluate(Dr,{},$e).join(","),Yr=sr.evaluate(Dr,{},$e),yi=Ot.layoutTextSize.evaluate(Dr,{},$e),Xr=Ot.layoutIconSize.evaluate(Dr,{},$e),di={horizontal:{},vertical:void 0},oi=Dr.text,Wr=[0,0];if(oi){var Ri=oi.toString(),_i=gt.get("text-letter-spacing").evaluate(Dr,{},$e)*to,wo=function(Si){for(var Ki=0,ra=Si;Ki<ra.length;Ki+=1)if(To=ra[Ki].charCodeAt(0),Ur.Arabic(To)||Ur["Arabic Supplement"](To)||Ur["Arabic Extended-A"](To)||Ur["Arabic Presentation Forms-A"](To)||Ur["Arabic Presentation Forms-B"](To))return!1;var To;return!0}(Ri)?_i:0,ci=gt.get("text-anchor").evaluate(Dr,{},$e),co=gt.get("text-variable-anchor");if(!co){var Mo=gt.get("text-radial-offset").evaluate(Dr,{},$e);Wr=Mo?Ag(ci,[Mo*to,qs]):gt.get("text-offset").evaluate(Dr,{},$e).map(function(Si){return Si*to})}var Lo=Yn?"center":gt.get("text-justify").evaluate(Dr,{},$e),Oo=gt.get("symbol-placement"),Ao="point"===Oo?gt.get("text-max-width").evaluate(Dr,{},$e)*to:0,Ta=function(){L.allowVerticalPlacement&&ts(Ri)&&(di.vertical=ic(oi,N,ee,Fe,jr,Ao,jn,ci,"left",wo,Wr,Ds.vertical,!0,Oo,yi,Yr))};if(!Yn&&co){for(var Ho="auto"===Lo?co.map(function(Si){return O0(Si)}):[Lo],qo=!1,Ma=0;Ma<Ho.length;Ma++){var Ya=Ho[Ma];if(!di.horizontal[Ya])if(qo)di.horizontal[Ya]=di.horizontal[0];else{var Ws=ic(oi,N,ee,Fe,jr,Ao,jn,"center",Ya,wo,Wr,Ds.horizontal,!1,Oo,yi,Yr);Ws&&(di.horizontal[Ya]=Ws,qo=1===Ws.positionedLines.length)}}Ta()}else{"auto"===Lo&&(Lo=O0(ci));var rs=ic(oi,N,ee,Fe,jr,Ao,jn,ci,Lo,wo,Wr,Ds.horizontal,!1,Oo,yi,Yr);rs&&(di.horizontal[Lo]=rs),Ta(),ts(Ri)&&Yn&&Kn&&(di.vertical=ic(oi,N,ee,Fe,jr,Ao,jn,ci,Lo,wo,Wr,Ds.vertical,!1,Oo,yi,Yr))}}var Si,Ki,To,gs,Is,Na=void 0,is=!1;if(Dr.icon&&Dr.icon.name){var $a=ye[Dr.icon.name];$a&&(Si=Fe[Dr.icon.name],Ki=gt.get("icon-offset").evaluate(Dr,{},$e),To=C0(gt.get("icon-anchor").evaluate(Dr,{},$e)),Na={image:Si,top:Is=Ki[1]-Si.displaySize[1]*To.verticalAlign,bottom:Is+Si.displaySize[1],left:gs=Ki[0]-Si.displaySize[0]*To.horizontalAlign,right:gs+Si.displaySize[0]},is=$a.sdf,void 0===L.sdfIcons?L.sdfIcons=$a.sdf:L.sdfIcons!==$a.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),($a.pixelRatio!==L.pixelRatio||0!==gt.get("icon-rotate").constantOr(1))&&(L.iconsNeedLinear=!0))}var Aa=kg(di.horizontal)||di.vertical;L.iconsInText=!!Aa&&Aa.iconsInText,(Aa||Na)&&function(Si,Ki,ra,To,No,io,Ui,Yo,gs,Zs,Is){var Ru=io.textMaxSize.evaluate(Ki,{});void 0===Ru&&(Ru=Ui);var Lc,ka=Si.layers[0].layout,Pl=ka.get("icon-offset").evaluate(Ki,{},Is),bu=kg(ra.horizontal),Oc=Ui/24,Xh=Si.tilePixelRatio*Oc,sf=Si.tilePixelRatio*Ru/24,Kh=Si.tilePixelRatio*Yo,zd=Si.tilePixelRatio*ka.get("symbol-spacing"),Jh=ka.get("text-padding")*Si.tilePixelRatio,lf=ka.get("icon-padding")*Si.tilePixelRatio,$f=ka.get("text-max-angle")/180*Math.PI,Xf="map"===ka.get("text-rotation-alignment")&&"point"!==ka.get("symbol-placement"),Qh="map"===ka.get("icon-rotation-alignment")&&"point"!==ka.get("symbol-placement"),fa=ka.get("symbol-placement"),V0=zd/2,Bd=ka.get("icon-text-fit");To&&"none"!==Bd&&(Si.allowVerticalPlacement&&ra.vertical&&(Lc=D0(To,ra.vertical,Bd,ka.get("icon-text-fit-padding"),Pl,Oc)),bu&&(To=D0(To,bu,Bd,ka.get("icon-text-fit-padding"),Pl,Oc)));var Pc=function(G0,ed){ed.x<0||ed.x>=eo||ed.y<0||ed.y>=eo||function(ia,Ls,a1,Fu,td,Bg,nd,Rl,ru,cf,rd,up,W0,Z0,Nu,jg,Ug,Vg,cp,Vd,_l,Hd,zu,lc,qd){var fp,ff,Gd,Wd,uc,id=ia.addToLineVertexArray(Ls,a1),dp=0,hp=0,od=0,pp=0,Zd=-1,df=-1,iu={},ad=wr(""),mp=0,Yd=0;if(void 0===Rl._unevaluatedLayout.getValue("text-radial-offset")?(mp=(fp=Rl.layout.get("text-offset").evaluate(_l,{},lc).map(function(bp){return bp*to}))[0],Yd=fp[1]):(mp=Rl.layout.get("text-radial-offset").evaluate(_l,{},lc)*to,Yd=qs),ia.allowVerticalPlacement&&Fu.vertical){var $d=Rl.layout.get("text-rotate").evaluate(_l,{},lc)+90;Wd=new Od(ru,Ls,cf,rd,up,Fu.vertical,W0,Z0,Nu,$d),nd&&(uc=new Od(ru,Ls,cf,rd,up,nd,Ug,Vg,Nu,$d))}if(td){var Xd=Rl.layout.get("icon-rotate").evaluate(_l,{}),gp="none"!==Rl.layout.get("icon-text-fit"),Y0=Jy(td,Xd,zu,gp),$0=nd?Jy(nd,Xd,zu,gp):void 0;Gd=new Od(ru,Ls,cf,rd,up,td,Ug,Vg,!1,Xd),dp=4*Y0.length;var Hg=ia.iconSizeData,sd=null;"source"===Hg.kind?(sd=[nu*Rl.layout.get("icon-size").evaluate(_l,{})])[0]>sc&&D(ia.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Hg.kind&&((sd=[nu*Hd.compositeIconSizes[0].evaluate(_l,{},lc),nu*Hd.compositeIconSizes[1].evaluate(_l,{},lc)])[0]>sc||sd[1]>sc)&&D(ia.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ia.addSymbols(ia.icon,Y0,sd,Vd,cp,_l,!1,Ls,id.lineStartIndex,id.lineLength,-1,lc),Zd=ia.icon.placedSymbolArray.length-1,$0&&(hp=4*$0.length,ia.addSymbols(ia.icon,$0,sd,Vd,cp,_l,Ds.vertical,Ls,id.lineStartIndex,id.lineLength,-1,lc),df=ia.icon.placedSymbolArray.length-1)}for(var X0 in Fu.horizontal){var vp=Fu.horizontal[X0];if(!ff){ad=wr(vp.text);var s1=Rl.layout.get("text-rotate").evaluate(_l,{},lc);ff=new Od(ru,Ls,cf,rd,up,vp,W0,Z0,Nu,s1)}var l1=1===vp.positionedLines.length;if(od+=qh(ia,Ls,vp,Bg,Rl,Nu,_l,jg,id,Fu.vertical?Ds.horizontal:Ds.horizontalOnly,l1?Object.keys(Fu.horizontal):[X0],iu,Zd,Hd,lc),l1)break}Fu.vertical&&(pp+=qh(ia,Ls,Fu.vertical,Bg,Rl,Nu,_l,jg,id,Ds.vertical,["vertical"],iu,df,Hd,lc));var u1=ff?ff.boxStartIndex:ia.collisionBoxArray.length,K0=ff?ff.boxEndIndex:ia.collisionBoxArray.length,J0=Wd?Wd.boxStartIndex:ia.collisionBoxArray.length,c1=Wd?Wd.boxEndIndex:ia.collisionBoxArray.length,qg=Gd?Gd.boxStartIndex:ia.collisionBoxArray.length,Q0=Gd?Gd.boxEndIndex:ia.collisionBoxArray.length,yp=uc?uc.boxStartIndex:ia.collisionBoxArray.length,f1=uc?uc.boxEndIndex:ia.collisionBoxArray.length,Mu=-1,xp=function(bp,Gg){return bp&&bp.circleDiameter?Math.max(bp.circleDiameter,Gg):Gg};Mu=xp(ff,Mu),Mu=xp(Wd,Mu),Mu=xp(Gd,Mu);var em=(Mu=xp(uc,Mu))>-1?1:0;em&&(Mu*=qd/to),ia.glyphOffsetArray.length>=ao.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_l.sortKey&&ia.addToSortKeyRanges(ia.symbolInstances.length,_l.sortKey),ia.symbolInstances.emplaceBack(Ls.x,Ls.y,iu.right>=0?iu.right:-1,iu.center>=0?iu.center:-1,iu.left>=0?iu.left:-1,iu.vertical||-1,Zd,df,ad,u1,K0,J0,c1,qg,Q0,yp,f1,cf,od,pp,dp,hp,em,0,W0,mp,Yd,Mu)}(Si,ed,G0,ra,To,No,Lc,Si.layers[0],Si.collisionBoxArray,Ki.index,Ki.sourceLayerIndex,Si.index,Xh,Jh,Xf,gs,Kh,lf,Qh,Pl,Ki,io,Zs,Is,Ui)};if("line"===fa)for(var uf=0,ep=Ky(Ki.geometry,0,0,eo,eo);uf<ep.length;uf+=1)for(var tp=ep[uf],Kf=0,np=b_(tp,zd,$f,ra.vertical||bu,To,24,sf,Si.overscaling,eo);Kf<np.length;Kf+=1){var jd=np[Kf];bu&&Qy(Si,bu.text,V0,jd)||Pc(tp,jd)}else if("line-center"===fa)for(var rp=0,ip=Ki.geometry;rp<ip.length;rp+=1){var wu=ip[rp];if(wu.length>1){var Jr=L0(wu,$f,ra.vertical||bu,To,24,sf);Jr&&Pc(wu,Jr)}}else if("Polygon"===Ki.type)for(var Tu=0,Jf=Dh(Ki.geometry,0);Tu<Jf.length;Tu+=1){var Qf=Jf[Tu],H0=Tg(Qf,16);Pc(Qf[0],new Uf(H0.x,H0.y,0))}else if("LineString"===Ki.type)for(var Ud=0,Ng=Ki.geometry;Ud<Ng.length;Ud+=1){var op=Ng[Ud];Pc(op,new Uf(op[0].x,op[0].y,0))}else if("Point"===Ki.type)for(var ap=0,sp=Ki.geometry;ap<sp.length;ap+=1)for(var zg=0,lp=sp[ap];zg<lp.length;zg+=1){var q0=lp[zg];Pc([q0],new Uf(q0.x,q0.y,0))}}(L,Dr,di,Na,ye,Ot,yi,Xr,Wr,is,$e)},_r=0,Fr=L.features;_r<Fr.length;_r+=1)pr();Ve&&L.generateCollisionDebugBuffers()},f.perspective=function(L,N,ee,ye,Fe){var Ve,$e=1/Math.tan(N/2);return L[0]=$e/ee,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=$e,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,null!=Fe&&Fe!==1/0?(L[10]=(Fe+ye)*(Ve=1/(ye-Fe)),L[14]=2*Fe*ye*Ve):(L[10]=-1,L[14]=-2*ye),L},f.pick=function(L,N){for(var ee={},ye=0;ye<N.length;ye++){var Fe=N[ye];Fe in L&&(ee[Fe]=L[Fe])}return ee},f.plugin=Fo,f.polygonIntersectsPolygon=Es,f.postMapLoadEvent=Ke,f.postTurnstileEvent=De,f.potpack=xg,f.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],f.register=Hr,f.registerForPluginStateChange=function(L){return L({pluginStatus:Uo,pluginURL:Ii}),ea.on("pluginStateChange",L),L},f.rotate=function(L,N,ee){var ye=N[0],Fe=N[1],Ve=N[2],$e=N[3],lt=Math.sin(ee),gt=Math.cos(ee);return L[0]=ye*gt+Ve*lt,L[1]=Fe*gt+$e*lt,L[2]=ye*-lt+Ve*gt,L[3]=Fe*-lt+$e*gt,L},f.rotateX=function(L,N,ee){var ye=Math.sin(ee),Fe=Math.cos(ee),Ve=N[4],$e=N[5],lt=N[6],gt=N[7],It=N[8],Ot=N[9],Gt=N[10],en=N[11];return N!==L&&(L[0]=N[0],L[1]=N[1],L[2]=N[2],L[3]=N[3],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L[4]=Ve*Fe+It*ye,L[5]=$e*Fe+Ot*ye,L[6]=lt*Fe+Gt*ye,L[7]=gt*Fe+en*ye,L[8]=It*Fe-Ve*ye,L[9]=Ot*Fe-$e*ye,L[10]=Gt*Fe-lt*ye,L[11]=en*Fe-gt*ye,L},f.rotateZ=function(L,N,ee){var ye=Math.sin(ee),Fe=Math.cos(ee),Ve=N[0],$e=N[1],lt=N[2],gt=N[3],It=N[4],Ot=N[5],Gt=N[6],en=N[7];return N!==L&&(L[8]=N[8],L[9]=N[9],L[10]=N[10],L[11]=N[11],L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15]),L[0]=Ve*Fe+It*ye,L[1]=$e*Fe+Ot*ye,L[2]=lt*Fe+Gt*ye,L[3]=gt*Fe+en*ye,L[4]=It*Fe-Ve*ye,L[5]=Ot*Fe-$e*ye,L[6]=Gt*Fe-lt*ye,L[7]=en*Fe-gt*ye,L},f.scale=function(L,N,ee){var ye=ee[0],Fe=ee[1],Ve=ee[2];return L[0]=N[0]*ye,L[1]=N[1]*ye,L[2]=N[2]*ye,L[3]=N[3]*ye,L[4]=N[4]*Fe,L[5]=N[5]*Fe,L[6]=N[6]*Fe,L[7]=N[7]*Fe,L[8]=N[8]*Ve,L[9]=N[9]*Ve,L[10]=N[10]*Ve,L[11]=N[11]*Ve,L[12]=N[12],L[13]=N[13],L[14]=N[14],L[15]=N[15],L},f.scale$1=function(L,N,ee){return L[0]=N[0]*ee,L[1]=N[1]*ee,L[2]=N[2]*ee,L[3]=N[3]*ee,L},f.scale$2=function(L,N,ee){return L[0]=N[0]*ee,L[1]=N[1]*ee,L[2]=N[2]*ee,L},f.setCacheLimits=function(L,N){Oe=L,Le=N},f.setRTLTextPlugin=function(L,N,ee){if(void 0===ee&&(ee=!1),Uo===el||Uo===Wo||Uo===Zi)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ii=ae.resolveURL(L),Uo=el,cs=N,Ha(),ee||Ju()},f.sphericalToCartesian=function(L){var N=L[0],ee=L[1],ye=L[2];return ee+=90,ee*=Math.PI/180,ye*=Math.PI/180,{x:N*Math.cos(ee)*Math.sin(ye),y:N*Math.sin(ee)*Math.sin(ye),z:N*Math.cos(ye)}},f.sqrLen=function(L){var N=L[0],ee=L[1];return N*N+ee*ee},f.styleSpec=He,f.sub=function(L,N,ee){return L[0]=N[0]-ee[0],L[1]=N[1]-ee[1],L[2]=N[2]-ee[2],L},f.symbolSize=Zy,f.transformMat3=function(L,N,ee){var ye=N[0],Fe=N[1],Ve=N[2];return L[0]=ye*ee[0]+Fe*ee[3]+Ve*ee[6],L[1]=ye*ee[1]+Fe*ee[4]+Ve*ee[7],L[2]=ye*ee[2]+Fe*ee[5]+Ve*ee[8],L},f.transformMat4=wd,f.translate=function(L,N,ee){var ye,Fe,Ve,$e,lt,gt,It,Ot,Gt,en,Yt,mn,wn=ee[0],Bn=ee[1],jn=ee[2];return N===L?(L[12]=N[0]*wn+N[4]*Bn+N[8]*jn+N[12],L[13]=N[1]*wn+N[5]*Bn+N[9]*jn+N[13],L[14]=N[2]*wn+N[6]*Bn+N[10]*jn+N[14],L[15]=N[3]*wn+N[7]*Bn+N[11]*jn+N[15]):(Fe=N[1],Ve=N[2],$e=N[3],lt=N[4],gt=N[5],It=N[6],Ot=N[7],Gt=N[8],en=N[9],Yt=N[10],mn=N[11],L[0]=ye=N[0],L[1]=Fe,L[2]=Ve,L[3]=$e,L[4]=lt,L[5]=gt,L[6]=It,L[7]=Ot,L[8]=Gt,L[9]=en,L[10]=Yt,L[11]=mn,L[12]=ye*wn+lt*Bn+Gt*jn+N[12],L[13]=Fe*wn+gt*Bn+en*jn+N[13],L[14]=Ve*wn+It*Bn+Yt*jn+N[14],L[15]=$e*wn+Ot*Bn+mn*jn+N[15]),L},f.triggerPluginCompletionEvent=El,f.uniqueId=h,f.validateCustomStyleLayer=function(L){var N=[],ee=L.id;return void 0===ee&&N.push({message:"layers."+ee+': missing required property "id"'}),void 0===L.render&&N.push({message:"layers."+ee+': missing required method "render"'}),L.renderingMode&&"2d"!==L.renderingMode&&"3d"!==L.renderingMode&&N.push({message:"layers."+ee+': property "renderingMode" must be either "2d" or "3d"'}),N},f.validateLight=So,f.validateStyle=Fi,f.values=function(L){var N=[];for(var ee in L)N.push(L[ee]);return N},f.vectorTile=tu,f.version=T,f.warnOnce=D,f.webpSupported=Q,f.window=self,f.wrap=u}),C(0,function(f){function k(it){var st=typeof it;if("number"===st||"boolean"===st||"string"===st||null==it)return JSON.stringify(it);if(Array.isArray(it)){for(var Je="[",ot=0,pt=it;ot<pt.length;ot+=1)Je+=k(pt[ot])+",";return Je+"]"}for(var xt=Object.keys(it).sort(),He="{",Ge=0;Ge<xt.length;Ge++)He+=JSON.stringify(xt[Ge])+":"+k(it[xt[Ge]])+",";return He+"}"}function T(it){for(var st="",Je=0,ot=f.refProperties;Je<ot.length;Je+=1)st+="/"+k(it[ot[Je]]);return st}var v=function(it){this.keyCache={},it&&this.replace(it)};v.prototype.replace=function(it){this._layerConfigs={},this._layers={},this.update(it,[])},v.prototype.update=function(it,st){for(var Je=this,ot=0,pt=it;ot<pt.length;ot+=1){var xt=pt[ot];this._layerConfigs[xt.id]=xt;var He=this._layers[xt.id]=f.createStyleLayer(xt);He._featureFilter=f.featureFilter(He.filter),this.keyCache[xt.id]&&delete this.keyCache[xt.id]}for(var Ge=0,dt=st;Ge<dt.length;Ge+=1){var ht=dt[Ge];delete this.keyCache[ht],delete this._layerConfigs[ht],delete this._layers[ht]}this.familiesBySource={};for(var kt=0,St=function(Zt,$t){for(var Xt={},dn=0;dn<Zt.length;dn++){var on=$t&&$t[Zt[dn].id]||T(Zt[dn]);$t&&($t[Zt[dn].id]=on);var cn=Xt[on];cn||(cn=Xt[on]=[]),cn.push(Zt[dn])}var tn=[];for(var Cn in Xt)tn.push(Xt[Cn]);return tn}(f.values(this._layerConfigs),this.keyCache);kt<St.length;kt+=1){var Et=St[kt].map(function(Zt){return Je._layers[Zt.id]}),wt=Et[0];if("none"!==wt.visibility){var Nt=wt.source||"",_t=this.familiesBySource[Nt];_t||(_t=this.familiesBySource[Nt]={});var Mt=wt.sourceLayer||"_geojsonTileLayer",Pt=_t[Mt];Pt||(Pt=_t[Mt]=[]),Pt.push(Et)}}};var c=function(it){var st={},Je=[];for(var ot in it){var pt=it[ot],xt=st[ot]={};for(var He in pt){var Ge=pt[+He];if(Ge&&0!==Ge.bitmap.width&&0!==Ge.bitmap.height){var dt={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};Je.push(dt),xt[He]={rect:dt,metrics:Ge.metrics}}}}var ht=f.potpack(Je),Et=new f.AlphaImage({width:ht.w||1,height:ht.h||1});for(var wt in it){var Nt=it[wt];for(var _t in Nt){var Mt=Nt[+_t];if(Mt&&0!==Mt.bitmap.width&&0!==Mt.bitmap.height){var Pt=st[wt][_t].rect;f.AlphaImage.copy(Mt.bitmap,Et,{x:0,y:0},{x:Pt.x+1,y:Pt.y+1},Mt.bitmap)}}}this.image=Et,this.positions=st};f.register("GlyphAtlas",c);var i=function(it){this.tileID=new f.OverscaledTileID(it.tileID.overscaledZ,it.tileID.wrap,it.tileID.canonical.z,it.tileID.canonical.x,it.tileID.canonical.y),this.uid=it.uid,this.zoom=it.zoom,this.pixelRatio=it.pixelRatio,this.tileSize=it.tileSize,this.source=it.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=it.showCollisionBoxes,this.collectResourceTiming=!!it.collectResourceTiming,this.returnDependencies=!!it.returnDependencies,this.promoteId=it.promoteId};function s(it,st,Je){for(var ot=new f.EvaluationParameters(st),pt=0,xt=it;pt<xt.length;pt+=1)xt[pt].recalculate(ot,Je)}function a(it,st){var Je=f.getArrayBuffer(it.request,function(ot,pt,xt,He){ot?st(ot):pt&&st(null,{vectorTile:new f.vectorTile.VectorTile(new f.pbf(pt)),rawData:pt,cacheControl:xt,expires:He})});return function(){Je.cancel(),st()}}i.prototype.parse=function(it,st,Je,ot,pt){var xt=this;this.status="parsing",this.data=it,this.collisionBoxArray=new f.CollisionBoxArray;var He=new f.DictionaryCoder(Object.keys(it.layers).sort()),Ge=new f.FeatureIndex(this.tileID,this.promoteId);Ge.bucketLayerIDs=[];var dt,ht,kt,St,Et={},wt={featureIndex:Ge,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Je},Nt=st.familiesBySource[this.source];for(var _t in Nt){var Mt=it.layers[_t];if(Mt){1===Mt.version&&f.warnOnce('Vector tile source "'+this.source+'" layer "'+_t+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Pt=He.encode(_t),Zt=[],$t=0;$t<Mt.length;$t++){var Xt=Mt.feature($t),dn=Ge.getId(Xt,_t);Zt.push({feature:Xt,id:dn,index:$t,sourceLayerIndex:Pt})}for(var on=0,cn=Nt[_t];on<cn.length;on+=1){var tn=cn[on],Cn=tn[0];Cn.minzoom&&this.zoom<Math.floor(Cn.minzoom)||Cn.maxzoom&&this.zoom>=Cn.maxzoom||"none"!==Cn.visibility&&(s(tn,this.zoom,Je),(Et[Cn.id]=Cn.createBucket({index:Ge.bucketLayerIDs.length,layers:tn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pt,sourceID:this.source})).populate(Zt,wt,this.tileID.canonical),Ge.bucketLayerIDs.push(tn.map(function(pn){return pn.id})))}}}var Fn=f.mapObject(wt.glyphDependencies,function(pn){return Object.keys(pn).map(Number)});Object.keys(Fn).length?ot.send("getGlyphs",{uid:this.uid,stacks:Fn},function(pn,bn){dt||(dt=pn,ht=bn,yn.call(xt))}):ht={};var En=Object.keys(wt.iconDependencies);En.length?ot.send("getImages",{icons:En,source:this.source,tileID:this.tileID,type:"icons"},function(pn,bn){dt||(dt=pn,kt=bn,yn.call(xt))}):kt={};var rn=Object.keys(wt.patternDependencies);function yn(){if(dt)return pt(dt);if(ht&&kt&&St){var pn=new c(ht),bn=new f.ImageAtlas(kt,St);for(var In in Et){var _n=Et[In];_n instanceof f.SymbolBucket?(s(_n.layers,this.zoom,Je),f.performSymbolLayout(_n,ht,pn.positions,kt,bn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):_n.hasPattern&&(_n instanceof f.LineBucket||_n instanceof f.FillBucket||_n instanceof f.FillExtrusionBucket)&&(s(_n.layers,this.zoom,Je),_n.addFeatures(wt,this.tileID.canonical,bn.patternPositions))}this.status="done",pt(null,{buckets:f.values(Et).filter(function(qn){return!qn.isEmpty()}),featureIndex:Ge,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pn.image,imageAtlas:bn,glyphMap:this.returnDependencies?ht:null,iconMap:this.returnDependencies?kt:null,glyphPositions:this.returnDependencies?pn.positions:null})}}rn.length?ot.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"},function(pn,bn){dt||(dt=pn,St=bn,yn.call(xt))}):St={},yn.call(this)};var o=function(it,st,Je,ot){this.actor=it,this.layerIndex=st,this.availableImages=Je,this.loadVectorData=ot||a,this.loading={},this.loaded={}};o.prototype.loadTile=function(it,st){var Je=this,ot=it.uid;this.loading||(this.loading={});var pt=!!(it&&it.request&&it.request.collectResourceTiming)&&new f.RequestPerformance(it.request),xt=this.loading[ot]=new i(it);xt.abort=this.loadVectorData(it,function(He,Ge){if(delete Je.loading[ot],He||!Ge)return xt.status="done",Je.loaded[ot]=xt,st(He);var dt=Ge.rawData,ht={};Ge.expires&&(ht.expires=Ge.expires),Ge.cacheControl&&(ht.cacheControl=Ge.cacheControl);var kt={};if(pt){var St=pt.finish();St&&(kt.resourceTiming=JSON.parse(JSON.stringify(St)))}xt.vectorTile=Ge.vectorTile,xt.parse(Ge.vectorTile,Je.layerIndex,Je.availableImages,Je.actor,function(Et,wt){if(Et||!wt)return st(Et);st(null,f.extend({rawTileData:dt.slice(0)},wt,ht,kt))}),Je.loaded=Je.loaded||{},Je.loaded[ot]=xt})},o.prototype.reloadTile=function(it,st){var Je=this,ot=this.loaded,pt=it.uid,xt=this;if(ot&&ot[pt]){var He=ot[pt];He.showCollisionBoxes=it.showCollisionBoxes;var Ge=function(dt,ht){var kt=He.reloadCallback;kt&&(delete He.reloadCallback,He.parse(He.vectorTile,xt.layerIndex,Je.availableImages,xt.actor,kt)),st(dt,ht)};"parsing"===He.status?He.reloadCallback=Ge:"done"===He.status&&(He.vectorTile?He.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor,Ge):Ge())}},o.prototype.abortTile=function(it,st){var Je=this.loading,ot=it.uid;Je&&Je[ot]&&Je[ot].abort&&(Je[ot].abort(),delete Je[ot]),st()},o.prototype.removeTile=function(it,st){var Je=this.loaded,ot=it.uid;Je&&Je[ot]&&delete Je[ot],st()};var l=f.window.ImageBitmap,u=function(){this.loaded={}};u.prototype.loadTile=function(it,st){var Je=it.uid,ot=it.encoding,pt=it.rawImageData,xt=l&&pt instanceof l?this.getImageData(pt):pt,He=new f.DEMData(Je,xt,ot);this.loaded=this.loaded||{},this.loaded[Je]=He,st(null,He)},u.prototype.getImageData=function(it){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(it.width,it.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=it.width,this.offscreenCanvas.height=it.height,this.offscreenCanvasContext.drawImage(it,0,0,it.width,it.height);var st=this.offscreenCanvasContext.getImageData(-1,-1,it.width+2,it.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new f.RGBAImage({width:st.width,height:st.height},st.data)},u.prototype.removeTile=function(it){var st=this.loaded,Je=it.uid;st&&st[Je]&&delete st[Je]};var d=function it(st,Je){var ot,pt=st&&st.type;if("FeatureCollection"===pt)for(ot=0;ot<st.features.length;ot++)it(st.features[ot],Je);else if("GeometryCollection"===pt)for(ot=0;ot<st.geometries.length;ot++)it(st.geometries[ot],Je);else if("Feature"===pt)it(st.geometry,Je);else if("Polygon"===pt)g(st.coordinates,Je);else if("MultiPolygon"===pt)for(ot=0;ot<st.coordinates.length;ot++)g(st.coordinates[ot],Je);return st};function g(it,st){if(0!==it.length){h(it[0],st);for(var Je=1;Je<it.length;Je++)h(it[Je],!st)}}function h(it,st){for(var Je=0,ot=0,pt=it.length,xt=pt-1;ot<pt;xt=ot++)Je+=(it[ot][0]-it[xt][0])*(it[xt][1]+it[ot][1]);Je>=0!=!!st&&it.reverse()}var w=f.vectorTile.VectorTileFeature.prototype.toGeoJSON,y=function(it){this._feature=it,this.extent=f.EXTENT,this.type=it.type,this.properties=it.tags,"id"in it&&!isNaN(it.id)&&(this.id=parseInt(it.id,10))};y.prototype.loadGeometry=function(){if(1===this._feature.type){for(var it=[],st=0,Je=this._feature.geometry;st<Je.length;st+=1){var ot=Je[st];it.push([new f.Point$1(ot[0],ot[1])])}return it}for(var pt=[],xt=0,He=this._feature.geometry;xt<He.length;xt+=1){for(var Ge=[],dt=0,ht=He[xt];dt<ht.length;dt+=1){var kt=ht[dt];Ge.push(new f.Point$1(kt[0],kt[1]))}pt.push(Ge)}return pt},y.prototype.toGeoJSON=function(it,st,Je){return w.call(this,it,st,Je)};var p=function(it){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.EXTENT,this.length=it.length,this._features=it};p.prototype.feature=function(it){return new y(this._features[it])};var _=f.vectorTile.VectorTileFeature,x=b;function b(it,st){this.options=st||{},this.features=it,this.length=it.length}function M(it,st){this.id="number"==typeof it.id?it.id:void 0,this.type=it.type,this.rawGeometry=1===it.type?[it.geometry]:it.geometry,this.properties=it.tags,this.extent=st||4096}b.prototype.feature=function(it){return new M(this.features[it],this.options.extent)},M.prototype.loadGeometry=function(){var it=this.rawGeometry;this.geometry=[];for(var st=0;st<it.length;st++){for(var Je=it[st],ot=[],pt=0;pt<Je.length;pt++)ot.push(new f.Point$1(Je[pt][0],Je[pt][1]));this.geometry.push(ot)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var it=this.geometry,st=1/0,Je=-1/0,ot=1/0,pt=-1/0,xt=0;xt<it.length;xt++)for(var He=it[xt],Ge=0;Ge<He.length;Ge++){var dt=He[Ge];st=Math.min(st,dt.x),Je=Math.max(Je,dt.x),ot=Math.min(ot,dt.y),pt=Math.max(pt,dt.y)}return[st,ot,Je,pt]},M.prototype.toGeoJSON=_.prototype.toGeoJSON;var m=P,O=x;function P(it){var st=new f.pbf;return function(Je,ot){for(var pt in Je.layers)ot.writeMessage(3,R,Je.layers[pt])}(it,st),st.finish()}function R(it,st){var Je;st.writeVarintField(15,it.version||1),st.writeStringField(1,it.name||""),st.writeVarintField(5,it.extent||4096);var ot={keys:[],values:[],keycache:{},valuecache:{}};for(Je=0;Je<it.length;Je++)ot.feature=it.feature(Je),st.writeMessage(2,F,ot);var pt=ot.keys;for(Je=0;Je<pt.length;Je++)st.writeStringField(3,pt[Je]);var xt=ot.values;for(Je=0;Je<xt.length;Je++)st.writeMessage(4,G,xt[Je])}function F(it,st){var Je=it.feature;void 0!==Je.id&&st.writeVarintField(1,Je.id),st.writeMessage(2,B,it),st.writeVarintField(3,Je.type),st.writeMessage(4,$,Je)}function B(it,st){var Je=it.feature,ot=it.keys,pt=it.values,xt=it.keycache,He=it.valuecache;for(var Ge in Je.properties){var dt=xt[Ge];void 0===dt&&(ot.push(Ge),xt[Ge]=dt=ot.length-1),st.writeVarint(dt);var ht=Je.properties[Ge],kt=typeof ht;"string"!==kt&&"boolean"!==kt&&"number"!==kt&&(ht=JSON.stringify(ht));var St=kt+":"+ht,Et=He[St];void 0===Et&&(pt.push(ht),He[St]=Et=pt.length-1),st.writeVarint(Et)}}function J(it,st){return(st<<3)+(7&it)}function z(it){return it<<1^it>>31}function $(it,st){for(var Je=it.loadGeometry(),ot=it.type,pt=0,xt=0,He=Je.length,Ge=0;Ge<He;Ge++){var dt=Je[Ge],ht=1;1===ot&&(ht=dt.length),st.writeVarint(J(1,ht));for(var kt=3===ot?dt.length-1:dt.length,St=0;St<kt;St++){1===St&&1!==ot&&st.writeVarint(J(2,kt-1));var Et=dt[St].x-pt,wt=dt[St].y-xt;st.writeVarint(z(Et)),st.writeVarint(z(wt)),pt+=Et,xt+=wt}3===ot&&st.writeVarint(J(7,1))}}function G(it,st){var Je=typeof it;"string"===Je?st.writeStringField(1,it):"boolean"===Je?st.writeBooleanField(7,it):"number"===Je&&(it%1!=0?st.writeDoubleField(3,it):it<0?st.writeSVarintField(6,it):st.writeVarintField(5,it))}function H(it,st,Je,ot,pt,xt){if(!(pt-ot<=Je)){var He=ot+pt>>1;X(it,st,He,ot,pt,xt%2),H(it,st,Je,ot,He-1,xt+1),H(it,st,Je,He+1,pt,xt+1)}}function X(it,st,Je,ot,pt,xt){for(;pt>ot;){if(pt-ot>600){var He=pt-ot+1,Ge=Je-ot+1,dt=Math.log(He),ht=.5*Math.exp(2*dt/3),kt=.5*Math.sqrt(dt*ht*(He-ht)/He)*(Ge-He/2<0?-1:1);X(it,st,Je,Math.max(ot,Math.floor(Je-Ge*ht/He+kt)),Math.min(pt,Math.floor(Je+(He-Ge)*ht/He+kt)),xt)}var St=st[2*Je+xt],Et=ot,wt=pt;for(K(it,st,ot,Je),st[2*pt+xt]>St&&K(it,st,ot,pt);Et<wt;){for(K(it,st,Et,wt),Et++,wt--;st[2*Et+xt]<St;)Et++;for(;st[2*wt+xt]>St;)wt--}st[2*ot+xt]===St?K(it,st,ot,wt):K(it,st,++wt,pt),wt<=Je&&(ot=wt+1),Je<=wt&&(pt=wt-1)}}function K(it,st,Je,ot){ue(it,Je,ot),ue(st,2*Je,2*ot),ue(st,2*Je+1,2*ot+1)}function ue(it,st,Je){var ot=it[st];it[st]=it[Je],it[Je]=ot}function ae(it,st,Je,ot){var pt=it-Je,xt=st-ot;return pt*pt+xt*xt}m.fromVectorTileJs=P,m.fromGeojsonVt=function(it,st){st=st||{};var Je={};for(var ot in it)Je[ot]=new x(it[ot].features,st),Je[ot].name=ot,Je[ot].version=st.version,Je[ot].extent=st.extent;return P({layers:Je})},m.GeoJSONWrapper=O;var ne=function(it){return it[0]},Q=function(it){return it[1]},ie=function(it,st,Je,ot,pt){void 0===st&&(st=ne),void 0===Je&&(Je=Q),void 0===ot&&(ot=64),void 0===pt&&(pt=Float64Array),this.nodeSize=ot,this.points=it;for(var xt=it.length<65536?Uint16Array:Uint32Array,He=this.ids=new xt(it.length),Ge=this.coords=new pt(2*it.length),dt=0;dt<it.length;dt++)He[dt]=dt,Ge[2*dt]=st(it[dt]),Ge[2*dt+1]=Je(it[dt]);H(He,Ge,ot,0,He.length-1,0)};ie.prototype.range=function(it,st,Je,ot){return function(pt,xt,He,Ge,dt,ht,kt){for(var St,Et,wt=[0,pt.length-1,0],Nt=[];wt.length;){var _t=wt.pop(),Mt=wt.pop(),Pt=wt.pop();if(Mt-Pt<=kt)for(var Zt=Pt;Zt<=Mt;Zt++)Et=xt[2*Zt+1],(St=xt[2*Zt])>=He&&St<=dt&&Et>=Ge&&Et<=ht&&Nt.push(pt[Zt]);else{var $t=Math.floor((Pt+Mt)/2);Et=xt[2*$t+1],(St=xt[2*$t])>=He&&St<=dt&&Et>=Ge&&Et<=ht&&Nt.push(pt[$t]);var Xt=(_t+1)%2;(0===_t?He<=St:Ge<=Et)&&(wt.push(Pt),wt.push($t-1),wt.push(Xt)),(0===_t?dt>=St:ht>=Et)&&(wt.push($t+1),wt.push(Mt),wt.push(Xt))}}return Nt}(this.ids,this.coords,it,st,Je,ot,this.nodeSize)},ie.prototype.within=function(it,st,Je){return function(ot,pt,xt,He,Ge,dt){for(var ht=[0,ot.length-1,0],kt=[],St=Ge*Ge;ht.length;){var Et=ht.pop(),wt=ht.pop(),Nt=ht.pop();if(wt-Nt<=dt)for(var _t=Nt;_t<=wt;_t++)ae(pt[2*_t],pt[2*_t+1],xt,He)<=St&&kt.push(ot[_t]);else{var Mt=Math.floor((Nt+wt)/2),Pt=pt[2*Mt],Zt=pt[2*Mt+1];ae(Pt,Zt,xt,He)<=St&&kt.push(ot[Mt]);var $t=(Et+1)%2;(0===Et?xt-Ge<=Pt:He-Ge<=Zt)&&(ht.push(Nt),ht.push(Mt-1),ht.push($t)),(0===Et?xt+Ge>=Pt:He+Ge>=Zt)&&(ht.push(Mt+1),ht.push(wt),ht.push($t))}}return kt}(this.ids,this.coords,it,st,Je,this.nodeSize)};var le={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(it){return it}},fe=function(it){this.options=Te(Object.create(le),it),this.trees=new Array(this.options.maxZoom+1)};function he(it,st,Je,ot,pt){return{x:it,y:st,zoom:1/0,id:Je,parentId:-1,numPoints:ot,properties:pt}}function pe(it,st){var Je=it.geometry.coordinates,pt=Je[1];return{x:Re(Je[0]),y:ke(pt),zoom:1/0,index:st,parentId:-1}}function xe(it){return{type:"Feature",id:it.id,properties:Ee(it),geometry:{type:"Point",coordinates:[(ot=it.x,360*(ot-.5)),(st=it.y,Je=(180-360*st)*Math.PI/180,360*Math.atan(Math.exp(Je))/Math.PI-90)]}};var st,Je,ot}function Ee(it){var st=it.numPoints,Je=st>=1e4?Math.round(st/1e3)+"k":st>=1e3?Math.round(st/100)/10+"k":st;return Te(Te({},it.properties),{cluster:!0,cluster_id:it.id,point_count:st,point_count_abbreviated:Je})}function Re(it){return it/360+.5}function ke(it){var st=Math.sin(it*Math.PI/180),Je=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return Je<0?0:Je>1?1:Je}function Te(it,st){for(var Je in st)it[Je]=st[Je];return it}function we(it){return it.x}function je(it){return it.y}function Ce(it,st,Je,ot){for(var pt,xt=ot,He=Je-st>>1,Ge=Je-st,dt=it[st],ht=it[st+1],kt=it[Je],St=it[Je+1],Et=st+3;Et<Je;Et+=3){var wt=Ie(it[Et],it[Et+1],dt,ht,kt,St);if(wt>xt)pt=Et,xt=wt;else if(wt===xt){var Nt=Math.abs(Et-He);Nt<Ge&&(pt=Et,Ge=Nt)}}xt>ot&&(pt-st>3&&Ce(it,st,pt,ot),it[pt+2]=xt,Je-pt>3&&Ce(it,pt,Je,ot))}function Ie(it,st,Je,ot,pt,xt){var He=pt-Je,Ge=xt-ot;if(0!==He||0!==Ge){var dt=((it-Je)*He+(st-ot)*Ge)/(He*He+Ge*Ge);dt>1?(Je=pt,ot=xt):dt>0&&(Je+=He*dt,ot+=Ge*dt)}return(He=it-Je)*He+(Ge=st-ot)*Ge}function ge(it,st,Je,ot){var pt={id:void 0===it?null:it,type:st,geometry:Je,tags:ot,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(xt){var He=xt.geometry,Ge=xt.type;if("Point"===Ge||"MultiPoint"===Ge||"LineString"===Ge)me(xt,He);else if("Polygon"===Ge||"MultiLineString"===Ge)for(var dt=0;dt<He.length;dt++)me(xt,He[dt]);else if("MultiPolygon"===Ge)for(dt=0;dt<He.length;dt++)for(var ht=0;ht<He[dt].length;ht++)me(xt,He[dt][ht])}(pt),pt}function me(it,st){for(var Je=0;Je<st.length;Je+=3)it.minX=Math.min(it.minX,st[Je]),it.minY=Math.min(it.minY,st[Je+1]),it.maxX=Math.max(it.maxX,st[Je]),it.maxY=Math.max(it.maxY,st[Je+1])}function ce(it,st,Je,ot){if(st.geometry){var pt=st.geometry.coordinates,xt=st.geometry.type,He=Math.pow(Je.tolerance/((1<<Je.maxZoom)*Je.extent),2),Ge=[],dt=st.id;if(Je.promoteId?dt=st.properties[Je.promoteId]:Je.generateId&&(dt=ot||0),"Point"===xt)Ae(pt,Ge);else if("MultiPoint"===xt)for(var ht=0;ht<pt.length;ht++)Ae(pt[ht],Ge);else if("LineString"===xt)Ne(pt,Ge,He,!1);else if("MultiLineString"===xt){if(Je.lineMetrics){for(ht=0;ht<pt.length;ht++)Ne(pt[ht],Ge=[],He,!1),it.push(ge(dt,"LineString",Ge,st.properties));return}De(pt,Ge,He,!1)}else if("Polygon"===xt)De(pt,Ge,He,!0);else{if("MultiPolygon"!==xt){if("GeometryCollection"===xt){for(ht=0;ht<st.geometry.geometries.length;ht++)ce(it,{id:dt,geometry:st.geometry.geometries[ht],properties:st.properties},Je,ot);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ht=0;ht<pt.length;ht++){var kt=[];De(pt[ht],kt,He,!0),Ge.push(kt)}}it.push(ge(dt,xt,Ge,st.properties))}}function Ae(it,st){st.push(qe(it[0])),st.push(Ke(it[1])),st.push(0)}function Ne(it,st,Je,ot){for(var pt,xt,He=0,Ge=0;Ge<it.length;Ge++){var dt=qe(it[Ge][0]),ht=Ke(it[Ge][1]);st.push(dt),st.push(ht),st.push(0),Ge>0&&(He+=ot?(pt*ht-dt*xt)/2:Math.sqrt(Math.pow(dt-pt,2)+Math.pow(ht-xt,2))),pt=dt,xt=ht}var kt=st.length-3;st[2]=1,Ce(st,0,kt,Je),st[kt+2]=1,st.size=Math.abs(He),st.start=0,st.end=st.size}function De(it,st,Je,ot){for(var pt=0;pt<it.length;pt++){var xt=[];Ne(it[pt],xt,Je,ot),st.push(xt)}}function qe(it){return it/360+.5}function Ke(it){var st=Math.sin(it*Math.PI/180),Je=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return Je<0?0:Je>1?1:Je}function be(it,st,Je,ot,pt,xt,He,Ge){if(ot/=st,xt>=(Je/=st)&&He<ot)return it;if(He<Je||xt>=ot)return null;for(var dt=[],ht=0;ht<it.length;ht++){var kt=it[ht],St=kt.geometry,Et=kt.type,wt=0===pt?kt.minX:kt.minY,Nt=0===pt?kt.maxX:kt.maxY;if(wt>=Je&&Nt<ot)dt.push(kt);else if(!(Nt<Je||wt>=ot)){var _t=[];if("Point"===Et||"MultiPoint"===Et)Oe(St,_t,Je,ot,pt);else if("LineString"===Et)Le(St,_t,Je,ot,pt,!1,Ge.lineMetrics);else if("MultiLineString"===Et)Ze(St,_t,Je,ot,pt,!1);else if("Polygon"===Et)Ze(St,_t,Je,ot,pt,!0);else if("MultiPolygon"===Et)for(var Mt=0;Mt<St.length;Mt++){var Pt=[];Ze(St[Mt],Pt,Je,ot,pt,!0),Pt.length&&_t.push(Pt)}if(_t.length){if(Ge.lineMetrics&&"LineString"===Et){for(Mt=0;Mt<_t.length;Mt++)dt.push(ge(kt.id,Et,_t[Mt],kt.tags));continue}"LineString"!==Et&&"MultiLineString"!==Et||(1===_t.length?(Et="LineString",_t=_t[0]):Et="MultiLineString"),"Point"!==Et&&"MultiPoint"!==Et||(Et=3===_t.length?"Point":"MultiPoint"),dt.push(ge(kt.id,Et,_t,kt.tags))}}}return dt.length?dt:null}function Oe(it,st,Je,ot,pt){for(var xt=0;xt<it.length;xt+=3){var He=it[xt+pt];He>=Je&&He<=ot&&(st.push(it[xt]),st.push(it[xt+1]),st.push(it[xt+2]))}}function Le(it,st,Je,ot,pt,xt,He){for(var Ge,dt,ht=Ue(it),kt=0===pt?et:nt,St=it.start,Et=0;Et<it.length-3;Et+=3){var wt=it[Et],Nt=it[Et+1],_t=it[Et+2],Mt=it[Et+3],Pt=it[Et+4],Zt=0===pt?wt:Nt,$t=0===pt?Mt:Pt,Xt=!1;He&&(Ge=Math.sqrt(Math.pow(wt-Mt,2)+Math.pow(Nt-Pt,2))),Zt<Je?$t>Je&&(dt=kt(ht,wt,Nt,Mt,Pt,Je),He&&(ht.start=St+Ge*dt)):Zt>ot?$t<ot&&(dt=kt(ht,wt,Nt,Mt,Pt,ot),He&&(ht.start=St+Ge*dt)):We(ht,wt,Nt,_t),$t<Je&&Zt>=Je&&(dt=kt(ht,wt,Nt,Mt,Pt,Je),Xt=!0),$t>ot&&Zt<=ot&&(dt=kt(ht,wt,Nt,Mt,Pt,ot),Xt=!0),!xt&&Xt&&(He&&(ht.end=St+Ge*dt),st.push(ht),ht=Ue(it)),He&&(St+=Ge)}var dn=it.length-3;wt=it[dn],Nt=it[dn+1],_t=it[dn+2],(Zt=0===pt?wt:Nt)>=Je&&Zt<=ot&&We(ht,wt,Nt,_t),dn=ht.length-3,xt&&dn>=3&&(ht[dn]!==ht[0]||ht[dn+1]!==ht[1])&&We(ht,ht[0],ht[1],ht[2]),ht.length&&st.push(ht)}function Ue(it){var st=[];return st.size=it.size,st.start=it.start,st.end=it.end,st}function Ze(it,st,Je,ot,pt,xt){for(var He=0;He<it.length;He++)Le(it[He],st,Je,ot,pt,xt,!1)}function We(it,st,Je,ot){it.push(st),it.push(Je),it.push(ot)}function et(it,st,Je,ot,pt,xt){var He=(xt-st)/(ot-st);return it.push(xt),it.push(Je+(pt-Je)*He),it.push(1),He}function nt(it,st,Je,ot,pt,xt){var He=(xt-Je)/(pt-Je);return it.push(st+(ot-st)*He),it.push(xt),it.push(1),He}function ct(it,st){for(var Je=[],ot=0;ot<it.length;ot++){var pt,xt=it[ot],He=xt.type;if("Point"===He||"MultiPoint"===He||"LineString"===He)pt=yt(xt.geometry,st);else if("MultiLineString"===He||"Polygon"===He){pt=[];for(var Ge=0;Ge<xt.geometry.length;Ge++)pt.push(yt(xt.geometry[Ge],st))}else if("MultiPolygon"===He)for(pt=[],Ge=0;Ge<xt.geometry.length;Ge++){for(var dt=[],ht=0;ht<xt.geometry[Ge].length;ht++)dt.push(yt(xt.geometry[Ge][ht],st));pt.push(dt)}Je.push(ge(xt.id,He,pt,xt.tags))}return Je}function yt(it,st){var Je=[];Je.size=it.size,void 0!==it.start&&(Je.start=it.start,Je.end=it.end);for(var ot=0;ot<it.length;ot+=3)Je.push(it[ot]+st,it[ot+1],it[ot+2]);return Je}function ut(it,st){if(it.transformed)return it;var Je,ot,pt,xt=1<<it.z,He=it.x,Ge=it.y;for(Je=0;Je<it.features.length;Je++){var dt=it.features[Je],ht=dt.geometry,kt=dt.type;if(dt.geometry=[],1===kt)for(ot=0;ot<ht.length;ot+=2)dt.geometry.push(Ct(ht[ot],ht[ot+1],st,xt,He,Ge));else for(ot=0;ot<ht.length;ot++){var St=[];for(pt=0;pt<ht[ot].length;pt+=2)St.push(Ct(ht[ot][pt],ht[ot][pt+1],st,xt,He,Ge));dt.geometry.push(St)}}return it.transformed=!0,it}function Ct(it,st,Je,ot,pt,xt){return[Math.round(Je*(it*ot-pt)),Math.round(Je*(st*ot-xt))]}function Dt(it,st,Je,ot,pt){for(var xt=st===pt.maxZoom?0:pt.tolerance/((1<<st)*pt.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Je,y:ot,z:st,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ge=0;Ge<it.length;Ge++){He.numFeatures++,vt(He,it[Ge],xt,pt);var dt=it[Ge].minX,ht=it[Ge].minY,kt=it[Ge].maxX,St=it[Ge].maxY;dt<He.minX&&(He.minX=dt),ht<He.minY&&(He.minY=ht),kt>He.maxX&&(He.maxX=kt),St>He.maxY&&(He.maxY=St)}return He}function vt(it,st,Je,ot){var pt=st.geometry,xt=st.type,He=[];if("Point"===xt||"MultiPoint"===xt)for(var Ge=0;Ge<pt.length;Ge+=3)He.push(pt[Ge]),He.push(pt[Ge+1]),it.numPoints++,it.numSimplified++;else if("LineString"===xt)mt(He,pt,it,Je,!1,!1);else if("MultiLineString"===xt||"Polygon"===xt)for(Ge=0;Ge<pt.length;Ge++)mt(He,pt[Ge],it,Je,"Polygon"===xt,0===Ge);else if("MultiPolygon"===xt)for(var dt=0;dt<pt.length;dt++){var ht=pt[dt];for(Ge=0;Ge<ht.length;Ge++)mt(He,ht[Ge],it,Je,!0,0===Ge)}if(He.length){var kt=st.tags||null;if("LineString"===xt&&ot.lineMetrics){for(var St in kt={},st.tags)kt[St]=st.tags[St];kt.mapbox_clip_start=pt.start/pt.size,kt.mapbox_clip_end=pt.end/pt.size}var Et={geometry:He,type:"Polygon"===xt||"MultiPolygon"===xt?3:"LineString"===xt||"MultiLineString"===xt?2:1,tags:kt};null!==st.id&&(Et.id=st.id),it.features.push(Et)}}function mt(it,st,Je,ot,pt,xt){var He=ot*ot;if(ot>0&&st.size<(pt?He:ot))Je.numPoints+=st.length/3;else{for(var Ge=[],dt=0;dt<st.length;dt+=3)(0===ot||st[dt+2]>He)&&(Je.numSimplified++,Ge.push(st[dt]),Ge.push(st[dt+1])),Je.numPoints++;pt&&function(ht,kt){for(var St=0,Et=0,wt=ht.length,Nt=wt-2;Et<wt;Nt=Et,Et+=2)St+=(ht[Et]-ht[Nt])*(ht[Et+1]+ht[Nt+1]);if(St>0===kt)for(Et=0,wt=ht.length;Et<wt/2;Et+=2){var _t=ht[Et],Mt=ht[Et+1];ht[Et]=ht[wt-2-Et],ht[Et+1]=ht[wt-1-Et],ht[wt-2-Et]=_t,ht[wt-1-Et]=Mt}}(Ge,xt),it.push(Ge)}}function Lt(it,st){var Je=(st=this.options=function(pt,xt){for(var He in xt)pt[He]=xt[He];return pt}(Object.create(this.options),st)).debug;if(Je&&console.time("preprocess data"),st.maxZoom<0||st.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(st.promoteId&&st.generateId)throw new Error("promoteId and generateId cannot be used together.");var pt,xt,He,Ge,dt,ht,ot=function(pt,xt){var He=[];if("FeatureCollection"===pt.type)for(var Ge=0;Ge<pt.features.length;Ge++)ce(He,pt.features[Ge],xt,Ge);else ce(He,"Feature"===pt.type?pt:{geometry:pt},xt);return He}(it,st);this.tiles={},this.tileCoords=[],Je&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",st.indexMaxZoom,st.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(pt=ot,xt=st,He=xt.buffer/xt.extent,Ge=pt,dt=be(pt,1,-1-He,He,0,-1,2,xt),ht=be(pt,1,1-He,2+He,0,-1,2,xt),(dt||ht)&&(Ge=be(pt,1,-He,1+He,0,-1,2,xt)||[],dt&&(Ge=ct(dt,1).concat(Ge)),ht&&(Ge=Ge.concat(ct(ht,-1)))),ot=Ge).length&&this.splitTile(ot,0,0,0),Je&&(ot.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ft(it,st,Je){return 32*((1<<it)*Je+st)+it}function Rt(it,st){var Je=it.tileID.canonical;if(!this._geoJSONIndex)return st(null,null);var ot=this._geoJSONIndex.getTile(Je.z,Je.x,Je.y);if(!ot)return st(null,null);var pt=new p(ot.features),xt=m(pt);0===xt.byteOffset&&xt.byteLength===xt.buffer.byteLength||(xt=new Uint8Array(xt)),st(null,{vectorTile:pt,rawData:xt.buffer})}fe.prototype.load=function(it){var st=this.options,Je=st.log,ot=st.minZoom,pt=st.maxZoom,xt=st.nodeSize;Je&&console.time("total time");var He="prepare "+it.length+" points";Je&&console.time(He),this.points=it;for(var Ge=[],dt=0;dt<it.length;dt++)it[dt].geometry&&Ge.push(pe(it[dt],dt));this.trees[pt+1]=new ie(Ge,we,je,xt,Float32Array),Je&&console.timeEnd(He);for(var ht=pt;ht>=ot;ht--){var kt=+Date.now();Ge=this._cluster(Ge,ht),this.trees[ht]=new ie(Ge,we,je,xt,Float32Array),Je&&console.log("z%d: %d clusters in %dms",ht,Ge.length,+Date.now()-kt)}return Je&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(it,st){var Je=((it[0]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,it[1])),pt=180===it[2]?180:((it[2]+180)%360+360)%360-180,xt=Math.max(-90,Math.min(90,it[3]));if(it[2]-it[0]>=360)Je=-180,pt=180;else if(Je>pt){var He=this.getClusters([Je,ot,180,xt],st),Ge=this.getClusters([-180,ot,pt,xt],st);return He.concat(Ge)}for(var dt=this.trees[this._limitZoom(st)],ht=[],kt=0,St=dt.range(Re(Je),ke(xt),Re(pt),ke(ot));kt<St.length;kt+=1){var wt=dt.points[St[kt]];ht.push(wt.numPoints?xe(wt):this.points[wt.index])}return ht},fe.prototype.getChildren=function(it){var st=this._getOriginId(it),Je=this._getOriginZoom(it),ot="No cluster with the specified id.",pt=this.trees[Je];if(!pt)throw new Error(ot);var xt=pt.points[st];if(!xt)throw new Error(ot);for(var He=this.options.radius/(this.options.extent*Math.pow(2,Je-1)),Ge=[],dt=0,ht=pt.within(xt.x,xt.y,He);dt<ht.length;dt+=1){var St=pt.points[ht[dt]];St.parentId===it&&Ge.push(St.numPoints?xe(St):this.points[St.index])}if(0===Ge.length)throw new Error(ot);return Ge},fe.prototype.getLeaves=function(it,st,Je){var ot=[];return this._appendLeaves(ot,it,st=st||10,Je=Je||0,0),ot},fe.prototype.getTile=function(it,st,Je){var ot=this.trees[this._limitZoom(it)],pt=Math.pow(2,it),xt=this.options,Ge=xt.radius/xt.extent,dt=(Je-Ge)/pt,ht=(Je+1+Ge)/pt,kt={features:[]};return this._addTileFeatures(ot.range((st-Ge)/pt,dt,(st+1+Ge)/pt,ht),ot.points,st,Je,pt,kt),0===st&&this._addTileFeatures(ot.range(1-Ge/pt,dt,1,ht),ot.points,pt,Je,pt,kt),st===pt-1&&this._addTileFeatures(ot.range(0,dt,Ge/pt,ht),ot.points,-1,Je,pt,kt),kt.features.length?kt:null},fe.prototype.getClusterExpansionZoom=function(it){for(var st=this._getOriginZoom(it)-1;st<=this.options.maxZoom;){var Je=this.getChildren(it);if(st++,1!==Je.length)break;it=Je[0].properties.cluster_id}return st},fe.prototype._appendLeaves=function(it,st,Je,ot,pt){for(var xt=0,He=this.getChildren(st);xt<He.length;xt+=1){var Ge=He[xt],dt=Ge.properties;if(dt&&dt.cluster?pt+dt.point_count<=ot?pt+=dt.point_count:pt=this._appendLeaves(it,dt.cluster_id,Je,ot,pt):pt<ot?pt++:it.push(Ge),it.length===Je)break}return pt},fe.prototype._addTileFeatures=function(it,st,Je,ot,pt,xt){for(var He=0,Ge=it;He<Ge.length;He+=1){var dt=st[Ge[He]],ht=dt.numPoints,kt={type:1,geometry:[[Math.round(this.options.extent*(dt.x*pt-Je)),Math.round(this.options.extent*(dt.y*pt-ot))]],tags:ht?Ee(dt):this.points[dt.index].properties},St=void 0;ht?St=dt.id:this.options.generateId?St=dt.index:this.points[dt.index].id&&(St=this.points[dt.index].id),void 0!==St&&(kt.id=St),xt.features.push(kt)}},fe.prototype._limitZoom=function(it){return Math.max(this.options.minZoom,Math.min(it,this.options.maxZoom+1))},fe.prototype._cluster=function(it,st){for(var Je=[],ot=this.options,He=ot.reduce,Ge=ot.radius/(ot.extent*Math.pow(2,st)),dt=0;dt<it.length;dt++){var ht=it[dt];if(!(ht.zoom<=st)){ht.zoom=st;for(var kt=this.trees[st+1],St=kt.within(ht.x,ht.y,Ge),Et=ht.numPoints||1,wt=ht.x*Et,Nt=ht.y*Et,_t=He&&Et>1?this._map(ht,!0):null,Mt=(dt<<5)+(st+1)+this.points.length,Pt=0,Zt=St;Pt<Zt.length;Pt+=1){var Xt=kt.points[Zt[Pt]];if(!(Xt.zoom<=st)){Xt.zoom=st;var dn=Xt.numPoints||1;wt+=Xt.x*dn,Nt+=Xt.y*dn,Et+=dn,Xt.parentId=Mt,He&&(_t||(_t=this._map(ht,!0)),He(_t,this._map(Xt)))}}1===Et?Je.push(ht):(ht.parentId=Mt,Je.push(he(wt/Et,Nt/Et,Mt,Et,_t)))}}return Je},fe.prototype._getOriginId=function(it){return it-this.points.length>>5},fe.prototype._getOriginZoom=function(it){return(it-this.points.length)%32},fe.prototype._map=function(it,st){if(it.numPoints)return st?Te({},it.properties):it.properties;var Je=this.points[it.index].properties,ot=this.options.map(Je);return st&&ot===Je?Te({},ot):ot},Lt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Lt.prototype.splitTile=function(it,st,Je,ot,pt,xt,He){for(var Ge=[it,st,Je,ot],dt=this.options,ht=dt.debug;Ge.length;){ot=Ge.pop(),Je=Ge.pop(),st=Ge.pop(),it=Ge.pop();var kt=1<<st,St=Ft(st,Je,ot),Et=this.tiles[St];if(!Et&&(ht>1&&console.time("creation"),Et=this.tiles[St]=Dt(it,st,Je,ot,dt),this.tileCoords.push({z:st,x:Je,y:ot}),ht)){ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",st,Je,ot,Et.numFeatures,Et.numPoints,Et.numSimplified),console.timeEnd("creation"));var wt="z"+st;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(Et.source=it,pt){if(st===dt.maxZoom||st===pt)continue;var Nt=1<<pt-st;if(Je!==Math.floor(xt/Nt)||ot!==Math.floor(He/Nt))continue}else if(st===dt.indexMaxZoom||Et.numPoints<=dt.indexMaxPoints)continue;if(Et.source=null,0!==it.length){ht>1&&console.time("clipping");var _t,Mt,Pt,Zt,$t,Xt,dn=.5*dt.buffer/dt.extent,on=.5-dn,cn=.5+dn,tn=1+dn;_t=Mt=Pt=Zt=null,$t=be(it,kt,Je-dn,Je+cn,0,Et.minX,Et.maxX,dt),Xt=be(it,kt,Je+on,Je+tn,0,Et.minX,Et.maxX,dt),it=null,$t&&(_t=be($t,kt,ot-dn,ot+cn,1,Et.minY,Et.maxY,dt),Mt=be($t,kt,ot+on,ot+tn,1,Et.minY,Et.maxY,dt),$t=null),Xt&&(Pt=be(Xt,kt,ot-dn,ot+cn,1,Et.minY,Et.maxY,dt),Zt=be(Xt,kt,ot+on,ot+tn,1,Et.minY,Et.maxY,dt),Xt=null),ht>1&&console.timeEnd("clipping"),Ge.push(_t||[],st+1,2*Je,2*ot),Ge.push(Mt||[],st+1,2*Je,2*ot+1),Ge.push(Pt||[],st+1,2*Je+1,2*ot),Ge.push(Zt||[],st+1,2*Je+1,2*ot+1)}}},Lt.prototype.getTile=function(it,st,Je){var ot=this.options,pt=ot.extent,xt=ot.debug;if(it<0||it>24)return null;var He=1<<it,Ge=Ft(it,st=(st%He+He)%He,Je);if(this.tiles[Ge])return ut(this.tiles[Ge],pt);xt>1&&console.log("drilling down to z%d-%d-%d",it,st,Je);for(var dt,ht=it,kt=st,St=Je;!dt&&ht>0;)ht--,kt=Math.floor(kt/2),St=Math.floor(St/2),dt=this.tiles[Ft(ht,kt,St)];return dt&&dt.source?(xt>1&&console.log("found parent tile z%d-%d-%d",ht,kt,St),xt>1&&console.time("drilling down"),this.splitTile(dt.source,ht,kt,St,it,st,Je),xt>1&&console.timeEnd("drilling down"),this.tiles[Ge]?ut(this.tiles[Ge],pt):null):null};var Wt=function(it){function st(Je,ot,pt,xt){it.call(this,Je,ot,pt,Rt),xt&&(this.loadGeoJSON=xt)}return it&&(st.__proto__=it),(st.prototype=Object.create(it&&it.prototype)).constructor=st,st.prototype.loadData=function(Je,ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ot,this._pendingLoadDataParams=Je,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},st.prototype._loadData=function(){var Je=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ot=this._pendingCallback,pt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var xt=!!(pt&&pt.request&&pt.request.collectResourceTiming)&&new f.RequestPerformance(pt.request);this.loadGeoJSON(pt,function(He,Ge){if(He||!Ge)return ot(He);if("object"!=typeof Ge)return ot(new Error("Input data given to '"+pt.source+"' is not a valid GeoJSON object."));d(Ge,!0);try{Je._geoJSONIndex=pt.cluster?new fe(function(kt){var St=kt.superclusterOptions,Et=kt.clusterProperties;if(!Et||!St)return St;for(var wt={},Nt={},_t={accumulated:null,zoom:0},Mt={properties:null},Pt=Object.keys(Et),Zt=0,$t=Pt;Zt<$t.length;Zt+=1){var Xt=$t[Zt],dn=Et[Xt],on=dn[0],tn=f.createExpression(dn[1]),Cn=f.createExpression("string"==typeof on?[on,["accumulated"],["get",Xt]]:on);wt[Xt]=tn.value,Nt[Xt]=Cn.value}return St.map=function(Fn){Mt.properties=Fn;for(var En={},rn=0,yn=Pt;rn<yn.length;rn+=1){var pn=yn[rn];En[pn]=wt[pn].evaluate(_t,Mt)}return En},St.reduce=function(Fn,En){Mt.properties=En;for(var rn=0,yn=Pt;rn<yn.length;rn+=1){var pn=yn[rn];_t.accumulated=Fn[pn],Fn[pn]=Nt[pn].evaluate(_t,Mt)}},St}(pt)).load(Ge.features):new Lt(kt=Ge,pt.geojsonVtOptions)}catch(kt){return ot(kt)}var kt;Je.loaded={};var dt={};if(xt){var ht=xt.finish();ht&&(dt.resourceTiming={},dt.resourceTiming[pt.source]=JSON.parse(JSON.stringify(ht)))}ot(null,dt)})}},st.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},st.prototype.reloadTile=function(Je,ot){var pt=this.loaded;return pt&&pt[Je.uid]?it.prototype.reloadTile.call(this,Je,ot):this.loadTile(Je,ot)},st.prototype.loadGeoJSON=function(Je,ot){if(Je.request)f.getJSON(Je.request,ot);else{if("string"!=typeof Je.data)return ot(new Error("Input data given to '"+Je.source+"' is not a valid GeoJSON object."));try{return ot(null,JSON.parse(Je.data))}catch{return ot(new Error("Input data given to '"+Je.source+"' is not a valid GeoJSON object."))}}},st.prototype.removeSource=function(Je,ot){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ot()},st.prototype.getClusterExpansionZoom=function(Je,ot){try{ot(null,this._geoJSONIndex.getClusterExpansionZoom(Je.clusterId))}catch(pt){ot(pt)}},st.prototype.getClusterChildren=function(Je,ot){try{ot(null,this._geoJSONIndex.getChildren(Je.clusterId))}catch(pt){ot(pt)}},st.prototype.getClusterLeaves=function(Je,ot){try{ot(null,this._geoJSONIndex.getLeaves(Je.clusterId,Je.limit,Je.offset))}catch(pt){ot(pt)}},st}(o),Ht=function(it){var st=this;this.self=it,this.actor=new f.Actor(it,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:Wt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Je,ot){if(st.workerSourceTypes[Je])throw new Error('Worker source with name "'+Je+'" already registered.');st.workerSourceTypes[Je]=ot},this.self.registerRTLTextPlugin=function(Je){if(f.plugin.isParsed())throw new Error("RTL text plugin already registered.");f.plugin.applyArabicShaping=Je.applyArabicShaping,f.plugin.processBidirectionalText=Je.processBidirectionalText,f.plugin.processStyledBidirectionalText=Je.processStyledBidirectionalText}};return Ht.prototype.setReferrer=function(it,st){this.referrer=st},Ht.prototype.setImages=function(it,st,Je){for(var ot in this.availableImages[it]=st,this.workerSources[it]){var pt=this.workerSources[it][ot];for(var xt in pt)pt[xt].availableImages=st}Je()},Ht.prototype.setLayers=function(it,st,Je){this.getLayerIndex(it).replace(st),Je()},Ht.prototype.updateLayers=function(it,st,Je){this.getLayerIndex(it).update(st.layers,st.removedIds),Je()},Ht.prototype.loadTile=function(it,st,Je){this.getWorkerSource(it,st.type,st.source).loadTile(st,Je)},Ht.prototype.loadDEMTile=function(it,st,Je){this.getDEMWorkerSource(it,st.source).loadTile(st,Je)},Ht.prototype.reloadTile=function(it,st,Je){this.getWorkerSource(it,st.type,st.source).reloadTile(st,Je)},Ht.prototype.abortTile=function(it,st,Je){this.getWorkerSource(it,st.type,st.source).abortTile(st,Je)},Ht.prototype.removeTile=function(it,st,Je){this.getWorkerSource(it,st.type,st.source).removeTile(st,Je)},Ht.prototype.removeDEMTile=function(it,st){this.getDEMWorkerSource(it,st.source).removeTile(st)},Ht.prototype.removeSource=function(it,st,Je){if(this.workerSources[it]&&this.workerSources[it][st.type]&&this.workerSources[it][st.type][st.source]){var ot=this.workerSources[it][st.type][st.source];delete this.workerSources[it][st.type][st.source],void 0!==ot.removeSource?ot.removeSource(st,Je):Je()}},Ht.prototype.loadWorkerSource=function(it,st,Je){try{this.self.importScripts(st.url),Je()}catch(ot){Je(ot.toString())}},Ht.prototype.syncRTLPluginState=function(it,st,Je){try{f.plugin.setState(st);var ot=f.plugin.getPluginURL();if(f.plugin.isLoaded()&&!f.plugin.isParsed()&&null!=ot){this.self.importScripts(ot);var pt=f.plugin.isParsed();Je(pt?void 0:new Error("RTL Text Plugin failed to import scripts from "+ot),pt)}}catch(xt){Je(xt.toString())}},Ht.prototype.getAvailableImages=function(it){var st=this.availableImages[it];return st||(st=[]),st},Ht.prototype.getLayerIndex=function(it){var st=this.layerIndexes[it];return st||(st=this.layerIndexes[it]=new v),st},Ht.prototype.getWorkerSource=function(it,st,Je){var ot=this;return this.workerSources[it]||(this.workerSources[it]={}),this.workerSources[it][st]||(this.workerSources[it][st]={}),this.workerSources[it][st][Je]||(this.workerSources[it][st][Je]=new this.workerSourceTypes[st]({send:function(xt,He,Ge){ot.actor.send(xt,He,Ge,it)}},this.getLayerIndex(it),this.getAvailableImages(it))),this.workerSources[it][st][Je]},Ht.prototype.getDEMWorkerSource=function(it,st){return this.demWorkerSources[it]||(this.demWorkerSources[it]={}),this.demWorkerSources[it][st]||(this.demWorkerSources[it][st]=new u),this.demWorkerSources[it][st]},Ht.prototype.enforceCacheSizeLimit=function(it,st){f.enforceCacheSizeLimit(st)},typeof WorkerGlobalScope<"u"&&void 0!==f.window&&f.window instanceof WorkerGlobalScope&&(f.window.worker=new Ht(f.window)),Ht}),C(0,function(f){var k=f.createCommonjsModule(function(V){function Y(_e){return!W(_e)}function W(_e){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var q,oe,de=new Blob([""],{type:"text/javascript"}),Me=URL.createObjectURL(de);try{oe=new Worker(Me),q=!0}catch{q=!1}return oe&&oe.terminate(),URL.revokeObjectURL(Me),q}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var q=document.createElement("canvas");q.width=q.height=1;var oe=q.getContext("2d");if(!oe)return!1;var de=oe.getImageData(0,0,1,1);return de&&de.width===q.width}()?(void 0===re[Pe=_e&&_e.failIfMajorPerformanceCaveat]&&(re[Pe]=function(q){var Me,Se,ze,oe=(Me=q,Se=document.createElement("canvas"),(ze=Object.create(Y.webGLContextAttributes)).failIfMajorPerformanceCaveat=Me,Se.probablySupportsContext?Se.probablySupportsContext("webgl",ze)||Se.probablySupportsContext("experimental-webgl",ze):Se.supportsContext?Se.supportsContext("webgl",ze)||Se.supportsContext("experimental-webgl",ze):Se.getContext("webgl",ze)||Se.getContext("experimental-webgl",ze));if(!oe)return!1;var de=oe.createShader(oe.VERTEX_SHADER);return!(!de||oe.isContextLost())&&(oe.shaderSource(de,"void main() {}"),oe.compileShader(de),!0===oe.getShaderParameter(de,oe.COMPILE_STATUS))}(Pe)),re[Pe]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var Pe}V.exports?V.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=W);var re={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),T={create:function(V,Y,W){var re=f.window.document.createElement(V);return void 0!==Y&&(re.className=Y),W&&W.appendChild(re),re},createNS:function(V,Y){return f.window.document.createElementNS(V,Y)}},v=f.window.document.documentElement.style;function c(V){if(!v)return V[0];for(var Y=0;Y<V.length;Y++)if(V[Y]in v)return V[Y];return V[0]}var i,s=c(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);T.disableDrag=function(){v&&s&&(i=v[s],v[s]="none")},T.enableDrag=function(){v&&s&&(v[s]=i)};var a=c(["transform","WebkitTransform"]);T.setTransform=function(V,Y){V.style[a]=Y};var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});f.window.addEventListener("test",l,l),f.window.removeEventListener("test",l,l)}catch{o=!1}T.addEventListener=function(V,Y,W,re){void 0===re&&(re={}),V.addEventListener(Y,W,"passive"in re&&o?re:re.capture)},T.removeEventListener=function(V,Y,W,re){void 0===re&&(re={}),V.removeEventListener(Y,W,"passive"in re&&o?re:re.capture)};var u=function(V){V.preventDefault(),V.stopPropagation(),f.window.removeEventListener("click",u,!0)};function d(V){var Y=V.userImage;return!!(Y&&Y.render&&Y.render())&&(V.data.replace(new Uint8Array(Y.data.buffer)),!0)}T.suppressClick=function(){f.window.addEventListener("click",u,!0),f.window.setTimeout(function(){f.window.removeEventListener("click",u,!0)},0)},T.mousePos=function(V,Y){var W=V.getBoundingClientRect();return new f.Point(Y.clientX-W.left-V.clientLeft,Y.clientY-W.top-V.clientTop)},T.touchPos=function(V,Y){for(var W=V.getBoundingClientRect(),re=[],_e=0;_e<Y.length;_e++)re.push(new f.Point(Y[_e].clientX-W.left-V.clientLeft,Y[_e].clientY-W.top-V.clientTop));return re},T.mouseButton=function(V){return void 0!==f.window.InstallTrigger&&2===V.button&&V.ctrlKey&&f.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:V.button},T.remove=function(V){V.parentNode&&V.parentNode.removeChild(V)};var g=function(V){function Y(){V.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new f.RGBAImage({width:1,height:1}),this.dirty=!0}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(W){if(this.loaded!==W&&(this.loaded=W,W)){for(var re=0,_e=this.requestors;re<_e.length;re+=1){var Pe=_e[re];this._notify(Pe.ids,Pe.callback)}this.requestors=[]}},Y.prototype.getImage=function(W){return this.images[W]},Y.prototype.addImage=function(W,re){this._validate(W,re)&&(this.images[W]=re)},Y.prototype._validate=function(W,re){var _e=!0;return this._validateStretch(re.stretchX,re.data&&re.data.width)||(this.fire(new f.ErrorEvent(new Error('Image "'+W+'" has invalid "stretchX" value'))),_e=!1),this._validateStretch(re.stretchY,re.data&&re.data.height)||(this.fire(new f.ErrorEvent(new Error('Image "'+W+'" has invalid "stretchY" value'))),_e=!1),this._validateContent(re.content,re)||(this.fire(new f.ErrorEvent(new Error('Image "'+W+'" has invalid "content" value'))),_e=!1),_e},Y.prototype._validateStretch=function(W,re){if(!W)return!0;for(var _e=0,Pe=0,q=W;Pe<q.length;Pe+=1){var oe=q[Pe];if(oe[0]<_e||oe[1]<oe[0]||re<oe[1])return!1;_e=oe[1]}return!0},Y.prototype._validateContent=function(W,re){return!(W&&(4!==W.length||W[0]<0||re.data.width<W[0]||W[1]<0||re.data.height<W[1]||W[2]<0||re.data.width<W[2]||W[3]<0||re.data.height<W[3]||W[2]<W[0]||W[3]<W[1]))},Y.prototype.updateImage=function(W,re){re.version=this.images[W].version+1,this.images[W]=re,this.updatedImages[W]=!0},Y.prototype.removeImage=function(W){var re=this.images[W];delete this.images[W],delete this.patterns[W],re.userImage&&re.userImage.onRemove&&re.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(W,re){var _e=!0;if(!this.isLoaded())for(var Pe=0,q=W;Pe<q.length;Pe+=1)this.images[q[Pe]]||(_e=!1);this.isLoaded()||_e?this._notify(W,re):this.requestors.push({ids:W,callback:re})},Y.prototype._notify=function(W,re){for(var _e={},Pe=0,q=W;Pe<q.length;Pe+=1){var oe=q[Pe];this.images[oe]||this.fire(new f.Event("styleimagemissing",{id:oe}));var de=this.images[oe];de?_e[oe]={data:de.data.clone(),pixelRatio:de.pixelRatio,sdf:de.sdf,version:de.version,stretchX:de.stretchX,stretchY:de.stretchY,content:de.content,hasRenderCallback:!(!de.userImage||!de.userImage.render)}:f.warnOnce('Image "'+oe+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}re(null,_e)},Y.prototype.getPixelSize=function(){var W=this.atlasImage;return{width:W.width,height:W.height}},Y.prototype.getPattern=function(W){var re=this.patterns[W],_e=this.getImage(W);if(!_e)return null;if(re&&re.position.version===_e.version)return re.position;if(re)re.position.version=_e.version;else{var Pe={w:_e.data.width+2,h:_e.data.height+2,x:0,y:0},q=new f.ImagePosition(Pe,_e);this.patterns[W]={bin:Pe,position:q}}return this._updatePatternAtlas(),this.patterns[W].position},Y.prototype.bind=function(W){var re=W.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new f.Texture(W,this.atlasImage,re.RGBA),this.atlasTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var W=[];for(var re in this.patterns)W.push(this.patterns[re].bin);var _e=f.potpack(W),Pe=_e.w,q=_e.h,oe=this.atlasImage;for(var de in oe.resize({width:Pe||1,height:q||1}),this.patterns){var Me=this.patterns[de].bin,Se=Me.x+1,ze=Me.y+1,Ye=this.images[de].data,Xe=Ye.width,tt=Ye.height;f.RGBAImage.copy(Ye,oe,{x:0,y:0},{x:Se,y:ze},{width:Xe,height:tt}),f.RGBAImage.copy(Ye,oe,{x:0,y:tt-1},{x:Se,y:ze-1},{width:Xe,height:1}),f.RGBAImage.copy(Ye,oe,{x:0,y:0},{x:Se,y:ze+tt},{width:Xe,height:1}),f.RGBAImage.copy(Ye,oe,{x:Xe-1,y:0},{x:Se-1,y:ze},{width:1,height:tt}),f.RGBAImage.copy(Ye,oe,{x:0,y:0},{x:Se+Xe,y:ze},{width:1,height:tt})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(W){for(var re=0,_e=W;re<_e.length;re+=1){var Pe=_e[re];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var q=this.images[Pe];d(q)&&this.updateImage(Pe,q)}}},Y}(f.Evented),h=p,w=p,y=1e20;function p(V,Y,W,re,_e,Pe){this.fontSize=V||24,this.buffer=void 0===Y?3:Y,this.cutoff=re||.25,this.fontFamily=_e||"sans-serif",this.fontWeight=Pe||"normal",this.radius=W||8;var q=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=q,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.d=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Int16Array(q),this.middle=Math.round(q/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(V,Y,W,re,_e,Pe,q){for(var oe=0;oe<Y;oe++){for(var de=0;de<W;de++)re[de]=V[de*Y+oe];for(x(re,_e,Pe,q,W),de=0;de<W;de++)V[de*Y+oe]=_e[de]}for(de=0;de<W;de++){for(oe=0;oe<Y;oe++)re[oe]=V[de*Y+oe];for(x(re,_e,Pe,q,Y),oe=0;oe<Y;oe++)V[de*Y+oe]=Math.sqrt(_e[oe])}}function x(V,Y,W,re,_e){W[0]=0,re[0]=-y,re[1]=+y;for(var Pe=1,q=0;Pe<_e;Pe++){for(var oe=(V[Pe]+Pe*Pe-(V[W[q]]+W[q]*W[q]))/(2*Pe-2*W[q]);oe<=re[q];)q--,oe=(V[Pe]+Pe*Pe-(V[W[q]]+W[q]*W[q]))/(2*Pe-2*W[q]);W[++q]=Pe,re[q]=oe,re[q+1]=+y}for(Pe=0,q=0;Pe<_e;Pe++){for(;re[q+1]<Pe;)q++;Y[Pe]=(Pe-W[q])*(Pe-W[q])+V[W[q]]}}p.prototype.draw=function(V){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(V,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),W=new Uint8ClampedArray(this.size*this.size),re=0;re<this.size*this.size;re++){var _e=Y.data[4*re+3]/255;this.gridOuter[re]=1===_e?0:0===_e?y:Math.pow(Math.max(0,.5-_e),2),this.gridInner[re]=1===_e?y:0===_e?0:Math.pow(Math.max(0,_e-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),re=0;re<this.size*this.size;re++)W[re]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[re]-this.gridInner[re])/this.radius+this.cutoff))));return W},h.default=w;var b=function(V,Y){this.requestManager=V,this.localIdeographFontFamily=Y,this.entries={}};b.prototype.setURL=function(V){this.url=V},b.prototype.getGlyphs=function(V,Y){var W=this,re=[];for(var _e in V)for(var Pe=0,q=V[_e];Pe<q.length;Pe+=1)re.push({stack:_e,id:q[Pe]});f.asyncAll(re,function(de,Me){var Se=de.stack,ze=de.id,Ye=W.entries[Se];Ye||(Ye=W.entries[Se]={glyphs:{},requests:{},ranges:{}});var Xe=Ye.glyphs[ze];if(void 0===Xe){if(Xe=W._tinySDF(Ye,Se,ze))return Ye.glyphs[ze]=Xe,void Me(null,{stack:Se,id:ze,glyph:Xe});var tt=Math.floor(ze/256);if(256*tt>65535)Me(new Error("glyphs > 65535 not supported"));else if(Ye.ranges[tt])Me(null,{stack:Se,id:ze,glyph:Xe});else{var rt=Ye.requests[tt];rt||(rt=Ye.requests[tt]=[],b.loadGlyphRange(Se,tt,W.url,W.requestManager,function(ft,bt){if(bt){for(var At in bt)W._doesCharSupportLocalGlyph(+At)||(Ye.glyphs[+At]=bt[+At]);Ye.ranges[tt]=!0}for(var Ut=0,qt=rt;Ut<qt.length;Ut+=1)(0,qt[Ut])(ft,bt);delete Ye.requests[tt]})),rt.push(function(ft,bt){ft?Me(ft):bt&&Me(null,{stack:Se,id:ze,glyph:bt[ze]||null})})}}else Me(null,{stack:Se,id:ze,glyph:Xe})},function(de,Me){if(de)Y(de);else if(Me){for(var Se={},ze=0,Ye=Me;ze<Ye.length;ze+=1){var Xe=Ye[ze],tt=Xe.stack,rt=Xe.id,ft=Xe.glyph;(Se[tt]||(Se[tt]={}))[rt]=ft&&{id:ft.id,bitmap:ft.bitmap.clone(),metrics:ft.metrics}}Y(null,Se)}})},b.prototype._doesCharSupportLocalGlyph=function(V){return!!this.localIdeographFontFamily&&(f.isChar["CJK Unified Ideographs"](V)||f.isChar["Hangul Syllables"](V)||f.isChar.Hiragana(V)||f.isChar.Katakana(V))},b.prototype._tinySDF=function(V,Y,W){var re=this.localIdeographFontFamily;if(re&&this._doesCharSupportLocalGlyph(W)){var _e=V.tinySDF;if(!_e){var Pe="400";/bold/i.test(Y)?Pe="900":/medium/i.test(Y)?Pe="500":/light/i.test(Y)&&(Pe="200"),_e=V.tinySDF=new b.TinySDF(24,3,8,.25,re,Pe)}return{id:W,bitmap:new f.AlphaImage({width:30,height:30},_e.draw(String.fromCharCode(W))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},b.loadGlyphRange=function(V,Y,W,re,_e){var Pe=256*Y,q=Pe+255,oe=re.transformRequest(re.normalizeGlyphsURL(W).replace("{fontstack}",V).replace("{range}",Pe+"-"+q),f.ResourceType.Glyphs);f.getArrayBuffer(oe,function(de,Me){if(de)_e(de);else if(Me){for(var Se={},ze=0,Ye=f.parseGlyphPBF(Me);ze<Ye.length;ze+=1){var Xe=Ye[ze];Se[Xe.id]=Xe}_e(null,Se)}})},b.TinySDF=h;var M=function(){this.specification=f.styleSpec.light.position};M.prototype.possiblyEvaluate=function(V,Y){return f.sphericalToCartesian(V.expression.evaluate(Y))},M.prototype.interpolate=function(V,Y,W){return{x:f.number(V.x,Y.x,W),y:f.number(V.y,Y.y,W),z:f.number(V.z,Y.z,W)}};var m=new f.Properties({anchor:new f.DataConstantProperty(f.styleSpec.light.anchor),position:new M,color:new f.DataConstantProperty(f.styleSpec.light.color),intensity:new f.DataConstantProperty(f.styleSpec.light.intensity)}),S=function(V){function Y(W){V.call(this),this._transitionable=new f.Transitionable(m),this.setLight(W),this._transitioning=this._transitionable.untransitioned()}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(W,re){if(void 0===re&&(re={}),!this._validate(f.validateLight,W,re))for(var _e in W){var Pe=W[_e];f.endsWith(_e,"-transition")?this._transitionable.setTransition(_e.slice(0,-11),Pe):this._transitionable.setValue(_e,Pe)}},Y.prototype.updateTransitions=function(W){this._transitioning=this._transitionable.transitioned(W,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(W){this.properties=this._transitioning.possiblyEvaluate(W)},Y.prototype._validate=function(W,re,_e){return(!_e||!1!==_e.validate)&&f.emitValidationErrors(this,W.call(f.validateStyle,f.extend({value:re,style:{glyphs:!0,sprite:!0},styleSpec:f.styleSpec})))},Y}(f.Evented),O=function(V,Y){this.width=V,this.height=Y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};O.prototype.getDash=function(V,Y){var W=V.join(",")+String(Y);return this.dashEntry[W]||(this.dashEntry[W]=this.addDash(V,Y)),this.dashEntry[W]},O.prototype.getDashRanges=function(V,Y,W){var re=[],_e=V.length%2==1?-V[V.length-1]*W:0,Pe=V[0]*W,q=!0;re.push({left:_e,right:Pe,isDash:q,zeroLength:0===V[0]});for(var oe=V[0],de=1;de<V.length;de++){var Me=V[de];_e=oe*W,Pe=(oe+=Me)*W,re.push({left:_e,right:Pe,isDash:q=!q,zeroLength:0===Me})}return re},O.prototype.addRoundDash=function(V,Y,W){for(var re=Y/2,_e=-W;_e<=W;_e++)for(var q=this.width*(this.nextRow+W+_e),oe=0,de=V[oe],Me=0;Me<this.width;Me++){Me/de.right>1&&(de=V[++oe]);var Se=Math.abs(Me-de.left),ze=Math.abs(Me-de.right),Ye=Math.min(Se,ze),Xe=void 0,tt=_e/W*(re+1);if(de.isDash){var rt=re-Math.abs(tt);Xe=Math.sqrt(Ye*Ye+rt*rt)}else Xe=re-Math.sqrt(Ye*Ye+tt*tt);this.data[q+Me]=Math.max(0,Math.min(255,Xe+128))}},O.prototype.addRegularDash=function(V){for(var Y=V.length-1;Y>=0;--Y){var W=V[Y],re=V[Y+1];W.zeroLength?V.splice(Y,1):re&&re.isDash===W.isDash&&(re.left=W.left,V.splice(Y,1))}var _e=V[0],Pe=V[V.length-1];_e.isDash===Pe.isDash&&(_e.left=Pe.left-this.width,Pe.right=_e.right+this.width);for(var q=this.width*this.nextRow,oe=0,de=V[oe],Me=0;Me<this.width;Me++){Me/de.right>1&&(de=V[++oe]);var Se=Math.abs(Me-de.left),ze=Math.abs(Me-de.right),Ye=Math.min(Se,ze);this.data[q+Me]=Math.max(0,Math.min(255,(de.isDash?Ye:-Ye)+128))}},O.prototype.addDash=function(V,Y){var W=Y?7:0,re=2*W+1;if(this.nextRow+re>this.height)return f.warnOnce("LineAtlas out of space"),null;for(var _e=0,Pe=0;Pe<V.length;Pe++)_e+=V[Pe];if(0!==_e){var q=this.width/_e,oe=this.getDashRanges(V,this.width,q);Y?this.addRoundDash(oe,q,W):this.addRegularDash(oe)}var de={y:(this.nextRow+W+.5)/this.height,height:2*W/this.height,width:_e};return this.nextRow+=re,this.dirty=!0,de},O.prototype.bind=function(V){var Y=V.gl;this.texture?(Y.bindTexture(Y.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Y.texSubImage2D(Y.TEXTURE_2D,0,0,0,this.width,this.height,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))):(this.texture=Y.createTexture(),Y.bindTexture(Y.TEXTURE_2D,this.texture),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_S,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_WRAP_T,Y.REPEAT),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MIN_FILTER,Y.LINEAR),Y.texParameteri(Y.TEXTURE_2D,Y.TEXTURE_MAG_FILTER,Y.LINEAR),Y.texImage2D(Y.TEXTURE_2D,0,Y.ALPHA,this.width,this.height,0,Y.ALPHA,Y.UNSIGNED_BYTE,this.data))};var P=function V(Y,W){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=f.uniqueId();for(var re=this.workerPool.acquire(this.id),_e=0;_e<re.length;_e++){var q=new V.Actor(re[_e],W,this.id);q.name="Worker "+_e,this.actors.push(q)}};function R(V,Y,W){var re=function(_e,Pe){if(_e)return W(_e);if(Pe){var q=f.pick(f.extend(Pe,V),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Pe.vector_layers&&(q.vectorLayers=Pe.vector_layers,q.vectorLayerIds=q.vectorLayers.map(function(oe){return oe.id})),q.tiles=Y.canonicalizeTileset(q,V.url),W(null,q)}};return V.url?f.getJSON(Y.transformRequest(Y.normalizeSourceURL(V.url),f.ResourceType.Source),re):f.browser.frame(function(){return re(null,V)})}P.prototype.broadcast=function(V,Y,W){f.asyncAll(this.actors,function(re,_e){re.send(V,Y,_e)},W=W||function(){})},P.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},P.prototype.remove=function(){this.actors.forEach(function(V){V.remove()}),this.actors=[],this.workerPool.release(this.id)},P.Actor=f.Actor;var F=function(V,Y,W){this.bounds=f.LngLatBounds.convert(this.validateBounds(V)),this.minzoom=Y||0,this.maxzoom=W||24};F.prototype.validateBounds=function(V){return Array.isArray(V)&&4===V.length?[Math.max(-180,V[0]),Math.max(-90,V[1]),Math.min(180,V[2]),Math.min(90,V[3])]:[-180,-90,180,90]},F.prototype.contains=function(V){var Y=Math.pow(2,V.z),W=Math.floor(f.mercatorXfromLng(this.bounds.getWest())*Y),re=Math.floor(f.mercatorYfromLat(this.bounds.getNorth())*Y),_e=Math.ceil(f.mercatorXfromLng(this.bounds.getEast())*Y),Pe=Math.ceil(f.mercatorYfromLat(this.bounds.getSouth())*Y);return V.x>=W&&V.x<_e&&V.y>=re&&V.y<Pe};var B=function(V){function Y(W,re,_e,Pe){if(V.call(this),this.id=W,this.dispatcher=_e,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,f.extend(this,f.pick(re,["url","scheme","tileSize","promoteId"])),this._options=f.extend({type:"vector"},re),this._collectResourceTiming=re.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Pe)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,function(re,_e){W._tileJSONRequest=null,W._loaded=!0,re?W.fire(new f.ErrorEvent(re)):_e&&(f.extend(W,_e),_e.bounds&&(W.tileBounds=new F(_e.bounds,W.minzoom,W.maxzoom)),f.postTurnstileEvent(_e.tiles,W.map._requestManager._customAccessToken),f.postMapLoadEvent(_e.tiles,W.map._getMapId(),W.map._requestManager._skuToken,W.map._requestManager._customAccessToken),W.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},Y.prototype.onAdd=function(W){this.map=W,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return f.extend({},this._options)},Y.prototype.loadTile=function(W,re){var _e=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(_e,f.ResourceType.Tile),uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,tileSize:this.tileSize*W.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function q(oe,de){return delete W.request,W.aborted?re(null):oe&&404!==oe.status?re(oe):(de&&de.resourceTiming&&(W.resourceTiming=de.resourceTiming),this.map._refreshExpiredTiles&&de&&W.setExpiryData(de),W.loadVectorData(de,this.map.painter),f.cacheEntryPossiblyAdded(this.dispatcher),re(null),void(W.reloadCallback&&(this.loadTile(W,W.reloadCallback),W.reloadCallback=null)))}Pe.request.collectResourceTiming=this._collectResourceTiming,W.actor&&"expired"!==W.state?"loading"===W.state?W.reloadCallback=re:W.request=W.actor.send("reloadTile",Pe,q.bind(this)):(W.actor=this.dispatcher.getActor(),W.request=W.actor.send("loadTile",Pe,q.bind(this)))},Y.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request),W.actor&&W.actor.send("abortTile",{uid:W.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(W){W.unloadVectorData(),W.actor&&W.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(f.Evented),J=function(V){function Y(W,re,_e,Pe){V.call(this),this.id=W,this.dispatcher=_e,this.setEventedParent(Pe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=f.extend({type:"raster"},re),f.extend(this,f.pick(re,["url","scheme","tileSize"]))}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,function(re,_e){W._tileJSONRequest=null,W._loaded=!0,re?W.fire(new f.ErrorEvent(re)):_e&&(f.extend(W,_e),_e.bounds&&(W.tileBounds=new F(_e.bounds,W.minzoom,W.maxzoom)),f.postTurnstileEvent(_e.tiles),f.postMapLoadEvent(_e.tiles,W.map._getMapId(),W.map._requestManager._skuToken),W.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(W){this.map=W,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return f.extend({},this._options)},Y.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},Y.prototype.loadTile=function(W,re){var _e=this,Pe=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);W.request=f.getImage(this.map._requestManager.transformRequest(Pe,f.ResourceType.Tile),function(q,oe){if(delete W.request,W.aborted)W.state="unloaded",re(null);else if(q)W.state="errored",re(q);else if(oe){_e.map._refreshExpiredTiles&&W.setExpiryData(oe),delete oe.cacheControl,delete oe.expires;var de=_e.map.painter.context,Me=de.gl;W.texture=_e.map.painter.getTileTexture(oe.width),W.texture?W.texture.update(oe,{useMipmap:!0}):(W.texture=new f.Texture(de,oe,Me.RGBA,{useMipmap:!0}),W.texture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE,Me.LINEAR_MIPMAP_NEAREST),de.extTextureFilterAnisotropic&&Me.texParameterf(Me.TEXTURE_2D,de.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,de.extTextureFilterAnisotropicMax)),W.state="loaded",f.cacheEntryPossiblyAdded(_e.dispatcher),re(null)}})},Y.prototype.abortTile=function(W,re){W.request&&(W.request.cancel(),delete W.request),re()},Y.prototype.unloadTile=function(W,re){W.texture&&this.map.painter.saveTileTexture(W.texture),re()},Y.prototype.hasTransition=function(){return!1},Y}(f.Evented),z=function(V){function Y(W,re,_e,Pe){V.call(this,W,re,_e,Pe),this.type="raster-dem",this.maxzoom=22,this._options=f.extend({type:"raster-dem"},re),this.encoding=re.encoding||"mapbox"}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(W,re){var _e=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function Pe(q,oe){q&&(W.state="errored",re(q)),oe&&(W.dem=oe,W.needsHillshadePrepare=!0,W.state="loaded",re(null))}W.request=f.getImage(this.map._requestManager.transformRequest(_e,f.ResourceType.Tile),function(q,oe){if(delete W.request,W.aborted)W.state="unloaded",re(null);else if(q)W.state="errored",re(q);else if(oe){this.map._refreshExpiredTiles&&W.setExpiryData(oe),delete oe.cacheControl,delete oe.expires;var de=f.window.ImageBitmap&&oe instanceof f.window.ImageBitmap&&f.offscreenCanvasSupported()?oe:f.browser.getImageData(oe,1),Me={uid:W.uid,coord:W.tileID,source:this.id,rawImageData:de,encoding:this.encoding};W.actor&&"expired"!==W.state||(W.actor=this.dispatcher.getActor(),W.actor.send("loadDEMTile",Me,Pe.bind(this)))}}.bind(this)),W.neighboringTiles=this._getNeighboringTiles(W.tileID)},Y.prototype._getNeighboringTiles=function(W){var re=W.canonical,_e=Math.pow(2,re.z),Pe=(re.x-1+_e)%_e,q=0===re.x?W.wrap-1:W.wrap,oe=(re.x+1+_e)%_e,de=re.x+1===_e?W.wrap+1:W.wrap,Me={};return Me[new f.OverscaledTileID(W.overscaledZ,q,re.z,Pe,re.y).key]={backfilled:!1},Me[new f.OverscaledTileID(W.overscaledZ,de,re.z,oe,re.y).key]={backfilled:!1},re.y>0&&(Me[new f.OverscaledTileID(W.overscaledZ,q,re.z,Pe,re.y-1).key]={backfilled:!1},Me[new f.OverscaledTileID(W.overscaledZ,W.wrap,re.z,re.x,re.y-1).key]={backfilled:!1},Me[new f.OverscaledTileID(W.overscaledZ,de,re.z,oe,re.y-1).key]={backfilled:!1}),re.y+1<_e&&(Me[new f.OverscaledTileID(W.overscaledZ,q,re.z,Pe,re.y+1).key]={backfilled:!1},Me[new f.OverscaledTileID(W.overscaledZ,W.wrap,re.z,re.x,re.y+1).key]={backfilled:!1},Me[new f.OverscaledTileID(W.overscaledZ,de,re.z,oe,re.y+1).key]={backfilled:!1}),Me},Y.prototype.unloadTile=function(W){W.demTexture&&this.map.painter.saveTileTexture(W.demTexture),W.fbo&&(W.fbo.destroy(),delete W.fbo),W.dem&&delete W.dem,delete W.neighboringTiles,W.state="unloaded",W.actor&&W.actor.send("removeDEMTile",{uid:W.uid,source:this.id})},Y}(J),$=function(V){function Y(W,re,_e,Pe){V.call(this),this.id=W,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=_e.getActor(),this.setEventedParent(Pe),this._data=re.data,this._options=f.extend({},re),this._collectResourceTiming=re.collectResourceTiming,this._resourceTiming=[],void 0!==re.maxzoom&&(this.maxzoom=re.maxzoom),re.type&&(this.type=re.type),re.attribution&&(this.attribution=re.attribution),this.promoteId=re.promoteId;var q=f.EXTENT/this.tileSize;this.workerOptions=f.extend({source:this.id,cluster:re.cluster||!1,geojsonVtOptions:{buffer:(void 0!==re.buffer?re.buffer:128)*q,tolerance:(void 0!==re.tolerance?re.tolerance:.375)*q,extent:f.EXTENT,maxZoom:this.maxzoom,lineMetrics:re.lineMetrics||!1,generateId:re.generateId||!1},superclusterOptions:{maxZoom:void 0!==re.clusterMaxZoom?Math.min(re.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:f.EXTENT,radius:(re.clusterRadius||50)*q,log:!1,generateId:re.generateId||!1},clusterProperties:re.clusterProperties},re.workerOptions)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(re){if(re)W.fire(new f.ErrorEvent(re));else{var _e={dataType:"source",sourceDataType:"metadata"};W._collectResourceTiming&&W._resourceTiming&&W._resourceTiming.length>0&&(_e.resourceTiming=W._resourceTiming,W._resourceTiming=[]),W.fire(new f.Event("data",_e))}})},Y.prototype.onAdd=function(W){this.map=W,this.load()},Y.prototype.setData=function(W){var re=this;return this._data=W,this.fire(new f.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(_e){if(_e)re.fire(new f.ErrorEvent(_e));else{var Pe={dataType:"source",sourceDataType:"content"};re._collectResourceTiming&&re._resourceTiming&&re._resourceTiming.length>0&&(Pe.resourceTiming=re._resourceTiming,re._resourceTiming=[]),re.fire(new f.Event("data",Pe))}}),this},Y.prototype.getClusterExpansionZoom=function(W,re){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:W,source:this.id},re),this},Y.prototype.getClusterChildren=function(W,re){return this.actor.send("geojson.getClusterChildren",{clusterId:W,source:this.id},re),this},Y.prototype.getClusterLeaves=function(W,re,_e,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:W,limit:re,offset:_e},Pe),this},Y.prototype._updateWorkerData=function(W){var re=this;this._loaded=!1;var _e=f.extend({},this.workerOptions),Pe=this._data;"string"==typeof Pe?(_e.request=this.map._requestManager.transformRequest(f.browser.resolveURL(Pe),f.ResourceType.Source),_e.request.collectResourceTiming=this._collectResourceTiming):_e.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",_e,function(q,oe){re._removed||oe&&oe.abandoned||(re._loaded=!0,oe&&oe.resourceTiming&&oe.resourceTiming[re.id]&&(re._resourceTiming=oe.resourceTiming[re.id].slice(0)),re.actor.send(re.type+".coalesce",{source:_e.source},null),W(q))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(W,re){var _e=this,Pe=W.actor?"reloadTile":"loadTile";W.actor=this.actor,W.request=this.actor.send(Pe,{type:this.type,uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:f.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(oe,de){return delete W.request,W.unloadVectorData(),W.aborted?re(null):oe?re(oe):(W.loadVectorData(de,_e.map.painter,"reloadTile"===Pe),re(null))})},Y.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request),W.aborted=!0},Y.prototype.unloadTile=function(W){W.unloadVectorData(),this.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return f.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(f.Evented),G=f.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),H=function(V){function Y(W,re,_e,Pe){V.call(this),this.id=W,this.dispatcher=_e,this.coordinates=re.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Pe),this.options=re}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(W,re){var _e=this;this._loaded=!1,this.fire(new f.Event("dataloading",{dataType:"source"})),this.url=this.options.url,f.getImage(this.map._requestManager.transformRequest(this.url,f.ResourceType.Image),function(Pe,q){_e._loaded=!0,Pe?_e.fire(new f.ErrorEvent(Pe)):q&&(_e.image=q,W&&(_e.coordinates=W),re&&re(),_e._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(W){var re=this;return this.image&&W.url?(this.options.url=W.url,this.load(W.coordinates,function(){re.texture=null}),this):this},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(W){this.map=W,this.load()},Y.prototype.setCoordinates=function(W){var re=this;this.coordinates=W;var _e=W.map(f.MercatorCoordinate.fromLngLat);this.tileID=function(q){for(var oe=1/0,de=1/0,Me=-1/0,Se=-1/0,ze=0,Ye=q;ze<Ye.length;ze+=1){var Xe=Ye[ze];oe=Math.min(oe,Xe.x),de=Math.min(de,Xe.y),Me=Math.max(Me,Xe.x),Se=Math.max(Se,Xe.y)}var ft=Math.max(Me-oe,Se-de),bt=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),At=Math.pow(2,bt);return new f.CanonicalTileID(bt,Math.floor((oe+Me)/2*At),Math.floor((de+Se)/2*At))}(_e),this.minzoom=this.maxzoom=this.tileID.z;var Pe=_e.map(function(q){return re.tileID.getTilePoint(q)._round()});return this._boundsArray=new f.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,f.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,f.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,f.EXTENT,f.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new f.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var W=this.map.painter.context,re=W.gl;for(var _e in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new f.Texture(W,this.image,re.RGBA),this.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE)),this.tiles){var Pe=this.tiles[_e];"loaded"!==Pe.state&&(Pe.state="loaded",Pe.texture=this.texture)}}},Y.prototype.loadTile=function(W,re){this.tileID&&this.tileID.equals(W.tileID.canonical)?(this.tiles[String(W.tileID.wrap)]=W,W.buckets={},re(null)):(W.state="errored",re(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(f.Evented),X=function(V){function Y(W,re,_e,Pe){V.call(this,W,re,_e,Pe),this.roundZoom=!0,this.type="video",this.options=re}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){var W=this;this._loaded=!1;var re=this.options;this.urls=[];for(var _e=0,Pe=re.urls;_e<Pe.length;_e+=1)this.urls.push(this.map._requestManager.transformRequest(Pe[_e],f.ResourceType.Source).url);f.getVideo(this.urls,function(oe,de){W._loaded=!0,oe?W.fire(new f.ErrorEvent(oe)):de&&(W.video=de,W.video.loop=!0,W.video.addEventListener("playing",function(){W.map.triggerRepaint()}),W.map&&W.video.play(),W._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(W){if(this.video){var re=this.video.seekable;W<re.start(0)||W>re.end(0)?this.fire(new f.ErrorEvent(new f.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+re.start(0)+" and "+re.end(0)+"-second mark."))):this.video.currentTime=W}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(W){this.map||(this.map=W,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var W=this.map.painter.context,re=W.gl;for(var _e in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE),re.texSubImage2D(re.TEXTURE_2D,0,0,0,re.RGBA,re.UNSIGNED_BYTE,this.video)):(this.texture=new f.Texture(W,this.video,re.RGBA),this.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE)),this.tiles){var Pe=this.tiles[_e];"loaded"!==Pe.state&&(Pe.state="loaded",Pe.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(H),K=function(V){function Y(W,re,_e,Pe){V.call(this,W,re,_e,Pe),re.coordinates?Array.isArray(re.coordinates)&&4===re.coordinates.length&&!re.coordinates.some(function(q){return!Array.isArray(q)||2!==q.length||q.some(function(oe){return"number"!=typeof oe})})||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+W,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+W,null,'missing required property "coordinates"'))),re.animate&&"boolean"!=typeof re.animate&&this.fire(new f.ErrorEvent(new f.ValidationError("sources."+W,null,'optional "animate" property must be a boolean value'))),re.canvas?"string"==typeof re.canvas||re.canvas instanceof f.window.HTMLCanvasElement||this.fire(new f.ErrorEvent(new f.ValidationError("sources."+W,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new f.ErrorEvent(new f.ValidationError("sources."+W,null,'missing required property "canvas"'))),this.options=re,this.animate=void 0===re.animate||re.animate}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof f.window.HTMLCanvasElement?this.options.canvas:f.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new f.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(W){this.map=W,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var W=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,W=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,W=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var re=this.map.painter.context,_e=re.gl;for(var Pe in this.boundsBuffer||(this.boundsBuffer=re.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=f.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(W||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new f.Texture(re,this.canvas,_e.RGBA,{premultiply:!0}),this.tiles){var q=this.tiles[Pe];"loaded"!==q.state&&(q.state="loaded",q.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var W=0,re=[this.canvas.width,this.canvas.height];W<re.length;W+=1){var _e=re[W];if(isNaN(_e)||_e<=0)return!0}return!1},Y}(H),ue={vector:B,raster:J,"raster-dem":z,geojson:$,video:X,image:H,canvas:K};function ae(V,Y){var W=f.identity([]);return f.translate(W,W,[1,1,0]),f.scale(W,W,[.5*V.width,.5*V.height,1]),f.multiply(W,W,V.calculatePosMatrix(Y.toUnwrapped()))}function ne(V,Y,W,re,_e,Pe){var q=function(rt,ft,bt){if(rt)for(var At=0,Ut=rt;At<Ut.length;At+=1){var qt=ft[Ut[At]];if(qt&&qt.source===bt&&"fill-extrusion"===qt.type)return!0}else for(var jt in ft){var Kt=ft[jt];if(Kt.source===bt&&"fill-extrusion"===Kt.type)return!0}return!1}(_e&&_e.layers,Y,V.id),oe=Pe.maxPitchScaleFactor(),de=V.tilesIn(re,oe,q);de.sort(Q);for(var Me=[],Se=0,ze=de;Se<ze.length;Se+=1){var Ye=ze[Se];Me.push({wrappedTileID:Ye.tileID.wrapped().key,queryResults:Ye.tile.queryRenderedFeatures(Y,W,V._state,Ye.queryGeometry,Ye.cameraQueryGeometry,Ye.scale,_e,Pe,oe,ae(V.transform,Ye.tileID))})}var Xe=function(rt){for(var ft={},bt={},At=0,Ut=rt;At<Ut.length;At+=1){var qt=Ut[At],jt=qt.queryResults,Kt=qt.wrappedTileID,Vt=bt[Kt]=bt[Kt]||{};for(var gn in jt)for(var ln=jt[gn],nn=Vt[gn]=Vt[gn]||{},On=ft[gn]=ft[gn]||[],Pn=0,tr=ln;Pn<tr.length;Pn+=1){var Jn=tr[Pn];nn[Jn.featureIndex]||(nn[Jn.featureIndex]=!0,On.push(Jn))}}return ft}(Me);for(var tt in Xe)Xe[tt].forEach(function(rt){var ft=rt.feature,bt=V.getFeatureState(ft.layer["source-layer"],ft.id);ft.source=ft.layer.source,ft.layer["source-layer"]&&(ft.sourceLayer=ft.layer["source-layer"]),ft.state=bt});return Xe}function Q(V,Y){var W=V.tileID,re=Y.tileID;return W.overscaledZ-re.overscaledZ||W.canonical.y-re.canonical.y||W.wrap-re.wrap||W.canonical.x-re.canonical.x}var ie=function(V,Y){this.max=V,this.onRemove=Y,this.reset()};ie.prototype.reset=function(){for(var V in this.data)for(var Y=0,W=this.data[V];Y<W.length;Y+=1){var re=W[Y];re.timeout&&clearTimeout(re.timeout),this.onRemove(re.value)}return this.data={},this.order=[],this},ie.prototype.add=function(V,Y,W){var re=this,_e=V.wrapped().key;void 0===this.data[_e]&&(this.data[_e]=[]);var Pe={value:Y,timeout:void 0};if(void 0!==W&&(Pe.timeout=setTimeout(function(){re.remove(V,Pe)},W)),this.data[_e].push(Pe),this.order.push(_e),this.order.length>this.max){var q=this._getAndRemoveByKey(this.order[0]);q&&this.onRemove(q)}return this},ie.prototype.has=function(V){return V.wrapped().key in this.data},ie.prototype.getAndRemove=function(V){return this.has(V)?this._getAndRemoveByKey(V.wrapped().key):null},ie.prototype._getAndRemoveByKey=function(V){var Y=this.data[V].shift();return Y.timeout&&clearTimeout(Y.timeout),0===this.data[V].length&&delete this.data[V],this.order.splice(this.order.indexOf(V),1),Y.value},ie.prototype.getByKey=function(V){var Y=this.data[V];return Y?Y[0].value:null},ie.prototype.get=function(V){return this.has(V)?this.data[V.wrapped().key][0].value:null},ie.prototype.remove=function(V,Y){if(!this.has(V))return this;var W=V.wrapped().key,re=void 0===Y?0:this.data[W].indexOf(Y),_e=this.data[W][re];return this.data[W].splice(re,1),_e.timeout&&clearTimeout(_e.timeout),0===this.data[W].length&&delete this.data[W],this.onRemove(_e.value),this.order.splice(this.order.indexOf(W),1),this},ie.prototype.setMaxSize=function(V){for(this.max=V;this.order.length>this.max;){var Y=this._getAndRemoveByKey(this.order[0]);Y&&this.onRemove(Y)}return this},ie.prototype.filter=function(V){var Y=[];for(var W in this.data)for(var re=0,_e=this.data[W];re<_e.length;re+=1){var Pe=_e[re];V(Pe.value)||Y.push(Pe)}for(var q=0,oe=Y;q<oe.length;q+=1){var de=oe[q];this.remove(de.value.tileID,de)}};var le=function(V,Y,W){this.context=V;var re=V.gl;this.buffer=re.createBuffer(),this.dynamicDraw=!!W,this.context.unbindVAO(),V.bindElementBuffer.set(this.buffer),re.bufferData(re.ELEMENT_ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?re.DYNAMIC_DRAW:re.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};le.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},le.prototype.updateData=function(V){var Y=this.context.gl;this.context.unbindVAO(),this.bind(),Y.bufferSubData(Y.ELEMENT_ARRAY_BUFFER,0,V.arrayBuffer)},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var fe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},he=function(V,Y,W,re){this.length=Y.length,this.attributes=W,this.itemSize=Y.bytesPerElement,this.dynamicDraw=re,this.context=V;var _e=V.gl;this.buffer=_e.createBuffer(),V.bindVertexBuffer.set(this.buffer),_e.bufferData(_e.ARRAY_BUFFER,Y.arrayBuffer,this.dynamicDraw?_e.DYNAMIC_DRAW:_e.STATIC_DRAW),this.dynamicDraw||delete Y.arrayBuffer};he.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},he.prototype.updateData=function(V){var Y=this.context.gl;this.bind(),Y.bufferSubData(Y.ARRAY_BUFFER,0,V.arrayBuffer)},he.prototype.enableAttributes=function(V,Y){for(var W=0;W<this.attributes.length;W++){var _e=Y.attributes[this.attributes[W].name];void 0!==_e&&V.enableVertexAttribArray(_e)}},he.prototype.setVertexAttribPointers=function(V,Y,W){for(var re=0;re<this.attributes.length;re++){var _e=this.attributes[re],Pe=Y.attributes[_e.name];void 0!==Pe&&V.vertexAttribPointer(Pe,_e.components,V[fe[_e.type]],!1,this.itemSize,_e.offset+this.itemSize*(W||0))}},he.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var pe=function(V){this.gl=V.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(V){},pe.prototype.getDefault=function(){return this.default},pe.prototype.setDefault=function(){this.set(this.default)};var xe=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return f.Color.transparent},Y.prototype.set=function(W){var re=this.current;(W.r!==re.r||W.g!==re.g||W.b!==re.b||W.a!==re.a||this.dirty)&&(this.gl.clearColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},Y}(pe),Ee=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearDepth(W),this.current=W,this.dirty=!1)},Y}(pe),Re=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearStencil(W),this.current=W,this.dirty=!1)},Y}(pe),ke=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(W){var re=this.current;(W[0]!==re[0]||W[1]!==re[1]||W[2]!==re[2]||W[3]!==re[3]||this.dirty)&&(this.gl.colorMask(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},Y}(pe),Te=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthMask(W),this.current=W,this.dirty=!1)},Y}(pe),we=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.stencilMask(W),this.current=W,this.dirty=!1)},Y}(pe),je=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(W){var re=this.current;(W.func!==re.func||W.ref!==re.ref||W.mask!==re.mask||this.dirty)&&(this.gl.stencilFunc(W.func,W.ref,W.mask),this.current=W,this.dirty=!1)},Y}(pe),Ce=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[W.KEEP,W.KEEP,W.KEEP]},Y.prototype.set=function(W){var re=this.current;(W[0]!==re[0]||W[1]!==re[1]||W[2]!==re[2]||this.dirty)&&(this.gl.stencilOp(W[0],W[1],W[2]),this.current=W,this.dirty=!1)},Y}(pe),Ie=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;W?re.enable(re.STENCIL_TEST):re.disable(re.STENCIL_TEST),this.current=W,this.dirty=!1}},Y}(pe),ge=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(W){var re=this.current;(W[0]!==re[0]||W[1]!==re[1]||this.dirty)&&(this.gl.depthRange(W[0],W[1]),this.current=W,this.dirty=!1)},Y}(pe),me=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;W?re.enable(re.DEPTH_TEST):re.disable(re.DEPTH_TEST),this.current=W,this.dirty=!1}},Y}(pe),ce=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthFunc(W),this.current=W,this.dirty=!1)},Y}(pe),Ae=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;W?re.enable(re.BLEND):re.disable(re.BLEND),this.current=W,this.dirty=!1}},Y}(pe),Ne=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[W.ONE,W.ZERO]},Y.prototype.set=function(W){var re=this.current;(W[0]!==re[0]||W[1]!==re[1]||this.dirty)&&(this.gl.blendFunc(W[0],W[1]),this.current=W,this.dirty=!1)},Y}(pe),De=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return f.Color.transparent},Y.prototype.set=function(W){var re=this.current;(W.r!==re.r||W.g!==re.g||W.b!==re.b||W.a!==re.a||this.dirty)&&(this.gl.blendColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},Y}(pe),qe=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.blendEquation(W),this.current=W,this.dirty=!1)},Y}(pe),Ke=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;W?re.enable(re.CULL_FACE):re.disable(re.CULL_FACE),this.current=W,this.dirty=!1}},Y}(pe),be=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.cullFace(W),this.current=W,this.dirty=!1)},Y}(pe),Oe=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.frontFace(W),this.current=W,this.dirty=!1)},Y}(pe),Le=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.useProgram(W),this.current=W,this.dirty=!1)},Y}(pe),Ue=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.activeTexture(W),this.current=W,this.dirty=!1)},Y}(pe),Ze=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){var W=this.gl;return[0,0,W.drawingBufferWidth,W.drawingBufferHeight]},Y.prototype.set=function(W){var re=this.current;(W[0]!==re[0]||W[1]!==re[1]||W[2]!==re[2]||W[3]!==re[3]||this.dirty)&&(this.gl.viewport(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},Y}(pe),We=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.bindFramebuffer(re.FRAMEBUFFER,W),this.current=W,this.dirty=!1}},Y}(pe),et=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.bindRenderbuffer(re.RENDERBUFFER,W),this.current=W,this.dirty=!1}},Y}(pe),nt=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.bindTexture(re.TEXTURE_2D,W),this.current=W,this.dirty=!1}},Y}(pe),ct=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.bindBuffer(re.ARRAY_BUFFER,W),this.current=W,this.dirty=!1}},Y}(pe),yt=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){var re=this.gl;re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,W),this.current=W,this.dirty=!1},Y}(pe),ut=function(V){function Y(W){V.call(this,W),this.vao=W.extVertexArrayObject}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(W){this.vao&&(W!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(W),this.current=W,this.dirty=!1)},Y}(pe),Ct=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.pixelStorei(re.UNPACK_ALIGNMENT,W),this.current=W,this.dirty=!1}},Y}(pe),Dt=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W),this.current=W,this.dirty=!1}},Y}(pe),vt=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(W){if(W!==this.current||this.dirty){var re=this.gl;re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,W),this.current=W,this.dirty=!1}},Y}(pe),mt=function(V){function Y(W,re){V.call(this,W),this.context=W,this.parent=re}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getDefault=function(){return null},Y}(pe),Lt=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var re=this.gl;re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,W,0),this.current=W,this.dirty=!1}},Y}(mt),Ft=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var re=this.gl;re.framebufferRenderbuffer(re.FRAMEBUFFER,re.DEPTH_ATTACHMENT,re.RENDERBUFFER,W),this.current=W,this.dirty=!1}},Y}(mt),Rt=function(V,Y,W,re){this.context=V,this.width=Y,this.height=W;var Pe=this.framebuffer=V.gl.createFramebuffer();this.colorAttachment=new Lt(V,Pe),re&&(this.depthAttachment=new Ft(V,Pe))};Rt.prototype.destroy=function(){var V=this.context.gl,Y=this.colorAttachment.get();if(Y&&V.deleteTexture(Y),this.depthAttachment){var W=this.depthAttachment.get();W&&V.deleteRenderbuffer(W)}V.deleteFramebuffer(this.framebuffer)};var Wt=function(V,Y,W){this.func=V,this.mask=Y,this.range=W};Wt.ReadOnly=!1,Wt.ReadWrite=!0,Wt.disabled=new Wt(519,Wt.ReadOnly,[0,1]);var it=function(V,Y,W,re,_e,Pe){this.test=V,this.ref=Y,this.mask=W,this.fail=re,this.depthFail=_e,this.pass=Pe};it.disabled=new it({func:519,mask:0},0,0,7680,7680,7680);var st=function(V,Y,W){this.blendFunction=V,this.blendColor=Y,this.mask=W};st.disabled=new st(st.Replace=[1,0],f.Color.transparent,[!1,!1,!1,!1]),st.unblended=new st(st.Replace,f.Color.transparent,[!0,!0,!0,!0]),st.alphaBlended=new st([1,771],f.Color.transparent,[!0,!0,!0,!0]);var Je=function(V,Y,W){this.enable=V,this.mode=Y,this.frontFace=W};Je.disabled=new Je(!1,1029,2305),Je.backCCW=new Je(!0,1029,2305);var ot=function(V){this.gl=V,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new xe(this),this.clearDepth=new Ee(this),this.clearStencil=new Re(this),this.colorMask=new ke(this),this.depthMask=new Te(this),this.stencilMask=new we(this),this.stencilFunc=new je(this),this.stencilOp=new Ce(this),this.stencilTest=new Ie(this),this.depthRange=new ge(this),this.depthTest=new me(this),this.depthFunc=new ce(this),this.blend=new Ae(this),this.blendFunc=new Ne(this),this.blendColor=new De(this),this.blendEquation=new qe(this),this.cullFace=new Ke(this),this.cullFaceSide=new be(this),this.frontFace=new Oe(this),this.program=new Le(this),this.activeTexture=new Ue(this),this.viewport=new Ze(this),this.bindFramebuffer=new We(this),this.bindRenderbuffer=new et(this),this.bindTexture=new nt(this),this.bindVertexBuffer=new ct(this),this.bindElementBuffer=new yt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ut(this),this.pixelStoreUnpack=new Ct(this),this.pixelStoreUnpackPremultiplyAlpha=new Dt(this),this.pixelStoreUnpackFlipY=new vt(this),this.extTextureFilterAnisotropic=V.getExtension("EXT_texture_filter_anisotropic")||V.getExtension("MOZ_EXT_texture_filter_anisotropic")||V.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=V.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=V.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(V.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=V.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=V.getExtension("EXT_disjoint_timer_query")};ot.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ot.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ot.prototype.createIndexBuffer=function(V,Y){return new le(this,V,Y)},ot.prototype.createVertexBuffer=function(V,Y,W){return new he(this,V,Y,W)},ot.prototype.createRenderbuffer=function(V,Y,W){var re=this.gl,_e=re.createRenderbuffer();return this.bindRenderbuffer.set(_e),re.renderbufferStorage(re.RENDERBUFFER,V,Y,W),this.bindRenderbuffer.set(null),_e},ot.prototype.createFramebuffer=function(V,Y,W){return new Rt(this,V,Y,W)},ot.prototype.clear=function(V){var Y=V.color,W=V.depth,re=this.gl,_e=0;Y&&(_e|=re.COLOR_BUFFER_BIT,this.clearColor.set(Y),this.colorMask.set([!0,!0,!0,!0])),void 0!==W&&(_e|=re.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(W),this.depthMask.set(!0)),re.clear(_e)},ot.prototype.setCullFace=function(V){!1===V.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(V.mode),this.frontFace.set(V.frontFace))},ot.prototype.setDepthMode=function(V){V.func!==this.gl.ALWAYS||V.mask?(this.depthTest.set(!0),this.depthFunc.set(V.func),this.depthMask.set(V.mask),this.depthRange.set(V.range)):this.depthTest.set(!1)},ot.prototype.setStencilMode=function(V){V.test.func!==this.gl.ALWAYS||V.mask?(this.stencilTest.set(!0),this.stencilMask.set(V.mask),this.stencilOp.set([V.fail,V.depthFail,V.pass]),this.stencilFunc.set({func:V.test.func,ref:V.ref,mask:V.test.mask})):this.stencilTest.set(!1)},ot.prototype.setColorMode=function(V){f.deepEqual(V.blendFunction,st.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(V.blendFunction),this.blendColor.set(V.blendColor)),this.colorMask.set(V.mask)},ot.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var pt=function(V){function Y(W,re,_e){var Pe=this;V.call(this),this.id=W,this.dispatcher=_e,this.on("data",function(q){"source"===q.dataType&&"metadata"===q.sourceDataType&&(Pe._sourceLoaded=!0),Pe._sourceLoaded&&!Pe._paused&&"source"===q.dataType&&"content"===q.sourceDataType&&(Pe.reload(),Pe.transform&&Pe.update(Pe.transform))}),this.on("error",function(){Pe._sourceErrored=!0}),this._source=function(q,oe,de,Me){var Se=new ue[oe.type](q,oe,de,Me);if(Se.id!==q)throw new Error("Expected Source id to be "+q+" instead of "+Se.id);return f.bindAll(["load","abort","unload","serialize","prepare"],Se),Se}(W,re,_e,this),this._tiles={},this._cache=new ie(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new f.SourceFeatureState}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.onAdd=function(W){this.map=W,this._maxTileCacheSize=W?W._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(W)},Y.prototype.onRemove=function(W){this._source&&this._source.onRemove&&this._source.onRemove(W)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var W in this._tiles){var re=this._tiles[W];if("loaded"!==re.state&&"errored"!==re.state)return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var W=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,W&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(W,re){return this._source.loadTile(W,re)},Y.prototype._unloadTile=function(W){if(this._source.unloadTile)return this._source.unloadTile(W,function(){})},Y.prototype._abortTile=function(W){if(this._source.abortTile)return this._source.abortTile(W,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(W){for(var re in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var _e=this._tiles[re];_e.upload(W),_e.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return f.values(this._tiles).map(function(W){return W.tileID}).sort(xt).map(function(W){return W.key})},Y.prototype.getRenderableIds=function(W){var re=this,_e=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,W)&&_e.push(this._tiles[Pe]);return W?_e.sort(function(q,oe){var de=q.tileID,Me=oe.tileID,Se=new f.Point(de.canonical.x,de.canonical.y)._rotate(re.transform.angle),ze=new f.Point(Me.canonical.x,Me.canonical.y)._rotate(re.transform.angle);return de.overscaledZ-Me.overscaledZ||ze.y-Se.y||ze.x-Se.x}).map(function(q){return q.tileID.key}):_e.map(function(q){return q.tileID}).sort(xt).map(function(q){return q.key})},Y.prototype.hasRenderableParent=function(W){var re=this.findLoadedParent(W,0);return!!re&&this._isIdRenderable(re.tileID.key)},Y.prototype._isIdRenderable=function(W,re){return this._tiles[W]&&this._tiles[W].hasData()&&!this._coveredTiles[W]&&(re||!this._tiles[W].holdingForFade())},Y.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var W in this._cache.reset(),this._tiles)"errored"!==this._tiles[W].state&&this._reloadTile(W,"reloading")},Y.prototype._reloadTile=function(W,re){var _e=this._tiles[W];_e&&("loading"!==_e.state&&(_e.state=re),this._loadTile(_e,this._tileLoaded.bind(this,_e,W,re)))},Y.prototype._tileLoaded=function(W,re,_e,Pe){if(Pe)return W.state="errored",void(404!==Pe.status?this._source.fire(new f.ErrorEvent(Pe,{tile:W})):this.update(this.transform));W.timeAdded=f.browser.now(),"expired"===_e&&(W.refreshedUponExpiration=!0),this._setTileReloadTimer(re,W),"raster-dem"===this.getSource().type&&W.dem&&this._backfillDEM(W),this._state.initializeTileState(W,this.map?this.map.painter:null),this._source.fire(new f.Event("data",{dataType:"source",tile:W,coord:W.tileID}))},Y.prototype._backfillDEM=function(W){for(var re=this.getRenderableIds(),_e=0;_e<re.length;_e++){var Pe=re[_e];if(W.neighboringTiles&&W.neighboringTiles[Pe]){var q=this.getTileByID(Pe);oe(W,q),oe(q,W)}}function oe(de,Me){de.needsHillshadePrepare=!0;var Se=Me.tileID.canonical.x-de.tileID.canonical.x,ze=Me.tileID.canonical.y-de.tileID.canonical.y,Ye=Math.pow(2,de.tileID.canonical.z),Xe=Me.tileID.key;0===Se&&0===ze||Math.abs(ze)>1||(Math.abs(Se)>1&&(1===Math.abs(Se+Ye)?Se+=Ye:1===Math.abs(Se-Ye)&&(Se-=Ye)),Me.dem&&de.dem&&(de.dem.backfillBorder(Me.dem,Se,ze),de.neighboringTiles&&de.neighboringTiles[Xe]&&(de.neighboringTiles[Xe].backfilled=!0)))}},Y.prototype.getTile=function(W){return this.getTileByID(W.key)},Y.prototype.getTileByID=function(W){return this._tiles[W]},Y.prototype._retainLoadedChildren=function(W,re,_e,Pe){for(var q in this._tiles){var oe=this._tiles[q];if(!(Pe[q]||!oe.hasData()||oe.tileID.overscaledZ<=re||oe.tileID.overscaledZ>_e)){for(var de=oe.tileID;oe&&oe.tileID.overscaledZ>re+1;){var Me=oe.tileID.scaledTo(oe.tileID.overscaledZ-1);(oe=this._tiles[Me.key])&&oe.hasData()&&(de=Me)}for(var Se=de;Se.overscaledZ>re;)if(W[(Se=Se.scaledTo(Se.overscaledZ-1)).key]){Pe[de.key]=de;break}}}},Y.prototype.findLoadedParent=function(W,re){if(W.key in this._loadedParentTiles){var _e=this._loadedParentTiles[W.key];return _e&&_e.tileID.overscaledZ>=re?_e:null}for(var Pe=W.overscaledZ-1;Pe>=re;Pe--){var q=W.scaledTo(Pe),oe=this._getLoadedTile(q);if(oe)return oe}},Y.prototype._getLoadedTile=function(W){var re=this._tiles[W.key];return re&&re.hasData()?re:this._cache.getByKey(W.wrapped().key)},Y.prototype.updateCacheSize=function(W){var re=(Math.ceil(W.width/this._source.tileSize)+1)*(Math.ceil(W.height/this._source.tileSize)+1),_e=Math.floor(5*re),Pe="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,_e):_e;this._cache.setMaxSize(Pe)},Y.prototype.handleWrapJump=function(W){var _e=Math.round((W-(void 0===this._prevLng?W:this._prevLng))/360);if(this._prevLng=W,_e){var Pe={};for(var q in this._tiles){var oe=this._tiles[q];oe.tileID=oe.tileID.unwrapTo(oe.tileID.wrap+_e),Pe[oe.tileID.key]=oe}for(var de in this._tiles=Pe,this._timers)clearTimeout(this._timers[de]),delete this._timers[de];for(var Me in this._tiles)this._setTileReloadTimer(Me,this._tiles[Me])}},Y.prototype.update=function(W){var re=this;if(this.transform=W,this._sourceLoaded&&!this._paused){var _e;this.updateCacheSize(W),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?_e=W.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Vt){return new f.OverscaledTileID(Vt.canonical.z,Vt.wrap,Vt.canonical.z,Vt.canonical.x,Vt.canonical.y)}):(_e=W.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(_e=_e.filter(function(Vt){return re._source.hasTile(Vt)}))):_e=[];var Pe=W.coveringZoomLevel(this._source),q=Math.max(Pe-Y.maxOverzooming,this._source.minzoom),oe=Math.max(Pe+Y.maxUnderzooming,this._source.minzoom),de=this._updateRetainedTiles(_e,Pe);if(He(this._source.type)){for(var Me={},Se={},ze=0,Ye=Object.keys(de);ze<Ye.length;ze+=1){var Xe=Ye[ze],tt=de[Xe],rt=this._tiles[Xe];if(rt&&!(rt.fadeEndTime&&rt.fadeEndTime<=f.browser.now())){var ft=this.findLoadedParent(tt,q);ft&&(this._addTile(ft.tileID),Me[ft.tileID.key]=ft.tileID),Se[Xe]=tt}}for(var bt in this._retainLoadedChildren(Se,Pe,oe,de),Me)de[bt]||(this._coveredTiles[bt]=!0,de[bt]=Me[bt])}for(var At in de)this._tiles[At].clearFadeHold();for(var Ut=0,qt=f.keysDifference(this._tiles,de);Ut<qt.length;Ut+=1){var jt=qt[Ut],Kt=this._tiles[jt];Kt.hasSymbolBuckets&&!Kt.holdingForFade()?Kt.setHoldDuration(this.map._fadeDuration):Kt.hasSymbolBuckets&&!Kt.symbolFadeFinished()||this._removeTile(jt)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var W in this._tiles)this._tiles[W].holdingForFade()&&this._removeTile(W)},Y.prototype._updateRetainedTiles=function(W,re){for(var _e={},Pe={},q=Math.max(re-Y.maxOverzooming,this._source.minzoom),oe=Math.max(re+Y.maxUnderzooming,this._source.minzoom),de={},Me=0,Se=W;Me<Se.length;Me+=1){var ze=Se[Me],Ye=this._addTile(ze);_e[ze.key]=ze,Ye.hasData()||re<this._source.maxzoom&&(de[ze.key]=ze)}this._retainLoadedChildren(de,re,oe,_e);for(var Xe=0,tt=W;Xe<tt.length;Xe+=1){var rt=tt[Xe],ft=this._tiles[rt.key];if(!ft.hasData()){if(re+1>this._source.maxzoom){var bt=rt.children(this._source.maxzoom)[0],At=this.getTile(bt);if(At&&At.hasData()){_e[bt.key]=bt;continue}}else{var Ut=rt.children(this._source.maxzoom);if(_e[Ut[0].key]&&_e[Ut[1].key]&&_e[Ut[2].key]&&_e[Ut[3].key])continue}for(var qt=ft.wasRequested(),jt=rt.overscaledZ-1;jt>=q;--jt){var Kt=rt.scaledTo(jt);if(Pe[Kt.key]||(Pe[Kt.key]=!0,!(ft=this.getTile(Kt))&&qt&&(ft=this._addTile(Kt)),ft&&(_e[Kt.key]=Kt,qt=ft.wasRequested(),ft.hasData())))break}}}return _e},Y.prototype._updateLoadedParentTileCache=function(){for(var W in this._loadedParentTiles={},this._tiles){for(var re=[],_e=void 0,Pe=this._tiles[W].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){_e=this._loadedParentTiles[Pe.key];break}re.push(Pe.key);var q=Pe.scaledTo(Pe.overscaledZ-1);if(_e=this._getLoadedTile(q))break;Pe=q}for(var oe=0,de=re;oe<de.length;oe+=1)this._loadedParentTiles[de[oe]]=_e}},Y.prototype._addTile=function(W){var re=this._tiles[W.key];if(re)return re;(re=this._cache.getAndRemove(W))&&(this._setTileReloadTimer(W.key,re),re.tileID=W,this._state.initializeTileState(re,this.map?this.map.painter:null),this._cacheTimers[W.key]&&(clearTimeout(this._cacheTimers[W.key]),delete this._cacheTimers[W.key],this._setTileReloadTimer(W.key,re)));var _e=!!re;return _e||(re=new f.Tile(W,this._source.tileSize*W.overscaleFactor()),this._loadTile(re,this._tileLoaded.bind(this,re,W.key,re.state))),re?(re.uses++,this._tiles[W.key]=re,_e||this._source.fire(new f.Event("dataloading",{tile:re,coord:re.tileID,dataType:"source"})),re):null},Y.prototype._setTileReloadTimer=function(W,re){var _e=this;W in this._timers&&(clearTimeout(this._timers[W]),delete this._timers[W]);var Pe=re.getExpiryTimeout();Pe&&(this._timers[W]=setTimeout(function(){_e._reloadTile(W,"expired"),delete _e._timers[W]},Pe))},Y.prototype._removeTile=function(W){var re=this._tiles[W];re&&(re.uses--,delete this._tiles[W],this._timers[W]&&(clearTimeout(this._timers[W]),delete this._timers[W]),re.uses>0||(re.hasData()&&"reloading"!==re.state?this._cache.add(re.tileID,re,re.getExpiryTimeout()):(re.aborted=!0,this._abortTile(re),this._unloadTile(re))))},Y.prototype.clearTiles=function(){for(var W in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(W);this._cache.reset()},Y.prototype.tilesIn=function(W,re,_e){var Pe=this,q=[],oe=this.transform;if(!oe)return q;for(var de=_e?oe.getCameraQueryGeometry(W):W,Me=W.map(function(jt){return oe.pointCoordinate(jt)}),Se=de.map(function(jt){return oe.pointCoordinate(jt)}),ze=this.getIds(),Ye=1/0,Xe=1/0,tt=-1/0,rt=-1/0,ft=0,bt=Se;ft<bt.length;ft+=1){var At=bt[ft];Ye=Math.min(Ye,At.x),Xe=Math.min(Xe,At.y),tt=Math.max(tt,At.x),rt=Math.max(rt,At.y)}for(var Ut=function(jt){var Kt=Pe._tiles[ze[jt]];if(!Kt.holdingForFade()){var Vt=Kt.tileID,gn=Math.pow(2,oe.zoom-Kt.tileID.overscaledZ),ln=re*Kt.queryPadding*f.EXTENT/Kt.tileSize/gn,nn=[Vt.getTilePoint(new f.MercatorCoordinate(Ye,Xe)),Vt.getTilePoint(new f.MercatorCoordinate(tt,rt))];if(nn[0].x-ln<f.EXTENT&&nn[0].y-ln<f.EXTENT&&nn[1].x+ln>=0&&nn[1].y+ln>=0){var On=Me.map(function(tr){return Vt.getTilePoint(tr)}),Pn=Se.map(function(tr){return Vt.getTilePoint(tr)});q.push({tile:Kt,tileID:Vt,queryGeometry:On,cameraQueryGeometry:Pn,scale:gn})}}},qt=0;qt<ze.length;qt++)Ut(qt);return q},Y.prototype.getVisibleCoordinates=function(W){for(var re=this,_e=this.getRenderableIds(W).map(function(de){return re._tiles[de].tileID}),Pe=0,q=_e;Pe<q.length;Pe+=1){var oe=q[Pe];oe.posMatrix=this.transform.calculatePosMatrix(oe.toUnwrapped())}return _e},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(He(this._source.type))for(var W in this._tiles){var re=this._tiles[W];if(void 0!==re.fadeEndTime&&re.fadeEndTime>=f.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(W,re,_e){this._state.updateState(W=W||"_geojsonTileLayer",re,_e)},Y.prototype.removeFeatureState=function(W,re,_e){this._state.removeFeatureState(W=W||"_geojsonTileLayer",re,_e)},Y.prototype.getFeatureState=function(W,re){return this._state.getState(W=W||"_geojsonTileLayer",re)},Y.prototype.setDependencies=function(W,re,_e){var Pe=this._tiles[W];Pe&&Pe.setDependencies(re,_e)},Y.prototype.reloadTilesForDependencies=function(W,re){for(var _e in this._tiles)this._tiles[_e].hasDependency(W,re)&&this._reloadTile(_e,"reloading");this._cache.filter(function(Pe){return!Pe.hasDependency(W,re)})},Y}(f.Evented);function xt(V,Y){var W=Math.abs(2*V.wrap)-+(V.wrap<0),re=Math.abs(2*Y.wrap)-+(Y.wrap<0);return V.overscaledZ-Y.overscaledZ||re-W||Y.canonical.y-V.canonical.y||Y.canonical.x-V.canonical.x}function He(V){return"raster"===V||"image"===V||"video"===V}function Ge(){return new f.window.Worker(al.workerUrl)}pt.maxOverzooming=10,pt.maxUnderzooming=3;var dt="mapboxgl_preloaded_worker_pool",ht=function(){this.active={}};ht.prototype.acquire=function(V){if(!this.workers)for(this.workers=[];this.workers.length<ht.workerCount;)this.workers.push(new Ge);return this.active[V]=!0,this.workers.slice()},ht.prototype.release=function(V){delete this.active[V],0===this.numActive()&&(this.workers.forEach(function(Y){Y.terminate()}),this.workers=null)},ht.prototype.isPreloaded=function(){return!!this.active[dt]},ht.prototype.numActive=function(){return Object.keys(this.active).length};var kt,St=Math.floor(f.browser.hardwareConcurrency/2);function Et(){return kt||(kt=new ht),kt}function wt(V,Y){var W={};for(var re in V)"ref"!==re&&(W[re]=V[re]);return f.refProperties.forEach(function(_e){_e in Y&&(W[_e]=Y[_e])}),W}function Nt(V){V=V.slice();for(var Y=Object.create(null),W=0;W<V.length;W++)Y[V[W].id]=V[W];for(var re=0;re<V.length;re++)"ref"in V[re]&&(V[re]=wt(V[re],Y[V[re].ref]));return V}ht.workerCount=Math.max(Math.min(St,6),1);var _t={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Mt(V,Y,W){W.push({command:_t.addSource,args:[V,Y[V]]})}function Pt(V,Y,W){Y.push({command:_t.removeSource,args:[V]}),W[V]=!0}function Zt(V,Y,W,re){Pt(V,W,re),Mt(V,Y,W)}function $t(V,Y,W){var re;for(re in V[W])if(V[W].hasOwnProperty(re)&&"data"!==re&&!f.deepEqual(V[W][re],Y[W][re]))return!1;for(re in Y[W])if(Y[W].hasOwnProperty(re)&&"data"!==re&&!f.deepEqual(V[W][re],Y[W][re]))return!1;return!0}function Xt(V,Y,W,re,_e,Pe){var q;for(q in Y=Y||{},V=V||{})V.hasOwnProperty(q)&&(f.deepEqual(V[q],Y[q])||W.push({command:Pe,args:[re,q,Y[q],_e]}));for(q in Y)Y.hasOwnProperty(q)&&!V.hasOwnProperty(q)&&(f.deepEqual(V[q],Y[q])||W.push({command:Pe,args:[re,q,Y[q],_e]}))}function dn(V){return V.id}function on(V,Y){return V[Y.id]=Y,V}var tn=function(V,Y){this.reset(V,Y)};tn.prototype.reset=function(V,Y){this.points=V||[],this._distances=[0];for(var W=1;W<this.points.length;W++)this._distances[W]=this._distances[W-1]+this.points[W].dist(this.points[W-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(Y||0,.5*this.length),this.paddedLength=this.length-2*this.padding},tn.prototype.lerp=function(V){if(1===this.points.length)return this.points[0];V=f.clamp(V,0,1);for(var Y=1,W=this._distances[Y],re=V*this.paddedLength+this.padding;W<re&&Y<this._distances.length;)W=this._distances[++Y];var _e=Y-1,Pe=this._distances[_e],q=W-Pe,oe=q>0?(re-Pe)/q:0;return this.points[_e].mult(1-oe).add(this.points[Y].mult(oe))};var Cn=function(V,Y,W){var re=this.boxCells=[],_e=this.circleCells=[];this.xCellCount=Math.ceil(V/W),this.yCellCount=Math.ceil(Y/W);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)re.push([]),_e.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=V,this.height=Y,this.xScale=this.xCellCount/V,this.yScale=this.yCellCount/Y,this.boxUid=0,this.circleUid=0};function Fn(V,Y,W,re,_e){var Pe=f.create();return Y?(f.scale(Pe,Pe,[1/_e,1/_e,1]),W||f.rotateZ(Pe,Pe,re.angle)):f.multiply(Pe,re.labelPlaneMatrix,V),Pe}function En(V,Y,W,re,_e){if(Y){var Pe=f.clone(V);return f.scale(Pe,Pe,[_e,_e,1]),W||f.rotateZ(Pe,Pe,-re.angle),Pe}return re.glCoordMatrix}function rn(V,Y){var W=[V.x,V.y,0,1];fr(W,W,Y);var re=W[3];return{point:new f.Point(W[0]/re,W[1]/re),signedDistanceFromCamera:re}}function yn(V,Y){return.5+V/Y*.5}function pn(V,Y){var W=V[0]/V[3],re=V[1]/V[3];return W>=-Y[0]&&W<=Y[0]&&re>=-Y[1]&&re<=Y[1]}function bn(V,Y,W,re,_e,Pe,q,oe){var de=re?V.textSizeData:V.iconSizeData,Me=f.evaluateSizeForZoom(de,W.transform.zoom),Se=[256/W.width*2+1,256/W.height*2+1],ze=re?V.text.dynamicLayoutVertexArray:V.icon.dynamicLayoutVertexArray;ze.clear();for(var Ye=V.lineVertexArray,Xe=re?V.text.placedSymbolArray:V.icon.placedSymbolArray,tt=W.transform.width/W.transform.height,rt=!1,ft=0;ft<Xe.length;ft++){var bt=Xe.get(ft);if(bt.hidden||bt.writingMode===f.WritingMode.vertical&&!rt)yr(bt.numGlyphs,ze);else{rt=!1;var At=[bt.anchorX,bt.anchorY,0,1];if(f.transformMat4(At,At,Y),pn(At,Se)){var qt=yn(W.transform.cameraToCenterDistance,At[3]),jt=f.evaluateSizeForFeature(de,Me,bt),Kt=q?jt/qt:jt*qt,Vt=new f.Point(bt.anchorX,bt.anchorY),gn=rn(Vt,_e).point,ln={},nn=qn(bt,Kt,!1,oe,Y,_e,Pe,V.glyphOffsetArray,Ye,ze,gn,Vt,ln,tt);rt=nn.useVertical,(nn.notEnoughRoom||rt||nn.needsFlipping&&qn(bt,Kt,!0,oe,Y,_e,Pe,V.glyphOffsetArray,Ye,ze,gn,Vt,ln,tt).notEnoughRoom)&&yr(bt.numGlyphs,ze)}else yr(bt.numGlyphs,ze)}}re?V.text.dynamicLayoutVertexBuffer.updateData(ze):V.icon.dynamicLayoutVertexBuffer.updateData(ze)}function In(V,Y,W,re,_e,Pe,q,oe,de,Me,Se){var ze=oe.glyphStartIndex+oe.numGlyphs,Ye=oe.lineStartIndex,Xe=oe.lineStartIndex+oe.lineLength,tt=Y.getoffsetX(oe.glyphStartIndex),rt=Y.getoffsetX(ze-1),ft=Nn(V*tt,W,re,_e,Pe,q,oe.segment,Ye,Xe,de,Me,Se);if(!ft)return null;var bt=Nn(V*rt,W,re,_e,Pe,q,oe.segment,Ye,Xe,de,Me,Se);return bt?{first:ft,last:bt}:null}function _n(V,Y,W,re){return V===f.WritingMode.horizontal&&Math.abs(W.y-Y.y)>Math.abs(W.x-Y.x)*re?{useVertical:!0}:(V===f.WritingMode.vertical?Y.y<W.y:Y.x>W.x)?{needsFlipping:!0}:null}function qn(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze,Ye,Xe){var tt,rt=Y/24,ft=V.lineOffsetX*rt,bt=V.lineOffsetY*rt;if(V.numGlyphs>1){var At=V.glyphStartIndex+V.numGlyphs,Ut=V.lineStartIndex,qt=V.lineStartIndex+V.lineLength,jt=In(rt,oe,ft,bt,W,Se,ze,V,de,Pe,Ye);if(!jt)return{notEnoughRoom:!0};var Kt=rn(jt.first.point,q).point,Vt=rn(jt.last.point,q).point;if(re&&!W){var gn=_n(V.writingMode,Kt,Vt,Xe);if(gn)return gn}tt=[jt.first];for(var ln=V.glyphStartIndex+1;ln<At-1;ln++)tt.push(Nn(rt*oe.getoffsetX(ln),ft,bt,W,Se,ze,V.segment,Ut,qt,de,Pe,Ye));tt.push(jt.last)}else{if(re&&!W){var nn=rn(ze,_e).point,On=V.lineStartIndex+V.segment+1,Pn=new f.Point(de.getx(On),de.gety(On)),tr=rn(Pn,_e),Jn=tr.signedDistanceFromCamera>0?tr.point:Wn(ze,Pn,nn,1,_e),ur=_n(V.writingMode,nn,Jn,Xe);if(ur)return ur}var vr=Nn(rt*oe.getoffsetX(V.glyphStartIndex),ft,bt,W,Se,ze,V.segment,V.lineStartIndex,V.lineStartIndex+V.lineLength,de,Pe,Ye);if(!vr)return{notEnoughRoom:!0};tt=[vr]}for(var wr=0,Cr=tt;wr<Cr.length;wr+=1){var Or=Cr[wr];f.addDynamicAttributes(Me,Or.point,Or.angle)}return{}}function Wn(V,Y,W,re,_e){var Pe=rn(V.add(V.sub(Y)._unit()),_e).point,q=W.sub(Pe);return W.add(q._mult(re/q.mag()))}function Nn(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze){var Ye=re?V-Y:V+Y,Xe=Ye>0?1:-1,tt=0;re&&(Xe*=-1,tt=Math.PI),Xe<0&&(tt+=Math.PI);for(var rt=Xe>0?oe+q:oe+q+1,ft=_e,bt=_e,At=0,Ut=0,qt=Math.abs(Ye),jt=[];At+Ut<=qt;){if((rt+=Xe)<oe||rt>=de)return null;if(bt=ft,jt.push(ft),void 0===(ft=ze[rt])){var Kt=new f.Point(Me.getx(rt),Me.gety(rt)),Vt=rn(Kt,Se);if(Vt.signedDistanceFromCamera>0)ft=ze[rt]=Vt.point;else{var gn=rt-Xe;ft=Wn(0===At?Pe:new f.Point(Me.getx(gn),Me.gety(gn)),Kt,bt,qt-At+1,Se)}}At+=Ut,Ut=bt.dist(ft)}var ln=(qt-At)/Ut,nn=ft.sub(bt),On=nn.mult(ln)._add(bt);On._add(nn._unit()._perp()._mult(W*Xe));var Pn=tt+Math.atan2(ft.y-bt.y,ft.x-bt.x);return jt.push(On),{point:On,angle:Pn,path:jt}}Cn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cn.prototype.insert=function(V,Y,W,re,_e){this._forEachCell(Y,W,re,_e,this._insertBoxCell,this.boxUid++),this.boxKeys.push(V),this.bboxes.push(Y),this.bboxes.push(W),this.bboxes.push(re),this.bboxes.push(_e)},Cn.prototype.insertCircle=function(V,Y,W,re){this._forEachCell(Y-re,W-re,Y+re,W+re,this._insertCircleCell,this.circleUid++),this.circleKeys.push(V),this.circles.push(Y),this.circles.push(W),this.circles.push(re)},Cn.prototype._insertBoxCell=function(V,Y,W,re,_e,Pe){this.boxCells[_e].push(Pe)},Cn.prototype._insertCircleCell=function(V,Y,W,re,_e,Pe){this.circleCells[_e].push(Pe)},Cn.prototype._query=function(V,Y,W,re,_e,Pe){if(W<0||V>this.width||re<0||Y>this.height)return!_e&&[];var q=[];if(V<=0&&Y<=0&&this.width<=W&&this.height<=re){if(_e)return!0;for(var oe=0;oe<this.boxKeys.length;oe++)q.push({key:this.boxKeys[oe],x1:this.bboxes[4*oe],y1:this.bboxes[4*oe+1],x2:this.bboxes[4*oe+2],y2:this.bboxes[4*oe+3]});for(var de=0;de<this.circleKeys.length;de++){var Me=this.circles[3*de],Se=this.circles[3*de+1],ze=this.circles[3*de+2];q.push({key:this.circleKeys[de],x1:Me-ze,y1:Se-ze,x2:Me+ze,y2:Se+ze})}return Pe?q.filter(Pe):q}return this._forEachCell(V,Y,W,re,this._queryCell,q,{hitTest:_e,seenUids:{box:{},circle:{}}},Pe),_e?q.length>0:q},Cn.prototype._queryCircle=function(V,Y,W,re,_e){var Pe=V-W,q=V+W,oe=Y-W,de=Y+W;if(q<0||Pe>this.width||de<0||oe>this.height)return!re&&[];var Me=[];return this._forEachCell(Pe,oe,q,de,this._queryCellCircle,Me,{hitTest:re,circle:{x:V,y:Y,radius:W},seenUids:{box:{},circle:{}}},_e),re?Me.length>0:Me},Cn.prototype.query=function(V,Y,W,re,_e){return this._query(V,Y,W,re,!1,_e)},Cn.prototype.hitTest=function(V,Y,W,re,_e){return this._query(V,Y,W,re,!0,_e)},Cn.prototype.hitTestCircle=function(V,Y,W,re){return this._queryCircle(V,Y,W,!0,re)},Cn.prototype._queryCell=function(V,Y,W,re,_e,Pe,q,oe){var de=q.seenUids,Me=this.boxCells[_e];if(null!==Me)for(var Se=this.bboxes,ze=0,Ye=Me;ze<Ye.length;ze+=1){var Xe=Ye[ze];if(!de.box[Xe]){de.box[Xe]=!0;var tt=4*Xe;if(V<=Se[tt+2]&&Y<=Se[tt+3]&&W>=Se[tt+0]&&re>=Se[tt+1]&&(!oe||oe(this.boxKeys[Xe]))){if(q.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[Xe],x1:Se[tt],y1:Se[tt+1],x2:Se[tt+2],y2:Se[tt+3]})}}}var rt=this.circleCells[_e];if(null!==rt)for(var ft=this.circles,bt=0,At=rt;bt<At.length;bt+=1){var Ut=At[bt];if(!de.circle[Ut]){de.circle[Ut]=!0;var qt=3*Ut;if(this._circleAndRectCollide(ft[qt],ft[qt+1],ft[qt+2],V,Y,W,re)&&(!oe||oe(this.circleKeys[Ut]))){if(q.hitTest)return Pe.push(!0),!0;var jt=ft[qt],Kt=ft[qt+1],Vt=ft[qt+2];Pe.push({key:this.circleKeys[Ut],x1:jt-Vt,y1:Kt-Vt,x2:jt+Vt,y2:Kt+Vt})}}}},Cn.prototype._queryCellCircle=function(V,Y,W,re,_e,Pe,q,oe){var de=q.circle,Me=q.seenUids,Se=this.boxCells[_e];if(null!==Se)for(var ze=this.bboxes,Ye=0,Xe=Se;Ye<Xe.length;Ye+=1){var tt=Xe[Ye];if(!Me.box[tt]){Me.box[tt]=!0;var rt=4*tt;if(this._circleAndRectCollide(de.x,de.y,de.radius,ze[rt+0],ze[rt+1],ze[rt+2],ze[rt+3])&&(!oe||oe(this.boxKeys[tt])))return Pe.push(!0),!0}}var ft=this.circleCells[_e];if(null!==ft)for(var bt=this.circles,At=0,Ut=ft;At<Ut.length;At+=1){var qt=Ut[At];if(!Me.circle[qt]){Me.circle[qt]=!0;var jt=3*qt;if(this._circlesCollide(bt[jt],bt[jt+1],bt[jt+2],de.x,de.y,de.radius)&&(!oe||oe(this.circleKeys[qt])))return Pe.push(!0),!0}}},Cn.prototype._forEachCell=function(V,Y,W,re,_e,Pe,q,oe){for(var de=this._convertToXCellCoord(V),Me=this._convertToYCellCoord(Y),Se=this._convertToXCellCoord(W),ze=this._convertToYCellCoord(re),Ye=de;Ye<=Se;Ye++)for(var Xe=Me;Xe<=ze;Xe++)if(_e.call(this,V,Y,W,re,this.xCellCount*Xe+Ye,Pe,q,oe))return},Cn.prototype._convertToXCellCoord=function(V){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(V*this.xScale)))},Cn.prototype._convertToYCellCoord=function(V){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(V*this.yScale)))},Cn.prototype._circlesCollide=function(V,Y,W,re,_e,Pe){var q=re-V,oe=_e-Y,de=W+Pe;return de*de>q*q+oe*oe},Cn.prototype._circleAndRectCollide=function(V,Y,W,re,_e,Pe,q){var oe=(Pe-re)/2,de=Math.abs(V-(re+oe));if(de>oe+W)return!1;var Me=(q-_e)/2,Se=Math.abs(Y-(_e+Me));if(Se>Me+W)return!1;if(de<=oe||Se<=Me)return!0;var ze=de-oe,Ye=Se-Me;return ze*ze+Ye*Ye<=W*W};var Xn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yr(V,Y){for(var W=0;W<V;W++){var re=Y.length;Y.resize(re+4),Y.float32.set(Xn,3*re)}}function fr(V,Y,W){var re=Y[0],_e=Y[1];return V[0]=W[0]*re+W[4]*_e+W[12],V[1]=W[1]*re+W[5]*_e+W[13],V[3]=W[3]*re+W[7]*_e+W[15],V}var Er=100,gr=function(V,Y,W){void 0===Y&&(Y=new Cn(V.width+200,V.height+200,25)),void 0===W&&(W=new Cn(V.width+200,V.height+200,25)),this.transform=V,this.grid=Y,this.ignoredGrid=W,this.pitchfactor=Math.cos(V._pitch)*V.cameraToCenterDistance,this.screenRightBoundary=V.width+Er,this.screenBottomBoundary=V.height+Er,this.gridRightBoundary=V.width+200,this.gridBottomBoundary=V.height+200};function mr(V,Y,W){return Y*(f.EXTENT/(V.tileSize*Math.pow(2,W-V.tileID.overscaledZ)))}gr.prototype.placeCollisionBox=function(V,Y,W,re,_e){var Pe=this.projectAndGetPerspectiveRatio(re,V.anchorPointX,V.anchorPointY),q=W*Pe.perspectiveRatio,oe=V.x1*q+Pe.point.x,de=V.y1*q+Pe.point.y,Me=V.x2*q+Pe.point.x,Se=V.y2*q+Pe.point.y;return!this.isInsideGrid(oe,de,Me,Se)||!Y&&this.grid.hitTest(oe,de,Me,Se,_e)?{box:[],offscreen:!1}:{box:[oe,de,Me,Se],offscreen:this.isOffscreen(oe,de,Me,Se)}},gr.prototype.placeCollisionCircles=function(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze,Ye){var Xe=[],tt=new f.Point(Y.anchorX,Y.anchorY),rt=rn(tt,Pe),ft=yn(this.transform.cameraToCenterDistance,rt.signedDistanceFromCamera),bt=(Me?_e/ft:_e*ft)/f.ONE_EM,At=rn(tt,q).point,Ut=In(bt,re,Y.lineOffsetX*bt,Y.lineOffsetY*bt,!1,At,tt,Y,W,q,{}),qt=!1,jt=!1,Kt=!0;if(Ut){for(var Vt=.5*ze*ft+Ye,gn=new f.Point(-100,-100),ln=new f.Point(this.screenRightBoundary,this.screenBottomBoundary),nn=new tn,On=Ut.first,Pn=Ut.last,tr=[],Jn=On.path.length-1;Jn>=1;Jn--)tr.push(On.path[Jn]);for(var ur=1;ur<Pn.path.length;ur++)tr.push(Pn.path[ur]);var vr=2.5*Vt;if(oe){var wr=tr.map(function($r){return rn($r,oe)});tr=wr.some(function($r){return $r.signedDistanceFromCamera<=0})?[]:wr.map(function($r){return $r.point})}var Cr=[];if(tr.length>0){for(var Or=tr[0].clone(),Rr=tr[0].clone(),si=1;si<tr.length;si++)Or.x=Math.min(Or.x,tr[si].x),Or.y=Math.min(Or.y,tr[si].y),Rr.x=Math.max(Rr.x,tr[si].x),Rr.y=Math.max(Rr.y,tr[si].y);Cr=Or.x>=gn.x&&Rr.x<=ln.x&&Or.y>=gn.y&&Rr.y<=ln.y?[tr]:Rr.x<gn.x||Or.x>ln.x||Rr.y<gn.y||Or.y>ln.y?[]:f.clipLine([tr],gn.x,gn.y,ln.x,ln.y)}for(var ir=0,Ar=Cr;ir<Ar.length;ir+=1){var qr;nn.reset(Ar[ir],.25*Vt),qr=nn.length<=.5*Vt?1:Math.ceil(nn.paddedLength/vr)+1;for(var ni=0;ni<qr;ni++){var gi=ni/Math.max(qr-1,1),Ai=nn.lerp(gi),Yi=Ai.x+Er,xo=Ai.y+Er;Xe.push(Yi,xo,Vt,0);var mo=Yi-Vt,$i=xo-Vt,Do=Yi+Vt,aa=xo+Vt;if(Kt=Kt&&this.isOffscreen(mo,$i,Do,aa),jt=jt||this.isInsideGrid(mo,$i,Do,aa),!V&&this.grid.hitTestCircle(Yi,xo,Vt,Se)&&(qt=!0,!de))return{circles:[],offscreen:!1,collisionDetected:qt}}}}return{circles:!de&&qt||!jt?[]:Xe,offscreen:Kt,collisionDetected:qt}},gr.prototype.queryRenderedSymbols=function(V){if(0===V.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var Y=[],W=1/0,re=1/0,_e=-1/0,Pe=-1/0,q=0,oe=V;q<oe.length;q+=1){var de=oe[q],Me=new f.Point(de.x+Er,de.y+Er);W=Math.min(W,Me.x),re=Math.min(re,Me.y),_e=Math.max(_e,Me.x),Pe=Math.max(Pe,Me.y),Y.push(Me)}for(var Se={},ze={},Ye=0,Xe=this.grid.query(W,re,_e,Pe).concat(this.ignoredGrid.query(W,re,_e,Pe));Ye<Xe.length;Ye+=1){var tt=Xe[Ye],rt=tt.key;if(void 0===Se[rt.bucketInstanceId]&&(Se[rt.bucketInstanceId]={}),!Se[rt.bucketInstanceId][rt.featureIndex]){var ft=[new f.Point(tt.x1,tt.y1),new f.Point(tt.x2,tt.y1),new f.Point(tt.x2,tt.y2),new f.Point(tt.x1,tt.y2)];f.polygonIntersectsPolygon(Y,ft)&&(Se[rt.bucketInstanceId][rt.featureIndex]=!0,void 0===ze[rt.bucketInstanceId]&&(ze[rt.bucketInstanceId]=[]),ze[rt.bucketInstanceId].push(rt.featureIndex))}}return ze},gr.prototype.insertCollisionBox=function(V,Y,W,re,_e){(Y?this.ignoredGrid:this.grid).insert({bucketInstanceId:W,featureIndex:re,collisionGroupID:_e},V[0],V[1],V[2],V[3])},gr.prototype.insertCollisionCircles=function(V,Y,W,re,_e){for(var Pe=Y?this.ignoredGrid:this.grid,q={bucketInstanceId:W,featureIndex:re,collisionGroupID:_e},oe=0;oe<V.length;oe+=4)Pe.insertCircle(q,V[oe],V[oe+1],V[oe+2])},gr.prototype.projectAndGetPerspectiveRatio=function(V,Y,W){var re=[Y,W,0,1];return fr(re,re,V),{point:new f.Point((re[0]/re[3]+1)/2*this.transform.width+Er,(-re[1]/re[3]+1)/2*this.transform.height+Er),perspectiveRatio:.5+this.transform.cameraToCenterDistance/re[3]*.5}},gr.prototype.isOffscreen=function(V,Y,W,re){return W<Er||V>=this.screenRightBoundary||re<Er||Y>this.screenBottomBoundary},gr.prototype.isInsideGrid=function(V,Y,W,re){return W>=0&&V<this.gridRightBoundary&&re>=0&&Y<this.gridBottomBoundary},gr.prototype.getViewportMatrix=function(){var V=f.identity([]);return f.translate(V,V,[-100,-100,0]),V};var zr=function(V,Y,W,re){this.opacity=V?Math.max(0,Math.min(1,V.opacity+(V.placed?Y:-Y))):re&&W?1:0,this.placed=W};zr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Jt=function(V,Y,W,re,_e){this.text=new zr(V?V.text:null,Y,W,_e),this.icon=new zr(V?V.icon:null,Y,re,_e)};Jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var an=function(V,Y,W){this.text=V,this.icon=Y,this.skipFade=W},Sn=function(){this.invProjMatrix=f.create(),this.viewportMatrix=f.create(),this.circles=[]},Ln=function(V,Y,W,re,_e){this.bucketInstanceId=V,this.featureIndex=Y,this.sourceLayerIndex=W,this.bucketIndex=re,this.tileID=_e},Vn=function(V){this.crossSourceCollisions=V,this.maxGroupID=0,this.collisionGroups={}};function cr(V,Y,W,re,_e){var Pe=f.getAnchorAlignment(V),q=-(Pe.horizontalAlign-.5)*Y,oe=-(Pe.verticalAlign-.5)*W,de=f.evaluateVariableOffset(V,re);return new f.Point(q+de[0]*_e,oe+de[1]*_e)}function xn(V,Y,W,re,_e,Pe){var q=V.x1,oe=V.x2,de=V.y1,Me=V.y2,Se=V.anchorPointX,ze=V.anchorPointY,Ye=new f.Point(Y,W);return re&&Ye._rotate(_e?Pe:-Pe),{x1:q+Ye.x,y1:de+Ye.y,x2:oe+Ye.x,y2:Me+Ye.y,anchorPointX:Se,anchorPointY:ze}}Vn.prototype.get=function(V){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[V]){var Y=++this.maxGroupID;this.collisionGroups[V]={ID:Y,predicate:function(W){return W.collisionGroupID===Y}}}return this.collisionGroups[V]};var Qn=function(V,Y,W,re){this.transform=V.clone(),this.collisionIndex=new gr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=Y,this.retainedQueryData={},this.collisionGroups=new Vn(W),this.collisionCircleArrays={},this.prevPlacement=re,re&&(re.prevPlacement=void 0),this.placedOrientations={}};function er(V,Y,W,re,_e){V.emplaceBack(Y?1:0,W?1:0,re||0,_e||0),V.emplaceBack(Y?1:0,W?1:0,re||0,_e||0),V.emplaceBack(Y?1:0,W?1:0,re||0,_e||0),V.emplaceBack(Y?1:0,W?1:0,re||0,_e||0)}Qn.prototype.getBucketParts=function(V,Y,W,re){var _e=W.getBucket(Y),Pe=W.latestFeatureIndex;if(_e&&Pe&&Y.id===_e.layerIds[0]){var q=W.collisionBoxArray,oe=_e.layers[0].layout,de=Math.pow(2,this.transform.zoom-W.tileID.overscaledZ),Me=W.tileSize/f.EXTENT,Se=this.transform.calculatePosMatrix(W.tileID.toUnwrapped()),ze="map"===oe.get("text-pitch-alignment"),Ye="map"===oe.get("text-rotation-alignment"),Xe=mr(W,1,this.transform.zoom),tt=Fn(Se,ze,Ye,this.transform,Xe),rt=null;if(ze){var ft=En(Se,ze,Ye,this.transform,Xe);rt=f.multiply([],this.transform.labelPlaneMatrix,ft)}this.retainedQueryData[_e.bucketInstanceId]=new Ln(_e.bucketInstanceId,Pe,_e.sourceLayerIndex,_e.index,W.tileID);var bt={bucket:_e,layout:oe,posMatrix:Se,textLabelPlaneMatrix:tt,labelToScreenMatrix:rt,scale:de,textPixelRatio:Me,holdingForFade:W.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:f.evaluateSizeForZoom(_e.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_e.sourceID)};if(re)for(var At=0,Ut=_e.sortKeyRanges;At<Ut.length;At+=1){var qt=Ut[At];V.push({sortKey:qt.sortKey,symbolInstanceStart:qt.symbolInstanceStart,symbolInstanceEnd:qt.symbolInstanceEnd,parameters:bt})}else V.push({symbolInstanceStart:0,symbolInstanceEnd:_e.symbolInstances.length,parameters:bt})}},Qn.prototype.attemptAnchorPlacement=function(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze,Ye,Xe,tt){var rt,ft=[ze.textOffset0,ze.textOffset1],bt=cr(V,W,re,ft,_e),At=this.collisionIndex.placeCollisionBox(xn(Y,bt.x,bt.y,Pe,q,this.transform.angle),Se,oe,de,Me.predicate);if(!tt||0!==this.collisionIndex.placeCollisionBox(xn(tt,bt.x,bt.y,Pe,q,this.transform.angle),Se,oe,de,Me.predicate).box.length)return At.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID]&&this.prevPlacement.placements[ze.crossTileID].text&&(rt=this.prevPlacement.variableOffsets[ze.crossTileID].anchor),this.variableOffsets[ze.crossTileID]={textOffset:ft,width:W,height:re,anchor:V,textBoxScale:_e,prevAnchor:rt},this.markUsedJustification(Ye,V,ze,Xe),Ye.allowVerticalPlacement&&(this.markUsedOrientation(Ye,Xe,ze),this.placedOrientations[ze.crossTileID]=Xe),{shift:bt,placedGlyphBoxes:At}):void 0},Qn.prototype.placeLayerBucketPart=function(V,Y,W){var re=this,_e=V.parameters,Pe=_e.bucket,q=_e.layout,oe=_e.posMatrix,de=_e.textLabelPlaneMatrix,Me=_e.labelToScreenMatrix,Se=_e.textPixelRatio,ze=_e.holdingForFade,Ye=_e.collisionBoxArray,Xe=_e.partiallyEvaluatedTextSize,tt=_e.collisionGroup,rt=q.get("text-optional"),ft=q.get("icon-optional"),bt=q.get("text-allow-overlap"),At=q.get("icon-allow-overlap"),Ut="map"===q.get("text-rotation-alignment"),qt="map"===q.get("text-pitch-alignment"),jt="none"!==q.get("icon-text-fit"),Kt="viewport-y"===q.get("symbol-z-order"),Vt=bt&&(At||!Pe.hasIconData()||ft),gn=At&&(bt||!Pe.hasTextData()||rt);!Pe.collisionArrays&&Ye&&Pe.deserializeCollisionBoxes(Ye);var ln=function(ur,vr){if(!Y[ur.crossTileID])if(ze)re.placements[ur.crossTileID]=new an(!1,!1,!1);else{var wr,Cr=!1,Or=!1,Rr=!0,si=null,ir={box:null,offscreen:null},Ar={box:null,offscreen:null},Lr=null,qr=null,ni=0,gi=0,Ai=0;vr.textFeatureIndex?ni=vr.textFeatureIndex:ur.useRuntimeCollisionCircles&&(ni=ur.featureIndex),vr.verticalTextFeatureIndex&&(gi=vr.verticalTextFeatureIndex);var Yi=vr.textBox;if(Yi){var xo=function(Tr){var hi=f.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Tr&&re.prevPlacement){var Es=re.prevPlacement.placedOrientations[ur.crossTileID];Es&&(re.placedOrientations[ur.crossTileID]=Es,re.markUsedOrientation(Pe,hi=Es,ur))}return hi},mo=function(Tr,hi){if(Pe.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&vr.verticalTextBox)for(var Es=0,Mf=Pe.writingModes;Es<Mf.length&&(Mf[Es]===f.WritingMode.vertical?(ir=hi(),Ar=ir):ir=Tr(),!(ir&&ir.box&&ir.box.length));Es+=1);else ir=Tr()};if(q.get("text-variable-anchor")){var $i=q.get("text-variable-anchor");if(re.prevPlacement&&re.prevPlacement.variableOffsets[ur.crossTileID]){var Do=re.prevPlacement.variableOffsets[ur.crossTileID];$i.indexOf(Do.anchor)>0&&($i=$i.filter(function(Tr){return Tr!==Do.anchor})).unshift(Do.anchor)}var aa=function(Tr,hi,Es){for(var Mf=Tr.x2-Tr.x1,Za=Tr.y2-Tr.y1,mh=ur.textBoxScale,ec=jt&&!At?hi:null,sl={box:[],offscreen:!1},Zc=bt?2*$i.length:$i.length,tc=0;tc<Zc;++tc){var Af=re.attemptAnchorPlacement($i[tc%$i.length],Tr,Mf,Za,mh,Ut,qt,Se,oe,tt,tc>=$i.length,ur,Pe,Es,ec);if(Af&&(sl=Af.placedGlyphBoxes)&&sl.box&&sl.box.length){Cr=!0,si=Af.shift;break}}return sl};mo(function(){return aa(Yi,vr.iconBox,f.WritingMode.horizontal)},function(){var Tr=vr.verticalTextBox;return Pe.allowVerticalPlacement&&!(ir&&ir.box&&ir.box.length)&&ur.numVerticalGlyphVertices>0&&Tr?aa(Tr,vr.verticalIconBox,f.WritingMode.vertical):{box:null,offscreen:null}}),ir&&(Cr=ir.box,Rr=ir.offscreen);var $r=xo(ir&&ir.box);if(!Cr&&re.prevPlacement){var Zo=re.prevPlacement.variableOffsets[ur.crossTileID];Zo&&(re.variableOffsets[ur.crossTileID]=Zo,re.markUsedJustification(Pe,Zo.anchor,ur,$r))}}else{var Xi=function(Tr,hi){var Es=re.collisionIndex.placeCollisionBox(Tr,bt,Se,oe,tt.predicate);return Es&&Es.box&&Es.box.length&&(re.markUsedOrientation(Pe,hi,ur),re.placedOrientations[ur.crossTileID]=hi),Es};mo(function(){return Xi(Yi,f.WritingMode.horizontal)},function(){var Tr=vr.verticalTextBox;return Pe.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&Tr?Xi(Tr,f.WritingMode.vertical):{box:null,offscreen:null}}),xo(ir&&ir.box&&ir.box.length)}}if(Cr=(wr=ir)&&wr.box&&wr.box.length>0,Rr=wr&&wr.offscreen,ur.useRuntimeCollisionCircles){var Oi=Pe.text.placedSymbolArray.get(ur.centerJustifiedTextSymbolIndex),bo=f.evaluateSizeForFeature(Pe.textSizeData,Xe,Oi),uo=q.get("text-padding");Lr=re.collisionIndex.placeCollisionCircles(bt,Oi,Pe.lineVertexArray,Pe.glyphOffsetArray,bo,oe,de,Me,W,qt,tt.predicate,ur.collisionCircleDiameter,uo),Cr=bt||Lr.circles.length>0&&!Lr.collisionDetected,Rr=Rr&&Lr.offscreen}if(vr.iconFeatureIndex&&(Ai=vr.iconFeatureIndex),vr.iconBox){var na=function(Tr){var hi=jt&&si?xn(Tr,si.x,si.y,Ut,qt,re.transform.angle):Tr;return re.collisionIndex.placeCollisionBox(hi,At,Se,oe,tt.predicate)};Or=Ar&&Ar.box&&Ar.box.length&&vr.verticalIconBox?(qr=na(vr.verticalIconBox)).box.length>0:(qr=na(vr.iconBox)).box.length>0,Rr=Rr&&qr.offscreen}var Io=rt||0===ur.numHorizontalGlyphVertices&&0===ur.numVerticalGlyphVertices,eo=ft||0===ur.numIconVertices;if(Io||eo?eo?Io||(Or=Or&&Cr):Cr=Or&&Cr:Or=Cr=Or&&Cr,Cr&&wr&&wr.box&&re.collisionIndex.insertCollisionBox(wr.box,q.get("text-ignore-placement"),Pe.bucketInstanceId,Ar&&Ar.box&&gi?gi:ni,tt.ID),Or&&qr&&re.collisionIndex.insertCollisionBox(qr.box,q.get("icon-ignore-placement"),Pe.bucketInstanceId,Ai,tt.ID),Lr&&(Cr&&re.collisionIndex.insertCollisionCircles(Lr.circles,q.get("text-ignore-placement"),Pe.bucketInstanceId,ni,tt.ID),W)){var Il=Pe.bucketInstanceId,Wa=re.collisionCircleArrays[Il];void 0===Wa&&(Wa=re.collisionCircleArrays[Il]=new Sn);for(var ds=0;ds<Lr.circles.length;ds+=4)Wa.circles.push(Lr.circles[ds+0]),Wa.circles.push(Lr.circles[ds+1]),Wa.circles.push(Lr.circles[ds+2]),Wa.circles.push(Lr.collisionDetected?1:0)}re.placements[ur.crossTileID]=new an(Cr||Vt,Or||gn,Rr||Pe.justReloaded),Y[ur.crossTileID]=!0}};if(Kt)for(var nn=Pe.getSortedSymbolIndexes(this.transform.angle),On=nn.length-1;On>=0;--On){var Pn=nn[On];ln(Pe.symbolInstances.get(Pn),Pe.collisionArrays[Pn])}else for(var tr=V.symbolInstanceStart;tr<V.symbolInstanceEnd;tr++)ln(Pe.symbolInstances.get(tr),Pe.collisionArrays[tr]);if(W&&Pe.bucketInstanceId in this.collisionCircleArrays){var Jn=this.collisionCircleArrays[Pe.bucketInstanceId];f.invert(Jn.invProjMatrix,oe),Jn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},Qn.prototype.markUsedJustification=function(V,Y,W,re){var _e;_e=re===f.WritingMode.vertical?W.verticalPlacedTextSymbolIndex:{left:W.leftJustifiedTextSymbolIndex,center:W.centerJustifiedTextSymbolIndex,right:W.rightJustifiedTextSymbolIndex}[f.getAnchorJustification(Y)];for(var q=0,oe=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex,W.verticalPlacedTextSymbolIndex];q<oe.length;q+=1){var de=oe[q];de>=0&&(V.text.placedSymbolArray.get(de).crossTileID=_e>=0&&de!==_e?0:W.crossTileID)}},Qn.prototype.markUsedOrientation=function(V,Y,W){for(var re=Y===f.WritingMode.horizontal||Y===f.WritingMode.horizontalOnly?Y:0,_e=Y===f.WritingMode.vertical?Y:0,Pe=0,q=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex];Pe<q.length;Pe+=1)V.text.placedSymbolArray.get(q[Pe]).placedOrientation=re;W.verticalPlacedTextSymbolIndex&&(V.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).placedOrientation=_e)},Qn.prototype.commit=function(V){this.commitTime=V,this.zoomAtLastRecencyCheck=this.transform.zoom;var Y=this.prevPlacement,W=!1;this.prevZoomAdjustment=Y?Y.zoomAdjustment(this.transform.zoom):0;var re=Y?Y.symbolFadeChange(V):1,_e=Y?Y.opacities:{},Pe=Y?Y.variableOffsets:{},q=Y?Y.placedOrientations:{};for(var oe in this.placements){var de=this.placements[oe],Me=_e[oe];Me?(this.opacities[oe]=new Jt(Me,re,de.text,de.icon),W=W||de.text!==Me.text.placed||de.icon!==Me.icon.placed):(this.opacities[oe]=new Jt(null,re,de.text,de.icon,de.skipFade),W=W||de.text||de.icon)}for(var Se in _e){var ze=_e[Se];if(!this.opacities[Se]){var Ye=new Jt(ze,re,!1,!1);Ye.isHidden()||(this.opacities[Se]=Ye,W=W||ze.text.placed||ze.icon.placed)}}for(var Xe in Pe)this.variableOffsets[Xe]||!this.opacities[Xe]||this.opacities[Xe].isHidden()||(this.variableOffsets[Xe]=Pe[Xe]);for(var tt in q)this.placedOrientations[tt]||!this.opacities[tt]||this.opacities[tt].isHidden()||(this.placedOrientations[tt]=q[tt]);W?this.lastPlacementChangeTime=V:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=Y?Y.lastPlacementChangeTime:V)},Qn.prototype.updateLayerOpacities=function(V,Y){for(var W={},re=0,_e=Y;re<_e.length;re+=1){var Pe=_e[re],q=Pe.getBucket(V);q&&Pe.latestFeatureIndex&&V.id===q.layerIds[0]&&this.updateBucketOpacities(q,W,Pe.collisionBoxArray)}},Qn.prototype.updateBucketOpacities=function(V,Y,W){var re=this;V.hasTextData()&&V.text.opacityVertexArray.clear(),V.hasIconData()&&V.icon.opacityVertexArray.clear(),V.hasIconCollisionBoxData()&&V.iconCollisionBox.collisionVertexArray.clear(),V.hasTextCollisionBoxData()&&V.textCollisionBox.collisionVertexArray.clear();var _e=V.layers[0].layout,Pe=new Jt(null,0,!1,!1,!0),q=_e.get("text-allow-overlap"),oe=_e.get("icon-allow-overlap"),de=_e.get("text-variable-anchor"),Me="map"===_e.get("text-rotation-alignment"),Se="map"===_e.get("text-pitch-alignment"),ze="none"!==_e.get("icon-text-fit"),Ye=new Jt(null,0,q&&(oe||!V.hasIconData()||_e.get("icon-optional")),oe&&(q||!V.hasTextData()||_e.get("text-optional")),!0);!V.collisionArrays&&W&&(V.hasIconCollisionBoxData()||V.hasTextCollisionBoxData())&&V.deserializeCollisionBoxes(W);for(var Xe=function(bt,At,Ut){for(var qt=0;qt<At/4;qt++)bt.opacityVertexArray.emplaceBack(Ut)},tt=function(bt){var At=V.symbolInstances.get(bt),Ut=At.numHorizontalGlyphVertices,qt=At.numVerticalGlyphVertices,jt=At.crossTileID,Vt=re.opacities[jt];Y[jt]?Vt=Pe:Vt||(re.opacities[jt]=Vt=Ye),Y[jt]=!0;var ln=At.numIconVertices>0,nn=re.placedOrientations[At.crossTileID],On=nn===f.WritingMode.vertical,Pn=nn===f.WritingMode.horizontal||nn===f.WritingMode.horizontalOnly;if(Ut>0||qt>0){var tr=Hn(Vt.text);Xe(V.text,Ut,On?Mn:tr),Xe(V.text,qt,Pn?Mn:tr);var vr=Vt.text.isHidden();[At.rightJustifiedTextSymbolIndex,At.centerJustifiedTextSymbolIndex,At.leftJustifiedTextSymbolIndex].forEach(function(Ai){Ai>=0&&(V.text.placedSymbolArray.get(Ai).hidden=vr||On?1:0)}),At.verticalPlacedTextSymbolIndex>=0&&(V.text.placedSymbolArray.get(At.verticalPlacedTextSymbolIndex).hidden=vr||Pn?1:0);var wr=re.variableOffsets[At.crossTileID];wr&&re.markUsedJustification(V,wr.anchor,At,nn);var Cr=re.placedOrientations[At.crossTileID];Cr&&(re.markUsedJustification(V,"left",At,Cr),re.markUsedOrientation(V,Cr,At))}if(ln){var Or=Hn(Vt.icon),Rr=!(ze&&At.verticalPlacedIconSymbolIndex&&On);At.placedIconSymbolIndex>=0&&(Xe(V.icon,At.numIconVertices,Rr?Or:Mn),V.icon.placedSymbolArray.get(At.placedIconSymbolIndex).hidden=Vt.icon.isHidden()),At.verticalPlacedIconSymbolIndex>=0&&(Xe(V.icon,At.numVerticalIconVertices,Rr?Mn:Or),V.icon.placedSymbolArray.get(At.verticalPlacedIconSymbolIndex).hidden=Vt.icon.isHidden())}if(V.hasIconCollisionBoxData()||V.hasTextCollisionBoxData()){var Ar=V.collisionArrays[bt];if(Ar){var Lr=new f.Point(0,0);if(Ar.textBox||Ar.verticalTextBox){var qr=!0;if(de){var ni=re.variableOffsets[jt];ni?(Lr=cr(ni.anchor,ni.width,ni.height,ni.textOffset,ni.textBoxScale),Me&&Lr._rotate(Se?re.transform.angle:-re.transform.angle)):qr=!1}Ar.textBox&&er(V.textCollisionBox.collisionVertexArray,Vt.text.placed,!qr||On,Lr.x,Lr.y),Ar.verticalTextBox&&er(V.textCollisionBox.collisionVertexArray,Vt.text.placed,!qr||Pn,Lr.x,Lr.y)}var gi=!(Pn||!Ar.verticalIconBox);Ar.iconBox&&er(V.iconCollisionBox.collisionVertexArray,Vt.icon.placed,gi,ze?Lr.x:0,ze?Lr.y:0),Ar.verticalIconBox&&er(V.iconCollisionBox.collisionVertexArray,Vt.icon.placed,!gi,ze?Lr.x:0,ze?Lr.y:0)}}},rt=0;rt<V.symbolInstances.length;rt++)tt(rt);if(V.sortFeatures(this.transform.angle),this.retainedQueryData[V.bucketInstanceId]&&(this.retainedQueryData[V.bucketInstanceId].featureSortOrder=V.featureSortOrder),V.hasTextData()&&V.text.opacityVertexBuffer&&V.text.opacityVertexBuffer.updateData(V.text.opacityVertexArray),V.hasIconData()&&V.icon.opacityVertexBuffer&&V.icon.opacityVertexBuffer.updateData(V.icon.opacityVertexArray),V.hasIconCollisionBoxData()&&V.iconCollisionBox.collisionVertexBuffer&&V.iconCollisionBox.collisionVertexBuffer.updateData(V.iconCollisionBox.collisionVertexArray),V.hasTextCollisionBoxData()&&V.textCollisionBox.collisionVertexBuffer&&V.textCollisionBox.collisionVertexBuffer.updateData(V.textCollisionBox.collisionVertexArray),V.bucketInstanceId in this.collisionCircleArrays){var ft=this.collisionCircleArrays[V.bucketInstanceId];V.placementInvProjMatrix=ft.invProjMatrix,V.placementViewportMatrix=ft.viewportMatrix,V.collisionCircleArray=ft.circles,delete this.collisionCircleArrays[V.bucketInstanceId]}},Qn.prototype.symbolFadeChange=function(V){return 0===this.fadeDuration?1:(V-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qn.prototype.zoomAdjustment=function(V){return Math.max(0,(this.transform.zoom-V)/1.5)},Qn.prototype.hasTransitions=function(V){return this.stale||V-this.lastPlacementChangeTime<this.fadeDuration},Qn.prototype.stillRecent=function(V,Y){var W=this.zoomAtLastRecencyCheck===Y?1-this.zoomAdjustment(Y):1;return this.zoomAtLastRecencyCheck=Y,this.commitTime+this.fadeDuration*W>V},Qn.prototype.setStale=function(){this.stale=!0};var Qt=Math.pow(2,25),zn=Math.pow(2,24),zt=Math.pow(2,17),sn=Math.pow(2,16),hn=Math.pow(2,9),Dn=Math.pow(2,8),Rn=Math.pow(2,1);function Hn(V){if(0===V.opacity&&!V.placed)return 0;if(1===V.opacity&&V.placed)return 4294967295;var Y=V.placed?1:0,W=Math.floor(127*V.opacity);return W*Qt+Y*zn+W*zt+Y*sn+W*hn+Y*Dn+W*Rn+Y}var Mn=0,un=function(V){this._sortAcrossTiles="viewport-y"!==V.layout.get("symbol-z-order")&&void 0!==V.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};un.prototype.continuePlacement=function(V,Y,W,re,_e){for(var Pe=this._bucketParts;this._currentTileIndex<V.length;)if(Y.getBucketParts(Pe,re,V[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_e())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(de,Me){return de.sortKey-Me.sortKey}));this._currentPartIndex<Pe.length;)if(Y.placeLayerBucketPart(Pe[this._currentPartIndex],this._seenCrossTileIDs,W),this._currentPartIndex++,_e())return!0;return!1};var fn=function(V,Y,W,re,_e,Pe,q){this.placement=new Qn(V,_e,Pe,q),this._currentPlacementIndex=Y.length-1,this._forceFullPlacement=W,this._showCollisionBoxes=re,this._done=!1};fn.prototype.isDone=function(){return this._done},fn.prototype.continuePlacement=function(V,Y,W){for(var re=this,_e=f.browser.now(),Pe=function(){var de=f.browser.now()-_e;return!re._forceFullPlacement&&de>2};this._currentPlacementIndex>=0;){var q=Y[V[this._currentPlacementIndex]],oe=this.placement.collisionIndex.transform.zoom;if("symbol"===q.type&&(!q.minzoom||q.minzoom<=oe)&&(!q.maxzoom||q.maxzoom>oe)){if(this._inProgressLayer||(this._inProgressLayer=new un(q)),this._inProgressLayer.continuePlacement(W[q.source],this.placement,this._showCollisionBoxes,q,Pe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},fn.prototype.commit=function(V){return this.placement.commit(V),this.placement};var Tn=512/f.EXTENT/2,An=function(V,Y,W){this.tileID=V,this.indexedSymbolInstances={},this.bucketInstanceId=W;for(var re=0;re<Y.length;re++){var _e=Y.get(re),Pe=_e.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:_e.crossTileID,coord:this.getScaledCoordinates(_e,V)})}};An.prototype.getScaledCoordinates=function(V,Y){var re=Tn/Math.pow(2,Y.canonical.z-this.tileID.canonical.z);return{x:Math.floor((Y.canonical.x*f.EXTENT+V.anchorX)*re),y:Math.floor((Y.canonical.y*f.EXTENT+V.anchorY)*re)}},An.prototype.findMatches=function(V,Y,W){for(var re=this.tileID.canonical.z<Y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-Y.canonical.z),_e=0;_e<V.length;_e++){var Pe=V.get(_e);if(!Pe.crossTileID){var q=this.indexedSymbolInstances[Pe.key];if(q)for(var oe=this.getScaledCoordinates(Pe,Y),de=0,Me=q;de<Me.length;de+=1){var Se=Me[de];if(Math.abs(Se.coord.x-oe.x)<=re&&Math.abs(Se.coord.y-oe.y)<=re&&!W[Se.crossTileID]){W[Se.crossTileID]=!0,Pe.crossTileID=Se.crossTileID;break}}}}};var Gn=function(){this.maxCrossTileID=0};Gn.prototype.generate=function(){return++this.maxCrossTileID};var Zn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Zn.prototype.handleWrapJump=function(V){var Y=Math.round((V-this.lng)/360);if(0!==Y)for(var W in this.indexes){var re=this.indexes[W],_e={};for(var Pe in re){var q=re[Pe];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+Y),_e[q.tileID.key]=q}this.indexes[W]=_e}this.lng=V},Zn.prototype.addBucket=function(V,Y,W){if(this.indexes[V.overscaledZ]&&this.indexes[V.overscaledZ][V.key]){if(this.indexes[V.overscaledZ][V.key].bucketInstanceId===Y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(V.overscaledZ,this.indexes[V.overscaledZ][V.key])}for(var re=0;re<Y.symbolInstances.length;re++)Y.symbolInstances.get(re).crossTileID=0;this.usedCrossTileIDs[V.overscaledZ]||(this.usedCrossTileIDs[V.overscaledZ]={});var _e=this.usedCrossTileIDs[V.overscaledZ];for(var Pe in this.indexes){var q=this.indexes[Pe];if(Number(Pe)>V.overscaledZ)for(var oe in q){var de=q[oe];de.tileID.isChildOf(V)&&de.findMatches(Y.symbolInstances,V,_e)}else{var Me=q[V.scaledTo(Number(Pe)).key];Me&&Me.findMatches(Y.symbolInstances,V,_e)}}for(var Se=0;Se<Y.symbolInstances.length;Se++){var ze=Y.symbolInstances.get(Se);ze.crossTileID||(ze.crossTileID=W.generate(),_e[ze.crossTileID]=!0)}return void 0===this.indexes[V.overscaledZ]&&(this.indexes[V.overscaledZ]={}),this.indexes[V.overscaledZ][V.key]=new An(V,Y.symbolInstances,Y.bucketInstanceId),!0},Zn.prototype.removeBucketCrossTileIDs=function(V,Y){for(var W in Y.indexedSymbolInstances)for(var re=0,_e=Y.indexedSymbolInstances[W];re<_e.length;re+=1)delete this.usedCrossTileIDs[V][_e[re].crossTileID]},Zn.prototype.removeStaleBuckets=function(V){var Y=!1;for(var W in this.indexes){var re=this.indexes[W];for(var _e in re)V[re[_e].bucketInstanceId]||(this.removeBucketCrossTileIDs(W,re[_e]),delete re[_e],Y=!0)}return Y};var lr=function(){this.layerIndexes={},this.crossTileIDs=new Gn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};lr.prototype.addLayer=function(V,Y,W){var re=this.layerIndexes[V.id];void 0===re&&(re=this.layerIndexes[V.id]=new Zn);var _e=!1,Pe={};re.handleWrapJump(W);for(var q=0,oe=Y;q<oe.length;q+=1){var de=oe[q],Me=de.getBucket(V);Me&&V.id===Me.layerIds[0]&&(Me.bucketInstanceId||(Me.bucketInstanceId=++this.maxBucketInstanceId),re.addBucket(de.tileID,Me,this.crossTileIDs)&&(_e=!0),Pe[Me.bucketInstanceId]=!0)}return re.removeStaleBuckets(Pe)&&(_e=!0),_e},lr.prototype.pruneUnusedLayers=function(V){var Y={};for(var W in V.forEach(function(re){Y[re]=!0}),this.layerIndexes)Y[W]||delete this.layerIndexes[W]};var nr=function(V,Y){return f.emitValidationErrors(V,Y&&Y.filter(function(W){return"source.canvas"!==W.identifier}))},br=f.pick(_t,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),or=f.pick(_t,["setCenter","setZoom","setBearing","setPitch"]),dr=function(){var V={},Y=f.styleSpec.$version;for(var W in f.styleSpec.$root){var _e,re=f.styleSpec.$root[W];re.required&&null!=(_e="version"===W?Y:"array"===re.type?[]:{})&&(V[W]=_e)}return V}(),kr=function(V){function Y(W,re){var _e=this;void 0===re&&(re={}),V.call(this),this.map=W,this.dispatcher=new P(Et(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new b(W._requestManager,re.localIdeographFontFamily),this.lineAtlas=new O(256,512),this.crossTileSymbolIndex=new lr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new f.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",f.getReferrer());var Pe=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(q){Pe.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:q.pluginStatus,pluginURL:q.pluginURL},function(de,Me){if(f.triggerPluginCompletionEvent(de),Me&&Me.every(function(ze){return ze}))for(var Se in Pe.sourceCaches)Pe.sourceCaches[Se].reload()})}),this.on("data",function(q){if("source"===q.dataType&&"metadata"===q.sourceDataType){var oe=_e.sourceCaches[q.sourceId];if(oe){var de=oe.getSource();if(de&&de.vectorLayerIds)for(var Me in _e._layers){var Se=_e._layers[Me];Se.source===de.id&&_e._validateLayer(Se)}}}})}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.loadURL=function(W,re){var _e=this;void 0===re&&(re={}),this.fire(new f.Event("dataloading",{dataType:"style"}));var Pe="boolean"==typeof re.validate?re.validate:!f.isMapboxURL(W);W=this.map._requestManager.normalizeStyleURL(W,re.accessToken);var q=this.map._requestManager.transformRequest(W,f.ResourceType.Style);this._request=f.getJSON(q,function(oe,de){_e._request=null,oe?_e.fire(new f.ErrorEvent(oe)):de&&_e._load(de,Pe)})},Y.prototype.loadJSON=function(W,re){var _e=this;void 0===re&&(re={}),this.fire(new f.Event("dataloading",{dataType:"style"})),this._request=f.browser.frame(function(){_e._request=null,_e._load(W,!1!==re.validate)})},Y.prototype.loadEmpty=function(){this.fire(new f.Event("dataloading",{dataType:"style"})),this._load(dr,!1)},Y.prototype._load=function(W,re){if(!re||!nr(this,f.validateStyle(W))){for(var _e in this._loaded=!0,this.stylesheet=W,W.sources)this.addSource(_e,W.sources[_e],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(W.glyphs);var Pe=Nt(this.stylesheet.layers);this._order=Pe.map(function(Me){return Me.id}),this._layers={},this._serializedLayers={};for(var q=0,oe=Pe;q<oe.length;q+=1){var de=oe[q];(de=f.createStyleLayer(de)).setEventedParent(this,{layer:{id:de.id}}),this._layers[de.id]=de,this._serializedLayers[de.id]=de.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new S(this.stylesheet.light),this.fire(new f.Event("data",{dataType:"style"})),this.fire(new f.Event("style.load"))}},Y.prototype._loadSprite=function(W){var re=this;this._spriteRequest=function(_e,Pe,q){var oe,de,Me,Se=f.browser.devicePixelRatio>1?"@2x":"",ze=f.getJSON(Pe.transformRequest(Pe.normalizeSpriteURL(_e,Se,".json"),f.ResourceType.SpriteJSON),function(tt,rt){ze=null,Me||(Me=tt,oe=rt,Xe())}),Ye=f.getImage(Pe.transformRequest(Pe.normalizeSpriteURL(_e,Se,".png"),f.ResourceType.SpriteImage),function(tt,rt){Ye=null,Me||(Me=tt,de=rt,Xe())});function Xe(){if(Me)q(Me);else if(oe&&de){var tt=f.browser.getImageData(de),rt={};for(var ft in oe){var bt=oe[ft],At=bt.width,Ut=bt.height,qt=bt.x,jt=bt.y,Kt=bt.sdf,Vt=bt.pixelRatio,gn=bt.stretchX,ln=bt.stretchY,nn=bt.content,On=new f.RGBAImage({width:At,height:Ut});f.RGBAImage.copy(tt,On,{x:qt,y:jt},{x:0,y:0},{width:At,height:Ut}),rt[ft]={data:On,pixelRatio:Vt,sdf:Kt,stretchX:gn,stretchY:ln,content:nn}}q(null,rt)}}return{cancel:function(){ze&&(ze.cancel(),ze=null),Ye&&(Ye.cancel(),Ye=null)}}}(W,this.map._requestManager,function(_e,Pe){if(re._spriteRequest=null,_e)re.fire(new f.ErrorEvent(_e));else if(Pe)for(var q in Pe)re.imageManager.addImage(q,Pe[q]);re.imageManager.setLoaded(!0),re._availableImages=re.imageManager.listImages(),re.dispatcher.broadcast("setImages",re._availableImages),re.fire(new f.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(W){var re=this.sourceCaches[W.source];if(re){var _e=W.sourceLayer;if(_e){var Pe=re.getSource();("geojson"===Pe.type||Pe.vectorLayerIds&&-1===Pe.vectorLayerIds.indexOf(_e))&&this.fire(new f.ErrorEvent(new Error('Source layer "'+_e+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+W.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var W in this.sourceCaches)if(!this.sourceCaches[W].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(W){for(var re=[],_e=0,Pe=W;_e<Pe.length;_e+=1){var oe=this._layers[Pe[_e]];"custom"!==oe.type&&re.push(oe.serialize())}return re},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var W in this.sourceCaches)if(this.sourceCaches[W].hasTransition())return!0;for(var re in this._layers)if(this._layers[re].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(W){if(this._loaded){var re=this._changed;if(this._changed){var _e=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);for(var q in(_e.length||Pe.length)&&this._updateWorkerLayers(_e,Pe),this._updatedSources){var oe=this._updatedSources[q];"reload"===oe?this._reloadSource(q):"clear"===oe&&this._clearSource(q)}for(var de in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[de].updateTransitions(W);this.light.updateTransitions(W),this._resetUpdates()}for(var Me in this.sourceCaches)this.sourceCaches[Me].used=!1;for(var Se=0,ze=this._order;Se<ze.length;Se+=1){var Xe=this._layers[ze[Se]];Xe.recalculate(W,this._availableImages),!Xe.isHidden(W.zoom)&&Xe.source&&(this.sourceCaches[Xe.source].used=!0)}this.light.recalculate(W),this.z=W.zoom,re&&this.fire(new f.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var W=Object.keys(this._changedImages);if(W.length){for(var re in this.sourceCaches)this.sourceCaches[re].reloadTilesForDependencies(["icons","patterns"],W);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(W,re){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(W),removedIds:re})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(W){var re=this;if(this._checkLoaded(),nr(this,f.validateStyle(W)))return!1;(W=f.clone$1(W)).layers=Nt(W.layers);var _e=function cn(V,Y){if(!V)return[{command:_t.setStyle,args:[Y]}];var W=[];try{if(!f.deepEqual(V.version,Y.version))return[{command:_t.setStyle,args:[Y]}];f.deepEqual(V.center,Y.center)||W.push({command:_t.setCenter,args:[Y.center]}),f.deepEqual(V.zoom,Y.zoom)||W.push({command:_t.setZoom,args:[Y.zoom]}),f.deepEqual(V.bearing,Y.bearing)||W.push({command:_t.setBearing,args:[Y.bearing]}),f.deepEqual(V.pitch,Y.pitch)||W.push({command:_t.setPitch,args:[Y.pitch]}),f.deepEqual(V.sprite,Y.sprite)||W.push({command:_t.setSprite,args:[Y.sprite]}),f.deepEqual(V.glyphs,Y.glyphs)||W.push({command:_t.setGlyphs,args:[Y.glyphs]}),f.deepEqual(V.transition,Y.transition)||W.push({command:_t.setTransition,args:[Y.transition]}),f.deepEqual(V.light,Y.light)||W.push({command:_t.setLight,args:[Y.light]});var re={},_e=[];!function(q,oe,de,Me){var Se;for(Se in oe=oe||{},q=q||{})q.hasOwnProperty(Se)&&(oe.hasOwnProperty(Se)||Pt(Se,de,Me));for(Se in oe)oe.hasOwnProperty(Se)&&(q.hasOwnProperty(Se)?f.deepEqual(q[Se],oe[Se])||("geojson"===q[Se].type&&"geojson"===oe[Se].type&&$t(q,oe,Se)?de.push({command:_t.setGeoJSONSourceData,args:[Se,oe[Se].data]}):Zt(Se,oe,de,Me)):Mt(Se,oe,de))}(V.sources,Y.sources,_e,re);var Pe=[];V.layers&&V.layers.forEach(function(q){re[q.source]?W.push({command:_t.removeLayer,args:[q.id]}):Pe.push(q)}),W=W.concat(_e),function(q,oe,de){oe=oe||[];var Me,Se,ze,Ye,Xe,tt,rt,ft=(q=q||[]).map(dn),bt=oe.map(dn),At=q.reduce(on,{}),Ut=oe.reduce(on,{}),qt=ft.slice(),jt=Object.create(null);for(Me=0,Se=0;Me<ft.length;Me++)Ut.hasOwnProperty(ze=ft[Me])?Se++:(de.push({command:_t.removeLayer,args:[ze]}),qt.splice(qt.indexOf(ze,Se),1));for(Me=0,Se=0;Me<bt.length;Me++)qt[qt.length-1-Me]!==(ze=bt[bt.length-1-Me])&&(At.hasOwnProperty(ze)?(de.push({command:_t.removeLayer,args:[ze]}),qt.splice(qt.lastIndexOf(ze,qt.length-Se),1)):Se++,de.push({command:_t.addLayer,args:[Ut[ze],tt=qt[qt.length-Me]]}),qt.splice(qt.length-Me,0,ze),jt[ze]=!0);for(Me=0;Me<bt.length;Me++)if(Ye=At[ze=bt[Me]],Xe=Ut[ze],!jt[ze]&&!f.deepEqual(Ye,Xe))if(f.deepEqual(Ye.source,Xe.source)&&f.deepEqual(Ye["source-layer"],Xe["source-layer"])&&f.deepEqual(Ye.type,Xe.type)){for(rt in Xt(Ye.layout,Xe.layout,de,ze,null,_t.setLayoutProperty),Xt(Ye.paint,Xe.paint,de,ze,null,_t.setPaintProperty),f.deepEqual(Ye.filter,Xe.filter)||de.push({command:_t.setFilter,args:[ze,Xe.filter]}),f.deepEqual(Ye.minzoom,Xe.minzoom)&&f.deepEqual(Ye.maxzoom,Xe.maxzoom)||de.push({command:_t.setLayerZoomRange,args:[ze,Xe.minzoom,Xe.maxzoom]}),Ye)Ye.hasOwnProperty(rt)&&"layout"!==rt&&"paint"!==rt&&"filter"!==rt&&"metadata"!==rt&&"minzoom"!==rt&&"maxzoom"!==rt&&(0===rt.indexOf("paint.")?Xt(Ye[rt],Xe[rt],de,ze,rt.slice(6),_t.setPaintProperty):f.deepEqual(Ye[rt],Xe[rt])||de.push({command:_t.setLayerProperty,args:[ze,rt,Xe[rt]]}));for(rt in Xe)Xe.hasOwnProperty(rt)&&!Ye.hasOwnProperty(rt)&&"layout"!==rt&&"paint"!==rt&&"filter"!==rt&&"metadata"!==rt&&"minzoom"!==rt&&"maxzoom"!==rt&&(0===rt.indexOf("paint.")?Xt(Ye[rt],Xe[rt],de,ze,rt.slice(6),_t.setPaintProperty):f.deepEqual(Ye[rt],Xe[rt])||de.push({command:_t.setLayerProperty,args:[ze,rt,Xe[rt]]}))}else de.push({command:_t.removeLayer,args:[ze]}),tt=qt[qt.lastIndexOf(ze)+1],de.push({command:_t.addLayer,args:[Xe,tt]})}(Pe,Y.layers,W)}catch(q){console.warn("Unable to compute style diff:",q),W=[{command:_t.setStyle,args:[Y]}]}return W}(this.serialize(),W).filter(function(q){return!(q.command in or)});if(0===_e.length)return!1;var Pe=_e.filter(function(q){return!(q.command in br)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(q){return q.command}).join(", ")+".");return _e.forEach(function(q){"setTransition"!==q.command&&re[q.command].apply(re,q.args)}),this.stylesheet=W,!0},Y.prototype.addImage=function(W,re){if(this.getImage(W))return this.fire(new f.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(W,re),this._availableImages=this.imageManager.listImages(),this._changedImages[W]=!0,this._changed=!0,this.fire(new f.Event("data",{dataType:"style"}))},Y.prototype.updateImage=function(W,re){this.imageManager.updateImage(W,re)},Y.prototype.getImage=function(W){return this.imageManager.getImage(W)},Y.prototype.removeImage=function(W){if(!this.getImage(W))return this.fire(new f.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(W),this._availableImages=this.imageManager.listImages(),this._changedImages[W]=!0,this._changed=!0,this.fire(new f.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(W,re,_e){var Pe=this;if(void 0===_e&&(_e={}),this._checkLoaded(),void 0!==this.sourceCaches[W])throw new Error("There is already a source with this ID");if(!re.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(re).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(re.type)>=0&&this._validate(f.validateStyle.source,"sources."+W,re,null,_e))){this.map&&this.map._collectResourceTiming&&(re.collectResourceTiming=!0);var q=this.sourceCaches[W]=new pt(W,re,this.dispatcher);q.style=this,q.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:q.serialize(),sourceId:W}}),q.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(W){if(this._checkLoaded(),void 0===this.sourceCaches[W])throw new Error("There is no source with this ID");for(var re in this._layers)if(this._layers[re].source===W)return this.fire(new f.ErrorEvent(new Error('Source "'+W+'" cannot be removed while layer "'+re+'" is using it.')));var _e=this.sourceCaches[W];delete this.sourceCaches[W],delete this._updatedSources[W],_e.fire(new f.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:W})),_e.setEventedParent(null),_e.clearTiles(),_e.onRemove&&_e.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(W,re){this._checkLoaded(),this.sourceCaches[W].getSource().setData(re),this._changed=!0},Y.prototype.getSource=function(W){return this.sourceCaches[W]&&this.sourceCaches[W].getSource()},Y.prototype.addLayer=function(W,re,_e){void 0===_e&&(_e={}),this._checkLoaded();var Pe=W.id;if(this.getLayer(Pe))this.fire(new f.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));else{var q;if("custom"===W.type){if(nr(this,f.validateCustomStyleLayer(W)))return;q=f.createStyleLayer(W)}else{if("object"==typeof W.source&&(this.addSource(Pe,W.source),W=f.clone$1(W),W=f.extend(W,{source:Pe})),this._validate(f.validateStyle.layer,"layers."+Pe,W,{arrayIndex:-1},_e))return;q=f.createStyleLayer(W),this._validateLayer(q),q.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[q.id]=q.serialize()}var oe=re?this._order.indexOf(re):this._order.length;if(re&&-1===oe)this.fire(new f.ErrorEvent(new Error('Layer with id "'+re+'" does not exist on this map.')));else{if(this._order.splice(oe,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=q,this._removedLayers[Pe]&&q.source&&"custom"!==q.type){var de=this._removedLayers[Pe];delete this._removedLayers[Pe],de.type!==q.type?this._updatedSources[q.source]="clear":(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause())}this._updateLayer(q),q.onAdd&&q.onAdd(this.map)}}},Y.prototype.moveLayer=function(W,re){if(this._checkLoaded(),this._changed=!0,this._layers[W]){if(W!==re){var _e=this._order.indexOf(W);this._order.splice(_e,1);var Pe=re?this._order.indexOf(re):this._order.length;re&&-1===Pe?this.fire(new f.ErrorEvent(new Error('Layer with id "'+re+'" does not exist on this map.'))):(this._order.splice(Pe,0,W),this._layerOrderChanged=!0)}}else this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be moved.")))},Y.prototype.removeLayer=function(W){this._checkLoaded();var re=this._layers[W];if(re){re.setEventedParent(null);var _e=this._order.indexOf(W);this._order.splice(_e,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[W]=re,delete this._layers[W],delete this._serializedLayers[W],delete this._updatedLayers[W],delete this._updatedPaintProps[W],re.onRemove&&re.onRemove(this.map)}else this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be removed.")))},Y.prototype.getLayer=function(W){return this._layers[W]},Y.prototype.hasLayer=function(W){return W in this._layers},Y.prototype.setLayerZoomRange=function(W,re,_e){this._checkLoaded();var Pe=this.getLayer(W);Pe?Pe.minzoom===re&&Pe.maxzoom===_e||(null!=re&&(Pe.minzoom=re),null!=_e&&(Pe.maxzoom=_e),this._updateLayer(Pe)):this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot have zoom extent.")))},Y.prototype.setFilter=function(W,re,_e){void 0===_e&&(_e={}),this._checkLoaded();var Pe=this.getLayer(W);if(Pe){if(!f.deepEqual(Pe.filter,re))return null==re?(Pe.filter=void 0,void this._updateLayer(Pe)):void(this._validate(f.validateStyle.filter,"layers."+Pe.id+".filter",re,null,_e)||(Pe.filter=f.clone$1(re),this._updateLayer(Pe)))}else this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be filtered.")))},Y.prototype.getFilter=function(W){return f.clone$1(this.getLayer(W).filter)},Y.prototype.setLayoutProperty=function(W,re,_e,Pe){void 0===Pe&&(Pe={}),this._checkLoaded();var q=this.getLayer(W);q?f.deepEqual(q.getLayoutProperty(re),_e)||(q.setLayoutProperty(re,_e,Pe),this._updateLayer(q)):this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getLayoutProperty=function(W,re){var _e=this.getLayer(W);if(_e)return _e.getLayoutProperty(re);this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style.")))},Y.prototype.setPaintProperty=function(W,re,_e,Pe){void 0===Pe&&(Pe={}),this._checkLoaded();var q=this.getLayer(W);q?f.deepEqual(q.getPaintProperty(re),_e)||(q.setPaintProperty(re,_e,Pe)&&this._updateLayer(q),this._changed=!0,this._updatedPaintProps[W]=!0):this.fire(new f.ErrorEvent(new Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},Y.prototype.getPaintProperty=function(W,re){return this.getLayer(W).getPaintProperty(re)},Y.prototype.setFeatureState=function(W,re){this._checkLoaded();var _e=W.source,Pe=W.sourceLayer,q=this.sourceCaches[_e];if(void 0!==q){var oe=q.getSource().type;"geojson"===oe&&Pe?this.fire(new f.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==oe||Pe?(void 0===W.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),q.setFeatureState(Pe,W.id,re)):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+_e+"' does not exist in the map's style.")))},Y.prototype.removeFeatureState=function(W,re){this._checkLoaded();var _e=W.source,Pe=this.sourceCaches[_e];if(void 0!==Pe){var q=Pe.getSource().type,oe="vector"===q?W.sourceLayer:void 0;"vector"!==q||oe?re&&"string"!=typeof W.id&&"number"!=typeof W.id?this.fire(new f.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):Pe.removeFeatureState(oe,W.id,re):this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+_e+"' does not exist in the map's style.")))},Y.prototype.getFeatureState=function(W){this._checkLoaded();var re=W.source,_e=W.sourceLayer,Pe=this.sourceCaches[re];if(void 0!==Pe){if("vector"!==Pe.getSource().type||_e)return void 0===W.id&&this.fire(new f.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(_e,W.id);this.fire(new f.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new f.ErrorEvent(new Error("The source '"+re+"' does not exist in the map's style.")))},Y.prototype.getTransition=function(){return f.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return f.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:f.mapObject(this.sourceCaches,function(W){return W.serialize()}),layers:this._serializeLayers(this._order)},function(W){return void 0!==W})},Y.prototype._updateLayer=function(W){this._updatedLayers[W.id]=!0,W.source&&!this._updatedSources[W.source]&&"raster"!==this.sourceCaches[W.source].getSource().type&&(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(W){for(var re=this,_e=function(nn){return"fill-extrusion"===re._layers[nn].type},Pe={},q=[],oe=this._order.length-1;oe>=0;oe--){var de=this._order[oe];if(_e(de)){Pe[de]=oe;for(var Me=0,Se=W;Me<Se.length;Me+=1){var ze=Se[Me][de];if(ze)for(var Ye=0,Xe=ze;Ye<Xe.length;Ye+=1)q.push(Xe[Ye])}}}q.sort(function(nn,On){return On.intersectionZ-nn.intersectionZ});for(var rt=[],ft=this._order.length-1;ft>=0;ft--){var bt=this._order[ft];if(_e(bt))for(var At=q.length-1;At>=0;At--){var Ut=q[At].feature;if(Pe[Ut.layer.id]<ft)break;rt.push(Ut),q.pop()}else for(var qt=0,jt=W;qt<jt.length;qt+=1){var Kt=jt[qt][bt];if(Kt)for(var Vt=0,gn=Kt;Vt<gn.length;Vt+=1)rt.push(gn[Vt].feature)}}return rt},Y.prototype.queryRenderedFeatures=function(W,re,_e){re&&re.filter&&this._validate(f.validateStyle.filter,"queryRenderedFeatures.filter",re.filter,null,re);var Pe={};if(re&&re.layers){if(!Array.isArray(re.layers))return this.fire(new f.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var q=0,oe=re.layers;q<oe.length;q+=1){var de=oe[q],Me=this._layers[de];if(!Me)return this.fire(new f.ErrorEvent(new Error("The layer '"+de+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[Me.source]=!0}}var Se=[];for(var ze in re.availableImages=this._availableImages,this.sourceCaches)re.layers&&!Pe[ze]||Se.push(ne(this.sourceCaches[ze],this._layers,this._serializedLayers,W,re,_e));return this.placement&&Se.push(function(Ye,Xe,tt,rt,ft,bt,At){for(var Ut={},qt=bt.queryRenderedSymbols(rt),jt=[],Kt=0,Vt=Object.keys(qt).map(Number);Kt<Vt.length;Kt+=1)jt.push(At[Vt[Kt]]);jt.sort(Q);for(var ln=function(){var Jn=On[nn],ur=Jn.featureIndex.lookupSymbolFeatures(qt[Jn.bucketInstanceId],Xe,Jn.bucketIndex,Jn.sourceLayerIndex,ft.filter,ft.layers,ft.availableImages,Ye);for(var vr in ur){var wr=Ut[vr]=Ut[vr]||[],Cr=ur[vr];Cr.sort(function(ir,Ar){var Lr=Jn.featureSortOrder;if(Lr){var qr=Lr.indexOf(ir.featureIndex);return Lr.indexOf(Ar.featureIndex)-qr}return Ar.featureIndex-ir.featureIndex});for(var Or=0,Rr=Cr;Or<Rr.length;Or+=1)wr.push(Rr[Or])}},nn=0,On=jt;nn<On.length;nn+=1)ln();var Pn=function(Jn){Ut[Jn].forEach(function(ur){var vr=ur.feature,Cr=tt[Ye[Jn].source].getFeatureState(vr.layer["source-layer"],vr.id);vr.source=vr.layer.source,vr.layer["source-layer"]&&(vr.sourceLayer=vr.layer["source-layer"]),vr.state=Cr})};for(var tr in Ut)Pn(tr);return Ut}(this._layers,this._serializedLayers,this.sourceCaches,W,re,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Se)},Y.prototype.querySourceFeatures=function(W,re){re&&re.filter&&this._validate(f.validateStyle.filter,"querySourceFeatures.filter",re.filter,null,re);var _e=this.sourceCaches[W];return _e?function(Pe,q){for(var oe=Pe.getRenderableIds().map(function(Xe){return Pe.getTileByID(Xe)}),de=[],Me={},Se=0;Se<oe.length;Se++){var ze=oe[Se],Ye=ze.tileID.canonical.key;Me[Ye]||(Me[Ye]=!0,ze.querySourceFeatures(de,q))}return de}(_e,re):[]},Y.prototype.addSourceType=function(W,re,_e){return Y.getSourceType(W)?_e(new Error('A source type called "'+W+'" already exists.')):(Y.setSourceType(W,re),re.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:W,url:re.workerSourceURL},_e):_e(null,null))},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(W,re){void 0===re&&(re={}),this._checkLoaded();var _e=this.light.getLight(),Pe=!1;for(var q in W)if(!f.deepEqual(W[q],_e[q])){Pe=!0;break}if(Pe){var oe={now:f.browser.now(),transition:f.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(W,re),this.light.updateTransitions(oe)}},Y.prototype._validate=function(W,re,_e,Pe,q){return void 0===q&&(q={}),(!q||!1!==q.validate)&&nr(this,W.call(f.validateStyle,f.extend({key:re,style:this.serialize(),value:_e,styleSpec:f.styleSpec},Pe)))},Y.prototype._remove=function(){for(var W in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),f.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[W].setEventedParent(null);for(var re in this.sourceCaches)this.sourceCaches[re].clearTiles(),this.sourceCaches[re].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(W){this.sourceCaches[W].clearTiles()},Y.prototype._reloadSource=function(W){this.sourceCaches[W].resume(),this.sourceCaches[W].reload()},Y.prototype._updateSources=function(W){for(var re in this.sourceCaches)this.sourceCaches[re].update(W)},Y.prototype._generateCollisionBoxes=function(){for(var W in this.sourceCaches)this._reloadSource(W)},Y.prototype._updatePlacement=function(W,re,_e,Pe,q){void 0===q&&(q=!1);for(var oe=!1,de=!1,Me={},Se=0,ze=this._order;Se<ze.length;Se+=1){var Xe=this._layers[ze[Se]];if("symbol"===Xe.type){if(!Me[Xe.source]){var tt=this.sourceCaches[Xe.source];Me[Xe.source]=tt.getRenderableIds(!0).map(function(qt){return tt.getTileByID(qt)}).sort(function(qt,jt){return jt.tileID.overscaledZ-qt.tileID.overscaledZ||(qt.tileID.isLessThan(jt.tileID)?-1:1)})}var rt=this.crossTileSymbolIndex.addLayer(Xe,Me[Xe.source],W.center.lng);oe=oe||rt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((q=q||this._layerOrderChanged||0===_e)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(f.browser.now(),W.zoom))&&(this.pauseablePlacement=new fn(W,this._order,q,re,_e,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Me),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(f.browser.now()),de=!0),oe&&this.pauseablePlacement.placement.setStale()),de||oe)for(var ft=0,bt=this._order;ft<bt.length;ft+=1){var Ut=this._layers[bt[ft]];"symbol"===Ut.type&&this.placement.updateLayerOpacities(Ut,Me[Ut.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(f.browser.now())},Y.prototype._releaseSymbolFadeTiles=function(){for(var W in this.sourceCaches)this.sourceCaches[W].releaseSymbolFadeTiles()},Y.prototype.getImages=function(W,re,_e){this.imageManager.getImages(re.icons,_e),this._updateTilesForChangedImages();var Pe=this.sourceCaches[re.source];Pe&&Pe.setDependencies(re.tileID.key,re.type,re.icons)},Y.prototype.getGlyphs=function(W,re,_e){this.glyphManager.getGlyphs(re.stacks,_e)},Y.prototype.getResource=function(W,re,_e){return f.makeRequest(re,_e)},Y}(f.Evented);kr.getSourceType=function(V){return ue[V]},kr.setSourceType=function(V,Y){ue[V]=Y},kr.registerForPluginStateChange=f.registerForPluginStateChange;var Sr=f.createLayout([{name:"a_pos",type:"Int16",components:2}]),Pr=Wi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),rr=Wi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zr=Wi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),ar=Wi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Nr=Wi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=Wi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Gi=Wi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),vo=Wi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),so=Wi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),lo=Wi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Qi=Wi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Co=Wi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Rs=Wi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qr=Wi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),_s=Wi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Iu=Wi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Xo=Wi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),jl=Wi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),xc=Wi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Bi=Wi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Wc=Wi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ul=Wi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Vl=Wi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ja=Wi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Ro=Wi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),cl=Wi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Wi(V,Y){var W=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,re={};return{fragmentSource:V=V.replace(W,function(_e,Pe,q,oe,de){return re[de]=!0,"define"===Pe?"\n#ifndef HAS_UNIFORM_u_"+de+"\nvarying "+q+" "+oe+" "+de+";\n#else\nuniform "+q+" "+oe+" u_"+de+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+de+"\n    "+q+" "+oe+" "+de+" = u_"+de+";\n#endif\n"}),vertexSource:Y=Y.replace(W,function(_e,Pe,q,oe,de){var Me="float"===oe?"vec2":"vec4",Se=de.match(/color/)?"color":Me;return re[de]?"define"===Pe?"\n#ifndef HAS_UNIFORM_u_"+de+"\nuniform lowp float u_"+de+"_t;\nattribute "+q+" "+Me+" a_"+de+";\nvarying "+q+" "+oe+" "+de+";\n#else\nuniform "+q+" "+oe+" u_"+de+";\n#endif\n":"vec4"===Se?"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+de+" = a_"+de+";\n#else\n    "+q+" "+oe+" "+de+" = u_"+de+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+de+" = unpack_mix_"+Se+"(a_"+de+", u_"+de+"_t);\n#else\n    "+q+" "+oe+" "+de+" = u_"+de+";\n#endif\n":"define"===Pe?"\n#ifndef HAS_UNIFORM_u_"+de+"\nuniform lowp float u_"+de+"_t;\nattribute "+q+" "+Me+" a_"+de+";\n#else\nuniform "+q+" "+oe+" u_"+de+";\n#endif\n":"vec4"===Se?"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+q+" "+oe+" "+de+" = a_"+de+";\n#else\n    "+q+" "+oe+" "+de+" = u_"+de+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+de+"\n    "+q+" "+oe+" "+de+" = unpack_mix_"+Se+"(a_"+de+", u_"+de+"_t);\n#else\n    "+q+" "+oe+" "+de+" = u_"+de+";\n#endif\n"})}}var Fs=Object.freeze({__proto__:null,prelude:Pr,background:rr,backgroundPattern:Zr,circle:ar,clippingMask:Nr,heatmap:ii,heatmapTexture:Gi,collisionBox:vo,collisionCircle:so,debug:lo,fill:Qi,fillOutline:Co,fillOutlinePattern:Rs,fillPattern:Qr,fillExtrusion:_s,fillExtrusionPattern:Iu,hillshadePrepare:Xo,hillshade:jl,line:xc,lineGradient:Bi,linePattern:Wc,lineSDF:Ul,raster:Vl,symbolIcon:ja,symbolSDF:Ro,symbolTextAndIcon:cl}),Ka=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ka.prototype.bind=function(V,Y,W,re,_e,Pe,q,oe){this.context=V;for(var de=this.boundPaintVertexBuffers.length!==re.length,Me=0;!de&&Me<re.length;Me++)this.boundPaintVertexBuffers[Me]!==re[Me]&&(de=!0);V.extVertexArrayObject&&this.vao&&this.boundProgram===Y&&this.boundLayoutVertexBuffer===W&&!de&&this.boundIndexBuffer===_e&&this.boundVertexOffset===Pe&&this.boundDynamicVertexBuffer===q&&this.boundDynamicVertexBuffer2===oe?(V.bindVertexArrayOES.set(this.vao),q&&q.bind(),_e&&_e.dynamicDraw&&_e.bind(),oe&&oe.bind()):this.freshBind(Y,W,re,_e,Pe,q,oe)},Ka.prototype.freshBind=function(V,Y,W,re,_e,Pe,q){var oe,de=V.numAttributes,Me=this.context,Se=Me.gl;if(Me.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Me.extVertexArrayObject.createVertexArrayOES(),Me.bindVertexArrayOES.set(this.vao),oe=0,this.boundProgram=V,this.boundLayoutVertexBuffer=Y,this.boundPaintVertexBuffers=W,this.boundIndexBuffer=re,this.boundVertexOffset=_e,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=q;else{oe=Me.currentNumAttributes||0;for(var ze=de;ze<oe;ze++)Se.disableVertexAttribArray(ze)}Y.enableAttributes(Se,V);for(var Ye=0,Xe=W;Ye<Xe.length;Ye+=1)Xe[Ye].enableAttributes(Se,V);Pe&&Pe.enableAttributes(Se,V),q&&q.enableAttributes(Se,V),Y.bind(),Y.setVertexAttribPointers(Se,V,_e);for(var tt=0,rt=W;tt<rt.length;tt+=1){var ft=rt[tt];ft.bind(),ft.setVertexAttribPointers(Se,V,_e)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers(Se,V,_e)),re&&re.bind(),q&&(q.bind(),q.setVertexAttribPointers(Se,V,_e)),Me.currentNumAttributes=de},Ka.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ns=function(V,Y,W,re,_e){var Pe=V.gl;this.program=Pe.createProgram();var q=W?W.defines():[];_e&&q.push("#define OVERDRAW_INSPECTOR;");var oe=q.concat(Pr.fragmentSource,Y.fragmentSource).join("\n"),de=q.concat(Pr.vertexSource,Y.vertexSource).join("\n"),Me=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(Me,oe),Pe.compileShader(Me),Pe.attachShader(this.program,Me);var Se=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost())this.failedToCreate=!0;else{Pe.shaderSource(Se,de),Pe.compileShader(Se),Pe.attachShader(this.program,Se);for(var ze=W?W.layoutAttributes:[],Ye=0;Ye<ze.length;Ye++)Pe.bindAttribLocation(this.program,Ye,ze[Ye].name);Pe.linkProgram(this.program),Pe.deleteShader(Se),Pe.deleteShader(Me),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Xe={},tt=0;tt<this.numAttributes;tt++){var rt=Pe.getActiveAttrib(this.program,tt);rt&&(this.attributes[rt.name]=Pe.getAttribLocation(this.program,rt.name))}for(var ft=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),bt=0;bt<ft;bt++){var At=Pe.getActiveUniform(this.program,bt);At&&(Xe[At.name]=Pe.getUniformLocation(this.program,At.name))}this.fixedUniforms=re(V,Xe),this.binderUniforms=W?W.getUniforms(V,Xe):[]}}};function Ea(V,Y,W){var re=1/mr(W,1,Y.transform.tileZoom),_e=Math.pow(2,W.tileID.overscaledZ),Pe=W.tileSize*Math.pow(2,Y.transform.tileZoom)/_e,q=Pe*(W.tileID.canonical.x+W.tileID.wrap*_e),oe=Pe*W.tileID.canonical.y;return{u_image:0,u_texsize:W.imageAtlasTexture.size,u_scale:[re,V.fromScale,V.toScale],u_fade:V.t,u_pixel_coord_upper:[q>>16,oe>>16],u_pixel_coord_lower:[65535&q,65535&oe]}}Ns.prototype.draw=function(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze,Ye,Xe,tt,rt){var ft,bt=V.gl;if(!this.failedToCreate){for(var At in V.program.set(this.program),V.setDepthMode(W),V.setStencilMode(re),V.setColorMode(_e),V.setCullFace(Pe),this.fixedUniforms)this.fixedUniforms[At].set(q[At]);Xe&&Xe.setUniforms(V,this.binderUniforms,ze,{zoom:Ye});for(var Ut=(ft={},ft[bt.LINES]=2,ft[bt.TRIANGLES]=3,ft[bt.LINE_STRIP]=1,ft)[Y],qt=0,jt=Se.get();qt<jt.length;qt+=1){var Kt=jt[qt],Vt=Kt.vaos||(Kt.vaos={});(Vt[oe]||(Vt[oe]=new Ka)).bind(V,this,de,Xe?Xe.getPaintVertexBuffers():[],Me,Kt.vertexOffset,tt,rt),bt.drawElements(Y,Kt.primitiveLength*Ut,bt.UNSIGNED_SHORT,Kt.primitiveOffset*Ut*2)}}};var fl=function(V,Y,W,re){var _e=Y.style.light,Pe=_e.properties.get("position"),q=[Pe.x,Pe.y,Pe.z],oe=f.create$1();"viewport"===_e.properties.get("anchor")&&f.fromRotation(oe,-Y.transform.angle),f.transformMat3(q,q,oe);var de=_e.properties.get("color");return{u_matrix:V,u_lightpos:q,u_lightintensity:_e.properties.get("intensity"),u_lightcolor:[de.r,de.g,de.b],u_vertical_gradient:+W,u_opacity:re}},Ca=function(V,Y,W,re,_e,Pe,q){return f.extend(fl(V,Y,W,re),Ea(Pe,Y,q),{u_height_factor:-Math.pow(2,_e.overscaledZ)/q.tileSize/8})},Xs=function(V){return{u_matrix:V}},Br=function(V,Y,W,re){return f.extend(Xs(V),Ea(W,Y,re))},Zu=function(V,Y){return{u_matrix:V,u_world:Y}},Vr=function(V,Y,W,re,_e){return f.extend(Br(V,Y,W,re),{u_world:_e})},su=function(V,Y,W,re){var _e,Pe,q=V.transform;if("map"===re.paint.get("circle-pitch-alignment")){var oe=mr(W,1,q.zoom);_e=!0,Pe=[oe,oe]}else _e=!1,Pe=q.pixelsToGLUnits;return{u_camera_to_center_distance:q.cameraToCenterDistance,u_scale_with_map:+("map"===re.paint.get("circle-pitch-scale")),u_matrix:V.translatePosMatrix(Y.posMatrix,W,re.paint.get("circle-translate"),re.paint.get("circle-translate-anchor")),u_pitch_with_map:+_e,u_device_pixel_ratio:f.browser.devicePixelRatio,u_extrude_scale:Pe}},lu=function(V,Y,W){var re=mr(W,1,Y.zoom),_e=Math.pow(2,Y.zoom-W.tileID.overscaledZ),Pe=W.tileID.overscaleFactor();return{u_matrix:V,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:re,u_extrude_scale:[Y.pixelsToGLUnits[0]/(re*_e),Y.pixelsToGLUnits[1]/(re*_e)],u_overscale_factor:Pe}},Hl=function(V,Y,W){return{u_matrix:V,u_inv_matrix:Y,u_camera_to_center_distance:W.cameraToCenterDistance,u_viewport_size:[W.width,W.height]}},Yu=function(V,Y,W){return void 0===W&&(W=1),{u_matrix:V,u_color:Y,u_overlay:0,u_overlay_scale:W}},bc=function(V){return{u_matrix:V}},ql=function(V,Y,W,re){return{u_matrix:V,u_extrude_scale:mr(Y,1,W),u_intensity:re}},Ja=function(V,Y,W){var re=V.transform;return{u_matrix:ws(V,Y,W),u_ratio:1/mr(Y,1,re.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_units_to_pixels:[1/re.pixelsToGLUnits[0],1/re.pixelsToGLUnits[1]]}},Vi=function(V,Y,W){return f.extend(Ja(V,Y,W),{u_image:0})},Gl=function(V,Y,W,re){var _e=V.transform,Pe=Ks(Y,_e);return{u_matrix:ws(V,Y,W),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/mr(Y,1,_e.zoom),u_device_pixel_ratio:f.browser.devicePixelRatio,u_image:0,u_scale:[Pe,re.fromScale,re.toScale],u_fade:re.t,u_units_to_pixels:[1/_e.pixelsToGLUnits[0],1/_e.pixelsToGLUnits[1]]}},Ua=function(V,Y,W,re,_e){var q=V.lineAtlas,oe=Ks(Y,V.transform),de="round"===W.layout.get("line-cap"),Me=q.getDash(re.from,de),Se=q.getDash(re.to,de),ze=Me.width*_e.fromScale,Ye=Se.width*_e.toScale;return f.extend(Ja(V,Y,W),{u_patternscale_a:[oe/ze,-Me.height/2],u_patternscale_b:[oe/Ye,-Se.height/2],u_sdfgamma:q.width/(256*Math.min(ze,Ye)*f.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Me.y,u_tex_y_b:Se.y,u_mix:_e.t})};function Ks(V,Y){return 1/mr(V,1,Y.tileZoom)}function ws(V,Y,W){return V.translatePosMatrix(Y.tileID.posMatrix,Y,W.paint.get("line-translate"),W.paint.get("line-translate-anchor"))}var ha=function(V,Y,W,re,_e){return{u_matrix:V,u_tl_parent:Y,u_scale_parent:W,u_buffer_scale:1,u_fade_t:re.mix,u_opacity:re.opacity*_e.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_e.paint.get("raster-brightness-min"),u_brightness_high:_e.paint.get("raster-brightness-max"),u_saturation_factor:(q=_e.paint.get("raster-saturation"),q>0?1-1/(1.001-q):-q),u_contrast_factor:(Pe=_e.paint.get("raster-contrast"),Pe>0?1/(1-Pe):1+Pe),u_spin_weights:Wl(_e.paint.get("raster-hue-rotate"))};var Pe,q};function Wl(V){V*=Math.PI/180;var Y=Math.sin(V),W=Math.cos(V);return[(2*W+1)/3,(-Math.sqrt(3)*Y-W+1)/3,(Math.sqrt(3)*Y-W+1)/3]}var Js,no=function(V,Y,W,re,_e,Pe,q,oe,de,Me){var Se=_e.transform;return{u_is_size_zoom_constant:+("constant"===V||"source"===V),u_is_size_feature_constant:+("constant"===V||"camera"===V),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:Se.cameraToCenterDistance,u_pitch:Se.pitch/360*2*Math.PI,u_rotate_symbol:+W,u_aspect_ratio:Se.width/Se.height,u_fade_change:_e.options.fadeDuration?_e.symbolFadeChange:1,u_matrix:Pe,u_label_plane_matrix:q,u_coord_matrix:oe,u_is_text:+de,u_pitch_with_map:+re,u_texsize:Me,u_texture:0}},Qa=function(V,Y,W,re,_e,Pe,q,oe,de,Me,Se){var ze=_e.transform;return f.extend(no(V,Y,W,re,_e,Pe,q,oe,de,Me),{u_gamma_scale:re?Math.cos(ze._pitch)*ze.cameraToCenterDistance:1,u_device_pixel_ratio:f.browser.devicePixelRatio,u_is_halo:+Se})},Zl=function(V,Y,W,re,_e,Pe,q,oe,de,Me){return f.extend(Qa(V,Y,W,re,_e,Pe,q,oe,!0,de,!0),{u_texsize_icon:Me,u_texture_icon:1})},es=function(V,Y,W){return{u_matrix:V,u_opacity:Y,u_color:W}},Ts=function(V,Y,W,re,_e,Pe){return f.extend((oe=Pe,Me=_e,Se=(de=W).imageManager.getPattern((q=re).from.toString()),ze=de.imageManager.getPattern(q.to.toString()),Xe=(Ye=de.imageManager.getPixelSize()).width,tt=Ye.height,rt=Math.pow(2,Me.tileID.overscaledZ),bt=(ft=Me.tileSize*Math.pow(2,de.transform.tileZoom)/rt)*(Me.tileID.canonical.x+Me.tileID.wrap*rt),At=ft*Me.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Se.tl,u_pattern_br_a:Se.br,u_pattern_tl_b:ze.tl,u_pattern_br_b:ze.br,u_texsize:[Xe,tt],u_mix:oe.t,u_pattern_size_a:Se.displaySize,u_pattern_size_b:ze.displaySize,u_scale_a:oe.fromScale,u_scale_b:oe.toScale,u_tile_units_to_pixels:1/mr(Me,1,de.transform.tileZoom),u_pixel_coord_upper:[bt>>16,At>>16],u_pixel_coord_lower:[65535&bt,65535&At]}),{u_matrix:V,u_opacity:Y});var q,oe,de,Me,Se,ze,Ye,Xe,tt,rt,ft,bt,At},_c={fillExtrusion:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_lightpos:new f.Uniform3f(V,Y.u_lightpos),u_lightintensity:new f.Uniform1f(V,Y.u_lightintensity),u_lightcolor:new f.Uniform3f(V,Y.u_lightcolor),u_vertical_gradient:new f.Uniform1f(V,Y.u_vertical_gradient),u_opacity:new f.Uniform1f(V,Y.u_opacity)}},fillExtrusionPattern:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_lightpos:new f.Uniform3f(V,Y.u_lightpos),u_lightintensity:new f.Uniform1f(V,Y.u_lightintensity),u_lightcolor:new f.Uniform3f(V,Y.u_lightcolor),u_vertical_gradient:new f.Uniform1f(V,Y.u_vertical_gradient),u_height_factor:new f.Uniform1f(V,Y.u_height_factor),u_image:new f.Uniform1i(V,Y.u_image),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new f.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(V,Y.u_pixel_coord_lower),u_scale:new f.Uniform3f(V,Y.u_scale),u_fade:new f.Uniform1f(V,Y.u_fade),u_opacity:new f.Uniform1f(V,Y.u_opacity)}},fill:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix)}},fillPattern:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_image:new f.Uniform1i(V,Y.u_image),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new f.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(V,Y.u_pixel_coord_lower),u_scale:new f.Uniform3f(V,Y.u_scale),u_fade:new f.Uniform1f(V,Y.u_fade)}},fillOutline:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_world:new f.Uniform2f(V,Y.u_world)}},fillOutlinePattern:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_world:new f.Uniform2f(V,Y.u_world),u_image:new f.Uniform1i(V,Y.u_image),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_pixel_coord_upper:new f.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(V,Y.u_pixel_coord_lower),u_scale:new f.Uniform3f(V,Y.u_scale),u_fade:new f.Uniform1f(V,Y.u_fade)}},circle:function(V,Y){return{u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_scale_with_map:new f.Uniform1i(V,Y.u_scale_with_map),u_pitch_with_map:new f.Uniform1i(V,Y.u_pitch_with_map),u_extrude_scale:new f.Uniform2f(V,Y.u_extrude_scale),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix)}},collisionBox:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new f.Uniform1f(V,Y.u_pixels_to_tile_units),u_extrude_scale:new f.Uniform2f(V,Y.u_extrude_scale),u_overscale_factor:new f.Uniform1f(V,Y.u_overscale_factor)}},collisionCircle:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_inv_matrix:new f.UniformMatrix4f(V,Y.u_inv_matrix),u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_viewport_size:new f.Uniform2f(V,Y.u_viewport_size)}},debug:function(V,Y){return{u_color:new f.UniformColor(V,Y.u_color),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_overlay:new f.Uniform1i(V,Y.u_overlay),u_overlay_scale:new f.Uniform1f(V,Y.u_overlay_scale)}},clippingMask:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix)}},heatmap:function(V,Y){return{u_extrude_scale:new f.Uniform1f(V,Y.u_extrude_scale),u_intensity:new f.Uniform1f(V,Y.u_intensity),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix)}},heatmapTexture:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_world:new f.Uniform2f(V,Y.u_world),u_image:new f.Uniform1i(V,Y.u_image),u_color_ramp:new f.Uniform1i(V,Y.u_color_ramp),u_opacity:new f.Uniform1f(V,Y.u_opacity)}},hillshade:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_image:new f.Uniform1i(V,Y.u_image),u_latrange:new f.Uniform2f(V,Y.u_latrange),u_light:new f.Uniform2f(V,Y.u_light),u_shadow:new f.UniformColor(V,Y.u_shadow),u_highlight:new f.UniformColor(V,Y.u_highlight),u_accent:new f.UniformColor(V,Y.u_accent)}},hillshadePrepare:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_image:new f.Uniform1i(V,Y.u_image),u_dimension:new f.Uniform2f(V,Y.u_dimension),u_zoom:new f.Uniform1f(V,Y.u_zoom),u_maxzoom:new f.Uniform1f(V,Y.u_maxzoom),u_unpack:new f.Uniform4f(V,Y.u_unpack)}},line:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_ratio:new f.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(V,Y.u_units_to_pixels)}},lineGradient:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_ratio:new f.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(V,Y.u_units_to_pixels),u_image:new f.Uniform1i(V,Y.u_image)}},linePattern:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_ratio:new f.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_image:new f.Uniform1i(V,Y.u_image),u_units_to_pixels:new f.Uniform2f(V,Y.u_units_to_pixels),u_scale:new f.Uniform3f(V,Y.u_scale),u_fade:new f.Uniform1f(V,Y.u_fade)}},lineSDF:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_ratio:new f.Uniform1f(V,Y.u_ratio),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_units_to_pixels:new f.Uniform2f(V,Y.u_units_to_pixels),u_patternscale_a:new f.Uniform2f(V,Y.u_patternscale_a),u_patternscale_b:new f.Uniform2f(V,Y.u_patternscale_b),u_sdfgamma:new f.Uniform1f(V,Y.u_sdfgamma),u_image:new f.Uniform1i(V,Y.u_image),u_tex_y_a:new f.Uniform1f(V,Y.u_tex_y_a),u_tex_y_b:new f.Uniform1f(V,Y.u_tex_y_b),u_mix:new f.Uniform1f(V,Y.u_mix)}},raster:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_tl_parent:new f.Uniform2f(V,Y.u_tl_parent),u_scale_parent:new f.Uniform1f(V,Y.u_scale_parent),u_buffer_scale:new f.Uniform1f(V,Y.u_buffer_scale),u_fade_t:new f.Uniform1f(V,Y.u_fade_t),u_opacity:new f.Uniform1f(V,Y.u_opacity),u_image0:new f.Uniform1i(V,Y.u_image0),u_image1:new f.Uniform1i(V,Y.u_image1),u_brightness_low:new f.Uniform1f(V,Y.u_brightness_low),u_brightness_high:new f.Uniform1f(V,Y.u_brightness_high),u_saturation_factor:new f.Uniform1f(V,Y.u_saturation_factor),u_contrast_factor:new f.Uniform1f(V,Y.u_contrast_factor),u_spin_weights:new f.Uniform3f(V,Y.u_spin_weights)}},symbolIcon:function(V,Y){return{u_is_size_zoom_constant:new f.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(V,Y.u_is_size_feature_constant),u_size_t:new f.Uniform1f(V,Y.u_size_t),u_size:new f.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_pitch:new f.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new f.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new f.Uniform1f(V,Y.u_fade_change),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(V,Y.u_coord_matrix),u_is_text:new f.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new f.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_texture:new f.Uniform1i(V,Y.u_texture)}},symbolSDF:function(V,Y){return{u_is_size_zoom_constant:new f.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(V,Y.u_is_size_feature_constant),u_size_t:new f.Uniform1f(V,Y.u_size_t),u_size:new f.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_pitch:new f.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new f.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new f.Uniform1f(V,Y.u_fade_change),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(V,Y.u_coord_matrix),u_is_text:new f.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new f.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_texture:new f.Uniform1i(V,Y.u_texture),u_gamma_scale:new f.Uniform1f(V,Y.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(V,Y.u_is_halo)}},symbolTextAndIcon:function(V,Y){return{u_is_size_zoom_constant:new f.Uniform1i(V,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new f.Uniform1i(V,Y.u_is_size_feature_constant),u_size_t:new f.Uniform1f(V,Y.u_size_t),u_size:new f.Uniform1f(V,Y.u_size),u_camera_to_center_distance:new f.Uniform1f(V,Y.u_camera_to_center_distance),u_pitch:new f.Uniform1f(V,Y.u_pitch),u_rotate_symbol:new f.Uniform1i(V,Y.u_rotate_symbol),u_aspect_ratio:new f.Uniform1f(V,Y.u_aspect_ratio),u_fade_change:new f.Uniform1f(V,Y.u_fade_change),u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_label_plane_matrix:new f.UniformMatrix4f(V,Y.u_label_plane_matrix),u_coord_matrix:new f.UniformMatrix4f(V,Y.u_coord_matrix),u_is_text:new f.Uniform1i(V,Y.u_is_text),u_pitch_with_map:new f.Uniform1i(V,Y.u_pitch_with_map),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_texsize_icon:new f.Uniform2f(V,Y.u_texsize_icon),u_texture:new f.Uniform1i(V,Y.u_texture),u_texture_icon:new f.Uniform1i(V,Y.u_texture_icon),u_gamma_scale:new f.Uniform1f(V,Y.u_gamma_scale),u_device_pixel_ratio:new f.Uniform1f(V,Y.u_device_pixel_ratio),u_is_halo:new f.Uniform1i(V,Y.u_is_halo)}},background:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_opacity:new f.Uniform1f(V,Y.u_opacity),u_color:new f.UniformColor(V,Y.u_color)}},backgroundPattern:function(V,Y){return{u_matrix:new f.UniformMatrix4f(V,Y.u_matrix),u_opacity:new f.Uniform1f(V,Y.u_opacity),u_image:new f.Uniform1i(V,Y.u_image),u_pattern_tl_a:new f.Uniform2f(V,Y.u_pattern_tl_a),u_pattern_br_a:new f.Uniform2f(V,Y.u_pattern_br_a),u_pattern_tl_b:new f.Uniform2f(V,Y.u_pattern_tl_b),u_pattern_br_b:new f.Uniform2f(V,Y.u_pattern_br_b),u_texsize:new f.Uniform2f(V,Y.u_texsize),u_mix:new f.Uniform1f(V,Y.u_mix),u_pattern_size_a:new f.Uniform2f(V,Y.u_pattern_size_a),u_pattern_size_b:new f.Uniform2f(V,Y.u_pattern_size_b),u_scale_a:new f.Uniform1f(V,Y.u_scale_a),u_scale_b:new f.Uniform1f(V,Y.u_scale_b),u_pixel_coord_upper:new f.Uniform2f(V,Y.u_pixel_coord_upper),u_pixel_coord_lower:new f.Uniform2f(V,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new f.Uniform1f(V,Y.u_tile_units_to_pixels)}}};function uu(V,Y,W,re,_e,Pe,q){for(var oe=V.context,de=oe.gl,Me=V.useProgram("collisionBox"),Se=[],ze=0,Ye=0,Xe=0;Xe<re.length;Xe++){var tt=re[Xe],rt=Y.getTile(tt),ft=rt.getBucket(W);if(ft){var bt=tt.posMatrix;0===_e[0]&&0===_e[1]||(bt=V.translatePosMatrix(tt.posMatrix,rt,_e,Pe));var At=q?ft.textCollisionBox:ft.iconCollisionBox,Ut=ft.collisionCircleArray;if(Ut.length>0){var qt=f.create(),jt=bt;f.mul(qt,ft.placementInvProjMatrix,V.transform.glCoordMatrix),f.mul(qt,qt,ft.placementViewportMatrix),Se.push({circleArray:Ut,circleOffset:Ye,transform:jt,invTransform:qt}),Ye=ze+=Ut.length/4}At&&Me.draw(oe,de.LINES,Wt.disabled,it.disabled,V.colorModeForRenderPass(),Je.disabled,lu(bt,V.transform,rt),W.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,null,V.transform.zoom,null,null,At.collisionVertexBuffer)}}if(q&&Se.length){var Kt=V.useProgram("collisionCircle"),Vt=new f.StructArrayLayout2f1f2i16;Vt.resize(4*ze),Vt._trim();for(var gn=0,ln=0,nn=Se;ln<nn.length;ln+=1)for(var On=nn[ln],Pn=0;Pn<On.circleArray.length/4;Pn++){var tr=4*Pn,Jn=On.circleArray[tr+0],ur=On.circleArray[tr+1],vr=On.circleArray[tr+2],wr=On.circleArray[tr+3];Vt.emplace(gn++,Jn,ur,vr,wr,0),Vt.emplace(gn++,Jn,ur,vr,wr,1),Vt.emplace(gn++,Jn,ur,vr,wr,2),Vt.emplace(gn++,Jn,ur,vr,wr,3)}(!Js||Js.length<2*ze)&&(Js=function(Lr){var qr=2*Lr,ni=new f.StructArrayLayout3ui6;ni.resize(qr),ni._trim();for(var gi=0;gi<qr;gi++){var Ai=6*gi;ni.uint16[Ai+0]=4*gi+0,ni.uint16[Ai+1]=4*gi+1,ni.uint16[Ai+2]=4*gi+2,ni.uint16[Ai+3]=4*gi+2,ni.uint16[Ai+4]=4*gi+3,ni.uint16[Ai+5]=4*gi+0}return ni}(ze));for(var Cr=oe.createIndexBuffer(Js,!0),Or=oe.createVertexBuffer(Vt,f.collisionCircleLayout.members,!0),Rr=0,si=Se;Rr<si.length;Rr+=1){var ir=si[Rr],Ar=Hl(ir.transform,ir.invTransform,V.transform);Kt.draw(oe,de.TRIANGLES,Wt.disabled,it.disabled,V.colorModeForRenderPass(),Je.disabled,Ar,W.id,Or,Cr,f.SegmentVector.simpleSegment(0,2*ir.circleOffset,ir.circleArray.length,ir.circleArray.length/2),null,V.transform.zoom,null,null,null)}Or.destroy(),Cr.destroy()}}var wc=f.identity(new Float32Array(16));function $u(V,Y,W,re,_e,Pe){var q=f.getAnchorAlignment(V),oe=-(q.horizontalAlign-.5)*Y,de=-(q.verticalAlign-.5)*W,Me=f.evaluateVariableOffset(V,re);return new f.Point((oe/_e+Me[0])*Pe,(de/_e+Me[1])*Pe)}function cu(V,Y,W,re,_e,Pe,q,oe,de,Me,Se){var ze=V.text.placedSymbolArray,Ye=V.text.dynamicLayoutVertexArray,Xe=V.icon.dynamicLayoutVertexArray,tt={};Ye.clear();for(var rt=0;rt<ze.length;rt++){var ft=ze.get(rt),At=ft.hidden||!ft.crossTileID||V.allowVerticalPlacement&&!ft.placedOrientation?null:re[ft.crossTileID];if(At){var Ut=new f.Point(ft.anchorX,ft.anchorY),qt=rn(Ut,W?oe:q),jt=yn(Pe.cameraToCenterDistance,qt.signedDistanceFromCamera),Kt=_e.evaluateSizeForFeature(V.textSizeData,Me,ft)*jt/f.ONE_EM;W&&(Kt*=V.tilePixelRatio/de);for(var ln=$u(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale,Kt),nn=W?rn(Ut.add(ln),q).point:qt.point.add(Y?ln.rotate(-Pe.angle):ln),On=V.allowVerticalPlacement&&ft.placedOrientation===f.WritingMode.vertical?Math.PI/2:0,Pn=0;Pn<ft.numGlyphs;Pn++)f.addDynamicAttributes(Ye,nn,On);Se&&ft.associatedIconIndex>=0&&(tt[ft.associatedIconIndex]={shiftedAnchor:nn,angle:On})}else yr(ft.numGlyphs,Ye)}if(Se){Xe.clear();for(var tr=V.icon.placedSymbolArray,Jn=0;Jn<tr.length;Jn++){var ur=tr.get(Jn);if(ur.hidden)yr(ur.numGlyphs,Xe);else{var vr=tt[Jn];if(vr)for(var wr=0;wr<ur.numGlyphs;wr++)f.addDynamicAttributes(Xe,vr.shiftedAnchor,vr.angle);else yr(ur.numGlyphs,Xe)}}V.icon.dynamicLayoutVertexBuffer.updateData(Xe)}V.text.dynamicLayoutVertexBuffer.updateData(Ye)}function Yl(V,Y,W){return W.iconsInText&&Y?"symbolTextAndIcon":V?"symbolSDF":"symbolIcon"}function Ra(V,Y,W,re,_e,Pe,q,oe,de,Me,Se,ze){for(var Ye=V.context,Xe=Ye.gl,tt=V.transform,rt="map"===oe,ft="map"===de,bt=rt&&"point"!==W.layout.get("symbol-placement"),At=rt&&!ft&&!bt,Ut=void 0!==W.layout.get("symbol-sort-key").constantOr(1),qt=V.depthModeForSublayer(0,Wt.ReadOnly),jt=W.layout.get("text-variable-anchor"),Kt=[],Vt=0,gn=re;Vt<gn.length;Vt+=1){var ln=gn[Vt],nn=Y.getTile(ln),On=nn.getBucket(W);if(On){var Pn=_e?On.text:On.icon;if(Pn&&Pn.segments.get().length){var tr=Pn.programConfigurations.get(W.id),Jn=_e||On.sdfIcons,ur=_e?On.textSizeData:On.iconSizeData,vr=ft||0!==tt.pitch,wr=V.useProgram(Yl(Jn,_e,On),tr),Cr=f.evaluateSizeForZoom(ur,tt.zoom),Or=void 0,Rr=[0,0],si=void 0,ir=void 0,Ar=null,Lr=void 0;if(_e)si=nn.glyphAtlasTexture,ir=Xe.LINEAR,Or=nn.glyphAtlasTexture.size,On.iconsInText&&(Rr=nn.imageAtlasTexture.size,Ar=nn.imageAtlasTexture,Lr=vr||V.options.rotating||V.options.zooming||"composite"===ur.kind||"camera"===ur.kind?Xe.LINEAR:Xe.NEAREST);else{var ni=1!==W.layout.get("icon-size").constantOr(0)||On.iconsNeedLinear;si=nn.imageAtlasTexture,ir=Jn||V.options.rotating||V.options.zooming||ni||vr?Xe.LINEAR:Xe.NEAREST,Or=nn.imageAtlasTexture.size}var gi=mr(nn,1,V.transform.zoom),Ai=Fn(ln.posMatrix,ft,rt,V.transform,gi),Yi=En(ln.posMatrix,ft,rt,V.transform,gi),xo=jt&&On.hasTextData(),mo="none"!==W.layout.get("icon-text-fit")&&xo&&On.hasIconData();bt&&bn(On,ln.posMatrix,V,_e,Ai,Yi,ft,Me);var $i=V.translatePosMatrix(ln.posMatrix,nn,Pe,q),Do=bt||_e&&jt||mo?wc:Ai,aa=V.translatePosMatrix(Yi,nn,Pe,q,!0),$r=Jn&&0!==W.paint.get(_e?"text-halo-width":"icon-halo-width").constantOr(1),Zo={program:wr,buffers:Pn,uniformValues:Jn?On.iconsInText?Zl(ur.kind,Cr,At,ft,V,$i,Do,aa,Or,Rr):Qa(ur.kind,Cr,At,ft,V,$i,Do,aa,_e,Or,!0):no(ur.kind,Cr,At,ft,V,$i,Do,aa,_e,Or),atlasTexture:si,atlasTextureIcon:Ar,atlasInterpolation:ir,atlasInterpolationIcon:Lr,isSDF:Jn,hasHalo:$r};if(Ut)for(var Xi=0,Oi=Pn.segments.get();Xi<Oi.length;Xi+=1){var bo=Oi[Xi];Kt.push({segments:new f.SegmentVector([bo]),sortKey:bo.sortKey,state:Zo})}else Kt.push({segments:Pn.segments,sortKey:0,state:Zo})}}}Ut&&Kt.sort(function(Il,Wa){return Il.sortKey-Wa.sortKey});for(var uo=0,_o=Kt;uo<_o.length;uo+=1){var na=_o[uo],Io=na.state;if(Ye.activeTexture.set(Xe.TEXTURE0),Io.atlasTexture.bind(Io.atlasInterpolation,Xe.CLAMP_TO_EDGE),Io.atlasTextureIcon&&(Ye.activeTexture.set(Xe.TEXTURE1),Io.atlasTextureIcon&&Io.atlasTextureIcon.bind(Io.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE)),Io.isSDF){var eo=Io.uniformValues;Io.hasHalo&&(eo.u_is_halo=1,dl(Io.buffers,na.segments,W,V,Io.program,qt,Se,ze,eo)),eo.u_is_halo=0}dl(Io.buffers,na.segments,W,V,Io.program,qt,Se,ze,Io.uniformValues)}}function dl(V,Y,W,re,_e,Pe,q,oe,de){var Me=re.context;_e.draw(Me,Me.gl.TRIANGLES,Pe,q,oe,Je.disabled,de,W.id,V.layoutVertexBuffer,V.indexBuffer,Y,W.paint,re.transform.zoom,V.programConfigurations.get(W.id),V.dynamicLayoutVertexBuffer,V.opacityVertexBuffer)}function zs(V,Y,W,re,_e,Pe,q){var oe,de,Me,Se,ze,Ye=V.context.gl,Xe=W.paint.get("fill-pattern"),tt=Xe&&Xe.constantOr(1),rt=W.getCrossfadeParameters();q?(de=tt&&!W.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=Ye.LINES):(de=tt?"fillPattern":"fill",oe=Ye.TRIANGLES);for(var ft=0,bt=re;ft<bt.length;ft+=1){var At=bt[ft],Ut=Y.getTile(At);if(!tt||Ut.patternsLoaded()){var qt=Ut.getBucket(W);if(qt){var jt=qt.programConfigurations.get(W.id),Kt=V.useProgram(de,jt);tt&&(V.context.activeTexture.set(Ye.TEXTURE0),Ut.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),jt.updatePaintBuffers(rt));var Vt=Xe.constantOr(null);if(Vt&&Ut.imageAtlas){var gn=Ut.imageAtlas,ln=gn.patternPositions[Vt.to.toString()],nn=gn.patternPositions[Vt.from.toString()];ln&&nn&&jt.setConstantPatternPositions(ln,nn)}var On=V.translatePosMatrix(At.posMatrix,Ut,W.paint.get("fill-translate"),W.paint.get("fill-translate-anchor"));if(q){Se=qt.indexBuffer2,ze=qt.segments2;var Pn=[Ye.drawingBufferWidth,Ye.drawingBufferHeight];Me="fillOutlinePattern"===de&&tt?Vr(On,V,rt,Ut,Pn):Zu(On,Pn)}else Se=qt.indexBuffer,ze=qt.segments,Me=tt?Br(On,V,rt,Ut):Xs(On);Kt.draw(V.context,oe,_e,V.stencilModeForClipping(At),Pe,Je.disabled,Me,W.id,qt.layoutVertexBuffer,Se,ze,W.paint,V.transform.zoom,jt)}}}}function hl(V,Y,W,re,_e,Pe,q){for(var oe=V.context,de=oe.gl,Me=W.paint.get("fill-extrusion-pattern"),Se=Me.constantOr(1),ze=W.getCrossfadeParameters(),Ye=W.paint.get("fill-extrusion-opacity"),Xe=0,tt=re;Xe<tt.length;Xe+=1){var rt=tt[Xe],ft=Y.getTile(rt),bt=ft.getBucket(W);if(bt){var At=bt.programConfigurations.get(W.id),Ut=V.useProgram(Se?"fillExtrusionPattern":"fillExtrusion",At);Se&&(V.context.activeTexture.set(de.TEXTURE0),ft.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),At.updatePaintBuffers(ze));var qt=Me.constantOr(null);if(qt&&ft.imageAtlas){var jt=ft.imageAtlas,Kt=jt.patternPositions[qt.to.toString()],Vt=jt.patternPositions[qt.from.toString()];Kt&&Vt&&At.setConstantPatternPositions(Kt,Vt)}var gn=V.translatePosMatrix(rt.posMatrix,ft,W.paint.get("fill-extrusion-translate"),W.paint.get("fill-extrusion-translate-anchor")),ln=W.paint.get("fill-extrusion-vertical-gradient"),nn=Se?Ca(gn,V,ln,Ye,rt,ze,ft):fl(gn,V,ln,Ye);Ut.draw(oe,oe.gl.TRIANGLES,_e,Pe,q,Je.backCCW,nn,W.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,W.paint,V.transform.zoom,At)}}}function Qs(V,Y,W,re,_e,Pe){var q=V.context,oe=q.gl,de=Y.fbo;if(de){var Me=V.useProgram("hillshade");q.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,de.colorAttachment.get());var Se=function(V,Y,W){var re=W.paint.get("hillshade-shadow-color"),_e=W.paint.get("hillshade-highlight-color"),Pe=W.paint.get("hillshade-accent-color"),q=W.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===W.paint.get("hillshade-illumination-anchor")&&(q-=V.transform.angle);var oe,de,Me,Se=!V.options.moving;return{u_matrix:V.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),Se),u_image:0,u_latrange:(oe=Y.tileID,de=Math.pow(2,oe.canonical.z),Me=oe.canonical.y,[new f.MercatorCoordinate(0,Me/de).toLngLat().lat,new f.MercatorCoordinate(0,(Me+1)/de).toLngLat().lat]),u_light:[W.paint.get("hillshade-exaggeration"),q],u_shadow:re,u_highlight:_e,u_accent:Pe}}(V,Y,W);Me.draw(q,oe.TRIANGLES,re,_e,Pe,Je.disabled,Se,W.id,V.rasterBoundsBuffer,V.quadTriangleIndexBuffer,V.rasterBoundsSegments)}}function Lu(V,Y,W,re,_e,Pe,q){var oe=V.context,de=oe.gl,Me=Y.dem;if(Me&&Me.data){var Se=Me.dim,ze=Me.stride,Ye=Me.getPixels();if(oe.activeTexture.set(de.TEXTURE1),oe.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||V.getTileTexture(ze),Y.demTexture){var Xe=Y.demTexture;Xe.update(Ye,{premultiply:!1}),Xe.bind(de.NEAREST,de.CLAMP_TO_EDGE)}else Y.demTexture=new f.Texture(oe,Ye,de.RGBA,{premultiply:!1}),Y.demTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE);oe.activeTexture.set(de.TEXTURE0);var tt=Y.fbo;if(!tt){var rt=new f.Texture(oe,{width:Se,height:Se,data:null},de.RGBA);rt.bind(de.LINEAR,de.CLAMP_TO_EDGE),(tt=Y.fbo=oe.createFramebuffer(Se,Se,!0)).colorAttachment.set(rt.texture)}oe.bindFramebuffer.set(tt.framebuffer),oe.viewport.set([0,0,Se,Se]),V.useProgram("hillshadePrepare").draw(oe,de.TRIANGLES,_e,Pe,q,Je.disabled,function(V,Y,W){var re=Y.stride,_e=f.create();return f.ortho(_e,0,f.EXTENT,-f.EXTENT,0,0,1),f.translate(_e,_e,[0,-f.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[re,re],u_zoom:V.overscaledZ,u_maxzoom:W,u_unpack:Y.getUnpackVector()}}(Y.tileID,Me,re),W.id,V.rasterBoundsBuffer,V.quadTriangleIndexBuffer,V.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function Ms(V,Y,W,re,_e){var Pe=re.paint.get("raster-fade-duration");if(Pe>0){var q=f.browser.now(),oe=(q-V.timeAdded)/Pe,de=Y?(q-Y.timeAdded)/Pe:-1,Me=W.getSource(),Se=_e.coveringZoomLevel({tileSize:Me.tileSize,roundZoom:Me.roundZoom}),ze=!Y||Math.abs(Y.tileID.overscaledZ-Se)>Math.abs(V.tileID.overscaledZ-Se),Ye=ze&&V.refreshedUponExpiration?1:f.clamp(ze?oe:1-de,0,1);return V.refreshedUponExpiration&&oe>=1&&(V.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-Ye}:{opacity:Ye,mix:0}}return{opacity:1,mix:0}}var Xu=new f.Color(1,0,0,1),Tc=new f.Color(0,1,0,1),Ou=new f.Color(0,0,1,1),pl=new f.Color(1,0,1,1),As=new f.Color(0,1,1,1);function Ku(V,Y,W,re){zo(V,0,Y+W/2,V.transform.width,W,re)}function $l(V,Y,W,re){zo(V,Y-W/2,0,W,V.transform.height,re)}function zo(V,Y,W,re,_e,Pe){var q=V.context,oe=q.gl;oe.enable(oe.SCISSOR_TEST),oe.scissor(Y*f.browser.devicePixelRatio,W*f.browser.devicePixelRatio,re*f.browser.devicePixelRatio,_e*f.browser.devicePixelRatio),q.clear({color:Pe}),oe.disable(oe.SCISSOR_TEST)}function fu(V,Y,W){var re=V.context,_e=re.gl,Pe=W.posMatrix,q=V.useProgram("debug"),oe=Wt.disabled,de=it.disabled,Me=V.colorModeForRenderPass();re.activeTexture.set(_e.TEXTURE0),V.emptyTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),q.draw(re,_e.LINE_STRIP,oe,de,Me,Je.disabled,Yu(Pe,f.Color.red),"$debug",V.debugBuffer,V.tileBorderIndexBuffer,V.debugSegments);var ze=Y.getTileByID(W.key).latestRawTileData,Xe=Math.floor((ze&&ze.byteLength||0)/1024),tt=Y.getTile(W).tileSize,rt=512/Math.min(tt,512)*(W.overscaledZ/V.transform.zoom)*.5,ft=W.canonical.toString();W.overscaledZ!==W.canonical.z&&(ft+=" => "+W.overscaledZ),function(bt,At){bt.initDebugOverlayCanvas();var Ut=bt.debugOverlayCanvas,qt=bt.context.gl,jt=bt.debugOverlayCanvas.getContext("2d");jt.clearRect(0,0,Ut.width,Ut.height),jt.shadowColor="white",jt.shadowBlur=2,jt.lineWidth=1.5,jt.strokeStyle="white",jt.textBaseline="top",jt.font="bold 36px Open Sans, sans-serif",jt.fillText(At,5,5),jt.strokeText(At,5,5),bt.debugOverlayTexture.update(Ut),bt.debugOverlayTexture.bind(qt.LINEAR,qt.CLAMP_TO_EDGE)}(V,ft+" "+Xe+"kb"),q.draw(re,_e.TRIANGLES,oe,de,st.alphaBlended,Je.disabled,Yu(Pe,f.Color.transparent,rt),"$debug",V.debugBuffer,V.quadTriangleIndexBuffer,V.debugSegments)}var kl={symbol:function(V,Y,W,re,_e){if("translucent"===V.renderPass){var Pe=it.disabled,q=V.colorModeForRenderPass();W.layout.get("text-variable-anchor")&&function(oe,de,Me,Se,ze,Ye,Xe){for(var tt=de.transform,rt="map"===ze,ft="map"===Ye,bt=0,At=oe;bt<At.length;bt+=1){var Ut=At[bt],qt=Se.getTile(Ut),jt=qt.getBucket(Me);if(jt&&jt.text&&jt.text.segments.get().length){var Vt=f.evaluateSizeForZoom(jt.textSizeData,tt.zoom),gn=mr(qt,1,de.transform.zoom),ln=Fn(Ut.posMatrix,ft,rt,de.transform,gn),nn="none"!==Me.layout.get("icon-text-fit")&&jt.hasIconData();if(Vt){var On=Math.pow(2,tt.zoom-qt.tileID.overscaledZ);cu(jt,rt,ft,Xe,f.symbolSize,tt,ln,Ut.posMatrix,On,Vt,nn)}}}}(re,V,W,Y,W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),_e),0!==W.paint.get("icon-opacity").constantOr(1)&&Ra(V,Y,W,re,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),Pe,q),0!==W.paint.get("text-opacity").constantOr(1)&&Ra(V,Y,W,re,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),Pe,q),Y.map.showCollisionBoxes&&(uu(V,Y,W,re,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),!0),uu(V,Y,W,re,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),!1))}},circle:function(V,Y,W,re){if("translucent"===V.renderPass){var _e=W.paint.get("circle-opacity"),Pe=W.paint.get("circle-stroke-width"),q=W.paint.get("circle-stroke-opacity"),oe=void 0!==W.layout.get("circle-sort-key").constantOr(1);if(0!==_e.constantOr(1)||0!==Pe.constantOr(1)&&0!==q.constantOr(1)){for(var de=V.context,Me=de.gl,Se=V.depthModeForSublayer(0,Wt.ReadOnly),ze=it.disabled,Ye=V.colorModeForRenderPass(),Xe=[],tt=0;tt<re.length;tt++){var rt=re[tt],ft=Y.getTile(rt),bt=ft.getBucket(W);if(bt){var At=bt.programConfigurations.get(W.id),Ut={programConfiguration:At,program:V.useProgram("circle",At),layoutVertexBuffer:bt.layoutVertexBuffer,indexBuffer:bt.indexBuffer,uniformValues:su(V,rt,ft,W)};if(oe)for(var qt=0,jt=bt.segments.get();qt<jt.length;qt+=1){var Kt=jt[qt];Xe.push({segments:new f.SegmentVector([Kt]),sortKey:Kt.sortKey,state:Ut})}else Xe.push({segments:bt.segments,sortKey:0,state:Ut})}}oe&&Xe.sort(function(wr,Cr){return wr.sortKey-Cr.sortKey});for(var Vt=0,gn=Xe;Vt<gn.length;Vt+=1){var ln=gn[Vt],nn=ln.state;nn.program.draw(de,Me.TRIANGLES,Se,ze,Ye,Je.disabled,nn.uniformValues,W.id,nn.layoutVertexBuffer,nn.indexBuffer,ln.segments,W.paint,V.transform.zoom,nn.programConfiguration)}}}},heatmap:function(V,Y,W,re){if(0!==W.paint.get("heatmap-opacity"))if("offscreen"===V.renderPass){var _e=V.context,Pe=_e.gl,q=it.disabled,oe=new st([Pe.ONE,Pe.ONE],f.Color.transparent,[!0,!0,!0,!0]);(function(rt,ft,bt){var At=rt.gl;rt.activeTexture.set(At.TEXTURE1),rt.viewport.set([0,0,ft.width/4,ft.height/4]);var jt,Kt,Vt,gn,ln,Ut=bt.heatmapFbo;if(Ut)At.bindTexture(At.TEXTURE_2D,Ut.colorAttachment.get()),rt.bindFramebuffer.set(Ut.framebuffer);else{var qt=At.createTexture();At.bindTexture(At.TEXTURE_2D,qt),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_2D,At.TEXTURE_MAG_FILTER,At.LINEAR),Vt=qt,gn=Ut=bt.heatmapFbo=rt.createFramebuffer(ft.width/4,ft.height/4,!1),(ln=(jt=rt).gl).texImage2D(ln.TEXTURE_2D,0,ln.RGBA,(Kt=ft).width/4,Kt.height/4,0,ln.RGBA,jt.extRenderToTextureHalfFloat?jt.extTextureHalfFloat.HALF_FLOAT_OES:ln.UNSIGNED_BYTE,null),gn.colorAttachment.set(Vt)}})(_e,V,W),_e.clear({color:f.Color.transparent});for(var de=0;de<re.length;de++){var Me=re[de];if(!Y.hasRenderableParent(Me)){var Se=Y.getTile(Me),ze=Se.getBucket(W);if(ze){var Ye=ze.programConfigurations.get(W.id);V.useProgram("heatmap",Ye).draw(_e,Pe.TRIANGLES,Wt.disabled,q,oe,Je.disabled,ql(Me.posMatrix,Se,V.transform.zoom,W.paint.get("heatmap-intensity")),W.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,W.paint,V.transform.zoom,Ye)}}}_e.viewport.set([0,0,V.width,V.height])}else"translucent"===V.renderPass&&(V.context.setColorMode(V.colorModeForRenderPass()),function(rt,ft){var bt=rt.context,At=bt.gl,Ut=ft.heatmapFbo;if(Ut){bt.activeTexture.set(At.TEXTURE0),At.bindTexture(At.TEXTURE_2D,Ut.colorAttachment.get()),bt.activeTexture.set(At.TEXTURE1);var qt=ft.colorRampTexture;qt||(qt=ft.colorRampTexture=new f.Texture(bt,ft.colorRamp,At.RGBA)),qt.bind(At.LINEAR,At.CLAMP_TO_EDGE),rt.useProgram("heatmapTexture").draw(bt,At.TRIANGLES,Wt.disabled,it.disabled,rt.colorModeForRenderPass(),Je.disabled,function(V,Y,W,re){var _e=f.create();f.ortho(_e,0,V.width,V.height,0,0,1);var Pe=V.context.gl;return{u_matrix:_e,u_world:[Pe.drawingBufferWidth,Pe.drawingBufferHeight],u_image:W,u_color_ramp:re,u_opacity:Y.paint.get("heatmap-opacity")}}(rt,ft,0,1),ft.id,rt.viewportBuffer,rt.quadTriangleIndexBuffer,rt.viewportSegments,ft.paint,rt.transform.zoom)}}(V,W))},line:function(V,Y,W,re){if("translucent"===V.renderPass){var _e=W.paint.get("line-opacity"),Pe=W.paint.get("line-width");if(0!==_e.constantOr(1)&&0!==Pe.constantOr(1)){var q=V.depthModeForSublayer(0,Wt.ReadOnly),oe=V.colorModeForRenderPass(),de=W.paint.get("line-dasharray"),Me=W.paint.get("line-pattern"),Se=Me.constantOr(1),ze=W.paint.get("line-gradient"),Ye=W.getCrossfadeParameters(),Xe=Se?"linePattern":de?"lineSDF":ze?"lineGradient":"line",tt=V.context,rt=tt.gl,ft=!0;if(ze){tt.activeTexture.set(rt.TEXTURE0);var bt=W.gradientTexture;if(!W.gradient)return;bt||(bt=W.gradientTexture=new f.Texture(tt,W.gradient,rt.RGBA)),bt.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}for(var At=0,Ut=re;At<Ut.length;At+=1){var qt=Ut[At],jt=Y.getTile(qt);if(!Se||jt.patternsLoaded()){var Kt=jt.getBucket(W);if(Kt){var Vt=Kt.programConfigurations.get(W.id),gn=V.context.program.get(),ln=V.useProgram(Xe,Vt),nn=ft||ln.program!==gn,On=Me.constantOr(null);if(On&&jt.imageAtlas){var Pn=jt.imageAtlas,tr=Pn.patternPositions[On.to.toString()],Jn=Pn.patternPositions[On.from.toString()];tr&&Jn&&Vt.setConstantPatternPositions(tr,Jn)}var ur=Se?Gl(V,jt,W,Ye):de?Ua(V,jt,W,de,Ye):ze?Vi(V,jt,W):Ja(V,jt,W);Se?(tt.activeTexture.set(rt.TEXTURE0),jt.imageAtlasTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE),Vt.updatePaintBuffers(Ye)):de&&(nn||V.lineAtlas.dirty)&&(tt.activeTexture.set(rt.TEXTURE0),V.lineAtlas.bind(tt)),ln.draw(tt,rt.TRIANGLES,q,V.stencilModeForClipping(qt),oe,Je.disabled,ur,W.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,W.paint,V.transform.zoom,Vt),ft=!1}}}}}},fill:function(V,Y,W,re){var _e=W.paint.get("fill-color"),Pe=W.paint.get("fill-opacity");if(0!==Pe.constantOr(1)){var q=V.colorModeForRenderPass(),oe=W.paint.get("fill-pattern"),de=V.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&1===_e.constantOr(f.Color.transparent).a&&1===Pe.constantOr(0)?"opaque":"translucent";if(V.renderPass===de){var Me=V.depthModeForSublayer(1,"opaque"===V.renderPass?Wt.ReadWrite:Wt.ReadOnly);zs(V,Y,W,re,Me,q,!1)}if("translucent"===V.renderPass&&W.paint.get("fill-antialias")){var Se=V.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?2:0,Wt.ReadOnly);zs(V,Y,W,re,Se,q,!0)}}},"fill-extrusion":function(V,Y,W,re){var _e=W.paint.get("fill-extrusion-opacity");if(0!==_e&&"translucent"===V.renderPass){var Pe=new Wt(V.context.gl.LEQUAL,Wt.ReadWrite,V.depthRangeFor3D);if(1!==_e||W.paint.get("fill-extrusion-pattern").constantOr(1))hl(V,Y,W,re,Pe,it.disabled,st.disabled),hl(V,Y,W,re,Pe,V.stencilModeFor3D(),V.colorModeForRenderPass());else{var q=V.colorModeForRenderPass();hl(V,Y,W,re,Pe,it.disabled,q)}}},hillshade:function(V,Y,W,re){if("offscreen"===V.renderPass||"translucent"===V.renderPass){for(var _e=V.context,Pe=Y.getSource().maxzoom,q=V.depthModeForSublayer(0,Wt.ReadOnly),oe=V.colorModeForRenderPass(),de="translucent"===V.renderPass?V.stencilConfigForOverlap(re):[{},re],Me=de[0],Se=0,ze=de[1];Se<ze.length;Se+=1){var Ye=ze[Se],Xe=Y.getTile(Ye);Xe.needsHillshadePrepare&&"offscreen"===V.renderPass?Lu(V,Xe,W,Pe,q,it.disabled,oe):"translucent"===V.renderPass&&Qs(V,Xe,W,q,Me[Ye.overscaledZ],oe)}_e.viewport.set([0,0,V.width,V.height])}},raster:function(V,Y,W,re){if("translucent"===V.renderPass&&0!==W.paint.get("raster-opacity")&&re.length)for(var _e=V.context,Pe=_e.gl,q=Y.getSource(),oe=V.useProgram("raster"),de=V.colorModeForRenderPass(),Me=q instanceof H?[{},re]:V.stencilConfigForOverlap(re),Se=Me[0],ze=Me[1],Ye=ze[ze.length-1].overscaledZ,Xe=!V.options.moving,tt=0,rt=ze;tt<rt.length;tt+=1){var ft=rt[tt],bt=V.depthModeForSublayer(ft.overscaledZ-Ye,1===W.paint.get("raster-opacity")?Wt.ReadWrite:Wt.ReadOnly,Pe.LESS),At=Y.getTile(ft),Ut=V.transform.calculatePosMatrix(ft.toUnwrapped(),Xe);At.registerFadeDuration(W.paint.get("raster-fade-duration"));var qt=Y.findLoadedParent(ft,0),jt=Ms(At,qt,Y,W,V.transform),Kt=void 0,Vt=void 0,gn="nearest"===W.paint.get("raster-resampling")?Pe.NEAREST:Pe.LINEAR;_e.activeTexture.set(Pe.TEXTURE0),At.texture.bind(gn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),_e.activeTexture.set(Pe.TEXTURE1),qt?(qt.texture.bind(gn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST),Kt=Math.pow(2,qt.tileID.overscaledZ-At.tileID.overscaledZ),Vt=[At.tileID.canonical.x*Kt%1,At.tileID.canonical.y*Kt%1]):At.texture.bind(gn,Pe.CLAMP_TO_EDGE,Pe.LINEAR_MIPMAP_NEAREST);var ln=ha(Ut,Vt||[0,0],Kt||1,jt,W);q instanceof H?oe.draw(_e,Pe.TRIANGLES,bt,it.disabled,de,Je.disabled,ln,W.id,q.boundsBuffer,V.quadTriangleIndexBuffer,q.boundsSegments):oe.draw(_e,Pe.TRIANGLES,bt,Se[ft.overscaledZ],de,Je.disabled,ln,W.id,V.rasterBoundsBuffer,V.quadTriangleIndexBuffer,V.rasterBoundsSegments)}},background:function(V,Y,W){var re=W.paint.get("background-color"),_e=W.paint.get("background-opacity");if(0!==_e){var Pe=V.context,q=Pe.gl,oe=V.transform,de=oe.tileSize,Me=W.paint.get("background-pattern");if(!V.isPatternMissing(Me)){var Se=!Me&&1===re.a&&1===_e&&V.opaquePassEnabledForLayer()?"opaque":"translucent";if(V.renderPass===Se){var ze=it.disabled,Ye=V.depthModeForSublayer(0,"opaque"===Se?Wt.ReadWrite:Wt.ReadOnly),Xe=V.colorModeForRenderPass(),tt=V.useProgram(Me?"backgroundPattern":"background"),rt=oe.coveringTiles({tileSize:de});Me&&(Pe.activeTexture.set(q.TEXTURE0),V.imageManager.bind(V.context));for(var ft=W.getCrossfadeParameters(),bt=0,At=rt;bt<At.length;bt+=1){var Ut=At[bt],qt=V.transform.calculatePosMatrix(Ut.toUnwrapped()),jt=Me?Ts(qt,_e,V,Me,{tileID:Ut,tileSize:de},ft):es(qt,_e,re);tt.draw(Pe,q.TRIANGLES,Ye,ze,Xe,Je.disabled,jt,W.id,V.tileExtentBuffer,V.quadTriangleIndexBuffer,V.tileExtentSegments)}}}}},debug:function(V,Y,W){for(var re=0;re<W.length;re++)fu(V,Y,W[re])},custom:function(V,Y,W){var re=V.context,_e=W.implementation;if("offscreen"===V.renderPass){var Pe=_e.prerender;Pe&&(V.setCustomLayerDefaults(),re.setColorMode(V.colorModeForRenderPass()),Pe.call(_e,re.gl,V.transform.customLayerMatrix()),re.setDirty(),V.setBaseState())}else if("translucent"===V.renderPass){V.setCustomLayerDefaults(),re.setColorMode(V.colorModeForRenderPass()),re.setStencilMode(it.disabled);var q="3d"===_e.renderingMode?new Wt(V.context.gl.LEQUAL,Wt.ReadWrite,V.depthRangeFor3D):V.depthModeForSublayer(0,Wt.ReadOnly);re.setDepthMode(q),_e.render(re.gl,V.transform.customLayerMatrix()),re.setDirty(),V.setBaseState(),re.bindFramebuffer.set(null)}}},bi=function(V,Y){this.context=new ot(V),this.transform=Y,this._tileTextures={},this.setup(),this.numSublayers=pt.maxUnderzooming+pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new lr,this.gpuTimers={}};bi.prototype.resize=function(V,Y){if(this.width=V*f.browser.devicePixelRatio,this.height=Y*f.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var W=0,re=this.style._order;W<re.length;W+=1)this.style._layers[re[W]].resize()},bi.prototype.setup=function(){var V=this.context,Y=new f.StructArrayLayout2i4;Y.emplaceBack(0,0),Y.emplaceBack(f.EXTENT,0),Y.emplaceBack(0,f.EXTENT),Y.emplaceBack(f.EXTENT,f.EXTENT),this.tileExtentBuffer=V.createVertexBuffer(Y,Sr.members),this.tileExtentSegments=f.SegmentVector.simpleSegment(0,0,4,2);var W=new f.StructArrayLayout2i4;W.emplaceBack(0,0),W.emplaceBack(f.EXTENT,0),W.emplaceBack(0,f.EXTENT),W.emplaceBack(f.EXTENT,f.EXTENT),this.debugBuffer=V.createVertexBuffer(W,Sr.members),this.debugSegments=f.SegmentVector.simpleSegment(0,0,4,5);var re=new f.StructArrayLayout4i8;re.emplaceBack(0,0,0,0),re.emplaceBack(f.EXTENT,0,f.EXTENT,0),re.emplaceBack(0,f.EXTENT,0,f.EXTENT),re.emplaceBack(f.EXTENT,f.EXTENT,f.EXTENT,f.EXTENT),this.rasterBoundsBuffer=V.createVertexBuffer(re,G.members),this.rasterBoundsSegments=f.SegmentVector.simpleSegment(0,0,4,2);var _e=new f.StructArrayLayout2i4;_e.emplaceBack(0,0),_e.emplaceBack(1,0),_e.emplaceBack(0,1),_e.emplaceBack(1,1),this.viewportBuffer=V.createVertexBuffer(_e,Sr.members),this.viewportSegments=f.SegmentVector.simpleSegment(0,0,4,2);var Pe=new f.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=V.createIndexBuffer(Pe);var q=new f.StructArrayLayout3ui6;q.emplaceBack(0,1,2),q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=V.createIndexBuffer(q),this.emptyTexture=new f.Texture(V,{width:1,height:1,data:new Uint8Array([0,0,0,0])},V.gl.RGBA);var oe=this.context.gl;this.stencilClearMode=new it({func:oe.ALWAYS,mask:0},0,255,oe.ZERO,oe.ZERO,oe.ZERO)},bi.prototype.clearStencil=function(){var V=this.context,Y=V.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var W=f.create();f.ortho(W,0,this.width,this.height,0,0,1),f.scale(W,W,[Y.drawingBufferWidth,Y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(V,Y.TRIANGLES,Wt.disabled,this.stencilClearMode,st.disabled,Je.disabled,bc(W),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},bi.prototype._renderTileClippingMasks=function(V,Y){if(this.currentStencilSource!==V.source&&V.isTileClipped()&&Y&&Y.length){this.currentStencilSource=V.source;var W=this.context,re=W.gl;this.nextStencilID+Y.length>256&&this.clearStencil(),W.setColorMode(st.disabled),W.setDepthMode(Wt.disabled);var _e=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,q=Y;Pe<q.length;Pe+=1){var oe=q[Pe],de=this._tileClippingMaskIDs[oe.key]=this.nextStencilID++;_e.draw(W,re.TRIANGLES,Wt.disabled,new it({func:re.ALWAYS,mask:0},de,255,re.KEEP,re.KEEP,re.REPLACE),st.disabled,Je.disabled,bc(oe.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},bi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var V=this.nextStencilID++,Y=this.context.gl;return new it({func:Y.NOTEQUAL,mask:255},V,255,Y.KEEP,Y.KEEP,Y.REPLACE)},bi.prototype.stencilModeForClipping=function(V){var Y=this.context.gl;return new it({func:Y.EQUAL,mask:255},this._tileClippingMaskIDs[V.key],0,Y.KEEP,Y.KEEP,Y.REPLACE)},bi.prototype.stencilConfigForOverlap=function(V){var Y,W=this.context.gl,re=V.sort(function(de,Me){return Me.overscaledZ-de.overscaledZ}),_e=re[re.length-1].overscaledZ,Pe=re[0].overscaledZ-_e+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var q={},oe=0;oe<Pe;oe++)q[oe+_e]=new it({func:W.GEQUAL,mask:255},oe+this.nextStencilID,255,W.KEEP,W.KEEP,W.REPLACE);return this.nextStencilID+=Pe,[q,re]}return[(Y={},Y[_e]=it.disabled,Y),re]},bi.prototype.colorModeForRenderPass=function(){var V=this.context.gl;if(this._showOverdrawInspector){var Y=.125;return new st([V.CONSTANT_COLOR,V.ONE],new f.Color(Y,Y,Y,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?st.unblended:st.alphaBlended},bi.prototype.depthModeForSublayer=function(V,Y,W){if(!this.opaquePassEnabledForLayer())return Wt.disabled;var re=1-((1+this.currentLayer)*this.numSublayers+V)*this.depthEpsilon;return new Wt(W||this.context.gl.LEQUAL,Y,[re,re])},bi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},bi.prototype.render=function(V,Y){var W=this;this.style=V,this.options=Y,this.lineAtlas=V.lineAtlas,this.imageManager=V.imageManager,this.glyphManager=V.glyphManager,this.symbolFadeChange=V.placement.symbolFadeChange(f.browser.now()),this.imageManager.beginFrame();var re=this.style._order,_e=this.style.sourceCaches;for(var Pe in _e){var q=_e[Pe];q.used&&q.prepare(this.context)}var oe,de,Me={},Se={},ze={};for(var Ye in _e){var Xe=_e[Ye];Me[Ye]=Xe.getVisibleCoordinates(),Se[Ye]=Me[Ye].slice().reverse(),ze[Ye]=Xe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var tt=0;tt<re.length;tt++)if(this.style._layers[re[tt]].is3D()){this.opaquePassCutoff=tt;break}this.renderPass="offscreen";for(var ft=0,bt=re;ft<bt.length;ft+=1){var Ut=this.style._layers[bt[ft]];if(Ut.hasOffscreenPass()&&!Ut.isHidden(this.transform.zoom)){var qt=Se[Ut.source];("custom"===Ut.type||qt.length)&&this.renderLayer(this,_e[Ut.source],Ut,qt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:Y.showOverdrawInspector?f.Color.black:f.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=Y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(V._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=re.length-1;this.currentLayer>=0;this.currentLayer--){var jt=this.style._layers[re[this.currentLayer]],Kt=_e[jt.source],Vt=Me[jt.source];this._renderTileClippingMasks(jt,Vt),this.renderLayer(this,Kt,jt,Vt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<re.length;this.currentLayer++){var gn=this.style._layers[re[this.currentLayer]],ln=_e[gn.source],nn=("symbol"===gn.type?ze:Se)[gn.source];this._renderTileClippingMasks(gn,Me[gn.source]),this.renderLayer(this,ln,gn,nn)}this.options.showTileBoundaries&&(f.values(this.style._layers).forEach(function(On){On.source&&!On.isHidden(W.transform.zoom)&&(On.source!==(de&&de.id)&&(de=W.style.sourceCaches[On.source]),(!oe||oe.getSource().maxzoom<de.getSource().maxzoom)&&(oe=de))}),oe&&kl.debug(this,oe,oe.getVisibleCoordinates())),this.options.showPadding&&function Al(V){var Y=V.transform.padding;Ku(V,V.transform.height-(Y.top||0),3,Xu),Ku(V,Y.bottom||0,3,Tc),$l(V,Y.left||0,3,Ou),$l(V,V.transform.width-(Y.right||0),3,pl);var re,_e,Pe,q,W=V.transform.centerPoint;zo(re=V,(_e=W.x)-1,(Pe=V.transform.height-W.y)-10,2,20,q=As),zo(re,_e-10,Pe-1,20,2,q)}(this),this.context.setDefault()},bi.prototype.renderLayer=function(V,Y,W,re){W.isHidden(this.transform.zoom)||("background"===W.type||"custom"===W.type||re.length)&&(this.id=W.id,this.gpuTimingStart(W),kl[W.type](V,Y,W,re,this.style.placement.variableOffsets),this.gpuTimingEnd())},bi.prototype.gpuTimingStart=function(V){if(this.options.gpuTiming){var Y=this.context.extTimerQuery,W=this.gpuTimers[V.id];W||(W=this.gpuTimers[V.id]={calls:0,cpuTime:0,query:Y.createQueryEXT()}),W.calls++,Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,W.query)}},bi.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var V=this.context.extTimerQuery;V.endQueryEXT(V.TIME_ELAPSED_EXT)}},bi.prototype.collectGpuTimers=function(){var V=this.gpuTimers;return this.gpuTimers={},V},bi.prototype.queryGpuTimers=function(V){var Y={};for(var W in V){var re=V[W],_e=this.context.extTimerQuery,Pe=_e.getQueryObjectEXT(re.query,_e.QUERY_RESULT_EXT)/1e6;_e.deleteQueryEXT(re.query),Y[W]=Pe}return Y},bi.prototype.translatePosMatrix=function(V,Y,W,re,_e){if(!W[0]&&!W[1])return V;var Pe=_e?"map"===re?this.transform.angle:0:"viewport"===re?-this.transform.angle:0;if(Pe){var q=Math.sin(Pe),oe=Math.cos(Pe);W=[W[0]*oe-W[1]*q,W[0]*q+W[1]*oe]}var de=[_e?W[0]:mr(Y,W[0],this.transform.zoom),_e?W[1]:mr(Y,W[1],this.transform.zoom),0],Me=new Float32Array(16);return f.translate(Me,V,de),Me},bi.prototype.saveTileTexture=function(V){var Y=this._tileTextures[V.size[0]];Y?Y.push(V):this._tileTextures[V.size[0]]=[V]},bi.prototype.getTileTexture=function(V){var Y=this._tileTextures[V];return Y&&Y.length>0?Y.pop():null},bi.prototype.isPatternMissing=function(V){if(!V)return!1;if(!V.from||!V.to)return!0;var Y=this.imageManager.getPattern(V.from.toString()),W=this.imageManager.getPattern(V.to.toString());return!Y||!W},bi.prototype.useProgram=function(V,Y){this.cache=this.cache||{};var W=""+V+(Y?Y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[W]||(this.cache[W]=new Ns(this.context,Fs[V],Y,_c[V],this._showOverdrawInspector)),this.cache[W]},bi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},bi.prototype.setBaseState=function(){var V=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(V.FUNC_ADD)},bi.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=f.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new f.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},bi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Go=function(V,Y){this.points=V,this.planes=Y};Go.fromInvProjectionMatrix=function(V,Y,W){var re=Math.pow(2,W),_e=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(q){return f.transformMat4([],q,V)}).map(function(q){return f.scale$1([],q,1/q[3]/Y*re)}),Pe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(q){var oe=f.sub([],_e[q[0]],_e[q[1]]),de=f.sub([],_e[q[2]],_e[q[1]]),Me=f.normalize([],f.cross([],oe,de)),Se=-f.dot(Me,_e[q[1]]);return Me.concat(Se)});return new Go(_e,Pe)};var Li=function(V,Y){this.min=V,this.max=Y,this.center=f.scale$2([],f.add([],this.min,this.max),.5)};Li.prototype.quadrant=function(V){for(var Y=[V%2==0,V<2],W=f.clone$2(this.min),re=f.clone$2(this.max),_e=0;_e<Y.length;_e++)W[_e]=Y[_e]?this.min[_e]:this.center[_e],re[_e]=Y[_e]?this.center[_e]:this.max[_e];return re[2]=this.max[2],new Li(W,re)},Li.prototype.distanceX=function(V){return Math.max(Math.min(this.max[0],V[0]),this.min[0])-V[0]},Li.prototype.distanceY=function(V){return Math.max(Math.min(this.max[1],V[1]),this.min[1])-V[1]},Li.prototype.intersects=function(V){for(var Y=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],W=!0,re=0;re<V.planes.length;re++){for(var _e=V.planes[re],Pe=0,q=0;q<Y.length;q++)Pe+=f.dot$1(_e,Y[q])>=0;if(0===Pe)return 0;Pe!==Y.length&&(W=!1)}if(W)return 2;for(var oe=0;oe<3;oe++){for(var de=Number.MAX_VALUE,Me=-Number.MAX_VALUE,Se=0;Se<V.points.length;Se++){var ze=V.points[Se][oe]-this.min[oe];de=Math.min(de,ze),Me=Math.max(Me,ze)}if(Me<0||de>this.max[oe]-this.min[oe])return 0}return 1};var Hi=function(V,Y,W,re){if(void 0===V&&(V=0),void 0===Y&&(Y=0),void 0===W&&(W=0),void 0===re&&(re=0),isNaN(V)||V<0||isNaN(Y)||Y<0||isNaN(W)||W<0||isNaN(re)||re<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=V,this.bottom=Y,this.left=W,this.right=re};Hi.prototype.interpolate=function(V,Y,W){return null!=Y.top&&null!=V.top&&(this.top=f.number(V.top,Y.top,W)),null!=Y.bottom&&null!=V.bottom&&(this.bottom=f.number(V.bottom,Y.bottom,W)),null!=Y.left&&null!=V.left&&(this.left=f.number(V.left,Y.left,W)),null!=Y.right&&null!=V.right&&(this.right=f.number(V.right,Y.right,W)),this},Hi.prototype.getCenter=function(V,Y){var W=f.clamp((this.left+V-this.right)/2,0,V),re=f.clamp((this.top+Y-this.bottom)/2,0,Y);return new f.Point(W,re)},Hi.prototype.equals=function(V){return this.top===V.top&&this.bottom===V.bottom&&this.left===V.left&&this.right===V.right},Hi.prototype.clone=function(){return new Hi(this.top,this.bottom,this.left,this.right)},Hi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var vi=function(V,Y,W,re,_e){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===_e||_e,this._minZoom=V||0,this._maxZoom=Y||22,this._minPitch=W??0,this._maxPitch=re??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new f.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hi,this._posMatrixCache={},this._alignedPosMatrixCache={}},Pi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};vi.prototype.clone=function(){var V=new vi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return V.tileSize=this.tileSize,V.latRange=this.latRange,V.width=this.width,V.height=this.height,V._center=this._center,V.zoom=this.zoom,V.angle=this.angle,V._fov=this._fov,V._pitch=this._pitch,V._unmodified=this._unmodified,V._edgeInsets=this._edgeInsets.clone(),V._calcMatrices(),V},Pi.minZoom.get=function(){return this._minZoom},Pi.minZoom.set=function(V){this._minZoom!==V&&(this._minZoom=V,this.zoom=Math.max(this.zoom,V))},Pi.maxZoom.get=function(){return this._maxZoom},Pi.maxZoom.set=function(V){this._maxZoom!==V&&(this._maxZoom=V,this.zoom=Math.min(this.zoom,V))},Pi.minPitch.get=function(){return this._minPitch},Pi.minPitch.set=function(V){this._minPitch!==V&&(this._minPitch=V,this.pitch=Math.max(this.pitch,V))},Pi.maxPitch.get=function(){return this._maxPitch},Pi.maxPitch.set=function(V){this._maxPitch!==V&&(this._maxPitch=V,this.pitch=Math.min(this.pitch,V))},Pi.renderWorldCopies.get=function(){return this._renderWorldCopies},Pi.renderWorldCopies.set=function(V){void 0===V?V=!0:null===V&&(V=!1),this._renderWorldCopies=V},Pi.worldSize.get=function(){return this.tileSize*this.scale},Pi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Pi.size.get=function(){return new f.Point(this.width,this.height)},Pi.bearing.get=function(){return-this.angle/Math.PI*180},Pi.bearing.set=function(V){var Y=-f.wrap(V,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=f.create$2(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Pi.pitch.get=function(){return this._pitch/Math.PI*180},Pi.pitch.set=function(V){var Y=f.clamp(V,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},Pi.fov.get=function(){return this._fov/Math.PI*180},Pi.fov.set=function(V){V=Math.max(.01,Math.min(60,V)),this._fov!==V&&(this._unmodified=!1,this._fov=V/180*Math.PI,this._calcMatrices())},Pi.zoom.get=function(){return this._zoom},Pi.zoom.set=function(V){var Y=Math.min(Math.max(V,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},Pi.center.get=function(){return this._center},Pi.center.set=function(V){V.lat===this._center.lat&&V.lng===this._center.lng||(this._unmodified=!1,this._center=V,this._constrain(),this._calcMatrices())},Pi.padding.get=function(){return this._edgeInsets.toJSON()},Pi.padding.set=function(V){this._edgeInsets.equals(V)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,V,1),this._calcMatrices())},Pi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},vi.prototype.isPaddingEqual=function(V){return this._edgeInsets.equals(V)},vi.prototype.interpolatePadding=function(V,Y,W){this._unmodified=!1,this._edgeInsets.interpolate(V,Y,W),this._constrain(),this._calcMatrices()},vi.prototype.coveringZoomLevel=function(V){var Y=(V.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/V.tileSize));return Math.max(0,Y)},vi.prototype.getVisibleUnwrappedCoordinates=function(V){var Y=[new f.UnwrappedTileID(0,V)];if(this._renderWorldCopies)for(var W=this.pointCoordinate(new f.Point(0,0)),re=this.pointCoordinate(new f.Point(this.width,0)),_e=this.pointCoordinate(new f.Point(this.width,this.height)),Pe=this.pointCoordinate(new f.Point(0,this.height)),q=Math.floor(Math.min(W.x,re.x,_e.x,Pe.x)),oe=Math.floor(Math.max(W.x,re.x,_e.x,Pe.x)),de=q-1;de<=oe+1;de++)0!==de&&Y.push(new f.UnwrappedTileID(de,V));return Y},vi.prototype.coveringTiles=function(V){var Y=this.coveringZoomLevel(V),W=Y;if(void 0!==V.minzoom&&Y<V.minzoom)return[];void 0!==V.maxzoom&&Y>V.maxzoom&&(Y=V.maxzoom);var re=f.MercatorCoordinate.fromLngLat(this.center),_e=Math.pow(2,Y),Pe=[_e*re.x,_e*re.y,0],q=Go.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,Y),oe=V.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(oe=Y);var de=function(nn){return{aabb:new Li([nn*_e,0,0],[(nn+1)*_e,_e,0]),zoom:0,x:0,y:0,wrap:nn,fullyVisible:!1}},Me=[],Se=[],ze=Y,Ye=V.reparseOverscaled?W:Y;if(this._renderWorldCopies)for(var Xe=1;Xe<=3;Xe++)Me.push(de(-Xe)),Me.push(de(Xe));for(Me.push(de(0));Me.length>0;){var tt=Me.pop(),rt=tt.x,ft=tt.y,bt=tt.fullyVisible;if(!bt){var At=tt.aabb.intersects(q);if(0===At)continue;bt=2===At}var Ut=tt.aabb.distanceX(Pe),qt=tt.aabb.distanceY(Pe),jt=Math.max(Math.abs(Ut),Math.abs(qt));if(tt.zoom===ze||jt>3+(1<<ze-tt.zoom)-2&&tt.zoom>=oe)Se.push({tileID:new f.OverscaledTileID(tt.zoom===ze?Ye:tt.zoom,tt.wrap,tt.zoom,rt,ft),distanceSq:f.sqrLen([Pe[0]-.5-rt,Pe[1]-.5-ft])});else for(var Vt=0;Vt<4;Vt++){var gn=(rt<<1)+Vt%2,ln=(ft<<1)+(Vt>>1);Me.push({aabb:tt.aabb.quadrant(Vt),zoom:tt.zoom+1,x:gn,y:ln,wrap:tt.wrap,fullyVisible:bt})}}return Se.sort(function(nn,On){return nn.distanceSq-On.distanceSq}).map(function(nn){return nn.tileID})},vi.prototype.resize=function(V,Y){this.width=V,this.height=Y,this.pixelsToGLUnits=[2/V,-2/Y],this._constrain(),this._calcMatrices()},Pi.unmodified.get=function(){return this._unmodified},vi.prototype.zoomScale=function(V){return Math.pow(2,V)},vi.prototype.scaleZoom=function(V){return Math.log(V)/Math.LN2},vi.prototype.project=function(V){var Y=f.clamp(V.lat,-this.maxValidLatitude,this.maxValidLatitude);return new f.Point(f.mercatorXfromLng(V.lng)*this.worldSize,f.mercatorYfromLat(Y)*this.worldSize)},vi.prototype.unproject=function(V){return new f.MercatorCoordinate(V.x/this.worldSize,V.y/this.worldSize).toLngLat()},Pi.point.get=function(){return this.project(this.center)},vi.prototype.setLocationAtPoint=function(V,Y){var W=this.pointCoordinate(Y),re=this.pointCoordinate(this.centerPoint),_e=this.locationCoordinate(V),Pe=new f.MercatorCoordinate(_e.x-(W.x-re.x),_e.y-(W.y-re.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},vi.prototype.locationPoint=function(V){return this.coordinatePoint(this.locationCoordinate(V))},vi.prototype.pointLocation=function(V){return this.coordinateLocation(this.pointCoordinate(V))},vi.prototype.locationCoordinate=function(V){return f.MercatorCoordinate.fromLngLat(V)},vi.prototype.coordinateLocation=function(V){return V.toLngLat()},vi.prototype.pointCoordinate=function(V){var Y=[V.x,V.y,0,1],W=[V.x,V.y,1,1];f.transformMat4(Y,Y,this.pixelMatrixInverse),f.transformMat4(W,W,this.pixelMatrixInverse);var re=Y[3],_e=W[3],oe=Y[1]/re,de=W[1]/_e,Me=Y[2]/re,Se=W[2]/_e,ze=Me===Se?0:(0-Me)/(Se-Me);return new f.MercatorCoordinate(f.number(Y[0]/re,W[0]/_e,ze)/this.worldSize,f.number(oe,de,ze)/this.worldSize)},vi.prototype.coordinatePoint=function(V){var Y=[V.x*this.worldSize,V.y*this.worldSize,0,1];return f.transformMat4(Y,Y,this.pixelMatrix),new f.Point(Y[0]/Y[3],Y[1]/Y[3])},vi.prototype.getBounds=function(){return(new f.LngLatBounds).extend(this.pointLocation(new f.Point(0,0))).extend(this.pointLocation(new f.Point(this.width,0))).extend(this.pointLocation(new f.Point(this.width,this.height))).extend(this.pointLocation(new f.Point(0,this.height)))},vi.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new f.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},vi.prototype.setMaxBounds=function(V){V?(this.lngRange=[V.getWest(),V.getEast()],this.latRange=[V.getSouth(),V.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},vi.prototype.calculatePosMatrix=function(V,Y){void 0===Y&&(Y=!1);var W=V.key,re=Y?this._alignedPosMatrixCache:this._posMatrixCache;if(re[W])return re[W];var _e=V.canonical,Pe=this.worldSize/this.zoomScale(_e.z),q=_e.x+Math.pow(2,_e.z)*V.wrap,oe=f.identity(new Float64Array(16));return f.translate(oe,oe,[q*Pe,_e.y*Pe,0]),f.scale(oe,oe,[Pe/f.EXTENT,Pe/f.EXTENT,1]),f.multiply(oe,Y?this.alignedProjMatrix:this.projMatrix,oe),re[W]=new Float32Array(oe),re[W]},vi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},vi.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var V,Y,W,re,_e=-90,Pe=90,q=-180,oe=180,de=this.size,Me=this._unmodified;if(this.latRange){var Se=this.latRange;_e=f.mercatorYfromLat(Se[1])*this.worldSize,V=(Pe=f.mercatorYfromLat(Se[0])*this.worldSize)-_e<de.y?de.y/(Pe-_e):0}if(this.lngRange){var ze=this.lngRange;q=f.mercatorXfromLng(ze[0])*this.worldSize,Y=(oe=f.mercatorXfromLng(ze[1])*this.worldSize)-q<de.x?de.x/(oe-q):0}var Ye=this.point,Xe=Math.max(Y||0,V||0);if(Xe)return this.center=this.unproject(new f.Point(Y?(oe+q)/2:Ye.x,V?(Pe+_e)/2:Ye.y)),this.zoom+=this.scaleZoom(Xe),this._unmodified=Me,void(this._constraining=!1);if(this.latRange){var tt=Ye.y,rt=de.y/2;tt-rt<_e&&(re=_e+rt),tt+rt>Pe&&(re=Pe-rt)}if(this.lngRange){var ft=Ye.x,bt=de.x/2;ft-bt<q&&(W=q+bt),ft+bt>oe&&(W=oe-bt)}void 0===W&&void 0===re||(this.center=this.unproject(new f.Point(void 0!==W?W:Ye.x,void 0!==re?re:Ye.y))),this._unmodified=Me,this._constraining=!1}},vi.prototype._calcMatrices=function(){if(this.height){var Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var W=Math.PI/2+this._pitch,re=this._fov*(.5+Y.y/this.height),_e=Math.sin(re)*this.cameraToCenterDistance/Math.sin(f.clamp(Math.PI-W-re,.01,Math.PI-.01)),Pe=this.point,q=Pe.x,oe=Pe.y,de=1.01*(Math.cos(Math.PI/2-this._pitch)*_e+this.cameraToCenterDistance),Me=this.height/50,Se=new Float64Array(16);f.perspective(Se,this._fov,this.width/this.height,Me,de),Se[8]=2*-Y.x/this.width,Se[9]=2*Y.y/this.height,f.scale(Se,Se,[1,-1,1]),f.translate(Se,Se,[0,0,-this.cameraToCenterDistance]),f.rotateX(Se,Se,this._pitch),f.rotateZ(Se,Se,this.angle),f.translate(Se,Se,[-q,-oe,0]),this.mercatorMatrix=f.scale([],Se,[this.worldSize,this.worldSize,this.worldSize]),f.scale(Se,Se,[1,1,f.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Se,this.invProjMatrix=f.invert([],this.projMatrix);var ze=this.width%2/2,Ye=this.height%2/2,Xe=Math.cos(this.angle),tt=Math.sin(this.angle),rt=q-Math.round(q)+Xe*ze+tt*Ye,ft=oe-Math.round(oe)+Xe*Ye+tt*ze,bt=new Float64Array(Se);if(f.translate(bt,bt,[rt>.5?rt-1:rt,ft>.5?ft-1:ft,0]),this.alignedProjMatrix=bt,Se=f.create(),f.scale(Se,Se,[this.width/2,-this.height/2,1]),f.translate(Se,Se,[1,-1,0]),this.labelPlaneMatrix=Se,Se=f.create(),f.scale(Se,Se,[1,-1,1]),f.translate(Se,Se,[-1,-1,0]),f.scale(Se,Se,[2/this.width,2/this.height,1]),this.glCoordMatrix=Se,this.pixelMatrix=f.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Se=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Se,this._posMatrixCache={},this._alignedPosMatrixCache={}}},vi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var V=this.pointCoordinate(new f.Point(0,0)),Y=[V.x*this.worldSize,V.y*this.worldSize,0,1];return f.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance},vi.prototype.getCameraPoint=function(){var Y=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new f.Point(0,Y))},vi.prototype.getCameraQueryGeometry=function(V){var Y=this.getCameraPoint();if(1===V.length)return[V[0],Y];for(var W=Y.x,re=Y.y,_e=Y.x,Pe=Y.y,q=0,oe=V;q<oe.length;q+=1){var de=oe[q];W=Math.min(W,de.x),re=Math.min(re,de.y),_e=Math.max(_e,de.x),Pe=Math.max(Pe,de.y)}return[new f.Point(W,re),new f.Point(_e,re),new f.Point(_e,Pe),new f.Point(W,Pe),new f.Point(W,re)]},Object.defineProperties(vi.prototype,Pi);var Ko=function(V){var Y,re,_e,Pe;this._hashName=V&&encodeURIComponent(V),f.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(Y=this._updateHashUnthrottled.bind(this),300,re=!1,_e=null,Pe=function(){_e=null,re&&(Y(),_e=setTimeout(Pe,300),re=!1)},function(){return re=!0,_e||Pe(),_e})};Ko.prototype.addTo=function(V){return this._map=V,f.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ko.prototype.remove=function(){return f.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ko.prototype.getHashString=function(V){var Y=this._map.getCenter(),W=Math.round(100*this._map.getZoom())/100,re=Math.ceil((W*Math.LN2+Math.log(512/360/.5))/Math.LN10),_e=Math.pow(10,re),Pe=Math.round(Y.lng*_e)/_e,q=Math.round(Y.lat*_e)/_e,oe=this._map.getBearing(),de=this._map.getPitch(),Me="";if(Me+=V?"/"+Pe+"/"+q+"/"+W:W+"/"+q+"/"+Pe,(oe||de)&&(Me+="/"+Math.round(10*oe)/10),de&&(Me+="/"+Math.round(de)),this._hashName){var Se=this._hashName,ze=!1,Ye=f.window.location.hash.slice(1).split("&").map(function(Xe){var tt=Xe.split("=")[0];return tt===Se?(ze=!0,tt+"="+Me):Xe}).filter(function(Xe){return Xe});return ze||Ye.push(Se+"="+Me),"#"+Ye.join("&")}return"#"+Me},Ko.prototype._getCurrentHash=function(){var V,Y=this,W=f.window.location.hash.replace("#","");return this._hashName?(W.split("&").map(function(re){return re.split("=")}).forEach(function(re){re[0]===Y._hashName&&(V=re)}),(V&&V[1]||"").split("/")):W.split("/")},Ko.prototype._onHashChange=function(){var V=this._getCurrentHash();if(V.length>=3&&!V.some(function(W){return isNaN(W)})){var Y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(V[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+V[2],+V[1]],zoom:+V[0],bearing:Y,pitch:+(V[4]||0)}),!0}return!1},Ko.prototype._updateHashUnthrottled=function(){var V=this.getHashString();try{f.window.history.replaceState(f.window.history.state,"",V)}catch{}};var Bs={linearity:.3,easing:f.bezier(0,0,.3,1)},Pu=f.extend({deceleration:2500,maxSpeed:1400},Bs),ml=f.extend({deceleration:20,maxSpeed:1400},Bs),vl=f.extend({deceleration:1e3,maxSpeed:360},Bs),du=f.extend({deceleration:1e3,maxSpeed:90},Bs),yo=function(V){this._map=V,this.clear()};function Gr(V,Y){(!V.duration||V.duration<Y.duration)&&(V.duration=Y.duration,V.easing=Y.easing)}function pi(V,Y,W){var re=W.maxSpeed,_e=W.linearity,Pe=W.deceleration,q=f.clamp(V*_e/(Y/1e3),-re,re),oe=Math.abs(q)/(Pe*_e);return{easing:W.easing,duration:1e3*oe,amount:q*(oe/2)}}yo.prototype.clear=function(){this._inertiaBuffer=[]},yo.prototype.record=function(V){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:f.browser.now(),settings:V})},yo.prototype._drainInertiaBuffer=function(){for(var V=this._inertiaBuffer,Y=f.browser.now();V.length>0&&Y-V[0].time>160;)V.shift()},yo.prototype._onMoveEnd=function(V){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var Y={zoom:0,bearing:0,pitch:0,pan:new f.Point(0,0),pinchAround:void 0,around:void 0},W=0,re=this._inertiaBuffer;W<re.length;W+=1){var _e=re[W].settings;Y.zoom+=_e.zoomDelta||0,Y.bearing+=_e.bearingDelta||0,Y.pitch+=_e.pitchDelta||0,_e.panDelta&&Y.pan._add(_e.panDelta),_e.around&&(Y.around=_e.around),_e.pinchAround&&(Y.pinchAround=_e.pinchAround)}var Pe=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,q={};if(Y.pan.mag()){var oe=pi(Y.pan.mag(),Pe,f.extend({},Pu,V||{}));q.offset=Y.pan.mult(oe.amount/Y.pan.mag()),q.center=this._map.transform.center,Gr(q,oe)}if(Y.zoom){var de=pi(Y.zoom,Pe,ml);q.zoom=this._map.transform.zoom+de.amount,Gr(q,de)}if(Y.bearing){var Me=pi(Y.bearing,Pe,vl);q.bearing=this._map.transform.bearing+f.clamp(Me.amount,-179,179),Gr(q,Me)}if(Y.pitch){var Se=pi(Y.pitch,Pe,du);q.pitch=this._map.transform.pitch+Se.amount,Gr(q,Se)}if(q.zoom||q.bearing){var ze=void 0===Y.pinchAround?Y.around:Y.pinchAround;q.around=ze?this._map.unproject(ze):this._map.getCenter()}return this.clear(),f.extend(q,{noMoveStart:!0})}};var xi=function(V){function Y(re,_e,Pe,q){void 0===q&&(q={});var oe=T.mousePos(_e.getCanvasContainer(),Pe),de=_e.unproject(oe);V.call(this,re,f.extend({point:oe,lngLat:de,originalEvent:Pe},q)),this._defaultPrevented=!1,this.target=_e}V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(f.Event),pa=function(V){function Y(re,_e,Pe){var q="touchend"===re?Pe.changedTouches:Pe.touches,oe=T.touchPos(_e.getCanvasContainer(),q),de=oe.map(function(ze){return _e.unproject(ze)}),Me=oe.reduce(function(ze,Ye,Xe,tt){return ze.add(Ye.div(tt.length))},new f.Point(0,0)),Se=_e.unproject(Me);V.call(this,re,{points:oe,point:Me,lngLats:de,lngLat:Se,originalEvent:Pe}),this._defaultPrevented=!1}V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(f.Event),ks=function(V){function Y(re,_e,Pe){V.call(this,re,{originalEvent:Pe}),this._defaultPrevented=!1}V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,W),Y}(f.Event),ji=function(V,Y){this._map=V,this._clickTolerance=Y.clickTolerance};ji.prototype.reset=function(){delete this._mousedownPos},ji.prototype.wheel=function(V){return this._firePreventable(new ks(V.type,this._map,V))},ji.prototype.mousedown=function(V,Y){return this._mousedownPos=Y,this._firePreventable(new xi(V.type,this._map,V))},ji.prototype.mouseup=function(V){this._map.fire(new xi(V.type,this._map,V))},ji.prototype.click=function(V,Y){this._mousedownPos&&this._mousedownPos.dist(Y)>=this._clickTolerance||this._map.fire(new xi(V.type,this._map,V))},ji.prototype.dblclick=function(V){return this._firePreventable(new xi(V.type,this._map,V))},ji.prototype.mouseover=function(V){this._map.fire(new xi(V.type,this._map,V))},ji.prototype.mouseout=function(V){this._map.fire(new xi(V.type,this._map,V))},ji.prototype.touchstart=function(V){return this._firePreventable(new pa(V.type,this._map,V))},ji.prototype.touchmove=function(V){this._map.fire(new pa(V.type,this._map,V))},ji.prototype.touchend=function(V){this._map.fire(new pa(V.type,this._map,V))},ji.prototype.touchcancel=function(V){this._map.fire(new pa(V.type,this._map,V))},ji.prototype._firePreventable=function(V){if(this._map.fire(V),V.defaultPrevented)return{}},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var Bo=function(V){this._map=V};Bo.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Bo.prototype.mousemove=function(V){this._map.fire(new xi(V.type,this._map,V))},Bo.prototype.mousedown=function(){this._delayContextMenu=!0},Bo.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Bo.prototype.contextmenu=function(V){this._delayContextMenu?this._contextMenuEvent=V:this._map.fire(new xi(V.type,this._map,V)),this._map.listens("contextmenu")&&V.preventDefault()},Bo.prototype.isEnabled=function(){return!0},Bo.prototype.isActive=function(){return!1},Bo.prototype.enable=function(){},Bo.prototype.disable=function(){};var Fi=function(V,Y){this._map=V,this._el=V.getCanvasContainer(),this._container=V.getContainer(),this._clickTolerance=Y.clickTolerance||1};function So(V,Y){for(var W={},re=0;re<V.length;re++)W[V[re].identifier]=Y[re];return W}Fi.prototype.isEnabled=function(){return!!this._enabled},Fi.prototype.isActive=function(){return!!this._active},Fi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Fi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Fi.prototype.mousedown=function(V,Y){this.isEnabled()&&V.shiftKey&&0===V.button&&(T.disableDrag(),this._startPos=this._lastPos=Y,this._active=!0)},Fi.prototype.mousemoveWindow=function(V,Y){if(this._active){var W=Y;if(!(this._lastPos.equals(W)||!this._box&&W.dist(this._startPos)<this._clickTolerance)){var re=this._startPos;this._lastPos=W,this._box||(this._box=T.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",V));var _e=Math.min(re.x,W.x),Pe=Math.max(re.x,W.x),q=Math.min(re.y,W.y),oe=Math.max(re.y,W.y);T.setTransform(this._box,"translate("+_e+"px,"+q+"px)"),this._box.style.width=Pe-_e+"px",this._box.style.height=oe-q+"px"}}},Fi.prototype.mouseupWindow=function(V,Y){var W=this;if(this._active&&0===V.button){var re=this._startPos,_e=Y;if(this.reset(),T.suppressClick(),re.x!==_e.x||re.y!==_e.y)return this._map.fire(new f.Event("boxzoomend",{originalEvent:V})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(re,_e,W._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",V)}},Fi.prototype.keydown=function(V){this._active&&27===V.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",V))},Fi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos},Fi.prototype._fireEvent=function(V,Y){return this._map.fire(new f.Event(V,{originalEvent:Y}))};var jo=function(V){this.reset(),this.numTouches=V.numTouches};jo.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},jo.prototype.touchstart=function(V,Y,W){(this.centroid||W.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=V.timeStamp),W.length===this.numTouches&&(this.centroid=function(re){for(var _e=new f.Point(0,0),Pe=0,q=re;Pe<q.length;Pe+=1)_e._add(q[Pe]);return _e.div(re.length)}(Y),this.touches=So(W,Y)))},jo.prototype.touchmove=function(V,Y,W){if(!this.aborted&&this.centroid){var re=So(W,Y);for(var _e in this.touches){var q=re[_e];(!q||q.dist(this.touches[_e])>30)&&(this.aborted=!0)}}},jo.prototype.touchend=function(V,Y,W){if((!this.centroid||V.timeStamp-this.startTime>500)&&(this.aborted=!0),0===W.length){var re=!this.aborted&&this.centroid;if(this.reset(),re)return re}};var mi=function(V){this.singleTap=new jo(V),this.numTaps=V.numTaps,this.reset()};mi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},mi.prototype.touchstart=function(V,Y,W){this.singleTap.touchstart(V,Y,W)},mi.prototype.touchmove=function(V,Y,W){this.singleTap.touchmove(V,Y,W)},mi.prototype.touchend=function(V,Y,W){var re=this.singleTap.touchend(V,Y,W);if(re){var _e=V.timeStamp-this.lastTime<500,Pe=!this.lastTap||this.lastTap.dist(re)<30;if(_e&&Pe||this.reset(),this.count++,this.lastTime=V.timeStamp,this.lastTap=re,this.count===this.numTaps)return this.reset(),re}};var Fa=function(){this._zoomIn=new mi({numTouches:1,numTaps:2}),this._zoomOut=new mi({numTouches:2,numTaps:1}),this.reset()};Fa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Fa.prototype.touchstart=function(V,Y,W){this._zoomIn.touchstart(V,Y,W),this._zoomOut.touchstart(V,Y,W)},Fa.prototype.touchmove=function(V,Y,W){this._zoomIn.touchmove(V,Y,W),this._zoomOut.touchmove(V,Y,W)},Fa.prototype.touchend=function(V,Y,W){var re=this,_e=this._zoomIn.touchend(V,Y,W),Pe=this._zoomOut.touchend(V,Y,W);return _e?(this._active=!0,V.preventDefault(),setTimeout(function(){return re.reset()},0),{cameraAnimation:function(q){return q.easeTo({duration:300,zoom:q.getZoom()+1,around:q.unproject(_e)},{originalEvent:V})}}):Pe?(this._active=!0,V.preventDefault(),setTimeout(function(){return re.reset()},0),{cameraAnimation:function(q){return q.easeTo({duration:300,zoom:q.getZoom()-1,around:q.unproject(Pe)},{originalEvent:V})}}):void 0},Fa.prototype.touchcancel=function(){this.reset()},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var Jo=function(V){this.reset(),this._clickTolerance=V.clickTolerance||1};Jo.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Jo.prototype._correctButton=function(V,Y){return!1},Jo.prototype._move=function(V,Y){return{}},Jo.prototype.mousedown=function(V,Y){if(!this._lastPoint){var W=T.mouseButton(V);this._correctButton(V,W)&&(this._lastPoint=Y,this._eventButton=W)}},Jo.prototype.mousemoveWindow=function(V,Y){var W=this._lastPoint;if(W&&(V.preventDefault(),this._moved||!(Y.dist(W)<this._clickTolerance)))return this._moved=!0,this._lastPoint=Y,this._move(W,Y)},Jo.prototype.mouseupWindow=function(V){T.mouseButton(V)===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())},Jo.prototype.enable=function(){this._enabled=!0},Jo.prototype.disable=function(){this._enabled=!1,this.reset()},Jo.prototype.isEnabled=function(){return this._enabled},Jo.prototype.isActive=function(){return this._active};var la=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.mousedown=function(W,re){V.prototype.mousedown.call(this,W,re),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(W,re){return 0===re&&!W.ctrlKey},Y.prototype._move=function(W,re){return{around:re,panDelta:re.sub(W)}},Y}(Jo),ro=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype._correctButton=function(W,re){return 0===re&&W.ctrlKey||2===re},Y.prototype._move=function(W,re){var _e=.8*(re.x-W.x);if(_e)return this._active=!0,{bearingDelta:_e}},Y.prototype.contextmenu=function(W){W.preventDefault()},Y}(Jo),yl=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype._correctButton=function(W,re){return 0===re&&W.ctrlKey||2===re},Y.prototype._move=function(W,re){var _e=-.5*(re.y-W.y);if(_e)return this._active=!0,{pitchDelta:_e}},Y.prototype.contextmenu=function(W){W.preventDefault()},Y}(Jo),ma=function(V){this._minTouches=1,this._clickTolerance=V.clickTolerance||1,this.reset()};ma.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new f.Point(0,0)},ma.prototype.touchstart=function(V,Y,W){return this._calculateTransform(V,Y,W)},ma.prototype.touchmove=function(V,Y,W){if(this._active)return V.preventDefault(),this._calculateTransform(V,Y,W)},ma.prototype.touchend=function(V,Y,W){this._calculateTransform(V,Y,W),this._active&&W.length<this._minTouches&&this.reset()},ma.prototype.touchcancel=function(){this.reset()},ma.prototype._calculateTransform=function(V,Y,W){W.length>0&&(this._active=!0);var re=So(W,Y),_e=new f.Point(0,0),Pe=new f.Point(0,0),q=0;for(var oe in re){var de=re[oe],Me=this._touches[oe];Me&&(_e._add(de),Pe._add(de.sub(Me)),q++,re[oe]=de)}if(this._touches=re,!(q<this._minTouches)&&Pe.mag()){var Se=Pe.div(q);if(this._sum._add(Se),!(this._sum.mag()<this._clickTolerance))return{around:_e.div(q),panDelta:Se}}},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};var ho=function(){this.reset()};function Hr(V,Y,W){for(var re=0;re<V.length;re++)if(V[re].identifier===W)return Y[re]}function ua(V,Y){return Math.log(V/Y)/Math.LN2}ho.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ho.prototype._start=function(V){},ho.prototype._move=function(V,Y,W){return{}},ho.prototype.touchstart=function(V,Y,W){this._firstTwoTouches||W.length<2||(this._firstTwoTouches=[W[0].identifier,W[1].identifier],this._start([Y[0],Y[1]]))},ho.prototype.touchmove=function(V,Y,W){if(this._firstTwoTouches){V.preventDefault();var re=this._firstTwoTouches,Pe=re[1],q=Hr(W,Y,re[0]),oe=Hr(W,Y,Pe);if(q&&oe){var de=this._aroundCenter?null:q.add(oe).div(2);return this._move([q,oe],de,V)}}},ho.prototype.touchend=function(V,Y,W){if(this._firstTwoTouches){var re=this._firstTwoTouches,Pe=re[1],q=Hr(W,Y,re[0]),oe=Hr(W,Y,Pe);q&&oe||(this._active&&T.suppressClick(),this.reset())}},ho.prototype.touchcancel=function(){this.reset()},ho.prototype.enable=function(V){this._enabled=!0,this._aroundCenter=!!V&&"center"===V.around},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var ls=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.reset=function(){V.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(W){this._startDistance=this._distance=W[0].dist(W[1])},Y.prototype._move=function(W,re){var _e=this._distance;if(this._distance=W[0].dist(W[1]),this._active||!(Math.abs(ua(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ua(this._distance,_e),pinchAround:re}},Y}(ho);function us(V,Y){return 180*V.angleWith(Y)/Math.PI}var js=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.reset=function(){V.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(W){this._startVector=this._vector=W[0].sub(W[1]),this._minDiameter=W[0].dist(W[1])},Y.prototype._move=function(W,re){var _e=this._vector;if(this._vector=W[0].sub(W[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:us(this._vector,_e),pinchAround:re}},Y.prototype._isBelowThreshold=function(W){this._minDiameter=Math.min(this._minDiameter,W.mag());var re=25/(Math.PI*this._minDiameter)*360,_e=us(W,this._startVector);return Math.abs(_e)<re},Y}(ho);function Us(V){return Math.abs(V.y)>Math.abs(V.x)}var Mi=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.reset=function(){V.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(W){this._lastPoints=W,Us(W[0].sub(W[1]))&&(this._valid=!1)},Y.prototype._move=function(W,re,_e){var Pe=W[0].sub(this._lastPoints[0]),q=W[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,q,_e.timeStamp),this._valid)return this._lastPoints=W,this._active=!0,{pitchDelta:(Pe.y+q.y)/2*-.5}},Y.prototype.gestureBeginsVertically=function(W,re,_e){if(void 0!==this._valid)return this._valid;var Pe=W.mag()>=2,q=re.mag()>=2;if(Pe||q){if(!Pe||!q)return void 0===this._firstMove&&(this._firstMove=_e),_e-this._firstMove<100&&void 0;var oe=W.y>0==re.y>0;return Us(W)&&Us(re)&&oe}},Y}(ho),Ur={panStep:100,bearingStep:15,pitchStep:10},ts=function(){var V=Ur;this._panStep=V.panStep,this._bearingStep=V.bearingStep,this._pitchStep=V.pitchStep};function Sl(V){return V*(2-V)}ts.prototype.reset=function(){this._active=!1},ts.prototype.keydown=function(V){var Y=this;if(!(V.altKey||V.ctrlKey||V.metaKey)){var W=0,re=0,_e=0,Pe=0,q=0;switch(V.keyCode){case 61:case 107:case 171:case 187:W=1;break;case 189:case 109:case 173:W=-1;break;case 37:V.shiftKey?re=-1:(V.preventDefault(),Pe=-1);break;case 39:V.shiftKey?re=1:(V.preventDefault(),Pe=1);break;case 38:V.shiftKey?_e=1:(V.preventDefault(),q=-1);break;case 40:V.shiftKey?_e=-1:(V.preventDefault(),q=1);break;default:return}return{cameraAnimation:function(oe){var de=oe.getZoom();oe.easeTo({duration:300,easeId:"keyboardHandler",easing:Sl,zoom:W?Math.round(de)+W*(V.shiftKey?2:1):de,bearing:oe.getBearing()+re*Y._bearingStep,pitch:oe.getPitch()+_e*Y._pitchStep,offset:[-Pe*Y._panStep,-q*Y._panStep],center:oe.getCenter()},{originalEvent:V})}}}},ts.prototype.enable=function(){this._enabled=!0},ts.prototype.disable=function(){this._enabled=!1,this.reset()},ts.prototype.isEnabled=function(){return this._enabled},ts.prototype.isActive=function(){return this._active};var Va=4.000244140625,Qo=function(V,Y){this._map=V,this._el=V.getCanvasContainer(),this._handler=Y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,f.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Qo.prototype.setZoomRate=function(V){this._defaultZoomRate=V},Qo.prototype.setWheelZoomRate=function(V){this._wheelZoomRate=V},Qo.prototype.isEnabled=function(){return!!this._enabled},Qo.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Qo.prototype.isZooming=function(){return!!this._zooming},Qo.prototype.enable=function(V){this.isEnabled()||(this._enabled=!0,this._aroundCenter=V&&"center"===V.around)},Qo.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qo.prototype.wheel=function(V){if(this.isEnabled()){var Y=V.deltaMode===f.window.WheelEvent.DOM_DELTA_LINE?40*V.deltaY:V.deltaY,W=f.browser.now(),re=W-(this._lastWheelEventTime||0);this._lastWheelEventTime=W,0!==Y&&Y%Va==0?this._type="wheel":0!==Y&&Math.abs(Y)<4?this._type="trackpad":re>400?(this._type=null,this._lastValue=Y,this._timeout=setTimeout(this._onTimeout,40,V)):this._type||(this._type=Math.abs(re*Y)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,Y+=this._lastValue)),V.shiftKey&&Y&&(Y/=4),this._type&&(this._lastWheelEvent=V,this._delta-=Y,this._active||this._start(V)),V.preventDefault()}},Qo.prototype._onTimeout=function(V){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(V)},Qo.prototype._start=function(V){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var Y=T.mousePos(this._el,V);this._around=f.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qo.prototype.renderFrame=function(){return this._onScrollFrame()},Qo.prototype._onScrollFrame=function(){var V=this;if(this._frameId&&(this._frameId=null,this.isActive())){var Y=this._map.transform;if(0!==this._delta){var W="wheel"===this._type&&Math.abs(this._delta)>Va?this._wheelZoomRate:this._defaultZoomRate,re=2/(1+Math.exp(-Math.abs(this._delta*W)));this._delta<0&&0!==re&&(re=1/re);var _e="number"==typeof this._targetZoom?Y.zoomScale(this._targetZoom):Y.scale;this._targetZoom=Math.min(Y.maxZoom,Math.max(Y.minZoom,Y.scaleZoom(_e*re))),"wheel"===this._type&&(this._startZoom=Y.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe,q="number"==typeof this._targetZoom?this._targetZoom:Y.zoom,oe=this._startZoom,de=this._easing,Me=!1;if("wheel"===this._type&&oe&&de){var Se=Math.min((f.browser.now()-this._lastWheelEventTime)/200,1),ze=de(Se);Pe=f.number(oe,q,ze),Se<1?this._frameId||(this._frameId=!0):Me=!0}else Pe=q,Me=!0;return this._active=!0,Me&&(this._active=!1,this._finishTimeout=setTimeout(function(){V._zooming=!1,V._handler._triggerRenderFrame(),delete V._targetZoom,delete V._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Me,zoomDelta:Pe-Y.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qo.prototype._smoothOutEasing=function(V){var Y=f.ease;if(this._prevEase){var W=this._prevEase,re=(f.browser.now()-W.start)/W.duration,_e=W.easing(re+.01)-W.easing(re),Pe=.27/Math.sqrt(_e*_e+1e-4)*.01,q=Math.sqrt(.0729-Pe*Pe);Y=f.bezier(Pe,q,.25,1)}return this._prevEase={start:f.browser.now(),duration:V,easing:Y},Y},Qo.prototype.reset=function(){this._active=!1};var La=function(V,Y){this._clickZoom=V,this._tapZoom=Y};La.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},La.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},La.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},La.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Oa=function(){this.reset()};Oa.prototype.reset=function(){this._active=!1},Oa.prototype.dblclick=function(V,Y){return V.preventDefault(),{cameraAnimation:function(W){W.easeTo({duration:300,zoom:W.getZoom()+(V.shiftKey?-1:1),around:W.unproject(Y)},{originalEvent:V})}}},Oa.prototype.enable=function(){this._enabled=!0},Oa.prototype.disable=function(){this._enabled=!1,this.reset()},Oa.prototype.isEnabled=function(){return this._enabled},Oa.prototype.isActive=function(){return this._active};var po=function(){this._tap=new mi({numTouches:1,numTaps:1}),this.reset()};po.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},po.prototype.touchstart=function(V,Y,W){this._swipePoint||(this._tapTime&&V.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?W.length>0&&(this._swipePoint=Y[0],this._swipeTouch=W[0].identifier):this._tap.touchstart(V,Y,W))},po.prototype.touchmove=function(V,Y,W){if(this._tapTime){if(this._swipePoint){if(W[0].identifier!==this._swipeTouch)return;var re=Y[0],_e=re.y-this._swipePoint.y;return this._swipePoint=re,V.preventDefault(),this._active=!0,{zoomDelta:_e/128}}}else this._tap.touchmove(V,Y,W)},po.prototype.touchend=function(V,Y,W){this._tapTime?this._swipePoint&&0===W.length&&this.reset():this._tap.touchend(V,Y,W)&&(this._tapTime=V.timeStamp)},po.prototype.touchcancel=function(){this.reset()},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var el=function(V,Y,W){this._el=V,this._mousePan=Y,this._touchPan=W};el.prototype.enable=function(V){this._inertiaOptions=V||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},el.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},el.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},el.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wo=function(V,Y,W){this._pitchWithRotate=V.pitchWithRotate,this._mouseRotate=Y,this._mousePitch=W};Wo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Zi=function(V,Y,W,re){this._el=V,this._touchZoom=Y,this._touchRotate=W,this._tapDragZoom=re,this._rotationDisabled=!1,this._enabled=!0};Zi.prototype.enable=function(V){this._touchZoom.enable(V),this._rotationDisabled||this._touchRotate.enable(V),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Zi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Zi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Zi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Zi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Zi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var tl=function(V){return V.zoom||V.drag||V.pitch||V.rotate},cs=function(V){function Y(){V.apply(this,arguments)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y}(f.Event);function Uo(V){return V.panDelta&&V.panDelta.mag()||V.zoomDelta||V.bearingDelta||V.pitchDelta}var Ii=function(V,Y){this._map=V,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yo(V),this._bearingSnap=Y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(Y),f.bindAll(["handleEvent","handleWindowEvent"],this);var W=this._el;this._listeners=[[W,"touchstart",{passive:!1}],[W,"touchmove",{passive:!1}],[W,"touchend",void 0],[W,"touchcancel",void 0],[W,"mousedown",void 0],[W,"mousemove",void 0],[W,"mouseup",void 0],[f.window.document,"mousemove",{capture:!0}],[f.window.document,"mouseup",void 0],[W,"mouseover",void 0],[W,"mouseout",void 0],[W,"dblclick",void 0],[W,"click",void 0],[W,"keydown",{capture:!1}],[W,"keyup",void 0],[W,"wheel",{passive:!1}],[W,"contextmenu",void 0],[f.window,"blur",void 0]];for(var re=0,_e=this._listeners;re<_e.length;re+=1){var Pe=_e[re],q=Pe[0];T.addEventListener(q,Pe[1],q===f.window.document?this.handleWindowEvent:this.handleEvent,Pe[2])}};Ii.prototype.destroy=function(){for(var V=0,Y=this._listeners;V<Y.length;V+=1){var W=Y[V],re=W[0];T.removeEventListener(re,W[1],re===f.window.document?this.handleWindowEvent:this.handleEvent,W[2])}},Ii.prototype._addDefaultHandlers=function(V){var Y=this._map,W=Y.getCanvasContainer();this._add("mapEvent",new ji(Y,V));var re=Y.boxZoom=new Fi(Y,V);this._add("boxZoom",re);var _e=new Fa,Pe=new Oa;Y.doubleClickZoom=new La(Pe,_e),this._add("tapZoom",_e),this._add("clickZoom",Pe);var q=new po;this._add("tapDragZoom",q);var oe=Y.touchPitch=new Mi;this._add("touchPitch",oe);var de=new ro(V),Me=new yl(V);Y.dragRotate=new Wo(V,de,Me),this._add("mouseRotate",de,["mousePitch"]),this._add("mousePitch",Me,["mouseRotate"]);var Se=new la(V),ze=new ma(V);Y.dragPan=new el(W,Se,ze),this._add("mousePan",Se),this._add("touchPan",ze,["touchZoom","touchRotate"]);var Ye=new js,Xe=new ls;Y.touchZoomRotate=new Zi(W,Xe,Ye,q),this._add("touchRotate",Ye,["touchPan","touchZoom"]),this._add("touchZoom",Xe,["touchPan","touchRotate"]);var tt=Y.scrollZoom=new Qo(Y,this);this._add("scrollZoom",tt,["mousePan"]);var rt=Y.keyboard=new ts;this._add("keyboard",rt),this._add("blockableMapEvent",new Bo(Y));for(var ft=0,bt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ft<bt.length;ft+=1){var At=bt[ft];V.interactive&&V[At]&&Y[At].enable(V[At])}},Ii.prototype._add=function(V,Y,W){this._handlers.push({handlerName:V,handler:Y,allowed:W}),this._handlersById[V]=Y},Ii.prototype.stop=function(){if(!this._updatingCamera){for(var V=0,Y=this._handlers;V<Y.length;V+=1)Y[V].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Ii.prototype.isActive=function(){for(var V=0,Y=this._handlers;V<Y.length;V+=1)if(Y[V].handler.isActive())return!0;return!1},Ii.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ii.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ii.prototype.isMoving=function(){return!!tl(this._eventsInProgress)||this.isZooming()},Ii.prototype._blockedByActive=function(V,Y,W){for(var re in V)if(re!==W&&(!Y||Y.indexOf(re)<0))return!0;return!1},Ii.prototype.handleWindowEvent=function(V){this.handleEvent(V,V.type+"Window")},Ii.prototype._getMapTouches=function(V){for(var Y=[],W=0,re=V;W<re.length;W+=1){var _e=re[W];this._el.contains(_e.target)&&Y.push(_e)}return Y},Ii.prototype.handleEvent=function(V,Y){if("blur"!==V.type){this._updatingCamera=!0;for(var W="renderFrame"===V.type?void 0:V,re={needsRenderFrame:!1},_e={},Pe={},q=V.touches?this._getMapTouches(V.touches):void 0,oe=q?T.touchPos(this._el,q):T.mousePos(this._el,V),de=0,Me=this._handlers;de<Me.length;de+=1){var Se=Me[de],ze=Se.handlerName,Ye=Se.handler,Xe=Se.allowed;if(Ye.isEnabled()){var tt=void 0;this._blockedByActive(Pe,Xe,ze)?Ye.reset():Ye[Y||V.type]&&(tt=Ye[Y||V.type](V,oe,q),this.mergeHandlerResult(re,_e,tt,ze,W),tt&&tt.needsRenderFrame&&this._triggerRenderFrame()),(tt||Ye.isActive())&&(Pe[ze]=Ye)}}var rt={};for(var ft in this._previousActiveHandlers)Pe[ft]||(rt[ft]=W);this._previousActiveHandlers=Pe,(Object.keys(rt).length||Uo(re))&&(this._changes.push([re,_e,rt]),this._triggerRenderFrame()),(Object.keys(Pe).length||Uo(re))&&this._map._stop(!0),this._updatingCamera=!1;var bt=re.cameraAnimation;bt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],bt(this._map))}else this.stop()},Ii.prototype.mergeHandlerResult=function(V,Y,W,re,_e){if(W){f.extend(V,W);var Pe={handlerName:re,originalEvent:W.originalEvent||_e};void 0!==W.zoomDelta&&(Y.zoom=Pe),void 0!==W.panDelta&&(Y.drag=Pe),void 0!==W.pitchDelta&&(Y.pitch=Pe),void 0!==W.bearingDelta&&(Y.rotate=Pe)}},Ii.prototype._applyChanges=function(){for(var V={},Y={},W={},re=0,_e=this._changes;re<_e.length;re+=1){var Pe=_e[re],q=Pe[0],oe=Pe[1],de=Pe[2];q.panDelta&&(V.panDelta=(V.panDelta||new f.Point(0,0))._add(q.panDelta)),q.zoomDelta&&(V.zoomDelta=(V.zoomDelta||0)+q.zoomDelta),q.bearingDelta&&(V.bearingDelta=(V.bearingDelta||0)+q.bearingDelta),q.pitchDelta&&(V.pitchDelta=(V.pitchDelta||0)+q.pitchDelta),void 0!==q.around&&(V.around=q.around),void 0!==q.pinchAround&&(V.pinchAround=q.pinchAround),q.noInertia&&(V.noInertia=q.noInertia),f.extend(Y,oe),f.extend(W,de)}this._updateMapTransform(V,Y,W),this._changes=[]},Ii.prototype._updateMapTransform=function(V,Y,W){var re=this._map,_e=re.transform;if(!Uo(V))return this._fireEvents(Y,W);var Pe=V.panDelta,q=V.zoomDelta,oe=V.bearingDelta,de=V.pitchDelta,Me=V.around,Se=V.pinchAround;void 0!==Se&&(Me=Se),re._stop(!0),Me=Me||re.transform.centerPoint;var ze=_e.pointLocation(Pe?Me.sub(Pe):Me);oe&&(_e.bearing+=oe),de&&(_e.pitch+=de),q&&(_e.zoom+=q),_e.setLocationAtPoint(ze,Me),this._map._update(),V.noInertia||this._inertia.record(V),this._fireEvents(Y,W)},Ii.prototype._fireEvents=function(V,Y){var W=this,re=tl(this._eventsInProgress),_e=tl(V),Pe={};for(var q in V)this._eventsInProgress[q]||(Pe[q+"start"]=V[q].originalEvent),this._eventsInProgress[q]=V[q];for(var de in!re&&_e&&this._fireEvent("movestart",_e.originalEvent),Pe)this._fireEvent(de,Pe[de]);for(var Me in V.rotate&&(this._bearingChanged=!0),_e&&this._fireEvent("move",_e.originalEvent),V)this._fireEvent(Me,V[Me].originalEvent);var ze,Ye={};for(var Xe in this._eventsInProgress){var tt=this._eventsInProgress[Xe],rt=tt.handlerName,ft=tt.originalEvent;this._handlersById[rt].isActive()||(delete this._eventsInProgress[Xe],Ye[Xe+"end"]=ze=Y[rt]||ft)}for(var bt in Ye)this._fireEvent(bt,Ye[bt]);var At=tl(this._eventsInProgress);if((re||_e)&&!At){this._updatingCamera=!0;var Ut=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qt=function(jt){return 0!==jt&&-W._bearingSnap<jt&&jt<W._bearingSnap};Ut?(qt(Ut.bearing||this._map.getBearing())&&(Ut.bearing=0),this._map.easeTo(Ut,{originalEvent:ze})):(this._map.fire(new f.Event("moveend",{originalEvent:ze})),qt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Ii.prototype._fireEvent=function(V,Y){this._map.fire(new f.Event(V,Y?{originalEvent:Y}:{}))},Ii.prototype._triggerRenderFrame=function(){var V=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(Y){delete V._frameId,V.handleEvent(new cs("renderFrame",{timeStamp:Y})),V._applyChanges()}))};var El=function(V){function Y(W,re){V.call(this),this._moving=!1,this._zooming=!1,this.transform=W,this._bearingSnap=re.bearingSnap,f.bindAll(["_renderFrameCallback"],this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.getCenter=function(){return new f.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(W,re){return this.jumpTo({center:W},re)},Y.prototype.panBy=function(W,re,_e){return W=f.Point.convert(W).mult(-1),this.panTo(this.transform.center,f.extend({offset:W},re),_e)},Y.prototype.panTo=function(W,re,_e){return this.easeTo(f.extend({center:W},re),_e)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(W,re){return this.jumpTo({zoom:W},re),this},Y.prototype.zoomTo=function(W,re,_e){return this.easeTo(f.extend({zoom:W},re),_e)},Y.prototype.zoomIn=function(W,re){return this.zoomTo(this.getZoom()+1,W,re),this},Y.prototype.zoomOut=function(W,re){return this.zoomTo(this.getZoom()-1,W,re),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(W,re){return this.jumpTo({bearing:W},re),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(W,re){return this.jumpTo({padding:W},re),this},Y.prototype.rotateTo=function(W,re,_e){return this.easeTo(f.extend({bearing:W},re),_e)},Y.prototype.resetNorth=function(W,re){return this.rotateTo(0,f.extend({duration:1e3},W),re),this},Y.prototype.resetNorthPitch=function(W,re){return this.easeTo(f.extend({bearing:0,pitch:0,duration:1e3},W),re),this},Y.prototype.snapToNorth=function(W,re){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(W,re):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(W,re){return this.jumpTo({pitch:W},re),this},Y.prototype.cameraForBounds=function(W,re){return W=f.LngLatBounds.convert(W),this._cameraForBoxAndBearing(W.getNorthWest(),W.getSouthEast(),0,re)},Y.prototype._cameraForBoxAndBearing=function(W,re,_e,Pe){var q={top:0,bottom:0,right:0,left:0};if("number"==typeof(Pe=f.extend({padding:q,offset:[0,0],maxZoom:this.transform.maxZoom},Pe)).padding){var oe=Pe.padding;Pe.padding={top:oe,bottom:oe,right:oe,left:oe}}Pe.padding=f.extend(q,Pe.padding);var de=this.transform,Me=de.padding,Se=de.project(f.LngLat.convert(W)),ze=de.project(f.LngLat.convert(re)),Ye=Se.rotate(-_e*Math.PI/180),Xe=ze.rotate(-_e*Math.PI/180),tt=new f.Point(Math.max(Ye.x,Xe.x),Math.max(Ye.y,Xe.y)),rt=new f.Point(Math.min(Ye.x,Xe.x),Math.min(Ye.y,Xe.y)),ft=tt.sub(rt),bt=(de.width-(Me.left+Me.right+Pe.padding.left+Pe.padding.right))/ft.x,At=(de.height-(Me.top+Me.bottom+Pe.padding.top+Pe.padding.bottom))/ft.y;if(!(At<0||bt<0)){var Ut=Math.min(de.scaleZoom(de.scale*Math.min(bt,At)),Pe.maxZoom),qt=f.Point.convert(Pe.offset),Vt=new f.Point(qt.x+(Pe.padding.left-Pe.padding.right)/2,qt.y+(Pe.padding.top-Pe.padding.bottom)/2).mult(de.scale/de.zoomScale(Ut));return{center:de.unproject(Se.add(ze).div(2).sub(Vt)),zoom:Ut,bearing:_e}}f.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},Y.prototype.fitBounds=function(W,re,_e){return this._fitInternal(this.cameraForBounds(W,re),re,_e)},Y.prototype.fitScreenCoordinates=function(W,re,_e,Pe,q){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(f.Point.convert(W)),this.transform.pointLocation(f.Point.convert(re)),_e,Pe),Pe,q)},Y.prototype._fitInternal=function(W,re,_e){return W?(delete(re=f.extend(W,re)).padding,re.linear?this.easeTo(re,_e):this.flyTo(re,_e)):this},Y.prototype.jumpTo=function(W,re){this.stop();var _e=this.transform,Pe=!1,q=!1,oe=!1;return"zoom"in W&&_e.zoom!==+W.zoom&&(Pe=!0,_e.zoom=+W.zoom),void 0!==W.center&&(_e.center=f.LngLat.convert(W.center)),"bearing"in W&&_e.bearing!==+W.bearing&&(q=!0,_e.bearing=+W.bearing),"pitch"in W&&_e.pitch!==+W.pitch&&(oe=!0,_e.pitch=+W.pitch),null==W.padding||_e.isPaddingEqual(W.padding)||(_e.padding=W.padding),this.fire(new f.Event("movestart",re)).fire(new f.Event("move",re)),Pe&&this.fire(new f.Event("zoomstart",re)).fire(new f.Event("zoom",re)).fire(new f.Event("zoomend",re)),q&&this.fire(new f.Event("rotatestart",re)).fire(new f.Event("rotate",re)).fire(new f.Event("rotateend",re)),oe&&this.fire(new f.Event("pitchstart",re)).fire(new f.Event("pitch",re)).fire(new f.Event("pitchend",re)),this.fire(new f.Event("moveend",re))},Y.prototype.easeTo=function(W,re){var _e=this;this._stop(!1,W.easeId),(!1===(W=f.extend({offset:[0,0],duration:500,easing:f.ease},W)).animate||!W.essential&&f.browser.prefersReducedMotion)&&(W.duration=0);var Pe=this.transform,q=this.getZoom(),oe=this.getBearing(),de=this.getPitch(),Me=this.getPadding(),Se="zoom"in W?+W.zoom:q,ze="bearing"in W?this._normalizeBearing(W.bearing,oe):oe,Ye="pitch"in W?+W.pitch:de,Xe="padding"in W?W.padding:Pe.padding,tt=f.Point.convert(W.offset),rt=Pe.centerPoint.add(tt),ft=Pe.pointLocation(rt),bt=f.LngLat.convert(W.center||ft);this._normalizeCenter(bt);var At,Ut,qt=Pe.project(ft),jt=Pe.project(bt).sub(qt),Kt=Pe.zoomScale(Se-q);W.around&&(At=f.LngLat.convert(W.around),Ut=Pe.locationPoint(At));var Vt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Se!==q,this._rotating=this._rotating||oe!==ze,this._pitching=this._pitching||Ye!==de,this._padding=!Pe.isPaddingEqual(Xe),this._easeId=W.easeId,this._prepareEase(re,W.noMoveStart,Vt),clearTimeout(this._easeEndTimeoutID),this._ease(function(gn){if(_e._zooming&&(Pe.zoom=f.number(q,Se,gn)),_e._rotating&&(Pe.bearing=f.number(oe,ze,gn)),_e._pitching&&(Pe.pitch=f.number(de,Ye,gn)),_e._padding&&(Pe.interpolatePadding(Me,Xe,gn),rt=Pe.centerPoint.add(tt)),At)Pe.setLocationAtPoint(At,Ut);else{var ln=Pe.zoomScale(Pe.zoom-q),nn=Se>q?Math.min(2,Kt):Math.max(.5,Kt),On=Math.pow(nn,1-gn),Pn=Pe.unproject(qt.add(jt.mult(gn*On)).mult(ln));Pe.setLocationAtPoint(Pe.renderWorldCopies?Pn.wrap():Pn,rt)}_e._fireMoveEvents(re)},function(gn){_e._afterEase(re,gn)},W),this},Y.prototype._prepareEase=function(W,re,_e){void 0===_e&&(_e={}),this._moving=!0,re||_e.moving||this.fire(new f.Event("movestart",W)),this._zooming&&!_e.zooming&&this.fire(new f.Event("zoomstart",W)),this._rotating&&!_e.rotating&&this.fire(new f.Event("rotatestart",W)),this._pitching&&!_e.pitching&&this.fire(new f.Event("pitchstart",W))},Y.prototype._fireMoveEvents=function(W){this.fire(new f.Event("move",W)),this._zooming&&this.fire(new f.Event("zoom",W)),this._rotating&&this.fire(new f.Event("rotate",W)),this._pitching&&this.fire(new f.Event("pitch",W))},Y.prototype._afterEase=function(W,re){if(!this._easeId||!re||this._easeId!==re){delete this._easeId;var _e=this._zooming,Pe=this._rotating,q=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_e&&this.fire(new f.Event("zoomend",W)),Pe&&this.fire(new f.Event("rotateend",W)),q&&this.fire(new f.Event("pitchend",W)),this.fire(new f.Event("moveend",W))}},Y.prototype.flyTo=function(W,re){var _e=this;if(!W.essential&&f.browser.prefersReducedMotion){var Pe=f.pick(W,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,re)}this.stop(),W=f.extend({offset:[0,0],speed:1.2,curve:1.42,easing:f.ease},W);var q=this.transform,oe=this.getZoom(),de=this.getBearing(),Me=this.getPitch(),Se=this.getPadding(),ze="zoom"in W?f.clamp(+W.zoom,q.minZoom,q.maxZoom):oe,Ye="bearing"in W?this._normalizeBearing(W.bearing,de):de,Xe="pitch"in W?+W.pitch:Me,tt="padding"in W?W.padding:q.padding,rt=q.zoomScale(ze-oe),ft=f.Point.convert(W.offset),bt=q.centerPoint.add(ft),At=q.pointLocation(bt),Ut=f.LngLat.convert(W.center||At);this._normalizeCenter(Ut);var qt=q.project(At),jt=q.project(Ut).sub(qt),Kt=W.curve,Vt=Math.max(q.width,q.height),gn=Vt/rt,ln=jt.mag();if("minZoom"in W){var nn=f.clamp(Math.min(W.minZoom,oe,ze),q.minZoom,q.maxZoom),On=Vt/q.zoomScale(nn-oe);Kt=Math.sqrt(On/ln*2)}var Pn=Kt*Kt;function tr(ir){var Ar=(gn*gn-Vt*Vt+(ir?-1:1)*Pn*Pn*ln*ln)/(2*(ir?gn:Vt)*Pn*ln);return Math.log(Math.sqrt(Ar*Ar+1)-Ar)}function Jn(ir){return(Math.exp(ir)-Math.exp(-ir))/2}function ur(ir){return(Math.exp(ir)+Math.exp(-ir))/2}var vr=tr(0),wr=function(ir){return ur(vr)/ur(vr+Kt*ir)},Cr=function(ir){return Vt*((ur(vr)*(Jn(Ar=vr+Kt*ir)/ur(Ar))-Jn(vr))/Pn)/ln;var Ar},Or=(tr(1)-vr)/Kt;if(Math.abs(ln)<1e-6||!isFinite(Or)){if(Math.abs(Vt-gn)<1e-6)return this.easeTo(W,re);var Rr=gn<Vt?-1:1;Or=Math.abs(Math.log(gn/Vt))/Kt,Cr=function(){return 0},wr=function(ir){return Math.exp(Rr*Kt*ir)}}return W.duration="duration"in W?+W.duration:1e3*Or/("screenSpeed"in W?+W.screenSpeed/Kt:+W.speed),W.maxDuration&&W.duration>W.maxDuration&&(W.duration=0),this._zooming=!0,this._rotating=de!==Ye,this._pitching=Xe!==Me,this._padding=!q.isPaddingEqual(tt),this._prepareEase(re,!1),this._ease(function(ir){var Ar=ir*Or,Lr=1/wr(Ar);q.zoom=1===ir?ze:oe+q.scaleZoom(Lr),_e._rotating&&(q.bearing=f.number(de,Ye,ir)),_e._pitching&&(q.pitch=f.number(Me,Xe,ir)),_e._padding&&(q.interpolatePadding(Se,tt,ir),bt=q.centerPoint.add(ft));var qr=1===ir?Ut:q.unproject(qt.add(jt.mult(Cr(Ar))).mult(Lr));q.setLocationAtPoint(q.renderWorldCopies?qr.wrap():qr,bt),_e._fireMoveEvents(re)},function(){return _e._afterEase(re)},W),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(W,re){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var _e=this._onEaseEnd;delete this._onEaseEnd,_e.call(this,re)}if(!W){var Pe=this.handlers;Pe&&Pe.stop()}return this},Y.prototype._ease=function(W,re,_e){!1===_e.animate||0===_e.duration?(W(1),re()):(this._easeStart=f.browser.now(),this._easeOptions=_e,this._onEaseFrame=W,this._onEaseEnd=re,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var W=Math.min((f.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(W)),W<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(W,re){W=f.wrap(W,-180,180);var _e=Math.abs(W-re);return Math.abs(W-360-re)<_e&&(W-=360),Math.abs(W+360-re)<_e&&(W+=360),W},Y.prototype._normalizeCenter=function(W){var re=this.transform;if(re.renderWorldCopies&&!re.lngRange){var _e=W.lng-re.center.lng;W.lng+=_e>180?-360:_e<-180?360:0}},Y}(f.Evented),Ha=function(V){void 0===V&&(V={}),this.options=V,f.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ha.prototype.getDefaultPosition=function(){return"bottom-right"},Ha.prototype.onAdd=function(V){var Y=this.options&&this.options.compact;return this._map=V,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=T.create("div","mapboxgl-ctrl-attrib-inner",this._container),Y&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===Y&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ha.prototype.onRemove=function(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ha.prototype._updateEditLink=function(){var V=this._editLink;V||(V=this._editLink=this._container.querySelector(".mapbox-improve-map"));var Y=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||f.config.ACCESS_TOKEN}];if(V){var W=Y.reduce(function(re,_e,Pe){return _e.value&&(re+=_e.key+"="+_e.value+(Pe<Y.length-1?"&":"")),re},"?");V.href=f.config.FEEDBACK_URL+"/"+W+(this._map._hash?this._map._hash.getHashString(!0):""),V.rel="noopener nofollow"}},Ha.prototype._updateData=function(V){!V||"metadata"!==V.sourceDataType&&"style"!==V.dataType||(this._updateAttributions(),this._updateEditLink())},Ha.prototype._updateAttributions=function(){if(this._map.style){var V=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?V=V.concat(this.options.customAttribution.map(function(oe){return"string"!=typeof oe?"":oe})):"string"==typeof this.options.customAttribution&&V.push(this.options.customAttribution)),this._map.style.stylesheet){var Y=this._map.style.stylesheet;this.styleOwner=Y.owner,this.styleId=Y.id}var W=this._map.style.sourceCaches;for(var re in W){var _e=W[re];if(_e.used){var Pe=_e.getSource();Pe.attribution&&V.indexOf(Pe.attribution)<0&&V.push(Pe.attribution)}}V.sort(function(oe,de){return oe.length-de.length});var q=(V=V.filter(function(oe,de){for(var Me=de+1;Me<V.length;Me++)if(V[Me].indexOf(oe)>=0)return!1;return!0})).join(" | ");q!==this._attribHTML&&(this._attribHTML=q,V.length?(this._innerContainer.innerHTML=q,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ha.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var ea=function(){f.bindAll(["_updateLogo"],this),f.bindAll(["_updateCompact"],this)};ea.prototype.onAdd=function(V){this._map=V,this._container=T.create("div","mapboxgl-ctrl");var Y=T.create("a","mapboxgl-ctrl-logo");return Y.target="_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ea.prototype.onRemove=function(){T.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ea.prototype.getDefaultPosition=function(){return"bottom-left"},ea.prototype._updateLogo=function(V){V&&"metadata"!==V.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},ea.prototype._logoRequired=function(){if(this._map.style){var V=this._map.style.sourceCaches;for(var Y in V)if(V[Y].getSource().mapbox_logo)return!0;return!1}},ea.prototype._updateCompact=function(){var V=this._container.children;if(V.length){var Y=V[0];this._map.getCanvasContainer().offsetWidth<250?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact")}};var nl=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};nl.prototype.add=function(V){var Y=++this._id;return this._queue.push({callback:V,id:Y,cancelled:!1}),Y},nl.prototype.remove=function(V){for(var Y=this._currentlyRunning,W=0,re=Y?this._queue.concat(Y):this._queue;W<re.length;W+=1){var _e=re[W];if(_e.id===V)return void(_e.cancelled=!0)}},nl.prototype.run=function(V){void 0===V&&(V=0);var Y=this._currentlyRunning=this._queue;this._queue=[];for(var W=0,re=Y;W<re.length;W+=1){var _e=re[W];if(!_e.cancelled&&(_e.callback(V),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},nl.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ju={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Fo=f.window.HTMLImageElement,oo=f.window.HTMLElement,fs=f.window.ImageBitmap,Vs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Qu=function(V){function Y(re){var _e=this;if(null!=(re=f.extend({},Vs,re)).minZoom&&null!=re.maxZoom&&re.minZoom>re.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=re.minPitch&&null!=re.maxPitch&&re.minPitch>re.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=re.minPitch&&re.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=re.maxPitch&&re.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var Pe=new vi(re.minZoom,re.maxZoom,re.minPitch,re.maxPitch,re.renderWorldCopies);if(V.call(this,Pe,re),this._interactive=re.interactive,this._maxTileCacheSize=re.maxTileCacheSize,this._failIfMajorPerformanceCaveat=re.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=re.preserveDrawingBuffer,this._antialias=re.antialias,this._trackResize=re.trackResize,this._bearingSnap=re.bearingSnap,this._refreshExpiredTiles=re.refreshExpiredTiles,this._fadeDuration=re.fadeDuration,this._crossSourceCollisions=re.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=re.collectResourceTiming,this._renderTaskQueue=new nl,this._controls=[],this._mapId=f.uniqueId(),this._locale=f.extend({},Ju,re.locale),this._requestManager=new f.RequestManager(re.transformRequest,re.accessToken),"string"==typeof re.container){if(this._container=f.window.document.getElementById(re.container),!this._container)throw new Error("Container '"+re.container+"' not found.")}else{if(!(re.container instanceof oo))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=re.container}if(re.maxBounds&&this.setMaxBounds(re.maxBounds),f.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return _e._update(!1)}),this.on("moveend",function(){return _e._update(!1)}),this.on("zoom",function(){return _e._update(!0)}),void 0!==f.window&&(f.window.addEventListener("online",this._onWindowOnline,!1),f.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Ii(this,re),this._hash=re.hash&&new Ko("string"==typeof re.hash&&re.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:re.center,zoom:re.zoom,bearing:re.bearing,pitch:re.pitch}),re.bounds&&(this.resize(),this.fitBounds(re.bounds,f.extend({},re.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=re.localIdeographFontFamily,re.style&&this.setStyle(re.style,{localIdeographFontFamily:re.localIdeographFontFamily}),re.attributionControl&&this.addControl(new Ha({customAttribution:re.customAttribution})),this.addControl(new ea,re.logoPosition),this.on("style.load",function(){_e.transform.unmodified&&_e.jumpTo(_e.style.stylesheet)}),this.on("data",function(oe){_e._update("style"===oe.dataType),_e.fire(new f.Event(oe.dataType+"data",oe))}),this.on("dataloading",function(oe){_e.fire(new f.Event(oe.dataType+"dataloading",oe))})}V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y;var W={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(re,_e){if(void 0===_e&&re.getDefaultPosition&&(_e=re.getDefaultPosition()),void 0===_e&&(_e="top-right"),!re||!re.onAdd)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=re.onAdd(this);this._controls.push(re);var q=this._controlPositions[_e];return-1!==_e.indexOf("bottom")?q.insertBefore(Pe,q.firstChild):q.appendChild(Pe),this},Y.prototype.removeControl=function(re){if(!re||!re.onRemove)return this.fire(new f.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var _e=this._controls.indexOf(re);return _e>-1&&this._controls.splice(_e,1),re.onRemove(this),this},Y.prototype.resize=function(re){var _e=this._containerDimensions(),Pe=_e[0],q=_e[1];this._resizeCanvas(Pe,q),this.transform.resize(Pe,q),this.painter.resize(Pe,q);var oe=!this._moving;return oe&&(this.stop(),this.fire(new f.Event("movestart",re)).fire(new f.Event("move",re))),this.fire(new f.Event("resize",re)),oe&&this.fire(new f.Event("moveend",re)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(re){return this.transform.setMaxBounds(f.LngLatBounds.convert(re)),this._update()},Y.prototype.setMinZoom=function(re){if((re=re??-2)>=-2&&re<=this.transform.maxZoom)return this.transform.minZoom=re,this._update(),this.getZoom()<re&&this.setZoom(re),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(re){if((re=re??22)>=this.transform.minZoom)return this.transform.maxZoom=re,this._update(),this.getZoom()>re&&this.setZoom(re),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(re){if((re=re??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(re>=0&&re<=this.transform.maxPitch)return this.transform.minPitch=re,this._update(),this.getPitch()<re&&this.setPitch(re),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(re){if((re=re??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(re>=this.transform.minPitch)return this.transform.maxPitch=re,this._update(),this.getPitch()>re&&this.setPitch(re),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(re){return this.transform.renderWorldCopies=re,this._update()},Y.prototype.project=function(re){return this.transform.locationPoint(f.LngLat.convert(re))},Y.prototype.unproject=function(re){return this.transform.pointLocation(f.Point.convert(re))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(re,_e,Pe){var q,oe=this;if("mouseenter"===re||"mouseover"===re){var de=!1;return{layer:_e,listener:Pe,delegates:{mousemove:function(Se){var ze=oe.getLayer(_e)?oe.queryRenderedFeatures(Se.point,{layers:[_e]}):[];ze.length?de||(de=!0,Pe.call(oe,new xi(re,oe,Se.originalEvent,{features:ze}))):de=!1},mouseout:function(){de=!1}}}}if("mouseleave"===re||"mouseout"===re){var Me=!1;return{layer:_e,listener:Pe,delegates:{mousemove:function(Se){(oe.getLayer(_e)?oe.queryRenderedFeatures(Se.point,{layers:[_e]}):[]).length?Me=!0:Me&&(Me=!1,Pe.call(oe,new xi(re,oe,Se.originalEvent)))},mouseout:function(Se){Me&&(Me=!1,Pe.call(oe,new xi(re,oe,Se.originalEvent)))}}}}return{layer:_e,listener:Pe,delegates:(q={},q[re]=function(Se){var ze=oe.getLayer(_e)?oe.queryRenderedFeatures(Se.point,{layers:[_e]}):[];ze.length&&(Se.features=ze,Pe.call(oe,Se),delete Se.features)},q)}},Y.prototype.on=function(re,_e,Pe){if(void 0===Pe)return V.prototype.on.call(this,re,_e);var q=this._createDelegatedListener(re,_e,Pe);for(var oe in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[re]=this._delegatedListeners[re]||[],this._delegatedListeners[re].push(q),q.delegates)this.on(oe,q.delegates[oe]);return this},Y.prototype.once=function(re,_e,Pe){if(void 0===Pe)return V.prototype.once.call(this,re,_e);var q=this._createDelegatedListener(re,_e,Pe);for(var oe in q.delegates)this.once(oe,q.delegates[oe]);return this},Y.prototype.off=function(re,_e,Pe){var q=this;return void 0===Pe?V.prototype.off.call(this,re,_e):(this._delegatedListeners&&this._delegatedListeners[re]&&function(oe){for(var de=oe[re],Me=0;Me<de.length;Me++){var Se=de[Me];if(Se.layer===_e&&Se.listener===Pe){for(var ze in Se.delegates)q.off(ze,Se.delegates[ze]);return de.splice(Me,1),q}}}(this._delegatedListeners),this)},Y.prototype.queryRenderedFeatures=function(re,_e){if(!this.style)return[];var Pe;if(void 0!==_e||void 0===re||re instanceof f.Point||Array.isArray(re)||(_e=re,re=void 0),_e=_e||{},(re=re||[[0,0],[this.transform.width,this.transform.height]])instanceof f.Point||"number"==typeof re[0])Pe=[f.Point.convert(re)];else{var q=f.Point.convert(re[0]),oe=f.Point.convert(re[1]);Pe=[q,new f.Point(oe.x,q.y),oe,new f.Point(q.x,oe.y),q]}return this.style.queryRenderedFeatures(Pe,_e,this.transform)},Y.prototype.querySourceFeatures=function(re,_e){return this.style.querySourceFeatures(re,_e)},Y.prototype.setStyle=function(re,_e){return!1!==(_e=f.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},_e)).diff&&_e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&re?(this._diffStyle(re,_e),this):(this._localIdeographFontFamily=_e.localIdeographFontFamily,this._updateStyle(re,_e))},Y.prototype._getUIString=function(re){var _e=this._locale[re];if(null==_e)throw new Error("Missing UI string '"+re+"'");return _e},Y.prototype._updateStyle=function(re,_e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),re?(this.style=new kr(this,_e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof re?this.style.loadURL(re):this.style.loadJSON(re),this):(delete this.style,this)},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new kr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(re,_e){var Pe=this;if("string"==typeof re){var q=this._requestManager.normalizeStyleURL(re),oe=this._requestManager.transformRequest(q,f.ResourceType.Style);f.getJSON(oe,function(de,Me){de?Pe.fire(new f.ErrorEvent(de)):Me&&Pe._updateDiff(Me,_e)})}else"object"==typeof re&&this._updateDiff(re,_e)},Y.prototype._updateDiff=function(re,_e){try{this.style.setState(re)&&this._update(!0)}catch(Pe){f.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(re,_e)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():f.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(re,_e){return this._lazyInitEmptyStyle(),this.style.addSource(re,_e),this._update(!0)},Y.prototype.isSourceLoaded=function(re){var _e=this.style&&this.style.sourceCaches[re];if(void 0!==_e)return _e.loaded();this.fire(new f.ErrorEvent(new Error("There is no source with ID '"+re+"'")))},Y.prototype.areTilesLoaded=function(){var re=this.style&&this.style.sourceCaches;for(var _e in re){var Pe=re[_e]._tiles;for(var q in Pe){var oe=Pe[q];if("loaded"!==oe.state&&"errored"!==oe.state)return!1}}return!0},Y.prototype.addSourceType=function(re,_e,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(re,_e,Pe)},Y.prototype.removeSource=function(re){return this.style.removeSource(re),this._update(!0)},Y.prototype.getSource=function(re){return this.style.getSource(re)},Y.prototype.addImage=function(re,_e,Pe){void 0===Pe&&(Pe={});var q=Pe.pixelRatio;void 0===q&&(q=1);var oe=Pe.sdf;void 0===oe&&(oe=!1);var de=Pe.stretchX,Me=Pe.stretchY,Se=Pe.content;if(this._lazyInitEmptyStyle(),_e instanceof Fo||fs&&_e instanceof fs){var ze=f.browser.getImageData(_e);this.style.addImage(re,{data:new f.RGBAImage({width:ze.width,height:ze.height},ze.data),pixelRatio:q,stretchX:de,stretchY:Me,content:Se,sdf:oe,version:0})}else{if(void 0===_e.width||void 0===_e.height)return this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var At=_e;this.style.addImage(re,{data:new f.RGBAImage({width:_e.width,height:_e.height},new Uint8Array(_e.data)),pixelRatio:q,stretchX:de,stretchY:Me,content:Se,sdf:oe,version:0,userImage:At}),At.onAdd&&At.onAdd(this,re)}},Y.prototype.updateImage=function(re,_e){var Pe=this.style.getImage(re);if(!Pe)return this.fire(new f.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var q=_e instanceof Fo||fs&&_e instanceof fs?f.browser.getImageData(_e):_e,oe=q.width,de=q.height,Me=q.data;return void 0===oe||void 0===de?this.fire(new f.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):oe!==Pe.data.width||de!==Pe.data.height?this.fire(new f.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(Pe.data.replace(Me,!(_e instanceof Fo||fs&&_e instanceof fs)),void this.style.updateImage(re,Pe))},Y.prototype.hasImage=function(re){return re?!!this.style.getImage(re):(this.fire(new f.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(re){this.style.removeImage(re)},Y.prototype.loadImage=function(re,_e){f.getImage(this._requestManager.transformRequest(re,f.ResourceType.Image),_e)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(re,_e){return this._lazyInitEmptyStyle(),this.style.addLayer(re,_e),this._update(!0)},Y.prototype.moveLayer=function(re,_e){return this.style.moveLayer(re,_e),this._update(!0)},Y.prototype.removeLayer=function(re){return this.style.removeLayer(re),this._update(!0)},Y.prototype.getLayer=function(re){return this.style.getLayer(re)},Y.prototype.setLayerZoomRange=function(re,_e,Pe){return this.style.setLayerZoomRange(re,_e,Pe),this._update(!0)},Y.prototype.setFilter=function(re,_e,Pe){return void 0===Pe&&(Pe={}),this.style.setFilter(re,_e,Pe),this._update(!0)},Y.prototype.getFilter=function(re){return this.style.getFilter(re)},Y.prototype.setPaintProperty=function(re,_e,Pe,q){return void 0===q&&(q={}),this.style.setPaintProperty(re,_e,Pe,q),this._update(!0)},Y.prototype.getPaintProperty=function(re,_e){return this.style.getPaintProperty(re,_e)},Y.prototype.setLayoutProperty=function(re,_e,Pe,q){return void 0===q&&(q={}),this.style.setLayoutProperty(re,_e,Pe,q),this._update(!0)},Y.prototype.getLayoutProperty=function(re,_e){return this.style.getLayoutProperty(re,_e)},Y.prototype.setLight=function(re,_e){return void 0===_e&&(_e={}),this._lazyInitEmptyStyle(),this.style.setLight(re,_e),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(re,_e){return this.style.setFeatureState(re,_e),this._update()},Y.prototype.removeFeatureState=function(re,_e){return this.style.removeFeatureState(re,_e),this._update()},Y.prototype.getFeatureState=function(re){return this.style.getFeatureState(re)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var re=0,_e=0;return this._container&&(re=this._container.clientWidth||400,_e=this._container.clientHeight||300),[re,_e]},Y.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==f.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&f.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var re=this._container;re.classList.add("mapboxgl-map"),(this._missingCSSCanary=T.create("div","mapboxgl-canary",re)).style.visibility="hidden",this._detectMissingCSS();var _e=this._canvasContainer=T.create("div","mapboxgl-canvas-container",re);this._interactive&&_e.classList.add("mapboxgl-interactive"),this._canvas=T.create("canvas","mapboxgl-canvas",_e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Pe=this._containerDimensions();this._resizeCanvas(Pe[0],Pe[1]);var q=this._controlContainer=T.create("div","mapboxgl-control-container",re),oe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(de){oe[de]=T.create("div","mapboxgl-ctrl-"+de,q)})},Y.prototype._resizeCanvas=function(re,_e){var Pe=f.browser.devicePixelRatio||1;this._canvas.width=Pe*re,this._canvas.height=Pe*_e,this._canvas.style.width=re+"px",this._canvas.style.height=_e+"px"},Y.prototype._setupPainter=function(){var re=f.extend({},k.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),_e=this._canvas.getContext("webgl",re)||this._canvas.getContext("experimental-webgl",re);_e?(this.painter=new bi(_e,this.transform),f.webpSupported.testSupport(_e)):this.fire(new f.ErrorEvent(new Error("Failed to initialize WebGL")))},Y.prototype._contextLost=function(re){re.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new f.Event("webglcontextlost",{originalEvent:re}))},Y.prototype._contextRestored=function(re){this._setupPainter(),this.resize(),this._update(),this.fire(new f.Event("webglcontextrestored",{originalEvent:re}))},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(re){return this.style?(this._styleDirty=this._styleDirty||re,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(re){return this._update(),this._renderTaskQueue.add(re)},Y.prototype._cancelRenderFrame=function(re){this._renderTaskQueue.remove(re)},Y.prototype._render=function(re){var _e,Pe=this,q=0,oe=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(_e=oe.createQueryEXT(),oe.beginQueryEXT(oe.TIME_ELAPSED_EXT,_e),q=f.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(re),!this._removed){var de=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Me=this.transform.zoom,Se=f.browser.now();this.style.zoomHistory.update(Me,Se);var ze=new f.EvaluationParameters(Me,{now:Se,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ye=ze.crossFadingFactor();1===Ye&&Ye===this._crossFadingFactor||(de=!0,this._crossFadingFactor=Ye),this.style.update(ze)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new f.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new f.Event("load"))),this.style&&(this.style.hasTransitions()||de)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Xe=f.browser.now()-q;oe.endQueryEXT(oe.TIME_ELAPSED_EXT,_e),setTimeout(function(){var rt=oe.getQueryObjectEXT(_e,oe.QUERY_RESULT_EXT)/1e6;oe.deleteQueryEXT(_e),Pe.fire(new f.Event("gpu-timing-frame",{cpuTime:Xe,gpuTime:rt}))},50)}if(this.listens("gpu-timing-layer")){var tt=this.painter.collectGpuTimers();setTimeout(function(){var rt=Pe.painter.queryGpuTimers(tt);Pe.fire(new f.Event("gpu-timing-layer",{layerTimes:rt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new f.Event("idle"))),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var re=0,_e=this._controls;re<_e.length;re+=1)_e[re].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==f.window&&(f.window.removeEventListener("resize",this._onWindowResize,!1),f.window.removeEventListener("online",this._onWindowOnline,!1));var Pe=this.painter.context.gl.getExtension("WEBGL_lose_context");Pe&&Pe.loseContext(),Cl(this._canvasContainer),Cl(this._controlContainer),Cl(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new f.Event("remove"))},Y.prototype.triggerRepaint=function(){var re=this;this.style&&!this._frame&&(this._frame=f.browser.frame(function(_e){re._frame=null,re._render(_e)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(re){this._trackResize&&this.resize({originalEvent:re})._update()},W.showTileBoundaries.get=function(){return!!this._showTileBoundaries},W.showTileBoundaries.set=function(re){this._showTileBoundaries!==re&&(this._showTileBoundaries=re,this._update())},W.showPadding.get=function(){return!!this._showPadding},W.showPadding.set=function(re){this._showPadding!==re&&(this._showPadding=re,this._update())},W.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},W.showCollisionBoxes.set=function(re){this._showCollisionBoxes!==re&&(this._showCollisionBoxes=re,re?this.style._generateCollisionBoxes():this._update())},W.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},W.showOverdrawInspector.set=function(re){this._showOverdrawInspector!==re&&(this._showOverdrawInspector=re,this._update())},W.repaint.get=function(){return!!this._repaint},W.repaint.set=function(re){this._repaint!==re&&(this._repaint=re,this.triggerRepaint())},W.vertices.get=function(){return!!this._vertices},W.vertices.set=function(re){this._vertices=re,this._update()},Y.prototype._setCacheLimits=function(re,_e){f.setCacheLimits(re,_e)},W.version.get=function(){return f.version},Object.defineProperties(Y.prototype,W),Y}(El);function Cl(V){V.parentNode&&V.parentNode.removeChild(V)}var Xl={showCompass:!0,showZoom:!0,visualizePitch:!1},ta=function(V){var Y=this;this.options=f.extend({},Xl,V),this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(W){return W.preventDefault()}),this.options.showZoom&&(f.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(W){return Y._map.zoomIn({},{originalEvent:W})}),T.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(W){return Y._map.zoomOut({},{originalEvent:W})}),T.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(f.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(W){Y.options.visualizePitch?Y._map.resetNorthPitch({},{originalEvent:W}):Y._map.resetNorth({},{originalEvent:W})}),this._compassIcon=T.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ta.prototype._updateZoomButtons=function(){var V=this._map.getZoom();this._zoomInButton.disabled=V===this._map.getMaxZoom(),this._zoomOutButton.disabled=V===this._map.getMinZoom()},ta.prototype._rotateCompassArrow=function(){var V=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=V},ta.prototype.onAdd=function(V){return this._map=V,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ga(this._map,this._compass,this.options.visualizePitch)),this._container},ta.prototype.onRemove=function(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ta.prototype._createButton=function(V,Y){var W=T.create("button",V,this._container);return W.type="button",W.addEventListener("click",Y),W},ta.prototype._setButtonTitle=function(V,Y){var W=this._map._getUIString("NavigationControl."+Y);V.title=W,V.setAttribute("aria-label",W)};var ga=function(V,Y,W){void 0===W&&(W=!1),this._clickTolerance=10,this.element=Y,this.mouseRotate=new ro({clickTolerance:V.dragRotate._mouseRotate._clickTolerance}),this.map=V,W&&(this.mousePitch=new yl({clickTolerance:V.dragRotate._mousePitch._clickTolerance})),f.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(Y,"mousedown",this.mousedown),T.addEventListener(Y,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(Y,"touchmove",this.touchmove),T.addEventListener(Y,"touchend",this.touchend),T.addEventListener(Y,"touchcancel",this.reset)};function Kr(V,Y,W){if(V=new f.LngLat(V.lng,V.lat),Y){var re=new f.LngLat(V.lng-360,V.lat),_e=new f.LngLat(V.lng+360,V.lat),Pe=W.locationPoint(V).distSqr(Y);W.locationPoint(re).distSqr(Y)<Pe?V=re:W.locationPoint(_e).distSqr(Y)<Pe&&(V=_e)}for(;Math.abs(V.lng-W.center.lng)>180;){var q=W.locationPoint(V);if(q.x>=0&&q.y>=0&&q.x<=W.width&&q.y<=W.height)break;V.lng>W.center.lng?V.lng-=360:V.lng+=360}return V}ga.prototype.down=function(V,Y){this.mouseRotate.mousedown(V,Y),this.mousePitch&&this.mousePitch.mousedown(V,Y),T.disableDrag()},ga.prototype.move=function(V,Y){var W=this.map,re=this.mouseRotate.mousemoveWindow(V,Y);if(re&&re.bearingDelta&&W.setBearing(W.getBearing()+re.bearingDelta),this.mousePitch){var _e=this.mousePitch.mousemoveWindow(V,Y);_e&&_e.pitchDelta&&W.setPitch(W.getPitch()+_e.pitchDelta)}},ga.prototype.off=function(){var V=this.element;T.removeEventListener(V,"mousedown",this.mousedown),T.removeEventListener(V,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(V,"touchmove",this.touchmove),T.removeEventListener(V,"touchend",this.touchend),T.removeEventListener(V,"touchcancel",this.reset),this.offTemp()},ga.prototype.offTemp=function(){T.enableDrag(),T.removeEventListener(f.window,"mousemove",this.mousemove),T.removeEventListener(f.window,"mouseup",this.mouseup)},ga.prototype.mousedown=function(V){this.down(f.extend({},V,{ctrlKey:!0,preventDefault:function(){return V.preventDefault()}}),T.mousePos(this.element,V)),T.addEventListener(f.window,"mousemove",this.mousemove),T.addEventListener(f.window,"mouseup",this.mouseup)},ga.prototype.mousemove=function(V){this.move(V,T.mousePos(this.element,V))},ga.prototype.mouseup=function(V){this.mouseRotate.mouseupWindow(V),this.mousePitch&&this.mousePitch.mouseupWindow(V),this.offTemp()},ga.prototype.touchstart=function(V){1!==V.targetTouches.length?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,V.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return V.preventDefault()}},this._startPos))},ga.prototype.touchmove=function(V){1!==V.targetTouches.length?this.reset():(this._lastPos=T.touchPos(this.element,V.targetTouches)[0],this.move({preventDefault:function(){return V.preventDefault()}},this._lastPos))},ga.prototype.touchend=function(V){0===V.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ga.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ti={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function hu(V,Y,W){var re=V.classList;for(var _e in ti)re.remove("mapboxgl-"+W+"-anchor-"+_e);re.add("mapboxgl-"+W+"-anchor-"+Y)}var va,il=function(V){function Y(W,re){var _e=this;if(V.call(this),(W instanceof f.window.HTMLElement||re)&&(W=f.extend({element:W},re)),f.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=W&&W.anchor||"center",this._color=W&&W.color||"#3FB1CE",this._draggable=W&&W.draggable||!1,this._state="inactive",this._rotation=W&&W.rotation||0,this._rotationAlignment=W&&W.rotationAlignment||"auto",this._pitchAlignment=W&&W.pitchAlignment&&"auto"!==W.pitchAlignment?W.pitchAlignment:this._rotationAlignment,W&&W.element)this._element=W.element,this._offset=f.Point.convert(W&&W.offset||[0,0]);else{this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");var Pe=T.createNS("http://www.w3.org/2000/svg","svg");Pe.setAttributeNS(null,"display","block"),Pe.setAttributeNS(null,"height","41px"),Pe.setAttributeNS(null,"width","27px"),Pe.setAttributeNS(null,"viewBox","0 0 27 41");var q=T.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"stroke","none"),q.setAttributeNS(null,"stroke-width","1"),q.setAttributeNS(null,"fill","none"),q.setAttributeNS(null,"fill-rule","evenodd");var oe=T.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"fill-rule","nonzero");var de=T.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(3.0, 29.0)"),de.setAttributeNS(null,"fill","#000000");for(var Me=0,Se=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Me<Se.length;Me+=1){var ze=Se[Me],Ye=T.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",ze.rx),Ye.setAttributeNS(null,"ry",ze.ry),de.appendChild(Ye)}var Xe=T.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"fill",this._color);var tt=T.createNS("http://www.w3.org/2000/svg","path");tt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Xe.appendChild(tt);var rt=T.createNS("http://www.w3.org/2000/svg","g");rt.setAttributeNS(null,"opacity","0.25"),rt.setAttributeNS(null,"fill","#000000");var ft=T.createNS("http://www.w3.org/2000/svg","path");ft.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),rt.appendChild(ft);var bt=T.createNS("http://www.w3.org/2000/svg","g");bt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),bt.setAttributeNS(null,"fill","#FFFFFF");var At=T.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ut=T.createNS("http://www.w3.org/2000/svg","circle");Ut.setAttributeNS(null,"fill","#000000"),Ut.setAttributeNS(null,"opacity","0.25"),Ut.setAttributeNS(null,"cx","5.5"),Ut.setAttributeNS(null,"cy","5.5"),Ut.setAttributeNS(null,"r","5.4999962");var qt=T.createNS("http://www.w3.org/2000/svg","circle");qt.setAttributeNS(null,"fill","#FFFFFF"),qt.setAttributeNS(null,"cx","5.5"),qt.setAttributeNS(null,"cy","5.5"),qt.setAttributeNS(null,"r","5.4999962"),At.appendChild(Ut),At.appendChild(qt),oe.appendChild(de),oe.appendChild(Xe),oe.appendChild(rt),oe.appendChild(bt),oe.appendChild(At),Pe.appendChild(oe),this._element.appendChild(Pe),this._offset=f.Point.convert(W&&W.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(jt){jt.preventDefault()}),this._element.addEventListener("mousedown",function(jt){jt.preventDefault()}),this._element.addEventListener("focus",function(){var jt=_e._map.getContainer();jt.scrollTop=0,jt.scrollLeft=0}),hu(this._element,this._anchor,"marker"),this._popup=null}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.addTo=function(W){return this.remove(),this._map=W,W.getCanvasContainer().appendChild(this._element),W.on("move",this._update),W.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(W){return this._lngLat=f.LngLat.convert(W),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(W){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),W){if(!("offset"in W.options)){var _e=Math.sqrt(Math.pow(13.5,2)/2);W.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_e,-1*(24.6+_e)],"bottom-right":[-_e,-1*(24.6+_e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=W,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(W){var re=W.code,_e=W.charCode||W.keyCode;"Space"!==re&&"Enter"!==re&&32!==_e&&13!==_e||this.togglePopup()},Y.prototype._onMapClick=function(W){var re=W.originalEvent.target,_e=this._element;this._popup&&(re===_e||_e.contains(re))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var W=this._popup;return W?(W.isOpen()?W.remove():W.addTo(this._map),this):this},Y.prototype._update=function(W){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Kr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var re="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?re="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(re="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var _e="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?_e="rotateX(0deg)":"map"===this._pitchAlignment&&(_e="rotateX("+this._map.getPitch()+"deg)"),W&&"moveend"!==W.type||(this._pos=this._pos.round()),T.setTransform(this._element,ti[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+_e+" "+re)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(W){return this._offset=f.Point.convert(W),this._update(),this},Y.prototype._onMove=function(W){this._pos=W.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new f.Event("dragstart"))),this.fire(new f.Event("drag"))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new f.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(W){this._element.contains(W.originalEvent.target)&&(W.preventDefault(),this._positionDelta=W.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(W){return this._draggable=!!W,this._map&&(W?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(W){return this._rotation=W||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(W){return this._rotationAlignment=W||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(W){return this._pitchAlignment=W&&"auto"!==W?W:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(f.Evented),ya={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},pu=0,xa=!1,qa=function(V){function Y(W){V.call(this),this.options=f.extend({},ya,W),f.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.onAdd=function(W){return this._map=W,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),re=this._setupUI,void 0!==va?re(va):void 0!==f.window.navigator.permissions?f.window.navigator.permissions.query({name:"geolocation"}).then(function(_e){re(va="denied"!==_e.state)}):re(va=!!f.window.navigator.geolocation),this._container;var re},Y.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,pu=0,xa=!1},Y.prototype._isOutOfMapMaxBounds=function(W){var re=this._map.getMaxBounds(),_e=W.coords;return re&&(_e.longitude<re.getWest()||_e.longitude>re.getEast()||_e.latitude<re.getSouth()||_e.latitude>re.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},Y.prototype._onSuccess=function(W){if(this._map){if(this._isOutOfMapMaxBounds(W))return this._setErrorState(),this.fire(new f.Event("outofmaxbounds",W)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=W,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(W),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(W),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("geolocate",W)),this._finish()}},Y.prototype._updateCamera=function(W){var re=new f.LngLat(W.coords.longitude,W.coords.latitude),_e=W.coords.accuracy,Pe=this._map.getBearing(),q=f.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(re.toBounds(_e),q,{geolocateSource:!0})},Y.prototype._updateMarker=function(W){if(W){var re=new f.LngLat(W.coords.longitude,W.coords.latitude);this._accuracyCircleMarker.setLngLat(re).addTo(this._map),this._userLocationDotMarker.setLngLat(re).addTo(this._map),this._accuracy=W.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var W=this._map._container.clientHeight/2,re=this._map.unproject([0,W]),_e=this._map.unproject([1,W]),Pe=re.distanceTo(_e),q=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=q+"px",this._circleElement.style.height=q+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(W){if(this._map){if(this.options.trackUserLocation)if(1===W.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var re=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=re,this._geolocateButton.setAttribute("aria-label",re),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===W.code&&xa)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new f.Event("error",W)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(W){var re=this;if(this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this._geolocateButton=T.create("button","mapboxgl-ctrl-geolocate",this._container),T.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===W){f.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var _e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=_e,this._geolocateButton.setAttribute("aria-label",_e)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new il(this._dotElement),this._circleElement=T.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new il({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(q){q.geolocateSource||"ACTIVE_LOCK"!==re._watchState||q.originalEvent&&"resize"===q.originalEvent.type||(re._watchState="BACKGROUND",re._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),re._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),re.fire(new f.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return f.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new f.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":pu--,xa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new f.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new f.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var W;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++pu>1?(W={maximumAge:6e5,timeout:0},xa=!0):(W=this.options.positionOptions,xa=!1),this._geolocationWatchID=f.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,W)}}else f.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){f.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(f.Evented),ol={maxWidth:100,unit:"metric"},ui=function(V){this.options=f.extend({},ol,V),f.bindAll(["_onMove","setUnit"],this)};function Vo(V,Y,W){var re=W&&W.maxWidth||100,_e=V._container.clientHeight/2,Pe=V.unproject([0,_e]),q=V.unproject([re,_e]),oe=Pe.distanceTo(q);if(W&&"imperial"===W.unit){var de=3.2808*oe;de>5280?Ss(Y,re,de/5280,V._getUIString("ScaleControl.Miles")):Ss(Y,re,de,V._getUIString("ScaleControl.Feet"))}else W&&"nautical"===W.unit?Ss(Y,re,oe/1852,V._getUIString("ScaleControl.NauticalMiles")):oe>=1e3?Ss(Y,re,oe/1e3,V._getUIString("ScaleControl.Kilometers")):Ss(Y,re,oe,V._getUIString("ScaleControl.Meters"))}function Ss(V,Y,W,re){var _e,Pe,q,Me,Se,oe=(_e=W,(Pe=Math.pow(10,(""+Math.floor(_e)).length-1))*((q=_e/Pe)>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:(Me=q,Se=Math.pow(10,Math.ceil(-Math.log(Me)/Math.LN10)),Math.round(Me*Se)/Se)));V.style.width=Y*(oe/W)+"px",V.innerHTML=oe+"&nbsp;"+re}ui.prototype.getDefaultPosition=function(){return"bottom-left"},ui.prototype._onMove=function(){Vo(this._map,this._container,this.options)},ui.prototype.onAdd=function(V){return this._map=V,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",V.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ui.prototype.onRemove=function(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ui.prototype.setUnit=function(V){this.options.unit=V,Vo(this._map,this._container,this.options)};var Ga=function(V){this._fullscreen=!1,V&&V.container&&(V.container instanceof f.window.HTMLElement?this._container=V.container:f.warnOnce("Full screen control 'container' must be a DOM element.")),f.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in f.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in f.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in f.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in f.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ga.prototype.onAdd=function(V){return this._map=V,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",f.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ga.prototype.onRemove=function(){T.remove(this._controlContainer),this._map=null,f.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ga.prototype._checkFullscreenSupport=function(){return!!(f.window.document.fullscreenEnabled||f.window.document.mozFullScreenEnabled||f.window.document.msFullscreenEnabled||f.window.document.webkitFullscreenEnabled)},Ga.prototype._setupUI=function(){var V=this._fullscreenButton=T.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","mapboxgl-ctrl-icon",V).setAttribute("aria-hidden",!0),V.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),f.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ga.prototype._updateTitle=function(){var V=this._getTitle();this._fullscreenButton.setAttribute("aria-label",V),this._fullscreenButton.title=V},Ga.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ga.prototype._isFullscreen=function(){return this._fullscreen},Ga.prototype._changeIcon=function(){(f.window.document.fullscreenElement||f.window.document.mozFullScreenElement||f.window.document.webkitFullscreenElement||f.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ga.prototype._onClickFullscreen=function(){this._isFullscreen()?f.window.document.exitFullscreen?f.window.document.exitFullscreen():f.window.document.mozCancelFullScreen?f.window.document.mozCancelFullScreen():f.window.document.msExitFullscreen?f.window.document.msExitFullscreen():f.window.document.webkitCancelFullScreen&&f.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Dl={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Kl=function(V){function Y(W){V.call(this),this.options=f.extend(Object.create(Dl),W),f.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return V&&(Y.__proto__=V),(Y.prototype=Object.create(V&&V.prototype)).constructor=Y,Y.prototype.addTo=function(W){return this._map&&this.remove(),this._map=W,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new f.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new f.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(W){return this._lngLat=f.LngLat.convert(W),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(W){return this.setDOMContent(f.window.document.createTextNode(W))},Y.prototype.setHTML=function(W){var re,_e=f.window.document.createDocumentFragment(),Pe=f.window.document.createElement("body");for(Pe.innerHTML=W;re=Pe.firstChild;)_e.appendChild(re);return this.setDOMContent(_e)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(W){return this.options.maxWidth=W,this._update(),this},Y.prototype.setDOMContent=function(W){return this._createContent(),this._content.appendChild(W),this._update(),this},Y.prototype.addClassName=function(W){this._container&&this._container.classList.add(W)},Y.prototype.removeClassName=function(W){this._container&&this._container.classList.remove(W)},Y.prototype.toggleClassName=function(W){if(this._container)return this._container.classList.toggle(W)},Y.prototype._createContent=function(){this._content&&T.remove(this._content),this._content=T.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=T.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(W){this._update(W.point)},Y.prototype._onMouseMove=function(W){this._update(W.point)},Y.prototype._onDrag=function(W){this._update(W.point)},Y.prototype._update=function(W){var re=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=T.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ye){return re._container.classList.add(Ye)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Kr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||W)){var Pe=this._pos=this._trackPointer&&W?W:this._map.project(this._lngLat),q=this.options.anchor,oe=Jl(this.options.offset);if(!q){var de,Me=this._container.offsetWidth,Se=this._container.offsetHeight;de=Pe.y+oe.bottom.y<Se?["top"]:Pe.y>this._map.transform.height-Se?["bottom"]:[],Pe.x<Me/2?de.push("left"):Pe.x>this._map.transform.width-Me/2&&de.push("right"),q=0===de.length?"bottom":de.join("-")}var ze=Pe.add(oe[q]).round();T.setTransform(this._container,ti[q]+" translate("+ze.x+"px,"+ze.y+"px)"),hu(this._container,q,"popup")}},Y.prototype._onClose=function(){this.remove()},Y}(f.Evented);function Jl(V){if(V){if("number"==typeof V){var Y=Math.round(Math.sqrt(.5*Math.pow(V,2)));return{center:new f.Point(0,0),top:new f.Point(0,V),"top-left":new f.Point(Y,Y),"top-right":new f.Point(-Y,Y),bottom:new f.Point(0,-V),"bottom-left":new f.Point(Y,-Y),"bottom-right":new f.Point(-Y,-Y),left:new f.Point(V,0),right:new f.Point(-V,0)}}if(V instanceof f.Point||Array.isArray(V)){var W=f.Point.convert(V);return{center:W,top:W,"top-left":W,"top-right":W,bottom:W,"bottom-left":W,"bottom-right":W,left:W,right:W}}return{center:f.Point.convert(V.center||[0,0]),top:f.Point.convert(V.top||[0,0]),"top-left":f.Point.convert(V["top-left"]||[0,0]),"top-right":f.Point.convert(V["top-right"]||[0,0]),bottom:f.Point.convert(V.bottom||[0,0]),"bottom-left":f.Point.convert(V["bottom-left"]||[0,0]),"bottom-right":f.Point.convert(V["bottom-right"]||[0,0]),left:f.Point.convert(V.left||[0,0]),right:f.Point.convert(V.right||[0,0])}}return Jl(new f.Point(0,0))}var al={version:f.version,supported:k,setRTLTextPlugin:f.setRTLTextPlugin,getRTLTextPluginStatus:f.getRTLTextPluginStatus,Map:Qu,NavigationControl:ta,GeolocateControl:qa,AttributionControl:Ha,ScaleControl:ui,FullscreenControl:Ga,Popup:Kl,Marker:il,Style:kr,LngLat:f.LngLat,LngLatBounds:f.LngLatBounds,Point:f.Point,MercatorCoordinate:f.MercatorCoordinate,Evented:f.Evented,config:f.config,prewarm:function(){Et().acquire(dt)},clearPrewarmedResources:function(){var V=kt;V&&(V.isPreloaded()&&1===V.numActive()?(V.release(dt),kt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return f.config.ACCESS_TOKEN},set accessToken(V){f.config.ACCESS_TOKEN=V},get baseApiUrl(){return f.config.API_URL},set baseApiUrl(V){f.config.API_URL=V},get workerCount(){return ht.workerCount},set workerCount(V){ht.workerCount=V},get maxParallelImageRequests(){return f.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(V){f.config.MAX_PARALLEL_IMAGE_REQUESTS=V},clearStorage:function(V){f.clearTileCache(V)},workerUrl:""};return al}),I}()},27084:function(se){"use strict";se.exports=Math.log2||function(U){return Math.log(U)*Math.LOG2E}},16825:function(se,U,r){"use strict";se.exports=function(C,f){f||(f=C,C=window);var k=0,T=0,v=0,c={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function s(p){var _=!1;return"altKey"in p&&(_=_||p.altKey!==c.alt,c.alt=!!p.altKey),"shiftKey"in p&&(_=_||p.shiftKey!==c.shift,c.shift=!!p.shiftKey),"ctrlKey"in p&&(_=_||p.ctrlKey!==c.control,c.control=!!p.ctrlKey),"metaKey"in p&&(_=_||p.metaKey!==c.meta,c.meta=!!p.metaKey),_}function a(p,_){var x=I.x(_),b=I.y(_);"buttons"in _&&(p=0|_.buttons),(p!==k||x!==T||b!==v||s(_))&&(k=0|p,T=x||0,v=b||0,f&&f(k,T,v,c))}function o(p){a(0,p)}function l(){(k||T||v||c.shift||c.alt||c.meta||c.control)&&(T=v=0,k=0,c.shift=c.alt=c.control=c.meta=!1,f&&f(0,0,0,c))}function u(p){s(p)&&f&&f(k,T,v,c)}function d(p){0===I.buttons(p)?a(0,p):a(k,p)}function g(p){a(k|I.buttons(p),p)}function h(p){a(k&~I.buttons(p),p)}function w(){i||(i=!0,C.addEventListener("mousemove",d),C.addEventListener("mousedown",g),C.addEventListener("mouseup",h),C.addEventListener("mouseleave",o),C.addEventListener("mouseenter",o),C.addEventListener("mouseout",o),C.addEventListener("mouseover",o),C.addEventListener("blur",l),C.addEventListener("keyup",u),C.addEventListener("keydown",u),C.addEventListener("keypress",u),C!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}w();var y={element:C};return Object.defineProperties(y,{enabled:{get:function(){return i},set:function(p){p?w():i&&(i=!1,C.removeEventListener("mousemove",d),C.removeEventListener("mousedown",g),C.removeEventListener("mouseup",h),C.removeEventListener("mouseleave",o),C.removeEventListener("mouseenter",o),C.removeEventListener("mouseout",o),C.removeEventListener("mouseover",o),C.removeEventListener("blur",l),C.removeEventListener("keyup",u),C.removeEventListener("keydown",u),C.removeEventListener("keypress",u),C!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))},enumerable:!0},buttons:{get:function(){return k},enumerable:!0},x:{get:function(){return T},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return c},enumerable:!0}}),y};var I=r(74311)},48956:function(se){var U={left:0,top:0};se.exports=function(r,I,C){I=I||r.currentTarget||r.srcElement,Array.isArray(C)||(C=[0,0]);var f,k=r.clientX||0,T=r.clientY||0,v=(f=I)===window||f===document||f===document.body?U:f.getBoundingClientRect();return C[0]=k-v.left,C[1]=T-v.top,C}},74311:function(se,U){"use strict";function r(I){return I.target||I.srcElement||window}U.buttons=function(I){if("object"==typeof I){if("buttons"in I)return I.buttons;if("which"in I){if(2===(C=I.which))return 4;if(3===C)return 2;if(C>0)return 1<<C-1}else if("button"in I){var C;if(1===(C=I.button))return 4;if(2===C)return 2;if(C>=0)return 1<<C}}return 0},U.element=r,U.x=function(I){if("object"==typeof I){if("offsetX"in I)return I.offsetX;var C=r(I).getBoundingClientRect();return I.clientX-C.left}return 0},U.y=function(I){if("object"==typeof I){if("offsetY"in I)return I.offsetY;var C=r(I).getBoundingClientRect();return I.clientY-C.top}return 0}},1195:function(se,U,r){"use strict";var I=r(75686);se.exports=function(C,f,k){"function"==typeof C&&(k=!!f,f=C,C=window);var T=I("ex",C),v=function(c){k&&c.preventDefault();var i=c.deltaX||0,s=c.deltaY||0,a=c.deltaZ||0,o=1;switch(c.deltaMode){case 1:o=T;break;case 2:o=window.innerHeight}if(s*=o,a*=o,(i*=o)||s||a)return f(i,s,a,c)};return C.addEventListener("wheel",v),v}},7417:function(se,U,r){var I,C,f;(f=void 0!==r.g?r.g:this)[C="Promise"]=f[C]||function(){"use strict";var T,v,c,i=Object.prototype.toString,s=typeof setImmediate<"u"?function(x){return setImmediate(x)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(x,b,M,m){return Object.defineProperty(x,b,{value:M,writable:!0,configurable:!1!==m})}}catch{T=function(b,M,m){return b[M]=m,b}}function a(x,b){c.add(x,b),v||(v=s(c.drain))}function o(x){var b,M=typeof x;return null==x||"object"!=M&&"function"!=M||(b=x.then),"function"==typeof b&&b}function l(){for(var x=0;x<this.chain.length;x++)u(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function u(x,b,M){var m,D;try{!1===b?M.reject(x.msg):(m=!0===b?x.msg:b.call(void 0,x.msg))===M.promise?M.reject(TypeError("Promise-chain cycle")):(D=o(m))?D.call(m,M.resolve,M.reject):M.resolve(m)}catch(S){M.reject(S)}}function d(x){var b,M=this;if(!M.triggered){M.triggered=!0,M.def&&(M=M.def);try{(b=o(x))?a(function(){var m=new w(M);try{b.call(x,function(){d.apply(m,arguments)},function(){g.apply(m,arguments)})}catch(D){g.call(m,D)}}):(M.msg=x,M.state=1,M.chain.length>0&&a(l,M))}catch(m){g.call(new w(M),m)}}}function g(x){var b=this;b.triggered||(b.triggered=!0,b.def&&(b=b.def),b.msg=x,b.state=2,b.chain.length>0&&a(l,b))}function h(x,b,M,m){for(var D=0;D<b.length;D++)!function(S){x.resolve(b[S]).then(function(O){M(S,O)},m)}(D)}function w(x){this.def=x,this.triggered=!1}function y(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function p(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var b=new y(this);this.then=function(M,m){var D={success:"function"!=typeof M||M,failure:"function"==typeof m&&m};return D.promise=new this.constructor(function(S,O){if("function"!=typeof S||"function"!=typeof O)throw TypeError("Not a function");D.resolve=S,D.reject=O}),b.chain.push(D),0!==b.state&&a(l,b),D.promise},this.catch=function(M){return this.then(void 0,M)};try{x.call(void 0,function(M){d.call(b,M)},function(M){g.call(b,M)})}catch(M){g.call(b,M)}}c=function(){var x,b,M;function m(D,S){this.fn=D,this.self=S,this.next=void 0}return{add:function(D,S){M=new m(D,S),b?b.next=M:x=M,b=M,M=void 0},drain:function(){var D=x;for(x=b=v=void 0;D;)D.fn.call(D.self),D=D.next}}}();var _=T({},"constructor",p,!1);return p.prototype=_,T(_,"__NPO__",0,!1),T(p,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(b,M){if("function"!=typeof b||"function"!=typeof M)throw TypeError("Not a function");b(x)})}),T(p,"reject",function(x){return new this(function(b,M){if("function"!=typeof b||"function"!=typeof M)throw TypeError("Not a function");M(x)})}),T(p,"all",function(x){var b=this;return"[object Array]"!=i.call(x)?b.reject(TypeError("Not an array")):0===x.length?b.resolve([]):new b(function(M,m){if("function"!=typeof M||"function"!=typeof m)throw TypeError("Not a function");var D=x.length,S=Array(D),O=0;h(b,x,function(P,R){S[P]=R,++O===D&&M(S)},m)})}),T(p,"race",function(x){var b=this;return"[object Array]"!=i.call(x)?b.reject(TypeError("Not an array")):new b(function(M,m){if("function"!=typeof M||"function"!=typeof m)throw TypeError("Not a function");h(b,x,function(D,S){M(S)},m)})}),p}(),se.exports?se.exports=f[C]:void 0===(I=function(){return f[C]}.call(U,r,U,se))||(se.exports=I)},18625:function(se){var U=Math.PI,r=T(120);function I(v,c,i,s){return["C",v,c,i,s,i,s]}function C(v,c,i,s,a,o){return["C",v/3+.6666666666666666*i,c/3+.6666666666666666*s,a/3+.6666666666666666*i,o/3+.6666666666666666*s,a,o]}function f(v,c,i,s,a,o,l,u,d,g){if(g)D=g[0],S=g[1],M=g[2],m=g[3];else{var h=k(v,c,-a);c=h.y;var w=((v=h.x)-(u=(h=k(u,d,-a)).x))/2,y=(c-(d=h.y))/2,p=w*w/(i*i)+y*y/(s*s);p>1&&(i*=p=Math.sqrt(p),s*=p);var _=i*i,x=s*s,b=(o==l?-1:1)*Math.sqrt(Math.abs((_*x-_*y*y-x*w*w)/(_*y*y+x*w*w)));b==1/0&&(b=1);var M=b*i*y/s+(v+u)/2,m=b*-s*w/i+(c+d)/2,D=Math.asin(((c-m)/s).toFixed(9)),S=Math.asin(((d-m)/s).toFixed(9));(D=v<M?U-D:D)<0&&(D=2*U+D),(S=u<M?U-S:S)<0&&(S=2*U+S),l&&D>S&&(D-=2*U),!l&&S>D&&(S-=2*U)}if(Math.abs(S-D)>r){var O=S,P=u,R=d;S=D+r*(l&&S>D?1:-1);var F=f(u=M+i*Math.cos(S),d=m+s*Math.sin(S),i,s,a,0,l,P,R,[S,O,M,m])}var B=Math.tan((S-D)/4),J=4/3*i*B,z=4/3*s*B,$=[2*v-(v+J*Math.sin(D)),2*c-(c-z*Math.cos(D)),u+J*Math.sin(S),d-z*Math.cos(S),u,d];if(g)return $;F&&($=$.concat(F));for(var G=0;G<$.length;){var H=k($[G],$[G+1],a);$[G++]=H.x,$[G++]=H.y}return $}function k(v,c,i){return{x:v*Math.cos(i)-c*Math.sin(i),y:v*Math.sin(i)+c*Math.cos(i)}}function T(v){return v*(U/180)}se.exports=function(v){for(var c,i=[],s=0,a=0,o=0,l=0,u=null,d=null,g=0,h=0,w=0,y=v.length;w<y;w++){var p=v[w],_=p[0];switch(_){case"M":o=p[1],l=p[2];break;case"A":(p=f(g,h,p[1],p[2],T(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(i.push(p.splice(0,7)),p.unshift("C"));break;case"S":var x=g,b=h;"C"!=c&&"S"!=c||(x+=x-s,b+=b-a),p=["C",x,b,p[1],p[2],p[3],p[4]];break;case"T":"Q"==c||"T"==c?(u=2*g-u,d=2*h-d):(u=g,d=h),p=C(g,h,u,d,p[1],p[2]);break;case"Q":u=p[1],d=p[2],p=C(g,h,p[1],p[2],p[3],p[4]);break;case"L":p=I(g,h,p[1],p[2]);break;case"H":p=I(g,h,p[1],h);break;case"V":p=I(g,h,g,p[1]);break;case"Z":p=I(g,h,o,l)}c=_,g=p[p.length-2],h=p[p.length-1],p.length>4?(s=p[p.length-4],a=p[p.length-3]):(s=g,a=h),i.push(p)}return i}},56131:function(se){"use strict";var U=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;se.exports=function(){try{if(!Object.assign)return!1;var C=new String("abc");if(C[5]="de","5"===Object.getOwnPropertyNames(C)[0])return!1;for(var f={},k=0;k<10;k++)f["_"+String.fromCharCode(k)]=k;if("0123456789"!==Object.getOwnPropertyNames(f).map(function(v){return f[v]}).join(""))return!1;var T={};return"abcdefghijklmnopqrst".split("").forEach(function(v){T[v]=v}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},T)).join("")}catch{return!1}}()?Object.assign:function(C,f){for(var k,T,v=function(a){if(null==a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}(C),c=1;c<arguments.length;c++){for(var i in k=Object(arguments[c]))r.call(k,i)&&(v[i]=k[i]);if(U){T=U(k);for(var s=0;s<T.length;s++)I.call(k,T[s])&&(v[T[s]]=k[T[s]])}}return v}},65848:function(se){"use strict";var U=function(r){return r!=r};se.exports=function(r,I){return 0===r&&0===I?1/r==1/I:r===I||!(!U(r)||!U(I))}},64003:function(se,U,r){"use strict";var I=r(17045),C=r(68222),f=r(65848),k=r(27015),T=r(55572),v=C(k(),Object);I(v,{getPolyfill:k,implementation:f,shim:T}),se.exports=v},27015:function(se,U,r){"use strict";var I=r(65848);se.exports=function(){return"function"==typeof Object.is?Object.is:I}},55572:function(se,U,r){"use strict";var I=r(27015),C=r(17045);se.exports=function(){var f=I();return C(Object,{is:f},{is:function(){return Object.is!==f}}),f}},99019:function(se,U,r){"use strict";var I;if(!Object.keys){var C=Object.prototype.hasOwnProperty,f=Object.prototype.toString,k=r(64178),T=Object.prototype.propertyIsEnumerable,v=!T.call({toString:null},"toString"),c=T.call(function(){},"prototype"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=function(l){var u=l.constructor;return u&&u.prototype===l},a={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},o=function(){if(typeof window>"u")return!1;for(var l in window)try{if(!a["$"+l]&&C.call(window,l)&&null!==window[l]&&"object"==typeof window[l])try{s(window[l])}catch{return!0}}catch{return!0}return!1}();I=function(l){var u=null!==l&&"object"==typeof l,d="[object Function]"===f.call(l),g=k(l),h=u&&"[object String]"===f.call(l),w=[];if(!u&&!d&&!g)throw new TypeError("Object.keys called on a non-object");var y=c&&d;if(h&&l.length>0&&!C.call(l,0))for(var p=0;p<l.length;++p)w.push(String(p));if(g&&l.length>0)for(var _=0;_<l.length;++_)w.push(String(_));else for(var x in l)y&&"prototype"===x||!C.call(l,x)||w.push(String(x));if(v)for(var b=function(m){if(typeof window>"u"||!o)return s(m);try{return s(m)}catch{return!1}}(l),M=0;M<i.length;++M)b&&"constructor"===i[M]||!C.call(l,i[M])||w.push(i[M]);return w}}se.exports=I},8709:function(se,U,r){"use strict";var I=Array.prototype.slice,C=r(64178),f=Object.keys,k=f?function(v){return f(v)}:r(99019),T=Object.keys;k.shim=function(){if(Object.keys){var v=function(){var c=Object.keys(arguments);return c&&c.length===arguments.length}(1,2);v||(Object.keys=function(c){return C(c)?T(I.call(c)):T(c)})}else Object.keys=k;return Object.keys||k},se.exports=k},64178:function(se){"use strict";var U=Object.prototype.toString;se.exports=function(r){var I=U.call(r),C="[object Arguments]"===I;return C||(C="[object Array]"!==I&&null!==r&&"object"==typeof r&&"number"==typeof r.length&&r.length>=0&&"[object Function]"===U.call(r.callee)),C}},88641:function(se){"use strict";function U(C,f){if("string"!=typeof C)return[C];var k=[C];"string"==typeof f||Array.isArray(f)?f={brackets:f}:f||(f={});var T=f.brackets?Array.isArray(f.brackets)?f.brackets:[f.brackets]:["{}","[]","()"],v=f.escape||"___",c=!!f.flat;T.forEach(function(s){var a=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),o=[];function l(u,d,g){var h=k.push(u.slice(s[0].length,-s[1].length))-1;return o.push(h),v+h+v}k.forEach(function(u,d){for(var g,h=0;u!=g;)if(g=u,u=u.replace(a,l),h++>1e4)throw Error("References have circular dependency. Please, check them.");k[d]=u}),o=o.reverse(),k=k.map(function(u){return o.forEach(function(d){u=u.replace(new RegExp("(\\"+v+d+"\\"+v+")","g"),s[0]+"$1"+s[1])}),u})});var i=new RegExp("\\"+v+"([0-9]+)\\"+v);return c?k:function s(a,o,l){for(var u,d=[],g=0;u=i.exec(a);){if(g++>1e4)throw Error("Circular references in parenthesis");d.push(a.slice(0,u.index)),d.push(s(o[u[1]],o)),a=a.slice(u.index+u[0].length)}return d.push(a),d}(k[0],k)}function r(C,f){if(f&&f.flat){var k,T=f&&f.escape||"___",v=C[0];if(!v)return"";for(var c=new RegExp("\\"+T+"([0-9]+)\\"+T),i=0;v!=k;){if(i++>1e4)throw Error("Circular references in "+C);k=v,v=v.replace(c,s)}return v}return C.reduce(function a(o,l){return Array.isArray(l)&&(l=l.reduce(a,"")),o+l},"");function s(a,o){if(null==C[o])throw Error("Reference "+o+"is undefined");return C[o]}}function I(C,f){return Array.isArray(C)?r(C,f):U(C,f)}I.parse=U,I.stringify=r,se.exports=I},18863:function(se,U,r){"use strict";var I=r(71299);se.exports=function(C){var f;return arguments.length>1&&(C=arguments),"string"==typeof C?C=C.split(/\s/).map(parseFloat):"number"==typeof C&&(C=[C]),C.length&&"number"==typeof C[0]?f=1===C.length?{width:C[0],height:C[0],x:0,y:0}:2===C.length?{width:C[0],height:C[1],x:0,y:0}:{x:C[0],y:C[1],width:C[2]-C[0]||0,height:C[3]-C[1]||0}:C&&((f={x:(C=I(C,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:C.top||0}).width=null==C.width?C.right?C.right-f.x:0:C.width,f.height=null==C.height?C.bottom?C.bottom-f.y:0:C.height),f}},95616:function(se){se.exports=function(C){var f=[];return C.replace(r,function(k,T,v){var s,c=T.toLowerCase();for(s=void 0,v=(s=v.match(I))?s.map(Number):[],"m"==c&&v.length>2&&(f.push([T].concat(v.splice(0,2))),c="l",T="m"==T?"l":"L");;){if(v.length==U[c])return v.unshift(T),f.push(v);if(v.length<U[c])throw new Error("malformed path data");f.push([T].concat(v.splice(0,U[c])))}}),f};var U={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,I=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function(se){se.exports=function(U,r){r||(r=[0,""]),U=String(U);var I=parseFloat(U,10);return r[0]=I,r[1]=U.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},9748:function(se,U,r){var I=r(90386);(function(){var C,f,k,T,v,c;typeof performance<"u"&&null!==performance&&performance.now?se.exports=function(){return performance.now()}:null!=I&&I.hrtime?(se.exports=function(){return(C()-v)/1e6},f=I.hrtime,T=(C=function(){var i;return 1e9*(i=f())[0]+i[1]})(),c=1e9*I.uptime(),v=T-c):Date.now?(se.exports=function(){return Date.now()-k},k=Date.now()):(se.exports=function(){return(new Date).getTime()-k},k=(new Date).getTime())}).call(this)},71299:function(se){"use strict";se.exports=function(I,C,f){var k,T,v={};if("string"==typeof C&&(C=r(C)),Array.isArray(C)){var c={};for(T=0;T<C.length;T++)c[C[T]]=!0;C=c}for(k in C)C[k]=r(C[k]);var i={};for(k in C){var s=C[k];if(Array.isArray(s))for(T=0;T<s.length;T++){var a=s[T];if(f&&(i[a]=!0),a in I){if(v[k]=I[a],f)for(var o=T;o<s.length;o++)i[s[o]]=!0;break}}else k in I&&(C[k]&&(v[k]=I[k]),f&&(i[k]=!0))}if(f)for(k in I)i[k]||(v[k]=I[k]);return v};var U={};function r(I){return U[I]?U[I]:("string"==typeof I&&(I=U[I]=I.split(/\s*,\s*|\s+/)),I)}},38258:function(se){se.exports=function(U,r,I,C){var f=U[0],k=U[1],T=!1;void 0===I&&(I=0),void 0===C&&(C=r.length);for(var v=C-I,c=0,i=v-1;c<v;i=c++){var s=r[c+I][0],a=r[c+I][1],l=r[i+I][1];a>k!=l>k&&f<(r[i+I][0]-s)*(k-a)/(l-a)+s&&(T=!T)}return T}},52142:function(se,U,r){var I,C=r(69444),f=r(29023),k=r(87263),T=r(11328),v=r(55968),c=r(10670),i=!1,s=f();function a(o,l,u){var d=I.segments(o),g=I.segments(l),h=u(I.combine(d,g));return I.polygon(h)}I={buildLog:function(o){return!0===o?i=C():!1===o&&(i=!1),!1!==i&&i.list},epsilon:function(o){return s.epsilon(o)},segments:function(o){var l=k(!0,s,i);return o.regions.forEach(l.addRegion),{segments:l.calculate(o.inverted),inverted:o.inverted}},combine:function(o,l){return{combined:k(!1,s,i).calculate(o.segments,o.inverted,l.segments,l.inverted),inverted1:o.inverted,inverted2:l.inverted}},selectUnion:function(o){return{segments:v.union(o.combined,i),inverted:o.inverted1||o.inverted2}},selectIntersect:function(o){return{segments:v.intersect(o.combined,i),inverted:o.inverted1&&o.inverted2}},selectDifference:function(o){return{segments:v.difference(o.combined,i),inverted:o.inverted1&&!o.inverted2}},selectDifferenceRev:function(o){return{segments:v.differenceRev(o.combined,i),inverted:!o.inverted1&&o.inverted2}},selectXor:function(o){return{segments:v.xor(o.combined,i),inverted:o.inverted1!==o.inverted2}},polygon:function(o){return{regions:T(o.segments,s,i),inverted:o.inverted}},polygonFromGeoJSON:function(o){return c.toPolygon(I,o)},polygonToGeoJSON:function(o){return c.fromPolygon(I,s,o)},union:function(o,l){return a(o,l,I.selectUnion)},intersect:function(o,l){return a(o,l,I.selectIntersect)},difference:function(o,l){return a(o,l,I.selectDifference)},differenceRev:function(o,l){return a(o,l,I.selectDifferenceRev)},xor:function(o,l){return a(o,l,I.selectXor)}},"object"==typeof window&&(window.PolyBool=I),se.exports=I},69444:function(se){se.exports=function(){var U,r=0,I=!1;function C(f,k){return U.list.push({type:f,data:k?JSON.parse(JSON.stringify(k)):void 0}),U}return U={list:[],segmentId:function(){return r++},checkIntersection:function(f,k){return C("check",{seg1:f,seg2:k})},segmentChop:function(f,k){return C("div_seg",{seg:f,pt:k}),C("chop",{seg:f,pt:k})},statusRemove:function(f){return C("pop_seg",{seg:f})},segmentUpdate:function(f){return C("seg_update",{seg:f})},segmentNew:function(f,k){return C("new_seg",{seg:f,primary:k})},segmentRemove:function(f){return C("rem_seg",{seg:f})},tempStatus:function(f,k,T){return C("temp_status",{seg:f,above:k,below:T})},rewind:function(f){return C("rewind",{seg:f})},status:function(f,k,T){return C("status",{seg:f,above:k,below:T})},vert:function(f){return f===I?U:(I=f,C("vert",{x:f}))},log:function(f){return"string"!=typeof f&&(f=JSON.stringify(f,!1,"  ")),C("log",{txt:f})},reset:function(){return C("reset")},selected:function(f){return C("selected",{segs:f})},chainStart:function(f){return C("chain_start",{seg:f})},chainRemoveHead:function(f,k){return C("chain_rem_head",{index:f,pt:k})},chainRemoveTail:function(f,k){return C("chain_rem_tail",{index:f,pt:k})},chainNew:function(f,k){return C("chain_new",{pt1:f,pt2:k})},chainMatch:function(f){return C("chain_match",{index:f})},chainClose:function(f){return C("chain_close",{index:f})},chainAddHead:function(f,k){return C("chain_add_head",{index:f,pt:k})},chainAddTail:function(f,k){return C("chain_add_tail",{index:f,pt:k})},chainConnect:function(f,k){return C("chain_con",{index1:f,index2:k})},chainReverse:function(f){return C("chain_rev",{index:f})},chainJoin:function(f,k){return C("chain_join",{index1:f,index2:k})},done:function(){return C("done")}}}},29023:function(se){se.exports=function(U){"number"!=typeof U&&(U=1e-10);var r={epsilon:function(I){return"number"==typeof I&&(U=I),U},pointAboveOrOnLine:function(I,C,f){var k=C[0],T=C[1];return(f[0]-k)*(I[1]-T)-(f[1]-T)*(I[0]-k)>=-U},pointBetween:function(I,C,f){var T=f[0]-C[0],c=f[1]-C[1],i=(I[0]-C[0])*T+(I[1]-C[1])*c;return!(i<U||i-(T*T+c*c)>-U)},pointsSameX:function(I,C){return Math.abs(I[0]-C[0])<U},pointsSameY:function(I,C){return Math.abs(I[1]-C[1])<U},pointsSame:function(I,C){return r.pointsSameX(I,C)&&r.pointsSameY(I,C)},pointsCompare:function(I,C){return r.pointsSameX(I,C)?r.pointsSameY(I,C)?0:I[1]<C[1]?-1:1:I[0]<C[0]?-1:1},pointsCollinear:function(I,C,f){return Math.abs((I[0]-C[0])*(C[1]-f[1])-(C[0]-f[0])*(I[1]-C[1]))<U},linesIntersect:function(I,C,f,k){var T=C[0]-I[0],v=C[1]-I[1],c=k[0]-f[0],i=k[1]-f[1],s=T*i-v*c;if(Math.abs(s)<U)return!1;var a=I[0]-f[0],o=I[1]-f[1],l=(c*o-i*a)/s,u=(T*o-v*a)/s,d={alongA:0,alongB:0,pt:[I[0]+l*T,I[1]+l*v]};return d.alongA=l<=-U?-2:l<U?-1:l-1<=-U?0:l-1<U?1:2,d.alongB=u<=-U?-2:u<U?-1:u-1<=-U?0:u-1<U?1:2,d},pointInsideRegion:function(I,C){for(var f=I[0],k=I[1],T=C[C.length-1][0],v=C[C.length-1][1],c=!1,i=0;i<C.length;i++){var s=C[i][0],a=C[i][1];a-k>U!=v-k>U&&(T-s)*(k-a)/(v-a)+s-f>U&&(c=!c),T=s,v=a}return c}};return r}},10670:function(se){se.exports={toPolygon:function(r,I){function C(T){if(T.length<=0)return r.segments({inverted:!1,regions:[]});function v(s){var a=s.slice(0,s.length-1);return r.segments({inverted:!1,regions:[a]})}for(var c=v(T[0]),i=1;i<T.length;i++)c=r.selectDifference(r.combine(c,v(T[i])));return c}if("Polygon"===I.type)return r.polygon(C(I.coordinates));if("MultiPolygon"===I.type){for(var f=r.segments({inverted:!1,regions:[]}),k=0;k<I.coordinates.length;k++)f=r.selectUnion(r.combine(f,C(I.coordinates[k])));return r.polygon(f)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(r,I,C){function f(u,d){return I.pointInsideRegion([.5*(u[0][0]+u[1][0]),.5*(u[0][1]+u[1][1])],d)}function k(u){return{region:u,children:[]}}C=r.polygon(r.segments(C));var T=k(null);function v(u,d){for(var g=0;g<u.children.length;g++)if(f(d,(w=u.children[g]).region))return void v(w,d);var h=k(d);for(g=0;g<u.children.length;g++){var w;f((w=u.children[g]).region,d)&&(h.children.push(w),u.children.splice(g,1),g--)}u.children.push(h)}for(var c=0;c<C.regions.length;c++){var i=C.regions[c];i.length<3||v(T,i)}function s(u,d){for(var g=0,h=u[u.length-1][0],w=u[u.length-1][1],y=[],p=0;p<u.length;p++){var _=u[p][0],x=u[p][1];y.push([_,x]),g+=x*h-_*w,h=_,w=x}return g<0!==d&&y.reverse(),y.push([y[0][0],y[0][1]]),y}var a=[];function o(u){var d=[s(u.region,!1)];a.push(d);for(var g=0;g<u.children.length;g++)d.push(l(u.children[g]))}function l(u){for(var d=0;d<u.children.length;d++)o(u.children[d]);return s(u.region,!0)}for(c=0;c<T.children.length;c++)o(T.children[c]);return a.length<=0?{type:"Polygon",coordinates:[]}:1==a.length?{type:"Polygon",coordinates:a[0]}:{type:"MultiPolygon",coordinates:a}}}},87263:function(se,U,r){var I=r(26859);se.exports=function(C,f,k){function T(o,l,u){return{id:k?k.segmentId():-1,start:o,end:l,myFill:{above:u.myFill.above,below:u.myFill.below},otherFill:null}}var v=I.create();function c(o,l){v.insertBefore(o,function(u){return d=o.isStart,h=l,w=u.isStart,p=u.other.pt,(0!==(_=f.pointsCompare(o.pt,y=u.pt))?_:f.pointsSame(h,p)?0:d!==w?d?1:-1:f.pointAboveOrOnLine(h,w?y:p,w?p:y)?1:-1)<0;var d,h,w,y,p,_})}function i(o,l){var d,h,u=(c(h=I.node({isStart:!0,pt:(d=o).start,seg:d,primary:l,other:null,status:null}),d.end),h);return function(d,g,h){var w=I.node({isStart:!1,pt:g.end,seg:g,primary:h,other:d,status:null});d.other=w,c(w,d.pt)}(u,o,l),u}function s(o,l){var d,g,u=T(l,o.seg.end,o.seg);return d=o,g=l,k&&k.segmentChop(d.seg,g),d.other.remove(),d.seg.end=g,d.other.pt=g,c(d.other,d.pt),i(u,o.primary)}function a(o,l){var u=I.create();function d(O){return u.findTransition(function(P){var R,F,B,J,z,$;return J=(R=O).seg.end,(f.pointsCollinear(B=R.seg.start,z=(F=P.ev).seg.start,$=F.seg.end)?f.pointsCollinear(J,z,$)||f.pointAboveOrOnLine(J,z,$)?1:-1:f.pointAboveOrOnLine(B,z,$)?1:-1)>0})}function g(O,P){var R=O.seg,F=P.seg,B=R.start,J=R.end,z=F.start,$=F.end;k&&k.checkIntersection(R,F);var G=f.linesIntersect(B,J,z,$);if(!1===G){if(!f.pointsCollinear(B,J,z)||f.pointsSame(B,$)||f.pointsSame(J,z))return!1;var H=f.pointsSame(B,z),X=f.pointsSame(J,$);if(H&&X)return P;var K=!H&&f.pointBetween(B,z,$),ue=!X&&f.pointBetween(J,z,$);if(H)return ue?s(P,J):s(O,$),P;K&&(X||(ue?s(P,J):s(O,$)),s(P,B))}else 0===G.alongA&&(-1===G.alongB?s(O,z):0===G.alongB?s(O,G.pt):1===G.alongB&&s(O,$)),0===G.alongB&&(-1===G.alongA?s(P,B):0===G.alongA?s(P,G.pt):1===G.alongA&&s(P,J));return!1}for(var h=[];!v.isEmpty();){var w=v.getHead();if(k&&k.vert(w.pt[0]),w.isStart){let O=function(){if(p){var P=g(w,p);if(P)return P}return!!_&&g(w,_)};k&&k.segmentNew(w.seg,w.primary);var y=d(w),p=y.before?y.before.ev:null,_=y.after?y.after.ev:null;k&&k.tempStatus(w.seg,!!p&&p.seg,!!_&&_.seg);var x,b,M=O();if(M&&(C?(b=null===w.seg.myFill.below||w.seg.myFill.above!==w.seg.myFill.below)&&(M.seg.myFill.above=!M.seg.myFill.above):M.seg.otherFill=w.seg.myFill,k&&k.segmentUpdate(M.seg),w.other.remove(),w.remove()),v.getHead()!==w){k&&k.rewind(w.seg);continue}C?(b=null===w.seg.myFill.below||w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=_?_.seg.myFill.above:o,w.seg.myFill.above=b?!w.seg.myFill.below:w.seg.myFill.below):null===w.seg.otherFill&&(w.seg.otherFill={above:x=_?w.primary===_.primary?_.seg.otherFill.above:_.seg.myFill.above:w.primary?l:o,below:x}),k&&k.status(w.seg,!!p&&p.seg,!!_&&_.seg),w.other.status=y.insert(I.node({ev:w}))}else{var m=w.status;if(null===m)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(u.exists(m.prev)&&u.exists(m.next)&&g(m.prev.ev,m.next.ev),k&&k.statusRemove(m.ev.seg),m.remove(),!w.primary){var D=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=D}h.push(w.seg)}v.getHead().remove()}return k&&k.done(),h}return C?{addRegion:function(o){for(var l,u,d,g=o[o.length-1],h=0;h<o.length;h++){var w=f.pointsCompare(l=g,g=o[h]);0!==w&&i((u=w<0?l:g,d=w<0?g:l,{id:k?k.segmentId():-1,start:u,end:d,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(o){return a(o,!1)}}:{calculate:function(o,l,u,d){return o.forEach(function(g){i(T(g.start,g.end,g),!0)}),u.forEach(function(g){i(T(g.start,g.end,g),!1)}),a(l,d)}}}},26859:function(se){se.exports={create:function(){var U={root:{root:!0,next:null},exists:function(r){return null!==r&&r!==U.root},isEmpty:function(){return null===U.root.next},getHead:function(){return U.root.next},insertBefore:function(r,I){for(var C=U.root,f=U.root.next;null!==f;){if(I(f))return r.prev=f.prev,r.next=f,f.prev.next=r,void(f.prev=r);C=f,f=f.next}C.next=r,r.prev=C,r.next=null},findTransition:function(r){for(var I=U.root,C=U.root.next;null!==C&&!r(C);)I=C,C=C.next;return{before:I===U.root?null:I,after:C,insert:function(f){return f.prev=I,f.next=C,I.next=f,null!==C&&(C.prev=f),f}}}};return U},node:function(U){return U.prev=null,U.next=null,U.remove=function(){U.prev.next=U.next,U.next&&(U.next.prev=U.prev),U.prev=null,U.next=null},U}}},11328:function(se){se.exports=function(U,r,I){var C=[],f=[];return U.forEach(function(k){var T=k.start,v=k.end;if(r.pointsSame(T,v))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{I&&I.chainStart(k);for(var c={index:0,matches_head:!1,matches_pt1:!1},i={index:0,matches_head:!1,matches_pt1:!1},s=c,a=0;a<C.length;a++){var o=(h=C[a])[0],l=h[h.length-1];if(r.pointsSame(o,T)){if(m(a,!0,!0))break}else if(r.pointsSame(o,v)){if(m(a,!0,!1))break}else if(r.pointsSame(l,T)){if(m(a,!1,!0))break}else if(r.pointsSame(l,v)&&m(a,!1,!1))break}if(s===c)return C.push([T,v]),void(I&&I.chainNew(T,v));if(s===i){I&&I.chainMatch(c.index);var u=c.index,d=c.matches_pt1?v:T,g=c.matches_head,h=C[u],w=g?h[0]:h[h.length-1],y=g?h[1]:h[h.length-2],p=g?h[h.length-1]:h[0],_=g?h[h.length-2]:h[1];return r.pointsCollinear(y,w,d)&&(g?(I&&I.chainRemoveHead(c.index,d),h.shift()):(I&&I.chainRemoveTail(c.index,d),h.pop()),w=y),r.pointsSame(p,d)?(C.splice(u,1),r.pointsCollinear(_,p,w)&&(g?(I&&I.chainRemoveTail(c.index,w),h.pop()):(I&&I.chainRemoveHead(c.index,w),h.shift())),I&&I.chainClose(c.index),void f.push(h)):void(g?(I&&I.chainAddHead(c.index,d),h.unshift(d)):(I&&I.chainAddTail(c.index,d),h.push(d)))}var x=c.index,b=i.index;I&&I.chainConnect(x,b);var M=C[x].length<C[b].length;c.matches_head?i.matches_head?M?(D(x),S(x,b)):(D(b),S(b,x)):S(b,x):i.matches_head?S(x,b):M?(D(x),S(b,x)):(D(b),S(x,b))}function m(O,P,R){return s.index=O,s.matches_head=P,s.matches_pt1=R,s===c?(s=i,!1):(s=null,!0)}function D(O){I&&I.chainReverse(O),C[O].reverse()}function S(O,P){var R=C[O],F=C[P],B=R[R.length-1],J=R[R.length-2],z=F[0],$=F[1];r.pointsCollinear(J,B,z)&&(I&&I.chainRemoveTail(O,B),R.pop(),B=J),r.pointsCollinear(B,z,$)&&(I&&I.chainRemoveHead(P,z),F.shift()),I&&I.chainJoin(O,P),C[O]=R.concat(F),C.splice(P,1)}}),f}},55968:function(se){function U(I,C,f){var k=[];return I.forEach(function(T){var v=(T.myFill.above?8:0)+(T.myFill.below?4:0)+(T.otherFill&&T.otherFill.above?2:0)+(T.otherFill&&T.otherFill.below?1:0);0!==C[v]&&k.push({id:f?f.segmentId():-1,start:T.start,end:T.end,myFill:{above:1===C[v],below:2===C[v]},otherFill:null})}),f&&f.selected(k),k}se.exports={union:function(I,C){return U(I,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],C)},intersect:function(I,C){return U(I,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],C)},difference:function(I,C){return U(I,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],C)},differenceRev:function(I,C){return U(I,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],C)},xor:function(I,C){return U(I,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],C)}}},14847:function(se,U,r){"use strict";var I=r(21630).Transform,C=r(90715);function f(){I.call(this,{readableObjectMode:!0})}function k(T,v,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=T,v&&(this.code=v),c&&(this.statusCode=c)}(f.prototype=Object.create(I.prototype)).constructor=f,C(f.prototype),U.OF=function(T,v,c){for(var i=v,s=0;s<c.length;)if(T[i++]!==c[s++])return!1;return!0},U.eG=function(T,v){var c=[],i=0;if(v&&"hex"===v)for(;i<T.length;)c.push(parseInt(T.slice(i,i+2),16)),i+=2;else for(;i<T.length;i++)c.push(255&T.charCodeAt(i));return c},U.mP=function(T,v){return T[v]|T[v+1]<<8},U.n8=function(T,v){return T[v+1]|T[v]<<8},U.nm=function(T,v){return T[v]|T[v+1]<<8|T[v+2]<<16|16777216*T[v+3]},U.Ag=function(T,v){return T[v+3]|T[v+2]<<8|T[v+1]<<16|16777216*T[v]},(k.prototype=Object.create(Error.prototype)).constructor=k},71371:function(se){"use strict";function U(C,f){var k=new Error(C);return k.code=f,k}function r(C){try{return decodeURIComponent(escape(C))}catch{return C}}function I(C,f,k){this.input=C.subarray(f,k),this.start=f;var T=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==T&&"MM\0*"!==T)throw U("invalid TIFF signature","EBADDATA");this.big_endian="M"===T[0]}I.prototype.each=function(C){this.aborted=!1;var f=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:f}];this.ifds_to_read.length>0&&!this.aborted;){var k=this.ifds_to_read.shift();k.offset&&this.scan_ifd(k.id,k.offset,C)}},I.prototype.read_uint16=function(C){var f=this.input;if(C+2>f.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?256*f[C]+f[C+1]:f[C]+256*f[C+1]},I.prototype.read_uint32=function(C){var f=this.input;if(C+4>f.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?16777216*f[C]+65536*f[C+1]+256*f[C+2]+f[C+3]:f[C]+256*f[C+1]+65536*f[C+2]+16777216*f[C+3]},I.prototype.is_subifd_link=function(C,f){return 0===C&&34665===f||0===C&&34853===f||34665===C&&40965===f},I.prototype.exif_format_length=function(C){switch(C){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},I.prototype.exif_format_read=function(C,f){var k;switch(C){case 1:case 2:return this.input[f];case 6:return(k=this.input[f])|33554430*(128&k);case 3:return this.read_uint16(f);case 8:return(k=this.read_uint16(f))|131070*(32768&k);case 4:return this.read_uint32(f);case 9:return 0|this.read_uint32(f);default:return null}},I.prototype.scan_ifd=function(C,f,k){var T=this.read_uint16(f);f+=2;for(var v=0;v<T;v++){var c=this.read_uint16(f),i=this.read_uint16(f+2),s=this.read_uint32(f+4),a=this.exif_format_length(i),o=s*a,l=o<=4?f+8:this.read_uint32(f+8),u=!1;if(l+o>this.input.length)throw U("unexpected EOF","EBADDATA");for(var d=[],g=l,h=0;h<s;h++,g+=a){var w=this.exif_format_read(i,g);if(null===w){d=null;break}d.push(w)}if(Array.isArray(d)&&2===i&&(d=r(String.fromCharCode.apply(null,d)))&&"\0"===d[d.length-1]&&(d=d.slice(0,-1)),this.is_subifd_link(C,c)&&Array.isArray(d)&&Number.isInteger(d[0])&&d[0]>0&&(this.ifds_to_read.push({id:c,offset:d[0]}),u=!0),!1===k({is_big_endian:this.big_endian,ifd:C,tag:c,format:i,count:s,entry_offset:f+this.start,data_length:o,data_offset:l+this.start,value:d,is_subifd_link:u}))return void(this.aborted=!0);f+=12}0===C&&this.ifds_to_read.push({id:1,offset:this.read_uint32(f)})},se.exports.ExifParser=I,se.exports.get_orientation=function(C){var f=0;try{return new I(C,0,C.length).each(function(k){if(0===k.ifd&&274===k.tag&&Array.isArray(k.value))return f=k.value[0],!1}),f}catch{return-1}}},76767:function(se,U,r){"use strict";var I=r(14847).n8,C=r(14847).Ag;function f(s,a){if(s.length<4+a)return null;var o=C(s,a);return s.length<o+a||o<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(a+4,a+8)),data:s.slice(a+8,a+o),end:a+o}}function k(s,a){for(var o=0;;){var l=f(s,o);if(!l)break;switch(l.boxtype){case"ispe":a.sizes.push({width:C(l.data,4),height:C(l.data,8)});break;case"irot":a.transforms.push({type:"irot",value:3&l.data[0]});break;case"imir":a.transforms.push({type:"imir",value:1&l.data[0]})}o=l.end}}function T(s,a,o){for(var l=0,u=0;u<o;u++)l=256*l+(s[a+u]||0);return l}function v(s,a){for(var o=s[4]>>4&15,l=15&s[4],u=s[5]>>4&15,d=I(s,6),g=8,h=0;h<d;h++){var w=I(s,g),y=I(s,g+=2),p=T(s,g+=2,u),_=I(s,g+=u);if(g+=2,0===y&&1===_){var x=T(s,g,o),b=T(s,g+o,l);a.item_loc[w]={length:b,offset:x+p}}g+=_*(o+l)}}function c(s,a){for(var o=I(s,4),l=6,u=0;u<o;u++){var d=f(s,l);if(!d)break;if("infe"===d.boxtype){for(var g=I(d.data,4),h="",w=8;w<d.data.length&&d.data[w];w++)h+=String.fromCharCode(d.data[w]);a.item_inf[h]=g}l=d.end}}function i(s,a){for(var o=0;;){var l=f(s,o);if(!l)break;"ipco"===l.boxtype&&k(l.data,a),o=l.end}}se.exports.unbox=f,se.exports.readSizeFromMeta=function(s){var a={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(w,y){for(var p=4;;){var _=f(w,p);if(!_)break;"iprp"===_.boxtype&&i(_.data,y),"iloc"===_.boxtype&&v(_.data,y),"iinf"===_.boxtype&&c(_.data,y),p=_.end}}(s,a),a.sizes.length){var o,l,u,d=(l=(o=a.sizes).reduce(function(w,y){return w.width>y.width||w.width===y.width&&w.height>y.height?w:y}),u=o.reduce(function(w,y){return w.height>y.height||w.height===y.height&&w.width>y.width?w:y}),l.width>u.height||l.width===u.height&&l.height>u.width?l:u),g=1;a.transforms.forEach(function(w){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},p={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===w.type&&(g=0===w.value?p[g]:y[g=y[g=p[g]]]),"irot"===w.type)for(var _=0;_<w.value;_++)g=y[g]});var h=null;return a.item_inf.Exif&&(h=a.item_loc[a.item_inf.Exif]),{width:d.width,height:d.height,orientation:a.transforms.length?g:null,variants:a.sizes,exif_location:h}}},se.exports.getMimeType=function(s){var a=String.fromCharCode.apply(null,s.slice(0,4)),o={};o[a]=!0;for(var l=8;l<s.length;l+=4)o[String.fromCharCode.apply(null,s.slice(l,l+4))]=!0;if(o.mif1||o.msf1||o.miaf)return"avif"===a||"avis"===a||"avio"===a?{type:"avif",mime:"image/avif"}:"heic"===a||"heix"===a?{type:"heic",mime:"image/heic"}:"hevc"===a||"hevx"===a?{type:"heic",mime:"image/heic-sequence"}:o.avif||o.avis?{type:"avif",mime:"image/avif"}:o.heic||o.heix||o.hevc||o.hevx||o.heis?o.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).Ag,k=r(76767),T=r(71371),v=I("ftyp");se.exports=function(c){if(C(c,4,v)){var i=k.unbox(c,0);if(i){var s=k.getMimeType(i.data);if(s){for(var a,o=i.end;;){var l=k.unbox(c,o);if(!l)break;if(o=l.end,"mdat"===l.boxtype)return;if("meta"===l.boxtype){a=l.data;break}}if(a){var u=k.readSizeFromMeta(a);if(u){var d={width:u.width,height:u.height,type:s.type,mime:s.mime,wUnits:"px",hUnits:"px"};if(u.variants.length>1&&(d.variants=u.variants),u.orientation&&(d.orientation=u.orientation),u.exif_location&&u.exif_location.offset+u.exif_location.length<=c.length){var g=f(c,u.exif_location.offset),h=c.slice(u.exif_location.offset+g+4,u.exif_location.offset+u.exif_location.length),w=T.get_orientation(h);w>0&&(d.orientation=w)}return d}}}}}}},2504:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).mP,k=I("BM");se.exports=function(T){if(!(T.length<26)&&C(T,0,k))return{width:f(T,18),height:f(T,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).mP,k=I("GIF87a"),T=I("GIF89a");se.exports=function(v){if(!(v.length<10)&&(C(v,0,k)||C(v,0,T)))return{width:f(v,6),height:f(v,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function(se,U,r){"use strict";var I=r(14847).mP;se.exports=function(C){var f=I(C,0),k=I(C,2),T=I(C,4);if(0===f&&1===k&&T){for(var v=[],c={width:0,height:0},i=0;i<T;i++){var s=C[6+16*i]||256,a=C[6+16*i+1]||256,o={width:s,height:a};v.push(o),(s>c.width||a>c.height)&&(c=o)}return{width:c.width,height:c.height,variants:v,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function(se,U,r){"use strict";var I=r(14847).n8,C=r(14847).eG,f=r(14847).OF,k=r(71371),T=C("Exif\0\0");se.exports=function(v){if(!(v.length<2)&&255===v[0]&&216===v[1]&&255===v[2])for(var c=2;;){for(;;){if(v.length-c<2)return;if(255===v[c++])break}for(var i,s,a=v[c++];255===a;)a=v[c++];if(208<=a&&a<=217||1===a)i=0;else{if(!(192<=a&&a<=254)||v.length-c<2)return;i=I(v,c)-2,c+=2}if(217===a||218===a)return;if(225===a&&i>=10&&f(v,c,T)&&(s=k.get_orientation(v.slice(c+6,c+i))),i>=5&&192<=a&&a<=207&&196!==a&&200!==a&&204!==a){if(v.length-c<i)return;var o={width:I(v,c+3),height:I(v,c+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return s>0&&(o.orientation=s),o}c+=i}}},6303:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).Ag,k=I("\x89PNG\r\n\x1a\n"),T=I("IHDR");se.exports=function(v){if(!(v.length<24)&&C(v,0,k)&&C(v,12,T))return{width:f(v,16),height:f(v,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).Ag,k=I("8BPS\0\x01");se.exports=function(T){if(!(T.length<22)&&C(T,0,k))return{width:f(T,18),height:f(T,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function(se){"use strict";function U(c){return"number"==typeof c&&isFinite(c)&&c>0}var r=/<[-_.:a-zA-Z0-9][^>]*>/,I=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,C=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,f=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,k=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,T=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function v(c){return T.test(c)?c.match(T)[0]:"px"}se.exports=function(c){if(function(p){var _,x=0,b=p.length;for(239===p[0]&&187===p[1]&&191===p[2]&&(x=3);x<b&&(32===(_=p[x])||9===_||13===_||10===_);)x++;return x!==b&&60===p[x]}(c)){for(var i="",s=0;s<c.length;s++)i+=String.fromCharCode(c[s]);var a=(i.match(r)||[""])[0];if(I.test(a)){var o=(_=(p=a).match(C),x=p.match(f),b=p.match(k),{width:_&&(_[1]||_[2]),height:x&&(x[1]||x[2]),viewbox:b&&(b[1]||b[2])}),l=parseFloat(o.width),u=parseFloat(o.height);if(o.width&&o.height)return U(l)&&U(u)?{width:l,height:u,type:"svg",mime:"image/svg+xml",wUnits:v(o.width),hUnits:v(o.height)}:void 0;var d=(o.viewbox||"").split(" "),g={width:d[2],height:d[3]},h=parseFloat(g.width),w=parseFloat(g.height);if(U(h)&&U(w)&&v(g.width)===v(g.height)){var y=h/w;return o.width?U(l)?{width:l,height:l/y,type:"svg",mime:"image/svg+xml",wUnits:v(o.width),hUnits:v(o.width)}:void 0:o.height?U(u)?{width:u*y,height:u,type:"svg",mime:"image/svg+xml",wUnits:v(o.height),hUnits:v(o.height)}:void 0:{width:h,height:w,type:"svg",mime:"image/svg+xml",wUnits:v(g.width),hUnits:v(g.height)}}}}var p,_,x,b}},66278:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).mP,k=r(14847).n8,T=r(14847).nm,v=r(14847).Ag,c=I("II*\0"),i=I("MM\0*");function s(l,u,d){return d?k(l,u):f(l,u)}function a(l,u,d){return d?v(l,u):T(l,u)}function o(l,u,d){var g=s(l,u+2,d);return 1!==a(l,u+4,d)||3!==g&&4!==g?null:3===g?s(l,u+8,d):a(l,u+8,d)}se.exports=function(l){if(!(l.length<8)&&(C(l,0,c)||C(l,0,i))){var u=77===l[0],d=a(l,4,u)-8;if(!(d<0)){var g=d+8;if(!(l.length-g<2)){var h=12*s(l,g+0,u);if(!(h<=0||(g+=2,l.length-g<h))){var w,y,p,_;for(w=0;w<h;w+=12)256===(_=s(l,g+w,u))?y=o(l,g+w,u):257===_&&(p=o(l,g+w,u));return y&&p?{width:y,height:p,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function(se,U,r){"use strict";var I=r(14847).eG,C=r(14847).OF,f=r(14847).mP,k=r(14847).nm,T=r(71371),v=I("RIFF"),c=I("WEBP");function i(o,l){if(157===o[l+3]&&1===o[l+4]&&42===o[l+5])return{width:16383&f(o,l+6),height:16383&f(o,l+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function s(o,l){if(47===o[l]){var u=k(o,l+1);return{width:1+(16383&u),height:1+(u>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function a(o,l){return{width:1+(o[l+6]<<16|o[l+5]<<8|o[l+4]),height:1+(o[l+9]<<l|o[l+8]<<8|o[l+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}se.exports=function(o){if(!(o.length<16)&&(C(o,0,v)||C(o,8,c))){var l=12,u=null,d=0,g=k(o,4)+8;if(!(g>o.length)){for(;l+8<g;)if(0!==o[l]){var h=String.fromCharCode.apply(null,o.slice(l,l+4)),w=k(o,l+4);"VP8 "===h&&w>=10?u=u||i(o,l+8):"VP8L"===h&&w>=9?u=u||s(o,l+8):"VP8X"===h&&w>=10?u=u||a(o,l+8):"EXIF"===h&&(d=T.get_orientation(o.slice(l+8,l+8+w)),l=1/0),l+=8+w}else l++;if(u)return d>0&&(u.orientation=d),u}}}},91497:function(se,U,r){"use strict";se.exports={avif:r(24461),bmp:r(2504),gif:r(47342),ico:r(31355),jpeg:r(54261),png:r(6303),psd:r(38689),svg:r(6881),tiff:r(66278),webp:r(90784)}},33575:function(se,U,r){"use strict";var I=r(91497);se.exports=function(C){return function(f){for(var k=Object.keys(I),T=0;T<k.length;T++){var v=I[k[T]](f);if(v)return v}return null}(C)},se.exports.parsers=I},90386:function(se){var U,r,I=se.exports={};function C(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function k(u){if(U===setTimeout)return setTimeout(u,0);if((U===C||!U)&&setTimeout)return U=setTimeout,setTimeout(u,0);try{return U(u,0)}catch{try{return U.call(null,u,0)}catch{return U.call(this,u,0)}}}!function(){try{U="function"==typeof setTimeout?setTimeout:C}catch{U=C}try{r="function"==typeof clearTimeout?clearTimeout:f}catch{r=f}}();var T,v=[],c=!1,i=-1;function s(){c&&T&&(c=!1,T.length?v=T.concat(v):i=-1,v.length&&a())}function a(){if(!c){var u=k(s);c=!0;for(var d=v.length;d;){for(T=v,v=[];++i<d;)T&&T[i].run();i=-1,d=v.length}T=null,c=!1,function(g){if(r===clearTimeout)return clearTimeout(g);if((r===f||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(g);try{return r(g)}catch{try{return r.call(null,g)}catch{return r.call(this,g)}}}(u)}}function o(u,d){this.fun=u,this.array=d}function l(){}I.nextTick=function(u){var d=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)d[g-1]=arguments[g];v.push(new o(u,d)),1!==v.length||c||k(a)},o.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={},I.on=l,I.addListener=l,I.once=l,I.off=l,I.removeListener=l,I.removeAllListeners=l,I.emit=l,I.prependListener=l,I.prependOnceListener=l,I.listeners=function(u){return[]},I.binding=function(u){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(u){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},5877:function(se,U,r){for(var I=r(9748),C=typeof window>"u"?r.g:window,f=["moz","webkit"],k="AnimationFrame",T=C["request"+k],v=C["cancel"+k]||C["cancelRequest"+k],c=0;!T&&c<f.length;c++)T=C[f[c]+"Request"+k],v=C[f[c]+"Cancel"+k]||C[f[c]+"CancelRequest"+k];if(!T||!v){var i=0,s=0,a=[];T=function(o){if(0===a.length){var l=I(),u=Math.max(0,16.666666666666668-(l-i));i=u+l,setTimeout(function(){var d=a.slice(0);a.length=0;for(var g=0;g<d.length;g++)if(!d[g].cancelled)try{d[g].callback(i)}catch(h){setTimeout(function(){throw h},0)}},Math.round(u))}return a.push({handle:++s,callback:o,cancelled:!1}),s},v=function(o){for(var l=0;l<a.length;l++)a[l].handle===o&&(a[l].cancelled=!0)}}se.exports=function(o){return T.call(C,o)},se.exports.cancel=function(){v.apply(C,arguments)},se.exports.polyfill=function(o){o||(o=C),o.requestAnimationFrame=T,o.cancelAnimationFrame=v}},3593:function(se,U,r){"use strict";var I=r(21527),C=r(25075),f=r(93447),k=r(71299),T=r(56131),v=r(30120),c=r(57060),i=c.float32,s=c.fract32;se.exports=function(o,l){if("function"==typeof o?(l||(l={}),l.regl=o):l=o,l.length&&(l.positions=l),!(o=l.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u,d,g,h,w,y,p=o._gl,_={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},x=[];return h=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),d=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),w=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"static",type:"float",data:a}),D(l),u=o({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(O,P){return[P.viewport.x,P.viewport.y,O.viewportWidth,O.viewportHeight]}},attributes:{color:{buffer:h,offset:function(O,P){return 4*P.offset},divisor:1},position:{buffer:d,offset:function(O,P){return 8*P.offset},divisor:1},positionFract:{buffer:g,offset:function(O,P){return 8*P.offset},divisor:1},error:{buffer:w,offset:function(O,P){return 16*P.offset},divisor:1},direction:{buffer:y,stride:24,offset:0},lineOffset:{buffer:y,stride:24,offset:8},capOffset:{buffer:y,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:a.length}),T(b,{update:D,draw:M,destroy:S,regl:o,gl:p,canvas:p.canvas,groups:x}),b;function b(O){O?D(O):null===O&&S(),M()}function M(O){if("number"==typeof O)return m(O);O&&!Array.isArray(O)&&(O=[O]),o._refresh(),x.forEach(function(P,R){P&&(O&&(P.draw=!!O[R]),P.draw?m(R):P.draw=!0)})}function m(O){"number"==typeof O&&(O=x[O]),null!=O&&O&&O.count&&O.color&&O.opacity&&O.positions&&O.positions.length>1&&(O.scaleRatio=[O.scale[0]*O.viewport.width,O.scale[1]*O.viewport.height],u(O),O.after&&O.after(O))}function D(O){if(O){null!=O.length?"number"==typeof O[0]&&(O=[{positions:O}]):Array.isArray(O)||(O=[O]);var P=0,R=0;if(b.groups=x=O.map(function(H,X){var K=x[X];return H&&("function"==typeof H?H={after:H}:"number"==typeof H[0]&&(H={positions:H}),H=k(H,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),K||(x[X]=K={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},H=T({},_,H)),f(K,H,[{lineWidth:function(ue){return.5*+ue},capSize:function(ue){return.5*+ue},opacity:parseFloat,errors:function(ue){return ue=v(ue),R+=ue.length,ue},positions:function(ue,ae){return ue=v(ue,"float64"),ae.count=Math.floor(ue.length/2),ae.bounds=I(ue,2),ae.offset=P,P+=ae.count,ue}},{color:function(ue,ae){var ne=ae.count;if(ue||(ue="transparent"),!Array.isArray(ue)||"number"==typeof ue[0]){var Q=ue;ue=Array(ne);for(var ie=0;ie<ne;ie++)ue[ie]=Q}if(ue.length<ne)throw Error("Not enough colors");for(var le=new Uint8Array(4*ne),fe=0;fe<ne;fe++){var he=C(ue[fe],"uint8");le.set(he,4*fe)}return le},range:function(ue,ae,ne){return ue||(ue=ae.bounds),ae.scale=[1/(ue[2]-ue[0]),1/(ue[3]-ue[1])],ae.translate=[-ue[0],-ue[1]],ae.scaleFract=s(ae.scale),ae.translateFract=s(ae.translate),ue},viewport:function(ue){var ae;return Array.isArray(ue)?ae={x:ue[0],y:ue[1],width:ue[2]-ue[0],height:ue[3]-ue[1]}:ue?((ae={x:ue.x||ue.left||0,y:ue.y||ue.top||0}).width=ue.right?ue.right-ae.x:ue.w||ue.width||0,ae.height=ue.bottom?ue.bottom-ae.y:ue.h||ue.height||0):ae={x:0,y:0,width:p.drawingBufferWidth,height:p.drawingBufferHeight},ae}}])),K}),P||R){var F=x.reduce(function(H,X,K){return H+(X?X.count:0)},0),B=new Float64Array(2*F),J=new Uint8Array(4*F),z=new Float32Array(4*F);x.forEach(function(H,X){if(H){var K=H.positions,ae=H.offset,Q=H.errors;H.count&&(J.set(H.color,4*ae),z.set(Q,4*ae),B.set(K,2*ae))}});var $=i(B);d($);var G=s(B,$);g(G),h(J),w(z)}}}function S(){d.destroy(),g.destroy(),h.destroy(),w.destroy(),y.destroy()}};var a=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function(se,U,r){"use strict";var I=r(25075),C=r(21527),f=r(56131),k=r(56068),T=r(71299),v=r(30120),c=r(11474),i=r(54),s=r(57060),a=s.float32,o=s.fract32,l=r(83522),u=r(18863),d=r(6851);function g(h,w){if(!(this instanceof g))return new g(h,w);if("function"==typeof h?(w||(w={}),w.regl=h):w=h,w.length&&(w.positions=w),!(h=w.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl,this.regl=h,this.passes=[],this.shaders=g.shaders.has(h)?g.shaders.get(h):g.shaders.set(h,g.createShaders(h)).get(h),this.update(w)}se.exports=g,g.dashMult=2,g.maxPatternLength=256,g.precisionThreshold=3e6,g.maxPoints=1e4,g.maxLines=2048,g.shaders=new l,g.createShaders=function(h){var w,y=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),p={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(x,b){return"round"===b.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashTexture:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashLength:h.prop("dashLength"),viewport:function(x,b){return[b.viewport.x,b.viewport.y,x.viewportWidth,x.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(x,b){return!b.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},_=h(f({vert:k(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:k(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},p));try{w=h(f({cull:{enable:!0,face:"back"},vert:k(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:k(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},p))}catch{w=_}return{fill:h({primitive:"triangle",elements:function(x,b){return b.triangles},offset:0,vert:k(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(x,b){return[b.viewport.x,b.viewport.y,x.viewportWidth,x.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:p.blend,depth:{enable:!1},scissor:p.scissor,stencil:p.stencil,viewport:p.viewport}),rect:_,miter:w}},g.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},g.prototype.render=function(){for(var h,w=[],y=arguments.length;y--;)w[y]=arguments[y];w.length&&(h=this).update.apply(h,w),this.draw()},g.prototype.draw=function(){for(var h=this,w=[],y=arguments.length;y--;)w[y]=arguments[y];return(w.length?w:this.passes).forEach(function(p,_){var x;if(p&&Array.isArray(p))return(x=h).draw.apply(x,p);"number"==typeof p&&(p=h.passes[p]),p&&p.count>1&&p.opacity&&(h.regl._refresh(),p.fill&&p.triangles&&p.triangles.length>2&&h.shaders.fill(p),p.thickness&&(p.scale[0]*p.viewport.width>g.precisionThreshold||p.scale[1]*p.viewport.height>g.precisionThreshold||"rect"===p.join||!p.join&&(p.thickness<=2||p.count>=g.maxPoints)?h.shaders.rect(p):h.shaders.miter(p)))}),this},g.prototype.update=function(h){var w=this;if(h){null!=h.length?"number"==typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var y=this.regl,p=this.gl;if(h.forEach(function(m,D){var S=w.passes[D];if(void 0!==m)if(null!==m){if("number"==typeof m[0]&&(m={positions:m}),m=T(m,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(w.passes[D]=S={id:D,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},m=f({},g.defaults,m)),null!=m.thickness&&(S.thickness=parseFloat(m.thickness)),null!=m.opacity&&(S.opacity=parseFloat(m.opacity)),null!=m.miterLimit&&(S.miterLimit=parseFloat(m.miterLimit)),null!=m.overlay&&(S.overlay=!!m.overlay,D<g.maxLines&&(S.depth=2*(g.maxLines-1-D%g.maxLines)/g.maxLines-1)),null!=m.join&&(S.join=m.join),null!=m.hole&&(S.hole=m.hole),null!=m.fill&&(S.fill=m.fill?I(m.fill,"uint8"):null),null!=m.viewport&&(S.viewport=u(m.viewport)),S.viewport||(S.viewport=u([p.drawingBufferWidth,p.drawingBufferHeight])),null!=m.close&&(S.close=m.close),null===m.positions&&(m.positions=[]),m.positions){var O,P;if(m.positions.x&&m.positions.y){var R=m.positions.x,F=m.positions.y;P=S.count=Math.max(R.length,F.length),O=new Float64Array(2*P);for(var B=0;B<P;B++)O[2*B]=R[B],O[2*B+1]=F[B]}else O=v(m.positions,"float64"),P=S.count=Math.floor(O.length/2);var J=S.bounds=C(O,2);if(S.fill){for(var z=[],$={},G=0,H=0,X=0,K=S.count;H<K;H++){var ue=O[2*H],ae=O[2*H+1];isNaN(ue)||isNaN(ae)||null==ue||null==ae?(ue=O[2*G],ae=O[2*G+1],$[H]=G):G=H,z[X++]=ue,z[X++]=ae}if(m.splitNull){S.count-1 in $||($[S.count]=S.count-1);var ne=Object.keys($).map(Number).sort(function(vt,mt){return vt-mt}),Q=[],ie=0,le=null!=S.hole?S.hole[0]:null;if(null!=le){var fe=d(ne,function(vt){return vt>=le});(ne=ne.slice(0,fe)).push(le)}for(var he=function(vt){var mt=z.slice(2*ie,2*ne[vt]).concat(le?z.slice(2*le):[]),Lt=(S.hole||[]).map(function(Rt){return Rt-le+(ne[vt]-ie)}),Ft=c(mt,Lt);Ft=Ft.map(function(Rt){return Rt+ie+(Rt+ie<ne[vt]?0:le-ne[vt])}),Q.push.apply(Q,Ft),ie=ne[vt]+1},pe=0;pe<ne.length;pe++)he(pe);for(var xe=0,Ee=Q.length;xe<Ee;xe++)null!=$[Q[xe]]&&(Q[xe]=$[Q[xe]]);S.triangles=Q}else{for(var Re=c(z,S.hole||[]),ke=0,Te=Re.length;ke<Te;ke++)null!=$[Re[ke]]&&(Re[ke]=$[Re[ke]]);S.triangles=Re}}var we=new Float64Array(O);i(we,2,J);var je=new Float64Array(2*P+6);S.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(je[0]=we[2*P-4],je[1]=we[2*P-3]):(je[0]=we[2*P-2],je[1]=we[2*P-1]):(je[0]=we[0],je[1]=we[1]),je.set(we,2),S.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(je[2*P+2]=we[2],je[2*P+3]=we[3],S.count-=1):(je[2*P+2]=we[0],je[2*P+3]=we[1],je[2*P+4]=we[2],je[2*P+5]=we[3]):(je[2*P+2]=we[2*P-2],je[2*P+3]=we[2*P-1],je[2*P+4]=we[2*P-2],je[2*P+5]=we[2*P-1]);var Ce=a(je);S.positionBuffer(Ce);var Ie=o(je,Ce);S.positionFractBuffer(Ie)}if(m.range?S.range=m.range:S.range||(S.range=S.bounds),(m.range||m.positions)&&S.count){var ge=S.bounds,Ae=S.range[2]-S.range[0],Ne=S.range[3]-S.range[1];S.scale=[(ge[2]-ge[0])/Ae,(ge[3]-ge[1])/Ne],S.translate=[-S.range[0]/Ae+ge[0]/Ae||0,-S.range[1]/Ne+ge[1]/Ne||0],S.scaleFract=o(S.scale),S.translateFract=o(S.translate)}if(m.dashes){var De,qe=0;if(!m.dashes||m.dashes.length<2)qe=1,De=new Uint8Array([255,255,255,255,255,255,255,255]);else{qe=0;for(var Ke=0;Ke<m.dashes.length;++Ke)qe+=m.dashes[Ke];De=new Uint8Array(qe*g.dashMult);for(var be=0,Oe=255,Le=0;Le<2;Le++)for(var Ue=0;Ue<m.dashes.length;++Ue){for(var Ze=0,We=m.dashes[Ue]*g.dashMult*.5;Ze<We;++Ze)De[be++]=Oe;Oe^=255}}S.dashLength=qe,S.dashTexture({channels:1,data:De,width:De.length,height:1,mag:"linear",min:"linear"},0,0)}if(m.color){var et=S.count,nt=m.color;nt||(nt="transparent");var ct=new Uint8Array(4*et+4);if(Array.isArray(nt)&&"number"!=typeof nt[0]){for(var yt=0;yt<et;yt++){var ut=I(nt[yt],"uint8");ct.set(ut,4*yt)}ct.set(I(nt[0],"uint8"),4*et)}else for(var Ct=I(nt,"uint8"),Dt=0;Dt<et+1;Dt++)ct.set(Ct,4*Dt);S.colorBuffer({usage:"dynamic",type:"uint8",data:ct})}}else w.passes[D]=null}),h.length<this.passes.length){for(var _=h.length;_<this.passes.length;_++){var x=this.passes[_];x&&(x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy())}this.passes.length=h.length}for(var b=[],M=0;M<this.passes.length;M++)null!==this.passes[M]&&b.push(this.passes[M]);return this.passes=b,this}},g.prototype.destroy=function(){return this.passes.forEach(function(h){h.colorBuffer.destroy(),h.positionBuffer.destroy(),h.dashTexture.destroy()}),this.passes.length=0,this}},11870:function(se,U,r){"use strict";function I(p,_){return function(x){if(Array.isArray(x))return x}(p)||function(x,b){var M=null==x?null:typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(null!=M){var m,D,S,O,P=[],R=!0,F=!1;try{if(S=(M=M.call(x)).next,0===b){if(Object(M)!==M)return;R=!1}else for(;!(R=(m=S.call(M)).done)&&(P.push(m.value),P.length!==b);R=!0);}catch(B){F=!0,D=B}finally{try{if(!R&&null!=M.return&&(O=M.return(),Object(O)!==O))return}finally{if(F)throw D}}return P}}(p,_)||C(p,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(p,_){if(p){if("string"==typeof p)return f(p,_);var x=Object.prototype.toString.call(p).slice(8,-1);return"Object"===x&&p.constructor&&(x=p.constructor.name),"Map"===x||"Set"===x?Array.from(p):"Arguments"===x||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x)?f(p,_):void 0}}function f(p,_){(null==_||_>p.length)&&(_=p.length);for(var x=0,b=new Array(_);x<_;x++)b[x]=p[x];return b}var k=r(25075),T=r(21527),v=r(6475),c=r(88294),i=r(56131),s=r(56068),a=r(71299),o=r(93447),l=r(30120),u=r(62683),d=r(57060),g=r(18863),h=w;function w(p,_){var x=this;if(!(this instanceof w))return new w(p,_);"function"==typeof p?(_||(_={}),_.regl=p):(_=p,p=null),_&&_.length&&(_.positions=_);var b,M=(p=_.regl)._gl,m=[];this.tooManyColors=u,b=p.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),i(this,{regl:p,gl:M,groups:[],markerCache:[null],markerTextures:[null],palette:m,paletteIds:{},paletteTexture:b,maxColors:255,maxSize:100,canvas:M.canvas}),this.update(_);var D={uniforms:{constPointSize:!!_.constPointSize,opacity:p.prop("opacity"),paletteSize:function(P,R){return[x.tooManyColors?0:255,b.height]},pixelRatio:p.context("pixelRatio"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translate:p.prop("translate"),translateFract:p.prop("translateFract"),markerTexture:p.prop("markerTexture"),paletteTexture:b},attributes:{x:function(P,R){return R.xAttr||{buffer:R.positionBuffer,stride:8,offset:0}},y:function(P,R){return R.yAttr||{buffer:R.positionBuffer,stride:8,offset:4}},xFract:function(P,R){return R.xAttr?{constant:[0,0]}:{buffer:R.positionFractBuffer,stride:8,offset:0}},yFract:function(P,R){return R.yAttr?{constant:[0,0]}:{buffer:R.positionFractBuffer,stride:8,offset:4}},size:function(P,R){return R.size.length?{buffer:R.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*R.size/x.maxSize)]}},borderSize:function(P,R){return R.borderSize.length?{buffer:R.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*R.borderSize/x.maxSize)]}},colorId:function(P,R){return R.color.length?{buffer:R.colorBuffer,stride:x.tooManyColors?8:4,offset:0}:{constant:x.tooManyColors?m.slice(4*R.color,4*R.color+4):[R.color]}},borderColorId:function(P,R){return R.borderColor.length?{buffer:R.colorBuffer,stride:x.tooManyColors?8:4,offset:x.tooManyColors?4:2}:{constant:x.tooManyColors?m.slice(4*R.borderColor,4*R.borderColor+4):[R.borderColor]}},isActive:function(P,R){return!0===R.activation?{constant:[1]}:R.activation?R.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:p.prop("elements"),count:p.prop("count"),offset:p.prop("offset"),primitive:"points"},S=i({},D);S.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),S.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=p(S);var O=i({},D);O.frag=s(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),O.vert=s(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),u&&(O.frag=O.frag.replace("smoothstep","smoothStep"),S.frag=S.frag.replace("smoothstep","smoothStep")),this.drawCircle=p(O)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var p=this,_=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];var M=this.groups;if(1===x.length&&Array.isArray(x[0])&&(null===x[0][0]||Array.isArray(x[0][0]))&&(x=x[0]),this.regl._refresh(),x.length)for(var m=0;m<x.length;m++)this.drawItem(m,x[m]);else M.forEach(function(D,S){p.drawItem(S)});return this},w.prototype.drawItem=function(p,_){var x,b=this.groups,M=b[p];if("number"==typeof _&&(p=_,M=b[_],_=null),M&&M.count&&M.opacity){M.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,M,_));for(var m=[],D=1;D<M.activation.length;D++)M.activation[D]&&(!0===M.activation[D]||M.activation[D].data.length)&&m.push.apply(m,function(S){if(Array.isArray(S))return f(S)}(x=this.getMarkerDrawOptions(D,M,_))||function(S){if(typeof Symbol<"u"&&null!=S[Symbol.iterator]||null!=S["@@iterator"])return Array.from(S)}(x)||C(x)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());m.length&&this.drawMarker(m)}},w.prototype.getMarkerDrawOptions=function(p,_,x){var b=_.range,M=_.tree,m=_.viewport,D=_.activation,S=_.selectionBuffer,O=_.count;if(!M)return x?[i({},_,{markerTexture:this.markerTextures[p],activation:D[p],count:x.length,elements:x,offset:0})]:[i({},_,{markerTexture:this.markerTextures[p],activation:D[p],offset:0})];var P=[],R=M.range(b,{lod:!0,px:[(b[2]-b[0])/m.width,(b[3]-b[1])/m.height]});if(x){for(var F=D[p].data,B=new Uint8Array(O),J=0;J<x.length;J++){var z=x[J];B[z]=F?F[z]:1}S.subdata(B)}for(var $=R.length;$--;){var G=I(R[$],2),H=G[0];P.push(i({},_,{markerTexture:this.markerTextures[p],activation:x?S:D[p],offset:H,count:G[1]-H}))}return P},w.prototype.update=function(){for(var p=this,_=arguments.length,x=new Array(_),b=0;b<_;b++)x[b]=arguments[b];if(x.length){1===x.length&&Array.isArray(x[0])&&(x=x[0]);var M=this.groups,m=this.gl,D=this.regl,S=this.maxSize,O=this.maxColors,P=this.palette;this.groups=M=x.map(function(R,F){var B=M[F];if(void 0===R)return B;null===R?R={positions:null}:"function"==typeof R?R={ondraw:R}:"number"==typeof R[0]&&(R={positions:R}),null===(R=a(R,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(R.positions=[]),null!=R.tooManyColors&&(p.tooManyColors=R.tooManyColors),B||(M[F]=B={id:F,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},R=i({},w.defaults,R)),R.positions&&!("marker"in R)&&(R.marker=B.marker,delete B.marker),R.marker&&!("positions"in R)&&(R.positions=B.positions,delete B.positions);var J=0,z=0;if(o(B,R,[{snap:!0,size:function(ke,Te){return null==ke&&(ke=w.defaults.size),J+=ke&&ke.length?1:0,ke},borderSize:function(ke,Te){return null==ke&&(ke=w.defaults.borderSize),J+=ke&&ke.length?1:0,ke},opacity:parseFloat,color:function(ke,Te){return null==ke&&(ke=w.defaults.color),ke=p.updateColor(ke),z++,ke},borderColor:function(ke,Te){return null==ke&&(ke=w.defaults.borderColor),ke=p.updateColor(ke),z++,ke},bounds:function(ke,Te,we){return"range"in we||(we.range=null),ke},positions:function(ke,Te,we){var je=Te.snap,Ce=Te.positionBuffer,Ie=Te.positionFractBuffer,ge=Te.selectionBuffer;if(ke.x||ke.y)return Te.xAttr=ke.x.length?{buffer:D.buffer(ke.x),offset:0,stride:4,count:ke.x.length}:{buffer:ke.x.buffer,offset:4*ke.x.offset||0,stride:4*(ke.x.stride||1),count:ke.x.count},Te.yAttr=ke.y.length?{buffer:D.buffer(ke.y),offset:0,stride:4,count:ke.y.length}:{buffer:ke.y.buffer,offset:4*ke.y.offset||0,stride:4*(ke.y.stride||1),count:ke.y.count},Te.count=Math.max(Te.xAttr.count,Te.yAttr.count),ke;ke=l(ke,"float64");var me=Te.count=Math.floor(ke.length/2),ce=Te.bounds=me?T(ke,2):null;if(we.range||Te.range||(delete Te.range,we.range=ce),we.marker||Te.marker||(delete Te.marker,we.marker=null),je&&(!0===je||me>je)?Te.tree=c(ke,{bounds:ce}):je&&je.length&&(Te.tree=je),Te.tree){var Ae={primitive:"points",usage:"static",data:Te.tree,type:"uint32"};Te.elements?Te.elements(Ae):Te.elements=D.elements(Ae)}var Ne=d.float32(ke);return Ce({data:Ne,usage:"dynamic"}),Ie({data:d.fract32(ke,Ne),usage:"dynamic"}),ge({data:new Uint8Array(me),type:"uint8",usage:"stream"}),ke}},{marker:function(ke,Te,we){var je=Te.activation;if(je.forEach(function(Ne){return Ne&&Ne.destroy&&Ne.destroy()}),je.length=0,ke&&"number"!=typeof ke[0]){for(var Ce=[],Ie=0,ge=Math.min(ke.length,Te.count);Ie<ge;Ie++){var me=p.addMarker(ke[Ie]);Ce[me]||(Ce[me]=new Uint8Array(Te.count)),Ce[me][Ie]=1}for(var ce=0;ce<Ce.length;ce++)if(Ce[ce]){var Ae={data:Ce[ce],type:"uint8",usage:"static"};je[ce]?je[ce](Ae):je[ce]=D.buffer(Ae),je[ce].data=Ce[ce]}}else je[p.addMarker(ke)]=!0;return ke},range:function(ke,Te,we){var je=Te.bounds;if(je)return ke||(ke=je),Te.scale=[1/(ke[2]-ke[0]),1/(ke[3]-ke[1])],Te.translate=[-ke[0],-ke[1]],Te.scaleFract=d.fract(Te.scale),Te.translateFract=d.fract(Te.translate),ke},viewport:function(ke){return g(ke||[m.drawingBufferWidth,m.drawingBufferHeight])}}]),J){var G=B.count,H=B.size,X=B.borderSize,K=B.sizeBuffer,ue=new Uint8Array(2*G);if(H.length||X.length)for(var ae=0;ae<G;ae++)ue[2*ae]=Math.round(255*(null==H[ae]?H:H[ae])/S),ue[2*ae+1]=Math.round(255*(null==X[ae]?X:X[ae])/S);K({data:ue,usage:"dynamic"})}if(z){var ne,ie=B.count,le=B.color,fe=B.borderColor,he=B.colorBuffer;if(p.tooManyColors){if(le.length||fe.length){ne=new Uint8Array(8*ie);for(var pe=0;pe<ie;pe++){var xe=le[pe];ne[8*pe]=P[4*xe],ne[8*pe+1]=P[4*xe+1],ne[8*pe+2]=P[4*xe+2],ne[8*pe+3]=P[4*xe+3];var Ee=fe[pe];ne[8*pe+4]=P[4*Ee],ne[8*pe+5]=P[4*Ee+1],ne[8*pe+6]=P[4*Ee+2],ne[8*pe+7]=P[4*Ee+3]}}}else if(le.length||fe.length){ne=new Uint8Array(4*ie+2);for(var Re=0;Re<ie;Re++)null!=le[Re]&&(ne[4*Re]=le[Re]%O,ne[4*Re+1]=Math.floor(le[Re]/O)),null!=fe[Re]&&(ne[4*Re+2]=fe[Re]%O,ne[4*Re+3]=Math.floor(fe[Re]/O))}he({data:ne||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return B})}},w.prototype.addMarker=function(p){var _,x=this.markerTextures,b=this.regl,M=this.markerCache,m=null==p?0:M.indexOf(p);if(m>=0)return m;if(p instanceof Uint8Array||p instanceof Uint8ClampedArray)_=p;else{_=new Uint8Array(p.length);for(var D=0,S=p.length;D<S;D++)_[D]=255*p[D]}var O=Math.floor(Math.sqrt(_.length));return m=x.length,M.push(p),x.push(b.texture({channels:1,data:_,radius:O,mag:"linear",min:"linear"})),m},w.prototype.updateColor=function(p){var _=this.paletteIds,x=this.palette,b=this.maxColors;Array.isArray(p)||(p=[p]);var M=[];if("number"==typeof p[0]){var m=[];if(Array.isArray(p))for(var D=0;D<p.length;D+=4)m.push(p.slice(D,D+4));else for(var S=0;S<p.length;S+=4)m.push(p.subarray(S,S+4));p=m}for(var O=0;O<p.length;O++){var P=p[O];P=k(P,"uint8");var R=v(P,!1);if(null==_[R]){var F=x.length;_[R]=Math.floor(F/4),x[F]=P[0],x[F+1]=P[1],x[F+2]=P[2],x[F+3]=P[3]}M[O]=_[R]}return!this.tooManyColors&&x.length>4*b&&(this.tooManyColors=!0),this.updatePalette(x),1===M.length?M[0]:M},w.prototype.updatePalette=function(p){if(!this.tooManyColors){var _=this.maxColors,x=this.paletteTexture,b=Math.ceil(.25*p.length/_);if(b>1)for(var M=.25*(p=p.slice()).length%_;M<b*_;M++)p.push(0,0,0,0);x.height<b&&x.resize(_,b),x.subimage({width:Math.min(.25*p.length,_),height:b,data:p},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(p){p.sizeBuffer.destroy(),p.positionBuffer.destroy(),p.positionFractBuffer.destroy(),p.colorBuffer.destroy(),p.activation.forEach(function(_){return _&&_.destroy&&_.destroy()}),p.selectionBuffer.destroy(),p.elements&&p.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(p){return p&&p.destroy&&p.destroy()}),this};var y=r(56131);se.exports=function(p,_){var x=new h(p,_),b=x.render.bind(x);return y(b,{render:b,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette}),b}},60487:function(se,U,r){"use strict";var I=r(11870),C=r(71299),f=r(21527),k=r(5877),T=r(57471),v=r(18863),c=r(30120);function i(l,u){if(!(this instanceof i))return new i(l,u);this.traces=[],this.passes={},this.regl=l,this.scatter=I(l),this.canvas=this.scatter.canvas}function s(l,u,d){return(null!=l.id?l.id:l)<<16|(255&u)<<8|255&d}function a(l,u,d){var g,h,w,y,p=l[u],_=l[d];return p.length>2?(g=p[1],h=p[3]):p.length?(g=p[0],h=p[1]):(g=p.y,h=p.y+p.height),_.length>2?(w=_[0],y=_[2]):_.length?(w=_[0],y=_[1]):(w=_.x,y=_.x+_.width),[w,g,y,h]}function o(l){if("number"==typeof l)return[l,l,l,l];if(2===l.length)return[l[0],l[1],l[0],l[1]];var u=v(l);return[u.x,u.y,u.x+u.width,u.y+u.height]}se.exports=i,i.prototype.render=function(){for(var l,u=this,d=[],g=arguments.length;g--;)d[g]=arguments[g];return d.length&&(l=this).update.apply(l,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=k(function(){u.draw(),u.dirty=!0,u.planned=null})):(this.draw(),this.dirty=!0,k(function(){u.dirty=!1})),this)},i.prototype.update=function(){for(var l,u=[],d=arguments.length;d--;)u[d]=arguments[d];if(u.length){for(var g=0;g<u.length;g++)this.updateItem(g,u[g]);this.traces=this.traces.filter(Boolean);for(var h=[],w=0,y=0;y<this.traces.length;y++){for(var p=this.traces[y],_=this.traces[y].passes,x=0;x<_.length;x++)h.push(this.passes[_[x]]);p.passOffset=w,w+=p.passes.length}return(l=this.scatter).update.apply(l,h),this}},i.prototype.updateItem=function(l,u){var d=this.regl;if(null===u)return this.traces[l]=null,this;if(!u)return this;var g,h=C(u,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),w=this.traces[l]||(this.traces[l]={id:l,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:v([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=h.color&&(w.color=h.color),null!=h.size&&(w.size=h.size),null!=h.marker&&(w.marker=h.marker),null!=h.borderColor&&(w.borderColor=h.borderColor),null!=h.borderSize&&(w.borderSize=h.borderSize),null!=h.opacity&&(w.opacity=h.opacity),h.viewport&&(w.viewport=v(h.viewport)),null!=h.diagonal&&(w.diagonal=h.diagonal),null!=h.upper&&(w.upper=h.upper),null!=h.lower&&(w.lower=h.lower),h.data){w.buffer(c(h.data)),w.columns=h.data.length,w.count=h.data[0].length,w.bounds=[];for(var y=0;y<w.columns;y++)w.bounds[y]=f(h.data[y],1)}h.range&&(w.range=h.range,g=w.range&&"number"!=typeof w.range[0]),h.domain&&(w.domain=h.domain);var p=!1;null!=h.padding&&(Array.isArray(h.padding)&&h.padding.length===w.columns&&"number"==typeof h.padding[h.padding.length-1]?(w.padding=h.padding.map(o),p=!0):w.padding=o(h.padding));var _=w.columns,x=w.count,b=w.viewport.width,M=w.viewport.height,m=w.viewport.x,D=w.viewport.y,S=b/_,O=M/_;w.passes=[];for(var P=0;P<_;P++)for(var R=0;R<_;R++)if((w.diagonal||R!==P)&&(w.upper||!(P>R))&&(w.lower||!(P<R))){var F=s(w.id,P,R),B=this.passes[F]||(this.passes[F]={});if(h.data&&(B.positions=h.transpose?{x:{buffer:w.buffer,offset:R,count:x,stride:_},y:{buffer:w.buffer,offset:P,count:x,stride:_}}:{x:{buffer:w.buffer,offset:R*x,count:x},y:{buffer:w.buffer,offset:P*x,count:x}},B.bounds=a(w.bounds,P,R)),h.domain||h.viewport||h.data){var J=p?a(w.padding,P,R):w.padding;if(w.domain){var z=a(w.domain,P,R);B.viewport=[m+z[0]*b+J[0],D+z[1]*M+J[1],m+z[2]*b-J[2],D+z[3]*M-J[3]]}else B.viewport=[m+R*S+S*J[0],D+P*O+O*J[1],m+(R+1)*S-S*J[2],D+(P+1)*O-O*J[3]]}h.color&&(B.color=w.color),h.size&&(B.size=w.size),h.marker&&(B.marker=w.marker),h.borderSize&&(B.borderSize=w.borderSize),h.borderColor&&(B.borderColor=w.borderColor),h.opacity&&(B.opacity=w.opacity),h.range&&(B.range=g?a(w.range,P,R):w.range||B.bounds),w.passes.push(F)}return this},i.prototype.draw=function(){for(var l,u=[],d=arguments.length;d--;)u[d]=arguments[d];if(u.length){for(var g=[],h=0;h<u.length;h++)if("number"==typeof u[h]){var w=this.traces[u[h]],p=w.passOffset;g.push.apply(g,T(p,p+w.passes.length))}else if(u[h].length){var _=u[h],x=this.traces[h],b=x.passes,M=x.passOffset;b=b.map(function(m,D){g[M+D]=_})}(l=this.scatter).draw.apply(l,g)}else this.scatter.draw();return this},i.prototype.destroy=function(){return this.traces.forEach(function(l){l.buffer&&l.buffer.destroy&&l.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function(se){se.exports=function(){function U(Je,ot){this.id=fe++,this.type=Je,this.data=ot}function r(Je){if(0===Je.length)return[];var ot=Je.charAt(0),pt=Je.charAt(Je.length-1);if(1<Je.length&&ot===pt&&('"'===ot||"'"===ot))return['"'+Je.substr(1,Je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ot=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Je))return r(Je.substr(0,ot.index)).concat(r(ot[1])).concat(r(Je.substr(ot.index+ot[0].length)));if(1===(ot=Je.split(".")).length)return['"'+Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Je=[],pt=0;pt<ot.length;++pt)Je=Je.concat(r(ot[pt]));return Je}function I(Je){return"["+r(Je).join("][")+"]"}function C(Je){return"string"==typeof Je?Je.split():Je}function f(Je){return"string"==typeof Je?document.querySelector(Je):Je}function T(Je,ot){for(var pt=Array(Je),xt=0;xt<Je;++xt)pt[xt]=ot(xt);return pt}function v(Je){var ot,pt;return ot=(65535<Je)<<4,ot|=pt=(255<(Je>>>=ot))<<3,(ot|=pt=(15<(Je>>>=pt))<<2)|(pt=(3<(Je>>>=pt))<<1)|Je>>>pt>>1}function c(){function Je(xt){e:{for(var He=16;268435456>=He;He*=16)if(xt<=He){xt=He;break e}xt=0}return 0<(He=pt[v(xt)>>2]).length?He.pop():new ArrayBuffer(xt)}function ot(xt){pt[v(xt.byteLength)>>2].push(xt)}var pt=T(8,function(){return[]});return{alloc:Je,free:ot,allocType:function(xt,He){var Ge=null;switch(xt){case 5120:Ge=new Int8Array(Je(He),0,He);break;case 5121:Ge=new Uint8Array(Je(He),0,He);break;case 5122:Ge=new Int16Array(Je(2*He),0,He);break;case 5123:Ge=new Uint16Array(Je(2*He),0,He);break;case 5124:Ge=new Int32Array(Je(4*He),0,He);break;case 5125:Ge=new Uint32Array(Je(4*He),0,He);break;case 5126:Ge=new Float32Array(Je(4*He),0,He);break;default:return null}return Ge.length!==He?Ge.subarray(0,He):Ge},freeType:function(xt){ot(xt.buffer)}}}function i(Je){return!!Je&&"object"==typeof Je&&Array.isArray(Je.shape)&&Array.isArray(Je.stride)&&"number"==typeof Je.offset&&Je.shape.length===Je.stride.length&&(Array.isArray(Je.data)||ke(Je.data))}function s(Je,ot,pt,xt,He,Ge){for(var dt=0;dt<ot;++dt)for(var ht=Je[dt],kt=0;kt<pt;++kt)for(var St=ht[kt],Et=0;Et<xt;++Et)He[Ge++]=St[Et]}function a(Je,ot,pt,xt,He){for(var Ge=1,dt=pt+1;dt<ot.length;++dt)Ge*=ot[dt];var ht=ot[pt];if(ot.length-pt==4){var kt=ot[pt+1],St=ot[pt+2];for(ot=ot[pt+3],dt=0;dt<ht;++dt)s(Je[dt],kt,St,ot,xt,He),He+=Ge}else for(dt=0;dt<ht;++dt)a(Je[dt],ot,pt+1,xt,He),He+=Ge}function o(Je){return 0|je[Object.prototype.toString.call(Je)]}function l(Je,ot){for(var pt=0;pt<ot.length;++pt)Je[pt]=ot[pt]}function u(Je,ot,pt,xt,He,Ge,dt){for(var ht=0,kt=0;kt<pt;++kt)for(var St=0;St<xt;++St)Je[ht++]=ot[He*kt+Ge*St+dt]}function h(Je){for(var ot=Ee.allocType(5123,Je.length),pt=0;pt<Je.length;++pt)if(isNaN(Je[pt]))ot[pt]=65535;else if(Je[pt]===1/0)ot[pt]=31744;else if(Je[pt]===-1/0)ot[pt]=64512;else{Ne[0]=Je[pt];var xt=(Ge=De[0])>>>31<<15,He=(Ge<<1>>>24)-127,Ge=Ge>>13&1023;ot[pt]=-24>He?xt:-14>He?xt+(Ge+1024>>-14-He):15<He?xt+31744:xt+(He+15<<10)+Ge}return ot}function w(Je){return Array.isArray(Je)||ke(Je)}function y(Je){return"[object "+Je+"]"}function p(Je){return Array.isArray(Je)&&(0===Je.length||"number"==typeof Je[0])}function _(Je){return!(!Array.isArray(Je)||0===Je.length||!w(Je[0]))}function x(Je){return Object.prototype.toString.call(Je)}function b(Je){if(!Je)return!1;var ot=x(Je);return 0<=nt.indexOf(ot)||p(Je)||_(Je)||i(Je)}function M(Je,ot){36193===Je.type?(Je.data=h(ot),Ee.freeType(ot)):Je.data=ot}function m(Je,ot,pt,xt,He,Ge){if(Je=void 0!==yt[Je]?yt[Je]:be[Je]*ct[ot],Ge&&(Je*=6),He){for(xt=0;1<=pt;)xt+=Je*pt*pt,pt/=2;return xt}return Je*pt*xt}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(Je,ot){return Je>>>ot|Je<<32-ot}function J(Je,ot){var pt=(65535&Je)+(65535&ot);return(Je>>16)+(ot>>16)+(pt>>16)<<16|65535&pt}function z(Je){return Array.prototype.slice.call(Je)}function $(Je){return z(Je).join("")}function H(Je){return Array.isArray(Je)||ke(Je)||i(Je)}function X(Je){return Je.sort(function(ot,pt){return"viewport"===ot?-1:"viewport"===pt?1:ot<pt?-1:1})}function K(Je,ot,pt,xt){this.thisDep=Je,this.contextDep=ot,this.propDep=pt,this.append=xt}function ue(Je){return Je&&!(Je.thisDep||Je.contextDep||Je.propDep)}function ae(Je){return new K(!1,!1,!1,Je)}function ne(Je,ot){var pt=Je.type;if(0===pt)return new K(!0,1<=(pt=Je.data.length),2<=pt,ot);if(4===pt)return new K((pt=Je.data).thisDep,pt.contextDep,pt.propDep,ot);if(5===pt)return new K(!1,!1,!1,ot);if(6===pt){for(var xt=pt=!1,He=!1,Ge=0;Ge<Je.data.length;++Ge){var dt=Je.data[Ge];1===dt.type?He=!0:2===dt.type?xt=!0:3===dt.type?pt=!0:0===dt.type?(pt=!0,1<=(dt=dt.data)&&(xt=!0),2<=dt&&(He=!0)):4===dt.type&&(pt=pt||dt.data.thisDep,xt=xt||dt.data.contextDep,He=He||dt.data.propDep)}return new K(pt,xt,He,ot)}return new K(3===pt,2===pt,1===pt,ot)}function Q(Je,ot,pt,xt,He,Ge,dt,ht,kt,St,Et,wt,Nt,_t,Mt,Pt){function Zt(zt){return zt.replace(".","_")}function $t(zt,sn,hn){var Dn=Zt(zt);cr.push(zt),Vn[Dn]=Ln[Dn]=!!hn,xn[Dn]=sn}function Xt(zt,sn,hn){var Dn=Zt(zt);cr.push(zt),Array.isArray(hn)?(Ln[Dn]=hn.slice(),Vn[Dn]=hn.slice()):Ln[Dn]=Vn[Dn]=hn,Qn[Dn]=sn}function dn(){var zt=function G(Je){function ot(){var Et=[],wt=[];return le(function(){Et.push.apply(Et,z(arguments))},{def:function(){var Nt="v"+He++;return wt.push(Nt),0<arguments.length&&(Et.push(Nt,"="),Et.push.apply(Et,z(arguments)),Et.push(";")),Nt},toString:function(){return $([0<wt.length?"var "+wt.join(",")+";":"",$(Et)])}})}function pt(){function Et(Pt,Zt){Nt(Pt,Zt,"=",wt.def(Pt,Zt),";")}var wt=ot(),Nt=ot(),_t=wt.toString,Mt=Nt.toString;return le(function(){wt.apply(wt,z(arguments))},{def:wt.def,entry:wt,exit:Nt,save:Et,set:function(Pt,Zt,$t){Et(Pt,Zt),wt(Pt,Zt,"=",$t,";")},toString:function(){return _t()+Mt()}})}var xt=Je&&Je.cache,He=0,Ge=[],dt=[],ht=[],kt=ot(),St={};return{global:kt,link:function(Et,wt){var Nt=wt&&wt.stable;if(!Nt)for(var _t=0;_t<dt.length;++_t)if(dt[_t]===Et&&!ht[_t])return Ge[_t];return _t="g"+He++,Ge.push(_t),dt.push(Et),ht.push(Nt),_t},block:ot,proc:function(Et,wt){function Nt(){var Zt="a"+_t.length;return _t.push(Zt),Zt}var _t=[];wt=wt||0;for(var Mt=0;Mt<wt;++Mt)Nt();var Pt=(Mt=pt()).toString;return St[Et]=le(Mt,{arg:Nt,toString:function(){return $(["function(",_t.join(),"){",Pt(),"}"])}})},scope:pt,cond:function(){var Et=$(arguments),wt=pt(),Nt=pt(),_t=wt.toString,Mt=Nt.toString;return le(wt,{then:function(){return wt.apply(wt,z(arguments)),this},else:function(){return Nt.apply(Nt,z(arguments)),this},toString:function(){var Pt=Mt();return Pt&&(Pt="else{"+Pt+"}"),$(["if(",Et,"){",_t(),"}",Pt])}})},compile:function(){var Et=['"use strict";',kt,"return {"];Object.keys(St).forEach(function(_t){Et.push('"',_t,'":',St[_t].toString(),",")}),Et.push("}");var wt,Nt=$(Et).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return xt&&(wt=function(_t){for(var Mt,Pt="",Zt=0;Zt<_t.length;Zt++)Mt=_t.charCodeAt(Zt),Pt+="0123456789abcdef".charAt(Mt>>>4&15)+"0123456789abcdef".charAt(15&Mt);return Pt}(function(_t){for(var Mt=Array(_t.length>>2),Pt=0;Pt<Mt.length;Pt++)Mt[Pt]=0;for(Pt=0;Pt<8*_t.length;Pt+=8)Mt[Pt>>5]|=(255&_t.charCodeAt(Pt/8))<<24-Pt%32;var Zt,$t,Xt,dn,on,cn,tn,Cn,Fn,En,rn,yn=8*_t.length;for(_t=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Pt=Array(64),Mt[yn>>5]|=128<<24-yn%32,Mt[15+(yn+64>>9<<4)]=yn,Cn=0;Cn<Mt.length;Cn+=16){for(yn=_t[0],Zt=_t[1],$t=_t[2],Xt=_t[3],dn=_t[4],on=_t[5],cn=_t[6],tn=_t[7],Fn=0;64>Fn;Fn++){var pn;16>Fn?Pt[Fn]=Mt[Fn+Cn]:(En=Fn,rn=J(rn=B(rn=Pt[Fn-2],17)^B(rn,19)^rn>>>10,Pt[Fn-7]),pn=B(pn=Pt[Fn-15],7)^B(pn,18)^pn>>>3,Pt[En]=J(J(rn,pn),Pt[Fn-16])),En=J(J(J(J(tn,En=B(En=dn,6)^B(En,11)^B(En,25)),dn&on^~dn&cn),mt[Fn]),Pt[Fn]),rn=J(tn=B(tn=yn,2)^B(tn,13)^B(tn,22),yn&Zt^yn&$t^Zt&$t),tn=cn,cn=on,on=dn,dn=J(Xt,En),Xt=$t,$t=Zt,Zt=yn,yn=J(En,rn)}_t[0]=J(yn,_t[0]),_t[1]=J(Zt,_t[1]),_t[2]=J($t,_t[2]),_t[3]=J(Xt,_t[3]),_t[4]=J(dn,_t[4]),_t[5]=J(on,_t[5]),_t[6]=J(cn,_t[6]),_t[7]=J(tn,_t[7])}for(Mt="",Pt=0;Pt<32*_t.length;Pt+=8)Mt+=String.fromCharCode(_t[Pt>>5]>>>24-Pt%32&255);return Mt}(function(_t){for(var Mt,Pt,Zt="",$t=-1;++$t<_t.length;)Mt=_t.charCodeAt($t),Pt=$t+1<_t.length?_t.charCodeAt($t+1):0,55296<=Mt&&56319>=Mt&&56320<=Pt&&57343>=Pt&&(Mt=65536+((1023&Mt)<<10)+(1023&Pt),$t++),127>=Mt?Zt+=String.fromCharCode(Mt):2047>=Mt?Zt+=String.fromCharCode(192|Mt>>>6&31,128|63&Mt):65535>=Mt?Zt+=String.fromCharCode(224|Mt>>>12&15,128|Mt>>>6&63,128|63&Mt):2097151>=Mt&&(Zt+=String.fromCharCode(240|Mt>>>18&7,128|Mt>>>12&63,128|Mt>>>6&63,128|63&Mt));return Zt}(Nt))),xt[wt])?xt[wt].apply(null,dt):(Nt=Function.apply(null,Ge.concat(Nt)),xt&&(xt[wt]=Nt),Nt.apply(null,dt))}}}({cache:Mt}),sn=zt.link,hn=zt.global;zt.id=zn++,zt.batchId="0";var Dn=sn(er),Rn=zt.shared={props:"a0"};Object.keys(er).forEach(function(Tn){Rn[Tn]=hn.def(Dn,".",Tn)});var Hn=zt.next={},Mn=zt.current={};Object.keys(Qn).forEach(function(Tn){Array.isArray(Ln[Tn])&&(Hn[Tn]=hn.def(Rn.next,".",Tn),Mn[Tn]=hn.def(Rn.current,".",Tn))});var un=zt.constants={};Object.keys(Qt).forEach(function(Tn){un[Tn]=hn.def(JSON.stringify(Qt[Tn]))}),zt.invoke=function(Tn,An){switch(An.type){case 0:var Gn=["this",Rn.context,Rn.props,zt.batchId];return Tn.def(sn(An.data),".call(",Gn.slice(0,Math.max(An.data.length+1,4)),")");case 1:return Tn.def(Rn.props,An.data);case 2:return Tn.def(Rn.context,An.data);case 3:return Tn.def("this",An.data);case 4:return An.data.append(zt,Tn),An.data.ref;case 5:return An.data.toString();case 6:return An.data.map(function(Zn){return zt.invoke(Tn,Zn)})}},zt.attribCache={};var fn={};return zt.scopeAttrib=function(Tn){if((Tn=ot.id(Tn))in fn)return fn[Tn];var An=St.scope[Tn];return An||(An=St.scope[Tn]=new mr),fn[Tn]=sn(An)},zt}function Fn(zt,sn,hn,Dn,Rn){function Hn(br){var or=un[br];or&&(Tn[br]=or)}var br,dr,kr,Sr,Mn=function(br,or){if("string"==typeof(dr=br.static).frag&&"string"==typeof dr.vert){if(0<Object.keys(or.dynamic).length)return null;var dr=or.static,kr=Object.keys(dr);if(0<kr.length&&"number"==typeof dr[kr[0]]){for(var Sr=[],Pr=0;Pr<kr.length;++Pr)Sr.push([0|dr[kr[Pr]],kr[Pr]]);return Sr}}return null}(zt,sn),un=function(br,or,dr){function kr(Zr){if(Zr in Sr){var ar=Sr[Zr];Zr=!0;var Nr,ii,Gi=0|ar.x,vo=0|ar.y;return"width"in ar?Nr=0|ar.width:Zr=!1,"height"in ar?ii=0|ar.height:Zr=!1,new K(!Zr&&or&&or.thisDep,!Zr&&or&&or.contextDep,!Zr&&or&&or.propDep,function(lo,Qi){var Co=lo.shared.context,Rs=Nr;"width"in ar||(Rs=Qi.def(Co,".","framebufferWidth","-",Gi));var Qr=ii;return"height"in ar||(Qr=Qi.def(Co,".","framebufferHeight","-",vo)),[Gi,vo,Rs,Qr]})}if(Zr in Pr){var so=Pr[Zr];return Zr=ne(so,function(lo,Qi){var Co=lo.invoke(Qi,so),Rs=lo.shared.context,Qr=Qi.def(Co,".x|0"),_s=Qi.def(Co,".y|0");return[Qr,_s,Qi.def('"width" in ',Co,"?",Co,".width|0:","(",Rs,".","framebufferWidth","-",Qr,")"),Co=Qi.def('"height" in ',Co,"?",Co,".height|0:","(",Rs,".","framebufferHeight","-",_s,")")]}),or&&(Zr.thisDep=Zr.thisDep||or.thisDep,Zr.contextDep=Zr.contextDep||or.contextDep,Zr.propDep=Zr.propDep||or.propDep),Zr}return or?new K(or.thisDep,or.contextDep,or.propDep,function(lo,Qi){var Co=lo.shared.context;return[0,0,Qi.def(Co,".","framebufferWidth"),Qi.def(Co,".","framebufferHeight")]}):null}var Sr=br.static,Pr=br.dynamic;if(br=kr("viewport")){var rr=br;br=new K(br.thisDep,br.contextDep,br.propDep,function(Zr,ar){var Nr=rr.append(Zr,ar),ii=Zr.shared.context;return ar.set(ii,".viewportWidth",Nr[2]),ar.set(ii,".viewportHeight",Nr[3]),Nr})}return{viewport:br,scissor_box:kr("scissor.box")}}(zt,Gn=function on(zt,sn){var hn=zt.static,Dn=zt.dynamic;if("framebuffer"in hn){var Rn=hn.framebuffer;return Rn?(Rn=ht.getFramebuffer(Rn),ae(function(Mn,un){var fn=Mn.link(Rn),Tn=Mn.shared;return un.set(Tn.framebuffer,".next",fn),un.set(Tn=Tn.context,".framebufferWidth",fn+".width"),un.set(Tn,".framebufferHeight",fn+".height"),fn})):ae(function(Mn,un){var fn=Mn.shared;return un.set(fn.framebuffer,".next","null"),un.set(fn=fn.context,".framebufferWidth",fn+".drawingBufferWidth"),un.set(fn,".framebufferHeight",fn+".drawingBufferHeight"),"null"})}if("framebuffer"in Dn){var Hn=Dn.framebuffer;return ne(Hn,function(Mn,un){var fn=Mn.invoke(un,Hn),Tn=Mn.shared,An=Tn.framebuffer;return fn=un.def(An,".getFramebuffer(",fn,")"),un.set(An,".next",fn),un.set(Tn=Tn.context,".framebufferWidth",fn+"?"+fn+".width:"+Tn+".drawingBufferWidth"),un.set(Tn,".framebufferHeight",fn+"?"+fn+".height:"+Tn+".drawingBufferHeight"),fn})}return null}(zt)),fn=function tn(zt,sn){function hn(nr,br){if(nr in Dn){var or=0|Dn[nr];return br?Hn.offset=or:Hn.instances=or,ae(function(kr,Sr){return br&&(kr.OFFSET=or),or})}if(nr in Rn){var dr=Rn[nr];return ne(dr,function(kr,Sr){var Pr=kr.invoke(Sr,dr);return br&&(kr.OFFSET=Pr),Pr})}if(br){if(fn)return ae(function(kr,Sr){return kr.OFFSET=0});if(Mn)return new K(un.thisDep,un.contextDep,un.propDep,function(kr,Sr){return Sr.def(kr.shared.vao+".currentVAO?"+kr.shared.vao+".currentVAO.offset:0")})}else if(Mn)return new K(un.thisDep,un.contextDep,un.propDep,function(kr,Sr){return Sr.def(kr.shared.vao+".currentVAO?"+kr.shared.vao+".currentVAO.instances:-1")});return null}var Dn=zt.static,Rn=zt.dynamic,Hn={},Mn=!1,un=function(){if("vao"in Dn){var nr=Dn.vao;return null!==nr&&null===St.getVAO(nr)&&(nr=St.createVAO(nr)),Mn=!0,Hn.vao=nr,ae(function(or){var dr=St.getVAO(nr);return dr?or.link(dr):"null"})}if("vao"in Rn){Mn=!0;var br=Rn.vao;return ne(br,function(or,dr){var kr=or.invoke(dr,br);return dr.def(or.shared.vao+".getVAO("+kr+")")})}return null}(),fn=!1,Tn=function(){if("elements"in Dn){var nr=Dn.elements;if(Hn.elements=nr,H(nr)){var br=Hn.elements=Ge.create(nr,!0);nr=Ge.getElements(br),fn=!0}else nr&&(nr=Ge.getElements(nr),fn=!0);return(br=ae(function(dr,kr){if(nr){var Sr=dr.link(nr);return dr.ELEMENTS=Sr}return dr.ELEMENTS=null})).value=nr,br}if("elements"in Rn){fn=!0;var or=Rn.elements;return ne(or,function(dr,kr){var Sr=(Pr=dr.shared).isBufferArgs,Pr=Pr.elements,rr=dr.invoke(kr,or),Zr=kr.def("null");return Sr=kr.def(Sr,"(",rr,")"),rr=dr.cond(Sr).then(Zr,"=",Pr,".createStream(",rr,");").else(Zr,"=",Pr,".getElements(",rr,");"),kr.entry(rr),kr.exit(dr.cond(Sr).then(Pr,".destroyStream(",Zr,");")),dr.ELEMENTS=Zr})}return Mn?new K(un.thisDep,un.contextDep,un.propDep,function(dr,kr){return kr.def(dr.shared.vao+".currentVAO?"+dr.shared.elements+".getElements("+dr.shared.vao+".currentVAO.elements):null")}):null}(),An=hn("offset",!0),Gn=function(){if("primitive"in Dn){var nr=Dn.primitive;return Hn.primitive=nr,ae(function(or,dr){return Ae[nr]})}if("primitive"in Rn){var br=Rn.primitive;return ne(br,function(or,dr){var kr=or.constants.primTypes,Sr=or.invoke(dr,br);return dr.def(kr,"[",Sr,"]")})}return fn?ue(Tn)?ae(Tn.value?function(or,dr){return dr.def(or.ELEMENTS,".primType")}:function(){return 4}):new K(Tn.thisDep,Tn.contextDep,Tn.propDep,function(or,dr){var kr=or.ELEMENTS;return dr.def(kr,"?",kr,".primType:",4)}):Mn?new K(un.thisDep,un.contextDep,un.propDep,function(or,dr){return dr.def(or.shared.vao+".currentVAO?"+or.shared.vao+".currentVAO.primitive:4")}):null}(),Zn=function(){if("count"in Dn){var nr=0|Dn.count;return Hn.count=nr,ae(function(){return nr})}if("count"in Rn){var br=Rn.count;return ne(br,function(or,dr){return or.invoke(dr,br)})}return fn?ue(Tn)?Tn?An?new K(An.thisDep,An.contextDep,An.propDep,function(or,dr){return dr.def(or.ELEMENTS,".vertCount-",or.OFFSET)}):ae(function(or,dr){return dr.def(or.ELEMENTS,".vertCount")}):ae(function(){return-1}):new K(Tn.thisDep||An.thisDep,Tn.contextDep||An.contextDep,Tn.propDep||An.propDep,function(or,dr){var kr=or.ELEMENTS;return or.OFFSET?dr.def(kr,"?",kr,".vertCount-",or.OFFSET,":-1"):dr.def(kr,"?",kr,".vertCount:-1")}):Mn?new K(un.thisDep,un.contextDep,un.propDep,function(or,dr){return dr.def(or.shared.vao,".currentVAO?",or.shared.vao,".currentVAO.count:-1")}):null}(),lr=hn("instances",!1);return{elements:Tn,primitive:Gn,count:Zn,instances:lr,offset:An,vao:un,vaoActive:Mn,elementsActive:fn,static:Hn}}(zt),Tn=(dr=(br=zt).static,kr=br.dynamic,Sr={},cr.forEach(function(Pr){function rr(ar,Nr){if(Pr in dr){var ii=ar(dr[Pr]);Sr[Zr]=ae(function(){return ii})}else if(Pr in kr){var Gi=kr[Pr];Sr[Zr]=ne(Gi,function(vo,so){return Nr(vo,so,vo.invoke(so,Gi))})}}var Zr=Zt(Pr);switch(Pr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return rr(function(ar){return ar},function(ar,Nr,ii){return ii});case"depth.func":return rr(function(ar){return Wt[ar]},function(ar,Nr,ii){return Nr.def(ar.constants.compareFuncs,"[",ii,"]")});case"depth.range":return rr(function(ar){return ar},function(ar,Nr,ii){return[Nr.def("+",ii,"[0]"),Nr=Nr.def("+",ii,"[1]")]});case"blend.func":return rr(function(ar){return[Rt["srcRGB"in ar?ar.srcRGB:ar.src],Rt["dstRGB"in ar?ar.dstRGB:ar.dst],Rt["srcAlpha"in ar?ar.srcAlpha:ar.src],Rt["dstAlpha"in ar?ar.dstAlpha:ar.dst]]},function(ar,Nr,ii){function Gi(Qi,Co){return Nr.def('"',Qi,Co,'" in ',ii,"?",ii,".",Qi,Co,":",ii,".",Qi)}ar=ar.constants.blendFuncs;var vo=Gi("src","RGB"),so=Gi("dst","RGB"),lo=(vo=Nr.def(ar,"[",vo,"]"),Nr.def(ar,"[",Gi("src","Alpha"),"]"));return[vo,so=Nr.def(ar,"[",so,"]"),lo,ar=Nr.def(ar,"[",Gi("dst","Alpha"),"]")]});case"blend.equation":return rr(function(ar){return"string"==typeof ar?[zr[ar],zr[ar]]:"object"==typeof ar?[zr[ar.rgb],zr[ar.alpha]]:void 0},function(ar,Nr,ii){var Gi=ar.constants.blendEquations,vo=Nr.def(),so=Nr.def();return(ar=ar.cond("typeof ",ii,'==="string"')).then(vo,"=",so,"=",Gi,"[",ii,"];"),ar.else(vo,"=",Gi,"[",ii,".rgb];",so,"=",Gi,"[",ii,".alpha];"),Nr(ar),[vo,so]});case"blend.color":return rr(function(ar){return T(4,function(Nr){return+ar[Nr]})},function(ar,Nr,ii){return T(4,function(Gi){return Nr.def("+",ii,"[",Gi,"]")})});case"stencil.mask":return rr(function(ar){return 0|ar},function(ar,Nr,ii){return Nr.def(ii,"|0")});case"stencil.func":return rr(function(ar){return[Wt[ar.cmp||"keep"],ar.ref||0,"mask"in ar?ar.mask:-1]},function(ar,Nr,ii){return[ar=Nr.def('"cmp" in ',ii,"?",ar.constants.compareFuncs,"[",ii,".cmp]",":",7680),Nr.def(ii,".ref|0"),Nr=Nr.def('"mask" in ',ii,"?",ii,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return rr(function(ar){return["stencil.opBack"===Pr?1029:1028,Ht[ar.fail||"keep"],Ht[ar.zfail||"keep"],Ht[ar.zpass||"keep"]]},function(ar,Nr,ii){function Gi(so){return Nr.def('"',so,'" in ',ii,"?",vo,"[",ii,".",so,"]:",7680)}var vo=ar.constants.stencilOps;return["stencil.opBack"===Pr?1029:1028,Gi("fail"),Gi("zfail"),Gi("zpass")]});case"polygonOffset.offset":return rr(function(ar){return[0|ar.factor,0|ar.units]},function(ar,Nr,ii){return[Nr.def(ii,".factor|0"),Nr=Nr.def(ii,".units|0")]});case"cull.face":return rr(function(ar){var Nr=0;return"front"===ar?Nr=1028:"back"===ar&&(Nr=1029),Nr},function(ar,Nr,ii){return Nr.def(ii,'==="front"?',1028,":",1029)});case"frontFace":return rr(function(ar){return it[ar]},function(ar,Nr,ii){return Nr.def(ii+'==="cw"?2304:2305')});case"colorMask":return rr(function(ar){return ar.map(function(Nr){return!!Nr})},function(ar,Nr,ii){return T(4,function(Gi){return"!!"+ii+"["+Gi+"]"})});case"sample.coverage":return rr(function(ar){return["value"in ar?ar.value:1,!!ar.invert]},function(ar,Nr,ii){return[Nr.def('"value" in ',ii,"?+",ii,".value:1"),Nr=Nr.def("!!",ii,".invert")]})}}),Sr),An=function cn(zt,sn,hn){function Dn(Tn){if(Tn in Rn){var An=ot.id(Rn[Tn]);return(Tn=ae(function(){return An})).id=An,Tn}if(Tn in Hn){var Gn=Hn[Tn];return ne(Gn,function(Zn,lr){var nr=Zn.invoke(lr,Gn);return lr.def(Zn.shared.strings,".id(",nr,")")})}return null}var Rn=zt.static,Hn=zt.dynamic,Mn=Dn("frag"),un=Dn("vert"),fn=null;return ue(Mn)&&ue(un)?(fn=Et.program(un.id,Mn.id,null,hn),zt=ae(function(Tn,An){return Tn.link(fn)})):zt=new K(Mn&&Mn.thisDep||un&&un.thisDep,Mn&&Mn.contextDep||un&&un.contextDep,Mn&&Mn.propDep||un&&un.propDep,function(Tn,An){var Gn,Zn,lr=Tn.shared.shader;return Gn=Mn?Mn.append(Tn,An):An.def(lr,".","frag"),Zn=un?un.append(Tn,An):An.def(lr,".","vert"),An.def(lr+".program("+Zn+","+Gn+")")}),{frag:Mn,vert:un,progVar:zt,program:fn}}(zt,0,Mn);Hn("viewport"),Hn(Zt("scissor.box"));var Gn,Zn=0<Object.keys(Tn).length;if((Gn={framebuffer:Gn,draw:fn,shader:An,state:Tn,dirty:Zn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(br){var or,dr=br.static;if(br=br.dynamic,"profile"in dr){var kr=!!dr.profile;(or=ae(function(Pr,rr){return kr})).enable=kr}else if("profile"in br){var Sr=br.profile;or=ne(Sr,function(Pr,rr){return Pr.invoke(rr,Sr)})}return or}(zt),Gn.uniforms=function(br,or){var dr=br.static,kr=br.dynamic,Sr={};return Object.keys(dr).forEach(function(Pr){var rr,Zr=dr[Pr];if("number"==typeof Zr||"boolean"==typeof Zr)rr=ae(function(){return Zr});else if("function"==typeof Zr){var ar=Zr._reglType;"texture2d"===ar||"textureCube"===ar?rr=ae(function(Nr){return Nr.link(Zr)}):"framebuffer"!==ar&&"framebufferCube"!==ar||(rr=ae(function(Nr){return Nr.link(Zr.color[0])}))}else w(Zr)&&(rr=ae(function(Nr){return Nr.global.def("[",T(Zr.length,function(ii){return Zr[ii]}),"]")}));rr.value=Zr,Sr[Pr]=rr}),Object.keys(kr).forEach(function(Pr){var rr=kr[Pr];Sr[Pr]=ne(rr,function(Zr,ar){return Zr.invoke(ar,rr)})}),Sr}(hn),Gn.drawVAO=Gn.scopeVAO=fn.vao,!Gn.drawVAO&&An.program&&!Mn&&pt.angle_instanced_arrays&&fn.static.elements){var lr=!0;if(zt=An.program.attributes.map(function(br){return br=sn.static[br],lr=lr&&!!br,br}),lr&&0<zt.length){var nr=St.getVAO(St.createVAO({attributes:zt,elements:fn.static.elements}));Gn.drawVAO=new K(null,null,null,function(br,or){return br.link(nr)}),Gn.useVAO=!0}}return Mn?Gn.useVAO=!0:Gn.attributes=function Cn(zt,sn){var hn=zt.static,Dn=zt.dynamic,Rn={};return Object.keys(hn).forEach(function(Hn){var Mn=hn[Hn],un=ot.id(Hn),fn=new mr;if(H(Mn))fn.state=1,fn.buffer=He.getBuffer(He.create(Mn,34962,!1,!0)),fn.type=0;else if(An=He.getBuffer(Mn))fn.state=1,fn.buffer=An,fn.type=0;else if("constant"in Mn){var Tn=Mn.constant;fn.buffer="null",fn.state=2,"number"==typeof Tn?fn.x=Tn:Lt.forEach(function(or,dr){dr<Tn.length&&(fn[or]=Tn[dr])})}else{var An=H(Mn.buffer)?He.getBuffer(He.create(Mn.buffer,34962,!1,!0)):He.getBuffer(Mn.buffer),Gn=0|Mn.offset,Zn=0|Mn.stride,lr=0|Mn.size,nr=!!Mn.normalized,br=0;"type"in Mn&&(br=Ce[Mn.type]),Mn=0|Mn.divisor,fn.buffer=An,fn.state=1,fn.size=lr,fn.normalized=nr,fn.type=br||An.dtype,fn.offset=Gn,fn.stride=Zn,fn.divisor=Mn}Rn[Hn]=ae(function(or,dr){var kr=or.attribCache;if(un in kr)return kr[un];var Sr={isStream:!1};return Object.keys(fn).forEach(function(Pr){Sr[Pr]=fn[Pr]}),fn.buffer&&(Sr.buffer=or.link(fn.buffer),Sr.type=Sr.type||Sr.buffer+".dtype"),kr[un]=Sr})}),Object.keys(Dn).forEach(function(Hn){var Mn=Dn[Hn];Rn[Hn]=ne(Mn,function(un,fn){function Tn(kr){fn(nr[kr],"=",An,".",kr,"|0;")}var An=un.invoke(fn,Mn),Gn=un.shared,Zn=un.constants,lr=Gn.isBufferArgs,nr=(Gn=Gn.buffer,{isStream:fn.def(!1)}),br=new mr;br.state=1,Object.keys(br).forEach(function(kr){nr[kr]=fn.def(""+br[kr])});var or=nr.buffer,dr=nr.type;return fn("if(",lr,"(",An,")){",nr.isStream,"=true;",or,"=",Gn,".createStream(",34962,",",An,");",dr,"=",or,".dtype;","}else{",or,"=",Gn,".getBuffer(",An,");","if(",or,"){",dr,"=",or,".dtype;",'}else if("constant" in ',An,"){",nr.state,"=",2,";","if(typeof "+An+'.constant === "number"){',nr[Lt[0]],"=",An,".constant;",Lt.slice(1).map(function(kr){return nr[kr]}).join("="),"=0;","}else{",Lt.map(function(kr,Sr){return nr[kr]+"="+An+".constant.length>"+Sr+"?"+An+".constant["+Sr+"]:0;"}).join(""),"}}else{","if(",lr,"(",An,".buffer)){",or,"=",Gn,".createStream(",34962,",",An,".buffer);","}else{",or,"=",Gn,".getBuffer(",An,".buffer);","}",dr,'="type" in ',An,"?",Zn.glTypes,"[",An,".type]:",or,".dtype;",nr.normalized,"=!!",An,".normalized;"),Tn("size"),Tn("offset"),Tn("stride"),Tn("divisor"),fn("}}"),fn.exit("if(",nr.isStream,"){",Gn,".destroyStream(",or,");","}"),nr})}),Rn}(sn),Gn.context=function(br){var or=br.static,dr=br.dynamic,kr={};return Object.keys(or).forEach(function(Sr){var Pr=or[Sr];kr[Sr]=ae(function(rr,Zr){return"number"==typeof Pr||"boolean"==typeof Pr?""+Pr:rr.link(Pr)})}),Object.keys(dr).forEach(function(Sr){var Pr=dr[Sr];kr[Sr]=ne(Pr,function(rr,Zr){return rr.invoke(Zr,Pr)})}),kr}(Dn),Gn}function En(zt,sn,hn){var Dn=zt.shared.context,Rn=zt.scope();Object.keys(hn).forEach(function(Hn){sn.save(Dn,"."+Hn);var Mn=hn[Hn].append(zt,sn);Array.isArray(Mn)?Rn(Dn,".",Hn,"=[",Mn.join(),"];"):Rn(Dn,".",Hn,"=",Mn,";")}),sn(Rn)}function rn(zt,sn,hn,Dn){var Rn,Hn=(un=zt.shared).gl,Mn=un.framebuffer;an&&(Rn=sn.def(un.extensions,".webgl_draw_buffers"));var un=(fn=zt.constants).drawBuffer,fn=fn.backBuffer;zt=hn?hn.append(zt,sn):sn.def(Mn,".next"),Dn||sn("if(",zt,"!==",Mn,".cur){"),sn("if(",zt,"){",Hn,".bindFramebuffer(",36160,",",zt,".framebuffer);"),an&&sn(Rn,".drawBuffersWEBGL(",un,"[",zt,".colorAttachments.length]);"),sn("}else{",Hn,".bindFramebuffer(",36160,",null);"),an&&sn(Rn,".drawBuffersWEBGL(",fn,");"),sn("}",Mn,".cur=",zt,";"),Dn||sn("}")}function yn(zt,sn,hn){var Dn=zt.shared,Rn=Dn.gl,Hn=zt.current,Mn=zt.next,un=Dn.current,fn=Dn.next,Tn=zt.cond(un,".dirty");cr.forEach(function(An){var Gn,Zn;if(!((An=Zt(An))in hn.state))if(An in Mn){Gn=Mn[An],Zn=Hn[An];var lr=T(Ln[An].length,function(nr){return Tn.def(Gn,"[",nr,"]")});Tn(zt.cond(lr.map(function(nr,br){return nr+"!=="+Zn+"["+br+"]"}).join("||")).then(Rn,".",Qn[An],"(",lr,");",lr.map(function(nr,br){return Zn+"["+br+"]="+nr}).join(";"),";"))}else Gn=Tn.def(fn,".",An),lr=zt.cond(Gn,"!==",un,".",An),Tn(lr),An in xn?lr(zt.cond(Gn).then(Rn,".enable(",xn[An],");").else(Rn,".disable(",xn[An],");"),un,".",An,"=",Gn,";"):lr(Rn,".",Qn[An],"(",Gn,");",un,".",An,"=",Gn,";")}),0===Object.keys(hn.state).length&&Tn(un,".dirty=false;"),sn(Tn)}function pn(zt,sn,hn,Dn){var Rn,Hn=zt.shared,Mn=zt.current,un=Hn.current,fn=Hn.gl;X(Object.keys(hn)).forEach(function(Tn){var An=hn[Tn];if(!Dn||Dn(An)){var Gn=An.append(zt,sn);if(xn[Tn]){var Zn=xn[Tn];ue(An)?(Rn=zt.link(Gn,{stable:!0}),sn(zt.cond(Rn).then(fn,".enable(",Zn,");").else(fn,".disable(",Zn,");")),sn(un,".",Tn,"=",Rn,";")):(sn(zt.cond(Gn).then(fn,".enable(",Zn,");").else(fn,".disable(",Zn,");")),sn(un,".",Tn,"=",Gn,";"))}else if(w(Gn)){var lr=Mn[Tn];sn(fn,".",Qn[Tn],"(",Gn,");",Gn.map(function(nr,br){return lr+"["+br+"]="+nr}).join(";"),";")}else ue(An)?(Rn=zt.link(Gn,{stable:!0}),sn(fn,".",Qn[Tn],"(",Rn,");",un,".",Tn,"=",Rn,";")):sn(fn,".",Qn[Tn],"(",Gn,");",un,".",Tn,"=",Gn,";")}})}function bn(zt,sn){Jt&&(zt.instancing=sn.def(zt.shared.extensions,".angle_instanced_arrays"))}function In(zt,sn,hn,Dn,Rn){function Hn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Mn(br){br(Tn=sn.def(),"=",Hn(),";"),"string"==typeof Rn?br(Zn,".count+=",Rn,";"):br(Zn,".count++;"),_t&&(Dn?br(An=sn.def(),"=",nr,".getNumPendingQueries();"):br(nr,".beginQuery(",Zn,");"))}function un(br){br(Zn,".cpuTime+=",Hn(),"-",Tn,";"),_t&&(Dn?br(nr,".pushScopeStats(",An,",",nr,".getNumPendingQueries(),",Zn,");"):br(nr,".endQuery();"))}function fn(br){var or=sn.def(lr,".profile");sn(lr,".profile=",br,";"),sn.exit(lr,".profile=",or,";")}var Tn,An,Gn=zt.shared,Zn=zt.stats,lr=Gn.current,nr=Gn.timer;if(hn=hn.profile){if(ue(hn))return void(hn.enable?(Mn(sn),un(sn.exit),fn("true")):fn("false"));fn(hn=hn.append(zt,sn))}else hn=sn.def(lr,".profile");Mn(Gn=zt.block()),sn("if(",hn,"){",Gn,"}"),un(zt=zt.block()),sn.exit("if(",hn,"){",zt,"}")}function _n(zt,sn,hn,Dn,Rn){var Mn=zt.shared;Dn.forEach(function(un){var fn,Tn=un.name,An=hn.attributes[Tn];if(An){if(!Rn(An))return;fn=An.append(zt,sn)}else{if(!Rn(st))return;var Gn=zt.scopeAttrib(Tn);fn={},Object.keys(new mr).forEach(function(Zn){fn[Zn]=sn.def(Gn,".",Zn)})}!function Hn(un,fn,Tn){function An(){sn("if(!",nr,".buffer){",Zn,".enableVertexAttribArray(",lr,");}");var kr,Sr=Tn.type;kr=Tn.size?sn.def(Tn.size,"||",fn):fn,sn("if(",nr,".type!==",Sr,"||",nr,".size!==",kr,"||",dr.map(function(Pr){return nr+"."+Pr+"!=="+Tn[Pr]}).join("||"),"){",Zn,".bindBuffer(",34962,",",br,".buffer);",Zn,".vertexAttribPointer(",[lr,kr,Sr,Tn.normalized,Tn.stride,Tn.offset],");",nr,".type=",Sr,";",nr,".size=",kr,";",dr.map(function(Pr){return nr+"."+Pr+"="+Tn[Pr]+";"}).join(""),"}"),Jt&&sn("if(",nr,".divisor!==",Sr=Tn.divisor,"){",zt.instancing,".vertexAttribDivisorANGLE(",[lr,Sr],");",nr,".divisor=",Sr,";}")}function Gn(){sn("if(",nr,".buffer){",Zn,".disableVertexAttribArray(",lr,");",nr,".buffer=null;","}if(",Lt.map(function(kr,Sr){return nr+"."+kr+"!=="+or[Sr]}).join("||"),"){",Zn,".vertexAttrib4f(",lr,",",or,");",Lt.map(function(kr,Sr){return nr+"."+kr+"="+or[Sr]+";"}).join(""),"}")}var Zn=Mn.gl,lr=sn.def(un,".location"),nr=sn.def(Mn.attributes,"[",lr,"]"),br=Tn.buffer,or=[Tn.x,Tn.y,Tn.z,Tn.w],dr=["buffer","normalized","offset","stride"];1===(un=Tn.state)?An():2===un?Gn():(sn("if(",un,"===",1,"){"),An(),sn("}else{"),Gn(),sn("}"))}(zt.link(un),function(Zn){switch(Zn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(un.info.type),fn)})}function qn(zt,sn,hn,Dn,Rn,Hn){for(var Mn,un=zt.shared,fn=un.gl,Tn=0;Tn<Dn.length;++Tn){var An,Gn=(nr=Dn[Tn]).name,Zn=nr.info.type,lr=hn.uniforms[Gn],nr=zt.link(nr)+".location";if(lr){if(!Rn(lr))continue;if(ue(lr)){if(Gn=lr.value,35678===Zn||35680===Zn)sn(fn,".uniform1i(",nr,",",(Zn=zt.link(Gn._texture||Gn.color[0]._texture))+".bind());"),sn.exit(Zn,".unbind();");else if(35674===Zn||35675===Zn||35676===Zn)lr=2,35675===Zn?lr=3:35676===Zn&&(lr=4),sn(fn,".uniformMatrix",lr,"fv(",nr,",false,",Gn=zt.global.def("new Float32Array(["+Array.prototype.slice.call(Gn)+"])"),");");else{switch(Zn){case 5126:Mn="1f";break;case 35664:Mn="2f";break;case 35665:Mn="3f";break;case 35666:Mn="4f";break;case 35670:case 5124:Mn="1i";break;case 35671:case 35667:Mn="2i";break;case 35672:case 35668:Mn="3i";break;case 35673:case 35669:Mn="4i"}sn(fn,".uniform",Mn,"(",nr,",",w(Gn)?Array.prototype.slice.call(Gn):Gn,");")}continue}An=lr.append(zt,sn)}else{if(!Rn(st))continue;An=sn.def(un.uniforms,"[",ot.id(Gn),"]")}switch(35678===Zn?sn("if(",An,"&&",An,'._reglType==="framebuffer"){',An,"=",An,".color[0];","}"):35680===Zn&&sn("if(",An,"&&",An,'._reglType==="framebufferCube"){',An,"=",An,".color[0];","}"),Gn=1,Zn){case 35678:case 35680:Zn=sn.def(An,"._texture"),sn(fn,".uniform1i(",nr,",",Zn,".bind());"),sn.exit(Zn,".unbind();");continue;case 5124:case 35670:Mn="1i";break;case 35667:case 35671:Mn="2i",Gn=2;break;case 35668:case 35672:Mn="3i",Gn=3;break;case 35669:case 35673:Mn="4i",Gn=4;break;case 5126:Mn="1f";break;case 35664:Mn="2f",Gn=2;break;case 35665:Mn="3f",Gn=3;break;case 35666:Mn="4f",Gn=4;break;case 35674:Mn="Matrix2fv";break;case 35675:Mn="Matrix3fv";break;case 35676:Mn="Matrix4fv"}if("M"===Mn.charAt(0)){sn(fn,".uniform",Mn,"(",nr,","),nr=Math.pow(Zn-35674+2,2);var br=zt.global.def("new Float32Array(",nr,")");Array.isArray(An)?sn("false,(",T(nr,function(dr){return br+"["+dr+"]="+An[dr]}),",",br,")"):sn("false,(Array.isArray(",An,")||",An," instanceof Float32Array)?",An,":(",T(nr,function(dr){return br+"["+dr+"]="+An+"["+dr+"]"}),",",br,")"),sn(");")}else{if(1<Gn){Zn=[];var or=[];for(lr=0;lr<Gn;++lr)Array.isArray(An)?or.push(An[lr]):or.push(sn.def(An+"["+lr+"]")),Hn&&Zn.push(sn.def());Hn&&sn("if(!",zt.batchId,"||",Zn.map(function(dr,kr){return dr+"!=="+or[kr]}).join("||"),"){",Zn.map(function(dr,kr){return dr+"="+or[kr]+";"}).join("")),sn(fn,".uniform",Mn,"(",nr,",",or.join(","),");")}else Hn&&(Zn=sn.def(),sn("if(!",zt.batchId,"||",Zn,"!==",An,"){",Zn,"=",An,";")),sn(fn,".uniform",Mn,"(",nr,",",An,");");Hn&&sn("}")}}}function Wn(zt,sn,hn,Dn){function Rn(Sr){var Pr=Zn[Sr];return Pr?Pr.append(zt,Pr.contextDep&&Dn.contextDynamic||Pr.propDep?hn:sn):sn.def(Gn,".",Sr)}function Hn(){function Sr(){hn(fn,".drawElementsInstancedANGLE(",[nr,or,dr,br+"<<(("+dr+"-5121)>>1)",un],");")}function Pr(){hn(fn,".drawArraysInstancedANGLE(",[nr,br,or,un],");")}lr&&"null"!==lr?kr?Sr():(hn("if(",lr,"){"),Sr(),hn("}else{"),Pr(),hn("}")):Pr()}function Mn(){function Sr(){hn(An+".drawElements("+[nr,or,dr,br+"<<(("+dr+"-5121)>>1)"]+");")}function Pr(){hn(An+".drawArrays("+[nr,br,or]+");")}lr&&"null"!==lr?kr?Sr():(hn("if(",lr,"){"),Sr(),hn("}else{"),Pr(),hn("}")):Pr()}var un,fn,Sr,Pr,Tn=zt.shared,An=Tn.gl,Gn=Tn.draw,Zn=Dn.draw,lr=(Pr=sn,(Sr=Zn.elements)?((Sr.contextDep&&Dn.contextDynamic||Sr.propDep)&&(Pr=hn),Sr=Sr.append(zt,Pr),Zn.elementsActive&&Pr("if("+Sr+")"+An+".bindBuffer(34963,"+Sr+".buffer.buffer);")):(Sr=Pr.def(),Pr(Sr,"=",Gn,".","elements",";","if(",Sr,"){",An,".bindBuffer(",34963,",",Sr,".buffer.buffer);}","else if(",Tn.vao,".currentVAO){",Sr,"=",zt.shared.elements+".getElements("+Tn.vao,".currentVAO.elements);",Sn?"":"if("+Sr+")"+An+".bindBuffer(34963,"+Sr+".buffer.buffer);","}")),Sr),nr=Rn("primitive"),br=Rn("offset"),or=function(){var Sr=Zn.count,Pr=sn;return Sr?((Sr.contextDep&&Dn.contextDynamic||Sr.propDep)&&(Pr=hn),Sr=Sr.append(zt,Pr)):Sr=Pr.def(Gn,".","count"),Sr}();if("number"==typeof or){if(0===or)return}else hn("if(",or,"){"),hn.exit("}");Jt&&(un=Rn("instances"),fn=zt.instancing);var dr=lr+".type",kr=Zn.elements&&ue(Zn.elements)&&!Zn.vaoActive;Jt&&("number"!=typeof un||0<=un)?"string"==typeof un?(hn("if(",un,">0){"),Hn(),hn("}else if(",un,"<0){"),Mn(),hn("}")):Hn():Mn()}function Nn(zt,sn,hn,Dn,Rn){return Rn=(sn=dn()).proc("body",Rn),Jt&&(sn.instancing=Rn.def(sn.shared.extensions,".angle_instanced_arrays")),zt(sn,Rn,hn,Dn),sn.compile().body}function Xn(zt,sn,hn,Dn){bn(zt,sn),hn.useVAO?hn.drawVAO?sn(zt.shared.vao,".setVAO(",hn.drawVAO.append(zt,sn),");"):sn(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(sn(zt.shared.vao,".setVAO(null);"),_n(zt,sn,hn,Dn.attributes,function(){return!0})),qn(zt,sn,hn,Dn.uniforms,function(){return!0},!1),Wn(zt,sn,sn,hn)}function yr(zt,sn,hn,Dn){function Rn(){return!0}zt.batchId="a1",bn(zt,sn),_n(zt,sn,hn,Dn.attributes,Rn),qn(zt,sn,hn,Dn.uniforms,Rn,!1),Wn(zt,sn,sn,hn)}function fr(zt,sn,hn,Dn){function Rn(Gn){return Gn.contextDep&&Mn||Gn.propDep}function Hn(Gn){return!Rn(Gn)}bn(zt,sn);var Mn=hn.contextDep,un=sn.def(),fn=sn.def();zt.shared.props=fn,zt.batchId=un;var Tn=zt.scope(),An=zt.scope();sn(Tn.entry,"for(",un,"=0;",un,"<","a1",";++",un,"){",fn,"=","a0","[",un,"];",An,"}",Tn.exit),hn.needsContext&&En(zt,An,hn.context),hn.needsFramebuffer&&rn(zt,An,hn.framebuffer),pn(zt,An,hn.state,Rn),hn.profile&&Rn(hn.profile)&&In(zt,An,hn,!1,!0),Dn?(hn.useVAO?hn.drawVAO?Rn(hn.drawVAO)?An(zt.shared.vao,".setVAO(",hn.drawVAO.append(zt,An),");"):Tn(zt.shared.vao,".setVAO(",hn.drawVAO.append(zt,Tn),");"):Tn(zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"):(Tn(zt.shared.vao,".setVAO(null);"),_n(zt,Tn,hn,Dn.attributes,Hn),_n(zt,An,hn,Dn.attributes,Rn)),qn(zt,Tn,hn,Dn.uniforms,Hn,!1),qn(zt,An,hn,Dn.uniforms,Rn,!0),Wn(zt,Tn,An,hn)):(sn=zt.global.def("{}"),Dn=hn.shader.progVar.append(zt,An),fn=An.def(Dn,".id"),Tn=An.def(sn,"[",fn,"]"),An(zt.shared.gl,".useProgram(",Dn,".program);","if(!",Tn,"){",Tn,"=",sn,"[",fn,"]=",zt.link(function(Gn){return Nn(yr,zt,hn,Gn,2)}),"(",Dn,");}",Tn,".call(this,a0[",un,"],",un,");"))}function gr(zt,sn,hn){var Dn=sn.static[hn];if(Dn&&function(An){if("object"==typeof An&&!w(An)){for(var Gn=Object.keys(An),Zn=0;Zn<Gn.length;++Zn)if(he.isDynamic(An[Gn[Zn]]))return!0;return!1}}(Dn)){var Rn=zt.global,Hn=Object.keys(Dn),Mn=!1,un=!1,fn=!1,Tn=zt.global.def("{}");Hn.forEach(function(An){var Gn=Dn[An];if(he.isDynamic(Gn))"function"==typeof Gn&&(Gn=Dn[An]=he.unbox(Gn)),An=ne(Gn,null),Mn=Mn||An.thisDep,fn=fn||An.propDep,un=un||An.contextDep;else{switch(Rn(Tn,".",An,"="),typeof Gn){case"number":Rn(Gn);break;case"string":Rn('"',Gn,'"');break;case"object":Array.isArray(Gn)&&Rn("[",Gn.join(),"]");break;default:Rn(zt.link(Gn))}Rn(";")}}),sn.dynamic[hn]=new he.DynamicVariable(4,{thisDep:Mn,contextDep:un,propDep:fn,ref:Tn,append:function(An,Gn){Hn.forEach(function(Zn){var lr=Dn[Zn];he.isDynamic(lr)&&(lr=An.invoke(Gn,lr),Gn(Tn,".",Zn,"=",lr,";"))})}}),delete sn.static[hn]}}var mr=St.Record,zr={add:32774,subtract:32778,"reverse subtract":32779};pt.ext_blend_minmax&&(zr.min=32775,zr.max=32776);var Jt=pt.angle_instanced_arrays,an=pt.webgl_draw_buffers,Sn=pt.oes_vertex_array_object,Ln={dirty:!0,profile:Pt.profile},Vn={},cr=[],xn={},Qn={};$t("dither",3024),$t("blend.enable",3042),Xt("blend.color","blendColor",[0,0,0,0]),Xt("blend.equation","blendEquationSeparate",[32774,32774]),Xt("blend.func","blendFuncSeparate",[1,0,1,0]),$t("depth.enable",2929,!0),Xt("depth.func","depthFunc",513),Xt("depth.range","depthRange",[0,1]),Xt("depth.mask","depthMask",!0),Xt("colorMask","colorMask",[!0,!0,!0,!0]),$t("cull.enable",2884),Xt("cull.face","cullFace",1029),Xt("frontFace","frontFace",2305),Xt("lineWidth","lineWidth",1),$t("polygonOffset.enable",32823),Xt("polygonOffset.offset","polygonOffset",[0,0]),$t("sample.alpha",32926),$t("sample.enable",32928),Xt("sample.coverage","sampleCoverage",[1,!1]),$t("stencil.enable",2960),Xt("stencil.mask","stencilMask",-1),Xt("stencil.func","stencilFunc",[519,0,-1]),Xt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Xt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),$t("scissor.enable",3089),Xt("scissor.box","scissor",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]),Xt("viewport","viewport",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]);var er={gl:Je,context:Nt,strings:ot,next:Vn,current:Ln,draw:wt,elements:Ge,buffer:He,shader:Et,attributes:St.state,vao:St,uniforms:kt,framebuffer:ht,extensions:pt,timer:_t,isBufferArgs:H},Qt={primTypes:Ae,compareFuncs:Wt,blendFuncs:Rt,blendEquations:zr,stencilOps:Ht,glTypes:Ce,orientationType:it};an&&(Qt.backBuffer=[1029],Qt.drawBuffer=T(xt.maxDrawbuffers,function(zt){return 0===zt?[0]:T(zt,function(sn){return 36064+sn})}));var zn=0;return{next:Vn,current:Ln,procs:function(){var zt=dn(),sn=zt.proc("poll"),hn=zt.proc("refresh"),Dn=zt.block();sn(Dn),hn(Dn);var Rn,Hn=(fn=zt.shared).gl,Mn=fn.next,un=fn.current;Dn(un,".dirty=false;"),rn(zt,sn),rn(zt,hn,null,!0),Jt&&(Rn=zt.link(Jt)),pt.oes_vertex_array_object&&hn(zt.link(pt.oes_vertex_array_object),".bindVertexArrayOES(null);");var fn=hn.def(fn.attributes),Tn=hn.def(0),An=zt.cond(Tn,".buffer");An.then(Hn,".enableVertexAttribArray(i);",Hn,".bindBuffer(",34962,",",Tn,".buffer.buffer);",Hn,".vertexAttribPointer(i,",Tn,".size,",Tn,".type,",Tn,".normalized,",Tn,".stride,",Tn,".offset);").else(Hn,".disableVertexAttribArray(i);",Hn,".vertexAttrib4f(i,",Tn,".x,",Tn,".y,",Tn,".z,",Tn,".w);",Tn,".buffer=null;");var Gn=zt.link(xt.maxAttributes,{stable:!0});return hn("for(var i=0;i<",Gn,";++i){",Tn,"=",fn,"[i];",An,"}"),Jt&&hn("for(var i=0;i<",Gn,";++i){",Rn,".vertexAttribDivisorANGLE(i,",fn,"[i].divisor);","}"),hn(zt.shared.vao,".currentVAO=null;",zt.shared.vao,".setVAO(",zt.shared.vao,".targetVAO);"),Object.keys(xn).forEach(function(Zn){var lr=xn[Zn],nr=Dn.def(Mn,".",Zn),br=zt.block();br("if(",nr,"){",Hn,".enable(",lr,")}else{",Hn,".disable(",lr,")}",un,".",Zn,"=",nr,";"),hn(br),sn("if(",nr,"!==",un,".",Zn,"){",br,"}")}),Object.keys(Qn).forEach(function(Zn){var lr,nr,br=Qn[Zn],or=Ln[Zn],dr=zt.block();dr(Hn,".",br,"("),w(or)?(br=or.length,lr=zt.global.def(Mn,".",Zn),nr=zt.global.def(un,".",Zn),dr(T(br,function(kr){return lr+"["+kr+"]"}),");",T(br,function(kr){return nr+"["+kr+"]="+lr+"["+kr+"];"}).join("")),sn("if(",T(br,function(kr){return lr+"["+kr+"]!=="+nr+"["+kr+"]"}).join("||"),"){",dr,"}")):(lr=Dn.def(Mn,".",Zn),nr=Dn.def(un,".",Zn),dr(lr,");",un,".",Zn,"=",lr,";"),sn("if(",lr,"!==",nr,"){",dr,"}")),hn(dr)}),zt.compile()}(),compile:function(zt,sn,hn,Dn,Rn){var Hn=dn();Hn.stats=Hn.link(Rn),Object.keys(sn.static).forEach(function(un){gr(Hn,sn,un)}),Ft.forEach(function(un){gr(Hn,zt,un)});var Mn=Fn(zt,sn,hn,Dn);return Mn.shader.program&&(Mn.shader.program.attributes.sort(function(un,fn){return un.name<fn.name?-1:1}),Mn.shader.program.uniforms.sort(function(un,fn){return un.name<fn.name?-1:1})),function(un,fn){var Tn=un.proc("draw",1);bn(un,Tn),En(un,Tn,fn.context),rn(un,Tn,fn.framebuffer),yn(un,Tn,fn),pn(un,Tn,fn.state),In(un,Tn,fn,!1,!0);var An=fn.shader.progVar.append(un,Tn);if(Tn(un.shared.gl,".useProgram(",An,".program);"),fn.shader.program)Xn(un,Tn,fn,fn.shader.program);else{Tn(un.shared.vao,".setVAO(null);");var Gn=un.global.def("{}"),Zn=Tn.def(An,".id"),lr=Tn.def(Gn,"[",Zn,"]");Tn(un.cond(lr).then(lr,".call(this,a0);").else(lr,"=",Gn,"[",Zn,"]=",un.link(function(nr){return Nn(Xn,un,fn,nr,1)}),"(",An,");",lr,".call(this,a0);"))}0<Object.keys(fn.state).length&&Tn(un.shared.current,".dirty=true;"),un.shared.vao&&Tn(un.shared.vao,".setVAO(null);")}(Hn,Mn),function Er(zt,sn){function hn(un){var fn=sn.shader[un];fn&&(fn=fn.append(zt,Dn),isNaN(fn)?Dn.set(Rn.shader,"."+un,fn):Dn.set(Rn.shader,"."+un,zt.link(fn,{stable:!0})))}var Dn=zt.proc("scope",3);zt.batchId="a2";var Rn=zt.shared,Hn=Rn.current;if(En(zt,Dn,sn.context),sn.framebuffer&&sn.framebuffer.append(zt,Dn),X(Object.keys(sn.state)).forEach(function(un){var fn=sn.state[un],Tn=fn.append(zt,Dn);w(Tn)?Tn.forEach(function(An,Gn){isNaN(An)?Dn.set(zt.next[un],"["+Gn+"]",An):Dn.set(zt.next[un],"["+Gn+"]",zt.link(An,{stable:!0}))}):ue(fn)?Dn.set(Rn.next,"."+un,zt.link(Tn,{stable:!0})):Dn.set(Rn.next,"."+un,Tn)}),In(zt,Dn,sn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(un){var fn=sn.draw[un];fn&&(fn=fn.append(zt,Dn),isNaN(fn)?Dn.set(Rn.draw,"."+un,fn):Dn.set(Rn.draw,"."+un,zt.link(fn),{stable:!0}))}),Object.keys(sn.uniforms).forEach(function(un){var fn=sn.uniforms[un].append(zt,Dn);Array.isArray(fn)&&(fn="["+fn.map(function(Tn){return isNaN(Tn)?Tn:zt.link(Tn,{stable:!0})})+"]"),Dn.set(Rn.uniforms,"["+zt.link(ot.id(un),{stable:!0})+"]",fn)}),Object.keys(sn.attributes).forEach(function(un){var fn=sn.attributes[un].append(zt,Dn),Tn=zt.scopeAttrib(un);Object.keys(new mr).forEach(function(An){Dn.set(Tn,"."+An,fn[An])})}),sn.scopeVAO){var Mn=sn.scopeVAO.append(zt,Dn);isNaN(Mn)?Dn.set(Rn.vao,".targetVAO",Mn):Dn.set(Rn.vao,".targetVAO",zt.link(Mn,{stable:!0}))}hn("vert"),hn("frag"),0<Object.keys(sn.state).length&&(Dn(Hn,".dirty=true;"),Dn.exit(Hn,".dirty=true;")),Dn("a1(",zt.shared.context,",a0,",zt.batchId,");")}(Hn,Mn),function(un,fn){function Tn(or){return or.contextDep&&Gn||or.propDep}var An=un.proc("batch",2);un.batchId="0",bn(un,An);var Gn=!1,Zn=!0;Object.keys(fn.context).forEach(function(or){Gn=Gn||fn.context[or].propDep}),Gn||(En(un,An,fn.context),Zn=!1);var lr=!1;if((nr=fn.framebuffer)?(nr.propDep?Gn=lr=!0:nr.contextDep&&Gn&&(lr=!0),lr||rn(un,An,nr)):rn(un,An,null),fn.state.viewport&&fn.state.viewport.propDep&&(Gn=!0),yn(un,An,fn),pn(un,An,fn.state,function(or){return!Tn(or)}),fn.profile&&Tn(fn.profile)||In(un,An,fn,!1,"a1"),fn.contextDep=Gn,fn.needsContext=Zn,fn.needsFramebuffer=lr,(Zn=fn.shader.progVar).contextDep&&Gn||Zn.propDep)fr(un,An,fn,null);else if(Zn=Zn.append(un,An),An(un.shared.gl,".useProgram(",Zn,".program);"),fn.shader.program)fr(un,An,fn,fn.shader.program);else{An(un.shared.vao,".setVAO(null);");var nr=un.global.def("{}"),br=(lr=An.def(Zn,".id"),An.def(nr,"[",lr,"]"));An(un.cond(br).then(br,".call(this,a0,a1);").else(br,"=",nr,"[",lr,"]=",un.link(function(or){return Nn(fr,un,fn,or,2)}),"(",Zn,");",br,".call(this,a0,a1);"))}0<Object.keys(fn.state).length&&An(un.shared.current,".dirty=true;"),un.shared.vao&&An(un.shared.vao,".setVAO(null);")}(Hn,Mn),le(Hn.compile(),{destroy:function(){Mn.shader.program.destroy()}})}}}function ie(Je,ot){for(var pt=0;pt<Je.length;++pt)if(Je[pt]===ot)return pt;return-1}var le=function(Je,ot){for(var pt=Object.keys(ot),xt=0;xt<pt.length;++xt)Je[pt[xt]]=ot[pt[xt]];return Je},fe=0,he={DynamicVariable:U,define:function(Je,ot){return new U(Je,I(ot+""))},isDynamic:function(Je){return"function"==typeof Je&&!Je._reglType||Je instanceof U},unbox:function Je(ot,pt){return"function"==typeof ot?new U(0,ot):"number"==typeof ot||"boolean"==typeof ot?new U(5,ot):Array.isArray(ot)?new U(6,ot.map(function(xt,He){return Je(xt,pt+"["+He+"]")})):ot instanceof U?ot:void 0},accessor:I},pe={next:"function"==typeof requestAnimationFrame?function(Je){return requestAnimationFrame(Je)}:function(Je){return setTimeout(Je,16)},cancel:"function"==typeof cancelAnimationFrame?function(Je){return cancelAnimationFrame(Je)}:clearTimeout},xe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Ee=c();Ee.zero=c();var ke=function(Je){return Je instanceof Uint8Array||Je instanceof Uint16Array||Je instanceof Uint32Array||Je instanceof Int8Array||Je instanceof Int16Array||Je instanceof Int32Array||Je instanceof Float32Array||Je instanceof Float64Array||Je instanceof Uint8ClampedArray},Te=function(Je){return Object.keys(Je).map(function(ot){return Je[ot]})},we={shape:function(Je){for(var ot=[];Je.length;Je=Je[0])ot.push(Je.length);return ot},flatten:function(Je,ot,pt,xt){var He=1;if(ot.length)for(var Ge=0;Ge<ot.length;++Ge)He*=ot[Ge];else He=0;switch(pt=xt||Ee.allocType(pt,He),ot.length){case 0:break;case 1:for(xt=ot[0],ot=0;ot<xt;++ot)pt[ot]=Je[ot];break;case 2:for(xt=ot[0],ot=ot[1],Ge=He=0;Ge<xt;++Ge)for(var dt=Je[Ge],ht=0;ht<ot;++ht)pt[He++]=dt[ht];break;case 3:s(Je,ot[0],ot[1],ot[2],pt,0);break;default:a(Je,ot,0,pt,0)}return pt}},je={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ie={dynamic:35048,stream:35040,static:35044},ge=we.flatten,me=we.shape,ce=[];ce[5120]=1,ce[5122]=2,ce[5124]=4,ce[5121]=1,ce[5123]=2,ce[5125]=4,ce[5126]=4;var Ae={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ne=new Float32Array(1),De=new Uint32Array(Ne.buffer),qe=[9984,9986,9985,9987],Ke=[0,6409,6410,6407,6408],be={};be[6409]=be[6406]=be[6402]=1,be[34041]=be[6410]=2,be[6407]=be[35904]=3,be[6408]=be[35906]=4;var Oe=y("HTMLCanvasElement"),Le=y("OffscreenCanvas"),Ue=y("CanvasRenderingContext2D"),Ze=y("ImageBitmap"),We=y("HTMLImageElement"),et=y("HTMLVideoElement"),nt=Object.keys(je).concat([Oe,Le,Ue,Ze,We,et]),ct=[];ct[5121]=1,ct[5126]=4,ct[36193]=2,ct[5123]=2,ct[5125]=4;var yt=[];yt[32854]=2,yt[32855]=2,yt[36194]=2,yt[34041]=4,yt[33776]=.5,yt[33777]=.5,yt[33778]=1,yt[33779]=1,yt[35986]=.5,yt[35987]=1,yt[34798]=1,yt[35840]=.5,yt[35841]=.25,yt[35842]=.5,yt[35843]=.25,yt[36196]=.5;var ut=[];ut[32854]=2,ut[32855]=2,ut[36194]=2,ut[33189]=2,ut[36168]=1,ut[34041]=4,ut[35907]=4,ut[34836]=16,ut[34842]=8,ut[34843]=6;var Dt=[];Dt[6408]=4,Dt[6407]=3;var vt=[];vt[5121]=1,vt[5126]=4,vt[36193]=2;var mt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Lt=["x","y","z","w"],Ft="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Rt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Wt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ht={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},it={cw:2304,ccw:2305},st=new K(!1,!1,!1,function(){});return function(Je){function ot(){if(0===yr.length)on&&on.update(),mr=null;else{mr=pe.next(ot),Et();for(var Jt=yr.length-1;0<=Jt;--Jt){var an=yr[Jt];an&&an(Fn,null,0)}_t.flush(),on&&on.update()}}function pt(){!mr&&0<yr.length&&(mr=pe.next(ot))}function xt(){mr&&(pe.cancel(ot),mr=null)}function He(Jt){Jt.preventDefault(),xt(),fr.forEach(function(an){an()})}function Ge(Jt){_t.getError(),Pt.restore(),bn.restore(),rn.restore(),In.restore(),_n.restore(),qn.restore(),pn.restore(),on&&on.restore(),Wn.procs.refresh(),pt(),Er.forEach(function(an){an()})}function dt(Jt){function an(zt,sn){var hn={},Dn={};return Object.keys(zt).forEach(function(Rn){var Hn=zt[Rn];if(he.isDynamic(Hn))Dn[Rn]=he.unbox(Hn,Rn);else{if(sn&&Array.isArray(Hn))for(var Mn=0;Mn<Hn.length;++Mn)if(he.isDynamic(Hn[Mn]))return void(Dn[Rn]=he.unbox(Hn,Rn));hn[Rn]=Hn}}),{dynamic:Dn,static:hn}}var Sn=an(Jt.context||{},!0),Ln=an(Jt.uniforms||{},!0),Vn=an(Jt.attributes||{},!1);Jt=an(function(zt){function sn(Dn){if(Dn in hn){var Rn=hn[Dn];delete hn[Dn],Object.keys(Rn).forEach(function(Hn){hn[Dn+"."+Hn]=Rn[Hn]})}}var hn=le({},zt);return delete hn.uniforms,delete hn.attributes,delete hn.context,delete hn.vao,"stencil"in hn&&hn.stencil.op&&(hn.stencil.opBack=hn.stencil.opFront=hn.stencil.op,delete hn.stencil.op),sn("blend"),sn("depth"),sn("cull"),sn("stencil"),sn("polygonOffset"),sn("scissor"),sn("sample"),"vao"in zt&&(hn.vao=zt.vao),hn}(Jt),!1);var cr={gpuTime:0,cpuTime:0,count:0},xn=Wn.compile(Jt,Vn,Ln,Sn,cr),Qn=xn.draw,er=xn.batch,Qt=xn.scope,zn=[];return le(function(zt,sn){var hn;if("function"==typeof zt)return Qt.call(this,null,zt,0);if("function"==typeof sn)if("number"==typeof zt)for(hn=0;hn<zt;++hn)Qt.call(this,null,sn,hn);else{if(!Array.isArray(zt))return Qt.call(this,zt,sn,0);for(hn=0;hn<zt.length;++hn)Qt.call(this,zt[hn],sn,hn)}else if("number"==typeof zt){if(0<zt)return er.call(this,function(Dn){for(;zn.length<Dn;)zn.push(null);return zn}(0|zt),0|zt)}else{if(!Array.isArray(zt))return Qn.call(this,zt);if(zt.length)return er.call(this,zt,zt.length)}},{stats:cr,destroy:function(){xn.destroy()}})}function ht(Jt,an){var Sn=0;Wn.procs.poll();var Ln=an.color;Ln&&(_t.clearColor(+Ln[0]||0,+Ln[1]||0,+Ln[2]||0,+Ln[3]||0),Sn|=16384),"depth"in an&&(_t.clearDepth(+an.depth),Sn|=256),"stencil"in an&&(_t.clearStencil(0|an.stencil),Sn|=1024),_t.clear(Sn)}function kt(Jt){return yr.push(Jt),pt(),{cancel:function(){var an=ie(yr,Jt);yr[an]=function Sn(){var Ln=ie(yr,Sn);yr[Ln]=yr[yr.length-1],--yr.length,0>=yr.length&&xt()}}}}function St(){var Jt=Nn.viewport,an=Nn.scissor_box;Jt[0]=Jt[1]=an[0]=an[1]=0,Fn.viewportWidth=Fn.framebufferWidth=Fn.drawingBufferWidth=Jt[2]=an[2]=_t.drawingBufferWidth,Fn.viewportHeight=Fn.framebufferHeight=Fn.drawingBufferHeight=Jt[3]=an[3]=_t.drawingBufferHeight}function Et(){Fn.tick+=1,Fn.time=Nt(),St(),Wn.procs.poll()}function wt(){In.refresh(),St(),Wn.procs.refresh(),on&&on.update()}function Nt(){return(xe()-cn)/1e3}if(!(Je=function k(Je){var ot,pt,xt,He,Ge=Je||{};Je={};var dt=[],ht=[],kt=typeof window>"u"?1:window.devicePixelRatio,St=!1,Et={},wt=function(_t){},Nt=function(){};if("string"==typeof Ge?ot=document.querySelector(Ge):"object"==typeof Ge&&("string"==typeof Ge.nodeName&&"function"==typeof Ge.appendChild&&"function"==typeof Ge.getBoundingClientRect?ot=Ge:"function"==typeof Ge.drawArrays||"function"==typeof Ge.drawElements?xt=(He=Ge).canvas:("gl"in Ge?He=Ge.gl:"canvas"in Ge?xt=f(Ge.canvas):"container"in Ge&&(pt=f(Ge.container)),"attributes"in Ge&&(Je=Ge.attributes),"extensions"in Ge&&(dt=C(Ge.extensions)),"optionalExtensions"in Ge&&(ht=C(Ge.optionalExtensions)),"onDone"in Ge&&(wt=Ge.onDone),"profile"in Ge&&(St=!!Ge.profile),"pixelRatio"in Ge&&(kt=+Ge.pixelRatio),"cachedCode"in Ge&&(Et=Ge.cachedCode))),ot&&("canvas"===ot.nodeName.toLowerCase()?xt=ot:pt=ot),!He){if(!xt){if(!(ot=function(_t,Mt,Pt){function Zt(){var dn=window.innerWidth,on=window.innerHeight;_t!==document.body&&(dn=(on=Xt.getBoundingClientRect()).right-on.left,on=on.bottom-on.top),Xt.width=Pt*dn,Xt.height=Pt*on}var $t,Xt=document.createElement("canvas");return le(Xt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),_t.appendChild(Xt),_t===document.body&&(Xt.style.position="absolute",le(_t.style,{margin:0,padding:0})),_t!==document.body&&"function"==typeof ResizeObserver?($t=new ResizeObserver(function(){setTimeout(Zt)})).observe(_t):window.addEventListener("resize",Zt,!1),Zt(),{canvas:Xt,onDestroy:function(){$t?$t.disconnect():window.removeEventListener("resize",Zt),_t.removeChild(Xt)}}}(pt||document.body,0,kt)))return null;xt=ot.canvas,Nt=ot.onDestroy}void 0===Je.premultipliedAlpha&&(Je.premultipliedAlpha=!0),He=function(_t,Mt){function Pt(Zt){try{return _t.getContext(Zt,Mt)}catch{return null}}return Pt("webgl")||Pt("experimental-webgl")||Pt("webgl-experimental")}(xt,Je)}return He?{gl:He,canvas:xt,container:pt,extensions:dt,optionalExtensions:ht,pixelRatio:kt,profile:St,cachedCode:Et,onDone:wt,onDestroy:Nt}:(Nt(),wt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Je)))return null;var _t=Je.gl,Mt=_t.getContextAttributes();_t.isContextLost();var Pt=function(Jt,an){function Sn(xn){var Qn;xn=xn.toLowerCase();try{Qn=Ln[xn]=Jt.getExtension(xn)}catch{}return!!Qn}for(var Ln={},Vn=0;Vn<an.extensions.length;++Vn){var cr=an.extensions[Vn];if(!Sn(cr))return an.onDestroy(),an.onDone('"'+cr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return an.optionalExtensions.forEach(Sn),{extensions:Ln,restore:function(){Object.keys(Ln).forEach(function(xn){if(Ln[xn]&&!Sn(xn))throw Error("(regl): error restoring extension "+xn)})}}}(_t,Je);if(!Pt)return null;var Jt,an,Zt=(Jt={"":0},an=[""],{id:function(Sn){var Ln=Jt[Sn];return Ln||(Ln=Jt[Sn]=an.length,an.push(Sn),Ln)},str:function(Sn){return an[Sn]}}),$t={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Xt=Je.cachedCode||{},dn=Pt.extensions,on=function(Jt,an){function Sn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Ln(zn,zt,sn){var hn=xn.pop()||new Sn;hn.startQueryIndex=zn,hn.endQueryIndex=zt,hn.sum=0,hn.stats=sn,Qn.push(hn)}if(!an.ext_disjoint_timer_query)return null;var Vn=[],cr=[],xn=[],Qn=[],er=[],Qt=[];return{beginQuery:function(zn){var zt=Vn.pop()||an.ext_disjoint_timer_query.createQueryEXT();an.ext_disjoint_timer_query.beginQueryEXT(35007,zt),cr.push(zt),Ln(cr.length-1,cr.length,zn)},endQuery:function(){an.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Ln,update:function(){var zn,zt;if(0!==(zn=cr.length)){Qt.length=Math.max(Qt.length,zn+1),er.length=Math.max(er.length,zn+1),er[0]=0;var sn=Qt[0]=0;for(zt=zn=0;zt<cr.length;++zt){var hn=cr[zt];an.ext_disjoint_timer_query.getQueryObjectEXT(hn,34919)?(sn+=an.ext_disjoint_timer_query.getQueryObjectEXT(hn,34918),Vn.push(hn)):cr[zn++]=hn,er[zt+1]=sn,Qt[zt+1]=zn}for(cr.length=zn,zt=zn=0;zt<Qn.length;++zt){var Dn=(sn=Qn[zt]).startQueryIndex;sn.sum+=er[hn=sn.endQueryIndex]-er[Dn],(hn=Qt[hn])===(Dn=Qt[Dn])?(sn.stats.gpuTime+=sn.sum/1e6,xn.push(sn)):(sn.startQueryIndex=Dn,sn.endQueryIndex=hn,Qn[zn++]=sn)}Qn.length=zn}},getNumPendingQueries:function(){return cr.length},clear:function(){Vn.push.apply(Vn,cr);for(var zn=0;zn<Vn.length;zn++)an.ext_disjoint_timer_query.deleteQueryEXT(Vn[zn]);cr.length=0,Vn.length=0},restore:function(){cr.length=0,Vn.length=0}}}(0,dn),cn=xe(),tn=_t.drawingBufferWidth,Cn=_t.drawingBufferHeight,Fn={tick:0,time:0,viewportWidth:tn,viewportHeight:Cn,framebufferWidth:tn,framebufferHeight:Cn,drawingBufferWidth:tn,drawingBufferHeight:Cn,pixelRatio:Je.pixelRatio},En=(tn={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Je,ot){var pt=1;ot.ext_texture_filter_anisotropic&&(pt=Je.getParameter(34047));var xt=1,He=1;ot.webgl_draw_buffers&&(xt=Je.getParameter(34852),He=Je.getParameter(36063));var Ge=!!ot.oes_texture_float;if(Ge){Ge=Je.createTexture(),Je.bindTexture(3553,Ge),Je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var dt=Je.createFramebuffer();if(Je.bindFramebuffer(36160,dt),Je.framebufferTexture2D(36160,36064,3553,Ge,0),Je.bindTexture(3553,null),36053!==Je.checkFramebufferStatus(36160))Ge=!1;else{Je.viewport(0,0,1,1),Je.clearColor(1,0,0,1),Je.clear(16384);var ht=Ee.allocType(5126,4);Je.readPixels(0,0,1,1,6408,5126,ht),Je.getError()?Ge=!1:(Je.deleteFramebuffer(dt),Je.deleteTexture(Ge),Ge=1===ht[0]),Ee.freeType(ht)}}return ht=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ht=Je.createTexture(),dt=Ee.allocType(5121,36),Je.activeTexture(33984),Je.bindTexture(34067,ht),Je.texImage2D(34069,0,6408,3,3,0,6408,5121,dt),Ee.freeType(dt),Je.bindTexture(34067,null),Je.deleteTexture(ht),ht=!Je.getError()),{colorBits:[Je.getParameter(3410),Je.getParameter(3411),Je.getParameter(3412),Je.getParameter(3413)],depthBits:Je.getParameter(3414),stencilBits:Je.getParameter(3415),subpixelBits:Je.getParameter(3408),extensions:Object.keys(ot).filter(function(kt){return!!ot[kt]}),maxAnisotropic:pt,maxDrawbuffers:xt,maxColorAttachments:He,pointSizeDims:Je.getParameter(33901),lineWidthDims:Je.getParameter(33902),maxViewportDims:Je.getParameter(3386),maxCombinedTextureUnits:Je.getParameter(35661),maxCubeMapSize:Je.getParameter(34076),maxRenderbufferSize:Je.getParameter(34024),maxTextureUnits:Je.getParameter(34930),maxTextureSize:Je.getParameter(3379),maxAttributes:Je.getParameter(34921),maxVertexUniforms:Je.getParameter(36347),maxVertexTextureUnits:Je.getParameter(35660),maxVaryingVectors:Je.getParameter(36348),maxFragmentUniforms:Je.getParameter(36349),glsl:Je.getParameter(35724),renderer:Je.getParameter(7937),vendor:Je.getParameter(7936),version:Je.getParameter(7938),readFloat:Ge,npotTextureCube:ht}}(_t,dn)),rn=function d(Je,ot,pt,xt){function He(wt){this.id=kt++,this.buffer=Je.createBuffer(),this.type=wt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,pt.profile&&(this.stats={size:0})}function Ge(wt,Nt,_t){wt.byteLength=Nt.byteLength,Je.bufferData(wt.type,Nt,_t)}function dt(wt,Nt,_t,Mt,Pt,Zt){if(wt.usage=_t,Array.isArray(Nt)){if(wt.dtype=Mt||5126,0<Nt.length)if(Array.isArray(Nt[0])){Pt=me(Nt);for(var $t=Mt=1;$t<Pt.length;++$t)Mt*=Pt[$t];wt.dimension=Mt,Ge(wt,Nt=ge(Nt,Pt,wt.dtype),_t),Zt?wt.persistentData=Nt:Ee.freeType(Nt)}else"number"==typeof Nt[0]?(wt.dimension=Pt,l(Pt=Ee.allocType(wt.dtype,Nt.length),Nt),Ge(wt,Pt,_t),Zt?wt.persistentData=Pt:Ee.freeType(Pt)):ke(Nt[0])&&(wt.dimension=Nt[0].length,wt.dtype=Mt||o(Nt[0])||5126,Ge(wt,Nt=ge(Nt,[Nt.length,Nt[0].length],wt.dtype),_t),Zt?wt.persistentData=Nt:Ee.freeType(Nt))}else if(ke(Nt))wt.dtype=Mt||o(Nt),wt.dimension=Pt,Ge(wt,Nt,_t),Zt&&(wt.persistentData=new Uint8Array(new Uint8Array(Nt.buffer)));else if(i(Nt)){var Xt=Nt.stride,dn=($t=Nt.offset,0),on=0,cn=0,tn=0;1===(Pt=Nt.shape).length?(dn=Pt[0],on=1,cn=Xt[0],tn=0):2===Pt.length&&(dn=Pt[0],on=Pt[1],cn=Xt[0],tn=Xt[1]),wt.dtype=Mt||o(Nt.data)||5126,wt.dimension=on,u(Pt=Ee.allocType(wt.dtype,dn*on),Nt.data,dn,on,cn,tn,$t),Ge(wt,Pt,_t),Zt?wt.persistentData=Pt:Ee.freeType(Pt)}else Nt instanceof ArrayBuffer&&(wt.dtype=5121,wt.dimension=Pt,Ge(wt,Nt,_t),Zt&&(wt.persistentData=new Uint8Array(new Uint8Array(Nt))))}function ht(wt){ot.bufferCount--,xt(wt),Je.deleteBuffer(wt.buffer),wt.buffer=null,delete St[wt.id]}var kt=0,St={};He.prototype.bind=function(){Je.bindBuffer(this.type,this.buffer)},He.prototype.destroy=function(){ht(this)};var Et=[];return pt.profile&&(ot.getTotalBufferSize=function(){var wt=0;return Object.keys(St).forEach(function(Nt){wt+=St[Nt].stats.size}),wt}),{create:function(wt,Nt,_t,Mt){function Pt($t){var Xt=35044,dn=null,on=0,cn=0,tn=1;return Array.isArray($t)||ke($t)||i($t)||$t instanceof ArrayBuffer?dn=$t:"number"==typeof $t?on=0|$t:$t&&("data"in $t&&(dn=$t.data),"usage"in $t&&(Xt=Ie[$t.usage]),"type"in $t&&(cn=Ce[$t.type]),"dimension"in $t&&(tn=0|$t.dimension),"length"in $t&&(on=0|$t.length)),Zt.bind(),dn?dt(Zt,dn,Xt,cn,tn,Mt):(on&&Je.bufferData(Zt.type,on,Xt),Zt.dtype=cn||5121,Zt.usage=Xt,Zt.dimension=tn,Zt.byteLength=on),pt.profile&&(Zt.stats.size=Zt.byteLength*ce[Zt.dtype]),Pt}ot.bufferCount++;var Zt=new He(Nt);return St[Zt.id]=Zt,_t||Pt(wt),Pt._reglType="buffer",Pt._buffer=Zt,Pt.subdata=function($t,Xt){var dn,on=0|(Xt||0);if(Zt.bind(),ke($t)||$t instanceof ArrayBuffer)Je.bufferSubData(Zt.type,on,$t);else if(Array.isArray($t)){if(0<$t.length)if("number"==typeof $t[0]){var cn=Ee.allocType(Zt.dtype,$t.length);l(cn,$t),Je.bufferSubData(Zt.type,on,cn),Ee.freeType(cn)}else(Array.isArray($t[0])||ke($t[0]))&&(dn=me($t),cn=ge($t,dn,Zt.dtype),Je.bufferSubData(Zt.type,on,cn),Ee.freeType(cn))}else if(i($t)){var tn=$t.stride,Cn=cn=0,Fn=0,En=0;1===(dn=$t.shape).length?(cn=dn[0],Cn=1,Fn=tn[0],En=0):2===dn.length&&(cn=dn[0],Cn=dn[1],Fn=tn[0],En=tn[1]),dn=Array.isArray($t.data)?Zt.dtype:o($t.data),u(dn=Ee.allocType(dn,cn*Cn),$t.data,cn,Cn,Fn,En,$t.offset),Je.bufferSubData(Zt.type,on,dn),Ee.freeType(dn)}return Pt},pt.profile&&(Pt.stats=Zt.stats),Pt.destroy=function(){ht(Zt)},Pt},createStream:function(wt,Nt){var _t=Et.pop();return _t||(_t=new He(wt)),_t.bind(),dt(_t,Nt,35040,0,1,!1),_t},destroyStream:function(wt){Et.push(wt)},clear:function(){Te(St).forEach(ht),Et.forEach(ht)},getBuffer:function(wt){return wt&&wt._buffer instanceof He?wt._buffer:null},restore:function(){Te(St).forEach(function(wt){wt.buffer=Je.createBuffer(),Je.bindBuffer(wt.type,wt.buffer),Je.bufferData(wt.type,wt.persistentData||wt.byteLength,wt.usage)})},_initBuffer:dt}}(_t,$t,Je,function(Jt){return pn.destroyBuffer(Jt)}),yn=function g(Je,ot,pt,xt){function He(wt){this.id=kt++,ht[this.id]=this,this.buffer=wt,this.primType=4,this.type=this.vertCount=0}function Ge(wt,Nt,_t,Mt,Pt,Zt,$t){var Xt;if(wt.buffer.bind(),Nt?((Xt=$t)||ke(Nt)&&(!i(Nt)||ke(Nt.data))||(Xt=ot.oes_element_index_uint?5125:5123),pt._initBuffer(wt.buffer,Nt,_t,Xt,3)):(Je.bufferData(34963,Zt,_t),wt.buffer.dtype=Xt||5121,wt.buffer.usage=_t,wt.buffer.dimension=3,wt.buffer.byteLength=Zt),Xt=$t,!$t){switch(wt.buffer.dtype){case 5121:case 5120:Xt=5121;break;case 5123:case 5122:Xt=5123;break;case 5125:case 5124:Xt=5125}wt.buffer.dtype=Xt}wt.type=Xt,0>(Nt=Pt)&&(Nt=wt.buffer.byteLength,5123===Xt?Nt>>=1:5125===Xt&&(Nt>>=2)),wt.vertCount=Nt,Nt=Mt,0>Mt&&(Nt=4,1===(Mt=wt.buffer.dimension)&&(Nt=0),2===Mt&&(Nt=1),3===Mt&&(Nt=4)),wt.primType=Nt}function dt(wt){xt.elementsCount--,delete ht[wt.id],wt.buffer.destroy(),wt.buffer=null}var ht={},kt=0,St={uint8:5121,uint16:5123};ot.oes_element_index_uint&&(St.uint32=5125),He.prototype.bind=function(){this.buffer.bind()};var Et=[];return{create:function(wt,Nt){function _t(Zt){if(Zt)if("number"==typeof Zt)Mt(Zt),Pt.primType=4,Pt.vertCount=0|Zt,Pt.type=5121;else{var $t=null,Xt=35044,dn=-1,on=-1,cn=0,tn=0;Array.isArray(Zt)||ke(Zt)||i(Zt)?$t=Zt:("data"in Zt&&($t=Zt.data),"usage"in Zt&&(Xt=Ie[Zt.usage]),"primitive"in Zt&&(dn=Ae[Zt.primitive]),"count"in Zt&&(on=0|Zt.count),"type"in Zt&&(tn=St[Zt.type]),"length"in Zt?cn=0|Zt.length:(cn=on,5123===tn||5122===tn?cn*=2:5125!==tn&&5124!==tn||(cn*=4))),Ge(Pt,$t,Xt,dn,on,cn,tn)}else Mt(),Pt.primType=4,Pt.vertCount=0,Pt.type=5121;return _t}var Mt=pt.create(null,34963,!0),Pt=new He(Mt._buffer);return xt.elementsCount++,_t(wt),_t._reglType="elements",_t._elements=Pt,_t.subdata=function(Zt,$t){return Mt.subdata(Zt,$t),_t},_t.destroy=function(){dt(Pt)},_t},createStream:function(wt){var Nt=Et.pop();return Nt||(Nt=new He(pt.create(null,34963,!0,!1)._buffer)),Ge(Nt,wt,35040,-1,-1,0,0),Nt},destroyStream:function(wt){Et.push(wt)},getElements:function(wt){return"function"==typeof wt&&wt._elements instanceof He?wt._elements:null},clear:function(){Te(ht).forEach(dt)}}}(_t,dn,rn,$t),pn=function P(Je,ot,pt,xt,He,Ge,dt){function ht(){this.id=++Et,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var _t=ot.oes_vertex_array_object;this.vao=_t?_t.createVertexArrayOES():null,wt[this.id]=this,this.buffers=[]}var kt=pt.maxAttributes,St=Array(kt);for(pt=0;pt<kt;++pt)St[pt]=new O;var Et=0,wt={},Nt={Record:O,scope:{},state:St,currentVAO:null,targetVAO:null,restore:ot.oes_vertex_array_object?function(){ot.oes_vertex_array_object&&Te(wt).forEach(function(_t){_t.refresh()})}:function(){},createVAO:function(_t){function Mt(Zt){var $t;Array.isArray(Zt)?($t=Zt,Pt.elements&&Pt.ownsElements&&Pt.elements.destroy(),Pt.elements=null,Pt.ownsElements=!1,Pt.offset=0,Pt.count=0,Pt.instances=-1,Pt.primitive=4):(Zt.elements?($t=Zt.elements,Pt.ownsElements?("function"==typeof $t&&"elements"===$t._reglType?Pt.elements.destroy():Pt.elements($t),Pt.ownsElements=!1):Ge.getElements(Zt.elements)?(Pt.elements=Zt.elements,Pt.ownsElements=!1):(Pt.elements=Ge.create(Zt.elements),Pt.ownsElements=!0)):(Pt.elements=null,Pt.ownsElements=!1),$t=Zt.attributes,Pt.offset=0,Pt.count=-1,Pt.instances=-1,Pt.primitive=4,Pt.elements&&(Pt.count=Pt.elements._elements.vertCount,Pt.primitive=Pt.elements._elements.primType),"offset"in Zt&&(Pt.offset=0|Zt.offset),"count"in Zt&&(Pt.count=0|Zt.count),"instances"in Zt&&(Pt.instances=0|Zt.instances),"primitive"in Zt&&(Pt.primitive=Ae[Zt.primitive])),Zt={};var Xt=Pt.attributes;Xt.length=$t.length;for(var dn=0;dn<$t.length;++dn){var on,cn=$t[dn],tn=Xt[dn]=new O,Cn=cn.data||cn;Array.isArray(Cn)||ke(Cn)||i(Cn)?(Pt.buffers[dn]&&(on=Pt.buffers[dn],ke(Cn)&&on._buffer.byteLength>=Cn.byteLength?on.subdata(Cn):(on.destroy(),Pt.buffers[dn]=null)),Pt.buffers[dn]||(on=Pt.buffers[dn]=He.create(cn,34962,!1,!0)),tn.buffer=He.getBuffer(on),tn.size=0|tn.buffer.dimension,tn.normalized=!1,tn.type=tn.buffer.dtype,tn.offset=0,tn.stride=0,tn.divisor=0,tn.state=1,Zt[dn]=1):He.getBuffer(cn)?(tn.buffer=He.getBuffer(cn),tn.size=0|tn.buffer.dimension,tn.normalized=!1,tn.type=tn.buffer.dtype,tn.offset=0,tn.stride=0,tn.divisor=0,tn.state=1):He.getBuffer(cn.buffer)?(tn.buffer=He.getBuffer(cn.buffer),tn.size=0|(+cn.size||tn.buffer.dimension),tn.normalized=!!cn.normalized||!1,tn.type="type"in cn?Ce[cn.type]:tn.buffer.dtype,tn.offset=0|(cn.offset||0),tn.stride=0|(cn.stride||0),tn.divisor=0|(cn.divisor||0),tn.state=1):"x"in cn&&(tn.x=+cn.x||0,tn.y=+cn.y||0,tn.z=+cn.z||0,tn.w=+cn.w||0,tn.state=2)}for(on=0;on<Pt.buffers.length;++on)!Zt[on]&&Pt.buffers[on]&&(Pt.buffers[on].destroy(),Pt.buffers[on]=null);return Pt.refresh(),Mt}var Pt=new ht;return xt.vaoCount+=1,Mt.destroy=function(){for(var Zt=0;Zt<Pt.buffers.length;++Zt)Pt.buffers[Zt]&&Pt.buffers[Zt].destroy();Pt.buffers.length=0,Pt.ownsElements&&(Pt.elements.destroy(),Pt.elements=null,Pt.ownsElements=!1),Pt.destroy()},Mt._vao=Pt,Mt._reglType="vao",Mt(_t)},getVAO:function(_t){return"function"==typeof _t&&_t._vao?_t._vao:null},destroyBuffer:function(_t){for(var Mt=0;Mt<St.length;++Mt){var Pt=St[Mt];Pt.buffer===_t&&(Je.disableVertexAttribArray(Mt),Pt.buffer=null)}},setVAO:ot.oes_vertex_array_object?function(_t){_t!==Nt.currentVAO&&(ot.oes_vertex_array_object.bindVertexArrayOES(_t?_t.vao:null),Nt.currentVAO=_t)}:function(_t){if(_t!==Nt.currentVAO){if(_t)_t.bindAttrs();else{for(var Mt=ot.angle_instanced_arrays,Pt=0;Pt<St.length;++Pt){var Zt=St[Pt];Zt.buffer?(Je.enableVertexAttribArray(Pt),Zt.buffer.bind(),Je.vertexAttribPointer(Pt,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offfset),Mt&&Zt.divisor&&Mt.vertexAttribDivisorANGLE(Pt,Zt.divisor)):(Je.disableVertexAttribArray(Pt),Je.vertexAttrib4f(Pt,Zt.x,Zt.y,Zt.z,Zt.w))}Je.bindBuffer(34963,dt.elements?dt.elements.buffer.buffer:null)}Nt.currentVAO=_t}},clear:ot.oes_vertex_array_object?function(){Te(wt).forEach(function(_t){_t.destroy()})}:function(){}};return ht.prototype.bindAttrs=function(){for(var _t=ot.angle_instanced_arrays,Mt=this.attributes,Pt=0;Pt<Mt.length;++Pt){var Zt=Mt[Pt];Zt.buffer?(Je.enableVertexAttribArray(Pt),Je.bindBuffer(34962,Zt.buffer.buffer),Je.vertexAttribPointer(Pt,Zt.size,Zt.type,Zt.normalized,Zt.stride,Zt.offset),_t&&Zt.divisor&&_t.vertexAttribDivisorANGLE(Pt,Zt.divisor)):(Je.disableVertexAttribArray(Pt),Je.vertexAttrib4f(Pt,Zt.x,Zt.y,Zt.z,Zt.w))}for(_t=Mt.length;_t<kt;++_t)Je.disableVertexAttribArray(_t);(_t=Ge.getElements(this.elements))?Je.bindBuffer(34963,_t.buffer.buffer):Je.bindBuffer(34963,null)},ht.prototype.refresh=function(){var _t=ot.oes_vertex_array_object;_t&&(_t.bindVertexArrayOES(this.vao),this.bindAttrs(),Nt.currentVAO=null,_t.bindVertexArrayOES(null))},ht.prototype.destroy=function(){if(this.vao){var _t=ot.oes_vertex_array_object;this===Nt.currentVAO&&(Nt.currentVAO=null,_t.bindVertexArrayOES(null)),_t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),wt[this.id]&&(delete wt[this.id],--xt.vaoCount)},Nt}(_t,dn,En,$t,rn,yn,tn),bn=function R(Je,ot,pt,xt){function He(Mt,Pt,Zt,$t){this.name=Mt,this.id=Pt,this.location=Zt,this.info=$t}function Ge(Mt,Pt){for(var Zt=0;Zt<Mt.length;++Zt)if(Mt[Zt].id===Pt.id)return void(Mt[Zt].location=Pt.location);Mt.push(Pt)}function dt(Mt,Pt,Zt){if(!(Xt=(Zt=35632===Mt?St:Et)[Pt])){var $t=ot.str(Pt),Xt=Je.createShader(Mt);Je.shaderSource(Xt,$t),Je.compileShader(Xt),Zt[Pt]=Xt}return Xt}function ht(Mt,Pt){this.id=_t++,this.fragId=Mt,this.vertId=Pt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,xt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kt(Mt,Pt,Zt){var $t;$t=dt(35632,Mt.fragId);var Xt=dt(35633,Mt.vertId);if(Pt=Mt.program=Je.createProgram(),Je.attachShader(Pt,$t),Je.attachShader(Pt,Xt),Zt)for($t=0;$t<Zt.length;++$t)Je.bindAttribLocation(Pt,(Xt=Zt[$t])[0],Xt[1]);Je.linkProgram(Pt),Xt=Je.getProgramParameter(Pt,35718),xt.profile&&(Mt.stats.uniformsCount=Xt);var dn=Mt.uniforms;for($t=0;$t<Xt;++$t)if(Zt=Je.getActiveUniform(Pt,$t))if(1<Zt.size)for(var on=0;on<Zt.size;++on){var cn=Zt.name.replace("[0]","["+on+"]");Ge(dn,new He(cn,ot.id(cn),Je.getUniformLocation(Pt,cn),Zt))}else Ge(dn,new He(Zt.name,ot.id(Zt.name),Je.getUniformLocation(Pt,Zt.name),Zt));for(Xt=Je.getProgramParameter(Pt,35721),xt.profile&&(Mt.stats.attributesCount=Xt),Mt=Mt.attributes,$t=0;$t<Xt;++$t)(Zt=Je.getActiveAttrib(Pt,$t))&&Ge(Mt,new He(Zt.name,ot.id(Zt.name),Je.getAttribLocation(Pt,Zt.name),Zt))}var St={},Et={},wt={},Nt=[],_t=0;return xt.profile&&(pt.getMaxUniformsCount=function(){var Mt=0;return Nt.forEach(function(Pt){Pt.stats.uniformsCount>Mt&&(Mt=Pt.stats.uniformsCount)}),Mt},pt.getMaxAttributesCount=function(){var Mt=0;return Nt.forEach(function(Pt){Pt.stats.attributesCount>Mt&&(Mt=Pt.stats.attributesCount)}),Mt}),{clear:function(){var Mt=Je.deleteShader.bind(Je);Te(St).forEach(Mt),St={},Te(Et).forEach(Mt),Et={},Nt.forEach(function(Pt){Je.deleteProgram(Pt.program)}),Nt.length=0,wt={},pt.shaderCount=0},program:function(Mt,Pt,Zt,$t){var Xt=wt[Pt];Xt||(Xt=wt[Pt]={});var dn=Xt[Mt];if(dn&&(dn.refCount++,!$t))return dn;var on=new ht(Pt,Mt);return pt.shaderCount++,kt(on,Zt,$t),dn||(Xt[Mt]=on),Nt.push(on),le(on,{destroy:function(){if(on.refCount--,0>=on.refCount){Je.deleteProgram(on.program);var cn=Nt.indexOf(on);Nt.splice(cn,1),pt.shaderCount--}0>=Xt[on.vertId].refCount&&(Je.deleteShader(Et[on.vertId]),delete Et[on.vertId],delete wt[on.fragId][on.vertId]),Object.keys(wt[on.fragId]).length||(Je.deleteShader(St[on.fragId]),delete St[on.fragId],delete wt[on.fragId])}})},restore:function(){St={},Et={};for(var Mt=0;Mt<Nt.length;++Mt)kt(Nt[Mt],null,Nt[Mt].attributes.map(function(Pt){return[Pt.location,Pt.name]}))},shader:dt,frag:-1,vert:-1}}(_t,Zt,$t,Je),In=function D(Je,ot,pt,xt,He,Ge,dt){function ht(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function kt(Qt,zn){Qt.internalformat=zn.internalformat,Qt.format=zn.format,Qt.type=zn.type,Qt.compressed=zn.compressed,Qt.premultiplyAlpha=zn.premultiplyAlpha,Qt.flipY=zn.flipY,Qt.unpackAlignment=zn.unpackAlignment,Qt.colorSpace=zn.colorSpace,Qt.width=zn.width,Qt.height=zn.height,Qt.channels=zn.channels}function St(Qt,zn){if("object"==typeof zn&&zn){"premultiplyAlpha"in zn&&(Qt.premultiplyAlpha=zn.premultiplyAlpha),"flipY"in zn&&(Qt.flipY=zn.flipY),"alignment"in zn&&(Qt.unpackAlignment=zn.alignment),"colorSpace"in zn&&(Qt.colorSpace=Wn[zn.colorSpace]),"type"in zn&&(Qt.type=Nn[zn.type]);var zt=Qt.width,sn=Qt.height,hn=Qt.channels,Dn=!1;"shape"in zn?(zt=zn.shape[0],sn=zn.shape[1],3===zn.shape.length&&(hn=zn.shape[2],Dn=!0)):("radius"in zn&&(zt=sn=zn.radius),"width"in zn&&(zt=zn.width),"height"in zn&&(sn=zn.height),"channels"in zn&&(hn=zn.channels,Dn=!0)),Qt.width=0|zt,Qt.height=0|sn,Qt.channels=0|hn,zt=!1,"format"in zn&&(sn=Qt.internalformat=Xn[zt=zn.format],Qt.format=Sn[sn],zt in Nn&&!("type"in zn)&&(Qt.type=Nn[zt]),zt in yr&&(Qt.compressed=!0),zt=!0),!Dn&&zt?Qt.channels=be[Qt.format]:Dn&&!zt&&Qt.channels!==Ke[Qt.format]&&(Qt.format=Qt.internalformat=Ke[Qt.channels])}}function Et(Qt){Je.pixelStorei(37440,Qt.flipY),Je.pixelStorei(37441,Qt.premultiplyAlpha),Je.pixelStorei(37443,Qt.colorSpace),Je.pixelStorei(3317,Qt.unpackAlignment)}function wt(){ht.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Nt(Qt,zn){var zt=null;if(b(zn)?zt=zn:zn&&(St(Qt,zn),"x"in zn&&(Qt.xOffset=0|zn.x),"y"in zn&&(Qt.yOffset=0|zn.y),b(zn.data)&&(zt=zn.data)),zn.copy){var sn=He.viewportWidth,hn=He.viewportHeight;Qt.width=Qt.width||sn-Qt.xOffset,Qt.height=Qt.height||hn-Qt.yOffset,Qt.needsCopy=!0}else if(zt){if(ke(zt))Qt.channels=Qt.channels||4,Qt.data=zt,"type"in zn||5121!==Qt.type||(Qt.type=0|je[Object.prototype.toString.call(zt)]);else if(p(zt)){switch(Qt.channels=Qt.channels||4,hn=(sn=zt).length,Qt.type){case 5121:case 5123:case 5125:case 5126:(hn=Ee.allocType(Qt.type,hn)).set(sn),Qt.data=hn;break;case 36193:Qt.data=h(sn)}Qt.alignment=1,Qt.needsFree=!0}else if(i(zt)){sn=zt.data,Array.isArray(sn)||5121!==Qt.type||(Qt.type=0|je[Object.prototype.toString.call(sn)]);var Dn,Rn,Hn,Mn,un=zt.stride;3===(hn=zt.shape).length?(Hn=hn[2],Mn=un[2]):Mn=Hn=1,Dn=hn[0],Rn=hn[1],hn=un[0],un=un[1],Qt.alignment=1,Qt.width=Dn,Qt.height=Rn,Qt.channels=Hn,Qt.format=Qt.internalformat=Ke[Hn],Qt.needsFree=!0,Dn=Mn,zt=zt.offset;for(var fn=Ee.allocType(36193===Qt.type?5126:Qt.type,(Hn=Qt.width)*(Mn=Qt.height)*(Rn=Qt.channels)),Tn=0,An=0;An<Mn;++An)for(var Gn=0;Gn<Hn;++Gn)for(var Zn=0;Zn<Rn;++Zn)fn[Tn++]=sn[hn*Gn+un*An+Dn*Zn+zt];M(Qt,fn)}else if(x(zt)===Oe||x(zt)===Le||x(zt)===Ue)Qt.element=x(zt)===Oe||x(zt)===Le?zt:zt.canvas,Qt.width=Qt.element.width,Qt.height=Qt.element.height,Qt.channels=4;else if(x(zt)===Ze)Qt.element=zt,Qt.width=zt.width,Qt.height=zt.height,Qt.channels=4;else if(x(zt)===We)Qt.element=zt,Qt.width=zt.naturalWidth,Qt.height=zt.naturalHeight,Qt.channels=4;else if(x(zt)===et)Qt.element=zt,Qt.width=zt.videoWidth,Qt.height=zt.videoHeight,Qt.channels=4;else if(_(zt)){for(sn=Qt.width||zt[0].length,hn=Qt.height||zt.length,un=Qt.channels,un=w(zt[0][0])?un||zt[0][0].length:un||1,Dn=we.shape(zt),Hn=1,Mn=0;Mn<Dn.length;++Mn)Hn*=Dn[Mn];Hn=Ee.allocType(36193===Qt.type?5126:Qt.type,Hn),we.flatten(zt,Dn,"",Hn),M(Qt,Hn),Qt.alignment=1,Qt.width=sn,Qt.height=hn,Qt.channels=un,Qt.format=Qt.internalformat=Ke[un],Qt.needsFree=!0}}else Qt.width=Qt.width||1,Qt.height=Qt.height||1,Qt.channels=Qt.channels||4}function _t(Qt,zn,zt,sn,hn){var Dn=Qt.element,Rn=Qt.data,Hn=Qt.internalformat,Mn=Qt.format,un=Qt.type,fn=Qt.width,Tn=Qt.height;Et(Qt),Dn?Je.texSubImage2D(zn,hn,zt,sn,Mn,un,Dn):Qt.compressed?Je.compressedTexSubImage2D(zn,hn,zt,sn,Hn,fn,Tn,Rn):Qt.needsCopy?(xt(),Je.copyTexSubImage2D(zn,hn,zt,sn,Qt.xOffset,Qt.yOffset,fn,Tn)):Je.texSubImage2D(zn,hn,zt,sn,fn,Tn,Mn,un,Rn)}function Mt(){return Ln.pop()||new wt}function Pt(Qt){Qt.needsFree&&Ee.freeType(Qt.data),wt.call(Qt),Ln.push(Qt)}function Zt(){ht.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function $t(Qt,zn,zt){var sn=Qt.images[0]=Mt();Qt.mipmask=1,sn.width=Qt.width=zn,sn.height=Qt.height=zt,sn.channels=Qt.channels=4}function Xt(Qt,zn){var zt=null;if(b(zn))kt(zt=Qt.images[0]=Mt(),Qt),Nt(zt,zn),Qt.mipmask=1;else if(St(Qt,zn),Array.isArray(zn.mipmap))for(var sn=zn.mipmap,hn=0;hn<sn.length;++hn)kt(zt=Qt.images[hn]=Mt(),Qt),zt.width>>=hn,zt.height>>=hn,Nt(zt,sn[hn]),Qt.mipmask|=1<<hn;else kt(zt=Qt.images[0]=Mt(),Qt),Nt(zt,zn),Qt.mipmask=1;kt(Qt,Qt.images[0])}function dn(Qt,zn){for(var zt=Qt.images,sn=0;sn<zt.length&&zt[sn];++sn){var hn=zt[sn],Dn=zn,Rn=sn,Hn=hn.element,Mn=hn.data,un=hn.internalformat,fn=hn.format,Tn=hn.type,An=hn.width,Gn=hn.height;Et(hn),Hn?Je.texImage2D(Dn,Rn,fn,fn,Tn,Hn):hn.compressed?Je.compressedTexImage2D(Dn,Rn,un,An,Gn,0,Mn):hn.needsCopy?(xt(),Je.copyTexImage2D(Dn,Rn,fn,hn.xOffset,hn.yOffset,An,Gn,0)):Je.texImage2D(Dn,Rn,fn,An,Gn,0,fn,Tn,Mn||null)}}function on(){var Qt=Vn.pop()||new Zt;ht.call(Qt);for(var zn=Qt.mipmask=0;16>zn;++zn)Qt.images[zn]=null;return Qt}function cn(Qt){for(var zn=Qt.images,zt=0;zt<zn.length;++zt)zn[zt]&&Pt(zn[zt]),zn[zt]=null;Vn.push(Qt)}function tn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Cn(Qt,zn){"min"in zn&&(Qt.minFilter=qn[zn.min],0<=qe.indexOf(Qt.minFilter)&&!("faces"in zn)&&(Qt.genMipmaps=!0)),"mag"in zn&&(Qt.magFilter=_n[zn.mag]);var zt=Qt.wrapS,sn=Qt.wrapT;if("wrap"in zn){var hn=zn.wrap;"string"==typeof hn?zt=sn=In[hn]:Array.isArray(hn)&&(zt=In[hn[0]],sn=In[hn[1]])}else"wrapS"in zn&&(zt=In[zn.wrapS]),"wrapT"in zn&&(sn=In[zn.wrapT]);if(Qt.wrapS=zt,Qt.wrapT=sn,"anisotropic"in zn&&(Qt.anisotropic=zn.anisotropic),"mipmap"in zn){switch(zt=!1,typeof zn.mipmap){case"string":Qt.mipmapHint=bn[zn.mipmap],zt=Qt.genMipmaps=!0;break;case"boolean":zt=Qt.genMipmaps=zn.mipmap;break;case"object":Qt.genMipmaps=!1,zt=!0}!zt||"min"in zn||(Qt.minFilter=9984)}}function Fn(Qt,zn){Je.texParameteri(zn,10241,Qt.minFilter),Je.texParameteri(zn,10240,Qt.magFilter),Je.texParameteri(zn,10242,Qt.wrapS),Je.texParameteri(zn,10243,Qt.wrapT),ot.ext_texture_filter_anisotropic&&Je.texParameteri(zn,34046,Qt.anisotropic),Qt.genMipmaps&&(Je.hint(33170,Qt.mipmapHint),Je.generateMipmap(zn))}function En(Qt){ht.call(this),this.mipmask=0,this.internalformat=6408,this.id=cr++,this.refCount=1,this.target=Qt,this.texture=Je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new tn,dt.profile&&(this.stats={size:0})}function rn(Qt){Je.activeTexture(33984),Je.bindTexture(Qt.target,Qt.texture)}function yn(){var Qt=er[0];Qt?Je.bindTexture(Qt.target,Qt.texture):Je.bindTexture(3553,null)}function pn(Qt){var zn=Qt.texture,zt=Qt.unit,sn=Qt.target;0<=zt&&(Je.activeTexture(33984+zt),Je.bindTexture(sn,null),er[zt]=null),Je.deleteTexture(zn),Qt.texture=null,Qt.params=null,Qt.pixels=null,Qt.refCount=0,delete xn[Qt.id],Ge.textureCount--}var bn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},In={repeat:10497,clamp:33071,mirror:33648},_n={nearest:9728,linear:9729},qn=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},_n),Wn={none:0,browser:37444},Nn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Xn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},yr={};ot.ext_srgb&&(Xn.srgb=35904,Xn.srgba=35906),ot.oes_texture_float&&(Nn.float32=Nn.float=5126),ot.oes_texture_half_float&&(Nn.float16=Nn["half float"]=36193),ot.webgl_depth_texture&&(le(Xn,{depth:6402,"depth stencil":34041}),le(Nn,{uint16:5123,uint32:5125,"depth stencil":34042})),ot.webgl_compressed_texture_s3tc&&le(yr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ot.webgl_compressed_texture_atc&&le(yr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ot.webgl_compressed_texture_pvrtc&&le(yr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ot.webgl_compressed_texture_etc1&&(yr["rgb etc1"]=36196);var fr=Array.prototype.slice.call(Je.getParameter(34467));Object.keys(yr).forEach(function(Qt){var zn=yr[Qt];0<=fr.indexOf(zn)&&(Xn[Qt]=zn)});var Er=Object.keys(Xn);pt.textureFormats=Er;var gr=[];Object.keys(Xn).forEach(function(Qt){gr[Xn[Qt]]=Qt});var mr=[];Object.keys(Nn).forEach(function(Qt){mr[Nn[Qt]]=Qt});var zr=[];Object.keys(_n).forEach(function(Qt){zr[_n[Qt]]=Qt});var Jt=[];Object.keys(qn).forEach(function(Qt){Jt[qn[Qt]]=Qt});var an=[];Object.keys(In).forEach(function(Qt){an[In[Qt]]=Qt});var Sn=Er.reduce(function(Qt,zn){var zt=Xn[zn];return Qt[zt]=6409===zt||6406===zt||6409===zt||6410===zt||6402===zt||34041===zt||ot.ext_srgb&&(35904===zt||35906===zt)?zt:32855===zt||0<=zn.indexOf("rgba")?6408:6407,Qt},{}),Ln=[],Vn=[],cr=0,xn={},Qn=pt.maxTextureUnits,er=Array(Qn).map(function(){return null});return le(En.prototype,{bind:function(){this.bindCount+=1;var Qt=this.unit;if(0>Qt){for(var zn=0;zn<Qn;++zn){var zt=er[zn];if(zt){if(0<zt.bindCount)continue;zt.unit=-1}er[zn]=this,Qt=zn;break}dt.profile&&Ge.maxTextureUnits<Qt+1&&(Ge.maxTextureUnits=Qt+1),this.unit=Qt,Je.activeTexture(33984+Qt),Je.bindTexture(this.target,this.texture)}return Qt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&pn(this)}}),dt.profile&&(Ge.getTotalTextureSize=function(){var Qt=0;return Object.keys(xn).forEach(function(zn){Qt+=xn[zn].stats.size}),Qt}),{create2D:function(Qt,zn){function zt(hn,Dn){var Rn=sn.texInfo;tn.call(Rn);var Hn=on();return"number"==typeof hn?$t(Hn,0|hn,"number"==typeof Dn?0|Dn:0|hn):hn?(Cn(Rn,hn),Xt(Hn,hn)):$t(Hn,1,1),Rn.genMipmaps&&(Hn.mipmask=(Hn.width<<1)-1),sn.mipmask=Hn.mipmask,kt(sn,Hn),sn.internalformat=Hn.internalformat,zt.width=Hn.width,zt.height=Hn.height,rn(sn),dn(Hn,3553),Fn(Rn,3553),yn(),cn(Hn),dt.profile&&(sn.stats.size=m(sn.internalformat,sn.type,Hn.width,Hn.height,Rn.genMipmaps,!1)),zt.format=gr[sn.internalformat],zt.type=mr[sn.type],zt.mag=zr[Rn.magFilter],zt.min=Jt[Rn.minFilter],zt.wrapS=an[Rn.wrapS],zt.wrapT=an[Rn.wrapT],zt}var sn=new En(3553);return xn[sn.id]=sn,Ge.textureCount++,zt(Qt,zn),zt.subimage=function(hn,Dn,Rn,Hn){Dn|=0,Rn|=0,Hn|=0;var Mn=Mt();return kt(Mn,sn),Mn.width=0,Mn.height=0,Nt(Mn,hn),Mn.width=Mn.width||(sn.width>>Hn)-Dn,Mn.height=Mn.height||(sn.height>>Hn)-Rn,rn(sn),_t(Mn,3553,Dn,Rn,Hn),yn(),Pt(Mn),zt},zt.resize=function(hn,Dn){var Rn=0|hn,Hn=0|Dn||Rn;if(Rn===sn.width&&Hn===sn.height)return zt;zt.width=sn.width=Rn,zt.height=sn.height=Hn,rn(sn);for(var Mn=0;sn.mipmask>>Mn;++Mn){var un=Rn>>Mn,fn=Hn>>Mn;if(!un||!fn)break;Je.texImage2D(3553,Mn,sn.format,un,fn,0,sn.format,sn.type,null)}return yn(),dt.profile&&(sn.stats.size=m(sn.internalformat,sn.type,Rn,Hn,!1,!1)),zt},zt._reglType="texture2d",zt._texture=sn,dt.profile&&(zt.stats=sn.stats),zt.destroy=function(){sn.decRef()},zt},createCube:function(Qt,zn,zt,sn,hn,Dn){function Rn(un,fn,Tn,An,Gn,Zn){var lr,nr=Hn.texInfo;for(tn.call(nr),lr=0;6>lr;++lr)Mn[lr]=on();if("number"!=typeof un&&un){if("object"==typeof un)if(fn)Xt(Mn[0],un),Xt(Mn[1],fn),Xt(Mn[2],Tn),Xt(Mn[3],An),Xt(Mn[4],Gn),Xt(Mn[5],Zn);else if(Cn(nr,un),St(Hn,un),"faces"in un)for(un=un.faces,lr=0;6>lr;++lr)kt(Mn[lr],Hn),Xt(Mn[lr],un[lr]);else for(lr=0;6>lr;++lr)Xt(Mn[lr],un)}else for(un=0|un||1,lr=0;6>lr;++lr)$t(Mn[lr],un,un);for(kt(Hn,Mn[0]),Hn.mipmask=nr.genMipmaps?(Mn[0].width<<1)-1:Mn[0].mipmask,Hn.internalformat=Mn[0].internalformat,Rn.width=Mn[0].width,Rn.height=Mn[0].height,rn(Hn),lr=0;6>lr;++lr)dn(Mn[lr],34069+lr);for(Fn(nr,34067),yn(),dt.profile&&(Hn.stats.size=m(Hn.internalformat,Hn.type,Rn.width,Rn.height,nr.genMipmaps,!0)),Rn.format=gr[Hn.internalformat],Rn.type=mr[Hn.type],Rn.mag=zr[nr.magFilter],Rn.min=Jt[nr.minFilter],Rn.wrapS=an[nr.wrapS],Rn.wrapT=an[nr.wrapT],lr=0;6>lr;++lr)cn(Mn[lr]);return Rn}var Hn=new En(34067);xn[Hn.id]=Hn,Ge.cubeCount++;var Mn=Array(6);return Rn(Qt,zn,zt,sn,hn,Dn),Rn.subimage=function(un,fn,Tn,An,Gn){Tn|=0,An|=0,Gn|=0;var Zn=Mt();return kt(Zn,Hn),Zn.width=0,Zn.height=0,Nt(Zn,fn),Zn.width=Zn.width||(Hn.width>>Gn)-Tn,Zn.height=Zn.height||(Hn.height>>Gn)-An,rn(Hn),_t(Zn,34069+un,Tn,An,Gn),yn(),Pt(Zn),Rn},Rn.resize=function(un){if((un|=0)!==Hn.width){Rn.width=Hn.width=un,Rn.height=Hn.height=un,rn(Hn);for(var fn=0;6>fn;++fn)for(var Tn=0;Hn.mipmask>>Tn;++Tn)Je.texImage2D(34069+fn,Tn,Hn.format,un>>Tn,un>>Tn,0,Hn.format,Hn.type,null);return yn(),dt.profile&&(Hn.stats.size=m(Hn.internalformat,Hn.type,Rn.width,Rn.height,!1,!0)),Rn}},Rn._reglType="textureCube",Rn._texture=Hn,dt.profile&&(Rn.stats=Hn.stats),Rn.destroy=function(){Hn.decRef()},Rn},clear:function(){for(var Qt=0;Qt<Qn;++Qt)Je.activeTexture(33984+Qt),Je.bindTexture(3553,null),er[Qt]=null;Te(xn).forEach(pn),Ge.cubeCount=0,Ge.textureCount=0},getTexture:function(Qt){return null},restore:function(){for(var Qt=0;Qt<Qn;++Qt){var zn=er[Qt];zn&&(zn.bindCount=0,zn.unit=-1,er[Qt]=null)}Te(xn).forEach(function(zt){zt.texture=Je.createTexture(),Je.bindTexture(zt.target,zt.texture);for(var sn=0;32>sn;++sn)if(zt.mipmask&1<<sn)if(3553===zt.target)Je.texImage2D(3553,sn,zt.internalformat,zt.width>>sn,zt.height>>sn,0,zt.internalformat,zt.type,null);else for(var hn=0;6>hn;++hn)Je.texImage2D(34069+hn,sn,zt.internalformat,zt.width>>sn,zt.height>>sn,0,zt.internalformat,zt.type,null);Fn(zt.texInfo,zt.target)})},refresh:function(){for(var Qt=0;Qt<Qn;++Qt){var zn=er[Qt];zn&&(zn.bindCount=0,zn.unit=-1,er[Qt]=null),Je.activeTexture(33984+Qt),Je.bindTexture(3553,null),Je.bindTexture(34067,null)}}}}(_t,dn,En,function(){Wn.procs.poll()},Fn,$t,Je),_n=function(Je,ot,pt,xt,He){function Ge(wt){this.id=St++,this.refCount=1,this.renderbuffer=wt,this.format=32854,this.height=this.width=0,He.profile&&(this.stats={size:0})}function dt(wt){var Nt=wt.renderbuffer;Je.bindRenderbuffer(36161,null),Je.deleteRenderbuffer(Nt),wt.renderbuffer=null,wt.refCount=0,delete Et[wt.id],xt.renderbufferCount--}var ht={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ot.ext_srgb&&(ht.srgba=35907),ot.ext_color_buffer_half_float&&(ht.rgba16f=34842,ht.rgb16f=34843),ot.webgl_color_buffer_float&&(ht.rgba32f=34836);var kt=[];Object.keys(ht).forEach(function(wt){kt[ht[wt]]=wt});var St=0,Et={};return Ge.prototype.decRef=function(){0>=--this.refCount&&dt(this)},He.profile&&(xt.getTotalRenderbufferSize=function(){var wt=0;return Object.keys(Et).forEach(function(Nt){wt+=Et[Nt].stats.size}),wt}),{create:function(wt,Nt){function _t(Pt,Zt){var $t=0,Xt=0,dn=32854;if("object"==typeof Pt&&Pt?("shape"in Pt?($t=0|(Xt=Pt.shape)[0],Xt=0|Xt[1]):("radius"in Pt&&($t=Xt=0|Pt.radius),"width"in Pt&&($t=0|Pt.width),"height"in Pt&&(Xt=0|Pt.height)),"format"in Pt&&(dn=ht[Pt.format])):"number"==typeof Pt?($t=0|Pt,Xt="number"==typeof Zt?0|Zt:$t):Pt||($t=Xt=1),$t!==Mt.width||Xt!==Mt.height||dn!==Mt.format)return _t.width=Mt.width=$t,_t.height=Mt.height=Xt,Mt.format=dn,Je.bindRenderbuffer(36161,Mt.renderbuffer),Je.renderbufferStorage(36161,dn,$t,Xt),He.profile&&(Mt.stats.size=ut[Mt.format]*Mt.width*Mt.height),_t.format=kt[Mt.format],_t}var Mt=new Ge(Je.createRenderbuffer());return Et[Mt.id]=Mt,xt.renderbufferCount++,_t(wt,Nt),_t.resize=function(Pt,Zt){var $t=0|Pt,Xt=0|Zt||$t;return $t===Mt.width&&Xt===Mt.height||(_t.width=Mt.width=$t,_t.height=Mt.height=Xt,Je.bindRenderbuffer(36161,Mt.renderbuffer),Je.renderbufferStorage(36161,Mt.format,$t,Xt),He.profile&&(Mt.stats.size=ut[Mt.format]*Mt.width*Mt.height)),_t},_t._reglType="renderbuffer",_t._renderbuffer=Mt,He.profile&&(_t.stats=Mt.stats),_t.destroy=function(){Mt.decRef()},_t},clear:function(){Te(Et).forEach(dt)},restore:function(){Te(Et).forEach(function(wt){wt.renderbuffer=Je.createRenderbuffer(),Je.bindRenderbuffer(36161,wt.renderbuffer),Je.renderbufferStorage(36161,wt.format,wt.width,wt.height)}),Je.bindRenderbuffer(36161,null)}}}(_t,dn,0,$t,Je),qn=function S(Je,ot,pt,xt,He,Ge){function dt(En,rn,yn){this.target=En,this.texture=rn,this.renderbuffer=yn;var pn=En=0;rn?(En=rn.width,pn=rn.height):yn&&(En=yn.width,pn=yn.height),this.width=En,this.height=pn}function ht(En){En&&(En.texture&&En.texture._texture.decRef(),En.renderbuffer&&En.renderbuffer._renderbuffer.decRef())}function kt(En,rn,yn){En&&(En.texture?En.texture._texture.refCount+=1:En.renderbuffer._renderbuffer.refCount+=1)}function St(En,rn){rn&&(rn.texture?Je.framebufferTexture2D(36160,En,rn.target,rn.texture._texture.texture,0):Je.framebufferRenderbuffer(36160,En,36161,rn.renderbuffer._renderbuffer.renderbuffer))}function Et(En){var rn=3553,yn=null,pn=null,bn=En;return"object"==typeof En&&(bn=En.data,"target"in En&&(rn=0|En.target)),"texture2d"===(En=bn._reglType)||"textureCube"===En?yn=bn:"renderbuffer"===En&&(pn=bn,rn=36161),new dt(rn,yn,pn)}function wt(En,rn,yn,pn,bn){return yn?((En=xt.create2D({width:En,height:rn,format:pn,type:bn}))._texture.refCount=0,new dt(3553,En,null)):((En=He.create({width:En,height:rn,format:pn}))._renderbuffer.refCount=0,new dt(36161,null,En))}function Nt(En){return En&&(En.texture||En.renderbuffer)}function _t(En,rn,yn){En&&(En.texture?En.texture.resize(rn,yn):En.renderbuffer&&En.renderbuffer.resize(rn,yn),En.width=rn,En.height=yn)}function Mt(){this.id=Cn++,Fn[this.id]=this,this.framebuffer=Je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Pt(En){En.colorAttachments.forEach(ht),ht(En.depthAttachment),ht(En.stencilAttachment),ht(En.depthStencilAttachment)}function Zt(En){Je.deleteFramebuffer(En.framebuffer),En.framebuffer=null,Ge.framebufferCount--,delete Fn[En.id]}function $t(En){var rn;Je.bindFramebuffer(36160,En.framebuffer);var yn=En.colorAttachments;for(rn=0;rn<yn.length;++rn)St(36064+rn,yn[rn]);for(rn=yn.length;rn<pt.maxColorAttachments;++rn)Je.framebufferTexture2D(36160,36064+rn,3553,null,0);Je.framebufferTexture2D(36160,33306,3553,null,0),Je.framebufferTexture2D(36160,36096,3553,null,0),Je.framebufferTexture2D(36160,36128,3553,null,0),St(36096,En.depthAttachment),St(36128,En.stencilAttachment),St(33306,En.depthStencilAttachment),Je.checkFramebufferStatus(36160),Je.isContextLost(),Je.bindFramebuffer(36160,dn.next?dn.next.framebuffer:null),dn.cur=dn.next,Je.getError()}function Xt(En,rn){function yn(bn,In){var _n,qn=0,Wn=0,Nn=!0,Xn=!0;_n=null;var yr=!0,fr="rgba",Er="uint8",gr=1,mr=null,zr=null,Jt=null,an=!1;"number"==typeof bn?(qn=0|bn,Wn=0|In||qn):bn?("shape"in bn?(qn=(Wn=bn.shape)[0],Wn=Wn[1]):("radius"in bn&&(qn=Wn=bn.radius),"width"in bn&&(qn=bn.width),"height"in bn&&(Wn=bn.height)),("color"in bn||"colors"in bn)&&(_n=bn.color||bn.colors,Array.isArray(_n)),_n||("colorCount"in bn&&(gr=0|bn.colorCount),"colorTexture"in bn&&(yr=!!bn.colorTexture,fr="rgba4"),"colorType"in bn&&(Er=bn.colorType,!yr)&&("half float"===Er||"float16"===Er?fr="rgba16f":"float"!==Er&&"float32"!==Er||(fr="rgba32f")),"colorFormat"in bn&&(0<=on.indexOf(fr=bn.colorFormat)?yr=!0:0<=cn.indexOf(fr)&&(yr=!1))),("depthTexture"in bn||"depthStencilTexture"in bn)&&(an=!(!bn.depthTexture&&!bn.depthStencilTexture)),"depth"in bn&&("boolean"==typeof bn.depth?Nn=bn.depth:(mr=bn.depth,Xn=!1)),"stencil"in bn&&("boolean"==typeof bn.stencil?Xn=bn.stencil:(zr=bn.stencil,Nn=!1)),"depthStencil"in bn&&("boolean"==typeof bn.depthStencil?Nn=Xn=bn.depthStencil:(Jt=bn.depthStencil,Xn=Nn=!1))):qn=Wn=1;var Sn=null,Ln=null,Vn=null,cr=null;if(Array.isArray(_n))Sn=_n.map(Et);else if(_n)Sn=[Et(_n)];else for(Sn=Array(gr),_n=0;_n<gr;++_n)Sn[_n]=wt(qn,Wn,yr,fr,Er);for(qn=qn||Sn[0].width,Wn=Wn||Sn[0].height,mr?Ln=Et(mr):Nn&&!Xn&&(Ln=wt(qn,Wn,an,"depth","uint32")),zr?Vn=Et(zr):Xn&&!Nn&&(Vn=wt(qn,Wn,!1,"stencil","uint8")),Jt?cr=Et(Jt):!mr&&!zr&&Xn&&Nn&&(cr=wt(qn,Wn,an,"depth stencil","depth stencil")),Nn=null,_n=0;_n<Sn.length;++_n)kt(Sn[_n]),Sn[_n]&&Sn[_n].texture&&(Xn=Dt[Sn[_n].texture._texture.format]*vt[Sn[_n].texture._texture.type],null===Nn&&(Nn=Xn));return kt(Ln),kt(Vn),kt(cr),Pt(pn),pn.width=qn,pn.height=Wn,pn.colorAttachments=Sn,pn.depthAttachment=Ln,pn.stencilAttachment=Vn,pn.depthStencilAttachment=cr,yn.color=Sn.map(Nt),yn.depth=Nt(Ln),yn.stencil=Nt(Vn),yn.depthStencil=Nt(cr),yn.width=pn.width,yn.height=pn.height,$t(pn),yn}var pn=new Mt;return Ge.framebufferCount++,yn(En,rn),le(yn,{resize:function(bn,In){var _n=Math.max(0|bn,1),qn=Math.max(0|In||_n,1);if(_n===pn.width&&qn===pn.height)return yn;for(var Wn=pn.colorAttachments,Nn=0;Nn<Wn.length;++Nn)_t(Wn[Nn],_n,qn);return _t(pn.depthAttachment,_n,qn),_t(pn.stencilAttachment,_n,qn),_t(pn.depthStencilAttachment,_n,qn),pn.width=yn.width=_n,pn.height=yn.height=qn,$t(pn),yn},_reglType:"framebuffer",_framebuffer:pn,destroy:function(){Zt(pn),Pt(pn)},use:function(bn){dn.setFBO({framebuffer:yn},bn)}})}var dn={cur:null,next:null,dirty:!1,setFBO:null},on=["rgba"],cn=["rgba4","rgb565","rgb5 a1"];ot.ext_srgb&&cn.push("srgba"),ot.ext_color_buffer_half_float&&cn.push("rgba16f","rgb16f"),ot.webgl_color_buffer_float&&cn.push("rgba32f");var tn=["uint8"];ot.oes_texture_half_float&&tn.push("half float","float16"),ot.oes_texture_float&&tn.push("float","float32");var Cn=0,Fn={};return le(dn,{getFramebuffer:function(En){return"function"==typeof En&&"framebuffer"===En._reglType&&(En=En._framebuffer)instanceof Mt?En:null},create:Xt,createCube:function(En){function rn(pn){var bn,In={color:null},_n=0,qn=null;bn="rgba";var Wn="uint8",Nn=1;if("number"==typeof pn?_n=0|pn:pn?("shape"in pn?_n=pn.shape[0]:("radius"in pn&&(_n=0|pn.radius),"width"in pn?_n=0|pn.width:"height"in pn&&(_n=0|pn.height)),("color"in pn||"colors"in pn)&&(qn=pn.color||pn.colors,Array.isArray(qn)),qn||("colorCount"in pn&&(Nn=0|pn.colorCount),"colorType"in pn&&(Wn=pn.colorType),"colorFormat"in pn&&(bn=pn.colorFormat)),"depth"in pn&&(In.depth=pn.depth),"stencil"in pn&&(In.stencil=pn.stencil),"depthStencil"in pn&&(In.depthStencil=pn.depthStencil)):_n=1,qn)if(Array.isArray(qn))for(pn=[],bn=0;bn<qn.length;++bn)pn[bn]=qn[bn];else pn=[qn];else for(pn=Array(Nn),qn={radius:_n,format:bn,type:Wn},bn=0;bn<Nn;++bn)pn[bn]=xt.createCube(qn);for(In.color=Array(pn.length),bn=0;bn<pn.length;++bn)Nn=pn[bn],_n=_n||Nn.width,In.color[bn]={target:34069,data:pn[bn]};for(bn=0;6>bn;++bn){for(Nn=0;Nn<pn.length;++Nn)In.color[Nn].target=34069+bn;0<bn&&(In.depth=yn[0].depth,In.stencil=yn[0].stencil,In.depthStencil=yn[0].depthStencil),yn[bn]?yn[bn](In):yn[bn]=Xt(In)}return le(rn,{width:_n,height:_n,color:pn})}var yn=Array(6);return rn(En),le(rn,{faces:yn,resize:function(pn){var bn=0|pn;if(bn===rn.width)return rn;var In=rn.color;for(pn=0;pn<In.length;++pn)In[pn].resize(bn);for(pn=0;6>pn;++pn)yn[pn].resize(bn);return rn.width=rn.height=bn,rn},_reglType:"framebufferCube",destroy:function(){yn.forEach(function(pn){pn.destroy()})}})},clear:function(){Te(Fn).forEach(Zt)},restore:function(){dn.cur=null,dn.next=null,dn.dirty=!0,Te(Fn).forEach(function(En){En.framebuffer=Je.createFramebuffer(),$t(En)})}})}(_t,dn,En,In,_n,$t),Wn=Q(_t,Zt,dn,En,rn,yn,0,qn,{},pn,bn,tn,Fn,on,Xt,Je),Nn=(Zt=function F(Je,ot,pt,xt,He,Ge,dt){function ht(kt){var St;St=null===ot.next?5121:ot.next.colorAttachments[0].texture._texture.type;var Et=0,wt=0,Nt=xt.framebufferWidth,_t=xt.framebufferHeight,Mt=null;return ke(kt)?Mt=kt:kt&&(Et=0|kt.x,wt=0|kt.y,Nt=0|(kt.width||xt.framebufferWidth-Et),_t=0|(kt.height||xt.framebufferHeight-wt),Mt=kt.data||null),pt(),kt=Nt*_t*4,Mt||(5121===St?Mt=new Uint8Array(kt):5126===St&&(Mt=Mt||new Float32Array(kt))),Je.pixelStorei(3333,4),Je.readPixels(Et,wt,Nt,_t,6408,St,Mt),Mt}return function(kt){return kt&&"framebuffer"in kt?(ot.setFBO({framebuffer:(St=kt).framebuffer},function(){Et=ht(St)}),Et):ht(kt);var St,Et}}(_t,qn,Wn.procs.poll,Fn),Wn.next),Xn=_t.canvas,yr=[],fr=[],Er=[],gr=[Je.onDestroy],mr=null;Xn&&(Xn.addEventListener("webglcontextlost",He,!1),Xn.addEventListener("webglcontextrestored",Ge,!1));var zr=qn.setFBO=dt({framebuffer:he.define.call(null,1,"framebuffer")});return wt(),Mt=le(dt,{clear:function(Jt){if("framebuffer"in Jt)if(Jt.framebuffer&&"framebufferCube"===Jt.framebuffer_reglType)for(var an=0;6>an;++an)zr(le({framebuffer:Jt.framebuffer.faces[an]},Jt),ht);else zr(Jt,ht);else ht(0,Jt)},prop:he.define.bind(null,1),context:he.define.bind(null,2),this:he.define.bind(null,3),draw:dt({}),buffer:function(Jt){return rn.create(Jt,34962,!1,!1)},elements:function(Jt){return yn.create(Jt,!1)},texture:In.create2D,cube:In.createCube,renderbuffer:_n.create,framebuffer:qn.create,framebufferCube:qn.createCube,vao:pn.createVAO,attributes:Mt,frame:kt,on:function(Jt,an){var Sn;switch(Jt){case"frame":return kt(an);case"lost":Sn=fr;break;case"restore":Sn=Er;break;case"destroy":Sn=gr}return Sn.push(an),{cancel:function(){for(var Ln=0;Ln<Sn.length;++Ln)if(Sn[Ln]===an){Sn[Ln]=Sn[Sn.length-1],Sn.pop();break}}}},limits:En,hasExtension:function(Jt){return 0<=En.extensions.indexOf(Jt.toLowerCase())},read:Zt,destroy:function(){yr.length=0,xt(),Xn&&(Xn.removeEventListener("webglcontextlost",He),Xn.removeEventListener("webglcontextrestored",Ge)),bn.clear(),qn.clear(),_n.clear(),pn.clear(),In.clear(),yn.clear(),rn.clear(),on&&on.clear(),gr.forEach(function(Jt){Jt()})},_gl:_t,_refresh:wt,poll:function(){Et(),on&&on.update()},now:Nt,stats:$t,getCachedCode:function(){return Xt},preloadCachedCode:function(Jt){Object.entries(Jt).forEach(function(an){Xt[an[0]]=an[1]})}}),Je.onDone(null,Mt),Mt}}()},71665:function(se,U,r){var I=r(12856),C=I.Buffer;function f(T,v){for(var c in T)v[c]=T[c]}function k(T,v,c){return C(T,v,c)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?se.exports=I:(f(I,U),U.Buffer=k),k.prototype=Object.create(C.prototype),f(C,k),k.from=function(T,v,c){if("number"==typeof T)throw new TypeError("Argument must not be a number");return C(T,v,c)},k.alloc=function(T,v,c){if("number"!=typeof T)throw new TypeError("Argument must be a number");var i=C(T);return void 0!==v?"string"==typeof c?i.fill(v,c):i.fill(v):i.fill(0),i},k.allocUnsafe=function(T){if("number"!=typeof T)throw new TypeError("Argument must be a number");return C(T)},k.allocUnsafeSlow=function(T){if("number"!=typeof T)throw new TypeError("Argument must be a number");return I.SlowBuffer(T)}},21630:function(se,U,r){se.exports=C;var I=r(15398).EventEmitter;function C(){I.call(this)}r(42018)(C,I),C.Readable=r(40410),C.Writable=r(37493),C.Duplex=r(37865),C.Transform=r(74308),C.PassThrough=r(66897),C.finished=r(12726),C.pipeline=r(10168),C.Stream=C,C.prototype.pipe=function(f,k){var T=this;function v(u){f.writable&&!1===f.write(u)&&T.pause&&T.pause()}function c(){T.readable&&T.resume&&T.resume()}T.on("data",v),f.on("drain",c),f._isStdio||k&&!1===k.end||(T.on("end",s),T.on("close",a));var i=!1;function s(){i||(i=!0,f.end())}function a(){i||(i=!0,"function"==typeof f.destroy&&f.destroy())}function o(u){if(l(),0===I.listenerCount(this,"error"))throw u}function l(){T.removeListener("data",v),f.removeListener("drain",c),T.removeListener("end",s),T.removeListener("close",a),T.removeListener("error",o),f.removeListener("error",o),T.removeListener("end",l),T.removeListener("close",l),f.removeListener("close",l)}return T.on("error",o),f.on("error",o),T.on("end",l),T.on("close",l),f.on("close",l),f.emit("pipe",T),f}},74322:function(se){"use strict";var U={};function r(C,f,k){k||(k=Error);var T=function(v){var c,i;function s(a,o,l){return v.call(this,"string"==typeof f?f:f(a,o,l))||this}return i=v,(c=s).prototype=Object.create(i.prototype),c.prototype.constructor=c,c.__proto__=i,s}(k);T.prototype.name=k.name,T.prototype.code=C,U[C]=T}function I(C,f){if(Array.isArray(C)){var k=C.length;return C=C.map(function(T){return String(T)}),k>2?"one of ".concat(f," ").concat(C.slice(0,k-1).join(", "),", or ")+C[k-1]:2===k?"one of ".concat(f," ").concat(C[0]," or ").concat(C[1]):"of ".concat(f," ").concat(C[0])}return"of ".concat(f," ").concat(String(C))}r("ERR_INVALID_OPT_VALUE",function(C,f){return'The value "'+f+'" is invalid for option "'+C+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(C,f,k){var T,c,i,s,o,u;if("string"==typeof f&&("not ","not "===f.substr(0,4))?(T="must not be",f=f.replace(/^not /,"")):T="must be",o=C," argument",(void 0===u||u>o.length)&&(u=o.length)," argument"===o.substring(u-9,u))c="The ".concat(C," ").concat(T," ").concat(I(f,"type"));else{var a=("number"!=typeof s&&(s=0),s+1>(i=C).length||-1===i.indexOf(".",s)?"argument":"property");c='The "'.concat(C,'" ').concat(a," ").concat(T," ").concat(I(f,"type"))}return c+". Received type ".concat(typeof k)},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),se.exports.q=U},37865:function(se,U,r){"use strict";var I=r(90386),C=Object.keys||function(o){var l=[];for(var u in o)l.push(u);return l};se.exports=i;var f=r(40410),k=r(37493);r(42018)(i,f);for(var T=C(k.prototype),v=0;v<T.length;v++){var c=T[v];i.prototype[c]||(i.prototype[c]=k.prototype[c])}function i(o){if(!(this instanceof i))return new i(o);f.call(this,o),k.call(this,o),this.allowHalfOpen=!0,o&&(!1===o.readable&&(this.readable=!1),!1===o.writable&&(this.writable=!1),!1===o.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||I.nextTick(a,this)}function a(o){o.end()}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(o){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=o,this._writableState.destroyed=o)}})},66897:function(se,U,r){"use strict";se.exports=C;var I=r(74308);function C(f){if(!(this instanceof C))return new C(f);I.call(this,f)}r(42018)(C,I),C.prototype._transform=function(f,k,T){T(null,f)}},40410:function(se,U,r){"use strict";var I,C=r(90386);se.exports=M,M.ReadableState=b,r(15398);var f,k=function(ae,ne){return ae.listeners(ne).length},T=r(71405),v=r(12856).Buffer,c=r.g.Uint8Array||function(){},i=r(40964);f=i&&i.debuglog?i.debuglog("stream"):function(){};var s,a,o,l=r(31125),u=r(65756),d=r(56306).getHighWaterMark,g=r(74322).q,h=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,y=g.ERR_METHOD_NOT_IMPLEMENTED,p=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(42018)(M,T);var _=u.errorOrDestroy,x=["error","close","destroy","pause","resume"];function b(ae,ne,Q){I=I||r(37865),"boolean"!=typeof Q&&(Q=ne instanceof I),this.objectMode=!!(ae=ae||{}).objectMode,Q&&(this.objectMode=this.objectMode||!!ae.readableObjectMode),this.highWaterMark=d(this,ae,"readableHighWaterMark",Q),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ae.emitClose,this.autoDestroy=!!ae.autoDestroy,this.destroyed=!1,this.defaultEncoding=ae.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ae.encoding&&(s||(s=r(68019).s),this.decoder=new s(ae.encoding),this.encoding=ae.encoding)}function M(ae){if(I=I||r(37865),!(this instanceof M))return new M(ae);this._readableState=new b(ae,this,this instanceof I),this.readable=!0,ae&&("function"==typeof ae.read&&(this._read=ae.read),"function"==typeof ae.destroy&&(this._destroy=ae.destroy)),T.call(this)}function m(ae,ne,Q,ie,le){f("readableAddChunk",ne);var fe,pe,xe,Ee,Re,he=ae._readableState;if(null===ne)he.reading=!1,function(pe,xe){if(f("onEofChunk"),!xe.ended){if(xe.decoder){var Ee=xe.decoder.end();Ee&&Ee.length&&(xe.buffer.push(Ee),xe.length+=xe.objectMode?1:Ee.length)}xe.ended=!0,xe.sync?P(pe):(xe.needReadable=!1,xe.emittedReadable||(xe.emittedReadable=!0,R(pe)))}}(ae,he);else if(le||(pe=he,v.isBuffer(Re=xe=ne)||Re instanceof c||"string"==typeof xe||void 0===xe||pe.objectMode||(Ee=new h("chunk",["string","Buffer","Uint8Array"],xe)),fe=Ee),fe)_(ae,fe);else if(he.objectMode||ne&&ne.length>0)if("string"==typeof ne||he.objectMode||Object.getPrototypeOf(ne)===v.prototype||(ne=function(pe){return v.from(pe)}(ne)),ie)he.endEmitted?_(ae,new p):D(ae,he,ne,!0);else if(he.ended)_(ae,new w);else{if(he.destroyed)return!1;he.reading=!1,he.decoder&&!Q?(ne=he.decoder.write(ne),he.objectMode||0!==ne.length?D(ae,he,ne,!1):F(ae,he)):D(ae,he,ne,!1)}else ie||(he.reading=!1,F(ae,he));return!he.ended&&(he.length<he.highWaterMark||0===he.length)}function D(ae,ne,Q,ie){ne.flowing&&0===ne.length&&!ne.sync?(ne.awaitDrain=0,ae.emit("data",Q)):(ne.length+=ne.objectMode?1:Q.length,ie?ne.buffer.unshift(Q):ne.buffer.push(Q),ne.needReadable&&P(ae)),F(ae,ne)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ae){this._readableState&&(this._readableState.destroyed=ae)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(ae,ne){ne(ae)},M.prototype.push=function(ae,ne){var Q,ie=this._readableState;return ie.objectMode?Q=!0:"string"==typeof ae&&((ne=ne||ie.defaultEncoding)!==ie.encoding&&(ae=v.from(ae,ne),ne=""),Q=!0),m(this,ae,ne,!1,Q)},M.prototype.unshift=function(ae){return m(this,ae,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(ae){s||(s=r(68019).s);var ne=new s(ae);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,ie="";null!==Q;)ie+=ne.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),""!==ie&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var S=1073741824;function O(ae,ne){return ae<=0||0===ne.length&&ne.ended?0:ne.objectMode?1:ae!=ae?ne.flowing&&ne.length?ne.buffer.head.data.length:ne.length:(ae>ne.highWaterMark&&(ne.highWaterMark=((Q=ae)>=S?Q=S:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q)),ae<=ne.length?ae:ne.ended?ne.length:(ne.needReadable=!0,0));var Q}function P(ae){var ne=ae._readableState;f("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(f("emitReadable",ne.flowing),ne.emittedReadable=!0,C.nextTick(R,ae))}function R(ae){var ne=ae._readableState;f("emitReadable_",ne.destroyed,ne.length,ne.ended),ne.destroyed||!ne.length&&!ne.ended||(ae.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,G(ae)}function F(ae,ne){ne.readingMore||(ne.readingMore=!0,C.nextTick(B,ae,ne))}function B(ae,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&0===ne.length);){var Q=ne.length;if(f("maybeReadMore read 0"),ae.read(0),Q===ne.length)break}ne.readingMore=!1}function J(ae){var ne=ae._readableState;ne.readableListening=ae.listenerCount("readable")>0,ne.resumeScheduled&&!ne.paused?ne.flowing=!0:ae.listenerCount("data")>0&&ae.resume()}function z(ae){f("readable nexttick read 0"),ae.read(0)}function $(ae,ne){f("resume",ne.reading),ne.reading||ae.read(0),ne.resumeScheduled=!1,ae.emit("resume"),G(ae),ne.flowing&&!ne.reading&&ae.read(0)}function G(ae){var ne=ae._readableState;for(f("flow",ne.flowing);ne.flowing&&null!==ae.read(););}function H(ae,ne){return 0===ne.length?null:(ne.objectMode?Q=ne.buffer.shift():!ae||ae>=ne.length?(Q=ne.decoder?ne.buffer.join(""):1===ne.buffer.length?ne.buffer.first():ne.buffer.concat(ne.length),ne.buffer.clear()):Q=ne.buffer.consume(ae,ne.decoder),Q);var Q}function X(ae){var ne=ae._readableState;f("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,C.nextTick(K,ne,ae))}function K(ae,ne){if(f("endReadableNT",ae.endEmitted,ae.length),!ae.endEmitted&&0===ae.length&&(ae.endEmitted=!0,ne.readable=!1,ne.emit("end"),ae.autoDestroy)){var Q=ne._writableState;(!Q||Q.autoDestroy&&Q.finished)&&ne.destroy()}}function ue(ae,ne){for(var Q=0,ie=ae.length;Q<ie;Q++)if(ae[Q]===ne)return Q;return-1}M.prototype.read=function(ae){f("read",ae),ae=parseInt(ae,10);var ne=this._readableState,Q=ae;if(0!==ae&&(ne.emittedReadable=!1),0===ae&&ne.needReadable&&((0!==ne.highWaterMark?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return f("read: emitReadable",ne.length,ne.ended),0===ne.length&&ne.ended?X(this):P(this),null;if(0===(ae=O(ae,ne))&&ne.ended)return 0===ne.length&&X(this),null;var ie,le=ne.needReadable;return f("need readable",le),(0===ne.length||ne.length-ae<ne.highWaterMark)&&f("length less than watermark",le=!0),ne.ended||ne.reading?f("reading or ended",le=!1):le&&(f("do read"),ne.reading=!0,ne.sync=!0,0===ne.length&&(ne.needReadable=!0),this._read(ne.highWaterMark),ne.sync=!1,ne.reading||(ae=O(Q,ne))),null===(ie=ae>0?H(ae,ne):null)?(ne.needReadable=ne.length<=ne.highWaterMark,ae=0):(ne.length-=ae,ne.awaitDrain=0),0===ne.length&&(ne.ended||(ne.needReadable=!0),Q!==ae&&ne.ended&&X(this)),null!==ie&&this.emit("data",ie),ie},M.prototype._read=function(ae){_(this,new y("_read()"))},M.prototype.pipe=function(ae,ne){var Q=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=ae;break;case 1:ie.pipes=[ie.pipes,ae];break;default:ie.pipes.push(ae)}ie.pipesCount+=1,f("pipe count=%d opts=%j",ie.pipesCount,ne);var le=ne&&!1===ne.end||ae===C.stdout||ae===C.stderr?Te:fe;function fe(){f("onend"),ae.end()}ie.endEmitted?C.nextTick(le):Q.once("end",le),ae.on("unpipe",function we(je,Ce){f("onunpipe"),je===Q&&Ce&&!1===Ce.hasUnpiped&&(Ce.hasUnpiped=!0,f("cleanup"),ae.removeListener("close",Re),ae.removeListener("finish",ke),ae.removeListener("drain",he),ae.removeListener("error",Ee),ae.removeListener("unpipe",we),Q.removeListener("end",fe),Q.removeListener("end",Te),Q.removeListener("data",xe),pe=!0,!ie.awaitDrain||ae._writableState&&!ae._writableState.needDrain||he())});var we,he=(we=Q,function(){var je=we._readableState;f("pipeOnDrain",je.awaitDrain),je.awaitDrain&&je.awaitDrain--,0===je.awaitDrain&&k(we,"data")&&(je.flowing=!0,G(we))});ae.on("drain",he);var pe=!1;function xe(we){f("ondata");var je=ae.write(we);f("dest.write",je),!1===je&&((1===ie.pipesCount&&ie.pipes===ae||ie.pipesCount>1&&-1!==ue(ie.pipes,ae))&&!pe&&(f("false write response, pause",ie.awaitDrain),ie.awaitDrain++),Q.pause())}function Ee(we){f("onerror",we),Te(),ae.removeListener("error",Ee),0===k(ae,"error")&&_(ae,we)}function Re(){ae.removeListener("finish",ke),Te()}function ke(){f("onfinish"),ae.removeListener("close",Re),Te()}function Te(){f("unpipe"),Q.unpipe(ae)}return Q.on("data",xe),function(we,je,Ce){if("function"==typeof we.prependListener)return we.prependListener(je,Ce);we._events&&we._events[je]?Array.isArray(we._events[je])?we._events[je].unshift(Ce):we._events[je]=[Ce,we._events[je]]:we.on(je,Ce)}(ae,"error",Ee),ae.once("close",Re),ae.once("finish",ke),ae.emit("pipe",Q),ie.flowing||(f("pipe resume"),Q.resume()),ae},M.prototype.unpipe=function(ae){var ne=this._readableState,Q={hasUnpiped:!1};if(0===ne.pipesCount)return this;if(1===ne.pipesCount)return ae&&ae!==ne.pipes||(ae||(ae=ne.pipes),ne.pipes=null,ne.pipesCount=0,ne.flowing=!1,ae&&ae.emit("unpipe",this,Q)),this;if(!ae){var ie=ne.pipes,le=ne.pipesCount;ne.pipes=null,ne.pipesCount=0,ne.flowing=!1;for(var fe=0;fe<le;fe++)ie[fe].emit("unpipe",this,{hasUnpiped:!1});return this}var he=ue(ne.pipes,ae);return-1===he||(ne.pipes.splice(he,1),ne.pipesCount-=1,1===ne.pipesCount&&(ne.pipes=ne.pipes[0]),ae.emit("unpipe",this,Q)),this},M.prototype.addListener=M.prototype.on=function(ae,ne){var Q=T.prototype.on.call(this,ae,ne),ie=this._readableState;return"data"===ae?(ie.readableListening=this.listenerCount("readable")>0,!1!==ie.flowing&&this.resume()):"readable"===ae&&(ie.endEmitted||ie.readableListening||(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,f("on readable",ie.length,ie.reading),ie.length?P(this):ie.reading||C.nextTick(z,this))),Q},M.prototype.removeListener=function(ae,ne){var Q=T.prototype.removeListener.call(this,ae,ne);return"readable"===ae&&C.nextTick(J,this),Q},M.prototype.removeAllListeners=function(ae){var ne=T.prototype.removeAllListeners.apply(this,arguments);return"readable"!==ae&&void 0!==ae||C.nextTick(J,this),ne},M.prototype.resume=function(){var Q,ae=this._readableState;return ae.flowing||(f("resume"),ae.flowing=!ae.readableListening,this,(Q=ae).resumeScheduled||(Q.resumeScheduled=!0,C.nextTick($,this,Q))),ae.paused=!1,this},M.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(ae){var ne=this,Q=this._readableState,ie=!1;for(var le in ae.on("end",function(){if(f("wrapped end"),Q.decoder&&!Q.ended){var he=Q.decoder.end();he&&he.length&&ne.push(he)}ne.push(null)}),ae.on("data",function(he){f("wrapped data"),Q.decoder&&(he=Q.decoder.write(he)),Q.objectMode&&null==he||(Q.objectMode||he&&he.length)&&(ne.push(he)||(ie=!0,ae.pause()))}),ae)void 0===this[le]&&"function"==typeof ae[le]&&(this[le]=function(he){return function(){return ae[he].apply(ae,arguments)}}(le));for(var fe=0;fe<x.length;fe++)ae.on(x[fe],this.emit.bind(this,x[fe]));return this._read=function(he){f("wrapped _read",he),ie&&(ie=!1,ae.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===a&&(a=r(68221)),a(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}}),M._fromList=H,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(ae,ne){return void 0===o&&(o=r(31748)),o(M,ae,ne)})},74308:function(se,U,r){"use strict";se.exports=i;var I=r(74322).q,C=I.ERR_METHOD_NOT_IMPLEMENTED,f=I.ERR_MULTIPLE_CALLBACK,k=I.ERR_TRANSFORM_ALREADY_TRANSFORMING,T=I.ERR_TRANSFORM_WITH_LENGTH_0,v=r(37865);function c(o,l){var u=this._transformState;u.transforming=!1;var d=u.writecb;if(null===d)return this.emit("error",new f);u.writechunk=null,u.writecb=null,null!=l&&this.push(l),d(o);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function i(o){if(!(this instanceof i))return new i(o);v.call(this,o),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&("function"==typeof o.transform&&(this._transform=o.transform),"function"==typeof o.flush&&(this._flush=o.flush)),this.on("prefinish",s)}function s(){var o=this;"function"!=typeof this._flush||this._readableState.destroyed?a(this,null,null):this._flush(function(l,u){a(o,l,u)})}function a(o,l,u){if(l)return o.emit("error",l);if(null!=u&&o.push(u),o._writableState.length)throw new T;if(o._transformState.transforming)throw new k;return o.push(null)}r(42018)(i,v),i.prototype.push=function(o,l){return this._transformState.needTransform=!1,v.prototype.push.call(this,o,l)},i.prototype._transform=function(o,l,u){u(new C("_transform()"))},i.prototype._write=function(o,l,u){var d=this._transformState;if(d.writecb=u,d.writechunk=o,d.writeencoding=l,!d.transforming){var g=this._readableState;(d.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},i.prototype._read=function(o){var l=this._transformState;null===l.writechunk||l.transforming?l.needTransform=!0:(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform))},i.prototype._destroy=function(o,l){v.prototype._destroy.call(this,o,function(u){l(u)})}},37493:function(se,U,r){"use strict";var I,C=r(90386);function f(F){var B=this;this.next=null,this.entry=null,this.finish=function(){!function(J,z,$){var G=J.entry;for(J.entry=null;G;){var H=G.callback;z.pendingcb--,H(void 0),G=G.next}z.corkedRequestsFree.next=J}(B,F)}}se.exports=M,M.WritableState=b;var k,T={deprecate:r(20588)},v=r(71405),c=r(12856).Buffer,i=r.g.Uint8Array||function(){},s=r(65756),a=r(56306).getHighWaterMark,o=r(74322).q,l=o.ERR_INVALID_ARG_TYPE,u=o.ERR_METHOD_NOT_IMPLEMENTED,d=o.ERR_MULTIPLE_CALLBACK,g=o.ERR_STREAM_CANNOT_PIPE,h=o.ERR_STREAM_DESTROYED,w=o.ERR_STREAM_NULL_VALUES,y=o.ERR_STREAM_WRITE_AFTER_END,p=o.ERR_UNKNOWN_ENCODING,_=s.errorOrDestroy;function x(){}function b(F,B,J){I=I||r(37865),"boolean"!=typeof J&&(J=B instanceof I),this.objectMode=!!(F=F||{}).objectMode,J&&(this.objectMode=this.objectMode||!!F.writableObjectMode),this.highWaterMark=a(this,F,"writableHighWaterMark",J),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===F.decodeStrings),this.defaultEncoding=F.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($){!function(G,H){var ne,X=G._writableState,K=X.sync,ue=X.writecb;if("function"!=typeof ue)throw new d;if((ne=X).writing=!1,ne.writecb=null,ne.length-=ne.writelen,ne.writelen=0,H)!function(ne,Q,ie,le,fe){--Q.pendingcb,ie?(C.nextTick(fe,le),C.nextTick(R,ne,Q),ne._writableState.errorEmitted=!0,_(ne,le)):(fe(le),ne._writableState.errorEmitted=!0,_(ne,le),R(ne,Q))}(G,X,K,H,ue);else{var ae=O(X)||G.destroyed;ae||X.corked||X.bufferProcessing||!X.bufferedRequest||S(G,X),K?C.nextTick(D,G,X,ae,ue):D(G,X,ae,ue)}}(B,$)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==F.emitClose,this.autoDestroy=!!F.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new f(this)}function M(F){var B=this instanceof(I=I||r(37865));if(!B&&!k.call(M,this))return new M(F);this._writableState=new b(F,this,B),this.writable=!0,F&&("function"==typeof F.write&&(this._write=F.write),"function"==typeof F.writev&&(this._writev=F.writev),"function"==typeof F.destroy&&(this._destroy=F.destroy),"function"==typeof F.final&&(this._final=F.final)),v.call(this)}function m(F,B,J,z,$,G,H){B.writelen=z,B.writecb=H,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new h("write")):J?F._writev($,B.onwrite):F._write($,G,B.onwrite),B.sync=!1}function D(F,B,J,z){var $,G;J||($=F,0===(G=B).length&&G.needDrain&&(G.needDrain=!1,$.emit("drain"))),B.pendingcb--,z(),R(F,B)}function S(F,B){B.bufferProcessing=!0;var J=B.bufferedRequest;if(F._writev&&J&&J.next){var $=new Array(B.bufferedRequestCount),G=B.corkedRequestsFree;G.entry=J;for(var H=0,X=!0;J;)$[H]=J,J.isBuf||(X=!1),J=J.next,H+=1;$.allBuffers=X,m(F,B,!0,B.length,$,"",G.finish),B.pendingcb++,B.lastBufferedRequest=null,G.next?(B.corkedRequestsFree=G.next,G.next=null):B.corkedRequestsFree=new f(B),B.bufferedRequestCount=0}else{for(;J;){var K=J.chunk;if(m(F,B,!1,B.objectMode?1:K.length,K,J.encoding,J.callback),J=J.next,B.bufferedRequestCount--,B.writing)break}null===J&&(B.lastBufferedRequest=null)}B.bufferedRequest=J,B.bufferProcessing=!1}function O(F){return F.ending&&0===F.length&&null===F.bufferedRequest&&!F.finished&&!F.writing}function P(F,B){F._final(function(J){B.pendingcb--,J&&_(F,J),B.prefinished=!0,F.emit("prefinish"),R(F,B)})}function R(F,B){var $,G,J=O(B);if(J&&($=F,(G=B).prefinished||G.finalCalled||("function"!=typeof $._final||G.destroyed?(G.prefinished=!0,$.emit("prefinish")):(G.pendingcb++,G.finalCalled=!0,C.nextTick(P,$,G))),0===B.pendingcb&&(B.finished=!0,F.emit("finish"),B.autoDestroy))){var z=F._readableState;(!z||z.autoDestroy&&z.endEmitted)&&F.destroy()}return J}r(42018)(M,v),b.prototype.getBuffer=function(){for(var F=this.bufferedRequest,B=[];F;)B.push(F),F=F.next;return B},function(){try{Object.defineProperty(b.prototype,"buffer",{get:T.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(F){return!!k.call(this,F)||this===M&&F&&F._writableState instanceof b}})):k=function(F){return F instanceof this},M.prototype.pipe=function(){_(this,new g)},M.prototype.write=function(F,B,J){var z,X,K,ue,$=this._writableState,G=!1,H=!$.objectMode&&(c.isBuffer(z=F)||z instanceof i);return H&&!c.isBuffer(F)&&(F=c.from(F)),"function"==typeof B&&(J=B,B=null),H?B="buffer":B||(B=$.defaultEncoding),"function"!=typeof J&&(J=x),$.ending?(X=this,K=J,ue=new y,_(X,ue),C.nextTick(K,ue)):(H||function(X,K,ue,ae){var ne;return null===ue?ne=new w:"string"==typeof ue||K.objectMode||(ne=new l("chunk",["string","Buffer"],ue)),!ne||(_(X,ne),C.nextTick(ae,ne),!1)}(this,$,F,J))&&($.pendingcb++,G=function(X,K,ue,ae,ne,Q){if(!ue){var ie=(xe=ae,(pe=K).objectMode||!1===pe.decodeStrings||"string"!=typeof xe||(xe=c.from(xe,ne)),xe);ae!==ie&&(ue=!0,ne="buffer",ae=ie)}var pe,xe,le=K.objectMode?1:ae.length;K.length+=le;var fe=K.length<K.highWaterMark;if(fe||(K.needDrain=!0),K.writing||K.corked){var he=K.lastBufferedRequest;K.lastBufferedRequest={chunk:ae,encoding:ne,isBuf:ue,callback:Q,next:null},he?he.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else m(X,K,!1,le,ae,ne,Q);return fe}(this,$,H,F,B,J)),G},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var F=this._writableState;F.corked&&(F.corked--,F.writing||F.corked||F.bufferProcessing||!F.bufferedRequest||S(this,F))},M.prototype.setDefaultEncoding=function(F){if("string"==typeof F&&(F=F.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((F+"").toLowerCase())>-1))throw new p(F);return this._writableState.defaultEncoding=F,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(F,B,J){J(new u("_write()"))},M.prototype._writev=null,M.prototype.end=function(F,B,J){var $,G,H,z=this._writableState;return"function"==typeof F?(J=F,F=null,B=null):"function"==typeof B&&(J=B,B=null),null!=F&&this.write(F,B),z.corked&&(z.corked=1,this.uncork()),z.ending||($=this,H=J,(G=z).ending=!0,R($,G),H&&(G.finished?C.nextTick(H):$.once("finish",H)),G.ended=!0,$.writable=!1),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(F){this._writableState&&(this._writableState.destroyed=F)}}),M.prototype.destroy=s.destroy,M.prototype._undestroy=s.undestroy,M.prototype._destroy=function(F,B){B(F)}},68221:function(se,U,r){"use strict";var I,C=r(90386);function f(w,y,p){return y in w?Object.defineProperty(w,y,{value:p,enumerable:!0,configurable:!0,writable:!0}):w[y]=p,w}var k=r(12726),T=Symbol("lastResolve"),v=Symbol("lastReject"),c=Symbol("error"),i=Symbol("ended"),s=Symbol("lastPromise"),a=Symbol("handlePromise"),o=Symbol("stream");function l(w,y){return{value:w,done:y}}function u(w){var y=w[T];if(null!==y){var p=w[o].read();null!==p&&(w[s]=null,w[T]=null,w[v]=null,y(l(p,!1)))}}function d(w){C.nextTick(u,w)}var g=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((f(I={get stream(){return this[o]},next:function(){var w=this,y=this[c];if(null!==y)return Promise.reject(y);if(this[i])return Promise.resolve(l(void 0,!0));if(this[o].destroyed)return new Promise(function(b,M){C.nextTick(function(){w[c]?M(w[c]):b(l(void 0,!0))})});var p,b,M,_=this[s];if(_)p=new Promise((b=_,M=this,function(m,D){b.then(function(){M[i]?m(l(void 0,!0)):M[a](m,D)},D)}));else{var x=this[o].read();if(null!==x)return Promise.resolve(l(x,!1));p=new Promise(this[a])}return this[s]=p,p}},Symbol.asyncIterator,function(){return this}),f(I,"return",function(){var w=this;return new Promise(function(y,p){w[o].destroy(null,function(_){_?p(_):y(l(void 0,!0))})})}),I),g);se.exports=function(w){var y,p=Object.create(h,(f(y={},o,{value:w,writable:!0}),f(y,T,{value:null,writable:!0}),f(y,v,{value:null,writable:!0}),f(y,c,{value:null,writable:!0}),f(y,i,{value:w._readableState.endEmitted,writable:!0}),f(y,a,{value:function(_,x){var b=p[o].read();b?(p[s]=null,p[T]=null,p[v]=null,_(l(b,!1))):(p[T]=_,p[v]=x)},writable:!0}),y));return p[s]=null,k(w,function(_){if(_&&"ERR_STREAM_PREMATURE_CLOSE"!==_.code){var x=p[v];return null!==x&&(p[s]=null,p[T]=null,p[v]=null,x(_)),void(p[c]=_)}var b=p[T];null!==b&&(p[s]=null,p[T]=null,p[v]=null,b(l(void 0,!0))),p[i]=!0}),w.on("readable",d.bind(null,p)),p}},31125:function(se,U,r){"use strict";function I(c,i){var s=Object.keys(c);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(c);i&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(c,o).enumerable})),s.push.apply(s,a)}return s}function C(c,i,s){return i in c?Object.defineProperty(c,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):c[i]=s,c}var k=r(12856).Buffer,T=r(69862).inspect,v=T&&T.custom||"inspect";se.exports=function(){function c(){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}var s;return s=[{key:"push",value:function(a){var o={data:a,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}},{key:"unshift",value:function(a){var o={data:a,next:this.head};0===this.length&&(this.tail=o),this.head=o,++this.length}},{key:"shift",value:function(){if(0!==this.length){var a=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(0===this.length)return"";for(var o=this.head,l=""+o.data;o=o.next;)l+=a+o.data;return l}},{key:"concat",value:function(a){if(0===this.length)return k.alloc(0);for(var d=k.allocUnsafe(a>>>0),g=this.head,h=0;g;)k.prototype.copy.call(g.data,d,h),h+=g.data.length,g=g.next;return d}},{key:"consume",value:function(a,o){var l;return a<this.head.data.length?(l=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):l=a===this.head.data.length?this.shift():o?this._getString(a):this._getBuffer(a),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var o=this.head,l=1,u=o.data;for(a-=u.length;o=o.next;){var d=o.data,g=a>d.length?d.length:a;if(u+=g===d.length?d:d.slice(0,a),0==(a-=g)){g===d.length?(++l,this.head=o.next?o.next:this.tail=null):(this.head=o,o.data=d.slice(g));break}++l}return this.length-=l,u}},{key:"_getBuffer",value:function(a){var o=k.allocUnsafe(a),l=this.head,u=1;for(l.data.copy(o),a-=l.data.length;l=l.next;){var d=l.data,g=a>d.length?d.length:a;if(d.copy(o,o.length-a,0,g),0==(a-=g)){g===d.length?(++u,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=d.slice(g));break}++u}return this.length-=u,o}},{key:v,value:function(a,o){return T(this,function(l){for(var u=1;u<arguments.length;u++){var d=null!=arguments[u]?arguments[u]:{};u%2?I(Object(d),!0).forEach(function(g){C(l,g,d[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(d)):I(Object(d)).forEach(function(g){Object.defineProperty(l,g,Object.getOwnPropertyDescriptor(d,g))})}return l}({},o,{depth:0,customInspect:!1}))}}],s&&function f(c,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(c,a.key,a)}}(c.prototype,s),c}()},65756:function(se,U,r){"use strict";var I=r(90386);function C(T,v){k(T,v),f(T)}function f(T){T._writableState&&!T._writableState.emitClose||T._readableState&&!T._readableState.emitClose||T.emit("close")}function k(T,v){T.emit("error",v)}se.exports={destroy:function(T,v){var c=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(v?v(T):T&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,I.nextTick(k,this,T)):I.nextTick(k,this,T)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(T||null,function(a){!v&&a?c._writableState?c._writableState.errorEmitted?I.nextTick(f,c):(c._writableState.errorEmitted=!0,I.nextTick(C,c,a)):I.nextTick(C,c,a):v?(I.nextTick(f,c),v(a)):I.nextTick(f,c)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(T,v){var c=T._readableState,i=T._writableState;c&&c.autoDestroy||i&&i.autoDestroy?T.destroy(v):T.emit("error",v)}}},12726:function(se,U,r){"use strict";var I=r(74322).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}se.exports=function f(k,T,v){if("function"==typeof T)return f(k,null,T);var w,y;T||(T={}),w=v||C,y=!1,v=function(){if(!y){y=!0;for(var p=arguments.length,_=new Array(p),x=0;x<p;x++)_[x]=arguments[x];w.apply(this,_)}};var c=T.readable||!1!==T.readable&&k.readable,i=T.writable||!1!==T.writable&&k.writable,s=function(){k.writable||o()},a=k._writableState&&k._writableState.finished,o=function(){i=!1,a=!0,c||v.call(k)},l=k._readableState&&k._readableState.endEmitted,u=function(){c=!1,l=!0,i||v.call(k)},d=function(w){v.call(k,w)},g=function(){var w;return c&&!l?(k._readableState&&k._readableState.ended||(w=new I),v.call(k,w)):i&&!a?(k._writableState&&k._writableState.ended||(w=new I),v.call(k,w)):void 0},h=function(){k.req.on("finish",o)};return function(w){return w.setHeader&&"function"==typeof w.abort}(k)?(k.on("complete",o),k.on("abort",g),k.req?h():k.on("request",h)):i&&!k._writableState&&(k.on("end",s),k.on("close",s)),k.on("end",u),k.on("finish",o),!1!==T.error&&k.on("error",d),k.on("close",g),function(){k.removeListener("complete",o),k.removeListener("abort",g),k.removeListener("request",h),k.req&&k.req.removeListener("finish",o),k.removeListener("end",s),k.removeListener("close",s),k.removeListener("finish",o),k.removeListener("end",u),k.removeListener("error",d),k.removeListener("close",g)}}},31748:function(se){se.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function(se,U,r){"use strict";var I,C=r(74322).q,f=C.ERR_MISSING_ARGS,k=C.ERR_STREAM_DESTROYED;function T(i){if(i)throw i}function v(i){i()}function c(i,s){return i.pipe(s)}se.exports=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];var o,d,l=(d=s).length?"function"!=typeof d[d.length-1]?T:d.pop():T;if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new f("streams");var u=s.map(function(d,g){var h=g<s.length-1;return function(w,y,p,_){var M,m;M=_,m=!1,_=function(){m||(m=!0,M.apply(void 0,arguments))};var x=!1;w.on("close",function(){x=!0}),void 0===I&&(I=r(12726)),I(w,{readable:y,writable:p},function(M){if(M)return _(M);x=!0,_()});var b=!1;return function(M){if(!x&&!b)return b=!0,function(m){return m.setHeader&&"function"==typeof m.abort}(w)?w.abort():"function"==typeof w.destroy?w.destroy():void _(M||new k("pipe"))}}(d,h,g>0,function(w){o||(o=w),w&&u.forEach(v),h||(u.forEach(v),l(o))})});return s.reduce(c)}},56306:function(se,U,r){"use strict";var I=r(74322).q.ERR_INVALID_OPT_VALUE;se.exports={getHighWaterMark:function(C,f,k,T){var c,v=null!=(c=f).highWaterMark?c.highWaterMark:T?c[k]:null;if(null!=v){if(!isFinite(v)||Math.floor(v)!==v||v<0)throw new I(T?k:"highWaterMark",v);return Math.floor(v)}return C.objectMode?16:16384}}},71405:function(se,U,r){se.exports=r(15398).EventEmitter},68019:function(se,U,r){"use strict";var I=r(71665).Buffer,C=I.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function f(l){var u;switch(this.encoding=function(d){var g=function(h){if(!h)return"utf8";for(var w;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(w)return;h=(""+h).toLowerCase(),w=!0}}(d);if("string"!=typeof g&&(I.isEncoding===C||!C(d)))throw new Error("Unknown encoding: "+d);return g||d}(l),this.encoding){case"utf16le":this.text=v,this.end=c,u=4;break;case"utf8":this.fillLast=T,u=4;break;case"base64":this.text=i,this.end=s,u=3;break;default:return this.write=a,void(this.end=o)}this.lastNeed=0,this.lastTotal=0,this.lastChar=I.allocUnsafe(u)}function k(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function T(l){var u=this.lastTotal-this.lastNeed,d=function(g,h,w){if(128!=(192&h[0]))return g.lastNeed=0,"\ufffd";if(g.lastNeed>1&&h.length>1){if(128!=(192&h[1]))return g.lastNeed=1,"\ufffd";if(g.lastNeed>2&&h.length>2&&128!=(192&h[2]))return g.lastNeed=2,"\ufffd"}}(this,l);return void 0!==d?d:this.lastNeed<=l.length?(l.copy(this.lastChar,u,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,u,0,l.length),void(this.lastNeed-=l.length))}function v(l,u){if((l.length-u)%2==0){var d=l.toString("utf16le",u);if(d){var g=d.charCodeAt(d.length-1);if(g>=55296&&g<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],d.slice(0,-1)}return d}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",u,l.length-1)}function c(l){var u=l&&l.length?this.write(l):"";return this.lastNeed?u+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):u}function i(l,u){var d=(l.length-u)%3;return 0===d?l.toString("base64",u):(this.lastNeed=3-d,this.lastTotal=3,1===d?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",u,l.length-d))}function s(l){var u=l&&l.length?this.write(l):"";return this.lastNeed?u+this.lastChar.toString("base64",0,3-this.lastNeed):u}function a(l){return l.toString(this.encoding)}function o(l){return l&&l.length?this.write(l):""}U.s=f,f.prototype.write=function(l){if(0===l.length)return"";var u,d;if(this.lastNeed){if(void 0===(u=this.fillLast(l)))return"";d=this.lastNeed,this.lastNeed=0}else d=0;return d<l.length?u?u+this.text(l,d):this.text(l,d):u||""},f.prototype.end=function(l){var u=l&&l.length?this.write(l):"";return this.lastNeed?u+"\ufffd":u},f.prototype.text=function(l,u){var d=function(h,w,y){var p=w.length-1;if(p<y)return 0;var _=k(w[p]);return _>=0?(_>0&&(h.lastNeed=_-1),_):--p<y||-2===_?0:(_=k(w[p]))>=0?(_>0&&(h.lastNeed=_-2),_):--p<y||-2===_?0:(_=k(w[p]))>=0?(_>0&&(2===_?_=0:h.lastNeed=_-3),_):0}(this,l,u);if(!this.lastNeed)return l.toString("utf8",u);this.lastTotal=d;var g=l.length-(d-this.lastNeed);return l.copy(this.lastChar,0,g),l.toString("utf8",u,g)},f.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},90715:function(se,U,r){var I=r(32791),C=r(41633)("stream-parser");se.exports=function(h){var w=h&&"function"==typeof h._transform;if(!(w||h&&"function"==typeof h._write))throw new Error("must pass a Writable or Transform stream in");C("extending Parser into stream"),h._bytes=i,h._skipBytes=s,w&&(h._passthrough=a),w?h._transform=l:h._write=o};var f=-1,k=0,T=1,v=2;function c(h){C("initializing parser stream"),h._parserBytesLeft=0,h._parserBuffers=[],h._parserBuffered=0,h._parserState=f,h._parserCallback=null,"function"==typeof h.push&&(h._parserOutput=h.push.bind(h)),h._parserInit=!0}function i(h,w){I(!this._parserCallback,'there is already a "callback" set!'),I(isFinite(h)&&h>0,'can only buffer a finite number of bytes > 0, got "'+h+'"'),this._parserInit||c(this),C("buffering %o bytes",h),this._parserBytesLeft=h,this._parserCallback=w,this._parserState=k}function s(h,w){I(!this._parserCallback,'there is already a "callback" set!'),I(h>0,'can only skip > 0 bytes, got "'+h+'"'),this._parserInit||c(this),C("skipping %o bytes",h),this._parserBytesLeft=h,this._parserCallback=w,this._parserState=T}function a(h,w){I(!this._parserCallback,'There is already a "callback" set!'),I(h>0,'can only pass through > 0 bytes, got "'+h+'"'),this._parserInit||c(this),C("passing through %o bytes",h),this._parserBytesLeft=h,this._parserCallback=w,this._parserState=v}function o(h,w,y){this._parserInit||c(this),C("write(%o bytes)",h.length),"function"==typeof w&&(y=w),d(this,h,null,y)}function l(h,w,y){this._parserInit||c(this),C("transform(%o bytes)",h.length),"function"!=typeof w&&(w=this._parserOutput),d(this,h,w,y)}function u(h,w,y,p){if(h._parserBytesLeft-=w.length,C("%o bytes left for stream piece",h._parserBytesLeft),h._parserState===k?(h._parserBuffers.push(w),h._parserBuffered+=w.length):h._parserState===v&&y(w),0!==h._parserBytesLeft)return p;var _=h._parserCallback;if(_&&h._parserState===k&&h._parserBuffers.length>1&&(w=Buffer.concat(h._parserBuffers,h._parserBuffered)),h._parserState!==k&&(w=null),h._parserCallback=null,h._parserBuffered=0,h._parserState=f,h._parserBuffers.splice(0),_){var x=[];w&&x.push(w),y&&x.push(y);var b=_.length>x.length;b&&x.push(g(p));var M=_.apply(h,x);if(!b||p===M)return p}}var d=g(function h(w,y,p,_){return w._parserBytesLeft<=0?_(new Error("got data but not currently parsing anything")):y.length<=w._parserBytesLeft?function(){return u(w,y,p,_)}:function(){var x=y.slice(0,w._parserBytesLeft);return u(w,x,p,function(b){return b?_(b):y.length>x.length?function(){return h(w,y.slice(x.length),p,_)}:void 0})}});function g(h){return function(){for(var w=h.apply(this,arguments);"function"==typeof w;)w=w();return w}}},41633:function(se,U,r){var I=r(90386);function C(){var f;try{f=U.storage.debug}catch{}return!f&&void 0!==I&&"env"in I&&(f=I.env.DEBUG),f}(U=se.exports=r(74469)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},U.formatArgs=function(f){var k=this.useColors;if(f[0]=(k?"%c":"")+this.namespace+(k?" %c":" ")+f[0]+(k?"%c ":" ")+"+"+U.humanize(this.diff),k){var T="color: "+this.color;f.splice(1,0,T,"color: inherit");var v=0,c=0;f[0].replace(/%[a-zA-Z%]/g,function(i){"%%"!==i&&(v++,"%c"===i&&(c=v))}),f.splice(c,0,T)}},U.save=function(f){try{null==f?U.storage.removeItem("debug"):U.storage.debug=f}catch{}},U.load=C,U.useColors=function(){return!(typeof window>"u"||!window.process||"renderer"!==window.process.type)||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},U.storage=typeof chrome<"u"&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),U.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],U.formatters.j=function(f){try{return JSON.stringify(f)}catch(k){return"[UnexpectedJSONParseError]: "+k.message}},U.enable(C())},74469:function(se,U,r){var I;function C(f){function k(){if(k.enabled){var T=k,v=+new Date;T.diff=v-(I||v),T.prev=I,T.curr=v,I=v;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=U.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(o,l){if("%%"===o)return o;a++;var u=U.formatters[l];return"function"==typeof u&&(o=u.call(T,i[a]),i.splice(a,1),a--),o}),U.formatArgs.call(T,i),(k.log||U.log||console.log.bind(console)).apply(T,i)}}return k.namespace=f,k.enabled=U.enabled(f),k.useColors=U.useColors(),k.color=function(T){var v,c=0;for(v in T)c=(c<<5)-c+T.charCodeAt(v),c|=0;return U.colors[Math.abs(c)%U.colors.length]}(f),"function"==typeof U.init&&U.init(k),k}(U=se.exports=C.debug=C.default=C).coerce=function(f){return f instanceof Error?f.stack||f.message:f},U.disable=function(){U.enable("")},U.enable=function(f){U.save(f),U.names=[],U.skips=[];for(var k=("string"==typeof f?f:"").split(/[\s,]+/),T=k.length,v=0;v<T;v++)k[v]&&("-"===(f=k[v].replace(/\*/g,".*?"))[0]?U.skips.push(new RegExp("^"+f.substr(1)+"$")):U.names.push(new RegExp("^"+f+"$")))},U.enabled=function(f){var k,T;for(k=0,T=U.skips.length;k<T;k++)if(U.skips[k].test(f))return!1;for(k=0,T=U.names.length;k<T;k++)if(U.names[k].test(f))return!0;return!1},U.humanize=r(11375),U.names=[],U.skips=[],U.formatters={}},11375:function(se){var U=1e3,r=60*U,I=60*r,C=24*I;function f(k,T,v){if(!(k<T))return k<1.5*T?Math.floor(k/T)+" "+v:Math.ceil(k/T)+" "+v+"s"}se.exports=function(k,T){T=T||{};var v,i,c=typeof k;if("string"===c&&k.length>0)return function(i){if(!((i=String(i)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(s){var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*C;case"hours":case"hour":case"hrs":case"hr":case"h":return a*I;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(k);if("number"===c&&!1===isNaN(k))return T.long?f(v=k,C,"day")||f(v,I,"hour")||f(v,r,"minute")||f(v,U,"second")||v+" ms":(i=k)>=C?Math.round(i/C)+"d":i>=I?Math.round(i/I)+"h":i>=r?Math.round(i/r)+"m":i>=U?Math.round(i/U)+"s":i+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(k))}},99011:function(se,U,r){"use strict";var I=r(88641);se.exports=function(C,f,k){if(null==C)throw Error("First argument should be a string");if(null==f)throw Error("Separator should be a string or a RegExp");k?("string"==typeof k||Array.isArray(k))&&(k={ignore:k}):k={},null==k.escape&&(k.escape=!0),null==k.ignore?k.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof k.ignore&&(k.ignore=[k.ignore]),k.ignore=k.ignore.map(function(o){return 1===o.length&&(o+=o),o}));var T=I.parse(C,{flat:!0,brackets:k.ignore}),v=T[0].split(f);if(k.escape){for(var c=[],i=0;i<v.length;i++){var s=v[i];"\\"===s[s.length-1]&&"\\"!==s[s.length-2]?(c.push(s+f+v[i+1]),i++):c.push(s)}v=c}for(i=0;i<v.length;i++)T[0]=v[i],v[i]=I.stringify(T,{flat:!0});return v}},68664:function(se){"use strict";se.exports=function(U){for(var r=U.length,I=new Array(r),C=new Array(r),f=new Array(r),k=new Array(r),T=new Array(r),v=new Array(r),c=0;c<r;++c)I[c]=-1,C[c]=0,f[c]=!1,k[c]=0,T[c]=-1,v[c]=[];var i,s=0,a=[],o=[];function l(g){var h=[g],w=[g];for(I[g]=C[g]=s,f[g]=!0,s+=1;w.length>0;){var y=U[g=w[w.length-1]];if(k[g]<y.length){for(var p=k[g];p<y.length;++p){var _=y[p];if(I[_]<0){I[_]=C[_]=s,f[_]=!0,s+=1,h.push(_),w.push(_);break}f[_]&&(C[g]=0|Math.min(C[g],C[_])),T[_]>=0&&v[g].push(T[_])}k[g]=p}else{if(C[g]===I[g]){var x=[],b=[],M=0;for(p=h.length-1;p>=0;--p){var m=h[p];if(f[m]=!1,x.push(m),b.push(v[m]),M+=v[m].length,T[m]=a.length,m===g){h.length=p;break}}a.push(x);var D=new Array(M);for(p=0;p<b.length;p++)for(var S=0;S<b[p].length;S++)D[--M]=b[p][S];o.push(D)}w.pop()}}}for(c=0;c<r;++c)I[c]<0&&l(c);for(c=0;c<o.length;c++){var u=o[c];if(0!==u.length){u.sort(function(g,h){return g-h}),i=[u[0]];for(var d=1;d<u.length;d++)u[d]!==u[d-1]&&i.push(u[d]);o[c]=i}}return{components:a,adjacencyList:o}}},7095:function(se,U,r){"use strict";r.r(U);var I=2*Math.PI,C=function(T,v,c,i,s,a,o){var l=T.x,u=T.y;return{x:i*(l*=v)-s*(u*=c)+a,y:s*l+i*u+o}},f=function(T,v){var c=1.5707963267948966===v?.551915024494:-1.5707963267948966===v?-.551915024494:1.3333333333333333*Math.tan(v/4),i=Math.cos(T),s=Math.sin(T),a=Math.cos(T+v),o=Math.sin(T+v);return[{x:i-s*c,y:s+i*c},{x:a+o*c,y:o-a*c},{x:a,y:o}]},k=function(T,v,c,i){var s=T*c+v*i;return s>1&&(s=1),s<-1&&(s=-1),(T*i-v*c<0?-1:1)*Math.acos(s)};U.default=function(T){var v=T.px,c=T.py,i=T.cx,s=T.cy,a=T.rx,o=T.ry,l=T.xAxisRotation,u=void 0===l?0:l,d=T.largeArcFlag,g=void 0===d?0:d,h=T.sweepFlag,w=void 0===h?0:h,y=[];if(0===a||0===o)return[];var p=Math.sin(u*I/360),_=Math.cos(u*I/360),x=_*(v-i)/2+p*(c-s)/2,b=-p*(v-i)/2+_*(c-s)/2;if(0===x&&0===b)return[];a=Math.abs(a),o=Math.abs(o);var M=Math.pow(x,2)/Math.pow(a,2)+Math.pow(b,2)/Math.pow(o,2);M>1&&(a*=Math.sqrt(M),o*=Math.sqrt(M));var D=function(z,$){if(Array.isArray(z))return z;if(Symbol.iterator in Object(z))return function(G,H){var X=[],K=!0,ue=!1,ae=void 0;try{for(var ne,Q=G[Symbol.iterator]();!(K=(ne=Q.next()).done)&&(X.push(ne.value),4!==X.length);K=!0);}catch(ie){ue=!0,ae=ie}finally{try{!K&&Q.return&&Q.return()}finally{if(ue)throw ae}}return X}(z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(z,$,G,H,X,K,ue,ae,ne,Q,ie,le){var fe=Math.pow(X,2),he=Math.pow(K,2),pe=Math.pow(ie,2),xe=Math.pow(le,2),Ee=fe*he-fe*xe-he*pe;Ee<0&&(Ee=0),Ee/=fe*xe+he*pe;var Re=(Ee=Math.sqrt(Ee)*(ue===ae?-1:1))*X/K*le,ke=Ee*-K/X*ie,Te=Q*Re-ne*ke+(z+G)/2,we=ne*Re+Q*ke+($+H)/2,je=(ie-Re)/X,Ce=(le-ke)/K,Ie=(-ie-Re)/X,ge=(-le-ke)/K,me=k(1,0,je,Ce),ce=k(je,Ce,Ie,ge);return 0===ae&&ce>0&&(ce-=I),1===ae&&ce<0&&(ce+=I),[Te,we,me,ce]}(v,c,i,s,a,o,g,w,p,_,x,b)),S=D[0],O=D[1],P=D[2],R=D[3],F=Math.abs(R)/(I/4);Math.abs(1-F)<1e-7&&(F=1);var B=Math.max(Math.ceil(F),1);R/=B;for(var J=0;J<B;J++)y.push(f(P,R)),P+=R;return y.map(function(z){var $=C(z[0],a,o,_,p,S,O),G=$.x,H=$.y,X=C(z[1],a,o,_,p,S,O),K=X.x,ue=X.y,ae=C(z[2],a,o,_,p,S,O);return{x1:G,y1:H,x2:K,y2:ue,x:ae.x,y:ae.y}})}},1750:function(se,U,r){"use strict";var I=r(95616),C=r(65185),f=r(29988),k=r(89546),T=r(32791);se.exports=function(v){if(Array.isArray(v)&&1===v.length&&"string"==typeof v[0]&&(v=v[0]),"string"==typeof v&&(T(k(v),"String is not an SVG path."),v=I(v)),T(Array.isArray(v),"Argument should be a string or an array of path segments."),v=C(v),!(v=f(v)).length)return[0,0,0,0];for(var c=[1/0,1/0,-1/0,-1/0],i=0,s=v.length;i<s;i++)for(var a=v[i].slice(1),o=0;o<a.length;o+=2)a[o+0]<c[0]&&(c[0]=a[o+0]),a[o+1]<c[1]&&(c[1]=a[o+1]),a[o+0]>c[2]&&(c[2]=a[o+0]),a[o+1]>c[3]&&(c[3]=a[o+1]);return c}},29988:function(se,U,r){"use strict";se.exports=function(k){for(var T,v=[],c=0,i=0,s=0,a=0,o=null,l=null,u=0,d=0,g=0,h=k.length;g<h;g++){var w=k[g],y=w[0];switch(y){case"M":s=w[1],a=w[2];break;case"A":var p=I({px:u,py:d,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!p.length)continue;for(var _,x=0;x<p.length;x++)w=["C",(_=p[x]).x1,_.y1,_.x2,_.y2,_.x,_.y],x<p.length-1&&v.push(w);break;case"S":var b=u,M=d;"C"!=T&&"S"!=T||(b+=b-c,M+=M-i),w=["C",b,M,w[1],w[2],w[3],w[4]];break;case"T":"Q"==T||"T"==T?(o=2*u-o,l=2*d-l):(o=u,l=d),w=f(u,d,o,l,w[1],w[2]);break;case"Q":o=w[1],l=w[2],w=f(u,d,w[1],w[2],w[3],w[4]);break;case"L":w=C(u,d,w[1],w[2]);break;case"H":w=C(u,d,w[1],d);break;case"V":w=C(u,d,u,w[1]);break;case"Z":w=C(u,d,s,a)}T=y,u=w[w.length-2],d=w[w.length-1],w.length>4?(c=w[w.length-4],i=w[w.length-3]):(c=u,i=d),v.push(w)}return v};var I=r(7095);function C(k,T,v,c){return["C",k,T,v,c,v,c]}function f(k,T,v,c,i,s){return["C",k/3+.6666666666666666*v,T/3+.6666666666666666*c,i/3+.6666666666666666*v,s/3+.6666666666666666*c,i,s]}},82019:function(se,U,r){"use strict";var I,C=r(1750),f=r(95616),k=r(31457),T=r(89546),v=r(44781),c=document.createElement("canvas"),i=c.getContext("2d");se.exports=function(s,a){if(!T(s))throw Error("Argument should be valid svg path string");var o,l;a||(a={}),a.shape?(o=a.shape[0],l=a.shape[1]):(o=c.width=a.w||a.width||200,l=c.height=a.h||a.height||200);var u=Math.min(o,l),d=a.stroke||0,g=a.viewbox||a.viewBox||C(s),h=[o/(g[2]-g[0]),l/(g[3]-g[1])],w=Math.min(h[0]||0,h[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,o,l),i.fillStyle="white",d&&("number"!=typeof d&&(d=1),i.strokeStyle=d>0?"white":"black",i.lineWidth=Math.abs(d)),i.translate(.5*o,.5*l),i.scale(w,w),function(){if(null!=I)return I;var _=document.createElement("canvas").getContext("2d");if(_.canvas.width=_.canvas.height=1,!window.Path2D)return I=!1;var x=new Path2D("M0,0h1v1h-1v-1Z");_.fillStyle="black",_.fill(x);var b=_.getImageData(0,0,1,1);return I=b&&b.data&&255===b.data[3]}()){var y=new Path2D(s);i.fill(y),d&&i.stroke(y)}else{var p=f(s);k(i,p),i.fill(),d&&i.stroke()}return i.setTransform(1,0,0,1,0,0),v(i,{cutoff:null!=a.cutoff?a.cutoff:.5,radius:null!=a.radius?a.radius:.5*u})}},84267:function(se,U,r){var I;!function(C){var f=/^\s+/,k=/\s+$/,T=0,v=C.round,c=C.min,i=C.max,s=C.random;function a(ie,le){if(le=le||{},(ie=ie||"")instanceof a)return ie;if(!(this instanceof a))return new a(ie,le);var he,xe,Ee,Re,ke,Te,we,je,Ce,Ie,fe=(Re={r:0,g:0,b:0},ke=1,Te=null,we=null,je=null,Ce=!1,Ie=!1,"string"==typeof(he=ie)&&(he=function(ge){ge=ge.replace(f,"").replace(k,"").toLowerCase();var me,ce=!1;if(P[ge])ge=P[ge],ce=!0;else if("transparent"==ge)return{r:0,g:0,b:0,a:0,format:"name"};return(me=ne.rgb.exec(ge))?{r:me[1],g:me[2],b:me[3]}:(me=ne.rgba.exec(ge))?{r:me[1],g:me[2],b:me[3],a:me[4]}:(me=ne.hsl.exec(ge))?{h:me[1],s:me[2],l:me[3]}:(me=ne.hsla.exec(ge))?{h:me[1],s:me[2],l:me[3],a:me[4]}:(me=ne.hsv.exec(ge))?{h:me[1],s:me[2],v:me[3]}:(me=ne.hsva.exec(ge))?{h:me[1],s:me[2],v:me[3],a:me[4]}:(me=ne.hex8.exec(ge))?{r:z(me[1]),g:z(me[2]),b:z(me[3]),a:X(me[4]),format:ce?"name":"hex8"}:(me=ne.hex6.exec(ge))?{r:z(me[1]),g:z(me[2]),b:z(me[3]),format:ce?"name":"hex"}:(me=ne.hex4.exec(ge))?{r:z(me[1]+""+me[1]),g:z(me[2]+""+me[2]),b:z(me[3]+""+me[3]),a:X(me[4]+""+me[4]),format:ce?"name":"hex8"}:!!(me=ne.hex3.exec(ge))&&{r:z(me[1]+""+me[1]),g:z(me[2]+""+me[2]),b:z(me[3]+""+me[3]),format:ce?"name":"hex"}}(he)),"object"==typeof he&&(Q(he.r)&&Q(he.g)&&Q(he.b)?(xe=he.g,Ee=he.b,Re={r:255*B(he.r,255),g:255*B(xe,255),b:255*B(Ee,255)},Ce=!0,Ie="%"===String(he.r).substr(-1)?"prgb":"rgb"):Q(he.h)&&Q(he.s)&&Q(he.v)?(Te=G(he.s),we=G(he.v),Re=function(ge,me,ce){ge=6*B(ge,360),me=B(me,100),ce=B(ce,100);var Ae=C.floor(ge),Ne=ge-Ae,De=ce*(1-me),qe=ce*(1-Ne*me),Ke=ce*(1-(1-Ne)*me),be=Ae%6;return{r:255*[ce,qe,De,De,Ke,ce][be],g:255*[Ke,ce,ce,qe,De,De][be],b:255*[De,De,Ke,ce,ce,qe][be]}}(he.h,Te,we),Ce=!0,Ie="hsv"):Q(he.h)&&Q(he.s)&&Q(he.l)&&(Te=G(he.s),je=G(he.l),Re=function(ge,me,ce){var Ae,Ne,De;function qe(Oe,Le,Ue){return Ue<0&&(Ue+=1),Ue>1&&(Ue-=1),Ue<1/6?Oe+6*(Le-Oe)*Ue:Ue<.5?Le:Ue<2/3?Oe+(Le-Oe)*(2/3-Ue)*6:Oe}if(ge=B(ge,360),me=B(me,100),ce=B(ce,100),0===me)Ae=Ne=De=ce;else{var Ke=ce<.5?ce*(1+me):ce+me-ce*me,be=2*ce-Ke;Ae=qe(be,Ke,ge+1/3),Ne=qe(be,Ke,ge),De=qe(be,Ke,ge-1/3)}return{r:255*Ae,g:255*Ne,b:255*De}}(he.h,Te,je),Ce=!0,Ie="hsl"),he.hasOwnProperty("a")&&(ke=he.a)),ke=F(ke),{ok:Ce,format:he.format||Ie,r:c(255,i(Re.r,0)),g:c(255,i(Re.g,0)),b:c(255,i(Re.b,0)),a:ke});this._originalInput=ie,this._r=fe.r,this._g=fe.g,this._b=fe.b,this._a=fe.a,this._roundA=v(100*this._a)/100,this._format=le.format||fe.format,this._gradientType=le.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=fe.ok,this._tc_id=T++}function o(ie,le,fe){ie=B(ie,255),le=B(le,255),fe=B(fe,255);var he,pe,xe=i(ie,le,fe),Ee=c(ie,le,fe),Re=(xe+Ee)/2;if(xe==Ee)he=pe=0;else{var ke=xe-Ee;switch(pe=Re>.5?ke/(2-xe-Ee):ke/(xe+Ee),xe){case ie:he=(le-fe)/ke+(le<fe?6:0);break;case le:he=(fe-ie)/ke+2;break;case fe:he=(ie-le)/ke+4}he/=6}return{h:he,s:pe,l:Re}}function l(ie,le,fe){ie=B(ie,255),le=B(le,255),fe=B(fe,255);var he,pe,xe=i(ie,le,fe),Ee=c(ie,le,fe),Re=xe,ke=xe-Ee;if(pe=0===xe?0:ke/xe,xe==Ee)he=0;else{switch(xe){case ie:he=(le-fe)/ke+(le<fe?6:0);break;case le:he=(fe-ie)/ke+2;break;case fe:he=(ie-le)/ke+4}he/=6}return{h:he,s:pe,v:Re}}function u(ie,le,fe,he){var pe=[$(v(ie).toString(16)),$(v(le).toString(16)),$(v(fe).toString(16))];return he&&pe[0].charAt(0)==pe[0].charAt(1)&&pe[1].charAt(0)==pe[1].charAt(1)&&pe[2].charAt(0)==pe[2].charAt(1)?pe[0].charAt(0)+pe[1].charAt(0)+pe[2].charAt(0):pe.join("")}function d(ie,le,fe,he){return[$(H(he)),$(v(ie).toString(16)),$(v(le).toString(16)),$(v(fe).toString(16))].join("")}function g(ie,le){le=0===le?0:le||10;var fe=a(ie).toHsl();return fe.s-=le/100,fe.s=J(fe.s),a(fe)}function h(ie,le){le=0===le?0:le||10;var fe=a(ie).toHsl();return fe.s+=le/100,fe.s=J(fe.s),a(fe)}function w(ie){return a(ie).desaturate(100)}function y(ie,le){le=0===le?0:le||10;var fe=a(ie).toHsl();return fe.l+=le/100,fe.l=J(fe.l),a(fe)}function p(ie,le){le=0===le?0:le||10;var fe=a(ie).toRgb();return fe.r=i(0,c(255,fe.r-v(-le/100*255))),fe.g=i(0,c(255,fe.g-v(-le/100*255))),fe.b=i(0,c(255,fe.b-v(-le/100*255))),a(fe)}function _(ie,le){le=0===le?0:le||10;var fe=a(ie).toHsl();return fe.l-=le/100,fe.l=J(fe.l),a(fe)}function x(ie,le){var fe=a(ie).toHsl(),he=(fe.h+le)%360;return fe.h=he<0?360+he:he,a(fe)}function b(ie){var le=a(ie).toHsl();return le.h=(le.h+180)%360,a(le)}function M(ie){var le=a(ie).toHsl(),fe=le.h;return[a(ie),a({h:(fe+120)%360,s:le.s,l:le.l}),a({h:(fe+240)%360,s:le.s,l:le.l})]}function m(ie){var le=a(ie).toHsl(),fe=le.h;return[a(ie),a({h:(fe+90)%360,s:le.s,l:le.l}),a({h:(fe+180)%360,s:le.s,l:le.l}),a({h:(fe+270)%360,s:le.s,l:le.l})]}function D(ie){var le=a(ie).toHsl(),fe=le.h;return[a(ie),a({h:(fe+72)%360,s:le.s,l:le.l}),a({h:(fe+216)%360,s:le.s,l:le.l})]}function S(ie,le,fe){le=le||6,fe=fe||30;var he=a(ie).toHsl(),pe=360/fe,xe=[a(ie)];for(he.h=(he.h-(pe*le>>1)+720)%360;--le;)he.h=(he.h+pe)%360,xe.push(a(he));return xe}function O(ie,le){le=le||6;for(var fe=a(ie).toHsv(),he=fe.h,pe=fe.s,xe=fe.v,Ee=[],Re=1/le;le--;)Ee.push(a({h:he,s:pe,v:xe})),xe=(xe+Re)%1;return Ee}a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var ie=this.toRgb();return(299*ie.r+587*ie.g+114*ie.b)/1e3},getLuminance:function(){var ie,le,fe,he=this.toRgb();return le=he.g/255,fe=he.b/255,.2126*((ie=he.r/255)<=.03928?ie/12.92:C.pow((ie+.055)/1.055,2.4))+.7152*(le<=.03928?le/12.92:C.pow((le+.055)/1.055,2.4))+.0722*(fe<=.03928?fe/12.92:C.pow((fe+.055)/1.055,2.4))},setAlpha:function(ie){return this._a=F(ie),this._roundA=v(100*this._a)/100,this},toHsv:function(){var ie=l(this._r,this._g,this._b);return{h:360*ie.h,s:ie.s,v:ie.v,a:this._a}},toHsvString:function(){var ie=l(this._r,this._g,this._b),le=v(360*ie.h),fe=v(100*ie.s),he=v(100*ie.v);return 1==this._a?"hsv("+le+", "+fe+"%, "+he+"%)":"hsva("+le+", "+fe+"%, "+he+"%, "+this._roundA+")"},toHsl:function(){var ie=o(this._r,this._g,this._b);return{h:360*ie.h,s:ie.s,l:ie.l,a:this._a}},toHslString:function(){var ie=o(this._r,this._g,this._b),le=v(360*ie.h),fe=v(100*ie.s),he=v(100*ie.l);return 1==this._a?"hsl("+le+", "+fe+"%, "+he+"%)":"hsla("+le+", "+fe+"%, "+he+"%, "+this._roundA+")"},toHex:function(ie){return u(this._r,this._g,this._b,ie)},toHexString:function(ie){return"#"+this.toHex(ie)},toHex8:function(ie){return fe=this._g,he=this._b,pe=this._a,xe=ie,Ee=[$(v(this._r).toString(16)),$(v(fe).toString(16)),$(v(he).toString(16)),$(H(pe))],xe&&Ee[0].charAt(0)==Ee[0].charAt(1)&&Ee[1].charAt(0)==Ee[1].charAt(1)&&Ee[2].charAt(0)==Ee[2].charAt(1)&&Ee[3].charAt(0)==Ee[3].charAt(1)?Ee[0].charAt(0)+Ee[1].charAt(0)+Ee[2].charAt(0)+Ee[3].charAt(0):Ee.join("");var fe,he,pe,xe,Ee},toHex8String:function(ie){return"#"+this.toHex8(ie)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(100*B(this._r,255))+"%",g:v(100*B(this._g,255))+"%",b:v(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+v(100*B(this._r,255))+"%, "+v(100*B(this._g,255))+"%, "+v(100*B(this._b,255))+"%)":"rgba("+v(100*B(this._r,255))+"%, "+v(100*B(this._g,255))+"%, "+v(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(ie){var le="#"+d(this._r,this._g,this._b,this._a),fe=le,he=this._gradientType?"GradientType = 1, ":"";if(ie){var pe=a(ie);fe="#"+d(pe._r,pe._g,pe._b,pe._a)}return"progid:DXImageTransform.Microsoft.gradient("+he+"startColorstr="+le+",endColorstr="+fe+")"},toString:function(ie){var le=!!ie;ie=ie||this._format;var fe=!1;return le||!(this._a<1&&this._a>=0)||"hex"!==ie&&"hex6"!==ie&&"hex3"!==ie&&"hex4"!==ie&&"hex8"!==ie&&"name"!==ie?("rgb"===ie&&(fe=this.toRgbString()),"prgb"===ie&&(fe=this.toPercentageRgbString()),"hex"!==ie&&"hex6"!==ie||(fe=this.toHexString()),"hex3"===ie&&(fe=this.toHexString(!0)),"hex4"===ie&&(fe=this.toHex8String(!0)),"hex8"===ie&&(fe=this.toHex8String()),"name"===ie&&(fe=this.toName()),"hsl"===ie&&(fe=this.toHslString()),"hsv"===ie&&(fe=this.toHsvString()),fe||this.toHexString()):"name"===ie&&0===this._a?this.toName():this.toRgbString()},clone:function(){return a(this.toString())},_applyModification:function(ie,le){var fe=ie.apply(null,[this].concat([].slice.call(le)));return this._r=fe._r,this._g=fe._g,this._b=fe._b,this.setAlpha(fe._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(h,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(ie,le){return ie.apply(null,[this].concat([].slice.call(le)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(m,arguments)}},a.fromRatio=function(ie,le){if("object"==typeof ie){var fe={};for(var he in ie)ie.hasOwnProperty(he)&&(fe[he]="a"===he?ie[he]:G(ie[he]));ie=fe}return a(ie,le)},a.equals=function(ie,le){return!(!ie||!le)&&a(ie).toRgbString()==a(le).toRgbString()},a.random=function(){return a.fromRatio({r:s(),g:s(),b:s()})},a.mix=function(ie,le,fe){fe=0===fe?0:fe||50;var he=a(ie).toRgb(),pe=a(le).toRgb(),xe=fe/100;return a({r:(pe.r-he.r)*xe+he.r,g:(pe.g-he.g)*xe+he.g,b:(pe.b-he.b)*xe+he.b,a:(pe.a-he.a)*xe+he.a})},a.readability=function(ie,le){var fe=a(ie),he=a(le);return(C.max(fe.getLuminance(),he.getLuminance())+.05)/(C.min(fe.getLuminance(),he.getLuminance())+.05)},a.isReadable=function(ie,le,fe){var he,pe,xe,Ee,Re,ke=a.readability(ie,le);switch(pe=!1,(xe=fe,"AA"!==(Ee=((xe=xe||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==Ee&&(Ee="AA"),"small"!==(Re=(xe.size||"small").toLowerCase())&&"large"!==Re&&(Re="small"),he={level:Ee,size:Re}).level+he.size){case"AAsmall":case"AAAlarge":pe=ke>=4.5;break;case"AAlarge":pe=ke>=3;break;case"AAAsmall":pe=ke>=7}return pe},a.mostReadable=function(ie,le,fe){var he,pe,xe,Ee,Re=null,ke=0;pe=(fe=fe||{}).includeFallbackColors,xe=fe.level,Ee=fe.size;for(var Te=0;Te<le.length;Te++)(he=a.readability(ie,le[Te]))>ke&&(ke=he,Re=a(le[Te]));return a.isReadable(ie,Re,{level:xe,size:Ee})||!pe?Re:(fe.includeFallbackColors=!1,a.mostReadable(ie,["#fff","#000"],fe))};var P=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=a.hexNames=function(ie){var le={};for(var fe in ie)ie.hasOwnProperty(fe)&&(le[ie[fe]]=fe);return le}(P);function F(ie){return ie=parseFloat(ie),(isNaN(ie)||ie<0||ie>1)&&(ie=1),ie}function B(ie,le){var he;"string"==typeof(he=ie)&&-1!=he.indexOf(".")&&1===parseFloat(he)&&(ie="100%");var fe=function(he){return"string"==typeof he&&-1!=he.indexOf("%")}(ie);return ie=c(le,i(0,parseFloat(ie))),fe&&(ie=parseInt(ie*le,10)/100),C.abs(ie-le)<1e-6?1:ie%le/parseFloat(le)}function J(ie){return c(1,i(0,ie))}function z(ie){return parseInt(ie,16)}function $(ie){return 1==ie.length?"0"+ie:""+ie}function G(ie){return ie<=1&&(ie=100*ie+"%"),ie}function H(ie){return C.round(255*parseFloat(ie)).toString(16)}function X(ie){return z(ie)/255}var K,ue,ae,ne=(ue="[\\s|\\(]+("+(K="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",ae="[\\s|\\(]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")[,|\\s]+("+K+")\\s*\\)?",{CSS_UNIT:new RegExp(K),rgb:new RegExp("rgb"+ue),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+ue),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+ue),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Q(ie){return!!ne.CSS_UNIT.exec(ie)}se.exports?se.exports=a:void 0===(I=function(){return a}.call(U,r,U,se))||(se.exports=I)}(Math)},57060:function(se){"use strict";se.exports=r,se.exports.float32=se.exports.float=r,se.exports.fract32=se.exports.fract=function(I,C){if(I.length){if(I instanceof Float32Array)return new Float32Array(I.length);C instanceof Float32Array||(C=r(I));for(var f=0,k=C.length;f<k;f++)C[f]=I[f]-C[f];return C}return r(I-r(I))};var U=new Float32Array(1);function r(I){return I.length?I instanceof Float32Array?I:new Float32Array(I):(U[0]=I,U[0])}},75686:function(se,U,r){"use strict";var I=r(25677);se.exports=k;var C=96;function f(T,v){var c=I(getComputedStyle(T).getPropertyValue(v));return c[0]*k(c[1],T)}function k(T,v){switch(v=v||document.body,T=(T||"px").trim().toLowerCase(),v!==window&&v!==document||(v=document.body),T){case"%":return v.clientHeight/100;case"ch":case"ex":return function(c,i){var s=document.createElement("div");s.style["font-size"]="128"+c,i.appendChild(s);var a=f(s,"font-size")/128;return i.removeChild(s),a}(T,v);case"em":return f(v,"font-size");case"rem":return f(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return C;case"cm":return C/2.54;case"mm":return C/25.4;case"pt":return C/72;case"pc":return C/6}return 1}},96892:function(se,U,r){"use strict";function I(k){return k}function C(k,T){return"string"==typeof T&&(T=k.objects[T]),"GeometryCollection"===T.type?{type:"FeatureCollection",features:T.geometries.map(function(v){return f(k,v)})}:f(k,T)}function f(k,T){var v=T.id,c=T.bbox,i=null==T.properties?{}:T.properties,s=function(a,o){var l=function(p){if(null==p)return I;var _,x,b=p.scale[0],M=p.scale[1],m=p.translate[0],D=p.translate[1];return function(S,O){O||(_=x=0);var P=2,R=S.length,F=new Array(R);for(F[0]=(_+=S[0])*b+m,F[1]=(x+=S[1])*M+D;P<R;)F[P]=S[P],++P;return F}}(a.transform),u=a.arcs;function d(p,_){_.length&&_.pop();for(var x=u[p<0?~p:p],b=0,M=x.length;b<M;++b)_.push(l(x[b],b));p<0&&function(m,D){for(var S,O=m.length,P=O-D;P<--O;)S=m[P],m[P++]=m[O],m[O]=S}(_,M)}function g(p){return l(p)}function h(p){for(var _=[],x=0,b=p.length;x<b;++x)d(p[x],_);return _.length<2&&_.push(_[0]),_}function w(p){for(var _=h(p);_.length<4;)_.push(_[0]);return _}function y(p){return p.map(w)}return function p(_){var x,b=_.type;switch(b){case"GeometryCollection":return{type:b,geometries:_.geometries.map(p)};case"Point":x=g(_.coordinates);break;case"MultiPoint":x=_.coordinates.map(g);break;case"LineString":x=h(_.arcs);break;case"MultiLineString":x=_.arcs.map(h);break;case"Polygon":x=y(_.arcs);break;case"MultiPolygon":x=_.arcs.map(y);break;default:return null}return{type:b,coordinates:x}}(o)}(k,T);return null==v&&null==c?{type:"Feature",properties:i,geometry:s}:null==c?{type:"Feature",id:v,properties:i,geometry:s}:{type:"Feature",id:v,bbox:c,properties:i,geometry:s}}r.d(U,{zL:function(){return C}})},73116:function(se,U,r){"use strict";var I=r(24511);se.exports=function(C){if("function"!=typeof C||!hasOwnProperty.call(C,"length"))return!1;try{if("number"!=typeof C.length||"function"!=typeof C.call||"function"!=typeof C.apply)return!1}catch{return!1}return!I(C)}},69190:function(se,U,r){"use strict";var I=r(24582),C=r(47403),f=r(9234),k=r(6048),T=function(v,c){return v.replace("%v",k(c))};se.exports=function(v,c,i){if(!C(i))throw new TypeError(T(c,v));if(!I(v)){if("default"in i)return i.default;if(i.isOptional)return null}var s=f(i.errorMessage);throw I(s)||(s=c),new TypeError(T(s,v))}},18497:function(se){"use strict";se.exports=function(U){try{return U.toString()}catch{try{return String(U)}catch{return null}}}},6048:function(se,U,r){"use strict";var I=r(18497),C=/[\n\r\u2028\u2029]/g;se.exports=function(f){var k=I(f);return null===k?"<Non-coercible to string value>":(k.length>100&&(k=k.slice(0,99)+"\u2026"),k=k.replace(C,function(T){switch(T){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function(se,U,r){"use strict";var I=r(24582),C={object:!0,function:!0,undefined:!0};se.exports=function(f){return!!I(f)&&hasOwnProperty.call(C,typeof f)}},82527:function(se,U,r){"use strict";var I=r(69190),C=r(84985);se.exports=function(f){return C(f)?f:I(f,"%v is not a plain function",arguments[1])}},84985:function(se,U,r){"use strict";var I=r(73116),C=/^\s*class[\s{/}]/,f=Function.prototype.toString;se.exports=function(k){return!!I(k)&&!C.test(f.call(k))}},24511:function(se,U,r){"use strict";var I=r(47403);se.exports=function(C){if(!I(C))return!1;try{return!!C.constructor&&C.constructor.prototype===C}catch{return!1}}},9234:function(se,U,r){"use strict";var I=r(24582),C=r(47403),f=Object.prototype.toString;se.exports=function(k){if(!I(k))return null;if(C(k)){var T=k.toString;if("function"!=typeof T||T===f)return null}try{return""+k}catch{return null}}},10424:function(se,U,r){"use strict";var I=r(69190),C=r(24582);se.exports=function(f){return C(f)?f:I(f,"Cannot use %v",arguments[1])}},24582:function(se){"use strict";se.exports=function(U){return null!=U}},58404:function(se,U,r){"use strict";var I=r(13547),C=r(12129),f=r(12856).Buffer;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:C([32,0]),UINT16:C([32,0]),UINT32:C([32,0]),BIGUINT64:C([32,0]),INT8:C([32,0]),INT16:C([32,0]),INT32:C([32,0]),BIGINT64:C([32,0]),FLOAT:C([32,0]),DOUBLE:C([32,0]),DATA:C([32,0]),UINT8C:C([32,0]),BUFFER:C([32,0])});var k=typeof Uint8ClampedArray<"u",T=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",c=r.g.__TYPEDARRAY_POOL;c.UINT8C||(c.UINT8C=C([32,0])),c.BIGUINT64||(c.BIGUINT64=C([32,0])),c.BIGINT64||(c.BIGINT64=C([32,0])),c.BUFFER||(c.BUFFER=C([32,0]));var i=c.DATA,s=c.BUFFER;function a(D){if(D){var O=I.log2(D.length||D.byteLength);i[O].push(D)}}function o(D){D=I.nextPow2(D);var S=I.log2(D),O=i[S];return O.length>0?O.pop():new ArrayBuffer(D)}function l(D){return new Uint8Array(o(D),0,D)}function u(D){return new Uint16Array(o(2*D),0,D)}function d(D){return new Uint32Array(o(4*D),0,D)}function g(D){return new Int8Array(o(D),0,D)}function h(D){return new Int16Array(o(2*D),0,D)}function w(D){return new Int32Array(o(4*D),0,D)}function y(D){return new Float32Array(o(4*D),0,D)}function p(D){return new Float64Array(o(8*D),0,D)}function _(D){return k?new Uint8ClampedArray(o(D),0,D):l(D)}function x(D){return T?new BigUint64Array(o(8*D),0,D):null}function b(D){return v?new BigInt64Array(o(8*D),0,D):null}function M(D){return new DataView(o(D),0,D)}function m(D){D=I.nextPow2(D);var S=I.log2(D),O=s[S];return O.length>0?O.pop():new f(D)}U.free=function(D){if(f.isBuffer(D))s[I.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var O=0|I.log2(D.length||D.byteLength);i[O].push(D)}},U.freeUint8=U.freeUint16=U.freeUint32=U.freeBigUint64=U.freeInt8=U.freeInt16=U.freeInt32=U.freeBigInt64=U.freeFloat32=U.freeFloat=U.freeFloat64=U.freeDouble=U.freeUint8Clamped=U.freeDataView=function(D){a(D.buffer)},U.freeArrayBuffer=a,U.freeBuffer=function(D){s[I.log2(D.length)].push(D)},U.malloc=function(D,S){if(void 0===S||"arraybuffer"===S)return o(D);switch(S){case"uint8":return l(D);case"uint16":return u(D);case"uint32":return d(D);case"int8":return g(D);case"int16":return h(D);case"int32":return w(D);case"float":case"float32":return y(D);case"double":case"float64":return p(D);case"uint8_clamped":return _(D);case"bigint64":return b(D);case"biguint64":return x(D);case"buffer":return m(D);case"data":case"dataview":return M(D);default:return null}return null},U.mallocArrayBuffer=o,U.mallocUint8=l,U.mallocUint16=u,U.mallocUint32=d,U.mallocInt8=g,U.mallocInt16=h,U.mallocInt32=w,U.mallocFloat32=U.mallocFloat=y,U.mallocFloat64=U.mallocDouble=p,U.mallocUint8Clamped=_,U.mallocBigUint64=x,U.mallocBigInt64=b,U.mallocDataView=M,U.mallocBuffer=m,U.clearCache=function(){for(var D=0;D<32;++D)c.UINT8[D].length=0,c.UINT16[D].length=0,c.UINT32[D].length=0,c.INT8[D].length=0,c.INT16[D].length=0,c.INT32[D].length=0,c.FLOAT[D].length=0,c.DOUBLE[D].length=0,c.BIGUINT64[D].length=0,c.BIGINT64[D].length=0,c.UINT8C[D].length=0,i[D].length=0,s[D].length=0}},90448:function(se){var U=/[\'\"]/;se.exports=function(r){return r?(U.test(r.charAt(0))&&(r=r.substr(1)),U.test(r.charAt(r.length-1))&&(r=r.substr(0,r.length-1)),r):""}},93447:function(se){"use strict";se.exports=function(U,r,I){Array.isArray(I)||(I=[].slice.call(arguments,2));for(var C=0,f=I.length;C<f;C++){var k=I[C];for(var T in k)if((void 0===r[T]||Array.isArray(r[T])||U[T]!==r[T])&&T in r){var v;if(!0===k[T])v=r[T];else if(!1===k[T]||"function"==typeof k[T]&&void 0===(v=k[T](r[T],U,r)))continue;U[T]=v}}return U}},20588:function(se,U,r){function I(C){try{if(!r.g.localStorage)return!1}catch{return!1}var f=r.g.localStorage[C];return null!=f&&"true"===String(f).toLowerCase()}se.exports=function(C,f){if(I("noDeprecation"))return C;var k=!1;return function(){if(!k){if(I("throwDeprecation"))throw new Error(f);I("traceDeprecation")?console.trace(f):console.warn(f),k=!0}return C.apply(this,arguments)}}},45920:function(se){se.exports=function(U){return U&&"object"==typeof U&&"function"==typeof U.copy&&"function"==typeof U.fill&&"function"==typeof U.readUInt8}},4936:function(se,U,r){"use strict";var I=r(47216),C=r(65481),f=r(21099),k=r(9187);function T(B){return B.call.bind(B)}var v=typeof BigInt<"u",c=typeof Symbol<"u",i=T(Object.prototype.toString),s=T(Number.prototype.valueOf),a=T(String.prototype.valueOf),o=T(Boolean.prototype.valueOf);if(v)var l=T(BigInt.prototype.valueOf);if(c)var u=T(Symbol.prototype.valueOf);function d(B,J){if("object"!=typeof B)return!1;try{return J(B),!0}catch{return!1}}function g(B){return"[object Map]"===i(B)}function h(B){return"[object Set]"===i(B)}function w(B){return"[object WeakMap]"===i(B)}function y(B){return"[object WeakSet]"===i(B)}function p(B){return"[object ArrayBuffer]"===i(B)}function _(B){return typeof ArrayBuffer<"u"&&(p.working?p(B):B instanceof ArrayBuffer)}function x(B){return"[object DataView]"===i(B)}function b(B){return typeof DataView<"u"&&(x.working?x(B):B instanceof DataView)}U.isArgumentsObject=I,U.isGeneratorFunction=C,U.isTypedArray=k,U.isPromise=function(B){return typeof Promise<"u"&&B instanceof Promise||null!==B&&"object"==typeof B&&"function"==typeof B.then&&"function"==typeof B.catch},U.isArrayBufferView=function(B){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(B):k(B)||b(B)},U.isUint8Array=function(B){return"Uint8Array"===f(B)},U.isUint8ClampedArray=function(B){return"Uint8ClampedArray"===f(B)},U.isUint16Array=function(B){return"Uint16Array"===f(B)},U.isUint32Array=function(B){return"Uint32Array"===f(B)},U.isInt8Array=function(B){return"Int8Array"===f(B)},U.isInt16Array=function(B){return"Int16Array"===f(B)},U.isInt32Array=function(B){return"Int32Array"===f(B)},U.isFloat32Array=function(B){return"Float32Array"===f(B)},U.isFloat64Array=function(B){return"Float64Array"===f(B)},U.isBigInt64Array=function(B){return"BigInt64Array"===f(B)},U.isBigUint64Array=function(B){return"BigUint64Array"===f(B)},g.working=typeof Map<"u"&&g(new Map),U.isMap=function(B){return typeof Map<"u"&&(g.working?g(B):B instanceof Map)},h.working=typeof Set<"u"&&h(new Set),U.isSet=function(B){return typeof Set<"u"&&(h.working?h(B):B instanceof Set)},w.working=typeof WeakMap<"u"&&w(new WeakMap),U.isWeakMap=function(B){return typeof WeakMap<"u"&&(w.working?w(B):B instanceof WeakMap)},y.working=typeof WeakSet<"u"&&y(new WeakSet),U.isWeakSet=function(B){return y(B)},p.working=typeof ArrayBuffer<"u"&&p(new ArrayBuffer),U.isArrayBuffer=_,x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1)),U.isDataView=b;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function m(B){return"[object SharedArrayBuffer]"===i(B)}function D(B){return void 0!==M&&(void 0===m.working&&(m.working=m(new M)),m.working?m(B):B instanceof M)}function S(B){return d(B,s)}function O(B){return d(B,a)}function P(B){return d(B,o)}function R(B){return v&&d(B,l)}function F(B){return c&&d(B,u)}U.isSharedArrayBuffer=D,U.isAsyncFunction=function(B){return"[object AsyncFunction]"===i(B)},U.isMapIterator=function(B){return"[object Map Iterator]"===i(B)},U.isSetIterator=function(B){return"[object Set Iterator]"===i(B)},U.isGeneratorObject=function(B){return"[object Generator]"===i(B)},U.isWebAssemblyCompiledModule=function(B){return"[object WebAssembly.Module]"===i(B)},U.isNumberObject=S,U.isStringObject=O,U.isBooleanObject=P,U.isBigIntObject=R,U.isSymbolObject=F,U.isBoxedPrimitive=function(B){return S(B)||O(B)||P(B)||R(B)||F(B)},U.isAnyArrayBuffer=function(B){return typeof Uint8Array<"u"&&(_(B)||D(B))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(B){Object.defineProperty(U,B,{enumerable:!1,value:function(){throw new Error(B+" is not supported in userland")}})})},43827:function(se,U,r){var I=r(90386),C=Object.getOwnPropertyDescriptors||function(F){for(var B=Object.keys(F),J={},z=0;z<B.length;z++)J[B[z]]=Object.getOwnPropertyDescriptor(F,B[z]);return J},f=/%[sdj%]/g;U.format=function(F){if(!w(F)){for(var B=[],J=0;J<arguments.length;J++)B.push(c(arguments[J]));return B.join(" ")}J=1;for(var z=arguments,$=z.length,G=String(F).replace(f,function(X){if("%%"===X)return"%";if(J>=$)return X;switch(X){case"%s":return String(z[J++]);case"%d":return Number(z[J++]);case"%j":try{return JSON.stringify(z[J++])}catch{return"[Circular]"}default:return X}}),H=z[J];J<$;H=z[++J])g(H)||!_(H)?G+=" "+H:G+=" "+c(H);return G},U.deprecate=function(F,B){if(void 0!==I&&!0===I.noDeprecation)return F;if(void 0===I)return function(){return U.deprecate(F,B).apply(this,arguments)};var J=!1;return function(){if(!J){if(I.throwDeprecation)throw new Error(B);I.traceDeprecation?console.trace(B):console.error(B),J=!0}return F.apply(this,arguments)}};var k={},T=/^$/;if(I.env.NODE_DEBUG){var v=I.env.NODE_DEBUG;v=v.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),T=new RegExp("^"+v+"$","i")}function c(F,B){var J={seen:[],stylize:s};return arguments.length>=3&&(J.depth=arguments[2]),arguments.length>=4&&(J.colors=arguments[3]),d(B)?J.showHidden=B:B&&U._extend(J,B),y(J.showHidden)&&(J.showHidden=!1),y(J.depth)&&(J.depth=2),y(J.colors)&&(J.colors=!1),y(J.customInspect)&&(J.customInspect=!0),J.colors&&(J.stylize=i),a(J,F,J.depth)}function i(F,B){var J=c.styles[B];return J?"\x1b["+c.colors[J][0]+"m"+F+"\x1b["+c.colors[J][1]+"m":F}function s(F,B){return F}function a(F,B,J){if(F.customInspect&&B&&M(B.inspect)&&B.inspect!==U.inspect&&(!B.constructor||B.constructor.prototype!==B)){var z=B.inspect(J,F);return w(z)||(z=a(F,z,J)),z}var $=function(Q,ie){if(y(ie))return Q.stylize("undefined","undefined");if(w(ie)){var le="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Q.stylize(le,"string")}return h(ie)?Q.stylize(""+ie,"number"):d(ie)?Q.stylize(""+ie,"boolean"):g(ie)?Q.stylize("null","null"):void 0}(F,B);if($)return $;var ie,G=Object.keys(B),H=(ie={},G.forEach(function(le,fe){ie[le]=!0}),ie);if(F.showHidden&&(G=Object.getOwnPropertyNames(B)),b(B)&&(G.indexOf("message")>=0||G.indexOf("description")>=0))return o(B);if(0===G.length){if(M(B))return F.stylize("[Function"+(B.name?": "+B.name:"")+"]","special");if(p(B))return F.stylize(RegExp.prototype.toString.call(B),"regexp");if(x(B))return F.stylize(Date.prototype.toString.call(B),"date");if(b(B))return o(B)}var K,ue="",ae=!1,ne=["{","}"];return u(B)&&(ae=!0,ne=["[","]"]),M(B)&&(ue=" [Function"+(B.name?": "+B.name:"")+"]"),p(B)&&(ue=" "+RegExp.prototype.toString.call(B)),x(B)&&(ue=" "+Date.prototype.toUTCString.call(B)),b(B)&&(ue=" "+o(B)),0!==G.length||ae&&0!=B.length?J<0?p(B)?F.stylize(RegExp.prototype.toString.call(B),"regexp"):F.stylize("[Object]","special"):(F.seen.push(B),K=ae?function(Q,ie,le,fe,he){for(var pe=[],xe=0,Ee=ie.length;xe<Ee;++xe)O(ie,String(xe))?pe.push(l(Q,ie,le,fe,String(xe),!0)):pe.push("");return he.forEach(function(Re){Re.match(/^\d+$/)||pe.push(l(Q,ie,le,fe,Re,!0))}),pe}(F,B,J,H,G):G.map(function(Q){return l(F,B,J,H,Q,ae)}),F.seen.pop(),function(Q,ie,le){return Q.reduce(function(fe,he){return he.indexOf("\n"),fe+he.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?le[0]+(""===ie?"":ie+"\n ")+" "+Q.join(",\n  ")+" "+le[1]:le[0]+ie+" "+Q.join(", ")+" "+le[1]}(K,ue,ne)):ne[0]+ue+ne[1]}function o(F){return"["+Error.prototype.toString.call(F)+"]"}function l(F,B,J,z,$,G){var H,X,K;if((K=Object.getOwnPropertyDescriptor(B,$)||{value:B[$]}).get?X=F.stylize(K.set?"[Getter/Setter]":"[Getter]","special"):K.set&&(X=F.stylize("[Setter]","special")),O(z,$)||(H="["+$+"]"),X||(F.seen.indexOf(K.value)<0?(X=g(J)?a(F,K.value,null):a(F,K.value,J-1)).indexOf("\n")>-1&&(X=G?X.split("\n").map(function(ue){return"  "+ue}).join("\n").slice(2):"\n"+X.split("\n").map(function(ue){return"   "+ue}).join("\n")):X=F.stylize("[Circular]","special")),y(H)){if(G&&$.match(/^\d+$/))return X;(H=JSON.stringify(""+$)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.slice(1,-1),H=F.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=F.stylize(H,"string"))}return H+": "+X}function u(F){return Array.isArray(F)}function d(F){return"boolean"==typeof F}function g(F){return null===F}function h(F){return"number"==typeof F}function w(F){return"string"==typeof F}function y(F){return void 0===F}function p(F){return _(F)&&"[object RegExp]"===m(F)}function _(F){return"object"==typeof F&&null!==F}function x(F){return _(F)&&"[object Date]"===m(F)}function b(F){return _(F)&&("[object Error]"===m(F)||F instanceof Error)}function M(F){return"function"==typeof F}function m(F){return Object.prototype.toString.call(F)}function D(F){return F<10?"0"+F.toString(10):F.toString(10)}U.debuglog=function(F){if(F=F.toUpperCase(),!k[F])if(T.test(F)){var B=I.pid;k[F]=function(){var J=U.format.apply(U,arguments);console.error("%s %d: %s",F,B,J)}}else k[F]=function(){};return k[F]},U.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},U.types=r(4936),U.isArray=u,U.isBoolean=d,U.isNull=g,U.isNullOrUndefined=function(F){return null==F},U.isNumber=h,U.isString=w,U.isSymbol=function(F){return"symbol"==typeof F},U.isUndefined=y,U.isRegExp=p,U.types.isRegExp=p,U.isObject=_,U.isDate=x,U.types.isDate=x,U.isError=b,U.types.isNativeError=b,U.isFunction=M,U.isPrimitive=function(F){return null===F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||"symbol"==typeof F||void 0===F},U.isBuffer=r(45920);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(F,B){return Object.prototype.hasOwnProperty.call(F,B)}U.log=function(){var F,B;console.log("%s - %s",(B=[D((F=new Date).getHours()),D(F.getMinutes()),D(F.getSeconds())].join(":"),[F.getDate(),S[F.getMonth()],B].join(" ")),U.format.apply(U,arguments))},U.inherits=r(42018),U._extend=function(F,B){if(!B||!_(B))return F;for(var J=Object.keys(B),z=J.length;z--;)F[J[z]]=B[J[z]];return F};var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function R(F,B){if(!F){var J=new Error("Promise was rejected with a falsy value");J.reason=F,F=J}return B(F)}U.promisify=function(F){if("function"!=typeof F)throw new TypeError('The "original" argument must be of type Function');if(P&&F[P]){var B;if("function"!=typeof(B=F[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(B,P,{value:B,enumerable:!1,writable:!1,configurable:!0}),B}function B(){for(var J,z,$=new Promise(function(X,K){J=X,z=K}),G=[],H=0;H<arguments.length;H++)G.push(arguments[H]);G.push(function(X,K){X?z(X):J(K)});try{F.apply(this,G)}catch(X){z(X)}return $}return Object.setPrototypeOf(B,Object.getPrototypeOf(F)),P&&Object.defineProperty(B,P,{value:B,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(B,C(F))},U.promisify.custom=P,U.callbackify=function(F){if("function"!=typeof F)throw new TypeError('The "original" argument must be of type Function');function B(){for(var J=[],z=0;z<arguments.length;z++)J.push(arguments[z]);var $=J.pop();if("function"!=typeof $)throw new TypeError("The last argument must be of type Function");var G=this,H=function(){return $.apply(G,arguments)};F.apply(this,J).then(function(X){I.nextTick(H.bind(null,null,X))},function(X){I.nextTick(R.bind(null,X,H))})}return Object.setPrototypeOf(B,Object.getPrototypeOf(F)),Object.defineProperties(B,C(F)),B}},40372:function(se,U,r){var I=r(86249);se.exports=function(C){return I("webgl",C)}},21099:function(se,U,r){"use strict";var I=r(31353),C=r(72077),f=r(6614),k=r(40383),T=f("Object.prototype.toString"),v=r(84543)(),c=typeof globalThis>"u"?r.g:globalThis,i=C(),s=f("String.prototype.slice"),a={},o=Object.getPrototypeOf;v&&k&&o&&I(i,function(u){if("function"==typeof c[u]){var d=new c[u];if(Symbol.toStringTag in d){var g=o(d),h=k(g,Symbol.toStringTag);if(!h){var w=o(g);h=k(w,Symbol.toStringTag)}a[u]=h.get}}});var l=r(9187);se.exports=function(u){return!!l(u)&&(v&&Symbol.toStringTag in u?(d=u,g=!1,I(a,function(h,w){if(!g)try{var y=h.call(d);y===w&&(g=y)}catch{}}),g):s(T(u),8,-1));var d,g}},3961:function(se,U,r){var I=r(63489),C=r(56131),f=I.instance();function k(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}C(k.prototype=new I.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(o,l){if("string"==typeof o){var u=o.match(v);return u?u[0]:""}var d=this._validateYear(o),g=o.month(),h=""+this.toChineseMonth(d,g);return l&&h.length<2&&(h="0"+h),this.isIntercalaryMonth(d,g)&&(h+="i"),h},monthNames:function(o){if("string"==typeof o){var l=o.match(c);return l?l[0]:""}var u=this._validateYear(o),d=o.month(),g=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(u,d)-1];return this.isIntercalaryMonth(u,d)&&(g="\u95f0"+g),g},monthNamesShort:function(o){if("string"==typeof o){var l=o.match(i);return l?l[0]:""}var u=this._validateYear(o),d=o.month(),g=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(u,d)-1];return this.isIntercalaryMonth(u,d)&&(g="\u95f0"+g),g},parseMonth:function(o,l){o=this._validateYear(o);var u,d=parseInt(l);if(isNaN(d))"\u95f0"===l[0]&&(u=!0,l=l.substring(1)),"\u6708"===l[l.length-1]&&(l=l.substring(0,l.length-1)),d=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(l);else{var g=l[l.length-1];u="i"===g||"I"===g}return this.toMonthIndex(o,d,u)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(o,l){if(o.year&&(o=o.year()),"number"!=typeof o||o<1888||o>2111)throw l.replace(/\{0\}/,this.local.name);return o},toMonthIndex:function(o,l,u){var d=this.intercalaryMonth(o);if(u&&l!==d||l<1||l>12)throw I.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?!u&&l<=d?l-1:l:l-1},toChineseMonth:function(o,l){o.year&&(l=(o=o.year()).month());var u=this.intercalaryMonth(o);if(l<0||l>(u?12:11))throw I.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?l<u?l+1:l:l+1},intercalaryMonth:function(o){return o=this._validateYear(o),s[o-s[0]]>>13},isIntercalaryMonth:function(o,l){o.year&&(l=(o=o.year()).month());var u=this.intercalaryMonth(o);return!!u&&u===l},leapYear:function(o){return 0!==this.intercalaryMonth(o)},weekOfYear:function(o,l,u){var d,g=this._validateYear(o,I.local.invalidyear),h=a[g-a[0]];(d=f.newDate(h>>9&4095,h>>5&15,31&h)).add(4-(d.dayOfWeek()||7),"d");var _=this.toJD(o,l,u)-d.toJD();return 1+Math.floor(_/7)},monthsInYear:function(o){return this.leapYear(o)?13:12},daysInMonth:function(o,l){o.year&&(l=o.month(),o=o.year()),o=this._validateYear(o);var u=s[o-s[0]];if(l>(u>>13?12:11))throw I.local.invalidMonth.replace(/\{0\}/,this.local.name);return u&1<<12-l?30:29},weekDay:function(o,l,u){return(this.dayOfWeek(o,l,u)||7)<6},toJD:function(o,l,u){var d=this._validate(o,h,u,I.local.invalidDate);o=this._validateYear(d.year()),l=d.month(),u=d.day();var g=this.isIntercalaryMonth(o,l),h=this.toChineseMonth(o,l),w=function(y,p,_,x,b){var M,m,D;if("object"==typeof y)m=y,M=p||{};else{var S;if(!("number"==typeof y&&y>=1888&&y<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof p&&p>=1&&p<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof _&&_>=1&&_<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof x?(S=!1,M=x):(S=!!x,M={}),m={year:y,month:p,day:_,isIntercalary:S}}D=m.day-1;var O,P=s[m.year-s[0]],R=P>>13;O=R&&(m.month>R||m.isIntercalary)?m.month:m.month-1;for(var F=0;F<O;F++)D+=P&1<<12-F?30:29;var B=a[m.year-a[0]],J=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+D);return M.year=J.getFullYear(),M.month=1+J.getMonth(),M.day=J.getDate(),M}(o,h,u,g);return f.toJD(w.year,w.month,w.day)},fromJD:function(o){var l=f.fromJD(o),u=function(g,h,w,y){var p,_;if("object"==typeof g)p=g,_=h||{};else{if(!("number"==typeof g&&g>=1888&&g<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof h&&h>=1&&h<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof w&&w>=1&&w<=31))throw new Error("Solar day outside range 1 - 31");p={year:g,month:h,day:w},_={}}var x=a[p.year-a[0]];_.year=(p.year<<9|p.month<<5|p.day)>=x?p.year:p.year-1,x=a[_.year-a[0]];var M,m=new Date(x>>9&4095,(x>>5&15)-1,31&x),D=new Date(p.year,p.month-1,p.day);M=Math.round((D-m)/864e5);var S,O=s[_.year-s[0]];for(S=0;S<13;S++){var P=O&1<<12-S?30:29;if(M<P)break;M-=P}var R=O>>13;return!R||S<R?(_.isIntercalary=!1,_.month=1+S):S===R?(_.isIntercalary=!0,_.month=S):(_.isIntercalary=!1,_.month=S),_.day=1+M,_}(l.year(),l.month(),l.day()),d=this.toMonthIndex(u.year,u.month,u.isIntercalary);return this.newDate(u.year,d,u.day)},fromString:function(o){var l=o.match(T),u=this._validateYear(+l[1]),h=this.toMonthIndex(u,+l[2],!!l[3]);return this.newDate(u,h,+l[4])},add:function(o,l,u){var d=o.year(),g=o.month(),h=this.isIntercalaryMonth(d,g),w=this.toChineseMonth(d,g),y=Object.getPrototypeOf(k.prototype).add.call(this,o,l,u);if("y"===u){var p=y.year(),_=y.month(),x=this.isIntercalaryMonth(p,w),b=this.toMonthIndex(p,w,!(!h||!x));b!==_&&y.month(b)}return y}});var T=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,v=/^\d?\d[iI]?/m,c=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,i=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;I.calendars.chinese=k;var s=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],a=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function(se,U,r){var I=r(63489);function f(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var T=this._validate(k,this.minMonth,this.minDay,I.local.invalidYear);return(k=T.year()+(T.year()<0?1:0))%4==3||k%4==-1},monthsInYear:function(k){return this._validate(k,this.minMonth,this.minDay,I.local.invalidYear||I.regionalOptions[""].invalidYear),13},weekOfYear:function(k,T,v){var c=this.newDate(k,T,v);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(k,T){var v=this._validate(k,T,this.minDay,I.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(13===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(k,T,v){return(this.dayOfWeek(k,T,v)||7)<6},toJD:function(k,T,v){var c=this._validate(k,T,v,I.local.invalidDate);return(k=c.year())<0&&k++,c.day()+30*(c.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var T=Math.floor(k)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(k)+.5-this.newDate(v,1,1).toJD();var c=Math.floor(T/30)+1;return this.newDate(v,c,T-30*(c-1)+1)}}),I.calendars.coptic=f},86825:function(se,U,r){var I=r(63489);function f(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(T){return this._validate(T,this.minMonth,this.minDay,I.local.invalidYear),!1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,I.local.invalidYear),13},daysInYear:function(T){return this._validate(T,this.minMonth,this.minDay,I.local.invalidYear),400},weekOfYear:function(T,v,c){var i=this.newDate(T,v,c);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(T,v){var c=this._validate(T,v,this.minDay,I.local.invalidMonth);return this.daysPerMonth[c.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(T,v,c){return(this._validate(T,v,c,I.local.invalidDate).day()+1)%8},weekDay:function(T,v,c){var i=this.dayOfWeek(T,v,c);return i>=2&&i<=6},extraInfo:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);return{century:k[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);return T=i.year()+(i.year()<0?1:0),v=i.month(),(c=i.day())+(v>1?16:0)+(v>2?32*(v-2):0)+400*(T-1)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T+.5)-Math.floor(this.jdEpoch)-1;var v=Math.floor(T/400)+1;T-=400*(v-1),T+=T>15?16:0;var c=Math.floor(T/32)+1;return this.newDate(v<=0?v-1:v,c,T-32*(c-1)+1)}});var k={20:"Fruitbat",21:"Anchovy"};I.calendars.discworld=f},37715:function(se,U,r){var I=r(63489);function f(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var T=this._validate(k,this.minMonth,this.minDay,I.local.invalidYear);return(k=T.year()+(T.year()<0?1:0))%4==3||k%4==-1},monthsInYear:function(k){return this._validate(k,this.minMonth,this.minDay,I.local.invalidYear||I.regionalOptions[""].invalidYear),13},weekOfYear:function(k,T,v){var c=this.newDate(k,T,v);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(k,T){var v=this._validate(k,T,this.minDay,I.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(13===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(k,T,v){return(this.dayOfWeek(k,T,v)||7)<6},toJD:function(k,T,v){var c=this._validate(k,T,v,I.local.invalidDate);return(k=c.year())<0&&k++,c.day()+30*(c.month()-1)+365*(k-1)+Math.floor(k/4)+this.jdEpoch-1},fromJD:function(k){var T=Math.floor(k)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(k)+.5-this.newDate(v,1,1).toJD();var c=Math.floor(T/30)+1;return this.newDate(v,c,T-30*(c-1)+1)}}),I.calendars.ethiopian=f},99384:function(se,U,r){var I=r(63489);function f(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}function k(T,v){return T-v*Math.floor(T/v)}r(56131)(f.prototype=new I.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return this._leapYear(v.year())},_leapYear:function(T){return k(7*(T=T<0?T+1:T)+1,19)<7},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,I.local.invalidYear),this._leapYear(T.year?T.year():T)?13:12},weekOfYear:function(T,v,c){var i=this.newDate(T,v,c);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){return T=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear).year(),this.toJD(-1===T?1:T+1,7,1)-this.toJD(T,7,1)},daysInMonth:function(T,v){return T.year&&(v=T.month(),T=T.year()),this._validate(T,v,this.minDay,I.local.invalidMonth),12===v&&this.leapYear(T)||8===v&&5===k(this.daysInYear(T),10)?30:9===v&&3===k(this.daysInYear(T),10)?29:this.daysPerMonth[v-1]},weekDay:function(T,v,c){return 6!==this.dayOfWeek(T,v,c)},extraInfo:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);T=i.year(),v=i.month(),c=i.day();var s=T<=0?T+1:T,a=this.jdEpoch+this._delay1(s)+this._delay2(s)+c+1;if(v<7){for(var o=7;o<=this.monthsInYear(T);o++)a+=this.daysInMonth(T,o);for(o=1;o<v;o++)a+=this.daysInMonth(T,o)}else for(o=7;o<v;o++)a+=this.daysInMonth(T,o);return a},_delay1:function(T){var v=Math.floor((235*T-234)/19),i=29*v+Math.floor((12084+13753*v)/25920);return k(3*(i+1),7)<3&&i++,i},_delay2:function(T){var v=this._delay1(T-1),c=this._delay1(T);return this._delay1(T+1)-c==356?2:c-v==382?1:0},fromJD:function(T){T=Math.floor(T)+.5;for(var v=Math.floor(98496*(T-this.jdEpoch)/35975351)-1;T>=this.toJD(-1===v?1:v+1,7,1);)v++;for(var c=T<this.toJD(v,1,1)?7:1;T>this.toJD(v,c,this.daysInMonth(v,c));)c++;var i=T-this.toJD(v,c,1)+1;return this.newDate(v,c,i)}}),I.calendars.hebrew=f},43805:function(se,U,r){var I=r(63489);function f(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(k){return(11*this._validate(k,this.minMonth,this.minDay,I.local.invalidYear).year()+14)%30<11},weekOfYear:function(k,T,v){var c=this.newDate(k,T,v);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInYear:function(k){return this.leapYear(k)?355:354},daysInMonth:function(k,T){var v=this._validate(k,T,this.minDay,I.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(12===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(k,T,v){return 5!==this.dayOfWeek(k,T,v)},toJD:function(k,T,v){var c=this._validate(k,T,v,I.local.invalidDate);return k=c.year(),T=c.month(),k=k<=0?k+1:k,(v=c.day())+Math.ceil(29.5*(T-1))+354*(k-1)+Math.floor((3+11*k)/30)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k)+.5;var T=Math.floor((30*(k-this.jdEpoch)+10646)/10631);T=T<=0?T-1:T;var v=Math.min(12,Math.ceil((k-29-this.toJD(T,1,1))/29.5)+1),c=k-this.toJD(T,v,1)+1;return this.newDate(T,v,c)}}),I.calendars.islamic=f},88874:function(se,U,r){var I=r(63489);function f(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){var T=this._validate(k,this.minMonth,this.minDay,I.local.invalidYear);return(k=T.year()<0?T.year()+1:T.year())%4==0},weekOfYear:function(k,T,v){var c=this.newDate(k,T,v);return c.add(4-(c.dayOfWeek()||7),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInMonth:function(k,T){var v=this._validate(k,T,this.minDay,I.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(2===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(k,T,v){return(this.dayOfWeek(k,T,v)||7)<6},toJD:function(k,T,v){var c=this._validate(k,T,v,I.local.invalidDate);return k=c.year(),T=c.month(),v=c.day(),k<0&&k++,T<=2&&(k--,T+=12),Math.floor(365.25*(k+4716))+Math.floor(30.6001*(T+1))+v-1524.5},fromJD:function(k){var T=Math.floor(k+.5)+1524,v=Math.floor((T-122.1)/365.25),c=Math.floor(365.25*v),i=Math.floor((T-c)/30.6001),s=i-Math.floor(i<14?1:13),a=v-Math.floor(s>2?4716:4715),o=T-c-Math.floor(30.6001*i);return a<=0&&a--,this.newDate(a,s,o)}}),I.calendars.julian=f},83290:function(se,U,r){var I=r(63489);function f(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}function k(v,c){return v-c*Math.floor(v/c)}function T(v,c){return k(v-1,c)+1}r(56131)(f.prototype=new I.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,I.local.invalidYear),!1},formatYear:function(v){v=this._validate(v,this.minMonth,this.minDay,I.local.invalidYear).year();var c=Math.floor(v/400);return v%=400,v+=v<0?400:0,c+"."+Math.floor(v/20)+"."+v%20},forYear:function(v){if((v=v.split(".")).length<3)throw"Invalid Mayan year";for(var c=0,i=0;i<v.length;i++){var s=parseInt(v[i],10);if(Math.abs(s)>19||i>0&&s<0)throw"Invalid Mayan year";c=20*c+s}return c},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,I.local.invalidYear),18},weekOfYear:function(v,c,i){return this._validate(v,c,i,I.local.invalidDate),0},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,I.local.invalidYear),360},daysInMonth:function(v,c){return this._validate(v,c,this.minDay,I.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(v,c,i){return this._validate(v,c,i,I.local.invalidDate).day()},weekDay:function(v,c,i){return this._validate(v,c,i,I.local.invalidDate),!0},extraInfo:function(v,c,i){var s=this._validate(v,c,i,I.local.invalidDate).toJD(),a=this._toHaab(s),o=this._toTzolkin(s);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(v){var c=k(8+(v-=this.jdEpoch)+340,365);return[Math.floor(c/20)+1,k(c,20)]},_toTzolkin:function(v){return[T(20+(v-=this.jdEpoch),20),T(v+4,13)]},toJD:function(v,c,i){var s=this._validate(v,c,i,I.local.invalidDate);return s.day()+20*s.month()+360*s.year()+this.jdEpoch},fromJD:function(v){v=Math.floor(v)+.5-this.jdEpoch;var c=Math.floor(v/360);v%=360,v+=v<0?360:0;var i=Math.floor(v/20);return this.newDate(c,i,v%20)}}),I.calendars.mayan=f},29108:function(se,U,r){var I=r(63489),C=r(56131);function f(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}f.prototype=new I.baseCalendar;var k=I.instance("gregorian");C(f.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear||I.regionalOptions[""].invalidYear);return k.leapYear(v.year()+(v.year()<1?1:0)+1469)},weekOfYear:function(T,v,c){var i=this.newDate(T,v,c);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var c=this._validate(T,v,this.minDay,I.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(T,v,c){return(this.dayOfWeek(T,v,c)||7)<6},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidMonth);(T=i.year())<0&&T++;for(var s=i.day(),a=1;a<i.month();a++)s+=this.daysPerMonth[a-1];return s+k.toJD(T+1468,3,13)},fromJD:function(T){T=Math.floor(T+.5);for(var v=Math.floor((T-(this.jdEpoch-1))/366);T>=this.toJD(v+1,1,1);)v++;for(var c=T-Math.floor(this.toJD(v,1,1)+.5)+1,i=1;c>this.daysInMonth(v,i);)c-=this.daysInMonth(v,i),i++;return this.newDate(v,i,c)}}),I.calendars.nanakshahi=f},55422:function(se,U,r){var I=r(63489);function f(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(k){return this.daysInYear(k)!==this.daysPerYear},weekOfYear:function(k,T,v){var c=this.newDate(k,T,v);return c.add(-c.dayOfWeek(),"d"),Math.floor((c.dayOfYear()-1)/7)+1},daysInYear:function(k){if(k=this._validate(k,this.minMonth,this.minDay,I.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[k])return this.daysPerYear;for(var T=0,v=this.minMonth;v<=12;v++)T+=this.NEPALI_CALENDAR_DATA[k][v];return T},daysInMonth:function(k,T){return k.year&&(T=k.month(),k=k.year()),this._validate(k,T,this.minDay,I.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[k]?this.daysPerMonth[T-1]:this.NEPALI_CALENDAR_DATA[k][T]},weekDay:function(k,T,v){return 6!==this.dayOfWeek(k,T,v)},toJD:function(k,T,v){var c=this._validate(k,T,v,I.local.invalidDate);k=c.year(),T=c.month(),v=c.day();var i=I.instance(),s=0,a=T,o=k;this._createMissingCalendarData(k);var l=k-(a>9||9===a&&v>=this.NEPALI_CALENDAR_DATA[o][0]?56:57);for(9!==T&&(s=v,a--);9!==a;)a<=0&&(a=12,o--),s+=this.NEPALI_CALENDAR_DATA[o][a],a--;return 9===T?(s+=v-this.NEPALI_CALENDAR_DATA[o][0])<0&&(s+=i.daysInYear(l)):s+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],i.newDate(l,1,1).add(s,"d").toJD()},fromJD:function(k){var T=I.instance().fromJD(k),v=T.year(),c=T.dayOfYear(),i=v+56;this._createMissingCalendarData(i);for(var s=9,o=this.NEPALI_CALENDAR_DATA[i][s]-this.NEPALI_CALENDAR_DATA[i][0]+1;c>o;)++s>12&&(s=1,i++),o+=this.NEPALI_CALENDAR_DATA[i][s];return this.newDate(i,s,this.NEPALI_CALENDAR_DATA[i][s]-(o-c))},_createMissingCalendarData:function(k){var T=this.daysPerMonth.slice(0);T.unshift(17);for(var v=k-1;v<k+2;v++)void 0===this.NEPALI_CALENDAR_DATA[v]&&(this.NEPALI_CALENDAR_DATA[v]=T)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),I.calendars.nepali=f},94320:function(se,U,r){var I=r(63489);function f(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}function k(T,v){return T-v*Math.floor(T/v)}r(56131)(f.prototype=new I.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return 682*((v.year()-(v.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(T,v,c){var i=this.newDate(T,v,c);return i.add(-(i.dayOfWeek()+1)%7,"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var c=this._validate(T,v,this.minDay,I.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(12===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(T,v,c){return 5!==this.dayOfWeek(T,v,c)},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);T=i.year(),v=i.month(),c=i.day();var s=T-(T>=0?474:473),a=474+k(s,2820);return c+(v<=7?31*(v-1):30*(v-1)+6)+Math.floor((682*a-110)/2816)+365*(a-1)+1029983*Math.floor(s/2820)+this.jdEpoch-1},fromJD:function(T){var v=(T=Math.floor(T)+.5)-this.toJD(475,1,1),c=Math.floor(v/1029983),i=k(v,1029983),s=2820;if(1029982!==i){var a=Math.floor(i/366),o=k(i,366);s=Math.floor((2134*a+2816*o+2815)/1028522)+a+1}var l=s+2820*c+474,u=T-this.toJD(l=l<=0?l-1:l,1,1)+1,d=u<=186?Math.ceil(u/31):Math.ceil((u-6)/30),g=T-this.toJD(l,d,1)+1;return this.newDate(l,d,g)}}),I.calendars.persian=f,I.calendars.jalali=f},31320:function(se,U,r){var I=r(63489),C=r(56131),f=I.instance();function k(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}C(k.prototype=new I.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return T=this._t2gYear(v.year()),f.leapYear(T)},weekOfYear:function(T,v,c){var i=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return T=this._t2gYear(i.year()),f.weekOfYear(T,i.month(),i.day())},daysInMonth:function(T,v){var c=this._validate(T,v,this.minDay,I.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(T,v,c){return(this.dayOfWeek(T,v,c)||7)<6},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);return T=this._t2gYear(i.year()),f.toJD(T,i.month(),i.day())},fromJD:function(T){var v=f.fromJD(T),c=this._g2tYear(v.year());return this.newDate(c,v.month(),v.day())},_t2gYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)},_g2tYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)}}),I.calendars.taiwan=k},51367:function(se,U,r){var I=r(63489),C=r(56131),f=I.instance();function k(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}C(k.prototype=new I.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return T=this._t2gYear(v.year()),f.leapYear(T)},weekOfYear:function(T,v,c){var i=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return T=this._t2gYear(i.year()),f.weekOfYear(T,i.month(),i.day())},daysInMonth:function(T,v){var c=this._validate(T,v,this.minDay,I.local.invalidMonth);return this.daysPerMonth[c.month()-1]+(2===c.month()&&this.leapYear(c.year())?1:0)},weekDay:function(T,v,c){return(this.dayOfWeek(T,v,c)||7)<6},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate);return T=this._t2gYear(i.year()),f.toJD(T,i.month(),i.day())},fromJD:function(T){var v=f.fromJD(T),c=this._g2tYear(v.year());return this.newDate(c,v.month(),v.day())},_t2gYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)},_g2tYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)}}),I.calendars.thai=k},21457:function(se,U,r){var I=r(63489);function f(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}r(56131)(f.prototype=new I.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,I.local.invalidYear);return 355===this.daysInYear(v.year())},weekOfYear:function(T,v,c){var i=this.newDate(T,v,c);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){for(var v=0,c=1;c<=12;c++)v+=this.daysInMonth(T,c);return v},daysInMonth:function(T,v){for(var c=this._validate(T,v,this.minDay,I.local.invalidMonth).toJD()-24e5+.5,i=0,s=0;s<k.length;s++){if(k[s]>c)return k[i]-k[i-1];i++}return 30},weekDay:function(T,v,c){return 5!==this.dayOfWeek(T,v,c)},toJD:function(T,v,c){var i=this._validate(T,v,c,I.local.invalidDate),s=12*(i.year()-1)+i.month()-15292;return i.day()+k[s-1]-1+24e5-.5},fromJD:function(T){for(var v=T-24e5+.5,c=0,i=0;i<k.length&&!(k[i]>v);i++)c++;var s=c+15292,a=Math.floor((s-1)/12);return this.newDate(a+1,s-12*a,v-k[c-1]+1)},isValid:function(T,v,c){var i=I.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(i=(T=null!=T.year?T.year:T)>=1276&&T<=1500),i},_validate:function(T,v,c,i){var s=I.baseCalendar.prototype._validate.apply(this,arguments);if(s.year<1276||s.year>1500)throw i.replace(/\{0\}/,this.local.name);return s}}),I.calendars.ummalqura=f;var k=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function(se,U,r){var I=r(56131);function C(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function f(i,s,a,o){if(this._calendar=i,this._year=s,this._month=a,this._day=o,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function k(i,s){return"000000".substring(0,s-(i=""+i).length)+i}function T(){this.shortYearCutoff="+10"}function v(i){this.local=this.regionalOptions[i]||this.regionalOptions[""]}I(C.prototype,{instance:function(i,s){i=(i||"gregorian").toLowerCase();var a=this._localCals[i+"-"+(s=s||"")];if(!a&&this.calendars[i]&&(a=new this.calendars[i](s),this._localCals[i+"-"+s]=a),!a)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,i);return a},newDate:function(i,s,a,o,l){return(o=(null!=i&&i.year?i.calendar():"string"==typeof o?this.instance(o,l):o)||this.instance()).newDate(i,s,a)},substituteDigits:function(i){return function(s){return(s+"").replace(/[0-9]/g,function(a){return i[a]})}},substituteChineseDigits:function(i,s){return function(a){for(var o="",l=0;a>0;){var u=a%10;o=(0===u?"":i[u]+s[l])+o,l++,a=Math.floor(a/10)}return 0===o.indexOf(i[1]+s[1])&&(o=o.substr(1)),o||i[0]}}}),I(f.prototype,{newDate:function(i,s,a){return this._calendar.newDate(i??this,s,a)},year:function(i){return 0===arguments.length?this._year:this.set(i,"y")},month:function(i){return 0===arguments.length?this._month:this.set(i,"m")},day:function(i){return 0===arguments.length?this._day:this.set(i,"d")},date:function(i,s,a){if(!this._calendar.isValid(i,s,a))throw(c.local.invalidDate||c.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=i,this._month=s,this._day=a,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(i,s){return this._calendar.add(this,i,s)},set:function(i,s){return this._calendar.set(this,i,s)},compareTo:function(i){if(this._calendar.name!==i._calendar.name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,i._calendar.local.name);var s=this._year!==i._year?this._year-i._year:this._month!==i._month?this.monthOfYear()-i.monthOfYear():this._day-i._day;return 0===s?0:s<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(i){return this._calendar.fromJD(i)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(i){return this._calendar.fromJSDate(i)},toString:function(){return(this.year()<0?"-":"")+k(Math.abs(this.year()),4)+"-"+k(this.month(),2)+"-"+k(this.day(),2)}}),I(T.prototype,{_validateLevel:0,newDate:function(i,s,a){return null==i?this.today():(i.year&&(this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate),a=i.day(),s=i.month(),i=i.year()),new f(this,i,s,a))},today:function(){return this.fromJSDate(new Date)},epoch:function(i){return this._validate(i,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(i){var s=this._validate(i,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(s.year()<0?"-":"")+k(Math.abs(s.year()),4)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear),12},monthOfYear:function(i,s){var a=this._validate(i,s,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return(a.month()+this.monthsInYear(a)-this.firstMonth)%this.monthsInYear(a)+this.minMonth},fromMonthOfYear:function(i,s){var a=(s+this.firstMonth-2*this.minMonth)%this.monthsInYear(i)+this.minMonth;return this._validate(i,a,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth),a},daysInYear:function(i){var s=this._validate(i,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return this.leapYear(s)?366:365},dayOfYear:function(i,s,a){var o=this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate);return o.toJD()-this.newDate(o.year(),this.fromMonthOfYear(o.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(i,s,a){var o=this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(o))+2)%this.daysInWeek()},extraInfo:function(i,s,a){return this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate),{}},add:function(i,s,a){return this._validate(i,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate),this._correctAdd(i,this._add(i,s,a),s,a)},_add:function(i,s,a){if(this._validateLevel++,"d"===a||"w"===a){var o=i.toJD()+s*("w"===a?this.daysInWeek():1),l=i.calendar().fromJD(o);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var u=i.year()+("y"===a?s:0),d=i.monthOfYear()+("m"===a?s:0);l=i.day(),"y"===a?(i.month()!==this.fromMonthOfYear(u,d)&&(d=this.newDate(u,i.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(u)),l=Math.min(l,this.daysInMonth(u,this.fromMonthOfYear(u,d)))):"m"===a&&(function(h){for(;d<h.minMonth;)u--,d+=h.monthsInYear(u);for(var w=h.monthsInYear(u);d>w-1+h.minMonth;)u++,d-=w,w=h.monthsInYear(u)}(this),l=Math.min(l,this.daysInMonth(u,this.fromMonthOfYear(u,d))));var g=[u,this.fromMonthOfYear(u,d),l];return this._validateLevel--,g}catch(h){throw this._validateLevel--,h}},_correctAdd:function(i,s,a,o){if(!(this.hasYearZero||"y"!==o&&"m"!==o||0!==s[0]&&i.year()>0==s[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[o];s=this._add(i,a*l[0]+(a<0?-1:1)*l[1],l[2])}return i.date(s[0],s[1],s[2])},set:function(i,s,a){this._validate(i,this.minMonth,this.minDay,c.local.invalidDate||c.regionalOptions[""].invalidDate);var o="y"===a?s:i.year(),l="m"===a?s:i.month(),u="d"===a?s:i.day();return"y"!==a&&"m"!==a||(u=Math.min(u,this.daysInMonth(o,l))),i.date(o,l,u)},isValid:function(i,s,a){this._validateLevel++;var o=this.hasYearZero||0!==i;if(o){var l=this.newDate(i,s,this.minDay);o=s>=this.minMonth&&s-this.minMonth<this.monthsInYear(l)&&a>=this.minDay&&a-this.minDay<this.daysInMonth(l)}return this._validateLevel--,o},toJSDate:function(i,s,a){var o=this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate);return c.instance().fromJD(this.toJD(o)).toJSDate()},fromJSDate:function(i){return this.fromJD(c.instance().fromJSDate(i).toJD())},_validate:function(i,s,a,o){if(i.year){if(0===this._validateLevel&&this.name!==i.calendar().name)throw(c.local.differentCalendars||c.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,i.calendar().local.name);return i}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(i,s,a))throw o.replace(/\{0\}/,this.local.name);var l=this.newDate(i,s,a);return this._validateLevel--,l}catch(u){throw this._validateLevel--,u}}}),I(v.prototype=new T,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var s=this._validate(i,this.minMonth,this.minDay,c.local.invalidYear||c.regionalOptions[""].invalidYear);return(i=s.year()+(s.year()<0?1:0))%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(i,s,a){var o=this.newDate(i,s,a);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(i,s){var a=this._validate(i,s,this.minDay,c.local.invalidMonth||c.regionalOptions[""].invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(i,s,a){return(this.dayOfWeek(i,s,a)||7)<6},toJD:function(i,s,a){var o=this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate);i=o.year(),s=o.month(),a=o.day(),i<0&&i++,s<3&&(s+=12,i--);var l=Math.floor(i/100),u=2-l+Math.floor(l/4);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(s+1))+a+u-1524.5},fromJD:function(i){var s=Math.floor(i+.5),a=Math.floor((s-1867216.25)/36524.25),o=1524+(a=s+1+a-Math.floor(a/4)),l=Math.floor((o-122.1)/365.25),u=Math.floor(365.25*l),d=Math.floor((o-u)/30.6001),g=o-u-Math.floor(30.6001*d),h=d-(d>13.5?13:1),w=l-(h>2.5?4716:4715);return w<=0&&w--,this.newDate(w,h,g)},toJSDate:function(i,s,a){var o=this._validate(i,s,a,c.local.invalidDate||c.regionalOptions[""].invalidDate),l=new Date(o.year(),o.month()-1,o.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(i){return this.newDate(i.getFullYear(),i.getMonth()+1,i.getDate())}});var c=se.exports=new C;c.cdate=f,c.baseCalendar=T,c.calendars.gregorian=v},94338:function(se,U,r){var I=r(56131),C=r(63489);I(C.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),C.local=C.regionalOptions[""],I(C.cdate.prototype,{formatDate:function(f,k){return"string"!=typeof f&&(k=f,f=""),this._calendar.formatDate(f||"",this,k)}}),I(C.baseCalendar.prototype,{UNIX_EPOCH:C.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:C.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(f,k,T){if("string"!=typeof f&&(T=k,k=f,f=""),!k)return"";if(k.calendar()!==this)throw C.local.invalidFormat||C.regionalOptions[""].invalidFormat;f=f||this.local.dateFormat;for(var v,c,i,s=(T=T||{}).dayNamesShort||this.local.dayNamesShort,a=T.dayNames||this.local.dayNames,o=T.monthNumbers||this.local.monthNumbers,l=T.monthNamesShort||this.local.monthNamesShort,u=T.monthNames||this.local.monthNames,d=function(m,D){for(var S=1;M+S<f.length&&f.charAt(M+S)===m;)S++;return M+=S-1,Math.floor(S/(D||1))>1},g=function(m,D,S,O){var P=""+D;if(d(m,O))for(;P.length<S;)P="0"+P;return P},h=this,y=function(m,D){return D?"function"==typeof u?u.call(h,m):u[m.month()-h.minMonth]:"function"==typeof l?l.call(h,m):l[m.month()-h.minMonth]},p=this.local.digits,_=function(m){return T.localNumbers&&p?p(m):m},x="",b=!1,M=0;M<f.length;M++)if(b)"'"!==f.charAt(M)||d("'")?x+=f.charAt(M):b=!1;else switch(f.charAt(M)){case"d":x+=_(g("d",k.day(),2));break;case"D":x+=(v=k.dayOfWeek(),c=s,i=a,d("D")?i[v]:c[v]);break;case"o":x+=g("o",k.dayOfYear(),3);break;case"w":x+=g("w",k.weekOfYear(),2);break;case"m":x+=(m=k,"function"==typeof o?o.call(h,m,d("m")):_(g("m",m.month(),2)));break;case"M":x+=y(k,d("M"));break;case"y":x+=d("y",2)?k.year():(k.year()%100<10?"0":"")+k.year()%100;break;case"Y":d("Y",2),x+=k.formatYear();break;case"J":x+=k.toJD();break;case"@":x+=(k.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(k.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":d("'")?x+="'":b=!0;break;default:x+=f.charAt(M)}var m;return x},parseDate:function(f,k,T){if(null==k)throw C.local.invalidArguments||C.regionalOptions[""].invalidArguments;if(""===(k="object"==typeof k?k.toString():k+""))return null;f=f||this.local.dateFormat;var v=(T=T||{}).shortYearCutoff||this.shortYearCutoff;v="string"!=typeof v?v:this.today().year()%100+parseInt(v,10);for(var c=T.dayNamesShort||this.local.dayNamesShort,i=T.dayNames||this.local.dayNames,s=T.parseMonth||this.local.parseMonth,a=T.monthNumbers||this.local.monthNumbers,o=T.monthNamesShort||this.local.monthNamesShort,l=T.monthNames||this.local.monthNames,u=-1,d=-1,g=-1,h=-1,w=-1,y=!1,p=!1,_=function(B,J){for(var z=1;P+z<f.length&&f.charAt(P+z)===B;)z++;return P+=z-1,Math.floor(z/(J||1))>1},x=function(B,J){var z=_(B,J),$=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],G=new RegExp("^-?\\d{1,"+$+"}"),H=k.substring(O).match(G);if(!H)throw(C.local.missingNumberAt||C.regionalOptions[""].missingNumberAt).replace(/\{0\}/,O);return O+=H[0].length,parseInt(H[0],10)},b=this,M=function(){if("function"==typeof a){_("m");var B=a.call(b,k.substring(O));return O+=B.length,B}return x("m")},m=function(B,J,z,$){for(var G=_(B,$)?z:J,H=0;H<G.length;H++)if(k.substr(O,G[H].length).toLowerCase()===G[H].toLowerCase())return O+=G[H].length,H+b.minMonth;throw(C.local.unknownNameAt||C.regionalOptions[""].unknownNameAt).replace(/\{0\}/,O)},D=function(){if("function"==typeof l){var B=_("M")?l.call(b,k.substring(O)):o.call(b,k.substring(O));return O+=B.length,B}return m("M",o,l)},S=function(){if(k.charAt(O)!==f.charAt(P))throw(C.local.unexpectedLiteralAt||C.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,O);O++},O=0,P=0;P<f.length;P++)if(p)"'"!==f.charAt(P)||_("'")?S():p=!1;else switch(f.charAt(P)){case"d":h=x("d");break;case"D":m("D",c,i);break;case"o":w=x("o");break;case"w":x("w");break;case"m":g=M();break;case"M":g=D();break;case"y":var R=P;y=!_("y",2),P=R,d=x("y",2);break;case"Y":d=x("Y",2);break;case"J":u=x("J")+.5,"."===k.charAt(O)&&(O++,x("J"));break;case"@":u=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":u=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":O=k.length;break;case"'":_("'")?S():p=!0;break;default:S()}if(O<k.length)throw C.local.unexpectedText||C.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&y&&(d+=-1===v?1900:this.today().year()-this.today().year()%100-(d<=v?0:100)),"string"==typeof g&&(g=s.call(this,d,g)),w>-1){h=w;for(var F=this.daysInMonth(d,g=1);h>F;F=this.daysInMonth(d,g))g++,h-=F}return u>-1?this.fromJD(u):this.newDate(d,g,h)},determineDate:function(f,k,T,v,c){T&&"object"!=typeof T&&(c=v,v=T,T=null),"string"!=typeof v&&(c=v,v="");var i=this;return k=k?k.newDate():null,null==f?k:"string"==typeof f?function(s){try{return i.parseDate(v,s,c)}catch{}for(var a=((s=s.toLowerCase()).match(/^c/)&&T?T.newDate():null)||i.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,l=o.exec(s);l;)a.add(parseInt(l[1],10),l[2]||"d"),l=o.exec(s);return a}(f):"number"==typeof f?isNaN(f)||f===1/0||f===-1/0?k:i.today().add(f,"d"):i.newDate(f)}})},69862:function(){},40964:function(){},72077:function(se,U,r){"use strict";var I=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],C=typeof globalThis>"u"?r.g:globalThis;se.exports=function(){for(var f=[],k=0;k<I.length;k++)"function"==typeof C[I[k]]&&(f[f.length]=I[k]);return f}},81684:function(se,U,r){"use strict";function I(ke,Te,we){ke.prototype=Te.prototype=we,we.constructor=ke}function C(ke,Te){var we=Object.create(ke.prototype);for(var je in Te)we[je]=Te[je];return we}function f(){}r.d(U,{sX:function(){return Re},k4:function(){return Q}});var k=.7,T=1/k,v="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3,8})$/,a=new RegExp("^rgb\\(".concat(v,",").concat(v,",").concat(v,"\\)$")),o=new RegExp("^rgb\\(".concat(i,",").concat(i,",").concat(i,"\\)$")),l=new RegExp("^rgba\\(".concat(v,",").concat(v,",").concat(v,",").concat(c,"\\)$")),u=new RegExp("^rgba\\(".concat(i,",").concat(i,",").concat(i,",").concat(c,"\\)$")),d=new RegExp("^hsl\\(".concat(c,",").concat(i,",").concat(i,"\\)$")),g=new RegExp("^hsla\\(".concat(c,",").concat(i,",").concat(i,",").concat(c,"\\)$")),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function w(){return this.rgb().formatHex()}function y(){return this.rgb().formatRgb()}function p(ke){var Te,we;return ke=(ke+"").trim().toLowerCase(),(Te=s.exec(ke))?(we=Te[1].length,Te=parseInt(Te[1],16),6===we?_(Te):3===we?new M(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===we?x(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===we?x(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=a.exec(ke))?new M(Te[1],Te[2],Te[3],1):(Te=o.exec(ke))?new M(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=l.exec(ke))?x(Te[1],Te[2],Te[3],Te[4]):(Te=u.exec(ke))?x(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=d.exec(ke))?R(Te[1],Te[2]/100,Te[3]/100,1):(Te=g.exec(ke))?R(Te[1],Te[2]/100,Te[3]/100,Te[4]):h.hasOwnProperty(ke)?_(h[ke]):"transparent"===ke?new M(NaN,NaN,NaN,0):null}function _(ke){return new M(ke>>16&255,ke>>8&255,255&ke,1)}function x(ke,Te,we,je){return je<=0&&(ke=Te=we=NaN),new M(ke,Te,we,je)}function b(ke,Te,we,je){return 1===arguments.length?((Ce=ke)instanceof f||(Ce=p(Ce)),Ce?new M((Ce=Ce.rgb()).r,Ce.g,Ce.b,Ce.opacity):new M):new M(ke,Te,we,je??1);var Ce}function M(ke,Te,we,je){this.r=+ke,this.g=+Te,this.b=+we,this.opacity=+je}function m(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b))}function D(){var ke=S(this.opacity);return"".concat(1===ke?"rgb(":"rgba(").concat(O(this.r),", ").concat(O(this.g),", ").concat(O(this.b)).concat(1===ke?")":", ".concat(ke,")"))}function S(ke){return isNaN(ke)?1:Math.max(0,Math.min(1,ke))}function O(ke){return Math.max(0,Math.min(255,Math.round(ke)||0))}function P(ke){return((ke=O(ke))<16?"0":"")+ke.toString(16)}function R(ke,Te,we,je){return je<=0?ke=Te=we=NaN:we<=0||we>=1?ke=Te=NaN:Te<=0&&(ke=NaN),new B(ke,Te,we,je)}function F(ke){if(ke instanceof B)return new B(ke.h,ke.s,ke.l,ke.opacity);if(ke instanceof f||(ke=p(ke)),!ke)return new B;if(ke instanceof B)return ke;var Te=(ke=ke.rgb()).r/255,we=ke.g/255,je=ke.b/255,Ce=Math.min(Te,we,je),Ie=Math.max(Te,we,je),ge=NaN,me=Ie-Ce,ce=(Ie+Ce)/2;return me?(ge=Te===Ie?(we-je)/me+6*(we<je):we===Ie?(je-Te)/me+2:(Te-we)/me+4,me/=ce<.5?Ie+Ce:2-Ie-Ce,ge*=60):me=ce>0&&ce<1?0:ge,new B(ge,me,ce,ke.opacity)}function B(ke,Te,we,je){this.h=+ke,this.s=+Te,this.l=+we,this.opacity=+je}function J(ke){return(ke=(ke||0)%360)<0?ke+360:ke}function z(ke){return Math.max(0,Math.min(1,ke||0))}function $(ke,Te,we){return 255*(ke<60?Te+(we-Te)*ke/60:ke<180?we:ke<240?Te+(we-Te)*(240-ke)/60:Te)}function G(ke,Te,we,je,Ce){var Ie=ke*ke,ge=Ie*ke;return((1-3*ke+3*Ie-ge)*Te+(4-6*Ie+3*ge)*we+(1+3*ke+3*Ie-3*ge)*je+ge*Ce)/6}I(f,p,{copy:function(ke){return Object.assign(new this.constructor,this,ke)},displayable:function(){return this.rgb().displayable()},hex:w,formatHex:w,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return F(this).formatHsl()},formatRgb:y,toString:y}),I(M,b,C(f,{brighter:function(ke){return ke=null==ke?T:Math.pow(T,ke),new M(this.r*ke,this.g*ke,this.b*ke,this.opacity)},darker:function(ke){return ke=null==ke?k:Math.pow(k,ke),new M(this.r*ke,this.g*ke,this.b*ke,this.opacity)},rgb:function(){return this},clamp:function(){return new M(O(this.r),O(this.g),O(this.b),S(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m,formatHex:m,formatHex8:function(){return"#".concat(P(this.r)).concat(P(this.g)).concat(P(this.b)).concat(P(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:D,toString:D})),I(B,function(ke,Te,we,je){return 1===arguments.length?F(ke):new B(ke,Te,we,je??1)},C(f,{brighter:function(ke){return ke=null==ke?T:Math.pow(T,ke),new B(this.h,this.s,this.l*ke,this.opacity)},darker:function(ke){return ke=null==ke?k:Math.pow(k,ke),new B(this.h,this.s,this.l*ke,this.opacity)},rgb:function(){var ke=this.h%360+360*(this.h<0),Te=isNaN(ke)||isNaN(this.s)?0:this.s,we=this.l,je=we+(we<.5?we:1-we)*Te,Ce=2*we-je;return new M($(ke>=240?ke-240:ke+120,Ce,je),$(ke,Ce,je),$(ke<120?ke+240:ke-120,Ce,je),this.opacity)},clamp:function(){return new B(J(this.h),z(this.s),z(this.l),S(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ke=S(this.opacity);return"".concat(1===ke?"hsl(":"hsla(").concat(J(this.h),", ").concat(100*z(this.s),"%, ").concat(100*z(this.l),"%").concat(1===ke?")":", ".concat(ke,")"))}}));var H=function(ke){return function(){return ke}};function X(ke,Te){var je,Ce,we=Te-ke;return we?(je=ke,Ce=we,function(Ie){return je+Ie*Ce}):H(isNaN(ke)?Te:ke)}var K=function ke(Te){var Ce,we=1==(Ce=+(Ce=Te))?X:function(Ie,ge){return ge-Ie?(me=Ie,ce=ge,Ae=Ce,me=Math.pow(me,Ae),ce=Math.pow(ce,Ae)-me,Ae=1/Ae,function(Ne){return Math.pow(me+Ne*ce,Ae)}):H(isNaN(Ie)?ge:Ie);var me,ce,Ae};function je(Ce,Ie){var ge=we((Ce=b(Ce)).r,(Ie=b(Ie)).r),me=we(Ce.g,Ie.g),ce=we(Ce.b,Ie.b),Ae=X(Ce.opacity,Ie.opacity);return function(Ne){return Ce.r=ge(Ne),Ce.g=me(Ne),Ce.b=ce(Ne),Ce.opacity=Ae(Ne),Ce+""}}return je.gamma=ke,je}(1);function ue(ke){return function(Te){var we,je,Ce=Te.length,Ie=new Array(Ce),ge=new Array(Ce),me=new Array(Ce);for(we=0;we<Ce;++we)je=b(Te[we]),Ie[we]=je.r||0,ge[we]=je.g||0,me[we]=je.b||0;return Ie=ke(Ie),ge=ke(ge),me=ke(me),je.opacity=1,function(ce){return je.r=Ie(ce),je.g=ge(ce),je.b=me(ce),je+""}}}function ae(ke,Te){var we,je=Te?Te.length:0,Ce=ke?Math.min(je,ke.length):0,Ie=new Array(Ce),ge=new Array(je);for(we=0;we<Ce;++we)Ie[we]=Re(ke[we],Te[we]);for(;we<je;++we)ge[we]=Te[we];return function(me){for(we=0;we<Ce;++we)ge[we]=Ie[we](me);return ge}}function ne(ke,Te){var we=new Date;return ke=+ke,Te=+Te,function(je){return we.setTime(ke*(1-je)+Te*je),we}}function Q(ke,Te){return ke=+ke,Te=+Te,function(we){return ke*(1-we)+Te*we}}function ie(ke){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(ke)}function le(ke,Te){var we,je={},Ce={};for(we in null!==ke&&"object"===ie(ke)||(ke={}),null!==Te&&"object"===ie(Te)||(Te={}),Te)we in ke?je[we]=Re(ke[we],Te[we]):Ce[we]=Te[we];return function(Ie){for(we in je)Ce[we]=je[we](Ie);return Ce}}ue(function(ke){var Te=ke.length-1;return function(we){var je=we<=0?we=0:we>=1?(we=1,Te-1):Math.floor(we*Te),Ce=ke[je],Ie=ke[je+1];return G((we-je/Te)*Te,je>0?ke[je-1]:2*Ce-Ie,Ce,Ie,je<Te-1?ke[je+2]:2*Ie-Ce)}}),ue(function(ke){var Te=ke.length;return function(we){var je=Math.floor(((we%=1)<0?++we:we)*Te);return G((we-je/Te)*Te,ke[(je+Te-1)%Te],ke[je%Te],ke[(je+1)%Te],ke[(je+2)%Te])}});var fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,he=new RegExp(fe.source,"g");function pe(ke,Te){var we,je,Ce,Ae,Ie=fe.lastIndex=he.lastIndex=0,ge=-1,me=[],ce=[];for(ke+="",Te+="";(we=fe.exec(ke))&&(je=he.exec(Te));)(Ce=je.index)>Ie&&(Ce=Te.slice(Ie,Ce),me[ge]?me[ge]+=Ce:me[++ge]=Ce),(we=we[0])===(je=je[0])?me[ge]?me[ge]+=je:me[++ge]=je:(me[++ge]=null,ce.push({i:ge,x:Q(we,je)})),Ie=he.lastIndex;return Ie<Te.length&&(Ce=Te.slice(Ie),me[ge]?me[ge]+=Ce:me[++ge]=Ce),me.length<2?ce[0]?(Ae=ce[0].x,function(Ne){return Ae(Ne)+""}):function(Ae){return function(){return Ae}}(Te):(Te=ce.length,function(Ae){for(var Ne,De=0;De<Te;++De)me[(Ne=ce[De]).i]=Ne.x(Ae);return me.join("")})}function xe(ke,Te){Te||(Te=[]);var we,je=ke?Math.min(Te.length,ke.length):0,Ce=Te.slice();return function(Ie){for(we=0;we<je;++we)Ce[we]=ke[we]*(1-Ie)+Te[we]*Ie;return Ce}}function Ee(ke){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Te){return typeof Te}:function(Te){return Te&&"function"==typeof Symbol&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te})(ke)}function Re(ke,Te){var we,je,Ce=Ee(Te);return null==Te||"boolean"===Ce?H(Te):("number"===Ce?Q:"string"===Ce?(we=p(Te))?(Te=we,K):pe:Te instanceof p?K:Te instanceof Date?ne:(je=Te,!ArrayBuffer.isView(je)||je instanceof DataView?Array.isArray(Te)?ae:"function"!=typeof Te.valueOf&&"function"!=typeof Te.toString||isNaN(Te)?le:Q:xe))(ke,Te)}},40402:function(se){"use strict";se.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function(se){"use strict";se.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function(se){"use strict";se.exports=JSON.parse('["normal","italic","oblique"]')},15659:function(se){"use strict";se.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function(se){"use strict";se.exports=JSON.parse('["inherit","initial","unset"]')},41901:function(se){"use strict";se.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Sa={};function xr(se){var U=Sa[se];if(void 0!==U)return U.exports;var r=Sa[se]={exports:{}};return ss[se].call(r.exports,r,r.exports,xr),r.exports}return xr.n=function(se){var U=se&&se.__esModule?function(){return se.default}:function(){return se};return xr.d(U,{a:U}),U},xr.d=function(se,U){for(var r in U)xr.o(U,r)&&!xr.o(se,r)&&Object.defineProperty(se,r,{enumerable:!0,get:U[r]})},xr.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),xr.o=function(se,U){return Object.prototype.hasOwnProperty.call(se,U)},xr.r=function(se){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(se,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(se,"__esModule",{value:!0})},xr(27909)}()}},bd=>{bd(bd.s=458)}]);